var isManageAttendanceData=!1,isLead=!1,Attendance={MODE:"attendance"};function IsNumeric(input){return/^-{0,1}\d*\.{0,1}\d+$/.test(input)}Attendance.isInEmbedPage=!1,Attendance.isInitialLoad=!0,Attendance.disDate=function(dval){if(null===dval||""===dval||void 0===dval)return"-";var mmm=dval.match(/[a-z]+/i);return null===mmm?dval:dval.replace(/[a-z]+/i,ZPI18N.getString("zp."+mmm[0].toLowerCase()))},Attendance.escapeHtml=function(string){return string=(string=string.replace(/'/g,"&#039;")).replace(/"/g,"&quot;")},Attendance.datesInHeader=function(fromDate,toDate){return fromDate===toDate?fromDate:fromDate+"  -  "+toDate},Attendance.noDataImg=function(path,imgClass,container){path=void 0!==path&&path>0?path:8;for(var nodata="<i class="+imgClass+">",i=1;i<=path;i++)nodata+='<i class="path'+i+'"></i>';nodata+="</i>",container.html(nodata)},Attendance.handleTableHeader=function(){if(Layout.Page.container.find("#ZPAtt_hoursView").is(":visible")){var tabCont=Layout.Page.container.find("#ZPAtt_hours_shiftLister"),scroller=Layout.Page.container.find("#ZPAtt_hours_shiftLister").parent(),boLeft=tabCont.offset().left,headCont=Layout.Page.container.find("#ZPAtt_hours_shiftListHeader");headCont.css("position","relative").css("left",boLeft-scroller.offset().left+"px"),scroller.off("scroll").on("scroll",function(){headCont.css("left",tabCont.offset().left-scroller.offset().left+"px")})}if(Layout.Page.container.find(".Scrcont").hasClass("fixTable")){var bodyTd,tableCont=Layout.Page.container.find(".Scrcont table:first"),headerCont=tableCont.find("thead:visible"),layoutLefPos=Layout.Page.container.offset().left,bodyLeft=tableCont.offset().left;headerCont.css("left",bodyLeft+"px"),headerCont.find("th:first").css("left",layoutLefPos+"px"),tableCont.parent().off("scroll").on("scroll",function(){headerCont.css("left",tableCont.parent().offset().left-$(this).scrollLeft()+"px")}),-1!==Layout.Page.pageId.indexOf("attendance-report-summaryreport")||-1!==Layout.Page.pageId.indexOf("attendance-report-earlylatereport")?(bodyTd=tableCont.find("[bodyCont] tr:first > td").not(":first"),headerCont.find("tr:first > th:visible").not(":first").each(function(ind){var paddPix=$(this).hasClass("text-center")?0===ind?16:17:1,width=bodyTd.eq(ind).width()+paddPix;$(this).css("min-width",width+"px").css("max-width","initial"),$(this).css("width",width+"px")})):(bodyTd=tableCont.find("tbody:first tr:first-child").children().not(":first"),headerCont.find("tr").children().not(":first").each(function(ind){$(this).css("min-width",bodyTd.eq(ind).width()+9+"px").css("max-width","initial")}))}},Attendance.resetForLoadData=function(){Attendance.Entry.loadToday=!1,Attendance.Entry.loadTabulerView=!0,Attendance.Report.dailyChartViewRep=null,Attendance.Report.empReportTableData=null,Attendance.Report.lateComerReport=null,Attendance.Report.monthlyReport=null,Attendance.Report.summaryReport=null,Attendance.Report.userReport=null},Attendance.statusI18n=function(status,notReplaceLeave){return-1!==status.indexOf("day Present")?status=status.replace("day Present",ZPI18N.getString("zp.daypresent")):-1!==status.indexOf("Present")&&(status=status.replace("Present",ZPI18N.getString("zp.present"))),-1!==status.indexOf("day Absent")?status=status.replace("day Absent",ZPI18N.getString("zp.dayabsent")):-1!==status.indexOf("Absent")&&(status=status.replace("Absent",ZPI18N.getString("zp.absent"))),notReplaceLeave||(status=Attendance.replaceLeave(status)),-1!==status.indexOf("Holiday")&&(-1!==status.indexOf("(0.5 day Holiday)")?status=(status=status.replace("0.5 day Holiday","0.5 "+ZPI18N.getString("zp.day")+" "+holiday_disName)).replace(ZPI18N.getString("zp.holidays"),ZPI18N.getString("zp.holiday")):!status.includes("(Holiday)")||status.includes("Paid Leave(Holiday)")||status.includes("Unpaid Leave(Holiday)")||status.includes("On Duty(Holiday)")?Att_Common_Operations.isAvailedRestrictedHoliday(status)&&(status=(status=status.replace("Holiday("+Att_Common_Operations.getRestrictedHolidayDisplayName()+")",holiday_disName+"("+Att_Common_Operations.getRestrictedHolidayDisplayName()+")")).replace(ZPI18N.getString("zp.holidays"),ZPI18N.getString("zp.holiday"))):status=(status=status.replace("(Holiday)","("+holiday_disName+")")).replace(ZPI18N.getString("zp.holidays"),ZPI18N.getString("zp.holiday"))),-1!==status.indexOf("Weekend")&&(status=status.replace("Weekend",ZPI18N.getString("zp.weekend"))),status},Attendance.replaceLeave=function(status){return-1!==status.indexOf("Paid Leave(")&&(")"===status[status.length-1]&&(status=status.substring(0,status.length-1)),status=-1!==status.indexOf("day Paid Leave(")?status.substring(status.indexOf("day Paid Leave(")+15,status.length)+"("+status.trim().substring(0,4).trim()+" "+ZPI18N.getString("zp.day")+")":status.replace("Paid Leave(","")),-1!==status.indexOf("On Duty(")&&(")"===status[status.length-1]&&(status=status.substring(0,status.length-1)),status=-1!==status.indexOf("day On Duty(")?status.substring(status.indexOf("day On Duty(")+12,status.length)+"("+status.trim().substring(0,4).trim()+" "+ZPI18N.getString("zp.day")+")":status.replace("On Duty(","")),-1!==status.indexOf("Unpaid Leave(")&&(")"===status[status.length-1]&&(status=status.substring(0,status.length-1)),status=-1!==status.indexOf("day Unpaid Leave(")?status.substring(status.indexOf("day Unpaid Leave(")+17,status.length)+"("+status.trim().substring(0,4).trim()+" "+ZPI18N.getString("zp.day")+")":status.replace("Unpaid Leave(","")),status},Attendance.remCommaInLast=function(status){return", "===status.substr(status.length-2)&&(status=status.substr(0,status.length-2)),status},Attendance.toggleLoadingDiv=function(isClose,main,emptyMsg){isClose?$("#"+Layout.Page.pageId+" #zp_page_loading").remove():0===main.find("tbody").children().length&&(emptyMsg&&emptyMsg.hide(),0===main.find("#zp_page_loading").length&&main.append(ZPeople.LOADING_HTML))},Attendance.appendScroller=function(id,isScroll){if(0===id.parent().parent().find("#zp_page_loading").length){var style="top:auto;bottom:auto;width:"+id.closest("div.Scrcont").width();if(isScroll){var html='<div class="Lodcont loader-pos" id="zp_page_loading"><div class="ctable"><div class="ctcell"><div class="loader-inner line-scale"><div></div><div></div>';html+="<div></div><div></div><div></div></div></div></div></div>",id.parent().parent().append(html)}else id.parent().parent().append(ZPeople.LOADING_HTML),style="width:"+id.closest("div.Scrcont").width();id.parent().parent().find("#zp_page_loading").attr("style",style+"px;")}},Attendance.deleteConfirmMsg=function(obj,toggleId,divClass){Layout.Page.container.find("."+divClass).css("overflow-x","hidden"),$(obj).parent().toggle("drop",{direction:"right"},200,function(){$(obj).parent().siblings("#"+toggleId).toggle("drop",200),Layout.Page.container.find("."+divClass).css("overflow-x","")})},Attendance.changeinputtoselect2=function(elementId,parentId,initialSelection){var tabName="ENTRY";parentId.includes("balanceotview")?tabName="BOTVIEW":-1!==parentId.indexOf("attendance-report-balanceotreport")?tabName="BOTREP":-1!==parentId.indexOf("attendance-report")?tabName="REPORT":-1!==parentId.indexOf("attendance-shiftmapping")?(tabName="SHIFT","ZPAtt_SPOCUser_AddAdmin"===elementId&&(tabName="SHIFT_ADMIN")):-1!==parentId.indexOf("attendance-settings")?tabName="SETTINGS":-1!==parentId.indexOf("attendance-regularization-myrequests")&&"ZPAtt_AddReq_FilEmployee"===elementId?tabName="ADDREG":-1===parentId.indexOf("attendance-entry-listview")&&-1===parentId.indexOf("attendance-permission-myrequests")||"ZPAtt_Permission_FilEmployee"!==elementId?-1!==parentId.indexOf("attendance-regularization-myrequests")?tabName="VIEWREG":-1!==parentId.indexOf("attendance-onduty-myrequests")&&"ZPAtt_AddOD_Employee"===elementId?tabName="ADDREG":-1!==parentId.indexOf("attendance-onduty-myrequests")&&(tabName="VIEWREG"):tabName="ADDPERMISSION";var isMultipleForAbsSch=-1!==elementId.indexOf("ZPAtt_notifyAbsMultiUser_"),multiSel=-1!==parentId.indexOf("attendance-settings-permissions")||-1!==parentId.indexOf("attendance-shiftmapping")||-1!==parentId.indexOf("attendance-report")&&"ZPAtt_userRep_empName"!=elementId||-1!==parentId.indexOf("attendance-regularization-myrequests")&&"ZPAtt_myReqReg_empName"==elementId||-1!==parentId.indexOf("attendance-onduty-myrequests")&&"ZPAtt_myReqOD_empName"===elementId||-1!==parentId.indexOf("attendance-permission-myrequests")&&"ZPAtt_myReqPerm_empName"===elementId,isSearchEmployee="ZPAtt_SPOCUser_AppField_user"===elementId||"ZPAtt_SPOCUser_AppField_Final"===elementId||"ZPAtt_SPOCUser_AddAdmin"===elementId,defaultValue=ZPI18N.getString("zp.allemployees"),defCurrUser=!1;"ZPAtt_userShiftMappingEmpName"===elementId||"ZPAtt_userIdMappingEmpName"===elementId||isSearchEmployee?defaultValue=ZPI18N.getString("zp.searchemployee"):("ZPAtt_Audit_FilEmployee"===elementId||"ZPAtt_entry_empName"===elementId||"ZPAtt_otView_empName"===elementId||"ZPAtt_userRep_empName"===elementId||"ZPAtt_AddReq_FilEmployee"===elementId||"ZPAtt_Permission_FilEmployee"===elementId||"ZPAtt_AddOD_Employee"===elementId||isMultipleForAbsSch)&&(defCurrUser=!0);var results={};results.text=defaultValue,results.id=0,results.html=defaultValue,defCurrUser&&(results.id=ZPeople.CURR_USER.usererec,results.text=ZPeople.decodeTxt(ZPeople.CURR_USER.empid+" "+ZPeople.CURR_USER.name),results.html=ZPeople.CURR_USER.empid+" "+ZPeople.CURR_USER.name,results.photo=ZPeople.CURR_USER.thumb);var obj={id:elementId,inpFormat:"select",initCurrentUser:defCurrUser,type:1,limit:10,isMultiple:isMultipleForAbsSch||multiSel,searchMode:"ATTENDANCE_"+tabName,searchType:"emp",placeHolder:isSearchEmployee?ZPI18N.getString("zp.searchemployee"):multiSel?ZPI18N.getString("zp.allemployees"):"",initDefaultValues:!0};"ZPAtt_SPOCUser_AppField_Final"===elementId&&null!==Attendance.SPOC.empCrtiDefVal&&((obj=Attendance.SPOC.empCrtiDefVal).initDefaultValues=!1,obj.needScrolledValues=!0),isMultipleForAbsSch||multiSel?obj.maximumSelectionSize=25:(obj.defaultOption=results,obj.initialSelection=results),void 0!==initialSelection&&(obj.initialSelection=initialSelection),ZPComponents.Search.create(obj)},Attendance.getInputsforSelect2=function(results,defaultValue,elementId){var tempResults=new Array,tempResultObj={};if("ZPAtt_entry_empName"!==elementId&&"ZPAtt_otView_empName"!==elementId&&"ZPAtt_userRep_empName"!==elementId&&"ZPAtt_myReqReg_empName"!==elementId&&"ZPAtt_AddReq_FilEmployee"!==elementId&&"ZPAtt_Permission_FilEmployee"!==elementId&&(tempResultObj.text=decodeHTML(defaultValue),tempResultObj.id="0",tempResultObj.html=defaultValue,tempResults.push(tempResultObj)),null!==results)for(var k=0;k<results.empList.length;k++){var empList=results.empList[k];(tempResultObj={}).text=decodeHTML(empList.eId+" "+empList.fName),tempResultObj.id=empList.eNo,tempResultObj.photo=empList.photo,tempResultObj.html=empList.eId+" "+empList.fName,tempResults.push(tempResultObj)}return tempResults},Attendance.disTimeOnlyen=function(mins,dropdown){if(Attendance.timeFormatIs12hr){var ampm="AM";mins>=720&&1440!=mins&&(ampm="PM",mins>=780&&(mins-=720));var hh=(mins-mins%60)/60,mm=mins%60;0!=hh&&24!=hh||"AM"!=ampm||(hh=12)}else hh=(mins-mins%60)/60,mm=mins%60,ampm="";if(dropdown)if(0==mm)var list=Attendance.disTwoDigit(hh)+ampm;else list=Attendance.disTwoDigit(hh)+":"+Attendance.disTwoDigit(mm)+ampm;else list=Attendance.disTwoDigit(hh)+" : "+Attendance.disTwoDigit(mm)+" "+ampm;return list},Attendance.disTime=function(mins,dropdown,singleDigHrs,isLateNightTracker){if(void 0===Attendance.timeFormatIs12hr&&void 0!==timeFormat&&timeFormat.includes("a")&&(Attendance.timeFormatIs12hr=!0),Attendance.timeFormatIs12hr){var ampm=ZPI18N.getString("zp.am").toLocaleUpperCase();isLateNightTracker&&(ampm="AM"),mins>=720&&1440!==mins&&(ampm=ZPI18N.getString("zp.pm").toLocaleUpperCase(),isLateNightTracker&&(ampm="PM"),mins>=780&&(mins-=720));var hh=(mins-mins%60)/60,mm=mins%60;0!==hh&&24!==hh||ampm!==ZPI18N.getString("zp.am").toLocaleUpperCase()&&"AM"!==ampm||(hh=12)}else hh=(mins-mins%60)/60,mm=mins%60,ampm="";if(singleDigHrs)list=Attendance.disTwoDigit(hh,!0)+":"+Attendance.disTwoDigit(mm)+" "+ampm;else if(dropdown)if(0===mm)var list=Attendance.disTwoDigit(hh)+ampm;else list=Attendance.disTwoDigit(hh)+":"+Attendance.disTwoDigit(mm)+ampm;else list=Attendance.disTwoDigit(hh)+" : "+Attendance.disTwoDigit(mm)+" "+ampm;return list},Attendance.disTimeOnly=function(str){return null===str||""===str?"-":str.split("-")[str.split("-").length-1].trim()},decodeHTML=function(val){return $("<div/>").html(val).text()},Attendance.disHours=function(mins,singleDigHour,needNegative){var isNeg="";if(mins<0){if(!needNegative)return"N/A";mins*=-1,isNeg="-"}var mm=(mins=parseInt(mins))%60,hh=(mins-mm)/60;return singleDigHour||(hh=Attendance.disTwoDigit(hh)),isNeg+hh+":"+Attendance.disTwoDigit(mm)},Attendance.disTwoDigit=function(val,singleDigitHrs){return val>9||singleDigitHrs?val.toString():"0"+val},Attendance.set_DefValue_ForTimePicker_Input=function(id){""===$(id).val()&&($(id).val(Attendance.getCurTimeInOrgFormat()),$(id).trigger("blur"),$(id).trigger("focus"))},Attendance.getCurTimeInOrgFormat=function(){return Attendance.timeFormatIs12hr?moment(new Date).format("h:mm A"):moment(new Date).format("H:mm")},Attendance.changeToMin=function(hours,minutes){return minutes+=60*hours},Attendance.ExportNew={showExportPopup:function(isPdf){var filterOptions,props={submitCallback:Attendance.ExportNew.Submit,isPdf:!1};Attendance.ExportNew.showEmpFieldsToExp(isPdf)&&(filterOptions=Att_Common_Operations.isEmpShiftMapPage()||Att_Common_Operations.isShiftReqPage()||Att_Common_Operations.isAutoShiftReqPage()?Att_Common_Operations.getShiftDepLocShiftList():Att_Common_Operations.getAttendanceDepLocShiftList(),props.additionalHtml=Attendance.ExportNew.getIncEmpFieldsHtml(filterOptions));isPdf?Attendance.ExportNew.Submit(void 0,void 0,"pdf"):ZP5Export.init(Att_Common_Operations.getExportImportMode(),props)},getIncEmpFieldsHtml:function(filterOptions){var empSelectionHTML='<div class="zpl_ttlexpchkbx" id="incEmpFeildsSecn">';(empSelectionHTML+='<div class="zcheckbox"><input id="incEmpFields" type="checkbox" class="zcheckbox__helper" onclick=Attendance.ExportNew.showFieldsForExport()>',empSelectionHTML+='<label for="incEmpFields" class="zcheckbox__label">'+ZPI18N.getString("zp.incempfields")+"</label></div></div>",empSelectionHTML+='<div class="zpl_ttlexpchkbx" style="display: none;" id="empFeildChkBoxes">',empSelectionHTML+='<div class="zcheckbox zcheckbox--horizontal"><input id="incEmpRepTo" type="checkbox" name="zp_attExp_incRepTo" class="zcheckbox__helper">',empSelectionHTML+='<label for="incEmpRepTo" class="zcheckbox__label">'+ZPI18N.getString("zp.reportingto")+"</label></div>",ZPeople.orgStructureTagMap.entity&&filterOptions.entityList&&Object.keys(filterOptions.entityList).length>0)&&(empSelectionHTML+='<div class="zcheckbox zcheckbox--horizontal"><input id="incEmpEntity" type="checkbox" class="zcheckbox__helper">',empSelectionHTML+='<label for="incEmpEntity" class="zcheckbox__label">'+(ZPeople.orgStructureDispNameMap&&ZPeople.orgStructureDispNameMap.entity?ZPeople.orgStructureDispNameMap.entity:ZPI18N.getString("zp.employeeentity"))+"</label></div>");ZPeople.orgStructureTagMap.unit&&filterOptions.bUnitList&&Object.keys(filterOptions.bUnitList).length>0&&(empSelectionHTML+='<div class="zcheckbox zcheckbox--horizontal"><input id="incEmpUnit" type="checkbox" class="zcheckbox__helper">',empSelectionHTML+='<label for="incEmpUnit" class="zcheckbox__label">'+(ZPeople.orgStructureDispNameMap&&ZPeople.orgStructureDispNameMap.unit?ZPeople.orgStructureDispNameMap.unit:ZPI18N.getString("zp.employeeunit"))+"</label></div>");ZPeople.orgStructureTagMap.division&&filterOptions.divisionList&&Object.keys(filterOptions.divisionList).length>0&&(empSelectionHTML+='<div class="zcheckbox zcheckbox--horizontal"><input id="incEmpDiv" type="checkbox" class="zcheckbox__helper">',empSelectionHTML+='<label for="incEmpDiv" class="zcheckbox__label">'+(ZPeople.orgStructureDispNameMap&&ZPeople.orgStructureDispNameMap.division?ZPeople.orgStructureDispNameMap.division:ZPI18N.getString("zp.divisionname"))+"</label></div>");return filterOptions.depList&&Object.keys(filterOptions.depList).length>0&&(empSelectionHTML+='<div class="zcheckbox zcheckbox--horizontal"><input id="incEmpDep" type="checkbox" class="zcheckbox__helper">',empSelectionHTML+='<label for="incEmpDep" class="zcheckbox__label">'+ZPI18N.getString("zp.department")+"</label></div>"),filterOptions.desgList&&Object.keys(filterOptions.desgList).length>0&&(empSelectionHTML+='<div class="zcheckbox zcheckbox--horizontal"><input id="incEmpDesg" type="checkbox" class="zcheckbox__helper">',empSelectionHTML+='<label for="incEmpDesg" class="zcheckbox__label">'+ZPI18N.getString("zp.designation")+"</label></div>"),filterOptions.locList&&Object.keys(filterOptions.locList).length>0&&(empSelectionHTML+='<div class="zcheckbox zcheckbox--horizontal"><input id="incEmpLoc" type="checkbox" class="zcheckbox__helper">',empSelectionHTML+='<label for="incEmpLoc" class="zcheckbox__label">'+ZPI18N.getString("zp.location")+"</label></div>"),isadmin&&-1!=Layout.Page.pageId.indexOf("reports-")&&filterOptions.roleList&&Object.keys(filterOptions.roleList).length>0&&(empSelectionHTML+='<div class="zcheckbox zcheckbox--horizontal"><input id="incEmpRole" type="checkbox" class="zcheckbox__helper">',empSelectionHTML+='<label for="incEmpRole" class="zcheckbox__label">'+ZPI18N.getString("zp.role")+"</label></div>"),empSelectionHTML+="</div>"},showFieldsForExport:function(){var modal=ZP5Export.getCurrContainer();modal.find("#incEmpFields")[0].checked?modal.find("#empFeildChkBoxes").show():modal.find("#empFeildChkBoxes").hide()},showEmpFieldsToExp:function(isPdf){if(isPdf)return!1;if(Att_Common_Operations.isEmpShiftMapPage()&&!Att_Common_Operations.isSelfReqPage()){var attModule=ZPeople.Module.MODULE_DATA.attendance;return!!(attModule.isSPOCAdmin||attModule.isManageAttedance||isadmin||attModule.isLeadForShift||void 0!==attModule.isSPOCShiftView)}return!1},Submit:function(exportModal,params,fileType){var form=document.createElement("form");form.id=null;var path="",isPdf="pdf"===fileType;if(-1!==settingsUrlProps.niceUrl.indexOf("operations/attendance/punchImportExport")){path="mode=userEntryExport&modeVal=Operations";var filterDiv=settingsPage.container.find(".zpl_fltr");let erecno=null;if(""!=ZPeopleComponents.select(filterDiv.find("#entryFilterEmployee")).getValue()&&(erecno=(erecno=ZPeopleComponents.select(filterDiv.find("#entryFilterEmployee")).getValue())!=ZPeople.CURR_USER.usererec?erecno:null),null!=erecno&&(path+="&erecno="+erecno),0===ZPeople.Module.MODULE_DATA.attendance.showAllEntries&&settingsPage.container.find("#Att_includeAllEntries")[0].checked&&(path+="&isAllEntries="+!0),fileType=settingsPage.container.find(".zpl_secn .zradiobutton input[type='radio']:checked")[0].value,!(path=punchImpExp.getStartAndEndDate(path)))return}else if(Att_Common_Operations.isAttListViewPage()){var premonth=Attendance.Entry.preMonth;if("month"!==Attendance.Entry.selectedView&&"calendar"!=Attendance.Entry.selectedPageView||(premonth=Attendance.Entry.calendarPreMonth),path="mode=userEntryExport&preMonth="+premonth+"&selView="+Attendance.Entry.selectedView,form.id="ZPAtt_att_exp_listView_form",null!=Attendance.Entry.erecno&&(path+="&erecno="+Attendance.Entry.erecno),0===ZPeople.Module.MODULE_DATA.attendance.showAllEntries&&exportModal.find("#exportIncludeUsers").prop("checked")&&(path+="&isAllEntries="+!0),void 0!==Attendance.Entry.sDate&&void 0!==Attendance.Entry.eDate&&null!==Attendance.Entry.sDate&&null!==Attendance.Entry.eDate&&(path+="&sDate="+Attendance.Entry.sDate,path+="&eDate="+Attendance.Entry.eDate),!path)return}else if(Att_Common_Operations.isRegReqPage()){path="mode=attReqMyReqExport",form.id="ZPAtt_att_Reg_Req_exp_form";var filter=settingsPage.container.find(".zpl_fltr"),filterDivId=Att_Common_Operations.getFilterDivId();if(regularization_operation.isRegReasonsEnabled()&&-3!==Number(ZPeopleComponents.select(filter.find("#"+filterDivId+"FilterReason")).getValue())&&(path+="&regReason="+ZPeople.Module.MODULE_DATA.attendance.regReasons[Number(ZPeopleComponents.select(filter.find("#"+filterDivId+"FilterReason")).getValue())]),path=Att_Common_Operations.getSortParams(path,!0),(path=Att_Common_Operations.getMyRequestDateFilter(path,filter,!0)).error)return;path+=Attendance.ExportNew.getFilterValues(filter,isPdf)}else if(Att_Common_Operations.isODReqPage()){path="mode=attODMyReqExport",form.id="ZPAtt_att_OnDuty_Req_exp_form",path=Att_Common_Operations.getSortParams(path,!0);filter=settingsPage.container.find(".zpl_fltr");if((path=Att_Common_Operations.getMyRequestDateFilter(path,filter,!0)).error)return;path+=Attendance.ExportNew.getFilterValues(filter,isPdf)}else if(Att_Common_Operations.isPermReqPage()){path="mode=attPermissionMyReqExport",form.id="ZPAtt_att_Permission_Req_exp_form",path=Att_Common_Operations.getSortParams(path,!0);filter=settingsPage.container.find(".zpl_fltr");if((path=Att_Common_Operations.getMyRequestDateFilter(path,filter,!0)).error)return;path+=Attendance.ExportNew.getFilterValues(filter,isPdf)}else if(-1!==settingsUrlProps.niceUrl.indexOf("operations/attendance/biometricidmapping"))path="mode=userIdmapExport",form.id="ZPAtt_att_sett_idmap_form",path=Att_Common_Operations.getSortParams(path,!0);else if(Att_Common_Operations.isShiftReqPage()){form.id="ZPAtt_att_shiftChange_Req_exp_form",path="mode=attShiftChangeMyReqExport",path=Att_Common_Operations.getSortParams(path,!0);filter=settingsPage.container.find(".zpl_fltr");if((path=Att_Common_Operations.getMyRequestDateFilter(path,filter,!0)).error)return;path+=Attendance.ExportNew.getFilterValues(filter,isPdf)}else if(Att_Common_Operations.isAutoShiftReqPage()){form.id="ZPAtt_att_shiftChange_Req_exp_form",path="mode=autoAssignedShiftsExport";filter=settingsPage.container.find(".zpl_fltr");if((path=Att_Common_Operations.getMyRequestDateFilter(path,filter,!0)).error)return;path+=Attendance.ExportNew.getFilterValues(filter,isPdf)}else if(Att_Common_Operations.isEmpShiftMapPage()){form.id="ZPAtt_shift_export_form",path="mode=shiftViewsExport";var page=settingsPage.container;filterDiv=Att_Common_Operations.getFilterDivId();if(Att_Common_Operations.isSelfReqPage()){path+="&sdate="+(shiftMapping.isCalView?SingleUserShiftMapping.calObj.fromDate:SingleUserShiftMapping.weeklyViewFromDate),path+="&edate="+(shiftMapping.isCalView?SingleUserShiftMapping.calObj.toDate:SingleUserShiftMapping.weeklyViewToDate);var erecArr=[];erecArr.push(AttendanceTeam.getSelfReqPageErecno()),path+="&userId="+JSON.stringify(erecArr)}else{filter=settingsPage.container.find(".zpl_fltr");if(page.find("#"+filterDiv+"ZPAtt_userShiftList").is(":visible")&&(path+="&isListView=true"),page.find("#"+filterDiv+"ZPAtt_userCalHrsView").is(":visible")&&shiftMapping.isHoursView?(path=shiftMapping.getShiftFilterValues(filter,path,!0,!0),path+="&isHoursView=true"):path=shiftMapping.getShiftFilterValues(filter,path,!1,!0),path=Att_Common_Operations.getSortParams(path,!0),Attendance.ExportNew.showEmpFieldsToExp(isPdf)){var empFields=Attendance.ExportNew.getEmpFieldsToBeIncludedInExp();empFields.length>0&&(path+="&empFields="+JSON.stringify(empFields))}}}else settingsUrlProps.niceUrl.includes("balanceotview")?(path="mode=balanceOtRepExport",path+="&erecno="+AttendanceTeam.getSelfReqPageErecno()):-1===settingsUrlProps.niceUrl.indexOf("settings/service/shift/manage")&&-1===settingsUrlProps.niceUrl.indexOf("operations/shift/manageshifts")||(path="mode=shiftDetailsExport");path+="&exportType="+(isPdf?"pdf":fileType),path=encodeURI(path);var regexport=document.createElement("input");form.setAttribute("method","post");var actionAttr=(contextPath?"/"+contextPath:"")+"/AttendanceExport.zp?"+path;form.setAttribute("action",actionAttr),form.setAttribute("target","exportresp"),regexport.setAttribute("type","hidden"),regexport.setAttribute("name","conreqcsr"),regexport.setAttribute("value",csrfToken),form.appendChild(regexport),document.body.appendChild(form),form.submit(),form.reset(),$("#"+form.id).remove(),ZPeople.Message.showWarningMsg(ZPI18N.getString("zp.generatingreport"),5e3)},getFilterValues:function(filter,isPdf){var path="",filterId=Att_Common_Operations.getFilterDivId();if(Att_Common_Operations.isSelfReqPage()){var erecArr=[];erecArr.push(AttendanceTeam.getSelfReqPageErecno()),path+="&erecno="+JSON.stringify(erecArr)}else{var locObj=ZPeopleComponents.tokenfield(filter.find("#"+filterId+"FilterLoc")).getSelectedValuesId();locObj&&0!=locObj.length&&(path+="&locationId="+JSON.stringify(locObj));var depObj=ZPeopleComponents.tokenfield(filter.find("#"+filterId+"FilterDep")).getSelectedValuesId();depObj&&0!=depObj.length&&(path+="&departmentId="+JSON.stringify(depObj));var desgnObj=ZPeopleComponents.tokenfield(filter.find("#"+filterId+"FilterDesgn")).getSelectedValuesId();if(desgnObj&&0!=desgnObj.length&&(path+="&desgId="+JSON.stringify(desgnObj)),isOrgStructureEnabled){if(ZPeople.orgStructureTagMap.entity){var entityObj=ZPeopleComponents.tokenfield(filter.find("#"+filterId+"FilterEntity")).getSelectedValuesId();entityObj&&0!=entityObj.length&&(path+="&entityId="+JSON.stringify(entityOb))}if(ZPeople.orgStructureTagMap.unit){var bUnitObj=ZPeopleComponents.tokenfield(filter.find("#"+filterId+"FilterBUnit")).getSelectedValuesId();bUnitObj&&0!=bUnitObj.length&&(path+="&bUnitId="+JSON.stringify(bUnitObj))}if(ZPeople.orgStructureTagMap.division){var divisionObj=ZPeopleComponents.tokenfield(filter.find("#"+filterId+"FilterDivision")).getSelectedValuesId();divisionObj&&0!=divisionObj.length&&(path+="&divisionId="+JSON.stringify(divisionObj))}}var erecnoValues=ZPeopleComponents.tokenfield(filter.find("#"+filterId+"FilterEmployee")).getAllValues();if(erecnoValues&&0!=erecnoValues.length&&""!=erecnoValues&&(path+="&erecno="+JSON.stringify(Att_Common_Operations.getAllIdsFromValues(erecnoValues))),Attendance.ExportNew.showEmpFieldsToExp(isPdf)){var empFields=Attendance.ExportNew.getEmpFieldsToBeIncludedInExp();empFields.length>0&&(path+="&empFields="+JSON.stringify(empFields))}landingPageURL.includes("operations")&&filter.find("#"+filterId+"FilterShowDirectRepTo")[0].checked&&(path+="&showDirectRepTo=true"),(landingPageURL.includes("team")||landingPageURL.includes("attendance/shift"))&&(path+="&isMyTeamData=true")}if(-1!=settingsUrlProps.niceUrl.indexOf("operations/shift")){var shiftObj=ZPeopleComponents.tokenfield(filter.find("#"+filterId+"FilterShift")).getSelectedValuesId();shiftObj&&0!=shiftObj.length&&(path+="&shiftId="+JSON.stringify(shiftObj))}var status=ZPeopleComponents.select(settingsPage.container.find("#"+filterId+"TopStatus")).getValue();if("-3"!==status){var selStatus=[];selStatus.push(status),path+="&statFil="+JSON.stringify(selStatus)}return path=Attendance.ExportNew.getEmpProfDateofExitFilter(filter,path,filterId),Att_Common_Operations.isSelfReqPage()||landingPageURL.includes("operation")||!Att_Common_Operations.isDirectReportees()||(path+="&showDirectRepTo=true"),path},getEmpProfDateofExitFilter:function(filter,path,filId){if(landingPageURL.includes("operations")&&!landingPageURL.includes("operations/attendance/searchuser")&&!landingPageURL.includes("operations/shift/searchuser")){var statObj=ZPeopleComponents.tokenfield(filter.find("#"+filId+"FilterEmpProfile")).getSelectedValuesId();statObj&&0!=statObj.length&&(path+="&userTypeId="+JSON.stringify(statObj)),filter.find("#"+filId+"FilterSelectiveEmp")[0].checked&&(path+="&incDateOfExit=true")}return path},getEmpFieldsToBeIncludedInExp:function(){var modal=ZP5Export.getCurrContainer(),empFields=[],index=0;return modal.find("#incEmpFields")[0].checked&&modal.find("#incEmpFeildsSecn").is(":visible")&&(modal.find("#incEmpRepTo")[0]&&modal.find("#incEmpRepTo")[0].checked&&(empFields[index++]=0),modal.find("#incEmpEntity")[0]&&modal.find("#incEmpEntity")[0].checked&&(empFields[index++]=1),modal.find("#incEmpUnit")[0]&&modal.find("#incEmpUnit")[0].checked&&(empFields[index++]=2),modal.find("#incEmpDiv")[0]&&modal.find("#incEmpDiv")[0].checked&&(empFields[index++]=3),modal.find("#incEmpDep")[0]&&modal.find("#incEmpDep")[0].checked&&(empFields[index++]=4),modal.find("#incEmpDesg")[0]&&modal.find("#incEmpDesg")[0].checked&&(empFields[index++]=5),modal.find("#incEmpLoc")[0]&&modal.find("#incEmpLoc")[0].checked&&(empFields[index++]=6),isadmin&&modal.find("#incEmpRole")[0]&&modal.find("#incEmpRole")[0].checked&&(empFields[index++]=8)),empFields}},Attendance.Export={showExportPopup:function(isPdf){$("#zp_export_submit").attr("data-dismiss","modal"),$("#zp_export_container").find("#zp_export_inctabularsec").hide(),$("#zp_userexport_filters").remove(),$("#zp_Export_additionalInfo").remove();var isUserRepExpNonPDF=-1!==Layout.Page.pageId.indexOf("attendance-report-userreport")&&!isPdf,isEntryExpAndShowAllEntries=0===Attendance.Entry.allDataList.showAllEntries&&Layout.Page.pageId.includes("attendance")&&(Layout.Page.pageId.includes("listview")||Layout.Page.pageId.includes("tabularview")),isMonthlyRepHoursView=-1!==Layout.Page.pageId.indexOf("attendance-report-monthlyreport")&&$(Attendance.Report.LayoutId+" #ZPAtt_month_Report_hour").hasClass("active"),exportStr=ZPI18N.getString("zp.includeallentries");isUserRepExpNonPDF?exportStr=ZPI18N.getString("zp.includealluser"):isMonthlyRepHoursView&&(exportStr=ZPI18N.getString("zp.includecheckinout")),$("#zp_export_container").find("#zp_export_ftype").show();var hideOpt={};hideOpt.tohide=new Array("tsv");var showEmpFiledsInExp=Attendance.Export.showEmpFieldsToExp(isPdf);if(showEmpFiledsInExp&&(hideOpt.additionalHtml='<div class="ZPwf FL MT20" id="zp_export_incEmpFeildsDiv" style="display: block;"><label class="checkbox DIB"><input type="checkbox" name="zp_export_incEmpFeilds"><span>'+ZPI18N.getString("zp.incempfields")+"</span></label></div>"),!0===isPdf&&isMonthlyRepHoursView?(ZPExport.showExportContainer(Attendance.Export.Submit,!0,exportStr,hideOpt),$("#zp_export_container").find(".modal-title").text(ZPI18N.getString("zp.Download")),$("#zp_export_container").find("#zp_export_ftype").hide()):isPdf?Attendance.Export.Submit(isPdf):ZPExport.showExportContainer(Attendance.Export.Submit,null,exportStr,hideOpt),-1!==Layout.Page.pageId.indexOf("attendance-regularization-myrequests")&&$("#zp_export_container").find("#zp_export_xlsx").show(),showEmpFiledsInExp){var addInfo=$("#zp_export_container").find("#zp_Export_additionalInfo"),incEmpFields=addInfo.find("#zp_export_incEmpFeildsDiv");incEmpFields.find("input:checkbox").off("change"),incEmpFields.find("input:checkbox").change(function(){this.checked?0===$("#zp_export_empFeilds").length?addInfo.find("#zp_export_incEmpFeildsDiv").after(Attendance.Export.consEmpFieldsToShow()):$("#zp_export_empFeilds").show():$("#zp_export_empFeilds").hide()})}if($("#zp_export_container").find("input[name='zp_ftype']").eq(0).prop("checked",!0),$("#zp_export_container").find("#zp_export_inctabularsec input:checkbox").off("change"),$("#zp_userexport_include_all_entries").remove(),(isUserRepExpNonPDF||isEntryExpAndShowAllEntries||isMonthlyRepHoursView)&&($("#zp_export_container").find("#zp_export_inctabularsec input:checkbox").eq(0).prop("checked",!1),$("#zp_export_container").find("#zp_export_inctabularsec").show()),isUserRepExpNonPDF){if($("#zp_export_incEmpFeildsDiv").hide(),void 0!=Attendance.Report&&void 0!=Attendance.Report.userReport&&0==Attendance.Report.userReport.showAllEntries){$("#zp_export_container").find("#zp_export_inctabularsec").before('<div class="ZPwf FL MT20" id="zp_userexport_include_all_entries" style="display: block;"><label class="checkbox DIB"><input type="checkbox"><span id="zp_export_includerecordusers_text">Include all check in/out entries</span></label></div>')}$("#zp_export_container").find("#zp_export_inctabularsec input:checkbox").change(function(){if(this.checked)if(0==$("#zp_userexport_filters").length){var exportCont=$("#zp_export_container"),filtersForExport='<div id="zp_userexport_filters" class="form-group"><div class="ZPwf FL MT20"><label class="control-label col-sm-3 Matry MT5"> '+ZPI18N.getString("zp.locations")+'</label><div class="col-sm-6"><select multiple="multiple" id="zp_userexport_loc"></select></div></div><div class="ZPwf FL MT10"><label class="control-label col-sm-3 Matry MT5"> '+ZPI18N.getString("zp.departments")+'</label><div class="col-sm-6"><select multiple="multiple" id="zp_userexport_dept"></select></div></div><div class="ZPwf FL MT10"><label class="control-label col-sm-3 Matry MT5"> '+ZPI18N.getString("zp.shifts")+'</label><div class="col-sm-6"><select multiple="multiple" id="zp_userexport_shift"></select></div></div></div>';exportCont.find("#zp_export_body #zp_export_inctabularsec").after(filtersForExport),$("#zp_userexport_filters #zp_userexport_loc").append(Attendance.Report.depLocShiftOptions.locOption),$("#zp_userexport_filters #zp_userexport_dept").append(Attendance.Report.depLocShiftOptions.depOption),$("#zp_userexport_filters #zp_userexport_shift").append(Attendance.Report.depLocShiftOptions.shiftOption),$("#zp_userexport_filters select").select2(),$("#zp_export_incEmpFeildsDiv").show()}else $("#zp_userexport_filters").show(),$("#zp_export_incEmpFeildsDiv").show(),$("#zp_export_empFeilds").show();else $("#zp_userexport_filters").hide(),$("#zp_export_incEmpFeildsDiv").hide(),$("#zp_export_empFeilds").hide()})}},Submit:function(isPdf){var path;$("#zp_export_container").find("#zp_export_ftype").show();var form=$(Attendance.Report.LayoutId+" #ZPAtt_att_report_exp_form")[0];if(Layout.Page.pageId.includes("attendance")&&(Layout.Page.pageId.includes("listview")||Layout.Page.pageId.includes("tabularview"))&&!Layout.Page.pageId.includes("attendance-shiftmapping-listview")||-1!==Layout.Page.pageId.indexOf("selfservice"))form=$(Attendance.Entry.LayoutId+" #ZPAtt_att_entry_exp_form")[0],path="mode=userEntryExport&preMonth="+Attendance.Entry.preMonth+"&selView="+Attendance.Entry.selectedView,null!==Attendance.Entry.erecno&&(path+="&erecno="+Attendance.Entry.erecno),0===Attendance.Entry.allDataList.showAllEntries&&$("#zp_export_container").find("#zp_export_inctabularsec").is(":visible")&&$("#zp_export_container").find("#zp_export_inctabularsec input:checkbox")[0].checked&&(path+="&isAllEntries="+!0),void 0!==Attendance.Entry.sDate&&void 0!==Attendance.Entry.eDate&&null!==Attendance.Entry.sDate&&null!==Attendance.Entry.eDate&&(path+="&sDate="+Attendance.Entry.sDate,path+="&eDate="+Attendance.Entry.eDate);else if(-1!==Layout.Page.pageId.indexOf("attendance-report-dailyreport")){path="list"===Attendance.Report.selectedView?"mode=dailyReportListExport":"mode=dailyReportSumExport",$(Attendance.Report.LayoutId+" #ZPAtt_dailyReport_myReqEmpSort").hasClass("sort")||(path+="&isEmpSortAsc="+$(Attendance.Report.LayoutId+" #ZPAtt_dailyReport_myReqEmpSort").hasClass("sort-u"));var dailyRepFilter=Layout.Page.container.find("#ZPAtt_dailyReportfilter");if(path+=Attendance.Export.getFilterValues(dailyRepFilter,"dailyRep",isPdf),path=Attendance.setUserTypeIdForExport(path),""===(repDate=$(Attendance.Report.LayoutId+" #ZPAtt_dailyRep_date").val().trim()))return void ZPeople.Message.showFailureMsg(ZPI18N.getString("zp.entervaliddate"));if("0"!==(totHrsFilter=dailyRepFilter.find("#ZPAtt_dailyRep_totalHrs").val())){if(void 0===(totHrsTime=Attendance.Common.convertTimerInputToMinsOrSecs(dailyRepFilter.find("#ZPAtt_dailyRep_totHrsTime").val(),!0,!0))||"1"===totHrsFilter&&0===totHrsTime)return void dailyRepFilter.find("#ZPAtt_dailyRep_totalHrs").next().next().removeClass("DNI");void 0!==totHrsTime&&((totHrsObj={}).timeInSecs=totHrsTime,totHrsObj.type=totHrsFilter,dailyRepFilter.find("#ZPAtt_dailyRep_totalHrs").next().next().addClass("DNI"),path+="&totHrsTime="+JSON.stringify(totHrsObj))}path+="&reportDate="+repDate}else if(-1!==Layout.Page.pageId.indexOf("attendance-report-earlylatereport")){path="mode=attEarlyLateReportExport";var reportFilter=Layout.Page.container.find("#ZPAtt_lateComReportfilter");path+=Attendance.Export.getFilterValues(reportFilter,"lateComRep",isPdf),Layout.Page.container.find("#ZPAtt_earlyLateReport_myReqEmpSort").hasClass("sort")||(path+="&isEmpSortAsc="+Layout.Page.container.find(" #ZPAtt_earlyLateReport_myReqEmpSort").hasClass("sort-u"));var inTime,inTimeFilter=reportFilter.find("#ZPAtt_lateComRep_checkIn").val();if("5"===inTimeFilter)path+="&notRecorded=in";else{if("error"===(obj=Attendance.Report.setCustomFilterValue(!0,inTimeFilter,reportFilter.find("#ZPAtt_lateComRep_checkInTime").val(),!0)))return void reportFilter.find("#ZPAtt_lateComRep_checkIn").next().next().removeClass("DNI");obj&&(inTime=obj.timeInSecs,path+="&customFromTime="+JSON.stringify(obj)),reportFilter.find("#ZPAtt_lateComRep_checkIn").next().next().addClass("DNI")}var outTimeFilter=reportFilter.find("#ZPAtt_lateComRep_checkOut").val();if("5"===outTimeFilter)path+="&notRecorded=out";else{var obj;if("error"===(obj=Attendance.Report.setCustomFilterValue(!1,outTimeFilter,reportFilter.find("#ZPAtt_lateComRep_checkOutTime").val(),!0)))return void reportFilter.find("#ZPAtt_lateComRep_checkOut").next().next().removeClass("DNI");if(obj){if(!("3"!==inTimeFilter&&"4"!==inTimeFilter||"3"!==outTimeFilter&&"4"!==outTimeFilter)){var outTime=obj.timeInSecs;inTime>outTime&&(obj.timeInSecs=outTime+86400)}path+="&customToTime="+JSON.stringify(obj)}reportFilter.find("#ZPAtt_lateComRep_checkOut").next().next().addClass("DNI")}var repDate=reportFilter.find("#ZPAtt_lateComRep_fromDate").val().trim(),repTDate=reportFilter.find("#ZPAtt_lateComRep_toDate").val().trim();if(""===repDate||""===repTDate)return void ZPeople.Message.showFailureMsg(ZPI18N.getString("zp.entervaliddate"));var dateDiff=moment(repTDate,dateFmt.toUpperCase()).diff(moment(repDate,dateFmt.toUpperCase()),"days");if(dateDiff>31)return void ZPeople.Message.showFailureMsg(ZPI18N.getString("zp.datewithinonemonth"));if(dateDiff<0)return void ZPeople.Message.showFailureMsg(ZPI18N.getString("zp.greaterfromdate"));if("0"!==(totHrsFilter=reportFilter.find("#ZPAtt_lateComRep_totalHrs").val())){if(void 0===(totHrsTime=Attendance.Common.convertTimerInputToMinsOrSecs(reportFilter.find("#ZPAtt_lateComRep_totHrsTime").val(),!0,!0))||"1"===totHrsFilter&&0===totHrsTime)return void reportFilter.find("#ZPAtt_lateComRep_totalHrs").next().next().removeClass("DNI");void 0!==totHrsTime&&((totHrsObj={}).timeInSecs=totHrsTime,totHrsObj.type=totHrsFilter,reportFilter.find("#ZPAtt_lateComRep_totalHrs").next().next().addClass("DNI"),path+="&totHrsTime="+JSON.stringify(totHrsObj))}path+="&sdate="+repDate,path+="&edate="+repTDate}else if(-1!==Layout.Page.pageId.indexOf("attendance-report-monthlyreport")){path="mode=monthlyReportExport",$(Attendance.Report.LayoutId+" #ZPAtt_month_Report_hour").hasClass("active")&&(path+="&reportType=hours",$("#zp_export_container").find("#zp_export_inctabularsec input:checkbox")[0].checked&&(path+="&includeCheckInOut="+!0)),$(Attendance.Report.LayoutId+" #ZPAtt_monthlyReport_myReqEmpSort").hasClass("sort")||(path+="&isEmpSortAsc="+$(Attendance.Report.LayoutId+" #ZPAtt_monthlyReport_myReqEmpSort").hasClass("sort-u"));var hrsTypeObj=$(Attendance.Report.LayoutId+" #ZPAtt_monthlyRep_hoursType")[0];hrsTypeObj&&""!==hrsTypeObj.value&&"0"!==hrsTypeObj.value&&(path+="&hrsType="+hrsTypeObj.value);var statRepFilter=Layout.Page.container.find("#ZPAtt_monthlyReportfilter");path+=Attendance.Export.getFilterValues(statRepFilter,"monthlyRep",isPdf),path=Attendance.setUserTypeIdForExport(path);var sDate=$(Attendance.Report.LayoutId+" #ZPAtt_monthlyRep_fromDate").val().trim(),eDate=$(Attendance.Report.LayoutId+" #ZPAtt_monthlyRep_toDate").val().trim();if(""===sDate||""===eDate)return void ZPeople.Message.showFailureMsg(ZPI18N.getString("zp.enterfromtodate"));var fromDate=new Date(moment(sDate,Attendance.Report.dateFormat.toUpperCase())._d),toDate=new Date(moment(eDate,Attendance.Report.dateFormat.toUpperCase())._d);if(fromDate.getTime()>toDate.getTime())return void ZPeople.Message.showFailureMsg(ZPI18N.getString("zp.greaterfromdate"));var nextMonthDate=new Date(fromDate.getFullYear(),fromDate.getMonth()+1,fromDate.getDate());if(toDate.getTime()>nextMonthDate)return void ZPeople.Message.showFailureMsg(ZPI18N.getString("zp.datewithinonemonth"));path+="&sdate="+sDate,path+="&edate="+eDate}else if(-1!==Layout.Page.pageId.indexOf("attendance-report-summaryreport")){path="mode=customReportExport",$(Attendance.Report.LayoutId+" #ZPAtt_Summary_Report_hr").hasClass("active")?path+="&reportType=hours":path+="&reportType=days",$(Attendance.Report.LayoutId+" #ZPAtt_sumHourReport_myReqEmpSort").hasClass("sort")&&$(Attendance.Report.LayoutId+" #ZPAtt_sumDayReport_myReqEmpSort").hasClass("sort")||(path+="&isEmpSortAsc="+$(Attendance.Report.LayoutId+" #ZPAtt_sumHourReport_myReqEmpSort").hasClass("sort-u")||$(Attendance.Report.LayoutId+" #ZPAtt_sumDayReport_myReqEmpSort").hasClass("sort-u"));var sumRepFilter=Layout.Page.container.find("#ZPAtt_summaryReportfilter");if(path+=Attendance.Export.getFilterValues(sumRepFilter,"sumRep",isPdf),sumRepFilter.find("#ZPAtt_showSimpleRep").prop("checked")&&(path+="&isSimpleRep=true"),path=Attendance.setUserTypeIdForExport(path),sDate=$(Attendance.Report.LayoutId+" #ZPAtt_sumRep_fromDate").val().trim(),eDate=$(Attendance.Report.LayoutId+" #ZPAtt_sumRep_toDate").val().trim(),""===sDate||""===eDate)return void ZPeople.Message.showFailureMsg(ZPI18N.getString("zp.enterfromtodate"));if(fromDate=new Date(moment(sDate,Attendance.Report.dateFormat.toUpperCase())._d),toDate=new Date(moment(eDate,Attendance.Report.dateFormat.toUpperCase())._d),fromDate.getTime()>toDate.getTime())return void ZPeople.Message.showFailureMsg(ZPI18N.getString("zp.greaterfromdate"));if(nextMonthDate=new Date(fromDate.getFullYear(),fromDate.getMonth()+1,fromDate.getDate()),toDate.getTime()>nextMonthDate)return void ZPeople.Message.showFailureMsg(ZPI18N.getString("zp.datewithinonemonth"));path+="&sdate="+sDate,path+="&edate="+eDate}else if(-1!==Layout.Page.pageId.indexOf("attendance-report-userreport")){var totHrsFilter;if(path="mode=userDetailsExport",sDate=(reportFilter=Layout.Page.container.find("#ZPAtt_userReportfilter")).find("#ZPAtt_userRep_fromDate").val().trim(),eDate=reportFilter.find(" #ZPAtt_userRep_toDate").val().trim(),""===sDate||""===eDate)return void ZPeople.Message.showFailureMsg(ZPI18N.getString("zp.enterfromtodate"));if(fromDate=new Date(moment(sDate,Attendance.Report.dateFormat.toUpperCase())._d),toDate=new Date(moment(eDate,Attendance.Report.dateFormat.toUpperCase())._d),fromDate.getTime()>toDate.getTime())return void ZPeople.Message.showFailureMsg(ZPI18N.getString("zp.greaterfromdate"));if("0"!==(totHrsFilter=reportFilter.find("#ZPAtt_userRep_totalHrs").val())){var totHrsTime,totHrsObj;if(void 0===(totHrsTime=Attendance.Common.convertTimerInputToMinsOrSecs(reportFilter.find("#ZPAtt_userRep_totHrsTime").val(),!0,!0))||"1"===totHrsFilter&&0===totHrsTime)return void reportFilter.find("#ZPAtt_userRep_totalHrs").next().next().removeClass("DNI");void 0!==totHrsTime&&((totHrsObj={}).timeInSecs=totHrsTime,totHrsObj.type=totHrsFilter,reportFilter.find("#ZPAtt_userRep_totalHrs").next().next().addClass("DNI"),path+="&totHrsTime="+JSON.stringify(totHrsObj))}path+=Attendance.Export.getFilterValues(reportFilter,"userRep",isPdf);var allowExportForOneYear=!0;if($("#zp_export_container").find("#zp_export_inctabularsec").is(":visible")&&$("#zp_export_container").find("#zp_export_inctabularsec input:checkbox")[0].checked){allowExportForOneYear=!1,path+="&exportForAllUsers="+!0;var userexport_loc=$("#zp_export_container #zp_userexport_loc").val();null!==userexport_loc&&void 0!==userexport_loc&&userexport_loc.length>0&&(path+="&filterLocId="+JSON.stringify(userexport_loc));var userexport_dept=$("#zp_export_container #zp_userexport_dept").val();null!==userexport_dept&&void 0!==userexport_dept&&userexport_dept.length>0&&(path+="&filterDeptId="+JSON.stringify(userexport_dept));var userexport_shift=$("#zp_export_container #zp_userexport_shift").val();null!==userexport_shift&&void 0!==userexport_shift&&userexport_shift.length>0&&(path+="&filterShiftId="+JSON.stringify(userexport_shift))}if(!isPdf&&$("#zp_userexport_include_all_entries").length>0&&null!==$("#zp_userexport_include_all_entries").val()&&(path+="&includeAllEnt="+$("#zp_userexport_include_all_entries input:checkbox")[0].checked),allowExportForOneYear){var afterOneYearDate=new Date(fromDate.getFullYear()+1,fromDate.getMonth(),fromDate.getDate());if(toDate.getTime()>afterOneYearDate)return void ZPeople.Message.showFailureMsg(ZPI18N.getString("zp.datewithinoneyear"))}else{var afterOneMonthDate=new Date(fromDate.getFullYear(),fromDate.getMonth()+1,fromDate.getDate());if(toDate.getTime()>afterOneMonthDate)return void ZPeople.Message.showFailureMsg(ZPI18N.getString("zp.datewithinonemonthforbulkexport"))}path+="&sdate="+sDate,path+="&edate="+eDate;var eno=$("#"+Layout.Page.pageId+" #ZPAtt_userRep_empName").val();if(""!==eno&&"0"!==eno&&eno!==erecno&&(path+="&eNo="+eno),Attendance.Report.userType&&(path+="&userType="+Attendance.Report.userType),Attendance.Export.showEmpFieldsToExp())(empFields=Attendance.Export.getEmpFieldsToBeIncludedInExp()).length>0&&(path+="&empFields="+JSON.stringify(empFields))}else if(-1!==Layout.Page.pageId.indexOf("attendance-shiftmapping")&&-1===Layout.Page.pageId.indexOf("attendance-shiftmapping-shiftmaprequests")){var startDate,endDate;form=$(AttendanceShift.LayoutId+" #ZPAtt_shift_export_form")[0],path="mode=shiftViewsExport",-1!==Layout.Page.pageId.indexOf("attendance-shiftmapping-listview")&&(path+="&isListView=true");var shiftFilter=Layout.Page.container.find("#ZPAtt_calFilters");if(-1!==Layout.Page.pageId.indexOf("attendance-shiftmapping-calview")&&AttendanceShift.isHoursListView){if(""===(fromDate=shiftFilter.find("#ZPAtt_HoursView_Filter_fromDate").val().trim()))return void ZPeople.Message.showFailureMsg(ZPI18N.getString("zp.selectfromandto"));moment(fromDate,AttendanceShift.depLocShiftList.dateformat.toUpperCase());path+="&isHoursView=true",startDate=fromDate,endDate=fromDate}else{if(startDate=shiftFilter.find("#ZPAtt_calFilter_fromDate").val().trim(),endDate=shiftFilter.find("#ZPAtt_calFilter_toDate").val().trim(),""===startDate||""===endDate)return void ZPeople.Message.showFailureMsg(ZPI18N.getString("zp.enterfromtodate"));fromDate=new Date(moment(startDate,AttendanceShift.dateFormat.toUpperCase())._d);toDate=new Date(moment(endDate,AttendanceShift.dateFormat.toUpperCase())._d);if(fromDate.getTime()>toDate.getTime())return void ZPeople.Message.showFailureMsg(ZPI18N.getString("zp.greaterfromdate"));var addOneMonth=new Date(fromDate.getFullYear(),fromDate.getMonth()+1,fromDate.getDate());if(toDate.getTime()>addOneMonth)return void ZPeople.Message.showFailureMsg(ZPI18N.getString("zp.datewithinonemonth"))}$(AttendanceShift.LayoutId+" #ZPAtt_userShiftList_myReqEmpSort").is(":visible")&&!$(AttendanceShift.LayoutId+" #ZPAtt_userShiftList_myReqEmpSort").hasClass("sort")?path+="&isEmpSortAsc="+$(AttendanceShift.LayoutId+" #ZPAtt_userShiftList_myReqEmpSort").hasClass("sort-u"):$(AttendanceShift.LayoutId+" #ZPAtt_calView_myReqEmpSort").is(":visible")&&!$(AttendanceShift.LayoutId+" #ZPAtt_calView_myReqEmpSort").hasClass("sort")?path+="&isEmpSortAsc="+$(AttendanceShift.LayoutId+" #ZPAtt_calView_myReqEmpSort").hasClass("sort-u"):$(AttendanceShift.LayoutId+" #ZPAtt_hoursView_myReqEmpSort").is(":visible")&&!$(AttendanceShift.LayoutId+" #ZPAtt_hoursView_myReqEmpSort").hasClass("sort")&&(path+="&isEmpSortAsc="+$(AttendanceShift.LayoutId+" #ZPAtt_hoursView_myReqEmpSort").hasClass("sort-u")),path+="&sdate="+startDate,path+="&edate="+endDate;var shiftLoc=shiftFilter.find("#ZPAtt_shiftlocation").val();shiftLoc&&shiftLoc.length>0&&(path+="&locationId="+JSON.stringify(shiftFilter.find("#ZPAtt_shiftlocation").val()));var shiftOrgTag=shiftFilter.find("#ZPAtt_shiftorgTag").val();Attendance.organizationTag.isEnabled()&&shiftOrgTag&&shiftOrgTag.length>0&&(path+="&orgTagId="+JSON.stringify(shiftFilter.find("#ZPAtt_shiftorgTag").val()));var shiftDept=shiftFilter.find("#ZPAtt_shiftdepartment").val();shiftDept&&shiftDept.length>0&&(path+="&departmentId="+JSON.stringify(shiftFilter.find("#ZPAtt_shiftdepartment").val()));var shiftListFilter=shiftFilter.find("#ZPAtt_shift_shiftName").val();shiftListFilter&&shiftListFilter.length>0&&(path+="&shiftId="+JSON.stringify(shiftFilter.find("#ZPAtt_shift_shiftName").val())),shiftFilter.find("#ZPAtt_userShiftMappingEmpName").val()&&(path+="&userId="+JSON.stringify(shiftFilter.find("#ZPAtt_userShiftMappingEmpName").val().split(",")));var entityObj=shiftFilter.find("#ZPAtt_shiftentity").val();entityObj&&entityObj.length>0&&(path+="&entityId="+JSON.stringify(entityObj));var bUnitObj=shiftFilter.find("#ZPAtt_shiftbusinessUnit").val();bUnitObj&&bUnitObj.length>0&&(path+="&bUnitId="+JSON.stringify(bUnitObj));var divisionObj=shiftFilter.find("#ZPAtt_shiftdivision").val();divisionObj&&divisionObj.length>0&&(path+="&divisionId="+JSON.stringify(divisionObj));var empFields,desgObj=shiftFilter.find("#ZPAtt_shiftdesg").val();if(desgObj&&desgObj.length>0&&(path+="&desgId="+JSON.stringify(desgObj)),Attendance.Export.showEmpFieldsToExp(isPdf))(empFields=Attendance.Export.getEmpFieldsToBeIncludedInExp()).length>0&&(path+="&empFields="+JSON.stringify(empFields));shiftFilter.find("#ZPAtt_shiftDirectRepTo").prop("checked")&&(path+="&showDirectRepTo=true")}else if(Layout.Page.pageId.includes("balanceotview"))form=$(Attendance.Entry.LayoutId+" #ZPAtt_att_entry_exp_form")[0],path="mode=balanceOtRepExport","true"===is5_0Enabled?path+="&erecno="+(void 0!==Layout.Page.urlparam.id?Layout.Page.urlparam.id:erecno):"0"!==$(Attendance.Entry.LayoutId+" #ZPAtt_otView_empName").val()&&(path+="&erecno="+$(Attendance.Entry.LayoutId+" #ZPAtt_otView_empName").val());else if(-1!==Layout.Page.pageId.indexOf("attendance-report-balanceotreport")){path="mode=attOtRepExport";var otRepFilter=Layout.Page.container.find("#ZPAtt_otReportfilter");path+=Attendance.Export.getFilterValues(otRepFilter,"otRep",isPdf);var rpSettval=$(Attendance.Report.LayoutId+" #ZPAtt_otRep_rpSett").val();""!==rpSettval&&"0"!==rpSettval&&(path+="&navigate="+Attendance.Report.navigate,path+="&rpSettId="+rpSettval),$(Attendance.Report.LayoutId+" #ZPAtt_otReport_myReqEmpSort").hasClass("sort")||(path+="&isEmpSortAsc="+$(Attendance.Report.LayoutId+" #ZPAtt_otReport_myReqEmpSort").hasClass("sort-u")),$(Attendance.Report.LayoutId+" #ZPAtt_repBalRepNavigation").data("fromDay")&&(path+="&fromDay="+$(Attendance.Report.LayoutId+" #ZPAtt_repBalRepNavigation").data("fromDay"),path+="&toDay="+$(Attendance.Report.LayoutId+" #ZPAtt_repBalRepNavigation").data("toDay"))}else if(-1!==Layout.Page.pageId.indexOf("attendance-regularization-myrequests")){form=$(Attendance.Reg.LayoutId+" #ZPAtt_att_Reg_Req_exp_form")[0],path="mode=attReqMyReqExport",Attendance.Reg.isRegReasonsEnabled&&"-3"!==Layout.Page.container.find("#ZPAtt_RegFilters_Reasons").val()&&Layout.Page.container.find("#ZPAtt_RegFilters_Reasons").val()&&(path+="&regReason="+Attendance.Reg.regReasons[Layout.Page.container.find("#ZPAtt_RegFilters_Reasons").val()]),$(Attendance.Reg.LayoutId+" #ZPAtt_Reg_myReqDaySort").hasClass("sort")||(path+="&isDaySortAsc="+$(Attendance.Reg.LayoutId+" #ZPAtt_Reg_myReqDaySort").hasClass("sort-u")),$(Attendance.Reg.LayoutId+" #ZPAtt_Reg_myReqEmpSort").hasClass("sort")||(path+="&isEmpSortAsc="+$(Attendance.Reg.LayoutId+" #ZPAtt_Reg_myReqEmpSort").hasClass("sort-u"));var filter=Layout.Page.container.find("#ZPAtt_regFilter");if((path+=Attendance.Export.getMyReqFilterDates(filter,"myReqReg")).includes("date error"))return;path+=Attendance.Export.getFilterValues(filter,"myReqReg",isPdf)}else if(-1!==Layout.Page.pageId.indexOf("attendance-permission-myrequests")){form=Layout.Page.container.find("#ZPAtt_att_Permission_Req_exp_form")[0],path="mode=attPermissionMyReqExport",Layout.Page.container.find("#ZPAtt_Permission_myReqEmpSort").hasClass("sort")||(path+="&isEmpSortAsc="+Layout.Page.container.find("#ZPAtt_Permission_myReqEmpSort").hasClass("sort-u"));filter=Layout.Page.container.find("#ZPAtt_permFilter");if((path+=Attendance.Export.getMyReqFilterDates(filter,"myReqPerm")).includes("date error"))return;path+=Attendance.Export.getFilterValues(filter,"myReqPerm",isPdf)}else if(-1!==Layout.Page.pageId.indexOf("attendance-onduty-myrequests")){form=Layout.Page.container.find("#ZPAtt_att_OnDuty_Req_exp_form")[0],path="mode=attODMyReqExport",Layout.Page.container.find("#ZPAtt_OD_myReqEmpSort").hasClass("sort")||(path+="&isEmpSortAsc="+Layout.Page.container.find("#ZPAtt_OD_myReqEmpSort").hasClass("sort-u"));filter=Layout.Page.container.find("#ZPAtt_onDutyFilter");if((path+=Attendance.Export.getMyReqFilterDates(filter,"myReqOD")).includes("date error"))return;path+=Attendance.Export.getFilterValues(filter,"myReqOD",isPdf)}else if(-1!==Layout.Page.pageId.indexOf("attendance-shiftmapping-shiftmaprequests")){form=Layout.Page.container.find("#ZPAtt_att_shiftChange_Req_exp_form")[0],path="mode=attShiftChangeMyReqExport",Layout.Page.container.find("#ZPAtt_EmpShiftMapList_myReqEmpSort").hasClass("sort")||(path+="&isEmpSortAsc="+Layout.Page.container.find("#ZPAtt_EmpShiftMapList_myReqEmpSort").hasClass("sort-u"));filter=Layout.Page.container.find("#ZPAtt_shiftMapFilter");if((path+=Attendance.Export.getMyReqFilterDates(filter,"myReqShiftMap")).includes("date error"))return;path+=Attendance.Export.getFilterValues(filter,"myReqShiftMap",isPdf)}else-1!==Layout.Page.pageId.indexOf("attendance-settings-useridmapping")&&(form=$(Attendance.Settings.LayoutId+" #ZPAtt_att_sett_idmap_form")[0],path="mode=userIdmapExport",$(Attendance.Settings.LayoutId+" #ZPAtt_userId_myReqEmpSort").hasClass("sort")||(path+="&isEmpSortAsc="+$(Attendance.Settings.LayoutId+" #ZPAtt_userId_myReqEmpSort").hasClass("sort-u")),$(Attendance.Settings.LayoutId+" #ZPAtt_userId_myReqIdSort").hasClass("sort")||(path+="&isIdSortAsc="+$(Attendance.Settings.LayoutId+" #ZPAtt_userId_myReqIdSort").hasClass("sort-u")));var expType=$("#zp_export_container").find("input[name='zp_ftype']:checked").val();isPdf&&(expType="pdf"),path+="&exportType="+expType,0===$(form).children().length&&$(form).append("<input type='hidden' name='conreqcsr' value='"+csrfToken+"'>"),path=encodeURI(path),form.action="AttendanceExport.zp?"+path,form.submit(),ZPeople.Message.showWarningMsg(ZPI18N.getString("zp.generatingreport"),2e4)},showMobileUsersFailureMsg:function(message){ZPeople.Message.showFailureMsg(message)},showExportWarningMsg:function(message,sec){void 0==sec&&(ZPeople.Message.fadeMessage("alert-info"),sec=!0),ZPeople.Message.showWarningMsg(message,sec)},getMyReqFilterDates:function(reportFilter,filId){var path="",sDate=reportFilter.find("#ZPAtt_"+filId+"_fromDate").val().trim(),eDate=reportFilter.find("#ZPAtt_"+filId+"_toDate").val().trim();if(""===sDate||""===eDate)return ZPeople.Message.showFailureMsg(ZPI18N.getString("zp.enterfromtodate")),path+="date error",!1;var fromDate=new Date(moment(sDate,dateFmt.toUpperCase())._d),toDate=new Date(moment(eDate,dateFmt.toUpperCase())._d);if(fromDate.getTime()>toDate.getTime())return ZPeople.Message.showFailureMsg(ZPI18N.getString("zp.greaterfromdate")),path+="date error",!1;var nextMonthDate=new Date(fromDate.getFullYear(),fromDate.getMonth()+1,fromDate.getDate()),dateErrMsg=ZPI18N.getString("zp.datewithinonemonth");if("myReqOD"===filId||"myReqPerm"===filId||"myReqReg"===filId){var erecno=reportFilter.find("#ZPAtt_"+filId+"_empName").val();if(erecno&&0!=erecno.length&&""!=erecno)1===erecno.split(",").length&&(nextMonthDate=new Date(fromDate.getFullYear()+1,fromDate.getMonth(),fromDate.getDate()),dateErrMsg=ZPI18N.getString("zp.datewithinoneyear"))}return toDate.getTime()>nextMonthDate?(ZPeople.Message.showFailureMsg(dateErrMsg),path+="date error",!1):(path+="&sDate="+sDate,path+="&eDate="+eDate)},getFilterValues:function(reportFilter,filId,isPdf){var path="",locObj=reportFilter.find("#ZPAtt_"+filId+"_location").val();if(locObj&&locObj.length>0&&(path+="&locationId="+JSON.stringify(locObj)),Attendance.organizationTag.isEnabled()){var orgTagObj=reportFilter.find("#ZPAtt_"+filId+"_orgTag").val();orgTagObj&&orgTagObj.length>0&&(path+="&orgTagId="+JSON.stringify(orgTagObj))}var depObj=reportFilter.find("#ZPAtt_"+filId+"_department").val();depObj&&depObj.length>0&&(path+="&departmentId="+JSON.stringify(depObj));var shiftObj=reportFilter.find("#ZPAtt_"+filId+"_shift").val();shiftObj&&shiftObj.length>0&&(path+="&shiftId="+JSON.stringify(shiftObj));var entityObj=reportFilter.find("#ZPAtt_"+filId+"_entity").val();entityObj&&entityObj.length>0&&(path+="&entityId="+JSON.stringify(entityObj));var bUnitObj=reportFilter.find("#ZPAtt_"+filId+"_businessUnit").val();bUnitObj&&bUnitObj.length>0&&(path+="&bUnitId="+JSON.stringify(bUnitObj));var divisionObj=reportFilter.find("#ZPAtt_"+filId+"_division").val();divisionObj&&divisionObj.length>0&&(path+="&divisionId="+JSON.stringify(divisionObj));var desgObj=reportFilter.find("#ZPAtt_"+filId+"_desg").val();desgObj&&desgObj.length>0&&(path+="&desgId="+JSON.stringify(desgObj)),(statObj=reportFilter.find("#ZPAtt_"+filId+"_status").val())&&statObj.length>0&&(path+="&statFil="+JSON.stringify(statObj));var statObj,erecno=reportFilter.find("#ZPAtt_"+filId+"_empName").val();if("userRep"!==filId&&erecno&&""!=erecno&&(path+="&erecno="+JSON.stringify(erecno.split(","))),(statObj=reportFilter.find("#ZPAtt_"+filId+"_empProfile").val())&&statObj.length>0&&(path+="&userTypeId="+JSON.stringify(statObj)),reportFilter.find("#ZPAtt_"+filId+"_incExitDate").prop("checked")&&(path+="&incDateOfExit=true"),Attendance.Export.showEmpFieldsToExp(isPdf)){var empFields=Attendance.Export.getEmpFieldsToBeIncludedInExp();empFields.length>0&&(path+="&empFields="+JSON.stringify(empFields))}return reportFilter.find("#ZPAtt_"+filId+"_showDirectRepTo").prop("checked")&&(path+="&showDirectRepTo=true"),path},consEmpFieldsToShow:function(){var filterOptions;filterOptions="attendance-shiftmapping-listview"===Layout.Page.pageId||"attendance-shiftmapping-calview"===Layout.Page.pageId?AttendanceShift.depLocShiftOptions:Attendance.Report.depLocShiftOptions;var txt='<div class="chkbx_lsts" id ="zp_export_empFeilds"><label class="checkbox DIB"><input type="checkbox" name="zp_attExp_incRepTo"><span>'+ZPI18N.getString("zp.reportingto")+"</span></label>";ZPeople.orgStructureTagMap.entity&&filterOptions.entityOption&&filterOptions.entityOption.length>0&&(txt+='<label class="checkbox DIB"><input type="checkbox" name="zp_attExp_incEntity"><span>'+(ZPeople.orgStructureDispNameMap&&ZPeople.orgStructureDispNameMap.entity?ZPeople.orgStructureDispNameMap.entity:ZPI18N.getString("zp.employeeentity"))+"</span></label>");ZPeople.orgStructureTagMap.unit&&filterOptions.bUnitOption&&filterOptions.bUnitOption.length>0&&(txt+='<label class="checkbox DIB"><input type="checkbox" name="zp_attExp_incUnit"><span>'+(ZPeople.orgStructureDispNameMap&&ZPeople.orgStructureDispNameMap.unit?ZPeople.orgStructureDispNameMap.unit:ZPI18N.getString("zp.employeeunit"))+"</span></label>");ZPeople.orgStructureTagMap.division&&filterOptions.divisionOption&&filterOptions.divisionOption.length>0&&(txt+='<label class="checkbox DIB"><input type="checkbox" name="zp_attExp_incDiv"><span>'+(ZPeople.orgStructureDispNameMap&&ZPeople.orgStructureDispNameMap.division?ZPeople.orgStructureDispNameMap.division:ZPI18N.getString("zp.divisionname"))+"</span></label>");return filterOptions.depOption&&filterOptions.depOption.length>0&&(txt+='<label class="checkbox DIB"><input type="checkbox" name="zp_attExp_incDep"><span>'+ZPI18N.getString("zp.department")+"</span></label>"),filterOptions.desgOption&&filterOptions.desgOption.length>0&&(txt+='<label class="checkbox DIB"><input type="checkbox" name="zp_attExp_incDesg"><span>'+ZPI18N.getString("zp.designation")+"</span></label>"),filterOptions.locOption&&filterOptions.locOption.length>0&&(txt+='<label class="checkbox DIB"><input type="checkbox" name="zp_attExp_incLoc"><span>'+ZPI18N.getString("zp.location")+"</span></label>"),Attendance.organizationTag.isEnabled()&&filterOptions.orgTagOption&&filterOptions.orgTagOption.length>0&&(txt+='<label class="checkbox DIB"><input type="checkbox" name="zp_attExp_incOrgTag"><span>'+ZPeople.orgTagDisplayName+"</span></label></div>"),txt+="</div>"},showEmpFieldsToExp:function(isPdf){var pageId=Layout.Page.pageId;if(isPdf)return!1;if(-1!==Layout.Page.pageId.indexOf("attendance-report-balanceotreport")&&!isadmin&&!isManageAttendanceData&&!isLead)return!1;if("attendance-shiftmapping-listview"===pageId||"attendance-shiftmapping-calview"===pageId){var attModule=ZPeople.Module.MODULE_DATA.attendance;return!!(attModule.isSPOCAdmin||attModule.isManageAttedance||isadmin||attModule.isLeadForShift||void 0!==attModule.isSPOCShiftView)}return!!("attendance-report-dailyreport"===pageId&&($(Attendance.Report.LayoutId+" #ZPAtt_dailyReportListView").is(":visible")||$(Attendance.Report.LayoutId+" #ZPAtt_dailyReportListView").next().is(":visible"))||"attendance-report-earlylatereport"===pageId||"attendance-report-monthlyreport"===pageId||"attendance-report-summaryreport"===pageId||"attendance-report-userreport"===pageId&&!isPdf||"attendance-report-balanceotreport"===pageId)},getEmpFieldsToBeIncludedInExp:function(){var empFields=[],index=0;return $("input:checkbox[name=zp_export_incEmpFeilds]").prop("checked")&&$("#zp_export_incEmpFeildsDiv").is(":visible")&&($("input:checkbox[name=zp_attExp_incRepTo]").prop("checked")&&(empFields[index++]=0),$("input:checkbox[name=zp_attExp_incEntity]").prop("checked")&&(empFields[index++]=1),$("input:checkbox[name=zp_attExp_incUnit]").prop("checked")&&(empFields[index++]=2),$("input:checkbox[name=zp_attExp_incDiv]").prop("checked")&&(empFields[index++]=3),$("input:checkbox[name=zp_attExp_incDep]").prop("checked")&&(empFields[index++]=4),$("input:checkbox[name=zp_attExp_incDesg]").prop("checked")&&(empFields[index++]=5),$("input:checkbox[name=zp_attExp_incLoc]").prop("checked")&&(empFields[index++]=6),$("input:checkbox[name=zp_attExp_incOrgTag]").prop("checked")&&(empFields[index++]=9)),empFields}},Attendance.printReport=function(){var newWindow=window.open();newWindow.focus();var newContent='<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html>',wholeCont=$("#"+Layout.Page.pageId).clone(),logoStyle="width: 239px;height: 60px;",reportStyle="width:100%;";if(wholeCont.find(".fixTable")[0]){if(reportStyle="width:100%;zoom:65%;",Layout.Page.container.find("#ZPAtt_lateComerReport")[0])wholeCont.find("\t.RHLtbl.RHFixed").css("padding-top","0"),wholeCont.find("\t.RHLtbl.RHFixed").css("padding-left","300px"),wholeCont.find("#ZPAtt_attlateComerDayReportMultiTableHeader").css("position","relative"),wholeCont.find("#ZPAtt_attlateComerDayReportMultiTableHeader").css("left","0"),wholeCont.find(".RHFixed .table>thead>tr.ZPLHRow>th:first-child").css("position","absolute"),wholeCont.find("#ZPAtt_attlateComerDayReportMultiTableHeader th:first-child").css("left","0"),wholeCont.find("#ZPAtt_attlateComerDayReportMultiTableHeader th + th").css("width","auto"),wholeCont.find("#ZPAtt_lateComerReportTableBody td + td").css("width","auto"),reportStyle="width:100%;zoom:100%;";else{wholeCont.find(".fixTable").removeClass("fixTable").children().removeClass("RHLtbl RHFixed").removeAttr("style"),wholeCont.find(".fxdtd").removeClass("fxdtd");var cont=".TB_fxd";wholeCont.find("#ZPAtt_attSumReportScrcont")[0]&&(cont=$("#ZPAtt_attSumDayReportTableHeader").is(":visible")?"#ZPAtt_attSumDayReportTableHeader":"#ZPAtt_attSumHourReportTableHeader",wholeCont.find("#ZPAtt_detSumRep").removeClass("RHLtbl").removeClass("RHFixed"),Attendance.isInEmbedPage&&wholeCont.find("#ZPAtt_detSumRep").css("padding-left","0px")),wholeCont.find(cont).removeAttr("style")}logoStyle="width: 301px;height: 60px;",$(wholeCont).find("#ZPAtt_mReoprt_abbr").css("width","2300px")}wholeCont.find(".col-md-4").css("width","33.33333333%").css("float","left"),wholeCont.find(".ZPNdata").remove();var tabCont=wholeCont.find(".tabcont");if(tabCont[0]){tabCont.children(":eq(0)").remove();var tabContChild=tabCont.children(":eq(0)");tabContChild.removeClass("Tlis FLhead"),tabContChild.show(),tabContChild.find("thead").find("div").remove(),tabCont.css("width","inherit"),tabCont.removeClass("tabcont")}$(wholeCont).find(".ZPPhed").find(".col-md-4").eq(2).remove(),$(wholeCont).find("#ZPAtt_reportFilters").remove(),$(wholeCont).find("#ZPAtt_calFilters").remove(),$(wholeCont).find("#ZPAtt_RegFilters").remove(),$(wholeCont).find("iframe").remove(),$(wholeCont).find(".checkbox").remove(),$(wholeCont).find("form").remove();var datCont=wholeCont.find(".ZPDat");datCont[0]&&($(wholeCont).find(".ZPDat").css("width","100%"),datCont.css("left","0px"),datCont.css("bottom","inherit"),datCont.find("li").removeAttr("class"),datCont.find("a").removeAttr("href").removeAttr("data-toggle"),$("#"+Layout.Page.pageId).find(".ZPDat").find("li")[0]&&(datCont.css("right","inherit"),datCont.css("height","112px"),datCont.find("li").children().first().removeAttr("style"),$(datCont.find("li")[0].children).css("padding-bottom","15px").css("padding-top","25px"),$(datCont.find("li")[1].children).css("padding-bottom","23px").css("padding-top","18px"),$(wholeCont).find(".ZPDat").find(".ZPBC1").remove()),$(wholeCont).find("#ZPAttUserSum_Days").addClass("active in MT5").css("width","100%"),$(wholeCont).find("#ZPAttUserSum_Hours").addClass("active in MT20"));var copyhead=$("head").clone();if(copyhead.find("script").each(function(){$(this).remove()}),$(wholeCont).find(".sort-img").remove(),$(wholeCont).find(".select2-container").find("b").remove(),$(wholeCont).find(".ZPCalNav").detach().appendTo($(wholeCont).find(".ZPPhed").find(".col-md-4")[1]),$(wholeCont).find(".ZPCalNav").addClass("MT10").css("text-align","center"),$($(wholeCont).find(".ZPPhed").find(".col-md-4")[1]).find("nav").remove(),$(wholeCont).find(".table-responsive").removeClass(),$(wholeCont).find("#ZPAtt_dailyReportChartView").find(".highcharts-contextbutton").remove(),$(wholeCont).find("#ZPAtt_sumRepNav").css("top","10px"),$(wholeCont).find(".IC-ar-lft").remove(),$(wholeCont).find(".IC-ar-rgt").remove(),-1!=Layout.Page.pageId.indexOf("attendance-shiftmapping-calview")&&AttendanceShift.isHoursListView&&($(wholeCont).find(".top-gutter").removeClass("top-gutter"),$(wholeCont).find("#ZPAtt_hours_shiftLister").find("li").css("display","inline-block")),newContent+=copyhead.html(),newContent+='<body onload="self.print()" style="overflow: scroll;'+reportStyle+'background: #fff">',!Attendance.isInEmbedPage){var logoCont=$(".ZPHeadLft").clone();$(logoCont).find("i").remove(),$(logoCont).find("#zp_minimax_leftpanel").remove(),newContent+='<div class="ZPHeadLft" style="'+logoStyle+'">'+logoCont.html()+"</div>"}newContent+=wholeCont.html(),newWindow.document.write(newContent),newWindow.document.close()},Attendance.Common={convertTimerInputToMinsOrSecs:function(value,getResultInSecs,is24HoursForm){if(value){var hours=parseInt(value.split(":")[0],10),minutes=parseInt(value.split(":")[1],10);is24HoursForm||"hh:mm a"!==timeFormat||12!==hours||(hours=0);var mer=value.split(" ")[1];return minutes?minutes+=mer&&"pm"===mer.toLowerCase()?60*hours+720:60*hours:minutes=mer&&"pm"===mer.toLowerCase()?60*hours+720:60*hours,!0===getResultInSecs?60*minutes:minutes}},convertTimerInputToMinsOrSecsFromDay:function(givDateTime,getResultInSecs,is24HoursForm,refDate){if(givDateTime){var splitGiven=givDateTime.split(" "),givDate=Calendar.parseDate(splitGiven[0],uidateFormat);2===splitGiven.length&&splitGiven.push("");var givTime=Attendance.Common.convertTimerInputToMinsOrSecs(splitGiven[1]+" "+splitGiven[2],getResultInSecs,is24HoursForm);return givDate>refDate&&(givTime+=!0===getResultInSecs?86400:1440),givTime}},setTimePicker:function(showMeridian,onclick,placeholder,timePicker){timePicker.timepicker({defaultTime:"",disableMousewheel:!0,showMeridian:showMeridian,minuteStep:1}),onclick?timePicker.attr("onclick","Attendance.set_DefValue_ForTimePicker_Input(this)"):timePicker.removeAttr("onclick"),timePicker.attr("placeholder",placeholder).timepicker("setTime","")}},Attendance.permDenied=function(){var permissionDenied="<div class='ZPNdata'><div></div><p class='no-para'>"+ZPI18N.getString("zp.permdenied")+"</p></div>";Layout.Page.container.find(".Scrcont").html(permissionDenied),ZPUtil.noDataSVG(null,ZPeople.getResourceURL(newUIImageUrl+"svg/no-permission.svg"),null,Layout.Page.container.find(".ZPNdata div")),Layout.Page.container.find(".ZPDat,.ZPAct").remove(),$("#page-wrapper").removeAttr("class")},Attendance.dateLessThanOrEqualCurrDate=function(date,isLessThan){var givenDate=new Date(moment(date,dateFmt.toUpperCase()).utcOffset(AttendanceShift.depLocShiftList.currDate.offSet)._d).getTime(),currDate=new Date(moment().utcOffset(AttendanceShift.depLocShiftList.currDate.offSet).startOf("day")._d).getTime();return isLessThan?givenDate<currDate:givenDate<=currDate},Attendance.consResetEmpSearch=function(id,layout,construct,reset){var eleId="#"+id,searchJson=layout.find(eleId).data("searchJson");construct&&!searchJson&&(Attendance.changeinputtoselect2(id,layout[0].id),searchJson=layout.find(eleId).data("searchJson")),reset&&searchJson&&ZPComponents.Search.reset(searchJson,!0)},Attendance.isSpiceJet=function(){return"669143097"===_LOGGEDIN_ZSOID||"72277743"===_LOGGEDIN_ZSOID||"802713071"===_LOGGEDIN_ZSOID||"14513569"===_LOGGEDIN_ZSOID||"59429288"===_LOGGEDIN_ZSOID||"846640023"===_LOGGEDIN_ZSOID||"78479611"===_LOGGEDIN_ZSOID},Attendance.setClassToShowStatus=function(colourCode,isBG){var ondDutyClass="onduty-txt",leaveClass="leave-txt",weekendClass="wknd-txt",holidayClass="holiday-txt";"true"!==is5_0Enabled&&!0!==is5_0Enabled||(ondDutyClass="zpl_ondutyclr",leaveClass="zpl_levclr",weekendClass="zpl_wkendclr",holidayClass="zpl_holiclr");var colorClass=ondDutyClass;return isBG&&(colorClass="onduty-bg"),"#00bd9e"===colourCode?(colorClass="grn",isBG&&(colorClass="grn-bg")):"#e95b6d"===colourCode?(colorClass="red",isBG&&(colorClass="red-bg")):"#fccaa1"===colourCode?(colorClass=leaveClass,isBG&&(colorClass="leave-bg")):"#ffe5a3"===colourCode?(colorClass=weekendClass,isBG&&(colorClass="wkend-bg")):"#9cc6e5"===colourCode?(colorClass=holidayClass,isBG&&(colorClass="holiday-bg")):"#ffe5a3"===colourCode?(colorClass=weekendClass,isBG&&(colorClass="wkend-bg")):"#9cc6e5"===colourCode&&(colorClass=holidayClass,isBG&&(colorClass="holiday-bg")),colorClass},Attendance.isLeaveAvail=function(colourCode){return"#fccaa1"===colourCode},Attendance.isZoho=function(){return"735594"===_LOGGEDIN_ZSOID||"670195449"===_LOGGEDIN_ZSOID||"491893108"===_LOGGEDIN_ZSOID||"55301704"===_LOGGEDIN_ZSOID||"14513569"===_LOGGEDIN_ZSOID||"491872789"===_LOGGEDIN_ZSOID||"6304037"===_LOGGEDIN_ZSOID||"20065390949"===_LOGGEDIN_ZSOID||"739344246"===_LOGGEDIN_ZSOID||"664364920"===_LOGGEDIN_ZSOID||"11283586"===_LOGGEDIN_ZSOID||"35382301"===_LOGGEDIN_ZSOID||"72277743"===_LOGGEDIN_ZSOID||"60017498083"===_LOGGEDIN_ZSOID||"802713071"===_LOGGEDIN_ZSOID||"16042070"===_LOGGEDIN_ZSOID||"851911847"===_LOGGEDIN_ZSOID},Attendance.setUserTypeIdForExport=function(path){return path.includes("userTypeId")||(path+="&userTypeId="+JSON.stringify(Attendance.Report.defEmpProfSel),path+="&incDateOfExit=true"),path},Attendance.returnSessionInWords=function(splittedStatus,sessionIndex){var isHalf=splittedStatus.includes("0.5"),isQuarter=splittedStatus.includes("0.25");if(isHalf||isQuarter){var session=splittedStatus.slice(sessionIndex+1,sessionIndex+2);return"1"===session?isHalf?"("+ZPI18N.getString("zp.firsthalf")+")":"("+ZPI18N.getString("zp.firstquarter")+")":"2"===session?isHalf?"("+ZPI18N.getString("zp.secondhalf")+")":"("+ZPI18N.getString("zp.secondquarter")+")":"3"===session?"("+ZPI18N.getString("zp.thirdquarter")+")":"("+ZPI18N.getString("zp.fourthquarter")+")"}return""},Attendance.setLeaveStat=function(splittedStatus,translate){var sessionIndex=splittedStatus.indexOf("$");if(-1!=sessionIndex){var status="";return status=ZSEC.Encoder.encodeForHTML(splittedStatus.slice(splittedStatus.indexOf("(")+1,sessionIndex)),status+=Attendance.returnSessionInWords(splittedStatus,sessionIndex)}var hourBasedLeaveIndex=splittedStatus.indexOf("#");if(-1!=hourBasedLeaveIndex){var hoursdtl=splittedStatus.slice(splittedStatus.indexOf("#",hourBasedLeaveIndex+1)+1);return hoursdtl=(hoursdtl=hoursdtl.replace(" - ","(")).replace(")"," "+ZPI18N.getString("zp.gracehour")+")"),ZSEC.Encoder.encodeForHTML(splittedStatus.slice(splittedStatus.indexOf("(")+1,hourBasedLeaveIndex))+hoursdtl}return-1==sessionIndex&&-1==hourBasedLeaveIndex&&translate?splittedStatus=Attendance.statusI18n(splittedStatus):-1==sessionIndex&&-1==hourBasedLeaveIndex&&(splittedStatus=ZSEC.Encoder.encodeForHTML(Attendance.replaceLeave(splittedStatus))),splittedStatus},Attendance.consLeaveStat=function(status,removeComma,escapeHtml){for(var transStat="",splittedStatus=status.split(", "),len=0;len<splittedStatus.length;len++)splittedStatus[len]=Attendance.setLeaveStat(splittedStatus[len],!1),transStat=""===transStat?Attendance.statusI18n(splittedStatus[len],!0):transStat+", "+Attendance.statusI18n(splittedStatus[len],!0);return removeComma&&(transStat=Attendance.remCommaInLast(transStat)),escapeHtml&&(transStat=Attendance.escapeHtml(transStat)),transStat},Attendance.organizationTag={isOrgTagEnabled:void 0,isEnabled:function(){if(void 0==this.isOrgTagEnabled){let cache=-1===Layout.Page.pageId.indexOf("reports")?ZPeople.Module.MODULE_DATA.attendance:ZPLite.Reports.moduleData.attendance;this.isOrgTagEnabled=cache&&cache.isOrgTagEnabled}return this.isOrgTagEnabled},fetchParams:function(filterDiv,params){if(!this.isEnabled())return params;let filterData=ZPLite.Filters.getValues(filterDiv.find('[name="orgTagFilter"]'));if(void 0!==filterData&&filterData.length>0){var orgTagId=[];$.each(filterData,function(index,options){orgTagId.push(options.id)}),params.orgTagId=JSON.stringify(orgTagId)}return params},constructOptions:function(result,cache){if(!this.isEnabled()||!result.orgTagList)return cache;let orgTagList=result.orgTagList,orgTagOption="";for(var orgTagId in orgTagList)-1===(orgTagId+"").indexOf("_notEnc")&&(orgTagOption+="<option value="+orgTagId+">"+orgTagList[orgTagId]+"</option>");cache.orgTagOption=orgTagOption}},Attendance.returnLeaveColorClass=function(leaveTypes,defClass,leaveTypeLen,leaveName){for(var index=0;index<leaveTypeLen;index++){var leaveDet=leaveTypes[index];leaveName.includes(leaveDet.lName)&&(defClass=leaveDet.lColorCode)}return defClass},Attendance.Entry={selectedView:"week",erecno:null,selectedPageView:"list",reloadFromWMS:!0,getShiftListCall:0,enoFromSelfService:null,allowUIEntry:0,init:function(){Attendance.Entry.LayoutId="#"+Layout.Page.parentContainer[0].id;var layout=Layout.Page.container;if(isManageAttendanceData=ZPeople.Module.MODULE_DATA.attendance.isManageAttedance,isRegConfigured=ZPeople.Module.MODULE_DATA.attendance.isRegConfigured,isOnDutyConfigured=ZPeople.Module.MODULE_DATA.attendance.isOnDutyConfigured,isPermissionConfigured=ZPeople.Module.MODULE_DATA.attendance.isPermissionConfigured,isSPOCEntryEdit=ZPeople.Module.MODULE_DATA.attendance.isSPOCEntryEdit,isEmpChooseApp=ZPeople.Module.MODULE_DATA.attendance.isEmpChooseApp,isEmpChooseAppOD=ZPeople.Module.MODULE_DATA.attendance.isEmpChooseAppOD,Layout.Page.container.popover({selector:"[data-popover].popHover",trigger:"click hover",delay:{show:50,hide:50}}),Layout.Page.container.find("[data-toggle=tooltip]").tooltip({trigger:"click"}),!Shift.shiftList)return 0===$(Attendance.Entry.LayoutId+" .Scrcont").find("#zp_page_loading").length&&$(Attendance.Entry.LayoutId+" .Scrcont").append(ZPeople.LOADING_HTML),0===Attendance.Entry.getShiftListCall&&(Shift.getShiftList(),Attendance.Entry.getShiftListCall=1),void setTimeout(Attendance.Entry.init,100);if(-1!==Attendance.Entry.LayoutId.indexOf("selfservice")){Attendance.Entry.erecno=null,Attendance.Entry.loadToday=!1;var headerCont=$(Attendance.Entry.LayoutId+" .ZP-atdancehead");headerCont.show().next().removeAttr("style");var urlParamId=Layout.Page.urlparam.id;urlParamId&&urlParamId!==erecno&&(Attendance.Entry.erecno=urlParamId,Attendance.Entry.enoFromSelfService=Attendance.Entry.erecno,headerCont.hide().next().css("margin-top","20px"))}else Attendance.Entry.enoFromSelfService&&(Attendance.Entry.erecno=null,Attendance.Entry.loadToday=!1);if(Attendance.consResetEmpSearch("ZPAtt_Permission_FilEmployee",Layout.Page.container,!0,!1),Layout.Page.container.find("#ZPAtt_PermissionType").select2(),Layout.Page.container.find("#ZPAtt_PermissionFromTime , #ZPAtt_PermissionToTime").timepicker({defaultTime:"",showMeridian:"hh:mm a"==timeFormat,disableMousewheel:!0,minuteStep:1}),AttPermissions.loadPermissionDetails(),AttPermissions.constructPermissionSelect(AttPermissions.cachePermission[erecno]),$(Attendance.Entry.LayoutId).find("#zp_page_loading").remove(),isadmin&&(isManageAttendanceData=!0),isSPOCEntryEdit||isManageAttendanceData||layout.find("#ZPAtt_entry_importLI").hide(),$(Attendance.Entry.LayoutId+" #ZPAtt_listView").is(":visible"))Attendance.Entry.selectedPageView="list",$(Attendance.Entry.LayoutId+" #ZPAtt_listView").hide(),$(Attendance.Entry.LayoutId+" #ZPAtt_listView").fadeIn(200),0===$(Attendance.Entry.LayoutId+" #ZPAtt_listViewEntries").children().length?(ZPMaps.loadStatic(),Attendance.Entry.getList(Attendance.Entry.selectedView,Attendance.Entry.preMonth,!0)):(-1===Attendance.Entry.LayoutId.indexOf("selfservice")&&1===Attendance.Entry.allDataList.showScaleView?null!==Attendance.Entry.erecno?($("#page-wrapper").attr("class","Nbar2 Dbar1"),Layout.URLS[Layout.Page.currentmode].wrapperClass="Nbar2 Dbar1"):($("#page-wrapper").attr("class","Nbar2 Dbar1"),Layout.URLS[Layout.Page.currentmode].wrapperClass="Nbar2 Dbar1",Attendance.Entry.allowUIEntry||($("#page-wrapper").attr("class","Nbar4 Dbar1"),Layout.URLS[Layout.Page.currentmode].wrapperClass="Nbar4 Dbar1")):-1===Attendance.Entry.LayoutId.indexOf("selfservice")&&(null!==Attendance.Entry.erecno?($("#page-wrapper").attr("class","Nbar2 Sbar2"),Layout.URLS[Layout.Page.currentmode].wrapperClass="Nbar2 Sbar2",$(Attendance.Entry.LayoutId+" #ZPAtt_timeAndScaleMeasure").attr("class","time-scale-measure")):($("#page-wrapper").attr("class","Nbar2 Sbar2"),Layout.URLS[Layout.Page.currentmode].wrapperClass="Nbar2 Sbar2",$(Attendance.Entry.LayoutId+" #ZPAtt_timeAndScaleMeasure").attr("class","time-scale-measure"),Attendance.Entry.allowUIEntry||($("#page-wrapper").attr("class","Nbar4 Sbar2"),Layout.URLS[Layout.Page.currentmode].wrapperClass="Nbar4 Sbar2",$(Attendance.Entry.LayoutId+" #ZPAtt_timeAndScaleMeasure").attr("class","time-scale-measure Aband")))),$(Attendance.Entry.LayoutId+" #ZPAtt_listViewEntries").is(":visible")&&null===Attendance.Entry.erecno&&Attendance.Entry.setFunctionInOrOut(),0===Attendance.Entry.preMonth&&$(Attendance.Entry.LayoutId+" #ZPAtt_listViewEntries .today-active").is(":visible")&&null===Attendance.Entry.erecno||!Attendance.Entry.loadToday?(Attendance.Entry.isPrevExtended&&(Attendance.Entry.loadToday=!1),Attendance.Entry.getList()):null!==Attendance.Entry.erecno?(Attendance.Entry.loadToday=!1,Attendance.Entry.getList(Attendance.Entry.selectedView,Attendance.Entry.preMonth)):(Attendance.Entry.showDayList(Attendance.Entry.allDataList.dayList),Attendance.Entry.showUserDet(Attendance.Entry.allDataList),"week"===Attendance.Entry.selectedView?($(Attendance.Entry.LayoutId+" #ZPAtt_weekViewBut").attr("class","btn btn-primary togg"),$(Attendance.Entry.LayoutId+" #ZPAtt_monViewBut").attr("class","btn btn-default togg")):"month"===Attendance.Entry.selectedView&&($(Attendance.Entry.LayoutId+" #ZPAtt_weekViewBut").attr("class","btn btn-default togg"),$(Attendance.Entry.LayoutId+" #ZPAtt_monViewBut").attr("class","btn btn-primary togg"))));else if($(Attendance.Entry.LayoutId+" #ZPAtt_tabView").is(":visible"))Attendance.Entry.selectedPageView="tabler",$(Attendance.Entry.LayoutId+" #ZPAtt_tabView").hide(),$(Attendance.Entry.LayoutId+" #ZPAtt_tabView").fadeIn(200),0===Object.keys(Attendance.Entry.allDataList).length||Attendance.Entry.loadTabulerView?Attendance.Entry.getList():null!==Attendance.Entry.erecno?(Attendance.Entry.loadToday=!1,Attendance.Entry.getList(Attendance.Entry.selectedView,Attendance.Entry.preMonth)):(Attendance.Entry.showDayListTabler(Attendance.Entry.allDataList.dayList),"week"===Attendance.Entry.selectedView?($(Attendance.Entry.LayoutId+" #ZPAtt_weekViewBut").attr("class","btn btn-primary togg"),$(Attendance.Entry.LayoutId+" #ZPAtt_monViewBut").attr("class","btn btn-default togg")):"month"===Attendance.Entry.selectedView&&($(Attendance.Entry.LayoutId+" #ZPAtt_weekViewBut").attr("class","btn btn-default togg"),$(Attendance.Entry.LayoutId+" #ZPAtt_monViewBut").attr("class","btn btn-primary togg")),Attendance.Entry.showUserDet(Attendance.Entry.allDataList));else if(-1!==Attendance.Entry.LayoutId.indexOf("attendance-entry-balanceotview")){if(!Attendance.Entry.balanceOtView)return void Attendance.Entry.getBalanceOtView()}else-1!==Attendance.Entry.LayoutId.indexOf("attendance-entry-calendarview")&&($(Attendance.Entry.LayoutId+" table").hide(),$(Attendance.Entry.LayoutId+" table").fadeIn(200),Attendance.Entry.selectedPageView="calendar",null===Attendance.Entry.calObj?Attendance.Entry.getList():NewCalendar.initCalendar(Attendance.Entry.calObj));ZPeople.reloadSelfServAtt=!1},toggleDayHour:function(obj){"Day"==obj?($(Attendance.Entry.LayoutId+" #ZPAttView_Days").addClass("active in"),$(Attendance.Entry.LayoutId+" #ZPAttView_Hours").removeClass("active in")):($(Attendance.Entry.LayoutId+" #ZPAttView_Hours").addClass("active in"),$(Attendance.Entry.LayoutId+" #ZPAttView_Days").removeClass("active in"))},getHourPopup:function(){ZPeople.BSModal.show($("#"+Layout.Page.pageId+" #ZPAttView_Rep"))},getDayHourView:function(obj){"Day"==obj?($(Attendance.Entry.LayoutId+" #ZPAttView_RepDays").addClass("active"),$(Attendance.Entry.LayoutId+" #ZPAttView_RepHours").removeClass("active")):($(Attendance.Entry.LayoutId+" #ZPAttView_RepHours").addClass("active"),$(Attendance.Entry.LayoutId+" #ZPAttView_RepDays").removeClass("active"))},auditDate:null,showAuditPage:function(){$(Attendance.Entry.LayoutId+" #ZPAtt_allEntries_popup").hasClass("in")?Attendance.Entry.auditDate=Attendance.Entry.allDataList.dayList[Attendance.Entry.selectedRowIndex].attDate:delete Attendance.Entry.auditDate,ZPeople.BSModal.hide("ZPAtt_allEntries_popup"),window.location.href="#attendance/entry/audithistory"},getCurrDayEntry:function(rowIndex,fromEntryEdit){var param={mode:"getStatus",conreqcsr:csrfToken};if(null!==rowIndex&&void 0!==rowIndex){var daylist=Attendance.Entry.allDataList.dayList[rowIndex];null!==Attendance.Entry.erecno&&(param.erecno=Attendance.Entry.erecno),daylist.isToday||(param.orgDate=daylist.ldate)}param.isListView=!0,$.post("/AttendanceAction.zp",param,function(rdata){if(null!==rowIndex&&void 0!==rowIndex&&(Attendance.Entry.allDataList.entries[daylist.attDate]=rdata.response,Attendance.Entry.showDayList({0:daylist},$(Attendance.Entry.LayoutId+" #ZPAtt_listViewEntries tr")[rowIndex],fromEntryEdit),Attendance.Entry.getMonthReportForUser(),"undefined"!=typeof ZPDashboard&&ZPCal.Calendar&&ZPCal.Calendar.attendanceStatusHandleCallback(rdata)),Attendance.Dashboard&&(isBrkRunning=rdata.isBreakRunning,layout=$(Attendance.Dashboard.pageLayout()),layout.find("#ZPD_Top_Att_Stat").parent().hide(),!rdata.allowUIEntry)){layout.find("#ZPD_Top_Att_Stat").parent().show();var checkInOutBut=layout.find("#ZPD_Top_Att_Stat").attr("class","in CP").removeAttr("disabled").attr("onclick","Attendance.Dashboard.CurrStatus.updateCheckOut(true)");if(checkInOutBut.removeAttr("style").html(ZPI18N.getString("zp.checkin")+"<svg viewBox='25 25 50 50' class='DN'><circle cx='50' cy='50' r='20'></circle></svg><div class='IC-clock S16'></div>"),Attendance.Dashboard.CurrStatus.currDayData=rdata.response,!1===rdata.allowedToCheckIn&&!rdata.isBreakRunning){(checkInOutBut=layout.find("#ZPD_Top_Att_Stat").attr("class","out CP").removeAttr("disabled").attr("onclick","Attendance.Dashboard.CurrStatus.updateCheckOut()")).removeAttr("style").html(ZPI18N.getString("zp.checkout")+"<svg viewBox='25 25 50 50' class='DN'><circle cx='50' cy='50' r='20'></circle></svg><div class='IC-clock S16'></div>");var entries=rdata.response,finVal=entries[entries.length-1];entries.length>0&&void 0!==finVal.totalSecs&&(Attendance.Dashboard.CurrStatus.display_sec=finVal.totalSecs),entries.length>0&&void 0!==finVal.addSecs?(Attendance.Dashboard.CurrStatus.addsecs=finVal.addSecs,Attendance.Dashboard.CurrStatus.temp_tsecs=0,Attendance.Dashboard.CurrStatus.hasaddsecs=!1):(Attendance.Dashboard.CurrStatus.addsecs=finVal.tsecs,Attendance.Dashboard.CurrStatus.hasaddsecs=!0)}Attendance.Dashboard.DashboardTimer=void 0,Attendance.Dashboard.CurrStatus.getCurrRunningTime(Attendance.Dashboard.CurrStatus.addsecs,Attendance.Dashboard.CurrStatus.hasaddsecs,rdata.allowedToCheckIn,rdata.isBreakRunning),Attendance.isWebCoOrdMandatory=void 0!==rdata.isWebCoOrdMandatory&&rdata.isWebCoOrdMandatory,Attendance.isTrackLocationEnabled=void 0!==rdata.isTrackLocationEnabled&&rdata.isTrackLocationEnabled,Attendance.isAllowToCapturePhotoInWeb=void 0!==rdata.isAllowToCapturePhotoInWeb&&rdata.isAllowToCapturePhotoInWeb,Attendance.isAllowToVerifyUserInWeb=void 0!==rdata.isAllowToVerifyUserInWeb&&rdata.isAllowToVerifyUserInWeb}}).fail(function(data){Attendance.Entry.refreshPage(data)})},currRunningTime:null,setTime:function(rec){var sysTime=new Date;Attendance.Entry.LayoutId="#"+Layout.Page.parentContainer[0].id,null!==rec&&"first"===rec&&(Attendance.Entry.diffTime=sysTime.getTime()-Attendance.Entry.allDataList.currDate.time,clearInterval(Attendance.Entry.timer),Attendance.Entry.timer=setInterval(Attendance.Entry.setTime,1e3),Attendance.Entry.oldTime=sysTime.getTime()),"out"===Attendance.Entry.checkInOut&&Attendance.Entry.updateTotalmins(Math.abs(Math.round((Attendance.Entry.oldTime-sysTime.getTime())/1e3))),Attendance.Entry.oldTime=sysTime.getTime(),sysTime.setTime(sysTime.getTime()-Attendance.Entry.diffTime+36e5*Attendance.Entry.allDataList.currDate.offset);var hours=sysTime.getUTCHours(),mins=sysTime.getUTCMinutes(),seconds=sysTime.getUTCSeconds(),curr_run_time=sysTime.getUTCDate()+"_"+sysTime.getUTCMonth();if(void 0===Attendance.Entry.curr_date)Attendance.Entry.curr_date=curr_run_time;else if(Attendance.Entry.curr_date!==curr_run_time)return Attendance.Entry.curr_date=curr_run_time,Attendance.Entry.temp_tsecs=0,Attendance.Entry.checkInOut="in",clearInterval(Attendance.Entry.timer),void(-1!==Attendance.Entry.LayoutId.indexOf("attendance-entry-listview")&&(Attendance.Entry.loadToday=!1,Attendance.Entry.getList()));if($(Attendance.Entry.LayoutId+" #ZPAtt_listView").is(":visible")&&0===Attendance.Entry.allDataList.showScaleView){var currTime=hours+mins/60,fromShiftHour=Attendance.Entry.fromShiftTime/60,toShiftHour=Attendance.Entry.toShiftTime/60;0===fromShiftHour&&0===toShiftHour&&(toShiftHour=1439/60);var nightShift=fromShiftHour>toShiftHour&&24-(fromShiftHour-toShiftHour)<=12&&(currTime<=23.99&&currTime>=fromShiftHour||currTime>=0&&currTime<Math.round(toShiftHour))||fromShiftHour===toShiftHour;if((currTime>=fromShiftHour&&currTime<Math.round(toShiftHour)&&toShiftHour-fromShiftHour<=12||nightShift||toShiftHour===1439/60)&&("out"===Attendance.Entry.checkInOut||Attendance.Entry.breakRowOpen)){var temphour=hours-fromShiftHour;nightShift&&currTime>=0&&currTime<Math.round(toShiftHour)&&(temphour=hours+24-fromShiftHour);var per=(3600*temphour+60*mins+seconds)/60/60/Attendance.Entry.shiftDiffTime*100;per>100?per=100:per<0&&(per=0);var progressBarWidth=$(Attendance.Entry.LayoutId+" #ZPAtt_listViewEntries").width()-474;$(Attendance.Entry.LayoutId+" #ZPAtt_listViewEntries .progress")[0]&&(progressBarWidth=$(Attendance.Entry.LayoutId+" #ZPAtt_listViewEntries .progress").width()),(per=$(Attendance.Entry.LayoutId+" #ZPAtt_listViewEntries").width()-210-progressBarWidth/100*per+1)>$(Attendance.Entry.LayoutId+" #ZPAtt_listViewEntries").width()-210&&(per=$(Attendance.Entry.LayoutId+" #ZPAtt_listViewEntries").width()-210),$(Attendance.Entry.LayoutId+" #ZPAtt_draggableLine").show(),$(Attendance.Entry.LayoutId+" #ZPAtt_draggableLine").css("right",per)}else $(Attendance.Entry.LayoutId+" #ZPAtt_draggableLine").hide()}if(Attendance.timeFormatIs12hr){var aa=ZPI18N.getString("zp.am");hours>=12&&(aa=ZPI18N.getString("zp.pm"),hours-=12),0===hours&&(hours=12)}else aa="";Attendance.Entry.currRunningTime=Attendance.disTwoDigit(hours)+":"+Attendance.disTwoDigit(mins)+" "+aa.toLowerCase(),$(Attendance.Entry.LayoutId+" #ZPAtt_clock")&&$(Attendance.Entry.LayoutId+" #ZPAtt_clock").html(Attendance.disTwoDigit(hours)+":"+Attendance.disTwoDigit(mins)+":"+Attendance.disTwoDigit(seconds)+" "+aa.toLowerCase())},setMonthsNavigation:function(type){Attendance.Entry.calendarAllDataList=null,"week"===Attendance.Entry.selectedView&&"calendar"!==Attendance.Entry.selectedPageView&&(type*=-1);var preMonth=Attendance.Entry.preMonth;if("calendar"===Attendance.Entry.selectedPageView&&(preMonth=Attendance.Entry.calendarPreMonth),Attendance.Entry.LayoutId&&-1!==Attendance.Entry.LayoutId.indexOf("selfservice")){Attendance.Entry.erecno=null;var urlParamId=Layout.Page.urlparam.id;urlParamId&&erecno&&urlParamId!==erecno&&(Attendance.Entry.erecno=urlParamId)}Attendance.Entry.getList(Attendance.Entry.selectedView,preMonth+type)},preMonth:0,calendarPreMonth:0,allDataList:{},calendarAllDataList:null,checkInOut:null,isEditAllowed:null,isEditAllowedForSub:null,isViewAllowedForSub:null,isEditAllowedForLocationAdmin:!0,loadToday:!1,isTimeSheetAllowedForEntry:null,isSubOrdinate:!1,curDayBreakDetails:{},getList:function(selview,preMonth,isLoadPrevWeekOrMonth){Attendance.Entry.LayoutId="#"+Layout.Page.parentContainer[0].id,null!==selview&&""!==selview&&void 0!==selview&&"calendar"!==Attendance.Entry.selectedPageView&&(Attendance.Entry.loadToday=!1,Attendance.Entry.selectedView=selview),$(Attendance.Entry.LayoutId).find("[data-toggle=tooltip]").tooltip("hide"),"calendar"!==Attendance.Entry.selectedPageView&&(Attendance.toggleLoadingDiv(!1,$(Attendance.Entry.LayoutId).find(".Scrcont")),"week"===Attendance.Entry.selectedView?($(Attendance.Entry.LayoutId+" #ZPAtt_weekViewBut").attr("class","btn btn-primary togg"),$(Attendance.Entry.LayoutId+" #ZPAtt_monViewBut").attr("class","btn btn-default togg")):"month"===Attendance.Entry.selectedView&&($(Attendance.Entry.LayoutId+" #ZPAtt_weekViewBut").attr("class","btn btn-default togg"),$(Attendance.Entry.LayoutId+" #ZPAtt_monViewBut").attr("class","btn btn-primary togg")));var param={mode:"getAttList",conreqcsr:csrfToken};"calendar"!==Attendance.Entry.selectedPageView?(param.loadToday=!1,Attendance.Entry.loadToday&&(param.loadToday=!0),Attendance.Entry.loadToday=!0):param.isCalView=!0;var listViewParent=Layout.Page.container.find("#entryListView");param.loadToday||0!==$(Attendance.Entry.LayoutId).find("#zp_page_loading").length||("list"===Attendance.Entry.selectedPageView?(listViewParent.find("#ZPAtt_listViewEntries").empty(),listViewParent.find("#ZPAtt_listViewHead").empty(),listViewParent.find("#ZPAtt_listViewEntries").parent().parent().append(ZPeople.LOADING_HTML)):"tabler"===Attendance.Entry.selectedPageView&&($(Attendance.Entry.LayoutId+" #ZPAtt_tabViewEntries").empty(),$(Attendance.Entry.LayoutId+" #ZPAtt_tabViewEntries").parent().parent().append(ZPeople.LOADING_HTML),$(Attendance.Entry.LayoutId+" #ZPAtt_tabView thead").hide(),$(Attendance.Entry.LayoutId+" #ZPAtt_tabView #allowanceFooter").hide())),Attendance.Entry.erecno&&(param.erecno=Attendance.Entry.erecno),"zero"!==preMonth&&void 0!==preMonth||(preMonth=0),param.view=Attendance.Entry.selectedView,null!==preMonth?(param.preMonth=preMonth,"calendar"===Attendance.Entry.selectedPageView?(Attendance.Entry.calendarPreMonth=preMonth,param.view="month"):Attendance.Entry.preMonth=preMonth):"calendar"===Attendance.Entry.selectedPageView?(param.preMonth=Attendance.Entry.calendarPreMonth,param.view="month"):Attendance.Entry.preMonth&&(param.preMonth=Attendance.Entry.preMonth),"tabler"===Attendance.Entry.selectedPageView&&0===param.preMonth&&(Attendance.Entry.loadToday=!1),param.erecno||param.loadToday||"week"!==param.view||void 0===weekstarts||(param.weekStarts=weekstarts+1);var layout=Attendance.Entry.LayoutId;ZPUtil.checkIsOtherUserProfile()&&(param.isFmSService=!0),$.post("/AttendanceViewAction.zp",param,function(rdata){if(Attendance.toggleLoadingDiv(!0),$(Attendance.Entry.LayoutId).find("[data-toggle=tooltip]").tooltip("hide"),"hh:mm a"!==rdata.timeformat?Attendance.timeFormatIs12hr=!1:Attendance.timeFormatIs12hr=!0,void 0!==rdata.isSubOrdinate&&(Attendance.Entry.isSubOrdinate=rdata.isSubOrdinate),Attendance.Entry.erecno||(void 0!==rdata.isEditAllowed&&(Attendance.Entry.isEditAllowed=rdata.isEditAllowed),void 0!==rdata.isViewAllowedForSub&&(Attendance.Entry.isViewAllowedForSub=rdata.isViewAllowedForSub)),void 0!==rdata.isEditAllowedForSub&&(Attendance.Entry.isEditAllowedForSub=rdata.isEditAllowedForSub),Attendance.Entry.isViewAllowedForSub&&Attendance.Entry.isEditAllowedForSub&&Layout.Page.container.find("#ZPAtt_entry_importLI").show(),void 0!==rdata.isEditAllowedForLocationAdmin&&(Attendance.Entry.isEditAllowedForLocationAdmin=rdata.isEditAllowedForLocationAdmin),rdata.curDayBreakDetails&&(Attendance.Entry.curDayBreakDetails=rdata.curDayBreakDetails),void 0!==rdata.isTimeSheetAllowedForEntry&&(Attendance.Entry.isTimeSheetAllowedForEntry=rdata.isTimeSheetAllowedForEntry),0!==$(Attendance.Entry.LayoutId).find("#zp_page_loading").length&&$(Attendance.Entry.LayoutId).find("#zp_page_loading").remove(),"list"===Attendance.Entry.selectedPageView&&layout===Attendance.Entry.LayoutId){if(param.loadToday)return Attendance.Entry.allDataList.currDate=rdata.currDate,Attendance.Entry.loadReport=!0,Attendance.Entry.allDataList.dayList[$(Attendance.Entry.LayoutId+" #ZPAtt_listViewEntries .today-active").index()].attDate!==rdata.dayList[0].attDate?(Attendance.Entry.loadToday=!1,Attendance.Entry.temp_tsecs=0,Attendance.Entry.display_sec=0,void Attendance.Entry.getList()):(Attendance.Entry.allowUIEntry=void 0!==rdata.allowUIEntry?rdata.allowUIEntry:Attendance.Entry.allowUIEntry,Attendance.isWebCoOrdMandatory=void 0!==rdata.isWebCoOrdMandatory&&rdata.isWebCoOrdMandatory,Attendance.isTrackLocationEnabled=void 0!==rdata.isTrackLocationEnabled&&rdata.isTrackLocationEnabled,Attendance.isAllowToCapturePhotoInWeb=void 0!==rdata.isAllowToCapturePhotoInWeb&&rdata.isAllowToCapturePhotoInWeb,Attendance.isAllowToVerifyUserInWeb=void 0!==rdata.isAllowToVerifyUserInWeb&&rdata.isAllowToVerifyUserInWeb,Attendance.Entry.allDataList.dayList[$(Attendance.Entry.LayoutId+" #ZPAtt_listViewEntries .today-active").index()]=rdata.dayList[0],Attendance.Entry.getCurrDayEntry($(Attendance.Entry.LayoutId+" #ZPAtt_listViewEntries .today-active").index()),$(Attendance.Entry.LayoutId+" #ZPAtt_listViewEntries .today-active")&&Attendance.Dashboard&&Attendance.Dashboard.WeeklyData.getCurWeekData(),Attendance.Entry.setTime("first"),void Attendance.consResetEmpSearch("ZPAtt_entry_empName",Layout.Page.container,!0,!1));Attendance.Entry.allDataList=rdata,Attendance.Entry.allowUIEntry=void 0!==rdata.allowUIEntry?rdata.allowUIEntry:Attendance.Entry.allowUIEntry,Attendance.isWebCoOrdMandatory=void 0!==rdata.isWebCoOrdMandatory&&rdata.isWebCoOrdMandatory,Attendance.isTrackLocationEnabled=void 0!==rdata.isTrackLocationEnabled&&rdata.isTrackLocationEnabled,Attendance.isAllowToCapturePhotoInWeb=void 0!==rdata.isAllowToCapturePhotoInWeb&&rdata.isAllowToCapturePhotoInWeb,Attendance.isAllowToVerifyUserInWeb=void 0!==rdata.isAllowToVerifyUserInWeb&&rdata.isAllowToVerifyUserInWeb,Attendance.Entry.setValueForUserReport(rdata);var shiftDetails=Shift.getShiftName(Attendance.Entry.allDataList.dayList[0].shift.shiftId,!1,!0);Attendance.Entry.fromShiftTime=shiftDetails.fTime,Attendance.Entry.toShiftTime=shiftDetails.tTime;var shiftId=Attendance.Entry.allDataList.dayList[0].shift.shiftId;for(var i in Attendance.Entry.allDataList.dayList)if(Attendance.Entry.allDataList.dayList[i].shift.shiftId!==shiftId){Attendance.Entry.fromShiftTime=0,Attendance.Entry.toShiftTime=0;break}0===Attendance.Entry.allDataList.showScaleView?($(Attendance.Entry.LayoutId+" #ZPAtt_timeAndScaleMeasure").show(),Attendance.Entry.scaleCons()):$(Attendance.Entry.LayoutId+" #ZPAtt_timeAndScaleMeasure").hide(),1===Attendance.Entry.allDataList.showAllEntries?(Layout.Page.container.find("#ZPAtt_entry_AuditLI").hide(),Layout.Page.container.find("#ZPAtt_entry_AuditEntryPopup").hide()):(Layout.Page.container.find("#ZPAtt_entry_AuditLI").show(),Layout.Page.container.find("#ZPAtt_entry_AuditEntryPopup").show()),Attendance.Entry.lastRefTime=(new Date).getTime(),Attendance.Entry.setTime("first"),Attendance.Entry.showDayList(Attendance.Entry.allDataList.dayList,!1,!1,isLoadPrevWeekOrMonth),Attendance.Entry.setFunctionInOrOut(),Attendance.Entry.loadTabulerView=!1,Attendance.Entry.setAbsentInSummary()}else"tabler"===Attendance.Entry.selectedPageView&&layout===Attendance.Entry.LayoutId?(Attendance.Entry.allDataList=rdata,Attendance.Entry.setValueForUserReport(rdata),$(Attendance.Entry.LayoutId+" #ZPAtt_tabView thead").show(),Attendance.Entry.showDayListTabler(Attendance.Entry.allDataList.dayList),Attendance.Entry.setAbsentInSummary()):"calendar"===Attendance.Entry.selectedPageView&&layout===Attendance.Entry.LayoutId&&(Attendance.Entry.leaveTypes=rdata.leaveTypes,Attendance.Entry.calendarAllDataList=rdata,Attendance.Entry.setValueForUserReport(rdata),Attendance.Entry.showDayListCalendar(Attendance.Entry.calObj));(!param.loadToday||"tabler"===Attendance.Entry.selectedPageView&&layout===Attendance.Entry.LayoutId)&&Attendance.Entry.showUserDet(rdata);var lay=Layout.Page.container,addRegForSub=Attendance.Entry.allDataList.addRegForSub;if(lay.find("#ZPAtt_Quick_Add").remove(),lay.find("#ZPAtt_listView").is(":visible")&&(isRegConfigured||isOnDutyConfigured||isPermissionConfigured)&&(addRegForSub||isadmin||isManageAttendanceData||null===Attendance.Entry.erecno)&&(!Attendance.Entry.allDataList.hideDelete||null===Attendance.Entry.erecno||addRegForSub)){var cuYear=rdata.currDate.YEAR,cuMon=rdata.currDate.MONTH,cuday=rdata.currDate.DAY_OF_MONTH,buttext="",buttFunc="",lis="",isOneReqOnlyConfig=!0;isRegConfigured?(buttext=ZPI18N.getString("zp.regularization"),lis+="<li data-toggle='modal' onclick='"+(buttFunc="Attendance.Entry.toregularize(undefined,"+cuday+","+cuMon+","+cuYear+")")+"'><a>"+buttext+"</a></li>",isPermissionConfigured&&(lis+="<li data-toggle='modal' onclick='AttPermissions.togglePermissionPopup()'><a>"+ZPI18N.getString("zp.perm")+"</a></li>",isOneReqOnlyConfig=!1),isOnDutyConfigured&&(lis+="<li data-toggle='modal' onclick='Attendance.OD.showReqAddPopup()'><a>"+ZPI18N.getString("zp.onduty")+"</a></li>",isOneReqOnlyConfig=!1)):isPermissionConfigured?(buttext=ZPI18N.getString("zp.perm"),buttFunc="AttPermissions.togglePermissionPopup()",lis+="<li data-toggle='modal' onclick='AttPermissions.togglePermissionPopup()'><a>"+ZPI18N.getString("zp.perm")+"</a></li>",isOnDutyConfigured&&(lis+="<li data-toggle='modal' onclick='Attendance.OD.showReqAddPopup()'><a>"+ZPI18N.getString("zp.onduty")+"</a></li>",isOneReqOnlyConfig=!1)):isOnDutyConfigured&&(buttext=ZPI18N.getString("zp.onduty"),buttFunc="Attendance.OD.showReqAddPopup()");var quickAdd="<div class='dropdown cust-dm FR MT4 MR20 ZPCusDrs' id='ZPAtt_Quick_Add'>";isOneReqOnlyConfig?quickAdd+="<button type='button' class='btn btn-primary btn-md PR15I' data-toggle='modal' onclick='"+buttFunc+"'>"+buttext+"</button>":(quickAdd+="<button type='button' class='btn btn-primary btn-md' data-toggle='dropdown'>"+ZPI18N.getString("zp.request")+"</button>",""!==lis&&(quickAdd+="<i data-toggle='dropdown' class='IC-ar-dwn Iarw dropdown-toggle CP' aria-expanded='false'></i>",quickAdd+="<ul class='dropdown-menu'>"+lis+"</ul>")),quickAdd+="</div>",lay.find("#ZPAtt_weekViewBut").closest(".col-sm-4").append(quickAdd)}})},setValueForUserReport:function(rdata){Attendance.Entry.loadReport=!0,Attendance.Entry.erecforReport=null!=Attendance.Entry.erecno?Attendance.Entry.erecno:ZPeople.CURR_USER.usererec,Attendance.Entry.sdate=rdata.dayList[0].ldate;var len=Object.keys(rdata.dayList).length;Attendance.Entry.edate=rdata.dayList[len-1].ldate},showUserDet:function(rdata){if(-1===Attendance.Entry.LayoutId.indexOf("selfservice")&&(isManageAttendanceData||Attendance.Entry.isViewAllowedForSub)?(Attendance.consResetEmpSearch("ZPAtt_entry_empName",Layout.Page.container,!0,!1),$(Attendance.Entry.LayoutId+" #ZPAtt_userPhoto").parent().show(),null!==Attendance.Entry.erecno?($(Attendance.Entry.LayoutId+" #s2id_ZPAtt_entry_empName span").text(Attendance.Entry.searchedUsername),$(Attendance.Entry.LayoutId+" #ZPAtt_entry_empName").val(Attendance.Entry.erecno),$(Attendance.Entry.LayoutId+" #ZPAtt_userPhoto")[0].src=Attendance.Entry.searchedUserphoto):($(Attendance.Entry.LayoutId+" #s2id_ZPAtt_entry_empName span").html(ZPeople.CURR_USER.empid+" "+ZPeople.CURR_USER.name),$(Attendance.Entry.LayoutId+" #ZPAtt_entry_empName").val(0),$(Attendance.Entry.LayoutId+" #ZPAtt_userPhoto")[0].src=ZPeople.CURR_USER.avatar)):$(Attendance.Entry.LayoutId+" #ZPAtt_userPhoto").parent().hide(),rdata.userDetails&&(Attendance.Entry.currUserEmpid=rdata.userDetails.eId,Attendance.Entry.currUserName=$("<div/>").html(rdata.userDetails.fName).text(),Attendance.Entry.currUserEno=rdata.userDetails.eNo),"month"===Attendance.Entry.selectedView){var date=rdata.dayList[0].attDate.split("-");$(Attendance.Entry.LayoutId+" #ZPAtt_entryNavigation").parent().attr("class","ZPCalNav mon"),$(Attendance.Entry.LayoutId+" #ZPAtt_entryNavigation").html(months[parseInt(date[1])-1]+" "+date[0])}else $(Attendance.Entry.LayoutId+" #ZPAtt_entryNavigation").parent().attr("class","ZPCalNav wek"),$(Attendance.Entry.LayoutId+" #ZPAtt_entryNavigation").html(rdata.dayList[0].ldate+" &nbsp;-&nbsp; "+rdata.dayList[6].ldate);"calendar"!==Attendance.Entry.selectedPageView&&Attendance.Entry.getMonthReportForUser()},showShiftDet:function(rdata){var shiftName=rdata.shiftName;$(Attendance.Entry.LayoutId+" #ZPAtt_userShiftName").text("").append("<div class='ellipsis' data-toggle='tooltip' data-placement='bottom' style='width: 100%;' title='"+shiftName+"'>"+shiftName+"</div><time class='DB'> [ "+rdata.timeInterval+" ] </time>")},scaleCons:function(){var scaleBody=$(Attendance.Entry.LayoutId+" #ZPAtt_timeAndScaleMeasure tbody").find("td")[4];$(scaleBody).children().empty();var shiftDiffTime,fromShiftTime=Attendance.Entry.fromShiftTime,toShiftTime=Attendance.Entry.toShiftTime;shiftDiffTime=toShiftTime>fromShiftTime?(toShiftTime-fromShiftTime)/60:24-(fromShiftTime-toShiftTime)/60,shiftDiffTime=Math.round(shiftDiffTime);for(var indPixel=100/parseInt(shiftDiffTime),i=0;i<shiftDiffTime;i++){var scale="<div class='scale-col' style='width:"+indPixel+"%;'>",mins=fromShiftTime+60*i;mins>=1440&&(mins-=1440);var time=Attendance.disTime(mins,!0);shiftDiffTime>12&&(shiftDiffTime%2==0&&(shiftDiffTime/2>i&&i%2==1||shiftDiffTime/2<=i&&i%2==0)||shiftDiffTime%2==1&&i%2==1)&&(time=""),scale+="<div class='bottom-lines'>",scale+="<span class='vr-line'></span>",scale+="<span class='vr-line mid-line'></span>",scale+="<span class='vr-line'></span>",scale+="</div>",scale+="<div class='top-text'>"+time+"</div>",i===shiftDiffTime-1&&((mins=fromShiftTime+60*(i+1))>=1440&&(mins-=1440),time=Attendance.disTime(mins,!0),shiftDiffTime>12&&(shiftDiffTime%2==0&&(shiftDiffTime/2>i+1&&(i+1)%2==1||shiftDiffTime/2<=i+1&&(i+1)%2==0)||shiftDiffTime%2==1&&(i+1)%2==1)&&(time=""),scale+="<div class='last-text'>"+time+"</div>"),scale+="</div>",$(scaleBody).children().append(scale)}Attendance.Entry.shiftDiffTime=shiftDiffTime},toLeave:function(date,month,year){var formId=ZPeople.Module.MODULE_DATA.attendance.formid,params={formId:formId,modalPopupView:!1,callback:function(){window.location.href=Layout.Page.hash,Attendance.Entry.getList(Attendance.Entry.selectedView,Attendance.Entry.preMonth,!0)},lookupValue:Attendance.Entry.erecno?Attendance.Entry.erecno:ZPeople.CURR_USER.usererec,onloadCallback:function(){var d=new Date;d.setFullYear(year,month,date);var selectedDate=Calendar.formatDate(d);$(Layout.Page.container.find("#zp_addedit_record_"+formId).find("[name='From']")[0]).val(selectedDate),$(Layout.Page.container.find("#zp_addedit_record_"+formId).find("[name='To']")[0]).val(selectedDate)}};Leave.add(params)},toregularize:function(obj,date,month,year){ZPeople.BSModal.show($("#"+Layout.Page.pageId+" #ZPAtt_Entry_addRequest_list"));var d=new Date;d.setFullYear(year,month,date);var selectedDate=Calendar.formatDate(d);Attendance.Entry.showReqAddPopup(obj,selectedDate)},hideBreakDiv:function(){Layout.Page.container.find("[id='breakBorder']").hide(),Layout.Page.container.find("[id='breakSelDiv']").hide(),Layout.Page.container.find("[id='breakRunningDiv']").hide(),Layout.Page.container.find("[id='ZPAtt_userShiftName']").css("right","165px")},getSecsInHHMMSSFormat:function(timeInSecs){var sec=parseInt(timeInSecs%60),min=parseInt((timeInSecs-sec)/60%60),hrs=parseInt((timeInSecs-min)/3600);return Attendance.disTwoDigit(hrs)+":"+Attendance.disTwoDigit(min)+":"+Attendance.disTwoDigit(sec)},startBreak:function(breakId){Attendance.Entry.breakId=breakId,Attendance.Entry.punchOut()},toggleBreakPopup:function(){var Obj=Layout.Page.container.find("[id='brkView']");Obj.is(":visible")?Obj.modal("hide"):Obj.modal("show")},consBreakPopup:function(breakDetailsObj){Layout.Page.container.find("[id='breakListPopup']").children().remove();var breakOrderArr=Attendance.Entry.allDataList.breakList.breakOrderedArr;for(var index in breakOrderArr){var breakId=breakOrderArr[index];if(breakDetailsObj[breakId]){var breakObj=breakDetailsObj[breakId],initialBreakObj=Attendance.Entry.allDataList.breakList.breakObj[breakId],breakMinsAlloted=initialBreakObj.breakTimeInMins,breakSecsRem=breakObj.breakTimeInSecs,breakFromTimeArray=breakObj.breakFromTimeArray,breakImageClass=initialBreakObj.breakImage+" brkIcon",breakSecsTaken=60*breakMinsAlloted-breakSecsRem,breakAllotedText=breakMinsAlloted+" "+ZPI18N.getString("zp.minutes"),breakRemText=breakSecsRem<60?breakSecsRem+" "+ZPI18N.getString("zp.secs"):parseInt(breakSecsRem/60)+" "+ZPI18N.getString("zp.minutes"),breakPayType=1==initialBreakObj.breakPayType?ZPI18N.getString("zp.leavetype.paid"):ZPI18N.getString("zp.leavetype.unpaid"),breakPayColor=1==initialBreakObj.breakPayType?"org":"pnk";if(0!==breakSecsRem){var breakDiv='<div class="Brkdiv"><div class="Brk-type"><h5>'+initialBreakObj.breakName+' </h5><span class="'+breakPayColor+'">'+breakPayType+"</span></div>";if(breakDiv+='<div class="lft-brkcont"><div class="brk-timer-chart">',breakDiv+='<div id="'+breakId+'_chart" breakId="'+breakId+'" data-toggle="tooltip" data-html="true" class="pie-circle progressElement zprogress zprogress--circle" data-value="89"></div>',breakDiv+='<div class="brk-timer"><i class="'+breakImageClass+'"></i></div><span>'+Attendance.Entry.getSecsInHHMMSSFormat(breakSecsTaken)+"</span></div></div>",breakDiv+='<div class="rgt-brkcont"><p id="breakAllowedTime"><span class="brk-txt">Allowed</span><span class="brk-cln"> : </span> '+breakAllotedText+'</p><p id="breakRemTime"><span class="brk-txt">Remaining</span><span class="brk-cln"> : </span> '+breakRemText+"</p>",breakDiv+='<button data-dismiss="modal" class="btn btn-start" onClick=\'Attendance.Entry.startBreak("'+breakId+'")\'>Start <i class="IC-arrow-r-s"></i></button></div>',void 0!=breakFromTimeArray&&0!=breakFromTimeArray.length){var len=breakFromTimeArray.length;breakDiv+='<div class="alwd_tmngs">',breakDiv+="<h5>"+ZPI18N.getString("zp.allowedtiming")+"</h5>";for(var it=0;it<len;it++)breakDiv+='<div class="all_tg"> <span>'+Attendance.disTime(breakFromTimeArray[it].fromTime)+"</span> - <span>"+Attendance.disTime(breakFromTimeArray[it].toTime)+"</span></div>"}breakDiv+="</div>",Layout.Page.container.find("#breakListPopup").append(breakDiv)}}}Layout.Page.container.find("#breakListPopup").children().length>0?(Layout.Page.container.find("#breakListPopup").children().find(".pie-circle").each(function(){var breakId=$(this).attr("breakId");if(breakDetailsObj[breakId]){var initialBreakObj=Attendance.Entry.allDataList.breakList.breakObj[breakId],breakObj=breakDetailsObj[breakId],breakSecsTaken=60*initialBreakObj.breakTimeInMins-breakObj.breakTimeInSecs;Attendance.Entry.consBreakChart($(this).attr("id"),breakSecsTaken,breakObj.breakTimeInSecs,initialBreakObj.breakColor)}}),Layout.Page.container.find("[id='breakSelDiv']").show(),Layout.Page.container.find("[id='breakRunningDiv']").hide(),Layout.Page.container.find("[id='ZPAtt_userShiftName']").css("right","330px")):Attendance.Entry.hideBreakDiv()},consBreakChart:function(chartId,breakSecsTaken,breakSecsRem,breakColor){var chart_data=[];chart_data.push({y:breakSecsRem,name:"Point1",color:breakColor}),breakSecsTaken>0&&chart_data.push({y:breakSecsTaken,name:"Point2",color:"#FFF"}),$("#"+chartId).highcharts({chart:{type:"pie",width:"80",height:"80",margin:[0,0,0,0]},plotOptions:{pie:{allowPointSelect:!1,size:"100%",dataLabels:{enabled:!1}},column:{pointPadding:0,borderWidth:0}},title:{enabled:!1,text:""},credits:{enabled:!1},tooltip:{enabled:!1},exporting:{enabled:!1},yAxis:{title:{text:"Total percent market share"}},series:[{data:chart_data,size:"60px",innerSize:"85%",dataLabels:{enabled:!1},states:{hover:{enabled:!1}}}]})},breakTimer:function(breakRemTimeInSecs){breakRemTimeInSecs>=0?(Attendance.Entry.breakTimerInterval=setInterval(Attendance.Entry.breakTimer,1e3),Attendance.Entry.breakMaxTimeAllowed=moment(),Attendance.Entry.breakMaxTimeAllowed.add(breakRemTimeInSecs,"seconds")):breakRemTimeInSecs<0&&(Attendance.Entry.breakMaxTimeAllowed=moment());var breakRemTime=Attendance.Entry.breakMaxTimeAllowed.diff(moment(),"seconds");Layout.Page.container.find("#breakRunningDiv #breakRemTime").text(""),Layout.Page.container.find("#resumeWorkText").addClass("MT5"),breakRemTime>0?(Layout.Page.container.find("#resumeWorkText").removeClass("MT5"),Layout.Page.container.find("#breakRunningDiv #breakRemTime").text(Attendance.Entry.getSecsInHHMMSSFormat(breakRemTime)+" Hrs")):clearInterval(Attendance.Entry.breakTimerInterval)},showBreakRunner:function(breakObj){clearInterval(Attendance.Entry.breakTimerInterval);var breakDetails=Attendance.Entry.allDataList.breakList.breakObj[breakObj.runningBreakId];if(Layout.Page.container.find("[id='breakSelDiv']").hide(),Layout.Page.container.find("[id='breakBorder']").show(),Layout.Page.container.find("[id='breakRunningDiv']").show(),Layout.Page.container.find("[id='ZPAtt_userShiftName']").css("right","330px"),Layout.Page.container.find("[id='runnerBreakImg']").attr("class",breakDetails.breakImage+" CP"),breakObj.breakTimerAddSecs||0==breakObj.breakTimerAddSecs)if(Attendance.Entry.curDayBreakDetails.shiftBreakDets&&Attendance.Entry.curDayBreakDetails.shiftBreakDets[breakObj.runningBreakId]){var breakRemTimeInSecs=Attendance.Entry.curDayBreakDetails.shiftBreakDets[breakObj.runningBreakId].breakTimeInSecs;breakRemTimeInSecs-=breakObj.breakTimerAddSecs,Attendance.Entry.breakTimer(breakRemTimeInSecs)}else Attendance.Entry.breakTimer(-1);else Attendance.Entry.breakTimer(-1)},showOrHideBreakSelect:function(isShow,breakDetailsObj){clearInterval(Attendance.Entry.breakTimerInterval),isShow?(Layout.Page.container.find("[id='brkView']").on("shown.bs.modal",function(){-1!==Attendance.Entry.LayoutId.indexOf("selfservice")&&$("#selfservice .Scrcont").addClass("OHI"),$(".modal-backdrop.in").hide(),$(".modal-backdrop.in").css("opacity",0),$("body").off("click").on("click",function(event){$(event.target).parents("div#brkView").length||$(event.target).parents("#breakSelDiv").length||"breakSelDiv"==event.target.id||ZPeople.BSModal.hide("brkView")})}),Layout.Page.container.find("[id='brkView']").on("hidden.bs.modal",function(){-1!==Attendance.Entry.LayoutId.indexOf("selfservice")&&$("#selfservice .Scrcont").removeClass("OHI"),$("body").off("click")}),Layout.Page.container.find("[id='breakBorder']").show(),Attendance.Entry.consBreakPopup(breakDetailsObj)):Attendance.Entry.hideBreakDiv()},showReqAddPopup:function(obj,date){var layout=Layout.Page.container.find("#ZPAtt_Entry_addRequest");if(Layout.Page.container.find("#ZPAtt_listView").is(":visible")&&(layout=Layout.Page.container.find("#ZPAtt_Entry_addRequest_list")),layout.find("#ZPAtt_Reg_addReq_chooseAppr").hide(),layout.find("#emptyErrMsg").html(""),layout.find("#emptyErrMsg").removeClass("MB10"),isEmpChooseApp&&(layout.find("#ZPAtt_reg_approverId").parent().parent().show(),layout.find("#ZPAtt_reg_approverId").empty(),layout.find("#ZPAtt_reg_approverId").append(ZPeople.User.getEmployeeListFormatByType("option")),layout.find("#ZPAtt_reg_approverId").select2()),layout.find("#ZPAtt_Reg_addReq_FDate").hide(),layout.find("#ZPAtt_Reg_addReq_TDate").hide(),layout.find("#ZPAtt_Reg_addReq_THours").hide(),layout.find("#ZPAtt_reg_regDate").attr("disabled",!0),Layout.Page.container.find("#ZPAtt_listView").is(":visible")||!obj)layout.find("#ZPAtt_Reg_adddatabutton").attr("rowindex",Attendance.Entry.selectedRowIndex),layout.find("#ZPAtt_reg_regDate").val(date),obj||layout.find("#ZPAtt_reg_regDate").prop("disabled",!1);else{var rowIndex=$(obj).parent().parent().parent().index(),dayList=Attendance.Entry.allDataList.dayList[rowIndex];layout.find("#ZPAtt_Reg_adddatabutton").attr("rowindex",rowIndex),layout.find("#ZPAtt_reg_regDate").val(dayList.ldate)}layout.find("#ZPAtt_Reg_addReq_chooseAppr").hide(),isEmpChooseApp&&(layout.find("#ZPAtt_Reg_addReq_chooseAppr").show(),layout.find("#ZPAtt_Reg_addReq_regApproverId").append(ZPeople.User.getEmployeeListFormatByType("option")),layout.find("#ZPAtt_Reg_addReq_regApproverId").select2()),Attendance.Reg.getAttFiloInfo()},consRegPopup:function(){var tempVal,attDate=Attendance.Entry.getDayRecordJson.regDetails.dayList[0],attenddata=Attendance.Entry.getDayRecordJson.regDetails[attDate];if(ZPeople.Module.MODULE_DATA.attendance.isRegReasonsEnabled){var regReasons=ZPeople.Module.MODULE_DATA.attendance.regReasons,txt='<label class="zp_mdt control-label col-sm-3"><font>'+ZPI18N.getString("zp.reason")+'</font></label><div class="col-sm-4"><select class="select2-container W300A" id="reg_req_reason">';txt+='<option value="-1">'+$("<div/>").text(ZPI18N.getString("zp.select")).html()+"</option>",$.each(regReasons,function(index,data){txt+='<option value="'+index+'">'+$("<div/>").text(data).html()+"</option>"}),txt+="</select></div>",Layout.Page.container.find("#ZPAtt_Reg_addReq_reasonDesc").html(txt),Layout.Page.container.find("#ZPAtt_Reg_addReq_Desc").html('<label class="control-label col-sm-3">'+ZPI18N.getString("zp.description")+'</label><div class="col-sm-6"><textarea rows="4" class="form-control" id="reg_req_desc" placeholder='+ZPI18N.getString("zp.description")+"></textarea></div>"),Layout.Page.container.find("#ZPAtt_Reg_addReq_reasonDesc").find("select").select2({minimumResultsForSearch:5})}else Layout.Page.container.find("#ZPAtt_Reg_addReq_Desc").html(""),Layout.Page.container.find("#ZPAtt_Reg_addReq_reasonDesc").html('<label class="control-label col-sm-3">'+ZPI18N.getString("zp.description")+'</label><div class="col-sm-6"><textarea rows="4" class="form-control" id="reg_req_desc" placeholder='+ZPI18N.getString("zp.description")+"></textarea></div>"),$("#"+Layout.Page.pageId+" #ZPAtt_Reg_addReq_Desc textarea").val("");$("#"+Layout.Page.pageId+" #ZPAtt_reg_fromTime").off("change").on("change",function(){Attendance.Entry.regFILOChanged(null,this)}),$("#"+Layout.Page.pageId+" #ZPAtt_reg_toTime").off("change").on("change",function(){Attendance.Entry.regFILOChanged(null,this)});var timeObj=Calendar.getTime();attenddata.fromdate?(tempVal=attDate+" "+attenddata.fromdate,tempVal+=Attendance.timeFormatIs12hr?"":":00"):tempVal="hh:mm a"===timeFormat?attDate+" "+timeObj.hours+":"+timeObj.minutes+" "+timeObj.isampm.toUpperCase():attDate+" "+timeObj.hours+":"+timeObj.minutes+":"+timeObj.seconds,$("#"+Layout.Page.pageId+" #ZPAtt_reg_fromTime").val(tempVal);var minDt=Calendar.parseDate(attDate,uidateFormat),maxDt=Calendar.parseDate(attDate,uidateFormat);if(maxDt.setDate(maxDt.getDate()+1),attenddata.todate)if(attenddata.fromdate){var regFromTime=Attendance.Common.convertTimerInputToMinsOrSecs(tempVal.split(" ")[1]+" "+tempVal.split(" ")[2]);tempVal=attDate+" "+attenddata.todate,tempVal+=Attendance.timeFormatIs12hr?"":":00",Attendance.Common.convertTimerInputToMinsOrSecs(tempVal.split(" ")[1]+" "+tempVal.split(" ")[2])<regFromTime&&(tempVal=Calendar.formatDate(maxDt)+" "+attenddata.todate,tempVal+=Attendance.timeFormatIs12hr?"":":00")}else tempVal=attDate+" "+attenddata.todate,tempVal+=Attendance.timeFormatIs12hr?"":":00";else tempVal="hh:mm a"===timeFormat?attDate+" "+timeObj.hours+":"+timeObj.minutes+" "+timeObj.isampm.toUpperCase():attDate+" "+timeObj.hours+":"+timeObj.minutes+":"+timeObj.seconds;$("#"+Layout.Page.pageId+" #ZPAtt_reg_toTime").val(tempVal);var settingsObjStr='{mindate:"'+minDt+'",maxdate:"'+maxDt+'"}';if($("#"+Layout.Page.pageId+" #ZPAtt_reg_fromTime").attr("onclick","Calendar.setUpCalendar(event, this,1,undefined,Attendance.Entry.regFILOChanged,undefined,"+settingsObjStr+");"),$("#"+Layout.Page.pageId+" #ZPAtt_reg_toTime").attr("onclick","Calendar.setUpCalendar(event, this,1,undefined,Attendance.Entry.regFILOChanged,undefined,"+settingsObjStr+");"),$("#"+Layout.Page.pageId+" #ZPAtt_reg_totalHours").html(""),$("#"+Layout.Page.pageId+" #ZPAtt_reg_Explain").hide(),attenddata.totalhrs>=0){$("#"+Layout.Page.pageId+" #ZPAtt_reg_totalHours").html(Attendance.disHours(parseInt(attenddata.totalhrs/60),!0));var errObj=$("#"+Layout.Page.pageId+" #ZPAtt_reg_fromTime").closest("form");errObj.find("#reg_errorMsg").remove(),errObj.find("#reg_errorMsg_to").remove(),errObj.css("height","44px")}else Attendance.Entry.regFILOChanged(null,"#"+Layout.Page.pageId+" #ZPAtt_reg_fromTime");$("#"+Layout.Page.pageId+" #ZPAtt_Reg_addReq_FDate").show(),$("#"+Layout.Page.pageId+" #ZPAtt_Reg_addReq_TDate").show(),$("#"+Layout.Page.pageId+" #ZPAtt_Reg_addReq_THours").show()},regFILOChanged:function(tmpDateObj,obj){var formObj=$(obj).closest("form"),regFromTime=formObj.find("#ZPAtt_reg_fromTime").val().trim(),regToTime=formObj.find("#ZPAtt_reg_toTime").val().trim(),attDate=$("#"+Layout.Page.pageId+" #ZPAtt_reg_regDate").val(),maxDt=Calendar.parseDate(attDate,uidateFormat);maxDt.setDate(maxDt.getDate()+1);var nextDate=Calendar.formatDate(maxDt);if(formObj.find("#reg_errorMsg").remove(),formObj.find("#reg_errorMsg_to").remove(),formObj.css("height","44px"),formObj.find("#ZPAtt_reg_Explain").hide(),formObj.find("#ZPAtt_reg_totalHours").html(""),""!==regFromTime){var regFormatTime=regFromTime.split(" ")[1]+" "+regFromTime.split(" ")[2],regFromHours=parseInt(regFormatTime.split(":")[0],10),regFromMin=parseInt(regFormatTime.split(":")[1],10),invalidFromTime=!1;if(invalidFromTime=Attendance.timeFormatIs12hr?regFromHours>12||invalidFromTime:regFromHours>23||invalidFromTime,invalidFromTime=regFromMin>60||invalidFromTime)return formObj.attr("errorDispRow",!0),formObj.css("height","70px"),void formObj.find(" #filoDiv").eq(0).find("div").append('<span id="reg_errorMsg" class="ERR MT5">'+ZPI18N.getString("zp.attendance.regInvalidFromEntry")+"</span>")}if(""!==regToTime){regFormatTime=regToTime.split(" ")[1]+" "+regToTime.split(" ")[2];var regToHours=parseInt(regFormatTime.split(":")[0],10),regToMin=parseInt(regFormatTime.split(":")[1],10),invalidToTime=!1;if(invalidToTime=Attendance.timeFormatIs12hr?regToHours>12||invalidToTime:regToHours>23||invalidToTime,invalidToTime=regToMin>60||invalidToTime)return formObj.attr("errorDispRow",!0),formObj.css("height","70px"),void formObj.find(" #filoDiv").eq(1).find("div").append('<span id="reg_errorMsg_to" class="ERR MT5">'+ZPI18N.getString("zp.attendance.regInvalidToEntry")+"</span>")}if(""!==regFromTime&&""!==regToTime){var regFromDate=new Date(regFromTime.split(" ")[0]),regToDate=new Date(regToTime.split(" ")[0]);if(regFromDate<new Date(attDate)||regFromDate>new Date(nextDate))return formObj.attr("errorDispRow",!0),formObj.css("height","70px"),void formObj.find(" #filoDiv").eq(0).find("div").append('<span class="ERR MT5" id="reg_errorMsg">'+ZPI18N.getString("zp.attendance.regInvalidDate")+"</span>");if(regToDate<new Date(attDate)||regToDate>new Date(nextDate))return formObj.attr("errorDispRow",!0),formObj.css("height","70px"),void formObj.find(" #filoDiv").eq(1).find("div").append('<span class="ERR MT5" id="reg_errorMsg_to">'+ZPI18N.getString("zp.attendance.regInvalidDate")+"</span>");if(regFromTime=regFromTime.split(" ")[1]+" "+regFromTime.split(" ")[2],regToTime=regToTime.split(" ")[1]+" "+regToTime.split(" ")[2],regFromTime=Attendance.Common.convertTimerInputToMinsOrSecs(regFromTime),regToTime=Attendance.Common.convertTimerInputToMinsOrSecs(regToTime),regToDate>regFromDate&&regToTime>regFromTime)return formObj.attr("errorDispRow",!0),formObj.css("height","70px"),void formObj.find(" #filoDiv").eq(0).find("div").append('<span id="reg_errorMsg" class="ERR MT5">'+ZPI18N.getString("zp.timeexceeded24")+"</span>");if(regFromDate==regToDate&&regToTime<regFromTime||regFromDate>regToDate)return formObj.attr("errorDispRow",!0),formObj.css("height","70px"),void formObj.find(" #filoDiv").eq(0).find("div").append('<span id="reg_errorMsg" class="ERR MT5">'+ZPI18N.getString("zp.inshouldbebeforeout")+"</span>");regFromDate<regToDate&&(regToTime+=1440);var regDets=Attendance.Entry.getDayRecordJson.regDetails[attDate];if(regDets.isAutoBreakConf)Attendance.Reg.getTotHrsExcludingAutoBreaks(regFromTime,regToTime,attDate,formObj);else{var shiftAllowedTimings=regDets.shiftAllowedTimings,totalHours=Attendance.Reg.getTotalHoursBasedOnShift(shiftAllowedTimings,regFromTime,regToTime);formObj.find("#ZPAtt_reg_totalHours").html(Attendance.disHours(parseInt(totalHours),!0))}}},before_afterShiftEntry:{},latestCheckinLeftPos:null,before_afterShiftEntries:{},todayDate:"",showDayList:function(data,updateTR,fromEntryEdit,isLoadPrevWeekOrMonth){if(data){var tbody=$(Attendance.Entry.LayoutId+" #ZPAtt_listViewEntries");Attendance.Entry.consIpList(fromEntryEdit);var listViewParent=Layout.Page.container.find("#entryListView");updateTR||(listViewParent.find("#ZPAtt_listViewHead").children().remove(),tbody.empty());var thr="<tr><th width='20'></th><th width='80'></th><th width='70' class='P0I text-center'><div style='width:70px;'  class='P0I text-center'>"+ZPI18N.getString("zp.checkin")+"</div>"+ZPI18N.getString("zp.checkin")+"</th><th width='39'></th><th></th><th width='39'></th><th width='100' class='P0I text-center'><div style='width:100px;'  class='P0I text-center'>"+ZPI18N.getString("zp.checkout")+"</div>"+ZPI18N.getString("zp.checkout")+"</th> <th width='110'><div style='width:110px;'>"+ZPI18N.getString("zp.totalhours")+"</div>"+ZPI18N.getString("zp.totalhours")+"</th></tr>";1===Attendance.Entry.allDataList.showScaleView&&(thr="<tr><th width='20'></th><th width='80'></th><th width='70' class='P0I text-center'><div style='width:70px;' class='P0I text-center'>"+ZPI18N.getString("zp.checkin")+"</div>"+ZPI18N.getString("zp.checkin")+"</th><th></th><th width='100' class='P0I text-center'><div style='width:100px;'  class='P0I text-center'>"+ZPI18N.getString("zp.checkout")+"</div>"+ZPI18N.getString("zp.checkout")+"</th> <th width='110'><div style='width:110px;'>"+ZPI18N.getString("zp.totalhours")+"</div>"+ZPI18N.getString("zp.totalhours")+"</th></tr>"),-1!==Attendance.Entry.LayoutId.indexOf("selfservice")&&(listViewParent.find(".ZPfhlin").remove(),listViewParent.find("table").removeClass(".Tlis FLhead"),thr="<tr><th width='20'></th><th width='80'></th><th width='70' class='P0I text-center'>"+ZPI18N.getString("zp.checkin")+"</th><th width='39'></th><th></th><th width='39'></th><th width='100' class='P0I text-center'>"+ZPI18N.getString("zp.checkout")+"</th> <th width='110'>"+ZPI18N.getString("zp.totalhours")+"</th></tr>",1===Attendance.Entry.allDataList.showScaleView&&(thr="<tr><th width='20'></th><th width='80'></th><th width='70' class='P0I text-center'>"+ZPI18N.getString("zp.checkin")+"</th><th></th><th width='100' class='P0I text-center'>"+ZPI18N.getString("zp.checkout")+"</th> <th width='110'>"+ZPI18N.getString("zp.totalhours")+"</th></tr>")),0==listViewParent.find("#ZPAtt_listViewHead").children().length&&listViewParent.find("#ZPAtt_listViewHead").append(thr);for(var i=0;data[i];i++){var status=data[i].status,transStat=Attendance.consLeaveStat(status,!0,!1),approvalInfo=data[i].approvalInfo;approvalInfo&&approvalInfo.isRegularized&&(transStat=""===transStat?ZPI18N.getString("zp.regularized"):transStat+" / "+ZPI18N.getString("zp.regularized"));var trow="<tr onclick=Attendance.Entry.consEntriesPopup(this)>",entries=Attendance.Entry.allDataList.entries[data[i].attDate],lastEntryObj={};if(entries.length>0){var displayLastRow=entries[entries.length-1];lastEntryObj=1==entries.length?displayLastRow:entries[displayLastRow.lastRowIndex]}var before_afterShiftEntryObj={},before_afterShiftEntriesObj={},day=days[data[i].day-1];if(data[i].isToday){if(day=ZPI18N.getString("zp.today"),Attendance.Entry.display_sec=data[i].tsecs,Attendance.Entry.todayDate=data[i].attDate.split("-")[2],entries.length>0&&lastEntryObj.allowPunchOut)"-"===(checkInFdate=lastEntryObj.fdate.slice(0,11))[checkInFdate.length-1]&&(checkInFdate=checkInFdate.slice(0,10)),Attendance.Entry.latestCheckinLeftPos=Attendance.Entry.leftPositionCalc(Attendance.disTimeOnly(lastEntryObj.fdate),checkInFdate,data[i].ldate),Attendance.Entry.latestCheckinDate=checkInFdate,Attendance.Entry.checkInOut="out";else Attendance.Entry.checkInOut="in";if(Attendance.Entry.curDayBreakDetails.shiftBreakDets&&"out"==Attendance.Entry.checkInOut)Attendance.Entry.showOrHideBreakSelect(!0,Attendance.Entry.curDayBreakDetails.shiftBreakDets);else if("in"==Attendance.Entry.checkInOut&&entries.length>0&&lastEntryObj.runningBreakId){var checkinDate=lastEntryObj.breakFromTime?lastEntryObj.breakFromTime:lastEntryObj.fdate;"-"===(checkInFdate=checkinDate.slice(0,11))[checkInFdate.length-1]&&(checkInFdate=checkInFdate.slice(0,10)),Attendance.Entry.latestCheckinLeftPos=Attendance.Entry.leftPositionCalc(Attendance.disTimeOnly(checkinDate),checkInFdate,data[i].ldate),Attendance.Entry.latestCheckinDate=checkInFdate,Attendance.Entry.showBreakRunner(lastEntryObj)}else Attendance.Entry.showOrHideBreakSelect(!1);Attendance.Entry.setFunctionInOrOut(),trow="<tr class='today-active' onclick=Attendance.Entry.consEntriesPopup(this)>",Attendance.Entry.showShiftDet(Shift.getShiftName(data[i].shift.shiftId,!0))}if(trow+="<td width='20' class='P0'></td>",trow+="<td width='80' class='P0'>"+day+","+data[i].attDate.split("-")[2]+"</td>",data[i].filo.ftime?(trow+="<td width='70' class='P0 ltby-txt'>"+data[i].filo.ftime,data[i].lateby&&(trow+="<span class='Attxt absent-txt'>Late by "+data[i].lateby+"</span>"),trow+="</td>"):trow+="<td width='70' class='P0 ltby-txt'>--</td>",1===Attendance.Entry.allDataList.showScaleView){if($(Attendance.Entry.LayoutId+" #ZPAtt_listView").is(":visible")&&-1===Attendance.Entry.LayoutId.indexOf("selfservice")&&(null!==Attendance.Entry.erecno?($("#page-wrapper").attr("class","Nbar2 Dbar1"),Layout.URLS[Layout.Page.currentmode].wrapperClass="Nbar2 Dbar1"):($("#page-wrapper").attr("class","Nbar2 Dbar1"),Layout.URLS[Layout.Page.currentmode].wrapperClass="Nbar2 Dbar1",Attendance.Entry.allowUIEntry||($("#page-wrapper").attr("class","Nbar4 Dbar1"),Layout.URLS[Layout.Page.currentmode].wrapperClass="Nbar4 Dbar1"))),-1!==Attendance.Entry.LayoutId.indexOf("selfservice")){var headerCont=Layout.Page.container.find(".ZP-atdancehead");null===Attendance.Entry.erecno&&Attendance.Entry.allowUIEntry&&headerCont.hide().next().css("margin-top","20px")}trow+="<td class='CP' data-toggle='tooltip' data-placement='top' data-container='body' title='"+transStat+"'>";var colorClass="present",per=data[i].tsecs/60/60/10*100,leftPer=0;if(per>100?per=100:per<0&&(per=0),("Absent"===status||"0.5 day Present, 0.5 day Absent"===status||-1!==status.indexOf("Absent -")&&-1!==status.indexOf("Present -")&&2===status.split(",").length)&&!data[i].isToday&&(!entries[0]||entries.length>0&&!lastEntryObj.allowPunchOut))colorClass="absent",per=100;else if("Present"===status)colorClass="present";else if(-1!==status.indexOf("Weekend"))per=100,colorClass="wkend";else if(-1!==status.indexOf("Holiday"))per=100,colorClass="holiday",-1===status.indexOf("Present")||-1===status.indexOf("(Restricted Holiday)")&&(-1===status.indexOf("0.5 day Holiday)")||-1!==status.indexOf("0.5 day Paid Leave")||-1!==status.indexOf("0.5 day On Duty")||-1!==status.indexOf("0.5 day Unpaid Leave")||data[i].fulldayPresent)?data[i].session&&(per=50,"2"===data[i].session&&(leftPer=50)):colorClass="present";else if(-1!==status.indexOf("Paid Leave")){per=100,colorClass="leave";var sessionIndex=(indStatus=status.slice(status.indexOf("Paid Leave"),status.indexOf(",",status.indexOf("Paid Leave")))).indexOf("$");if(-1!==status.indexOf("Present")&&(-1!==status.indexOf("0.5 day Paid Leave")&&-1===status.indexOf("0.5 day On Duty")&&-1===status.indexOf("0.5 day Unpaid Leave")||data[i].leaveHours))colorClass="present";else if(-1!==sessionIndex&&"0"!==indStatus.slice(sessionIndex+1,sessionIndex+2)){var session=indStatus.slice(sessionIndex+1,sessionIndex+2);per=-1===indStatus.indexOf("0.5")?25:50,"2"===session?leftPer=per:"3"===session?leftPer=50:"4"===session&&(leftPer=75)}}else if(-1!==status.indexOf("On Duty")){per=100,colorClass="onduty";sessionIndex=(indStatus=status.slice(status.indexOf("On Duty"),status.indexOf(",",status.indexOf("On Duty")))).indexOf("$");if(-1!==status.indexOf("Present")&&(-1!==status.indexOf("0.5 day On Duty")&&-1===status.indexOf("0.5 day Unpaid Leave")||data[i].leaveHours))colorClass="present";else if(-1!==sessionIndex&&"0"!==indStatus.slice(sessionIndex+1,sessionIndex+2)){session=indStatus.slice(sessionIndex+1,sessionIndex+2);per=-1===indStatus.indexOf("0.5")?25:50,"2"===session?leftPer=per:"3"===session?leftPer=50:"4"===session&&(leftPer=75)}}else if(-1!==status.indexOf("Unpaid Leave")){per=100,colorClass="lop";sessionIndex=(indStatus=status.slice(status.indexOf("Unpaid Leave"),status.indexOf(",",status.indexOf("Unpaid Leave")))).indexOf("$");if(-1===status.indexOf("Present")||-1===status.indexOf("0.5 day Unpaid Leave")&&!data[i].leaveHours){if(-1!==sessionIndex&&"0"!==indStatus.slice(sessionIndex+1,sessionIndex+2)){session=indStatus.slice(sessionIndex+1,sessionIndex+2);per=-1===indStatus.indexOf("0.5")?25:50,"2"===session?leftPer=per:"3"===session?leftPer=50:"4"===session&&(leftPer=75)}}else colorClass="present"}trow+="<div class='progress cust-bar'>";var statusIsActive="";entries.length>0&&(lastEntryObj.allowPunchOut||lastEntryObj.runningBreakId)&&"present"===colorClass&&(statusIsActive="progress-bar-striped active"),trow+="<div class='custom-progress-bar "+colorClass+"-bg "+statusIsActive+"' style='left: "+leftPer+"%; width:"+per+"%;'>",trow+="</div></div></td>"}else{if($(Attendance.Entry.LayoutId+" #ZPAtt_listView").is(":visible")&&(null!==Attendance.Entry.erecno?(-1===Attendance.Entry.LayoutId.indexOf("selfservice")&&($("#page-wrapper").attr("class","Nbar2 Sbar2"),Layout.URLS[Layout.Page.currentmode].wrapperClass="Nbar2 Sbar2"),$(Attendance.Entry.LayoutId+" #ZPAtt_timeAndScaleMeasure").attr("class","time-scale-measure")):(-1===Attendance.Entry.LayoutId.indexOf("selfservice")&&($("#page-wrapper").attr("class","Nbar2 Sbar2"),Layout.URLS[Layout.Page.currentmode].wrapperClass="Nbar2 Sbar2"),$(Attendance.Entry.LayoutId+" #ZPAtt_timeAndScaleMeasure").attr("class","time-scale-measure"),Attendance.Entry.allowUIEntry||(-1===Attendance.Entry.LayoutId.indexOf("selfservice")&&($("#page-wrapper").attr("class","Nbar4 Sbar2"),Layout.URLS[Layout.Page.currentmode].wrapperClass="Nbar4 Sbar2"),$(Attendance.Entry.LayoutId+" #ZPAtt_timeAndScaleMeasure").attr("class","time-scale-measure Aband")))),-1!==Attendance.Entry.LayoutId.indexOf("selfservice")){headerCont=Layout.Page.container.find(".ZP-atdancehead");null===Attendance.Entry.erecno&&Attendance.Entry.allowUIEntry&&headerCont.hide().next().css("margin-top","20px")}trow+="<td width='39' align='right' class='P0 CP' onmouseover=Attendance.Entry.toggleEntryToolTip(this,false,true) onmouseout=Attendance.Entry.toggleEntryToolTip(this,true) onclick=Attendance.Entry.toggleEntryToolTip(this,true)>",trow+="<div class='prgrs-event'>",trow+="<div class='progress-start max-prgrs-dot'></div>",trow+="<div class='progress-middle prgrs-dot'></div>",trow+="<div class='progress-end max-prgrs-dot'></div>",trow+="</div>",trow+="</td>",trow+="<td class='CP' data-toggle='tooltip' data-placement='top' data-container='body' title='"+transStat+"'>",-1!==status.indexOf("0.5 Weekend")?transStat=status=Attendance.Entry.halfWeekendSwap(status,"0.5 Weekend"):-1!==status.indexOf("0.5 Statutory (Weekend)")?transStat=status=Attendance.Entry.halfWeekendSwap(status,"0.5 Statutory (Weekend)"):-1!==status.indexOf("0.5 Non-Statutory (Weekend)")&&(transStat=status=Attendance.Entry.halfWeekendSwap(status,"0.5 Non-Statutory (Weekend)"));var fullBars="<div class='progress cust-bar'>",isPresent=!1;("Absent"===status||"0.5 day Present, 0.5 day Absent"===status||-1!==status.indexOf("Absent -")&&-1!==status.indexOf("Present -")&&2===status.split(",").length)&&!data[i].isToday&&(!entries[0]||entries.length>0&&!lastEntryObj.allowPunchOut)?fullBars="<div class='progress cust-bar absent-bg'><span class='label absent-border LTpo1'>"+transStat+"</span>":(-1!==status.indexOf("Present")||0!==entries.length&&-1===status.indexOf("Absent"))&&(isPresent=!0);for(var splittedStatus=status.split(", "),leftPosWidthArr=[],rightPosWidthArr=[],checkNextStatus=!0,fullBarStatusChanged=!1,len=0;len<splittedStatus.length&&checkNextStatus;len++){var indStatus;if(-1!==(indStatus=splittedStatus[len]).indexOf("Weekend")&&-1===indStatus.indexOf("Present")){var width=100,leftPosInMins=data[i].shift.fTime,startPoint=0;data[i].weekendSession,leftPosInMins=data[i].shift.fTime,startPoint=0;if(data[i].weekendSession){sessionIndex=data[i].weekendSession;var wkndDurationBasedOnShift=(shiftWorkingHour=data[i].shift.fTime<data[i].shift.tTime?data[i].shift.tTime-data[i].shift.fTime:1440-data[i].shift.fTime+data[i].shift.tTime)/2;2===sessionIndex&&(leftPosInMins=data[i].shift.fTime+wkndDurationBasedOnShift),startPoint=Attendance.Entry.leftPositionCalc(Attendance.disHours(leftPosInMins),data[i].attDate,data[i].attDate),(width=Attendance.Entry.leftPositionCalc(Attendance.disHours(leftPosInMins+wkndDurationBasedOnShift),data[i].attDate,data[i].attDate)-startPoint)<0&&(width=0)}for(var leftPoint=startPoint,rightPoint=startPoint+width,skipConsStatus=!1,index=0;index<rightPosWidthArr.length;index++){if(leftPoint>=leftPosWidthArr[index]&&rightPoint<=rightPosWidthArr[index]||leftPoint<leftPosWidthArr[index]&&rightPoint>rightPosWidthArr[index]){skipConsStatus=!0;break}leftPoint>=leftPosWidthArr[index]&&rightPoint>rightPosWidthArr[index]&&leftPoint<rightPosWidthArr[index]?leftPoint=rightPosWidthArr[index]:leftPoint<=leftPosWidthArr[index]&&rightPoint>leftPosWidthArr[index]&&rightPoint<=rightPosWidthArr[index]&&(rightPoint=leftPosWidthArr[index])}if(leftPoint=leftPoint<0?0:leftPoint>100?100:leftPoint,rightPoint=rightPoint<0?0:rightPoint>100?100:rightPoint,skipConsStatus)continue;(width=rightPoint-leftPoint)<0&&(width=0);var appendHtml="";0==len&&100!=width&&(appendHtml="<div class='progress cust-bar'>");var holidayBarClass="custom-progress-bar";100==width&&(holidayBarClass="progress cust-bar",checkNextStatus=!1),100==width&&isPresent||(leftPosWidthArr.push(leftPoint),rightPosWidthArr.push(rightPoint),fullBarStatusChanged=!0,fullBars=appendHtml+"<div class='"+holidayBarClass+" wkend-bg' style='left: "+leftPoint+"%; width:"+width+"%;'><span class='label wkend-border LTpo1'>",-1!==transStat.indexOf("Weekend")?fullBars+=transStat.split(",")[len]+"</span></div>":fullBars+=transStat+"</span></div>")}else if(-1!==indStatus.indexOf("Unpaid Leave")||-1!==indStatus.indexOf("On Duty")||-1!==indStatus.indexOf("Paid Leave")){width=100,leftPosInMins=data[i].shift.fTime;var leaveStatus=transStat,hourBasedIndex=(startPoint=0,sessionIndex=indStatus.indexOf("$"),indStatus.indexOf("#"));if(-1!==sessionIndex&&"0"!==indStatus.slice(sessionIndex+1,sessionIndex+2)){var leaveDurationBasedOnShift=(shiftWorkingHour=data[i].shift.fTime<data[i].shift.tTime?data[i].shift.tTime-data[i].shift.fTime:1440-data[i].shift.fTime+data[i].shift.tTime)/4;-1!==indStatus.indexOf("0.5")&&(leaveDurationBasedOnShift=shiftWorkingHour/2);var curDaySession=indStatus.slice(sessionIndex+1,sessionIndex+2);"2"===curDaySession?leftPosInMins=data[i].shift.fTime+leaveDurationBasedOnShift:"3"===curDaySession?leftPosInMins=data[i].shift.fTime+2*leaveDurationBasedOnShift:"4"===curDaySession&&(leftPosInMins=data[i].shift.fTime+3*leaveDurationBasedOnShift),startPoint=Attendance.Entry.leftPositionCalc(Attendance.disHours(leftPosInMins),data[i].attDate,data[i].attDate),(width=Attendance.Entry.leftPositionCalc(Attendance.disHours(leftPosInMins+leaveDurationBasedOnShift),data[i].attDate,data[i].attDate)-startPoint)<0&&(width=0),leaveStatus=Attendance.setLeaveStat(indStatus,!0)}else if(-1!==hourBasedIndex){var hourDetails=indStatus.slice(hourBasedIndex+1,indStatus.indexOf("#",hourBasedIndex+1)).split(" ");startPoint=Attendance.Entry.leftPositionCalc(Attendance.disHours(hourDetails[0]),data[i].attDate,data[i].attDate),(width=Attendance.Entry.leftPositionCalc(Attendance.disHours(hourDetails[1]),data[i].attDate,data[i].attDate)-startPoint)<0&&(width=0),leaveStatus=Attendance.setLeaveStat(indStatus,!0)}for(leftPoint=startPoint,rightPoint=startPoint+width,skipConsStatus=!1,index=0;index<rightPosWidthArr.length;index++){if(leftPoint>=leftPosWidthArr[index]&&rightPoint<=rightPosWidthArr[index]||leftPoint<leftPosWidthArr[index]&&rightPoint>rightPosWidthArr[index]){skipConsStatus=!0;break}leftPoint>=leftPosWidthArr[index]&&rightPoint>rightPosWidthArr[index]&&leftPoint<rightPosWidthArr[index]?leftPoint=rightPosWidthArr[index]:leftPoint<=leftPosWidthArr[index]&&rightPoint>leftPosWidthArr[index]&&rightPoint<=rightPosWidthArr[index]&&(rightPoint=leftPosWidthArr[index])}if(leftPoint=leftPoint<0?0:leftPoint>100?100:leftPoint,rightPoint=rightPoint<0?0:rightPoint>100?100:rightPoint,skipConsStatus)continue;if((width=rightPoint-leftPoint)<0&&(width=0),0===startPoint&&0===width||100===startPoint&&0===width)continue;appendHtml="";0==len&&100!=width&&(appendHtml="<div class='progress cust-bar'>");var leaveBarClass="custom-progress-bar";100==width&&(leaveBarClass="progress cust-bar",checkNextStatus=!1),100==width&&isPresent||(leftPosWidthArr.push(leftPoint),rightPosWidthArr.push(rightPoint),fullBarStatusChanged=!0,fullBars=appendHtml+"<div class='"+leaveBarClass+" lop-bg' style='left: "+leftPoint+"%; width:"+width+"%;'><span class='label lop-border LTpo1'>"+leaveStatus+"</span>",-1!==indStatus.indexOf("Paid Leave")?fullBars=appendHtml+"<div class='"+leaveBarClass+" leave-bg' style='left: "+leftPoint+"%; width:"+width+"%;'><span class='label leave-border LTpo1'>"+leaveStatus+"</span>":-1!==indStatus.indexOf("On Duty")&&(fullBars=appendHtml+"<div class='"+leaveBarClass+" onduty-bg' style='left: "+leftPoint+"%; width:"+width+"%;'><span class='label onduty-border LTpo1'>"+leaveStatus+"</span>"),fullBars+="</div>")}else if(-1!==indStatus.indexOf("Holiday")||-1!==indStatus.indexOf("(Restricted)")||-1!==indStatus.indexOf("(Restricted Holiday)")&&-1===indStatus.indexOf("Present")){width=100,leftPosInMins=data[i].shift.fTime,startPoint=0;if(data[i].session){sessionIndex=data[i].session;var shiftWorkingHour,holDurationBasedOnShift=(shiftWorkingHour=data[i].shift.fTime<data[i].shift.tTime?data[i].shift.tTime-data[i].shift.fTime:1440-data[i].shift.fTime+data[i].shift.tTime)/2;"2"===sessionIndex&&(leftPosInMins=data[i].shift.fTime+holDurationBasedOnShift),startPoint=Attendance.Entry.leftPositionCalc(Attendance.disHours(leftPosInMins),data[i].attDate,data[i].attDate),(width=Attendance.Entry.leftPositionCalc(Attendance.disHours(leftPosInMins+holDurationBasedOnShift),data[i].attDate,data[i].attDate)-startPoint)<0&&(width=0)}for(leftPoint=startPoint,rightPoint=startPoint+width,skipConsStatus=!1,index=0;index<rightPosWidthArr.length;index++){if(leftPoint>=leftPosWidthArr[index]&&rightPoint<=rightPosWidthArr[index]||leftPoint<leftPosWidthArr[index]&&rightPoint>rightPosWidthArr[index]){skipConsStatus=!0;break}leftPoint>=leftPosWidthArr[index]&&rightPoint>rightPosWidthArr[index]&&leftPoint<rightPosWidthArr[index]?leftPoint=rightPosWidthArr[index]:leftPoint<=leftPosWidthArr[index]&&rightPoint>leftPosWidthArr[index]&&rightPoint<=rightPosWidthArr[index]&&(rightPoint=leftPosWidthArr[index])}if(leftPoint=leftPoint<0?0:leftPoint>100?100:leftPoint,rightPoint=rightPoint<0?0:rightPoint>100?100:rightPoint,skipConsStatus)continue;(width=rightPoint-leftPoint)<0&&(width=0);appendHtml="";0==len&&100!=width&&(appendHtml="<div class='progress cust-bar'>");holidayBarClass="custom-progress-bar";100==width&&(holidayBarClass="progress cust-bar",checkNextStatus=!1),100==width&&isPresent||(leftPosWidthArr.push(leftPoint),rightPosWidthArr.push(rightPoint),fullBarStatusChanged=!0,fullBars=appendHtml+"<div class='"+holidayBarClass+" holiday-bg' style='left: "+leftPoint+"%; width:"+width+"%;'><span class='label holiday-border LTpo1'>",-1!==transStat.indexOf("Holiday")?fullBars+=transStat.split(",")[len]+"</span></div>":fullBars+=transStat+"</span></div>")}if((-1!==status.indexOf("day Absent")||-1!==status.indexOf("Absent - "))&&len===splittedStatus.length-1){fullBarStatusChanged=!0,leftPosWidthArr.sort(Attendance.Entry.intArrSort),rightPosWidthArr.sort(Attendance.Entry.intArrSort);for(var sp=0;sp<leftPosWidthArr.length;sp++){var lePos=leftPosWidthArr[sp],riPos=rightPosWidthArr[sp];0===sp&&0!==lePos&&(fullBars+="<div class='custom-progress-bar absent-bg' style='left:0%; width:"+lePos+"%;'><span class='label absent-border LTpo1'>"+indStatus+"</span></div>"),0!==sp&&0!==lePos&&1!==leftPosWidthArr.length&&lePos!==rightPosWidthArr[sp-1]&&(fullBars+="<div class='custom-progress-bar absent-bg' style='left:"+rightPosWidthArr[sp-1]+"%; width:"+(lePos-rightPosWidthArr[sp-1])+"%;'><span class='label absent-border LTpo1'>"+indStatus+"</span></div>"),sp===leftPosWidthArr.length-1&&riPos!==lePos&&100!==riPos&&(fullBars+="<div class='custom-progress-bar absent-bg' style='left:"+riPos+"%; width:"+(100-riPos)+"%;'><span class='label absent-border LTpo1'>"+indStatus+"</span></div>")}}fullBarStatusChanged&&(trow+=fullBars)}fullBarStatusChanged||(trow+=fullBars);var beforeShiftEntries=[],afterShiftEntries=[];if(isPresent){var singleEntries=[];if((0===entries.length||data[i].approvalInfo&&1===data[i].approvalInfo.status)&&data[i].filo&&(data[i].filo.fdate||data[i].filo.tdate)){var entriesObj={};data[i].filo.fdate&&(entriesObj.fdate=data[i].filo.fdate+" - "+data[i].filo.ftime),data[i].filo.tdate&&(entriesObj.tdate=data[i].filo.tdate+" - "+data[i].filo.ttime),singleEntries.push(entriesObj)}else singleEntries=entries;for(var j=singleEntries.length-1;j>=0;j--)if(1!==Object.keys(singleEntries[j]).length){var leftPosOfToTime=0,leftPosOfFromTime=0,fromDateTime=singleEntries[j].fdate,toDateTime=singleEntries[j].tdate,active="";if(fromDateTime){var fromDate=fromDateTime.slice(0,11);if("-"===fromDate[fromDate.length-1]&&(fromDate=fromDate.slice(0,10)),""!==(fromDateTime=Attendance.disTimeOnly(fromDateTime))&&"-"!==fromDateTime){var tempLeftPosOfFromTime=Attendance.Entry.leftPositionCalc(fromDateTime,fromDate,data[i].ldate);leftPosOfFromTime=tempLeftPosOfFromTime,tempLeftPosOfFromTime>=100?leftPosOfFromTime=100:tempLeftPosOfFromTime<=0&&(leftPosOfFromTime=0)}}if(toDateTime){var toDate=toDateTime.slice(0,11);if("-"===toDate[toDate.length-1]&&(toDate=toDate.slice(0,10)),""!==(toDateTime=Attendance.disTimeOnly(toDateTime))&&"-"!==toDateTime){var tempLeftPosOfToTime=Attendance.Entry.leftPositionCalc(toDateTime,toDate,data[i].ldate);leftPosOfToTime=tempLeftPosOfToTime,tempLeftPosOfToTime>=100?leftPosOfToTime=100:tempLeftPosOfToTime<=0&&(leftPosOfToTime=0),1==Attendance.Entry.allDataList.showAllEntries&&singleEntries[j].runningBreakId&&(active="progress-bar-striped active")}else active="progress-bar-striped active"}var beforeinOrOutObj={},afterinOrOutObj={};if(""!==fromDateTime&&"-"!==fromDateTime&&""!==toDateTime&&"-"!==toDateTime){for(leftPoint=tempLeftPosOfFromTime,rightPoint=tempLeftPosOfToTime,skipConsStatus=!1,index=0;index<rightPosWidthArr.length;index++){if(leftPoint>=leftPosWidthArr[index]&&rightPoint<=rightPosWidthArr[index]||leftPoint<leftPosWidthArr[index]&&rightPoint>rightPosWidthArr[index]){skipConsStatus=!0;break}leftPoint>=leftPosWidthArr[index]&&rightPoint>rightPosWidthArr[index]&&leftPoint<rightPosWidthArr[index]?leftPoint=rightPosWidthArr[index]:leftPoint<=leftPosWidthArr[index]&&rightPoint>leftPosWidthArr[index]&&rightPoint<=rightPosWidthArr[index]&&(rightPoint=leftPosWidthArr[index])}if(skipConsStatus)continue;tempLeftPosOfToTime=rightPoint,leftPosOfFromTime=(tempLeftPosOfFromTime=leftPoint)>=100?100:tempLeftPosOfFromTime<=0?0:tempLeftPosOfFromTime,leftPosOfToTime=tempLeftPosOfToTime>=100?100:tempLeftPosOfToTime<=0?0:tempLeftPosOfToTime}if(""!==fromDateTime&&"-"!==fromDateTime){var inWidth=leftPosOfToTime-leftPosOfFromTime;inWidth<0&&(inWidth=0);var lineBGColorClass="present-bg";singleEntries[j].breakId&&(lineBGColorClass="LC"+Attendance.Entry.allDataList.breakList.breakObj[singleEntries[j].breakId].breakColorCode),trow+='<div class="custom-progress-bar '+lineBGColorClass+" "+active+'" style="width : '+inWidth+"%; left:"+leftPosOfFromTime+'%;">',tempLeftPosOfFromTime<=100&&tempLeftPosOfFromTime>=0?trow+="<span class='prgrs-dot present-bg event-start' style='left:-3px' onmouseover='Attendance.Entry.toggleEntryToolTip(this,false,false,\""+fromDateTime+"\",false)' onmouseout=Attendance.Entry.toggleEntryToolTip(this,true) onclick=Attendance.Entry.toggleEntryToolTip(this,true)></span>":tempLeftPosOfFromTime>100?(before_afterShiftEntryObj.afterFrom=!0,afterinOrOutObj.checkin=fromDateTime):(before_afterShiftEntryObj.beforeFrom=!0,beforeinOrOutObj.checkin=fromDateTime),trow+="</div>"}""!==toDateTime&&"-"!==toDateTime&&(""!==toDateTime&&"-"!==toDateTime&&tempLeftPosOfToTime<=100&&tempLeftPosOfToTime>=0?(trow+='<div class="custom-progress-bar absent-bg" style="left:'+tempLeftPosOfToTime+'%;">',trow+="<span class='prgrs-dot absent-bg event-start' style='left:-3px' onmouseover='Attendance.Entry.toggleEntryToolTip(this,false,false,false,\""+toDateTime+"\")' onmouseout=Attendance.Entry.toggleEntryToolTip(this,true) onclick=Attendance.Entry.toggleEntryToolTip(this,true)></span></div>"):tempLeftPosOfToTime>100?(before_afterShiftEntryObj.afterTo=!0,afterinOrOutObj.checkout=toDateTime):tempLeftPosOfToTime<0&&(before_afterShiftEntryObj.beforeTo=!0,beforeinOrOutObj.checkout=toDateTime)),0!==Object.keys(afterinOrOutObj).length&&afterShiftEntries.push(afterinOrOutObj),0!==Object.keys(beforeinOrOutObj).length&&beforeShiftEntries.push(beforeinOrOutObj)}}before_afterShiftEntriesObj.beforeEntries=beforeShiftEntries,before_afterShiftEntriesObj.afterEntries=afterShiftEntries,Attendance.Entry.before_afterShiftEntry[data[i].attDate]=before_afterShiftEntryObj,Attendance.Entry.before_afterShiftEntries[data[i].attDate]=before_afterShiftEntriesObj,trow+="</div></td>",trow+="<td width='39' align='left' class='P0 CP' onmouseover=Attendance.Entry.toggleEntryToolTip(this,false,true) onmouseout=Attendance.Entry.toggleEntryToolTip(this,true) onclick=Attendance.Entry.toggleEntryToolTip(this,true)>",trow+="<div class='prgrs-event'>",trow+="<div class='progress-start max-prgrs-dot'></div>",trow+="<div class='progress-middle prgrs-dot'></div>",trow+="<div class='progress-end max-prgrs-dot'></div></div></td>"}var hrs="";data[i].tsecs>=0&&(hrs=ZPI18N.getString("zp.hrs")),data[i].filo.ttime?(trow+="<td width='100' align='left' class='ltby-txt'>"+data[i].filo.ttime,data[i].earlyby&&(trow+="<span class='Attxt absent-txt'>Early by "+data[i].earlyby+"</span>"),trow+="</td>"):trow+="<td width='100' align='left' class='ltby-txt'>--</td>",trow+="<td width='110' align='left' class='AtPcol ZPbold'>"+Attendance.disHours(data[i].tsecs/60)+" "+hrs+"</td>";var updateRow="",attDate=data[i].attDate;if(updateTR){var upDateRowIndex=$(updateTR).index();$(updateTR).find("[data-toggle=tooltip]").tooltip("hide"),$(updateTR).replaceWith(trow),updateRow=$(tbody.children()[upDateRowIndex])}else tbody.append(trow),updateRow=$(tbody.children()[i]);if($(Attendance.Entry.LayoutId+" #ZPAtt_listViewEntries .today-active").prev()[0]?$(Attendance.Entry.LayoutId+" #ZPAtt_listViewEntries .today-active").prev().find("td").css("border-color","rgb(223, 230, 235)"):$(Attendance.Entry.LayoutId+" #ZPAtt_listViewEntries .today-active td").css("border-color","rgb(223, 230, 235)"),lastEntryObj&&lastEntryObj.isPrevExtended){var newToday=$(".today-active").prev();if(Attendance.Entry.isPrevExtended=!0,newToday[0])$(".today-active").removeAttr("class"),$(newToday).attr("class","today-active"),entries=Attendance.Entry.allDataList.entries[data[$(Attendance.Entry.LayoutId+" #ZPAtt_listViewEntries .today-active").index()].attDate];else{if(isLoadPrevWeekOrMonth)return void $(Attendance.Entry.LayoutId+" #ZPAtt_entryNavigation").parent().parent().prev().children().trigger("click");$(Attendance.Entry.LayoutId+" #ZPAtt_listViewEntries .today-active td").removeAttr("style"),$(Attendance.Entry.LayoutId+" #ZPAtt_listViewEntries .today-active").removeClass("today-active")}}if(0===Attendance.Entry.allDataList.showScaleView&&0!==Object.keys(Attendance.Entry.before_afterShiftEntry).length&&(Attendance.Entry.before_afterShiftEntry[attDate].beforeFrom&&$(updateRow.children()[3].children[0]).find(".progress-start, .progress-middle").addClass("present-bg"),Attendance.Entry.before_afterShiftEntry[attDate].beforeFrom&&!Attendance.Entry.before_afterShiftEntry[attDate].beforeTo?$(updateRow.children()[3].children[0].children[2]).addClass("present-bg"):Attendance.Entry.before_afterShiftEntry[attDate].beforeTo&&$(updateRow.children()[3].children[0].children[2]).addClass("absent-bg"),(Attendance.Entry.before_afterShiftEntry[attDate].afterFrom||Attendance.Entry.before_afterShiftEntry[attDate].afterTo)&&$(updateRow.children()[5].children[0]).find(".progress-start, .progress-middle").addClass("present-bg"),Attendance.Entry.before_afterShiftEntry[attDate].afterFrom&&!Attendance.Entry.before_afterShiftEntry[attDate].afterTo?$(updateRow.children()[5].children[0].children[2]).addClass("present-bg"):Attendance.Entry.before_afterShiftEntry[attDate].afterTo&&$(updateRow.children()[5].children[0].children[2]).addClass("absent-bg")),(data[i].isToday||Object.keys(data).length===i+1)&&entries.length>0&&(lastEntryObj.allowPunchOut||lastEntryObj.runningBreakId)){var lastObj=lastEntryObj;if(Attendance.Entry.isPrevExtended&&Attendance.Entry.showOrHideBreakSelect(!1),Attendance.Entry.breakRowOpen=!1,lastObj.allowPunchOut?Attendance.Entry.checkInOut="out":Attendance.Entry.breakRowOpen=!0,$(".today-active")[0]||($(Attendance.Entry.LayoutId+" #ZPAtt_listViewEntries").children().last().attr("class","today-active"),$(Attendance.Entry.LayoutId+" #ZPAtt_listViewEntries .today-active").prev().find("td").css("border-color","rgb(223, 230, 235)")),void 0!==lastObj.tsecs)Attendance.Entry.updateTotalmins(lastObj.tsecs,"set",lastObj.lsecs);else if(Attendance.Entry.temp_tsecs=0,1===Attendance.Entry.allDataList.showAllEntries){var addSecs=lastObj.totalSecs?lastObj.addSecs+lastObj.totalSecs:lastObj.addSecs;Attendance.Entry.updateTotalmins(addSecs,"set",lastObj.lsecs)}else Attendance.Entry.updateTotalmins(lastObj.addSecs);Attendance.Entry.setFunctionInOrOut()}else if(lastEntryObj&&lastEntryObj.isPrevExtended){if(Attendance.Entry.showOrHideBreakSelect(!1),Attendance.Entry.checkInOut="out",entries.length>0){var checkInFdate,templastEntryObj={};if(entries.length>0){displayLastRow=entries[entries.length-1];templastEntryObj=1==entries.length?displayLastRow:entries[displayLastRow.lastRowIndex]}if(templastEntryObj.allowPunchOut)"-"===(checkInFdate=templastEntryObj.fdate.slice(0,11))[checkInFdate.length-1]&&(checkInFdate=checkInFdate.slice(0,10)),Attendance.Entry.latestCheckinLeftPos=Attendance.Entry.leftPositionCalc(Attendance.disTimeOnly(templastEntryObj.fdate),checkInFdate,data[i-1].ldate),Attendance.Entry.latestCheckinDate=checkInFdate;if(void 0!==templastEntryObj.tsecs)Attendance.Entry.updateTotalmins(templastEntryObj.tsecs,"set",templastEntryObj.lsecs);else if(templastEntryObj.addSecs)if(Attendance.Entry.temp_tsecs=0,1===Attendance.Entry.allDataList.showAllEntries){addSecs=templastEntryObj.totalSecs?templastEntryObj.addSecs+templastEntryObj.totalSecs:templastEntryObj.addSecs;Attendance.Entry.updateTotalmins(addSecs,"set",templastEntryObj.lsecs)}else Attendance.Entry.updateTotalmins(templastEntryObj.addSecs)}Attendance.Entry.setFunctionInOrOut()}}$(Attendance.Entry.LayoutId+" #ZPAtt_allEntries_popup").hasClass("in")&&!fromEntryEdit&&Attendance.Entry.consEntriesPopup($(Attendance.Entry.LayoutId+" #ZPAtt_listViewEntries").children()[Attendance.Entry.selectedRowIndex])}},intArrSort:function(a,b){return a-b},halfWeekendSwap:function(status,wkndName){if(status.length!==wkndName.length){var lIndex=(status=status.substring(0,status.indexOf(", "+wkndName))).lastIndexOf(",");if(-1===lIndex)status=-1!==status.indexOf("0.5 day Holiday")?status.concat(", ").concat(wkndName):wkndName.concat(", ").concat(status);else{var temp=status.substring(lIndex+2);status=status.substring(0,lIndex).concat(", ").concat(wkndName).concat(", ").concat(temp)}}return status},toggleEntryToolTip:function(obj,isclose,isBeforeOrAfter,fromTime,toTime){if(isclose)$(Attendance.Entry.LayoutId+" #ZPAtt_entry_toolTip").hide();else{var topReduce=85,leftReduce=28;-1!==Attendance.Entry.LayoutId.indexOf("selfservice")&&(topReduce=44);var tooltipPop=$(Attendance.Entry.LayoutId+" #ZPAtt_entry_toolTip");if(tooltipPop.empty(),isBeforeOrAfter){var attDate=Attendance.Entry.allDataList.dayList[$(obj).parent().index()].attDate,allentries=Attendance.Entry.before_afterShiftEntries[attDate],befOrAft="afterEntries";3===$(obj).index()&&(befOrAft="beforeEntries",leftReduce=39),"today-active"===$(obj).parent().attr("class")&&(topReduce=87);var entries=allentries[befOrAft];if(0!==entries.length)for(var i in entries){var checkIn=entries[i].checkin,li="";checkIn&&(li+="<li class='grn'><span></span><b class='ZPreg PR'>"+ZPI18N.getString("zp.checkin")+",<time class='ML10 ZPbold'>"+checkIn+"</time></b></li>");var checkOut=entries[i].checkout;checkOut&&(li+="<li class='red'><span></span><b class='ZPreg PR'>"+ZPI18N.getString("zp.checkout")+",<time class='ML10 ZPbold'>"+checkOut+"</time></b></li>"),tooltipPop.append(li)}if(tooltipPop.is(":empty"))return}else{topReduce=60,-1!==Attendance.Entry.LayoutId.indexOf("selfservice")&&(topReduce=17),leftReduce=17;var li1="";fromTime?li1="<li class='grn'><span></span><b class='ZPreg PR'>"+ZPI18N.getString("zp.checkin")+",<time class='ML10 ZPbold'>"+fromTime+"</time></b></li>":toTime&&(li1="<li class='red'><span></span><b class='ZPreg PR'>"+ZPI18N.getString("zp.checkout")+",<time class='ML10 ZPbold'>"+toTime+"</time></b></li>"),tooltipPop.append(li1)}var left=$(obj).offset().left-$(Attendance.Entry.LayoutId+" #ZPAtt_listView").parent().offset().left-(.63*$(Attendance.Entry.LayoutId+" #ZPAtt_entry_toolTip").width()-leftReduce),top=$(obj).offset().top;-1!==Attendance.Entry.LayoutId.indexOf("selfservice")?(top=top-$(Attendance.Entry.LayoutId+" #"+Layout.Page.container[0].id).offset().top+topReduce+20,left+=10):top=top-$(Attendance.Entry.LayoutId+" #ZPAtt_listView").parent().offset().top+topReduce,$(Attendance.Entry.LayoutId+" #ZPAtt_entry_toolTip").css({top:top,left:left}).show()}},editShowCheck:null,selectedRowIndex:null,consEntriesPopup:function(obj){ZPeople.BSModal.show($("#"+Layout.Page.pageId+" #ZPAtt_allEntries_popup")),$(obj).parent().find("[data-toggle=tooltip]").tooltip("hide");var allData=Attendance.Entry.allDataList,eShow=isSPOCEntryEdit&&(Attendance.Entry.erecno&&isSPOCEntryEdit.includes(Attendance.Entry.erecno)||!Attendance.Entry.erecno&&isSPOCEntryEdit.includes(erecno));eShow||isManageAttendanceData&&Attendance.Entry.isEditAllowedForLocationAdmin||!isRegConfigured&&Attendance.Entry.isEditAllowed&&null===Attendance.Entry.erecno||Attendance.Entry.isEditAllowedForSub&&null!==Attendance.Entry.erecno&&Attendance.Entry.isSubOrdinate?Attendance.Entry.editShowCheck=!0:Attendance.Entry.editShowCheck=!1;var isLeaveTabActive=-1!==ZPTabs.ACTIVE_TABARR.toString().toLowerCase().indexOf("leavetracker");Layout.Page.container.find("#leave-bt").text(ZPI18N.getString("zp.apply.context.leave")+" "+ZPeople.decodeTxt(ZPeople.Module.MODULE_DATA.attendance.formname));var date=allData.dayList[$(obj).index()].attDate,ldate=allData.dayList[$(obj).index()].ldate,entries=allData.entries[date],odEntries=[];isOnDutyConfigured&&Object.keys(allData.odEntries).length&&(odEntries=allData.odEntries[date]);entries=allData.entries[date];date=date.split("-");var dayList=allData.dayList[$(obj).index()];Attendance.Entry.selectedRowIndex=$(obj).index();var status=dayList.status;$(Attendance.Entry.LayoutId+" #ZPAtt_entryDate").text(days[dayList.day-1]+", "+date[2]+" "+months[date[1]-1]+" "+date[0]);var entriesCont=$(Attendance.Entry.LayoutId+" #ZPAtt_entry_allEntriesList");entriesCont.empty();var latLongList=new Array;entriesCont.parent().siblings().remove(),$(Attendance.Entry.LayoutId+" #ZPAtt_allEntries_popup div.modal-body #ZPAtt_attEntry_emptyAddEntry").remove();var addRegForSub=Attendance.Entry.allDataList.addRegForSub,list="<div class='ZPRmain'>";list+="<div class='dtlinr'>";var tmpList="";if(entries[0]&&!entries[0].processRowEntry&&(1!==entries.length||1!==Object.keys(entries[0]).length)||odEntries.length>0){entriesCont.parent().find("div.ZPcolhead").fadeIn(300),$(Attendance.Entry.LayoutId+" #ZPAtt_attEntry_emptyRecInfo").hide();for(var i=0;i<entries.length;i++)if(1!==Object.keys(entries[i]).length){var attRowClass="dtlinr_Dv";(entries[i].geoLocation_in||entries[i].geoLocation_out||null!==Attendance.Entry.cityNamesList&&0!==Object.keys(Attendance.Entry.cityNamesList).length&&(entries[i].punchin_userip&&Attendance.Entry.cityNamesList[entries[i].punchin_userip]&&"-"!==Attendance.Entry.cityNamesList[entries[i].punchin_userip]||entries[i].punchout_userip&&Attendance.Entry.cityNamesList[entries[i].punchout_userip]&&"-"!==Attendance.Entry.cityNamesList[entries[i].punchout_userip])||entries[i].latitude_in||entries[i].latitude_out)&&(attRowClass="dtlinr_Dv");var breakAtt="";entries[i].breakId&&(attRowClass+=" brkBg",breakAtt="breakId = "+entries[i].breakId),entries[i].permissionId&&(attRowClass+=" brkBg");var list1="<div class='"+attRowClass+"' "+breakAtt+">";list1+="<div class='src_rw' id='ZPAtt_AttEntries'>",list1+="<div class='chkTm'>";var isFromReg=15===entries[i].inputType_in&&15===entries[i].inputType_out||1===entries.length&&(15===entries[0].inputType_in||15===entries[0].inputType_out);if("-"!==entries[i].fdate.trim()){if(-1!==entries[i].fdate.indexOf(ldate))list1+="<span class='grn LH18I'>"+Attendance.disTimeOnly(entries[i].fdate);else list1+="<span class='grn LH18I'>"+(dateTime=entries[i].fdate.split(" - "))[0]+" "+dateTime[1];var fromInpType=Attendance.Entry.getInputType(entries[i].inputType_in,!0);list1+=" <i class='"+(fromInpType.className+" S12 gry ML3")+"' data-toggle='tooltip' data-placement='right' title='"+fromInpType.title+"'></i>",entries[i].attachId_in&&(list1+="<div class='usr_icn lft' onclick=Attendance.Entry.showAttachment(this,true) title='"+ZPI18N.getString("zp.attachment")+"'><i class='CR-user'></i></div>"),list1+="</span>";var cityName_In="",geoLocName_in=entries[i].geoLocation_in,building_In=entries[i].building_in,foundGeoName_in=geoLocName_in&&""!==geoLocName_in&&"-"!==geoLocName_in;foundGeoName_in?cityName_In=geoLocName_in:null!==Attendance.Entry.cityNamesList&&0!==Object.keys(Attendance.Entry.cityNamesList).length&&entries[i].punchin_userip&&Attendance.Entry.cityNamesList[entries[i].punchin_userip]&&"-"!==Attendance.Entry.cityNamesList[entries[i].punchin_userip]&&(cityName_In=(cityName_In=Attendance.Entry.cityNamesList[entries[i].punchin_userip]).charAt(0).toUpperCase()+cityName_In.substr(1).toLowerCase());var latAndLon_in="",viewInMapLink="";if(entries[i].latitude_in&&entries[i].longitude_in){if(latAndLon_in="latLon_in_"+i,!foundGeoName_in){var latLonInObj={};latLonInObj.lat=entries[i].latitude_in,latLonInObj.lon=entries[i].longitude_in,latLonInObj.id="latLon_in_"+i,latLongList.push(latLonInObj)}viewInMapLink="</br><a data-toggle='dropdown' aria-expanded='false' onclick=Attendance.Entry.mapContCons(this)>"+ZPI18N.getString("zp.viewmap")+"</a>"}if(""!==cityName_In||""!==viewInMapLink){list1+="<span class='loctn DB LH18I S12 dropdown dgry'>",list1+="<span id='"+latAndLon_in+"' class='dgry'> <i class='IC-location-1 NM'></i> "+$("<div/>").text(cityName_In).html();var addressTypeIn=entries[i].addressType_in,locDispInfo="",accuracyIn=entries[i].accuracy_in,useripIn=entries[i].punchin_userip,latIn=entries[i].latitude_in;if(void 0!==accuracyIn){var accIn=parseInt(accuracyIn);accIn>1e3&&accIn<=3e3?locDispInfo=ZPI18N.getString("zp.lowaccuracyinfo",new Array(accIn+"")):accIn>3e3&&useripIn&&3==addressTypeIn&&(locDispInfo=ZPI18N.getString("zp.lowaccuracyandipaddrinfo",new Array(useripIn,accIn+"")))}else useripIn&&void 0===latIn&&3==addressTypeIn&&(locDispInfo=ZPI18N.getString("zp.ipaddrinfo",new Array(useripIn)));""!==locDispInfo&&(list1+="<i class='IC-info ML5 CP gry popHover' data-popover='true' data-placement='bottom' data-html='true'",list1+="data-content='"+Attendance.Entry.dispLocationInfo(locDispInfo)+"' data-original-title='' title=''></i>"),list1+="</span>"+viewInMapLink+"</span>"}""!==building_In&&void 0!==building_In&&(list1+="<span class='dgry' id='ZPAtt_CheckIn_Building'> <i class='IC-org-l NM MR2'></i>",list1+=$("<div/>").text(building_In).html(),list1+="</span>"),entries[i].desc_in&&(list1+="<span class='dgry' id='ZPAtt_Checkin_Notes'>",list1+=$("<div/>").text(entries[i].desc_in).html(),list1+="</span>")}list1+="</div>";var isAutoBreak=!1,isManualBreak=!1,isBreak=!1,isShiftApp=!1,isPaidBreak=!1,breakTimeInSecs=0;if("-"!==entries[i].fdate.trim()&&"-"===entries[i].tdate.trim()||"-"===entries[i].fdate.trim()&&"-"!==entries[i].tdate.trim())list1+="<div class='int_dtls' style='visibility: hidden;'>",list1+="<button class='int_btns int_icn brk_bg' style='visibility: hidden;'>",list1+="<i class='CR-tea'></i><span class='brk-typ'>automatic</span></button>",list1+="<div class='dtdd'><span style='visibility: hidden;'>15 Mins</span></div></div>";else if("-"!==entries[i].fdate.trim()&&"-"!==entries[i].tdate.trim()){if(list1+="<div class='int_dtls'>",entries[i].breakId){var breakDetails=Attendance.Entry.allDataList.breakList.breakObj[entries[i].breakId];isAutoBreak=entries[i].isAutomatic,isManualBreak=entries[i].isManualInput,isShiftApp=entries[i].isShiftApplicable,isPaidBreak=entries[i].isPaid,isBreak=!0,list1+="<button class='int_btns int_icn brk_bg'>",list1+='<i class="'+breakDetails.breakImage+'"></i>',list1+='<span class="brk-typ">'+breakDetails.breakName+"</span></button>",breakTimeInSecs=isPaidBreak?entries[i].paidBreakInSecs:entries[i].unPaidBreakInSecs>0?entries[i].unPaidBreakInSecs:0}else entries[i].permissionId?(list1+="<button class='int_btns prm_bg'>",list1+='<span class="brk-typ">'+AttPermissions.allPermissionList[entries[i].permissionId]+"</span></button>"):(list1+="<button class='int_btns int_icn brk_bg' style='visibility: hidden;'>",list1+="<i class='CR-tea'></i><span class='brk-typ'>automatic</span></button>");if(list1+="<div class='dtdd'><span style='visibility: hidden;'>15 Mins</span></div>",breakTimeInSecs>0)list1+="<span>"+(breakTimeInSecs>=60?parseInt(breakTimeInSecs/60)+" "+ZPI18N.getString("zp.minutes"):breakTimeInSecs+" "+ZPI18N.getString("zp.secs"))+"</span>";else if(entries[i].individualPermission>0){var permissionMins=parseInt(entries[i].individualPermission/60);list1+="<span>"+Attendance.disHours(permissionMins)+" "+(permissionMins<=60?ZPI18N.getString("zp.leavetype.hour"):ZPI18N.getString("zp.hourslog"))+"</span>"}list1+="</div>"}else if(entries[i].breakId){list1+="<div class='int_dtls'>";breakDetails=Attendance.Entry.allDataList.breakList.breakObj[entries[i].breakId];if(isAutoBreak=entries[i].isAutomatic,isManualBreak=entries[i].isManualInput,isShiftApp=entries[i].isShiftApplicable,isPaidBreak=entries[i].isPaid,isBreak=!0,list1+="<button class='int_btns int_icn brk_bg'>",list1+='<i class="'+breakDetails.breakImage+'"></i>',list1+='<span class="brk-typ">'+breakDetails.breakName+"</span></button>",list1+="<div class='dtdd'><span style='visibility: hidden;'>15 Mins</span></div>",(breakTimeInSecs=isPaidBreak?entries[i].paidBreakInSecs:entries[i].unPaidBreakInSecs>0?entries[i].unPaidBreakInSecs:0)>0)list1+="<span>"+(breakTimeInSecs>=60?parseInt(breakTimeInSecs/60)+" "+ZPI18N.getString("zp.minutes"):breakTimeInSecs+" "+ZPI18N.getString("zp.secs"))+"</span>";list1+="</div>"}if(list1+="<div class='chkTm'>","-"!==entries[i].tdate.trim()){if(-1!==entries[i].tdate.indexOf(ldate))list1+="<span class='red LH18I'>"+Attendance.disTimeOnly(entries[i].tdate);else list1+="<span class='red LH18I'>"+(dateTime=entries[i].tdate.split(" - "))[0]+" "+dateTime[1];var toInpType=Attendance.Entry.getInputType(entries[i].inputType_out,!1);list1+=" <i class='"+(toInpType.className+" S12 gry ML3")+"' data-toggle='tooltip' data-placement='right' title='"+toInpType.title+"'></i>",entries[i].attachId_out&&(list1+="<div class='usr_icn rgt' onclick=Attendance.Entry.showAttachment(this,false) title='"+ZPI18N.getString("zp.attachment")+"'><i class='CR-user'></i></div>"),list1+="</span>";var cityName_Out="",geoLocName_out=entries[i].geoLocation_out,building_out=entries[i].building_out,foundGeoName_out=geoLocName_out&&""!==geoLocName_out&&"-"!==geoLocName_out;foundGeoName_out?cityName_Out=geoLocName_out:null!==Attendance.Entry.cityNamesList&&0!==Object.keys(Attendance.Entry.cityNamesList).length&&entries[i].punchout_userip&&Attendance.Entry.cityNamesList[entries[i].punchout_userip]&&"-"!==Attendance.Entry.cityNamesList[entries[i].punchout_userip]&&(cityName_Out=(cityName_Out=Attendance.Entry.cityNamesList[entries[i].punchout_userip]).charAt(0).toUpperCase()+cityName_Out.substr(1).toLowerCase());var latAndLon_out="",viewOutMapLink="";if(entries[i].latitude_out&&entries[i].longitude_out){if(latAndLon_out="latLon_out_"+i,!foundGeoName_out){var latLonOutObj={};latLonOutObj.lat=entries[i].latitude_out,latLonOutObj.lon=entries[i].longitude_out,latLonOutObj.id="latLon_out_"+i,latLongList.push(latLonOutObj)}viewOutMapLink="</br><a data-toggle='dropdown' aria-expanded='false' onclick=Attendance.Entry.mapContCons(this)>"+ZPI18N.getString("zp.viewmap")+"</a>"}if(""!==cityName_Out||""!==viewOutMapLink){list1+="<span class='loctn DB LH18I S12 dropdown dgry'>",list1+="<span id='"+latAndLon_out+"' class='dgry'> <i class='IC-location-1 NM'></i> "+$("<div/>").text(cityName_Out).html();var addressTypeOut=entries[i].addressType_out,locDispInfoOut="",accuracyOut=entries[i].accuracy_out,useripOut=entries[i].punchout_userip,latOut=entries[i].latitude_out;if(useripOut||(useripOut=entries[i].punchin_userip),void 0!==accuracyOut){var accOut=parseInt(accuracyOut);accOut>1e3&&accOut<=3e3?locDispInfoOut=ZPI18N.getString("zp.lowaccuracyinfo",new Array(accOut+"")):accOut>3e3&&useripOut&&3==addressTypeOut&&(locDispInfoOut=ZPI18N.getString("zp.lowaccuracyandipaddrinfo",new Array(useripOut,accOut+"")))}else useripOut&&void 0===latOut&&3==addressTypeOut&&(locDispInfoOut=ZPI18N.getString("zp.ipaddrinfo",new Array(useripOut)));""!==locDispInfoOut&&(list1+="<i class='IC-info ML5 CP gry popHover' data-popover='true' data-placement='bottom' data-html='true'",list1+="data-content='"+Attendance.Entry.dispLocationInfo(locDispInfoOut)+"' data-original-title='' title=''></i>"),list1+="</span>"+viewOutMapLink+"</span>"}""!==building_out&&void 0!==building_out&&(list1+="<span class='dgry' id='ZPAtt_Checkout_Building'> <i class='IC-org-l NM MR2'></i>",list1+=$("<div/>").text(building_out).html(),list1+="</span>"),entries[i].desc_out&&(list1+="<span class='dgry' id='ZPAtt_Checkout_Notes'>",list1+=$("<div/>").text(entries[i].desc_out).html(),list1+="</span>")}entries[i].desc_in||entries[i].desc_out||"",list1+="</div>";list1+="<div class='over-display'>",Attendance.Entry.isTimeSheetAllowedForEntry||isFromReg||(isManualBreak=isManualBreak&&isShiftApp,!Attendance.Entry.editShowCheck||isBreak&&!isManualBreak?isBreak&&!isManualBreak||(list1+="<i class='IC-pen S14 gry FL MR10 ' onclick=Attendance.Entry.entryNotesToggle(this);></i>"):list1+="<i class='IC-pen S14 gry FL MR10' onclick=Attendance.Entry.showEntryEdit(this);></i>",(eShow||isManageAttendanceData&&!allData.hideDelete)&&0===allData.showAllEntries&&(!isBreak||!isAutoBreak&&isManualBreak)&&(list1+="<i class='IC-delete S14 gry FL' onclick=Attendance.Entry.toggleSingleEntryDelete(this);></i>")),list1+="</div></div>",entries[i].permissionId&&entries[i].desc_in&&(list1+="<div class='src_rw'>",list1+="<span class='W120'>"+ZPI18N.getString("zp.reason")+"</span>",list1+="<div class='src_resn'>"+$("<span></span>").text(entries[i].desc_in).html()+"</div></div>"),list1+="</div>",""===tmpList?tmpList=list1:tmpList+=list1}if(odEntries.length>0)for(i=0;i<odEntries.length;i++){var dateTime;list1="<div class='"+(attRowClass="dtlinr_Dv")+"'>";if(list1+="<div class='src_rw'>",list1+="<div class='chkTm'>",odEntries[i].fdate)if(-1!==odEntries[i].fdate.indexOf(ldate))list1+="<span>"+Attendance.disTimeOnly(odEntries[i].fdate);else list1+="<span>"+(dateTime=odEntries[i].fdate.split(" - "))[0]+" "+dateTime[1];if(list1+="</div>",odEntries[i].fdate&&odEntries[i].tdate)list1+="<div class='int_dtls'>",list1+="<button class='int_btns od_bg'>",list1+="<span class='brk-typ'>"+ZSEC.Encoder.encodeForHTML(odEntries[i].type),list1+="<div class='dtdd'></div>",list1+="<span>"+(odEntries[i].totalHours>=60?odEntries[i].totalHours/60+ZPI18N.getString("zp.shours"):odEntries[i].totalHours+ZPI18N.getString("zp.minutes"))+"</span>",list1+="</div>";else if(void 0!==odEntries[i].daysTaken){var daysTaken=odEntries[i].daysTaken,encodedType=ZSEC.Encoder.encodeForHTML(odEntries[i].type);0==daysTaken?(list1+="<div class='int_dtls jst_cntr'>",list1+="<button class='int_btns od_bg'>",list1+="<span class='brk-typ'>"+encodedType+"</span></button>",list1+="<div class='dtdd'></div>",list1+="<span>"+ZPI18N.getString("zp.fullday")+"</span>",list1+="</div>"):1==daysTaken?(list1+="<div class='int_dtls'>",list1+="<button class='int_btns od_bg'>",list1+="<span class='brk-typ'>"+encodedType+"</span></button>",list1+="<div class='dtdd'></div>",list1+="<span>  0.5 "+ZPI18N.getString("zp.day")+" ("+(1==odEntries[i].session?ZPI18N.getString("zp.firsthalf"):ZPI18N.getString("zp.secondhalf"))+")</span>",list1+="</div>"):(list1+="<div class='int_dtls'>",list1+="<button class='int_btns od_bg'>",list1+="<span class='brk-typ'>"+encodedType+"</span></button>",list1+="<div class='dtdd'></div>",list1+="<span>  0.25 "+ZPI18N.getString("zp.day")+" ("+(1==odEntries[i].session?ZPI18N.getString("zp.firstquarter"):2==odEntries[i].session?ZPI18N.getString("zp.secondquarter"):3==odEntries[i].session?ZPI18N.getString("zp.thirdquarter"):ZPI18N.getString("zp.fourthquarter"))+")</span>",list1+="</div>")}if(list1+="<div class='chkTm'>",odEntries[i].tdate&&"-"!==odEntries[i].tdate.trim())if(-1!==odEntries[i].tdate.indexOf(ldate))list1+="<span>"+Attendance.disTimeOnly(odEntries[i].tdate);else list1+="<span>"+(dateTime=odEntries[i].tdate.split(" - "))[0]+" "+dateTime[1];list1+="</div></div>",odEntries[i].odId&&odEntries[i].desc_in&&(list1+="<div class='src_rw'>",list1+="<span class='W120'>"+ZPI18N.getString("zp.reason")+"</span>",list1+="<div class='src_resn'>"+$("<span></span>").text(odEntries[i].desc_in).html()+"</div></div>"),list1+="</div>",""===tmpList?tmpList=list1:tmpList+=list1}if(entriesCont.append(list+tmpList+"</div></div>"),Attendance.Entry.editShowCheck&&!Attendance.Entry.isTimeSheetAllowedForEntry&&entriesCont.find("div.dtlinr").append("<div class='ad_enoptn'><div class='DIB CP' onclick=Attendance.Entry.showAddNewEntry(this);><i class='IC-plus-sma blu'></i><span class='blu S13'>"+ZPI18N.getString("zp.addentry")+"</span></div></div>"),dayList.approvalInfo&&-1===dayList.approvalInfo.status)entriesCont.parent().find("#absentpop1").hide(),entriesCont.parent().find("#text2").hide();else if(-1!==status.indexOf("Absent")){var absdayerr=ZPI18N.getString("zp.markedabsent");-1!==status.indexOf("0.5 day Absent")&&(absdayerr=ZPI18N.getString("zp.markedhalfabsent"));var txt="<h5 align='center'>"+absdayerr+"</h5><div id='absentpop1' align='center'>";!isLeaveTabActive||!isRegConfigured||!isadmin&&!isManageAttendanceData&&null!==Attendance.Entry.erecno||Attendance.Entry.allDataList.hideDelete&&null!==Attendance.Entry.erecno?!isLeaveTabActive||!isadmin&&!isManageAttendanceData&&null!==Attendance.Entry.erecno||Attendance.Entry.allDataList.hideDelete&&null!==Attendance.Entry.erecno?isRegConfigured&&(addRegForSub||isadmin||isManageAttendanceData||null===Attendance.Entry.erecno)&&(!Attendance.Entry.allDataList.hideDelete||null===Attendance.Entry.erecno||addRegForSub)&&(txt+="<button id='reg-bt' data-toggle='modal' class='btn-default-brdr ML5'> "+ZPI18N.getString("zp.regularize")+"</button>"):txt+="<button id='leave-bt' data-toggle='modal' class='btn-default-brdr MR5'>"+ZPI18N.getString("zp.apply.context.leave")+" "+ZPeople.Module.MODULE_DATA.attendance.formname+"</button>":(txt+="<button id='leave-bt' data-toggle='modal' class='btn-default-brdr MR5'>"+ZPI18N.getString("zp.apply.context.leave")+" "+ZPeople.Module.MODULE_DATA.attendance.formname+"</button>",txt+=ZPI18N.getString("zp.or")+"  <button id='reg-bt' data-toggle='modal' class='btn-default-brdr ML5'> "+ZPI18N.getString("zp.regularize")+"</button>"),txt+="</div>",entriesCont.parent().parent().append(txt),entriesCont.parent().parent().find("#absentpop1 #leave-bt").attr("onclick","Attendance.Entry.toLeave("+date[2]+","+(date[1]-1)+","+date[0]+")"),entriesCont.parent().parent().find("#absentpop1 #reg-bt").attr("onclick","Attendance.Entry.toregularize(this,"+date[2]+","+(date[1]-1)+","+date[0]+")")}}else{entriesCont.parent().find("div.ZPcolhead").hide(),$(Attendance.Entry.LayoutId+" #ZPAtt_attEntry_emptyRecInfo").show();var empDiv=Layout.Page.container.find("#ZPAtt_attEntry_emptyRecInfo #text_emptydiv");0===empDiv.children().length&&Attendance.noDataImg(8,"CR-at-entry",empDiv),dayList.approvalInfo&&-1===dayList.approvalInfo.status?(entriesCont.parent().find("#absentpop").hide(),entriesCont.parent().find("#text2").hide(),entriesCont.parent().find("#text1").show()):-1!==status.indexOf("Absent")?(!isLeaveTabActive||!isRegConfigured||!isadmin&&!isManageAttendanceData&&null!==Attendance.Entry.erecno||Attendance.Entry.allDataList.hideDelete&&null!==Attendance.Entry.erecno?!isLeaveTabActive||!isadmin&&!isManageAttendanceData&&null!==Attendance.Entry.erecno||Attendance.Entry.allDataList.hideDelete&&null!==Attendance.Entry.erecno?isRegConfigured&&(addRegForSub||isadmin||isManageAttendanceData||null===Attendance.Entry.erecno)&&(!Attendance.Entry.allDataList.hideDelete||null===Attendance.Entry.erecno||addRegForSub)?(entriesCont.parent().find("#absentpop").show(),entriesCont.parent().find("#absentpop span").hide(),entriesCont.parent().find("#absentpop #leave-bt").hide()):entriesCont.parent().find("#absentpop").hide():(entriesCont.parent().find("#absentpop").show(),entriesCont.parent().find("#absentpop span").hide(),entriesCont.parent().find("#absentpop #reg-bt").hide()):entriesCont.parent().find("#absentpop").show(),entriesCont.parent().find("#text1").hide(),entriesCont.parent().find("#text2").show(),null!==Attendance.Entry.erecno&&(entriesCont.parent().find("#text2").hide(),entriesCont.parent().find("#text1").show()),entriesCont.parent().find("#absentpop #leave-bt").attr("onclick","Attendance.Entry.toLeave("+date[2]+","+(date[1]-1)+","+date[0]+")"),entriesCont.parent().find("#absentpop #reg-bt").attr("onclick","Attendance.Entry.toregularize(this,"+date[2]+","+(date[1]-1)+","+date[0]+")")):(entriesCont.parent().find("#absentpop").hide(),entriesCont.parent().find("#text2").hide(),entriesCont.parent().find("#text1").show()),Attendance.Entry.editShowCheck&&!Attendance.Entry.isTimeSheetAllowedForEntry&&(list+="<div id='ZPAtt_attEntry_emptyAddEntry' class='ad_enoptn'><div class='DIB CP' onclick=Attendance.Entry.showAddNewEntry(this);><i class='IC-plus-sma blu'></i><span class='blu S13'>"+ZPI18N.getString("zp.addentry")+"</span></div></div></div></div>",entriesCont.append(list))}var desc=allData.dayList[$(obj).index()].description;if(void 0!==desc&&""!==desc){var noteCont="<div class='M25'>";noteCont+="<div class='form-group'>",noteCont+="<label class='dgry'><b>"+ZPI18N.getString("zp.notes")+"</b></label>",noteCont+="<div class='form-group P0I paraTags'>"+desc+"</div>",noteCont+="</div>",noteCont+="<div class='form-group'>",noteCont+="</div></div>",entriesCont.parent().parent().append(noteCont)}if(Attendance.Entry.setFInAndLOutinPopup(),dayList.approvalInfo&&-1===dayList.approvalInfo.status&&$(Attendance.Entry.LayoutId+" #ZPAtt_entry_RegData").show(),0!==latLongList.length){var param={mode:"getCityNameByLatLong",conreqcsr:csrfToken,latLongList:JSON.stringify(latLongList)};$.post("/AttendanceAction.zp",param,function(rdata){if(rdata.cityNames){var addr=rdata.cityNames;for(var i in addr)$(Attendance.Entry.LayoutId+" #ZPAtt_allEntries_popup").find("#"+i).html("<i class='IC-location-1 FL NM'></i> <span class='ExpAdr'>"+$("<div/>").text(addr[i]).html()+"</span>")}})}},dispLocationInfo:function(locDispInfo){return'<span class="P5 W250 S12 DB">'+locDispInfo+"</span>"},showAttachment:function(obj,isCheckin){var entryIndex=$(obj).closest(".dtlinr_Dv").index(),attDate=Attendance.Entry.allDataList.dayList[Attendance.Entry.selectedRowIndex].attDate,currEntryData=Attendance.Entry.allDataList.entries[attDate][entryIndex],attachId=currEntryData.attachId_out,time=Attendance.disTimeOnly(currEntryData.tdate),location=currEntryData.geoLocation_out;isCheckin&&(attachId=currEntryData.attachId_in,time=Attendance.disTimeOnly(currEntryData.fdate),location=currEntryData.geoLocation_in);var clr=isCheckin?"grn":"red",path="mode=viewImage&attachmentId="+attachId;path+="&isCheckin="+isCheckin,path+="&date="+attDate,null!==Attendance.Entry.erecno&&(path+="&erecno="+Attendance.Entry.erecno),path=encodeURI(path);var popup="<div class='zp_mdl mdl_cntr top fc_Recg vw_pop' id='ZPAtt_viewAttachPopup' aria-hidden='false'>";popup+="<div class='zp_mdl-dlg'><div class='zp_mdl-cnt'><div class='zp_mdl-hdr'><ul class='chkndtls'>",location&&(popup+="<li><i class='IC-location-1'></i> <span>"+location+"</span></li>"),time&&(popup+="<li><i class='IC-clock'></i> <span class='"+clr+"'>"+time+"</span></li>"),popup+="</ul><button id='NClose' aria-label='Close' data-dismiss='modal' class='close' type='button'><span aria-hidden='true'><div class='IC-cls-1px red S21 CP'></div></span></button></div>";var pName="";portalName&&(pName="/"+portalName),popup+="<div class='zp_mdl-bdy'><img src='"+pName+"/AttendanceViewAction.zp?"+path+"'></div></div></div></div>",$("body").find("#ZPAtt_viewAttachPopup")[0]||$("body").append(popup),$("#ZPAtt_viewAttachPopup .zp_mdl-bdy").append(ZPeople.LOADING_HTML),$("#ZPAtt_viewAttachPopup .zp_mdl-bdy").find("#zp_page_loading").css("margin-top","150px");var layout=$("#ZPAtt_viewAttachPopup");layout.modal("show"),layout.on("hidden.bs.modal",function(){$("#ZPAtt_viewAttachPopup").remove()}),$("#ZPAtt_viewAttachPopup img").on("load",function(){$("#ZPAtt_viewAttachPopup .zp_mdl-bdy").find("#zp_page_loading").remove()})},mapContCons:function(obj){var dayList=Attendance.Entry.allDataList.dayList[Attendance.Entry.selectedRowIndex],currEntryData=Attendance.Entry.allDataList.entries[dayList.attDate][$(obj).parent().parent().parent().parent().index()],inOrOut=ZPI18N.getString("zp.checkout"),time=Attendance.disTimeOnly(currEntryData.tdate),markerColBlue=!1,lat=currEntryData.latitude_out,lon=currEntryData.longitude_out;0===$(obj).parent().parent().index()&&(inOrOut=ZPI18N.getString("zp.checkin"),time=Attendance.disTimeOnly(currEntryData.fdate),markerColBlue=!0,lat=currEntryData.latitude_in,lon=currEntryData.longitude_in),ZPMaps.isGeoMap?window.open("https://maps.google.com/?q="+lat+","+lon,"_blank"):$(Attendance.Entry.LayoutId+" #ZPAtt_mapCont")[0]?($(obj).after($(Attendance.Entry.LayoutId+" #ZPAtt_mapCont")),ZPMaps.setData(lat,lon,inOrOut,time,markerColBlue)):ZPMaps.loadMapinListView(lat,lon,obj,inOrOut,time,markerColBlue)},toggleSingleEntryDelete:function(obj,isCancel){if(isCancel){var list="<div class='over-display";Attendance.Entry.breakImageHiddenDiv?list+=" shwBrk'>"+Attendance.Entry.breakImageHiddenDiv+Attendance.Entry.breakNameHiddenDiv:list+="'>";var delShow=isSPOCEntryEdit&&(Attendance.Entry.erecno&&isSPOCEntryEdit.includes(Attendance.Entry.erecno)||!Attendance.Entry.erecno&&isSPOCEntryEdit.includes(erecno));Attendance.Entry.editShowCheck?list+="<i class='IC-pen S14 gry FL MR10' onclick=Attendance.Entry.showEntryEdit(this);></i>":list+="<i class='IC-pen S14 gry FL MR10' onclick=Attendance.Entry.entryNotesToggle(this);></i>",(delShow||isManageAttendanceData)&&0===Attendance.Entry.allDataList.showAllEntries&&(list+="<i class='IC-delete S14 gry FL' onclick=Attendance.Entry.toggleSingleEntryDelete(this);></i>"),list+="</div></div>",$(obj).parent().replaceWith(list).hide().fadeIn(300)}else{var list1="<div class='over-display'>";list1+="<button class='btn btn-primary btn-sm MR5' type='button'onclick=Attendance.Entry.deleteSingleEntry(this);>"+ZPI18N.getString("zp.confirm")+"</button>",list1+="<button class='btn btn-default btn-sm' type='button' onclick=Attendance.Entry.toggleSingleEntryDelete(this,true);>"+ZPI18N.getString("zp.cancel")+"</button>",list1+="</div>",delete Attendance.Entry.breakImageHiddenDiv,delete Attendance.Entry.breakNameHiddenDiv,$(obj).parent().hasClass("shwBrk")&&(Attendance.Entry.breakImageHiddenDiv=$(obj).parent().children().eq(0)[0].outerHTML,Attendance.Entry.breakNameHiddenDiv=$(obj).parent().children().eq(1)[0].outerHTML),$(obj).parent().hide(),$(obj).parent().replaceWith(list1).hide().fadeIn(300)}},isAppStatusVisible:null,setFInAndLOutinPopup:function(){var layout=Layout.Page.container,dayList=Attendance.Entry.allDataList.dayList[Attendance.Entry.selectedRowIndex];if(layout.find("#ZPAtt_entry_roundedIn,#ZPAtt_entry_roundedOut").hide(),layout.find("#ZPAtt_firstCheckinInPopup,#ZPAtt_lastCheckoutInPopup").text("-"),dayList.filo&&dayList.filo.ftime){var fromTime=dayList.filo.ftime;fromTime=fromTime.replace(":"," : "),layout.find("#ZPAtt_firstCheckinInPopup").text(fromTime);var actIn=dayList.filo.actual_firstIn;actIn&&(actIn=actIn.substr(actIn.indexOf(" ")+1),layout.find("#ZPAtt_entry_roundedIn").show().attr("data-content","<div class='FL W100'><div class='FL'>"+ZPI18N.getString("zp.recorded")+"</div><div class='FR'> : &nbsp&nbsp"+actIn+"</div></div><div class='FL W100'><div class='FL'>"+ZPI18N.getString("zp.roundedoff")+"</div><div class='FR'> : &nbsp&nbsp"+fromTime.replace(" : ",":")+"</div></div>"))}if(dayList.filo&&dayList.filo.ttime){var toTime=dayList.filo.ttime;toTime=toTime.replace(":"," : "),layout.find("#ZPAtt_lastCheckoutInPopup").text(toTime);var actOut=dayList.filo.actual_lastOut;actOut&&(actOut=actOut.substr(actOut.indexOf(" ")+1),layout.find("#ZPAtt_entry_roundedOut").show().attr("data-content","<div class='FL W100'><div class='FL'>"+ZPI18N.getString("zp.recorded")+"</div><div class='FR'> : &nbsp&nbsp"+actOut+"</div></div><div class='FL W100'><div class='FL'>"+ZPI18N.getString("zp.roundedoff")+"</div><div class='FR'> : &nbsp&nbsp"+toTime.replace(" : ",":")+"</div></div>"))}if(layout.find("#ZPAtt_allEntries_popup").removeClass("rndOff_ftr"),$("#ZPAtt_entry_roundedIn,#ZPAtt_entry_roundedOut").is(":visible")&&layout.find("#ZPAtt_allEntries_popup").addClass("rndOff_ftr"),layout.find("#ZPAtt_totalHoursInPopup").text(Attendance.disHours(dayList.tsecs/60)+" "+ZPI18N.getString("zp.hrs")),Layout.Page.container.find("[id='ZPAtt_PaidBreakInPopup']").hide(),Attendance.Entry.allDataList.breakList.activeBreakCount>0&&(Layout.Page.container.find("[id='ZPAtt_PaidBreakInPopup']").show(),Layout.Page.container.find("[id='ZPAtt_totalBreakHoursInPopup']").text(dayList.totalPaidBreakHours+" "+ZPI18N.getString("zp.hrs"))),layout.find("#ZPAtt_entry_appStatus").parent().hide(),layout.find("#ZPAtt_entry_RegData").hide(),layout.find("#ZPAtt_entry_RegData td").text(""),Attendance.Entry.isAppStatusVisible=!1,dayList.approvalInfo){Attendance.Entry.isAppStatusVisible=!0,layout.find("#ZPAtt_entry_appStatus").parent().show();var cont=Layout.Page.container.find("#ZPAtt_entry_appStatus span").eq(0),appInfo=dayList.approvalInfo;cont.find("i").remove(),1===appInfo.status?(cont.attr("class","IC-like grn S18 DIB VM PR5"),layout.find("#ZPAtt_entry_RegData").attr("class","ZPAprvCmts RsltA Bclr"),$(layout.find("#ZPAtt_entry_RegData i")[1]).attr("class","IC-ar-dwn btm ZPArwDir grn"),cont.parent().attr("title",ZPI18N.getString("zp.approved"))):0===appInfo.status?(cont.attr("class","IC-unlike red S18 DIB VM PR5"),layout.find("#ZPAtt_entry_RegData").attr("class","ZPAprvCmts RsltR Bclr"),$(layout.find("#ZPAtt_entry_RegData i")[1]).attr("class","IC-ar-dwn btm ZPArwDir red"),cont.parent().attr("title",ZPI18N.getString("zp.rejected"))):-4===appInfo.status?(cont.attr("class","org S20 DIB VM PR5"),cont.append("<i class='CR-pending-cancel' data-toggle='tooltip' data-placement='bottom' data-original-title=''><i class='path1'></i><i class='path2'></i></i>"),layout.find("#ZPAtt_entry_RegData").attr("class","ZPAprvCmts RsltR Bclr"),$(layout.find("#ZPAtt_entry_RegData i")[1]).attr("class","IC-ar-dwn btm ZPArwDir grn"),cont.parent().attr("title",ZPI18N.getString("zp.cancelpending"))):(cont.attr("class","IC-pending org S18 DIB VM PR5"),Layout.Page.container.find("#ZPAtt_entry_RegData").attr("class","ZPAprvCmts RsltA Bclr"),$(Layout.Page.container.find("#ZPAtt_entry_RegData i")[1]).attr("class","IC-ar-dwn btm ZPArwDir grn"),cont.parent().attr("title",ZPI18N.getString("zp.waitingmsg"))),$(layout.find("#ZPAtt_entry_RegData td")[0]).text(appInfo.intime),$(layout.find("#ZPAtt_entry_RegData td")[1]).text(appInfo.outtime),$(layout.find("#ZPAtt_entry_RegData td")[2]).text(Attendance.disHours(appInfo.totalHours/60)),$(layout.find("#ZPAtt_entry_RegData td")[3]).text(Attendance.Reg.statI18nInReg(appInfo.att_status)),$(layout.find("#ZPAtt_entry_RegData td")[4]).text(appInfo.new_intime),$(layout.find("#ZPAtt_entry_RegData td")[5]).text(appInfo.new_outtime),$(layout.find("#ZPAtt_entry_RegData td")[6]).text(Attendance.disHours(appInfo.new_totalHours/60)),$(layout.find("#ZPAtt_entry_RegData td")[7]).text(Attendance.Reg.statI18nInReg(appInfo.new_status))}},toggleRegEntries:function(){$(Attendance.Entry.LayoutId+" #ZPAtt_entry_RegData").is(":visible")?$(Attendance.Entry.LayoutId+" #ZPAtt_entry_RegData").fadeOut(200):$(Attendance.Entry.LayoutId+" #ZPAtt_entry_RegData").fadeIn(200)},appendAttEditHtml:function(isFrom,date){var dateValue="",html="";return date&&""!==date&&(dateValue=date.split(" ")[1],Attendance.timeFormatIs12hr&&(dateValue=date.split(" ")[1]+" "+date.split(" ")[2])),isFrom?(html='<div class="ad_entry"><div class="input-group bootstrap-timepicker timepicker"><div class="input-group-addon"><i class="IC-clock gry"></i>',html+='</div><input placeholder="'+ZPI18N.getString("zp.local.FromTime")+'" onClick="Attendance.set_DefValue_ForTimePicker_Input(this)" id="ZPAtt_entry_editFromTime" class="form-control W80" type="text" value="'+dateValue+'"></div><div class="drp_dwn">',html+='<select class="select2-container" id="ZPAtt_entry_editFromDate"><option value="0">'+ZPI18N.getString("zp.currentday")+'</option><option value="1">'+ZPI18N.getString("zp.nextday")+'</option><option value="-1">'+ZPI18N.getString("zp.prevday")+"</option></select></div>",html+='<textarea rows="3" class="form-control MT10" placeholder="'+ZPI18N.getString("zp.addnotesforcheckin")+'"></textarea></div>'):(html='<div class="ad_entry"><div class="input-group bootstrap-timepicker timepicker"><div class="input-group-addon"><i class="IC-clock gry"></i>',html+='</div><input placeholder="'+ZPI18N.getString("zp.local.ToTime")+'" id="ZPAtt_entry_editToTime" onClick="Attendance.set_DefValue_ForTimePicker_Input(this)" class="form-control W80" type="text" value="'+dateValue+'"></div><div class="drp_dwn">',html+='<select class="select2-container" id="ZPAtt_entry_editToDate"><option value="0">'+ZPI18N.getString("zp.currentday")+'</option><option value="1">'+ZPI18N.getString("zp.nextday")+'</option><option value="-1">'+ZPI18N.getString("zp.prevday")+"</option></select></div>",html+='<textarea rows="3" class="form-control MT10" placeholder="'+ZPI18N.getString("zp.addnotesforcheckout")+'"></textarea></div>'),html},resetAttEntryEditFields:function(obj){var fromObj=$(Attendance.Entry.LayoutId+" #ZPAtt_entry_allEntriesList"),toObj=$(Attendance.Entry.LayoutId+" #ZPAtt_entry_allEntriesList");obj&&(fromObj=$(obj).children(":eq(1)").children().children(":eq(0)"),toObj=$(obj).children(":eq(1)").children().children(":eq(1)")),fromObj.find("#ZPAtt_entry_editFromDate").select2(),toObj.find("#ZPAtt_entry_editToDate").select2(),fromObj.find("#ZPAtt_entry_editFromTime").timepicker({defaultTime:"",disableMousewheel:!0,showMeridian:Attendance.timeFormatIs12hr,minuteStep:1}),toObj.find("#ZPAtt_entry_editToTime").timepicker({defaultTime:"",disableMousewheel:!0,showMeridian:Attendance.timeFormatIs12hr,minuteStep:1})},compareDates:function(date1,date2){return date1.getTime()===new Date(date2.add(-1,"days")._d).getTime()?"-1":date1.getTime()===new Date(date2.add(2,"days")._d).getTime()?"1":"0"},showEntryEdit:function(obj,isClose){var entryIndex=$(obj).parent().parent().parent().index(),attDate=Attendance.Entry.allDataList.dayList[Attendance.Entry.selectedRowIndex].attDate,ldate=Attendance.Entry.allDataList.dayList[Attendance.Entry.selectedRowIndex].ldate,currEntryData=Attendance.Entry.allDataList.entries[attDate][entryIndex],from_Date=new Date(moment(currEntryData.fdate,Attendance.Entry.allDataList.currDate.dateFormat.toUpperCase())._d),to_Date=new Date(moment(currEntryData.tdate,Attendance.Entry.allDataList.currDate.dateFormat.toUpperCase())._d);if(currEntryData){var fdate="",tdate="";if(currEntryData.fdate&&""!==currEntryData.fdate&&"-"!==currEntryData.fdate.trim()&&(fdate=Attendance.disTimeOnly(currEntryData.fdate),isClose&&-1!==currEntryData.fdate.indexOf(ldate)||(fdate=currEntryData.fdate)),currEntryData.tdate&&""!==currEntryData.tdate&&"-"!==currEntryData.tdate.trim()&&(tdate=Attendance.disTimeOnly(currEntryData.tdate),isClose&&-1!==currEntryData.tdate.indexOf(ldate)||(tdate=currEntryData.tdate)),isClose)if(Attendance.Entry.editShowCheck){var object=$(obj).parent().parent();object.prev().show(),object.next().show(),object.prev().find(".over-display").show(),object.remove()}else $(obj).parent().prev().prev().find(".over-display").show(),$(obj).parent().prev().remove(),currEntryData.permissionId&&$(obj).parent().next().show(),$(obj).parent().remove();else{var newCons="<div class='etry_Dv'>";if(newCons+="<div class='etry_rw'>",""!==fdate){var fromDate=fdate.slice(0,11);"-"===fromDate[fromDate.length-1]&&(fromDate=fromDate.slice(0,10)),fdate=fromDate.trim()+" "+Attendance.disTimeOnly(fdate)}if(""!==tdate){var toDate=tdate.slice(0,11);"-"===toDate[toDate.length-1]&&(toDate=toDate.slice(0,10)),tdate=toDate.trim()+" "+Attendance.disTimeOnly(tdate)}newCons+=Attendance.Entry.appendAttEditHtml(!0,fdate),newCons+=Attendance.Entry.appendAttEditHtml(!1,tdate),newCons+="</div></div>";var tempObj=$(obj).parent().parent().parent();$(newCons).insertAfter($(obj).parent().parent()),$(obj).parent().parent().parent().children(":eq(0)").hide(),$(obj).parent().parent().parent().children(":eq(2)").hide(),Attendance.Entry.resetAttEntryEditFields(tempObj),Attendance.Entry.oldFromDate=Attendance.Entry.compareDates(from_Date,moment(attDate,"YYYY-MM-DD")),Attendance.Entry.oldToDate=Attendance.Entry.compareDates(to_Date,moment(attDate,"YYYY-MM-DD")),$(tempObj).children(":eq(1)").find("#ZPAtt_entry_editFromDate").val(Attendance.Entry.oldFromDate).trigger("change"),$(tempObj).children(":eq(1)").find("#ZPAtt_entry_editToDate").val(Attendance.Entry.oldToDate).trigger("change"),Attendance.Entry.entryNotesToggle(obj)}}},validateDate:function(fromTime,toTime,fromDate,toDate,selectedDate){var from=new Date(moment(selectedDate,"YYYY-MM-DD").add(fromDate,"days").set({hour:parseInt(fromTime.split(":")[0],10),minute:parseInt(fromTime.split(":")[1],10)})._d);"PM"===fromTime.split(" ")[1]&&12!==parseInt(fromTime.split(":")[0],10)?from=new Date(moment(selectedDate,"YYYY-MM-DD").add(fromDate,"days").set({hour:12+parseInt(fromTime.split(":")[0],10),minute:parseInt(fromTime.split(":")[1],10)})._d):"AM"===fromTime.split(" ")[1]&&12===parseInt(fromTime.split(":")[0])&&(from=new Date(moment(selectedDate,"YYYY-MM-DD").add(fromDate,"days").set({hour:0,minute:parseInt(fromTime.split(":")[1],10)})._d));var to=new Date(moment(selectedDate,"YYYY-MM-DD").add(toDate,"days").set({hour:parseInt(toTime.split(":")[0],10),minute:parseInt(toTime.split(":")[1],10)})._d);return"PM"===toTime.split(" ")[1]&&12!==parseInt(toTime.split(":")[0],10)?to=new Date(moment(selectedDate,"YYYY-MM-DD").add(toDate,"days").set({hour:12+parseInt(toTime.split(":")[0],10),minute:parseInt(toTime.split(":")[1],10)})._d):"AM"===toTime.split(" ")[1]&&12===parseInt(toTime.split(":")[0])&&(to=new Date(moment(selectedDate,"YYYY-MM-DD").add(toDate,"days").set({hour:0,minute:parseInt(toTime.split(":")[1],10)})._d)),!(from.getTime()>to.getTime())},updateEntry:function(obj){Attendance.Entry.reloadFromWMS=!1;var fromEntry=$(obj).parent().prev().children(":eq(0)").find("input").val(),toEntry=$(obj).parent().prev().children(":eq(1)").find("input").val(),fromTime=fromEntry.split(" ")[0],toTime=toEntry.split(" ")[0],breakId=$($(obj).parents(".brkBg")).attr("breakId"),param={mode:"updateAttenEntry",conreqcsr:csrfToken};if(void 0==breakId||(param.breakId=breakId,void 0!=fromTime&&void 0!=toTime&&""!=fromTime&&""!=toTime)){var attDate=Attendance.Entry.allDataList.dayList[Attendance.Entry.selectedRowIndex].attDate,currEntryData=Attendance.Entry.allDataList.entries[attDate][$(obj).parent().parent().parent().index()];if(fromTime&&toTime&&!Attendance.Entry.validateDate(fromEntry,toEntry,$(Attendance.Entry.LayoutId+" #ZPAtt_entry_editFromDate").val(),$(Attendance.Entry.LayoutId+" #ZPAtt_entry_editToDate").val(),attDate))ZPeople.Message.showFailureMsg(ZPI18N.getString("zp.fromtimegreater"));else{currEntryData&&!currEntryData.processRowEntry&&(1===Attendance.Entry.allDataList.showAllEntries?param.editProRow=!0:currEntryData.attenId&&0===Attendance.Entry.allDataList.showAllEntries&&(param.attenid=currEntryData.attenId));var isFromTimeModified=!0,isToTimeModified=!0;if(currEntryData&&currEntryData.fdate){isFromTimeModified=Attendance.disTwoDigit(fromTime.split(":")[0])+":"+fromTime.split(":")[1]!==currEntryData.fdate.split(" ")[2];Attendance.timeFormatIs12hr&&(isFromTimeModified=Attendance.disTwoDigit(fromTime.split(":")[0])+":"+fromTime.split(":")[1]+" "+fromEntry.split(" ")[1]!=currEntryData.fdate.split(" ")[2]+" "+currEntryData.fdate.split(" ")[3])}if(currEntryData&&currEntryData.tdate){isToTimeModified=Attendance.disTwoDigit(toTime.split(":")[0])+":"+toTime.split(":")[1]!==currEntryData.tdate.split(" ")[2];Attendance.timeFormatIs12hr&&(isToTimeModified=Attendance.disTwoDigit(toTime.split(":")[0])+":"+toTime.split(":")[1]+" "+toEntry.split(" ")[1]!=currEntryData.tdate.split(" ")[2]+" "+currEntryData.tdate.split(" ")[3])}if(fromTime&&(isFromTimeModified||Attendance.Entry.oldFromDate!==$(Attendance.Entry.LayoutId+" #ZPAtt_entry_editFromDate").val())){var stime_hr=parseInt(fromTime.split(":")[0],10);Attendance.timeFormatIs12hr&&12===stime_hr&&(stime_hr=0);var stime=60*stime_hr+parseInt(fromTime.split(":")[1],10);Attendance.timeFormatIs12hr&&"PM"===fromEntry.split(" ")[1].trim()&&(stime+=720),param.ftime=stime,param.fdate=$(Attendance.Entry.LayoutId+" #ZPAtt_entry_editFromDate").val()}if(toTime&&(isToTimeModified||Attendance.Entry.oldToDate!==$(Attendance.Entry.LayoutId+" #ZPAtt_entry_editToDate").val())){var ttime_hr=parseInt(toTime.split(":")[0],10);Attendance.timeFormatIs12hr&&12===ttime_hr&&(ttime_hr=0);var ttime=60*ttime_hr+parseInt(toTime.split(":")[1],10);Attendance.timeFormatIs12hr&&"PM"===toEntry.split(" ")[1].trim()&&(ttime+=720),param.ttime=ttime,param.tdate=$(Attendance.Entry.LayoutId+" #ZPAtt_entry_editToDate").val()}currEntryData&&"-"!==currEntryData.fdate&&""===fromTime.trim()&&""!==$(Attendance.Entry.LayoutId+" #ZPAtt_entry_editToTime").val().trim()&&!currEntryData.processRowEntry&&(param.ftime="valuedeleted"),currEntryData&&"-"!==currEntryData.tdate&&""===toTime.trim()&&""!==$(Attendance.Entry.LayoutId+" #ZPAtt_entry_editFromTime").val().trim()&&!currEntryData.processRowEntry&&(param.ttime="valuedeleted");var dayList=Attendance.Entry.allDataList.dayList[Attendance.Entry.selectedRowIndex];dayList.ldate&&(param.orgDate=dayList.ldate),Attendance.Entry.erecno&&(param.erecno=Attendance.Entry.erecno),Attendance.Entry.saveNotes(obj,param),!param.ftime&&!param.ttime&&0!==param.ttime&&0!==param.ftime||param.desc_in&&""===$(Attendance.Entry.LayoutId+" #ZPAtt_entry_editFromTime").val()||param.desc_out&&""===$(Attendance.Entry.LayoutId+" #ZPAtt_entry_editToTime").val()?Attendance.Entry.descin===param.desc_in&&Attendance.Entry.descout===param.desc_out||Attendance.Entry.saveNotes(obj):Object.keys(param).length<5||($(obj).attr("disabled",!0),$.post("/AttendanceAction.zp",param,function(rdata){if(null!==rdata&&rdata.error)"not allowed"===rdata.error?ZPeople.Message.showFailureMsg(ZPI18N.getString("zp.notallowedtoedit")):"already deleted"===rdata.error?ZPeople.Message.showFailureMsg(ZPI18N.getString("zp.alreadydeleted")):"invalid entry"===rdata.error?ZPeople.Message.showFailureMsg(ZPI18N.getString("zp.fromtimegreater")):"not allowed for this day"===rdata.error?ZPeople.Message.showFailureMsg(ZPI18N.getString("zp.notallowedthisday")):"totalHrsExceeded"===rdata.error?ZPeople.Message.showFailureMsg(ZPI18N.getString("zp.totalhrsreached")):"Given entry overlaps with existing attendance entries. Add a valid entry."===rdata.error?ZPeople.Message.showFailureMsg(ZPI18N.getString("zp.matchingwithavail")):"Provided break time is outside configured break range"===rdata.error?ZPeople.Message.showFailureMsg(ZPI18N.getString("zp.matchingwithavail")):"nullbrkentryfromto"===rdata.error?ZPeople.Message.showFailureMsg(ZPI18N.getString("zp.nullbrkentryfromto")):"permissions limit exceeded"===rdata.error?ZPeople.Message.showFailureMsg(ZPI18N.getString("zp.allowedpermissionexceeded")):"permissions both time required"===rdata.error&&ZPeople.Message.showFailureMsg(ZPI18N.getString("zp.bothtimerequiredforpermission")),$(obj).prop("disabled",!1);else if(null!==rdata&&rdata.errorType)1===rdata.errorType?ZPeople.Message.showFailureMsg(ZPI18N.getString("zp.brkDisabledDeleted")):2===rdata.errorType?ZPeople.Message.showFailureMsg(ZPI18N.getString("zp.shiftnotapp")):3===rdata.errorType?ZPeople.Message.showFailureMsg(ZPI18N.getString("zp.autoerror")):4===rdata.errorType?ZPeople.Message.showFailureMsg(ZPI18N.getString("zp.manualautoerror")):5===rdata.errorType?ZPeople.Message.showFailureMsg(ZPI18N.getString("zp.breaknotinrange")):6===rdata.errorType?ZPeople.Message.showFailureMsg(ZPI18N.getString("zp.entryduplicate")):7===rdata.errorType&&ZPeople.Message.showFailureMsg(ZPI18N.getString("zp.breakcompleted")),$(obj).prop("disabled",!1);else if(null!==rdata){if(rdata.curDayBreakDetails&&(Attendance.Entry.curDayBreakDetails=rdata.curDayBreakDetails),Attendance.Entry.isPrevExtended&&$(Attendance.Entry.LayoutId+" #ZPAtt_listViewEntries .today-active").is(":visible"))return Attendance.Entry.isPrevExtended=null,void $(Attendance.Entry.LayoutId+" #ZPAtt_weekViewBut").parent().find(".btn-primary").trigger("click");Attendance.Entry.allDataList.dayList[Attendance.Entry.selectedRowIndex]=rdata.daylist[0],Attendance.Entry.getCurrDayEntry(Attendance.Entry.selectedRowIndex,!0),Attendance.Entry.allDataList.dayList[Attendance.Entry.selectedRowIndex].isToday&&Attendance.Dashboard&&Attendance.Dashboard.WeeklyData.getCurWeekData()}}))}}else ZPeople.Message.showFailureMsg(ZPI18N.getString("zp.nullbrkentryfromto"))},deleteSingleEntry:function(obj){Attendance.Entry.reloadFromWMS=!1;var attDate=Attendance.Entry.allDataList.dayList[Attendance.Entry.selectedRowIndex].attDate,entries=Attendance.Entry.allDataList.entries[attDate],entryIndex=$(obj).parent().parent().parent().index(),currEntryData=entries[entryIndex],deleteProcessRow=Attendance.Entry.isTabularDeleteEq(entries,entryIndex);$(obj).attr("disabled",!0);var param={mode:"delAttenEntry",conreqcsr:csrfToken,attDate:Attendance.Entry.allDataList.dayList[Attendance.Entry.selectedRowIndex].ldate};!deleteProcessRow&&currEntryData&&currEntryData.attenId&&0===Attendance.Entry.allDataList.showAllEntries&&(param.attId=currEntryData.attenId),null!==Attendance.Entry.erecno&&(param.erecno=Attendance.Entry.erecno),$.post("/AttendanceAction.zp",param,function(rdata){rdata.curDayBreakDetails&&(Attendance.Entry.curDayBreakDetails=rdata.curDayBreakDetails),Attendance.Entry.allDataList.dayList[Attendance.Entry.selectedRowIndex]=rdata.dayList[0],Attendance.Entry.getCurrDayEntry(Attendance.Entry.selectedRowIndex),$(obj).parent().parent().parent().fadeOut("fast",function(){$(obj).parent().parent().parent().remove()}),Attendance.Entry.allDataList.dayList[Attendance.Entry.selectedRowIndex].isToday&&Attendance.Dashboard&&Attendance.Dashboard.WeeklyData.getCurWeekData()})},isTabularDeleteEq:function(entries,entryIndex){if(entries.length>1)for(let i=0;i<entries.length;i++)if(i!==entryIndex){var entryObj=entries[i];if(void 0!==entryObj.attenId&&void 0===entryObj.breakId||void 0!==entryObj.breakId&&!0===entryObj.isManualInput)return!1}return!0},showAddNewEntry:function(obj){$(Attendance.Entry.LayoutId+" #ZPAtt_entry_allEntriesList").parent().find("div.ZPcolhead").fadeIn(300),$(Attendance.Entry.LayoutId+" #ZPAtt_attEntry_emptyRecInfo").hide();var alreadyVisibleInput=$(obj).parent().closest("div.modal-body").find("div.ZPcoltbl").find("textarea")[0];if(alreadyVisibleInput){if("ZPRmain"===$(alreadyVisibleInput).closest(".ZPRmain").attr("class"))return;$(alreadyVisibleInput).parent().parent().children().last().children(":eq(0)").trigger("click")}var newCons="<div class='dtlinr_Dv'>";newCons+="<div class='etry_Dv'>",newCons+="<div class='etry_rw'>",newCons+=Attendance.Entry.appendAttEditHtml(!0,""),newCons+=Attendance.Entry.appendAttEditHtml(!1,""),newCons+="</div>",newCons+="<div class='text-center MT15'>",newCons+="<button class='btn btn-primary btn-sm MR5' type='button' onclick='Attendance.Entry.updateEntry(this)'>"+ZPI18N.getString("zp.save")+"</button>",newCons+="<button class='btn btn-default btn-sm' type='button' onclick='Attendance.Entry.entryNotesToggle(this,true)'>"+ZPI18N.getString("zp.cancel")+"</button>",newCons+="</div></div></div></div></div>",$(Attendance.Entry.LayoutId+" #ZPAtt_entry_allEntriesList").find("div.ad_enoptn").before(newCons),Attendance.Entry.resetAttEntryEditFields()},saveNotes:function(obj,param){Attendance.Entry.reloadFromWMS=!1;var fromNotes=$(obj).parent().prev().children(":eq(0)").find("textarea"),entryIndex=$(obj).parent().parent().index();Attendance.Entry.editShowCheck&&(entryIndex=$(obj).parent().parent().parent().index());var toNotes=$(obj).parent().prev().children(":eq(1)").find("textarea"),attDate=Attendance.Entry.allDataList.dayList[Attendance.Entry.selectedRowIndex].attDate,currEntryData=Attendance.Entry.allDataList.entries[attDate][entryIndex];if(currEntryData||param){var fromEntryedit=!0;if(param||(fromEntryedit=!1,param={mode:"updateNoteForEveryEntry",conreqcsr:csrfToken}),fromNotes[0]){var fromNotesVal=fromNotes.val().trim(),prevFromNote="";currEntryData&&currEntryData.desc_in&&(prevFromNote=currEntryData.desc_in),(fromEntryedit||fromNotesVal!==prevFromNote)&&(param.desc_in=fromNotesVal)}if(toNotes[0]){var toNotesVal=toNotes.val().trim(),prevToNote="";currEntryData&&currEntryData.desc_out&&(prevToNote=currEntryData.desc_out),(fromEntryedit||toNotesVal!==prevToNote)&&(param.desc_out=toNotesVal)}if(!fromEntryedit){if(void 0===param.desc_in&&void 0===param.desc_out)return;currEntryData.attenId&&0===Attendance.Entry.allDataList.showAllEntries&&(param.attenid=currEntryData.attenId),null!==Attendance.Entry.erecno&&(param.erecno=Attendance.Entry.erecno),$(obj).attr("disabled",!0),param.orgDate=Attendance.Entry.allDataList.dayList[Attendance.Entry.selectedRowIndex].ldate,$.post("/AttendanceAction.zp",param,function(rdata){rdata&&(void 0!==rdata.notesDetails.desc_in&&(currEntryData.desc_in=rdata.notesDetails.desc_in),void 0!==rdata.notesDetails.desc_out&&(currEntryData.desc_out=rdata.notesDetails.desc_out),$(obj).prop("disabled",!1)),Attendance.Entry.entryNotesToggle(obj,!0)})}}},entryNotesToggle:function(obj,isClose){var entryIndex=$(obj).parent().parent().parent().index();isClose&&!Attendance.Entry.editShowCheck&&(entryIndex=$(obj).parent().parent().index());var attDate=Attendance.Entry.allDataList.dayList[Attendance.Entry.selectedRowIndex].attDate,entries=Attendance.Entry.allDataList.entries[attDate],currEntryData=entries[entryIndex];if(isClose&&(0===Object.keys(entries).length||1===entries.length&&1===Object.keys(entries[0]).length)&&($(Attendance.Entry.LayoutId+" #ZPAtt_entry_allEntriesList").parent().find("div.ZPcolhead").hide(),$(Attendance.Entry.LayoutId+" #ZPAtt_attEntry_emptyRecInfo").show()),currEntryData&&!currEntryData.processRowEntry){var desc_in=null,desc_out=null;currEntryData.desc_in&&(desc_in=$("<div/>").text(currEntryData.desc_in).html()),currEntryData.desc_out&&(desc_out=$("<div/>").text(currEntryData.desc_out).html()),Attendance.Entry.descin=desc_in,Attendance.Entry.descout=desc_out;var notes="",tempNotes="";if(isClose){var object=$(obj).parent().prev();if(Attendance.Entry.editShowCheck&&(object=$(obj).parent().parent()),currEntryData.permissionId&&null==desc_in){var tempObject=object;Attendance.Entry.editShowCheck||(tempObject=$(obj).parent()),tempObject.next().remove()}if(null!==desc_in||null!==desc_out){if(desc_in&&currEntryData.fdate&&""!==currEntryData.fdate.trim()&&"-"!==currEntryData.fdate.trim()&&(object.prev().children(":eq(0)").find("#ZPAtt_Checkin_Notes").remove(),object.prev().children(":eq(0)").append("<span class='dgry' id='ZPAtt_Checkin_Notes'>"+desc_in+"</span>"),currEntryData.permissionId)){tempObject=object;var list="<div class='src_rw'>";list+="<span class='W120'>"+ZPI18N.getString("zp.reason")+"</span>",list+="<div class='src_resn'>"+desc_in+"</div></div>",Attendance.Entry.editShowCheck||(tempObject=$(obj).parent()),tempObject.next().remove(),$(list).insertAfter(tempObject)}desc_out&&currEntryData.tdate&&""!==currEntryData.tdate.trim()&&"-"!==currEntryData.tdate.trim()&&(object.prev().children(":eq(2)").find("#ZPAtt_Checkout_Notes").remove(),object.prev().children(":eq(2)").append("<span class='dgry' id='ZPAtt_Checkout_Notes'>"+desc_out+"</span>"))}Attendance.Entry.showEntryEdit(obj,!0)}else{var alreadyVisibleInput=$(obj).parent().parent().parent().parent().find("textarea")[0];alreadyVisibleInput&&$(alreadyVisibleInput).parent().parent().children().last().children(":eq(0)").trigger("click");var saveFunction="Attendance.Entry.saveNotes(this)";$(obj).parent().hide(),currEntryData.permissionId&&!Attendance.Entry.editShowCheck&&$(obj).parent().parent().next().hide(),$(obj).parent().parent().find("#ZPAtt_Checkin_Notes").hide(),$(obj).parent().parent().find("#ZPAtt_Checkout_Notes").hide(),Attendance.Entry.editShowCheck&&(saveFunction="Attendance.Entry.updateEntry(this)"),tempNotes="<div class='nte_rw'><div class='nte_flds'>",(currEntryData.fdate&&""!==currEntryData.fdate.trim()&&"-"!==currEntryData.fdate.trim()||"ZPadp"!==$(obj).attr("class")&&Attendance.Entry.editShowCheck)&&(null===desc_in&&(desc_in=""),notes="<textarea rows='3' class='form-control  MT10' placeholder='"+ZPI18N.getString("zp.addnotesforcheckin")+"'>"+desc_in+"</textarea>",Attendance.Entry.editShowCheck?$(obj).parent().parent().parent().children(":eq(1)").children().children(":eq(0)").find("textarea").replaceWith(notes):tempNotes+=notes),tempNotes+="</div>",(currEntryData.tdate&&""!==currEntryData.tdate.trim()&&"-"!==currEntryData.tdate.trim()||"ZPadp"!==$(obj).attr("class")&&Attendance.Entry.editShowCheck)&&(null===desc_out&&(desc_out=""),notes="<textarea rows='3' class='form-control  MT10' placeholder='"+ZPI18N.getString("zp.addnotesforcheckout")+"'>"+desc_out+"</textarea>",Attendance.Entry.editShowCheck?$(obj).parent().parent().parent().children(":eq(1)").children().children(":eq(1)").find("textarea").replaceWith(notes):tempNotes=tempNotes+"<div class='nte_flds'>"+notes+"</div>"),tempNotes+="</div>",notes="<div class='text-center MT15' id='ZPAtt_SaveCancelNotes'>",notes+="<button class='btn btn-primary btn-sm MR5' type='button' onclick='"+saveFunction+"'>"+ZPI18N.getString("zp.save")+"</button>",notes+="<button class='btn btn-default btn-sm' type='button' onclick='Attendance.Entry.entryNotesToggle(this,true)'>"+ZPI18N.getString("zp.cancel")+"</button>",notes+="</div>",Attendance.Entry.editShowCheck?$(obj).parent().parent().parent().children(":eq(1)").append(notes):$(tempNotes+notes).insertAfter($(obj).parent().parent())}}else $(obj).parent().parent().parent().remove()},toggleProEntryNotes:function(obj,isClose){var desc=Attendance.Entry.allDataList.dayList[Attendance.Entry.selectedRowIndex].description,notesCont=$(obj).parent().parent();if(notesCont.children().remove(),isClose){var noteCont="<div class='form-group'>";return noteCont+="<label class='dgry'><b>"+ZPI18N.getString("zp.notes")+"</b></label>",noteCont+="<div class='form-group P0I paraTags'>"+desc+"</div>",noteCont+="</div>",noteCont+="<div class='form-group'>",noteCont+="<button class='btn btn-primary' onclick=Attendance.Entry.toggleProEntryNotes(this)>"+ZPI18N.getString("zp.edit")+"</button>",noteCont+="</div>",void notesCont.append(noteCont)}var entryEditCont="<div class='form-group'>";entryEditCont+="<label class='dgry'><b>"+ZPI18N.getString("zp.notes")+"</b></label>",entryEditCont+="<textarea rows='3' class='form-control' placeholder='"+ZPI18N.getString("zp.typenotes")+"' autofocus>"+desc+"</textarea>",entryEditCont+="</div>",entryEditCont+="<div class='form-group'>",entryEditCont+="<button class='btn btn-primary MR10' onclick=Attendance.Entry.saveProEntryNotes(this)>"+ZPI18N.getString("zp.save")+"</button>",entryEditCont+="<button class='btn btn-default' onclick=Attendance.Entry.toggleProEntryNotes(this,true)>"+ZPI18N.getString("zp.cancel")+"</button>",entryEditCont+="</div>",notesCont.append(entryEditCont)},saveProEntryNotes:function(obj){Attendance.Entry.reloadFromWMS=!1;var notes=$(obj).parent().prev().find("textarea").val().trim(),orgDate=Attendance.Entry.allDataList.dayList[Attendance.Entry.selectedRowIndex].ldate;if(""!==notes){var param={mode:"updateNotes",conreqcsr:csrfToken};param.notes=notes,null!==Attendance.Entry.erecno&&(param.erecno=Attendance.Entry.erecno),param.orgDate=orgDate,$.post("/AttendanceAction.zp",param,function(rdata){void 0!==rdata.notesDetails.notes&&(Attendance.Entry.allDataList.dayList[Attendance.Entry.selectedRowIndex].description=rdata.notesDetails.notes,Attendance.Entry.toggleProEntryNotes(obj,!0))})}},showDayListTabler:function(data,updateTR){if(data){var layout=Layout.Page.container,tbody=$(Attendance.Entry.LayoutId+" #ZPAtt_tabViewEntries");updateTR||tbody.empty();var showOfficeInRemoteIn=!1;1==layout.find("#ZPAtt_officeInRemoteIn").is(":visible")&&(showOfficeInRemoteIn=!0);for(var hideAllowanceCol=!0,totalAllowance=0,i=0;data[i];i++){data[i].tsecs||(data[i].tsecs=0);var trow="<tr class='ZPLRow'>",workTime="-",workingHours="-",totalHours="-",status=data[i].status,colorClass="";"Absent"===status||"0.5 day Present, 0.5 day Absent"===status||"0.5 day Absent"===status||-1!==status.indexOf("Absent -")&&-1!==status.indexOf("Present -")&&2===status.split(",").length?colorClass="RTC1 absent-bg":"Present"===status||"0.5 day Present"===status||-1!==status.indexOf("Present -")&&1===status.split(",").length?colorClass="RTC1 present-bg":-1!==status.indexOf("Weekend")?colorClass="RTC1 wkend-bg":-1!==status.indexOf("Paid Leave")?(colorClass="RTC1 leave-bg",-1!==status.indexOf("Present")&&(-1!==status.indexOf("0.5 day Paid Leave")&&-1===status.indexOf("0.5 day On Duty")&&-1===status.indexOf("0.5 day Unpaid Leave")||data[i].leaveHours)&&(colorClass="RTC1 present-bg")):-1!==status.indexOf("On Duty")?(colorClass="RTC1 onduty-bg",-1!==status.indexOf("Present")&&(-1!==status.indexOf("0.5 day On Duty")&&-1===status.indexOf("0.5 day Unpaid Leave")||data[i].leaveHours)&&(colorClass="RTC1 present-bg")):-1!==status.indexOf("Unpaid Leave")?(colorClass="RTC1 lop-bg",-1===status.indexOf("Present")||-1===status.indexOf("0.5 day Unpaid Leave")&&!data[i].leaveHours||(colorClass="RTC1 present-bg")):-1!==status.indexOf("Holiday")&&(colorClass="RTC1 holiday-bg",-1===status.indexOf("Present")||-1===status.indexOf("(Restricted Holiday)")&&(-1===status.indexOf("(0.5 day Holiday)")||-1!==status.indexOf("0.5 day Paid Leave")||-1!==status.indexOf("0.5 day On Duty")||-1!==status.indexOf("0.5 day Unpaid Leave")||data[i].fulldayPresent)||(colorClass="RTC1 present-bg"));var transStat=Attendance.consLeaveStat(status,!0,!1);void 0!==data[i].overTime_tsecs&&(workTime="<span class='grn'>"+Attendance.disHours(data[i].overTime_tsecs/60)+"</span>"),void 0!==data[i].devTime_tsecs&&(workTime="<span class='red'>"+Attendance.disHours(data[i].devTime_tsecs/60)+"</span>"),0!==data[i].wsecs&&(workingHours=Attendance.disHours(data[i].wsecs/60)),0!==data[i].tsecs&&(totalHours=Attendance.disHours(data[i].tsecs/60)),trow+="<td>"+days[data[i].day-1]+", "+Attendance.disDate(data[i].ldate)+"</td>",data[i].filo?(trow+="<td>"+Attendance.disDate(data[i].filo.ftime)+"</td>",trow+="<td>"+Attendance.disDate(data[i].filo.ttime)+"</td>"):(trow+="<td> </td>",trow+="<td> </td>"),trow+="<td>"+totalHours+"</td>",Layout.Page.container.find("[id='ZPAtt_showHidePaidBreakTabView']").hide(),Layout.Page.container.find("[id='ZPAtt_showHideUnpaidBreakTabView']").hide(),Attendance.Entry.allDataList.breakList.activeBreakCount>0&&(Attendance.Entry.allDataList.breakList.breakDispDetails.isPaidBrkDispNeed&&Layout.Page.container.find("[id='ZPAtt_showHidePaidBreakTabView']").show(),Attendance.Entry.allDataList.breakList.breakDispDetails.isUnpaidBrkDispNeed&&Layout.Page.container.find("[id='ZPAtt_showHideUnpaidBreakTabView']").show(),Attendance.Entry.allDataList.breakList.breakDispDetails.isPaidBrkDispNeed&&(trow+="<td>"+data[i].totalPaidBreakHours+"</td>"),Attendance.Entry.allDataList.breakList.breakDispDetails.isUnpaidBrkDispNeed&&(trow+="<td>"+data[i].totalUnPaidBreakHours+"</td>")),$(Attendance.Entry.LayoutId+" #ZPAtt_showHidePermissionTabView").hide(),Attendance.Entry.allDataList.isPermissionConfigured&&($(Attendance.Entry.LayoutId+" #ZPAtt_showHidePermissionTabView").show(),trow+="<td>"+data[i].totalPermissionHours+"</td>"),trow+="<td>"+workingHours+"</td>",0===Attendance.Entry.allDataList.showOverDevTime&&(trow+="<td>"+workTime+"</td>");var allowance="-";void 0!==data[i].shiftAllowance&&(hideAllowanceCol=!1,allowance=data[i].shiftAllowance,totalAllowance+=data[i].shiftAllowance),transStat=Attendance.escapeHtml(transStat);var approvalInfo=data[i].approvalInfo;if(approvalInfo&&approvalInfo.isRegularized&&(transStat=""===transStat?ZPI18N.getString("zp.regularized"):transStat+" / "+ZPI18N.getString("zp.regularized")),trow+="<td><span class='"+(showOfficeInRemoteIn?"ellipsis":"ellipsis W200")+"'data-toggle='tooltip' data-placement='left' title='"+transStat+"'><div class='"+colorClass+"'></div>"+transStat+"</span></td>",showOfficeInRemoteIn){var officeInRemoteIn="-";data[i].officein?officeInRemoteIn=ZPI18N.getString("zp.officein"):data[i].remotein&&(officeInRemoteIn=ZPI18N.getString("zp.remotein")),trow+="<td><span class='ellipsis' data-container='body' data-placement='bottom' data-toggle='tooltip' data-original-title='"+officeInRemoteIn+"'>"+officeInRemoteIn+"</span></td>"}var shiftInfo=Shift.getShiftName(data[i].shift.shiftId,!0);trow+="<td><span class='ellipsis' data-container='body' data-placement='bottom' data-toggle='tooltip' data-original-title='"+shiftInfo.timeInterval+"'>"+shiftInfo.shiftName+"</span></td><td id='allowanceColumn'><span class='ellipsis W100'>"+allowance+"</span></td>";var appClass="",appmsg="",clickFunc="";if(approvalInfo){var appInfo=approvalInfo;1===appInfo.status?(appClass="IC-like grn S21 ML30",appmsg=ZPI18N.getString("zp.approved")):0===appInfo.status?(appClass="IC-unlike red S21 ML30",appmsg=ZPI18N.getString("zp.rejected")):(appClass="IC-pending org S18 ML30",appmsg=ZPI18N.getString("zp.waitingmsg")),clickFunc="Attendance.Reg.getAttendanceRegDetails('"+appInfo.formId+"','"+appInfo.recordId+"');"}trow+="<td><i class='"+appClass+"' title='"+appmsg+"' onclick="+clickFunc+"></i></td>",isSPOCEntryEdit&&(Attendance.Entry.erecno&&isSPOCEntryEdit.includes(Attendance.Entry.erecno)||!Attendance.Entry.erecno&&isSPOCEntryEdit.includes(erecno))||isManageAttendanceData&&!Attendance.Entry.allDataList.hideDelete?(trow+="<td><div class='over-display MR10'>",trow+="<i class='IC-delete S14 gry FR MR15 CP' onclick=ZPeople.confirm(this,'','zp.deleteentirerecord',Attendance.Entry.deleteProcessRow);$(this).closest('tr').parent().find('i.IC-delete').removeAttr('id');$(this).attr('id','ZPAtt_entry_clickedElement')></i>",isRegConfigured&&(trow+="<i class='IC-pen S14 gry FR MR15 CP' onclick='Attendance.Entry.addRegFromEntry(this)'></i>"),trow+="</div></td>",$(Attendance.Entry.LayoutId+" #ZPAtt_actionInEntry").show()):isRegConfigured&&(null===Attendance.Entry.erecno||Attendance.Entry.allDataList.addRegForSub)?(trow+="<td><div class='over-display MR10'><i onclick=Attendance.Entry.addRegFromEntry(this) class='IC-pen S14 gry FR MR15 CP'></i></div></td>",$(Attendance.Entry.LayoutId+" #ZPAtt_actionInEntry").show()):$(Attendance.Entry.LayoutId+" #ZPAtt_actionInEntry").hide(),trow+="</tr>",updateTR?$(updateTR).replaceWith(trow):tbody.append(trow)}hideAllowanceCol?($(Attendance.Entry.LayoutId+" #ZPAtt_tabView #allowanceColumn").hide(),$(Attendance.Entry.LayoutId+" #ZPAtt_tabView #allowanceFooter").hide()):($(Attendance.Entry.LayoutId+" #ZPAtt_tabView #allowanceColumn").show(),$(Attendance.Entry.LayoutId+" #ZPAtt_tabView #allowanceFooter").show(),$(Attendance.Entry.LayoutId+" #ZPAtt_tabView #totalAllowanceAmt").text(Math.round(100*totalAllowance)/100)),$(Attendance.Entry.LayoutId+" #ZPAtt_tabView").parent().hasClass("tabcont")||ZPView.handleTablePosition();var colSpan=Attendance.Entry.allDataList.breakList.activeBreakCount?8:6;0===Attendance.Entry.allDataList.showOverDevTime?($(Attendance.Entry.LayoutId+" #ZPAtt_overDevInEntry").show(),colSpan+=1,$(Attendance.Entry.LayoutId+" #allowanceFooter th").eq(0).attr("colspan",colSpan)):($(Attendance.Entry.LayoutId+" #ZPAtt_overDevInEntry").hide(),$(Attendance.Entry.LayoutId+" #allowanceFooter th").eq(0).attr("colspan",colSpan)),Attendance.Entry.isViewAllowedForSub&&Attendance.Entry.isEditAllowedForSub&&Layout.Page.container.find("#ZPAtt_entry_importLI").show()}},addRegFromEntry:function(obj){ZPeople.BSModal.show($("#"+Layout.Page.pageId+" #ZPAtt_Entry_addRequest")),Attendance.Entry.showReqAddPopup(obj)},calObj:null,currMonth:null,currYear:null,showDayListCalendar:function(calObj){if($("#page-wrapper").attr("class","Nbar2"),void 0===calObj||null===calObj){-1!==Attendance.Entry.LayoutId.indexOf("attendance-entry-calendarview")&&($("#"+Layout.Page.pageId).find(".IC-ar-lft").off("click"),$("#"+Layout.Page.pageId).find(".IC-ar-rgt").off("click"));calObj=new NewCalendar.calObj;var month=Attendance.Entry.calendarAllDataList.currDate.MONTH,year=Attendance.Entry.calendarAllDataList.currDate.YEAR,mth=moment(year+"-"+Attendance.disTwoDigit(parseInt(month+1))+"-01").add(-1*Attendance.Entry.calendarPreMonth,"month")._d;calObj.curYear=mth.getFullYear(),calObj.curMonth=mth.getMonth(),calObj.calcontId="monthcalendardiv",calObj.outerdivId="ZPAtt_outerCont",calObj.daysObj={empty:"zpcalempty",weekend:"zpcalweek",day:"zpcaldays",today:"zpcaltoday",leave:"zpcalholi"},calObj.divid="ZPAtt_caldiv",calObj.callback=Attendance.Entry.consDataDaylistCalendar,calObj.mode="attendance",calObj.tdonclick=null,calObj.totaldata=!1,calObj.prearrow="IC-ar-lft",calObj.nextarrow="IC-ar-rgt",Attendance.Entry.calObj=calObj,null===Attendance.Entry.currMonth&&(Attendance.Entry.currYear=calObj.curYear,Attendance.Entry.currMonth=calObj.curMonth),NewCalendar.initCalendar(Attendance.Entry.calObj)}else NewCalendar.clearOldvalues(calObj,3,!0),Attendance.Entry.consDataDaylistCalendar(),Attendance.Entry.currYear=Attendance.Entry.calObj.curYear,Attendance.Entry.currMonth=Attendance.Entry.calObj.curMonth},returnLeaveColorClass:function(leaveTypes,defClass,leaveTypeLen,leaveName){for(var index=0;index<leaveTypeLen;index++){var leaveDet=leaveTypes[index];leaveName.includes(leaveDet.lName)&&(defClass=leaveDet.lColorCode)}return defClass},returnLeaveColorClass:function(leaveTypes,defClass,leaveTypeLen,leaveName){for(var index=0;index<leaveTypeLen;index++){var leaveDet=leaveTypes[index];leaveName.includes(leaveDet.lName)&&(defClass=leaveDet.lColorCode)}return defClass},consDataDaylistCalendar:function(){if(Layout.Page.container.find(".IC-ar-lft").attr("onclick","Attendance.Entry.setMonthsNavigation(1)"),Layout.Page.container.find(".IC-ar-rgt").attr("onclick","Attendance.Entry.setMonthsNavigation(-1)"),null!=Attendance.Entry.calendarAllDataList&&Attendance.Entry.calendarAllDataList.dayList){var dayList=Attendance.Entry.calendarAllDataList.dayList,resultDataList=new Array,leaveTypes=Attendance.Entry.leaveTypes,totLeave=leaveTypes.length;$.each(dayList,function(index,data){var rData={};rData.date=data.attDate.split("-")[2];var status="",txt="",stat=data.status;for(var k in stat=stat.split(", "))if("Weekend"!==(status=stat[k])){var statWithSesion=status;-1!=(sessionIndex=status.indexOf("$"))&&(status=status.slice(0,sessionIndex)+status.slice(status.indexOf("$",sessionIndex+1)+1));var hourBasedLeaveIndex=status.indexOf("#");-1!=hourBasedLeaveIndex&&(status=status.slice(0,hourBasedLeaveIndex)+status.slice(status.indexOf("#",hourBasedLeaveIndex+1)+1));var transStat=$("<div/>").text(Attendance.statusI18n(status)).html();transStat=Attendance.remCommaInLast(transStat);var sessionClass="",className="";if(-1===status.indexOf("Absent")||data.isToday?-1!==status.indexOf("Paid Leave")?className=Attendance.Entry.returnLeaveColorClass(leaveTypes,"LT6",totLeave,transStat):-1!==status.indexOf("On Duty")?className=Attendance.Entry.returnLeaveColorClass(leaveTypes,"LT3",totLeave,transStat):-1!==status.indexOf("Unpaid Leave")?className=Attendance.Entry.returnLeaveColorClass(leaveTypes,"Cl-absnt",totLeave,transStat):-1!==status.indexOf("Holiday")?className="Cl-hlday":-1!==status.indexOf("Present")&&-1===stat.indexOf("Absent")&&(className="Cl-prsnt"):0!==data.tsecs?txt+='<div class="ZPcalvw-month-item Cl-absnt"> <strong>Absent</strong> </div>':className="Cl-absnt",-1!==status.indexOf("0.25 day")||-1!==status.indexOf("0.5 day")){var sessionIndex,session=0;session=-1!==(sessionIndex=statWithSesion.indexOf("$"))&&"0"!==statWithSesion.slice(sessionIndex+1,sessionIndex+2)?statWithSesion.slice(sessionIndex+1,sessionIndex+2):-1===status.indexOf("Present")&&-1===status.indexOf("Absent")?data.session:void 0!==data.session?1==data.session?2:1:"",-1!==status.indexOf("0.25 day")?sessionClass=ZPCal.Calendar.getSessionClass(session):-1!==status.indexOf("0.5 day")&&(sessionClass=ZPCal.Calendar.getSessionClass(session,!0))}""!==className&&(transStat=Attendance.consLeaveStat(stat[k],!0,!0),txt+='<div class="ZPcalvw-month-item '+className+" "+(""!==sessionClass?" ZPcalvwlebor ":"")+'">',""!==sessionClass&&(txt+='<span class="ZPcalvwlebg '+sessionClass+'"></span>'),txt+='<strong title="'+transStat+'">'+transStat+"</strong> </div>")}if(data.totalPermissionHours&&"00:00"!=data.totalPermissionHours){var permissionDisp=ZPI18N.getString("zp.perm")+" - "+data.totalPermissionHours;txt+='<div class="ZPcalvw-month-item LT3"><strong title="'+permissionDisp+'">'+permissionDisp+"</strong></div>"}(txt=""==txt?$("<div></div>"):$(txt)).data("attDate",data.attDate),-1!==stat.toString().indexOf("Present")&&(void 0!==data.filo.ftime&&txt.data("ftime",data.filo.ftime),void 0!==data.filo.ttime&&txt.data("ttime",data.filo.ttime)),rData.txt=txt,resultDataList.push(rData)}),NewCalendar.populateData(Attendance.Entry.calObj,resultDataList)}},leftPositionCalc:function(time,date,orgDate){var time_hr=parseInt(time.slice(0,2),10),fromShift=Attendance.Entry.fromShiftTime,toShift=Attendance.Entry.toShiftTime;"AM"!==time.slice(6,8).trim()&&"am"!==time.slice(6,8).trim()||12!==time_hr?"PM"!==time.slice(6,8).trim()&&"pm"!==time.slice(6,8).trim()||12===time_hr||(time_hr+=12):time_hr=0;var time_min=parseInt(time.slice(3,5),10),temphour=time_hr-fromShift/60,per=(3600*temphour+60*time_min)/60/60/Attendance.Entry.shiftDiffTime*100,dateFormat=Attendance.Entry.allDataList.currDate.dateFormat.toUpperCase();return date=new Date(moment(date,dateFormat)._d),orgDate=new Date(moment(orgDate,dateFormat)._d),per<0&&fromShift>toShift&&60*time_hr<=toShift?per=(3600*(temphour+24)+60*time_min)/60/60/Attendance.Entry.shiftDiffTime*100:date.getTime()>orgDate.getTime()?per=101:date.getTime()<orgDate.getTime()&&(per=-1),per},getMonthReportForUser:function(){var param={mode:"getMonthReportForUser",conreqcsr:csrfToken};null!==Attendance.Entry.erecno&&(param.erecno=Attendance.Entry.erecno),param.view=Attendance.Entry.selectedView,param.preMonth=Attendance.Entry.preMonth,$.post("/AttendanceReportAction.zp",param,function(rdata){rdata.monthDetails?(Attendance.Entry.summaryForUserEntry=rdata.monthDetails,Attendance.Entry.setSummaryInUserEntry(rdata.showOverDevTime,rdata.isPermissionConfigured)):(Attendance.Entry.summaryForUserEntry=rdata.weekDetails,Attendance.Entry.setSummaryInUserEntry(rdata.showOverDevTime,rdata.isPermissionConfigured))})},setSummaryInUserEntry:function(showOTDT,isPermissionConfigured){var layout=Layout.Page.container,data=Attendance.Entry.summaryForUserEntry;$(Attendance.Entry.LayoutId+" #ZPAtt_presentCount").text(data.present_count+" "+ZPI18N.getString("zp.days")),$(Attendance.Entry.LayoutId+" #ZPAtt_onDutyCount").text(data.onduty_count+" "+ZPI18N.getString("zp.days")),$(Attendance.Entry.LayoutId+" #ZPAtt_leaveCount").text(data.leave_count+" "+ZPI18N.getString("zp.days")),$(Attendance.Entry.LayoutId+" #ZPAtt_holidayCount").text(data.holiday_count+" "+ZPI18N.getString("zp.days")),$(Attendance.Entry.LayoutId+" #ZPAtt_weekendCount").text(data.weekend_count+" "+ZPI18N.getString("zp.days")),data.isStatWeekendConfig?(Attendance.Entry.addStatWkndDays(layout.find("#ZPAtt_statWeekendCount"),data.statWkndCnt,data.custStatWknd_Name),Attendance.Entry.addStatWkndDays(layout.find("#ZPAtt_nonStatWeekendCount"),data.nonStatWkndCnt,data.custNonStatWknd_Name)):(layout.find("#ZPAtt_nonStatWeekendCount").closest(".Dtyps").addClass("DNI"),layout.find("#ZPAtt_statWeekendCount").closest(".Dtyps").addClass("DNI")),$(Attendance.Entry.LayoutId+" #ZPAtt_lopCount").text(data.lop_leave_count+" "+ZPI18N.getString("zp.days")),$(Attendance.Entry.LayoutId+" #ZPAtt_payDaysCount").text(data.totalPaidDays_count+" "+ZPI18N.getString("zp.days")),$(Attendance.Entry.LayoutId+" #ZPAtt_Rep_preDays").text(data.present_count+" "+ZPI18N.getString("zp.days")),$(Attendance.Entry.LayoutId+" #ZPAtt_Rep_ODDays").text(data.onduty_count+" "+ZPI18N.getString("zp.days")),$(Attendance.Entry.LayoutId+" #ZPAtt_Rep_leaveDays").text(data.leave_count+" "+ZPI18N.getString("zp.days")),$(Attendance.Entry.LayoutId+" #ZPAtt_Rep_holDays").text(data.holiday_count+" "+ZPI18N.getString("zp.days")),$(Attendance.Entry.LayoutId+" #ZPAtt_Rep_wkndDays").text(data.weekend_count+" "+ZPI18N.getString("zp.days")),$(Attendance.Entry.LayoutId+" #ZPAtt_Rep_LOPDays").text(data.lop_leave_count+" "+ZPI18N.getString("zp.days")),$(Attendance.Entry.LayoutId+" #ZPAtt_Rep_payDays").text(data.totalPaidDays_count+" "+ZPI18N.getString("zp.days")),data.isStatWeekendConfig?(Attendance.Entry.addStatWkndDays(layout.find("#ZPAtt_Rep_statWkndDays"),data.statWkndCnt,data.custStatWknd_Name),Attendance.Entry.addStatWkndDays(layout.find("#ZPAtt_Rep_nonStatWkndDays"),data.nonStatWkndCnt,data.custNonStatWknd_Name)):(layout.find("#ZPAtt_Rep_statWkndDays").closest(".Dtyps").addClass("DNI"),layout.find("#ZPAtt_Rep_nonStatWkndDays").closest(".Dtyps").addClass("DNI")),data.tsecs<0?($(Attendance.Entry.LayoutId+" #ZPAtt_totalhours").text(ZPI18N.getString("zp.na")),$(Attendance.Entry.LayoutId+" #ZPAtt_Rep_ttlHrs").text(ZPI18N.getString("zp.na"))):($(Attendance.Entry.LayoutId+" #ZPAtt_totalhours").text(Attendance.disHours(data.tsecs/60)+" "+ZPI18N.getString("zp.hrs")),$(Attendance.Entry.LayoutId+" #ZPAtt_Rep_ttlHrs").text(Attendance.disHours(data.tsecs/60)+" "+ZPI18N.getString("zp.hrs"))),$(Attendance.Entry.LayoutId+" #ZPAtt_totalWorkingHours").text(Attendance.disHours(data.workingHours_tsecs/60)+" "+ZPI18N.getString("zp.hrs")),$(Attendance.Entry.LayoutId+" #ZPAtt_totalOnDutyHours").text(Attendance.disHours(data.ondutysecs/60)+" "+ZPI18N.getString("zp.hrs")),$(Attendance.Entry.LayoutId+" #ZPAtt_totalLeaveHours").text(Attendance.disHours(data.leavesecs/60)+" "+ZPI18N.getString("zp.hrs")),$(Attendance.Entry.LayoutId+" #ZPAtt_totalHolidayHours").text(Attendance.disHours(data.totalHolidayDaysInSecs/60)+" "+ZPI18N.getString("zp.hrs")),$(Attendance.Entry.LayoutId+" #ZPAtt_totalWeekendHours").text(Attendance.disHours(data.regWeekendHours/60)+" "+ZPI18N.getString("zp.hrs")),data.isStatWeekendConfig?(Attendance.Entry.addStatWkndHrs(layout.find("#ZPAtt_statWeekendHours"),data.totalStatWkndHrs,data.custStatWknd_Name),Attendance.Entry.addStatWkndHrs(layout.find("#ZPAtt_nonStatWeekendHours"),data.totalNonStatWkndHrs,data.custNonStatWknd_Name)):(layout.find("#ZPAtt_nonStatWeekendHours").closest(".Dtyps").addClass("DNI"),layout.find("#ZPAtt_statWeekendHours").closest(".Dtyps").addClass("DNI")),$(Attendance.Entry.LayoutId+" #ZPAtt_Rep_preHrs").text(Attendance.disHours(data.workingHours_tsecs/60)+" "+ZPI18N.getString("zp.hrs")),$(Attendance.Entry.LayoutId+" #ZPAtt_Rep_ODHrs").text(Attendance.disHours(data.ondutysecs/60)+" "+ZPI18N.getString("zp.hrs")),$(Attendance.Entry.LayoutId+" #ZPAtt_Rep_leaveHrs").text(Attendance.disHours(data.leavesecs/60)+" "+ZPI18N.getString("zp.hrs")),$(Attendance.Entry.LayoutId+" #ZPAtt_Rep_HolHrs").text(Attendance.disHours(data.totalHolidayDaysInSecs/60)+" "+ZPI18N.getString("zp.hrs")),$(Attendance.Entry.LayoutId+" #ZPAtt_Rep_wkndHrs").text(Attendance.disHours(data.regWeekendHours/60)+" "+ZPI18N.getString("zp.hrs")),data.isStatWeekendConfig?(Attendance.Entry.addStatWkndHrs(layout.find("#ZPAtt_Rep_statWkndHrs"),data.totalStatWkndHrs,data.custStatWknd_Name),Attendance.Entry.addStatWkndHrs(layout.find("#ZPAtt_Rep_nonStatWkndHrs"),data.totalNonStatWkndHrs,data.custNonStatWknd_Name)):(layout.find("#ZPAtt_Rep_nonStatWkndHrs").closest(".Dtyps").addClass("DNI"),layout.find("#ZPAtt_Rep_statWkndHrs").closest(".Dtyps").addClass("DNI")),$(Attendance.Entry.LayoutId+" #ZPAtt_Rep_LOPHrs").text(Attendance.disHours(data.lop_leave_secs/60)+" "+ZPI18N.getString("zp.hrs")),0===showOTDT?($(Attendance.Entry.LayoutId+" #ZPAtt_Rep_OTHrs").text(Attendance.disHours(data.overTime_tsecs/60)+" "+ZPI18N.getString("zp.hrs")).parent().show(),$(Attendance.Entry.LayoutId+" #ZPAtt_Rep_DTHrs").parent().show()):($(Attendance.Entry.LayoutId+" #ZPAtt_Rep_OTHrs").parent().hide(),$(Attendance.Entry.LayoutId+" #ZPAtt_Rep_DTHrs").parent().hide()),Layout.Page.container.find("[id='ZPAtt_Rep_showHidePaidBreak']").hide(),Layout.Page.container.find("[id='ZPAtt_Rep_showHideUnpaidBreak']").hide();var breakDispDetails=Attendance.Entry.allDataList.breakList.breakDispDetails;breakDispDetails.isBreakConf&&(breakDispDetails.isPaidBrkDispNeed&&(Layout.Page.container.find("[id='ZPAtt_Rep_showHidePaidBreak']").show(),Layout.Page.container.find("[id='ZPAtt_Rep_BreakHrs']").text(data.totalPaidBreakHours+" "+ZPI18N.getString("zp.hrs"))),breakDispDetails.isUnpaidBrkDispNeed&&(Layout.Page.container.find("[id='ZPAtt_Rep_showHideUnpaidBreak']").show(),Layout.Page.container.find("[id='ZPAtt_Rep_BreakExtnHrs']").text(data.totalUnPaidBreakHours+" "+ZPI18N.getString("zp.hrs")))),$(Attendance.Entry.LayoutId+" #ZPAtt_Rep_showHidePermission").hide(),isPermissionConfigured&&($(Attendance.Entry.LayoutId+" #ZPAtt_Rep_showHidePermission").show(),$(Attendance.Entry.LayoutId+" #ZPAtt_Rep_PermissionHrs").text(data.totalPermissionHours+" "+ZPI18N.getString("zp.hrs"))),$(Attendance.Entry.LayoutId+" #ZPAtt_totalPayHours").text(Attendance.disHours(data.totalPayDaysInSecs/60)+" "+ZPI18N.getString("zp.hrs")),$(Attendance.Entry.LayoutId+" #ZPAtt_Rep_payHrs").text(Attendance.disHours(data.totalPayDaysInSecs/60)+" "+ZPI18N.getString("zp.hrs")),Attendance.Entry.setAbsentInSummary()},addStatWkndDays:function(ele,days,custName){ele.closest(".Dtyps").removeClass("DNI"),ele.text(days+" "+ZPI18N.getString("zp.days")),ele.closest(".Dtyps").children().eq(0).text(custName)},addStatWkndHrs:function(ele,hrs,custName){ele.closest(".Dtyps").removeClass("DNI"),ele.text(Attendance.disHours(hrs/60)+" "+ZPI18N.getString("zp.hrs")),ele.closest(".Dtyps").children().eq(0).text(custName)},setAbsentInSummary:function(){if(Attendance.Entry.summaryForUserEntry&&Attendance.Entry.allDataList){var sumAbsent=Attendance.Entry.summaryForUserEntry.absent_count,sumAbsentHrs=Attendance.Entry.summaryForUserEntry.totalAbsentDaysInSecs,dayList=Attendance.Entry.allDataList.dayList,sameShiftInRange=!0,shiftIdForChking="";for(var i in dayList)"0"===i?shiftIdForChking=dayList[i].shift.shiftId:shiftIdForChking!==dayList[i].shift.shiftId&&(sameShiftInRange=!1);if(Layout.Page.container.find(".well.ZPDat").find("span.SfTxt").remove(),sameShiftInRange&&""!==shiftIdForChking){var shiftDetails=Shift.getShiftName(shiftIdForChking,!0,!1);Layout.Page.container.find(".well.ZPDat").prepend('<span class="SfTxt"><font class="ellipsis W100" data-placement="left" data-toggle="tooltip" data-original-title="'+shiftDetails.shiftName+'">'+shiftDetails.shiftName+'</font><time class="DB">[ '+shiftDetails.timeInterval+" ]</time></span>")}$(Attendance.Entry.LayoutId+" #ZPAtt_Rep_DTHrs").text(Attendance.disHours((sumAbsentHrs-0)/60)+" "+ZPI18N.getString("zp.hrs")),$(Attendance.Entry.LayoutId+" #ZPAtt_absentCount").text(Math.round(1e3*(sumAbsent-0))/1e3+" "+ZPI18N.getString("zp.days")),$(Attendance.Entry.LayoutId+" #ZPAtt_Rep_absDays").text(Math.round(1e3*(sumAbsent-0))/1e3+" "+ZPI18N.getString("zp.days"))}},setSummaryInEntry:function(){var absent=0,present=0,weekend=0,paidLeave=0,unPaidLeave=0,onDuty=0,holiday=0,toil=0,totalHours=0,workingHours=0,toilHours=0,onDutyHours=0,paidHours=0,unPaidHours=0,overTime=0,deviationTime=0,fullDay=60*Attendance.Entry.allDataList.fullday,halfDay=60*Attendance.Entry.allDataList.halfday,quarterDay=halfDay/2;for(var i in Attendance.Entry.allDataList.dayList){var daylist=Attendance.Entry.allDataList.dayList[i],leaveDaysTaken=daylist.leaveDaysTaken,status=daylist.status,wsecs=daylist.wsecs;workingHours+=wsecs,"Absent"===status||daylist.leaveHours&&-1===status.indexOf("Present")&&-1===status.indexOf("Holiday")&&-1===status.indexOf("Weekend")&&-1===status.indexOf("1/2 day")&&-1===status.indexOf("1/4 day")&&-1===status.indexOf("3/4 day")||-1!==status.indexOf("(Restricted Holiday)")&&-1!==status.indexOf("Absent")&&-1===status.indexOf("1/2 day Absent")&&-1===status.indexOf("1/4 day Absent")?absent+=1:-1!==status.indexOf("1/2 day Absent")||daylist.leaveHours&&(-1!==status.indexOf("1/2 day Present")&&-1===status.indexOf("Holiday")||-1!==status.indexOf("(1/2 day Holiday)")&&-1===status.indexOf("Present")||-1===status.indexOf("Holiday")&&-1!==status.indexOf("1/2")&&-1===status.indexOf("Present"))?absent+=.5:-1!==status.indexOf("1/4 day Absent")?absent+=.25:-1!==status.indexOf("3/4 day Absent")&&(absent+=.75),-1!==status.indexOf("1/2 day Paid Leave")?(paidLeave+=.5,-1!==status.indexOf("1/4 day Paid Leave")&&(paidLeave+=.25)):-1!==status.indexOf("1/4 day Paid Leave")?paidLeave+=.25:-1!==status.indexOf("3/4 day Paid Leave")?paidLeave+=.75:-1===status.indexOf("Paid Leave")||daylist.leaveHours||(paidLeave+=1),-1!==status.indexOf("1/2 day Unpaid Leave")?(unPaidLeave+=.5,-1!==status.indexOf("1/4 day Unpaid Leave")&&(unPaidLeave+=.25)):-1!==status.indexOf("1/4 day Unpaid Leave")?unPaidLeave+=.25:-1!==status.indexOf("3/4 day Unpaid Leave")?unPaidLeave+=.75:-1===status.indexOf("Unpaid Leave")||daylist.leaveHours||(unPaidLeave+=1),-1!==status.indexOf("1/2 day On Duty")?(onDuty+=.5,-1!==status.indexOf("1/4 day On Duty")&&(onDuty+=.25)):-1!==status.indexOf("1/4 day On Duty")?onDuty+=.25:-1!==status.indexOf("3/4 day On Duty")?onDuty+=.75:-1===status.indexOf("On Duty")||daylist.leaveHours||(onDuty+=1),-1!==status.indexOf("Weekend")&&(weekend+=1,leaveDaysTaken=1),-1!==status.indexOf("1/2 day Holiday")?(holiday+=.5,leaveDaysTaken+=.5):-1===status.indexOf("(Holiday)")&&-1===status.indexOf("(Restricted)")||(holiday+=1,leaveDaysTaken=1),1===leaveDaysTaken&&(workingHours-=wsecs,toilHours+=wsecs),-1!==status.indexOf("1/2 day Toil")?toil+=.5:-1!==status.indexOf("1/4 day Toil")?toil+=.25:-1!==status.indexOf("3/4 day Toil")?toil+=.75:-1!==status.indexOf("Toil")&&(toil+=1),-1!==status.indexOf("1/2 day Present")?1!==leaveDaysTaken&&(present+=.5,.5===leaveDaysTaken&&halfDay<=wsecs&&(toilHours+=wsecs-halfDay,workingHours-=wsecs-halfDay)):-1!==status.indexOf("1/4 day Present")?1!==leaveDaysTaken&&(present+=.25,.75===leaveDaysTaken&&quarterDay<=wsecs&&(toilHours+=wsecs-quarterDay,workingHours-=wsecs-quarterDay)):-1!==status.indexOf("3/4 day Present")?1!==leaveDaysTaken&&(present+=.75,.25===leaveDaysTaken&&quarterDay+halfDay<=wsecs&&(toilHours+=wsecs-(quarterDay+halfDay),workingHours-=wsecs-(quarterDay+halfDay))):-1!==status.indexOf("Present")&&1!==leaveDaysTaken&&(present+=1),totalHours+=daylist.tsecs,void 0!==daylist.overTime_tsecs?overTime+=daylist.overTime_tsecs:void 0!==daylist.devTime_tsecs&&(deviationTime+=daylist.devTime_tsecs),void 0!==daylist.paidLeaveHours&&(paidHours+=daylist.paidLeaveHours),void 0!==daylist.unPaidLeaveHours&&(unPaidHours+=daylist.unPaidLeaveHours),void 0!==daylist.onDutyLeaveHours&&(onDutyHours+=daylist.onDutyLeaveHours)}var payDaysCount=present+onDuty,payHrsCount=workingHours+onDutyHours,payPeriodSettings=Attendance.Entry.allDataList.payDaysSettings;0===payPeriodSettings.InclHoliday&&(payDaysCount+=holiday,payHrsCount+=holiday*fullDay),0===payPeriodSettings.InclPaidLeave&&(payDaysCount+=paidLeave,payHrsCount+=paidHours),0===payPeriodSettings.InclWeekend&&(payDaysCount+=weekend,payHrsCount+=weekend*fullDay),$(Attendance.Entry.LayoutId+" #ZPAtt_presentCount").text(present+" "+ZPI18N.getString("zp.days")),$(Attendance.Entry.LayoutId+" #ZPAtt_offPresentCount").text(toil+" "+ZPI18N.getString("zp.days")),$(Attendance.Entry.LayoutId+" #ZPAtt_onDutyCount").text(onDuty+" "+ZPI18N.getString("zp.days")),$(Attendance.Entry.LayoutId+" #ZPAtt_leaveCount").text(paidLeave+" "+ZPI18N.getString("zp.days")),$(Attendance.Entry.LayoutId+" #ZPAtt_holidayCount").text(holiday+" "+ZPI18N.getString("zp.days")),$(Attendance.Entry.LayoutId+" #ZPAtt_weekendCount").text(weekend+" "+ZPI18N.getString("zp.days")),$(Attendance.Entry.LayoutId+" #ZPAtt_absentCount").text(absent+" "+ZPI18N.getString("zp.days")),$(Attendance.Entry.LayoutId+" #ZPAtt_lopCount").text(unPaidLeave+" "+ZPI18N.getString("zp.days")),$(Attendance.Entry.LayoutId+" #ZPAtt_payDaysCount").text(payDaysCount+" "+ZPI18N.getString("zp.days")),totalHours<0?$(Attendance.Entry.LayoutId+" #ZPAtt_totalhours").text(ZPI18N.getString("zp.na")):$(Attendance.Entry.LayoutId+" #ZPAtt_totalhours").text(Attendance.disHours(totalHours/60)+" "+ZPI18N.getString("zp.hrs")),$(Attendance.Entry.LayoutId+" #ZPAtt_totalWorkingHours").text(Attendance.disHours(workingHours/60)+" "+ZPI18N.getString("zp.hrs")),$(Attendance.Entry.LayoutId+" #ZPAtt_totalOffWorkingHours").text(Attendance.disHours(toilHours/60)+" "+ZPI18N.getString("zp.hrs")),$(Attendance.Entry.LayoutId+" #ZPAtt_totalOnDutyHours").text(Attendance.disHours(onDutyHours/60)+" "+ZPI18N.getString("zp.hrs")),$(Attendance.Entry.LayoutId+" #ZPAtt_totalLeaveHours").text(Attendance.disHours(paidHours/60)+" "+ZPI18N.getString("zp.hrs")),$(Attendance.Entry.LayoutId+" #ZPAtt_totalLOPHours").text(Attendance.disHours(unPaidHours/60)+" "+ZPI18N.getString("zp.hrs")),$(Attendance.Entry.LayoutId+" #ZPAtt_totalPayHours").text(Attendance.disHours(payHrsCount/60)+" "+ZPI18N.getString("zp.hrs")),0===Attendance.Entry.allDataList.showOverDevTime?($(Attendance.Entry.LayoutId+" #ZPAtt_totalOTHours").text(Attendance.disHours(overTime/60)+" "+ZPI18N.getString("zp.hrs")).parent().parent().show(),$(Attendance.Entry.LayoutId+" #ZPAtt_totalDTHours").text(Attendance.disHours(deviationTime/60)+" "+ZPI18N.getString("zp.hrs")).parent().parent().show()):($(Attendance.Entry.LayoutId+" #ZPAtt_totalOTHours").parent().parent().hide(),$(Attendance.Entry.LayoutId+" #ZPAtt_totalDTHours").parent().parent().hide())},capturePhotoInfo:function(){var msg=ZPI18N.getString("zp.enablecameraforpunchesboth");return Attendance.isAllowToVerifyUserInWeb&&!Attendance.isAllowToCapturePhotoInWeb&&(msg=ZPI18N.getString("zp.enablecameraforpunchesverify")),'<i class="IC-info gry ML10 popHover" data-popover="true" data-html="true" data-original-title="" title="" data-content="'+("<p class='LH18I' style='font-family:LatoWeb;'>"+msg+"</p>")+'"></i>'},openTakePhotoPopup:function(latLanObj,isCheckIn){navigator.mediaDevices.getUserMedia({video:!0,audio:!1}).then(function(stream){var modal="<div class='zp_mdl mdl_cntr top fc_Recg in' id='ZPAtt_PhotoCaptureModal' aria-hidden='false' data-backdrop='static' data-keyboard='false'>";modal+="<div class='zp_mdl-dlg'><div class='zp_mdl-cnt'><div class='zp_mdl-hdr'><h6></h6>",modal+="<button aria-label='Close' data-dismiss='modal' class='close' type='button'><span aria-hidden='true'><div class='IC-cls-1px red S21 CP'></div></span></button></div>",modal+="<div class='zp_mdl-bdy' style='overflow: hidden;'>",modal+="<video id='ZPAtt_PhotoCapture_VideoPrev'>Video stream not available</video>",modal+="<img id='ZPAtt_PhotoCapture_output'><canvas id='ZPAtt_PhotoCaptureCanvas' style='display:none'></canvas>",modal+="<div class='fc_actn'><div class='cm_on' style='display: flex;'><i class='CR-camera' id='ZPAtt_PhotoCaptureButton'></i></div>",modal+="<div class='cm_ok'><i class='IC-tick' id='ZPAtt_PhotoCaptureProceed'></i>",modal+="<i class='CR-camera' id='ZPAtt_PhotoCaptureReTake'></i></div></div></div></div></div></div>",$("body").find("#ZPAtt_PhotoCaptureModal")[0]||$("body").append(modal);var layout=$("#ZPAtt_PhotoCaptureModal");layout.modal("show"),layout.on("hidden.bs.modal",function(){Attendance.Entry.onPhotoCaptureHide(isCheckIn)}),layout.find("h6").html(ZPI18N.getString("zp.capturephoto")+" "+Attendance.Entry.capturePhotoInfo()),layout.popover({selector:"[data-popover].popHover",trigger:"click hover",delay:{show:50,hide:50}});var videoPrev=layout.find("#ZPAtt_PhotoCapture_VideoPrev");videoPrev.css("width",videoPrev.parent().width()),videoPrev.css("transform","rotateY(180deg)"),videoPrev.css("-webkit-transform","rotateY(180deg)"),videoPrev.css("-moz-transform","rotateY(180deg)");var vdo=videoPrev[0];vdo.srcObject=stream,vdo.play(),layout.find("#ZPAtt_PhotoCaptureProceed").parent().hide(),layout.find("#ZPAtt_PhotoCaptureProceed").data("latLanObj",latLanObj),layout.find("#ZPAtt_PhotoCaptureProceed").data("isCheckIn",isCheckIn),layout.find("#ZPAtt_PhotoCaptureButton").on("click",function(){Attendance.Entry.takePicture()}),layout.find("#ZPAtt_PhotoCaptureReTake").on("click",function(){Attendance.Entry.reTakePicture()}),videoPrev.show(),layout.find("#ZPAtt_PhotoCapture_output").hide()}).catch(function(err){Attendance.Entry.onPhotoCaptureHide(isCheckIn,!0),-1===err.toString().indexOf("Requested device not found")?Attendance.isAllowToCapturePhotoInWeb?ZPeople.Message.showFailureMsg(ZPI18N.getString("zp.youneedtocapturephoto")):Attendance.isAllowToVerifyUserInWeb&&ZPeople.Message.showFailureMsg(ZPI18N.getString("zp.youneedtoverifyphoto")):Attendance.isAllowToCapturePhotoInWeb?ZPeople.Message.showFailureMsg(ZPI18N.getString("zp.notsupporttocapturephoto")):Attendance.isAllowToVerifyUserInWeb&&ZPeople.Message.showFailureMsg(ZPI18N.getString("zp.notsupporttoverifyphoto"))})},playVideo:function(){var vdo=$("#ZPAtt_PhotoCaptureModal").find("#ZPAtt_PhotoCapture_VideoPrev")[0];navigator.mediaDevices.getUserMedia({video:!0,audio:!1}).then(function(stream){vdo.srcObject=stream,vdo.play()}).catch(function(err){-1===err.toString().indexOf("Requested device not found")?Attendance.isAllowToCapturePhotoInWeb?ZPeople.Message.showFailureMsg(ZPI18N.getString("zp.youneedtocapturephoto")):Attendance.isAllowToVerifyUserInWeb&&ZPeople.Message.showFailureMsg(ZPI18N.getString("zp.youneedtoverifyphoto")):Attendance.isAllowToCapturePhotoInWeb?ZPeople.Message.showFailureMsg(ZPI18N.getString("zp.notsupporttocapturephoto")):Attendance.isAllowToVerifyUserInWeb&&ZPeople.Message.showFailureMsg(ZPI18N.getString("zp.notsupporttoverifyphoto"))})},onPhotoCaptureHide:function(isCheckIn,isFromError){if(isFromError||(Attendance.Entry.stopMediaPlay(),$("#ZPAtt_PhotoCaptureModal").remove()),Attendance.getCurrPositionTriggered=!1,$(Attendance.Entry.LayoutId+" #ZPAtt_listViewEntries").is(":visible")){var inOutBut=Layout.Page.container.find("#ZPAtt_check_in_out");isCheckIn?(inOutBut.on("click",function(){Attendance.Entry.punchIn()}),inOutBut.find("svg").hide(),inOutBut.find(".SP-timelg").show()):(inOutBut.on("click",function(){Attendance.Entry.punchOut()}),inOutBut.find("svg").hide(),inOutBut.find(".SP-timelg").show(),inOutBut.find(".timelg-img").show())}else{var dashlay=$(Attendance.Dashboard.pageLayout());if(!dashlay.find("#ZPD_Top_Att_Stat").is(":visible"))return;dashlay.find('[name="ATTENDANCE"] #ZPAtt_Dash_CurrDate')[0]&&Attendance.Dashboard.WeeklyData.getCurWeekData(),dashlay.find("#ZPD_Top_Att_Stat")[0]&&Attendance.Dashboard.CurrStatus.getCurrDayStatus()}},takePicture:function(){var layout=$("#ZPAtt_PhotoCaptureModal"),video=layout.find("#ZPAtt_PhotoCapture_VideoPrev")[0],canvas=layout.find("#ZPAtt_PhotoCaptureCanvas")[0],photo=layout.find("#ZPAtt_PhotoCapture_output")[0],width=video.videoWidth,height=video.videoHeight,context=canvas.getContext("2d");canvas.width=width,canvas.height=height,context.translate(width,0),context.scale(-1,1),context.drawImage(video,0,0);var data=canvas.toDataURL("image/png");photo.setAttribute("src",data),layout.find("#ZPAtt_PhotoCapture_VideoPrev").hide(),layout.find("#ZPAtt_PhotoCapture_output").show(),Attendance.Entry.stopMediaPlay(),layout.find("#ZPAtt_PhotoCaptureProceed").unbind("click").bind("click",function(){Attendance.Entry.preceedPunches(data)}),layout.find("#ZPAtt_PhotoCaptureProceed").parent().show(),layout.find("#ZPAtt_PhotoCaptureButton").parent().hide(),layout.find("h6").html(ZPI18N.getString("zp.capturedphoto")+" "+Attendance.Entry.capturePhotoInfo()),layout.popover({selector:"[data-popover].popHover",trigger:"click hover",delay:{show:50,hide:50}})},reTakePicture:function(){var layout=$("#ZPAtt_PhotoCaptureModal");layout.find("#ZPAtt_PhotoCapture_VideoPrev").show(),layout.find("#ZPAtt_PhotoCapture_output").hide(),layout.find("#ZPAtt_PhotoCaptureProceed").parent().hide(),layout.find("#ZPAtt_PhotoCaptureButton").parent().show(),layout.find("h6").html(ZPI18N.getString("zp.capturephoto")+" "+Attendance.Entry.capturePhotoInfo()),layout.popover({selector:"[data-popover].popHover",trigger:"click hover",delay:{show:50,hide:50}}),Attendance.Entry.playVideo()},preceedPunches:function(data){var layout=$("#ZPAtt_PhotoCaptureModal"),latLanObj=layout.find("#ZPAtt_PhotoCaptureProceed").data("latLanObj");layout.find("#ZPAtt_PhotoCaptureProceed").data("isCheckIn")?Attendance.Entry.punchIn(latLanObj,data):Attendance.Entry.punchOut(latLanObj,data),$("#ZPAtt_PhotoCaptureModal").siblings(".modal-backdrop").remove(),$("#ZPAtt_PhotoCaptureModal").remove(),Attendance.isAllowToVerifyUserInWeb&&Attendance.Entry.openPhotoComparingPopup(data)},stopMediaPlay:function(){$("#ZPAtt_PhotoCaptureModal").find("#ZPAtt_PhotoCapture_VideoPrev")[0].srcObject.getTracks().forEach(function(track){track.stop()})},openPhotoComparingPopup:function(imageObj,isCheckIn,failureMsg,latLong){if(!imageObj){if($("#ZPAtt_PhotoComparingPopup .zp_mdl-hdr").append('<button id="NClose" aria-label="Close" data-dismiss="modal" class="close" type="button"><span aria-hidden="true"><div class="IC-cls-1px red S21 CP"></div></span></button></div>'),failureMsg)return $("#ZPAtt_PhotoComparingTitle").html(ZPI18N.getString("zp.photomismatch")+"<span>"+failureMsg+"</span>"),$("#ZPAtt_statusIcon").html('<div class="dot"></div><div class="stsicn"><i class="IC-cls-1px"></i></div><div class="dot"></div>'),$("#ZPAtt_statusIcon").addClass("msmtch"),$("#ZPAtt_PhotoComparingPopup .zp_mdl-bdy").append('<div class="text-center MT25"><button class="btn btn-primary" id="ZPAtt_comparingRetake">'+ZPI18N.getString("zp.retake")+"</button></div>"),void $("#ZPAtt_comparingRetake").on("click",function(){$("#ZPAtt_PhotoComparingPopup").modal("hide"),Attendance.Entry.openTakePhotoPopup(latLong,isCheckIn)});var headMsg=isCheckIn?ZPI18N.getString("zp.checkinsuccess"):ZPI18N.getString("zp.checkoutsuccess");$("#ZPAtt_PhotoComparingTitle").html(headMsg+"<span>"+ZPI18N.getString("zp.photomatched")+"</span>"),$("#ZPAtt_statusIcon").html('<div class="dot"></div><div class="stsicn"><i class="IC-tick"></i></div><div class="dot"></div>');var bottommsg='<div class="text-center MT25 red"><span>'+ZPI18N.getString("zp.checkedout",new Array(""))+"</span>";return isCheckIn&&(bottommsg='<div class="text-center MT25 grn"><span>'+ZPI18N.getString("zp.checkedin",new Array(""))+"</span>"),$("#ZPAtt_PhotoComparingPopup .zp_mdl-bdy").append(bottommsg),void setTimeout(function(){$("#ZPAtt_PhotoComparingPopup").modal("hide")},3e3)}var popup='<div class="zp_mdl mdl_cntr top fc_vrfyPop" id="ZPAtt_PhotoComparingPopup" aria-hidden="false" data-backdrop="static" data-keyboard="false"><div class="zp_mdl-dlg"><div class="zp_mdl-cnt">';popup+='<div class="zp_mdl-hdr"><h6 class="addPopTitle" id=ZPAtt_PhotoComparingTitle>'+ZPI18N.getString("zp.scanning")+"<span>"+ZPI18N.getString("zp.verifyingphoto")+"</span></h6>",popup+='<div class="zp_mdl-bdy"><div class="fc_match"><div class="fc_matpic"><img src="'+ZPeople.CURR_USER.avatar+'"></div>',popup+='<div class="fc_matsts" id="ZPAtt_statusIcon"></div>',popup+='<div class="fc_matpic"><img src="'+imageObj+'"></div></div>',popup+="</div></div></div></div>",$("body").find("#ZPAtt_PhotoComparingPopup")[0]||$("body").append(popup);var layout=$("#ZPAtt_PhotoComparingPopup");layout.modal("show"),layout.on("hidden.bs.modal",function(){$("#ZPAtt_PhotoComparingPopup").remove()})},base64ToBlob:function(base64,mime){mime=mime||"";for(var byteChars=atob(base64),byteArrays=[],offset=0,len=byteChars.length;offset<len;offset+=1024){for(var slice=byteChars.slice(offset,offset+1024),byteNumbers=new Array(slice.length),i=0;i<slice.length;i++)byteNumbers[i]=slice.charCodeAt(i);var byteArray=new Uint8Array(byteNumbers);byteArrays.push(byteArray)}return new Blob(byteArrays,{type:mime})},getGeoForCheckIn:function(position){Attendance.Entry.getLatLangFromGeo(position,!0)},geoErrForCheckIn:function(error){Attendance.Entry.errorForgetLatLang(error,!0)},getGeoForCheckOut:function(position){Attendance.Entry.getLatLangFromGeo(position)},geoErrForCheckOut:function(error){Attendance.Entry.errorForgetLatLang(error)},getLatLangFromGeo:function(position,isCheckin){var obj={};obj.latitude=position.coords.latitude,obj.longitude=position.coords.longitude,obj.accuracy=position.coords.accuracy,isCheckin?Attendance.Entry.punchIn(obj):Attendance.Entry.punchOut(obj)},errorForgetLatLang:function(error,isCheckin){var err=!1;error.code&&(err=!0),isCheckin?Attendance.Entry.punchIn(err):Attendance.Entry.punchOut(err)},storeLatLongInLStore:function(param){if("undefined"!=typeof Storage){var locStorOfLatLon={};locStorOfLatLon.latitude=param.latitude,locStorOfLatLon.longitude=param.longitude,locStorOfLatLon.accuracy=param.accuracy,locStorOfLatLon.fetchedTime=(new Date).getTime(),localStorage.setItem("att_LatLonDet",JSON.stringify(locStorOfLatLon))}},latLongParam:null,punchIn:function(latLanObj,imageObj){var inOutBut=Layout.Page.container.find("#ZPAtt_check_in_out");inOutBut.off("click"),inOutBut.find("svg").show(),inOutBut.find(".SP-timelg").hide(),inOutBut.find(".timelg-img").hide();var formData=new FormData;formData.append("conreqcsr",csrfToken),formData.append("urlMode",Layout.Page.urlmode);var lastGenLatLon=null;if("undefined"!=typeof Storage&&null!==localStorage.getItem("att_LatLonDet")){var latLonObj=JSON.parse(localStorage.getItem("att_LatLonDet")),lastFetTime=latLonObj.fetchedTime;(new Date).getTime()-lastFetTime<=12e4&&(lastGenLatLon=latLonObj)}var latLonparam={};if(void 0!==Attendance.isTrackLocationEnabled&&Attendance.isTrackLocationEnabled){if(navigator.geolocation&&void 0===latLanObj&&null===lastGenLatLon){if(!Attendance.getCurrPositionTriggered){Attendance.getCurrPositionTriggered=!0;var extraParam={maximumAge:12e4};void 0===Attendance.isWebCoOrdMandatory||Attendance.isWebCoOrdMandatory||isGeoEnabledAtt?extraParam.timeout=15e3:extraParam.timeout=1e4,navigator.geolocation.getCurrentPosition(Attendance.Entry.getGeoForCheckIn,Attendance.Entry.geoErrForCheckIn,extraParam)}return}(void 0!==latLanObj&&"object"==typeof latLanObj&&0!==Object.keys(latLanObj).length&&latLanObj.latitude&&latLanObj.longitude||null!==lastGenLatLon)&&(null!==lastGenLatLon?(formData.append("latitude",lastGenLatLon.latitude),formData.append("longitude",lastGenLatLon.longitude),formData.append("accuracy",lastGenLatLon.accuracy),latLonparam.latitude=lastGenLatLon.latitude,latLonparam.longitude=lastGenLatLon.longitude,latLonparam.accuracy=lastGenLatLon.accuracy):(formData.append("latitude",latLanObj.latitude),formData.append("longitude",latLanObj.longitude),formData.append("accuracy",latLanObj.accuracy),latLonparam.latitude=latLanObj.latitude,latLonparam.longitude=latLanObj.longitude,latLonparam.accuracy=latLanObj.accuracy,Attendance.Entry.storeLatLongInLStore(latLonparam)))}if(!Attendance.isAllowToCapturePhotoInWeb&&!Attendance.isAllowToVerifyUserInWeb||void 0!==imageObj){if(imageObj){var base64ImageContent=imageObj.replace(/^data:image\/(png|jpg);base64,/,""),blob=Attendance.Entry.base64ToBlob(base64ImageContent,"image/png");formData.append("userImage",blob,"userImage.png")}Attendance.Entry.reloadFromWMS=!1,$(Attendance.Entry.LayoutId+" #ZPAtt_checkInOutDesc").is(":visible")&&""!==$(Attendance.Entry.LayoutId+" #ZPAtt_checkInOutDesc").val().trim()?(formData.append("desc_in",$(Attendance.Entry.LayoutId+" #ZPAtt_checkInOutDesc").val()),$(Attendance.Entry.LayoutId+" #ZPAtt_checkInOutDesc").val("")):$("#ZPAtt_Dash_checkinNotes").is(":visible")&&""!==$("#ZPAtt_Dash_checkinNotes").val().trim()&&formData.append("desc_in",$("#ZPAtt_Dash_checkinNotes").val().trim()),$.ajax({url:"/AttendanceAction.zp?mode=punchIn",type:"POST",data:formData,contentType:!1,processData:!1,success:function(rdata){Attendance.getCurrPositionTriggered=!1,inOutBut.on("click",function(){Attendance.Entry.punchIn()}),inOutBut.find("svg").hide(),inOutBut.find(".SP-timelg").show();var attListViewTodayActive=!1;if(Attendance.Entry.LayoutId&&(attListViewTodayActive=$(Attendance.Entry.LayoutId+" #ZPAtt_listViewEntries .today-active").is(":visible")),Attendance.Dashboard&&!attListViewTodayActive){var dashlay=$(Attendance.Dashboard.pageLayout());dashlay.find('[name="ATTENDANCE"] #ZPAtt_Dash_CurrDate')[0]&&Attendance.Dashboard.WeeklyData.getCurWeekData(),dashlay.find("#ZPD_Top_Att_Stat")[0]&&Attendance.Dashboard.CurrStatus.getCurrDayStatus()}if(rdata.msg&&rdata.msg.error)return"alreadyIn"===rdata.msg.error?ZPeople.Message.showFailureMsg(ZPI18N.getString("zp.alreadycheckedin")):"differentTimeZone"===rdata.msg.error&&ZPeople.Message.showWarningMsg(ZPI18N.getString("zp.timezonechanged",[rdata.msg.prevEntryTimeZone])),void("attendance-entry-listview"===Layout.Page.pageId&&(Attendance.Entry.loadToday=!1,Attendance.Entry.getList()));if(rdata.photoError)Attendance.Entry.openPhotoComparingPopup(null,!0,rdata.photoError,latLonparam);else if(rdata.fail){if("punchIn_error3"===rdata.fail)ZPeople.Message.showFailureMsg(ZPI18N.getString("zp.allowedintimetracker"));else if("punchIn_error2"===rdata.fail)ZPeople.Message.showFailureMsg(ZPI18N.getString("zp.permissiondenied")+". "+ZPI18N.getString("zp.iprestricted"));else if("punchIn_error1"===rdata.fail)ZPeople.Message.showFailureMsg(ZPI18N.getString("zp.webcheckinnotallowed"));else if("punchIn_error4"===rdata.fail){var errorParam=new Array;rdata.distancediff&&rdata.distancediff<2e3?errorParam.push(ZPI18N.getString("zp.geolocationrestricted.distance",[rdata.distancediff])):null!=latLonparam.accuracy&&latLonparam.accuracy>=1e3?errorParam.push(ZPI18N.getString("zp.geolocationrestricted.inaccuracy")):errorParam.push(""),ZPeople.Message.showFailureMsg(ZPI18N.getString("zp.geolocationrestricted",errorParam))}else"location_access_error"!==rdata.fail&&"punchIn_error5"!==rdata.fail||ZPeople.Message.showFailureMsg(ZPI18N.getString("zp.enableaccesstolocationAsPerCompanyPol"));$("#ZPAtt_PhotoComparingPopup")[0]&&$("#ZPAtt_PhotoComparingPopup").modal("hide")}else if(Attendance.Entry.openPhotoComparingPopup(null,!0,null,latLonparam),Attendance.Entry.checkInOut="out",Attendance.Entry.curDayBreakDetails.shiftBreakDets=rdata.curDayBreakDetails?rdata.curDayBreakDetails.shiftBreakDets:void 0,$(Attendance.Entry.LayoutId+" #ZPAtt_listViewEntries").is(":visible")&&null===Attendance.Entry.erecno){if(ZPeople.reloadDashAttData=!!(Attendance.Dashboard&&attListViewTodayActive||ZPeople.reloadDashAttData),attListViewTodayActive){var todayRowIndex=$(Attendance.Entry.LayoutId+" #ZPAtt_listViewEntries .today-active").index();Attendance.Entry.allDataList.dayList[todayRowIndex]=rdata.msg.dayList[0],Attendance.Entry.getCurrDayEntry($(Attendance.Entry.LayoutId+" #ZPAtt_listViewEntries .today-active").index())}return attListViewTodayActive||(Attendance.Entry.curDayBreakDetails.shiftBreakDets?Attendance.Entry.showOrHideBreakSelect(!0,Attendance.Entry.curDayBreakDetails.shiftBreakDets):Attendance.Entry.showOrHideBreakSelect(!1)),Attendance.Entry.hideBreakDiv(),void Attendance.Entry.setFunctionInOrOut()}},error:function(data){Attendance.Entry.refreshPage(data)}})}else Attendance.Entry.openTakePhotoPopup(latLonparam,!0)},punchOut:function(latLanObj,imageObj){var inOutBut=Layout.Page.container.find("#ZPAtt_check_in_out");inOutBut.off("click"),inOutBut.find("svg").show(),inOutBut.find(".SP-timelg").hide(),inOutBut.find(".timelg-img").hide();var formData=new FormData;formData.append("conreqcsr",csrfToken),formData.append("urlMode",Layout.Page.urlmode);var lastGenLatLon=null;if("undefined"!=typeof Storage&&null!==localStorage.getItem("att_LatLonDet")){var latLonObj=JSON.parse(localStorage.getItem("att_LatLonDet")),lastFetTime=latLonObj.fetchedTime;(new Date).getTime()-lastFetTime<=12e4&&(lastGenLatLon=latLonObj)}var latLonparam={};if(void 0!==Attendance.isTrackLocationEnabled&&Attendance.isTrackLocationEnabled){if(navigator.geolocation&&void 0===latLanObj&&null===lastGenLatLon){if(!Attendance.getCurrPositionTriggered){Attendance.getCurrPositionTriggered=!0;var extraParam={maximumAge:12e4};void 0===Attendance.isWebCoOrdMandatory||Attendance.isWebCoOrdMandatory||isGeoEnabledAtt?extraParam.timeout=15e3:extraParam.timeout=1e4,navigator.geolocation.getCurrentPosition(Attendance.Entry.getGeoForCheckOut,Attendance.Entry.geoErrForCheckOut,extraParam)}return}(void 0!==latLanObj&&"object"==typeof latLanObj&&0!==Object.keys(latLanObj).length&&latLanObj.latitude&&latLanObj.longitude||null!==lastGenLatLon)&&(null!==lastGenLatLon?(formData.append("latitude",lastGenLatLon.latitude),formData.append("longitude",lastGenLatLon.longitude),formData.append("accuracy",lastGenLatLon.accuracy),latLonparam.latitude=lastGenLatLon.latitude,latLonparam.longitude=lastGenLatLon.longitude,latLonparam.accuracy=lastGenLatLon.accuracy):(formData.append("latitude",latLanObj.latitude),formData.append("longitude",latLanObj.longitude),formData.append("accuracy",latLanObj.accuracy),latLonparam.latitude=latLanObj.latitude,latLonparam.longitude=latLanObj.longitude,latLonparam.accuracy=latLanObj.accuracy,Attendance.Entry.storeLatLongInLStore(latLonparam)))}if(!Attendance.isAllowToCapturePhotoInWeb&&!Attendance.isAllowToVerifyUserInWeb||void 0!==imageObj){if(imageObj){var base64ImageContent=imageObj.replace(/^data:image\/(png|jpg);base64,/,""),blob=Attendance.Entry.base64ToBlob(base64ImageContent,"image/png");formData.append("userImage",blob,"userImage.png")}Attendance.Entry.breakId&&(formData.append("breakId",Attendance.Entry.breakId),Attendance.Entry.breakId=void 0),Attendance.Entry.reloadFromWMS=!1,$(Attendance.Entry.LayoutId+" #ZPAtt_checkInOutDesc").is(":visible")&&""!==$(Attendance.Entry.LayoutId+" #ZPAtt_checkInOutDesc").val().trim()?(formData.append("desc_out",$(Attendance.Entry.LayoutId+" #ZPAtt_checkInOutDesc").val()),$(Attendance.Entry.LayoutId+" #ZPAtt_checkInOutDesc").val("")):$("#ZPAtt_Dash_checkinNotes").is(":visible")&&""!==$("#ZPAtt_Dash_checkinNotes").val().trim()&&formData.append("desc_out",$("#ZPAtt_Dash_checkinNotes").val().trim()),$.ajax({url:"/AttendanceAction.zp?mode=punchOut",type:"POST",data:formData,contentType:!1,processData:!1,success:function(rdata){Attendance.getCurrPositionTriggered=!1,inOutBut.on("click",function(){Attendance.Entry.punchOut()}),inOutBut.find("svg").hide(),inOutBut.find(".SP-timelg").show(),inOutBut.find(".timelg-img").show();var attListViewTodayActive=!1;if(Attendance.Entry.LayoutId&&(attListViewTodayActive=$(Attendance.Entry.LayoutId+" #ZPAtt_listViewEntries .today-active").is(":visible")),Attendance.Dashboard&&!attListViewTodayActive){var dashlay=$(Attendance.Dashboard.pageLayout());dashlay.find('[name="ATTENDANCE"] #ZPAtt_Dash_CurrDate')[0]&&Attendance.Dashboard.WeeklyData.getCurWeekData(),dashlay.find("#ZPD_Top_Att_Stat")[0]&&Attendance.Dashboard.CurrStatus.getCurrDayStatus()}if(rdata.punchOut&&rdata.punchOut.error)return"alreadyOut"===rdata.punchOut.error?ZPeople.Message.showFailureMsg(ZPI18N.getString("zp.alreadycheckedout")):"differentTimeZone"===rdata.punchOut.error?ZPeople.Message.showWarningMsg(ZPI18N.getString("zp.timezonechanged",[rdata.punchOut.prevEntryTimeZone])):"breakTimeErr"===rdata.punchOut.error?ZPeople.Message.showWarningMsg(ZPI18N.getString("zp.breakspectime")):"Manual Break shouldn't start in the duration of Automatic breaks"===rdata.punchOut.error&&ZPeople.Message.showWarningMsg(ZPI18N.getString("zp.manualinauto")),void("attendance-entry-listview"===Layout.Page.pageId&&(Attendance.Entry.loadToday=!1,Attendance.Entry.getList()));if(rdata.photoError)Attendance.Entry.openPhotoComparingPopup(null,!1,rdata.photoError,latLonparam);else if(rdata.fail){if("punchOut_error3"===rdata.fail)ZPeople.Message.showFailureMsg(ZPI18N.getString("zp.allowedintimetracker"));else if("punchOut_error2"===rdata.fail)ZPeople.Message.showFailureMsg(ZPI18N.getString("zp.permissiondenied")+" "+ZPI18N.getString("zp.iprestricted"));else if("punchOut_error1"===rdata.fail)ZPeople.Message.showFailureMsg(ZPI18N.getString("zp.webcheckinnotallowed"));else if("punchOut_error4"===rdata.fail){var errorParam=new Array;rdata.distancediff&&rdata.distancediff<2e3?errorParam.push(ZPI18N.getString("zp.geolocationrestricted.distance",[rdata.distancediff])):null!=latLonparam.accuracy&&latLonparam.accuracy>=1e3?errorParam.push(ZPI18N.getString("zp.geolocationrestricted.inaccuracy")):errorParam.push(""),ZPeople.Message.showFailureMsg(ZPI18N.getString("zp.geolocationrestricted",errorParam))}else"location_access_error"!==rdata.fail&&"punchOut_error5"!==rdata.fail||ZPeople.Message.showFailureMsg(ZPI18N.getString("zp.enableaccesstolocationAsPerCompanyPol"));$("#ZPAtt_PhotoComparingPopup")[0]&&$("#ZPAtt_PhotoComparingPopup").modal("hide")}else if(Attendance.Entry.openPhotoComparingPopup(null,!1,null,latLonparam),Attendance.Entry.checkInOut="in",Attendance.Entry.temp_tsecs=0,$(Attendance.Entry.LayoutId+" #ZPAtt_listViewEntries").is(":visible")&&null===Attendance.Entry.erecno){if(ZPeople.reloadDashAttData=!!(Attendance.Dashboard&&attListViewTodayActive||ZPeople.reloadDashAttData),Attendance.Entry.isPrevExtended)return Attendance.Entry.isPrevExtended=null,void("week"===Attendance.Entry.selectedView?$(Attendance.Entry.LayoutId+" #ZPAtt_weekViewBut").trigger("click"):$(Attendance.Entry.LayoutId+" #ZPAtt_monViewBut").trigger("click"));if(attListViewTodayActive){var todayRowIndex=$(Attendance.Entry.LayoutId+" #ZPAtt_listViewEntries .today-active").index();Attendance.Entry.allDataList.dayList[todayRowIndex]=rdata.punchOut.dayList[0],Attendance.Entry.getCurrDayEntry($(Attendance.Entry.LayoutId+" #ZPAtt_listViewEntries .today-active").index())}if(!attListViewTodayActive)if(rdata.punchOut.runningBreakId){var breakDetails={};breakDetails.runningBreakId=rdata.punchOut.runningBreakId,breakDetails.breakTimerAddSecs=rdata.punchOut.breakTimerAddSecs,Attendance.Entry.showBreakRunner(breakDetails)}else Attendance.Entry.showOrHideBreakSelect(!1);return Attendance.Entry.hideBreakDiv(),void Attendance.Entry.setFunctionInOrOut()}},error:function(data){Attendance.Entry.refreshPage(data)}})}else Attendance.Entry.openTakePhotoPopup(latLonparam,!1)},manualUpdateOfAbsent:function(shiftId,date){var param={mode:"manualUpdateOfAbsent",conreqcsr:csrfToken};param.shiftId=shiftId,param.punishDate=date,$.post("/AttendanceAction.zp",param,function(rdata){1==rdata.response?ZPeople.Message.showSuccessMsg(ZPI18N.getString("zp.success")):ZPeople.Message.showFailureMsg(ZPI18N.getString("zp.unabletoprocess"))})},addPunchInOrOutWithNotes:function(event){27===event.keyCode?$(Attendance.Entry.LayoutId+" #ZPAtt_checkInOutDesc").val(""):""!==$(Attendance.Entry.LayoutId+" #ZPAtt_checkInOutDesc").val()&&13===event.keyCode&&$(Attendance.Entry.LayoutId+" #ZPAtt_check_in_out").trigger("click")},lastRefTime:null,temp_tsecs:0,display_sec:0,lastSecs:0,updateTotalmins:function(addSecs,needtostore,lsecs){var lastRefTime=Attendance.Entry.lastRefTime,curTime=(new Date).getTime();-1!==Attendance.Entry.LayoutId.indexOf("attendance-entry-listview")&&null===Attendance.Entry.erecno&&""===Layout.Page.container.find("#ZPAtt_checkInOutDesc").val().trim()&&!Layout.Page.container.find("#ZPAtt_allEntries_popup").hasClass("in")&&(!lastRefTime||curTime-lastRefTime>9e5)&&(Attendance.Entry.lastRefTime=curTime,lastRefTime&&(Attendance.Entry.loadToday=!1,Attendance.Entry.getList(Attendance.Entry.selectedView,Attendance.Entry.preMonth)));var todayId=$(Attendance.Entry.LayoutId+" #ZPAtt_listViewEntries .today-active"),totalForBarWidth=0,allData=Attendance.Entry.allDataList;if(!(addSecs<0||!todayId||lsecs<0)){if(addSecs||(addSecs=0),"set"===needtostore){var totalsecs=addSecs;this.display_sec=addSecs,this.temp_tsecs=0,0===allData.showScaleView&&todayId.is(":visible")&&(void 0!==lsecs&&""!==lsecs?(totalForBarWidth=lsecs,this.lastSecs=lsecs):(totalForBarWidth=0,this.lastSecs=0))}else this.temp_tsecs+=addSecs,totalForBarWidth=totalsecs=this.display_sec+this.temp_tsecs,0===allData.showScaleView&&todayId.is(":visible")&&(totalForBarWidth=this.lastSecs+this.temp_tsecs);var sec=parseInt(totalsecs%60),min=parseInt((totalsecs-sec)/60%60),hrs=parseInt((totalsecs-min)/3600);if(todayId.is(":visible")&&todayId[0]){if("out"===Attendance.Entry.checkInOut)if(parseInt(totalsecs)>=86400){var temp=Math.round((curTime-ZPeople.lastRefTime)/1e3);if(0==ZPeople.lastRefTime||temp>=36e3)return ZPeople.lastRefTime=curTime,void ZPeople.reloadListViewAtt(Layout.Page.urlmode)}else todayId.children().last().text(Attendance.disTwoDigit(hrs)+":"+Attendance.disTwoDigit(min)+":"+Attendance.disTwoDigit(sec)+" "+ZPI18N.getString("zp.hrs"));else Attendance.Entry.breakRowOpen||todayId.children().last().text(Attendance.disTwoDigit(hrs)+":"+Attendance.disTwoDigit(min)+" "+ZPI18N.getString("zp.hrs"));if(0===allData.showScaleView){var currRunningTimeDate=Attendance.Entry.allDataList.currDate.todayDate,currRunningTimeLeftPos=Attendance.Entry.leftPositionCalc(Attendance.Entry.currRunningTime,currRunningTimeDate,Attendance.Entry.latestCheckinDate);if(currRunningTimeLeftPos>=0&&currRunningTimeLeftPos>=Attendance.Entry.latestCheckinLeftPos){var updateBar=$(todayId.children()[4].children[0]),per=(totalForBarWidth-30)/60/60/Attendance.Entry.shiftDiffTime*100;Attendance.Entry.latestCheckinLeftPos<0&&(per-=-1*Attendance.Entry.latestCheckinLeftPos),per>100&&(per=100);var tempDivWidth=updateBar.width()*(per/100);if(0!==updateBar.children().length&&(0===Attendance.Entry.allDataList.showAllEntries||1===Attendance.Entry.allDataList.showAllEntries&&!$(todayId.children(":eq(5)").children(":eq(0)").children(":eq(2)")).hasClass("absent-bg")))if(updateBar.children().first().hasClass("progress-bar-striped active")&&(updateBar.children().first().hasClass("present-bg")||1==updateBar.children().first(["class^='LC'"]).length))tempDivWidth+updateBar.children().first().position().left<updateBar.width()?updateBar.children().first().css("width",per+"%"):updateBar.children().first().css("width",updateBar.width()-updateBar.children().first().position().left);else if("out"===Attendance.Entry.checkInOut&&1===Attendance.Entry.allDataList.showAllEntries&&updateBar.children().first().hasClass("custom-progress-bar")){updateBar.children().first().attr("class","custom-progress-bar present-bg progress-bar-striped active"),tempDivWidth+updateBar.children().first().position().left<updateBar.width()?updateBar.children().first().css("width",per+"%"):updateBar.children().first().css("width",updateBar.width()-updateBar.children().first().position().left)}}}else(per=totalsecs/60/60/10*100)>100&&(per=100),$(todayId.children()[3].children[0].children[0]).css("width",per+"%")}}},setFunctionInOrOut:function(){var checkInBut=$(Attendance.Entry.LayoutId+" #ZPAtt_check_in_out"),inClass="gry-bg",outClass="grn-bg",imageGif="timelog1.gif";"/zp"===ZPeople.CONTEXT&&(inClass="grn-bg",outClass="red-bg",imageGif="timelog3.gif");var butClass=inClass,text=ZPI18N.getString("zp.checkin"),runningTimer=$(Attendance.Entry.LayoutId+" #ZPAtt_running_timer").hide(),inpPlaceHolder=ZPI18N.getString("zp.addnotesforcheckin"),callback=Attendance.Entry.punchIn;"out"===Attendance.Entry.checkInOut&&(butClass=outClass,text=ZPI18N.getString("zp.checkout"),runningTimer.show().html("<img src='"+ZPeople.getResourceURL(newUIImageUrl+imageGif)+"' class='CP'>"),inpPlaceHolder=ZPI18N.getString("zp.addnotesforcheckout"),callback=Attendance.Entry.punchOut),checkInBut.children().attr("class","type-btn "+butClass).attr("title",text),checkInBut.find("p").text(text),$(Attendance.Entry.LayoutId+" #ZPAtt_checkInOutDesc").attr("placeholder",inpPlaceHolder),checkInBut.off("click").on("click",function(){callback()})},getAttRegJson:function(userInput){var attRegJson={};if(userInput.oldAttDataForDay&&void 0!==userInput.fromTime&&void 0!==userInput.toTime){var oldFromTime=userInput.oldAttDataForDay.fromdate?userInput.oldAttDataForDay.fromdate.substring(0):"",oldToTime=userInput.oldAttDataForDay.todate?userInput.oldAttDataForDay.todate.substring(0):"",newFromTime="",newFromDate="",invalidFromHour=!1,invalidToHour=!1;if(""!==userInput.fromTime.trim()){var fromDateTime=userInput.fromTime;newFromDate=fromDateTime.split(" ")[0],attRegJson.fromDate=newFromDate,newFromTime=fromDateTime.split(" ")[1]+" "+fromDateTime.split(" ")[2];var regFromHour=parseInt(newFromTime.split(":")[0],10),regFromMin=parseInt(newFromTime.split(":")[1],10);invalidFromHour=Attendance.timeFormatIs12hr?regFromHour>12||invalidFromHour:regFromHour>23||invalidFromHour,invalidFromHour=regFromMin>60||invalidFromHour,newFromTime=Attendance.disTwoDigit(newFromTime.split(":")[0])+newFromTime.substring(newFromTime.indexOf(":"))}var newToTime="",newToDate="";if(null!=userInput.toTime.trim()){var toDateTime=userInput.toTime;newToDate=toDateTime.split(" ")[0],attRegJson.toDate=newToDate,newToTime=toDateTime.split(" ")[1]+" "+toDateTime.split(" ")[2];var regToHour=parseInt(newToTime.split(":")[0],10),regToMin=parseInt(newToTime.split(":")[1],10);invalidToHour=Attendance.timeFormatIs12hr?regToHour>12||invalidToHour:regToHour>23||invalidToHour,invalidToHour=regToMin>60||invalidToHour,newToTime=Attendance.disTwoDigit(newToTime.split(":")[0])+newToTime.substring(newToTime.indexOf(":"))}if(userInput.reasonanddesc){var reasonanddesc=userInput.reasonanddesc,reasonanddescJson={};reasonanddesc.desc&&""!==reasonanddesc.desc.trim()&&(reasonanddescJson.desc=reasonanddesc.desc.trim()),reasonanddesc.reason&&""!==reasonanddesc.reason.trim()&&(reasonanddescJson.reason=reasonanddesc.reason.trim()),attRegJson.reasonanddesc=reasonanddesc}if(userInput.fromTime.trim()&&(attRegJson.ftime=Attendance.Common.convertTimerInputToMinsOrSecs(userInput.fromTime.trim().split(" ")[1]+" "+userInput.fromTime.trim().split(" ")[2])),userInput.toTime.trim()){var ttime=Attendance.Common.convertTimerInputToMinsOrSecs(userInput.toTime.trim().split(" ")[1]+" "+userInput.toTime.trim().split(" ")[2]);attRegJson.ttime=ttime}if((invalidToHour||invalidFromHour)&&(attRegJson.errorType="5"),oldFromTime!=newFromTime||oldToTime!=newToTime||userInput.oldAttDataForDay.allowDuplicates)if(""==userInput.fromTime.trim()||""==userInput.toTime.trim()){if(attRegJson.errorType="1",userInput.oldAttDataForDay.allowDuplicates&&""==userInput.fromTime.trim()&&""==userInput.toTime.trim())return{}}else!ZPeople.Module.MODULE_DATA.attendance.isRegReasonsEnabled||userInput.reasonanddesc&&userInput.reasonanddesc.reason?userInput.reasonanddesc&&userInput.reasonanddesc.desc&&userInput.reasonanddesc.desc.length>=500&&(attRegJson.errorType="4"):attRegJson.errorType="2";else oldFromTime==newFromTime&&oldToTime==newToTime&&""!=newFromTime&&""!=newToTime&&(attRegJson.errorType="3");return attRegJson}return{}},refreshPage:function(resp){resp&&resp.responseJSON&&resp.responseJSON.code&&-1!==resp.responseJSON.code.indexOf("INVALID_CSRF_TOKEN")&&(ZPeople.Message.showFailureMsg(ZPI18N.getString("zp.sessionexpired")),setTimeout(function(){location.reload()},3e3))},processRowUpdate:function(obj){Attendance.Entry.reloadFromWMS=!1;var param={mode:"bulkAttendReg",conreqcsr:csrfToken},isEmpChooseApp=ZPeople.Module.MODULE_DATA.attendance.isEmpChooseApp;($(Attendance.Entry.LayoutId+" #ZPAtt_tabView").is(":visible")||$(Attendance.Entry.LayoutId+" #ZPAtt_listView").is(":visible"))&&null!==Attendance.Entry.erecno?param.erecno=Attendance.Entry.erecno:$("#"+Layout.Page.pageId+" #ZPAtt_AddReq_FilEmployee").val()&&"0"!==$("#"+Layout.Page.pageId+" #ZPAtt_AddReq_FilEmployee").val()?param.erecno=$("#"+Layout.Page.pageId+" #ZPAtt_AddReq_FilEmployee").select2("val"):param.erecno=erecno;var dataObj={},isBothInOutMissingErr=[],reasonUnSelectedErr=[],descLimitErr=[],isOldEntriesAvailable=!1,isRegReasonsEnabled=ZPeople.Module.MODULE_DATA.attendance.isRegReasonsEnabled,isAllEmpty=!0,inValidHour=!1;if("attendance-regularization-myrequests"===Layout.Page.pageId){if(isEmpChooseApp){if("-Select-"===(chosenErecno=Attendance.Reg.getEmpChosenApprErecno(Layout.Page.container.find("#addRegularizationPage"))))return;param.empChoosenApprErecno=chosenErecno}$("#"+Layout.Page.pageId+" #attRegTableBody tr:gt(0):visible").each(function(){var userInputJson={},reasonanddesc={},originDate=$(this).find("#attRegDateDiv").attr("date_orgformat");userInputJson.fromTime=$(this).find("#ZPAtt_reg_fromTime").val().trim(),userInputJson.toTime=$(this).find("#ZPAtt_reg_toTime").val().trim();var desc=$(this).find("#reg_req_desc").val().trim();if(isRegReasonsEnabled){var reasonSelect=$(this).find("#reg_req_reason").val();reasonanddesc.reason=ZPeople.Module.MODULE_DATA.attendance.regReasons[reasonSelect]}""!==desc&&(reasonanddesc.desc=desc),(reasonanddesc.desc||reasonanddesc.reason)&&(userInputJson.reasonanddesc=reasonanddesc),userInputJson.oldAttDataForDay=Attendance.Reg.getDayRecordJson.regDetails[originDate],isOldEntriesAvailable||""===userInputJson.fromTime&&""===userInputJson.toTime||(isOldEntriesAvailable=!0);var resultJson=Attendance.Entry.getAttRegJson(userInputJson);if("1"===resultJson.errorType)isBothInOutMissingErr.push(originDate);else if("2"===resultJson.errorType)reasonUnSelectedErr.push(originDate),dataObj[originDate]=resultJson;else{if("3"===resultJson.errorType)return void(isAllEmpty=!1);"4"===resultJson.errorType?descLimitErr.push(originDate):"5"===resultJson.errorType?inValidHour=!0:Object.keys(resultJson).length>0&&(dataObj[originDate]=resultJson)}})}else{if(isEmpChooseApp){var chosenErecno,addReqLayout=Layout.Page.container.find("#ZPAtt_Entry_addRequest");if(Layout.Page.container.find("#ZPAtt_listView").is(":visible")&&(addReqLayout=Layout.Page.container.find("#ZPAtt_Entry_addRequest_list")),"-Select-"===(chosenErecno=Attendance.Reg.getEmpChosenApprErecno(addReqLayout)))return;param.empChoosenApprErecno=chosenErecno}var userInputJson={},reasonanddesc={},originDate=Attendance.Entry.getDayRecordJson.regDetails.dayList[0];userInputJson.fromTime=$("#"+Layout.Page.pageId+" #ZPAtt_reg_fromTime").val().trim(),userInputJson.toTime=$("#"+Layout.Page.pageId+" #ZPAtt_reg_toTime").val().trim();var desc=Layout.Page.container.find("#reg_req_desc").val().trim();if(isRegReasonsEnabled){var reasonSelect=Layout.Page.container.find("#reg_req_reason").val();reasonanddesc.reason=ZPeople.Module.MODULE_DATA.attendance.regReasons[reasonSelect]}""!==desc&&(reasonanddesc.desc=desc),(reasonanddesc.desc||reasonanddesc.reason)&&(userInputJson.reasonanddesc=reasonanddesc),userInputJson.oldAttDataForDay=Attendance.Entry.getDayRecordJson.regDetails[originDate],isOldEntriesAvailable||""===userInputJson.fromTime&&""===userInputJson.toTime||(isOldEntriesAvailable=!0);var resultJson=Attendance.Entry.getAttRegJson(userInputJson);"1"===resultJson.errorType?isBothInOutMissingErr.push(originDate):"2"===resultJson.errorType?reasonUnSelectedErr.push(originDate):"3"===resultJson.errorType?isAllEmpty=!1:"4"===resultJson.errorType?descLimitErr.push(originDate):"5"===resultJson.errorType?inValidHour=!0:Object.keys(resultJson).length>0&&(dataObj[originDate]=resultJson)}if(!inValidHour)if("attendance-regularization-myrequests"===Layout.Page.pageId?(param.fdate=$("#"+Layout.Page.pageId+" #ZPAtt_reg_fromDate").val(),$("#"+Layout.Page.pageId+" #ZPAtt_reg_toDate").is(":visible")&&(param.tdate=$("#"+Layout.Page.pageId+" #ZPAtt_reg_toDate").val())):param.fdate=$("#"+Layout.Page.pageId+" #ZPAtt_reg_regDate").val(),"attendance-regularization-myrequests"===Layout.Page.pageId&&($("#"+Layout.Page.pageId+" #attRegTableBody tr[errorDispRow=true]").css("height","44px"),$("#"+Layout.Page.pageId+" #attRegTableBody span.attRegErr").remove()),"attendance-entry-listview"!==Layout.Page.pageId&&"attendance-entry-tabularview"!==Layout.Page.pageId||($("#"+Layout.Page.pageId+" #attRegForm").css("height","44px"),$("#"+Layout.Page.pageId+" #attRegForm").find("#reg_errorMsg").remove(),$("#"+Layout.Page.pageId+" #attRegForm").find("#reg_errorMsg_to").remove()),0===descLimitErr.length){if("attendance-regularization-myrequests"===Layout.Page.pageId){var errorMsg=ZPI18N.getString("zp.selectregreason"),isErrorShown=!1;for(var errDate in reasonUnSelectedErr){isErrorShown=!0;var dateId=reasonUnSelectedErr[errDate].replace(/\//g,"\\/");Attendance.Entry.showErrorMessageForReg(dateId,errorMsg,!0)}if(0==Object.keys(dataObj).length){for(var errDate in errorMsg=ZPI18N.getString("zp.inoutempty"),isBothInOutMissingErr){isErrorShown=!0;dateId=isBothInOutMissingErr[errDate].replace(/\//g,"\\/");Attendance.Entry.showErrorMessageForReg(dateId,errorMsg)}isErrorShown||(isErrorShown=!0,errorMsg=isAllEmpty?ZPI18N.getString("zp.inoutempty"):ZPI18N.getString("zp.nochangesmade"),ZPeople.Message.showFailureMsg(errorMsg))}if(isErrorShown)return}else if(0==Object.keys(dataObj).length){errorMsg=isAllEmpty?ZPI18N.getString("zp.inoutempty"):ZPI18N.getString("zp.nochangesmade");if(Object.keys(isBothInOutMissingErr).length>0?errorMsg=ZPI18N.getString("zp.inoutempty"):Object.keys(reasonUnSelectedErr).length>0&&(errorMsg=ZPI18N.getString("zp.selectregreason")),errorMsg)return void ZPeople.Message.showFailureMsg(errorMsg)}$(obj).attr("disabled","true"),param.isFromEntryPage="attendance-regularization-myrequests"!==Layout.Page.pageId,param.dataObj=JSON.stringify(dataObj),$.post("/AttendanceAction.zp",param,function(rdata){if($(obj).prop("disabled",!1),rdata.errorDates){if("attendance-regularization-myrequests"===Layout.Page.pageId){for(var errDate in rdata.errorDates){var dateId=errDate.replace(/\//g,"\\/");$("#"+Layout.Page.pageId+" #attRegTableBody #"+dateId).attr("errorDispRow",!0),$("#"+Layout.Page.pageId+" #attRegTableBody #"+dateId).css("height","70px"),$($("#"+Layout.Page.pageId+" #attRegTableBody #"+dateId+" #filoDiv").eq(0).find("div")[0]).append('<span id="reg_errorMsg" class="attRegErr">'+rdata.errorDates[errDate]+"</span>")}return}for(var errDate in rdata.errorDates)$("#"+Layout.Page.pageId+" #attRegForm").attr("errorDispRow",!0),$("#"+Layout.Page.pageId+" #attRegForm").css("height","70px"),$("#"+Layout.Page.pageId+" #attRegForm").find(" #filoDiv").eq(0).find("div").append('<span id="reg_errorMsg" class="ERR MT5">'+rdata.errorDates[errDate]+"</span>")}else if(rdata.errorToDates){if("attendance-regularization-myrequests"===Layout.Page.pageId){for(var errDate in rdata.errorToDates){dateId=errDate.replace(/\//g,"\\/");$("#"+Layout.Page.pageId+" #attRegTableBody #"+dateId).attr("errorDispRow",!0),$("#"+Layout.Page.pageId+" #attRegTableBody #"+dateId).css("height","70px"),$($("#"+Layout.Page.pageId+" #attRegTableBody #"+dateId+" #filoDiv").eq(1).find("div")[0]).append('<span id="reg_errorMsg_to" class="attRegErr">'+rdata.errorToDates[errDate]+"</span>")}return}for(var errDate in rdata.errorToDates)$("#"+Layout.Page.pageId+" #attRegForm").attr("errorDispRow",!0),$("#"+Layout.Page.pageId+" #attRegForm").css("height","70px"),$("#"+Layout.Page.pageId+" #attRegForm").find(" #filoDiv").eq(1).find("div").append('<span id="reg_errorMsg_to" class="ERR MT5">'+rdata.errorToDates[errDate]+"</span>")}else{if(rdata.error)ZPeople.Message.showFailureMsg(ZPI18N.getString("zp.unabletoprocess"));else{if(rdata.message)return void $("#"+Layout.Page.pageId+" #ZPAtt_reg_fromTime").parent().next().next().html(ZPI18N.getString("zp.greaterfromdate"));if("totalHrsExceeded"===rdata.error)return void ZPeople.Message.showFailureMsg(ZPI18N.getString("zp.totalhrsreached"));if("not allowed for this day"===rdata.error)return void ZPeople.Message.showFailureMsg(ZPI18N.getString("zp.notallowedthisday"));$(Attendance.Entry.LayoutId+" #ZPAtt_tabView").is(":visible")||$(Attendance.Entry.LayoutId+" #ZPAtt_listView").is(":visible")?rdata.dayList&&($(Attendance.Entry.LayoutId+" #ZPAtt_reg_regDate")[0]&&$(Attendance.Entry.LayoutId+" #ZPAtt_reg_regDate")[0].hasAttribute("disabled")?(Attendance.Entry.allDataList.dayList[$(obj).attr("rowindex")]=rdata.dayList[0],Attendance.Entry.loadToday=!1,Attendance.Entry.getMonthReportForUser(),$(Attendance.Entry.LayoutId+" #ZPAtt_listView").is(":visible")?Attendance.Entry.showDayList(rdata.dayList,$(Attendance.Entry.LayoutId+" #ZPAtt_listViewEntries").children()[$(obj).attr("rowindex")]):$(Attendance.Entry.LayoutId+" #ZPAtt_tabView").is(":visible")&&Attendance.Entry.showDayListTabler(rdata.dayList,$(Attendance.Entry.LayoutId+" #ZPAtt_tabViewEntries").children()[$(obj).attr("rowindex")]),Attendance.Entry.allDataList.dayList[$(obj).attr("rowindex")].isToday&&Attendance.Dashboard&&Attendance.Dashboard.WeeklyData.getCurWeekData()):Attendance.Entry.getList(Attendance.Entry.selectedView,Attendance.Entry.preMonth)):($(obj).next().trigger("click"),"hh:mm a"!==timeFormat?Attendance.timeFormatIs12hr=!1:Attendance.timeFormatIs12hr=!0,Attendance.Reg.getRequest(!1,!1))}$(obj).next().trigger("click")}})}else ZPeople.Message.showFailureMsg(ZPI18N.getString("zp.scheduledescriptioncounterror",new Array("500")))},showErrorMessageForReg:function(dateId,errorMsg,isReasonErr){var div=" #filoDiv";isReasonErr&&(div=" #reg_req_reasonanddesc1 .col-sm-12.P0"),$("#"+Layout.Page.pageId+" #attRegTableBody #"+dateId).attr("errorDispRow",!0),$("#"+Layout.Page.pageId+" #attRegTableBody #"+dateId).css("height","70px"),$("#"+Layout.Page.pageId+" #attRegTableBody #"+dateId+div).eq(0).find("span.attRegErr").remove(),$($("#"+Layout.Page.pageId+" #attRegTableBody #"+dateId+div).eq(0).find("div")[0]).append('<span class="attRegErr">'+errorMsg+"</span>")},deleteProcessRow:function(){Attendance.Entry.reloadFromWMS=!1;var rowIndex=$(Attendance.Entry.LayoutId+" #ZPAtt_entry_clickedElement").parent().parent().parent().index();$(Attendance.Entry.LayoutId+" #ZPAtt_entry_clickedElement").removeAttr("id");var param={mode:"delAttenEntry",conreqcsr:csrfToken,attDate:Attendance.Entry.allDataList.dayList[rowIndex].ldate};null!==Attendance.Entry.erecno&&(param.erecno=Attendance.Entry.erecno),$.post("/AttendanceAction.zp",param,function(rdata){rdata.curDayBreakDetails&&(Attendance.Entry.curDayBreakDetails=rdata.curDayBreakDetails),rdata.dayList&&(Attendance.Entry.allDataList.dayList[rowIndex]=rdata.dayList[0],Attendance.Entry.showDayListTabler(rdata.dayList,$(Attendance.Entry.LayoutId+" #ZPAtt_tabViewEntries").children()[rowIndex]),Attendance.Entry.loadToday=!1,Attendance.Entry.getMonthReportForUser()),Attendance.Entry.allDataList.dayList[rowIndex].isToday&&Attendance.Dashboard&&Attendance.Dashboard.WeeklyData.getCurWeekData()})},searchedUserphoto:null,searchedUsername:null,getSearchedUserEntry:function(){var selectVal=$(Attendance.Entry.LayoutId+" #ZPAtt_entry_empName").val();Attendance.Entry.searchedUserphoto=$(Attendance.Entry.LayoutId+" .select2-choice").data().select2Data.photo,Attendance.Entry.searchedUsername=$(Attendance.Entry.LayoutId+" .select2-choice").data().select2Data.text,"0"!==selectVal&&Attendance.Entry.currUserEno!==selectVal?(Attendance.Entry.erecno=$(Attendance.Entry.LayoutId+" #ZPAtt_entry_empName").val(),$(Attendance.Entry.LayoutId+" #ZPAtt_userPhoto")[0].src=Attendance.Entry.searchedUserphoto):(Attendance.Entry.erecno=null,$(Attendance.Entry.LayoutId+" #ZPAtt_userPhoto")[0].src=ZPeople.CURR_USER.avatar);var premonth=Attendance.Entry.preMonth,view=Attendance.Entry.selectedView;"calendar"===Attendance.Entry.selectedPageView&&(premonth=Attendance.Entry.calendarPreMonth,view="month"),Attendance.Entry.calObj=null,Attendance.Entry.getList(view,premonth),ZPeople.attUserId=Attendance.Entry.erecno},cityNamesList:null,consIpList:function(fromEntryEdit){var entries=Attendance.Entry.allDataList.entries,ipsList=new Array;for(var i in entries){var dayEntry=entries[i];for(var j in dayEntry){var punchinIp=dayEntry[j].punchin_userip,geoLocationIn=dayEntry[j].geoLocation_in;geoLocationIn&&""!==geoLocationIn&&"-"!==geoLocationIn||!punchinIp||-1!==ipsList.indexOf(punchinIp)||null!==Attendance.Entry.cityNamesList&&(null===Attendance.Entry.cityNamesList||Attendance.Entry.cityNamesList[punchinIp])||ipsList.push(punchinIp);var punchoutIp=dayEntry[j].punchout_userip,geoLocationOut=dayEntry[j].geoLocation_out;geoLocationOut&&""!==geoLocationOut&&"-"!==geoLocationOut||!punchoutIp||-1!==ipsList.indexOf(punchoutIp)||null!==Attendance.Entry.cityNamesList&&(null===Attendance.Entry.cityNamesList||Attendance.Entry.cityNamesList[punchoutIp])||ipsList.push(punchoutIp)}}if(""!==(ipsList=ipsList.toString())){var param={mode:"getCityNameByIp",conreqcsr:csrfToken,ipList:ipsList};$.post("/AttendanceAction.zp",param,function(rdata){Attendance.Entry.cityNamesList=$.extend(Attendance.Entry.cityNamesList,rdata.cityNames),fromEntryEdit&&Attendance.Entry.consEntriesPopup($(Attendance.Entry.LayoutId+" #ZPAtt_listViewEntries").children()[Attendance.Entry.selectedRowIndex])})}else fromEntryEdit&&Attendance.Entry.consEntriesPopup($(Attendance.Entry.LayoutId+" #ZPAtt_listViewEntries").children()[Attendance.Entry.selectedRowIndex])},getInputType:function(type,isCheckin){var className="IC-system",title=ZPI18N.getString("zp.web");return 2===type?(className="IC-mobi",title=ZPI18N.getString("zp.phone")):7===type||24===type?(className="IC-thump",title=ZPI18N.getString("zp.accessterminal")):3===type||21===type||40===type?(className="IC-country",title=ZPI18N.getString("zp.api")):15===type||10===type?(className="IC-like",title=ZPI18N.getString("zp.regularized")):25===type?title=isCheckin?ZPI18N.getString("zp.checkinfromcliq"):ZPI18N.getString("zp.checkoutfromcliq"):26===type?title=isCheckin?ZPI18N.getString("zp.checkinfrommail"):ZPI18N.getString("zp.checkoutfrommail"):27===type?title=isCheckin?ZPI18N.getString("zp.checkinfromconnect"):ZPI18N.getString("zp.checkoutfromconnect"):28===type?title=isCheckin?ZPI18N.getString("zp.checkinfromprojects"):ZPI18N.getString("zp.checkoutfromprojects"):30===type?(className="IC-mobi",title=ZPI18N.getString("zp.kiosk")):31===type&&(title=ZPI18N.getString("zp.kiosk")),{className:className,title:title}},balOtViewStartIndex:0,moreBalOtView:function(){Attendance.Entry.balOtViewIsEnd||(Attendance.Entry.balOtViewStartIndex+=50,Attendance.Entry.getBalanceOtView(!0))},getBalanceOtView:function(scroll){var param={mode:"getBalanceOtReport",conreqcsr:csrfToken},selectVal=Layout.Page.container.find(" #ZPAtt_otView_empName").val();"0"!==selectVal&&erecno!==selectVal&&""!==selectVal?param.erecno=selectVal:param.erecno=erecno,scroll?param.startIndex=Attendance.Entry.balOtViewStartIndex+1:Attendance.toggleLoadingDiv(!1,Layout.Page.container.find(" #ZPAtt_balOtView").parent().parent(),Layout.Page.container.find(" #ZPAtt_balOtView_emptyRecInfo")),$.post("/AttendanceReportAction.zp",param,function(rdata){if(rdata.fail)return Layout.Page.container.find(".table-responsive.H100.tabcont").hide(),Layout.Page.container.find(" #zp_page_loading").hide(),Layout.Page.container.find(" #s2id_ZPAtt_otView_empName").is(":visible")||Layout.Page.container.find(" #ZPAtt_otView_userPhoto").attr("src",ZPeople.CURR_USER.avatar).parent().show(),Attendance.consResetEmpSearch("ZPAtt_otView_empName",Layout.Page.container,!0,!1),Layout.Page.container.find(" #ZPAtt_balOtView").parent().parent().removeClass("section"),Attendance.noDataImg(5,"CR-noperm",Layout.Page.container.find(".ZPNdata i").eq(0)),void Layout.Page.container.find(" #ZPAtt_balOtView_emptyRecInfo").show().find(".no-para").html(ZPI18N.getString("zp.permdenied"));rdata.report&&(scroll||(Attendance.Entry.balOtViewStartIndex=0,Layout.Page.container.find("#ZPAtt_balOtView").parent().scrollTop(0)),rdata.report.length<50?Attendance.Entry.balOtViewIsEnd=!0:(ZPeople.FireScroll.reset(),Attendance.Entry.balOtViewIsEnd=!1),Attendance.Entry.showBalanceOtView(rdata,scroll))})},showBalanceOtView:function(rdata,isScroll){var data=rdata.report,userDetails=rdata.userDetails,isViewAllowedForSub=rdata.isViewAllowedForSub,isViewAllowed=rdata.isViewAllowed,repTable=Layout.Page.container.find(" #ZPAtt_balOtViewBody");if(isScroll||repTable.empty(),data){isScroll||(isadmin||isManageAttendanceData||isViewAllowedForSub||isViewAllowed?(Attendance.consResetEmpSearch("ZPAtt_otView_empName",Layout.Page.container,!0,!1),Layout.Page.container.find(" #ZPAtt_otView_userPhoto").parent().show(),userDetails?(Layout.Page.container.find(" #s2id_ZPAtt_otView_empName span").text(userDetails.empId+" "+userDetails.empName),Layout.Page.container.find(" #ZPAtt_otView_empName").val(userDetails.eNo),Layout.Page.container.find(" #ZPAtt_otView_userPhoto")[0].src=userDetails.empPhoto):(Layout.Page.container.find(" #s2id_ZPAtt_otView_empName span").html(ZPeople.CURR_USER.empid+" "+ZPeople.CURR_USER.name),Layout.Page.container.find(" #ZPAtt_otView_empName").val(0),Layout.Page.container.find(" #ZPAtt_otView_userPhoto")[0].src=ZPeople.CURR_USER.avatar)):Layout.Page.container.find(" #ZPAtt_otView_userPhoto").parent().hide());for(var i=0;data[i];i++){var trow="<tr class='ZPLRow'>";trow+="<td>"+data[i].startDate+"</td>",trow+="<td>"+data[i].endDate+"</td>",trow+="<td>"+Attendance.disHours(data[i].prevOtHours/60,!1,!0)+"</td>",trow+="<td>"+Attendance.disHours(data[i].expectedHours/60,!1,!0)+"</td>",trow+="<td>"+Attendance.disHours(data[i].workedHours/60,!1,!0)+"</td>",trow+="<td>"+Attendance.disHours(data[i].paidHours/60,!1,!0)+"</td>",trow+="<td>"+Attendance.disHours(data[i].adjustHours/60,!1,!0)+"</td>",trow+="<td>"+Attendance.disHours(data[i].balanceHours/60,!1,!0)+"</td>",repTable.append(trow)}0===repTable.children().length?(Layout.Page.container.find(" #ZPAtt_balOtView").parent().hide(),Layout.Page.container.find(" #ZPAtt_balOtView_emptyRecInfo").fadeIn(200),Layout.Page.container.find(" #ZPAtt_balOtView").parent().parent().removeClass("section"),Attendance.noDataImg(8,"CR-at-otview",Layout.Page.container.find(".ZPNdata i").eq(0)),Layout.Page.container.find(" #ZPAtt_balOtView_emptyRecInfo .no-para").html(ZPI18N.getString("zp.emptymsgforbalot"))):(Layout.Page.container.find(" #ZPAtt_balOtView_emptyRecInfo").hide(),Layout.Page.container.find(" #ZPAtt_balOtView").parent().fadeIn(200),Layout.Page.container.find(" #ZPAtt_balOtView").parent().parent().attr("class","Scrcont section")),Attendance.toggleLoadingDiv(!0),Layout.Page.container.find(" #ZPAtt_balOtView").parent().hasClass("tabcont")||ZPView.handleTablePosition()}},reLoadAttDetails:function(){if(document.removeEventListener("visibilitychange",Attendance.Entry.reLoadAttDetails),Attendance.Entry.reloadFromWMS){if(Attendance.Report.empReportTableData=null,Attendance.Report.dailyChartViewRep=null,Attendance.Report.userReport=null,null!=Layout.Page.urlmode){var ulrMode=Layout.Page.urlmode;-1===ulrMode.indexOf("attendance_entry")&&-1===ulrMode.indexOf("selfservice_user_attendance")||null!==Attendance.Entry.erecno?-1!==ulrMode.indexOf("attendance_report_dailyreport")?Attendance.Report.getDailyReport():-1!==ulrMode.indexOf("attendance_report_userreport")&&Attendance.Report.getUserReport():(ZPeople.reloadListViewAtt(ulrMode),ZPeople.reloadSelfServAtt=!1),-1!==ulrMode.indexOf("home_dashboard")?(ZPeople.reloadAttDataFunction(),ZPeople.reloadSelfServAtt=!0):ZPeople.reloadDashAttData||(ZPeople.reloadDashAttData=!0)}}else Attendance.Entry.reloadFromWMS=!0}},Attendance.Import={showImport:function(){ZPeople.BSModal.show($("#"+Layout.Page.pageId+" #ZPAtt_entry_importPopup")),$(Attendance.Entry.LayoutId+" #ZPAtt_entry_importSuccMsg").hide(),$(Attendance.Entry.LayoutId+" #ZPAtt_entry_importSuccvalues").hide(),$(Attendance.Entry.LayoutId+" #ZPAtt_entry_import").parent().parent().removeAttr("class"),$(Attendance.Entry.LayoutId+" #ZPAtt_entry_import").fadeIn(300),$(Attendance.Entry.LayoutId+" #ZPAtt_entry_impEx").hide(),$(Attendance.Entry.LayoutId+" #ZPAtt_entry_importFileConf").hide(),$(Attendance.Entry.LayoutId+" #ZPAtt_entry_importMap").hide(),$(Attendance.Entry.LayoutId+" #ZPAtt_entry_importInput").val(""),$(Attendance.Entry.LayoutId+" #ZPAtt_entry_importDesc").after($(Attendance.Entry.LayoutId+" #ZPAtt_entry_importInputCont").show()),$(Attendance.Entry.LayoutId+" #ZPAtt_entry_importInputCont span").text(ZPI18N.getString("zp.importfile")),$(Attendance.Entry.LayoutId+" #ZPAtt_entry_importInputCont").attr("class","btn btn-primary ZPbtnDefault"),$(Attendance.Entry.LayoutId+" #ZPAtt_entry_importNext").hide(),$(Attendance.Entry.LayoutId+" #ZPAtt_entry_importPrevious").hide(),$(Attendance.Entry.LayoutId+" #ZPAtt_entry_importHeader li").first().attr("class","active"),$(Attendance.Entry.LayoutId+" #ZPAtt_entry_importHeader li").last().removeAttr("class"),Layout.Page.container.find("#ZPAtt_entry_importPopup .modal-body").find("#zp_page_loading").remove(),Layout.Page.container.find("#ZPAtt_entry_importPopup .modal-body").children().show(),Attendance.Import.getPendingImport(),Layout.Page.container.find("#importErrDiv").hide()},onInputChange:function(){var fileName=$(Attendance.Entry.LayoutId+" #ZPAtt_entry_importInput").val();$(Attendance.Entry.LayoutId+" #ZPAtt_entry_importProgress").hide(),$(Attendance.Entry.LayoutId+" #ZPAtt_entry_importProgress").next().show(),fileName=fileName.replace("C:\\fakepath\\",""),$(Attendance.Entry.LayoutId+" #ZPAtt_entry_importFName").text(fileName),$(Attendance.Entry.LayoutId+" #ZPAtt_entry_importSuccMsg").hide(),$(Attendance.Entry.LayoutId+" #ZPAtt_entry_importSuccvalues").hide(),$(Attendance.Entry.LayoutId+" #ZPAtt_entry_importProgress").after($(Attendance.Entry.LayoutId+" #ZPAtt_entry_importInputCont")),$(Attendance.Entry.LayoutId+" #ZPAtt_entry_importInputCont span").text(ZPI18N.getString("zp.removeandnew")),$(Attendance.Entry.LayoutId+" #ZPAtt_entry_importInputCont").attr("class","btn btn-default ZPbtnDefault");var extn=fileName.split(".").pop();"xls"===extn||"csv"===extn?($(Attendance.Entry.LayoutId+" #ZPAtt_entry_importFName").next().attr("class","IC-rou-tik ML5 filetck"),$(Attendance.Entry.LayoutId+" #ZPAtt_entry_importNext").fadeIn(300),Layout.Page.container.find("#ZPAtt_entry_importNext").attr("disabled",!1),$(Attendance.Entry.LayoutId+" #ZPAtt_entry_importNext").off("click").on("click",function(){Attendance.Import.submitImport()})):($(Attendance.Entry.LayoutId+" #ZPAtt_entry_importFName").next().attr("class","IC-r-close ML5 PR S18 red"),$(Attendance.Entry.LayoutId+" #ZPAtt_entry_importNext").hide(),$(Attendance.Entry.LayoutId+" #ZPAtt_entry_importInput").val(""),""===$(Attendance.Entry.LayoutId+" #ZPAtt_entry_importFName").text()&&$(Attendance.Entry.LayoutId+" #ZPAtt_entry_importFName").text(ZPI18N.getString("zp.choosefile"))),$(Attendance.Entry.LayoutId+" #ZPAtt_entry_import").hide(),$(Attendance.Entry.LayoutId+" #ZPAtt_entry_impEx").hide(),$(Attendance.Entry.LayoutId+" #ZPAtt_entry_importFileConf").fadeIn(300),$(Attendance.Entry.LayoutId+" #ZPAtt_entry_importMap").hide()},submitImport:function(){$(Attendance.Entry.LayoutId+" #ZPAtt_entry_importNext").off("click"),Attendance.Import.ProgressBarWidth=0,$(Attendance.Entry.LayoutId+" #ZPAtt_entry_importProgress").next().hide(),$(Attendance.Entry.LayoutId+" #ZPAtt_entry_importProgress div").width(Attendance.Import.ProgressBarWidth+"%").parent().show(),Attendance.Import.showProgress();var form=$(Attendance.Entry.LayoutId+" #ZPAtt_entry_importInput")[0].form;""!==$(Attendance.Entry.LayoutId+" #ZPAtt_entry_importInput").val()&&(Layout.Page.container.find("#ZPAtt_entry_importNext").attr("disabled",!0),$(Attendance.Entry.LayoutId+" #ZPAtt_entry_importFormCsrf").val(csrfToken),form.action="AttendanceImport.zp",form.submit())},ProgressBarWidth:0,showProgress:function(){$(Attendance.Entry.LayoutId+" #ZPAtt_entry_importProgress div").width(Attendance.Import.ProgressBarWidth+"%"),Attendance.Import.ProgressBarWidth+=2,Attendance.Import.ProgressBarWidth<=99&&setTimeout(Attendance.Import.showProgress,1)},getPendingImport:function(){var pendingMsg=$(Attendance.Entry.LayoutId+" #ZPAtt_entry_importMsg"),manBrk=$(Attendance.Entry.LayoutId+" #ZPAtt_entry_impEx");pendingMsg.parent().hide();var param={mode:"getPendingImportInfo",conreqcsr:csrfToken};$.post("/AttendanceAction.zp",param,function(rdata){"empty"===rdata.tableInfo.tableHeaders?(pendingMsg.off("click"),pendingMsg.html(""),pendingMsg.parent().hide()):(pendingMsg.attr("class","blu CP"),pendingMsg.off("click").on("click",function(){Attendance.Import.showMapping(rdata.tableInfo)}),pendingMsg.html(rdata.tableInfo.recordCount+" "+ZPI18N.getString("zp.recordspending")),pendingMsg.parent().fadeIn(300)),!1===rdata.tableInfo.isManualBreak?manBrk.find("[id*=manSpec]").hide():manBrk.find("[id*=manSpec]").show(),manBrk.fadeIn(300)})},showMapping:function(obj){Layout.Page.container.find("#ZPAtt_entry_importNext").attr("disabled",!1),$(Attendance.Entry.LayoutId+" #ZPAtt_entry_import").hide(),$(Attendance.Entry.LayoutId+" #ZPAtt_entry_impEx").hide(),$(Attendance.Entry.LayoutId+" #ZPAtt_entry_importFileConf").hide(),$(Attendance.Entry.LayoutId+" #ZPAtt_entry_importMap").fadeIn(300),$(Attendance.Entry.LayoutId+" #ZPAtt_entry_importPrevious").fadeIn(300),$(Attendance.Entry.LayoutId+" #ZPAtt_entry_importNext").fadeIn(300),$(Attendance.Entry.LayoutId+" #ZPAtt_entry_importHeader li").last().attr("class","active"),$(Attendance.Entry.LayoutId+" #ZPAtt_entry_importNext").off("click").on("click",function(){Attendance.Import.submitMapping(obj)}),-1===Attendance.Entry.LayoutId.indexOf("attendance-entry-balanceotview")&&-1===Attendance.Entry.LayoutId.indexOf("attendance-entry-otview")||$(Attendance.Entry.LayoutId+" #ZPAtt_entry_importNext").off("click").on("click",function(){Attendance.Import.submitMappingBalOrRep(obj.fileFormat)});var rArray=obj.tableHeaders,res="<option value='None' selected='selected'>-- "+ZPI18N.getString("zp.select")+" --</option>";for(var i in rArray)res+="<option value='"+i+"'>"+rArray[i]+"</option>";if($(Attendance.Entry.LayoutId+" #ZPAtt_entry_importMap select").select2(),-1===Attendance.Entry.LayoutId.indexOf("attendance-entry-balanceotview")&&-1===Attendance.Entry.LayoutId.indexOf("attendance-entry-otview"))for(var i in"csv"!==obj.fileFormat?$(Attendance.Entry.LayoutId+" #ZPAtt_entry_importDateFor label").html(ZPI18N.getString("zp.dateformat")):$(Attendance.Entry.LayoutId+" #ZPAtt_entry_importDateFor label").html("<font>"+ZPI18N.getString("zp.dateformat")+"</font>"),$(Attendance.Entry.LayoutId+" #ZPAtt_entry_breakCol").hide(),!0===obj.isManualBreak&&obj.recordCount<=2e3&&$(Attendance.Entry.LayoutId+" #ZPAtt_entry_breakCol").show(),$(Attendance.Entry.LayoutId+" #ZPAtt_entry_importDateFor select").select2("val","0"),$(Attendance.Entry.LayoutId+" #ZPAtt_entry_importIds select").html(res),$(Attendance.Entry.LayoutId+" #ZPAtt_entry_importCheckIn select").html(res),$(Attendance.Entry.LayoutId+" #ZPAtt_entry_importCheckOut select").html(res),$(Attendance.Entry.LayoutId+" #ZPAtt_entry_breakCol select").html(res),rArray)-1!==rArray[i].toLowerCase().indexOf("in")?$(Attendance.Entry.LayoutId+" #ZPAtt_entry_importCheckIn select").select2("val",i):-1!==rArray[i].toLowerCase().indexOf("out")?$(Attendance.Entry.LayoutId+" #ZPAtt_entry_importCheckOut select").select2("val",i):-1!==rArray[i].toLowerCase().indexOf("brk")?$(Attendance.Entry.LayoutId+" #ZPAtt_entry_breakCol select").select2("val",i):-1===rArray[i].toLowerCase().indexOf("employee")&&-1===rArray[i].toLowerCase().indexOf("id")&&-1===rArray[i].toLowerCase().indexOf("user")&&-1===rArray[i].toLowerCase().indexOf("map")||$(Attendance.Entry.LayoutId+" #ZPAtt_entry_importIds select").select2("val",i);else $(Attendance.Entry.LayoutId+" #ZPAtt_entry_balRep_importIds select").html(res),$(Attendance.Entry.LayoutId+" #ZPAtt_entry_balRep_importAdjHrs select").html(res),$(Attendance.Entry.LayoutId+" #ZPAtt_entry_balRep_importPaidHrs select").html(res);$(Attendance.Entry.LayoutId+" #ZPAtt_entry_importMsg").off("click"),$(Attendance.Entry.LayoutId+" #ZPAtt_entry_importMsg").attr("class","blu"),$(Attendance.Entry.LayoutId+" #ZPAtt_entry_importMsg").parent().fadeIn(300),obj.error&&"rowExceededLimit"===obj.error?(ZPeople.Message.showFailureMsg(ZPI18N.getString("zp.performanceImportcntexceederror"),!0),Layout.Page.container.find("#ZPAtt_entry_importNext").attr("disabled",!0),Layout.Page.container.find("#ZPAtt_entry_importMsg").text("")):void 0!==obj.recordCount?$(Attendance.Entry.LayoutId+" #ZPAtt_entry_importMsg").text(obj.recordCount+" "+ZPI18N.getString("zp.recordsfound")):$(Attendance.Entry.LayoutId+" #ZPAtt_entry_importMsg").text("0 "+ZPI18N.getString("zp.recordsfound")),$(Attendance.Entry.LayoutId+" #ZPAtt_entry_importMap select").select2()},submitMapping:function(obj){Attendance.Entry.reloadFromWMS=!1;var si_Id=$(Attendance.Entry.LayoutId+" #ZPAtt_entry_importIds select")[0].selectedIndex,si_punchIn=$(Attendance.Entry.LayoutId+" #ZPAtt_entry_importCheckIn select")[0].selectedIndex,si_punchOut=$(Attendance.Entry.LayoutId+" #ZPAtt_entry_importCheckOut select")[0].selectedIndex,si_breakCol=0;if(!0===obj.isManualBreak&&(si_breakCol=$(Attendance.Entry.LayoutId+" #ZPAtt_entry_breakCol select")[0].selectedIndex),0!==si_Id&&0!==si_punchIn&&0!==si_punchOut){var param={mode:"attImportMapping",mailId:si_Id-1,punchInId:si_punchIn-1,punchOutId:si_punchOut-1,descId:-1,conreqcsr:csrfToken};if("0"!==$(Attendance.Entry.LayoutId+" #ZPAtt_entry_importDateFor select").val()&&(param.dateFormat=$(Attendance.Entry.LayoutId+" #ZPAtt_entry_importDateFor select").val()),param.isBulkImport=obj.recordCount>2e3,param.fileName=obj.fileName,0!==si_breakCol){if(!0===param.isBulkImport)return void ZPeople.Message.showFailureMsg(ZPI18N.getString("zp.att.importbreakerr"));param.breakColId=si_breakCol-1}"csv"!==obj.fileFormat||param.dateFormat?(Layout.Page.container.find("#ZPAtt_entry_importNext").attr("disabled",!0),Layout.Page.container.find("#ZPAtt_entry_importPopup .modal-body").children().hide(),Layout.Page.container.find("#ZPAtt_entry_importPopup .modal-body").append(ZPeople.LOADING_HTML),$.post("/AttendanceAction.zp",param,function(resultData){if(Layout.Page.container.find("#ZPAtt_entry_importPopup .modal-body").find("#zp_page_loading").remove(),Layout.Page.container.find("#ZPAtt_entry_importPopup .modal-body").children().show(),resultData.msg){if($(Attendance.Entry.LayoutId+" #ZPAtt_entry_import").parent().parent().attr("class","ZPImfrm ZPRecList"),$(Attendance.Entry.LayoutId+" #ZPAtt_entry_importMap").hide(),$(Attendance.Entry.LayoutId+" #ZPAtt_entry_importMsg").parent().hide(),$(Attendance.Entry.LayoutId+" #ZPAtt_entry_importSuccMsg").fadeIn(300),$(Attendance.Entry.LayoutId+" #ZPAtt_entry_importSuccvalues").fadeIn(300),$(Attendance.Entry.LayoutId+" #ZPAtt_entry_importSuccvalues span")[1].innerHTML="0",resultData.msg.successCount&&($(Attendance.Entry.LayoutId+" #ZPAtt_entry_importSuccvalues span")[1].innerHTML=resultData.msg.successCount),$(Attendance.Entry.LayoutId+" #ZPAtt_entry_importSuccvalues span")[0].innerHTML="0",resultData.msg.totalCount&&($(Attendance.Entry.LayoutId+" #ZPAtt_entry_importSuccvalues span")[0].innerHTML=resultData.msg.totalCount),$(Attendance.Entry.LayoutId+" #ZPAtt_entry_importPrevious").hide(),$(Attendance.Entry.LayoutId+" #ZPAtt_entry_importNext").hide(),Attendance.Entry.getList("week","zero"),resultData.msg.emptyEmpIds.length>0||resultData.msg.skippedEmpInfo.length>0||resultData.msg.errorInfo.length>0){var rowNumber=0;if(Layout.Page.container.find("#importErrDiv").show(),Layout.Page.container.find("#importErrTBody").find("tr").remove(),resultData.msg.skippedEmpInfo.length>0){for(length=resultData.msg.skippedEmpInfo.length,Layout.Page.container.find("#importErrTBody").append($("<tr class='ZPLRow' ><td colspan=2 class='err-lst'>"+ZPI18N.getString("zp.invalidempinfo")+"<ul></ul></td></tr>")),i=0;i<length;i++)$($(Layout.Page.container.find("#importErrTBody").find(".ZPLRow")[rowNumber]).find("ul")).append("<li>"+$("<div/>").text(resultData.msg.skippedEmpInfo[i]).html()+"</li>");rowNumber++}if(resultData.msg.emptyEmpIds.length>0){for(length=resultData.msg.emptyEmpIds.length,Layout.Page.container.find("#importErrTBody").append($("<tr class='ZPLRow' ><td colspan=2 class='err-lst'>"+ZPI18N.getString("zp.emptyempids")+"<ul></ul></td></tr>")),i=0;i<length;i++)$($(Layout.Page.container.find("#importErrTBody").find(".ZPLRow")[rowNumber]).find("ul")).append("<li>"+resultData.msg.emptyEmpIds[i]+"</li>");rowNumber++}resultData.msg.errorInfo.length>0&&resultData.msg.errorInfo.forEach(function(obj,index){for(Layout.Page.container.find("#importErrTBody").append($("<tr class='ZPLRow'><td class='P0I W80'>Row "+obj[0]+" :</td><td></td></tr>")),i=1;i<obj.length;i++)$($(Layout.Page.container.find("#importErrTBody").find(".ZPLRow")[index+rowNumber]).find("td")[1]).append(obj[i]+"<br>")})}}else if(resultData.fail||resultData.error){var failMsg=resultData.fail?resultData.fail:ZPI18N.getString("zp.unabletoprocess");failMsg==ZPI18N.getString("zp.att.importschedule")?(Layout.Page.container.find("#ZPAtt_entry_importPopup").find("#ZPAtt_entry_importHeader").find(".close").click(),ZPeople.Message.showWarningMsg(failMsg)):(ZPeople.Message.showFailureMsg(failMsg),Layout.Page.container.find("#ZPAtt_entry_importNext").attr("disabled",!1),Layout.Page.container.find("#ZPAtt_entry_importNext").off("click").on("click",function(){Attendance.Import.submitMapping(obj)}))}})):ZPeople.Message.showFailureMsg(ZPI18N.getString("zp.choosereqcolumns"))}else ZPeople.Message.showFailureMsg(ZPI18N.getString("zp.choosereqcolumns"))}},Attendance.CustomFireScroll={TRIGGERED:!1,FIRESCROLL_EVENT:{},getCurrentMode:function(){return Layout.Page.currentmode.replace(/\//g,"-")},init:function(callbackFunc,obj){"string"==typeof obj&&(obj=$(obj)),"object"==typeof obj&&obj.scroll(function(){if(Attendance.CustomFireScroll.getFireScrollPropertie().triggered)return!1;var actualDivHeight=this.scrollHeight-100;$(this).scrollTop()+$(this).height()>actualDivHeight&&(Attendance.CustomFireScroll.getFireScrollPropertie().triggered=!0,callbackFunc())})},getFireScrollPropertie:function(){var mode=Attendance.CustomFireScroll.getCurrentMode();return Attendance.CustomFireScroll.initializeMode(mode),Attendance.CustomFireScroll.FIRESCROLL_EVENT[mode]},setRecordCount:function(recordCount){Attendance.CustomFireScroll.getFireScrollPropertie().count=recordCount},increaseRecordCount:function(recordCount){Attendance.CustomFireScroll.getFireScrollPropertie().count+=recordCount},setParam:function(paramName,paramVal){Attendance.CustomFireScroll.getFireScrollPropertie()[paramName]=paramVal},initializeMode:function(mode){void 0===Attendance.CustomFireScroll.FIRESCROLL_EVENT[mode]&&(Attendance.CustomFireScroll.FIRESCROLL_EVENT[mode]={},Attendance.CustomFireScroll.FIRESCROLL_EVENT[mode].triggered=!1)},reset:function(){Attendance.CustomFireScroll.getFireScrollPropertie().triggered=!1}},Attendance.Audit={initialised:!1,init:function(){Attendance.Audit.initialised?Layout.Page.container.find("#ZPAtt_Audit_FilActionType").val("0").trigger("change"):(Attendance.Audit.initialiseUIComponent(),Attendance.Audit.initialised=!0),Attendance.Audit.fetchAuditData(void 0,!0)},initialiseUIComponent:function(){Layout.Page.container.find("#ZPAtt_Audit_FilActionType").select2(),Layout.Page.container.find("#ZPAtt_Audit_FilPunchType").select2(),Attendance.consResetEmpSearch("ZPAtt_Audit_FilEmployee",Layout.Page.container,!0,!1)},dateFilterChange:function(){var date=Layout.Page.container.find("#ZPAtt_Audit_FilDate").val().trim();Attendance.Audit.fetchAuditData(date)},auditData:null,fetchAuditData:function(date,isFromInit){var param={};param.conreqcsr=csrfToken,param.mode="getAuditHistory",date?param.auditDate=date:Attendance.Entry.auditDate&&(param.auditDate=moment(Attendance.Entry.auditDate,"YYYY-MM-DD").format(dateFmt.toUpperCase()),Layout.Page.container.find("#ZPAtt_Audit_FilDate").val(param.auditDate)),"0"!==Layout.Page.container.find("#ZPAtt_Audit_FilActionType").val()&&(param.actionType=Layout.Page.container.find("#ZPAtt_Audit_FilActionType").val()),1==Layout.Page.container.find("#ZPAtt_Audit_FilPunchType").length&&"0"!==Layout.Page.container.find("#ZPAtt_Audit_FilPunchType").val()&&(param.punchType=Layout.Page.container.find("#ZPAtt_Audit_FilPunchType").val()),isFromInit?Attendance.Entry.erecforReport&&(param.erecno=Attendance.Entry.erecforReport,Layout.Page.container.find("#ZPAtt_Audit_FilEmployee").val(Attendance.Entry.erecforReport).trigger("change"),null!=Attendance.Entry.searchedUsername?Layout.Page.container.find("#s2id_ZPAtt_Audit_FilEmployee span").text(Attendance.Entry.searchedUsername):Layout.Page.container.find("#s2id_ZPAtt_Audit_FilEmployee span").html(ZPeople.CURR_USER.empid+" "+ZPeople.CURR_USER.name)):param.erecno=Layout.Page.container.find("#ZPAtt_Audit_FilEmployee").val(),Layout.Page.container.find('div[id^="ZPAtt_Audit_ActivityBody_"]').remove(),Layout.Page.container.find("#ZPAtt_Audit_NoData").hide(),Attendance.Break.appendLoader(Layout.Page.container.find("#ZPAtt_AuditContent"),!0),$.post("/AttendanceViewAction.zp",param,function(result){Layout.Page.container.find("#ZPAtt_Audit_FilDate").val(result.auditDate),Attendance.Audit.auditData=result,Attendance.Audit.constructAuditPage()})},filterSearch:function(){var param={};param.conreqcsr=csrfToken,param.mode="getAuditHistory",param.auditDate=Layout.Page.container.find("#ZPAtt_Audit_FilDate").val().trim(),param.erecno=Layout.Page.container.find("#ZPAtt_Audit_FilEmployee").val(),"0"!==Layout.Page.container.find("#ZPAtt_Audit_FilActionType").val()&&(param.actionType=Layout.Page.container.find("#ZPAtt_Audit_FilActionType").val()),1==Layout.Page.container.find("#ZPAtt_Audit_FilPunchType").length&&"0"!==Layout.Page.container.find("#ZPAtt_Audit_FilPunchType").val()&&(param.punchType=Layout.Page.container.find("#ZPAtt_Audit_FilPunchType").val()),Layout.Page.container.find('div[id^="ZPAtt_Audit_ActivityBody_"]').remove(),Layout.Page.container.find("#ZPAtt_Audit_NoData").hide(),Attendance.Break.appendLoader(Layout.Page.container.find("#ZPAtt_AuditContent"),!0),$.post("/AttendanceViewAction.zp",param,function(result){Layout.Page.container.find("#ZPAtt_Audit_FilDate").val(result.auditDate),Attendance.Audit.auditData=result,Attendance.Audit.constructAuditPage()})},resetInputs:function(){Attendance.Entry.erecforReport?(Layout.Page.container.find("#ZPAtt_Audit_FilEmployee").val(Attendance.Entry.erecforReport).trigger("change"),null!=Attendance.Entry.searchedUsername?Layout.Page.container.find("#s2id_ZPAtt_Audit_FilEmployee span").text(Attendance.Entry.searchedUsername):Layout.Page.container.find("#s2id_ZPAtt_Audit_FilEmployee span").html(ZPeople.CURR_USER.empid+" "+ZPeople.CURR_USER.name)):(Layout.Page.container.find("#ZPAtt_Audit_FilEmployee").val(ZPeople.CURR_USER.usererec).trigger("change"),Layout.Page.container.find("#s2id_ZPAtt_Audit_FilEmployee span").html(ZPeople.CURR_USER.empid+" "+ZPeople.CURR_USER.name)),Layout.Page.container.find("#ZPAtt_Audit_FilActionType").val("0").trigger("change"),1==Layout.Page.container.find("#ZPAtt_Audit_FilPunchType").length&&Layout.Page.container.find("#ZPAtt_Audit_FilPunchType").val("0").trigger("change"),Attendance.Audit.filterSearch()},ADD:1,EDIT:2,DELETE:3,REGDELETE_READD:4,CANCEL:5,lastModifiedDate:"",constructAuditPage:function(){if(Attendance.Break.appendLoader(Layout.Page.container.find("#ZPAtt_AuditContent"),!1),0!=Attendance.Audit.auditData.auditArr.length){Attendance.Audit.lastModifiedDate="",Attendance.Audit.uiLastModifiedDate="";for(var index=0;index<Attendance.Audit.auditData.auditArr.length;index++){var auditObj=Attendance.Audit.auditData.auditArr[index];""==Attendance.Audit.lastModifiedDate?(Attendance.Audit.lastModifiedDate=auditObj.modifiedDate,Attendance.Audit.uiLastModifiedDate=auditObj.uiConstructModifiedDate,Attendance.Audit.constructAuditStructure()):Attendance.Audit.lastModifiedDate!=auditObj.modifiedDate&&(Attendance.Audit.lastModifiedDate=auditObj.modifiedDate,Attendance.Audit.uiLastModifiedDate=auditObj.uiConstructModifiedDate,Attendance.Audit.constructAuditStructure()),auditObj.actionType==Attendance.Audit.ADD?Attendance.Audit.appendAddAuditType(auditObj):auditObj.actionType==Attendance.Audit.EDIT?Attendance.Audit.appendEditAuditType(auditObj):auditObj.actionType==Attendance.Audit.DELETE||auditObj.actionType==Attendance.Audit.CANCEL?Attendance.Audit.appendDeleteAuditType(auditObj):auditObj.actionType==Attendance.Audit.REGDELETE_READD&&Attendance.Audit.appendAddAuditType(auditObj)}Layout.Page.container.find('div[id^="ZPAtt_Audit_ActivityBody_"]').show(),$("#ZPAtt_Audit_NoData").hide()}else Layout.Page.container.find("#ZPAtt_Audit_NoData").show()},constructAuditStructure:function(){var html='<div class="aclog_cont" id="ZPAtt_Audit_ActivityBody_'+Attendance.Audit.uiLastModifiedDate+'" style="display: none">';html+='<div class="aclog_detl" id="ZPAtt_Audit_ActivityBodyCont_'+Attendance.Audit.uiLastModifiedDate+'">',html+='<div class="cur_day">',html+='<span id="ZPAtt_Audit_Date">'+Attendance.Audit.lastModifiedDate+"</span>",html+="</div></div></div>",Layout.Page.container.find("#ZPAtt_AuditContent").append(html)},appendAddAuditType:function(auditObj){var html='<div class="event add"><span class="tline">'+auditObj.modifiedTime+"</span>";if(html+="<div>"+auditObj.message+'<i class="'+Attendance.Audit.getInputTypeClass(auditObj.displayType)+'"></i>',html+=Attendance.Audit.constructApprovalRecordView(auditObj),html+="</div>",auditObj.dataArr){html+='<div class="att_lgentry">';for(var index=0;index<auditObj.dataArr.length;index++){var indAudit=auditObj.dataArr[index];5==auditObj.inputType||33==auditObj.inputType||10==auditObj.inputType||15==auditObj.inputType||22==auditObj.inputType||23==auditObj.inputType?(html+='<div class="att_lgentryrw">',indAudit.fromTime&&(html+='<div class="att_pnchdt in"><span class="S12 dgry">'+ZPI18N.getString("zp.from")+"</span>",html+=Attendance.Audit.getAttDateTimeHtml(indAudit,1),html+="</div>"),indAudit.toTime&&(html+='<div class="att_pnchdt out"><span class="S12 dgry">'+ZPI18N.getString("zp.to")+"</span>",html+=Attendance.Audit.getAttDateTimeHtml(indAudit,2),html+="</div>"),html+="</div>"):32==auditObj.inputType?(html+='<div class="att_lgentryrw">',null==indAudit.daysTaken&&null==indAudit.session?(html+='<div class="duration"><span class="S12 dgry">'+ZPI18N.getString("zp.duration")+"</span>",html+=indAudit.timeDiff+ZPI18N.getString("zp.lms.hours"),html+="</div>",html+='<div class="duration"><span class="S12 dgry">'+ZPI18N.getString("zp.fromtotime")+"</span>",html+=indAudit.fromTime+"-",html+=indAudit.toTime,html+="</div>"):0==indAudit.daysTaken?(html+="<div><span>"+ZPI18N.getString("zp.duration")+"</span><br>",html+="<span><b>"+ZPI18N.getString("zp.fullday")+"</b></span>",html+="</div>"):1==indAudit.daysTaken?(html+='<div class="duration"><span class="S12 dgry">'+ZPI18N.getString("zp.duration")+"</span>",html+="<span><b>"+ZPI18N.getString("zp.halfday")+"</b></span>",html+="</div>",1==indAudit.session?(html+='<div class="duration"><span class="S12 dgry">'+ZPI18N.getString("zp.lms.session")+"</span>",html+="<span><b>"+ZPI18N.getString("zp.firsthalf")+"</b></span>",html+="</div>"):(html+='<div class="duration"><span class="S12 dgry">'+ZPI18N.getString("zp.lms.session")+"</span>",html+="<span><b>"+ZPI18N.getString("zp.secondhalf")+"</b></span>",html+="</div>")):2==indAudit.daysTaken&&(html+='<div class="duration"><span class="S12 dgry">'+ZPI18N.getString("zp.duration")+"</span>",html+="<span><b>"+ZPI18N.getString("zp.quarterday")+"</b></span>",html+="</div>",1==indAudit.session?(html+='<div class="duration"><span class="S12 dgry">'+ZPI18N.getString("zp.lms.session")+"</span>",html+="<span><b>"+ZPI18N.getString("zp.firstquarter")+"</b></span>",html+="</div>"):2==indAudit.session?(html+='<div class="duration"><span class="S12 dgry">'+ZPI18N.getString("zp.lms.session")+"</span>",html+="<span><b>"+ZPI18N.getString("zp.secondquarter")+"</b></span>",html+="</div>"):3==indAudit.session?(html+='<div class="duration"><span class="S12 dgry">'+ZPI18N.getString("zp.lms.session")+"</span>",html+="<span><b>"+ZPI18N.getString("zp.thirdquarter")+"</b></span>",html+="</div>"):(html+='<div class="duration"><span class="S12 dgry">'+ZPI18N.getString("zp.lms.session")+"</span>",html+="<span><b>"+ZPI18N.getString("zp.fourthquarter")+"</b></span>",html+="</div>")),html+="</div>"):(html+='<div class="att_lgentryrw">',indAudit.fromTime&&(html+='<div class="att_pnchdt in"><span class="S12 dgry">'+ZPI18N.getString("zp.from")+"</span>",html+=Attendance.Audit.getAttDateTimeHtml(indAudit,1),html+="</div>"),indAudit.toTime&&(html+='<div class="att_pnchdt out"><span class="S12 dgry">'+ZPI18N.getString("zp.to")+"</span>",html+=Attendance.Audit.getAttDateTimeHtml(indAudit,2),html+="</div>"),html+="</div>")}html+="</div>"}html+="</div>",Layout.Page.container.find("#ZPAtt_Audit_ActivityBodyCont_"+Attendance.Audit.uiLastModifiedDate).append(html)},appendEditAuditType:function(auditObj){var html='<div class="event edit"><span class="tline">'+auditObj.modifiedTime+"</span>";html+="<div>"+auditObj.message+'<i class="'+Attendance.Audit.getInputTypeClass(auditObj.displayType)+'"></i>',html+=Attendance.Audit.constructApprovalRecordView(auditObj),html+="</div>",html+='<div class="att_lgentry"><div class="att_lgentryrw"><div class="att_pnchdt P0I"><span>'+ZPI18N.getString("zp.preventry")+"</span></div>",html+='<div class="att_pnchdt P0I"><span>'+ZPI18N.getString("zp.newentry")+"</span></div></div>";for(var index=0;index<auditObj.dataArr.length;index++){var indAudit=auditObj.dataArr[index];indAudit.newFromTime&&(html+='<div class="att_lgentryrw"><div class="att_pnchdt in"><span class="S12 dgry">'+ZPI18N.getString("zp.from")+"</span>",html+=Attendance.Audit.getAttDateTimeHtml(indAudit,1),html+='<div class="arwto"><i class="IC-ar-rgt gry"></i></div></div>',html+='<div class="att_pnchdt in"><span class="S12 dgry">'+ZPI18N.getString("zp.from")+"</span>",html+=Attendance.Audit.getAttDateTimeHtml(indAudit,3),html+="</div></div>"),indAudit.newToTime&&(html+='<div class="att_lgentryrw"><div class="att_pnchdt out"><span class="S12 dgry">'+ZPI18N.getString("zp.to")+"</span>",html+=Attendance.Audit.getAttDateTimeHtml(indAudit,2),html+='<div class="arwto"><i class="IC-ar-rgt gry"></i></div></div>',html+='<div class="att_pnchdt out"><span class="S12 dgry">'+ZPI18N.getString("zp.to")+"</span>",html+=Attendance.Audit.getAttDateTimeHtml(indAudit,4),html+="</div></div>")}html+="</div></div>",Layout.Page.container.find("#ZPAtt_Audit_ActivityBodyCont_"+Attendance.Audit.uiLastModifiedDate).append(html)},appendDeleteAuditType:function(auditObj){var html='<div class="event dlt"><span class="tline">'+auditObj.modifiedTime+"</span>";if(html+="<div>"+auditObj.message+'<i class="'+Attendance.Audit.getInputTypeClass(auditObj.displayType)+'"></i>',html+=Attendance.Audit.constructApprovalRecordView(auditObj),html+="</div>",auditObj.dataArr)for(var index=0;index<auditObj.dataArr.length;index++){var indAudit=auditObj.dataArr[index];html+='<div class="att_lgentry"><div class="att_lgentryrw">',32==auditObj.inputType?null==indAudit.daysTaken&&null==indAudit.session?(html+='<div class="duration"><span class="S12 dgry">'+ZPI18N.getString("zp.duration")+"</span>",html+=indAudit.timeDiff+ZPI18N.getString("zp.lms.hours"),html+="</div>",html+='<div class="duration"><span class="S12 dgry">'+ZPI18N.getString("zp.fromtotime")+"</span>",html+=indAudit.fromTime+"-",html+=indAudit.toTime,html+="</div>"):0==indAudit.daysTaken?(html+="<div><span>"+ZPI18N.getString("zp.duration")+"</span><br>",html+="<span><b>"+ZPI18N.getString("zp.fullday")+"</b></span>",html+="</div>"):1==indAudit.daysTaken?(html+='<div class="duration"><span class="S12 dgry">'+ZPI18N.getString("zp.duration")+"</span>",html+="<span><b>"+ZPI18N.getString("zp.halfday")+"</b></span>",html+="</div>",1==indAudit.session?(html+='<div class="duration"><span class="S12 dgry">'+ZPI18N.getString("zp.lms.session")+"</span>",html+="<span><b>"+ZPI18N.getString("zp.firsthalf")+"</b></span>",html+="</div>"):(html+='<div class="duration"><span class="S12 dgry">'+ZPI18N.getString("zp.lms.session")+"</span>",html+="<span><b>"+ZPI18N.getString("zp.secondhalf")+"</b></span>",html+="</div>")):2==indAudit.daysTaken&&(html+='<div class="duration"><span class="S12 dgry">'+ZPI18N.getString("zp.duration")+"</span>",html+="<span><b>"+ZPI18N.getString("zp.quarterday")+"</b></span>",html+="</div>",1==indAudit.session?(html+='<div class="duration"><span class="S12 dgry">'+ZPI18N.getString("zp.lms.session")+"</span>",html+="<span><b>"+ZPI18N.getString("zp.firstquarter")+"</b></span>",html+="</div>"):2==indAudit.session?(html+='<div class="duration"><span class="S12 dgry">'+ZPI18N.getString("zp.lms.session")+"</span>",html+="<span><b>"+ZPI18N.getString("zp.secondquarter")+"</b></span>",html+="</div>"):3==indAudit.session?(html+='<div class="duration"><span class="S12 dgry">'+ZPI18N.getString("zp.lms.session")+"</span>",html+="<span><b>"+ZPI18N.getString("zp.thirdquarter")+"</b></span>",html+="</div>"):(html+='<div class="duration"><span class="S12 dgry">'+ZPI18N.getString("zp.lms.session")+"</span>",html+="<span><b>"+ZPI18N.getString("zp.fourthquarter")+"</b></span>",html+="</div>")):(indAudit.fromTime&&(html+='<div class="att_pnchdt in"><span class="S12 dgry">'+ZPI18N.getString("zp.from")+"</span>",html+=Attendance.Audit.getAttDateTimeHtml(indAudit,1),html+="</div>"),indAudit.toTime&&(html+='<div class="att_pnchdt out"><span class="S12 dgry">'+ZPI18N.getString("zp.to")+"</span>",html+=Attendance.Audit.getAttDateTimeHtml(indAudit,2),html+="</div>")),html+="</div></div>"}html+="</div>",Layout.Page.container.find("#ZPAtt_Audit_ActivityBodyCont_"+Attendance.Audit.uiLastModifiedDate).append(html)},constructApprovalRecordView:function(auditObj){var html="";return auditObj.permissionRecordId&&auditObj.permissionFormId?html+='<a class="view" onclick="Attendance.Permissions.getPermissionApprovalDetails(\''+auditObj.permissionFormId+"','"+auditObj.permissionRecordId+"')\">"+ZPI18N.getString("zp.viewRecord")+"</a>":auditObj.regularizationRecordId&&auditObj.regularizationFormId?html+='<a class="view" onclick="Attendance.Reg.getAttendanceRegDetails(\''+auditObj.regularizationFormId+"','"+auditObj.regularizationRecordId+"')\">"+ZPI18N.getString("zp.viewRecord")+"</a>":auditObj.onDutyRecordId&&auditObj.onDutyFormId&&(html+='<a class="view" onclick="Attendance.OD.getAttendanceODDetails(\''+auditObj.onDutyFormId+"','"+auditObj.onDutyRecordId+"')\">"+ZPI18N.getString("zp.viewRecord")+"</a>"),html},closeAuditPopup:function(){window.location.href="#attendance/entry/listview"},getAttDateTimeHtml:function(indAudit,punchType){var html="",time=indAudit.fromTime,date=indAudit.fromDate;if(2==punchType?(time=indAudit.toTime,date=indAudit.toDate):3==punchType?(time=indAudit.newFromTime,date=indAudit.newFromDate):4==punchType&&(time=indAudit.newToTime,date=indAudit.newToDate),void 0===time||""===time)return"<span>--</span>";var timeWithDate=!1;date==Attendance.Audit.auditData.auditDate&&date==Attendance.Audit.lastModifiedDate||(timeWithDate=!0);var timeSuffix="";if(-1!=time.indexOf(" AM")){var index=time.indexOf(" AM");timeSuffix=time.substring(index),time=time.substring(0,index)}if(-1!=time.indexOf(" PM")){index=time.indexOf(" PM");timeSuffix=time.substring(index),time=time.substring(0,index)}return html+=timeWithDate?"<span><b>"+date+"</b></span><span><b>"+time+"</b>"+timeSuffix+"</span>":"<span><b>"+time+"</b>"+timeSuffix+"</span>"},WEB:1,MOBILE:2,INTEGRATION:3,getInputTypeClass:function(displayType){return displayType==Attendance.Audit.WEB?"IC-system dgry S12 ML5":displayType==Attendance.Audit.MOBILE?"IC-mobi dgry S12 ML5":displayType==Attendance.Audit.INTEGRATION?"IC-url dgry S12 ML5":void 0}},Attendance.Reports={moduleName:"attendance",getShiftListCall:0,isManageAttendanceData:!1,isLead:!1,isSPOCReportView:!1,depLocShiftList:null,myReportData:{},teamReportData:{},adminReportData:{},permDenied:function(){var permissionDenied="<div class='ZPNdata'><div></div><p class='no-para'>"+ZPI18N.getString("zp.permdenied")+"</p></div>";Layout.Page.container.find("#pageDiv").children().remove(),Layout.Page.container.find("#pageDiv").html(permissionDenied),ZPUtil.noDataSVG(null,ZPeople.getResourceURL(newUIImageUrl+"svg/no-permission.svg"),null,Layout.Page.container.find(".ZPNdata div"))},toggleDayHour:function(obj){var reportLayout="#"+Layout.Page.container.attr("id");"Day"==obj?($(reportLayout+" #ZPAttUserSum_Days").addClass("active in"),$(reportLayout+" #ZPAttUserSum_Hours").removeClass("active in")):($(reportLayout+" #ZPAttUserSum_Hours").addClass("active in"),$(reportLayout+" #ZPAttUserSum_Days").removeClass("active in"))},toggleSumDayHour:function(obj){var reportLayout="#"+Layout.Page.container.attr("id");"Day"==obj?($(reportLayout+" #ZPAttURep_sum_RepDays").addClass("active in"),$(reportLayout+" #ZPAttURep_sum_RepHours").removeClass("active in")):($(reportLayout+" #ZPAttURep_sum_RepHours").addClass("active in"),$(reportLayout+" #ZPAttURep_sum_RepDays").removeClass("active in"))},getDateForCustomNavigation:function(mode,isNext){var period,container=Layout.Page.container.find("#filterDiv"),selectedPeriod=ZPLite.Filters.getValues(container.find('[name="datePeriodFilter"]'));if(selectedPeriod&&selectedPeriod.length>0){var fromDate=container.find('[name="fromDateFilter"]').data("selectedDate"),toDate=container.find('[name="toDateFilter"]').data("selectedDate"),isMonth=1==fromDate.getDate()&&toDate.getMonth()==fromDate.getMonth()&&toDate.getDate()==toDate.getDaysOfMonth(),dateDiff=ZPDateTime.getDateDiff(fromDate,toDate);isMonth?isNext?(fromDate=moment(fromDate).add(1,"months")._d,toDate=moment(toDate).add(1,"months").endOf("month")._d):(fromDate=moment(fromDate).subtract(1,"months")._d,toDate=moment(toDate).subtract(1,"months").endOf("month")._d):isNext?(fromDate=moment(fromDate).add(dateDiff,"days")._d,toDate=moment(toDate).add(dateDiff,"days")._d):(fromDate=moment(fromDate).add(-dateDiff,"days")._d,toDate=moment(toDate).add(-dateDiff,"days")._d),period={from:fromDate,to:toDate}}return period},getUserReportFromSummary:function(erecno,obj,isLoginDisabled){Layout.Page.container.find("#filterDiv");var url="admin";if("teamReports"==ZPLite.Reports.selectedTab?(Attendance.Reports.teamReportData.userReport=null,url="team"):"myReports"==ZPLite.Reports.selectedTab?(Attendance.Reports.myReportData.userReport=null,url="my"):"adminReports"==ZPLite.Reports.selectedTab&&(Attendance.Reports.adminReportData.userReport=null),Attendance.Reports.userReportEno=erecno,$(obj).tooltip("hide"),-1!==Layout.Page.pageId.indexOf("reports-"+url+"-attendance-status"))void 0!==(datePeriod=ZPLite.DateNavigator.getPeriod(Attendance.Reports.statusReport.reportName))&&(void 0!==datePeriod.from&&void 0!==datePeriod.to?(sdate=Calendar.formatDate(datePeriod.from),edate=Calendar.formatDate(datePeriod.to)):(sdate=Calendar.formatDate(datePeriod.day),edate=Calendar.formatDate(datePeriod.day))),Attendance.Reports.userReportFromDate=sdate,Attendance.Reports.userReportToDate=edate;else if(-1!==Layout.Page.pageId.indexOf("reports-"+url+"-attendance-daily")){var datePeriod=ZPLite.DateNavigator.getPeriod(Attendance.Reports.dailyReport.reportName);Attendance.Reports.userReportFromDate=Calendar.formatDate(datePeriod.day),Attendance.Reports.userReportToDate=Calendar.formatDate(datePeriod.day)}else if(-1!==Layout.Page.pageId.indexOf("reports-"+url+"-attendance-earlybird")){void 0!==(datePeriod=ZPLite.DateNavigator.getPeriod(Attendance.Reports.earlyBirdReport.reportName))&&(void 0!==datePeriod.from&&void 0!==datePeriod.to?(sdate=Calendar.formatDate(datePeriod.from),edate=Calendar.formatDate(datePeriod.to)):(sdate=Calendar.formatDate(datePeriod.day),edate=Calendar.formatDate(datePeriod.day))),Attendance.Reports.userReportFromDate=sdate,Attendance.Reports.userReportToDate=edate}else{var sdate,edate;void 0!==(datePeriod=ZPLite.DateNavigator.getPeriod(Attendance.Reports.summaryReport.reportName))&&(void 0!==datePeriod.from&&void 0!==datePeriod.to?(sdate=Calendar.formatDate(datePeriod.from),edate=Calendar.formatDate(datePeriod.to)):(sdate=Calendar.formatDate(datePeriod.day),edate=Calendar.formatDate(datePeriod.day))),Attendance.Reports.userReportFromDate=sdate,Attendance.Reports.userReportToDate=edate}Attendance.Reports.userType=isLoginDisabled||null,window.location.replace("#reports/"+url+"/attendance/user")},sortEmp:function(obj){$(obj).hasClass("sort-d")?$(obj).attr("class","sort-img sort-u CP"):$(obj).attr("class","sort-img sort-d CP"),"attendanceDailyReportEmp"===obj.id?Attendance.Reports.dailyReport.generateReport():"attendanceOvertimeReportEmp"===obj.id?Attendance.Reports.overtimeReport.generateReport():"attendanceEarlyBirdReportEmp"===obj.id?Attendance.Reports.earlyBirdReport.generateReport():"attendanceStatusReportEmp"===obj.id?Attendance.Reports.statusReport.generateReport():"ZPAtt_sumDayReport_myReqEmpSort"===obj.id?($(obj).hasClass("sort-d")?(Layout.Page.container.find("#ZPAtt_sumHourReport_myReqEmpSort").attr("class","sort-img sort-d CP"),Layout.Page.container.find("#ZPAtt_simpSumHourReport_myReqEmpSort").attr("class","sort-img sort-d CP"),Layout.Page.container.find("#ZPAtt_simpSumDayReport_myReqEmpSort").attr("class","sort-img sort-d CP")):(Layout.Page.container.find("#ZPAtt_sumHourReport_myReqEmpSort").attr("class","sort-img sort-u CP"),Layout.Page.container.find("#ZPAtt_simpSumHourReport_myReqEmpSort").attr("class","sort-img sort-u CP"),Layout.Page.container.find("#ZPAtt_simpSumDayReport_myReqEmpSort").attr("class","sort-img sort-u CP")),Attendance.Reports.summaryReport.generateReport()):"ZPAtt_sumHourReport_myReqEmpSort"===obj.id?($(obj).hasClass("sort-d")?(Layout.Page.container.find("#ZPAtt_sumDayReport_myReqEmpSort").attr("class","sort-img sort-d CP"),Layout.Page.container.find("#ZPAtt_simpSumHourReport_myReqEmpSort").attr("class","sort-img sort-d CP"),Layout.Page.container.find("#ZPAtt_simpSumDayReport_myReqEmpSort").attr("class","sort-img sort-d CP")):(Layout.Page.container.find("#ZPAtt_sumDayReport_myReqEmpSort").attr("class","sort-img sort-u CP"),Layout.Page.container.find("#ZPAtt_simpSumHourReport_myReqEmpSort").attr("class","sort-img sort-u CP"),Layout.Page.container.find("#ZPAtt_simpSumDayReport_myReqEmpSort").attr("class","sort-img sort-u CP")),Attendance.Reports.summaryReport.generateReport()):"ZPAtt_simpSumHourReport_myReqEmpSort"===obj.id?($(obj).hasClass("sort-d")?(Layout.Page.container.find("#ZPAtt_sumHourReport_myReqEmpSort").attr("class","sort-img sort-d CP"),Layout.Page.container.find("#ZPAtt_sumDayReport_myReqEmpSort").attr("class","sort-img sort-d CP"),Layout.Page.container.find("#ZPAtt_simpSumDayReport_myReqEmpSort").attr("class","sort-img sort-d CP")):(Layout.Page.container.find("#ZPAtt_sumHourReport_myReqEmpSort").attr("class","sort-img sort-u CP"),Layout.Page.container.find("#ZPAtt_sumDayReport_myReqEmpSort").attr("class","sort-img sort-u CP"),Layout.Page.container.find("#ZPAtt_simpSumDayReport_myReqEmpSort").attr("class","sort-img sort-u CP")),Attendance.Reports.summaryReport.generateReport()):"ZPAtt_simpSumDayReport_myReqEmpSort"===obj.id?($(obj).hasClass("sort-d")?(Layout.Page.container.find("#ZPAtt_sumHourReport_myReqEmpSort").attr("class","sort-img sort-d CP"),Layout.Page.container.find("#ZPAtt_sumDayReport_myReqEmpSort").attr("class","sort-img sort-d CP"),Layout.Page.container.find("#ZPAtt_simpSumHourReport_myReqEmpSort").attr("class","sort-img sort-d CP")):(Layout.Page.container.find("#ZPAtt_sumHourReport_myReqEmpSort").attr("class","sort-img sort-u CP"),Layout.Page.container.find("#ZPAtt_sumDayReport_myReqEmpSort").attr("class","sort-img sort-u CP"),Layout.Page.container.find("#ZPAtt_simpSumHourReport_myReqEmpSort").attr("class","sort-img sort-u CP")),Attendance.Reports.summaryReport.generateReport()):"attendanceMusterrollReportEmp"===obj.id&&Attendance.Reports.musterrollReport.generateReport()},Filters:{cache:{},searchCache:{},constructFilter:function(obj,entity,isSingle,filterOnChangeCallback,firescrollMode){if(obj.addClass("DNI"),"department"===entity){if(0==Object.keys(Attendance.Reports.depLocShiftList.depList).length)return}else if("location"===entity){if(0==Object.keys(Attendance.Reports.depLocShiftList.locList).length)return}else if("designation"===entity){if(0==Object.keys(Attendance.Reports.depLocShiftList.desgList).length)return}else if("legalEntity"===entity){if(!isOrgStructureEnabled||0===Object.keys(Attendance.Reports.depLocShiftList.entityList).length)return}else if("businessUnit"===entity){if(!isOrgStructureEnabled||0===Object.keys(Attendance.Reports.depLocShiftList.bUnitList).length)return}else if("division"===entity){if(!isOrgStructureEnabled||0===Object.keys(Attendance.Reports.depLocShiftList.divisionList).length)return}else if("orgTag"===entity){if(!Attendance.organizationTag.isEnabled()||!Attendance.Reports.depLocShiftList.orgTagList||0==Object.keys(Attendance.Reports.depLocShiftList.orgTagList).length)return}else if("role"===entity&&0==Object.keys(Attendance.Reports.depLocShiftList.roleList).length)return;obj.removeClass("DNI");var details={entity:entity,isSingle:isSingle};switch(filterOnChangeCallback&&(details.filterOnChangeCallback=filterOnChangeCallback),entity){case"datePeriod":details.text=ZPI18N.getString("zp.period"),details.staticOptions=[{id:"0",text:ZPI18N.getString("zp.today"),periodType:"daily",tense:"current"},{id:"1",text:ZPI18N.getString("zp.thisweek"),periodType:"weekly",tense:"current"},{id:"2",text:ZPI18N.getString("zp.tt_thismonth"),periodType:"monthly",tense:"current"}],"officeVsRemoteStatus"==Layout.Page.container[0].id.split("-")[3]&&details.staticOptions.push({id:"7",text:ZPI18N.getString("zp.thisyear"),periodType:"yearly",tense:"current"}),details.staticOptions.push({id:"3",text:ZPI18N.getString("zp.yesterday"),periodType:"daily",tense:"previous"}),details.staticOptions.push({id:"4",text:ZPI18N.getString("zp.lastweek"),periodType:"weekly",tense:"previous"}),details.staticOptions.push({id:"5",text:ZPI18N.getString("zp.lastmonth"),periodType:"monthly",tense:"previous"}),"officeVsRemoteStatus"==Layout.Page.container[0].id.split("-")[3]&&details.staticOptions.push({id:"8",text:ZPI18N.getString("zp.lastyear"),periodType:"yearly",tense:"previous"}),details.staticOptions.push({id:"6",text:ZPI18N.getString("zp.custom"),periodType:"custom"});break;case"checkOut":case"checkIn":details.text="checkIn"==entity?ZPI18N.getString("zp.firstcheckin"):ZPI18N.getString("zp.lastcheckout"),details.staticOptions=[{id:"all",text:ZPI18N.getString("zp.all")},{id:"entryShiftBefore",text:ZPI18N.getString("zp.earlylaterepfilter.earlythanshift",new Array(""))},{id:"entryShiftAfter",text:ZPI18N.getString("zp.earlylaterepfilter.latethanshift",new Array(""))},{id:"entryBefore",text:ZPI18N.getString("zp.before")},{id:"entryAfter",text:ZPI18N.getString("zp.after")},{id:"notRecorded",text:ZPI18N.getString("zp.earlylaterepfilter.notrecorded")}];break;case"dailyStatus":details.text=ZPI18N.getString("zp.status"),details.staticOptions=[],ZPLite.Reports.moduleData.attendance.isOfficeINRemoteINEnabled||ZPLite.Reports.moduleData.attendance.isCustomOfficeINEnabled?(details.staticOptions.push({id:14,text:ZPLite.Reports.moduleData.attendance.officeINdName?ZSEC.Encoder.encodeForHTML(ZPLite.Reports.moduleData.attendance.officeINdName):ZPI18N.getString("zp.officein")}),details.staticOptions.push({id:15,text:ZPLite.Reports.moduleData.attendance.remoteINdName?ZSEC.Encoder.encodeForHTML(ZPLite.Reports.moduleData.attendance.remoteINdName):ZPI18N.getString("zp.remotein")})):details.staticOptions.push({id:1,text:ZPI18N.getString("zp.in")}),details.staticOptions.push({id:2,text:ZPI18N.getString("zp.out")}),details.staticOptions.push({id:3,text:ZPI18N.getString("zp.yetToCheckIn")}),details.staticOptions.push({id:4,text:ZPI18N.getString("zp.onbreak")}),details.staticOptions.push({id:5,text:ZPI18N.getString("zp.present")}),details.staticOptions.push({id:6,text:ZPI18N.getString("zp.onduty")}),details.staticOptions.push({id:7,text:ZPI18N.getString("zp.leavetype.paid")+" "+ZPI18N.getString("zp.leave")}),details.staticOptions.push({id:8,text:ZPI18N.getString("zp.absent")}),details.staticOptions.push({id:9,text:ZPI18N.getString("zp.leavetype.unpaid")+" "+ZPI18N.getString("zp.leave")}),details.staticOptions.push({id:10,text:ZSEC.Encoder.encodeForHTML(holiday_disName)}),details.staticOptions.push({id:11,text:ZPI18N.getString("zp.weekend")}),ZPLite.Reports.moduleData.attendance.isStatWkndConfig&&(details.staticOptions.push({id:12,text:ZPI18N.getString("zp.statwknd")}),details.staticOptions.push({id:13,text:ZPI18N.getString("zp.nonstatwknd")}));break;case"vaccineStatus":details.text=ZPI18N.getString("zp.vaccinestatus",new Array("")),details.staticOptions=[],details.staticOptions.push({id:"2",text:ZPI18N.getString("zp.fullyvaccinated")}),details.staticOptions.push({id:"1",text:ZPI18N.getString("zp.partiallyvaccinated")}),details.staticOptions.push({id:"4",text:ZPI18N.getString("zp.notvaccinated")}),details.staticOptions.push({id:"3",text:ZPI18N.getString("zp.dontwanttodisclose")}),details.staticOptions.push({id:"-1",text:ZPI18N.getString("zp.notsubmitted")});break;case"monthlyUserStatus":details.text=ZPI18N.getString("zp.status"),details.staticOptions=[],details.staticOptions.push({id:5,text:ZPI18N.getString("zp.present")}),details.staticOptions.push({id:6,text:ZPI18N.getString("zp.onduty")}),details.staticOptions.push({id:7,text:ZPI18N.getString("zp.leavetype.paid")+" "+ZPI18N.getString("zp.leave")}),details.staticOptions.push({id:8,text:ZPI18N.getString("zp.absent")}),details.staticOptions.push({id:9,text:ZPI18N.getString("zp.leavetype.unpaid")+" "+ZPI18N.getString("zp.leave")}),details.staticOptions.push({id:10,text:ZSEC.Encoder.encodeForHTML(holiday_disName)}),details.staticOptions.push({id:11,text:ZPI18N.getString("zp.weekend")}),ZPLite.Reports.moduleData.attendance.isStatWkndConfig&&(details.staticOptions.push({id:12,text:ZPI18N.getString("zp.statwknd")}),details.staticOptions.push({id:13,text:ZPI18N.getString("zp.nonstatwknd")}));break;case"hours":details.text=ZPI18N.getString("zp.totalhours"),details.staticOptions=[{id:"0",text:ZPI18N.getString("zp.all")},{id:"1",text:ZPI18N.getString("zp.lesserthan")},{id:"2",text:ZPI18N.getString("zp.greaterthan")}];break;case"statusHours":details.text=ZPI18N.getString("zp.hourstype"),details.staticOptions=[{id:"0",text:ZPI18N.getString("zp.all")},{id:"1",text:ZPI18N.getString("zp.payablehours")},{id:"2",text:ZPI18N.getString("zp.workedhours")}];break;case"shift":details.text=ZPI18N.getString("zp.shift"),details.showSelectedOptionCount=!0,details.enableClear=!0,details.searchDtls={text:ZPI18N.getString("zp.search")},Shift.shiftList?details.staticOptions=Attendance.Reports.Filters.formatFilterData(Shift.shiftList,entity):details.staticOptions=[];break;case"employee":details.text=ZPI18N.getString("zp.employee"),details.showSelectedOptionCount=!0,details.enableClear=!0,-1!==Layout.Page.pageId.indexOf("attendance-user")&&(details.enableClear=!1),details.loadOptionsCallback=Attendance.Reports.Filters.getOptionsForFilter,details.maxSelection=25,details.searchDtls={text:ZPI18N.getString("zp.search")},firescrollMode&&(details.firescrollDtls={mode:firescrollMode,maxFetchLimit:25});break;case"department":details.text=ZPI18N.getString("zp.department"),details.showSelectedOptionCount=!0,details.enableClear=!0,details.searchDtls={text:ZPI18N.getString("zp.search")},Attendance.Reports.depLocShiftList.depList?details.staticOptions=Attendance.Reports.Filters.formatFilterData(Attendance.Reports.depLocShiftList.depList,entity):details.staticOptions=[];break;case"location":details.text=ZPI18N.getString("zp.location"),details.showSelectedOptionCount=!0,details.enableClear=!0,details.searchDtls={text:ZPI18N.getString("zp.search")},Attendance.Reports.depLocShiftList.locList?details.staticOptions=Attendance.Reports.Filters.formatFilterData(Attendance.Reports.depLocShiftList.locList,entity):details.staticOptions=[];break;case"designation":details.text=ZPI18N.getString("zp.designation"),details.showSelectedOptionCount=!0,details.enableClear=!0,details.searchDtls={text:ZPI18N.getString("zp.search")},Attendance.Reports.depLocShiftList.desgList?details.staticOptions=Attendance.Reports.Filters.formatFilterData(Attendance.Reports.depLocShiftList.desgList,entity):details.staticOptions=[];break;case"legalEntity":details.text=ZPeople.orgStructureDispNameMap.entity,details.showSelectedOptionCount=!0,details.enableClear=!0,details.searchDtls={text:ZPI18N.getString("zp.search")},Attendance.Reports.depLocShiftList.entityList?details.staticOptions=Attendance.Reports.Filters.formatFilterData(Attendance.Reports.depLocShiftList.entityList,entity):details.staticOptions=[];break;case"businessUnit":details.text=ZPeople.orgStructureDispNameMap.unit,details.showSelectedOptionCount=!0,details.enableClear=!0,details.searchDtls={text:ZPI18N.getString("zp.search")},Attendance.Reports.depLocShiftList.bUnitList?details.staticOptions=Attendance.Reports.Filters.formatFilterData(Attendance.Reports.depLocShiftList.bUnitList,entity):details.staticOptions=[];break;case"division":details.text=ZPeople.orgStructureDispNameMap.division,details.showSelectedOptionCount=!0,details.enableClear=!0,details.searchDtls={text:ZPI18N.getString("zp.search")},Attendance.Reports.depLocShiftList.divisionList?details.staticOptions=Attendance.Reports.Filters.formatFilterData(Attendance.Reports.depLocShiftList.divisionList,entity):details.staticOptions=[];break;case"employeeStatus":details.text=ZPI18N.getString("zp.employeestatus"),details.showSelectedOptionCount=!0,details.enableClear=!0,details.staticOptions=[{id:"19",text:ZPI18N.getString("zp.activeusers")},{id:"-2",text:ZPI18N.getString("zp.activeprofiles")},{id:"18",text:ZPI18N.getString("zp.exemployees")},{id:"17",text:ZPI18N.getString("zp.logindisabledemp")}],details.searchDtls={text:ZPI18N.getString("zp.search")};break;case"payPeriod":details.text=ZPI18N.getString("zp.leave.report.payperiod"),details.staticOptions=[];var payPeriodList=Attendance.Reports.depLocShiftList.reportSettList;payPeriodList.length>0&&(details.staticOptions.push({id:"0",text:ZPI18N.getString("zp.allpayperiod")}),$.each(payPeriodList,function(index,options){details.staticOptions.push({id:options.rsID,text:options.rsName})}));break;case"otSettings":details.text=ZPI18N.getString("zp.otpolicysm"),details.staticOptions=Attendance.Reports.Filters.formatFilterData(Attendance.Reports.depLocShiftList.otSettList,entity);break;case"orgTag":details.text=ZPeople.orgTagDisplayName,details.showSelectedOptionCount=!0,details.enableClear=!0,details.searchDtls={text:ZPI18N.getString("zp.search")},Attendance.Reports.depLocShiftList.orgTagList?details.staticOptions=Attendance.Reports.Filters.formatFilterData(Attendance.Reports.depLocShiftList.orgTagList,entity):details.staticOptions=[];break;case"role":details.text=ZPI18N.getString("zp.role"),details.showSelectedOptionCount=!0,details.enableClear=!0,details.searchDtls={text:ZPI18N.getString("zp.search")},Attendance.Reports.depLocShiftList.roleList?details.staticOptions=Attendance.Reports.Filters.formatFilterData(Attendance.Reports.depLocShiftList.roleList,entity):details.staticOptions=[]}ZPLite.Filters.init(obj,details)},getOptionsForFilter:function(data,searchText,fetchedRecordCount){fetchedRecordCount=fetchedRecordCount||0;var options=[],result=Attendance.Reports.Filters.getOptionsFromCache(data,searchText,fetchedRecordCount);if(result.makeRequest){var entity=data.entity;if("employee"===entity){(params={mode:"SEARCH",searchType:"emp",isDef:!0,searchMode:ZPLite.Reports.Filters.Employee.getSearchMode(),conreqcsr:csrfToken}).extraparam=JSON.stringify(Attendance.Reports.Filters.employeeSearchExtraParams()),searchText&&""!==searchText&&(params.key=encodeURIComponent(searchText)),params.start=fetchedRecordCount>0?fetchedRecordCount+1:1,ZPeople.Request.sendAsyncPost(ZPComponents.Search.URL,params,function(response){return options=Attendance.Reports.Filters.formatFilterData(ZPLite.Modules.Filters.getEmpMatchData(response,searchText),entity),searchText&&""!==searchText?Attendance.Reports.Filters.searchCache[entity][searchText]?Attendance.Reports.Filters.searchCache[entity][searchText]=Attendance.Reports.Filters.searchCache[entity][searchText].concat(options):Attendance.Reports.Filters.searchCache[entity][searchText]=options:void 0!==Attendance.Reports.Filters.cache[entity]?Attendance.Reports.Filters.cache[entity]=Attendance.Reports.Filters.cache[entity].concat(options):Attendance.Reports.Filters.cache[entity]=options,options})}else{var params={entity:entity,conreqcsr:csrfToken};searchText&&""!==searchText&&(params.searchText=searchText),params.sIndex=fetchedRecordCount>0?fetchedRecordCount+1:0,params.limit=25,ZPeople.Request.sendAsyncPost(ZPLite.Reports.url+"getFilterData",params,function(response){return response&&void 0!==response[entity]&&(options=response[entity]),searchText&&""!==searchText?Attendance.Reports.Filters.searchCache[entity][searchText]?Attendance.Reports.Filters.searchCache[entity][searchText]=Attendance.Reports.Filters.searchCache[entity][searchText].concat(options):Attendance.Reports.Filters.searchCache[entity][searchText]=options:void 0!==Attendance.Reports.Filters.cache[entity]?Attendance.Reports.Filters.cache[entity]=Attendance.Reports.Filters.cache[entity].concat(options):Attendance.Reports.Filters.cache[entity]=options,options})}}else options=result.options;return options},getOptionsFromCache:function(data,searchText,fetchedRecordCount){var makeRequest=!0,entity=data.entity,firescrollDtls=data.firescrollDtls,options=[];if(searchText&&""!==searchText){if(void 0===Attendance.Reports.Filters.searchCache[entity]&&(Attendance.Reports.Filters.searchCache[entity]={}),void 0!==Attendance.Reports.Filters.searchCache[entity][searchText])if(0===Attendance.Reports.Filters.searchCache[entity][searchText].length)makeRequest=!1;else if(Attendance.Reports.Filters.searchCache[entity][searchText].length>fetchedRecordCount){for(var itr=fetchedRecordCount;itr<Attendance.Reports.Filters.searchCache[entity][searchText].length&&options.length<firescrollDtls.maxFetchLimit;itr++)options.push(Attendance.Reports.Filters.searchCache[entity][searchText][itr]);makeRequest=!1}}else if(void 0!==Attendance.Reports.Filters.cache[entity])if(0===Attendance.Reports.Filters.cache[entity].length)makeRequest=!1;else if(Attendance.Reports.Filters.cache[entity].length>fetchedRecordCount){for(itr=fetchedRecordCount;itr<Attendance.Reports.Filters.cache[entity].length&&options.length<firescrollDtls.maxFetchLimit;itr++)options.push(Attendance.Reports.Filters.cache[entity][itr]);makeRequest=!1}return{makeRequest:makeRequest,options:options}},clearCache:function(clearAll,entity){clearAll?(Attendance.Reports.Filters.cache={},Attendance.Reports.Filters.searchCache={}):entity&&(void 0!==Attendance.Reports.Filters.cache[entity]&&(Attendance.Reports.Filters.cache[entity]=void 0),void 0!==Attendance.Reports.Filters.searchCache[entity]&&(Attendance.Reports.Filters.searchCache[entity]=void 0))},formatFilterData:function(options,entity){var results=[];for(var id in options){var option=options[id],res="";"employee"===entity?((res={id:option[0]}).text=option[1]+" "+ZPeople.getUserDisplayName(option[2],option[3]),""===option[6].trim()?""===option[5].trim()?res.photoUrl=ZPeople.getResourceURL(imageUrl+"user.png"):res.photoUrl=contactUrl+"/file?ID="+option[5]+"&fs=thumb":res.photoUrl="viewPhoto?filename="+option[6]):"department"===entity?res={id:id,text:options[id]}:"location"===entity?res={id:id,text:options[id]}:"designation"===entity?res={id:id,text:options[id]}:"legalEntity"===entity?res={id:id,text:options[id]}:"businessUnit"===entity?res={id:id,text:options[id]}:"division"===entity?res={id:id,text:options[id]}:"shift"===entity?-1!=options[id].select&&(res={id:id,text:options[id].shiftName}):"orgTag"===entity?res={id:id,text:options[id]}:"role"===entity?res={id:id,text:options[id]}:"otSettings"===entity&&(res={id:id,text:options[id]}),Object.keys(res).length>0&&results.push(res)}return results},getFormattedCurrentUserOption:function(){var userDtl=ZPeople.getUserDetailsById(erecno),response={id:erecno,text:ZPeople.decodeTxt(userDtl.name)};return userDtl.thumb&&(response.photoUrl=userDtl.thumb),response},employeeSearchExtraParams:function(){var extra_params={};-1!==Layout.Page.pageId.indexOf("attendance-overtime")?extra_params.isBOT=-1!=Layout.Page.pageId.indexOf("attendance-overtime"):-1!==Layout.Page.pageId.indexOf("attendance-user")&&(extra_params.includeSelf=!0);var emp_status=ZPLite.Filters.getValues(Layout.Page.container.find('[name="employeeStatusFilter"]'));if(void 0!==emp_status&&emp_status.length>0){var employeeStatus=[];$.each(emp_status,function(index,options){employeeStatus.push(options.id)}),extra_params.employeeStatusarr=employeeStatus}return extra_params}},getDepLocShiftList:function(){Shift.shiftList||0!==Attendance.Reports.getShiftListCall||(Shift.getShiftList(),Attendance.Reports.getShiftListCall=1);var param={mode:"getDepLocList",conreqcsr:csrfToken};ZPeople.Request.sendAsyncPost("/AttendanceAction.zp",param,function(rdata){Attendance.Reports.depLocShiftList=rdata,"hh:mm a"!==rdata.timeformat?Attendance.timeFormatIs12hr=!1:Attendance.timeFormatIs12hr=!0,Attendance.Reports.consDepLocShiftOptions(),Attendance.Reports.dateFormat=rdata.dateFormat})},consDepLocShiftOptions:function(){var rdata=Attendance.Reports.depLocShiftList,result={},depList=rdata.depList,locList=rdata.locList,entityList=rdata.entityList,bUnitList=rdata.bUnitList,divisionList=rdata.divisionList,repSettList=rdata.reportSettList,desgList=rdata.desgList,roleList=rdata.roleList,depOption="",locOption="",entityOption="",bUnitOption="",divisionOption="",shiftOption="",repSettOption="",desgOption="",roleOption="";if(isOrgStructureEnabled){for(var entityId in entityList)-1===(entityId+"").indexOf("_notEnc")&&(entityOption+="<option value="+entityId+">"+entityList[entityId]+"</option>");for(var bUnitId in result.entityOption=entityOption,bUnitList)-1===(bUnitId+"").indexOf("_notEnc")&&(bUnitOption+="<option value="+bUnitId+">"+bUnitList[bUnitId]+"</option>");for(var divisionId in result.bUnitOption=bUnitOption,divisionList)-1===(divisionId+"").indexOf("_notEnc")&&(divisionOption+="<option value="+divisionId+">"+divisionList[divisionId]+"</option>");result.divisionOption=divisionOption}for(var desgId in desgList)-1===(desgId+"").indexOf("_notEnc")&&(desgOption+="<option value="+desgId+">"+desgList[desgId]+"</option>");for(var d_r_depId in depList)-1===(d_r_depId+"").indexOf("_notEnc")&&(depOption+="<option value="+d_r_depId+">"+depList[d_r_depId]+"</option>");for(var d_r_locId in locList)-1===(d_r_locId+"").indexOf("_notEnc")&&(locOption+="<option value="+d_r_locId+">"+locList[d_r_locId]+"</option>");for(var roleId in roleList)-1===(roleId+"").indexOf("_notEnc")&&(roleOption+="<option value="+roleId+">"+roleList[roleId]+"</option>");var shiftList=Shift.shiftList;for(var d_r_shiftId in shiftList)-1!==shiftList[d_r_shiftId].select&&(shiftOption+="<option value="+d_r_shiftId+">"+shiftList[d_r_shiftId].shiftName+"</option>");for(var d_r_settId in repSettList){var repSett=repSettList[d_r_settId],lastScheRunTime="-1",rsSecClosureDay="-1";repSett.last_update&&(lastScheRunTime=repSett.last_update),repSett.rsSecClosureDay&&(rsSecClosureDay=repSett.rsSecClosureDay),repSettOption+="<li  id="+repSett.rsID+"  value="+repSett.rsID+" rsFrequency="+repSett.rsFrequency+" closeDay="+repSett.rsClosureDay+" toDay="+repSett.rsToDay+" closeDay_2="+rsSecClosureDay+" lastUpdatedTime="+lastScheRunTime+" allowRegen="+repSett.allowRegen+" regenClosureDate="+repSett.regenClosureDate+" regenStartDate="+repSett.regenStartDate+"><a filtername='payPeriodFilter' onclick='ZPLite.Reports.Filters.selectFilterOption(this, true, event);'>"+repSett.rsName+"</a></li>"}result.repSettOption=repSettOption,result.depOption=depOption,result.locOption=locOption,result.shiftOption=shiftOption,result.desgOption=desgOption,result.roleOption=roleOption,Attendance.organizationTag.constructOptions(rdata,result),Attendance.Reports.depLocShiftOptions=result;var datFormat=dateFmt.toUpperCase(),toDay=moment(rdata.currDate.todayDate,datFormat),weekStartDate=moment(toDay).startOf("week").add(weekstarts,"day");toDay._d.getTime()<weekStartDate._d.getTime()&&(weekStartDate=weekStartDate.add(-1,"week"));var weekEndDate=moment(toDay).startOf("week").add(weekstarts,"day");toDay._d.getTime()<weekEndDate._d.getTime()&&(weekEndDate=weekEndDate.add(-1,"week")),weekEndDate=weekEndDate.add(6,"day"),Attendance.Reports.depLocShiftList.currDate.weekStartDate=weekStartDate,Attendance.Reports.depLocShiftList.currDate.weekEndDate=weekEndDate;var lastWeekStart=moment(weekStartDate).add(-7,"day"),lastWeekEnd=moment(weekEndDate).add(-7,"day");Attendance.Reports.depLocShiftList.currDate.lastWeekStart=lastWeekStart,Attendance.Reports.depLocShiftList.currDate.lastWeekEnd=lastWeekEnd},dailyReport:{reportName:"ATTENDANCE_DAILY_REPORT",initPage:function(){ZPLite.Reports.setCurrentModule(Attendance.Reports.moduleName),ZPLite.Reports.setCurrentReport(Attendance.Reports.dailyReport.reportName);var initParams={isModuleDataNeeded:!0,callback:Attendance.Reports.dailyReport.init};ZPLite.Reports.initPage(initParams)},init:function(){ZPLite.Reports.Util.setAvailableReportsForModule("Attendance"),"teamReports"==ZPLite.Reports.selectedTab?(Layout.Page.container.find("#attendanceDailyReport").find("#attendanceDailyReportChartDiv1").attr("id","attendanceDailyReportChartDiv1_team"),Layout.Page.container.find("#attendanceDailyReport").find("#attendanceDailyReportChartDiv2").attr("id","attendanceDailyReportChartDiv2_team")):"adminReports"==ZPLite.Reports.selectedTab&&(Layout.Page.container.find("#attendanceDailyReport").find("#attendanceDailyReportChartDiv1").attr("id","attendanceDailyReportChartDiv1_admin"),Layout.Page.container.find("#attendanceDailyReport").find("#attendanceDailyReportChartDiv2").attr("id","attendanceDailyReportChartDiv2_admin"));var isLoaded="myReports"===ZPLite.Reports.selectedTab?Attendance.Reports.myReportData.dailyReportChart:"teamReports"===ZPLite.Reports.selectedTab?Attendance.Reports.teamReportData.dailyReportChart:Attendance.Reports.adminReportData.dailyReportChart;if(Attendance.Reports.dailyReport.isChartView()||(isLoaded="myReports"===ZPLite.Reports.selectedTab?Attendance.Reports.myReportData.dailyReportlist:"teamReports"===ZPLite.Reports.selectedTab?Attendance.Reports.teamReportData.dailyReportlist:Attendance.Reports.adminReportData.dailyReportlist),null!==Attendance.Reports.depLocShiftList&&isLoaded&&Attendance.Reports.dailyReport.data)Attendance.Reports.dailyReport.isChartView()?Attendance.Reports.dailyReport.switchView(!0,!0):Attendance.Reports.dailyReport.switchView(!1,!0);else{Attendance.Reports.getDepLocShiftList(),Attendance.Reports.Filters.clearCache(!0);var attModule=ZPLite.Reports.moduleData.attendance;isManageAttendanceData=attModule.isManageAttedance,isLead=attModule.isLead,isSPOCReportView=attModule.isSPOCReportView;var filterDiv=Layout.Page.container.find("#filterDiv");isadmin&&(isManageAttendanceData=!0),isadmin&&"myReports"!=ZPLite.Reports.selectedTab?Attendance.Reports.Filters.constructFilter(filterDiv.find('[name="roleFilter"]'),"role",!1):filterDiv.find('[name="roleFilter"]').remove(),Attendance.Reports.Filters.constructFilter(filterDiv.find('[name="employeeStatusFilter"]'),"employeeStatus",!1,Attendance.Reports.dailyReport.filterOnChangeCallback),Attendance.Reports.Filters.constructFilter(filterDiv.find('[name="statusFilter"]'),"dailyStatus",!1),Attendance.Reports.Filters.constructFilter(filterDiv.find('[name="hoursComparatorFilter"]'),"hours",!0,Attendance.Reports.dailyReport.filterOnChangeCallback),Attendance.Reports.Filters.constructFilter(filterDiv.find('[name="departmentFilter"]'),"department",!1),Attendance.Reports.Filters.constructFilter(filterDiv.find('[name="locationFilter"]'),"location",!1),Attendance.Reports.Filters.constructFilter(filterDiv.find('[name="orgTagFilter"]'),"orgTag",!1),Attendance.Reports.Filters.constructFilter(filterDiv.find('[name="designationFilter"]'),"designation",!1),Attendance.Reports.Filters.constructFilter(filterDiv.find('[name="shiftFilter"]'),"shift",!1),isOrgStructureEnabled&&(Attendance.Reports.Filters.constructFilter(filterDiv.find('[name="entityFilter"]'),"legalEntity",!1),Attendance.Reports.Filters.constructFilter(filterDiv.find('[name="buFilter"]'),"businessUnit",!1),Attendance.Reports.Filters.constructFilter(filterDiv.find('[name="divisionFilter"]'),"division",!1)),Layout.Page.container.find('[name="hoursFilter"]').find("input").timepicker({defaultTime:"",showMeridian:!1,minuteStep:1}),filterDiv.find('[name="dateFilter"]').off("click").on("click",function(){Calendar.setUpCalendar(event,$(this).find('[name="dateFilterText"]'),null,null,function(value,obj){$(obj).parent().val(Calendar.formatDate(value)),$(obj).parent().data("selectedDate",value),$(obj).parent().addClass("selected")})});var dateNavigationDtls={};dateNavigationDtls.mode=Attendance.Reports.dailyReport.reportName,dateNavigationDtls.containerId=Layout.Page.container.attr("id"),dateNavigationDtls.previousBtnId="goToPreviousBtn",dateNavigationDtls.nextBtnId="goToNextBtn",dateNavigationDtls.displayAreaId="dateNavigatorText",dateNavigationDtls.navigationCallback=Attendance.Reports.dailyReport.dateNaviCallback,ZPLite.DateNavigator.init(dateNavigationDtls),ZPLite.DateNavigator.setPeriod(dateNavigationDtls.mode,ZPLite.DateNavigator.TYPE.DAILY,"current"),Attendance.Reports.dailyReport.setDefaultFilterParams(),Attendance.Reports.dailyReport.generateReport()}},setDefaultFilterParams:function(){var date=Calendar.getCurrentDate(!0),filterDiv=Layout.Page.container.find("#filterDiv"),dateFilter=filterDiv.find('[name="dateFilter"]'),name=dateFilter.attr("name");dateFilter.val(date),dateFilter.data("selectedDate",Calendar.parseDate(date,uidateFormat)),dateFilter.data("text",date),dateFilter.addClass("selected"),dateFilter.find('[name="'+name+'Text"]').text(date),dateFilter.find('[name="'+name+'Text"]').val(date),ZPLite.Filters.clearValues(filterDiv.find('[name="statusFilter"]')),ZPLite.Filters.setValues(filterDiv.find('[name="hoursComparatorFilter"]'),[{id:"0",text:ZPI18N.getString("zp.all")}]),ZPLite.Filters.setValues(filterDiv.find('[name="employeeStatusFilter"]'),[{id:"19",text:ZPI18N.getString("zp.activeusers")},{id:"-2",text:ZPI18N.getString("zp.activeprofiles")},{id:"18",text:ZPI18N.getString("zp.exemployees")}]),ZPLite.Filters.clearValues(filterDiv.find('[name="locationFilter"]')),isadmin&&filterDiv.find('[name="roleFilter"]').is(":visible")&&ZPLite.Filters.clearValues(filterDiv.find('[name="roleFilter"]')),filterDiv.find('[name="orgTagFilter"]').is(":visible")&&ZPLite.Filters.clearValues(filterDiv.find('[name="orgTagFilter"]')),ZPLite.Filters.clearValues(filterDiv.find('[name="departmentFilter"]')),ZPLite.Filters.clearValues(filterDiv.find('[name="designationFilter"]')),ZPLite.Filters.clearValues(filterDiv.find('[name="shiftFilter"]')),Attendance.Reports.dailyReport.removeErrClass(),filterDiv.find('[name="hoursFilter"]').removeClass("DNI").addClass("DNI"),filterDiv.find('[name="entityFilter"]').is(":visible")&&ZPLite.Filters.clearValues(filterDiv.find('[name="entityFilter"]')),filterDiv.find('[name="buFilter"]').is(":visible")&&ZPLite.Filters.clearValues(filterDiv.find('[name="buFilter"]')),filterDiv.find('[name="divisionFilter"]').is(":visible")&&ZPLite.Filters.clearValues(filterDiv.find('[name="divisionFilter"]')),Attendance.Reports.dailyReport.isChartView()&&(filterDiv.find('[name="statusFilter"]').addClass("DNI"),filterDiv.find('[name="hoursComparatorFilter"]').addClass("DNI"),filterDiv.find('[name="hoursFilter"]').addClass("DNI")),filterDiv.find('[name="userInclusionFilter"]').removeClass("DNI"),filterDiv.find('[name="userInclusionFilter"]').find("input").prop("checked",!0),isSPOCReportView||isManageAttendanceData||!isLead||(filterDiv.find('[name="employeeStatusFilter"]').addClass("DNI"),filterDiv.find('[name="userInclusionFilter"]').addClass("DNI"))},resetFilter:function(){Attendance.Reports.dailyReport.setDefaultFilterParams()},removeErrClass:function(){var errorDivs=Layout.Page.container.find("#filterDiv").find(".error-clr");errorDivs.length>0&&$.each(errorDivs,function(index,errorDiv){$(errorDiv).removeClass("error-clr")})},dateNaviCallback:function(){var naviDate=Layout.Page.container.find("#dateNavigatorText").text(),dateFilter=Layout.Page.container.find("#filterDiv").find('[name="dateFilter"]'),name=dateFilter.attr("name");dateFilter.val(naviDate),dateFilter.data("selectedDate",Calendar.parseDate(naviDate,uidateFormat)),dateFilter.data("text",naviDate),dateFilter.addClass("selected"),dateFilter.find('[name="'+name+'Text"]').text(naviDate),dateFilter.find('[name="'+name+'Text"]').val(naviDate),Attendance.Reports.dailyReport.generateReport()},applyFilter:function(){var customDatePeriod={day:Layout.Page.container.find("#filterDiv").find('[name="dateFilter"]').data("selectedDate")};ZPLite.DateNavigator.setPeriod(Attendance.Reports.dailyReport.reportName,ZPLite.DateNavigator.TYPE.DAILY,void 0,!1,customDatePeriod),Attendance.Reports.dailyReport.generateReport()},switchView:function(isChartView,isFromTabChange){var layout=Layout.Page.container;if(isChartView)layout.find('[name="listviewbtn"]').removeClass("sel"),layout.find("#attendanceDailyReportTable").addClass("DN"),layout.find('[name="chartviewbtn"]').addClass("sel"),layout.find("#attendanceDailyReportChart").removeClass("DN"),layout.find("#attendanceDailyReport").removeClass("DN"),layout.find(".ZPNdata ").remove(),layout.find("#filterDiv").find('[name="statusFilter"]').addClass("DNI"),layout.find("#filterDiv").find('[name="hoursComparatorFilter"]').addClass("DNI"),layout.find("#filterDiv").find('[name="hoursFilter"]').addClass("DNI"),Attendance.Reports.dailyReport.dailyChartViewRep="myReports"===ZPLite.Reports.selectedTab?Attendance.Reports.myReportData.dailyReportChart:"teamReports"===ZPLite.Reports.selectedTab?Attendance.Reports.teamReportData.dailyReportChart:Attendance.Reports.adminReportData.dailyReportChart,Attendance.Reports.dailyReport.dailyChartViewRep&&Attendance.Reports.dailyReport.dailyChartViewRep.userDate===Layout.Page.container.find("#dateNavigatorText").text()||Attendance.Reports.dailyReport.generateReport();else{layout.find('[name="chartviewbtn"]').removeClass("sel"),layout.find("#attendanceDailyReportChart").addClass("DN"),layout.find('[name="listviewbtn"]').addClass("sel"),layout.find("#attendanceDailyReportTable").removeClass("DN"),layout.find("#filterDiv").find('[name="statusFilter"]').removeClass("DNI"),layout.find("#filterDiv").find('[name="hoursComparatorFilter"]').removeClass("DNI"),0===layout.find("#attendanceDailyReportBody").children().length&&(layout.find(".ZPNdata ").remove(),layout.find("#attendanceDailyReport").addClass("DN"),$(ZPUtil.newNoDataHTML("CR-nodata-rpt","path6",ZPI18N.getString("zp.noreportsmsg"))).insertBefore(layout.find("#attendanceDailyReport")));var filterData=ZPLite.Filters.getValues(layout.find("#filterDiv").find('[name="hoursComparatorFilter"]'));void 0===filterData||"0"===filterData[0].id?layout.find("#filterDiv").find('[name="hoursFilter"]').addClass("DNI"):layout.find("#filterDiv").find('[name="hoursFilter"]').removeClass("DNI"),Attendance.Reports.dailyReport.empReportTableData="myReports"===ZPLite.Reports.selectedTab?Attendance.Reports.myReportData.dailyReportlist:"teamReports"===ZPLite.Reports.selectedTab?Attendance.Reports.teamReportData.dailyReportlist:Attendance.Reports.adminReportData.dailyReportlist,Attendance.Reports.dailyReport.empReportTableData?0!==layout.find("#attendanceDailyReportBody").children().length&&layout.find("#attendanceDailyReportTable").fadeIn(300):(0===layout.find("[id=zp_page_loading]").length&&layout.find("#attendanceDailyReport").before(ZPeople.LOADING_HTML),Attendance.Reports.dailyReport.generateReport())}},isChartView:function(){return Layout.Page.container.find('[name="chartviewbtn"]').hasClass("sel")},filterOnChangeCallback:function(data){var filterDiv=Layout.Page.container.find("#filterDiv");if(Attendance.Reports.dailyReport.removeErrClass(),"hours"===data.entity){var filterData=ZPLite.Filters.getValues(filterDiv.find('[name="hoursComparatorFilter"]'));void 0===filterData||"0"===filterData[0].id?filterDiv.find('[name="hoursFilter"]').addClass("DNI"):(filterDiv.find('[name="hoursFilter"]').removeClass("DNI"),filterDiv.find('[name="hoursFilter"]').find("input").attr("placeholder","hh:mm"),filterDiv.find('[name="hoursFilter"]').find("input").val(""))}if("employeeStatus"===data.entity){var employeeStatus=[];void 0!==(filterData=ZPLite.Filters.getValues(filterDiv.find('[name="employeeStatusFilter"]')))&&filterData.length>0&&$.each(filterData,function(index,options){employeeStatus.push(options.id)}),filterDiv.find('[name="userInclusionFilter"]').addClass("DNI"),employeeStatus.includes("18")&&(filterDiv.find('[name="userInclusionFilter"]').find("input").prop("checked",!0),filterDiv.find('[name="userInclusionFilter"]').removeClass("DNI"))}},getDefaultParams:function(){var params={mode:"attDailyReport",viewStatus:"All",userTypeId:"[19,-2,18]",incDateOfExit:!0,conreqcsr:csrfToken};return Attendance.Reports.dailyReport.isChartView()||(params.view="list"),params},getParamsForReport:function(){var filterData,params=Attendance.Reports.dailyReport.getDefaultParams(),filterDiv=Layout.Page.container.find("#filterDiv"),date=filterDiv.find('[name="dateFilter"]').data("selectedDate");if(void 0!==date&&(params.reportDate=Calendar.formatDate(date)),!filterDiv.find('[name="statusFilter"]').hasClass("DNI")&&(filterData=ZPLite.Filters.getValues(filterDiv.find('[name="statusFilter"]')))&&filterData.length>0){var entity=[];$.each(filterData,function(index,options){entity.push(options.id)}),params.statFil=JSON.stringify(entity)}if(isOrgStructureEnabled){if((filterData=ZPLite.Filters.getValues(filterDiv.find('[name="entityFilter"]')))&&filterData.length>0){entity=[];$.each(filterData,function(index,options){entity.push(options.id)}),params.entityId=JSON.stringify(entity)}if((filterData=ZPLite.Filters.getValues(filterDiv.find('[name="buFilter"]')))&&filterData.length>0){var buFilterId=[];$.each(filterData,function(index,options){buFilterId.push(options.id)}),params.bUnitId=JSON.stringify(buFilterId)}if((filterData=ZPLite.Filters.getValues(filterDiv.find('[name="divisionFilter"]')))&&filterData.length>0){var divisionId=[];$.each(filterData,function(index,options){divisionId.push(options.id)}),params.divisionId=JSON.stringify(divisionId)}}if((filterData=ZPLite.Filters.getValues(filterDiv.find('[name="departmentFilter"]')))&&filterData.length>0){var departmentId=[];$.each(filterData,function(index,options){departmentId.push(options.id)}),params.departmentId=JSON.stringify(departmentId)}if(void 0!==(filterData=ZPLite.Filters.getValues(filterDiv.find('[name="designationFilter"]')))&&filterData.length>0){var desgId=[];$.each(filterData,function(index,options){desgId.push(options.id)}),params.desgId=JSON.stringify(desgId)}if(void 0!==(filterData=ZPLite.Filters.getValues(filterDiv.find('[name="locationFilter"]')))&&filterData.length>0){var locationId=[];$.each(filterData,function(index,options){locationId.push(options.id)}),params.locationId=JSON.stringify(locationId)}if(void 0!==(filterData=ZPLite.Filters.getValues(filterDiv.find('[name="roleFilter"]')))&&filterData.length>0){var roleId=[];$.each(filterData,function(index,options){roleId.push(options.id)}),params.roleId=JSON.stringify(roleId)}if(Attendance.organizationTag.fetchParams(filterDiv,params),void 0!==(filterData=ZPLite.Filters.getValues(filterDiv.find('[name="shiftFilter"]')))&&filterData.length>0){var shiftId=[];$.each(filterData,function(index,options){shiftId.push(options.id)}),params.shiftId=JSON.stringify(shiftId)}if(!filterDiv.find('[name="hoursComparatorFilter"]').hasClass("DNI")&&void 0!==(filterData=ZPLite.Filters.getValues(filterDiv.find('[name="hoursComparatorFilter"]')))&&filterData.length>0&&"0"!==filterData[0].id){var hoursFilter=filterDiv.find('[name="hoursFilter"]'),hours=hoursFilter.find("input").val();if(void 0===hours||""===hours)return hoursFilter.addClass("error-clr"),errorMessage=ZPI18N.getString("zp.entervalidinput"),void ZPeople.Message.showWarningMsg(errorMessage);params.totHrsTime=JSON.stringify({timeInSecs:Attendance.Common.convertTimerInputToMinsOrSecs(hours,!0,!0),type:filterData[0].id})}if(!filterDiv.find('[name="employeeStatusFilter"]').hasClass("DNI")){if(void 0!==(filterData=ZPLite.Filters.getValues(filterDiv.find('[name="employeeStatusFilter"]')))&&filterData.length>0){var employeeStatus=[];$.each(filterData,function(index,options){employeeStatus.push(options.id)}),params.userTypeId=JSON.stringify(employeeStatus)}filterDiv.find('[name="userInclusionFilter"]').find("input").is(":checked")||delete params.incDateOfExit}return(Layout.Page.container.find("#attendanceDailyReportEmp").hasClass("sort-u")||Layout.Page.container.find("#attendanceDailyReportEmp").hasClass("sort-d"))&&(params.isEmpSortAsc=Layout.Page.container.find(" #attendanceDailyReportEmp").hasClass("sort-u")),"myReports"==ZPLite.Reports.selectedTab?params.zplType=1:"teamReports"==ZPLite.Reports.selectedTab&&(params.zplType=2),params.repType=ZPLite.Reports.selectedTab,params},generateReport:function(){var layout=Layout.Page.container;layout.find("#attendanceDailyReport").scrollTop(0),Attendance.Reports.dailyReport.removeErrClass();var params=Attendance.Reports.dailyReport.getParamsForReport();params&&(layout.find(".ZPNdata ").fadeOut(100).remove(),0===layout.find("[id=zp_page_loading]").length&&layout.find("#attendanceDailyReport").before(ZPeople.LOADING_HTML),layout.find("#attendanceDailyReport").addClass("DN"),Attendance.Reports.dailyReport.userInType&&(params.userInType=Attendance.Reports.dailyReport.userInType,Attendance.Reports.dailyReport.userInType=null),ZPeople.Request.send("/AttendanceReportAction.zp",params,function(response,params){ZPLite.Reports.selectedTab==params.repType&&(response.fail||response.error&&"permissionDenied"===response.error?Attendance.Reports.permDenied():(layout.find("[id=zp_page_loading]").fadeOut(200).remove(),Attendance.Reports.dailyReport.data=response,Layout.Page.container.find("#dateNavigatorText").html(response.report.userDate),"list"===params.view?(null!==response&&response.report.empList&&response.report.empList.length>0?(Attendance.Reports.dailyReport.empReportTableData=response.report,layout.find("#attendanceDailyReport").removeClass("DN"),Attendance.Reports.dailyReport.constructList(null,null,response)):(Layout.Page.container.find(".ZPNdata ").remove(),Layout.Page.container.find("#attendanceDailyReportBody").empty(),layout.find("#attendanceDailyReport").before(ZPUtil.newNoDataHTML("CR-nodata-rpt","path6",ZPI18N.getString("zp.noreportsmsg")))),"myReports"==ZPLite.Reports.selectedTab?Attendance.Reports.myReportData.dailyReportlist=response.report:"teamReports"==ZPLite.Reports.selectedTab?Attendance.Reports.teamReportData.dailyReportlist=response.report:Attendance.Reports.adminReportData.dailyReportlist=response.report):(Attendance.Reports.dailyReport.empReportTableData=null,null!=response&&Object.keys(response).length>0?(layout.find("#attendanceDailyReport").removeClass("DN"),Attendance.Reports.dailyReport.constructChart(response)):(Layout.Page.container.find(".ZPNdata ").remove(),layout.find("#attendanceDailyReport").before(ZPUtil.newNoDataHTML("CR-nodata-rpt","path6",ZPI18N.getString("zp.noreportsmsg")))),"myReports"==ZPLite.Reports.selectedTab?(Attendance.Reports.myReportData.dailyReportChart=response.report,Attendance.Reports.myReportData.dailyReportlist=null):"teamReports"==ZPLite.Reports.selectedTab?(Attendance.Reports.teamReportData.dailyReportChart=response.report,Attendance.Reports.teamReportData.dailyReportlist=null):(Attendance.Reports.adminReportData.dailyReportChart=response.report,Attendance.Reports.adminReportData.dailyReportlist=null))))}))},constructChart:function(response){var data=response.report,layout=Layout.Page.container,absents=data.absentCount,presents=data.presentCount,weekend=data.weekendCount,holiday=data.holidayCount,leave=data.leaveCount,onduty=data.ondutyCount,lop=data.lop_leaveCount,usersYetToCheckIn=data.usersYetToCheckIn,officeInDname=response.officeINdNameEncoded?response.officeINdNameEncoded:ZPI18N.getString("zp.officein"),remoteInDname=response.remoteINdNameEncoded?response.remoteINdNameEncoded:ZPI18N.getString("zp.remotein"),chartDetails={};if(chartDetails.renderTo="teamReports"==ZPLite.Reports.selectedTab?"attendanceDailyReportChartDiv1_team":"attendanceDailyReportChartDiv1_admin",chartDetails.title=ZPI18N.getString("zp.attdailyrepoverview"),chartDetails.spacingTop=30,chartDetails.spacingBottom=10,chartDetails.spacingLeft=30,chartDetails.spacingRight=10,chartDetails.enableDataLabels=!0,chartDetails.enableExport=!0,chartDetails.exportFileName="Attendance Daily Report",chartDetails.dataStartAngle=225,chartDetails.dataArray=[{name:ZPI18N.getString("zp.absent"),y:absents,color:"#f0989a",sliced:!0},{name:holiday_disName,y:holiday,color:"#9cc6e5"},{name:ZPI18N.getString("zp.leavetype.paid")+" "+ZPI18N.getString("zp.leave"),y:leave,color:"#fccaa1"},{name:ZPI18N.getString("zp.present"),y:presents,color:"#b2d7ad"},{name:ZPI18N.getString("zp.weekend"),y:weekend,color:"#ffe5a3"},{name:ZPI18N.getString("zp.onduty"),y:onduty,color:"#b6a7d2"},{name:ZPI18N.getString("zp.leavetype.unpaid")+" "+ZPI18N.getString("zp.leave"),y:lop,color:"#e95b6d"}],ZPLite.Reports.Util.constructPieChart(chartDetails),layout.find("#ZPAtt_totCountId").html(data.totalCount),layout.find("#ZPAtt_preCountId").html(presents),layout.find("#ZPAtt_absCountId").html(absents),layout.find("#ZPAtt_lopCountId").html(lop),layout.find("#ZPAtt_levCountId").html(leave),layout.find("#ZPAtt_holCountId").html(holiday),layout.find("#ZPAtt_weeCountId").html(data.regWeekendCount),ZPLite.Reports.moduleData.attendance.isStatWkndConfig&&(layout.find("#ZPAtt_statWeeCountId").closest("li").removeClass("DN"),layout.find("#ZPAtt_statWeeCountId").html(data.statWeekendCount),layout.find("#ZPAtt_nonStatWeeCountId").closest("li").removeClass("DN"),layout.find("#ZPAtt_nonStatWeeCountId").html(data.nonStatWeekendCount)),layout.find("#ZPAtt_onduCountId").html(onduty),Attendance.Reports.dailyReport.isBreakConfigured=!1,layout.find("#attendanceDailyReportChart2").hide(),layout.find("#ZPAtt_userAvailabiltyCont").hide(),void 0!==data.userInStatusCount){layout.find("#attendanceDailyReportChart2").show(),layout.find("#ZPAtt_userAvailabiltyCont").show();var inStatusUsers=(data.userInStatusCount/data.totalCount*100).toFixed(5),outStatusUsers=(data.userOutStatusCount/data.totalCount*100).toFixed(5),isBreakConfigured=void 0!==data.userOnBreakCount;layout.find("#ZPAtt_OnBreakContainer").hide();var chartDataArr=[];if(layout.find("#ZPAtt_OutUsersCount").prev().removeAttr("outCountByLoc",!0),layout.find("#ZPAtt_InUsersCountCont").show(),layout.find("#ZPAtt_remInUsersCountCont").show(),layout.find("#ZPAtt_accTermInUsersCountCont").show(),layout.find("#ZPAtt_recDeskInUsersCountCont").show(),layout.find("#ZPAtt_yetToCheckInCont").show(),void 0!==data.webInStatusCount?(layout.find("#ZPAtt_remInUsersCount").html(data.webInStatusCount),layout.find("#ZPAtt_accTermInUsersCount").html(data.deviceInStatusCount),layout.find("#ZPAtt_recDeskInUsersCount").html(data.secDeskInStatusCount),layout.find("#ZPAtt_yetToCheckInCount").html(usersYetToCheckIn),layout.find("#ZPAtt_InUsersCountCont").hide(),chartDataArr=[{name:remoteInDname,y:parseFloat((data.webInStatusCount/data.totalCount*100).toFixed(5)),color:"#00bd9e"},{name:"Reception Desk In",y:parseFloat((data.secDeskInStatusCount/data.totalCount*100).toFixed(5)),color:"#b2d7ad"},{name:"Access Terminal In",y:parseFloat((data.deviceInStatusCount/data.totalCount*100).toFixed(5)),color:"#32ADDC"},{name:"Out",y:parseFloat(outStatusUsers),color:"#ff6f71"},{name:"Yet to check-in",y:parseFloat((usersYetToCheckIn/data.totalCount*100).toFixed(5)),color:"#ffb940"}],layout.find("#ZPAtt_OutUsersCount").prev().attr("outCountByLoc",!0)):void 0!==data.officeInCount?(layout.find("#ZPAtt_InUsersCount").html(data.officeInCount),layout.find("#ZPAtt_remInUsersCount").html(data.remoteINcount),layout.find("#ZPAtt_accTermInUsersCountCont").hide(),layout.find("#ZPAtt_recDeskInUsersCountCont").hide(),layout.find("#ZPAtt_yetToCheckInCount").html(usersYetToCheckIn),chartDataArr=[{name:officeInDname,y:parseFloat((data.officeInCount/data.totalCount*100).toFixed(5)),color:"#00bd9e"},{name:remoteInDname,y:parseFloat((data.remoteINcount/data.totalCount*100).toFixed(5)),color:"#b2d7ad"},{name:"Out",y:parseFloat(outStatusUsers),color:"#ff6f71"},{name:"Yet to check-in",y:parseFloat((usersYetToCheckIn/data.totalCount*100).toFixed(5)),color:"#ffb940"}]):(layout.find("#ZPAtt_remInUsersCountCont").hide(),layout.find("#ZPAtt_accTermInUsersCountCont").hide(),layout.find("#ZPAtt_recDeskInUsersCountCont").hide(),layout.find("#ZPAtt_InUsersCount").html(data.userInStatusCount),layout.find("#ZPAtt_yetToCheckInCount").html(usersYetToCheckIn),chartDataArr=[{name:"In",y:parseFloat(inStatusUsers),color:"#40e2bb"},{name:"Out",y:parseFloat(outStatusUsers),color:"#ff6f71"}]),layout.find("#ZPAtt_OutUsersCount").html(data.userOutStatusCount),isBreakConfigured){Attendance.Reports.dailyReport.isBreakConfigured=!0,layout.find("#ZPAtt_OnBreakContainer").show();var onBreakUsers=(data.userOnBreakCount/data.totalCount*100).toFixed(5);chartDataArr.push(["On Break",parseFloat(onBreakUsers)]),layout.find("#ZPAtt_OnBreakCount").html(data.userOnBreakCount)}(chartDetails={}).renderTo="teamReports"==ZPLite.Reports.selectedTab?"attendanceDailyReportChartDiv2_team":"attendanceDailyReportChartDiv2_admin",chartDetails.title=ZPI18N.getString("zp.checkinstatus"),chartDetails.spacingTop=30,chartDetails.spacingBottom=0,chartDetails.spacingLeft=0,chartDetails.spacingRight=0,chartDetails.enableExport=!0,chartDetails.innerSize="70%",chartDetails.dataArray=chartDataArr,ZPLite.Reports.Util.constructPieChart(chartDetails)}layout.find("#ZPAtt_userAvailabiltyContByLoc,#ZPAtt_userPresentContByLoc").hide();var tcount=data.totalCount;if(void 0!==data.webPreStatusCount){layout.find("#ZPAtt_userPresentContByLoc").show();var webPreStatusCount=0===tcount?0:parseFloat((data.webPreStatusCount/tcount*100).toFixed(1)),secDeskPreStatusCount=0===tcount?0:parseFloat((data.secDeskPreStatusCount/tcount*100).toFixed(1)),devicePreCount=data.devicePreStatusCount,devicePreStatusCount=0===tcount?0:parseFloat((devicePreCount/tcount*100).toFixed(1)),genPreCount=data.genPreStatusCount,genPreStatusCount=0===tcount?0:parseFloat((genPreCount/tcount*100).toFixed(1)),genPreAccTermCount=0===tcount?0:parseFloat((data.genPreAccTermStatusCount/tcount*100).toFixed(1)),genPreSecDeskCount=0===tcount?0:parseFloat((data.genPreSecDeskStatusCount/tcount*100).toFixed(1)),genPreWebInCount=0===tcount?0:parseFloat((data.genPreWebInStatusCount/tcount*100).toFixed(1)),nonGenPreCount=data.nonGenPreStatusCount,nonGenPreStatusCount=0===tcount?0:parseFloat((nonGenPreCount/tcount*100).toFixed(1)),nonGenPreAccTermCount=0===tcount?0:parseFloat((data.nonGenPreAccTermStatusCount/tcount*100).toFixed(1)),nonGenPreSecDeskCount=0===tcount?0:parseFloat((data.nonGenPreSecDeskStatusCount/tcount*100).toFixed(1)),nonGenPreWebInCount=0===tcount?0:parseFloat((data.nonGenPreWebInStatusCount/tcount*100).toFixed(1));if(layout.find("#ZPAtt_WebPre").html(data.webPreStatusCount.toString()),layout.find("#ZPAtt_WebPrePer").html("("+webPreStatusCount.toString()+"%)"),layout.find("#ZPAtt_AccTermPre").html(devicePreCount.toString()),layout.find("#ZPAtt_AccTermPrePer").html("("+devicePreStatusCount.toString()+"%)"),layout.find("#ZPAtt_PreFromSecDesk").html(data.secDeskPreStatusCount.toString()),layout.find("#ZPAtt_PreFromSecDeskPer").html("("+secDeskPreStatusCount.toString()+"%)"),layout.find('div[id="hubofficePre"]').remove(),data.hubPreStatusCount){var hubPreStatusCount=data.hubPreStatusCount,hubPreStatusCounthtml="";for(var key in hubPreStatusCount){var count=hubPreStatusCount[key],percent=0===tcount?0:parseFloat((count/tcount*100).toFixed(1));hubPreStatusCounthtml+='<div id="hubofficePre" class="sub_dv CP" onclick="Attendance.Reports.dailyReport.constructList(\'accTermIn'+key+'\',this)" presentsCount="true"><span class="leave-clr" id="ZPAtt_AccTerm'+key+'Pre">'+count.toString()+"</span> at "+key+'<span class="leave-clr" id="ZPAtt_AccTerm'+key+'PrePer">('+percent.toString()+"%)</span></div>"}""!=hubPreStatusCounthtml&&layout.find("#accTermPre").append(hubPreStatusCounthtml)}layout.find("#ZPAtt_GenShiftPre").html(genPreCount.toString()),layout.find("#ZPAtt_GenShiftPrePer").html("("+genPreStatusCount.toString()+"%)"),layout.find("#ZPAtt_GenShiftRemoPre").html(data.genPreWebInStatusCount.toString()),layout.find("#ZPAtt_GenShiftRemoPrePer").html("("+genPreWebInCount.toString()+"%)"),layout.find("#ZPAtt_GenShiftAccTermPre").html(data.genPreAccTermStatusCount.toString()),layout.find("#ZPAtt_GenShiftAccTermPrePer").html("("+genPreAccTermCount.toString()+"%)"),layout.find("#ZPAtt_GenShiftSecDeskPre").html(data.genPreSecDeskStatusCount.toString()),layout.find("#ZPAtt_GenShiftSecDeskPrePer").html("("+genPreSecDeskCount.toString()+"%)"),layout.find("#ZPAtt_NonGenShiftPre").html(nonGenPreCount.toString()),layout.find("#ZPAtt_NonGenShiftPrePer").html("("+nonGenPreStatusCount.toString()+"%)"),layout.find("#ZPAtt_OthShiftRemoPre").html(data.nonGenPreWebInStatusCount.toString()),layout.find("#ZPAtt_OthShiftRemoPrePer").html("("+nonGenPreWebInCount.toString()+"%)"),layout.find("#ZPAtt_OthShiftAccTermPre").html(data.nonGenPreAccTermStatusCount.toString()),layout.find("#ZPAtt_OthShiftAccTermPrePer").html("("+nonGenPreAccTermCount.toString()+"%)"),layout.find("#ZPAtt_OthShiftSecDeskPre").html(data.nonGenPreSecDeskStatusCount.toString()),layout.find("#ZPAtt_OthShiftSecDeskPrePer").html("("+nonGenPreSecDeskCount.toString()+"%)")}if(void 0!==data.webInStatusCount){layout.find("#ZPAtt_userAvailabiltyContByLoc").show();var webInStatusCount=0===tcount?0:parseFloat((data.webInStatusCount/tcount*100).toFixed(1)),secDeskInStatusCount=0===tcount?0:parseFloat((data.secDeskInStatusCount/tcount*100).toFixed(1)),deviceCount=data.deviceInStatusCount,deviceInStatusCount=0===tcount?0:parseFloat((deviceCount/tcount*100).toFixed(1)),genInCount=(0===tcount||parseFloat((data.cheInStatusCount/tcount*100).toFixed(1)),0===tcount||parseFloat((data.tenkInStatusCount/tcount*100).toFixed(1)),0===tcount||parseFloat((data.renInStatusCount/tcount*100).toFixed(1)),data.genInStatusCount),genInStatusCount=0===tcount?0:parseFloat((genInCount/tcount*100).toFixed(1)),genInAccTermCount=0===tcount?0:parseFloat((data.genInAccTermStatusCount/tcount*100).toFixed(1)),genInSecDeskCount=0===tcount?0:parseFloat((data.genInSecDeskStatusCount/tcount*100).toFixed(1)),genInWebInCount=0===tcount?0:parseFloat((data.genInWebInStatusCount/tcount*100).toFixed(1)),nonGenInCount=data.nonGenInStatusCount,nonGenInStatusCount=0===tcount?0:parseFloat((nonGenInCount/tcount*100).toFixed(1)),nonGenInAccTermCount=0===tcount?0:parseFloat((data.nonGenInAccTermStatusCount/tcount*100).toFixed(1)),nonGenInSecDeskCount=0===tcount?0:parseFloat((data.nonGenInSecDeskStatusCount/tcount*100).toFixed(1)),nonGenInWebInCount=0===tcount?0:parseFloat((data.nonGenInWebInStatusCount/tcount*100).toFixed(1));if(layout.find("#ZPAtt_WebIn").html(data.webInStatusCount.toString()),layout.find("#ZPAtt_WebInPer").html("("+webInStatusCount.toString()+"%)"),layout.find("#ZPAtt_AccTermIn").html(deviceCount.toString()),layout.find("#ZPAtt_AccTermInPer").html("("+deviceInStatusCount.toString()+"%)"),layout.find("#ZPAtt_InFromSecDesk").html(data.secDeskInStatusCount.toString()),layout.find("#ZPAtt_InFromSecDeskPer").html("("+secDeskInStatusCount.toString()+"%)"),layout.find('div[id="huboffice"]').remove(),data.hubInStatusCount){var hubInStatusCount=data.hubInStatusCount,hubInStatusCounthtml="";for(var key in hubInStatusCount){count=hubInStatusCount[key],percent=0===tcount?0:parseFloat((count/tcount*100).toFixed(1));hubInStatusCounthtml+='<div id="huboffice" class="sub_dv CP" onclick="Attendance.Reports.dailyReport.constructList(\'accTermIn'+key+'\',this)" presentsCount="true"><span class="leave-clr" id="ZPAtt_AccTerm'+key+'">'+count.toString()+"</span> at "+key+'<span class="leave-clr" id="ZPAtt_AccTerm'+key+'Per">('+percent.toString()+"%)</span></div>"}""!=hubInStatusCounthtml&&layout.find("#accTermIn").append(hubInStatusCounthtml)}layout.find("#ZPAtt_GenShiftIn").html(genInCount.toString()),layout.find("#ZPAtt_GenShiftInPer").html("("+genInStatusCount.toString()+"%)"),layout.find("#ZPAtt_GenShiftRemo").html(data.genInWebInStatusCount.toString()),layout.find("#ZPAtt_GenShiftRemoPer").html("("+genInWebInCount.toString()+"%)"),layout.find("#ZPAtt_GenShiftAccTerm").html(data.genInAccTermStatusCount.toString()),layout.find("#ZPAtt_GenShiftAccTermPer").html("("+genInAccTermCount.toString()+"%)"),layout.find("#ZPAtt_GenShiftSecDesk").html(data.genInSecDeskStatusCount.toString()),layout.find("#ZPAtt_GenShiftSecDeskPer").html("("+genInSecDeskCount.toString()+"%)"),layout.find("#ZPAtt_NonGenShiftIn").html(nonGenInCount.toString()),layout.find("#ZPAtt_NonGenShiftInPer").html("("+nonGenInStatusCount.toString()+"%)"),layout.find("#ZPAtt_OthShiftRemo").html(data.nonGenInWebInStatusCount.toString()),layout.find("#ZPAtt_OthShiftRemoPer").html("("+nonGenInWebInCount.toString()+"%)"),layout.find("#ZPAtt_OthShiftAccTerm").html(data.nonGenInAccTermStatusCount.toString()),layout.find("#ZPAtt_OthShiftAccTermPer").html("("+nonGenInAccTermCount.toString()+"%)"),layout.find("#ZPAtt_OthShiftSecDesk").html(data.nonGenInSecDeskStatusCount.toString()),layout.find("#ZPAtt_OthShiftSecDeskPer").html("("+nonGenInSecDeskCount.toString()+"%)")}},constructList:function(statusView,obj,response){var status_view=statusView;statusView&&!ZPeople.IsNumeric(statusView)&&(status_view=statusView.replaceAll("_"," "));var layout=Layout.Page.container;Attendance.Reports.dailyReport.isBreakConfigured||layout.find('[name="statusFilter_Options"] [id=4]').remove();var filterDiv=Layout.Page.container.find("#filterDiv");if(statusView||filterDiv.find('[name="statusFilter"]').hasClass("DNI"))Layout.Page.container.find("#filterIcon").addClass("sel"),Layout.Page.container.find("#pageDiv").addClass("shw_tfilter");else{var filterData=ZPLite.Filters.getValues(filterDiv.find('[name="statusFilter"]'));void 0!==filterData&&filterData.length>0&&(statusView=filterData[0].id)}if(obj&&("desc"===obj.localName||"div"===obj.localName)){var status=obj.hasAttribute("presentsCount")||"div"===obj.localName||obj.hasAttribute("inCountByLoc")?1:statusView,presViewCont=$(obj).closest(".col-sm-5")[0]&&"ZPAtt_userPresentContByLoc"===$(obj).closest(".col-sm-5")[0].id;if(0===statusView||presViewCont)ZPLite.Filters.clearValues(filterDiv.find('[name="statusFilter"]')),Attendance.Reports.dailyReport.userInType=presViewCont?status_view:"All";else{var txt=layout.find('[name="statusFilter_Options"] [id='+status+"] label").text();ZPLite.Filters.setValues(filterDiv.find('[name="statusFilter"]'),[{id:status,text:txt}]);txt=layout.find('[name="statusFilter"]').find("#"+status).text();layout.find('[name="statusFilter_Text"]').text(txt),Attendance.Reports.dailyReport.userInType=status_view}return"myReports"==ZPLite.Reports.selectedTab?Attendance.Reports.myReportData.dailyReportlist=null:"teamReports"==ZPLite.Reports.selectedTab?Attendance.Reports.teamReportData.dailyReportlist=null:Attendance.Reports.adminReportData.dailyReportlist=null,void Attendance.Reports.dailyReport.switchView()}var repTable=Layout.Page.container.find("#attendanceDailyReportBody");obj&&obj.isFromScroll||repTable.empty();var data=Attendance.Reports.dailyReport.empReportTableData,showOfficeInRemoteIn=!1;1==layout.find("#ZPAtt_officeINRemoteINDailyReport").is(":visible")&&(showOfficeInRemoteIn=!0);var html=" ",officeInDname=response.officeINdNameEncoded?response.officeINdNameEncoded:ZPI18N.getString("zp.officein"),remoteInDname=response.remoteINdNameEncoded?response.remoteINdNameEncoded:ZPI18N.getString("zp.remotein");for(var empList in data.empList){var empInfo=data.empList[empList];status=Attendance.consLeaveStat(empInfo.status,!1,!0);html+="<tr class='ZPLRow'>";var emp=empInfo.empId+" "+empInfo.name;if(html+="<td><span class='ellipsis W200 CP' onclick=Attendance.Reports.getUserReportFromSummary('"+empInfo.erecno+"',this,"+empInfo.empStat+") data-toggle='tooltip' data-placement='top' data-container='body' title='"+emp+"'>"+emp+"</span></td>",empInfo.ftime?html+="<td>"+empInfo.ftime+"</td>":html+="<td></td>",empInfo.ttime?html+="<td>"+empInfo.ttime+"</td>":html+="<td></td>",html+="<td>"+empInfo.thrs+"</td>",layout.find("#ZPAtt_showHidePaidBreakDailyReport").hide(),layout.find("#ZPAtt_showHideUnpaidBreakDailyReport").hide(),data.isBreakConfigured&&(data.isPaidBrkDispNeed&&data.isViewAllowedForPaidBrkHrs&&(layout.find("#ZPAtt_showHidePaidBreakDailyReport").show(),html+="<td>"+empInfo.totalPaidBreakHours+"</td>"),data.isUnpaidBrkDispNeed&&data.isViewAllowedForUnPaidBrkHrs&&(layout.find("#ZPAtt_showHideUnpaidBreakDailyReport").show(),html+="<td>"+empInfo.totalUnPaidBreakHours+"</td>")),layout.find("#ZPAtt_showHidePermissionDailyReport").hide(),data.isPermissionConfigured&&(layout.find("#ZPAtt_showHidePermissionDailyReport").show(),html+="<td>"+empInfo.totalPermissionHours+"</td>"),html+="<td><span class='"+(showOfficeInRemoteIn?"ellipsis":"ellipsis W200")+"'data-toggle='tooltip' data-placement='left' title='"+status+"'>"+status+"</span></td>",showOfficeInRemoteIn){var officeInRemoteIn="-";empInfo.officein?officeInRemoteIn=officeInDname:empInfo.remotein&&(officeInRemoteIn=remoteInDname),html+="<td><span class='ellipsis' data-toggle='tooltip' data-placement='left' title='"+officeInRemoteIn+"'>"+officeInRemoteIn+"</span></td>"}var shift="<td>-</td>";if(empInfo.shiftId&&"-"!==empInfo.shiftId&&""!==empInfo.shiftId){var shiftInfo=Shift.getShiftName(empInfo.shiftId,!0);shift="<td><span class='ellipsis' data-toggle='tooltip' data-placement='left' title='"+shiftInfo.shiftName+" ("+shiftInfo.timeInterval+")'>"+shiftInfo.shiftName+"</span></td>"}html+=shift,html+="<td></td></tr>"}Layout.Page.container.find("#attendanceDailyReportBody").html(html)},printReport:function(){var params=Attendance.Reports.dailyReport.getParamsForReport();Attendance.Reports.printReport(Attendance.Reports.dailyReport.isChartView()?"attendanceDailyReportChart":"attendanceDailyReport",params.reportDate)}},earlyBirdReport:{reportName:"ATTENDANCE_EARLYBIRD_REPORT",initPage:function(){ZPLite.Reports.setCurrentModule(Attendance.Reports.moduleName),ZPLite.Reports.setCurrentReport(Attendance.Reports.earlyBirdReport.reportName);var initParams={isModuleDataNeeded:!0,callback:Attendance.Reports.earlyBirdReport.init};ZPLite.Reports.initPage(initParams)},init:function(){if(ZPLite.Reports.Util.setAvailableReportsForModule("Attendance"),Attendance.Reports.earlyBirdReport.currentLateComerReport="myReports"==ZPLite.Reports.selectedTab?Attendance.Reports.myReportData.earlyBirdReport:"teamReports"==ZPLite.Reports.selectedTab?Attendance.Reports.teamReportData.earlyBirdReport:Attendance.Reports.adminReportData.earlyBirdReport,null==Attendance.Reports.depLocShiftList||!Attendance.Reports.earlyBirdReport.currentLateComerReport){var layout=Layout.Page.container.find("#filterDiv");layout.find("[name='checkInTimeFilter']").find("input").timepicker({defaultTime:"",disableMousewheel:!0,showMeridian:!0,minuteStep:1}),layout.find("[name='checkInTimeFilter']").find("input").attr("onclick","Attendance.set_DefValue_ForTimePicker_Input(this)"),layout.find("[name='checkOutTimeFilter']").find("input").timepicker({defaultTime:"",disableMousewheel:!0,showMeridian:!0,minuteStep:1}),layout.find("[name='checkOutTimeFilter']").find("input").attr("onclick","Attendance.set_DefValue_ForTimePicker_Input(this)"),layout.find("[name='checkInHoursFilter']").find("input").timepicker({defaultTime:"",disableMousewheel:!0,showMeridian:!1,minuteStep:1}),layout.find('[name="checkOutHoursFilter"]').find("input").timepicker({defaultTime:"",disableMousewheel:!0,showMeridian:!1,minuteStep:1}),layout.find('[name="hoursFilter"]').find("input").timepicker({defaultTime:"",disableMousewheel:!0,showMeridian:!1,minuteStep:1}),Attendance.Reports.getDepLocShiftList(),Attendance.Reports.Filters.clearCache(!0);var filterDiv=Layout.Page.container.find("#filterDiv"),attModule=ZPLite.Reports.moduleData.attendance;isManageAttendanceData=attModule.isManageAttedance,isLead=attModule.isLead,isSPOCReportView=attModule.isSPOCReportView,isadmin&&(isManageAttendanceData=!0),Attendance.Reports.Filters.constructFilter(filterDiv.find('[name="datePeriodFilter"]'),"datePeriod",!0,Attendance.Reports.earlyBirdReport.filterOnChangeCallback),Attendance.Reports.Filters.constructFilter(filterDiv.find('[name="employeeStatusFilter"]'),"employeeStatus",!1,Attendance.Reports.earlyBirdReport.filterOnChangeCallback),Attendance.Reports.Filters.constructFilter(filterDiv.find('[name="employeeFilter"]'),"employee",!1,Attendance.Reports.earlyBirdReport.filterOnChangeCallback,"ATTENDANCE_EARLYREPORT_FILTER_EMPLOYEE_FIRESCROLL"),Attendance.Reports.Filters.constructFilter(filterDiv.find('[name="hoursComparatorFilter"]'),"hours",!0,Attendance.Reports.earlyBirdReport.filterOnChangeCallback),Attendance.Reports.Filters.constructFilter(filterDiv.find('[name="checkInFilter"]'),"checkIn",!0,Attendance.Reports.earlyBirdReport.filterOnChangeCallback),Attendance.Reports.Filters.constructFilter(filterDiv.find('[name="checkOutFilter"]'),"checkOut",!0,Attendance.Reports.earlyBirdReport.filterOnChangeCallback),Attendance.Reports.Filters.constructFilter(filterDiv.find('[name="shiftFilter"]'),"shift",!1),Attendance.Reports.Filters.constructFilter(filterDiv.find('[name="departmentFilter"]'),"department",!1),Attendance.Reports.Filters.constructFilter(filterDiv.find('[name="locationFilter"]'),"location",!1),Attendance.Reports.Filters.constructFilter(filterDiv.find('[name="orgTagFilter"]'),"orgTag",!1),Attendance.Reports.Filters.constructFilter(filterDiv.find('[name="designationFilter"]'),"designation",!1),isOrgStructureEnabled&&(Attendance.Reports.Filters.constructFilter(filterDiv.find('[name="entityFilter"]'),"legalEntity",!1),Attendance.Reports.Filters.constructFilter(filterDiv.find('[name="buFilter"]'),"businessUnit",!1),Attendance.Reports.Filters.constructFilter(filterDiv.find('[name="divisionFilter"]'),"division",!1)),isadmin&&"myReports"!=ZPLite.Reports.selectedTab?Attendance.Reports.Filters.constructFilter(filterDiv.find('[name="roleFilter"]'),"role",!1):filterDiv.find('[name="roleFilter"]').remove(),isSPOCReportView||isManageAttendanceData||!isLead||(filterDiv.find('[name="employeeStatusFilter"]').addClass("DNI"),filterDiv.find('[name="exemployeeInclusionFilter"]').addClass("DNI")),filterDiv.find('[name="fromDateFilter"]').off("click").on("click",function(){Calendar.setUpCalendar(event,$(this).find('[name="fromDateFilterText"]'),null,null,function(value,obj){$(obj).parent().val(Calendar.formatDate(value)),$(obj).parent().data("selectedDate",value),$(obj).parent().addClass("selected")})}),filterDiv.find('[name="toDateFilter"]').off("click").on("click",function(){Calendar.setUpCalendar(event,$(this).find('[name="toDateFilterText"]'),null,null,function(value,obj){$(obj).parent().val(Calendar.formatDate(value)),$(obj).parent().data("selectedDate",value),$(obj).parent().addClass("selected")})});var dateNavigationDtls={};dateNavigationDtls.mode=Attendance.Reports.earlyBirdReport.reportName,dateNavigationDtls.containerId=Layout.Page.container.attr("id"),dateNavigationDtls.previousBtnId="goToPreviousBtn",dateNavigationDtls.nextBtnId="goToNextBtn",dateNavigationDtls.displayAreaId="dateNavigatorText",dateNavigationDtls.navigationCallback=Attendance.Reports.earlyBirdReport.dateNaviCallBack,dateNavigationDtls.getDateForCustomNavigationCallback=Attendance.Reports.getDateForCustomNavigation,ZPLite.DateNavigator.init(dateNavigationDtls);var type=ZPLite.DateNavigator.TYPE.DAILY;"myReports"==ZPLite.Reports.selectedTab&&(type=ZPLite.DateNavigator.TYPE.WEEKLY),ZPLite.DateNavigator.setPeriod(dateNavigationDtls.mode,type,"current"),Attendance.Reports.earlyBirdReport.setDefaultFilterParams(),Attendance.Reports.earlyBirdReport.generateReport()}},setDefaultFilterParams:function(){var filterDiv=Layout.Page.container.find("#filterDiv");ZPLite.Filters.setValues(filterDiv.find('[name="datePeriodFilter"]'),[{id:"0",text:ZPI18N.getString("zp.today"),periodType:"daily",tense:"current"}]),"myReports"==ZPLite.Reports.selectedTab&&ZPLite.Filters.setValues(filterDiv.find('[name="datePeriodFilter"]'),[{id:"1",text:ZPI18N.getString("zp.thisweek"),periodType:"weekly",tense:"current"}]),ZPLite.Filters.setValues(filterDiv.find('[name="employeeStatusFilter"]'),[{id:"19",text:ZPI18N.getString("zp.activeusers")},{id:"-2",text:ZPI18N.getString("zp.activeprofiles")},{id:"18",text:ZPI18N.getString("zp.exemployees")}]),ZPLite.Filters.clearValues(filterDiv.find('[name="employeeFilter"]')),filterDiv.find('[name="userInclusionFilter"]').removeClass("DNI"),filterDiv.find('[name="userInclusionFilter"]').find("input").prop("checked",!1),ZPLite.Filters.setValues(filterDiv.find('[name="hoursComparatorFilter"]'),[{id:"0",text:ZPI18N.getString("zp.all")}]),ZPLite.Filters.setValues(filterDiv.find('[name="checkInFilter"]'),[{id:"all",text:ZPI18N.getString("zp.all")}]),ZPLite.Filters.setValues(filterDiv.find('[name="checkOutFilter"]'),[{id:"all",text:ZPI18N.getString("zp.all")}]),ZPLite.Filters.clearValues(filterDiv.find('[name="locationFilter"]')),filterDiv.find('[name="orgTagFilter"]').is(":visible")&&ZPLite.Filters.clearValues(filterDiv.find('[name="orgTagFilter"]')),isadmin&&filterDiv.find('[name="roleFilter"]').is(":visible")&&ZPLite.Filters.clearValues(filterDiv.find('[name="roleFilter"]')),ZPLite.Filters.clearValues(filterDiv.find('[name="departmentFilter"]')),ZPLite.Filters.clearValues(filterDiv.find('[name="designationFilter"]')),ZPLite.Filters.clearValues(filterDiv.find('[name="shiftFilter"]')),filterDiv.find("[name=fromDateFilter]").addClass("DNI"),filterDiv.find("[name=toDateFilter]").addClass("DNI"),Attendance.Reports.earlyBirdReport.removeErrClass(),filterDiv.find('[name="hoursFilter"]').find("input").attr("placeholder","hh:mm"),filterDiv.find('[name="hoursFilter"]').removeClass("DNI").addClass("DNI"),filterDiv.find('[name="checkInHoursFilter"]').find("input").attr("placeholder","hh:mm"),filterDiv.find('[name="checkInHoursFilter"]').removeClass("DNI").addClass("DNI"),filterDiv.find('[name="checkOutHoursFilter"]').find("input").attr("placeholder","hh:mm"),filterDiv.find('[name="checkOutHoursFilter"]').removeClass("DNI").addClass("DNI"),filterDiv.find('[name="checkInTimeFilter"]').find("input").attr("placeholder",Attendance.timeFormatIs12hr?"1:00 PM":"13:00"),filterDiv.find('[name="checkInTimeFilter"]').removeClass("DNI").addClass("DNI"),filterDiv.find('[name="checkOutTimeFilter"]').find("input").attr("placeholder",Attendance.timeFormatIs12hr?"1:00 PM":"13:00"),filterDiv.find('[name="checkOutTimeFilter"]').removeClass("DNI").addClass("DNI"),filterDiv.find('[name="entityFilter"]').is(":visible")&&ZPLite.Filters.clearValues(filterDiv.find('[name="entityFilter"]')),filterDiv.find('[name="buFilter"]').is(":visible")&&ZPLite.Filters.clearValues(filterDiv.find('[name="buFilter"]')),filterDiv.find('[name="divisionFilter"]').is(":visible")&&ZPLite.Filters.clearValues(filterDiv.find('[name="divisionFilter"]')),filterDiv.find('[name="exemployeeInclusionFilter"]').removeClass("DNI"),filterDiv.find('[name="exemployeeInclusionFilter"]').find("input").prop("checked",!0),isSPOCReportView||isManageAttendanceData||!isLead||(filterDiv.find('[name="employeeStatusFilter"]').addClass("DNI"),filterDiv.find('[name="exemployeeInclusionFilter"]').addClass("DNI")),"myReports"==ZPLite.Reports.selectedTab&&(filterDiv.find('[name="departmentFilter"]').addClass("DNI"),filterDiv.find('[name="designationFilter"]').addClass("DNI"),filterDiv.find('[name="shiftFilter"]').addClass("DNI"),filterDiv.find('[name="locationFilter"]').addClass("DNI"),filterDiv.find('[name="roleFilter"]').addClass("DNI"),filterDiv.find('[name="orgTagFilter"]').addClass("DNI"),filterDiv.find('[name="employeeFilter"]').addClass("DNI"),filterDiv.find('[name="userInclusionFilter"]').addClass("DNI"),filterDiv.find('[name="entityFilter"]').addClass("DNI"),filterDiv.find('[name="buFilter"]').addClass("DNI"),filterDiv.find('[name="divisionFilter"]').addClass("DNI"),filterDiv.find('[name="employeeStatusFilter"]').addClass("DNI"),filterDiv.find('[name="exemployeeInclusionFilter"]').addClass("DNI"))},resetFilter:function(){Attendance.Reports.earlyBirdReport.setDefaultFilterParams()},removeErrClass:function(){var errorDivs=Layout.Page.container.find("#filterDiv").find(".error-clr");errorDivs.length>0&&$.each(errorDivs,function(index,errorDiv){$(errorDiv).removeClass("error-clr")})},applyFilter:function(){var tense,customDatePeriod,errorMessage,container=Layout.Page.container.find("#filterDiv"),values=ZPLite.Filters.getValues(container.find('[name="datePeriodFilter"]')),type=values[0].periodType,hideNavigation=!1;if(Attendance.Reports.earlyBirdReport.removeErrClass(),"6"===values[0].id){var fromDate=container.find('[name="fromDateFilter"]').data("selectedDate"),toDate=container.find('[name="toDateFilter"]').data("selectedDate");if(void 0===fromDate)container.find('[name="fromDateFilter"]').addClass("error-clr"),errorMessage=ZPI18N.getString("zp.emptyfromdate");else if(void 0===toDate)container.find('[name="toDateFilter"]').addClass("error-clr"),errorMessage=ZPI18N.getString("zp.emptytodate");else{var dateDiff=moment(Calendar.formatDate(toDate),dateFmt.toUpperCase()).diff(moment(Calendar.formatDate(fromDate),dateFmt.toUpperCase()),"days");dateDiff<0?(container.find('[name="toDateFilter"]').addClass("error-clr"),errorMessage=ZPI18N.getString("zp.greaterfromdate")):dateDiff>31&&(container.find('[name="toDateFilter"]').addClass("error-clr"),errorMessage=ZPI18N.getString("zp.datewithinonemonth"))}if(errorMessage)return void ZPeople.Message.showFailureMsg(errorMessage);customDatePeriod={from:fromDate,to:toDate}}else hideNavigation=!1,tense=values[0].tense;ZPLite.DateNavigator.setPeriod(Attendance.Reports.earlyBirdReport.reportName,type,tense,hideNavigation,customDatePeriod),Attendance.Reports.earlyBirdReport.generateReport()},dateNaviCallBack:function(){var filterDiv=Layout.Page.container.find("#filterDiv");ZPLite.Filters.setValues(filterDiv.find('[name="datePeriodFilter"]'),[{id:"6",text:ZPI18N.getString("zp.custom"),periodType:"custom"}]),filterDiv.find("[name=datePeriodFilter]").find("li.sel").removeClass("sel"),filterDiv.find("[name=fromDateFilter]").removeClass("DNI"),filterDiv.find("[name=toDateFilter]").removeClass("DNI");var fVal,tVal,period=ZPLite.DateNavigator.getPeriod(Attendance.Reports.earlyBirdReport.reportName);void 0!==period.from&&void 0!==period.to?(fVal=Calendar.formatDate(period.from),tVal=Calendar.formatDate(period.to)):tVal=fVal=Calendar.formatDate(period.day),filterDiv.find("[name=fromDateFilter]").val(fVal),filterDiv.find("[name=fromDateFilter]").data("selectedDate",Calendar.parseDate(fVal,uidateFormat)),filterDiv.find("[name=fromDateFilter]").data("text",fVal),filterDiv.find("[name=fromDateFilter]").addClass("selected"),filterDiv.find("[name=fromDateFilterText]").text(fVal),filterDiv.find("[name=fromDateFilterText]").val(fVal),filterDiv.find("[name=toDateFilter]").val(tVal),filterDiv.find("[name=toDateFilter]").data("selectedDate",Calendar.parseDate(tVal,uidateFormat)),filterDiv.find("[name=toDateFilter]").data("text",tVal),filterDiv.find("[name=toDateFilter]").addClass("selected"),filterDiv.find("[name=toDateFilterText]").text(tVal),filterDiv.find("[name=toDateFilterText]").val(tVal),Attendance.Reports.earlyBirdReport.generateReport()},filterOnChangeCallback:function(data){var filterDiv=Layout.Page.container.find("#filterDiv");if("datePeriod"===data.entity){var values=ZPLite.Filters.getValues(filterDiv.find('[name="datePeriodFilter"]'));jQuery.isEmptyObject(values)||"6"!==values[0].id?(filterDiv.find('[name="fromDateFilter"]').addClass("DNI"),filterDiv.find('[name="toDateFilter"]').addClass("DNI")):(filterDiv.find('[name="fromDateFilter"]').removeClass("DNI"),filterDiv.find('[name="toDateFilter"]').removeClass("DNI"))}else if("hours"===data.entity){filterDiv.find('[name="hoursFilter"]').removeClass("error-clr"),void 0===(filterData=ZPLite.Filters.getValues(filterDiv.find('[name="hoursComparatorFilter"]')))||"0"===filterData[0].id?filterDiv.find('[name="hoursFilter"]').addClass("DNI"):(filterDiv.find('[name="hoursFilter"]').removeClass("DNI"),filterDiv.find('[name="hoursFilter"]').find("input").attr("placeholder","hh:mm"),filterDiv.find('[name="hoursFilter"]').find("input").val(""))}else if("checkIn"===data.entity){Attendance.Reports.earlyBirdReport.removeErrClass(),filterDiv.find('[name="checkInHoursFilter"]').addClass("DNI"),filterDiv.find('[name="checkInTimeFilter"]').addClass("DNI"),filterDiv.find('[name="checkInHoursFilter"]').removeClass("error-clr"),filterDiv.find('[name="checkInTimeFilter"]').removeClass("error-clr"),filterDiv.find('[name="checkInHoursFilter"]').find("input").attr("placeholder","hh:mm"),void 0!==(filterData=ZPLite.Filters.getValues(filterDiv.find('[name="checkInFilter"]')))&&("entryShiftBefore"!==filterData[0].id&&"entryShiftAfter"!==filterData[0].id||(filterDiv.find('[name="checkInHoursFilter"]').removeClass("DNI"),filterDiv.find('[name="checkInHoursFilter"]').find("input").val("")),"entryBefore"!==filterData[0].id&&"entryAfter"!==filterData[0].id||(filterDiv.find('[name="checkInTimeFilter"]').removeClass("DNI"),filterDiv.find('[name="checkInTimeFilter"]').find("input").val(""),filterDiv.find('[name="checkInTimeFilter"]').find("input").attr("placeholder",Attendance.timeFormatIs12hr?"1:00 PM":"13:00")))}else if("checkOut"===data.entity){filterDiv.find('[name="checkOutHoursFilter"]').addClass("DNI"),filterDiv.find('[name="checkOutTimeFilter"]').addClass("DNI"),filterDiv.find('[name="checkOutHoursFilter"]').removeClass("error-clr"),filterDiv.find('[name="checkOutTimeFilter"]').removeClass("error-clr"),filterDiv.find('[name="checkOutHoursFilter"]').find("input").attr("placeholder","hh:mm"),void 0!==(filterData=ZPLite.Filters.getValues(filterDiv.find('[name="checkOutFilter"]')))&&("entryShiftBefore"!==filterData[0].id&&"entryShiftAfter"!==filterData[0].id||(filterDiv.find('[name="checkOutHoursFilter"]').removeClass("DNI"),filterDiv.find('[name="checkOutHoursFilter"]').find("input").val("")),"entryBefore"!==filterData[0].id&&"entryAfter"!==filterData[0].id||(filterDiv.find('[name="checkOutTimeFilter"]').removeClass("DNI"),filterDiv.find('[name="checkOutTimeFilter"]').find("input").val(""),filterDiv.find('[name="checkOutTimeFilter"]').find("input").attr("placeholder",Attendance.timeFormatIs12hr?"1:00 PM":"13:00")))}else if("employee"===data.entity){var filterData,erecNo=[];void 0!==(filterData=ZPLite.Filters.getValues(filterDiv.find('[name="employeeFilter"]')))&&filterData.length>0&&$.each(filterData,function(index,options){erecNo.push(options.id)}),filterDiv.find('[name="userInclusionFilter"]').removeClass("DNI"),erecNo.length>0&&(filterDiv.find('[name="userInclusionFilter"]').addClass("DNI"),filterDiv.find('[name="userInclusionFilter"]').find("input").prop("checked",!1))}else if("employeeStatus"===data.entity){var employeeStatus=[];void 0!==(filterData=ZPLite.Filters.getValues(filterDiv.find('[name="employeeStatusFilter"]')))&&filterData.length>0&&$.each(filterData,function(index,options){employeeStatus.push(options.id)}),filterDiv.find('[name="exemployeeInclusionFilter"]').addClass("DNI"),employeeStatus.includes("18")&&(filterDiv.find('[name="exemployeeInclusionFilter"]').find("input").prop("checked",!0),filterDiv.find('[name="exemployeeInclusionFilter"]').removeClass("DNI")),Attendance.Reports.Filters.clearCache(!0,"employee"),ZPLite.Filters.clearOptions(filterDiv.find('[name="employeeFilter"]'))}},getDefaultParams:function(){return{mode:"attEarlyLateReport",conreqcsr:csrfToken,userTypeId:"[19,-2,18]",incDateOfExit:!0}},getParamsForReport:function(){var toaddOnDay,params=Attendance.Reports.earlyBirdReport.getDefaultParams(),filterDiv=Layout.Page.container.find("#filterDiv"),filterData=ZPLite.Filters.getValues(filterDiv.find('[name="employeeFilter"]'));if(void 0!==filterData&&filterData.length>0){var erecNo=[];$.each(filterData,function(index,options){erecNo.push(options.id)}),params.erecno=JSON.stringify(erecNo)}if(Layout.Page.container.find("[name=userInclusionFilter]").find("input").is(":checked")&&(params.showDirectRepTo=!0),!filterDiv.find('[name="hoursFilter"]').hasClass("DNI")&&void 0!==(filterData=ZPLite.Filters.getValues(filterDiv.find('[name="hoursComparatorFilter"]')))&&filterData.length>0){if(void 0===(hours=(hoursFilter=filterDiv.find('[name="hoursFilter"]')).find("input").val())||""===hours)return hoursFilter.addClass("error-clr"),errorMessage=ZPI18N.getString("zp.entervalidinput"),void ZPeople.Message.showWarningMsg(errorMessage);params.totHrsTime=JSON.stringify({timeInSecs:Attendance.Common.convertTimerInputToMinsOrSecs(hours,!0,!0),type:filterData[0].id})}if((filterData=ZPLite.Filters.getValues(filterDiv.find('[name="departmentFilter"]')))&&filterData.length>0){var departmentId=[];$.each(filterData,function(index,options){departmentId.push(options.id)}),params.departmentId=JSON.stringify(departmentId)}if(void 0!==(filterData=ZPLite.Filters.getValues(filterDiv.find('[name="designationFilter"]')))&&filterData.length>0){var desgId=[];$.each(filterData,function(index,options){desgId.push(options.id)}),params.desgId=JSON.stringify(desgId)}if(void 0!==(filterData=ZPLite.Filters.getValues(filterDiv.find('[name="locationFilter"]')))&&filterData.length>0){var locationId=[];$.each(filterData,function(index,options){locationId.push(options.id)}),params.locationId=JSON.stringify(locationId)}if(void 0!==(filterData=ZPLite.Filters.getValues(filterDiv.find('[name="roleFilter"]')))&&filterData.length>0){var roleId=[];$.each(filterData,function(index,options){roleId.push(options.id)}),params.roleId=JSON.stringify(roleId)}if(Attendance.organizationTag.fetchParams(filterDiv,params),void 0!==(filterData=ZPLite.Filters.getValues(filterDiv.find('[name="shiftFilter"]')))&&filterData.length>0){var shiftId=[];$.each(filterData,function(index,options){shiftId.push(options.id)}),params.shiftId=JSON.stringify(shiftId)}if(!filterDiv.find('[name="employeeStatusFilter"]').hasClass("DNI")&&void 0!==(filterData=ZPLite.Filters.getValues(filterDiv.find('[name="employeeStatusFilter"]')))&&filterData.length>0){var employeeStatus=[];$.each(filterData,function(index,options){employeeStatus.push(options.id)}),params.userTypeId=JSON.stringify(employeeStatus)}if(filterDiv.find('[name="exemployeeInclusionFilter"]').find("input").is(":checked")||delete params.incDateOfExit,isOrgStructureEnabled){if((filterData=ZPLite.Filters.getValues(filterDiv.find('[name="entityFilter"]')))&&filterData.length>0){var entity=[];$.each(filterData,function(index,options){entity.push(options.id)}),params.entityId=JSON.stringify(entity)}if((filterData=ZPLite.Filters.getValues(filterDiv.find('[name="buFilter"]')))&&filterData.length>0){var buFilterId=[];$.each(filterData,function(index,options){buFilterId.push(options.id)}),params.bUnitId=JSON.stringify(buFilterId)}if((filterData=ZPLite.Filters.getValues(filterDiv.find('[name="divisionFilter"]')))&&filterData.length>0){var divisionId=[];$.each(filterData,function(index,options){divisionId.push(options.id)}),params.divisionId=JSON.stringify(divisionId)}}if(void 0!==(filterData=ZPLite.Filters.getValues(filterDiv.find('[name="checkInFilter"]')))&&filterData.length>0)switch(filterData[0].id){case"all":break;case"notRecorded":params.notRecorded="in";break;case"entryShiftBefore":case"entryShiftAfter":if(!(hoursFilter=filterDiv.find('[name="checkInHoursFilter"]')).hasClass("DNI")){if(void 0===(hours=hoursFilter.find("input").val())||""===hours)return hoursFilter.addClass("error-clr"),errorMessage=ZPI18N.getString("zp.entervalidinput"),void ZPeople.Message.showWarningMsg(errorMessage);var time=Attendance.Common.convertTimerInputToMinsOrSecs(hours,!0);time="entryShiftAfter"==filterData[0].id?-time:time,params.customFromTime=JSON.stringify({timeInSecs:time,type:filterData[0].id})}break;case"entryBefore":case"entryAfter":if(!(timeFilter=filterDiv.find('[name="checkInTimeFilter"]')).hasClass("DNI")){if(void 0===(time=timeFilter.find("input").val())||""===hours)return timeFilter.addClass("error-clr"),errorMessage=ZPI18N.getString("zp.entervalidinput"),void ZPeople.Message.showWarningMsg(errorMessage);var timeInSecs=Attendance.Common.convertTimerInputToMinsOrSecs(time,!0);params.customFromTime=JSON.stringify({timeInSecs:timeInSecs,type:filterData[0].id}),toaddOnDay=timeInSecs}}if(void 0!==(filterData=ZPLite.Filters.getValues(filterDiv.find('[name="checkOutFilter"]')))&&filterData.length>0)switch(filterData[0].id){case"all":break;case"notRecorded":params.notRecorded="out";break;case"entryShiftBefore":case"entryShiftAfter":var hoursFilter;if(!(hoursFilter=filterDiv.find('[name="checkOutHoursFilter"]')).hasClass("DNI")){var hours;if(void 0===(hours=hoursFilter.find("input").val())||""===hours)return hoursFilter.addClass("error-clr"),errorMessage=ZPI18N.getString("zp.entervalidinput"),void ZPeople.Message.showWarningMsg(errorMessage);time=Attendance.Common.convertTimerInputToMinsOrSecs(hours,!0);time="entryShiftBefore"==filterData[0].id?-time:time,type="entryShiftBefore"==filterData[0].id?"exitShiftBefore":"exitShiftAfter",params.customToTime=JSON.stringify({timeInSecs:time,type:type})}break;case"entryBefore":case"entryAfter":var timeFilter;if(!(timeFilter=filterDiv.find('[name="checkOutTimeFilter"]')).hasClass("DNI")){if(void 0===(time=timeFilter.find("input").val())||""===hours)return timeFilter.addClass("error-clr"),errorMessage=ZPI18N.getString("zp.entervalidinput"),void ZPeople.Message.showWarningMsg(errorMessage);type="entryBefore"==filterData[0].id?"exitBefore":"exitAfter";timeInSecs=Attendance.Common.convertTimerInputToMinsOrSecs(time,!0);toaddOnDay&&toaddOnDay>timeInSecs&&(timeInSecs+=86400),params.customToTime=JSON.stringify({timeInSecs:timeInSecs,type:type})}}(Layout.Page.container.find("#attendanceEarlyBirdReportEmp").hasClass("sort-u")||Layout.Page.container.find("#attendanceEarlyBirdReportEmp").hasClass("sort-d"))&&(params.isEmpSortAsc=Layout.Page.container.find("#attendanceEarlyBirdReportEmp").hasClass("sort-u"));var datePeriod=ZPLite.DateNavigator.getPeriod(Attendance.Reports.earlyBirdReport.reportName);return void 0!==datePeriod&&(void 0!==datePeriod.from&&void 0!==datePeriod.to?(params.sdate=Calendar.formatDate(datePeriod.from),params.edate=Calendar.formatDate(datePeriod.to)):(params.sdate=Calendar.formatDate(datePeriod.day),params.edate=Calendar.formatDate(datePeriod.day))),params.startIndex=ZPLite.Firescroll.getStartIndex(Attendance.Reports.earlyBirdReport.Firescroll.mode),"myReports"==ZPLite.Reports.selectedTab?params.zplType=1:"teamReports"==ZPLite.Reports.selectedTab&&(params.zplType=2),params.repType=ZPLite.Reports.selectedTab,params},generateReport:function(){var reportLayout=Layout.Page.container.find("#attendanceEarlyBirdReport");ZPLite.Firescroll.reset(reportLayout,Attendance.Reports.earlyBirdReport.Firescroll.mode),reportLayout.scrollTop(0);var params=Attendance.Reports.earlyBirdReport.getParamsForReport();params&&(Layout.Page.container.find(".ZPNdata ").fadeOut(100).remove(),reportLayout.before(ZPeople.LOADING_HTML),reportLayout.addClass("DN"),ZPeople.Request.send("/AttendanceReportAction.zp",params,function(response,params){if(response.fail||response.error&&"permissionDenied"===response.error)Attendance.Reports.permDenied();else{Layout.Page.container.find("[id=zp_page_loading]").fadeOut(200).remove(),reportLayout.removeClass("DN"),reportLayout.find("#attendanceEarlyBirdReportBody").empty(),response.report.empDetails&&Layout.Page.container.find(".ZPNdata ").fadeOut(100).remove();var fDate=response.report.userDate,tDate=response.report.viewDate;Attendance.Reports.earlyBirdReport.isLateComerReportDiffDate=fDate!==tDate,Attendance.Reports.earlyBirdReport.isLateComerReportDiffDate?reportLayout.find("#ZPAtt_attLateComerRepDateHeader").show():reportLayout.find("#ZPAtt_attLateComerRepDateHeader").hide(),response.dispMonth?Layout.Page.container.find("#dateNavigatorText").html(response.dispMonth):Layout.Page.container.find("#dateNavigatorText").html(Attendance.datesInHeader(fDate,tDate)),Attendance.Reports.earlyBirdReport.currentLateComerReport=response.report.empDetails,"myReports"==ZPLite.Reports.selectedTab?Attendance.Reports.myReportData.earlyBirdReport=Attendance.Reports.earlyBirdReport.currentLateComerReport:"teamReports"==ZPLite.Reports.selectedTab?Attendance.Reports.teamReportData.earlyBirdReport=Attendance.Reports.earlyBirdReport.currentLateComerReport:Attendance.Reports.adminReportData.earlyBirdReport=Attendance.Reports.earlyBirdReport.currentLateComerReport;var officeInRemoteInStatus=Layout.Page.container.find("#attendanceEarlyBirdReport #officeinRemoteinStatus"),officeInHours=Layout.Page.container.find("#attendanceEarlyBirdReport #officeinHours"),remoteInHours=Layout.Page.container.find("#attendanceEarlyBirdReport #remoteinHours");if(void 0!=officeInRemoteInStatus[0]&&void 0!=fDate&&void 0!=officeInHours[0]&&void 0!=remoteInHours[0]){var twenty20=moment("2020-01-01")._d,startdate=moment(fDate,dateFmt.toUpperCase())._d;officeInRemoteInStatus.removeClass("DN"),officeInHours.removeClass("DN"),remoteInHours.removeClass("DN"),startdate.getTime()<twenty20.getTime()&&(officeInRemoteInStatus.addClass("DN"),officeInHours.addClass("DN"),remoteInHours.addClass("DN"))}Attendance.Reports.earlyBirdReport.constructReport(!1,response.report.shiftDetails),ZPLite.Firescroll.init(reportLayout,Attendance.Reports.earlyBirdReport.Firescroll.mode,{maxFetchLimit:20,callback:Attendance.Reports.earlyBirdReport.Firescroll.loadMoreData}),ZPLite.Firescroll.setFetchedCount(Attendance.Reports.earlyBirdReport.Firescroll.mode,response.report.empDetails.length)}}))},constructReport:function(isFromScroll,shiftDetails){var repTable=Layout.Page.container.find("#attendanceEarlyBirdReport").find("#attendanceEarlyBirdReportBody");isFromScroll||repTable.empty();var latebirdList=Attendance.Reports.earlyBirdReport.currentLateComerReport;$.each(latebirdList,function(index,details){var empDates=details,i=0;for(var dayIt in empDates){var empInfo=empDates[dayIt],fromDate=empInfo.dateStr,tr="<tr class='ZPLRow'>",tdHeight=empDates.length;i<1&&(tr+="<td rowspan="+tdHeight+" class='colM1_sticky'><img class='FL' src="+empInfo.empPhoto+">",tr+="<div class='ZPusrName'><span class='ellipsis W200 CP' onclick=Attendance.Reports.getUserReportFromSummary('"+empInfo.erecno+"',this,"+empInfo.empStat+") data-toggle='tooltip' data-placement='top' data-container='body' title='"+empInfo.empId+" "+empInfo.empName+"'><b>"+empInfo.empId+"</b>"+empInfo.empName+"</span></div></td>",i++),Attendance.Reports.earlyBirdReport.isLateComerReportDiffDate&&(tr+='<td class="text-center B1 TBrdr" style="padding-left:8px;width:100px;max-width:initial;min-width:120px">'+fromDate+"</td>");var earlyLateComeTime=empInfo.earlyLateComeTime,earlyLateLeaveTime=empInfo.earlyLateLeaveTime,netValue=empInfo.netVal;tr+="<td class='text-center B1 TBrdr'><div class='W80 Mauto'>"+(empInfo.firstIn?empInfo.firstIn:"-")+"</div></td>",tr+="<td class='text-center B1 TBrdr'><div class='W80 Mauto'>"+(empInfo.lastOut?empInfo.lastOut:"-")+"</div></td>",tr+="<td class='text-center B1 TBrdr'><div class='W80 Mauto'>"+(empInfo.thrs?empInfo.thrs:"-")+"</div></td>",tr+="<td class='P0I TBrdr'><table class='table i_table'><tbody><tr>";var earlyEntryVal="-",lateEntryVal="-",earlyEntryClass="",lateEntryClass="";void 0!==earlyLateComeTime&&(earlyLateComeTime<0?(lateEntryVal="-"+Attendance.disHours(-1*earlyLateComeTime/60),lateEntryClass="red"):(earlyEntryVal="+"+Attendance.disHours(earlyLateComeTime/60),earlyEntryClass="grn")),tr+="<td class='text-center' width='50%'><div class='W80 Mauto "+earlyEntryClass+"'>"+earlyEntryVal+"</div></td>",tr+="<td class='text-center' width='50%'><div class='W80 Mauto "+lateEntryClass+"'>"+lateEntryVal+"</div></td>",tr+="</tr></tbody></table></td>",tr+="<td class='P0I TBrdr'><table class='table i_table'><tbody><tr>";var earlyExitVal="-",lateExitVal="-",earlyExitClass="",lateExitClass="";void 0!==earlyLateLeaveTime&&(earlyLateLeaveTime<0?(earlyExitVal="-"+Attendance.disHours(-1*earlyLateLeaveTime/60),earlyExitClass="red"):(lateExitVal="+"+Attendance.disHours(earlyLateLeaveTime/60),lateExitClass="grn")),tr+="<td class='text-center' width='50%'><div class='W80 Mauto "+earlyExitClass+"'>"+earlyExitVal+"</div></td>",tr+="<td class='text-center' width='50%'><div class='W80 Mauto "+lateExitClass+"'>"+lateExitVal+"</div></td>",tr+="</tr></tbody></table></td>";var netValueClass="";void 0!==netValue?netValue<0?(netValue="-"+Attendance.disHours(-1*netValue/60),netValueClass="red"):(netValue="+"+Attendance.disHours(netValue/60),netValueClass="grn"):netValue="-",tr+="<td class='text-center B1 TBrdr "+netValueClass+"'> <div class='W80 Mauto'>"+netValue+"</div></td>";var officeInHours=empInfo.officein_hrs;void 0!=officeInHours&&(tr+="<td class='text-center B1 TBrdr'> <div class='Mauto'>"+ZSEC.Encoder.encodeForHTML(officeInHours)+"</div></td>");var remoteInHours=empInfo.remotein_hrs;void 0!=remoteInHours&&(tr+="<td class='text-center B1 TBrdr'> <div class='Mauto'>"+ZSEC.Encoder.encodeForHTML(remoteInHours)+"</div></td>");var officeRemoteStatus=empInfo.officeRemoteStatus;if(void 0!=officeRemoteStatus&&(tr+="<td class='text-center B1 TBrdr'> <div class='Mauto'>"+ZSEC.Encoder.encodeForHTML(officeRemoteStatus)+"</div></td>"),void 0!==empInfo.shiftId){var shiftDet=shiftDetails[empInfo.shiftId],shiftName=$("<div/>").text(shiftDet.shiftName).html();tr+="<td class='text-center B1 TBrdr' ><div class='ellipsis W150 Mauto' data-toggle='tooltip' data-placement='top' title='"+Attendance.disTime(shiftDet.fromShiftTime,!0)+" - "+Attendance.disTime(shiftDet.toShiftTime,!0)+"'>"+shiftName+"</div></td></tr>"}else tr+="<td class='text-center B1 TBrdr Mauto'>-</td></tr>";repTable.append(tr)}}),0!=repTable.children().length||Layout.Page.container.find("#attendanceEarlyBirdReport").hasClass("DN")||(Layout.Page.container.find("#attendanceEarlyBirdReport").addClass("DN"),Layout.Page.container.find("[id=zp_page_loading]").fadeOut(200).remove(),Layout.Page.container.find(".ZPNdata ").remove(),Layout.Page.container.find("#attendanceEarlyBirdReport").before(ZPUtil.newNoDataHTML("CR-nodata-rpt","path6",ZPI18N.getString("zp.noreportsmsg"))))},printReport:function(){var params=Attendance.Reports.earlyBirdReport.getParamsForReport();Attendance.Reports.printReport("attendanceEarlyBirdReport",params.fDate+" "+ZPI18N.getString("zp.to")+" "+params.tDate)},Firescroll:{mode:"ATTENDANCE_EARLYBIRD_REPORT_FIRESCROLL",loadMoreData:function(){var params=Attendance.Reports.earlyBirdReport.getParamsForReport();ZPeople.Request.send("/AttendanceReportAction.zp",params,function(response){(response=void 0!==response?response.report:null)&&response.empDetails&&response.empDetails.length>0?(Attendance.Reports.earlyBirdReport.isLateComerReportDiffDate=response.userDate!==response.viewDate,Attendance.Reports.earlyBirdReport.currentLateComerReport=response.empDetails,"myReports"==ZPLite.Reports.selectedTab?Attendance.Reports.myReportData.earlyBirdReport=Attendance.Reports.earlyBirdReport.currentLateComerReport:"teamReports"==ZPLite.Reports.selectedTab?Attendance.Reports.teamReportData.earlyBirdReport=Attendance.Reports.earlyBirdReport.currentLateComerReport:Attendance.Reports.adminReportData.earlyBirdReport=Attendance.Reports.earlyBirdReport.currentLateComerReport,ZPLite.Firescroll.setActiveStatus(Attendance.Reports.earlyBirdReport.Firescroll.mode,!1),Attendance.Reports.earlyBirdReport.constructReport(!0,response.shiftDetails),ZPLite.Firescroll.setFetchedCount(Attendance.Reports.earlyBirdReport.Firescroll.mode,response.empDetails.length)):ZPLite.Firescroll.setFetchedCount(Attendance.Reports.earlyBirdReport.Firescroll.mode,0)})}}},getLeaveTypes:function(){Layout.Page.container.find("#ZPAtt_statusRep_PaidLeaveDectCont,#ZPAtt_statusRep_ODLeaveDectCont,#ZPAtt_statusRep_UPLeaveDectCont").empty();var param={mode:"getLeaveTypes",conreqcsr:csrfToken},filterDiv=Layout.Page.container.find("#filterDiv"),filterData=ZPLite.Filters.getValues(filterDiv.find('[name="employeeFilter"]'));if(void 0!==filterData&&filterData.length>0){var erecNo=[];$.each(filterData,function(index,options){erecNo.push(options.id)}),param.eNo=JSON.stringify(erecNo)}if(param.isNullCodeNeeded=!1,void 0!==(filterData=ZPLite.Filters.getValues(filterDiv.find('[name="locationFilter"]')))&&filterData.length>0){var locationId=[];$.each(filterData,function(index,options){locationId.push(options.id)}),param.locationId=JSON.stringify(locationId)}ZPeople.Request.send("/AttendanceReportAction.zp",param,function(response,param){$.each(response.leaveTypes,function(index,defObj){var lCode=defObj.lCode;if(void 0!==lCode){var lName=$("<div/>").text(defObj.lName).html(),lType=defObj.lType,color="leave-border",cont=Layout.Page.container.find("#ZPAtt_statusRep_PaidLeaveDectCont");1===lType?(cont=Layout.Page.container.find("#ZPAtt_statusRep_ODLeaveDectCont"),color="onduty-border"):3===lType&&(cont=Layout.Page.container.find("#ZPAtt_statusRep_UPLeaveDectCont"),color="lop-border");var defHtml="<div class='Dtyps "+color+"'><span title='"+lName+"'>"+lCode+" - "+lName+"</span></div>";cont.append(defHtml)}})})},statusReport:{reportName:"ATTENDANCE_STATUS_REPORT",Asc:null,initPage:function(){ZPLite.Reports.setCurrentModule(Attendance.Reports.moduleName),ZPLite.Reports.setCurrentReport(Attendance.Reports.statusReport.reportName);var initParams={isModuleDataNeeded:!0,callback:Attendance.Reports.statusReport.init};ZPLite.Reports.initPage(initParams)},init:function(){if(ZPLite.Reports.Util.setAvailableReportsForModule("Attendance"),Attendance.Reports.statusReport.monthlyReport="myReports"==ZPLite.Reports.selectedTab?Attendance.Reports.myReportData.monthlyReport:"teamReports"==ZPLite.Reports.selectedTab?Attendance.Reports.teamReportData.monthlyReport:Attendance.Reports.adminReportData.monthlyReport,null==Attendance.Reports.depLocShiftList||!Attendance.Reports.statusReport.monthlyReport){Attendance.Reports.getDepLocShiftList(),Attendance.Reports.Filters.clearCache(!0);var filterDiv=Layout.Page.container.find("#filterDiv");Attendance.Reports.Filters.constructFilter(filterDiv.find('[name="datePeriodFilter"]'),"datePeriod",!0,Attendance.Reports.statusReport.filterOnChangeCallback),Attendance.Reports.Filters.constructFilter(filterDiv.find('[name="employeeStatusFilter"]'),"employeeStatus",!1,Attendance.Reports.statusReport.filterOnChangeCallback),Attendance.Reports.Filters.constructFilter(filterDiv.find('[name="hoursFilter"]'),"statusHours",!0),Attendance.Reports.Filters.constructFilter(filterDiv.find('[name="statusFilter"]'),"monthlyUserStatus",!1),Attendance.Reports.Filters.constructFilter(filterDiv.find('[name="employeeFilter"]'),"employee",!1,Attendance.Reports.statusReport.filterOnChangeCallback,"ATTENDANCE_STATUSREPORT_FILTER_EMPLOYEE_FIRESCROLL"),Attendance.Reports.Filters.constructFilter(filterDiv.find('[name="departmentFilter"]'),"department",!1),Attendance.Reports.Filters.constructFilter(filterDiv.find('[name="locationFilter"]'),"location",!1),Attendance.Reports.Filters.constructFilter(filterDiv.find('[name="orgTagFilter"]'),"orgTag",!1),Attendance.Reports.Filters.constructFilter(filterDiv.find('[name="designationFilter"]'),"designation",!1),isOrgStructureEnabled&&(Attendance.Reports.Filters.constructFilter(filterDiv.find('[name="entityFilter"]'),"legalEntity",!1),Attendance.Reports.Filters.constructFilter(filterDiv.find('[name="buFilter"]'),"businessUnit",!1),Attendance.Reports.Filters.constructFilter(filterDiv.find('[name="divisionFilter"]'),"division",!1)),filterDiv.find('[name="hoursFilter"]').addClass("DNI"),Layout.Page.container.find('[name="hoursviewbtn"]').removeClass("sel");var attModule=ZPLite.Reports.moduleData.attendance;isManageAttendanceData=attModule.isManageAttedance,isLead=attModule.isLead,isSPOCReportView=attModule.isSPOCReportView,isadmin&&(isManageAttendanceData=!0),isadmin&&"myReports"!=ZPLite.Reports.selectedTab?Attendance.Reports.Filters.constructFilter(filterDiv.find('[name="roleFilter"]'),"role",!1):filterDiv.find('[name="roleFilter"]').remove(),isSPOCReportView||isManageAttendanceData||!isLead||(filterDiv.find('[name="employeeStatusFilter"]').addClass("DNI"),filterDiv.find('[name="exemployeeInclusionFilter"]').addClass("DNI")),filterDiv.find('[name="fromDateFilter"]').off("click").on("click",function(){Calendar.setUpCalendar(event,$(this).find('[name="fromDateFilterText"]'),null,null,function(value,obj){$(obj).parent().val(Calendar.formatDate(value)),$(obj).parent().data("selectedDate",value),$(obj).parent().addClass("selected")})}),filterDiv.find('[name="toDateFilter"]').off("click").on("click",function(){Calendar.setUpCalendar(event,$(this).find('[name="toDateFilterText"]'),null,null,function(value,obj){$(obj).parent().val(Calendar.formatDate(value)),$(obj).parent().data("selectedDate",value),$(obj).parent().addClass("selected")})});var dateNavigationDtls={};dateNavigationDtls.mode=Attendance.Reports.statusReport.reportName,dateNavigationDtls.containerId=Layout.Page.container.attr("id"),dateNavigationDtls.previousBtnId="goToPreviousBtn",dateNavigationDtls.nextBtnId="goToNextBtn",dateNavigationDtls.displayAreaId="dateNavigatorText",dateNavigationDtls.navigationCallback=Attendance.Reports.statusReport.dateNaviCallBack,dateNavigationDtls.getDateForCustomNavigationCallback=Attendance.Reports.getDateForCustomNavigation,ZPLite.DateNavigator.init(dateNavigationDtls),ZPLite.DateNavigator.setPeriod(dateNavigationDtls.mode,ZPLite.DateNavigator.TYPE.MONTHLY,"current"),Attendance.Reports.statusReport.setDefaultFilterParams(),Attendance.Reports.statusReport.generateReport()}},filterOnChangeCallback:function(data){var filterDiv=Layout.Page.container.find("#filterDiv");if("datePeriod"===data.entity){var values=ZPLite.Filters.getValues(filterDiv.find('[name="datePeriodFilter"]'));jQuery.isEmptyObject(values)||"6"!==values[0].id?(filterDiv.find('[name="fromDateFilter"]').addClass("DNI"),filterDiv.find('[name="toDateFilter"]').addClass("DNI")):(filterDiv.find('[name="fromDateFilter"]').removeClass("DNI"),filterDiv.find('[name="toDateFilter"]').removeClass("DNI"))}if("employeeStatus"===data.entity){var employeeStatus=[];void 0!==(filterData=ZPLite.Filters.getValues(filterDiv.find('[name="employeeStatusFilter"]')))&&filterData.length>0&&$.each(filterData,function(index,options){employeeStatus.push(options.id)}),filterDiv.find('[name="exemployeeInclusionFilter"]').addClass("DNI"),employeeStatus.includes("18")&&(filterDiv.find('[name="exemployeeInclusionFilter"]').find("input").prop("checked",!0),filterDiv.find('[name="exemployeeInclusionFilter"]').removeClass("DNI")),Attendance.Reports.Filters.clearCache(!0,"employee"),ZPLite.Filters.clearOptions(filterDiv.find('[name="employeeFilter"]'))}if("employee"===data.entity){var filterData=ZPLite.Filters.getValues(filterDiv.find('[name="employeeFilter"]')),erecNo=[];void 0!==filterData&&filterData.length>0&&$.each(filterData,function(index,options){erecNo.push(options.id)}),filterDiv.find('[name="userInclusionFilter"]').removeClass("DNI"),erecNo.length>0&&(filterDiv.find('[name="userInclusionFilter"]').addClass("DNI"),filterDiv.find('[name="userInclusionFilter"]').find("input").prop("checked",!1))}},setDefaultFilterParams:function(){var filterDiv=Layout.Page.container.find("#filterDiv");ZPLite.Filters.setValues(filterDiv.find('[name="datePeriodFilter"]'),[{id:"2",text:ZPI18N.getString("zp.tt_thismonth"),periodType:"monthly",tense:"current"}]),ZPLite.Filters.setValues(filterDiv.find('[name="employeeStatusFilter"]'),[{id:"19",text:ZPI18N.getString("zp.activeusers")},{id:"-2",text:ZPI18N.getString("zp.activeprofiles")},{id:"18",text:ZPI18N.getString("zp.exemployees")}]),ZPLite.Filters.setValues(filterDiv.find('[name="hoursFilter"]'),[{id:"0",text:ZPI18N.getString("zp.all")}]),ZPLite.Filters.clearValues(filterDiv.find('[name="locationFilter"]')),filterDiv.find('[name="orgTagFilter"]').is(":visible")&&ZPLite.Filters.clearValues(filterDiv.find('[name="orgTagFilter"]')),isadmin&&filterDiv.find('[name="roleFilter"]').is(":visible")&&ZPLite.Filters.clearValues(filterDiv.find('[name="roleFilter"]')),ZPLite.Filters.clearValues(filterDiv.find('[name="departmentFilter"]')),ZPLite.Filters.clearValues(filterDiv.find('[name="designationFilter"]')),ZPLite.Filters.clearValues(filterDiv.find('[name="employeeFilter"]')),ZPLite.Filters.clearValues(filterDiv.find('[name="statusFilter"]')),filterDiv.find('[name="userInclusionFilter"]').removeClass("DNI"),filterDiv.find('[name="userInclusionFilter"]').find("input").prop("checked",!1),filterDiv.find("[name=fromDateFilter]").addClass("DNI"),filterDiv.find("[name=toDateFilter]").addClass("DNI"),filterDiv.find('[name="entityFilter"]').is(":visible")&&ZPLite.Filters.clearValues(filterDiv.find('[name="entityFilter"]')),filterDiv.find('[name="buFilter"]').is(":visible")&&ZPLite.Filters.clearValues(filterDiv.find('[name="buFilter"]')),filterDiv.find('[name="divisionFilter"]').is(":visible")&&ZPLite.Filters.clearValues(filterDiv.find('[name="divisionFilter"]')),filterDiv.find('[name="exemployeeInclusionFilter"]').removeClass("DNI"),filterDiv.find('[name="exemployeeInclusionFilter"]').find("input").prop("checked",!0),isSPOCReportView||isManageAttendanceData||!isLead||(filterDiv.find('[name="employeeStatusFilter"]').addClass("DNI"),filterDiv.find('[name="exemployeeInclusionFilter"]').addClass("DNI")),"myReports"==ZPLite.Reports.selectedTab&&(filterDiv.find('[name="departmentFilter"]').addClass("DNI"),filterDiv.find('[name="designationFilter"]').addClass("DNI"),filterDiv.find('[name="shiftFilter"]').addClass("DNI"),filterDiv.find('[name="locationFilter"]').addClass("DNI"),filterDiv.find('[name="orgTagFilter"]').addClass("DNI"),filterDiv.find('[name="roleFilter"]').addClass("DNI"),filterDiv.find('[name="userInclusionFilter"]').addClass("DNI"),filterDiv.find('[name="employeeFilter"]').addClass("DNI"),filterDiv.find('[name="employeeStatusFilter"]').addClass("DNI"),filterDiv.find('[name="exemployeeInclusionFilter"]').addClass("DNI"),filterDiv.find('[name="entityFilter"]').addClass("DNI"),filterDiv.find('[name="buFilter"]').addClass("DNI"),filterDiv.find('[name="divisionFilter"]').addClass("DNI"))},removeErrClass:function(){var errorDivs=Layout.Page.container.find("#filterDiv").find(".error-clr");errorDivs.length>0&&$.each(errorDivs,function(index,errorDiv){$(errorDiv).removeClass("error-clr")})},resetFilter:function(){Attendance.Reports.statusReport.setDefaultFilterParams()},applyFilter:function(){var tense,customDatePeriod,container=Layout.Page.container.find("#filterDiv"),values=ZPLite.Filters.getValues(container.find('[name="datePeriodFilter"]')),type=values[0].periodType,hideNavigation=!1;if(Attendance.Reports.statusReport.removeErrClass(),"6"===values[0].id){var errorMessage,fromDate=container.find('[name="fromDateFilter"]').data("selectedDate"),toDate=container.find('[name="toDateFilter"]').data("selectedDate");if(void 0===fromDate)container.find('[name="fromDateFilter"]').addClass("error-clr"),errorMessage=ZPI18N.getString("zp.emptyfromdate");else if(void 0===toDate)container.find('[name="toDateFilter"]').addClass("error-clr"),errorMessage=ZPI18N.getString("zp.emptytodate");else{var dateDiff=moment(Calendar.formatDate(toDate),dateFmt.toUpperCase()).diff(moment(Calendar.formatDate(fromDate),dateFmt.toUpperCase()),"days");dateDiff<0?(container.find('[name="toDateFilter"]').addClass("error-clr"),errorMessage=ZPI18N.getString("zp.greaterfromdate")):dateDiff>31&&(container.find('[name="toDateFilter"]').addClass("error-clr"),errorMessage=ZPI18N.getString("zp.datewithinonemonth"))}if(errorMessage)return void ZPeople.Message.showFailureMsg(errorMessage);customDatePeriod={from:fromDate,to:toDate}}else hideNavigation=!1,tense=values[0].tense;ZPLite.DateNavigator.setPeriod(Attendance.Reports.statusReport.reportName,type,tense,hideNavigation,customDatePeriod),Attendance.Reports.statusReport.generateReport()},dateNaviCallBack:function(){var filterDiv=Layout.Page.container.find("#filterDiv");ZPLite.Filters.setValues(filterDiv.find('[name="datePeriodFilter"]'),[{id:"6",text:ZPI18N.getString("zp.custom"),periodType:"custom"}]),filterDiv.find("[name=datePeriodFilter]").find("li.sel").removeClass("sel"),filterDiv.find("[name=fromDateFilter]").removeClass("DNI"),filterDiv.find("[name=toDateFilter]").removeClass("DNI");var fVal,tVal,period=ZPLite.DateNavigator.getPeriod(Attendance.Reports.statusReport.reportName);void 0!==period.from&&void 0!==period.to?(fVal=Calendar.formatDate(period.from),tVal=Calendar.formatDate(period.to)):tVal=fVal=Calendar.formatDate(period.day),filterDiv.find("[name=fromDateFilter]").val(fVal),filterDiv.find("[name=fromDateFilter]").data("selectedDate",Calendar.parseDate(fVal,uidateFormat)),filterDiv.find("[name=fromDateFilter]").data("text",fVal),filterDiv.find("[name=fromDateFilter]").addClass("selected"),filterDiv.find("[name=fromDateFilterText]").text(fVal),filterDiv.find("[name=fromDateFilterText]").val(fVal),filterDiv.find("[name=toDateFilter]").val(tVal),filterDiv.find("[name=toDateFilter]").data("selectedDate",Calendar.parseDate(tVal,uidateFormat)),filterDiv.find("[name=toDateFilter]").data("text",tVal),filterDiv.find("[name=toDateFilter]").addClass("selected"),filterDiv.find("[name=toDateFilterText]").text(tVal),filterDiv.find("[name=toDateFilterText]").val(tVal),Attendance.Reports.statusReport.generateReport()},switchView:function(isHoursView){isHoursView!==Attendance.Reports.statusReport.isHoursView()&&(isHoursView?(Layout.Page.container.find('[name="dayviewbtn"]').removeClass("sel"),Layout.Page.container.find("#filterDiv").find('[name="hoursFilter"]').removeClass("DNI"),Layout.Page.container.find('[name="hoursviewbtn"]').addClass("sel")):(Layout.Page.container.find('[name="dayviewbtn"]').addClass("sel"),Layout.Page.container.find("#filterDiv").find('[name="hoursFilter"]').addClass("DNI"),Layout.Page.container.find('[name="hoursviewbtn"]').removeClass("sel")),Attendance.Reports.statusReport.constructReport())},isHoursView:function(){return Layout.Page.container.find('[name="hoursviewbtn"]').hasClass("sel")},getDefaultParams:function(){return{mode:"monthlyReport",userTypeId:"[19,-2,18]",incDateOfExit:!0,conreqcsr:csrfToken}},getParamsForReport:function(){var params=Attendance.Reports.statusReport.getDefaultParams(),filterDiv=Layout.Page.container.find("#filterDiv"),filterData=ZPLite.Filters.getValues(filterDiv.find('[name="employeeFilter"]'));if(void 0!==filterData&&filterData.length>0){var erecNo=[];$.each(filterData,function(index,options){erecNo.push(options.id)}),params.erecno=JSON.stringify(erecNo)}if(Layout.Page.container.find("[name=userInclusionFilter]").find("input").is(":checked")&&(params.showDirectRepTo=!0),(filterData=ZPLite.Filters.getValues(filterDiv.find('[name="statusFilter"]')))&&filterData.length>0){var entity=[];$.each(filterData,function(index,options){entity.push(options.id)}),params.statFil=JSON.stringify(entity)}if(isOrgStructureEnabled){if((filterData=ZPLite.Filters.getValues(filterDiv.find('[name="entityFilter"]')))&&filterData.length>0){entity=[];$.each(filterData,function(index,options){entity.push(options.id)}),params.entityId=JSON.stringify(entity)}if((filterData=ZPLite.Filters.getValues(filterDiv.find('[name="buFilter"]')))&&filterData.length>0){var buFilterId=[];$.each(filterData,function(index,options){buFilterId.push(options.id)}),params.bUnitId=JSON.stringify(buFilterId)}if((filterData=ZPLite.Filters.getValues(filterDiv.find('[name="divisionFilter"]')))&&filterData.length>0){var divisionId=[];$.each(filterData,function(index,options){divisionId.push(options.id)}),params.divisionId=JSON.stringify(divisionId)}}if(void 0!==(filterData=ZPLite.Filters.getValues(filterDiv.find('[name="departmentFilter"]')))&&filterData.length>0){var departmentId=[];$.each(filterData,function(index,options){departmentId.push(options.id)}),params.departmentId=JSON.stringify(departmentId)}if(void 0!==(filterData=ZPLite.Filters.getValues(filterDiv.find('[name="designationFilter"]')))&&filterData.length>0){var desgId=[];$.each(filterData,function(index,options){desgId.push(options.id)}),params.desgId=JSON.stringify(desgId)}if(void 0!==(filterData=ZPLite.Filters.getValues(filterDiv.find('[name="locationFilter"]')))&&filterData.length>0){var locationId=[];$.each(filterData,function(index,options){locationId.push(options.id)}),params.locationId=JSON.stringify(locationId)}if(void 0!==(filterData=ZPLite.Filters.getValues(filterDiv.find('[name="roleFilter"]')))&&filterData.length>0){var roleId=[];$.each(filterData,function(index,options){roleId.push(options.id)}),params.roleId=JSON.stringify(roleId)}if(Attendance.organizationTag.fetchParams(filterDiv,params),!filterDiv.find('[name="employeeStatusFilter"]').hasClass("DNI")&&void 0!==(filterData=ZPLite.Filters.getValues(filterDiv.find('[name="employeeStatusFilter"]')))&&filterData.length>0){var employeeStatus=[];$.each(filterData,function(index,options){employeeStatus.push(options.id)}),params.userTypeId=JSON.stringify(employeeStatus)}filterDiv.find('[name="exemployeeInclusionFilter"]').find("input").is(":checked")||delete params.incDateOfExit,void 0!==(filterData=ZPLite.Filters.getValues(filterDiv.find('[name="hoursFilter"]')))&&filterData.length>0&&"0"!=filterData[0].id&&(params.hrsType=filterData[0].id);var datePeriod=ZPLite.DateNavigator.getPeriod(Attendance.Reports.statusReport.reportName);return void 0!==datePeriod&&(void 0!==datePeriod.from&&void 0!==datePeriod.to?(params.sdate=Calendar.formatDate(datePeriod.from),params.edate=Calendar.formatDate(datePeriod.to)):(params.sdate=Calendar.formatDate(datePeriod.day),params.edate=Calendar.formatDate(datePeriod.day))),Attendance.Reports.statusReport.Asc=null,Layout.Page.container.find("#attendanceStatusReportEmp").hasClass("sort-d")?(params.isEmpSortAsc=!1,Attendance.Reports.statusReport.Asc="sort-d"):Layout.Page.container.find("#attendanceStatusReportEmp").hasClass("sort-u")&&(params.isEmpSortAsc=!0,Attendance.Reports.statusReport.Asc="sort-u"),params.startIndex=ZPLite.Firescroll.getStartIndex(Attendance.Reports.statusReport.Firescroll.mode),"myReports"==ZPLite.Reports.selectedTab?params.zplType=1:"teamReports"==ZPLite.Reports.selectedTab&&(params.zplType=2),params.repType=ZPLite.Reports.selectedTab,params},generateReport:function(){var reportLayout=Layout.Page.container.find("#attendanceStatusReport");ZPLite.Firescroll.reset(reportLayout,Attendance.Reports.statusReport.Firescroll.mode),reportLayout.scrollTop(0),Layout.Page.container.find(".ZPNdata ").fadeOut(100).remove(),reportLayout.before(ZPeople.LOADING_HTML),reportLayout.addClass("DN");var params=Attendance.Reports.statusReport.getParamsForReport();ZPeople.Request.send("/AttendanceReportAction.zp",params,function(response,params){if(response.fail||response.error&&"permissionDenied"===response.error)Attendance.Reports.permDenied();else{Layout.Page.container.find("[id=zp_page_loading]").fadeOut(200).remove(),Attendance.Reports.statusReport.mReport=response.dayList,Attendance.Reports.statusReport.mReportLength=response.dayList.length,reportLayout.removeClass("DN"),reportLayout.find("#ZPAtt_attmonthlyReportTableHeader").empty(),reportLayout.find("#ZPAtt_attmonthlyReportTableBody").empty(),Attendance.Reports.statusReport.monthlyReport=response.dayList,"myReports"==ZPLite.Reports.selectedTab?Attendance.Reports.myReportData.monthlyReport=Attendance.Reports.statusReport.monthlyReport:"teamReports"==ZPLite.Reports.selectedTab?Attendance.Reports.teamReportData.monthlyReport=Attendance.Reports.statusReport.monthlyReport:Attendance.Reports.adminReportData.monthlyReport=Attendance.Reports.statusReport.monthlyReport,Attendance.Reports.getLeaveTypes(),response.dispMonth?Layout.Page.container.find("#dateNavigatorText").html(response.dispMonth):Layout.Page.container.find("#dateNavigatorText").html(Attendance.datesInHeader(response.fdate,response.tdate)),response.isStatWeekendConfigForOrg&&(Layout.Page.container.find("#ZPAtt_statRepSWLegend").removeClass("DNI"),Layout.Page.container.find("#ZPAtt_statRepNSWLegend").removeClass("DNI"),Layout.Page.container.find("#ZPAtt_statRepSWLegendSide").removeClass("DNI"),Layout.Page.container.find("#ZPAtt_statRepNSWLegendSide").removeClass("DNI"),void 0!=Attendance&&Attendance.isInEmbedPage&&(Layout.Page.container.find("#ZPAtt_leaveLegend").addClass("DNI"),Layout.Page.container.find("#ZPAtt_onDutyLegend").addClass("DNI"),Layout.Page.container.find("#ZPAtt_lopLegend").addClass("DNI")));for(var statusData=response.statusHeader,headerHtml="<tr class='ZPLHRow'>",j=0;j<statusData.length;j++){if(0==j){var sort=null===Attendance.Reports.statusReport.Asc?"":Attendance.Reports.statusReport.Asc;headerHtml+="<th style='max-width:300px;width:300px;' class='colM1_sticky'><div><span>"+ZPI18N.getString("zp.employee")+"</span><i class='sort-img "+sort+" CP' id='attendanceStatusReportEmp' onclick='Attendance.Reports.sortEmp(this)' data-toggle='tooltip' data-placement='bottom' data-container='body' data-original-title=' "+ZPI18N.getString("zp.sort")+" '></i></div></th>"}var headerResp=statusData[j].split("-"),date=headerResp[0],month=headerResp[1],day=days[headerResp[3]-1];headerHtml+="<th class='text-center'>",headerHtml+="<span class='DB MB3'>"+ZPI18N.getString("zp."+month.toLowerCase())+" "+date+"</span>",headerHtml+="<span class='DB dgry ZPreg'>"+day+"</span>",headerHtml+="</th>"}headerHtml+="</tr>",reportLayout.find("#ZPAtt_attmonthlyReportTableHeader").html(headerHtml),Attendance.Reports.statusReport.constructReport(!1,response),ZPLite.Firescroll.init(reportLayout,Attendance.Reports.statusReport.Firescroll.mode,{maxFetchLimit:50,callback:Attendance.Reports.statusReport.Firescroll.loadMoreData}),ZPLite.Firescroll.setFetchedCount(Attendance.Reports.statusReport.Firescroll.mode,response.dayList.length)}})},constructReport:function(scroll,response){var repTableBody=Layout.Page.container.find("#ZPAtt_attmonthlyReportTableBody");scroll?data=Attendance.Reports.statusReport.mReport:(repTableBody.empty(),data=Attendance.Reports.statusReport.monthlyReport);for(var isHoursMonReport=Attendance.Reports.statusReport.isHoursView(),i=0;i<data.length;i++){var tr="<tr class='ZPLRow'>";tr+="<td class='colM1_sticky' style='max-width:300px;width:300px;height:57px;'><img class='FL' src="+data[i].empPhoto+">";var empId=data[i].empId,empName=data[i].name;tr+="<div class='ZPusrName'><span class='ellipsis W200 CP' onclick=Attendance.Reports.getUserReportFromSummary('"+data[i].erecno+"',this,"+data[i].empStat+") data-toggle='tooltip' data-placement='top' data-container='body' title='"+empId+" "+empName+"'><b>"+empId+"</b>"+empName+"</span></div></td>";for(var k=0;k<Object.keys(data[i]).length-10;k++){var status=data[i][k];if(status.notApplicable)tr+="<td class='TC'><span>-</span></td>";else{var weekendClass="",stat="";stat=status.dayStatus;var lStatus=status.dayStatusWithoutCode;lStatus||(lStatus=stat);var colorClass="";if(-1!==lStatus.indexOf("LOP")?colorClass="lop":-1!==lStatus.indexOf("OD")?colorClass="onduty":-1!==lStatus.indexOf("L")?colorClass="leave":-1!==stat.indexOf("W")?(weekendClass="WKend WStripe",colorClass="wkend"):-1!==stat.indexOf("H")?colorClass="holiday":-1!==stat.indexOf("P")?colorClass="present":-1!==stat.indexOf("A")&&(colorClass="absent"),isHoursMonReport)1===(stat=status.hrsStatus).split("/").length&&-1!==stat.indexOf("(")&&(stat=stat.substr(0,stat.indexOf("(")));tr+="<td class='"+weekendClass+"' style='max-width:300px'><span class='RPData "+colorClass+"-border'>"+stat+"</span></td>"}}tr+="</tr>",repTableBody.append(tr)}0!=repTableBody.children().length||Layout.Page.container.find("#attendanceStatusReport").hasClass("DN")||(Layout.Page.container.find("#attendanceStatusReport").addClass("DN"),Layout.Page.container.find("[id=zp_page_loading]").fadeOut(200).remove(),Layout.Page.container.find(".ZPNdata ").remove(),Layout.Page.container.find("#attendanceStatusReport").before(ZPUtil.newNoDataHTML("CR-nodata-rpt","path6",ZPI18N.getString("zp.noreportsmsg"))))},printReport:function(){var params=Attendance.Reports.statusReport.getParamsForReport();Attendance.Reports.printReport("attendanceStatusReport",params.sdate+" "+ZPI18N.getString("zp.to")+" "+params.edate)},Firescroll:{mode:"ATTENDANCE_STATUS_REPORT_FIRESCROLL",loadMoreData:function(){var params=Attendance.Reports.statusReport.getParamsForReport();ZPeople.Request.send("/AttendanceReportAction.zp",params,function(response){if(response.dayList&&response.dayList.length>0){for(var i in ZPLite.Firescroll.setActiveStatus(Attendance.Reports.statusReport.Firescroll.mode,!1),Attendance.Reports.statusReport.mReport=response.dayList,response.dayList)Attendance.Reports.statusReport.monthlyReport.push(response.dayList[i]);"myReports"==ZPLite.Reports.selectedTab?Attendance.Reports.myReportData.monthlyReport=Attendance.Reports.statusReport.monthlyReport:"teamReports"==ZPLite.Reports.selectedTab?Attendance.Reports.teamReportData.monthlyReport=Attendance.Reports.statusReport.monthlyReport:Attendance.Reports.adminReportData.monthlyReport=Attendance.Reports.statusReport.monthlyReport,Attendance.Reports.statusReport.constructReport(!0),ZPLite.Firescroll.setFetchedCount(Attendance.Reports.statusReport.Firescroll.mode,response.dayList.length)}else ZPLite.Firescroll.setFetchedCount(Attendance.Reports.statusReport.Firescroll.mode,0)})}}},officeRemCReport:{reportName:"ATTENDANCE_OFFICEREMOTE_REPORT",customOfficeInEnabled:!1,Asc:null,initPage:function(){ZPLite.Reports.setCurrentModule(Attendance.Reports.moduleName),ZPLite.Reports.setCurrentReport(Attendance.Reports.officeRemCReport.reportName);var initParams={isModuleDataNeeded:!0,callback:Attendance.Reports.officeRemCReport.init};ZPLite.Reports.initPage(initParams)},init:function(){if(ZPLite.Reports.Util.setAvailableReportsForModule("Attendance"),Attendance.Reports.officeRemCReport.monthlyReport="teamReports"==ZPLite.Reports.selectedTab?Attendance.Reports.teamReportData.officeRemCReport:Attendance.Reports.adminReportData.officeRemCReport,null==Attendance.Reports.depLocShiftList||!Attendance.Reports.officeRemCReport.monthlyReport){Attendance.Reports.getDepLocShiftList(),Attendance.Reports.Filters.clearCache(!0);var filterDiv=Layout.Page.container.find("#filterDiv");Attendance.Reports.Filters.constructFilter(filterDiv.find('[name="datePeriodFilter"]'),"datePeriod",!0,Attendance.Reports.officeRemCReport.filterOnChangeCallback),Attendance.Reports.Filters.constructFilter(filterDiv.find('[name="employeeStatusFilter"]'),"employeeStatus",!1,Attendance.Reports.officeRemCReport.filterOnChangeCallback),Attendance.Reports.Filters.constructFilter(filterDiv.find('[name="employeeFilter"]'),"employee",!1,Attendance.Reports.officeRemCReport.filterOnChangeCallback,"ATTENDANCE_OFFICEREMOTE_REPORT_FILTER_EMPLOYEE_FIRESCROLL"),Attendance.Reports.Filters.constructFilter(filterDiv.find('[name="departmentFilter"]'),"department",!1),Attendance.Reports.Filters.constructFilter(filterDiv.find('[name="locationFilter"]'),"location",!1),Attendance.Reports.Filters.constructFilter(filterDiv.find('[name="designationFilter"]'),"designation",!1),isOrgStructureEnabled&&(Attendance.Reports.Filters.constructFilter(filterDiv.find('[name="entityFilter"]'),"legalEntity",!1),Attendance.Reports.Filters.constructFilter(filterDiv.find('[name="buFilter"]'),"businessUnit",!1),Attendance.Reports.Filters.constructFilter(filterDiv.find('[name="divisionFilter"]'),"division",!1)),filterDiv.find('[name="hoursFilter"]').addClass("DNI"),Layout.Page.container.find('[name="hoursviewbtn"]').removeClass("sel");var attModule=ZPLite.Reports.moduleData.attendance;isManageAttendanceData=attModule.isManageAttedance,isLead=attModule.isLead,isSPOCReportView=attModule.isSPOCReportView,isadmin&&(isManageAttendanceData=!0),isadmin&&"myReports"!=ZPLite.Reports.selectedTab?Attendance.Reports.Filters.constructFilter(filterDiv.find('[name="roleFilter"]'),"role",!1):filterDiv.find('[name="roleFilter"]').remove(),isSPOCReportView||isManageAttendanceData||!isLead||(filterDiv.find('[name="employeeStatusFilter"]').addClass("DNI"),filterDiv.find('[name="exemployeeInclusionFilter"]').addClass("DNI")),filterDiv.find('[name="fromDateFilter"]').off("click").on("click",function(){Calendar.setUpCalendar(event,$(this).find('[name="fromDateFilterText"]'),null,null,function(value,obj){$(obj).parent().val(Calendar.formatDate(value)),$(obj).parent().data("selectedDate",value),$(obj).parent().addClass("selected")})}),filterDiv.find('[name="toDateFilter"]').off("click").on("click",function(){Calendar.setUpCalendar(event,$(this).find('[name="toDateFilterText"]'),null,null,function(value,obj){$(obj).parent().val(Calendar.formatDate(value)),$(obj).parent().data("selectedDate",value),$(obj).parent().addClass("selected")})});var dateNavigationDtls={};dateNavigationDtls.mode=Attendance.Reports.officeRemCReport.reportName,dateNavigationDtls.containerId=Layout.Page.container.attr("id"),dateNavigationDtls.previousBtnId="goToPreviousBtn",dateNavigationDtls.nextBtnId="goToNextBtn",dateNavigationDtls.displayAreaId="dateNavigatorText",dateNavigationDtls.navigationCallback=Attendance.Reports.officeRemCReport.dateNaviCallBack,dateNavigationDtls.getDateForCustomNavigationCallback=Attendance.Reports.getDateForCustomNavigation,ZPLite.DateNavigator.init(dateNavigationDtls),ZPLite.DateNavigator.setPeriod(dateNavigationDtls.mode,ZPLite.DateNavigator.TYPE.MONTHLY,"current"),Attendance.Reports.officeRemCReport.setDefaultFilterParams(),Attendance.Reports.officeRemCReport.generateReport()}},filterOnChangeCallback:function(data){var filterDiv=Layout.Page.container.find("#filterDiv");if("datePeriod"===data.entity){var values=ZPLite.Filters.getValues(filterDiv.find('[name="datePeriodFilter"]'));jQuery.isEmptyObject(values)||"6"!==values[0].id?(filterDiv.find('[name="fromDateFilter"]').addClass("DNI"),filterDiv.find('[name="toDateFilter"]').addClass("DNI")):(filterDiv.find('[name="fromDateFilter"]').removeClass("DNI"),filterDiv.find('[name="toDateFilter"]').removeClass("DNI"))}if("employeeStatus"===data.entity){var employeeStatus=[];void 0!==(filterData=ZPLite.Filters.getValues(filterDiv.find('[name="employeeStatusFilter"]')))&&filterData.length>0&&$.each(filterData,function(index,options){employeeStatus.push(options.id)}),filterDiv.find('[name="exemployeeInclusionFilter"]').addClass("DNI"),employeeStatus.includes("18")&&(filterDiv.find('[name="exemployeeInclusionFilter"]').find("input").prop("checked",!0),filterDiv.find('[name="exemployeeInclusionFilter"]').removeClass("DNI")),Attendance.Reports.Filters.clearCache(!0,"employee"),ZPLite.Filters.clearOptions(filterDiv.find('[name="employeeFilter"]'))}if("employee"===data.entity){var filterData=ZPLite.Filters.getValues(filterDiv.find('[name="employeeFilter"]')),erecNo=[];void 0!==filterData&&filterData.length>0&&$.each(filterData,function(index,options){erecNo.push(options.id)}),filterDiv.find('[name="userInclusionFilter"]').removeClass("DNI"),erecNo.length>0&&(filterDiv.find('[name="userInclusionFilter"]').addClass("DNI"),filterDiv.find('[name="userInclusionFilter"]').find("input").prop("checked",!1))}},setDefaultFilterParams:function(){var filterDiv=Layout.Page.container.find("#filterDiv");ZPLite.Filters.setValues(filterDiv.find('[name="datePeriodFilter"]'),[{id:"2",text:ZPI18N.getString("zp.tt_thismonth"),periodType:"monthly",tense:"current"}]),ZPLite.Filters.setValues(filterDiv.find('[name="employeeStatusFilter"]'),[{id:"19",text:ZPI18N.getString("zp.activeusers")},{id:"-2",text:ZPI18N.getString("zp.activeprofiles")},{id:"18",text:ZPI18N.getString("zp.exemployees")}]),ZPLite.Filters.clearValues(filterDiv.find('[name="locationFilter"]')),ZPLite.Filters.clearValues(filterDiv.find('[name="departmentFilter"]')),ZPLite.Filters.clearValues(filterDiv.find('[name="designationFilter"]')),ZPLite.Filters.clearValues(filterDiv.find('[name="employeeFilter"]')),filterDiv.find('[name="userInclusionFilter"]').removeClass("DNI"),filterDiv.find('[name="userInclusionFilter"]').find("input").prop("checked",!1),filterDiv.find("[name=fromDateFilter]").addClass("DNI"),filterDiv.find("[name=toDateFilter]").addClass("DNI"),isadmin&&filterDiv.find('[name="roleFilter"]').is(":visible")&&ZPLite.Filters.clearValues(filterDiv.find('[name="roleFilter"]')),filterDiv.find('[name="entityFilter"]').is(":visible")&&ZPLite.Filters.clearValues(filterDiv.find('[name="entityFilter"]')),filterDiv.find('[name="buFilter"]').is(":visible")&&ZPLite.Filters.clearValues(filterDiv.find('[name="buFilter"]')),filterDiv.find('[name="divisionFilter"]').is(":visible")&&ZPLite.Filters.clearValues(filterDiv.find('[name="divisionFilter"]')),filterDiv.find('[name="exemployeeInclusionFilter"]').removeClass("DNI"),filterDiv.find('[name="exemployeeInclusionFilter"]').find("input").prop("checked",!0),isSPOCReportView||isManageAttendanceData||!isLead||(filterDiv.find('[name="employeeStatusFilter"]').addClass("DNI"),filterDiv.find('[name="exemployeeInclusionFilter"]').addClass("DNI")),"myReports"==ZPLite.Reports.selectedTab&&(filterDiv.find('[name="departmentFilter"]').addClass("DNI"),filterDiv.find('[name="designationFilter"]').addClass("DNI"),filterDiv.find('[name="shiftFilter"]').addClass("DNI"),filterDiv.find('[name="locationFilter"]').addClass("DNI"),filterDiv.find('[name="roleFilter"]').addClass("DNI"),filterDiv.find('[name="userInclusionFilter"]').addClass("DNI"),filterDiv.find('[name="employeeFilter"]').addClass("DNI"),filterDiv.find('[name="employeeStatusFilter"]').addClass("DNI"),filterDiv.find('[name="exemployeeInclusionFilter"]').addClass("DNI"),filterDiv.find('[name="entityFilter"]').addClass("DNI"),filterDiv.find('[name="buFilter"]').addClass("DNI"),filterDiv.find('[name="divisionFilter"]').addClass("DNI"))},removeErrClass:function(){var errorDivs=Layout.Page.container.find("#filterDiv").find(".error-clr");errorDivs.length>0&&$.each(errorDivs,function(index,errorDiv){$(errorDiv).removeClass("error-clr")})},resetFilter:function(){Attendance.Reports.officeRemCReport.setDefaultFilterParams()},applyFilter:function(){var tense,customDatePeriod,container=Layout.Page.container.find("#filterDiv"),values=ZPLite.Filters.getValues(container.find('[name="datePeriodFilter"]')),type=values[0].periodType,hideNavigation=!1;if(Attendance.Reports.officeRemCReport.removeErrClass(),"6"===values[0].id){var errorMessage,fromDate=container.find('[name="fromDateFilter"]').data("selectedDate"),toDate=container.find('[name="toDateFilter"]').data("selectedDate");if(void 0===fromDate)container.find('[name="fromDateFilter"]').addClass("error-clr"),errorMessage=ZPI18N.getString("zp.emptyfromdate");else if(void 0===toDate)container.find('[name="toDateFilter"]').addClass("error-clr"),errorMessage=ZPI18N.getString("zp.emptytodate");else{var dateDiff=moment(Calendar.formatDate(toDate),dateFmt.toUpperCase()).diff(moment(Calendar.formatDate(fromDate),dateFmt.toUpperCase()),"days");dateDiff<0?(container.find('[name="toDateFilter"]').addClass("error-clr"),errorMessage=ZPI18N.getString("zp.greaterfromdate")):dateDiff>366&&(container.find('[name="toDateFilter"]').addClass("error-clr"),errorMessage=ZPI18N.getString("zp.datewithinoneyear"))}if(errorMessage)return void ZPeople.Message.showFailureMsg(errorMessage);customDatePeriod={from:fromDate,to:toDate}}else hideNavigation=!1,tense=values[0].tense;ZPLite.DateNavigator.setPeriod(Attendance.Reports.officeRemCReport.reportName,type,tense,hideNavigation,customDatePeriod),Attendance.Reports.officeRemCReport.generateReport()},dateNaviCallBack:function(){var filterDiv=Layout.Page.container.find("#filterDiv");ZPLite.Filters.setValues(filterDiv.find('[name="datePeriodFilter"]'),[{id:"6",text:ZPI18N.getString("zp.custom"),periodType:"custom"}]),filterDiv.find("[name=datePeriodFilter]").find("li.sel").removeClass("sel"),filterDiv.find("[name=fromDateFilter]").removeClass("DNI"),filterDiv.find("[name=toDateFilter]").removeClass("DNI");var fVal,tVal,period=ZPLite.DateNavigator.getPeriod(Attendance.Reports.officeRemCReport.reportName);void 0!==period.from&&void 0!==period.to?(fVal=Calendar.formatDate(period.from),tVal=Calendar.formatDate(period.to)):tVal=fVal=Calendar.formatDate(period.day),filterDiv.find("[name=fromDateFilter]").val(fVal),filterDiv.find("[name=fromDateFilter]").data("selectedDate",Calendar.parseDate(fVal,uidateFormat)),filterDiv.find("[name=fromDateFilter]").data("text",fVal),filterDiv.find("[name=fromDateFilter]").addClass("selected"),filterDiv.find("[name=fromDateFilterText]").text(fVal),filterDiv.find("[name=fromDateFilterText]").val(fVal),filterDiv.find("[name=toDateFilter]").val(tVal),filterDiv.find("[name=toDateFilter]").data("selectedDate",Calendar.parseDate(tVal,uidateFormat)),filterDiv.find("[name=toDateFilter]").data("text",tVal),filterDiv.find("[name=toDateFilter]").addClass("selected"),filterDiv.find("[name=toDateFilterText]").text(tVal),filterDiv.find("[name=toDateFilterText]").val(tVal),Attendance.Reports.officeRemCReport.generateReport()},getDefaultParams:function(){return{mode:"officeRemoteCountReport",userTypeId:"[19,-2,18]",incDateOfExit:!0,conreqcsr:csrfToken}},getParamsForReport:function(){var params=Attendance.Reports.officeRemCReport.getDefaultParams(),filterDiv=Layout.Page.container.find("#filterDiv"),filterData=ZPLite.Filters.getValues(filterDiv.find('[name="employeeFilter"]'));if(void 0!==filterData&&filterData.length>0){var erecNo=[];$.each(filterData,function(index,options){erecNo.push(options.id)}),params.erecno=JSON.stringify(erecNo)}if(Layout.Page.container.find("[name=userInclusionFilter]").find("input").is(":checked")&&(params.showDirectRepTo=!0),isOrgStructureEnabled){if((filterData=ZPLite.Filters.getValues(filterDiv.find('[name="entityFilter"]')))&&filterData.length>0){var entity=[];$.each(filterData,function(index,options){entity.push(options.id)}),params.entityId=JSON.stringify(entity)}if((filterData=ZPLite.Filters.getValues(filterDiv.find('[name="buFilter"]')))&&filterData.length>0){var buFilterId=[];$.each(filterData,function(index,options){buFilterId.push(options.id)}),params.bUnitId=JSON.stringify(buFilterId)}if((filterData=ZPLite.Filters.getValues(filterDiv.find('[name="divisionFilter"]')))&&filterData.length>0){var divisionId=[];$.each(filterData,function(index,options){divisionId.push(options.id)}),params.divisionId=JSON.stringify(divisionId)}}if(void 0!==(filterData=ZPLite.Filters.getValues(filterDiv.find('[name="departmentFilter"]')))&&filterData.length>0){var departmentId=[];$.each(filterData,function(index,options){departmentId.push(options.id)}),params.departmentId=JSON.stringify(departmentId)}if(void 0!==(filterData=ZPLite.Filters.getValues(filterDiv.find('[name="designationFilter"]')))&&filterData.length>0){var desgId=[];$.each(filterData,function(index,options){desgId.push(options.id)}),params.desgId=JSON.stringify(desgId)}if(void 0!==(filterData=ZPLite.Filters.getValues(filterDiv.find('[name="locationFilter"]')))&&filterData.length>0){var locationId=[];$.each(filterData,function(index,options){locationId.push(options.id)}),params.locationId=JSON.stringify(locationId)}if(void 0!==(filterData=ZPLite.Filters.getValues(filterDiv.find('[name="roleFilter"]')))&&filterData.length>0){var roleId=[];$.each(filterData,function(index,options){roleId.push(options.id)}),params.roleId=JSON.stringify(roleId)}if(!filterDiv.find('[name="employeeStatusFilter"]').hasClass("DNI")&&void 0!==(filterData=ZPLite.Filters.getValues(filterDiv.find('[name="employeeStatusFilter"]')))&&filterData.length>0){var employeeStatus=[];$.each(filterData,function(index,options){employeeStatus.push(options.id)}),params.userTypeId=JSON.stringify(employeeStatus)}filterDiv.find('[name="exemployeeInclusionFilter"]').find("input").is(":checked")||delete params.incDateOfExit;var datePeriod=ZPLite.DateNavigator.getPeriod(Attendance.Reports.officeRemCReport.reportName);return void 0!==datePeriod&&(void 0!==datePeriod.from&&void 0!==datePeriod.to?(params.sdate=Calendar.formatDate(datePeriod.from),params.edate=Calendar.formatDate(datePeriod.to)):(params.sdate=Calendar.formatDate(datePeriod.day),params.edate=Calendar.formatDate(datePeriod.day))),Attendance.Reports.officeRemCReport.Asc=null,Layout.Page.container.find("#attendanceOfficeRemCReportEmp").hasClass("sort-d")?(params.isEmpSortAsc=!1,Attendance.Reports.officeRemCReport.Asc="sort-d"):Layout.Page.container.find("#attendanceOfficeRemCReportEmp").hasClass("sort-u")&&(params.isEmpSortAsc=!0,Attendance.Reports.officeRemCReport.Asc="sort-u"),params.startIndex=ZPLite.Firescroll.getStartIndex(Attendance.Reports.officeRemCReport.Firescroll.mode),"myReports"==ZPLite.Reports.selectedTab?params.zplType=1:"teamReports"==ZPLite.Reports.selectedTab&&(params.zplType=2),params.repType=ZPLite.Reports.selectedTab,params},generateReport:function(){var reportLayout=Layout.Page.container.find("#attendanceOfficeRemCReport");ZPLite.Firescroll.reset(reportLayout,Attendance.Reports.officeRemCReport.Firescroll.mode),reportLayout.scrollTop(0),Layout.Page.container.find(".ZPNdata ").fadeOut(100).remove(),reportLayout.before(ZPeople.LOADING_HTML),reportLayout.addClass("DN");var params=Attendance.Reports.officeRemCReport.getParamsForReport();ZPeople.Request.send("/AttendanceReportAction.zp",params,function(response,params){if(response.fail||response.error&&"permissionDenied"===response.error)Attendance.Reports.permDenied();else{Layout.Page.container.find("[id=zp_page_loading]").fadeOut(200).remove(),Attendance.Reports.officeRemCReport.mReport=response.dayList,Attendance.Reports.officeRemCReport.mReportLength=response.dayList.length,reportLayout.removeClass("DN"),reportLayout.find("#ZPAtt_attOfficeRemCReportTableBody").empty(),reportLayout.find("#ZPAtt_attOfficeRemCReportTableHeader").empty(),Attendance.Reports.officeRemCReport.monthlyReport=response.dayList,response.customOfficeInEnabled&&(Attendance.Reports.officeRemCReport.customOfficeInEnabled=response.customOfficeInEnabled),"teamReports"==ZPLite.Reports.selectedTab?Attendance.Reports.teamReportData.officeRemCReport=Attendance.Reports.officeRemCReport.monthlyReport:"adminReports"==ZPLite.Reports.selectedTab&&(Attendance.Reports.adminReportData.officeRemCReport=Attendance.Reports.officeRemCReport.monthlyReport),response.dispMonth?Layout.Page.container.find("#dateNavigatorText").html(response.dispMonth):Layout.Page.container.find("#dateNavigatorText").html(Attendance.datesInHeader(response.fdate,response.tdate));var header="<tr class='ZPLHRow'>";if(header+="<th class='colM1_sticky' style='max-width:200px;width:200px;'><span>"+ZPI18N.getString("zp.employee")+"</span></th>",Attendance.Reports.officeRemCReport.customOfficeInEnabled&&(header+="<th class='text-center' style='max-width:300px;width:300px;'><span>"+ZPI18N.getString("zp.designation")+"</span></th>",header+="<th class='text-center' style='max-width:100px;width:100px;'><span>"+ZPI18N.getString("zp.dateofjoining")+"</span></th>",header+="<th class='text-center' style='max-width:300px;width:300px;'><span>Organisation</span></th>",header+="<th class='text-center' style='max-width:200px;width:200px;'><span>"+ZPI18N.getString("zp.location")+"</span></th>",header+="<th class='text-center' style='max-width:100px;width:100px;'><span>"+ZPI18N.getString("zp.gender")+"</span></th>",header+="<th class='text-center' style='max-width:200px;width:200px;'><span>"+ZPI18N.getString("zp.employeeType")+"</span></th>"),header+="<th class='text-center' style='max-width:200px;width:200px;'><span>"+ZPI18N.getString("zp.totalworkeddays")+"</span></th>",header+="<th class='text-center' style='max-width:100px;width:100px;'><span>"+ZPI18N.getString("zp.officein")+"</span></th>",header+="<th class='text-center' style='max-width:100px;width:100px;'><span>"+ZPI18N.getString("zp.remotein")+"</span></th>",!response.isYear)for(var statusData=response.statusHeader,i=0;i<statusData.length;i++){var headerResp=statusData[i].split("-"),date=headerResp[0],month=headerResp[1],day=days[headerResp[3]-1];header+="<th class='text-center' style='max-width:100px;width:100px;'>",header+="<span class='DB MB3'>"+ZPI18N.getString("zp."+month.toLowerCase())+" "+date+"</span>",header+="<span class='DB dgry ZPreg'>"+day+"</span>",header+="</th>"}header+="</tr>",reportLayout.find("#ZPAtt_attOfficeRemCReportTableHeader").html(header),Attendance.Reports.officeRemCReport.constructReport(!1,response),ZPLite.Firescroll.init(reportLayout,Attendance.Reports.officeRemCReport.Firescroll.mode,{maxFetchLimit:50,callback:Attendance.Reports.officeRemCReport.Firescroll.loadMoreData}),ZPLite.Firescroll.setFetchedCount(Attendance.Reports.officeRemCReport.Firescroll.mode,response.dayList.length)}})},constructReport:function(scroll,response){var repTableBody=Layout.Page.container.find("#ZPAtt_attOfficeRemCReportTableBody");scroll?data=Attendance.Reports.officeRemCReport.mReport:(repTableBody.empty(),data=Attendance.Reports.officeRemCReport.monthlyReport);for(var i=0;i<data.length;i++){var tr="<tr class='ZPLRow'>";tr+="<td class='colM1_sticky' style='max-width:200px;width:200px;height:57px;'><img class='FL' src="+data[i].empPhoto+">";var empId=data[i].empId,empName=data[i].name,desgName=data[i].desgName,locName=data[i].locName,doj=data[i].dateOfJoining,gender=data[i].gender,empTypeName=data[i].empTypeName,officeName=data[i].officeName;if(tr+="<div class='ZPusrName'><span class='ellipsis W200 CP' data-toggle='tooltip' data-placement='top' data-container='body' title='"+empId+" "+empName+"'><b>"+empId+"</b>"+empName+"</span></div></td>",Attendance.Reports.officeRemCReport.customOfficeInEnabled&&(tr+="<td><span style='max-width:200px;width:200px;' class='ellipsis text-center' data-toggle='tooltip' data-placement='top' data-container='body' title='"+desgName+"'>"+desgName+"</span></td>",tr+="<td><span class='ellipsis text-center' data-toggle='tooltip' data-placement='top' data-container='body' title='"+doj+"'>"+doj+"</span></td>",tr+="<td><span style='max-width:200px;width:200px;' class='ellipsis text-center' data-toggle='tooltip' data-placement='top' data-container='body' title='"+officeName+"'>"+officeName+"</span></td>",tr+="<td><span style='max-width:150px;width:150px;' class='ellipsis text-center' data-toggle='tooltip' data-placement='top' data-container='body' title='"+locName+"'>"+locName+"</span></td>",tr+="<td><span class='ellipsis text-center' data-toggle='tooltip' data-placement='top' data-container='body' title='"+gender+"'>"+gender+"</span></td>",tr+="<td><span class='ellipsis text-center' data-toggle='tooltip' data-placement='top' data-container='body' title='"+empTypeName+"'>"+empTypeName+"</span></td>"),tr+="<td class='TC'>"+data[i].totalWorkedDays+"</td>",tr+="<td class='TC'>"+data[i].totalOfficeInCount+"</td>",tr+="<td class='TC'>"+data[i].totalRemoteInCount+"</td>",!response.isYear)for(var datesArr=data[i].datesArr,k=0;k<datesArr.length;k++){var val=ZSEC.Encoder.encodeForHTML(datesArr[k]);tr+="<td><span class='ellipsis text-center W190' data-toggle='tooltip' data-placement='top' data-container='body' title='"+val+"'>"+val+"</span></td>"}tr+="</tr>",repTableBody.append(tr)}0!=repTableBody.children().length||Layout.Page.container.find("#attendanceOfficeRemCReport").hasClass("DN")||(Layout.Page.container.find("#attendanceOfficeRemCReport").addClass("DN"),Layout.Page.container.find("[id=zp_page_loading]").fadeOut(200).remove(),Layout.Page.container.find(".ZPNdata ").remove(),Layout.Page.container.find("#attendanceOfficeRemCReport").before(ZPUtil.newNoDataHTML("CR-nodata-rpt","path6",ZPI18N.getString("zp.noreportsmsg"))))},Firescroll:{mode:"ATTENDANCE_OFFICEREMOTE_REPORT_FIRESCROLL",loadMoreData:function(){var params=Attendance.Reports.officeRemCReport.getParamsForReport();ZPeople.Request.send("/AttendanceReportAction.zp",params,function(response){if(response.dayList&&response.dayList.length>0){for(var i in ZPLite.Firescroll.setActiveStatus(Attendance.Reports.officeRemCReport.Firescroll.mode,!1),Attendance.Reports.officeRemCReport.mReport=response.dayList,response.dayList)Attendance.Reports.officeRemCReport.monthlyReport.push(response.dayList[i]);"teamReports"==ZPLite.Reports.selectedTab?Attendance.Reports.teamReportData.officeRemCReport=Attendance.Reports.officeRemCReport.monthlyReport:"adminReports"==ZPLite.Reports.selectedTab&&(Attendance.Reports.adminReportData.officeRemCReport=Attendance.Reports.officeRemCReport.monthlyReport),Attendance.Reports.officeRemCReport.constructReport(!0),ZPLite.Firescroll.setFetchedCount(Attendance.Reports.officeRemCReport.Firescroll.mode,response.dayList.length)}else ZPLite.Firescroll.setFetchedCount(Attendance.Reports.officeRemCReport.Firescroll.mode,0)})}}},userReport:{reportName:"ATTENDANCE_USER_REPORT",employee:"",initPage:function(){ZPLite.Reports.setCurrentModule(Attendance.Reports.moduleName),ZPLite.Reports.setCurrentReport(Attendance.Reports.userReport.reportName);var initParams={isModuleDataNeeded:!0,callback:Attendance.Reports.userReport.init};ZPLite.Reports.initPage(initParams)},init:function(){if(ZPLite.Reports.Util.setAvailableReportsForModule("Attendance"),Attendance.Reports.userReport.data="myReports"==ZPLite.Reports.selectedTab?Attendance.Reports.myReportData.userReport:"teamReports"==ZPLite.Reports.selectedTab?Attendance.Reports.teamReportData.userReport:Attendance.Reports.adminReportData.userReport,null==Attendance.Reports.depLocShiftList||!Attendance.Reports.userReport.data){var reportLayout="#"+Layout.Page.container.attr("id");"myReports"==ZPLite.Reports.selectedTab?($(reportLayout+" #ZPAttURep_sumRep").attr("id","ZPAttURep_sumRep_my"),$(reportLayout+" #ZPAttURep_sumRep_modal").attr("data-target","#ZPAttURep_sumRep_my")):"teamReports"==ZPLite.Reports.selectedTab?($(reportLayout+" #ZPAttURep_sumRep").attr("id","ZPAttURep_sumRep_team"),$(reportLayout+" #ZPAttURep_sumRep_modal").attr("data-target","#ZPAttURep_sumRep_team")):($(reportLayout+" #ZPAttURep_sumRep").attr("id","ZPAttURep_sumRep_admin"),$(reportLayout+" #ZPAttURep_sumRep_modal").attr("data-target","#ZPAttURep_sumRep_admin")),Attendance.Reports.Filters.clearCache(!0);var filterDiv=Layout.Page.container.find("#filterDiv"),empFilObj=Layout.Page.container.find('[name="employeeFilter"]');Attendance.Reports.Filters.constructFilter(empFilObj,"employee",!0,Attendance.Reports.userReport.filterOnChangeCallback,"ATTENDANCE_USER_REPORT_FILTER_EMPLOYEE_FIRESCROLL"),empFilObj.find("label").remove();var empId=Attendance.Reports.userReportEno?Attendance.Reports.userReportEno:erecno;if(void 0!==Attendance&&Attendance.isInEmbedPage&&isIntegAdmin){if((empFilObj=Layout.Page.container.find('[name="employeeFilter"]')).click(),empFilObj.click(),!(empFilObj.find(".optionsList").children().length>0))return Layout.Page.container.find(".ZPNdata ").fadeOut(100).remove(),empFilObj.remove(),void $(ZPUtil.newNoDataHTML("CR-nodata-rpt","path6",ZPI18N.getString("zp.noreportsmsg"))).insertBefore(Layout.Page.container.find("#attendanceUserReport"));empId=empFilObj.find(".optionsList").children()[0].getAttribute("id")}var userDtl=ZPeople.getUserDetailsById(empId);ZPLite.Filters.setValues(empFilObj,[{id:empId,text:userDtl.empid+" "+userDtl.name,photoUrl:userDtl.avatar}]),"myReports"==ZPLite.Reports.selectedTab?empFilObj.off("click"):empFilObj.on("click"),Attendance.Reports.getDepLocShiftList(),Layout.Page.container.find('[name="hoursFilter"]').find("input").timepicker({defaultTime:"",showMeridian:!1,minuteStep:1}),Attendance.Reports.Filters.constructFilter(filterDiv.find('[name="datePeriodFilter"]'),"datePeriod",!0,Attendance.Reports.userReport.filterOnChangeCallback),Attendance.Reports.Filters.constructFilter(filterDiv.find('[name="statusFilter"]'),"monthlyUserStatus",!1),Attendance.Reports.Filters.constructFilter(filterDiv.find('[name="hoursComparatorFilter"]'),"hours",!0,Attendance.Reports.userReport.filterOnChangeCallback),filterDiv.find('[name="fromDateFilter"]').off("click").on("click",function(){Calendar.setUpCalendar(event,$(this).find('[name="fromDateFilterText"]'),null,null,function(value,obj){$(obj).parent().val(Calendar.formatDate(value)),$(obj).parent().data("selectedDate",value),$(obj).parent().addClass("selected")})}),filterDiv.find('[name="toDateFilter"]').off("click").on("click",function(){Calendar.setUpCalendar(event,$(this).find('[name="toDateFilterText"]'),null,null,function(value,obj){$(obj).parent().val(Calendar.formatDate(value)),$(obj).parent().data("selectedDate",value),$(obj).parent().addClass("selected")})});var dateNavigationDtls={};dateNavigationDtls.mode=Attendance.Reports.userReport.reportName,dateNavigationDtls.containerId=Layout.Page.container.attr("id"),dateNavigationDtls.previousBtnId="goToPreviousBtn",dateNavigationDtls.nextBtnId="goToNextBtn",dateNavigationDtls.displayAreaId="dateNavigatorText",dateNavigationDtls.navigationCallback=Attendance.Reports.userReport.dateNaviCallBack,dateNavigationDtls.getDateForCustomNavigationCallback=Attendance.Reports.getDateForCustomNavigation,ZPLite.DateNavigator.init(dateNavigationDtls),ZPLite.DateNavigator.setPeriod(dateNavigationDtls.mode,ZPLite.DateNavigator.TYPE.WEEKLY,"current"),Attendance.Reports.userReport.setDefaultFilterParams(),Attendance.Reports.userReport.generateReport()}},removeErrClass:function(){var errorDivs=Layout.Page.container.find("#filterDiv").find(".error-clr");errorDivs.length>0&&$.each(errorDivs,function(index,errorDiv){$(errorDiv).removeClass("error-clr")})},setDefaultFilterParams:function(){var filterDiv=Layout.Page.container.find("#filterDiv"),empFilObj=filterDiv.find('[name="employeeFilter"]'),empId=Attendance.Reports.userReportEno?Attendance.Reports.userReportEno:erecno,userDtl=ZPeople.getUserDetailsById(empId);ZPLite.Filters.setValues(empFilObj,[{id:empId,text:ZPeople.decodeTxt(userDtl.empid+" "+userDtl.name),photoUrl:userDtl.avatar}]),ZPLite.Filters.setValues(filterDiv.find('[name="datePeriodFilter"]'),[{id:"1",text:ZPI18N.getString("zp.thisweek"),periodType:"weekly",tense:"current"}]),filterDiv.find('[name="fromDateFilter"]').addClass("DNI"),filterDiv.find('[name="toDateFilter"]').addClass("DNI"),ZPLite.Filters.clearValues(filterDiv.find('[name="statusFilter"]')),ZPLite.Filters.setValues(filterDiv.find('[name="hoursComparatorFilter"]'),[{id:"0",text:ZPI18N.getString("zp.all")}]),filterDiv.find('[name="hoursFilter"]').find("input").attr("placeholder","hh:mm"),filterDiv.find('[name="hoursFilter"]').addClass("DNI"),Attendance.Reports.userReport.removeErrClass()},resetFilter:function(){Attendance.Reports.userReport.setDefaultFilterParams()},applyFilter:function(){var tense,customDatePeriod,container=Layout.Page.container.find("#filterDiv"),values=ZPLite.Filters.getValues(container.find('[name="datePeriodFilter"]')),type=values[0].periodType;if(Attendance.Reports.userReport.removeErrClass(),"6"===values[0].id){var errorMessage,fromDate=container.find('[name="fromDateFilter"]').data("selectedDate"),toDate=container.find('[name="toDateFilter"]').data("selectedDate");if(void 0===fromDate)container.find('[name="fromDateFilter"]').addClass("error-clr"),errorMessage=ZPI18N.getString("zp.emptyfromdate");else if(void 0===toDate)container.find('[name="toDateFilter"]').addClass("error-clr"),errorMessage=ZPI18N.getString("zp.emptytodate");else{var dateDiff=moment(Calendar.formatDate(toDate),dateFmt.toUpperCase()).diff(moment(Calendar.formatDate(fromDate),dateFmt.toUpperCase()),"days");dateDiff<0?(container.find('[name="toDateFilter"]').addClass("error-clr"),errorMessage=ZPI18N.getString("zp.greaterfromdate")):dateDiff>366&&(errorMessage=ZPI18N.getString("zp.datewithinoneyear"))}if(errorMessage)return void ZPeople.Message.showFailureMsg(errorMessage);customDatePeriod={from:fromDate,to:toDate}}else tense=values[0].tense;ZPLite.DateNavigator.setPeriod(Attendance.Reports.userReport.reportName,type,tense,!1,customDatePeriod),Attendance.Reports.userReport.generateReport()},dateNaviCallBack:function(){var filterDiv=Layout.Page.container.find("#filterDiv");ZPLite.Filters.setValues(filterDiv.find('[name="datePeriodFilter"]'),[{id:"6",text:ZPI18N.getString("zp.custom"),periodType:"custom"}]),filterDiv.find("[name=datePeriodFilter]").find("li.sel").removeClass("sel"),filterDiv.find("[name=fromDateFilter]").removeClass("DNI"),filterDiv.find("[name=toDateFilter]").removeClass("DNI");var fVal,tVal,period=ZPLite.DateNavigator.getPeriod(Attendance.Reports.userReport.reportName);void 0!==period.from&&void 0!==period.to?(fVal=Calendar.formatDate(period.from),tVal=Calendar.formatDate(period.to)):tVal=fVal=Calendar.formatDate(period.day),filterDiv.find("[name=fromDateFilter]").val(fVal),filterDiv.find("[name=fromDateFilter]").data("selectedDate",Calendar.parseDate(fVal,uidateFormat)),filterDiv.find("[name=fromDateFilter]").data("text",fVal),filterDiv.find("[name=fromDateFilter]").addClass("selected"),filterDiv.find("[name=fromDateFilterText]").text(fVal),filterDiv.find("[name=fromDateFilterText]").val(fVal),filterDiv.find("[name=toDateFilter]").val(tVal),filterDiv.find("[name=toDateFilter]").data("selectedDate",Calendar.parseDate(tVal,uidateFormat)),filterDiv.find("[name=toDateFilter]").data("text",tVal),filterDiv.find("[name=toDateFilter]").addClass("selected"),filterDiv.find("[name=toDateFilterText]").text(tVal),filterDiv.find("[name=toDateFilterText]").val(tVal),Attendance.Reports.userReport.generateReport()},filterOnChangeCallback:function(data){var filterDiv=Layout.Page.container.find("#filterDiv");if("datePeriod"===data.entity){var values=ZPLite.Filters.getValues(filterDiv.find('[name="datePeriodFilter"]'));jQuery.isEmptyObject(values)||"6"!==values[0].id?(filterDiv.find('[name="fromDateFilter"]').addClass("DNI"),filterDiv.find('[name="toDateFilter"]').addClass("DNI")):(filterDiv.find('[name="fromDateFilter"]').removeClass("DNI"),filterDiv.find('[name="toDateFilter"]').removeClass("DNI"))}else if("hours"===data.entity){filterDiv.find('[name="hoursFilter"]').removeClass("error-clr");var filterData=ZPLite.Filters.getValues(filterDiv.find('[name="hoursComparatorFilter"]'));void 0===filterData||"0"===filterData[0].id?filterDiv.find('[name="hoursFilter"]').addClass("DNI"):(filterDiv.find('[name="hoursFilter"]').removeClass("DNI"),filterDiv.find('[name="hoursFilter"]').find("input").attr("placeholder","hh:mm"),filterDiv.find('[name="hoursFilter"]').find("input").val(""))}else"employee"===data.entity&&Attendance.Reports.userReport.generateReport()},getDefaultParams:function(){return{mode:"userReport",erecno:erecno,conreqcsr:csrfToken}},getParamsForReport:function(){var eno,params=Attendance.Reports.userReport.getDefaultParams(),filterDiv=Layout.Page.container.find("#filterDiv"),sDate="",eDate="",values=ZPLite.Filters.getValues(Layout.Page.container.find('[name="employeeFilter"]'));void 0!==values&&values.length>0&&(eno=values[0].id);var datePeriod=ZPLite.DateNavigator.getPeriod(Attendance.Reports.userReport.reportName);if(void 0!==datePeriod&&(void 0!==datePeriod.from&&void 0!==datePeriod.to?(sDate=Calendar.formatDate(datePeriod.from),eDate=Calendar.formatDate(datePeriod.to)):(sDate=Calendar.formatDate(datePeriod.day),eDate=Calendar.formatDate(datePeriod.day))),Attendance.Reports.userReportEno&&(eno=Attendance.Reports.userReportEno,sDate=Attendance.Reports.userReportFromDate,eDate=Attendance.Reports.userReportToDate,ZPLite.Filters.setValues(filterDiv.find('[name="datePeriodFilter"]'),[{id:"6",text:ZPI18N.getString("zp.custom"),periodType:"custom"}]),filterDiv.find("[name=datePeriodFilter]").find("li.sel").removeClass("sel"),filterDiv.find("[name=fromDateFilter]").removeClass("DNI"),filterDiv.find("[name=toDateFilter]").removeClass("DNI"),filterDiv.find("[name=fromDateFilter]").val(sDate),filterDiv.find("[name=fromDateFilter]").data("selectedDate",Calendar.parseDate(sDate,uidateFormat)),filterDiv.find("[name=fromDateFilter]").data("text",sDate),filterDiv.find("[name=fromDateFilter]").addClass("selected"),filterDiv.find("[name=fromDateFilterText]").text(sDate),filterDiv.find("[name=fromDateFilterText]").val(sDate),filterDiv.find("[name=toDateFilter]").val(eDate),filterDiv.find("[name=toDateFilter]").data("selectedDate",Calendar.parseDate(eDate,uidateFormat)),filterDiv.find("[name=toDateFilter]").data("text",eDate),filterDiv.find("[name=toDateFilter]").addClass("selected"),filterDiv.find("[name=toDateFilterText]").text(eDate),filterDiv.find("[name=toDateFilterText]").val(eDate),customDatePeriod={from:filterDiv.find("[name=fromDateFilter]").data("selectedDate"),to:filterDiv.find("[name=toDateFilter]").data("selectedDate")},ZPLite.DateNavigator.setPeriod(Attendance.Reports.userReport.reportName,ZPLite.DateNavigator.TYPE.CUSTOM,void 0,!1,customDatePeriod),Attendance.Reports.userReportEno=null,Attendance.Reports.userReportFromDate=null,Attendance.Reports.userReportToDate=null),"0"!==eno&&eno!==Attendance.Reports.userReport.currUserEno&&""!==eno&&(params.erecno=eno),""!==sDate&&""!==eDate){if(params.sdate=sDate,params.edate=eDate,Attendance.Reports.userType&&(params.userType=Attendance.Reports.userType),filterData=ZPLite.Filters.getValues(filterDiv.find('[name="statusFilter"]')),filterData&&filterData.length>0){var entity=[];$.each(filterData,function(index,options){entity.push(options.id)}),params.statFil=JSON.stringify(entity)}if(!filterDiv.find('[name="hoursFilter"]').hasClass("DNI")&&(filterData=ZPLite.Filters.getValues(filterDiv.find('[name="hoursComparatorFilter"]')),void 0!==filterData&&filterData.length>0)){var hoursFilter=filterDiv.find('[name="hoursFilter"]'),hours=hoursFilter.find("input").val();if(void 0===hours||""===hours)return hoursFilter.addClass("error-clr"),errorMessage=ZPI18N.getString("zp.entervalidinput"),void ZPeople.Message.showWarningMsg(errorMessage);params.totHrsTime=JSON.stringify({timeInSecs:Attendance.Common.convertTimerInputToMinsOrSecs(hours,!0,!0),type:filterData[0].id})}return"myReports"==ZPLite.Reports.selectedTab?params.zplType=1:"teamReports"==ZPLite.Reports.selectedTab&&(params.zplType=2),params.repType=ZPLite.Reports.selectedTab,params}ZPeople.Message.showFailureMsg(ZPI18N.getString("zp.enterfromtodate"))},generateReport:function(){var reportLayout=Layout.Page.container.find("#attendanceUserReport");reportLayout.scrollTop(0);var params=Attendance.Reports.userReport.getParamsForReport();params&&(Layout.Page.container.find(".ZPNdata ").fadeOut(100).remove(),reportLayout.before(ZPeople.LOADING_HTML),reportLayout.addClass("DN"),Attendance.Reports.userReport.getSummaryReportUser(params.erecno,params.sdate,params.edate),ZPeople.Request.send("/AttendanceReportAction.zp",params,function(response,params){response.fail||response.error&&"permissionDenied"===response.error?Attendance.Reports.permDenied():(Layout.Page.container.find("[id=zp_page_loading]").fadeOut(200).remove(),reportLayout.removeClass("DN"),Attendance.Reports.userReport.currUserEno=response.userDetails.eNo,reportLayout.find("#ZPAtt_attUserReportTableBody").empty(),response.dispMonth?Layout.Page.container.find("#dateNavigatorText").html(response.dispMonth):Layout.Page.container.find("#dateNavigatorText").html(Attendance.datesInHeader(response.sDate,response.eDate)),Attendance.Reports.userReport.data=response,Attendance.Reports.userReport.showOverDevTime=response.showOverDevTime,"myReports"==ZPLite.Reports.selectedTab?Attendance.Reports.myReportData.userReport=Attendance.Reports.userReport.data:"teamReports"==ZPLite.Reports.selectedTab?Attendance.Reports.teamReportData.userReport=Attendance.Reports.userReport.data:Attendance.Reports.adminReportData.userReport=Attendance.Reports.userReport.data,Attendance.Reports.userReport.setAbsentInUserRepSummary(),Attendance.Reports.userReport.constructReport(response))}))},constructReport:function(response){var data=response.dayList,reportLayout="#"+Layout.Page.container.attr("id"),tbody=Layout.Page.container.find("#ZPAtt_attUserReportTableBody");$(reportLayout+" .well.ZPDat").show(),0==Object.keys(data).length&&$(reportLayout+" .well.ZPDat").hide();var showOfficeInRemoteIn=!1;1==$(reportLayout+" #ZPAtt_officeINRemoteINUReport").is(":visible")&&(showOfficeInRemoteIn=!0);var officeInDname=showOfficeInRemoteIn?response.officeINdNameEncoded?response.officeINdNameEncoded:ZPI18N.getString("zp.officein"):"",remoteInDname=showOfficeInRemoteIn?response.remoteINdNameEncoded?response.remoteINdNameEncoded:ZPI18N.getString("zp.remotein"):"",hideAllowanceColumn=!0,len=Object.keys(response.dayList).length,showShiftCoreHours=response.dayList[len-1].showShiftcoreHours;showShiftCoreHours?$(reportLayout+" #ZPATT_showHideShiftCoreHours").show():$(reportLayout+" #ZPATT_showHideShiftCoreHours").hide();for(var totalAllowance=0,i=0;data[i];i++){data[i].tsecs||(data[i].tsecs=0);var workTime="-",status=data[i].status,colorClass="";"Absent"===status||"0.5 day Present, 0.5 day Absent"===status||"0.25 day Present, 0.75 day Absent"===status||"0.75 day Present, 0.25 day Absent"===status||-1!==status.indexOf("Absent -")&&-1!==status.indexOf("Present -")&&2===status.split(",").length?colorClass="RTC1 absent-bg":"Present"===status||"0.5 day Present"===status||-1!==status.indexOf("Present -")&&1===status.split(",").length?colorClass="RTC1 present-bg":-1!==status.indexOf("Weekend")?colorClass="RTC1 wkend-bg":-1!==status.indexOf("Paid Leave")?(colorClass="RTC1 leave-bg",-1!==status.indexOf("Present")&&(-1!==status.indexOf("0.5 day Paid Leave")&&-1===status.indexOf("0.5 day On Duty")&&-1===status.indexOf("0.5 day Unpaid Leave")||data[i].leaveHours)&&(colorClass="RTC1 present-bg")):-1!==status.indexOf("On Duty")?(colorClass="RTC1 onduty-bg",-1!==status.indexOf("Present")&&(-1!==status.indexOf("0.5 day On Duty")&&-1===status.indexOf("0.5 day Unpaid Leave")||data[i].leaveHours)&&(colorClass="RTC1 present-bg")):-1!==status.indexOf("Unpaid Leave")?(colorClass="RTC1 lop-bg",-1===status.indexOf("Present")||-1===status.indexOf("0.5 day Unpaid Leave")&&!data[i].leaveHours||(colorClass="RTC1 present-bg")):(status.includes("Holiday")||Att_Common_Operations.isRestrictedHoliday(status))&&(colorClass="RTC1 holiday-bg",!status.includes("Present")||!Att_Common_Operations.isUnAvailedRestrictedHoliday(status)&&(!status.includes("0.5 day Holiday)")||status.includes("0.5 day Paid Leave")||status.includes("0.5 day On Duty")||status.includes("0.5 day Unpaid Leave")||data[i].fulldayPresent)||(colorClass="RTC1 present-bg"));var transStat=Attendance.consLeaveStat(status,!0,!1);void 0!==data[i].overTime_tsecs&&(workTime="<span class='grn'>"+Attendance.disHours(data[i].overTime_tsecs/60)+"</span>"),void 0!==data[i].devTime_tsecs&&(workTime="<span class='red'>"+Attendance.disHours(data[i].devTime_tsecs/60)+"</span>");var trow="<tr class='ZPLRow'>";trow+="<td>"+days[data[i].day-1]+", "+Attendance.disDate(data[i].ldate)+"</td>",data[i].filo?(trow+="<td>"+Attendance.disDate(data[i].filo.ftime)+"</td>",trow+="<td>"+Attendance.disDate(data[i].filo.ttime)+"</td>"):(trow+="<td> </td>",trow+="<td> </td>"),trow+="<td>"+Attendance.disHours(data[i].tsecs/60)+"</td>",$(reportLayout+" #ZPAtt_showHidePaidBreakUserReport").hide(),$(reportLayout+" #ZPAtt_showHideUnpaidBreakUserReport").hide(),response.isBreakConfigured&&(response.isPaidBrkDispNeed&&response.isViewAllowedForPaidBrkHrs&&($(reportLayout+" #ZPAtt_showHidePaidBreakUserReport").show(),trow+="<td>"+data[i].totalPaidBreakHours+"</td>"),response.isUnpaidBrkDispNeed&&response.isViewAllowedForUnPaidBrkHrs&&($(reportLayout+" #ZPAtt_showHideUnpaidBreakUserReport").show(),trow+="<td>"+data[i].totalUnPaidBreakHours+"</td>")),$(reportLayout+" #ZPAtt_showHidePermission").hide(),response.isPermissionConfigured&&($(reportLayout+" #ZPAtt_showHidePermission").show(),trow+="<td>"+data[i].totalPermissionHours+"</td>"),$(reportLayout+" #ZPAtt_showHidePayableHours").hide(),response.isViewAllowedForPayableHrs&&($(reportLayout+" #ZPAtt_showHidePayableHours").show(),trow+="<td>"+Attendance.disHours(data[i].wsecs/60)+"</td>"),response.isViewAllowedforLateNight&&(trow+="<td class='P0I TBrdr'>",trow+="<table class='table i_table'><tbody><tr class='wrktbl'>",trow+="<td class='text-center' width='33.33%'><div class='W60'>"+(void 0!=data[i].regular_present_tsecs?Attendance.disHours(data[i].regular_present_tsecs/60):"-")+"</div></td>",trow+="<td class='text-center' width='33.33%'><div class='W60'>"+(void 0!=data[i].lateNight_present_tsecs?Attendance.disHours(data[i].lateNight_present_tsecs/60):"-")+"</div></td>",trow+="<td class='text-center' width='33.33%'><div class='W60'>"+(void 0!=data[i].total_present_tsecs?Attendance.disHours(data[i].total_present_tsecs/60):"-")+"</div></td>",trow+="</tr></tbody></table>",trow+="</td>"),0===Attendance.Reports.userReport.showOverDevTime&&(response.isViewAllowedforLateNight?(trow+="<td class='P0I TBrdr'>",trow+="<table class='table i_table'><tbody><tr class='wrktbl'>",trow+="<td class='text-center' width='33.33%'><div class='W60'>"+(void 0!=data[i].regular_overtTime_tsecs?Attendance.disHours(data[i].regular_overtTime_tsecs/60):"-")+"</div></td>",trow+="<td class='text-center' width='33.33%'><div class='W60'>"+(void 0!=data[i].lateNight_overtTime_tsecs?Attendance.disHours(data[i].lateNight_overtTime_tsecs/60):"-")+"</div></td>",trow+="<td class='text-center' width='33.33%'><div class='W60'>"+workTime+"</div></td>",trow+="</tr></tbody></table>",trow+="</td>"):trow+="<td>"+workTime+"</td>"),response.isViewAllowedforLateNight&&(trow+="<td>"+(void 0!=data[i].total_latenight_tsecs?Attendance.disHours(data[i].total_latenight_tsecs/60):"-")+"</td>");var allowance="-";if(void 0!==data[i].shiftAllowance&&(hideAllowanceColumn=!1,allowance=data[i].shiftAllowance,totalAllowance+=data[i].shiftAllowance),status=Attendance.escapeHtml(status),trow+="<td><span class='ellipsis W200' data-toggle='tooltip' data-placement='left' title='"+transStat+"'><div class='"+colorClass+"'></div>"+transStat+"</span></td>",showOfficeInRemoteIn){trow+="<td>"+(void 0!=data[i].officein_hrs?data[i].officein_hrs:"-")+"</td>",trow+="<td>"+(void 0!=data[i].remotein_hrs?data[i].remotein_hrs:"-")+"</td>";var officeInRemoteIn="-";data[i].officein?officeInRemoteIn=officeInDname:data[i].remotein&&(officeInRemoteIn=remoteInDname),trow+="<td><span class='ellipsis' data-toggle='tooltip' data-placement='left' title='"+officeInRemoteIn+"'>"+officeInRemoteIn+"</span></td>"}showShiftCoreHours&&(trow+="<td class='P0I TBrdr'>",trow+="<table class='table i_table'><tbody><tr class='wrktbl'>",trow+="<td class='text-center' width='33.33%'><div class='W60'>"+(data[i].totalCoreHrs?data[i].totalCoreHrs:"-")+"</div></td>",trow+="<td class='text-center' width='33.33%'><div class='W60'>"+(void 0!=data[i].shiftCoreHours?data[i].shiftCoreHours:"-")+"</div></td>",trow+="<td class='text-center' width='33.33%'><div class='W60'>"+(void 0!=data[i].devShiftCoreHours?data[i].devShiftCoreHours:"-")+"</div></td>",trow+="</tr></tbody></table>",trow+="</td>");var shiftInfo=Shift.getShiftName(data[i].shift.shiftId,!0);trow+="<td><span class='ellipsis W150' data-toggle='tooltip' data-placement='left' title='"+shiftInfo.shiftName+" ("+shiftInfo.timeInterval+")'>"+shiftInfo.shiftName+"</span></td><td id='allowanceColumn'><span>"+allowance+"</span></td></tr>",tbody.append(trow)}hideAllowanceColumn?($(reportLayout+" #attendanceUserReport #allowanceColumn").hide(),$(reportLayout+" #attendanceUserReport #allowanceFooter").hide()):($(reportLayout+" #attendanceUserReport #allowanceColumn").show(),$(reportLayout+" #attendanceUserReport #allowanceFooter").show(),$(reportLayout+" #attendanceUserReport #totalAllowanceAmt").text(Math.round(100*totalAllowance)/100));var colSpan=(response.isBreakConfigured?10:8)+(showOfficeInRemoteIn?3:0)+(showShiftCoreHours?1:0);0===Attendance.Reports.userReport.showOverDevTime?($(reportLayout+" #ZPAtt_overDevInUReport").show(),colSpan+=1,$(reportLayout+" #attendanceUserReport #allowanceFooter th").eq(0).attr("colspan",colSpan)):($(reportLayout+" #ZPAtt_overDevInUReport").hide(),$(reportLayout+" #attendanceUserReport #allowanceFooter th").eq(0).attr("colspan",colSpan)),$(reportLayout+" #attendanceUserReport").children().hasClass("tabcont")||(response.isBreakConfigured&&response.isViewAllowedForPaidBrkHrs&&($(reportLayout+" #ZPAtt_showHidePaidBreakUserReport").show(),$(reportLayout+" #ZPAtt_showHideUnpaidBreakUserReport").show()),ZPView.handleTablePosition(),response.isBreakConfigured&&($(reportLayout+" #ZPAtt_showHidePaidBreakUserReport").hide(),$(reportLayout+" #ZPAtt_showHideUnpaidBreakUserReport").hide(),response.isPaidBrkDispNeed&&response.isViewAllowedForPaidBrkHrs&&$(reportLayout+" #ZPAtt_showHidePaidBreakUserReport").show(),response.isUnpaidBrkDispNeed&&response.isViewAllowedForUnPaidBrkHrs&&$(reportLayout+" #ZPAtt_showHideUnpaidBreakUserReport").show())),0!=tbody.children().length||Layout.Page.container.find("#attendanceUserReport").hasClass("DN")||(Layout.Page.container.find("#attendanceUserReport").addClass("DN"),Layout.Page.container.find("[id=zp_page_loading]").fadeOut(200).remove(),Layout.Page.container.find(".ZPNdata ").remove(),Layout.Page.container.find("#attendanceUserReport").before(ZPUtil.newNoDataHTML("CR-nodata-rpt","path6",ZPI18N.getString("zp.noreportsmsg"))))},getSummaryReportUser:function(erec,sdate,edate){var param={mode:"getSummaryRepForUser",conreqcsr:csrfToken};erec&&(param.erecno=erec),Attendance.Reports.userType&&(param.userType=Attendance.Reports.userType),param.sdate=sdate,param.edate=edate,ZPeople.Request.sendAsyncPost("/AttendanceReportAction.zp",param,function(rdata){if(rdata.summaryReport){var eno=erecno;param.erecno&&(eno=param.erecno),Attendance.Reports.userReport.sumForUserRep=rdata.summaryReport[eno],Attendance.Reports.userReport.setSummaryInUserRep(rdata)}})},setSummaryInUserRep:function(rdata){var layout=Layout.Page.container,layoutId="#"+$(layout).attr("id"),showOTDT=rdata.showOverDevTime,json=rdata.summaryReport,data=Attendance.Reports.userReport.sumForUserRep;$(layoutId+" #ZPAtt_uReport_presentCount").text(data.present_count+" "+ZPI18N.getString("zp.days")),$(layoutId+" #ZPAtt_uReport_onDutyCount").text(data.onduty_count+" "+ZPI18N.getString("zp.days")),$(layoutId+" #ZPAtt_uReport_leaveCount").text(data.leave_count+" "+ZPI18N.getString("zp.days")),$(layoutId+" #ZPAtt_uReport_holidayCount").text(data.holiday_count+" "+ZPI18N.getString("zp.days")),$(layoutId+" #ZPAtt_uReport_weekendCount").text(data.weekend_count+" "+ZPI18N.getString("zp.days")),$(layoutId+" #ZPAtt_uReport_lopCount").text(data.lop_leave_count+" "+ZPI18N.getString("zp.days")),$(layoutId+" #ZPAtt_uReport_payDaysCount").parent().hide(),json.isViewAllowedForPayableHrs&&($(layoutId+" #ZPAtt_uReport_payDaysCount").parent().show(),$(layoutId+" #ZPAtt_uReport_payDaysCount").text(data.totalPaidDays_count+" "+ZPI18N.getString("zp.days"))),data.isStatWeekendConfig?(Attendance.Entry.addStatWkndDays(layout.find("#ZPAtt_uReport_statWeekendCount"),data.statWkndCnt,data.custStatWknd_Name),Attendance.Entry.addStatWkndDays(layout.find("#ZPAtt_uReport_nonStatWeekendCount"),data.nonStatWkndCnt,data.custNonStatWknd_Name)):(layout.find("#ZPAtt_uReport_nonStatWeekendCount").closest(".Dtyps").addClass("DNI"),layout.find("#ZPAtt_uReport_statWeekendCount").closest(".Dtyps").addClass("DNI")),$(layoutId+" #ZPAtt_URep_preDays").text(data.present_count+" "+ZPI18N.getString("zp.days")),$(layoutId+" #ZPAtt_URep_ODDays").text(data.onduty_count+" "+ZPI18N.getString("zp.days")),$(layoutId+" #ZPAtt_URep_leaveDays").text(data.leave_count+" "+ZPI18N.getString("zp.days")),$(layoutId+" #ZPAtt_URep_holDays").text(data.holiday_count+" "+ZPI18N.getString("zp.days")),$(layoutId+" #ZPAtt_URep_wkndDays").text(data.weekend_count+" "+ZPI18N.getString("zp.days")),$(layoutId+" #ZPAtt_URep_LOPDays").text(data.lop_leave_count+" "+ZPI18N.getString("zp.days")),$(layoutId+" #ZPAtt_URep_payDays").text(data.totalPaidDays_count+" "+ZPI18N.getString("zp.days")),data.isStatWeekendConfig?(Attendance.Entry.addStatWkndDays(layout.find("#ZPAtt_URep_statWkndDays"),data.statWkndCnt,data.custStatWknd_Name),Attendance.Entry.addStatWkndDays(layout.find("#ZPAtt_URep_nonStatWkndDays"),data.nonStatWkndCnt,data.custNonStatWknd_Name)):(layout.find("#ZPAtt_URep_nonStatWkndDays").closest(".Dtyps").addClass("DNI"),layout.find("#ZPAtt_URep_statWkndDays").closest(".Dtyps").addClass("DNI")),data.tsecs<0?($(layoutId+" #ZPAtt_uReport_totalhours").text(ZPI18N.getString("zp.na")),$(layoutId+" #ZPAtt_URep_ttlHrs").text(ZPI18N.getString("zp.na"))):($(layoutId+" #ZPAtt_uReport_totalhours").text(Attendance.disHours(data.tsecs/60)+" "+ZPI18N.getString("zp.hrs")),$(layoutId+" #ZPAtt_URep_ttlHrs").text(Attendance.disHours(data.tsecs/60)+" "+ZPI18N.getString("zp.hrs"))),$(layoutId+" #ZPAtt_uReport_totalWorkingHours").text(Attendance.disHours(data.workingHours_tsecs/60)+" "+ZPI18N.getString("zp.hrs")),$(layoutId+" #ZPAtt_uReport_totalOnDutyHours").text(Attendance.disHours(data.ondutysecs/60)+" "+ZPI18N.getString("zp.hrs")),$(layoutId+" #ZPAtt_uReport_totalLeaveHours").text(Attendance.disHours(data.leavesecs/60)+" "+ZPI18N.getString("zp.hrs")),$(layoutId+" #ZPAtt_uReport_totalHolidayHours").text(Attendance.disHours(data.totalHolidayDaysInSecs/60)+" "+ZPI18N.getString("zp.hrs")),$(layoutId+" #ZPAtt_uReport_totalWeekendHours").text(Attendance.disHours(data.regWeekendHours/60)+" "+ZPI18N.getString("zp.hrs")),data.isStatWeekendConfig?(Attendance.Entry.addStatWkndHrs(layout.find("#ZPAtt_uReport_statTotalWeekendHours"),data.totalStatWkndHrs,data.custStatWknd_Name),Attendance.Entry.addStatWkndHrs(layout.find("#ZPAtt_uReport_nonStatTotalWeekendHours"),data.totalNonStatWkndHrs,data.custNonStatWknd_Name)):(layout.find("#ZPAtt_uReport_nonStatTotalWeekendHours").closest(".Dtyps").addClass("DNI"),layout.find("#ZPAtt_uReport_statTotalWeekendHours").closest(".Dtyps").addClass("DNI")),$(layoutId+" #ZPAtt_URep_preHrs").text(Attendance.disHours(data.workingHours_tsecs/60)+" "+ZPI18N.getString("zp.hrs")),$(layoutId+" #ZPAtt_URep_ODHrs").text(Attendance.disHours(data.ondutysecs/60)+" "+ZPI18N.getString("zp.hrs")),$(layoutId+" #ZPAtt_URep_leaveHrs").text(Attendance.disHours(data.leavesecs/60)+" "+ZPI18N.getString("zp.hrs")),$(layoutId+" #ZPAtt_URep_HolHrs").text(Attendance.disHours(data.totalHolidayDaysInSecs/60)+" "+ZPI18N.getString("zp.hrs")),$(layoutId+" #ZPAtt_URep_wkndHrs").text(Attendance.disHours(data.regWeekendHours/60)+" "+ZPI18N.getString("zp.hrs")),$(layoutId+" #ZPAtt_URep_LOPHrs").text(Attendance.disHours(data.lop_leave_secs/60)+" "+ZPI18N.getString("zp.hrs")),data.isStatWeekendConfig?(Attendance.Entry.addStatWkndHrs(layout.find("#ZPAtt_URep_statWkndHrs"),data.totalStatWkndHrs,data.custStatWknd_Name),Attendance.Entry.addStatWkndHrs(layout.find("#ZPAtt_URep_nonStatWkndHrs"),data.totalNonStatWkndHrs,data.custNonStatWknd_Name)):(layout.find("#ZPAtt_URep_nonStatWkndHrs").closest(".Dtyps").addClass("DNI"),layout.find("#ZPAtt_URep_statWkndHrs").closest(".Dtyps").addClass("DNI")),0===showOTDT?($(layoutId+" #ZPAtt_URep_OTHrs").text(Attendance.disHours(data.overTime_tsecs/60)+" "+ZPI18N.getString("zp.hrs")).parent().show(),$(layoutId+" #ZPAtt_URep_DTHrs").parent().show()):($(layoutId+" #ZPAtt_URep_OTHrs").parent().hide(),$(layoutId+" #ZPAtt_URep_DTHrs").parent().hide()),$(layoutId+" #ZPAtt_showHidePaidBreakSumPopup").hide(),$(layoutId+" #ZPAtt_showHideUnpaidBreakSumPopup").hide(),json.isBreakConfigured&&(json.isPaidBrkDispNeed&&json.isViewAllowedForPaidBrkHrs&&($(layoutId+" #ZPAtt_showHidePaidBreakSumPopup").show(),$(layoutId+" #ZPAtt_URep_BreakHrs").text(data.totalPaidBreakHours+" "+ZPI18N.getString("zp.hrs"))),json.isUnpaidBrkDispNeed&&json.isViewAllowedForUnPaidBrkHrs&&($(layoutId+" #ZPAtt_showHideUnpaidBreakSumPopup").show(),$(layoutId+" #ZPAtt_URep_BreakExtnHrs").text(data.totalUnPaidBreakHours+" "+ZPI18N.getString("zp.hrs")))),$(layoutId+" #ZPAtt_showHidePermissionPopup").hide(),json.isPermissionConfigured&&($(layoutId+" #ZPAtt_showHidePermissionPopup").show(),$(layoutId+" #ZPAtt_URep_Permission").text(data.totalPermissionHours+" "+ZPI18N.getString("zp.hrs"))),$(layoutId+" #ZPAtt_uReport_totalPaysHours").parent().hide(),json.isViewAllowedForPayableHrs&&($(layoutId+" #ZPAtt_uReport_totalPaysHours").parent().show(),$(layoutId+" #ZPAtt_uReport_totalPaysHours").text(Attendance.disHours(data.totalPayDaysInSecs/60)+" "+ZPI18N.getString("zp.hrs"))),$(layoutId+" #ZPAtt_URep_payHrs").text(Attendance.disHours(data.totalPayDaysInSecs/60)+" "+ZPI18N.getString("zp.hrs")),Attendance.Reports.userReport.setAbsentInUserRepSummary()},setAbsentInUserRepSummary:function(){if(Attendance.Reports.userReport.sumForUserRep&&Attendance.Reports.userReport.data){var sumAbsent=Attendance.Reports.userReport.sumForUserRep.absent_count,sumAbsentHrs=Attendance.Reports.userReport.sumForUserRep.totalAbsentDaysInSecs,layoutId=(Attendance.Reports.userReport.data.dayList,"#"+Layout.Page.container.attr("id"));$(layoutId+" #ZPAtt_URep_DTHrs").text(Attendance.disHours((sumAbsentHrs-0)/60)+" "+ZPI18N.getString("zp.hrs")),$(layoutId+" #ZPAtt_URep_absDays").text(Math.round(1e3*(sumAbsent-0))/1e3+" "+ZPI18N.getString("zp.days")),$(layoutId+" #ZPAtt_uReport_absentCount").text(Math.round(1e3*(sumAbsent-0))/1e3+" "+ZPI18N.getString("zp.days"))}},printReport:function(){var params=Attendance.Reports.userReport.getParamsForReport();Attendance.Reports.printReport("attendanceUserReport",params.sdate+" "+ZPI18N.getString("zp.to")+" "+params.edate)}},article36:{reportName:"Article36",valKeys:["rglrTxt","dailyOTTxt","dailyExOTTxt","wklyOTTxt","wklyExOTTxt","mnthlyOTTxt","mnthlyExOTTxt","wkndOTTxt","wkndExOTTxt","holOTTxt","holExOTTxt","lateNightRglrTxt","lateNightOTTxt","lateNightHolTxt"],initPage:function(){ZPLite.Reports.setCurrentModule(Attendance.Reports.moduleName),ZPLite.Reports.setCurrentReport(Attendance.Reports.article36.reportName);var initParams={isModuleDataNeeded:!0,callback:Attendance.Reports.article36.init};ZPLite.Reports.initPage(initParams)},init:function(){if(ZPLite.Reports.Util.setAvailableReportsForModule("Attendance"),Attendance.Reports.article36.otReport=Attendance.Reports.adminReportData.article36,null==Attendance.Reports.depLocShiftList||!Attendance.Reports.article36.otReport){Attendance.Reports.getDepLocShiftList(),Attendance.Reports.Filters.clearCache(!0);var attModule=ZPLite.Reports.moduleData.attendance;isManageAttendanceData=attModule.isManageAttedance,isLead=attModule.isLead,isSPOCReportView=attModule.isSPOCReportView;var filterDiv=Layout.Page.container.find("#filterDiv");Attendance.Reports.Filters.constructFilter(filterDiv.find('[name="roleFilter"]'),"role",!1),Attendance.Reports.Filters.constructFilter(filterDiv.find('[name="datePeriodFilter"]'),"datePeriod",!0,Attendance.Reports.article36.filterOnChangeCallback),Attendance.Reports.Filters.constructFilter(filterDiv.find('[name="employeeStatusFilter"]'),"employeeStatus",!1,Attendance.Reports.article36.filterOnChangeCallback),Attendance.Reports.Filters.constructFilter(filterDiv.find('[name="employeeFilter"]'),"employee",!1,Attendance.Reports.article36.filterOnChangeCallback,"ATTENDANCE_ARTICLE36_FILTER_EMPLOYEE_FIRESCROLL"),Attendance.Reports.Filters.constructFilter(filterDiv.find('[name="departmentFilter"]'),"department",!1),Attendance.Reports.Filters.constructFilter(filterDiv.find('[name="locationFilter"]'),"location",!1),Attendance.Reports.Filters.constructFilter(filterDiv.find('[name="orgTagFilter"]'),"orgTag",!1),Attendance.Reports.Filters.constructFilter(filterDiv.find('[name="designationFilter"]'),"designation",!1),isOrgStructureEnabled&&(Attendance.Reports.Filters.constructFilter(filterDiv.find('[name="entityFilter"]'),"legalEntity",!1),Attendance.Reports.Filters.constructFilter(filterDiv.find('[name="buFilter"]'),"businessUnit",!1),Attendance.Reports.Filters.constructFilter(filterDiv.find('[name="divisionFilter"]'),"division",!1)),filterDiv.find('[name="fromDateFilter"]').off("click").on("click",function(){Calendar.setUpCalendar(event,$(this).find('[name="fromDateFilterText"]'),null,null,function(value,obj){$(obj).parent().val(Calendar.formatDate(value)),$(obj).parent().data("selectedDate",value),$(obj).parent().addClass("selected")})}),filterDiv.find('[name="toDateFilter"]').off("click").on("click",function(){Calendar.setUpCalendar(event,$(this).find('[name="toDateFilterText"]'),null,null,function(value,obj){$(obj).parent().val(Calendar.formatDate(value)),$(obj).parent().data("selectedDate",value),$(obj).parent().addClass("selected")})});var dateNavigationDtls={};dateNavigationDtls.mode=Attendance.Reports.article36.reportName,dateNavigationDtls.containerId=Layout.Page.container.attr("id"),dateNavigationDtls.previousBtnId="goToPreviousBtn",dateNavigationDtls.nextBtnId="goToNextBtn",dateNavigationDtls.displayAreaId="dateNavigatorText",dateNavigationDtls.navigationCallback=Attendance.Reports.article36.dateNaviCallBack,dateNavigationDtls.getDateForCustomNavigationCallback=Attendance.Reports.getDateForCustomNavigation,ZPLite.DateNavigator.init(dateNavigationDtls),ZPLite.DateNavigator.setPeriod(dateNavigationDtls.mode,ZPLite.DateNavigator.TYPE.WEEKLY,"current"),Object.keys(Attendance.Reports.depLocShiftList.otSettList).length>0&&Attendance.Reports.Filters.constructFilter(filterDiv.find('[name="otSetFilter"]'),"otSettings",!0),Attendance.Reports.article36.setDefaultFilterParams(),Attendance.Reports.article36.generateReport()}},filterOnChangeCallback:function(data){var filterDiv=Layout.Page.container.find("#filterDiv");if("datePeriod"===data.entity){var values=ZPLite.Filters.getValues(filterDiv.find('[name="datePeriodFilter"]'));jQuery.isEmptyObject(values)||"6"!==values[0].id?(filterDiv.find('[name="fromDateFilter"]').addClass("DNI"),filterDiv.find('[name="toDateFilter"]').addClass("DNI")):(filterDiv.find('[name="fromDateFilter"]').removeClass("DNI"),filterDiv.find('[name="toDateFilter"]').removeClass("DNI"))}if("employeeStatus"===data.entity){var employeeStatus=[];void 0!==(filterData=ZPLite.Filters.getValues(filterDiv.find('[name="employeeStatusFilter"]')))&&filterData.length>0&&$.each(filterData,function(index,options){employeeStatus.push(options.id)}),filterDiv.find('[name="exemployeeInclusionFilter"]').addClass("DNI"),employeeStatus.includes("18")&&(filterDiv.find('[name="exemployeeInclusionFilter"]').find("input").prop("checked",!0),filterDiv.find('[name="exemployeeInclusionFilter"]').removeClass("DNI"))}if("employee"===data.entity){var filterData=ZPLite.Filters.getValues(filterDiv.find('[name="employeeFilter"]')),erecNo=[];void 0!==filterData&&filterData.length>0&&$.each(filterData,function(index,options){erecNo.push(options.id)}),filterDiv.find('[name="userInclusionFilter"]').removeClass("DNI"),erecNo.length>0&&(filterDiv.find('[name="userInclusionFilter"]').addClass("DNI"),filterDiv.find('[name="userInclusionFilter"]').find("input").prop("checked",!1))}},dateNaviCallBack:function(){var filterDiv=Layout.Page.container.find("#filterDiv");ZPLite.Filters.setValues(filterDiv.find('[name="datePeriodFilter"]'),[{id:"6",text:ZPI18N.getString("zp.custom"),periodType:"custom"}]),filterDiv.find("[name=datePeriodFilter]").find("li.sel").removeClass("sel"),filterDiv.find("[name=fromDateFilter]").removeClass("DNI"),filterDiv.find("[name=toDateFilter]").removeClass("DNI");var fVal,tVal,period=ZPLite.DateNavigator.getPeriod(Attendance.Reports.article36.reportName);void 0!==period.from&&void 0!==period.to?(fVal=Calendar.formatDate(period.from),tVal=Calendar.formatDate(period.to)):tVal=fVal=Calendar.formatDate(period.day),filterDiv.find("[name=fromDateFilter]").val(fVal),filterDiv.find("[name=fromDateFilter]").data("selectedDate",Calendar.parseDate(fVal,uidateFormat)),filterDiv.find("[name=fromDateFilter]").data("text",fVal),filterDiv.find("[name=fromDateFilter]").addClass("selected"),filterDiv.find("[name=fromDateFilterText]").text(fVal),filterDiv.find("[name=fromDateFilterText]").val(fVal),filterDiv.find("[name=toDateFilter]").val(tVal),filterDiv.find("[name=toDateFilter]").data("selectedDate",Calendar.parseDate(tVal,uidateFormat)),filterDiv.find("[name=toDateFilter]").data("text",tVal),filterDiv.find("[name=toDateFilter]").addClass("selected"),filterDiv.find("[name=toDateFilterText]").text(tVal),filterDiv.find("[name=toDateFilterText]").val(tVal),Attendance.Reports.article36.generateReport()},setDefaultFilterParams:function(){var filterDiv=Layout.Page.container.find("#filterDiv"),otSetFilter=[];otSetFilter.push(Attendance.Reports.Filters.formatFilterData(Attendance.Reports.depLocShiftList.otSettList,"otSettings")[0]),ZPLite.Filters.setValues(filterDiv.find('[name="otSetFilter"]'),otSetFilter,!0),ZPLite.Filters.setValues(filterDiv.find('[name="datePeriodFilter"]'),[{id:"1",text:ZPI18N.getString("zp.thisweek"),periodType:"weekly",tense:"current"}]),filterDiv.find('[name="fromDateFilter"]').addClass("DNI"),filterDiv.find('[name="toDateFilter"]').addClass("DNI"),ZPLite.Filters.setValues(filterDiv.find('[name="employeeStatusFilter"]'),[{id:"19",text:ZPI18N.getString("zp.activeusers")},{id:"-2",text:ZPI18N.getString("zp.activeprofiles")},{id:"18",text:ZPI18N.getString("zp.exemployees")}]),ZPLite.Filters.clearValues(filterDiv.find('[name="locationFilter"]')),filterDiv.find('[name="orgTagFilter"]').is(":visible")&&ZPLite.Filters.clearValues(filterDiv.find('[name="orgTagFilter"]')),isadmin&&filterDiv.find('[name="roleFilter"]').is(":visible")&&ZPLite.Filters.clearValues(filterDiv.find('[name="roleFilter"]')),ZPLite.Filters.clearValues(filterDiv.find('[name="employeeFilter"]')),filterDiv.find('[name="userInclusionFilter"]').removeClass("DNI"),filterDiv.find('[name="userInclusionFilter"]').find("input").prop("checked",!1),filterDiv.find('[name="reportTypeFilter"]').find("input").prop("checked",!1),ZPLite.Filters.clearValues(filterDiv.find('[name="departmentFilter"]')),ZPLite.Filters.clearValues(filterDiv.find('[name="designationFilter"]')),Attendance.Reports.article36.removeErrClass(),filterDiv.find('[name="entityFilter"]').is(":visible")&&ZPLite.Filters.clearValues(filterDiv.find('[name="entityFilter"]')),filterDiv.find('[name="buFilter"]').is(":visible")&&ZPLite.Filters.clearValues(filterDiv.find('[name="buFilter"]')),filterDiv.find('[name="divisionFilter"]').is(":visible")&&ZPLite.Filters.clearValues(filterDiv.find('[name="divisionFilter"]')),filterDiv.find('[name="exemployeeInclusionFilter"]').removeClass("DNI"),filterDiv.find('[name="exemployeeInclusionFilter"]').find("input").prop("checked",!0),isSPOCReportView||isManageAttendanceData||!isLead||(Layout.Page.container.find('[name="employeeStatusFilter"]').addClass("DNI"),Layout.Page.container.find('[name="exemployeeInclusionFilter"]').addClass("DNI"))},resetFilter:function(){Attendance.Reports.article36.setDefaultFilterParams()},removeErrClass:function(){var errorDivs=Layout.Page.container.find("#filterDiv").find(".error-clr");errorDivs.length>0&&$.each(errorDivs,function(index,errorDiv){$(errorDiv).removeClass("error-clr")})},applyFilter:function(){var tense,customDatePeriod,container=Layout.Page.container.find("#filterDiv"),values=ZPLite.Filters.getValues(container.find('[name="datePeriodFilter"]')),type=values[0].periodType,hideNavigation=!1;if(Attendance.Reports.article36.removeErrClass(),"6"===values[0].id){var errorMessage,fromDate=container.find('[name="fromDateFilter"]').data("selectedDate"),toDate=container.find('[name="toDateFilter"]').data("selectedDate");if(void 0===fromDate)container.find('[name="fromDateFilter"]').addClass("error-clr"),errorMessage=ZPI18N.getString("zp.emptyfromdate");else if(void 0===toDate)container.find('[name="toDateFilter"]').addClass("error-clr"),errorMessage=ZPI18N.getString("zp.emptytodate");else{var dateDiff=moment(Calendar.formatDate(toDate),dateFmt.toUpperCase()).diff(moment(Calendar.formatDate(fromDate),dateFmt.toUpperCase()),"days");dateDiff<0?(container.find('[name="toDateFilter"]').addClass("error-clr"),errorMessage=ZPI18N.getString("zp.greaterfromdate")):dateDiff>31&&(container.find('[name="toDateFilter"]').addClass("error-clr"),errorMessage=ZPI18N.getString("zp.datewithinonemonth"))}if(errorMessage)return void ZPeople.Message.showFailureMsg(errorMessage);customDatePeriod={from:fromDate,to:toDate}}else hideNavigation=!1,tense=values[0].tense;ZPLite.DateNavigator.setPeriod(Attendance.Reports.article36.reportName,type,tense,hideNavigation,customDatePeriod),Attendance.Reports.article36.generateReport()},generateReport:function(){var layout=Layout.Page.container;ZPLite.Firescroll.reset(layout.find("#attendanceArticle36Report"),Attendance.Reports.article36.Firescroll.mode),layout.find("#attendanceArticle36Report").scrollTop(0),layout.find(".ZPNdata ").fadeOut(100).remove(),layout.find("#attendanceArticle36Report").before(ZPeople.LOADING_HTML),layout.find("#attendanceArticle36Report").addClass("DN");var param=Attendance.Reports.article36.getParamsForReport();ZPeople.Request.send("/AttendanceReportAction.zp",param,function(response,param){if(response.fail||response.error&&"permissionDenied"===response.error)Attendance.Reports.permDenied();else{layout.find("[id=zp_page_loading]").fadeOut(200).remove(),layout.find("#attendanceArticle36Report").removeClass("DN");var hdrTr=layout.find("#ZPAtt_attArticle36ReportTableHeader").find("tr"),repHdrs=hdrTr.find("th");for(hdrIndex=1;hdrIndex<repHdrs.length;hdrIndex++)repHdrs.eq(hdrIndex).remove();var hdrHtml="",newHdrs=response.headers;for(hdrIndex=0;hdrIndex<newHdrs.length;hdrIndex++)hdrHtml+='<th class="text-center B1">'+newHdrs[hdrIndex].htmlEnValue+"</th>";hdrTr.append(hdrHtml),0==response.report.length?Layout.Page.container.find("#attendanceArticle36Report").hasClass("DN")||(Layout.Page.container.find("#attendanceArticle36Report").addClass("DN"),Layout.Page.container.find("[id=zp_page_loading]").fadeOut(200).remove(),Layout.Page.container.find(".ZPNdata ").remove(),Layout.Page.container.find("#attendanceArticle36Report").before(ZPUtil.newNoDataHTML("CR-nodata-rpt","path6",ZPI18N.getString("zp.noreportsmsg")))):(Layout.Page.container.find(".ZPNdata ").fadeOut(100).remove(),Attendance.Reports.article36.constructList(!1,response.report)),ZPLite.Firescroll.init(layout.find("#attendanceArticle36Report"),Attendance.Reports.article36.Firescroll.mode,{maxFetchLimit:50,callback:Attendance.Reports.article36.Firescroll.loadMoreData}),ZPLite.Firescroll.setFetchedCount(Attendance.Reports.article36.Firescroll.mode,response.report.length)}})},constructList:function(isScroll,data){var repTable=Layout.Page.container.find("#ZPAtt_attArticle36ReportTableBody");isScroll||repTable.empty(),data.forEach(function(empInfo){var tr="<tr class='ZPLRow' id='"+empInfo.eno+"report'>";tr+="<td class='colM1_sticky' style='max-width:300px;width:300px;'><img class='FL' src="+empInfo.empPhoto+">";var empId=empInfo.empId,empName=empInfo.name,dateofexit="";empInfo.doe&&(dateofexit="( "+ZPI18N.getString("zp.exitdate")+" - "+empInfo.doe+")"),tr+="<div class='ZPusrName '><span class='ellipsis W500 CP' onclick=Attendance.Reports.getUserReportFromSummary('"+empInfo.eno+"',this,"+empInfo.empStat+") data-toggle='tooltip' data-placement='top' data-container='body' title='"+empId+" "+empName+"'><b>"+empId+"</b>"+empName+"</span><em class='ZPsecName'>"+dateofexit+"</em></div></td>",Attendance.Reports.article36.valKeys.forEach(function(key){var val=void 0;void 0!=empInfo[key]&&(val=Attendance.disHours(empInfo[key])),void 0!=val&&(tr+="<td class='text-center' style='max-width: initial; width: 120px; min-width: 100px;'><div>",tr+=val+"</div></td>")}),tr+="</tr>",repTable.append(tr)})},getDefaultParams:function(){return{mode:"articleJPNReport",getOneMonthData:!0,incDateOfExit:!0,conreqcsr:csrfToken}},getParamsForReport:function(){var params=Attendance.Reports.article36.getDefaultParams(),filterDiv=Layout.Page.container.find("#filterDiv"),filterData=ZPLite.Filters.getValues(filterDiv.find('[name="employeeFilter"]'));if(void 0!==filterData&&filterData.length>0){var erecNo=[];$.each(filterData,function(index,options){erecNo.push(options.id)}),params.erecno=JSON.stringify(erecNo)}if(Layout.Page.container.find("[name=userInclusionFilter]").find("input").is(":checked")&&(params.showDirectRepTo=!0),params.getOneMonthData=!0,void 0!==(filterData=ZPLite.Filters.getValues(filterDiv.find('[name="departmentFilter"]')))&&filterData.length>0){var departmentId=[];$.each(filterData,function(index,options){departmentId.push(options.id)}),params.departmentId=JSON.stringify(departmentId)}if(void 0!==(filterData=ZPLite.Filters.getValues(filterDiv.find('[name="designationFilter"]')))&&filterData.length>0){var desgId=[];$.each(filterData,function(index,options){desgId.push(options.id)}),params.desgId=JSON.stringify(desgId)}if(void 0!==(filterData=ZPLite.Filters.getValues(filterDiv.find('[name="locationFilter"]')))&&filterData.length>0){var locationId=[];$.each(filterData,function(index,options){locationId.push(options.id)}),params.locationId=JSON.stringify(locationId)}if(void 0!==(filterData=ZPLite.Filters.getValues(filterDiv.find('[name="roleFilter"]')))&&filterData.length>0){var roleId=[];$.each(filterData,function(index,options){roleId.push(options.id)}),params.roleId=JSON.stringify(roleId)}if(void 0!==(filterData=ZPLite.Filters.getValues(filterDiv.find('[name="otSetFilter"]')))&&filterData.length>0&&(params.otSetId=filterData[0].id),Attendance.organizationTag.fetchParams(filterDiv,params),isOrgStructureEnabled){if((filterData=ZPLite.Filters.getValues(filterDiv.find('[name="entityFilter"]')))&&filterData.length>0){var entity=[];$.each(filterData,function(index,options){entity.push(options.id)}),params.entityId=JSON.stringify(entity)}if((filterData=ZPLite.Filters.getValues(filterDiv.find('[name="buFilter"]')))&&filterData.length>0){var buFilterId=[];$.each(filterData,function(index,options){buFilterId.push(options.id)}),params.bUnitId=JSON.stringify(buFilterId)}if((filterData=ZPLite.Filters.getValues(filterDiv.find('[name="divisionFilter"]')))&&filterData.length>0){var divisionId=[];$.each(filterData,function(index,options){divisionId.push(options.id)}),params.divisionId=JSON.stringify(divisionId)}}if((Layout.Page.container.find("#ZPAtt_Article36Report_myReqEmpSort").hasClass("sort-u")||Layout.Page.container.find("#ZPAtt_Article36Report_myReqEmpSort").hasClass("sort-d"))&&(params.isEmpSortAsc=Layout.Page.container.find("#ZPAtt_Article36Report_myReqEmpSort").hasClass("sort-u")),!filterDiv.find('[name="employeeStatusFilter"]').hasClass("DNI")){if(void 0!==(filterData=ZPLite.Filters.getValues(filterDiv.find('[name="employeeStatusFilter"]')))&&filterData.length>0){var employeeStatus=[];$.each(filterData,function(index,options){employeeStatus.push(options.id)}),params.userTypeId=JSON.stringify(employeeStatus)}filterDiv.find('[name="exemployeeInclusionFilter"]').find("input").is(":checked")||delete params.incDateOfExit}var datePeriod=ZPLite.DateNavigator.getPeriod(Attendance.Reports.article36.reportName);return void 0!==datePeriod&&(void 0!==datePeriod.from&&void 0!==datePeriod.to?(params.sdate=Calendar.formatDate(datePeriod.from),params.edate=Calendar.formatDate(datePeriod.to)):(params.sdate=Calendar.formatDate(datePeriod.day),params.edate=Calendar.formatDate(datePeriod.day))),params.startIndex=ZPLite.Firescroll.getStartIndex(Attendance.Reports.article36.Firescroll.mode),"myReports"==ZPLite.Reports.selectedTab?params.zplType=1:"teamReports"==ZPLite.Reports.selectedTab&&(params.zplType=2),params.repType=ZPLite.Reports.selectedTab,params},Firescroll:{mode:"ATTENDANCE_ARTICLE36_REPORT_FIRESCROLL",loadMoreData:function(){var params=Attendance.Reports.article36.getParamsForReport();ZPeople.Request.send("/AttendanceReportAction.zp",params,function(response){response.fail||response.error||!response.report?ZPLite.Firescroll.setFetchedCount(Attendance.Reports.article36.Firescroll.mode,0):(ZPLite.Firescroll.setActiveStatus(Attendance.Reports.article36.Firescroll.mode,!1),Attendance.Reports.article36.constructList(!0,response.report),ZPLite.Firescroll.setFetchedCount(Attendance.Reports.article36.Firescroll.mode,response.report.length))})}}},summaryReport:{reportName:"ATTENDANCE_SUMMARY_REPORT",initPage:function(){ZPLite.Reports.setCurrentModule(Attendance.Reports.moduleName),ZPLite.Reports.setCurrentReport(Attendance.Reports.summaryReport.reportName);var initParams={isModuleDataNeeded:!0,callback:Attendance.Reports.summaryReport.init};ZPLite.Reports.initPage(initParams)},init:function(){if(ZPLite.Reports.Util.setAvailableReportsForModule("Attendance"),Attendance.Reports.summaryReport.sumReport="myReports"==ZPLite.Reports.selectedTab?Attendance.Reports.myReportData.summaryReport:"teamReports"==ZPLite.Reports.selectedTab?Attendance.Reports.teamReportData.summaryReport:Attendance.Reports.adminReportData.summaryReport,null==Attendance.Reports.depLocShiftList||!Attendance.Reports.summaryReport.sumReport){Attendance.Reports.getDepLocShiftList(),Attendance.Reports.Filters.clearCache(!0);var attModule=ZPLite.Reports.moduleData.attendance;isManageAttendanceData=attModule.isManageAttedance,isLead=attModule.isLead,isSPOCReportView=attModule.isSPOCReportView;var filterDiv=Layout.Page.container.find("#filterDiv");isadmin&&(isManageAttendanceData=!0),isadmin&&"myReports"!=ZPLite.Reports.selectedTab?Attendance.Reports.Filters.constructFilter(filterDiv.find('[name="roleFilter"]'),"role",!1):filterDiv.find('[name="roleFilter"]').remove(),Attendance.Reports.Filters.constructFilter(filterDiv.find('[name="datePeriodFilter"]'),"datePeriod",!0,Attendance.Reports.summaryReport.filterOnChangeCallback),Attendance.Reports.Filters.constructFilter(filterDiv.find('[name="employeeStatusFilter"]'),"employeeStatus",!1,Attendance.Reports.summaryReport.filterOnChangeCallback),Attendance.Reports.Filters.constructFilter(filterDiv.find('[name="employeeFilter"]'),"employee",!1,Attendance.Reports.summaryReport.filterOnChangeCallback,"ATTENDANCE_SUMMARYREPORT_FILTER_EMPLOYEE_FIRESCROLL"),Attendance.Reports.Filters.constructFilter(filterDiv.find('[name="departmentFilter"]'),"department",!1),Attendance.Reports.Filters.constructFilter(filterDiv.find('[name="locationFilter"]'),"location",!1),Attendance.Reports.Filters.constructFilter(filterDiv.find('[name="orgTagFilter"]'),"orgTag",!1),Attendance.Reports.Filters.constructFilter(filterDiv.find('[name="designationFilter"]'),"designation",!1),isOrgStructureEnabled&&(Attendance.Reports.Filters.constructFilter(filterDiv.find('[name="entityFilter"]'),"legalEntity",!1),Attendance.Reports.Filters.constructFilter(filterDiv.find('[name="buFilter"]'),"businessUnit",!1),Attendance.Reports.Filters.constructFilter(filterDiv.find('[name="divisionFilter"]'),"division",!1)),filterDiv.find('[name="fromDateFilter"]').off("click").on("click",function(){Calendar.setUpCalendar(event,$(this).find('[name="fromDateFilterText"]'),null,null,function(value,obj){$(obj).parent().val(Calendar.formatDate(value)),$(obj).parent().data("selectedDate",value),$(obj).parent().addClass("selected")})}),filterDiv.find('[name="toDateFilter"]').off("click").on("click",function(){Calendar.setUpCalendar(event,$(this).find('[name="toDateFilterText"]'),null,null,function(value,obj){$(obj).parent().val(Calendar.formatDate(value)),$(obj).parent().data("selectedDate",value),$(obj).parent().addClass("selected")})});var dateNavigationDtls={};dateNavigationDtls.mode=Attendance.Reports.summaryReport.reportName,dateNavigationDtls.containerId=Layout.Page.container.attr("id"),dateNavigationDtls.previousBtnId="goToPreviousBtn",dateNavigationDtls.nextBtnId="goToNextBtn",dateNavigationDtls.displayAreaId="dateNavigatorText",dateNavigationDtls.navigationCallback=Attendance.Reports.summaryReport.dateNaviCallBack,dateNavigationDtls.getDateForCustomNavigationCallback=Attendance.Reports.getDateForCustomNavigation,ZPLite.DateNavigator.init(dateNavigationDtls),ZPLite.DateNavigator.setPeriod(dateNavigationDtls.mode,ZPLite.DateNavigator.TYPE.WEEKLY,"current"),Attendance.Reports.summaryReport.setDefaultFilterParams(),Attendance.Reports.summaryReport.generateReport()}},filterOnChangeCallback:function(data){var filterDiv=Layout.Page.container.find("#filterDiv");if("datePeriod"===data.entity){var values=ZPLite.Filters.getValues(filterDiv.find('[name="datePeriodFilter"]'));jQuery.isEmptyObject(values)||"6"!==values[0].id?(filterDiv.find('[name="fromDateFilter"]').addClass("DNI"),filterDiv.find('[name="toDateFilter"]').addClass("DNI")):(filterDiv.find('[name="fromDateFilter"]').removeClass("DNI"),filterDiv.find('[name="toDateFilter"]').removeClass("DNI"))}if("employeeStatus"===data.entity){var employeeStatus=[];void 0!==(filterData=ZPLite.Filters.getValues(filterDiv.find('[name="employeeStatusFilter"]')))&&filterData.length>0&&$.each(filterData,function(index,options){employeeStatus.push(options.id)}),filterDiv.find('[name="exemployeeInclusionFilter"]').addClass("DNI"),employeeStatus.includes("18")&&(filterDiv.find('[name="exemployeeInclusionFilter"]').find("input").prop("checked",!0),filterDiv.find('[name="exemployeeInclusionFilter"]').removeClass("DNI")),Attendance.Reports.Filters.clearCache(!0,"employee"),ZPLite.Filters.clearOptions(filterDiv.find('[name="employeeFilter"]'))}if("employee"===data.entity){var filterData=ZPLite.Filters.getValues(filterDiv.find('[name="employeeFilter"]')),erecNo=[];void 0!==filterData&&filterData.length>0&&$.each(filterData,function(index,options){erecNo.push(options.id)}),filterDiv.find('[name="userInclusionFilter"]').removeClass("DNI"),erecNo.length>0&&(filterDiv.find('[name="userInclusionFilter"]').addClass("DNI"),filterDiv.find('[name="userInclusionFilter"]').find("input").prop("checked",!1))}},setDefaultFilterParams:function(){var filterDiv=Layout.Page.container.find("#filterDiv");ZPLite.Filters.setValues(filterDiv.find('[name="datePeriodFilter"]'),[{id:"1",text:ZPI18N.getString("zp.thisweek"),periodType:"weekly",tense:"current"}]),filterDiv.find('[name="fromDateFilter"]').addClass("DNI"),filterDiv.find('[name="toDateFilter"]').addClass("DNI"),ZPLite.Filters.setValues(filterDiv.find('[name="employeeStatusFilter"]'),[{id:"19",text:ZPI18N.getString("zp.activeusers")},{id:"-2",text:ZPI18N.getString("zp.activeprofiles")},{id:"18",text:ZPI18N.getString("zp.exemployees")}]),ZPLite.Filters.clearValues(filterDiv.find('[name="locationFilter"]')),filterDiv.find('[name="orgTagFilter"]').is(":visible")&&ZPLite.Filters.clearValues(filterDiv.find('[name="orgTagFilter"]')),isadmin&&filterDiv.find('[name="roleFilter"]').is(":visible")&&ZPLite.Filters.clearValues(filterDiv.find('[name="roleFilter"]')),ZPLite.Filters.clearValues(filterDiv.find('[name="employeeFilter"]')),filterDiv.find('[name="userInclusionFilter"]').removeClass("DNI"),filterDiv.find('[name="userInclusionFilter"]').find("input").prop("checked",!1),filterDiv.find('[name="reportTypeFilter"]').find("input").prop("checked",!1),ZPLite.Filters.clearValues(filterDiv.find('[name="departmentFilter"]')),ZPLite.Filters.clearValues(filterDiv.find('[name="designationFilter"]')),Attendance.Reports.summaryReport.removeErrClass(),filterDiv.find('[name="entityFilter"]').is(":visible")&&ZPLite.Filters.clearValues(filterDiv.find('[name="entityFilter"]')),filterDiv.find('[name="buFilter"]').is(":visible")&&ZPLite.Filters.clearValues(filterDiv.find('[name="buFilter"]')),filterDiv.find('[name="divisionFilter"]').is(":visible")&&ZPLite.Filters.clearValues(filterDiv.find('[name="divisionFilter"]')),filterDiv.find('[name="exemployeeInclusionFilter"]').removeClass("DNI"),filterDiv.find('[name="exemployeeInclusionFilter"]').find("input").prop("checked",!0),isSPOCReportView||isManageAttendanceData||!isLead||(Layout.Page.container.find('[name="employeeStatusFilter"]').addClass("DNI"),Layout.Page.container.find('[name="exemployeeInclusionFilter"]').addClass("DNI"))},resetFilter:function(){Attendance.Reports.summaryReport.setDefaultFilterParams()},removeErrClass:function(){var errorDivs=Layout.Page.container.find("#filterDiv").find(".error-clr");errorDivs.length>0&&$.each(errorDivs,function(index,errorDiv){$(errorDiv).removeClass("error-clr")})},applyFilter:function(){var tense,customDatePeriod,container=Layout.Page.container.find("#filterDiv"),values=ZPLite.Filters.getValues(container.find('[name="datePeriodFilter"]')),type=values[0].periodType,hideNavigation=!1;if(Attendance.Reports.summaryReport.removeErrClass(),"6"===values[0].id){var errorMessage,fromDate=container.find('[name="fromDateFilter"]').data("selectedDate"),toDate=container.find('[name="toDateFilter"]').data("selectedDate");if(void 0===fromDate)container.find('[name="fromDateFilter"]').addClass("error-clr"),errorMessage=ZPI18N.getString("zp.emptyfromdate");else if(void 0===toDate)container.find('[name="toDateFilter"]').addClass("error-clr"),errorMessage=ZPI18N.getString("zp.emptytodate");else{var dateDiff=moment(Calendar.formatDate(toDate),dateFmt.toUpperCase()).diff(moment(Calendar.formatDate(fromDate),dateFmt.toUpperCase()),"days");dateDiff<0?(container.find('[name="toDateFilter"]').addClass("error-clr"),errorMessage=ZPI18N.getString("zp.greaterfromdate")):dateDiff>31&&(container.find('[name="toDateFilter"]').addClass("error-clr"),errorMessage=ZPI18N.getString("zp.datewithinonemonth"))}if(errorMessage)return void ZPeople.Message.showFailureMsg(errorMessage);customDatePeriod={from:fromDate,to:toDate}}else hideNavigation=!1,tense=values[0].tense;ZPLite.DateNavigator.setPeriod(Attendance.Reports.summaryReport.reportName,type,tense,hideNavigation,customDatePeriod),Attendance.Reports.summaryReport.generateReport()},dateNaviCallBack:function(){var filterDiv=Layout.Page.container.find("#filterDiv");ZPLite.Filters.setValues(filterDiv.find('[name="datePeriodFilter"]'),[{id:"6",text:ZPI18N.getString("zp.custom"),periodType:"custom"}]),filterDiv.find("[name=datePeriodFilter]").find("li.sel").removeClass("sel"),filterDiv.find("[name=fromDateFilter]").removeClass("DNI"),filterDiv.find("[name=toDateFilter]").removeClass("DNI");var fVal,tVal,period=ZPLite.DateNavigator.getPeriod(Attendance.Reports.summaryReport.reportName);void 0!==period.from&&void 0!==period.to?(fVal=Calendar.formatDate(period.from),tVal=Calendar.formatDate(period.to)):tVal=fVal=Calendar.formatDate(period.day),filterDiv.find("[name=fromDateFilter]").val(fVal),filterDiv.find("[name=fromDateFilter]").data("selectedDate",Calendar.parseDate(fVal,uidateFormat)),filterDiv.find("[name=fromDateFilter]").data("text",fVal),filterDiv.find("[name=fromDateFilter]").addClass("selected"),filterDiv.find("[name=fromDateFilterText]").text(fVal),filterDiv.find("[name=fromDateFilterText]").val(fVal),filterDiv.find("[name=toDateFilter]").val(tVal),filterDiv.find("[name=toDateFilter]").data("selectedDate",Calendar.parseDate(tVal,uidateFormat)),filterDiv.find("[name=toDateFilter]").data("text",tVal),filterDiv.find("[name=toDateFilter]").addClass("selected"),filterDiv.find("[name=toDateFilterText]").text(tVal),filterDiv.find("[name=toDateFilterText]").val(tVal),Attendance.Reports.summaryReport.generateReport()},switchView:function(isHoursView){isHoursView!==Attendance.Reports.summaryReport.isHoursView()&&(isHoursView?(Layout.Page.container.find('[name="dayviewbtn"]').removeClass("sel"),Layout.Page.container.find('[name="hoursviewbtn"]').addClass("sel"),Attendance.Reports.summaryReport.totalWorkedHours=0,Attendance.Reports.summaryReport.totalCountwSecs=0,Attendance.Reports.summaryReport.totalOverSecs=0,Attendance.Reports.summaryReport.totalDevSecs=0,Attendance.Reports.summaryReport.totalWorkedSecs=0,Attendance.Reports.summaryReport.totalOndutySecs=0,Attendance.Reports.summaryReport.totalLeaveSecs=0,Attendance.Reports.summaryReport.totalLOPSecs=0,Attendance.Reports.summaryReport.totalExpectedPaiddaysInSec=0,Attendance.Reports.summaryReport.totalWorkingdaysInSec=0,Attendance.Reports.summaryReport.totalHolidaydaysInSec=0,Attendance.Reports.summaryReport.totalWeekenddaysInSec=0,Attendance.Reports.summaryReport.totalPaidOffdaysInSec=0,Attendance.Reports.summaryReport.totalAbsentdaysInSec=0,Attendance.Reports.summaryReport.totalUnPaidOffdaysInSec=0,Attendance.Reports.summaryReport.totalPaiddaysInSec=0,Attendance.Reports.summaryReport.PP_PayOffDaysInSec=0,Attendance.Reports.summaryReport.PP_ExpectedPayDaysInSec=0,Attendance.Reports.summaryReport.totalPaidBreakInSecs=0,Attendance.Reports.summaryReport.totalUnPaidBreakInSecs=0,Attendance.Reports.summaryReport.totalPermissionInSecs=0,Attendance.Reports.summaryReport.totStatWkndOT=0,Attendance.Reports.summaryReport.totNonStatWkndOT=0,Attendance.Reports.summaryReport.totalStatWknd=0,Attendance.Reports.summaryReport.totalNonStatWknd=0,Attendance.Reports.summaryReport.totalRegWknd=0,Attendance.Reports.summaryReport.totRegWorkHrs=0,Attendance.Reports.summaryReport.totLNWorkHrs=0,Attendance.Reports.summaryReport.totWkndRegOT=0,Attendance.Reports.summaryReport.totWkndLNOT=0,Attendance.Reports.summaryReport.totHolidayRegOT=0,Attendance.Reports.summaryReport.totHolidayLNOT=0,Attendance.Reports.summaryReport.totRegRegOT=0,Attendance.Reports.summaryReport.totRegLNOT=0,Attendance.Reports.summaryReport.totStatWkndRegOT=0,Attendance.Reports.summaryReport.totStatWkndLNOT=0,Attendance.Reports.summaryReport.totNonStatWkndRegOT=0,Attendance.Reports.summaryReport.totNonStatWkndLNOT=0,Attendance.Reports.summaryReport.totWkndOT=0,Attendance.Reports.summaryReport.totHolidayOT=0,Attendance.Reports.summaryReport.totRegOT=0,Attendance.Reports.summaryReport.totRegWeekendHours=0,Attendance.Reports.summaryReport.worked=0,Attendance.Reports.summaryReport.paidOff=0,Attendance.Reports.summaryReport.paid=0,Attendance.Reports.summaryReport.expected=0,Attendance.Reports.summaryReport.ot=0,Attendance.Reports.summaryReport.unpaidOff=0,Attendance.Reports.summaryReport.paidBreak=0,Attendance.Reports.summaryReport.unpaidBreak=0,Attendance.Reports.summaryReport.permission=0,Attendance.Reports.summaryReport.totalCumulativeOvertime=0):(Layout.Page.container.find('[name="dayviewbtn"]').addClass("sel"),Layout.Page.container.find('[name="hoursviewbtn"]').removeClass("sel")),Attendance.Reports.summaryReport.construct(!1))},isHoursView:function(){return Layout.Page.container.find('[name="hoursviewbtn"]').hasClass("sel")},getDefaultParams:function(){return{mode:"customReport",getOneMonthData:!0,incDateOfExit:!0,conreqcsr:csrfToken}},getParamsForReport:function(){var params=Attendance.Reports.summaryReport.getDefaultParams(),filterDiv=Layout.Page.container.find("#filterDiv"),filterData=ZPLite.Filters.getValues(filterDiv.find('[name="employeeFilter"]'));if(void 0!==filterData&&filterData.length>0){var erecNo=[];$.each(filterData,function(index,options){erecNo.push(options.id)}),params.erecno=JSON.stringify(erecNo)}if(Layout.Page.container.find("[name=userInclusionFilter]").find("input").is(":checked")&&(params.showDirectRepTo=!0),params.getOneMonthData=!0,void 0!==(filterData=ZPLite.Filters.getValues(filterDiv.find('[name="departmentFilter"]')))&&filterData.length>0){var departmentId=[];$.each(filterData,function(index,options){departmentId.push(options.id)}),params.departmentId=JSON.stringify(departmentId)}if(void 0!==(filterData=ZPLite.Filters.getValues(filterDiv.find('[name="designationFilter"]')))&&filterData.length>0){var desgId=[];$.each(filterData,function(index,options){desgId.push(options.id)}),params.desgId=JSON.stringify(desgId)}if(void 0!==(filterData=ZPLite.Filters.getValues(filterDiv.find('[name="locationFilter"]')))&&filterData.length>0){var locationId=[];$.each(filterData,function(index,options){locationId.push(options.id)}),params.locationId=JSON.stringify(locationId)}if(void 0!==(filterData=ZPLite.Filters.getValues(filterDiv.find('[name="roleFilter"]')))&&filterData.length>0){var roleId=[];$.each(filterData,function(index,options){roleId.push(options.id)}),params.roleId=JSON.stringify(roleId)}if(Attendance.organizationTag.fetchParams(filterDiv,params),isOrgStructureEnabled){if((filterData=ZPLite.Filters.getValues(filterDiv.find('[name="entityFilter"]')))&&filterData.length>0){var entity=[];$.each(filterData,function(index,options){entity.push(options.id)}),params.entityId=JSON.stringify(entity)}if((filterData=ZPLite.Filters.getValues(filterDiv.find('[name="buFilter"]')))&&filterData.length>0){var buFilterId=[];$.each(filterData,function(index,options){buFilterId.push(options.id)}),params.bUnitId=JSON.stringify(buFilterId)}if((filterData=ZPLite.Filters.getValues(filterDiv.find('[name="divisionFilter"]')))&&filterData.length>0){var divisionId=[];$.each(filterData,function(index,options){divisionId.push(options.id)}),params.divisionId=JSON.stringify(divisionId)}}if((Layout.Page.container.find("#ZPAtt_sumDayReport_myReqEmpSort").hasClass("sort-u")||Layout.Page.container.find("#ZPAtt_sumDayReport_myReqEmpSort").hasClass("sort-d")||Layout.Page.container.find("#ZPAtt_sumHourReport_myReqEmpSort").hasClass("sort-u")||Layout.Page.container.find("#ZPAtt_sumHourReport_myReqEmpSort").hasClass("sort-d")||Layout.Page.container.find("#ZPAtt_simpSumDayReport_myReqEmpSort").hasClass("sort-u")||Layout.Page.container.find("#ZPAtt_simpSumDayReport_myReqEmpSort").hasClass("sort-d")||Layout.Page.container.find("#ZPAtt_simpSumHourReport_myReqEmpSort").hasClass("sort-u")||Layout.Page.container.find("#ZPAtt_simpSumHourReport_myReqEmpSort").hasClass("sort-d"))&&(params.isEmpSortAsc=Layout.Page.container.find("#ZPAtt_sumDayReport_myReqEmpSort").hasClass("sort-u")||Layout.Page.container.find("#ZPAtt_sumHourReport_myReqEmpSort").hasClass("sort-u")||Layout.Page.container.find("#ZPAtt_simpSumDayReport_myReqEmpSort").hasClass("sort-u")||Layout.Page.container.find("#ZPAtt_simpSumHourReport_myReqEmpSort").hasClass("sort-u")),!filterDiv.find('[name="employeeStatusFilter"]').hasClass("DNI")){if(void 0!==(filterData=ZPLite.Filters.getValues(filterDiv.find('[name="employeeStatusFilter"]')))&&filterData.length>0){var employeeStatus=[];$.each(filterData,function(index,options){employeeStatus.push(options.id)}),params.userTypeId=JSON.stringify(employeeStatus)}filterDiv.find('[name="exemployeeInclusionFilter"]').find("input").is(":checked")||delete params.incDateOfExit}var datePeriod=ZPLite.DateNavigator.getPeriod(Attendance.Reports.summaryReport.reportName);return void 0!==datePeriod&&(void 0!==datePeriod.from&&void 0!==datePeriod.to?(params.sdate=Calendar.formatDate(datePeriod.from),params.edate=Calendar.formatDate(datePeriod.to)):(params.sdate=Calendar.formatDate(datePeriod.day),params.edate=Calendar.formatDate(datePeriod.day))),params.startIndex=ZPLite.Firescroll.getStartIndex(Attendance.Reports.summaryReport.Firescroll.mode),"myReports"==ZPLite.Reports.selectedTab?params.zplType=1:"teamReports"==ZPLite.Reports.selectedTab&&(params.zplType=2),params.repType=ZPLite.Reports.selectedTab,params},generateReport:function(){var layout=Layout.Page.container;ZPLite.Firescroll.reset(layout.find("#attendanceSummaryReport"),Attendance.Reports.summaryReport.Firescroll.mode),layout.find("#attendanceSummaryReport").scrollTop(0),layout.find(".ZPNdata ").fadeOut(100).remove(),layout.find("#attendanceSummaryReport").before(ZPeople.LOADING_HTML),layout.find("#attendanceSummaryReport").addClass("DN");var param=Attendance.Reports.summaryReport.getParamsForReport();ZPeople.Request.send("/AttendanceReportAction.zp",param,function(response,param){response.fail||response.error&&"permissionDenied"===response.error?Attendance.Reports.permDenied():(layout.find("[id=zp_page_loading]").fadeOut(200).remove(),Attendance.Reports.summaryReport.totalWorkedHours=0,Attendance.Reports.summaryReport.totalCountwSecs=0,Attendance.Reports.summaryReport.totalOverSecs=0,Attendance.Reports.summaryReport.totalDevSecs=0,Attendance.Reports.summaryReport.totalWorkedSecs=0,Attendance.Reports.summaryReport.totalOndutySecs=0,Attendance.Reports.summaryReport.totalLeaveSecs=0,Attendance.Reports.summaryReport.totalLOPSecs=0,Attendance.Reports.summaryReport.totalExpectedPaiddaysInSec=0,Attendance.Reports.summaryReport.totalWorkingdaysInSec=0,Attendance.Reports.summaryReport.totalHolidaydaysInSec=0,Attendance.Reports.summaryReport.totalWeekenddaysInSec=0,Attendance.Reports.summaryReport.totalPaidOffdaysInSec=0,Attendance.Reports.summaryReport.totalAbsentdaysInSec=0,Attendance.Reports.summaryReport.totalUnPaidOffdaysInSec=0,Attendance.Reports.summaryReport.totalPaiddaysInSec=0,Attendance.Reports.summaryReport.PP_PayOffDaysInSec=0,Attendance.Reports.summaryReport.PP_ExpectedPayDaysInSec=0,Attendance.Reports.summaryReport.totalPaidBreakInSecs=0,Attendance.Reports.summaryReport.totalUnPaidBreakInSecs=0,Attendance.Reports.summaryReport.totalPermissionInSecs=0,Attendance.Reports.summaryReport.totStatWkndOT=0,Attendance.Reports.summaryReport.totNonStatWkndOT=0,Attendance.Reports.summaryReport.totalStatWknd=0,Attendance.Reports.summaryReport.totalNonStatWknd=0,Attendance.Reports.summaryReport.totalRegWknd=0,Attendance.Reports.summaryReport.totRegWorkHrs=0,Attendance.Reports.summaryReport.totLNWorkHrs=0,Attendance.Reports.summaryReport.totWkndRegOT=0,Attendance.Reports.summaryReport.totWkndLNOT=0,Attendance.Reports.summaryReport.totHolidayRegOT=0,Attendance.Reports.summaryReport.totHolidayLNOT=0,Attendance.Reports.summaryReport.totRegRegOT=0,Attendance.Reports.summaryReport.totRegLNOT=0,Attendance.Reports.summaryReport.totStatWkndRegOT=0,Attendance.Reports.summaryReport.totStatWkndLNOT=0,Attendance.Reports.summaryReport.totNonStatWkndRegOT=0,Attendance.Reports.summaryReport.totNonStatWkndLNOT=0,Attendance.Reports.summaryReport.totWkndOT=0,Attendance.Reports.summaryReport.totHolidayOT=0,Attendance.Reports.summaryReport.totRegOT=0,Attendance.Reports.summaryReport.totRegWeekendHours=0,Attendance.Reports.summaryReport.worked=0,Attendance.Reports.summaryReport.paidOff=0,Attendance.Reports.summaryReport.paid=0,Attendance.Reports.summaryReport.expected=0,Attendance.Reports.summaryReport.ot=0,Attendance.Reports.summaryReport.unpaidOff=0,Attendance.Reports.summaryReport.paidBreak=0,Attendance.Reports.summaryReport.unpaidBreak=0,Attendance.Reports.summaryReport.permission=0,Attendance.Reports.summaryReport.totalCumulativeOvertime=0,Attendance.Reports.summaryReport.showOTDT=response.showOverDevTime,Attendance.Reports.summaryReport.erecnoList=response.report.erecnoList,Attendance.Reports.summaryReport.sumEnoListAll=response.report.erecnoList,Attendance.Reports.summaryReport.sReport=response.report,Attendance.Reports.summaryReport.sReportLength=response.report.erecnoList.length,Attendance.Reports.summaryReport.sumReport=response.report,"myReports"==ZPLite.Reports.selectedTab?Attendance.Reports.myReportData.summaryReport=Attendance.Reports.summaryReport.sumReport:"teamReports"==ZPLite.Reports.selectedTab?Attendance.Reports.teamReportData.summaryReport=Attendance.Reports.summaryReport.sumReport:Attendance.Reports.adminReportData.summaryReport=Attendance.Reports.summaryReport.sumReport,layout.find("#attendanceSummaryReport").removeClass("DN"),response.dispMonth?Layout.Page.container.find("#dateNavigatorText").html(response.dispMonth):Layout.Page.container.find("#dateNavigatorText").html(Attendance.datesInHeader(response.fdate,response.tdate)),Attendance.Reports.summaryReport.construct(!1),ZPLite.Firescroll.init(layout.find("#attendanceSummaryReport"),Attendance.Reports.summaryReport.Firescroll.mode,{maxFetchLimit:50,callback:Attendance.Reports.summaryReport.Firescroll.loadMoreData}),ZPLite.Firescroll.setFetchedCount(Attendance.Reports.summaryReport.Firescroll.mode,response.report.erecnoList.length))})},construct:function(scroll){var repTable,data,enoList,layout=Layout.Page.container,isHoursSumReport=Attendance.Reports.summaryReport.isHoursView(),isSimpleRep=Layout.Page.container.find("#filterDiv").find('[name="reportTypeFilter"]').find("input").is(":checked");isSimpleRep?(repTable=layout.find("#ZPAtt_simpSumDayRepBody"),layout.find("#attendanceSummaryReportDiv").hide(),layout.find("#attendanceSummarySimpleReportDiv").show(),layout.find("#ZPAtt_attSumReportTableBody").children().remove(),isHoursSumReport?(layout.find("#ZPAtt_simpSumHourRepHeader").show(),layout.find("#ZPAtt_simpSumDayRepHeader").hide()):(layout.find("#ZPAtt_simpSumHourRepHeader").hide(),layout.find("#ZPAtt_simpSumDayRepHeader").show())):(repTable=layout.find("#ZPAtt_attSumReportTableBody"),layout.find("#attendanceSummarySimpleReportDiv").hide(),layout.find("#attendanceSummaryReportDiv").show(),layout.find("#ZPAtt_simpSumDayRepBody").children().remove(),isHoursSumReport?(layout.find("#ZPAtt_attSumHourReportTableHeader").show(),layout.find("#ZPAtt_attSumDayReportTableHeader").hide()):(layout.find("#ZPAtt_attSumDayReportTableHeader").show(),layout.find("#ZPAtt_attSumHourReportTableHeader").hide())),scroll?(data=Attendance.Reports.summaryReport.sReport,enoList=Attendance.Reports.summaryReport.erecnoList):(repTable.empty(),data=Attendance.Reports.summaryReport.sumReport,enoList=Attendance.Reports.summaryReport.sumEnoListAll);if(isHoursSumReport||isSimpleRep)if(isSimpleRep)if(Layout.Page.container.find(".tbl_fxdtd").css("top",Layout.Page.container.find(".tbl_hdfxd").height()),isHoursSumReport){Layout.Page.container.find("#ZPAtt_simpleSumReportPaidBrk").addClass("DN"),Layout.Page.container.find("#ZPAtt_simpleSumReportUnPaidBrk").addClass("DN"),data.isBreakConfigured&&(data.isPaidBrkDispNeed&&data.isViewAllowedForPaidBrkHrs&&Layout.Page.container.find("#ZPAtt_simpleSumReportPaidBrk").removeClass("DN"),data.isUnpaidBrkDispNeed&&data.isViewAllowedForUnPaidBrkHrs&&Layout.Page.container.find("#ZPAtt_simpleSumReportUnPaidBrk").removeClass("DN"));var worked=0,paidOff=0,paid=0,expected=0,ot=0,unpaidOff=0,paidBreak=0,unpaidBreak=0,permission=0;for(var e in enoList){rowclass="ZPLRow",dateofexit="";(empInfo=data[enoList[e]]).doe&&(dateofexit="( "+ZPI18N.getString("zp.exitdate")+" - "+empInfo.doe+")");tr="<tr class='"+rowclass+"' id='"+empInfo.eno+"report'>",empId=empInfo.empId,empName=empInfo.name;tr+='<td width="300" class="P_AM"><div class="ZPusrName W500"><img class="FL Usrimg" src="'+empInfo.empPhoto+'">',tr+='<span class="usrDts" onclick=Attendance.Reports.getUserReportFromSummary("'+empInfo.eno+'",this,'+empInfo.empStat+') data-toggle="tooltip" data-placement="top" data-container="body" title="'+empId+" "+empName+'"><span class="usrEmpID">'+empId+" </span> "+empName+'</span><em class="ZPsecName">'+dateofexit+"</em></div></td>",Layout.Page.container.find("#ZPAtt_simpSumHourReport_showHidePayableHours_paidOff").hide(),Layout.Page.container.find("#ZPAtt_simpSumHourReport_showHidePayableHours").hide(),data.isPaidOffAvail?(tr+="<td>"+Attendance.disHours(empInfo.totalWorkedDaysInSecs/60)+"</td>",worked+=empInfo.totalWorkedDaysInSecs,tr+="<td>"+Attendance.disHours(empInfo.pp_PaidOffDaysInsecs/60)+"</td>",paidOff+=empInfo.pp_PaidOffDaysInsecs,data.isViewAllowedForPayableHrs&&(Layout.Page.container.find("#ZPAtt_simpSumHourReport_showHidePayableHours_paidOff").show(),tr+="<td>"+Attendance.disHours(empInfo.totalPayDaysInSecs/60)+"</td>",paid+=empInfo.totalPayDaysInSecs)):data.isViewAllowedForPayableHrs&&(Layout.Page.container.find("#ZPAtt_simpSumHourReport_showHidePayableHours").show(),tr+="<td>"+Attendance.disHours(empInfo.totalWorkedDaysInSecs/60)+"</td>",worked+=empInfo.totalWorkedDaysInSecs),tr+="<td>"+Attendance.disHours(empInfo.pp_expectedPaidDaysInSecs/60)+"</td>",expected+=empInfo.pp_expectedPaidDaysInSecs,0===Attendance.Reports.summaryReport.showOTDT&&(tr+='<td width="100">'+Attendance.disHours(empInfo.overTime_tsecs/60)+"</td>",ot+=empInfo.overTime_tsecs),tr+="<td>"+Attendance.disHours(empInfo.totalUnPaidOffDaysInSecs/60)+"</td>",unpaidOff+=empInfo.totalUnPaidOffDaysInSecs,data.isBreakConfigured&&(tr+="<td"+(data.isPaidBrkDispNeed&&data.isViewAllowedForPaidBrkHrs?"":' class = "DN"')+">"+empInfo.totalPaidBreakHours+"</td>",paidBreak+=empInfo.totalPaidBreakInSecs,tr+="<td"+(data.isUnpaidBrkDispNeed&&data.isViewAllowedForUnPaidBrkHrs?"":' class = "DN"')+">"+empInfo.totalUnPaidBreakHours+"</td>",unpaidBreak+=empInfo.totalUnPaidBreakInSecs),data.isPermissionConfigured&&(tr+="<td>"+empInfo.totalPermissionHours+"</td>",permission+=empInfo.totalPermissionInSecs),tr+="</tr>",repTable.append(tr)}if(Attendance.Reports.summaryReport.worked+=worked,Attendance.Reports.summaryReport.paidOff+=paidOff,Attendance.Reports.summaryReport.paid+=paid,Attendance.Reports.summaryReport.expected+=expected,Attendance.Reports.summaryReport.ot+=ot,Attendance.Reports.summaryReport.unpaidOff+=unpaidOff,Attendance.Reports.summaryReport.paidBreak+=paidBreak,Attendance.Reports.summaryReport.unpaidBreak+=unpaidBreak,Attendance.Reports.summaryReport.permission+=permission,Attendance.Reports.summaryReport.sReportLength<50&&!repTable.find("#ZPAtt_simpleSumReporttotal").is(":visible")&&0!==repTable.children().length){var totTr='<tr class="ZPLRow" style="font-family: " id="ZPAtt_simpleSumReporttotal">';totTr+='<td width="300" class="P_AM"><div>'+ZPI18N.getString("zp.total")+"</div></td>",data.isPaidOffAvail?(totTr+="<td>"+Attendance.disHours(Attendance.Reports.summaryReport.worked/60)+"</td>",totTr+="<td>"+Attendance.disHours(Attendance.Reports.summaryReport.paidOff/60)+"</td>",data.isViewAllowedForPayableHrs&&(totTr+="<td>"+Attendance.disHours(Attendance.Reports.summaryReport.paid/60)+"</td>")):data.isViewAllowedForPayableHrs&&(totTr+="<td>"+Attendance.disHours(Attendance.Reports.summaryReport.worked/60)+"</td>"),totTr+="<td>"+Attendance.disHours(Attendance.Reports.summaryReport.expected/60)+"</td>",0===Attendance.Reports.summaryReport.showOTDT&&(totTr+='<td width="100">'+Attendance.disHours(Attendance.Reports.summaryReport.ot/60)+"</td>"),totTr+="<td>"+Attendance.disHours(Attendance.Reports.summaryReport.unpaidOff/60)+"</td>",data.isBreakConfigured&&(totTr+="<td"+(data.isPaidBrkDispNeed&&data.isViewAllowedForPaidBrkHrs?"":' class = "DN"')+">"+Attendance.disHours(Attendance.Reports.summaryReport.paidBreak/60)+"</td>",totTr+="<td"+(data.isUnpaidBrkDispNeed&&data.isViewAllowedForUnPaidBrkHrs?"":' class = "DN"')+">"+Attendance.disHours(Attendance.Reports.summaryReport.unpaidBreak/60)+"</td>"),data.isPermissionConfigured&&(totTr+="<td>"+Attendance.disHours(Attendance.Reports.summaryReport.permission/60)+"</td>"),totTr+="</tr>",repTable.append(totTr)}}else for(var e in enoList){rowclass="ZPLRow",dateofexit="";(empInfo=data[enoList[e]]).doe&&(dateofexit="( "+ZPI18N.getString("zp.exitdate")+" - "+empInfo.doe+")");var tr="<tr class='"+rowclass+"' id='"+empInfo.eno+"report'>";empId=empInfo.empId,empName=empInfo.name;tr+='<td width="300" class="P_AM"><div class="ZPusrName W500"><img class="FL Usrimg" src="'+empInfo.empPhoto+'">',tr+='<span class="usrDts" onclick=Attendance.Reports.getUserReportFromSummary("'+empInfo.eno+'",this,'+empInfo.empStat+') data-toggle="tooltip" data-placement="top" data-container="body" title="'+empId+" "+empName+'"><span class="usrEmpID">'+empId+" </span> "+empName+'</span><em class="ZPsecName">'+dateofexit+"</em></div></td>",Layout.Page.container.find("#ZPAtt_simpSumDayReport_showHidePayableDays_paidOff").hide(),Layout.Page.container.find("#ZPAtt_simpSumDayReport_showHidePayableDays").hide(),data.isPaidOffAvail?(tr+="<td>"+empInfo.totalWorkedDays_count+"</td>",tr+="<td>"+empInfo.pp_PaidOffDays+"</td>",data.isViewAllowedForPayableHrs&&(Layout.Page.container.find("#ZPAtt_simpSumDayReport_showHidePayableDays_paidOff").show(),tr+="<td>"+empInfo.totalPaidDays_count+"</td>")):data.isViewAllowedForPayableHrs&&(Layout.Page.container.find("#ZPAtt_simpSumDayReport_showHidePayableDays").show(),tr+="<td>"+empInfo.totalWorkedDays_count+"</td>"),tr+="<td>"+empInfo.pp_expectedPaidDays+"</td>",0===Attendance.Reports.summaryReport.showOTDT&&(tr+='<td width="100">'+Attendance.disHours(empInfo.overTime_tsecs/60)+"</td>"),tr+="<td>"+empInfo.totalUnPaidOffDays_count+"</td></tr>",repTable.append(tr)}else{var tworkingsec=0,tdevsecs=0,toversecs=0,totalCumulativeOvertime=0,ondutysecs=0,totalworkedsecs=0,leavesecs=0,lopSecs=0,totalWorkedHours=0,totExpectedPaiddaysInSec=0,totWorkingdaysInSec=0,totHolidaydaysInSec=0,totWeekenddaysInSec=0,totPaidOffdaysInSec=0,totAbsentdaysInSec=0,totUnPaidOffdaysInSec=0,totPaiddaysInSec=0,PP_PayDaysInSec=0,PP_ExpectedPayDaysInSec=0,totalPaidBreakInSecs=0,totalUnPaidBreakInSecs=0,totalPermissionInSecs=0,totalRegWknd=0,totalStatWknd=0,totalNonStatWknd=0,totRegWorkHrs=0,totLNWorkHrs=0,totWkndOT=0,totWkndRegOT=0,totWkndLNOT=0,totHolidayOT=0,totHolidayRegOT=0,totHolidayLNOT=0,totRegOT=0,totRegRegOT=0,totRegLNOT=0,totStatWkndOT=0,totStatWkndRegOT=0,totStatWkndLNOT=0,totNonStatWkndOT=0,totNonStatWkndRegOT=0,totNonStatWkndLNOT=0,totRegWeekendHours=0;for(var i in layout.find("#ZPAtt_showHidePayableHours").hide(),data.isViewAllowedForPayableHrs&&layout.find("#ZPAtt_showHidePayableHours").show(),Layout.Page.container.find("#ZPAtt_showHidePaidBreakSumReport").addClass("DN"),Layout.Page.container.find("#ZPAtt_showHideUnpaidBreakSumReport").addClass("DN"),data.isBreakConfigured&&(data.isPaidBrkDispNeed&&data.isViewAllowedForPaidBrkHrs&&Layout.Page.container.find("#ZPAtt_showHidePaidBreakSumReport").removeClass("DN"),data.isUnpaidBrkDispNeed&&data.isViewAllowedForUnPaidBrkHrs&&Layout.Page.container.find("#ZPAtt_showHideUnpaidBreakSumReport").removeClass("DN")),enoList){var rowclass="ZPLRow",dateofexit="";(empInfo=data[enoList[i]]).doe&&(dateofexit="( "+ZPI18N.getString("zp.exitdate")+" - "+empInfo.doe+")");var tr0="<tr class="+rowclass+" id='"+empInfo.eno+"report'>";tr0+="<td class='colM1_sticky' style='max-width:300px;width:300px;'><img class='FL' src="+empInfo.empPhoto+">";var empId=empInfo.empId,empName=empInfo.name;if(tr0+="<div class='ZPusrName'><span class='ellipsis W500 CP' onclick=Attendance.Reports.getUserReportFromSummary('"+empInfo.eno+"',this,"+empInfo.empStat+") data-toggle='tooltip' data-placement='top' data-container='body' title='"+empId+" "+empName+"'><b>"+empId+"</b>"+empName+"</span><em class='ZPsecName'>"+dateofexit+"</em></div></td>",tr0+="<td class='text-center'><div class='W80'>"+Attendance.disHours(empInfo.tsecs/60)+"</div></td>",tr0+="<td class='text-center TBrdr'><div class='W80'>"+Attendance.disHours(empInfo.pp_expectedPaidDaysInSecs/60)+"</div></td>",data.isViewAllowedForPayableHrs&&(tr0+="<td class='P0I TBrdr'><table class='table i_table'><tbody><tr><td class='text-center' width='33.33%'><div class='W120'>"+Attendance.disHours(empInfo.totalWorkedDaysInSecs/60)+"</div></td>",tr0+="<td class='text-center' width='33.33%'><div class='W60'>"+Attendance.disHours(empInfo.pp_PaidOffDaysInsecs/60)+"</div></td><td class='text-center' width='33.33%'>",tr0+="<div class='W60'>"+Attendance.disHours(empInfo.totalPayDaysInSecs/60)+"</div></td></tr></tbody></table></td>"),tr0+="<td class='text-center TBrdr'><div class='W120'>"+Attendance.disHours(empInfo.exp_workingDaysInSecs/60)+"</div></td>",tr0+="<td class='P0I TBrdr'><table class='table i_table'><tbody><tr class='wrktbl'><td class='text-center' width='33.33%'><div class='W60'>"+Attendance.disHours(empInfo.workingHours_tsecs/60)+"</div></td>",tr0+="<td class='text-center' width='33.33%'><div class='W60'>"+empInfo.onduty_hours+"</div></td><td class='text-center' width='33.33%'><div class='W60'>",tr0+=Attendance.disHours(empInfo.totalWorkedDaysInSecs/60)+"</div></td></tr></tbody></table></td>",data.isLateNightTrackingEnabledForOrg&&(tr0+="<td class='P0I TBrdr'><table class='table i_table'><tbody><tr class='wrktbl'><td class='text-center' width='33.33%'><div class='W60'>"+Attendance.Reports.summaryReport.getSumRepLateNightHoursVal(empInfo,"regularWorkingHours")+"</div></td>",tr0+="<td class='text-center' width='33.33%'><div class='W60'>"+Attendance.Reports.summaryReport.getSumRepLateNightHoursVal(empInfo,"lateNightWorkingHours")+"</div></td><td class='text-center' width='33.33%'><div class='W60'>",tr0+=Attendance.disHours(empInfo.workingHours_tsecs/60)+"</div></td></tr></tbody></table></td>"),tr0+="<td class='P0I TBrdr'><table class='table i_table'><tbody><tr class='potbl'><td class='text-center' width='25%'><div class='W60'>"+empInfo.leave_hours+"</div></td>",tr0+="<td class='text-center' width='25%'><div class='W60'>"+Attendance.disHours(empInfo.totalHolidayDaysInSecs/60)+"</div></td><td class='text-center' width='25%'><div class='W60'>",tr0+=Attendance.disHours(empInfo.totalWeekendDaysInSecs/60)+"</div></td><td class='text-center' width='25%'><div class='W60'>"+Attendance.disHours(empInfo.totalPaidOffDaysInSecs/60)+"</div></td></tr></tbody></table></td>",tr0+="<td class='P0I TBrdr'><table class='table i_table'><tbody><tr class='upotbl'><td class='text-center' width='33.33%'><div class='W60'>"+empInfo.lop_leave_hours+"</div></td>",tr0+="<td class='text-center' width='33.33%'><div class='W60'>"+Attendance.disHours(empInfo.totalAbsentDaysInSecs/60)+"</div></td><td class='text-center' width='33.33%'><div class='W60'>",tr0+=Attendance.disHours(empInfo.totalUnPaidOffDaysInSecs/60)+"</div></td></tr></tbody></table></td>",data.isStatConfigForOrg){nonStatCnt="-",statCnt="-",totalWkndOffCnt=regWkndCnt=empInfo.regWeekendHours;regWkndCnt=Attendance.disHours(regWkndCnt/60),empInfo.isStatWeekendConfig&&(totalWkndOffCnt+=(nonStatCnt=empInfo.totalNonStatWkndHrs)+(statCnt=empInfo.totalStatWkndHrs),statCnt=Attendance.disHours(statCnt/60),nonStatCnt=Attendance.disHours(nonStatCnt/60)),tr0+='<td class="P0I TBrdr"><table class="table i_table"><tbody><tr class="upotbl">',tr0+='<td class="text-center" width="25%"><div class="W60">'+statCnt+"</div></td>",tr0+='<td class="text-center" width="25%"><div class="W60">'+nonStatCnt+"</div></td>",tr0+='<td class="text-center" width="25%"><div class="W60">'+regWkndCnt+"</div></td>",tr0+='<td class="text-center" width="25%"><div class="W60">'+Attendance.disHours(totalWkndOffCnt/60)+"</div></td>",tr0+="</tr></tbody></table></td>"}if(0===Attendance.Reports.summaryReport.showOTDT){tr0+="<td class='P0I TBrdr'><table class='table i_table'><tbody><tr>";var widthForOverTime="25%";if(data.isStatConfigForOrg&&(tr0+="<td class='text-center grn' width='"+(widthForOverTime="16.66%")+"'><div class='W60'>"+Attendance.Reports.summaryReport.getSumRepStatWkndHoursVal(empInfo,"statWeekend_ot")+"</div></td>",tr0+="<td class='text-center grn' width='"+widthForOverTime+"'><div class='W60'>"+Attendance.Reports.summaryReport.getSumRepStatWkndHoursVal(empInfo,"nonStatWeekend_ot")+"</div></td>"),tr0+="<td class='text-center grn' width='"+widthForOverTime+"'><div class='W60'>"+Attendance.disHours(empInfo.weekend_ot/60)+"</div></td>",tr0+="<td class='text-center grn' width='"+widthForOverTime+"'><div class='W60'>"+Attendance.disHours(empInfo.holiday_ot/60)+"</div></td><td class='text-center grn' width='"+widthForOverTime+"'><div class='W60'>",tr0+=Attendance.disHours(empInfo.nonWkndHoliday_ot/60)+"</div></td><td class='text-center grn' width='"+widthForOverTime+"'><div class='W60'>"+Attendance.disHours(empInfo.overTime_tsecs/60)+"</div></td></tr></tbody></table></td>",data.isLateNightTrackingEnabledForOrg){if(data.isStatConfigForOrg){var statWkndRegOTStr="-",statWkndLNOTStr="-",statWkndOTStr=Attendance.Reports.summaryReport.getSumRepStatWkndHoursVal(empInfo,"statWeekend_ot"),nonStatWkndRegOTStr="-",nonStatWkndLNOTStr="-",nonStatWkndOTStr=Attendance.Reports.summaryReport.getSumRepStatWkndHoursVal(empInfo,"nonStatWeekend_ot");empInfo.isStatWeekendConfig&&(statWkndRegOTStr=Attendance.Reports.summaryReport.getSumRepLateNightHoursVal(empInfo,"statWeekend_reg_ot"),statWkndLNOTStr=Attendance.Reports.summaryReport.getSumRepLateNightHoursVal(empInfo,"statWeekend_lateNight_ot"),nonStatWkndRegOTStr=Attendance.Reports.summaryReport.getSumRepLateNightHoursVal(empInfo,"nonStatWeekend_reg_ot"),nonStatWkndLNOTStr=Attendance.Reports.summaryReport.getSumRepLateNightHoursVal(empInfo,"nonStatWeekend_lateNight_ot")),tr0+="<td class='P0I TBrdr'><table class='table i_table'><tbody><tr class='wrktbl'><td class='text-center' width='33.33%'><div class='W60'>"+statWkndRegOTStr+"</div></td>",tr0+="<td class='text-center' width='33.33%'><div class='W60'>"+statWkndLNOTStr+"</div></td><td class='text-center' width='33.33%'><div class='W60'>",tr0+=statWkndOTStr+"</div></td></tr></tbody></table></td>",tr0+="<td class='P0I TBrdr'><table class='table i_table'><tbody><tr class='wrktbl'><td class='text-center' width='33.33%'><div class='W60'>"+nonStatWkndRegOTStr+"</div></td>",tr0+="<td class='text-center' width='33.33%'><div class='W60'>"+nonStatWkndLNOTStr+"</div></td><td class='text-center' width='33.33%'><div class='W60'>",tr0+=nonStatWkndOTStr+"</div></td></tr></tbody></table></td>"}tr0+="<td class='P0I TBrdr'><table class='table i_table'><tbody><tr class='wrktbl'><td class='text-center' width='33.33%'><div class='W60'>"+Attendance.Reports.summaryReport.getSumRepLateNightHoursVal(empInfo,"weekend_reg_ot")+"</div></td>",tr0+="<td class='text-center' width='33.33%'><div class='W60'>"+Attendance.Reports.summaryReport.getSumRepLateNightHoursVal(empInfo,"weekend_lateNight_ot")+"</div></td><td class='text-center' width='33.33%'><div class='W60'>",tr0+=Attendance.disHours(empInfo.weekend_ot/60)+"</div></td></tr></tbody></table></td>",tr0+="<td class='P0I TBrdr'><table class='table i_table'><tbody><tr class='wrktbl'><td class='text-center' width='33.33%'><div class='W60'>"+Attendance.Reports.summaryReport.getSumRepLateNightHoursVal(empInfo,"holiday_reg_ot")+"</div></td>",tr0+="<td class='text-center' width='33.33%'><div class='W60'>"+Attendance.Reports.summaryReport.getSumRepLateNightHoursVal(empInfo,"holiday_lateNight_ot")+"</div></td><td class='text-center' width='33.33%'><div class='W60'>",tr0+=Attendance.disHours(empInfo.holiday_ot/60)+"</div></td></tr></tbody></table></td>",tr0+="<td class='P0I TBrdr'><table class='table i_table'><tbody><tr class='wrktbl'><td class='text-center' width='33.33%'><div class='W60'>"+Attendance.Reports.summaryReport.getSumRepLateNightHoursVal(empInfo,"nonWkndHoliday_reg_ot")+"</div></td>",tr0+="<td class='text-center' width='33.33%'><div class='W60'>"+Attendance.Reports.summaryReport.getSumRepLateNightHoursVal(empInfo,"nonWkndHoliday_lateNight_ot")+"</div></td><td class='text-center' width='33.33%'><div class='W60'>",tr0+=Attendance.disHours(empInfo.nonWkndHoliday_ot/60)+"</div></td></tr></tbody></table></td>"}tr0+="<td class='P0I TBrdr'><table class='table i_table'><tbody><tr>",tr0+="<td class='text-center grn' width='"+widthForOverTime+"'><div class='W60'>"+Attendance.disHours(empInfo.overTime_tsecs/60)+"</div></td>",tr0+="<td class='text-center red' width='"+widthForOverTime+"'><div class='W60'>"+Attendance.disHours(empInfo.totalAbsentDaysInSecs/60)+"</div></td>",tr0+="<td class='text-center"+(empInfo.cumulativeOvertime<0?" red' ":" grn' ")+"width='"+widthForOverTime+"'><div class='W60'>"+Attendance.disHours(Math.abs(empInfo.cumulativeOvertime)/60)+"</div></td>",tr0+="</tr></tbody></table></td>"}data.isBreakConfigured&&(data.isPaidBrkDispNeed&&data.isViewAllowedForPaidBrkHrs&&(tr0+="<td class='text-center TBrdr'><div class='W60'>"+empInfo.totalPaidBreakHours+"</div></td>"),data.isUnpaidBrkDispNeed&&data.isViewAllowedForUnPaidBrkHrs&&(tr0+="<td class='text-center TBrdr'><div class='W60'>"+empInfo.totalUnPaidBreakHours+"</div></td>")),data.isPermissionConfigured&&(tr0+="<td class='text-center TBrdr'><div class='W60'>"+empInfo.totalPermissionHours+"</div></td>"),tr0+="</tr>",repTable.append(tr0),empInfo.tsecs>0&&Number(empInfo.tsecs),tworkingsec+=empInfo.workingHours_tsecs,totalWorkedHours+=empInfo.tsecs,tdevsecs+=empInfo.devTime_tsecs,toversecs+=empInfo.overTime_tsecs,ondutysecs+=empInfo.ondutysecs,totalworkedsecs+=empInfo.totalWorkedDaysInSecs,leavesecs+=empInfo.leavesecs,lopSecs+=empInfo.lop_leave_secs,totExpectedPaiddaysInSec+=empInfo.pp_expectedPaidDaysInSSecs,totWorkingdaysInSec+=empInfo.exp_workingDaysInSecs,totHolidaydaysInSec+=empInfo.totalHolidayDaysInSecs,totWeekenddaysInSec+=empInfo.totalWeekendDaysInSecs,totPaidOffdaysInSec+=empInfo.totalPaidOffDaysInSecs,totAbsentdaysInSec+=empInfo.totalAbsentDaysInSecs,totUnPaidOffdaysInSec+=empInfo.totalUnPaidOffDaysInSecs,data.isViewAllowedForPayableHrs&&(totPaiddaysInSec+=empInfo.totalPayDaysInSecs),PP_PayDaysInSec+=empInfo.pp_PaidOffDaysInsecs,PP_ExpectedPayDaysInSec+=empInfo.pp_expectedPaidDaysInSecs,data.isViewAllowedForPaidBrkHrs&&(totalPaidBreakInSecs+=empInfo.totalPaidBreakInSecs),data.isViewAllowedForPaidBrkHrs&&(totalUnPaidBreakInSecs+=empInfo.totalUnPaidBreakInSecs),totalPermissionInSecs+=empInfo.totalPermissionInSecs,totalRegWknd+=empInfo.totalWeekendDaysInSecs,totRegWeekendHours+=empInfo.regWeekendHours,totalCumulativeOvertime+=empInfo.cumulativeOvertime,data.isStatConfigForOrg&&empInfo.isStatWeekendConfig&&(totStatWkndOT+=empInfo.statWeekend_ot,totNonStatWkndOT+=empInfo.nonStatWeekend_ot,totalStatWknd+=empInfo.totalStatWkndHrs,totalNonStatWknd+=empInfo.totalNonStatWkndHrs),data.isLateNightTrackingEnabledForOrg&&empInfo.isLateNightTrackingEnabled&&(totRegWorkHrs+=empInfo.regularWorkingHours,totLNWorkHrs+=empInfo.lateNightWorkingHours,totWkndRegOT+=empInfo.weekend_reg_ot,totWkndLNOT+=empInfo.weekend_lateNight_ot,totHolidayRegOT+=empInfo.holiday_reg_ot,totHolidayLNOT+=empInfo.holiday_lateNight_ot,totRegRegOT+=empInfo.nonWkndHoliday_reg_ot,totRegLNOT+=empInfo.nonWkndHoliday_lateNight_ot,data.isStatConfigForOrg&&empInfo.isStatWeekendConfig&&(totStatWkndRegOT+=empInfo.statWeekend_reg_ot,totStatWkndLNOT+=empInfo.statWeekend_lateNight_ot,totNonStatWkndRegOT+=empInfo.nonStatWeekend_reg_ot,totNonStatWkndLNOT+=empInfo.nonStatWeekend_lateNight_ot)),totWkndOT+=empInfo.weekend_ot,totHolidayOT+=empInfo.holiday_ot,totRegOT+=empInfo.nonWkndHoliday_ot}if(Attendance.Reports.summaryReport.totalWorkedHours+=totalWorkedHours,Attendance.Reports.summaryReport.totalCountwSecs+=tworkingsec,Attendance.Reports.summaryReport.totalOverSecs+=toversecs,Attendance.Reports.summaryReport.totalDevSecs+=tdevsecs,Attendance.Reports.summaryReport.totalWorkedSecs+=totalworkedsecs,Attendance.Reports.summaryReport.totalOndutySecs+=ondutysecs,Attendance.Reports.summaryReport.totalLeaveSecs+=leavesecs,Attendance.Reports.summaryReport.totalLOPSecs+=lopSecs,Attendance.Reports.summaryReport.totalExpectedPaiddaysInSec+=totExpectedPaiddaysInSec,Attendance.Reports.summaryReport.totalWorkingdaysInSec+=totWorkingdaysInSec,Attendance.Reports.summaryReport.totalHolidaydaysInSec+=totHolidaydaysInSec,Attendance.Reports.summaryReport.totalWeekenddaysInSec+=totWeekenddaysInSec,Attendance.Reports.summaryReport.totalPaidOffdaysInSec+=totPaidOffdaysInSec,Attendance.Reports.summaryReport.totalAbsentdaysInSec+=totAbsentdaysInSec,Attendance.Reports.summaryReport.totalUnPaidOffdaysInSec+=totUnPaidOffdaysInSec,Attendance.Reports.summaryReport.totalPaiddaysInSec+=totPaiddaysInSec,Attendance.Reports.summaryReport.PP_ExpectedPayDaysInSec+=PP_ExpectedPayDaysInSec,Attendance.Reports.summaryReport.PP_PayOffDaysInSec+=PP_PayDaysInSec,Attendance.Reports.summaryReport.totalPaidBreakInSecs+=totalPaidBreakInSecs,Attendance.Reports.summaryReport.totalUnPaidBreakInSecs+=totalUnPaidBreakInSecs,Attendance.Reports.summaryReport.totalPermissionInSecs+=totalPermissionInSecs,Attendance.Reports.summaryReport.totStatWkndOT+=totStatWkndOT,Attendance.Reports.summaryReport.totNonStatWkndOT+=totNonStatWkndOT,Attendance.Reports.summaryReport.totalStatWknd+=totalStatWknd,Attendance.Reports.summaryReport.totalNonStatWknd+=totalNonStatWknd,Attendance.Reports.summaryReport.totalRegWknd+=totalRegWknd,Attendance.Reports.summaryReport.totRegWorkHrs+=totRegWorkHrs,Attendance.Reports.summaryReport.totLNWorkHrs+=totLNWorkHrs,Attendance.Reports.summaryReport.totWkndRegOT+=totWkndRegOT,Attendance.Reports.summaryReport.totWkndLNOT+=totWkndLNOT,Attendance.Reports.summaryReport.totHolidayRegOT+=totHolidayRegOT,Attendance.Reports.summaryReport.totHolidayLNOT+=totHolidayLNOT,Attendance.Reports.summaryReport.totRegRegOT+=totRegRegOT,Attendance.Reports.summaryReport.totRegLNOT+=totRegLNOT,Attendance.Reports.summaryReport.totStatWkndRegOT+=totStatWkndRegOT,Attendance.Reports.summaryReport.totStatWkndLNOT+=totStatWkndLNOT,Attendance.Reports.summaryReport.totNonStatWkndRegOT+=totNonStatWkndRegOT,Attendance.Reports.summaryReport.totNonStatWkndLNOT+=totNonStatWkndLNOT,Attendance.Reports.summaryReport.totWkndOT+=totWkndOT,Attendance.Reports.summaryReport.totHolidayOT+=totHolidayOT,Attendance.Reports.summaryReport.totRegOT+=totRegOT,Attendance.Reports.summaryReport.totRegWeekendHours+=totRegWeekendHours,Attendance.Reports.summaryReport.totalCumulativeOvertime+=totalCumulativeOvertime,Attendance.Reports.summaryReport.sReportLength<50&&!repTable.find("#ZPAtt_sumReporttotal").is(":visible")&&0!==repTable.children().length){var tr1="<tr id='ZPAtt_sumReporttotal' class='ZPLRow' style='font-family: '>";if(tr1+="<td class='text-center TBrdr fxdtd colM1_sticky' style='max-width:300px;width:300px;'><div class='W80'>"+ZPI18N.getString("zp.total")+"</div></td>",tr1+="<td class='text-center TBrdr'><div class='W80'>"+Attendance.disHours(Attendance.Reports.summaryReport.totalWorkedHours/60)+"</div></td>",tr1+="<td class='text-center TBrdr'><div class='W80'>"+Attendance.disHours(Attendance.Reports.summaryReport.PP_ExpectedPayDaysInSec/60)+"</div></td>",data.isViewAllowedForPayableHrs&&(tr1+="<td class='P0I TBrdr'><table class='table i_table'><tbody><tr><td class='text-center' width='33.33%'><div class='W120'>"+Attendance.disHours(Attendance.Reports.summaryReport.totalWorkedSecs/60)+"</div></td>",tr1+="<td class='text-center' width='33.33%'><div class='W60'>"+Attendance.disHours(Attendance.Reports.summaryReport.PP_PayOffDaysInSec/60)+"</div></td><td class='text-center' width='33.33%'>",tr1+="<div class='W60'>"+Attendance.disHours(Attendance.Reports.summaryReport.totalPaiddaysInSec/60)+"</div></td></tr></tbody></table></td>"),tr1+="<td class='text-center TBrdr'><div class='W120'>"+Attendance.disHours(Attendance.Reports.summaryReport.totalWorkingdaysInSec/60)+"</div></td>",tr1+="<td class='P0I TBrdr'><table class='table i_table'><tbody><tr class='wrktbl'><td class='text-center' width='33.33%'><div class='W60'>"+Attendance.disHours(Attendance.Reports.summaryReport.totalCountwSecs/60)+"</div></td>",tr1+="<td class='text-center' width='33.33%'><div class='W60'>"+Attendance.disHours(Attendance.Reports.summaryReport.totalOndutySecs/60)+"</div></td><td class='text-center' width='33.33%'><div class='W60'>",tr1+=Attendance.disHours(Attendance.Reports.summaryReport.totalWorkedSecs/60)+"</div></td></tr></tbody></table></td>",data.isLateNightTrackingEnabledForOrg&&(tr1+="<td class='P0I TBrdr'><table class='table i_table'><tbody><tr class='wrktbl'><td class='text-center' width='33.33%'><div class='W60'>"+Attendance.disHours(Attendance.Reports.summaryReport.totRegWorkHrs/60)+"</div></td>",tr1+="<td class='text-center' width='33.33%'><div class='W60'>"+Attendance.disHours(Attendance.Reports.summaryReport.totLNWorkHrs/60)+"</div></td><td class='text-center' width='33.33%'><div class='W60'>",tr1+=Attendance.disHours(Attendance.Reports.summaryReport.totalCountwSecs/60)+"</div></td></tr></tbody></table></td>"),tr1+="<td class='P0I TBrdr'><table class='table i_table'><tbody><tr class='potbl'><td class='text-center' width='25%'><div class='W60'>"+Attendance.disHours(Attendance.Reports.summaryReport.totalLeaveSecs/60)+"</div></td>",tr1+="<td class='text-center' width='25%'><div class='W60'>"+Attendance.disHours(Attendance.Reports.summaryReport.totalHolidaydaysInSec/60)+"</div></td><td class='text-center' width='25%'><div class='W60'>",tr1+=Attendance.disHours(Attendance.Reports.summaryReport.totalWeekenddaysInSec/60)+"</div></td><td class='text-center' width='25%'><div class='W60'>"+Attendance.disHours(Attendance.Reports.summaryReport.totalPaidOffdaysInSec/60)+"</div></td></tr></tbody></table></td>",tr1+="<td class='P0I TBrdr'><table class='table i_table'><tbody><tr class='upotbl'><td class='text-center' width='33.33%'><div class='W60'>"+Attendance.disHours(Attendance.Reports.summaryReport.totalLOPSecs/60)+"</div></td>",tr1+="<td class='text-center' width='33.33%'><div class='W60'>"+Attendance.disHours(Attendance.Reports.summaryReport.totalAbsentdaysInSec/60)+"</div></td><td class='text-center' width='33.33%'><div class='W60'>",tr1+=Attendance.disHours(Attendance.Reports.summaryReport.totalUnPaidOffdaysInSec/60)+"</div></td></tr></tbody></table></td>",data.isStatConfigForOrg&&(tr1+='<td class="P0I TBrdr"><table class="table i_table"><tbody><tr class="upotbl">',tr1+='<td class="text-center" width="25%"><div class="W60">'+Attendance.disHours(Attendance.Reports.summaryReport.totalStatWknd/60)+"</div></td>",tr1+='<td class="text-center" width="25%"><div class="W60">'+Attendance.disHours(Attendance.Reports.summaryReport.totalNonStatWknd/60)+"</div></td>",tr1+='<td class="text-center" width="25%"><div class="W60">'+Attendance.disHours(Attendance.Reports.summaryReport.totRegWeekendHours/60)+"</div></td>",tr1+='<td class="text-center" width="25%"><div class="W60">'+Attendance.disHours((Attendance.Reports.summaryReport.totalStatWknd+Attendance.Reports.summaryReport.totalNonStatWknd+Attendance.Reports.summaryReport.totRegWeekendHours)/60)+"</div></td>",tr1+="</tr></tbody></table></td>"),0===Attendance.Reports.summaryReport.showOTDT){tr1+="<td class='P0I TBrdr'><table class='table i_table'><tbody><tr>";widthForOverTime="25%";data.isStatConfigForOrg&&(tr1+="<td class='text-center grn' width='"+(widthForOverTime="16.66%")+"'><div class='W60'>"+Attendance.disHours(Attendance.Reports.summaryReport.totStatWkndOT/60)+"</div></td>",tr1+="<td class='text-center grn' width='"+widthForOverTime+"'><div class='W60'>"+Attendance.disHours(Attendance.Reports.summaryReport.totNonStatWkndOT/60)+"</div></td>"),tr1+="<td class='text-center grn' width='"+widthForOverTime+"'><div class='W60'>"+Attendance.disHours(Attendance.Reports.summaryReport.totWkndOT/60)+"</div></td>",tr1+="<td class='text-center grn' width='"+widthForOverTime+"'><div class='W60'>"+Attendance.disHours(Attendance.Reports.summaryReport.totHolidayOT/60)+"</div></td><td class='text-center grn' width='"+widthForOverTime+"'><div class='W60'>",tr1+=Attendance.disHours(Attendance.Reports.summaryReport.totRegOT/60)+"</div></td><td class='text-center grn' width='"+widthForOverTime+"'><div class='W60'>"+Attendance.disHours(Attendance.Reports.summaryReport.totalOverSecs/60)+"</div></td></tr></tbody></table></td>",data.isLateNightTrackingEnabledForOrg&&(data.isStatConfigForOrg&&(tr1+="<td class='P0I TBrdr'><table class='table i_table'><tbody><tr class='wrktbl'><td class='text-center' width='33.33%'><div class='W60'>"+Attendance.disHours(Attendance.Reports.summaryReport.totStatWkndRegOT/60)+"</div></td>",tr1+="<td class='text-center' width='33.33%'><div class='W60'>"+Attendance.disHours(Attendance.Reports.summaryReport.totStatWkndLNOT/60)+"</div></td><td class='text-center' width='33.33%'><div class='W60'>",tr1+=Attendance.disHours(Attendance.Reports.summaryReport.totStatWkndOT/60)+"</div></td></tr></tbody></table></td>",tr1+="<td class='P0I TBrdr'><table class='table i_table'><tbody><tr class='wrktbl'><td class='text-center' width='33.33%'><div class='W60'>"+Attendance.disHours(Attendance.Reports.summaryReport.totNonStatWkndRegOT/60)+"</div></td>",tr1+="<td class='text-center' width='33.33%'><div class='W60'>"+Attendance.disHours(Attendance.Reports.summaryReport.totNonStatWkndLNOT/60)+"</div></td><td class='text-center' width='33.33%'><div class='W60'>",tr1+=Attendance.disHours(Attendance.Reports.summaryReport.totNonStatWkndOT/60)+"</div></td></tr></tbody></table></td>"),tr1+="<td class='P0I TBrdr'><table class='table i_table'><tbody><tr class='wrktbl'><td class='text-center' width='33.33%'><div class='W60'>"+Attendance.disHours(Attendance.Reports.summaryReport.totWkndRegOT/60)+"</div></td>",tr1+="<td class='text-center' width='33.33%'><div class='W60'>"+Attendance.disHours(Attendance.Reports.summaryReport.totWkndLNOT/60)+"</div></td><td class='text-center' width='33.33%'><div class='W60'>",tr1+=Attendance.disHours(Attendance.Reports.summaryReport.totWkndOT/60)+"</div></td></tr></tbody></table></td>",tr1+="<td class='P0I TBrdr'><table class='table i_table'><tbody><tr class='wrktbl'><td class='text-center' width='33.33%'><div class='W60'>"+Attendance.disHours(Attendance.Reports.summaryReport.totHolidayRegOT/60)+"</div></td>",tr1+="<td class='text-center' width='33.33%'><div class='W60'>"+Attendance.disHours(Attendance.Reports.summaryReport.totHolidayLNOT/60)+"</div></td><td class='text-center' width='33.33%'><div class='W60'>",tr1+=Attendance.disHours(Attendance.Reports.summaryReport.totHolidayOT/60)+"</div></td></tr></tbody></table></td>",tr1+="<td class='P0I TBrdr'><table class='table i_table'><tbody><tr class='wrktbl'><td class='text-center' width='33.33%'><div class='W60'>"+Attendance.disHours(Attendance.Reports.summaryReport.totRegRegOT/60)+"</div></td>",tr1+="<td class='text-center' width='33.33%'><div class='W60'>"+Attendance.disHours(Attendance.Reports.summaryReport.totRegLNOT/60)+"</div></td><td class='text-center' width='33.33%'><div class='W60'>",tr1+=Attendance.disHours(Attendance.Reports.summaryReport.totRegOT/60)+"</div></td></tr></tbody></table></td>"),tr1+="<td class='P0I TBrdr'><table class='table i_table'><tbody><tr>",tr1+="<td class='text-center grn' width='"+widthForOverTime+"'><div class='W60'>"+Attendance.disHours(Attendance.Reports.summaryReport.totalOverSecs/60)+"</div></td>",tr1+="<td class='text-center red' width='"+widthForOverTime+"'><div class='W60'>"+Attendance.disHours(Attendance.Reports.summaryReport.totalAbsentdaysInSec/60)+"</div></td>",tr1+="<td class='text-center"+(Attendance.Reports.summaryReport.totalCumulativeOvertime<0?" red' ":" grn' ")+"width='"+widthForOverTime+"'><div class='W60'>"+Attendance.disHours(Math.abs(Attendance.Reports.summaryReport.totalCumulativeOvertime)/60)+"</div></td>",tr1+="</tr></tbody></table></td>"}data.isBreakConfigured&&(data.isPaidBrkDispNeed&&data.isViewAllowedForPaidBrkHrs&&(tr1+="<td class='text-center TBrdr'><div class='W60'>"+Attendance.disHours(Attendance.Reports.summaryReport.totalPaidBreakInSecs/60)+"</div></td>"),data.isUnpaidBrkDispNeed&&data.isViewAllowedForUnPaidBrkHrs&&(tr1+="<td class='text-center TBrdr'><div class='W60'>"+Attendance.disHours(Attendance.Reports.summaryReport.totalUnPaidBreakInSecs/60)+"</div></td>")),data.isPermissionConfigured&&(tr1+="<td class='text-center TBrdr'><div class='W60'>"+Attendance.disHours(Attendance.Reports.summaryReport.totalPermissionInSecs/60)+"</div></td>"),tr1+="</tr>",repTable.append(tr1)}}else for(var e in enoList){var empInfo,rowclass="ZPLRow",dateofexit="";(empInfo=data[enoList[e]]).doe&&(dateofexit="( "+ZPI18N.getString("zp.exitdate")+" - "+empInfo.doe+")"),layout.find("#ZPAtt_showHidePayableDays").hide(),data.isViewAllowedForPayableHrs&&layout.find("#ZPAtt_showHidePayableDays").show();var tr="<tr class='"+rowclass+"' id='"+empInfo.eno+"report'>";tr+="<td class='colM1_sticky' style='max-width:300px;width:300px;'><img class='FL' src="+empInfo.empPhoto+">";var empId=empInfo.empId,empName=empInfo.name;if(tr+="<div class='ZPusrName '><span class='ellipsis W500 CP' onclick=Attendance.Reports.getUserReportFromSummary('"+empInfo.eno+"',this,"+empInfo.empStat+") data-toggle='tooltip' data-placement='top' data-container='body' title='"+empId+" "+empName+"'><b>"+empId+"</b>"+empName+"</span><em class='ZPsecName'>"+dateofexit+"</em></div></td>",tr+="<td class='text-center'><div class='W80'>"+empInfo.pp_expectedPaidDays+"</div></td>",data.isViewAllowedForPayableHrs&&(tr+="<td class='P0I TBrdr'><table class='table i_table'><tbody><tr><td class='text-center' width='33.33%'><div class='W120'>"+empInfo.totalWorkedDays_count+"</div></td>",tr+="<td class='text-center' width='33.33%'><div class='W60'>"+empInfo.pp_PaidOffDays+"</div></td><td class='text-center' width='33.33%'>",tr+="<div class='W60'>"+empInfo.totalPaidDays_count+"</div></td></tr></tbody></table></td>"),tr+="<td class='text-center TBrdr'><div class='W120'>"+empInfo.exp_workingDays_count+"</div></td>",tr+="<td class='P0I TBrdr'><table class='table i_table'><tbody><tr class='wrktbl'><td class='text-center' width='33.33%'><div class='W60'>"+empInfo.present_count+"</div></td>",tr+="<td class='text-center' width='33.33%'><div class='W60'>"+empInfo.onduty_count+"</div></td><td class='text-center' width='33.33%'><div class='W60'>",tr+=empInfo.totalWorkedDays_count+"</div></td></tr></tbody></table></td>",tr+="<td class='P0I TBrdr'><table class='table i_table'><tbody><tr class='potbl'><td class='text-center' width='25%'><div class='W60'>"+empInfo.leave_count+"</div></td>",tr+="<td class='text-center' width='25%'><div class='W60'>"+empInfo.holiday_count+"</div></td><td class='text-center' width='25%'><div class='W60'>",tr+=empInfo.totalWeekendCount+"</div></td><td class='text-center' width='25%'><div class='W60'>"+empInfo.totalPaidOffDays_count+"</div></td></tr></tbody></table></td>",tr+="<td class='P0I TBrdr'><table class='table i_table'><tbody><tr class='upotbl'><td class='text-center' width='33.33%'><div class='W60'>"+empInfo.lop_leave_count+"</div></td>",tr+="<td class='text-center' width='33.33%'><div class='W60'>"+empInfo.absent_count+"</div></td><td class='text-center' width='33.33%'><div class='W60'>",tr+=empInfo.totalUnPaidOffDays_count+"</div></td></tr></tbody></table></td>",data.isStatConfigForOrg){var regWkndCnt,nonStatCnt="-",statCnt="-",totalWkndOffCnt=regWkndCnt=empInfo.weekend_count;empInfo.isStatWeekendConfig&&(totalWkndOffCnt+=(nonStatCnt=empInfo.nonStatWkndCnt)+(statCnt=empInfo.statWkndCnt)),tr+='<td class="P0I TBrdr"><table class="table i_table"><tbody><tr class="upotbl">',tr+='<td class="text-center" width="25%"><div class="W60">'+statCnt+"</div></td>",tr+='<td class="text-center" width="25%"><div class="W60">'+nonStatCnt+"</div></td>",tr+='<td class="text-center" width="25%"><div class="W60">'+regWkndCnt+"</div></td>",tr+='<td class="text-center" width="25%"><div class="W60">'+totalWkndOffCnt+"</div></td>",tr+="</tr></tbody></table></td>"}0===Attendance.Reports.summaryReport.showOTDT&&(tr+="<td class='P0I TBrdr'><table class='table i_table'><tbody><tr>",tr+="<td class='text-center grn' width='25%'><div class='W60'>"+Attendance.disHours(empInfo.overTime_tsecs/60)+"</div></td>",tr+="<td class='text-center red' width='25%'><div class='W60'>"+Attendance.disHours(empInfo.totalAbsentDaysInSecs/60)+"</div></td>",tr+="<td class='text-center"+(empInfo.cumulativeOvertime<0?" red' ":" grn' ")+"width='25%'><div class='W60'>"+Attendance.disHours(Math.abs(empInfo.cumulativeOvertime)/60)+"</div></td>",tr+="</tr></tbody></table></td>"),tr+="</tr>",repTable.append(tr)}0!==repTable.children().length||Layout.Page.container.find("#attendanceSummaryReport").hasClass("DN")||(Layout.Page.container.find("#attendanceSummaryReport").addClass("DN"),Layout.Page.container.find("[id=zp_page_loading]").fadeOut(200).remove(),Layout.Page.container.find(".ZPNdata ").remove(),Layout.Page.container.find("#attendanceSummaryReport").before(ZPUtil.newNoDataHTML("CR-nodata-rpt","path6",ZPI18N.getString("zp.noreportsmsg"))))},getSumRepLateNightHoursVal:function(empInfo,str){var val="-";return empInfo.isLateNightTrackingEnabled&&(val=Attendance.disHours(empInfo[str]/60)),val},getSumRepStatWkndHoursVal:function(empInfo,str){var val="-";return empInfo.isStatWeekendConfig&&(val=Attendance.disHours(empInfo[str]/60)),val},printReport:function(){var params=Attendance.Reports.summaryReport.getParamsForReport();Attendance.Reports.printReport("attendanceSummaryReport",params.sdate+" "+ZPI18N.getString("zp.to")+" "+params.edate)},Firescroll:{mode:"ATTENDANCE_SUMMARY_REPORT_FIRESCROLL",loadMoreData:function(){var params=Attendance.Reports.summaryReport.getParamsForReport();ZPeople.Request.send("/AttendanceReportAction.zp",params,function(response){if(!response.fail&&!response.error&&response.report&&response.report.erecnoList&&0!==response.report.erecnoList.length){for(var i in Attendance.Reports.summaryReport.sumEnoListAll=Attendance.Reports.summaryReport.sumEnoListAll.concat(response.report.erecnoList),Attendance.Reports.summaryReport.erecnoList=response.report.erecnoList,Attendance.Reports.summaryReport.sReport=response.report,Attendance.Reports.summaryReport.sReportLength=response.report.erecnoList.length,response.report)Attendance.Reports.summaryReport.sumReport[i]=response.report[i];"myReports"==ZPLite.Reports.selectedTab?Attendance.Reports.myReportData.summaryReport=Attendance.Reports.summaryReport.sumReport:"teamReports"==ZPLite.Reports.selectedTab?Attendance.Reports.teamReportData.summaryReport=Attendance.Reports.summaryReport.sumReport:Attendance.Reports.adminReportData.summaryReport=Attendance.Reports.summaryReport.sumReport,ZPLite.Firescroll.setActiveStatus(Attendance.Reports.summaryReport.Firescroll.mode,!1),Attendance.Reports.summaryReport.construct(!0),ZPLite.Firescroll.setFetchedCount(Attendance.Reports.summaryReport.Firescroll.mode,Attendance.Reports.summaryReport.sReportLength)}else ZPLite.Firescroll.setFetchedCount(Attendance.Reports.summaryReport.Firescroll.mode,0)})}}},overtimeReport:{reportName:"ATTENDANCE_OVERTIME_REPORT",navigate:0,initPage:function(){ZPLite.Reports.setCurrentModule(Attendance.Reports.moduleName),ZPLite.Reports.setCurrentReport(Attendance.Reports.overtimeReport.reportName);var initParams={isModuleDataNeeded:!0,callback:Attendance.Reports.overtimeReport.init};ZPLite.Reports.initPage(initParams)},init:function(){if(ZPLite.Reports.Util.setAvailableReportsForModule("Attendance"),"myReports"==ZPLite.Reports.selectedTab?Layout.Page.container.find("#attendanceOvertimeReportBody").attr("id","attendanceOvertimeReportBody_my"):"teamReports"==ZPLite.Reports.selectedTab?Layout.Page.container.find("#attendanceOvertimeReportBody").attr("id","attendanceOvertimeReportBody_team"):"adminReports"==ZPLite.Reports.selectedTab&&Layout.Page.container.find("#attendanceOvertimeReportBody").attr("id","attendanceOvertimeReportBody_admin"),Attendance.Reports.overtimeReport.balOtReportList="myReports"==ZPLite.Reports.selectedTab?Attendance.Reports.myReportData.overtimeReport:"teamReports"==ZPLite.Reports.selectedTab?Attendance.Reports.teamReportData.overtimeReport:Attendance.Reports.adminReportData.overtimeReport,null==Attendance.Reports.depLocShiftList||!Attendance.Reports.overtimeReport.balOtReportList){var reportLayout="#"+Layout.Page.container.attr("id");"myReports"!=ZPLite.Reports.selectedTab&&"teamReports"!=ZPLite.Reports.selectedTab||$(reportLayout+" #ZPAtt_report_importPopup").remove(),Attendance.Reports.getDepLocShiftList(),Attendance.Reports.Filters.clearCache(!0);var attModule=ZPLite.Reports.moduleData.attendance;isManageAttendanceData=attModule.isManageAttedance,isLead=attModule.isLead,isSPOCReportView=attModule.isSPOCReportView,Attendance.Reports.overtimeReport.navi();var filterDiv=Layout.Page.container.find("#filterDiv");isadmin&&(isManageAttendanceData=!0),isadmin&&"myReports"!=ZPLite.Reports.selectedTab?Attendance.Reports.Filters.constructFilter(filterDiv.find('[name="roleFilter"]'),"role",!1):filterDiv.find('[name="roleFilter"]').remove(),Layout.Page.container.find("#ZPAtt_Import").removeClass("DNI").addClass("DNI"),isManageAttendanceData&&"adminReports"==ZPLite.Reports.selectedTab&&Layout.Page.container.find("#ZPAtt_Import").removeClass("DNI"),Attendance.Reports.Filters.constructFilter(filterDiv.find('[name="employeeFilter"]'),"employee",!1,Attendance.Reports.overtimeReport.filterOnChangeCallback,"ATTENDANCE_OVERTIMEREPORT_FILTER_EMPLOYEE_FIRESCROLL"),Attendance.Reports.Filters.constructFilter(filterDiv.find('[name="departmentFilter"]'),"department",!1),Attendance.Reports.Filters.constructFilter(filterDiv.find('[name="locationFilter"]'),"location",!1),Attendance.Reports.Filters.constructFilter(filterDiv.find('[name="orgTagFilter"]'),"orgTag",!1),Attendance.Reports.Filters.constructFilter(filterDiv.find('[name="designationFilter"]'),"designation",!1),isOrgStructureEnabled&&(Attendance.Reports.Filters.constructFilter(filterDiv.find('[name="entityFilter"]'),"legalEntity",!1),Attendance.Reports.Filters.constructFilter(filterDiv.find('[name="buFilter"]'),"businessUnit",!1),Attendance.Reports.Filters.constructFilter(filterDiv.find('[name="divisionFilter"]'),"division",!1)),filterDiv.find('[name="fromDateFilter"]').off("click").on("click",function(){Calendar.setUpCalendar(event,$(this).find('[name="fromDateFilterText"]'),null,null,function(value,obj){$(obj).parent().val(Calendar.formatDate(value)),$(obj).parent().data("selectedDate",value),$(obj).parent().addClass("selected")})}),filterDiv.find('[name="toDateFilter"]').off("click").on("click",function(){Calendar.setUpCalendar(event,$(this).find('[name="toDateFilterText"]'),null,null,function(value,obj){$(obj).parent().val(Calendar.formatDate(value)),$(obj).parent().data("selectedDate",value),$(obj).parent().addClass("selected")})});var payPeriodList=Attendance.Reports.depLocShiftList.reportSettList;payPeriodList.length>0&&Attendance.Reports.Filters.constructFilter(filterDiv.find('[name="payPeriodFilter"]'),"payPeriod",!0),Attendance.Reports.overtimeReport.setPayPeriodAttributes(payPeriodList),Attendance.Reports.overtimeReport.setDefaultFilterParams(),Attendance.Reports.overtimeReport.generateReport()}},setPayPeriodAttributes:function(payPeriodList){var filterDiv=Layout.Page.container.find("#filterDiv");$.each(payPeriodList,function(index,options){var lastScheRunTime="-1",rsSecClosureDay="-1";options.last_update&&(lastScheRunTime=options.last_update),options.rsSecClosureDay&&(rsSecClosureDay=options.rsSecClosureDay);var payList=filterDiv.find('[name="payPeriodFilter"]').find('li[id="'+options.rsID+'"]');payList.attr("value",options.rsID),payList.attr("rsFrequency",options.rsFrequency),payList.attr("closeDay",options.rsClosureDay),payList.attr("toDay",options.rsToDay),payList.attr("closeDay_2",rsSecClosureDay),payList.attr("lastUpdatedTime",lastScheRunTime),payList.attr("allowRegen",options.allowRegen),payList.attr("regenClosureDate",options.regenClosureDate),payList.attr("regenStartDate",options.regenStartDate)})},setDefaultFilterParams:function(){var filterDiv=Layout.Page.container.find("#filterDiv"),payPeriodList=Attendance.Reports.depLocShiftList.reportSettList;payPeriodList.length>0&&ZPLite.Filters.setValues(filterDiv.find('[name="payPeriodFilter"]'),[{id:payPeriodList[0].rsID,text:payPeriodList[0].rsName}],!0),ZPLite.Filters.clearValues(filterDiv.find('[name="employeeFilter"]')),filterDiv.find('[name="userInclusionFilter"]').removeClass("DNI"),filterDiv.find('[name="userInclusionFilter"]').find("input").prop("checked",!1),ZPLite.Filters.clearValues(filterDiv.find('[name="departmentFilter"]')),ZPLite.Filters.clearValues(filterDiv.find('[name="locationFilter"]')),isadmin&&filterDiv.find('[name="roleFilter"]').is(":visible")&&ZPLite.Filters.clearValues(filterDiv.find('[name="roleFilter"]')),filterDiv.find('[name="orgTagFilter"]').is(":visible")&&ZPLite.Filters.clearValues(filterDiv.find('[name="orgTagFilter"]')),ZPLite.Filters.clearValues(filterDiv.find('[name="designationFilter"]')),filterDiv.find('[name="entityFilter"]').is(":visible")&&ZPLite.Filters.clearValues(filterDiv.find('[name="entityFilter"]')),filterDiv.find('[name="buFilter"]').is(":visible")&&ZPLite.Filters.clearValues(filterDiv.find('[name="buFilter"]')),filterDiv.find('[name="divisionFilter"]').is(":visible")&&ZPLite.Filters.clearValues(filterDiv.find('[name="divisionFilter"]')),"myReports"==ZPLite.Reports.selectedTab&&(Layout.Page.container.find('[name="employeeFilter"]').addClass("DNI"),Layout.Page.container.find('[name="userInclusionFilter"]').addClass("DNI"),Layout.Page.container.find('[name="locationFilter"]').addClass("DNI"),Layout.Page.container.find('[name="orgTagFilter"]').addClass("DNI"),Layout.Page.container.find('[name="roleFilter"]').addClass("DNI"),Layout.Page.container.find('[name="designationFilter"]').addClass("DNI"),Layout.Page.container.find('[name="departmentFilter"]').addClass("DNI"),Layout.Page.container.find('[name="entityFilter"]').addClass("DNI"),Layout.Page.container.find('[name="buFilter"]').addClass("DNI"),Layout.Page.container.find('[name="divisionFilter"]').addClass("DNI"))},resetFilter:function(){Attendance.Reports.overtimeReport.setDefaultFilterParams()},applyFilter:function(){Attendance.Reports.overtimeReport.generateReport()},filterOnChangeCallback:function(data){var filterDiv=Layout.Page.container.find("#filterDiv");if("payPeriod"===data.entity){var filterData=ZPLite.Filters.getValues(filterDiv.find('[name="payPeriodFilter"]'));Layout.Page.container.find("#dateNavigator").show(),void 0!==filterData&&"0"!==filterData[0].id||Layout.Page.container.find("#dateNavigator").hide()}if("employee"===data.entity){var erecNo=[];void 0!==(filterData=ZPLite.Filters.getValues(filterDiv.find('[name="employeeFilter"]')))&&filterData.length>0&&$.each(filterData,function(index,options){erecNo.push(options.id)}),filterDiv.find('[name="userInclusionFilter"]').removeClass("DNI"),erecNo.length>0&&(filterDiv.find('[name="userInclusionFilter"]').addClass("DNI"),filterDiv.find('[name="userInclusionFilter"]').find("input").prop("checked",!1))}},getFromToForPayPeriod:function(nav,freq,clsDay_1,clsDay_2,tDay,lUpdateTime,pcls_1,pcls_2){var closureDay,closureDay_2,toDay,fromDay,payrollClosure,type="month",currDate=moment([])._d;"2"==freq?type="week":"3"==freq?type="biWeek":"4"==freq&&(type="semMonth");var clDay=parseInt(clsDay_1);if(tDay=parseInt(tDay),"week"===type)(closureDay=moment([]).day(clDay))._d.getTime()>=currDate.getTime()&&(closureDay=moment(closureDay).add(-1,type)),(toDay=moment(closureDay).day(tDay))._d.getTime()>closureDay._d.getTime()&&(toDay=moment(toDay).add(-1,type)),toDay=toDay.add(nav,type),closureDay=closureDay.add(nav,type),fromDay=moment(toDay).add(-6,"day");else if("month"===type)(closureDay=32===clDay?moment([]).endOf("month"):moment([]).date(clDay))._d.getTime()>=currDate.getTime()&&(closureDay=32===clDay?moment([]).add(-1,type).endOf("month"):moment(closureDay).add(-1,type)),(toDay=32===tDay?moment(closureDay).endOf("month"):moment(closureDay).date(tDay))._d.getTime()>closureDay._d.getTime()&&(toDay=32===tDay?moment(toDay).add(-1,type).endOf("month"):moment(toDay).add(-1,type)),toDay=32===tDay?toDay.add(nav,type).endOf("month"):toDay.add(nav,type),closureDay=32===clDay?closureDay.add(nav,type).endOf("month"):closureDay.add(nav,type),fromDay=32===tDay?moment(toDay).add(-1,type).endOf("month").add(1,"day"):moment(toDay).add(-1,type).add(1,"day");else if("biWeek"===type)closureDay=lUpdateTime&&"-1"!==lUpdateTime?moment(lUpdateTime):(closureDay=moment([]).day(clDay))._d.getTime()<currDate.getTime()?moment(closureDay).add(-1,"week"):moment(closureDay).add(-2,"week"),(toDay=moment(closureDay).day(tDay))._d.getTime()>closureDay._d.getTime()&&(toDay=moment(toDay).add(-1,"week")),toDay=toDay.add(14*nav,"day"),closureDay=closureDay.add(14*nav,"day"),fromDay=moment(toDay).add(-13,"day"),pcls_1&&((payrollClosure=closureDay.clone()).set({day:parseInt(pcls_1)}),payrollClosure>closureDay&&payrollClosure.add({date:7}));else if("semMonth"===type){var clDay_2=parseInt(clsDay_2);closureDay=32===clDay?moment([]).endOf("month"):moment([]).date(clDay),closureDay_2=32===clDay_2?moment([]).endOf("month"):moment([]).date(clDay_2);var clDay_Long=closureDay._d.getTime(),clDay2_Long=closureDay_2._d.getTime(),firstClDay=!0;(clDay_Long<currDate.getTime()&&clDay2_Long<currDate.getTime()&&clDay_2<clDay||currDate.getTime()>clDay_Long&&clDay2_Long>=currDate.getTime()||clDay_Long>currDate.getTime()&&clDay2_Long>=currDate.getTime()&&clDay_2<clDay)&&(firstClDay=!1);var stEndObj=ReportSettings.getStartDayEndDay(tDay),startDay_1=stEndObj.startDay_1,startDay_2=stEndObj.startDay_2,endDay_2=stEndObj.endDay_2;nav+=-1;var cloDay,startDay,endDay,navi=Math.round(nav/2+.1);(clDay_Long<currDate.getTime()&&clDay2_Long<currDate.getTime()||clDay_Long>=currDate.getTime()&&clDay2_Long>=currDate.getTime())&&(navi=Math.round(nav/2-.1)),!firstClDay&&firstClDay||nav%2!=-1||(firstClDay=!firstClDay),firstClDay?(cloDay=clDay_Long<currDate.getTime()&&clDay2_Long<currDate.getTime()?32===clDay?closureDay.add(1,"month").endOf("month"):closureDay.add(1,"month"):closureDay,cloDay=32===clDay?cloDay.add(navi,"month").endOf("month"):cloDay.add(navi,"month"),(endDay=32===tDay?moment(cloDay).endOf("month"):moment(cloDay).date(tDay))._d.getTime()>cloDay._d.getTime()&&(endDay=32===tDay?moment(endDay).add(-1,"month").endOf("month"):moment(endDay).add(-1,"month")),startDay=32===startDay_1?moment(endDay).endOf("month"):moment(endDay).date(startDay_1),endDay._d.getTime()<startDay._d.getTime()&&(startDay=32===startDay_1?moment(startDay).add(-1,"month").endOf("month"):moment(startDay).add(-1,"month")),pcls_1&&(payrollClosure=cloDay.clone(),(payrollClosure=32==pcls_1?moment(payrollClosure).endOf("month"):payrollClosure.set({date:parseInt(pcls_1)}))<cloDay&&(payrollClosure=32==pcls_2?moment(payrollClosure).add(1,"month").endOf("month"):moment(payrollClosure).add(1,"month")))):(cloDay=clDay_Long<currDate.getTime()&&clDay2_Long<currDate.getTime()?32===clDay_2?closureDay_2.add(1,"month").endOf("month"):closureDay_2.add(1,"month"):closureDay_2,cloDay=32===clDay_2?cloDay.add(navi,"month").endOf("month"):cloDay.add(navi,"month"),(endDay=32===endDay_2?moment(cloDay).endOf("month"):moment(cloDay).date(endDay_2))._d.getTime()>cloDay._d.getTime()&&(endDay=32===endDay_2?moment(endDay).add(-1,"month").endOf("month"):moment(endDay).add(-1,"month")),startDay=32===startDay_2?moment(endDay).endOf("month"):moment(endDay).date(startDay_2),endDay._d.getTime()<startDay._d.getTime()&&(startDay=32===startDay_2?moment(startDay).add(-1,"month").endOf("month"):moment(startDay).add(-1,"month")),pcls_2&&(payrollClosure=cloDay.clone(),(payrollClosure=32==pcls_2?moment(payrollClosure).endOf("month"):payrollClosure.set({date:parseInt(pcls_2)}))<cloDay&&(payrollClosure=32==pcls_2?moment(payrollClosure).add(1,"month").endOf("month"):moment(payrollClosure).add(1,"month")))),fromDay=startDay,toDay=endDay,closureDay=cloDay}var obj={};return obj.fromDay=fromDay,obj.toDay=toDay,obj.closureDay=closureDay,obj.payrollclosureDay=payrollClosure||closureDay,obj},getDefaultParams:function(){return{mode:"attOtReport",conreqcsr:csrfToken}},getParamsForReport:function(){var params=Attendance.Reports.overtimeReport.getDefaultParams(),filterDiv=Layout.Page.container.find("#filterDiv"),filterData=ZPLite.Filters.getValues(filterDiv.find('[name="payPeriodFilter"]'));if(void 0!==filterData&&filterData.length>0&&"0"!==filterData[0].id&&(params.rpSettId=filterData[0].id),void 0!==(filterData=ZPLite.Filters.getValues(filterDiv.find('[name="employeeFilter"]')))&&filterData.length>0){var erecNo=[];$.each(filterData,function(index,options){erecNo.push(options.id)}),params.erecno=JSON.stringify(erecNo)}if(Layout.Page.container.find("[name=userInclusionFilter]").find("input").is(":checked")&&(params.showDirectRepTo=!0),void 0!==(filterData=ZPLite.Filters.getValues(filterDiv.find('[name="departmentFilter"]')))&&filterData.length>0){var departmentId=[];$.each(filterData,function(index,options){departmentId.push(options.id)}),params.departmentId=JSON.stringify(departmentId)}if(void 0!==(filterData=ZPLite.Filters.getValues(filterDiv.find('[name="designationFilter"]')))&&filterData.length>0){var desgId=[];$.each(filterData,function(index,options){desgId.push(options.id)}),params.desgId=JSON.stringify(desgId)}if(isOrgStructureEnabled){if((filterData=ZPLite.Filters.getValues(filterDiv.find('[name="entityFilter"]')))&&filterData.length>0){var entity=[];$.each(filterData,function(index,options){entity.push(options.id)}),params.entityId=JSON.stringify(entity)}if((filterData=ZPLite.Filters.getValues(filterDiv.find('[name="buFilter"]')))&&filterData.length>0){var buFilterId=[];$.each(filterData,function(index,options){buFilterId.push(options.id)}),params.bUnitId=JSON.stringify(buFilterId)}if((filterData=ZPLite.Filters.getValues(filterDiv.find('[name="divisionFilter"]')))&&filterData.length>0){var divisionId=[];$.each(filterData,function(index,options){divisionId.push(options.id)}),params.divisionId=JSON.stringify(divisionId)}}if(void 0!==(filterData=ZPLite.Filters.getValues(filterDiv.find('[name="locationFilter"]')))&&filterData.length>0){var locationId=[];$.each(filterData,function(index,options){locationId.push(options.id)}),params.locationId=JSON.stringify(locationId)}if(void 0!==(filterData=ZPLite.Filters.getValues(filterDiv.find('[name="roleFilter"]')))&&filterData.length>0){var roleId=[];$.each(filterData,function(index,options){roleId.push(options.id)}),params.roleId=JSON.stringify(roleId)}return Attendance.organizationTag.fetchParams(filterDiv,params),(Layout.Page.container.find("#attendanceOvertimeReportEmp").hasClass("sort-u")||Layout.Page.container.find("#attendanceOvertimeReportEmp").hasClass("sort-d"))&&(params.isEmpSortAsc=Layout.Page.container.find("#attendanceOvertimeReportEmp").hasClass("sort-u")),params.startIndex=ZPLite.Firescroll.getStartIndex(Attendance.Reports.overtimeReport.Firescroll.mode),"myReports"==ZPLite.Reports.selectedTab?params.zplType=1:"teamReports"==ZPLite.Reports.selectedTab&&(params.zplType=2),params.repType=ZPLite.Reports.selectedTab,params},navi:function(){var layout=Layout.Page.container;layout.find(".overtimePrev").unbind("click").on("click",function(){Attendance.Reports.overtimeReport.generateReport(-1)}),layout.find(".overtimeNext").unbind("click").on("click",function(){"not-allowed"!==Layout.Page.container.find("#goToNextBtn").css("cursor")&&Attendance.Reports.overtimeReport.generateReport(1)})},generateReport:function(navigate,scroll){var layout=Layout.Page.container,reportLayout=(Attendance.Reports.overtimeReport.otRepParam,Layout.Page.container.find("#attendanceOvertimeReport"));scroll||(ZPLite.Firescroll.reset(reportLayout,Attendance.Reports.overtimeReport.Firescroll.mode),reportLayout.scrollTop(0),layout.find(".ZPNdata ").fadeOut(100).remove(),layout.find("[id=zp_page_loading]").fadeOut(200).remove(),$(ZPeople.LOADING_HTML).insertBefore(layout.find("#attendanceOvertimeReport")),layout.find("#attendanceOvertimeReport").addClass("DN"));var params=Attendance.Reports.overtimeReport.getParamsForReport();Layout.Page.container.find("#dateNavigator").hide();var showAdjPaidHrs=!0;reportLayout.find("#paidhours").show(),reportLayout.find("#adjustHours").show(),Layout.Page.container.find("#ZP-Regenerate").next().addClass("DNI"),Layout.Page.container.find("#ZP-Regenerate").addClass("DNI").attr("disabled","disabled");var navlis=Layout.Page.container.find("#dateNavigator").find("a"),filterData=Layout.Page.container.find('[name="payPeriodFilter"]').find("li.sel");if(params.rpSettId){Layout.Page.container.find("#dateNavigator").show(),navigate&&(Attendance.Reports.overtimeReport.navigate+=navigate);var freq=filterData.attr("rsFrequency"),lUpdate=filterData.attr("lastupdatedtime"),clDay_1=filterData.attr("closeDay"),clDay_2=filterData.attr("closeDay_2"),tDay=filterData.attr("today");isadmin&&"true"===filterData.attr("allowRegen")&&(Layout.Page.container.find("#ZP-Regenerate").next().removeClass("DNI"),Layout.Page.container.find("#ZP-Regenerate").removeClass("DNI").removeAttr("disabled"));var fromToObj=Attendance.Reports.overtimeReport.getFromToForPayPeriod(Attendance.Reports.overtimeReport.navigate,freq,clDay_1,clDay_2,tDay,lUpdate);if(params.navigate=Attendance.Reports.overtimeReport.navigate,1===params.navigate?(navlis.eq(1).css("cursor","not-allowed"),Layout.Page.container.find("#paidhours").hide(),Layout.Page.container.find("#adjustHours").hide(),showAdjPaidHrs=!1):navlis.eq(1).css("cursor",""),params.fromDay=moment(fromToObj.fromDay).format("YYYY-MM-DD"),params.toDay=moment(fromToObj.toDay).format("YYYY-MM-DD"),!navigate&&0===params.navigate&&!Layout.Page.container.find("#dateNavigator").data("defaultGenDay")){var closureDay=fromToObj.closureDay;if(Layout.Page.container.find("#dateNavigator").data("defaultGenDay",closureDay),moment(closureDay._d.getTime()).add(4,"day")._d.getTime()<=moment([])._d.getTime())return void navlis.eq(1).click()}}ZPeople.Request.send("/AttendanceReportAction.zp",params,function(response,params){if(response.fail||response.error&&"permissionDenied"===response.error)Attendance.Reports.permDenied();else if(Layout.Page.container.find("[id=zp_page_loading]").fadeOut(200).remove(),params.fromDay?Layout.Page.container.find("#dateNavigatorText").data("fromDay",params.fromDay).data("toDay",params.toDay):Layout.Page.container.find("#dateNavigatorText").data("fromDay",null).data("toDay",null),response.report&&response.fromDay&&response.toDay&&Layout.Page.container.find("#dateNavigatorText").html(response.fromDay+" - "+response.toDay),Attendance.Reports.overtimeReport.otRepParam=params,reportLayout.removeClass("DN"),navigate||response.report[0]||0!==params.navigate){if(response.report&&layout.find(".ZPNdata ").fadeOut(100).remove(),Attendance.Reports.overtimeReport.balanceOtReport=response,scroll)for(var i in response.report)Attendance.Reports.overtimeReport.balOtReportList.push(response.report[i]);else Attendance.Reports.overtimeReport.balOtReportStartIndex=0,Layout.Page.container.find("#attendanceOvertimeReport").scrollTop(0),Attendance.Reports.overtimeReport.balOtReportList=response.report;"myReports"==ZPLite.Reports.selectedTab?Attendance.Reports.myReportData.overtimeReport=Attendance.Reports.overtimeReport.balOtReportList:"teamReports"==ZPLite.Reports.selectedTab?Attendance.Reports.teamReportData.overtimeReport=Attendance.Reports.overtimeReport.balOtReportList:Attendance.Reports.adminReportData.overtimeReport=Attendance.Reports.overtimeReport.balOtReportList;var showEdit=!1;!response.report[0]||params.rpSettId&&0!==params.navigate||(showEdit=!0);var editAllowed=response.isEditAllowed,subEditAllowed=response.isEditAllowedForSub,loginUser_adminUserList=response.loginUser_adminUserList;scroll?response.report&&response.report.length>0?(ZPLite.Firescroll.setActiveStatus(Attendance.Reports.overtimeReport.Firescroll.mode,!1),Attendance.Reports.overtimeReport.constructReport(response.report,!0,showEdit,editAllowed,subEditAllowed,showAdjPaidHrs,loginUser_adminUserList),ZPLite.Firescroll.setFetchedCount(Attendance.Reports.overtimeReport.Firescroll.mode,response.report.length)):ZPLite.Firescroll.setFetchedCount(Attendance.Reports.overtimeReport.Firescroll.mode,0):(ZPLite.Firescroll.init(reportLayout,Attendance.Reports.overtimeReport.Firescroll.mode,{maxFetchLimit:50,callback:Attendance.Reports.overtimeReport.Firescroll.loadMoreData}),Attendance.Reports.overtimeReport.constructReport(response.report,!1,showEdit,editAllowed,subEditAllowed,showAdjPaidHrs,loginUser_adminUserList),ZPLite.Firescroll.setFetchedCount(Attendance.Reports.overtimeReport.Firescroll.mode,response.report.length))}else navlis.eq(1).click()})},switchView:function(isHoursView){isHoursView!==Attendance.Reports.overtimeReport.isHoursView()&&(isHoursView?(Layout.Page.container.find('[name="dayviewbtn"]').removeClass("sel"),Layout.Page.container.find('[name="hoursviewbtn"]').addClass("sel")):(Layout.Page.container.find('[name="dayviewbtn"]').addClass("sel"),Layout.Page.container.find('[name="hoursviewbtn"]').removeClass("sel")),Attendance.Reports.overtimeReport.generateReport())},isHoursView:function(){return Layout.Page.container.find('[name="hoursviewbtn"]').hasClass("sel")},constructReport:function(data,scroll,showEdit,editAllowed,subEditAllowed,showAdjPaidHrs,loginUser_adminUserList){var container=Layout.Page.container,repBodyId="adminReports"==ZPLite.Reports.selectedTab?"attendanceOvertimeReportBody_admin":"teamReports"==ZPLite.Reports.selectedTab?"attendanceOvertimeReportBody_team":"attendanceOvertimeReportBody_my",repTableBody=container.find("#"+repBodyId);for(var empList in scroll||repTableBody.empty(),data){var empInfo=data[empList],tr="<tr class='ZPLRow' id='"+empInfo.erecno+"'>";tr+="<td><img class='FL' src="+empInfo.empPhoto+">",tr+="<div class='ZPusrName'><span class='ellipsis W300'><b>"+$("<div/>").text(empInfo.empId).html()+"</b>"+$("<div/>").text(empInfo.empName).html()+"</span></div></td>",tr+="<td>"+Attendance.disHours(empInfo.prevOtHours/60,!1,!0)+"</td>",tr+="<td>"+Attendance.disHours(empInfo.expectedHours/60,!1,!0)+"</td>",tr+="<td>"+Attendance.disHours(empInfo.workedHours/60,!1,!0)+"</td>",showAdjPaidHrs&&(((isadmin||isManageAttendanceData&&(!loginUser_adminUserList||loginUser_adminUserList&&loginUser_adminUserList.includes(empInfo.erecno)))&&"adminReports"==ZPLite.Reports.selectedTab||editAllowed&&empInfo.erecno===erecno||subEditAllowed&&empInfo.erecno!==erecno)&&showEdit?(empInfo.reportSettingsId?tr+="<td><input type='text' placeholder='00:00' class='form-control table-inpt input-bb1' value='"+Attendance.disHours(empInfo.paidHours/60,!1,!0)+"' onkeyup=Attendance.Reports.overtimeReport.onChangePaidAdjHrs(this)></td>":tr+="<td>"+Attendance.disHours(empInfo.paidHours/60,!1,!0)+"</td>",tr+="<td><input type='text' placeholder='00:00' class='form-control table-inpt input-bb1' value='"+Attendance.disHours(empInfo.adjustHours/60,!1,!0)+"' onkeyup=Attendance.Reports.overtimeReport.onChangePaidAdjHrs(this)></td>"):(tr+="<td>"+Attendance.disHours(empInfo.paidHours/60,!1,!0)+"</td>",tr+="<td>"+Attendance.disHours(empInfo.adjustHours/60,!1,!0)+"</td>")),tr+="<td>"+Attendance.disHours(empInfo.balanceHours/60,!1,!0)+"</td>",repTableBody.append(tr)}0===repTableBody.children().length?Layout.Page.container.find("#attendanceOvertimeReport").hasClass("DN")||(Layout.Page.container.find("#attendanceOvertimeReport").addClass("DN"),Layout.Page.container.find("[id=zp_page_loading]").fadeOut(200).remove(),$("#page-wrapper").removeClass("Abar1"),Layout.Page.container.find(" .well.ZPAct").addClass("DNI"),Layout.Page.container.find("#attendanceOvertimeReport").before(ZPUtil.newNoDataHTML("CR-nodata-rpt","path6",ZPI18N.getString("zp.noreportsmsg")))):(0===$("#"+repBodyId).find("input").length?($("#page-wrapper").removeClass("Abar1"),Layout.Page.container.find(" .well.ZPAct").addClass("DNI")):($("#page-wrapper").addClass("Abar1"),Layout.Page.container.find(".well.ZPAct").removeClass("DNI")),Layout.Page.container.find("[id=zp_page_loading]").fadeOut(200).remove())},savePaidAdjHrs:function(obj){var repBodyId="adminReports"==ZPLite.Reports.selectedTab?"attendanceOvertimeReportBody_admin":"teamReports"==ZPLite.Reports.selectedTab?"attendanceOvertimeReportBody_team":"attendanceOvertimeReportBody_my",rows=Layout.Page.container.find("#"+repBodyId).find(".ZPActve");if(Layout.Page.container.find("#"+repBodyId).find(".error-clr")[0])ZPeople.Message.showWarningMsg(ZPI18N.getString("zp.entervalidinput"));else{for(var paidAdjHrsList=new Array,eNoList=new Array,len=0;len<rows.length;len++){var paidHrs,row=rows.eq(len),currRowData=Attendance.Reports.overtimeReport.balOtReportList[row.index()],inpIndex=0;2===row.find("input").length&&(inpIndex=1,paidHrs=row.find("input").eq(0).attr("paidHrs"));var adjHrs=row.find("input").eq(inpIndex).attr("adjHrs"),paidAdjHrsObj={};paidAdjHrsObj.erecno=currRowData.erecno,eNoList.push(currRowData.erecno),void 0!==paidHrs&&1===inpIndex&&(paidAdjHrsObj.paidHrs=paidHrs),void 0!==adjHrs&&(paidAdjHrsObj.adjHrs=adjHrs),Object.keys(paidAdjHrsObj).length>1&&(Attendance.Reports.overtimeReport.balOtReportList[row.index()].balanceHours=parseInt(row.children().last().attr("balHrs")),void 0!==paidAdjHrsObj.paidHrs&&(Attendance.Reports.overtimeReport.balOtReportList[row.index()].paidHours=parseInt(paidAdjHrsObj.paidHrs)),void 0!==paidAdjHrsObj.adjHrs&&(Attendance.Reports.overtimeReport.balOtReportList[row.index()].adjustHours=parseInt(paidAdjHrsObj.adjHrs)),paidAdjHrsList.push(paidAdjHrsObj))}if(0!==paidAdjHrsList.length){eNoList=eNoList.toString(),$(obj).attr("disabled","true");var param={mode:"updatePaidAdjHours",conreqcsr:csrfToken,paidAdjHoursList:JSON.stringify(paidAdjHrsList),eNoList:eNoList};$.post("/AttendanceReportAction.zp",param,function(){$(obj).removeAttr("disabled"),ZPeople.Message.showSuccessMsg(ZPI18N.getString("zp.viewsavedsuccess")),Attendance.Reports.overtimeReport.cancelPaidAdjHrsSave()})}}},onChangePaidAdjHrs:function(obj){var input,etime,currRow=$(obj).closest("tr"),currRowData=Attendance.Reports.overtimeReport.balOtReportList[currRow.index()],paidHrs=currRowData.paidHours,adjHrs=currRowData.adjustHours,inputInd=0;if(2===$(currRow).find("input").length){inputInd=1,(input=$(currRow).find("input").eq(0)).removeAttr("paidHrs");var inputVal=input.val().trim(),isNeg=!1;if("-"===inputVal[0]&&(inputVal=inputVal.substr(1,inputVal.length-1).trim(),isNeg=!0),etime=60*(60*parseInt(inputVal.split(":")[0],10)+parseInt(inputVal.split(":")[1],10)),input.removeClass("error-clr"),"number"!=typeof etime||isNaN(etime))return void input.addClass("error-clr");isNeg&&(etime*=-1)}currRow.children().last().removeAttr("balHrs");var input1=$(currRow).find("input").eq(inputInd);input1.removeAttr("adjHrs");var inputVal1=input1.val().trim(),isNeg1=!1;"-"===inputVal1[0]&&(inputVal1=inputVal1.substr(1,inputVal1.length-1).trim(),isNeg1=!0);var etime1=60*(60*parseInt(inputVal1.split(":")[0],10)+parseInt(inputVal1.split(":")[1],10));if(input1.removeClass("error-clr"),"number"!=typeof etime1||isNaN(etime1))input1.addClass("error-clr");else if(isNeg1&&(etime1*=-1),1===inputInd&&paidHrs!==etime||adjHrs!==etime1){currRow.attr("class","ZPLRow ZPActve");var balOtHrs=currRowData.balanceHours;adjHrs!==etime1&&(input1.attr("adjHrs",etime1),balOtHrs+=etime1-adjHrs),paidHrs!==etime&&1===inputInd&&(input.attr("paidHrs",etime),balOtHrs-=etime-paidHrs),currRow.children().last().text(Attendance.disHours(balOtHrs/60,!1,!0)).attr("balHrs",balOtHrs)}else currRow.attr("class","ZPLRow"),currRow.children().last().text(Attendance.disHours(currRowData.balanceHours/60,!1,!0))},cancelPaidAdjHrsSave:function(){for(var repBodyId="adminReports"==ZPLite.Reports.selectedTab?"attendanceOvertimeReportBody_admin":"teamReports"==ZPLite.Reports.selectedTab?"attendanceOvertimeReportBody_team":"attendanceOvertimeReportBody_my",rows=Layout.Page.container.find("#"+repBodyId).find(".ZPActve"),len=0;len<rows.length;len++){var row=rows.eq(len),currRowData=Attendance.Reports.overtimeReport.balOtReportList[row.index()],inpInd=0;if(2===row.find("input").length){inpInd=1;var paidHrs=row.find("input").eq(0);paidHrs.removeAttr("paidHrs"),paidHrs.removeClass("error-clr"),paidHrs.val(Attendance.disHours(currRowData.paidHours/60,!1,!0))}var adjHrs=row.find("input").eq(inpInd);adjHrs.removeAttr("adjHrs"),adjHrs.removeClass("error-clr"),adjHrs.val(Attendance.disHours(currRowData.adjustHours/60,!1,!0)),row.children().last().removeAttr("balHrs"),row.children().last().text(Attendance.disHours(currRowData.balanceHours/60,!1,!0))}rows.removeClass("ZPActve")},generateReportPopup:function(){var layout=Layout.Page.container.find('[name="payPeriodFilter"]').find("li.sel"),startDate=layout.attr("regenstartdate"),endDate=layout.attr("regenclosuredate");ZPeople.BSModal.confirm(Attendance.Reports.overtimeReport.regenerateOTReport,ZPI18N.getString("zp.alert"),ZPI18N.getString("zp.regenotrep",new Array(startDate,endDate)))},regenerateOTReport:function(){var repSettId,param={mode:"regenOTRep",conreqcsr:csrfToken},filterDiv=Layout.Page.container.find("#filterDiv"),filterData=ZPLite.Filters.getValues(filterDiv.find('[name="payPeriodFilter"]'));void 0!==filterData&&filterData.length>0&&"0"!==filterData[0]&&(repSettId=filterData[0].id),repSettId&&""!==repSettId&&(param.repSettId=repSettId,ZPeople.Message.showWarningMsg(ZPI18N.getString("zp.waituntilotisgen")),$.post("/AttendanceReportAction.zp",param,function(rdata){"success"===rdata.status?(ZPeople.Message.showSuccessMsg(ZPI18N.getString("zp.reportgensucces")),Layout.Page.container.find('[name="payPeriodFilter"]').find("li.sel").attr("allowRegen","false"),Attendance.Reports.overtimeReport.generateReport()):rdata.errMsg&&("only for super admin"===rdata.errMsg?ZPeople.Message.showFailureMsg(ZPI18N.getString("zp.thisoponlyforsuperadmin")):"ot report already generated"===rdata.errMsg&&ZPeople.Message.showFailureMsg(ZPI18N.getString("zp.otrepalreadygen")))}))},printReport:function(){var params=Attendance.Reports.overtimeReport.getParamsForReport();Attendance.Reports.printReport("attendanceOvertimeReport",params.rpSettId?Attendance.Reports.overtimeReport.balanceOtReport.fromDay+" "+ZPI18N.getString("zp.to")+" "+Attendance.Reports.overtimeReport.balanceOtReport.toDay:void 0)},Firescroll:{mode:"ATTENDANCE_OVERTIME_REPORT_FIRESCROLL",loadMoreData:function(){Attendance.Reports.overtimeReport.generateReport(void 0,!0)}}},vaccineReport:{reportName:"ATTENDANCE_VACCINE_REPORT",initPage:function(){ZPLite.Reports.setCurrentModule(Attendance.Reports.moduleName),ZPLite.Reports.setCurrentReport(Attendance.Reports.vaccineReport.reportName);var initParams={isModuleDataNeeded:!0,callback:Attendance.Reports.vaccineReport.init};ZPLite.Reports.initPage(initParams)},init:function(){ZPLite.Reports.Util.setAvailableReportsForModule("Attendance"),"teamReports"==ZPLite.Reports.selectedTab?Layout.Page.container.find("#attendanceVaccineReport").find("#attendanceVaccineReportChartDiv").attr("id","attendanceVaccineReportChartDiv_team"):"adminReports"==ZPLite.Reports.selectedTab&&Layout.Page.container.find("#attendanceVaccineReport").find("#attendanceVaccineReportChartDiv").attr("id","attendanceVaccineReportChartDiv_admin");var isLoaded="myReports"===ZPLite.Reports.selectedTab?Attendance.Reports.myReportData.vaccineReportChart:"teamReports"===ZPLite.Reports.selectedTab?Attendance.Reports.teamReportData.vaccineReportChart:Attendance.Reports.adminReportData.vaccineReportChart;Attendance.Reports.vaccineReport.isChartView()||(isLoaded="myReports"===ZPLite.Reports.selectedTab?Attendance.Reports.myReportData.vaccineReportlist:"teamReports"===ZPLite.Reports.selectedTab?Attendance.Reports.teamReportData.vaccineReportlist:Attendance.Reports.adminReportData.vaccineReportlist);var dateNavigationDtls={};if(dateNavigationDtls.mode=Attendance.Reports.vaccineReport.reportName,dateNavigationDtls.containerId=Layout.Page.container.attr("id"),dateNavigationDtls.previousBtnId="goToPreviousBtn",dateNavigationDtls.nextBtnId="goToNextBtn",dateNavigationDtls.displayAreaId="dateNavigatorText",dateNavigationDtls.navigationCallback=Attendance.Reports.vaccineReport.dateNaviCallback,ZPLite.DateNavigator.init(dateNavigationDtls),null!==Attendance.Reports.depLocShiftList&&isLoaded&&Attendance.Reports.vaccineReport.data){Attendance.Reports.vaccineReport.isChartView()?Attendance.Reports.vaccineReport.switchView(!0,!0):Attendance.Reports.vaccineReport.switchView(!1,!0);var existDateText=Layout.Page.container.find("#dateNavigatorText").text();ZPLite.DateNavigator.setPeriod(dateNavigationDtls.mode,ZPLite.DateNavigator.TYPE.DAILY,void 0,!1,{day:moment(existDateText,dateFmt.toUpperCase())._d})}else{ZPLite.DateNavigator.setPeriod(dateNavigationDtls.mode,ZPLite.DateNavigator.TYPE.DAILY,"current"),Attendance.Reports.getDepLocShiftList(),Attendance.Reports.Filters.clearCache(!0);var attModule=ZPLite.Reports.moduleData.attendance;isManageAttendanceData=attModule.isManageAttedance,isLead=attModule.isLead,isSPOCReportView=attModule.isSPOCReportView;var filterDiv=Layout.Page.container.find("#filterDiv");isadmin&&(isManageAttendanceData=!0),isadmin&&"myReports"!=ZPLite.Reports.selectedTab?Attendance.Reports.Filters.constructFilter(filterDiv.find('[name="roleFilter"]'),"role",!1):filterDiv.find('[name="roleFilter"]').remove(),Attendance.Reports.Filters.constructFilter(filterDiv.find('[name="vaccineStatusFilter"]'),"vaccineStatus",!1),Attendance.Reports.Filters.constructFilter(filterDiv.find('[name="departmentFilter"]'),"department",!1),Attendance.Reports.Filters.constructFilter(filterDiv.find('[name="locationFilter"]'),"location",!1),Attendance.Reports.Filters.constructFilter(filterDiv.find('[name="designationFilter"]'),"designation",!1),Attendance.Reports.Filters.constructFilter(filterDiv.find('[name="shiftFilter"]'),"shift",!1),isOrgStructureEnabled&&(Attendance.Reports.Filters.constructFilter(filterDiv.find('[name="entityFilter"]'),"legalEntity",!1),Attendance.Reports.Filters.constructFilter(filterDiv.find('[name="buFilter"]'),"businessUnit",!1),Attendance.Reports.Filters.constructFilter(filterDiv.find('[name="divisionFilter"]'),"division",!1)),filterDiv.find('[name="dateFilter"]').off("click").on("click",function(){Calendar.setUpCalendar(event,$(this).find('[name="dateFilterText"]'),null,null,function(value,obj){$(obj).parent().val(Calendar.formatDate(value)),$(obj).parent().data("selectedDate",value),$(obj).parent().addClass("selected")})}),Attendance.Reports.vaccineReport.setDefaultFilterParams(),Attendance.Reports.vaccineReport.generateReport()}},setDefaultFilterParams:function(){var date=Calendar.getCurrentDate(!0),filterDiv=Layout.Page.container.find("#filterDiv"),dateFilter=filterDiv.find('[name="dateFilter"]'),name=dateFilter.attr("name");dateFilter.val(date),dateFilter.data("selectedDate",Calendar.parseDate(date,uidateFormat)),dateFilter.data("text",date),dateFilter.addClass("selected"),dateFilter.find('[name="'+name+'Text"]').text(date),dateFilter.find('[name="'+name+'Text"]').val(date),ZPLite.Filters.clearValues(filterDiv.find('[name="vaccineStatusFilter"]')),ZPLite.Filters.clearValues(filterDiv.find('[name="locationFilter"]')),ZPLite.Filters.clearValues(filterDiv.find('[name="departmentFilter"]')),ZPLite.Filters.clearValues(filterDiv.find('[name="designationFilter"]')),ZPLite.Filters.clearValues(filterDiv.find('[name="shiftFilter"]')),Attendance.Reports.vaccineReport.removeErrClass(),filterDiv.find('[name="hoursFilter"]').removeClass("DNI").addClass("DNI"),filterDiv.find('[name="entityFilter"]').is(":visible")&&ZPLite.Filters.clearValues(filterDiv.find('[name="entityFilter"]')),filterDiv.find('[name="buFilter"]').is(":visible")&&ZPLite.Filters.clearValues(filterDiv.find('[name="buFilter"]')),filterDiv.find('[name="divisionFilter"]').is(":visible")&&ZPLite.Filters.clearValues(filterDiv.find('[name="divisionFilter"]')),Attendance.Reports.vaccineReport.isChartView()&&filterDiv.find('[name="vaccineStatusFilter"]').addClass("DNI")},resetFilter:function(){Attendance.Reports.vaccineReport.setDefaultFilterParams()},removeErrClass:function(){var errorDivs=Layout.Page.container.find("#filterDiv").find(".error-clr");errorDivs.length>0&&$.each(errorDivs,function(index,errorDiv){$(errorDiv).removeClass("error-clr")})},dateNaviCallback:function(){var naviDate=Layout.Page.container.find("#dateNavigatorText").text(),dateFilter=Layout.Page.container.find("#filterDiv").find('[name="dateFilter"]'),name=dateFilter.attr("name");dateFilter.val(naviDate),dateFilter.data("selectedDate",Calendar.parseDate(naviDate,uidateFormat)),dateFilter.data("text",naviDate),dateFilter.addClass("selected"),dateFilter.find('[name="'+name+'Text"]').text(naviDate),dateFilter.find('[name="'+name+'Text"]').val(naviDate),Attendance.Reports.vaccineReport.generateReport()},applyFilter:function(){var customDatePeriod={day:Layout.Page.container.find("#filterDiv").find('[name="dateFilter"]').data("selectedDate")};ZPLite.DateNavigator.setPeriod(Attendance.Reports.vaccineReport.reportName,ZPLite.DateNavigator.TYPE.DAILY,void 0,!1,customDatePeriod),Attendance.Reports.vaccineReport.generateReport()},switchView:function(isChartView,isFromTabChange){var layout=Layout.Page.container;isChartView?(layout.find('[name="listviewbtn"]').removeClass("sel"),layout.find("#attendanceVaccineReportTable").addClass("DN"),layout.find('[name="chartviewbtn"]').addClass("sel"),layout.find("#attendanceVaccineReportChart").removeClass("DN"),layout.find("#attendanceVaccineReport").removeClass("DN"),layout.find(".ZPNdata ").remove(),layout.find("#filterDiv").find('[name="vaccineStatusFilter"]').addClass("DNI"),Attendance.Reports.vaccineReport.vaccineChartViewRep="myReports"===ZPLite.Reports.selectedTab?Attendance.Reports.myReportData.vaccineReportChart:"teamReports"===ZPLite.Reports.selectedTab?Attendance.Reports.teamReportData.vaccineReportChart:Attendance.Reports.adminReportData.vaccineReportChart,Attendance.Reports.vaccineReport.vaccineChartViewRep&&Attendance.Reports.vaccineReport.vaccineChartViewRep.userDate===Layout.Page.container.find("#dateNavigatorText").text()||Attendance.Reports.vaccineReport.generateReport()):(layout.find('[name="chartviewbtn"]').removeClass("sel"),layout.find("#attendanceVaccineReportChart").addClass("DN"),layout.find('[name="listviewbtn"]').addClass("sel"),layout.find("#attendanceVaccineReportTable").removeClass("DN"),layout.find("#filterDiv").find('[name="vaccineStatusFilter"]').removeClass("DNI"),0===layout.find("#attendanceVaccineReportBody").children().length&&(layout.find(".ZPNdata ").remove(),layout.find("#attendanceVaccineReport").addClass("DN"),$(ZPUtil.newNoDataHTML("CR-nodata-rpt","path6",ZPI18N.getString("zp.noreportsmsg"))).insertBefore(layout.find("#attendanceVaccineReport"))),Attendance.Reports.vaccineReport.empReportTableData="myReports"===ZPLite.Reports.selectedTab?Attendance.Reports.myReportData.vaccineReportlist:"teamReports"===ZPLite.Reports.selectedTab?Attendance.Reports.teamReportData.vaccineReportlist:Attendance.Reports.adminReportData.vaccineReportlist,Attendance.Reports.vaccineReport.empReportTableData?0!==layout.find("#attendanceVaccineReportBody").children().length&&layout.find("#attendanceVaccineReportTable").fadeIn(300):(0===layout.find("[id=zp_page_loading]").length&&layout.find("#attendanceVaccineReport").before(ZPeople.LOADING_HTML),Attendance.Reports.vaccineReport.generateReport()))},isChartView:function(){return Layout.Page.container.find('[name="chartviewbtn"]').hasClass("sel")},filterOnChangeCallback:function(data){Layout.Page.container.find("#filterDiv");Attendance.Reports.vaccineReport.removeErrClass()},getDefaultParams:function(){var params={mode:"attVaccineReport",userTypeId:"[19]",incDateOfExit:!0,conreqcsr:csrfToken};return Attendance.Reports.vaccineReport.isChartView()||(params.view="list"),params},getParamsForReport:function(){var filterData,params=Attendance.Reports.vaccineReport.getDefaultParams(),filterDiv=Layout.Page.container.find("#filterDiv"),date=filterDiv.find('[name="dateFilter"]').data("selectedDate");if(void 0!==date&&(params.reportDate=Calendar.formatDate(date)),!filterDiv.find('[name="vaccineStatusFilter"]').hasClass("DNI")&&(filterData=ZPLite.Filters.getValues(filterDiv.find('[name="vaccineStatusFilter"]')))&&filterData.length>0){var entity=[];$.each(filterData,function(index,options){entity.push(options.id)}),params.vaccineStatus=JSON.stringify(entity)}if(isOrgStructureEnabled){if((filterData=ZPLite.Filters.getValues(filterDiv.find('[name="entityFilter"]')))&&filterData.length>0){entity=[];$.each(filterData,function(index,options){entity.push(options.id)}),params.entityId=JSON.stringify(entity)}if((filterData=ZPLite.Filters.getValues(filterDiv.find('[name="buFilter"]')))&&filterData.length>0){var buFilterId=[];$.each(filterData,function(index,options){buFilterId.push(options.id)}),params.bUnitId=JSON.stringify(buFilterId)}if((filterData=ZPLite.Filters.getValues(filterDiv.find('[name="divisionFilter"]')))&&filterData.length>0){var divisionId=[];$.each(filterData,function(index,options){divisionId.push(options.id)}),params.divisionId=JSON.stringify(divisionId)}}if((filterData=ZPLite.Filters.getValues(filterDiv.find('[name="departmentFilter"]')))&&filterData.length>0){var departmentId=[];$.each(filterData,function(index,options){departmentId.push(options.id)}),params.departmentId=JSON.stringify(departmentId)}if(void 0!==(filterData=ZPLite.Filters.getValues(filterDiv.find('[name="designationFilter"]')))&&filterData.length>0){var desgId=[];$.each(filterData,function(index,options){desgId.push(options.id)}),params.desgId=JSON.stringify(desgId)}if(void 0!==(filterData=ZPLite.Filters.getValues(filterDiv.find('[name="locationFilter"]')))&&filterData.length>0){var locationId=[];$.each(filterData,function(index,options){locationId.push(options.id)}),params.locationId=JSON.stringify(locationId)}if(void 0!==(filterData=ZPLite.Filters.getValues(filterDiv.find('[name="shiftFilter"]')))&&filterData.length>0){var shiftId=[];$.each(filterData,function(index,options){shiftId.push(options.id)}),params.shiftId=JSON.stringify(shiftId)}return Attendance.Reports.vaccineReport.isChartView()||(params.scrollIndex=ZPLite.Firescroll.getStartIndex(Attendance.Reports.vaccineReport.Firescroll.mode)),"myReports"==ZPLite.Reports.selectedTab?params.zplType=1:"teamReports"==ZPLite.Reports.selectedTab&&(params.zplType=2),params.repType=ZPLite.Reports.selectedTab,params},generateReport:function(){var layout=Layout.Page.container;ZPLite.Firescroll.reset(layout.find("#attendanceVaccineReport"),Attendance.Reports.vaccineReport.Firescroll.mode),layout.find("#attendanceVaccineReport").scrollTop(0),Attendance.Reports.vaccineReport.removeErrClass();var params=Attendance.Reports.vaccineReport.getParamsForReport();params&&(layout.find(".ZPNdata ").fadeOut(100).remove(),0===layout.find("[id=zp_page_loading]").length&&layout.find("#attendanceVaccineReport").before(ZPeople.LOADING_HTML),layout.find("#attendanceVaccineReport").addClass("DN"),Attendance.Reports.vaccineReport.vaccineStatus&&(params.vaccineStatus=Attendance.Reports.vaccineReport.vaccineStatus,Attendance.Reports.vaccineReport.vaccineStatus=null),ZPeople.Request.send("/AttendanceReportAction.zp",params,function(response,params){response.fail||response.error&&"permissionDenied"===response.error?Attendance.Reports.permDenied():(layout.find("[id=zp_page_loading]").fadeOut(200).remove(),Attendance.Reports.vaccineReport.data=response,Layout.Page.container.find("#dateNavigatorText").html(response.report.userDate),"list"===params.view?(null!==response&&response.report&&response.report.length>0?(Attendance.Reports.vaccineReport.empReportTableData=response.report,layout.find("#attendanceVaccineReport").removeClass("DN"),Attendance.Reports.vaccineReport.constructList(),ZPLite.Firescroll.init(layout.find("#attendanceVaccineReport"),Attendance.Reports.vaccineReport.Firescroll.mode,{maxFetchLimit:20,callback:Attendance.Reports.vaccineReport.Firescroll.loadMoreData}),ZPLite.Firescroll.setFetchedCount(Attendance.Reports.vaccineReport.Firescroll.mode,response.report.length)):(Layout.Page.container.find(".ZPNdata ").remove(),Layout.Page.container.find("#attendanceVaccineReportBody").empty(),layout.find("#attendanceVaccineReport").before(ZPUtil.newNoDataHTML("CR-nodata-rpt","path6",ZPI18N.getString("zp.noreportsmsg")))),"myReports"==ZPLite.Reports.selectedTab?Attendance.Reports.myReportData.vaccineReportlist=response.report:"teamReports"==ZPLite.Reports.selectedTab?Attendance.Reports.teamReportData.vaccineReportlist=response.report:Attendance.Reports.adminReportData.vaccineReportlist=response.report):(Attendance.Reports.vaccineReport.empReportTableData=null,null!=response&&Object.keys(response).length>0?(layout.find("#attendanceVaccineReport").removeClass("DN"),Attendance.Reports.vaccineReport.constructChart(response.report,params.reportDate===Calendar.getCurrentDate(!0))):(Layout.Page.container.find(".ZPNdata ").remove(),layout.find("#attendanceVaccineReport").before(ZPUtil.newNoDataHTML("CR-nodata-rpt","path6",ZPI18N.getString("zp.noreportsmsg")))),"myReports"==ZPLite.Reports.selectedTab?(Attendance.Reports.myReportData.vaccineReportChart=response.report,Attendance.Reports.myReportData.vaccineReportlist=null):"teamReports"==ZPLite.Reports.selectedTab?(Attendance.Reports.teamReportData.vaccineReportChart=response.report,Attendance.Reports.teamReportData.vaccineReportlist=null):(Attendance.Reports.adminReportData.vaccineReportChart=response.report,Attendance.Reports.adminReportData.vaccineReportlist=null)))}))},constructChart:function(data,showCurrentDayStatus){var layout=Layout.Page.container,totalOfficeInCount=data.totalOfficeInCount,fullyVaccinatedCount=data.fullyVaccinatedCount,partiallyVaccinatedCount=data.partiallyVaccinatedCount,notVaccinatedCount=data.notVaccinatedCount,dontWantDicloseCount=data.dontWantDicloseCount,notSubmittedCount=data.notSubmittedCount,chartDetails={};chartDetails.renderTo="teamReports"==ZPLite.Reports.selectedTab?"attendanceVaccineReportChartDiv_team":"attendanceVaccineReportChartDiv_admin",chartDetails.title=ZPI18N.getString("zp.attvaccinereport"),chartDetails.spacingTop=30,chartDetails.spacingBottom=10,chartDetails.spacingLeft=30,chartDetails.spacingRight=10,chartDetails.enableDataLabels=!0,chartDetails.enableExport=!0,chartDetails.exportFileName=ZPI18N.getString("zp.attvaccinreport"),chartDetails.dataStartAngle=225,chartDetails.dataArray=[{name:ZPI18N.getString("zp.fullyvaccinated"),y:fullyVaccinatedCount,color:"#a3f092",sliced:!0},{name:ZPI18N.getString("zp.partiallyvaccinated"),y:partiallyVaccinatedCount,color:"#606065"},{name:ZPI18N.getString("zp.notvaccinated"),y:notVaccinatedCount,color:"#f9b278"},{name:ZPI18N.getString("zp.dontwanttodisclose"),y:dontWantDicloseCount,color:"#91c0ef"},{name:ZPI18N.getString("zp.notsubmitted"),y:notSubmittedCount,color:"#9498ed"}],ZPLite.Reports.Util.constructPieChart(chartDetails),layout.find("#ZPAtt_totalOfficeInCount").html(totalOfficeInCount),layout.find("#ZPAtt_fullyVaccinatedCount").html(fullyVaccinatedCount),layout.find("#ZPAtt_partiallyVaccinatedCount").html(partiallyVaccinatedCount),layout.find("#ZPAtt_notVaccinatedCount").html(notVaccinatedCount),layout.find("#ZPAtt_dontWantDicloseCount").html(dontWantDicloseCount),layout.find("#ZPAtt_notSubmittedCount").html(notSubmittedCount)},constructList:function(statusView,obj){var status_view=statusView;statusView&&!ZPeople.IsNumeric(statusView)&&(status_view=statusView.replaceAll("_"," "));var layout=Layout.Page.container,filterDiv=Layout.Page.container.find("#filterDiv");if(statusView||filterDiv.find('[name="vaccineStatusFilter"]').hasClass("DNI"))Layout.Page.container.find("#filterIcon").addClass("sel"),Layout.Page.container.find("#pageDiv").addClass("shw_tfilter");else{var filterData=ZPLite.Filters.getValues(filterDiv.find('[name="vaccineStatusFilter"]'));void 0!==filterData&&filterData.length>0&&(statusView=filterData[0].id)}if(obj&&("desc"===obj.localName||"div"===obj.localName)){if("0"===statusView)ZPLite.Filters.clearValues(filterDiv.find('[name="vaccineStatusFilter"]')),Attendance.Reports.vaccineReport.vaccineStatus=null;else{var txt=layout.find('[name="vaccineStatusFilter"] [id='+statusView+"] label").text();ZPLite.Filters.setValues(filterDiv.find('[name="vaccineStatusFilter"]'),[{id:statusView,text:txt}]);txt=layout.find('[name="vaccineStatusFilter"]').find("#"+statusView).text();layout.find('[name="vaccineStatusFilter_Text"]').text(txt),Attendance.Reports.vaccineReport.vaccineStatus=JSON.stringify(new Array(status_view))}return"myReports"==ZPLite.Reports.selectedTab?Attendance.Reports.myReportData.vaccineReportlist=null:"teamReports"==ZPLite.Reports.selectedTab?Attendance.Reports.teamReportData.vaccineReportlist=null:Attendance.Reports.adminReportData.vaccineReportlist=null,void Attendance.Reports.vaccineReport.switchView()}var repTable=Layout.Page.container.find("#attendanceVaccineReportBody");obj&&obj.isFromScroll||repTable.empty();var response=Attendance.Reports.vaccineReport.empReportTableData,html=" ",maxLen=0;for(var empList in response){if(1200===maxLen)break;maxLen++;var empInfo=response[empList],emp=empInfo.empId+" "+empInfo.empDispName,toolTip="";if(empInfo.vaccinationDate||empInfo.partialVaccinationDate){var dates="";empInfo.partialVaccinationDate&&(dates+=ZPI18N.getString("zp.partiallyvaccinationon",new Array(empInfo.partialVaccinationDate))),empInfo.partialVaccinationDate&&empInfo.vaccinationDate&&(dates+="<br>"),empInfo.vaccinationDate&&(dates+=ZPI18N.getString("zp.fullyvaccinationon",new Array(empInfo.vaccinationDate))),toolTip="data-toggle='tooltip' data-placement='right' data-html='true' data-container='body' title='"+dates+"'"}html+="<tr class='ZPLRow'>",html+="<td style='max-width:600px;width:600px;'><img class='FL' src="+empInfo.employeePhoto+">",html+="<div class='ZPusrName'><span class='ellipsis W200 CP' data-toggle='tooltip' data-placement='top' data-container='body' title='"+emp+"'>"+emp+"</span></div></td>",html+="<td><span "+toolTip+">"+empInfo.vaccinationStatus+"</span></td>",html+="<td></td></tr>"}Layout.Page.container.find("#attendanceVaccineReportBody").html(html)},printReport:function(){var params=Attendance.Reports.vaccineReport.getParamsForReport();Attendance.Reports.printReport(Attendance.Reports.vaccineReport.isChartView()?"attendanceVaccineReportChart":"attendanceVaccineReport",params.reportDate)},Firescroll:{mode:"ATTENDANCE_VACCINE_REPORT_FIRESCROLL",loadMoreData:function(){var params=Attendance.Reports.vaccineReport.getParamsForReport();ZPeople.Request.send("/AttendanceReportAction.zp",params,function(response){if((response=void 0!==response?response.report:null)&&response.empList&&response.empList.length>0){for(var index in ZPLite.Firescroll.setActiveStatus(Attendance.Reports.vaccineReport.Firescroll.mode,!1),response.empList)Attendance.Reports.vaccineReport.empReportTableData.push(response.empList[index]);"myReports"==ZPLite.Reports.selectedTab?Attendance.Reports.myReportData.vaccineReportlist=Attendance.Reports.vaccineReport.empReportTableData:"teamReports"==ZPLite.Reports.selectedTab?Attendance.Reports.teamReportData.vaccineReportlist=Attendance.Reports.vaccineReport.empReportTableData:Attendance.Reports.adminReportData.vaccineReportlist=Attendance.Reports.vaccineReport.empReportTableData;var input={isFromScroll:!0};input.data=response,Attendance.Reports.vaccineReport.constructList(void 0,input),ZPLite.Firescroll.setFetchedCount(Attendance.Reports.vaccineReport.Firescroll.mode,response.empList.length)}else ZPLite.Firescroll.setFetchedCount(Attendance.Reports.vaccineReport.Firescroll.mode,0)})}}},musterrollReport:{reportName:"ATTENDANCE_MUSTERROLL_REPORT",Asc:null,isForm25Enabled:!1,initPage:function(){ZPLite.Reports.setCurrentModule(Attendance.Reports.moduleName),ZPLite.Reports.setCurrentReport(Attendance.Reports.musterrollReport.reportName);var initParams={isModuleDataNeeded:!0,callback:Attendance.Reports.musterrollReport.init};ZPLite.Reports.initPage(initParams)},init:function(){if(ZPLite.Reports.Util.setAvailableReportsForModule("Attendance"),Attendance.Reports.musterrollReport.musterReport="myReports"==ZPLite.Reports.selectedTab?Attendance.Reports.myReportData.musterReport:"teamReports"==ZPLite.Reports.selectedTab?Attendance.Reports.teamReportData.musterReport:Attendance.Reports.adminReportData.musterReport,null==Attendance.Reports.depLocShiftList||!Attendance.Reports.musterrollReport.musterReport){Attendance.Reports.getDepLocShiftList(),Attendance.Reports.Filters.clearCache(!0);var attModule=ZPLite.Reports.moduleData.attendance,filterDiv=Layout.Page.container.find("#filterDiv");isadmin&&"myReports"!=ZPLite.Reports.selectedTab?Attendance.Reports.Filters.constructFilter(filterDiv.find('[name="roleFilter"]'),"role",!1):filterDiv.find('[name="roleFilter"]').remove(),Attendance.Reports.Filters.constructFilter(filterDiv.find('[name="datePeriodFilter"]'),"datePeriod",!0,Attendance.Reports.musterrollReport.filterOnChangeCallback),Attendance.Reports.Filters.constructFilter(filterDiv.find('[name="employeeStatusFilter"]'),"employeeStatus",!1,Attendance.Reports.musterrollReport.filterOnChangeCallback),Attendance.Reports.Filters.constructFilter(filterDiv.find('[name="employeeFilter"]'),"employee",!1,Attendance.Reports.musterrollReport.filterOnChangeCallback,"ATTENDANCE_MUSTERROLLREPORT_FILTER_EMPLOYEE_FIRESCROLL"),Attendance.Reports.Filters.constructFilter(filterDiv.find('[name="departmentFilter"]'),"department",!1),Attendance.Reports.Filters.constructFilter(filterDiv.find('[name="locationFilter"]'),"location",!1),Attendance.Reports.Filters.constructFilter(filterDiv.find('[name="orgTagFilter"]'),"orgTag",!1),Attendance.Reports.Filters.constructFilter(filterDiv.find('[name="designationFilter"]'),"designation",!1),isOrgStructureEnabled&&(Attendance.Reports.Filters.constructFilter(filterDiv.find('[name="entityFilter"]'),"legalEntity",!1),Attendance.Reports.Filters.constructFilter(filterDiv.find('[name="buFilter"]'),"businessUnit",!1),Attendance.Reports.Filters.constructFilter(filterDiv.find('[name="divisionFilter"]'),"division",!1)),Layout.Page.container.find('[name="hoursviewbtn"]').removeClass("sel"),isManageAttendanceData=attModule.isManageAttedance,isLead=attModule.isLead,isSPOCReportView=attModule.isSPOCReportView,isadmin&&(isManageAttendanceData=!0),isSPOCReportView||isManageAttendanceData||!isLead||(filterDiv.find('[name="employeeStatusFilter"]').addClass("DNI"),filterDiv.find('[name="exemployeeInclusionFilter"]').addClass("DNI")),filterDiv.find('[name="fromDateFilter"]').off("click").on("click",function(){Calendar.setUpCalendar(event,$(this).find('[name="fromDateFilterText"]'),null,null,function(value,obj){$(obj).parent().val(Calendar.formatDate(value)),$(obj).parent().data("selectedDate",value),$(obj).parent().addClass("selected")})}),filterDiv.find('[name="toDateFilter"]').off("click").on("click",function(){Calendar.setUpCalendar(event,$(this).find('[name="toDateFilterText"]'),null,null,function(value,obj){$(obj).parent().val(Calendar.formatDate(value)),$(obj).parent().data("selectedDate",value),$(obj).parent().addClass("selected")})});var dateNavigationDtls={};dateNavigationDtls.mode=Attendance.Reports.musterrollReport.reportName,dateNavigationDtls.containerId=Layout.Page.container.attr("id"),dateNavigationDtls.previousBtnId="goToPreviousBtn",dateNavigationDtls.nextBtnId="goToNextBtn",dateNavigationDtls.displayAreaId="dateNavigatorText",dateNavigationDtls.navigationCallback=Attendance.Reports.musterrollReport.dateNaviCallBack,dateNavigationDtls.getDateForCustomNavigationCallback=Attendance.Reports.getDateForCustomNavigation,ZPLite.DateNavigator.init(dateNavigationDtls),ZPLite.DateNavigator.setPeriod(dateNavigationDtls.mode,ZPLite.DateNavigator.TYPE.MONTHLY,"current"),Attendance.Reports.musterrollReport.setDefaultFilterParams(),Attendance.Reports.musterrollReport.generateReport()}},filterOnChangeCallback:function(data){var filterDiv=Layout.Page.container.find("#filterDiv");if("datePeriod"===data.entity){var values=ZPLite.Filters.getValues(filterDiv.find('[name="datePeriodFilter"]'));jQuery.isEmptyObject(values)||"6"!==values[0].id?(filterDiv.find('[name="fromDateFilter"]').addClass("DNI"),filterDiv.find('[name="toDateFilter"]').addClass("DNI")):(filterDiv.find('[name="fromDateFilter"]').removeClass("DNI"),filterDiv.find('[name="toDateFilter"]').removeClass("DNI"))}if("employeeStatus"===data.entity){var employeeStatus=[];void 0!==(filterData=ZPLite.Filters.getValues(filterDiv.find('[name="employeeStatusFilter"]')))&&filterData.length>0&&$.each(filterData,function(index,options){employeeStatus.push(options.id)}),filterDiv.find('[name="exemployeeInclusionFilter"]').addClass("DNI"),employeeStatus.includes("18")&&(filterDiv.find('[name="exemployeeInclusionFilter"]').find("input").prop("checked",!0),filterDiv.find('[name="exemployeeInclusionFilter"]').removeClass("DNI")),Attendance.Reports.Filters.clearCache(!0,"employee"),ZPLite.Filters.clearOptions(filterDiv.find('[name="employeeFilter"]'))}if("employee"===data.entity){var filterData=ZPLite.Filters.getValues(filterDiv.find('[name="employeeFilter"]')),erecNo=[];void 0!==filterData&&filterData.length>0&&$.each(filterData,function(index,options){erecNo.push(options.id)}),filterDiv.find('[name="userInclusionFilter"]').removeClass("DNI"),erecNo.length>0&&(filterDiv.find('[name="userInclusionFilter"]').addClass("DNI"),filterDiv.find('[name="userInclusionFilter"]').find("input").prop("checked",!1))}},setDefaultFilterParams:function(){var filterDiv=Layout.Page.container.find("#filterDiv");ZPLite.Filters.setValues(filterDiv.find('[name="datePeriodFilter"]'),[{id:"2",text:ZPI18N.getString("zp.tt_thismonth"),periodType:"monthly",tense:"current"}]),ZPLite.Filters.setValues(filterDiv.find('[name="employeeStatusFilter"]'),[{id:"19",text:ZPI18N.getString("zp.activeusers")},{id:"-2",text:ZPI18N.getString("zp.activeprofiles")},{id:"18",text:ZPI18N.getString("zp.exemployees")}]),ZPLite.Filters.clearValues(filterDiv.find('[name="locationFilter"]')),filterDiv.find('[name="orgTagFilter"]').is(":visible")&&ZPLite.Filters.clearValues(filterDiv.find('[name="orgTagFilter"]')),isadmin&&filterDiv.find('[name="roleFilter"]').is(":visible")&&ZPLite.Filters.clearValues(filterDiv.find('[name="roleFilter"]')),ZPLite.Filters.clearValues(filterDiv.find('[name="departmentFilter"]')),ZPLite.Filters.clearValues(filterDiv.find('[name="designationFilter"]')),ZPLite.Filters.clearValues(filterDiv.find('[name="employeeFilter"]')),ZPLite.Filters.clearValues(filterDiv.find('[name="statusFilter"]')),filterDiv.find('[name="userInclusionFilter"]').removeClass("DNI"),filterDiv.find('[name="userInclusionFilter"]').find("input").prop("checked",!1),filterDiv.find("[name=fromDateFilter]").addClass("DNI"),filterDiv.find("[name=toDateFilter]").addClass("DNI"),filterDiv.find('[name="entityFilter"]').is(":visible")&&ZPLite.Filters.clearValues(filterDiv.find('[name="entityFilter"]')),filterDiv.find('[name="buFilter"]').is(":visible")&&ZPLite.Filters.clearValues(filterDiv.find('[name="buFilter"]')),filterDiv.find('[name="divisionFilter"]').is(":visible")&&ZPLite.Filters.clearValues(filterDiv.find('[name="divisionFilter"]')),filterDiv.find('[name="exemployeeInclusionFilter"]').removeClass("DNI"),filterDiv.find('[name="exemployeeInclusionFilter"]').find("input").prop("checked",!0),isSPOCReportView||isManageAttendanceData||!isLead||(filterDiv.find('[name="employeeStatusFilter"]').addClass("DNI"),filterDiv.find('[name="exemployeeInclusionFilter"]').addClass("DNI")),"myReports"==ZPLite.Reports.selectedTab&&(filterDiv.find('[name="departmentFilter"]').addClass("DNI"),filterDiv.find('[name="designationFilter"]').addClass("DNI"),filterDiv.find('[name="shiftFilter"]').addClass("DNI"),filterDiv.find('[name="locationFilter"]').addClass("DNI"),filterDiv.find('[name="orgTagFilter"]').addClass("DNI"),filterDiv.find('[name="roleFilter"]').addClass("DNI"),filterDiv.find('[name="userInclusionFilter"]').addClass("DNI"),filterDiv.find('[name="employeeFilter"]').addClass("DNI"),filterDiv.find('[name="employeeStatusFilter"]').addClass("DNI"),filterDiv.find('[name="exemployeeInclusionFilter"]').addClass("DNI"),filterDiv.find('[name="entityFilter"]').addClass("DNI"),filterDiv.find('[name="buFilter"]').addClass("DNI"),filterDiv.find('[name="divisionFilter"]').addClass("DNI"))},removeErrClass:function(){var errorDivs=Layout.Page.container.find("#filterDiv").find(".error-clr");errorDivs.length>0&&$.each(errorDivs,function(index,errorDiv){$(errorDiv).removeClass("error-clr")})},resetFilter:function(){Attendance.Reports.musterrollReport.setDefaultFilterParams()},applyFilter:function(){var tense,customDatePeriod,container=Layout.Page.container.find("#filterDiv"),values=ZPLite.Filters.getValues(container.find('[name="datePeriodFilter"]')),type=values[0].periodType,hideNavigation=!1;if(Attendance.Reports.musterrollReport.removeErrClass(),"6"===values[0].id){var errorMessage,fromDate=container.find('[name="fromDateFilter"]').data("selectedDate"),toDate=container.find('[name="toDateFilter"]').data("selectedDate");if(void 0===fromDate)container.find('[name="fromDateFilter"]').addClass("error-clr"),errorMessage=ZPI18N.getString("zp.emptyfromdate");else if(void 0===toDate)container.find('[name="toDateFilter"]').addClass("error-clr"),errorMessage=ZPI18N.getString("zp.emptytodate");else{var dateDiff=moment(Calendar.formatDate(toDate),dateFmt.toUpperCase()).diff(moment(Calendar.formatDate(fromDate),dateFmt.toUpperCase()),"days");dateDiff<0?(container.find('[name="toDateFilter"]').addClass("error-clr"),errorMessage=ZPI18N.getString("zp.greaterfromdate")):dateDiff>31&&(container.find('[name="toDateFilter"]').addClass("error-clr"),errorMessage=ZPI18N.getString("zp.datewithinonemonth"))}if(errorMessage)return void ZPeople.Message.showFailureMsg(errorMessage);customDatePeriod={from:fromDate,to:toDate}}else hideNavigation=!1,tense=values[0].tense;ZPLite.DateNavigator.setPeriod(Attendance.Reports.musterrollReport.reportName,type,tense,hideNavigation,customDatePeriod),Attendance.Reports.musterrollReport.generateReport()},dateNaviCallBack:function(){var filterDiv=Layout.Page.container.find("#filterDiv");ZPLite.Filters.setValues(filterDiv.find('[name="datePeriodFilter"]'),[{id:"6",text:ZPI18N.getString("zp.custom"),periodType:"custom"}]),filterDiv.find("[name=datePeriodFilter]").find("li.sel").removeClass("sel"),filterDiv.find("[name=fromDateFilter]").removeClass("DNI"),filterDiv.find("[name=toDateFilter]").removeClass("DNI");var fVal,tVal,period=ZPLite.DateNavigator.getPeriod(Attendance.Reports.musterrollReport.reportName);void 0!==period.from&&void 0!==period.to?(fVal=Calendar.formatDate(period.from),tVal=Calendar.formatDate(period.to)):tVal=fVal=Calendar.formatDate(period.day),filterDiv.find("[name=fromDateFilter]").val(fVal),filterDiv.find("[name=fromDateFilter]").data("selectedDate",Calendar.parseDate(fVal,uidateFormat)),filterDiv.find("[name=fromDateFilter]").data("text",fVal),filterDiv.find("[name=fromDateFilter]").addClass("selected"),filterDiv.find("[name=fromDateFilterText]").text(fVal),filterDiv.find("[name=fromDateFilterText]").val(fVal),filterDiv.find("[name=toDateFilter]").val(tVal),filterDiv.find("[name=toDateFilter]").data("selectedDate",Calendar.parseDate(tVal,uidateFormat)),filterDiv.find("[name=toDateFilter]").data("text",tVal),filterDiv.find("[name=toDateFilter]").addClass("selected"),filterDiv.find("[name=toDateFilterText]").text(tVal),filterDiv.find("[name=toDateFilterText]").val(tVal),Attendance.Reports.musterrollReport.generateReport()},switchView:function(isHoursView){isHoursView!==Attendance.Reports.statusReport.isHoursView()&&(isHoursView?(Layout.Page.container.find('[name="dayviewbtn"]').removeClass("sel"),Layout.Page.container.find('[name="hoursviewbtn"]').addClass("sel")):(Layout.Page.container.find('[name="dayviewbtn"]').addClass("sel"),Layout.Page.container.find('[name="hoursviewbtn"]').removeClass("sel")),Attendance.Reports.musterrollReport.constructHeader(),Attendance.Reports.musterrollReport.constructReport())},isHoursView:function(){return Layout.Page.container.find('[name="hoursviewbtn"]').hasClass("sel")},getDefaultParams:function(){return{mode:"musterrollReport",userTypeId:"[19,-2,18]",incDateOfExit:!0,conreqcsr:csrfToken}},getParamsForReport:function(){var params=Attendance.Reports.musterrollReport.getDefaultParams(),filterDiv=Layout.Page.container.find("#filterDiv"),filterData=ZPLite.Filters.getValues(filterDiv.find('[name="employeeFilter"]'));if(void 0!==filterData&&filterData.length>0){var erecNo=[];$.each(filterData,function(index,options){erecNo.push(options.id)}),params.erecno=JSON.stringify(erecNo)}if(Layout.Page.container.find("[name=userInclusionFilter]").find("input").is(":checked")&&(params.showDirectRepTo=!0),(filterData=ZPLite.Filters.getValues(filterDiv.find('[name="statusFilter"]')))&&filterData.length>0){var entity=[];$.each(filterData,function(index,options){entity.push(options.id)}),params.statFil=JSON.stringify(entity)}if(isOrgStructureEnabled){if((filterData=ZPLite.Filters.getValues(filterDiv.find('[name="entityFilter"]')))&&filterData.length>0){entity=[];$.each(filterData,function(index,options){entity.push(options.id)}),params.entityId=JSON.stringify(entity)}if((filterData=ZPLite.Filters.getValues(filterDiv.find('[name="buFilter"]')))&&filterData.length>0){var buFilterId=[];$.each(filterData,function(index,options){buFilterId.push(options.id)}),params.bUnitId=JSON.stringify(buFilterId)}if((filterData=ZPLite.Filters.getValues(filterDiv.find('[name="divisionFilter"]')))&&filterData.length>0){var divisionId=[];$.each(filterData,function(index,options){divisionId.push(options.id)}),params.divisionId=JSON.stringify(divisionId)}}if(void 0!==(filterData=ZPLite.Filters.getValues(filterDiv.find('[name="departmentFilter"]')))&&filterData.length>0){var departmentId=[];$.each(filterData,function(index,options){departmentId.push(options.id)}),params.departmentId=JSON.stringify(departmentId)}if(void 0!==(filterData=ZPLite.Filters.getValues(filterDiv.find('[name="designationFilter"]')))&&filterData.length>0){var desgId=[];$.each(filterData,function(index,options){desgId.push(options.id)}),params.desgId=JSON.stringify(desgId)}if(void 0!==(filterData=ZPLite.Filters.getValues(filterDiv.find('[name="locationFilter"]')))&&filterData.length>0){var locationId=[];$.each(filterData,function(index,options){locationId.push(options.id)}),params.locationId=JSON.stringify(locationId)}if(void 0!==(filterData=ZPLite.Filters.getValues(filterDiv.find('[name="roleFilter"]')))&&filterData.length>0){var roleId=[];$.each(filterData,function(index,options){roleId.push(options.id)}),params.roleId=JSON.stringify(roleId)}if(Attendance.organizationTag.fetchParams(filterDiv,params),!filterDiv.find('[name="employeeStatusFilter"]').hasClass("DNI")&&void 0!==(filterData=ZPLite.Filters.getValues(filterDiv.find('[name="employeeStatusFilter"]')))&&filterData.length>0){var employeeStatus=[];$.each(filterData,function(index,options){employeeStatus.push(options.id)}),params.userTypeId=JSON.stringify(employeeStatus)}filterDiv.find('[name="exemployeeInclusionFilter"]').find("input").is(":checked")||delete params.incDateOfExit;var datePeriod=ZPLite.DateNavigator.getPeriod(Attendance.Reports.musterrollReport.reportName);return void 0!==datePeriod&&(void 0!==datePeriod.from&&void 0!==datePeriod.to?(params.sdate=Calendar.formatDate(datePeriod.from),params.edate=Calendar.formatDate(datePeriod.to)):(params.sdate=Calendar.formatDate(datePeriod.day),params.edate=Calendar.formatDate(datePeriod.day))),Attendance.Reports.musterrollReport.Asc=null,Layout.Page.container.find("#attendanceMusterrollReportEmp").hasClass("sort-d")?(params.isEmpSortAsc=!1,Attendance.Reports.musterrollReport.Asc="sort-d"):Layout.Page.container.find("#attendanceMusterrollReportEmp").hasClass("sort-u")&&(params.isEmpSortAsc=!0,Attendance.Reports.musterrollReport.Asc="sort-u"),params.startIndex=ZPLite.Firescroll.getStartIndex(Attendance.Reports.musterrollReport.Firescroll.mode),"myReports"==ZPLite.Reports.selectedTab?params.zplType=1:"teamReports"==ZPLite.Reports.selectedTab&&(params.zplType=2),params.repType=ZPLite.Reports.selectedTab,params},generateReport:function(){var reportLayout=Layout.Page.container.find("#attendanceMusterrollReport");ZPLite.Firescroll.reset(reportLayout,Attendance.Reports.musterrollReport.Firescroll.mode),reportLayout.scrollTop(0),Layout.Page.container.find(".ZPNdata ").fadeOut(100).remove(),reportLayout.before(ZPeople.LOADING_HTML),reportLayout.addClass("DN");var params=Attendance.Reports.musterrollReport.getParamsForReport();ZPeople.Request.send("/AttendanceReportAction.zp",params,function(response,params){response.fail||response.error&&"permissionDenied"===response.error?Attendance.Reports.permDenied():(Layout.Page.container.find("[id=zp_page_loading]").fadeOut(200).remove(),Attendance.Reports.musterrollReport.mReport=response.dayList,Attendance.Reports.musterrollReport.mReportLength=response.dayList.length,reportLayout.removeClass("DN"),reportLayout.find("#ZPAtt_attmusterrollReportTableHeader").empty(),reportLayout.find("#ZPAtt_attmusterrollReportTableBody").empty(),Attendance.Reports.musterrollReport.statusHeader=response.statusHeader,Attendance.Reports.musterrollReport.musterReport=response.dayList,Attendance.Reports.musterrollReport.showOtDt=response.showOverDevTime,Attendance.Reports.musterrollReport.isForm25Enabled=response.isFrom25ENabled,Attendance.Reports.musterrollReport.isViewAllowedForPayableHrs=response.isViewAllowedForPayableHrs,"myReports"==ZPLite.Reports.selectedTab?Attendance.Reports.myReportData.musterReport=Attendance.Reports.musterrollReport.musterReport:"teamReports"==ZPLite.Reports.selectedTab?Attendance.Reports.teamReportData.musterReport=Attendance.Reports.musterrollReport.musterReport:Attendance.Reports.adminReportData.musterReport=Attendance.Reports.musterrollReport.musterReport,Attendance.Reports.getLeaveTypes(),response.dispMonth?Layout.Page.container.find("#dateNavigatorText").html(response.dispMonth):Layout.Page.container.find("#dateNavigatorText").html(Attendance.datesInHeader(response.fdate,response.tdate)),response.isStatWeekendConfigForOrg&&(Layout.Page.container.find("#ZPAtt_statRepSWLegend").removeClass("DNI"),Layout.Page.container.find("#ZPAtt_statRepNSWLegend").removeClass("DNI"),Layout.Page.container.find("#ZPAtt_statRepSWLegendSide").removeClass("DNI"),Layout.Page.container.find("#ZPAtt_statRepNSWLegendSide").removeClass("DNI"),void 0!=Attendance&&Attendance.isInEmbedPage&&(Layout.Page.container.find("#ZPAtt_leaveLegend").addClass("DNI"),Layout.Page.container.find("#ZPAtt_onDutyLegend").addClass("DNI"),Layout.Page.container.find("#ZPAtt_lopLegend").addClass("DNI"))),Attendance.Reports.musterrollReport.constructHeader(),Attendance.Reports.musterrollReport.constructReport(!1,response),ZPLite.Firescroll.init(reportLayout,Attendance.Reports.musterrollReport.Firescroll.mode,{maxFetchLimit:50,callback:Attendance.Reports.musterrollReport.Firescroll.loadMoreData}),ZPLite.Firescroll.setFetchedCount(Attendance.Reports.musterrollReport.Firescroll.mode,response.dayList.length))})},constructHeader:function(){for(var statusData=Attendance.Reports.musterrollReport.statusHeader,reportLayout=Layout.Page.container.find("#attendanceMusterrollReport"),isHoursView=Attendance.Reports.musterrollReport.isHoursView(),headerHtml="<tr class='ZPLHRow'>",j=0;j<statusData.length;j++){if(0==j){var sort=null===Attendance.Reports.musterrollReport.Asc?"":Attendance.Reports.musterrollReport.Asc;headerHtml+="<th style='max-width:300px;width:300px;' class='colM1_sticky'><div><span>"+ZPI18N.getString("zp.employee")+"</span><i class='sort-img "+sort+" CP' id='attendanceMusterrollReportEmp' onclick='Attendance.Reports.sortEmp(this)' data-toggle='tooltip' data-placement='bottom' data-container='body' data-original-title=' "+ZPI18N.getString("zp.sort")+" '></i></div></th>"}var headerResp=statusData[j].split("-"),date=headerResp[0],month=headerResp[1],day=days[headerResp[3]-1];headerHtml+="<th class='text-center P0I'>",headerHtml+="<table class='table i_table'><tbody>",isHoursView&&Attendance.Reports.musterrollReport.isForm25Enabled?headerHtml+="<tr><td colspan='3' style='border-bottom: 1px solid #F3F4F5;'>":headerHtml+="<tr><td colspan='2' style='border-bottom: 1px solid #F3F4F5;'>",headerHtml+="<span class='DB MB3'>"+ZPI18N.getString("zp."+month.toLowerCase())+" "+date+"</span>",headerHtml+="<span class='DB dgry ZPreg'>"+day+"</span></td></tr>",headerHtml+="<tr><td class='W60 text-center' ><div class='",headerHtml+="W60 ellipsis Mauto'>"+ZPI18N.getString("zp.shiftsig")+"</div></td><td class='text-center'><span class='W60 Mauto'>"+ZPI18N.getString("zp.status")+"</span></td>",Attendance.Reports.musterrollReport.isForm25Enabled&&isHoursView&&(headerHtml+="<td class='text-center'><span class='W60 Mauto'>"+ZPI18N.getString("zp.break")+"</span></td>"),headerHtml+="</tr></tbody></table>",headerHtml+="</th>"}headerHtml+=isHoursView?"<th class='text-center'><div class='DB ellipsis Mauto'>"+ZPI18N.getString("zp.workedhours")+"</div><span class='DB dgry ZPreg AprvTym MT8 text-center'>"+ZPI18N.getString("zp.present")+" + "+ZPI18N.getString("zp.onduty")+"</span></th>":"<th class='text-center'><div class='DB ellipsis Mauto'>"+ZPI18N.getString("zp.workeddays")+"</div><span class='DB dgry ZPreg AprvTym MT8 text-center'>"+ZPI18N.getString("zp.present")+" + "+ZPI18N.getString("zp.onduty")+"</span></th>",headerHtml+="<th class='text-center'><div class='DB W80 Mauto'>"+ZPI18N.getString("zp.weekend")+"</div></th>",headerHtml+="<th class='text-center'><div class='DB W100A Mauto'>"+ZPI18N.getString("zp.holidays")+"</div></th>",headerHtml+="<th class='text-center'><div class='DB W80 Mauto'>"+ZPI18N.getString("zp.paidoff",[""])+"</div></th>",headerHtml+="<th class='text-center'><div class='DB ellipsis Mauto'>",headerHtml+=isHoursView?ZPI18N.getString("zp.unpayablehours"):ZPI18N.getString("zp.unpayabledays"),headerHtml+="</div><span class='DB dgry ZPreg AprvTym MT8 text-center'>"+ZPI18N.getString("zp.unpaidleave")+" + "+ZPI18N.getString("zp.absent")+"</span></th>",headerHtml+=isHoursView?"<th class='text-center' id='ZPAtt_showHidePayableHours'><div class='DB ellipsis Mauto'>"+ZPI18N.getString("zp.payablehours")+"</div><span class='DB dgry ZPreg AprvTym MT8 text-center'>"+ZPI18N.getString("zp.workedhours")+" + "+ZPI18N.getString("zp.paidoff",[""])+"</span></th>":"<th class='text-center' id='ZPAtt_showHidePayableDays'><div class='DB ellipsis Mauto'>"+ZPI18N.getString("zp.payabledays")+"</div><span class='DB dgry ZPreg AprvTym MT8 text-center'>"+ZPI18N.getString("zp.workeddays")+" + "+ZPI18N.getString("zp.paidoff",[""])+"</span></th>",headerHtml+="</tr>",reportLayout.find("#ZPAtt_attmusterrollReportTableHeader").html(headerHtml)},constructReport:function(scroll,response){var repTableBody=Layout.Page.container.find("#ZPAtt_attmusterrollReportTableBody"),isHoursView=Attendance.Reports.musterrollReport.isHoursView();scroll?data=Attendance.Reports.musterrollReport.mReport:(repTableBody.empty(),data=Attendance.Reports.musterrollReport.musterReport);for(var statusLen=Attendance.Reports.musterrollReport.isViewAllowedForPayableHrs?23:21,i=0;i<data.length;i++){var empId=data[i].empId,empName=data[i].name,dateofexit="";""!==data[i].doe&&(dateofexit="( "+ZPI18N.getString("zp.exitdate")+" - "+data[i].doe+")");var tr="<tr class='ZPLRow'>";tr+="<td class='colM1_sticky' style='max-width:300px;width:300px;height:47px;'><img class='FL' src="+data[i].empPhoto+">",tr+="<div class='ZPusrName'><span class='ellipsis W500 CP' data-toggle='tooltip' data-placement='top' data-container='body' title='"+empId+" "+empName+"'><b>"+empId+"</b>"+empName+"</span><em class='ZPsecName'>"+dateofexit+"</em></div></td>";for(var k=0;k<Object.keys(data[i]).length-statusLen;k++){var status=data[i][k],shiftDetails=status.shiftDet;if(tr+="<td class='P0I'><table class='table i_table ",tr+="'><td class='W60 text-center "+("LC"+shiftDetails.colorCode)+"'  ><span class= '",tr+="W60 ellipsis CP Mauto' data-toggle='tooltip' data-placement='top' data-container='body' data-original-title='"+shiftDetails.shiftName+"' title='"+shiftDetails.shiftName+"'>"+shiftDetails.shiftName+"</span></td>",status.notApplicable)tr+="<td class='W60 text-center'><span class='RPData' style='border:0'>-</span></td></table></td>";else{var weekendClass="",stat="";stat=status.dayStatus;var lStatus=status.dayStatusWithoutCode;lStatus||(lStatus=stat);var colorClass="";if(-1!==lStatus.indexOf("LOP")?colorClass="lop":-1!==lStatus.indexOf("OD")?colorClass="onduty":-1!==lStatus.indexOf("L")?colorClass="leave":-1!==stat.indexOf("W")?(weekendClass="WKend WStripe",colorClass="wkend"):-1!==stat.indexOf("H")?colorClass="holiday":-1!==stat.indexOf("P")?colorClass="present":-1!==stat.indexOf("A")&&(colorClass="absent"),isHoursView)1===(stat=status.hrsStatus).split("/").length&&-1!==stat.indexOf("(")&&(stat=stat.substr(0,stat.indexOf("(")));if(tr+="<td class='W60 text-center "+weekendClass+"' ><span class='W60 ellipsis RPData "+colorClass+"-border' data-toggle='tooltip' data-placement='top' data-container='body' data-original-title='"+stat+"' title='"+stat+"'>"+stat+"</span></td>",Attendance.Reports.musterrollReport.isForm25Enabled&&isHoursView){var breakHours=status.breakHrsStatus?status.breakHrsStatus:"-";tr+="<td class='W60 text-center "+weekendClass+"' ><span class='W60 ellipsis RPData "+colorClass+"-border' data-toggle='tooltip' data-placement='top' data-container='body' data-original-title='"+breakHours+"' title='"+breakHours+"'>"+breakHours+"</span></td>"}tr+="</table></td>"}}isHoursView?(Layout.Page.container.find("#ZPAtt_showHidePayableHours").hide(),tr+="<td class='text-center'>"+Attendance.disHours(data[i].totalWorkedDaysInSecs/60)+"</td><td class='text-center'>"+Attendance.disHours(data[i].totalWeekendDaysInSecs/60)+"</td><td class='text-center'>"+Attendance.disHours(data[i].totalHolidayDaysInSecs/60)+"</td><td class='text-center'>"+Attendance.disHours(data[i].totalPaidOffDaysInSecs/60)+"</td><td class='text-center'>"+Attendance.disHours(data[i].totalUnPaidOffDaysInSecs/60)+"</td>",Attendance.Reports.musterrollReport.isViewAllowedForPayableHrs&&(Layout.Page.container.find("#ZPAtt_showHidePayableHours").show(),tr+="<td class='text-center'>"+Attendance.disHours(data[i].totalPayDaysInSecs/60)+"</td>")):(Layout.Page.container.find("#ZPAtt_showHidePayableDays").hide(),tr+="<td class='text-center'>"+data[i].totalWorkedDays_count+"</td><td class='text-center'>"+data[i].totalWeekendCount+"</td><td class='text-center'>"+data[i].holiday_count+"</td><td class='text-center'>"+data[i].totalPaidOffDays_count+"</td><td class='text-center'>"+data[i].totalUnPaidOffDays_count+"</td>",Attendance.Reports.musterrollReport.isViewAllowedForPayableHrs&&(Layout.Page.container.find("#ZPAtt_showHidePayableDays").show(),tr+="<td class='text-center'>"+data[i].totalPaidDays_count+"</td>")),tr+="</tr>",repTableBody.append(tr)}0!=repTableBody.children().length||Layout.Page.container.find("#attendanceMusterrollReport").hasClass("DN")||(Layout.Page.container.find("#attendanceMusterrollReport").addClass("DN"),Layout.Page.container.find("[id=zp_page_loading]").fadeOut(200).remove(),Layout.Page.container.find(".ZPNdata ").remove(),Layout.Page.container.find("#attendanceMusterrollReport").before(ZPUtil.newNoDataHTML("CR-nodata-rpt","path6",ZPI18N.getString("zp.noreportsmsg"))))},printReport:function(){var params=Attendance.Reports.musterrollReport.getParamsForReport();Attendance.Reports.printReport("attendanceMusterrollReport",params.sdate+" "+ZPI18N.getString("zp.to")+" "+params.edate)},Firescroll:{mode:"ATTENDANCE_MUSTERROLL_REPORT_FIRESCROLL",loadMoreData:function(){var params=Attendance.Reports.musterrollReport.getParamsForReport();ZPeople.Request.send("/AttendanceReportAction.zp",params,function(response){if(response.dayList&&response.dayList.length>0){for(var i in ZPLite.Firescroll.setActiveStatus(Attendance.Reports.musterrollReport.Firescroll.mode,!1),Attendance.Reports.musterrollReport.mReport=response.dayList,response.dayList)Attendance.Reports.musterrollReport.musterReport.push(response.dayList[i]);"myReports"==ZPLite.Reports.selectedTab?Attendance.Reports.myReportData.musterReport=Attendance.Reports.musterrollReport.musterReport:"teamReports"==ZPLite.Reports.selectedTab?Attendance.Reports.teamReportData.musterReport=Attendance.Reports.musterrollReport.musterReport:Attendance.Reports.adminReportData.musterReport=Attendance.Reports.musterrollReport.musterReport,Attendance.Reports.musterrollReport.constructReport(!0),ZPLite.Firescroll.setFetchedCount(Attendance.Reports.musterrollReport.Firescroll.mode,response.dayList.length)}else ZPLite.Firescroll.setFetchedCount(Attendance.Reports.musterrollReport.Firescroll.mode,0)})}}},Export:{openExport:function(obj){$(obj).hasClass("open")?$(obj).removeClass("open"):$(obj).addClass("open")},showEmpFieldsToExp:function(isPdf){var pageId=Layout.Page.pageId;if(isPdf)return!1;var zplType="admin";return"teamReports"==ZPLite.Reports.selectedTab?zplType="team":"myReports"==ZPLite.Reports.selectedTab&&(zplType="my"),!!(-1===Layout.Page.pageId.indexOf("reports-"+zplType+"-attendance-overtime")||isadmin||isManageAttendanceData||isLead)&&!!(pageId==="reports-"+zplType+"-attendance-officeVsRemoteStatus"&&Layout.Page.container.find("#attendanceOfficeRemCReport").is(":visible")||pageId==="reports-"+zplType+"-attendance-daily"&&(Layout.Page.container.find("#attendanceDailyReportTable").is(":visible")||Layout.Page.container.find(".ZPNdata ").is(":visible"))||pageId==="reports-"+zplType+"-attendance-earlybird"||pageId==="reports-"+zplType+"-attendance-status"||pageId==="reports-"+zplType+"-attendance-summary"||pageId==="reports-"+zplType+"-attendance-user"&&!isPdf||pageId==="reports-"+zplType+"-attendance-overtime"||pageId==="reports-"+zplType+"-attendance-vaccine"&&(Layout.Page.container.find("#attendanceVaccineReportTable").is(":visible")||Layout.Page.container.find(".ZPNdata ").is(":visible"))||pageId==="reports-"+zplType+"-attendance-musterroll"&&Layout.Page.container.find("#attendanceMusterrollReportTable").is(":visible"))},includeAllUsers:function(){var modal=ZP5Export.getCurrContainer();if(modal.find("#incAllUsers")[0].checked){modal.find("#incEmpFeildsSecn").show();var locArr=[],locList=Attendance.Reports.depLocShiftList.locList;Object.keys(locList).length>0&&modal.find("#locFilterSec").show(),$.each(locList,function(key,value){locArr.push({value:key,label:decodeHTML(value)})}),Att_Common_Operations.createTokenFieldComponent(locArr,ZPI18N.getString("zp.alllocaction"),modal.find("#locFilter"),modal);var deptArr=[],depList=Attendance.Reports.depLocShiftList.depList;if(Object.keys(depList).length>0&&modal.find("#depFilterSec").show(),$.each(depList,function(key,value){deptArr.push({value:key,label:decodeHTML(value)})}),Att_Common_Operations.createTokenFieldComponent(deptArr,ZPI18N.getString("zp.alldepartment"),modal.find("#depFilter"),modal),isadmin){var roleArr=[],roleList=Attendance.Reports.depLocShiftList.roleList;Object.keys(roleList).length>0&&modal.find("#roleFilterSec").show(),$.each(roleList,function(key,value){roleArr.push({value:key,label:decodeHTML(value)})}),Att_Common_Operations.createTokenFieldComponent(roleArr,ZPI18N.getString("zp.allroles"),modal.find("#roleFilter"),modal)}var shiftArr=[],shiftList=Shift.shiftList;Object.keys(shiftList).length>0&&modal.find("#shiftFilterSec").show(),$.each(shiftList,function(key,value){-1!=value.select&&shiftArr.push({value:key,label:decodeHTML(value.shiftName)})}),Att_Common_Operations.createTokenFieldComponent(shiftArr,ZPI18N.getString("zp.allshift"),modal.find("#shiftFilter"),modal)}else modal.find("#incEmpFeildsSecn").hide(),modal.find("#locFilterSec").hide(),modal.find("#depFilterSec").hide(),isadmin&&modal.find("#roleFilterSec").hide(),modal.find("#shiftFilterSec").hide()},showExportPopup:function(isPdf){if("true"==is5_0Enabled){var zplType="admin";"teamReports"==ZPLite.Reports.selectedTab?zplType="team":"myReports"==ZPLite.Reports.selectedTab&&(zplType="my");var isPreHrBrkUpNonPDF=-1!==Layout.Page.pageId.indexOf("reports-"+zplType+"-attendance-user")&&!isPdf,isMonthlyRepHoursView=-1!==Layout.Page.pageId.indexOf("reports-"+zplType+"-attendance-status")&&Attendance.Reports.statusReport.isHoursView(),props={submitCallback:Attendance.Reports.Export.Submit,isPdf:!0===isPdf},empSelectionHTML="";if(isPreHrBrkUpNonPDF||isMonthlyRepHoursView){var exportStr=isPreHrBrkUpNonPDF?ZPI18N.getString("zp.includeallentries"):ZPI18N.getString("zp.includecheckinout");(isMonthlyRepHoursView||void 0!=Attendance.Reports&&void 0!=Attendance.Reports.userReport.data&&0==Attendance.Reports.userReport.data.showAllEntries)&&(empSelectionHTML+='<div class="zpl_ttlexpchkbx"><div class="zcheckbox"><input id="incAttEntries" type="checkbox" class="zcheckbox__helper">',empSelectionHTML+='<label for="incAttEntries" class="zcheckbox__label">'+exportStr+"</label></div></div>"),isPreHrBrkUpNonPDF&&"my"!==zplType&&(empSelectionHTML+='<div class="zpl_ttlexpchkbx""><div class="zcheckbox"><input id="incAllUsers" type="checkbox" class="zcheckbox__helper" onclick="Attendance.Reports.Export.includeAllUsers()">',empSelectionHTML+='<label for="incAllUsers" class="zcheckbox__label">'+ZPI18N.getString("zp.includealluser")+"</label></div></div>",empSelectionHTML+='<div class="zpl_secn" id="locFilterSec"><div><label>'+ZPI18N.getString("zp.location")+'</label></div><div><textarea id="locFilter" rows="60" ></textarea></div></div>',empSelectionHTML+='<div class="zpl_secn" id="depFilterSec"><div><label>'+ZPI18N.getString("zp.department")+'</label></div><div><textarea id="depFilter" rows="60" ></textarea></div></div>',isadmin&&(empSelectionHTML+='<div class="zpl_secn" id="roleFilterSec"><div><label>'+ZPI18N.getString("zp.role")+'</label></div><div><textarea id="roleFilter" rows="60" ></textarea></div></div>'),empSelectionHTML+='<div class="zpl_secn" id="shiftFilterSec"><div><label>'+ZPI18N.getString("zp.shifts")+'</label></div><div><textarea id="shiftFilter" rows="60" ></textarea></div></div>')}Attendance.Reports.Export.showEmpFieldsToExp(isPdf)&&(empSelectionHTML+=Attendance.ExportNew.getIncEmpFieldsHtml(Attendance.Reports.depLocShiftList)),""!==empSelectionHTML&&(props.additionalHtml=empSelectionHTML),!isPdf||isMonthlyRepHoursView?ZP5Export.init("attendanceReports",props):Attendance.Reports.Export.Submit(void 0,void 0,"pdf"),isPreHrBrkUpNonPDF&&"my"!==zplType&&Attendance.Reports.Export.includeAllUsers()}else{$("#zp_export_submit").attr("data-dismiss","modal"),$("#zp_export_container").find("#zp_export_inctabularsec").hide(),$("#zp_userexport_filters").remove(),$("#zp_Export_additionalInfo").remove();zplType="admin";"teamReports"==ZPLite.Reports.selectedTab?zplType="team":"myReports"==ZPLite.Reports.selectedTab&&(zplType="my");var isUserRepExpNonPDF=-1!==Layout.Page.pageId.indexOf("reports-"+zplType+"-attendance-user")&&!isPdf;isMonthlyRepHoursView=-1!==Layout.Page.pageId.indexOf("reports-"+zplType+"-attendance-status")&&Attendance.Reports.statusReport.isHoursView(),exportStr=ZPI18N.getString("zp.includeallentries");isUserRepExpNonPDF?exportStr=ZPI18N.getString("zp.includealluser"):isMonthlyRepHoursView&&(exportStr=ZPI18N.getString("zp.includecheckinout")),$("#zp_export_container").find("#zp_export_ftype").show();var hideOpt={};hideOpt.tohide=new Array("tsv");var showEmpFiledsInExp=Attendance.Reports.Export.showEmpFieldsToExp(isPdf);if(showEmpFiledsInExp&&(hideOpt.additionalHtml='<div class="ZPwf FL MT20" id="zp_export_incEmpFeildsDiv" style="display: block;"><label class="checkbox DIB"><input type="checkbox" name="zp_export_incEmpFeilds"><span>'+ZPI18N.getString("zp.incempfields")+"</span></label></div>"),!0===isPdf&&isMonthlyRepHoursView?(ZPExport.showExportContainer(Attendance.Reports.Export.Submit,!0,exportStr,hideOpt),$("#zp_export_container").find(".modal-title").text(ZPI18N.getString("zp.Download")),$("#zp_export_container").find("#zp_export_ftype").hide()):isPdf?Attendance.Reports.Export.Submit(isPdf):ZPExport.showExportContainer(Attendance.Reports.Export.Submit,null,exportStr,hideOpt),showEmpFiledsInExp){var addInfo=$("#zp_export_container").find("#zp_Export_additionalInfo");addInfo.find("#zp_export_incEmpFeildsDiv").find("input:checkbox").off("change"),$("#zp_export_container").find("#zp_Export_additionalInfo input:checkbox").change(function(){this.checked?0===$("#zp_export_empFeilds").length?addInfo.find("#zp_export_incEmpFeildsDiv").after(Attendance.Reports.Export.consEmpFieldsToShow()):$("#zp_export_empFeilds").show():$("#zp_export_empFeilds").hide()})}if($("#zp_export_container").find("input[name='zp_ftype']").eq(0).prop("checked",!0),$("#zp_export_container").find("#zp_export_inctabularsec input:checkbox").off("change"),$("#zp_userexport_include_all_entries").remove(),(isUserRepExpNonPDF&&"my"!==zplType||isMonthlyRepHoursView)&&($("#zp_export_container").find("#zp_export_inctabularsec input:checkbox").eq(0).prop("checked",!1),$("#zp_export_container").find("#zp_export_inctabularsec").show()),isUserRepExpNonPDF){if($("#zp_export_incEmpFeildsDiv").hide(),void 0!=Attendance.Reports&&void 0!=Attendance.Reports.userReport.data&&0==Attendance.Reports.userReport.data.showAllEntries){$("#zp_export_container").find("#zp_export_inctabularsec").before('<div class="ZPwf FL MT20" id="zp_userexport_include_all_entries" style="display: block;"><label class="checkbox DIB"><input type="checkbox"><span id="zp_export_includerecordusers_text">Include all check in/out entries</span></label></div>')}$("#zp_export_container").find("#zp_export_inctabularsec input:checkbox").change(function(){if(this.checked)if(0==$("#zp_userexport_filters").length){var exportCont=$("#zp_export_container"),filtersForExport='<div id="zp_userexport_filters" class="form-group"><div class="ZPwf FL MT20"><label class="control-label col-sm-3 Matry MT5"> '+ZPI18N.getString("zp.locations")+'</label><div class="col-sm-6"><select multiple="multiple" id="zp_userexport_loc"></select></div></div><div class="ZPwf FL MT10"><label class="control-label col-sm-3 Matry MT5"> '+ZPI18N.getString("zp.departments")+'</label><div class="col-sm-6"><select multiple="multiple" id="zp_userexport_dept"></select></div></div><div class="ZPwf FL MT10"><label class="control-label col-sm-3 Matry MT5"> '+ZPI18N.getString("zp.role")+'</label><div class="col-sm-6"><select multiple="multiple" id="zp_userexport_role"></select></div></div><div class="ZPwf FL MT10"><label class="control-label col-sm-3 Matry MT5"> '+ZPI18N.getString("zp.shifts")+'</label><div class="col-sm-6"><select multiple="multiple" id="zp_userexport_shift"></select></div></div></div>';exportCont.find("#zp_export_body #zp_export_inctabularsec").after(filtersForExport),$("#zp_userexport_filters #zp_userexport_loc").append(Attendance.Reports.depLocShiftOptions.locOption),$("#zp_userexport_filters #zp_userexport_dept").append(Attendance.Reports.depLocShiftOptions.depOption),isadmin?$("#zp_userexport_filters #zp_userexport_role").append(Attendance.Reports.depLocShiftOptions.roleOption):$("#zp_userexport_filters #zp_userexport_role").closest(".ZPwf.FL.MT10").hide(),$("#zp_userexport_filters #zp_userexport_shift").append(Attendance.Reports.depLocShiftOptions.shiftOption),$("#zp_userexport_filters select").select2(),$("#zp_export_incEmpFeildsDiv").show()}else $("#zp_userexport_filters").show(),$("#zp_export_incEmpFeildsDiv").show(),$("#zp_export_empFeilds").show();else $("#zp_userexport_filters").hide(),$("#zp_export_incEmpFeildsDiv").hide(),$("#zp_export_empFeilds").hide()})}}},consEmpFieldsToShow:function(){var filterOptions=Attendance.Reports.depLocShiftOptions,txt='<div class="chkbx_lsts" id ="zp_export_empFeilds"><label class="checkbox DIB"><input type="checkbox" name="zp_attExp_incRepTo"><span>'+ZPI18N.getString("zp.reportingto")+"</span></label>";ZPeople.orgStructureTagMap.entity&&filterOptions.entityOption&&filterOptions.entityOption.length>0&&(txt+='<label class="checkbox DIB"><input type="checkbox" name="zp_attExp_incEntity"><span>'+(ZPeople.orgStructureDispNameMap&&ZPeople.orgStructureDispNameMap.entity?ZPeople.orgStructureDispNameMap.entity:ZPI18N.getString("zp.employeeentity"))+"</span></label>");ZPeople.orgStructureTagMap.unit&&filterOptions.bUnitOption&&filterOptions.bUnitOption.length>0&&(txt+='<label class="checkbox DIB"><input type="checkbox" name="zp_attExp_incUnit"><span>'+(ZPeople.orgStructureDispNameMap&&ZPeople.orgStructureDispNameMap.unit?ZPeople.orgStructureDispNameMap.unit:ZPI18N.getString("zp.employeeunit"))+"</span></label>");ZPeople.orgStructureTagMap.division&&filterOptions.divisionOption&&filterOptions.divisionOption.length>0&&(txt+='<label class="checkbox DIB"><input type="checkbox" name="zp_attExp_incDiv"><span>'+(ZPeople.orgStructureDispNameMap&&ZPeople.orgStructureDispNameMap.division?ZPeople.orgStructureDispNameMap.division:ZPI18N.getString("zp.divisionname"))+"</span></label>");return filterOptions.depOption&&filterOptions.depOption.length>0&&(txt+='<label class="checkbox DIB"><input type="checkbox" name="zp_attExp_incDep"><span>'+ZPI18N.getString("zp.lms.department")+"</span></label>"),filterOptions.desgOption&&filterOptions.desgOption.length>0&&(txt+='<label class="checkbox DIB"><input type="checkbox" name="zp_attExp_incDesg"><span>'+ZPI18N.getString("zp.lms.Designation")+"</span></label>"),filterOptions.locOption&&filterOptions.locOption.length>0&&(txt+='<label class="checkbox DIB"><input type="checkbox" name="zp_attExp_incLoc"><span>'+ZPI18N.getString("zp.location")+"</span></label>"),isadmin&&filterOptions.roleOption&&filterOptions.roleOption.length>0&&(txt+='<label class="checkbox DIB"><input type="checkbox" name="zp_attExp_incRole"><span>'+ZPI18N.getString("zp.role")+"</span></label>"),Attendance.organizationTag.isEnabled()&&filterOptions.orgTagOption&&filterOptions.orgTagOption.length>0&&(txt+='<label class="checkbox DIB"><input type="checkbox" name="zp_attExp_incOrgTag"><span>'+ZPeople.orgTagDisplayName+"</span></label>"),txt+="</div>"},getEmpFieldsToBeIncludedInExp:function(){var empFields=[],index=0;return $("input:checkbox[name=zp_export_incEmpFeilds]").prop("checked")&&$("#zp_export_incEmpFeildsDiv").is(":visible")&&($("input:checkbox[name=zp_attExp_incRepTo]").prop("checked")&&(empFields[index++]=0),$("input:checkbox[name=zp_attExp_incEntity]").prop("checked")&&(empFields[index++]=1),$("input:checkbox[name=zp_attExp_incUnit]").prop("checked")&&(empFields[index++]=2),$("input:checkbox[name=zp_attExp_incDiv]").prop("checked")&&(empFields[index++]=3),$("input:checkbox[name=zp_attExp_incDep]").prop("checked")&&(empFields[index++]=4),$("input:checkbox[name=zp_attExp_incDesg]").prop("checked")&&(empFields[index++]=5),$("input:checkbox[name=zp_attExp_incLoc]").prop("checked")&&(empFields[index++]=6),isadmin&&$("input:checkbox[name=zp_attExp_incRole]").prop("checked")&&(empFields[index++]=8),Attendance.organizationTag.isEnabled()&&$("input:checkbox[name=zp_attExp_incOrgTag]").prop("checked")&&(empFields[index++]=9)),empFields},getEmpFieldsToBeIncludedInExpForNewOrOld:function(){return"true"==is5_0Enabled?Attendance.ExportNew.getEmpFieldsToBeIncludedInExp():Attendance.Reports.Export.getEmpFieldsToBeIncludedInExp()},Submit:function(exportModal,params,fileType){var isPdf,path;"true"==is5_0Enabled?isPdf="pdf"===fileType:(isPdf=exportModal,$("#zp_export_container").find("#zp_export_ftype").show());var form=Layout.Page.container.find("#ZPAtt_att_report_exp_form")[0],zplType="admin";if("teamReports"==ZPLite.Reports.selectedTab?zplType="team":"myReports"==ZPLite.Reports.selectedTab&&(zplType="my"),-1!==Layout.Page.pageId.indexOf("reports-"+zplType+"-attendance-daily"))delete(params=Attendance.Reports.dailyReport.getParamsForReport()).mode,delete params.conreqcsr,Attendance.Reports.dailyReport.isChartView()?(path="mode=dailyReportSumExport",delete params.viewStatus):path="mode=dailyReportListExport",$.each(params,function(key,value){path+="&"+key+"="+value}),Attendance.Reports.Export.showEmpFieldsToExp(isPdf)&&(empFields=Attendance.Reports.Export.getEmpFieldsToBeIncludedInExpForNewOrOld()).length>0&&(path+="&empFields="+JSON.stringify(empFields));else if(-1!==Layout.Page.pageId.indexOf("reports-"+zplType+"-attendance-earlybird")){if(delete(params=Attendance.Reports.earlyBirdReport.getParamsForReport()).mode,delete params.conreqcsr,path="mode=attEarlyLateReportExport",Attendance.Reports.Export.showEmpFieldsToExp(isPdf))(empFields=Attendance.Reports.Export.getEmpFieldsToBeIncludedInExpForNewOrOld()).length>0&&(path+="&empFields="+JSON.stringify(empFields));if((dateDiff=moment(params.edate,dateFmt.toUpperCase()).diff(moment(params.sdate,dateFmt.toUpperCase()),"days"))>31)return void ZPeople.Message.showFailureMsg(ZPI18N.getString("zp.datewithinonemonth"));if(dateDiff<0)return void ZPeople.Message.showFailureMsg(ZPI18N.getString("zp.greaterfromdate"));$.each(params,function(key,value){path+="&"+key+"="+value})}else if(-1!==Layout.Page.pageId.indexOf("reports-"+zplType+"-attendance-status")){delete(params=Attendance.Reports.statusReport.getParamsForReport()).mode,delete params.conreqcsr,path="mode=monthlyReportExport",Attendance.Reports.statusReport.isHoursView()&&(path+="&reportType=hours",("true"==is5_0Enabled&&exportModal.find("#incAttEntries")[0].checked||"true"!=is5_0Enabled&&$("#zp_export_container").find("#zp_export_inctabularsec input:checkbox")[0].checked)&&(path+="&includeCheckInOut="+!0));var fromDate=new Date(moment(params.sdate,Attendance.Reports.dateFormat.toUpperCase())._d),toDate=new Date(moment(params.edate,Attendance.Reports.dateFormat.toUpperCase())._d);if(fromDate.getTime()>toDate.getTime())return void ZPeople.Message.showFailureMsg(ZPI18N.getString("zp.greaterfromdate"));if(moment(params.edate,Attendance.Reports.dateFormat.toUpperCase()).diff(moment(params.sdate,Attendance.Reports.dateFormat.toUpperCase()),"days")>31)return void ZPeople.Message.showFailureMsg(ZPI18N.getString("zp.datewithinonemonth"));if(Attendance.Reports.Export.showEmpFieldsToExp(isPdf))(empFields=Attendance.Reports.Export.getEmpFieldsToBeIncludedInExpForNewOrOld()).length>0&&(path+="&empFields="+JSON.stringify(empFields));$.each(params,function(key,value){path+="&"+key+"="+value})}else if(-1!==Layout.Page.pageId.indexOf("reports-"+zplType+"-attendance-officeVsRemoteStatus")){if(delete(params=Attendance.Reports.officeRemCReport.getParamsForReport()).mode,delete params.conreqcsr,path="mode=officeRemoteCountReportExport",(dateDiff=moment(params.edate,dateFmt.toUpperCase()).diff(moment(params.sdate,dateFmt.toUpperCase()),"days"))>366)return void ZPeople.Message.showFailureMsg(ZPI18N.getString("zp.datewithinoneyear"));fromDate=new Date(moment(params.sdate,Attendance.Reports.dateFormat.toUpperCase())._d),toDate=new Date(moment(params.edate,Attendance.Reports.dateFormat.toUpperCase())._d);if(fromDate.getTime()>toDate.getTime())return void ZPeople.Message.showFailureMsg(ZPI18N.getString("zp.greaterfromdate"));if(Attendance.Reports.Export.showEmpFieldsToExp(isPdf))(empFields=Attendance.Reports.Export.getEmpFieldsToBeIncludedInExpForNewOrOld()).length>0&&(path+="&empFields="+JSON.stringify(empFields));$.each(params,function(key,value){path+="&"+key+"="+value})}else if(-1!==Layout.Page.pageId.indexOf("reports-"+zplType+"-attendance-summary")){if(delete(params=Attendance.Reports.summaryReport.getParamsForReport()).mode,delete params.conreqcsr,path="mode=customReportExport",Attendance.Reports.summaryReport.isHoursView()?path+="&reportType=hours":path+="&reportType=days",fromDate=new Date(moment(params.sdate,Attendance.Reports.dateFormat.toUpperCase())._d),toDate=new Date(moment(params.edate,Attendance.Reports.dateFormat.toUpperCase())._d),fromDate.getTime()>toDate.getTime())return void ZPeople.Message.showFailureMsg(ZPI18N.getString("zp.greaterfromdate"));if(moment(params.edate,Attendance.Reports.dateFormat.toUpperCase()).diff(moment(params.sdate,Attendance.Reports.dateFormat.toUpperCase()),"days")>31)return void ZPeople.Message.showFailureMsg(ZPI18N.getString("zp.datewithinonemonth"));if(Attendance.Reports.Export.showEmpFieldsToExp(isPdf))(empFields=Attendance.Reports.Export.getEmpFieldsToBeIncludedInExpForNewOrOld()).length>0&&(path+="&empFields="+JSON.stringify(empFields));Layout.Page.container.find("#filterDiv").find('[name="reportTypeFilter"]').find("input").is(":checked")&&(path+="&isSimpleRep=true"),$.each(params,function(key,value){path+="&"+key+"="+value})}else if(-1!==Layout.Page.pageId.indexOf("reports-"+zplType+"-attendance-user")){var dateDiff;if(path="mode=userDetailsExport",delete(params=Attendance.Reports.userReport.getParamsForReport()).mode,delete params.conreqcsr,Attendance.Reports.Export.showEmpFieldsToExp(isPdf))(empFields=Attendance.Reports.Export.getEmpFieldsToBeIncludedInExpForNewOrOld()).length>0&&(path+="&empFields="+JSON.stringify(empFields));if((dateDiff=moment(params.edate,dateFmt.toUpperCase()).diff(moment(params.sdate,dateFmt.toUpperCase()),"days"))<0)return void ZPeople.Message.showFailureMsg(ZPI18N.getString("zp.greaterfromdate"));$.each(params,function(key,value){"erecno"==key?""!==value&&"0"!==value&&value!==erecno&&(path+="&eNo="+value):path+="&"+key+"="+value}),fromDate=new Date(moment(params.sdate,Attendance.Reports.dateFormat.toUpperCase())._d),toDate=new Date(moment(params.edate,Attendance.Reports.dateFormat.toUpperCase())._d);var allowExportForOneYear=!0;if("true"==is5_0Enabled){if(exportModal){var incAllUsers=exportModal.find("#incAllUsers")[0];if(incAllUsers&&incAllUsers.checked){allowExportForOneYear=!1,path+="&exportForAllUsers="+!0,null!==(userexport_loc=0!=exportModal.find("#locFilter").length&&ZPeopleComponents.tokenfield(exportModal.find("#locFilter")).getSelectedValuesId())&&void 0!==userexport_loc&&userexport_loc.length>0&&(path+="&filterLocId="+JSON.stringify(userexport_loc)),null!==(userexport_dept=0!=exportModal.find("#depFilter").length&&ZPeopleComponents.tokenfield(exportModal.find("#depFilter")).getSelectedValuesId())&&void 0!==userexport_dept&&userexport_dept.length>0&&(path+="&filterDeptId="+JSON.stringify(userexport_dept));var userexport_role=0!=exportModal.find("#roleFilter").length&&ZPeopleComponents.tokenfield(exportModal.find("#roleFilter")).getSelectedValuesId();isadmin&&null!==userexport_role&&void 0!==userexport_role&&userexport_role.length>0&&(path+="&filterRoleId="+JSON.stringify(userexport_role)),null!==(userexport_shift=0!=exportModal.find("#shiftFilter").length&&ZPeopleComponents.tokenfield(exportModal.find("#shiftFilter")).getSelectedValuesId())&&void 0!==userexport_shift&&userexport_shift.length>0&&(path+="&filterShiftId="+JSON.stringify(userexport_shift))}var incAttEntries=exportModal.find("#incAttEntries")[0];!isPdf&&incAttEntries&&(path+="&includeAllEnt="+incAttEntries.checked)}if(allowExportForOneYear){var afterOneYearDate=new Date(fromDate.getFullYear()+1,fromDate.getMonth(),fromDate.getDate());if(toDate.getTime()>afterOneYearDate)return void ZPeople.Message.showFailureMsg(ZPI18N.getString("zp.datewithinoneyear"))}else{if(moment(params.edate,Attendance.Reports.dateFormat.toUpperCase()).diff(moment(params.sdate,Attendance.Reports.dateFormat.toUpperCase()),"days")>31)return void ZPeople.Message.showFailureMsg(ZPI18N.getString("zp.datewithinonemonthforbulkexport"))}}else{if($("#zp_export_container").find("#zp_export_inctabularsec").is(":visible")&&$("#zp_export_container").find("#zp_export_inctabularsec input:checkbox")[0].checked){var userexport_loc,userexport_dept;allowExportForOneYear=!1,path+="&exportForAllUsers="+!0,null!==(userexport_loc=$("#zp_export_container #zp_userexport_loc").val())&&void 0!==userexport_loc&&userexport_loc.length>0&&(path+="&filterLocId="+JSON.stringify(userexport_loc)),null!==(userexport_dept=$("#zp_export_container #zp_userexport_dept").val())&&void 0!==userexport_dept&&userexport_dept.length>0&&(path+="&filterDeptId="+JSON.stringify(userexport_dept));var userexport_shift;userexport_role=$("#zp_export_container #zp_userexport_role").val();isadmin&&null!==userexport_role&&void 0!==userexport_role&&userexport_role.length>0&&(path+="&filterRoleId="+JSON.stringify(userexport_role)),null!==(userexport_shift=$("#zp_export_container #zp_userexport_shift").val())&&void 0!==userexport_shift&&userexport_shift.length>0&&(path+="&filterShiftId="+JSON.stringify(userexport_shift))}if(!isPdf&&$("#zp_userexport_include_all_entries").length>0&&null!==$("#zp_userexport_include_all_entries").val()&&(path+="&includeAllEnt="+$("#zp_userexport_include_all_entries input:checkbox")[0].checked),allowExportForOneYear){afterOneYearDate=new Date(fromDate.getFullYear()+1,fromDate.getMonth(),fromDate.getDate());if(toDate.getTime()>afterOneYearDate)return void ZPeople.Message.showFailureMsg(ZPI18N.getString("zp.datewithinoneyear"))}else{var afterOneMonthDate=new Date(fromDate.getFullYear(),fromDate.getMonth()+1,fromDate.getDate());if(toDate.getTime()>afterOneMonthDate)return void ZPeople.Message.showFailureMsg(ZPI18N.getString("zp.datewithinonemonthforbulkexport"))}}}else if(-1!==Layout.Page.pageId.indexOf("reports-"+zplType+"-attendance-overtime")){if(delete(params=Attendance.Reports.overtimeReport.getParamsForReport()).mode,delete params.conreqcsr,path="mode=attOtRepExport",params.rpSettId&&(path+="&navigate="+Attendance.Reports.overtimeReport.navigate),$.each(params,function(key,value){path+="&"+key+"="+value}),Layout.Page.container.find("#dateNavigatorText").data("fromDay")&&(path+="&fromDay="+Layout.Page.container.find("#dateNavigatorText").data("fromDay"),path+="&toDay="+Layout.Page.container.find("#dateNavigatorText").data("toDay")),Attendance.Reports.Export.showEmpFieldsToExp(isPdf))(empFields=Attendance.Reports.Export.getEmpFieldsToBeIncludedInExpForNewOrOld()).length>0&&(path+="&empFields="+JSON.stringify(empFields))}else if(-1!==Layout.Page.pageId.indexOf("reports-"+zplType+"-attendance-vaccine")){if(delete(params=Attendance.Reports.vaccineReport.getParamsForReport()).mode,delete params.conreqcsr,path="mode=vaccineReportExport",$.each(params,function(key,value){path+="&"+key+"="+value}),Attendance.Reports.Export.showEmpFieldsToExp(isPdf))(empFields=Attendance.Reports.Export.getEmpFieldsToBeIncludedInExpForNewOrOld()).length>0&&(path+="&empFields="+JSON.stringify(empFields))}else if(-1!==Layout.Page.pageId.indexOf("reports-"+zplType+"-attendance-musterroll")){delete(params=Attendance.Reports.musterrollReport.getParamsForReport()).mode,delete params.conreqcsr,path="mode=musterrollReportExport",Attendance.Reports.musterrollReport.isHoursView()&&(path+="&reportType=hours");fromDate=new Date(moment(params.sdate,Attendance.Reports.dateFormat.toUpperCase())._d),toDate=new Date(moment(params.edate,Attendance.Reports.dateFormat.toUpperCase())._d);if(fromDate.getTime()>toDate.getTime())return void ZPeople.Message.showFailureMsg(ZPI18N.getString("zp.greaterfromdate"));if(moment(params.edate,Attendance.Reports.dateFormat.toUpperCase()).diff(moment(params.sdate,Attendance.Reports.dateFormat.toUpperCase()),"days")>31)return void ZPeople.Message.showFailureMsg(ZPI18N.getString("zp.datewithinonemonth"));var empFields;if(Attendance.Reports.Export.showEmpFieldsToExp(isPdf))(empFields=Attendance.Reports.Export.getEmpFieldsToBeIncludedInExpForNewOrOld()).length>0&&(path+="&empFields="+JSON.stringify(empFields));$.each(params,function(key,value){path+="&"+key+"="+value})}else if(-1!==Layout.Page.pageId.indexOf("reports-"+zplType+"-attendance-otpolicy")){delete(params=Attendance.Reports.article36.getParamsForReport()).mode,delete params.conreqcsr,path="mode=article36ReportExport";fromDate=new Date(moment(params.sdate,Attendance.Reports.dateFormat.toUpperCase())._d),toDate=new Date(moment(params.edate,Attendance.Reports.dateFormat.toUpperCase())._d);if(fromDate.getTime()>toDate.getTime())return void ZPeople.Message.showFailureMsg(ZPI18N.getString("zp.greaterfromdate"));if(moment(params.edate,Attendance.Reports.dateFormat.toUpperCase()).diff(moment(params.sdate,Attendance.Reports.dateFormat.toUpperCase()),"days")>31)return void ZPeople.Message.showFailureMsg(ZPI18N.getString("zp.datewithinonemonth"));$.each(params,function(key,value){path+="&"+key+"="+value})}if("true"==is5_0Enabled)path+="&exportType="+fileType;else{var expType=$("#zp_export_container").find("input[name='zp_ftype']:checked").val();isPdf&&(expType="pdf"),path+="&exportType="+expType}0===$(form).children().length&&$(form).append("<input type='hidden' name='conreqcsr' value='"+csrfToken+"'>"),path=encodeURI(path),form.action="AttendanceExport.zp?"+path,form.submit(),ZPeople.Message.showWarningMsg(ZPI18N.getString("zp.generatingreport"),1e3)}},printReport:function(divid,date){var newWindow=window.open(window.location.href,window.name);newWindow.focus();var newContent='<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html>',copyhead=$("head").clone();copyhead.find("script").each(function(){$(this).remove()});var wholeCont=$("#"+Layout.Page.pageId).clone();$(wholeCont).find("#reports-page").addClass("zpl_allreports"),$(wholeCont).find(".lt_nav").find(".fil").remove(),$(wholeCont).find(".lt_nav").find(".tfilter").remove(),$(wholeCont).find(".lt_nav").attr("style","padding:10px"),$(wholeCont).find(".nav_rht .ln").remove(),$(wholeCont).find("iframe").remove(),$(wholeCont).find("form").remove(),$(wholeCont).find(".sstab").remove(),$(wholeCont).find(".home").remove(),$(wholeCont).find(".prev").remove(),$(wholeCont).find(".next").remove(),$(wholeCont).find("[name=reportName]").attr("style","display:none"),$(wholeCont).find("[name=showRelatedReports]").find("span").css("max-width","300px"),$(wholeCont).find("[name=showRelatedReports]").removeClass("more showRelatedReports"),$(wholeCont).find("[name=employeeFilter_Text]").css("max-width","none"),$(wholeCont).find("[name=employeeFilter_Options]").remove(),$(wholeCont).find("#pageDiv").removeClass("shw_tfilter");var tabCont=$(wholeCont).find(".table_responsive");tabCont[0]&&tabCont.css("margin-bottom","40px"),$(wholeCont).find(".zpl_allreports .table > tbody > tr.ZPLRow > td:first-child").attr("style","background:#ffff"),Attendance.Reports.showHideColumnsInPrintReport(wholeCont),$(wholeCont).find(".table_responsive")[0]&&($(wholeCont).find(".table_responsive").find("li").removeAttr("class"),$(wholeCont).find(".table_responsive").find("a").removeAttr("href"),$(wholeCont).find(".table_responsive").find("a").removeAttr("data-toggle"),$(wholeCont).find(".table_responsive").find(".ZPLRow").find(".lt_title").addClass("DNI"),$(wholeCont).find(".table_responsive").find(".ZPLHRow th").attr("style","background:#e5e5f0!important;border-color:#ffff!important;border-bottom: 1px solid #ffff!important;"),$(wholeCont).find(".tfilter").hide(),$(wholeCont).find(".table_responsive").find("desc").removeClass("CP")),$(wholeCont).find(".lt_btn").css("max-width","500px").css("float","left"),$(wholeCont).find(".ZPNdata").remove();var datCont=wholeCont.find(".ZPDat");datCont[0]&&($(wholeCont).find(".ZPDat").css("width","100%"),datCont.css("left","0px"),datCont.css("bottom","0px"),datCont.find("li").removeAttr("class"),datCont.find("a").removeAttr("href").removeAttr("data-toggle"),$("#"+Layout.Page.pageId).find(".ZPDat").find("li")[0]&&(datCont.css("right","inherit"),datCont.css("height","140px"),datCont.find("li").children().first().removeAttr("style"),$(datCont.find("li")[0].children).css("padding-bottom","15px").css("padding-top","25px"),$(datCont.find("li")[1].children).css("padding-bottom","23px").css("padding-top","18px"),$(wholeCont).find(".ZPDat").find(".ZPBC1").remove()),$(wholeCont).find("#ZPAttUserSum_Days").addClass("active in MT5").css("width","100%"),$(wholeCont).find("#ZPAttUserSum_Hours").addClass("active in MT20"));var compLogoClass="true"==is5_0Enabled||1==is5_0Enabled?".zpl_mnLgo.CP":".ZPHeadLft",logoCont=$(compLogoClass).clone();if($(logoCont).find("i").remove(),newContent+=copyhead.html(),newContent+='<body onload="self.print()" style="overflow: scroll;width:100%;background: #fff">',!Attendance.isInEmbedPage){logoCont=$(compLogoClass).clone();$(logoCont).find("i").remove(),$(logoCont).find("#zp_minimax_leftpanel").remove(),newContent+="true"==is5_0Enabled||1==is5_0Enabled?'<div class="zpl_mnLgo CP" >'+logoCont.html()+"</div>":'<div class="ZPHeadLft" >'+logoCont.html()+"</div>"}newContent+=wholeCont.html(),newWindow.document.write(newContent),newWindow.document.close()},showHideColumnsInPrintReport:function(wholeCont){let idArr="ZPAtt_attLateComerRepDateHeader,ZPAtt_showHidePaidBreakUserReport,ZPAtt_showHideUnpaidBreakUserReport,ZPAtt_showHidePermission,ZPAtt_showHidePaidBreakDailyReport,ZPAtt_showHideUnpaidBreakDailyReport,ZPAtt_showHidePermissionDailyReport,ZPAtt_showHidePayableDays,ZPAtt_showHidePayableHours,ZPAtt_simpSumDayReport_showHidePayableDays_paidOff,ZPAtt_simpSumDayReport_showHidePayableDays,ZPAtt_simpSumHourReport_showHidePayableHours_paidOff,ZPAtt_simpSumHourReport_showHidePayableHours".split(",");$.each(idArr,function(index,value){0!==$(wholeCont).find("#"+value).length&&$(wholeCont).find("#"+value)[0].style.cssText.includes("display: none;")&&$(wholeCont).find("#"+value).remove()})}},Attendance.Reports.NewReportImport={construct:function(){$.post("/AttendanceAction.zp",{mode:"getPendingImportInfo",type:"balanceOtReport",conreqcsr:csrfToken},function(rdata){"empty"!==rdata.tableInfo.tableHeaders&&Attendance.ImportNew.partialImportedDataShow(rdata.tableInfo)}),Attendance.ImportNew.details={},Attendance.ImportNew.details.fileSlider=Attendance.Reports.NewReportImport.getImportSlider,Attendance.ImportNew.details.getMappingSliderHtml=Attendance.Reports.NewReportImport.getMappingSliderHtml,Attendance.ImportNew.details.getVerifySliderHtml=Attendance.Reports.NewReportImport.getVerifySliderHtml,Attendance.ImportNew.details.getImportSummaryHtml=Attendance.Reports.NewReportImport.getImportSummaryHtml,Attendance.ImportNew.details.autoMappingFields=Attendance.Reports.NewReportImport.autoMappingFields,Attendance.ImportNew.details.hideUnHideDateFmt=Attendance.Reports.NewReportImport.hideUnHideDateFmt,Attendance.ImportNew.details.submitMapping=Attendance.Reports.NewReportImport.submitMapping,Attendance.ImportNew.details.module="BalanceOtReport",Attendance.ImportNew.construct()},getImportSlider:function(){var content='<div class="zpl_crd" id="importCont"><div id="importFileDiv1" class="zpl_crdcnt">'+Attendance.ImportNew.getPendingImportHtmlSecn()+'<div class="zpl_secn"><div><div class="zpl_upld"><div class="zpl_fldrp"><div class="zpl_mdimprtimg"></div><h4>'+ZPI18N.getString("zp.fileimported")+"</h4><p>"+ZPI18N.getString("zp.formfomtsupportxlscsv")+'</p><div><input style="display:none" type="file" accept=".xls,.xlsx,.csv" elem="AttConfigImportFile"><button elem="AttConfigImportButton" class="zlabel zlabel--blue zlabel--medium">'+ZPI18N.getString("zp.importfile")+"</button></div><p>"+ZPI18N.getString("zp.maxfilesize")+'</p><p elem="filehelp"><a elem="downloadSampleTemplate" onclick="Attendance.Reports.NewReportImport.downloadSample();"><b>'+ZPI18N.getString("zp.shiftmapping.sampleFileImport")+"</b></a></p></div></div></div></div>";return content+='<div class="zpl_secn"><div><h5>'+ZPI18N.getString("zp.supportedformats")+"</h5></div>",content+='<div class="zpl_tblres"><table class="zpl_tbl wd100_per zpl_nocrsor">',content+="<thead><tr><th></th><th>A</th><th>B</th><th>C</th>",content+="</tr></thead>",content+="<tbody><tr><td><span>1</span></td>",content+="<td><span>"+ZPI18N.getString("zp.emailemployeeid")+"</span></td>",content+="<td><span>"+ZPI18N.getString("zp.paidhours")+"</span></td>",content+="<td><span>"+ZPI18N.getString("zp.adjustHours")+" / "+ZPI18N.getString("zp.leave.initialbalance")+"</span></td>",content+="</tr>",content+="<tr><td><span>2</span></td>",content+="<td><span>tony@zillum.com</span></td>",content+="<td><span>56:00</span></td>",content+="<td><span>01:00</span></td></tr>",content+="<tr><td><span>3</span></td>",content+="<td><span>ZCON001</span></td>",content+="<td><span>48:00</span></td>",content+="<td><span>01:30</span></td>",content+="</tr>",content+="</tbody></table></div></div></div>",content+='<div id="importFileDiv2" class="zpl_crdcnt DN"><div class="zpl_secn"><div><div class="zpl_upld"><div class="zpl_fldrp"><div class="zpl_mdimprtimg"></div><i class="IC-docs blu" style="font-size: 28px;"></i><p elem="importFormConfigfileName"></p><button elem="AttfileUploadedButton" class="zlabel zlabel--blue zlabel--medium"></button></div></div></div></div></div></div><div class="DN" id="loadingImportDiv"></div>'},hideUnHideDateFmt:function(cont){"csv"===Attendance.ImportNew.fileFormat?cont.find("#date_fmtEntry").find("label").removeClass("zp_mdt").addClass("zp_mdt"):cont.find("#date_fmtEntry").find("label").removeClass("zp_mdt")},getMappingSliderHtml:function(){return'<div class="zpl_btnmnu"><div><ul class="zpl_grpmnu"><li elem="mapUnMapDiv" value= "All"class="zpl_act">All</li><li elem="mapUnMapDiv" value = "Mapped">Mapped <div id="mappedNo"><b></b></div></li><li elem="mapUnMapDiv" value="Unmapped">Unmapped <div id="unMappedNo"><b></b></div></li></ul></div><div class="zpl_rgt"><button data-popup-open="import_Resetfields" class="zlabel zlabel--red zlabel--medium zlabel--outline" onclick="Att_Common_Operations.confirmpopUp(\'AttImportReset\', Attendance.ImportNew.resetFields,undefined,1);">Reset fields</button></div></div><div class="zpl_rgtcnt zpl_crdwthful"><div class="zpl_crd"><div class="zpl_crdcnt zpl_colpanls" data-toggle-button-position="right" aria-multiselectable="true"><div id="Attimport_mapping_collapseDiv"><div><div <h4="">Basic information</div> </div><div><div class="zpl_secn zpl_twoclum" elem="rowContainer"><div><div elem="mappingFieldDiv"><label class="zpl_mtry">'+ZPI18N.getString("zp.emailemployeemapperid")+'</label><select class="select-js" id="empDetCol_map" style="display: none;"></select></div></div><div><div elem="mappingFieldDiv"><label class="zpl_mtry">'+ZPI18N.getString("zp.adjustHours")+" / "+ZPI18N.getString("zp.leave.initialbalance")+'</label><div class="d-flexcap a-itm-cntr"><select id="adjustHrsBalance_map" class="select-js" style="display: none;"></select></div></div></div></div><div class="zpl_secn zpl_twoclum" elem="rowContainer"><div><div elem="mappingFieldDiv"><label class="zpl_mtry">'+ZPI18N.getString("zp.paidhours")+'</label><select id="paidHrs_map" class="select-js" style="display: none;"></select></div></div></div></div></div></div></div></div></div>'},getVerifySliderHtml:function(){return'<div class="zpl_rgtcnt zpl_crdwthful"><div class="zpl_crd"><div class="zpl_crdcnt zpl_colpanls" data-toggle-button-position="right" aria-multiselectable="true"><div id="Attimport_verify_collapseDiv"><div><div><h4="">Basic information</div></div><div><div class="zpl_secn zpl_twoclum" elem="rowContainer"><div><div elem="mappingFieldDiv"><label class="zpl_mtry">'+ZPI18N.getString("zp.emailemployeemapperid")+'</label><select class="select-js" id="empDetCol" style="display: none;"></select></div></div><div><div elem="mappingFieldDiv"><label class="zpl_mtry">'+ZPI18N.getString("zp.adjustHours")+" / "+ZPI18N.getString("zp.leave.initialbalance")+'</label><div class="d-flexcap a-itm-cntr"><select id="adjustHrsBalance" class="select-js" style="display: none;"></select></div></div></div></div><div class="zpl_secn zpl_twoclum" elem="rowContainer"><div><div elem="mappingFieldDiv"><label class="zpl_mtry">'+ZPI18N.getString("zp.paidhours")+'</label><select id="paidHrs" class="select-js" style="display: none;"></select></div></div></div></div></div></div></div></div>'},getImportSummaryHtml:function(resultData){var html='<div class="zpl_imprtrecordvw"><div class="zpl_secn"><div><div class="zpl_imprtrecord"><div><i class="IC-task-chk grn"></i>The selected file has been imported successfully</div><button type="button" class="zlabel zlabel--blue zlabel--medium" onclick="Attendance.Reports.NewReportImport.viewRecords()">View records</button></div></div></div></div><div class="zpl_btnmnu"><div><ul class="zpl_grpmnu"><li>Records added <b>'+resultData.msg.successCount+"</b></li><li>Total records <b>"+resultData.msg.totalCount+"</b></li><li>Skipped records <b>"+(resultData.msg.errorCount?resultData.msg.errorCount:0)+"</b></li><li>Error in records <b>"+(resultData.msg.errorCount?resultData.msg.errorCount:0)+"</b></li></ul></div></div>";if(resultData.msg.emptyEmpIds&&resultData.msg.emptyEmpIds.length>0||resultData.msg.skippedEmpInfo&&resultData.msg.skippedEmpInfo.length>0){if(html+=' <div class="zpl_rgtcnt"><div class="zpl_tblres"> <table class="zpl_tbl"><thead><tr><th>'+ZPI18N.getString("zp.errorDetails")+"</th><th></th></tr></thead><tbody>",resultData.msg.skippedEmpInfo.length>0){var skipped="",length=resultData.msg.skippedEmpInfo.length;for(i=0;i<length;i++)skipped=""==skipped?resultData.msg.skippedEmpInfo[i]:skipped+","+resultData.msg.skippedEmpInfo[i];html+="<tr><td><span>"+ZPI18N.getString("zp.invalidempinfo")+"</td><td>"+skipped+"</span></td></tr>"}if(resultData.msg.emptyEmpIds.length>0){skipped="",length=resultData.msg.emptyEmpIds.length;for(i=0;i<length;i++)skipped=""==skipped?resultData.msg.emptyEmpIds[i]:skipped+","+resultData.msg.emptyEmpIds[i];html+="<tr><td><span>"+ZPI18N.getString("zp.emptyempids")+"</td><td>"+skipped+"</span></td></tr>"}html+="</tbody></table></div></div>"}return resultData.msg.errorInfo.length>0&&(html+=' <div class="zpl_rgtcnt"><div class="zpl_tblres"> <table class="zpl_tbl"><thead><tr><th>'+ZPI18N.getString("zp.rownoofquickimport")+"</th><th>"+ZPI18N.getString("zp.errorDetails")+"</th></tr></thead><tbody>",resultData.msg.errorInfo.forEach(function(obj,index){for(html+="<tr><td><span>"+obj[0]+"</td>",i=1;i<obj.length;i++)1==i?html+="<td>"+obj[i]:html+="<br/>"+obj[i];html+="</span></td></tr>"}),html+="</tbody></table></div></div>"),html},submitMapping:function(){var container=Attendance.ImportNew.importContainer.find("#Attimport_verify_card"),si_Id=ZPeopleComponents.select(container.find("#empDetCol")).getValue(),si_paidHrs=ZPeopleComponents.select(container.find("#paidHrs")).getValue(),si_adjHrs=ZPeopleComponents.select(container.find("#adjustHrsBalance")).getValue();if(0!==si_Id)if(0!==si_adjHrs||0!==si_paidHrs){var param={mode:"balRepImportMapping",mailId:si_Id,conreqcsr:csrfToken,modeVal:"Operations"};0!==si_adjHrs&&(param.adjustHrs=si_adjHrs),0!==si_paidHrs&&(param.paidHrs=si_paidHrs),"csv"!==Attendance.ImportNew.fileFormat||param.dateFormat?(Attendance.ImportNew.importContainer.find("#Attimport_summary_card").html(ZPeople.LOADING_HTML),$.post("/AttendanceAction.zp",param,function(resultData){Attendance.ImportNew.importSummary(resultData)})):Attendance.ImportNew.showFailureMsgForImport()}else ZPeople.Message.showFailureMsg(ZPI18N.getString("zp.chooseadjorpiadhrs"));else ZPeople.Message.showFailureMsg(ZPI18N.getString("zp.choosereqcolumns"))},autoMappingFields:function(cont,rArray){for(var i in rArray)rArray[i].toLowerCase().includes("paid")?ZPeopleComponents.select(cont.find("#paidHrs_map")).setValue(i):rArray[i].toLowerCase().includes("adjust")||rArray[i].toLowerCase().includes("balance")?ZPeopleComponents.select(cont.find("#adjustHrsBalance_map")).setValue(i):(rArray[i].toLowerCase().includes("mail")||rArray[i].toLowerCase().includes("employee"))&&ZPeopleComponents.select(cont.find("#empDetCol_map")).setValue(i)},downloadSample:function(){var formObj=$("<form id='ZPLeave_exp_form' action='AttendanceAction.zp?mode=otImportTemplate' method='post' target='exportresp1' style='display:none'/>").html("");formObj.append('<input type="hidden" value="'+csrfToken+'" name="conreqcsr"/>'),$("body").append(formObj),formObj.submit()},viewRecords:function(){Attendance.ImportNew.importContainer.find("#closeMark").trigger("click"),ZPTabs.changeTab("reports/admin/attendance/overtime")}},Attendance.Reports.ReportImport={showImport:function(){ZPeople.BSModal.show($("#"+Layout.Page.pageId+" #ZPAtt_report_importPopup"));var layout=Layout.Page.container,layoutId="#"+$(layout).attr("id");$(layoutId+" #ZPAtt_report_importSuccMsg").hide(),$(layoutId+" #ZPAtt_report_importSuccvalues").hide(),$(layoutId+" #ZPAtt_report_import").parent().parent().removeAttr("class"),$(layoutId+" #ZPAtt_report_import").fadeIn(300),$(layoutId+" #ZPAtt_report_impEx").fadeIn(300),$(layoutId+" #ZPAtt_report_importFileConf").hide(),$(layoutId+" #ZPAtt_report_importMap").hide(),$(layoutId+" #ZPAtt_report_importInput").val(""),$(layoutId+" #ZPAtt_report_importDesc").after($(layoutId+" #ZPAtt_report_importInputCont").show()),$(layoutId+" #ZPAtt_report_importInputCont span").text(ZPI18N.getString("zp.importfile")),$(layoutId+" #ZPAtt_report_importInputCont").attr("class","btn btn-primary ZPbtnDefault"),$(layoutId+" #ZPAtt_report_importNext").hide(),$(layoutId+" #ZPAtt_report_importPrevious").hide(),$(layoutId+" #ZPAtt_report_importHeader li").first().attr("class","active"),$(layoutId+" #ZPAtt_report_importHeader li").last().removeAttr("class"),Layout.Page.container.find("#ZPAtt_report_importHeader .modal-body").find("#zp_page_loading").remove(),Layout.Page.container.find("#ZPAtt_report_importHeader .modal-body").children().show(),Attendance.Reports.ReportImport.getPendingImport(),Layout.Page.container.find("#importErrDiv").hide()},onInputChange:function(){var layout=Layout.Page.container,layoutId="#"+$(layout).attr("id"),fileName=$(layoutId+" #ZPAtt_report_importInput").val();$(layoutId+" #ZPAtt_report_importProgress").hide(),$(layoutId+" #ZPAtt_report_importProgress").next().show(),fileName=fileName.replace("C:\\fakepath\\",""),$(layoutId+" #ZPAtt_report_importFName").text(fileName),$(layoutId+" #ZPAtt_report_importSuccMsg").hide(),$(layoutId+" #ZPAtt_report_importSuccvalues").hide(),$(layoutId+" #ZPAtt_report_importProgress").after($(layoutId+" #ZPAtt_report_importInputCont")),$(layoutId+" #ZPAtt_report_importInputCont span").text(ZPI18N.getString("zp.removeandnew")),$(layoutId+" #ZPAtt_report_importInputCont").attr("class","btn btn-default ZPbtnDefault");var extn=fileName.split(".").pop();"xls"===extn||"csv"===extn?($(layoutId+" #ZPAtt_report_importFName").next().attr("class","IC-rou-tik ML5 filetck"),$(layoutId+" #ZPAtt_report_importNext").fadeIn(300),Layout.Page.container.find("#ZPAtt_report_importNext").attr("disabled",!1),$(layoutId+" #ZPAtt_report_importNext").unbind("click").bind("click",function(){Attendance.Reports.ReportImport.submitImport()})):($(layoutId+" #ZPAtt_report_importFName").next().attr("class","IC-r-close ML5 PR S18 red"),$(layoutId+" #ZPAtt_report_importNext").hide(),$(layoutId+" #ZPAtt_report_importInput").val(""),""===$(layoutId+" #ZPAtt_report_importFName").text()&&$(layoutId+" #ZPAtt_report_importFName").text(ZPI18N.getString("zp.choosefile"))),$(layoutId+" #ZPAtt_report_import").hide(),$(layoutId+" #ZPAtt_report_impEx").hide(),$(layoutId+" #ZPAtt_report_importFileConf").fadeIn(300),$(layoutId+" #ZPAtt_report_importMap").hide()},submitImport:function(){var layout=Layout.Page.container,layoutId="#"+$(layout).attr("id");$(layoutId+" #ZPAtt_report_importNext").unbind("click"),Attendance.Reports.ReportImport.ProgressBarWidth=0,$(layoutId+" #ZPAtt_report_importProgress").next().hide(),$(layoutId+" #ZPAtt_report_importProgress div").width(Attendance.Reports.ReportImport.ProgressBarWidth+"%").parent().show(),Attendance.Reports.ReportImport.showProgress();var form=$("#ZPAtt_report_importInput")[0].form;""!==$(layoutId+" #ZPAtt_report_importInput").val()&&(Layout.Page.container.find("#ZPAtt_report_importNext").attr("disabled","disabled"),$(layoutId+" #ZPAtt_report_importFormCsrf").val(csrfToken),form.action="AttendanceImport.zp",form.submit())},ProgressBarWidth:0,showProgress:function(){var layout=Layout.Page.container,layoutId="#"+$(layout).attr("id");$(layoutId+" #ZPAtt_report_importProgress div").width(Attendance.Reports.ReportImport.ProgressBarWidth+"%"),Attendance.Reports.ReportImport.ProgressBarWidth+=2,Attendance.Reports.ReportImport.ProgressBarWidth<=99&&setTimeout(Attendance.Reports.ReportImport.showProgress,1)},getPendingImport:function(){var layout=Layout.Page.container,layoutId="#"+$(layout).attr("id"),pendingMsg=$(layoutId+" #ZPAtt_report_importMsg");pendingMsg.parent().hide();var param={mode:"getPendingImportInfo",conreqcsr:csrfToken,type:"balanceOtReport"};$.post("/AttendanceAction.zp",param,function(rdata){"empty"===rdata.tableInfo.tableHeaders?(pendingMsg.unbind("click"),pendingMsg.html(""),pendingMsg.parent().hide()):(pendingMsg.attr("class","blu CP"),pendingMsg.unbind("click").bind("click",function(){Attendance.Reports.ReportImport.showMapping(rdata.tableInfo)}),pendingMsg.html(rdata.tableInfo.recordCount+" "+ZPI18N.getString("zp.recordspending")),pendingMsg.parent().fadeIn(300))})},showMapping:function(obj){var layout=Layout.Page.container,layoutId="#"+$(layout).attr("id");Layout.Page.container.find("#ZPAtt_report_importNext").attr("disabled",!1),$(layoutId+" #ZPAtt_report_import").hide(),$(layoutId+" #ZPAtt_report_impEx").hide(),$(layoutId+" #ZPAtt_report_importFileConf").hide(),$(layoutId+" #ZPAtt_report_importMap").fadeIn(300),$(layoutId+" #ZPAtt_report_importPrevious").fadeIn(300),$(layoutId+" #ZPAtt_report_importNext").fadeIn(300),$(layoutId+" #ZPAtt_report_importHeader li").last().attr("class","active"),$(layoutId+" #ZPAtt_report_importNext").unbind("click").bind("click",function(){Attendance.Reports.ReportImport.submitMappingBalOrRep(obj.fileFormat)});var rArray=obj.tableHeaders,res="<option value='None' selected='selected'>-- "+ZPI18N.getString("zp.select")+" --</option>";for(var i in rArray)res+="<option value='"+i+"'>"+rArray[i]+"</option>";$(layoutId+" #ZPAtt_report_balRep_importIds select").html(res),$(layoutId+" #ZPAtt_report_balRep_importAdjHrs select").html(res),$(layoutId+" #ZPAtt_report_balRep_importPaidHrs select").html(res),$(layoutId+" #ZPAtt_report_importMsg").unbind("click"),$(layoutId+" #ZPAtt_report_importMsg").attr("class","blu"),$(layoutId+" #ZPAtt_report_importMsg").parent().fadeIn(300),obj.error&&"rowExceededLimit"===obj.error?(ZPeople.Message.showFailureMsg(ZPI18N.getString("zp.importcntexceederror"),!0),Layout.Page.container.find("#ZPAtt_report_importNext").attr("disabled",!0),Layout.Page.container.find("#ZPAtt_report_importMsg").text("")):void 0!==obj.recordCount?$(layoutId+" #ZPAtt_report_importMsg").text(obj.recordCount+" "+ZPI18N.getString("zp.recordsfound")):$(layoutId+" #ZPAtt_report_importMsg").text("0 "+ZPI18N.getString("zp.recordsfound")),$(layoutId+" #ZPAtt_report_importMap select").select2()},submitMappingBalOrRep:function(){var layout=Layout.Page.container,layoutId="#"+$(layout).attr("id"),si_Id=$(layoutId+" #ZPAtt_report_balRep_importIds select")[0].selectedIndex,si_adjHrs=$(layoutId+" #ZPAtt_report_balRep_importAdjHrs select")[0].selectedIndex,si_paidHrs=$(layoutId+" #ZPAtt_report_balRep_importPaidHrs select")[0].selectedIndex;if(0!==si_Id)if(0!==si_adjHrs||0!==si_paidHrs){var param={mode:"balRepImportMapping",mailId:si_Id-1,conreqcsr:csrfToken};0!==si_adjHrs&&(param.adjustHrs=si_adjHrs-1),0!==si_paidHrs&&(param.paidHrs=si_paidHrs-1),Layout.Page.container.find("#ZPAtt_report_importNext").attr("disabled",!0),Layout.Page.container.find("#ZPAtt_report_importHeader .modal-body").children().hide(),Layout.Page.container.find("#ZPAtt_report_importHeader .modal-body").append(ZPeople.LOADING_HTML),$.post("/AttendanceAction.zp",param,function(resultData){if(Layout.Page.container.find("#ZPAtt_report_importHeader .modal-body").find("#zp_page_loading").remove(),Layout.Page.container.find("#ZPAtt_report_importHeader .modal-body").children().show(),resultData.msg){if(0===resultData.msg.length)return void ZPeople.Message.showFailureMsg(ZPI18N.getString("zp.unabletoprocess"));if($(layoutId+" #ZPAtt_report_import").parent().parent().attr("class","ZPImfrm ZPRecList"),$(layoutId+" #ZPAtt_report_importMap").hide(),$(layoutId+" #ZPAtt_report_importMsg").parent().hide(),$(layoutId+" #ZPAtt_report_importSuccMsg").fadeIn(300),$(layoutId+" #ZPAtt_report_importSuccvalues").fadeIn(300),$(layoutId+" #ZPAtt_report_importSuccvalues span")[0].innerHTML=resultData.msg.totalCount,$(layoutId+" #ZPAtt_report_importSuccvalues span")[1].innerHTML=resultData.msg.successCount,$(layoutId+" #ZPAtt_report_importPrevious").hide(),$(layoutId+" #ZPAtt_report_importNext").hide(),-1!==Layout.Page.pageId.indexOf("attendance-report-balanceotreport")&&Attendance.Reports.ReportImport.getBalOtReport(),resultData.msg.emptyEmpIds.length>0||resultData.msg.errorInfo.length>0||resultData.msg.skippedEmpInfo.length>0){var rowNumber=0;if(Layout.Page.container.find("#importErrDiv").show(),Layout.Page.container.find("#importErrTBody").find("tr").remove(),resultData.msg.skippedEmpInfo.length>0){for(length=resultData.msg.skippedEmpInfo.length,Layout.Page.container.find("#importErrTBody").append($("<tr class='ZPLRow' ><td colspan=2 class='err-lst'>"+ZPI18N.getString("zp.invalidempinfo")+"<ul></ul></td></tr>")),i=0;i<length;i++)$($(Layout.Page.container.find("#importErrTBody").find(".ZPLRow")[rowNumber]).find("ul")).append("<li>"+$("<div/>").text(resultData.msg.skippedEmpInfo[i]).html()+"</li>");rowNumber++}if(resultData.msg.emptyEmpIds.length>0){for(length=resultData.msg.emptyEmpIds.length,Layout.Page.container.find("#importErrTBody").append($("<tr class='ZPLRow' ><td colspan=2 class='err-lst'>"+ZPI18N.getString("zp.emptyempids")+"<ul></ul></td></tr>")),i=0;i<length;i++)$($(Layout.Page.container.find("#importErrTBody").find(".ZPLRow")[rowNumber]).find("ul")).append("<li>"+resultData.msg.emptyEmpIds[i]+"</li>");rowNumber++}resultData.msg.errorInfo.length>0&&resultData.msg.errorInfo.forEach(function(obj,index){for(Layout.Page.container.find("#importErrTBody").append($("<tr class='ZPLRow'><td>Row "+obj[0]+" :</td><td></td></tr>")),i=1;i<obj.length;i++)$($(Layout.Page.container.find("#importErrTBody").find(".ZPLRow")[index+rowNumber]).find("td")[1]).append(obj[i]+"<br>")})}}else if(resultData.fail||resultData.error){var errorMsg=resultData.fail?resultData.fail:ZPI18N.getString("zp.unabletoprocess");ZPeople.Message.showFailureMsg(errorMsg),Layout.Page.container.find("#ZPAtt_report_importNext").attr("disabled",!1),Layout.Page.container.find("#ZPAtt_report_importNext").unbind("click").bind("click",function(){Attendance.Reports.ReportImport.submitMappingBalOrRep()})}})}else ZPeople.Message.showFailureMsg(ZPI18N.getString("zp.chooseadjorpiadhrs"));else ZPeople.Message.showFailureMsg(ZPI18N.getString("zp.choosereqcolumns"))}},Attendance.Report={isEnd:!1,depLocShiftList:null,LayoutId:null,getShiftListCall:0,defEmpProfSel:[19,-2,18],init:function(){Attendance.Report.LayoutId="#"+Layout.Page.container[0].id;var attModule=ZPeople.Module.MODULE_DATA.attendance;if(isManageAttendanceData=attModule.isManageAttedance,isShiftViewAllowed=attModule.isShiftViewAllowed,isLead=attModule.isLead,isSPOCReportView=attModule.isSPOCReportView,!Shift.shiftList)return 0===$(Attendance.Report.LayoutId+" .Scrcont").find("#zp_page_loading").length&&$(Attendance.Report.LayoutId+" .Scrcont").append(ZPeople.LOADING_HTML),0===Attendance.Report.getShiftListCall&&(Shift.getShiftList(),Attendance.Report.getShiftListCall=1),void setTimeout(Attendance.Report.init,100);var layout=Layout.Page.container;layout.find("[data-toggle=tooltip]").tooltip({trigger:"click"}),$(Attendance.Report.LayoutId+" .Scrcont").find("#zp_page_loading").remove(),isadmin&&(isManageAttendanceData=!0),$(Attendance.Report.LayoutId+" #ZPAtt_report_filter").hasClass("ZPFilsel")&&Attendance.Report.toggleFilter(),ZPeople.FireScroll.init(Attendance.Report.moreSummaryReport,"ZPAtt_simpSumRep"),ZPeople.Module.MODULE_DATA.attendance.isStatWkndConfig||(layout.find("#ZPAtt_status_monthlyRep option[value=12]").remove(),layout.find("#ZPAtt_status_monthlyRep option[value=13]").remove(),layout.find("#ZPAtt_status_dailyRep option[value=12]").remove(),layout.find("#ZPAtt_status_dailyRep option[value=13]").remove(),layout.find("#ZPAtt_status_userRep option[value=12]").remove(),layout.find("#ZPAtt_status_userRep option[value=13]").remove()),isSPOCReportView||isManageAttendanceData||(isLead?($(Attendance.Report.LayoutId+" #ZPAtt_dailyRep_empProfile").parent().parent().remove(),$(Attendance.Report.LayoutId+" #ZPAtt_monthlyRep_empProfile").parent().parent().remove(),$(Attendance.Report.LayoutId+" #ZPAtt_sumRep_empProfile").parent().parent().remove(),$(Attendance.Report.LayoutId+" #ZPAtt_advancedSearch").remove()):($(Attendance.Report.LayoutId+" #ZPAtt_location_otRep").remove(),$(Attendance.Report.LayoutId+" #ZPAtt_department_otRep").remove())),$(Attendance.Report.LayoutId+" #ZPAtt_Summary_Report_hr").hasClass("active")?$(Attendance.Report.LayoutId+" #ZPAtt_Summary_Report").data("summ","Hour"):$(Attendance.Report.LayoutId+" #ZPAtt_Summary_Report").data("summ","Day"),$(Attendance.Report.LayoutId+" #ZPAtt_month_Report_hour").hasClass("active")?($(Attendance.Report.LayoutId+" #ZPAtt_month_Report").data("month","Hour"),$(Attendance.Report.LayoutId+" #ZPAtt_mReoprt_abbr over").show(),$(Attendance.Report.LayoutId+" #ZPAtt_mReoprt_abbr deviation").show()):($(Attendance.Report.LayoutId+" #ZPAtt_month_Report").data("month","Day"),$(Attendance.Report.LayoutId+" #ZPAtt_mReoprt_abbr over").hide(),$(Attendance.Report.LayoutId+" #ZPAtt_mReoprt_abbr deviation").hide()),-1!==Layout.Page.pageId.indexOf("attendance-report-userreport")&&Attendance.Entry.loadReport&&Attendance.Report.getUserReportFromSummary(Attendance.Entry.erecforReport),layout.find("select[multiple='multiple']").select2({closeOnSelect:!1}),layout.find("select:not([multiple='multiple'])").select2(),-1!==Layout.Page.pageId.indexOf("attendance-report-earlylatereport")&&(layout.find("#ZPAtt_lateComRep_checkIn").select2({minimumResultsForSearch:6}),layout.find("#ZPAtt_lateComRep_checkOut").select2({minimumResultsForSearch:6})),Attendance.Report.getDepLocShiftList(),layout.popover({selector:"[data-popover]",trigger:"click hover",placement:"bottom",delay:{show:50,hide:50}})},monthReport:function(id){var switchMode=$(id).attr("value");$(id).addClass("active"),Attendance.Report.isEnd=!1,$(Attendance.Report.LayoutId+" #ZPAtt_attmonthlyReportTableBody").children().remove(),"daysRep"===switchMode?($(Attendance.Report.LayoutId+" #ZPAtt_month_Report").data("month","Day"),$(id).next().removeClass("active"),$(Attendance.Report.LayoutId+" #ZPAtt_mReoprt_abbr over").hide(),$(Attendance.Report.LayoutId+" #ZPAtt_mReoprt_abbr deviation").hide(),$(Attendance.Report.LayoutId+" #ZPAtt_report_filter").hasClass("ZPFilsel")&&$(Attendance.Report.LayoutId+" #ZPAtt_hoursType_monthlyRep").hide(),Attendance.Report.showMonthlyReport()):($(Attendance.Report.LayoutId+" #ZPAtt_month_Report").data("month","Hour"),$(id).prev().removeClass("active"),$(Attendance.Report.LayoutId+" #ZPAtt_mReoprt_abbr over").show(),$(Attendance.Report.LayoutId+" #ZPAtt_mReoprt_abbr deviation").show(),$(Attendance.Report.LayoutId+" #ZPAtt_report_filter").hasClass("ZPFilsel")&&$(Attendance.Report.LayoutId+" #ZPAtt_hoursType_monthlyRep").show(),Attendance.Report.showMonthlyReport(!1,!0))},summReport:function(id){var switchMode=$(id).attr("value");$(id).addClass("active"),Attendance.Report.isEnd=!1;var layout=Layout.Page.container,sumRepScrcont=layout.find("#ZPAtt_attSumReportScrcont");sumRepScrcont.find("#ZPAtt_attSumReportTableBody").children().remove(),sumRepScrcont.find("#ZPAtt_simpSumDayRepBody").children().remove();var sumRepDayHrEle=layout.find("#ZPAtt_Summary_Report");ZPAtt_simpSumDayRepBody,"days"===switchMode?(sumRepDayHrEle.data("summ","Day"),$(id).next().removeClass("active"),Attendance.Report.showSumReport()):(sumRepDayHrEle.data("summ","Hour"),$(id).prev().removeClass("active"),Attendance.Report.totalWorkedHours=0,Attendance.Report.totalCountwSecs=0,Attendance.Report.totalOverSecs=0,Attendance.Report.totalDevSecs=0,Attendance.Report.totalWorkedSecs=0,Attendance.Report.totalOndutySecs=0,Attendance.Report.totalLeaveSecs=0,Attendance.Report.totalLOPSecs=0,Attendance.Report.totalExpectedPaiddaysInSec=0,Attendance.Report.totalWorkingdaysInSec=0,Attendance.Report.totalHolidaydaysInSec=0,Attendance.Report.totalWeekenddaysInSec=0,Attendance.Report.totalPaidOffdaysInSec=0,Attendance.Report.totalAbsentdaysInSec=0,Attendance.Report.totalUnPaidOffdaysInSec=0,Attendance.Report.totalPaiddaysInSec=0,Attendance.Report.PP_PayOffDaysInSec=0,Attendance.Report.PP_ExpectedPayDaysInSec=0,Attendance.Report.totalPaidBreakInSecs=0,Attendance.Report.totalUnPaidBreakInSecs=0,Attendance.Report.totalPermissionInSecs=0,Attendance.Report.totStatWkndOT=0,Attendance.Report.totNonStatWkndOT=0,Attendance.Report.totalStatWknd=0,Attendance.Report.totalNonStatWknd=0,Attendance.Report.totalRegWknd=0,Attendance.Report.totRegWorkHrs=0,Attendance.Report.totLNWorkHrs=0,Attendance.Report.totWkndRegOT=0,Attendance.Report.totWkndLNOT=0,Attendance.Report.totHolidayRegOT=0,Attendance.Report.totHolidayLNOT=0,Attendance.Report.totRegRegOT=0,Attendance.Report.totRegLNOT=0,Attendance.Report.totStatWkndRegOT=0,Attendance.Report.totStatWkndLNOT=0,Attendance.Report.totNonStatWkndRegOT=0,Attendance.Report.totNonStatWkndLNOT=0,Attendance.Report.totWkndOT=0,Attendance.Report.totHolidayOT=0,Attendance.Report.totRegOT=0,Attendance.Report.totRegWeekendHours=0,Attendance.Report.worked=0,Attendance.Report.paidOff=0,Attendance.Report.paid=0,Attendance.Report.expected=0,Attendance.Report.ot=0,Attendance.Report.unpaidOff=0,Attendance.Report.paidBreak=0,Attendance.Report.unpaidBreak=0,Attendance.Report.permission=0,Attendance.Report.showSumReport(!1,!0))},toggleFilter:function(){$(Attendance.Report.LayoutId+" #ZPAtt_report_filter").hasClass("ZPFilsel")?($(Attendance.Report.LayoutId+" #ZPAtt_report_filter").removeClass("blu ZPFilsel"),$(Attendance.Report.LayoutId+" #ZPAtt_reportFilters").attr("class","ZPFilMain"),$(Attendance.Report.LayoutId+" #ZPAtt_filterCloseButton").hide(),$("#page-wrapper").attr("class","Nbar2")):($(Attendance.Report.LayoutId+" #ZPAtt_report_filter").addClass("blu ZPFilsel"),$(Attendance.Report.LayoutId+" #ZPAtt_reportFilters").attr("class","ZPFilMain TEbnd"),$(Attendance.Report.LayoutId+" #ZPAtt_filterCloseButton").show(),($(Attendance.Report.LayoutId+" #ZPAtt_dailyReportListView").is(":visible")||$(Attendance.Report.LayoutId+" #ZPAtt_dailyReport_emptyRecInfo").is(":visible"))&&$(Attendance.Report.LayoutId+" #ZPAtt_dailyReportfilter").children().length>3?($("#page-wrapper").attr("class","Nbar2F2"),$(Attendance.Report.LayoutId+" #ZPAtt_reportFilters").attr("class","ZPFilMain TEbnd1")):$("#page-wrapper").attr("class","Nbar2F"),$(Attendance.Report.LayoutId+" #ZPAtt_attmonthlyReport").is(":visible")&&-1!==Layout.Page.pageId.indexOf("attendance-report-monthlyreport")&&($(Attendance.Report.LayoutId+" #ZPAtt_monthlyReportfilter").children().length>5?($("#page-wrapper").attr("class","Nbar2F2"),$(Attendance.Report.LayoutId+" #ZPAtt_reportFilters").attr("class","ZPFilMain TEbnd1")):$("#page-wrapper").attr("class","Nbar2F"),$(Attendance.Report.LayoutId+" #ZPAtt_advancedSearch").hide(),$(Attendance.Report.LayoutId+" #ZPAtt_empProfile_monthlyRep").show(),"Hour"===$(Attendance.Report.LayoutId+" #ZPAtt_month_Report").data("month")?$(Attendance.Report.LayoutId+" #ZPAtt_hoursType_monthlyRep").show():$(Attendance.Report.LayoutId+" #ZPAtt_hoursType_monthlyRep").hide()),$(Attendance.Report.LayoutId+" #ZPAtt_attSumReportScrcont").is(":visible")&&($(Attendance.Report.LayoutId+" #ZPAtt_advancedSearch").show(),$(Attendance.Report.LayoutId+" #ZPAtt_shift_sumRep").hide(),$(Attendance.Report.LayoutId+" #ZPAtt_shift_monthlyRep").hide(),"/zp"===ZPeople.CONTEXT?$(Attendance.Report.LayoutId+" #ZPAtt_empProfile_sumRep").show():$(Attendance.Report.LayoutId+" #ZPAtt_empProfile_sumRep").hide(),$(Attendance.Report.LayoutId+" #ZPAtt_empProfile_monthlyRep").hide())),$(Attendance.Report.LayoutId+" #ZPAtt_attmonthlyReport").is(":visible")||$(Attendance.Report.LayoutId+" #ZPAtt_attUserReport").is(":visible")?$("#page-wrapper").addClass("Dbar1"):$(Attendance.Report.LayoutId+" #ZPAtt_balOtRepBody").is(":visible")&&0!==$(Attendance.Report.LayoutId+" #ZPAtt_balOtRepBody").children().length&&0!==$(Attendance.Report.LayoutId+" #ZPAtt_balOtRepBody").find("input").length&&$("#page-wrapper").addClass("Abar1")},filterSearch:function(page){var closeFilter=!0;"dailyRep"===page?closeFilter=Attendance.Report.getDailyReport():"lateComRep"===page?closeFilter=Attendance.Report.getLateComerReport():"monthlyRep"===page?Attendance.Report.getMonthlyReport():"sumRep"===page?Attendance.Report.getSumReport(void 0,void 0,!0):"userRep"===page?closeFilter=Attendance.Report.getUserReport():"otRep"===page&&Attendance.Report.getBalOtReport(),"/zp"!==ZPeople.CONTEXT||!closeFilter&&void 0!==closeFilter||Attendance.Report.toggleFilter()},advancedSearch:function(obj){$("#page-wrapper").attr("class","Nbar2F2"),$(Attendance.Report.LayoutId+" #ZPAtt_attSumReportTable").is(":visible")||$("#page-wrapper").addClass("Dbar1"),$(obj).hide(),$(Attendance.Report.LayoutId+" #ZPAtt_reportFilters").attr("class","ZPFilMain TEbnd1"),$(Attendance.Report.LayoutId+" #ZPAtt_attmonthlyReport").is(":visible")?$(Attendance.Report.LayoutId+" #ZPAtt_empProfile_monthlyRep").show():$(Attendance.Report.LayoutId+" #ZPAtt_attSumReportScrcont").is(":visible")&&$(Attendance.Report.LayoutId+" #ZPAtt_empProfile_sumRep").show()},resetInputs:function(id){if(Layout.Page.container.find("#ZPAtt_"+id+"_period").select2("val",0),-1!==Layout.Page.pageId.indexOf("attendance-report-userreport")){var userRepFilter=Layout.Page.container.find("#ZPAtt_userReportfilter");userRepFilter.find("#ZPAtt_userRep_fromDate").val(this.depLocShiftList.currDate.monthStartDate),userRepFilter.find("#ZPAtt_userRep_toDate").val(this.depLocShiftList.currDate.todayDate),userRepFilter.find("#ZPAtt_userRep_period").select2("val","6"),userRepFilter.find("#ZPAtt_userRep_fromDate").removeAttr("disabled"),userRepFilter.find("#ZPAtt_userRep_toDate").removeAttr("disabled")}if(-1!==Layout.Page.pageId.indexOf("attendance-report-summaryreport")){var sumRepFilter=Layout.Page.container.find("#ZPAtt_summaryReportfilter");sumRepFilter.find("#ZPAtt_sumRep_fromDate").val(this.depLocShiftList.currDate.monthStartDate),sumRepFilter.find("#ZPAtt_sumRep_toDate").val(this.depLocShiftList.currDate.todayDate),sumRepFilter.find("#ZPAtt_sumRep_period").select2("val","6"),sumRepFilter.find("#ZPAtt_sumRep_fromDate").removeAttr("disabled"),sumRepFilter.find("#ZPAtt_sumRep_toDate").removeAttr("disabled"),sumRepFilter.find("#ZPAtt_showSimpleRep").prop("checked",!1)}if(-1!==Layout.Page.pageId.indexOf("attendance-report-monthlyreport")){var monRepFilter=Layout.Page.container.find("#ZPAtt_monthlyReportfilter");monRepFilter.find("#ZPAtt_monthlyRep_fromDate").val(this.depLocShiftList.currDate.monthStartDate),monRepFilter.find("#ZPAtt_monthlyRep_toDate").val(this.depLocShiftList.currDate.monthEndDate),monRepFilter.find("#ZPAtt_monthlyRep_fromDate").attr("disabled",!0),monRepFilter.find("#ZPAtt_monthlyRep_toDate").attr("disabled",!0)}if(-1!==Layout.Page.pageId.indexOf("attendance-report-earlylatereport")){var lateComRepFilter=Layout.Page.container.find("#ZPAtt_lateComReportfilter");lateComRepFilter.find("#ZPAtt_lateComRep_period").val("4").change(),lateComRepFilter.find("#ZPAtt_lateComRep_checkIn").val("0").change().next().next().addClass("DNI"),lateComRepFilter.find("#ZPAtt_lateComRep_checkOut").val("0").change().next().next().addClass("DNI"),lateComRepFilter.find("#ZPAtt_lateComRep_checkInTime").timepicker("remove"),lateComRepFilter.find("#ZPAtt_lateComRep_checkOutTime").timepicker("remove")}Layout.Page.container.find("#ZPAtt_"+id+"_date").attr("disabled",!0),Layout.Page.container.find("#ZPAtt_"+id+"_date").val(this.depLocShiftList.currDate.todayDate),Layout.Page.container.find("#ZPAtt_"+id+"_location").select2("val",0),Layout.Page.container.find("#ZPAtt_"+id+"_status").select2("val",0),Layout.Page.container.find("#ZPAtt_"+id+"_department").select2("val",0),Layout.Page.container.find("#ZPAtt_"+id+"_businessUnit").select2("val",0),Layout.Page.container.find("#ZPAtt_"+id+"_division").select2("val",0),Layout.Page.container.find("#ZPAtt_"+id+"_entity").select2("val",0),Layout.Page.container.find("#ZPAtt_"+id+"_shift").select2("val",0),Layout.Page.container.find("#ZPAtt_"+id+"_empName").select2("val",""),Layout.Page.container.find("#ZPAtt_"+id+"_rpSett").select2("val",0),Layout.Page.container.find("#ZPAtt_"+id+"_hoursType").select2("val",0),Layout.Page.container.find("#ZPAtt_"+id+"_empProfile").select2("val",Attendance.Report.defEmpProfSel),Layout.Page.container.find("#ZPAtt_"+id+"_totHrsTime").timepicker("remove"),Layout.Page.container.find("#ZPAtt_"+id+"_totalHrs").val("0").change().next().next().addClass("DNI"),Layout.Page.container.find("#ZPAtt_"+id+"_desg").select2("val",0),Layout.Page.container.find("#ZPAtt_"+id+"_incExitDate").prop("checked",!0).parent().show(),Layout.Page.container.find("#ZPAtt_"+id+"_showDirectRepTo").prop("checked",!1).parent().show()},onEmpStatChange:function(repId){var incExitDateEle=Layout.Page.container.find("#ZPAtt_"+repId+"_incExitDate"),empProfVal=Layout.Page.container.find("#ZPAtt_"+repId+"_empProfile").val(),isExEmpAvail=!!empProfVal&&empProfVal.includes("18");isExEmpAvail&&!incExitDateEle.parent().is(":visible")?(incExitDateEle.prop("checked",!0),incExitDateEle.parent().show()):isExEmpAvail||(incExitDateEle.prop("checked",!1),incExitDateEle.parent().hide())},onPeriodChange:function(id){var layout=Layout.Page.container.find("#ZPAtt_reportFilters"),period=layout.find("#ZPAtt_"+id+"_period")[0];layout.find("#ZPAtt_"+id+"_fromDate").attr("disabled",!0),layout.find("#ZPAtt_"+id+"_toDate").attr("disabled",!0),"0"==period.value?(layout.find("#ZPAtt_"+id+"_fromDate").val(this.depLocShiftList.currDate.monthStartDate),$(Attendance.Report.LayoutId+" #ZPAtt_"+id+"_toDate").val(this.depLocShiftList.currDate.monthEndDate)):"1"==period.value?(layout.find("#ZPAtt_"+id+"_fromDate").val(this.depLocShiftList.currDate.prevMonthStart),layout.find("#ZPAtt_"+id+"_toDate").val(this.depLocShiftList.currDate.prevMonthEnd)):"2"==period.value?(layout.find("#ZPAtt_"+id+"_fromDate").val(this.depLocShiftList.currDate.weekStartDate.format(dateFmt.toUpperCase())),layout.find("#ZPAtt_"+id+"_toDate").val(this.depLocShiftList.currDate.weekEndDate.format(dateFmt.toUpperCase()))):"3"==period.value?(layout.find("#ZPAtt_"+id+"_fromDate").val(this.depLocShiftList.currDate.lastWeekStart.format(dateFmt.toUpperCase())),layout.find("#ZPAtt_"+id+"_toDate").val(this.depLocShiftList.currDate.lastWeekEnd.format(dateFmt.toUpperCase()))):"4"==period.value?(layout.find("#ZPAtt_"+id+"_fromDate").val(this.depLocShiftList.currDate.todayDate),layout.find("#ZPAtt_"+id+"_toDate").val(this.depLocShiftList.currDate.todayDate)):"5"==period.value?(layout.find("#ZPAtt_"+id+"_fromDate").val(this.depLocShiftList.currDate.prevDay),layout.find("#ZPAtt_"+id+"_toDate").val(this.depLocShiftList.currDate.prevDay)):(layout.find("#ZPAtt_"+id+"_fromDate").attr("disabled",!1),layout.find("#ZPAtt_"+id+"_toDate").attr("disabled",!1))},dailyReportShowView:function(view,fromTabChange){if(view&&"chartView"===view&&Layout.Page.container.find("#ZPAtt_backToChart").hide(),Layout.Page.container.find("#ZPAtt_report_filter").hasClass("ZPFilsel")){var repFilters=Layout.Page.container.find("#ZPAtt_reportFilters");"listView"===view&&repFilters.find("#ZPAtt_dailyReportfilter").children().length>3?($("#page-wrapper").attr("class","Nbar2F2"),repFilters.attr("class","ZPFilMain TEbnd1")):($("#page-wrapper").attr("class","Nbar2F"),repFilters.attr("class","ZPFilMain TEbnd"))}var dailyRep_layout=Layout.Page.container.find("#ZPAtt_attDailyReport"),dailyRep_viewsLayout=Layout.Page.container.find("#ZPAtt_dailyReportViews"),dailyRepFilter=Layout.Page.container.find("#ZPAtt_dailyReportfilter");if("chartView"===view){if(dailyRep_layout.find("#ZPAtt_dailyReportChartView").parent().is(":visible")&&!fromTabChange)return;dailyRep_layout.hasClass("section")&&dailyRep_layout.removeClass("section"),dailyRep_layout.find("#ZPAtt_dailyReportListView").hide(),dailyRep_layout.find("#ZPAtt_dailyReportChartView").parent().hide(),dailyRep_layout.find("#ZPAtt_dailyReportChartView").parent().fadeIn(200),dailyRep_viewsLayout.find("#ZPAtt_cView").attr("class","btn togg btn-primary"),dailyRep_viewsLayout.find("#ZPAtt_lView").attr("class","btn togg btn-default"),dailyRepFilter.find("#ZPAtt_dailyRep_status").hide(),dailyRepFilter.find("#ZPAtt_dailyRep_totalHrs").parent().parent().hide(),dailyRep_layout.find("#ZPAtt_dailyReport_emptyRecInfo").hide(),Layout.Page.container.find("#ZPAtt_advancedSearch").hide(),Attendance.Report.selectedView="chart",Attendance.Report.dailyChartViewRep&&Attendance.Report.dailyChartViewRep.userDate===$(Attendance.Report.LayoutId+" #ZPAtt_dailyRep_date").val().trim()||this.getDailyReport(),"735594"!==_LOGGEDIN_ZSOID&&"670195449"!==_LOGGEDIN_ZSOID&&"491893108"!==_LOGGEDIN_ZSOID&&"55301704"!==_LOGGEDIN_ZSOID&&"4599297"!==_LOGGEDIN_ZSOID||$(Attendance.Report.LayoutId+" #ZPAtt_dailyRep_status select").select2("val",0)}else{if(dailyRep_layout.find("#ZPAtt_dailyReportListView").is(":visible")&&!fromTabChange)return;dailyRep_layout.find("#ZPAtt_dailyReportChartView").parent().hide(),dailyRep_viewsLayout.find("#ZPAtt_lView").attr("class","btn togg btn-primary"),dailyRep_viewsLayout.find("#ZPAtt_cView").attr("class","btn togg btn-default"),0===dailyRep_layout.find("#ZPAtt_dailyReportListView").find("#ZPAtt_attDailyReportTableBody").children().length&&dailyRep_layout.find("#ZPAtt_dailyReport_emptyRecInfo").fadeIn(200),dailyRepFilter.find("#ZPAtt_dailyRep_status").show(),dailyRepFilter.find("#ZPAtt_dailyRep_totalHrs").parent().parent().show(),Layout.Page.container.find("#ZPAtt_advancedSearch").show(),Attendance.Report.selectedView="list",Attendance.Report.empReportTableData?0!==dailyRep_layout.find("#ZPAtt_attDailyReportTableBody").children().length&&(dailyRep_layout.attr("class","Scrcont section"),dailyRep_layout.find("#ZPAtt_dailyReportListView").fadeIn(300)):(0===dailyRep_layout.find("#zp_page_loading").length&&dailyRep_layout.append(ZPeople.LOADING_HTML),this.getDailyReport())}Layout.Page.container.find("#ZPAtt_dailyRepNav").show()},dailyRepListViewScroll:0,dailyReportListScroll:function(){var viewStatus=Layout.Page.container.find("#ZPAtt_dailyReportfilter").find("#ZPAtt_dailyRep_tViewStatus select").val();"In"==viewStatus||"Out"==viewStatus||"On Break"==viewStatus?(Attendance.Report.dailyRepListViewScroll+=20,Attendance.Report.fetchMoreListViewRecords()):ZPeople.FireScroll.reset()},fetchMoreListViewRecords:function(){var param={mode:"fetchMoreListViewRecords"},dailyRepFilter=Layout.Page.container.find("#ZPAtt_dailyReportfilter");param[csrfParamName]=csrfToken,param.viewStatus=dailyRepFilter.find("#ZPAtt_dailyRep_tViewStatus select").val(),param.scrollIndex=Attendance.Report.dailyRepListViewScroll+1;var filterData={},locObj=dailyRepFilter.find("#ZPAtt_dailyRep_location").val();0!=locObj.length&&(filterData.locationId=JSON.stringify(locObj));var depObj=dailyRepFilter.find("#ZPAtt_dailyRep_department").val();0!=depObj.length&&(filterData.departmentId=JSON.stringify(depObj));var userObj=dailyRepFilter.find("#ZPAtt_dailyRep_empProfile")[0];userObj&&""!==userObj.value&&"0"!==userObj.value&&(filterData.userTypeId=userObj.value),Attendance.Report.isLoginDisRep="-6"===filterData.userTypeId;var shiftObj=dailyRepFilter.find("#ZPAtt_dailyRep_shift").val();0!=shiftObj.length&&(filterData.shiftId=JSON.stringify(shiftObj));var totHrsFilter=dailyRepFilter.find("#ZPAtt_dailyRep_totalHrs").val();if("0"!==totHrsFilter){var totHrsTime=Attendance.Common.convertTimerInputToMinsOrSecs(dailyRepFilter.find("#ZPAtt_dailyRep_totHrsTime").val(),!0,!0);if(void 0===totHrsTime||"1"===totHrsFilter&&0===totHrsTime)return dailyRepFilter.find("#ZPAtt_dailyRep_totalHrs").next().next().removeClass("DNI"),void(Attendance.Report.restDailyRepReq=!0);if(void 0!==totHrsTime){var totHrsObj={};totHrsObj.timeInSecs=totHrsTime,totHrsObj.type=totHrsFilter,dailyRepFilter.find("#ZPAtt_dailyRep_totalHrs").next().next().addClass("DNI"),filterData.totHrsTime=totHrsObj}}var dailyRepDate=dailyRepFilter.find("#ZPAtt_dailyRep_date").val().trim();""!==dailyRepDate&&(filterData.reportDate=dailyRepDate,""===Layout.Page.container.find("#ZPAtt_dailyRep_dateNav").html()&&Layout.Page.container.find("#ZPAtt_dailyRep_dateNav").html(moment().format(dateFmt.toUpperCase()))),param.filterData=JSON.stringify(filterData),$.post("/AttendanceReportAction.zp",param,function(rdata){for(var index in rdata.report.empList)Attendance.Report.empReportTableData.empList.push(rdata.report.empList[index]);20==rdata.report.empList.length&&ZPeople.FireScroll.reset();var input={isFromScroll:!0};input.data=rdata.report,Attendance.Report.consReportTable(void 0,input)})},setUserTypeID:function(param){return param.userTypeId||(param.userTypeId=JSON.stringify(Attendance.Report.defEmpProfSel),param.incDateOfExit=!0),param},setUserTypeIDInFilter:function(param,reportFilter,filId){var empProfFil=reportFilter.find("#ZPAtt_"+filId+"_empProfile"),incExitDateEle=Layout.Page.container.find("#ZPAtt_"+filId+"_incExitDate");empProfFil.val()||(empProfFil.select2("val",Attendance.Report.defEmpProfSel),incExitDateEle.prop("checked",!0),incExitDateEle.parent().show())},restDailyRepReq:!0,isLoginDisRep:!1,userInType:null,getDailyReport:function(navigate){if(Attendance.Report.restDailyRepReq){Attendance.Report.restDailyRepReq=!1,$(Attendance.Report.LayoutId+" #ZPAtt_cView").attr("disabled","disabled"),$(Attendance.Report.LayoutId+" #ZPAtt_lView").attr("disabled","disabled");var param={mode:"attDailyReport",conreqcsr:csrfToken},dailyRepFilter=Layout.Page.container.find("#ZPAtt_dailyReportfilter"),totHrsFilter=dailyRepFilter.find("#ZPAtt_dailyRep_totalHrs").val();if("0"!==totHrsFilter){var totHrsTime=Attendance.Common.convertTimerInputToMinsOrSecs(dailyRepFilter.find("#ZPAtt_dailyRep_totHrsTime").val(),!0,!0);if(void 0===totHrsTime||"1"===totHrsFilter&&0===totHrsTime)return dailyRepFilter.find("#ZPAtt_dailyRep_totalHrs").next().next().removeClass("DNI"),Attendance.Report.restDailyRepReq=!0,!1;if(void 0!==totHrsTime){var totHrsObj={};totHrsObj.timeInSecs=totHrsTime,totHrsObj.type=totHrsFilter,dailyRepFilter.find("#ZPAtt_dailyRep_totalHrs").next().next().addClass("DNI"),param.totHrsTime=JSON.stringify(totHrsObj)}}"list"===Attendance.Report.selectedView?(param.view="list",$(Attendance.Report.LayoutId+" #ZPAtt_attDailyReportTableBody").empty(),0===$(Attendance.Report.LayoutId+" #ZPAtt_dailyReportListView").find("#zp_page_loading").length&&($(Attendance.Report.LayoutId+" #ZPAtt_dailyReport_emptyRecInfo").hide(),$(Attendance.Report.LayoutId+" #ZPAtt_dailyReportListView").append(ZPeople.LOADING_HTML))):($(Attendance.Report.LayoutId+" #ZPAtt_dailyReportChartView").parent().hide(),0===$(Attendance.Report.LayoutId+" #ZPAtt_attDailyReport").find("#zp_page_loading").length&&$(Attendance.Report.LayoutId+" #ZPAtt_attDailyReport").append(ZPeople.LOADING_HTML)),navigate&&(param.navigateDays=navigate),$(Attendance.Report.LayoutId+" #ZPAtt_dailyReport_myReqEmpSort").hasClass("sort")||(param.isEmpSortAsc=$(Attendance.Report.LayoutId+" #ZPAtt_dailyReport_myReqEmpSort").hasClass("sort-u")),Attendance.Report.getFilterValues(dailyRepFilter,param,"dailyRep"),Attendance.Report.setUserTypeID(param),Attendance.Report.isLoginDisRep="-6"===param.userTypeId;var dailyRepDate=dailyRepFilter.find("#ZPAtt_dailyRep_date").val().trim();""!==dailyRepDate&&(param.reportDate=dailyRepDate,""===$(Attendance.Report.LayoutId+" #ZPAtt_dailyRep_dateNav").html()&&$(Attendance.Report.LayoutId+" #ZPAtt_dailyRep_dateNav").html(moment().format(dateFmt.toUpperCase()))),Attendance.Report.userInType&&(param.userInType=Attendance.Report.userInType,Attendance.Report.userInType=null),$.post("/AttendanceReportAction.zp",param,function(rdata){rdata.fail?Attendance.permDenied():(rdata.report.empList&&20==rdata.report.empList.length&&(Attendance.Report.dailyRepListViewScroll=0,ZPeople.FireScroll.reset()),$(Attendance.Report.LayoutId+" #ZPAtt_cView").removeAttr("disabled"),$(Attendance.Report.LayoutId+" #ZPAtt_lView").removeAttr("disabled"),Attendance.Report.restDailyRepReq=!0,Attendance.Report.dailyReport=rdata,$(Attendance.Report.LayoutId+" #ZPAtt_dailyRep_date").val(rdata.report.userDate),$(Attendance.Report.LayoutId+" #ZPAtt_dailyRep_dateNav").html(rdata.report.userDate),Attendance.Report.setUserTypeIDInFilter(param,dailyRepFilter,"dailyRep"),param.view?(Attendance.Report.empReportTableData=rdata.report,Attendance.Report.consReportTable()):($(Attendance.Report.LayoutId+" #ZPAtt_dailyReportChartView").parent().show(),Attendance.Report.consXMLdata(rdata.report),Attendance.Report.dailyChartViewRep=rdata.report,Attendance.Report.empReportTableData=null),Attendance.toggleLoadingDiv(!0))})}},myReqEmpSort:function(obj){$(obj).hasClass("sort-d")?$(obj).attr("class","sort-img sort-u CP"):$(obj).attr("class","sort-img sort-d CP"),"ZPAtt_dailyReport_myReqEmpSort"===obj.id?Attendance.Report.getDailyReport():"ZPAtt_earlyLateReport_myReqEmpSort"===obj.id?Attendance.Report.getLateComerReport():"ZPAtt_monthlyReport_myReqEmpSort"===obj.id?Attendance.Report.getMonthlyReport():"ZPAtt_sumDayReport_myReqEmpSort"===obj.id?($(obj).hasClass("sort-d")?($(Attendance.Report.LayoutId+" #ZPAtt_sumHourReport_myReqEmpSort").attr("class","sort-img sort-d CP"),$(Attendance.Report.LayoutId+" #ZPAtt_simpSumHourReport_myReqEmpSort").attr("class","sort-img sort-d CP"),$(Attendance.Report.LayoutId+" #ZPAtt_simpSumDayReport_myReqEmpSort").attr("class","sort-img sort-d CP")):($(Attendance.Report.LayoutId+" #ZPAtt_sumHourReport_myReqEmpSort").attr("class","sort-img sort-u CP"),$(Attendance.Report.LayoutId+" #ZPAtt_simpSumHourReport_myReqEmpSort").attr("class","sort-img sort-u CP"),$(Attendance.Report.LayoutId+" #ZPAtt_simpSumDayReport_myReqEmpSort").attr("class","sort-img sort-u CP")),Attendance.Report.getSumReport()):"ZPAtt_sumHourReport_myReqEmpSort"===obj.id?($(obj).hasClass("sort-d")?($(Attendance.Report.LayoutId+" #ZPAtt_sumDayReport_myReqEmpSort").attr("class","sort-img sort-d CP"),$(Attendance.Report.LayoutId+" #ZPAtt_simpSumHourReport_myReqEmpSort").attr("class","sort-img sort-d CP"),$(Attendance.Report.LayoutId+" #ZPAtt_simpSumDayReport_myReqEmpSort").attr("class","sort-img sort-d CP")):($(Attendance.Report.LayoutId+" #ZPAtt_sumDayReport_myReqEmpSort").attr("class","sort-img sort-u CP"),$(Attendance.Report.LayoutId+" #ZPAtt_simpSumHourReport_myReqEmpSort").attr("class","sort-img sort-u CP"),$(Attendance.Report.LayoutId+" #ZPAtt_simpSumDayReport_myReqEmpSort").attr("class","sort-img sort-u CP")),Attendance.Report.getSumReport()):"ZPAtt_simpSumHourReport_myReqEmpSort"===obj.id?($(obj).hasClass("sort-d")?($(Attendance.Report.LayoutId+" #ZPAtt_sumHourReport_myReqEmpSort").attr("class","sort-img sort-d CP"),$(Attendance.Report.LayoutId+" #ZPAtt_sumDayReport_myReqEmpSort").attr("class","sort-img sort-d CP"),$(Attendance.Report.LayoutId+" #ZPAtt_simpSumDayReport_myReqEmpSort").attr("class","sort-img sort-d CP")):($(Attendance.Report.LayoutId+" #ZPAtt_sumHourReport_myReqEmpSort").attr("class","sort-img sort-u CP"),$(Attendance.Report.LayoutId+" #ZPAtt_sumDayReport_myReqEmpSort").attr("class","sort-img sort-u CP"),$(Attendance.Report.LayoutId+" #ZPAtt_simpSumDayReport_myReqEmpSort").attr("class","sort-img sort-u CP")),Attendance.Report.getSumReport()):"ZPAtt_simpSumDayReport_myReqEmpSort"===obj.id?($(obj).hasClass("sort-d")?($(Attendance.Report.LayoutId+" #ZPAtt_sumHourReport_myReqEmpSort").attr("class","sort-img sort-d CP"),$(Attendance.Report.LayoutId+" #ZPAtt_sumDayReport_myReqEmpSort").attr("class","sort-img sort-d CP"),$(Attendance.Report.LayoutId+" #ZPAtt_simpSumHourReport_myReqEmpSort").attr("class","sort-img sort-d CP")):($(Attendance.Report.LayoutId+" #ZPAtt_sumHourReport_myReqEmpSort").attr("class","sort-img sort-u CP"),$(Attendance.Report.LayoutId+" #ZPAtt_sumDayReport_myReqEmpSort").attr("class","sort-img sort-u CP"),$(Attendance.Report.LayoutId+" #ZPAtt_simpSumHourReport_myReqEmpSort").attr("class","sort-img sort-u CP")),Attendance.Report.getSumReport()):"ZPAtt_otReport_myReqEmpSort"===obj.id&&Attendance.Report.getBalOtReport()},consXMLdata:function(data){var absents=data.absentCount,presents=data.presentCount,weekend=data.weekendCount,holiday=data.holidayCount,leave=data.leaveCount,onduty=data.ondutyCount,lop=data.lop_leaveCount,usersYetToCheckIn=data.usersYetToCheckIn;new Highcharts.Chart({chart:{renderTo:"ZPAtt_reportChart",type:"pie",plotShadow:!1,spacingBottom:10,spacingTop:10,spacingLeft:30,spacingRight:10},credits:{enabled:!1},title:{text:ZPI18N.getString("zp.attdailyrepoverview")},tooltip:{percentageDecimals:2,pointFormat:"{point.name} ,<b>{point.percentage:.2f}%</b>"},legend:{enabled:!1},exporting:{enabled:!1,filename:"Attendance Daily Report"},plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",depth:30,dataLabels:{enabled:!0,formatter:function(){return this.point.name+","+this.point.y},style:{fontWeight:"normal",fontSize:"12px",fontFamily:"Verdana, sans-serif",color:Highcharts.theme&&Highcharts.theme.contrastTextColor||"black"}}}},series:[{data:[{name:ZPI18N.getString("zp.absent"),y:absents,color:"#f0989a",sliced:!0},{name:holiday_disName,y:holiday,color:"#9cc6e5"},{name:ZPI18N.getString("zp.leavetype.paid")+" "+ZPI18N.getString("zp.leave"),y:leave,color:"#fccaa1"},{name:ZPI18N.getString("zp.present"),y:presents,color:"#b2d7ad"},{name:ZPI18N.getString("zp.weekend"),y:weekend,color:"#ffe5a3"},{name:ZPI18N.getString("zp.onduty"),y:onduty,color:"#b6a7d2"},{name:ZPI18N.getString("zp.leavetype.unpaid")+" "+ZPI18N.getString("zp.leave"),y:lop,color:"#e95b6d"}],startAngle:225}]});$(Attendance.Report.LayoutId+" #ZPAtt_totCountId").html(data.totalCount),$(Attendance.Report.LayoutId+" #ZPAtt_preCountId").html(presents),$(Attendance.Report.LayoutId+" #ZPAtt_absCountId").html(absents),$(Attendance.Report.LayoutId+" #ZPAtt_lopCountId").html(lop),$(Attendance.Report.LayoutId+" #ZPAtt_levCountId").html(leave),$(Attendance.Report.LayoutId+" #ZPAtt_holCountId").html(holiday),$(Attendance.Report.LayoutId+" #ZPAtt_weeCountId").html(data.regWeekendCount);var layout=Layout.Page.container;if(ZPeople.Module.MODULE_DATA.attendance.isStatWkndConfig&&(layout.find("#ZPAtt_statWeeCountId").closest("li").removeClass("DN"),layout.find("#ZPAtt_statWeeCountId").html(data.statWeekendCount),layout.find("#ZPAtt_nonStatWeeCountId").closest("li").removeClass("DN"),layout.find("#ZPAtt_nonStatWeeCountId").html(data.nonStatWeekendCount)),$(Attendance.Report.LayoutId+" #ZPAtt_onduCountId").html(onduty),layout.find("#ZPAtt_userAvailabiltyCont").hide(),Attendance.Report.isBreakConfigured=!1,void 0!==data.userInStatusCount){Layout.Page.container.find("#ZPAtt_userAvailabiltyCont").show();var inStatusUsers=(data.userInStatusCount/data.totalCount*100).toFixed(5),outStatusUsers=(data.userOutStatusCount/data.totalCount*100).toFixed(5),isBreakConfigured=void 0!==data.userOnBreakCount;Layout.Page.container.find("#ZPAtt_OnBreakContainer").hide();var chartDataArr=[],colours=[];if(Layout.Page.container.find("#ZPAtt_OutUsersCount").prev().prop("outCountByLoc",!1),Layout.Page.container.find("#ZPAtt_InUsersCountCont").show(),Layout.Page.container.find("#ZPAtt_remInUsersCountCont").show(),Layout.Page.container.find("#ZPAtt_accTermInUsersCountCont").show(),Layout.Page.container.find("#ZPAtt_recDeskInUsersCountCont").show(),Layout.Page.container.find("#ZPAtt_yetToCheckInCont").show(),void 0!==data.webInStatusCount?(Layout.Page.container.find("#ZPAtt_remInUsersCount").html(data.webInStatusCount),Layout.Page.container.find("#ZPAtt_accTermInUsersCount").html(data.deviceInStatusCount),Layout.Page.container.find("#ZPAtt_recDeskInUsersCount").html(data.secDeskInStatusCount),Layout.Page.container.find("#ZPAtt_yetToCheckInCount").html(usersYetToCheckIn),Layout.Page.container.find("#ZPAtt_InUsersCountCont").hide(),chartDataArr=[["Remote In",parseFloat((data.webInStatusCount/data.totalCount*100).toFixed(5))],["Reception Desk In",parseFloat((data.secDeskInStatusCount/data.totalCount*100).toFixed(5))],["Access Terminal In",parseFloat((data.deviceInStatusCount/data.totalCount*100).toFixed(5))],["Out",parseFloat(outStatusUsers)]],colours=["#00bd9e","#b2d7ad","#32ADDC","#ff6f71","#ffb940"],Layout.Page.container.find("#ZPAtt_OutUsersCount").prev().attr("outCountByLoc",!0)):(Layout.Page.container.find("#ZPAtt_remInUsersCountCont").hide(),Layout.Page.container.find("#ZPAtt_accTermInUsersCountCont").hide(),Layout.Page.container.find("#ZPAtt_recDeskInUsersCountCont").hide(),Layout.Page.container.find("#ZPAtt_InUsersCount").html(data.userInStatusCount),Layout.Page.container.find("#ZPAtt_yetToCheckInCount").html(usersYetToCheckIn),chartDataArr=[["In",parseFloat(inStatusUsers)],["Out",parseFloat(outStatusUsers)]],colours=["#40e2bb","#ff6f71","#ffb940"]),Layout.Page.container.find("#ZPAtt_OutUsersCount").html(data.userOutStatusCount),isBreakConfigured){Attendance.Report.isBreakConfigured=!0,Layout.Page.container.find("#ZPAtt_OnBreakContainer").show();var onBreakUsers=(data.userOnBreakCount/data.totalCount*100).toFixed(5)}isBreakConfigured&&(chartDataArr.push(["On Break",parseFloat(onBreakUsers)]),Layout.Page.container.find("#ZPAtt_OnBreakCount").html(data.userOnBreakCount));new Highcharts.chart("brkReport",{chart:{plotBackgroundColor:null,plotBorderWidth:0,plotShadow:!1,margin:[0,0,0,0],spacingTop:0,spacingBottom:0,spacingLeft:0,spacingRight:0},colors:colours,title:{text:ZPI18N.getString("zp.checkinstatus"),x:-20},credits:{enabled:!1},tooltip:{pointFormat:"<b>{point.percentage:.1f}%</b>"},plotOptions:{pie:{dataLabels:{enabled:!1,style:{fontWeight:"bold",color:"white"}},startAngle:0,endAngle:360}},exporting:{enabled:!1},series:[{type:"pie",innerSize:"70%",data:chartDataArr}]})}(layout=Layout.Page.container).find("#ZPAtt_userAvailabiltyContByLoc,#ZPAtt_userPresentContByLoc").hide();var tcount=data.totalCount;if(void 0!==data.webPreStatusCount){layout.find("#ZPAtt_userPresentContByLoc").show();var webPreStatusCount=0===tcount?0:parseFloat((data.webPreStatusCount/tcount*100).toFixed(1)),secDeskPreStatusCount=0===tcount?0:parseFloat((data.secDeskPreStatusCount/tcount*100).toFixed(1)),devicePreCount=data.devicePreStatusCount,devicePreStatusCount=0===tcount?0:parseFloat((devicePreCount/tcount*100).toFixed(1)),genPreCount=data.genPreStatusCount,genPreStatusCount=0===tcount?0:parseFloat((genPreCount/tcount*100).toFixed(1)),genPreAccTermCount=0===tcount?0:parseFloat((data.genPreAccTermStatusCount/tcount*100).toFixed(1)),genPreSecDeskCount=0===tcount?0:parseFloat((data.genPreSecDeskStatusCount/tcount*100).toFixed(1)),genPreWebInCount=0===tcount?0:parseFloat((data.genPreWebInStatusCount/tcount*100).toFixed(1)),nonGenPreCount=data.nonGenPreStatusCount,nonGenPreStatusCount=0===tcount?0:parseFloat((nonGenPreCount/tcount*100).toFixed(1)),nonGenPreAccTermCount=0===tcount?0:parseFloat((data.nonGenPreAccTermStatusCount/tcount*100).toFixed(1)),nonGenPreSecDeskCount=0===tcount?0:parseFloat((data.nonGenPreSecDeskStatusCount/tcount*100).toFixed(1)),nonGenPreWebInCount=0===tcount?0:parseFloat((data.nonGenPreWebInStatusCount/tcount*100).toFixed(1));if(layout.find("#ZPAtt_WebPre").html(data.webPreStatusCount.toString()),layout.find("#ZPAtt_WebPrePer").html("("+webPreStatusCount.toString()+"%)"),layout.find("#ZPAtt_AccTermPre").html(devicePreCount.toString()),layout.find("#ZPAtt_AccTermPrePer").html("("+devicePreStatusCount.toString()+"%)"),layout.find("#ZPAtt_PreFromSecDesk").html(data.secDeskPreStatusCount.toString()),layout.find("#ZPAtt_PreFromSecDeskPer").html("("+secDeskPreStatusCount.toString()+"%)"),data.hubPreStatusCount){var hubPreStatusCount=data.hubPreStatusCount,hubPreStatusCounthtml="";for(var key in hubPreStatusCount){var count=hubPreStatusCount[key],percent=0===tcount?0:parseFloat((count/tcount*100).toFixed(1));hubPreStatusCounthtml+='<div id="hubofficePre" class="sub_dv CP" onclick="Attendance.Reports.dailyReport.constructList(\'accTermIn'+key+'\',this)" presentsCount="true"><span class="leave-clr" id="ZPAtt_AccTerm'+key+'Pre">'+count.toString()+"</span> at "+key+'<span class="leave-clr" id="ZPAtt_AccTerm'+key+'PrePer">('+percent.toString()+"%)</span></div>"}""!=hubPreStatusCounthtml&&layout.find("#accTermPre").append(hubPreStatusCounthtml)}layout.find("#ZPAtt_GenShiftPre").html(genPreCount.toString()),layout.find("#ZPAtt_GenShiftPrePer").html("("+genPreStatusCount.toString()+"%)"),layout.find("#ZPAtt_GenShiftRemoPre").html(data.genPreWebInStatusCount.toString()),layout.find("#ZPAtt_GenShiftRemoPrePer").html("("+genPreWebInCount.toString()+"%)"),layout.find("#ZPAtt_GenShiftAccTermPre").html(data.genPreAccTermStatusCount.toString()),layout.find("#ZPAtt_GenShiftAccTermPrePer").html("("+genPreAccTermCount.toString()+"%)"),layout.find("#ZPAtt_GenShiftSecDeskPre").html(data.genPreSecDeskStatusCount.toString()),layout.find("#ZPAtt_GenShiftSecDeskPrePer").html("("+genPreSecDeskCount.toString()+"%)"),layout.find("#ZPAtt_NonGenShiftPre").html(nonGenPreCount.toString()),layout.find("#ZPAtt_NonGenShiftPrePer").html("("+nonGenPreStatusCount.toString()+"%)"),layout.find("#ZPAtt_OthShiftRemoPre").html(data.nonGenPreWebInStatusCount.toString()),layout.find("#ZPAtt_OthShiftRemoPrePer").html("("+nonGenPreWebInCount.toString()+"%)"),layout.find("#ZPAtt_OthShiftAccTermPre").html(data.nonGenPreAccTermStatusCount.toString()),layout.find("#ZPAtt_OthShiftAccTermPrePer").html("("+nonGenPreAccTermCount.toString()+"%)"),layout.find("#ZPAtt_OthShiftSecDeskPre").html(data.nonGenPreSecDeskStatusCount.toString()),layout.find("#ZPAtt_OthShiftSecDeskPrePer").html("("+nonGenPreSecDeskCount.toString()+"%)")}if(void 0!==data.webInStatusCount){layout.find("#ZPAtt_userAvailabiltyContByLoc").show();var webInStatusCount=0===tcount?0:parseFloat((data.webInStatusCount/tcount*100).toFixed(1)),secDeskInStatusCount=0===tcount?0:parseFloat((data.secDeskInStatusCount/tcount*100).toFixed(1)),deviceCount=data.deviceInStatusCount,deviceInStatusCount=0===tcount?0:parseFloat((deviceCount/tcount*100).toFixed(1)),genInCount=(0===tcount||parseFloat((data.cheInStatusCount/tcount*100).toFixed(1)),0===tcount||parseFloat((data.tenkInStatusCount/tcount*100).toFixed(1)),0===tcount||parseFloat((data.renInStatusCount/tcount*100).toFixed(1)),data.genInStatusCount),genInStatusCount=0===tcount?0:parseFloat((genInCount/tcount*100).toFixed(1)),genInAccTermCount=0===tcount?0:parseFloat((data.genInAccTermStatusCount/tcount*100).toFixed(1)),genInSecDeskCount=0===tcount?0:parseFloat((data.genInSecDeskStatusCount/tcount*100).toFixed(1)),genInWebInCount=0===tcount?0:parseFloat((data.genInWebInStatusCount/tcount*100).toFixed(1)),nonGenInCount=data.nonGenInStatusCount,nonGenInStatusCount=0===tcount?0:parseFloat((nonGenInCount/tcount*100).toFixed(1)),nonGenInAccTermCount=0===tcount?0:parseFloat((data.nonGenInAccTermStatusCount/tcount*100).toFixed(1)),nonGenInSecDeskCount=0===tcount?0:parseFloat((data.nonGenInSecDeskStatusCount/tcount*100).toFixed(1)),nonGenInWebInCount=0===tcount?0:parseFloat((data.nonGenInWebInStatusCount/tcount*100).toFixed(1));if(layout.find("#ZPAtt_WebIn").html(data.webInStatusCount.toString()),layout.find("#ZPAtt_WebInPer").html("("+webInStatusCount.toString()+"%)"),layout.find("#ZPAtt_AccTermIn").html(deviceCount.toString()),layout.find("#ZPAtt_AccTermInPer").html("("+deviceInStatusCount.toString()+"%)"),layout.find("#ZPAtt_InFromSecDesk").html(data.secDeskInStatusCount.toString()),layout.find("#ZPAtt_InFromSecDeskPer").html("("+secDeskInStatusCount.toString()+"%)"),layout.find('div[id="huboffice"]').remove(),data.hubInStatusCount){var hubInStatusCount=data.hubInStatusCount,hubInStatusCounthtml="";for(var key in hubInStatusCount){count=hubInStatusCount[key],percent=0===tcount?0:parseFloat((count/tcount*100).toFixed(1));hubInStatusCounthtml+='<div id="huboffice" class="sub_dv CP" onclick="Attendance.Reports.dailyReport.constructList(\'accTermIn'+key+'\',this)" presentsCount="true"><span class="leave-clr" id="ZPAtt_AccTerm'+key+'">'+count.toString()+"</span> at "+key+'<span class="leave-clr" id="ZPAtt_AccTerm'+key+'Per">('+percent.toString()+"%)</span></div>"}""!=hubInStatusCounthtml&&layout.find("#accTermIn").append(hubInStatusCounthtml)}layout.find("#ZPAtt_GenShiftIn").html(genInCount.toString()),layout.find("#ZPAtt_GenShiftInPer").html("("+genInStatusCount.toString()+"%)"),layout.find("#ZPAtt_GenShiftRemo").html(data.genInWebInStatusCount.toString()),layout.find("#ZPAtt_GenShiftRemoPer").html("("+genInWebInCount.toString()+"%)"),layout.find("#ZPAtt_GenShiftAccTerm").html(data.genInAccTermStatusCount.toString()),layout.find("#ZPAtt_GenShiftAccTermPer").html("("+genInAccTermCount.toString()+"%)"),layout.find("#ZPAtt_GenShiftSecDesk").html(data.genInSecDeskStatusCount.toString()),layout.find("#ZPAtt_GenShiftSecDeskPer").html("("+genInSecDeskCount.toString()+"%)"),layout.find("#ZPAtt_NonGenShiftIn").html(nonGenInCount.toString()),layout.find("#ZPAtt_NonGenShiftInPer").html("("+nonGenInStatusCount.toString()+"%)"),layout.find("#ZPAtt_OthShiftRemo").html(data.nonGenInWebInStatusCount.toString()),layout.find("#ZPAtt_OthShiftRemoPer").html("("+nonGenInWebInCount.toString()+"%)"),layout.find("#ZPAtt_OthShiftAccTerm").html(data.nonGenInAccTermStatusCount.toString()),layout.find("#ZPAtt_OthShiftAccTermPer").html("("+nonGenInAccTermCount.toString()+"%)"),layout.find("#ZPAtt_OthShiftSecDesk").html(data.nonGenInSecDeskStatusCount.toString()),layout.find("#ZPAtt_OthShiftSecDeskPer").html("("+nonGenInSecDeskCount.toString()+"%)")}},consReportTable:function(status_view,obj){if(Attendance.Report.isBreakConfigured||Layout.Page.container.find("#ZPAtt_status_dailyRep option[value=4]").remove(),0!==status_view&&!status_view||$(Attendance.Report.LayoutId+" #ZPAtt_report_filter").hasClass("ZPFilsel")||Attendance.Report.toggleFilter(),Attendance.isZoho()&&status_view&&Layout.Page.container.find("#ZPAtt_backToChart").show(),obj&&("desc"===obj.localName||"div"===obj.localName))return obj.hasAttribute("presentsCount")||obj.hasAttribute("inCountByLoc")?(Layout.Page.container.find("#ZPAtt_dailyRep_status").select2("val",1),Attendance.Report.userInType=status_view):ZPeople.IsNumeric(status_view)&&Layout.Page.container.find("#ZPAtt_dailyRep_status").select2("val",status_view),Attendance.Report.empReportTableData=null,void Attendance.Report.dailyReportShowView("listView");var repTable=$(Attendance.Report.LayoutId+" #ZPAtt_attDailyReportTableBody");obj&&obj.isFromScroll||repTable.empty();var listViewData=this.empReportTableData;for(var empList in obj&&obj.isFromScroll&&obj.data&&(listViewData=obj.data),listViewData.empList){var empInfo=listViewData.empList[empList],status=Attendance.consLeaveStat(empInfo.status,!1,!0),tr="<tr class='ZPLRow'>",emp=empInfo.empId+" "+empInfo.name;tr+="<td><span class='ellipsis W200 CP' onclick=Attendance.Report.getUserReportFromSummary('"+empInfo.erecno+"',this,"+empInfo.empStat+") data-toggle='tooltip' data-placement='top' data-container='body' title='"+emp+"'>"+emp+"</span></td>",empInfo.ftime?tr+="<td>"+empInfo.ftime+"</td>":tr+="<td></td>",empInfo.ttime?tr+="<td>"+empInfo.ttime+"</td>":tr+="<td></td>",tr+="<td>"+empInfo.thrs+"</td>",$(Attendance.Report.LayoutId+" #ZPAtt_showHidePaidBreakDailyReport").hide(),$(Attendance.Report.LayoutId+" #ZPAtt_showHideUnpaidBreakDailyReport").hide(),this.empReportTableData.isBreakConfigured&&(this.empReportTableData.isPaidBrkDispNeed&&($(Attendance.Report.LayoutId+" #ZPAtt_showHidePaidBreakDailyReport").show(),tr+="<td>"+empInfo.totalPaidBreakHours+"</td>"),this.empReportTableData.isUnpaidBrkDispNeed&&($(Attendance.Report.LayoutId+" #ZPAtt_showHideUnpaidBreakDailyReport").show(),tr+="<td>"+empInfo.totalUnPaidBreakHours+"</td>")),$(Attendance.Report.LayoutId+" #ZPAtt_showHidePermissionDailyReport").hide(),this.empReportTableData.isPermissionConfigured&&($(Attendance.Report.LayoutId+" #ZPAtt_showHidePermissionDailyReport").show(),tr+="<td>"+empInfo.totalPermissionHours+"</td>"),tr+="<td><span class='ellipsis W200' data-toggle='tooltip' data-placement='left' title='"+status+"'>"+status+"</span></td>";var shift="<td>-</td>";if(empInfo.shiftId&&"-"!==empInfo.shiftId&&""!==empInfo.shiftId){var shiftInfo=Shift.getShiftName(empInfo.shiftId,!0);shift="<td><span class='ellipsis' data-toggle='tooltip' data-placement='left' title='"+shiftInfo.shiftName+" ("+shiftInfo.timeInterval+")'>"+shiftInfo.shiftName+"</span></td>"}tr+=shift,tr+="<td></td></tr>",repTable.append(tr)}if($(Attendance.Report.LayoutId+" #ZPAtt_dailyReportListView").hide(),$(Attendance.Report.LayoutId+" #ZPAtt_dailyReportListView").fadeIn(200),0===repTable.children().length){$(Attendance.Report.LayoutId+" #ZPAtt_dailyReport_emptyRecInfo").fadeIn(200),$(Attendance.Report.LayoutId+" #ZPAtt_dailyReportListView").hide();var empImg=Layout.Page.container.find("#ZPAtt_dailyReport_emptyRecInfo i").eq(0);0===empImg.children().length&&Attendance.noDataImg(8,"CR-nodata-rpt",empImg),$(Attendance.Report.LayoutId+" #ZPAtt_attDailyReport").removeClass("section")}else if($(Attendance.Report.LayoutId+" #ZPAtt_dailyReport_emptyRecInfo").hide(),$(Attendance.Report.LayoutId+" #ZPAtt_dailyReportListView").fadeIn(200),$(Attendance.Report.LayoutId+" #ZPAtt_attDailyReport").attr("class","Scrcont section"),!$(Attendance.Report.LayoutId+" #ZPAtt_dailyReportListView").hasClass("tabcont"))return this.empReportTableData.isBreakConfigured&&($(Attendance.Report.LayoutId+" #ZPAtt_showHidePaidBreakDailyReport").show(),$(Attendance.Report.LayoutId+" #ZPAtt_showHideUnpaidBreakDailyReport").show()),ZPView.handleTablePosition(),void(this.empReportTableData.isBreakConfigured&&($(Attendance.Report.LayoutId+" #ZPAtt_showHidePaidBreakDailyReport").hide(),$(Attendance.Report.LayoutId+" #ZPAtt_showHideUnpaidBreakDailyReport").hide(),this.empReportTableData.isPaidBrkDispNeed&&$(Attendance.Report.LayoutId+" #ZPAtt_showHidePaidBreakDailyReport").show(),this.empReportTableData.isUnpaidBrkDispNeed&&$(Attendance.Report.LayoutId+" #ZPAtt_showHideUnpaidBreakDailyReport").show()))},moreMonthlyReport:function(){Attendance.Report.isEnd||(Attendance.Report.mReportStartIndex+=50,Attendance.Report.getMonthlyReport(!0))},mReportStartIndex:0,monthlyRepParam:{},getMonthlyReport:function(scroll,navigate){var changedRec=Attendance.Report.monthlyRepParam,param={mode:"monthlyReport",conreqcsr:csrfToken};if(Attendance.toggleLoadingDiv(!1,$(Attendance.Report.LayoutId+" #ZPAtt_attmonthlyReport"),$(Attendance.Report.LayoutId+" #ZPAtt_mReport_emptyRecInfo")),-1!==Layout.Page.pageId.indexOf("attendance-report-monthlyreport")&&"Hour"===$(Attendance.Report.LayoutId+" #ZPAtt_month_Report").data("month")){var hrsTypeObj=$(Attendance.Report.LayoutId+" #ZPAtt_monthlyRep_hoursType")[0];hrsTypeObj&&""!==hrsTypeObj.value&&"0"!==hrsTypeObj.value?param.hrsType=hrsTypeObj.value:$("#attendance-report-hoursreport #ZPAtt_monthlyRep_hoursType")[0]&&$("#attendance-report-hoursreport #ZPAtt_monthlyRep_hoursType").select2("val","0")}else $(Attendance.Report.LayoutId+" #ZPAtt_monthlyRep_hoursType")[0]&&$(Attendance.Report.LayoutId+" #ZPAtt_monthlyRep_hoursType").select2("val","0");var statRepFilter=Layout.Page.container.find("#ZPAtt_monthlyReportfilter");Attendance.Report.getFilterValues(statRepFilter,param,"monthlyRep"),Attendance.Report.setUserTypeID(param);var sDate=statRepFilter.find("#ZPAtt_monthlyRep_fromDate"),eDate=statRepFilter.find("#ZPAtt_monthlyRep_toDate");sDate[0]&&""!==sDate.val().trim()&&(param.sdate=sDate.val().trim()),eDate[0]&&""!==eDate.val().trim()&&(param.edate=eDate.val().trim());var empId=statRepFilter.find("#ZPAtt_monthlyRep_empName").val();empId&&(param.erecno=JSON.stringify(empId.split(","))),navigate&&(param.navigate=navigate),Attendance.Report.Asc=null,$(Attendance.Report.LayoutId+" #ZPAtt_monthlyReport_myReqEmpSort").hasClass("sort-d")?(param.isEmpSortAsc=!1,Attendance.Report.Asc="sort-d"):$(Attendance.Report.LayoutId+" #ZPAtt_monthlyReport_myReqEmpSort").hasClass("sort-u")&&(param.isEmpSortAsc=!0,Attendance.Report.Asc="sort-u"),scroll?(changedRec.sdate!==param.sdate||changedRec.edate!==param.edate||changedRec.locationId!==param.locationId||changedRec.departmentId!==param.departmentId||changedRec.userTypeId!==param.userTypeId||changedRec.shiftId!==param.shiftId||changedRec.eNo!==param.eNo?scroll=!1:param.startIndex=Attendance.Report.mReportStartIndex+1,Attendance.appendScroller($(Attendance.Report.LayoutId+" #ZPAtt_attmonthlyReportTableBody"),scroll)):($(Attendance.Report.LayoutId+" #ZPAtt_mReport_emptyRecInfo")[0]&&$(Attendance.Report.LayoutId+" #ZPAtt_mReport_emptyRecInfo").hide(),$(Attendance.Report.LayoutId+" #ZPAtt_attmonthlyReportTable").parent().hide(),0===$(Attendance.Report.LayoutId+" #ZPAtt_attmonthlyReport").find("#zp_page_loading").length&&$(Attendance.Report.LayoutId+" #ZPAtt_attmonthlyReport").append(ZPeople.LOADING_HTML)),$.post("/AttendanceReportAction.zp",param,function(rdata){if(rdata.fail)Attendance.permDenied();else{if(rdata.error)return Attendance.Report.mReportLength=0,"exceeded dates"===rdata.error&&ZPeople.Message.showFailureMsg(ZPI18N.getString("zp.datewithinonemonth")),"error in end date"===rdata.error&&ZPeople.Message.showFailureMsg(ZPI18N.getString("zp.greaterfromdate")),void $(Attendance.Report.LayoutId+" #ZPAtt_attmonthlyReportTableBody").closest("div.Scrcont").find("#zp_page_loading").remove();if(Attendance.Report.isloginDisMonthRep="-6"===param.userTypeId,Attendance.Report.setUserTypeIDInFilter(param,statRepFilter,"monthlyRep"),scroll||(Attendance.Report.mReportStartIndex=0,$(Attendance.Report.LayoutId+" #ZPAtt_attmonthlyReport .table-responsive").scrollTop(0)),rdata.dayList)if(Attendance.Report.mReport=rdata.dayList,Attendance.Report.mReportLength=rdata.dayList.length,50===rdata.dayList.length&&ZPeople.FireScroll.reset(),scroll)for(var i in rdata.dayList)Attendance.Report.monthlyReport.push(rdata.dayList[i]);else Attendance.Report.monthlyReport=rdata.dayList;Attendance.Report.getLeaveTypes(),rdata.dispMonth?Attendance.Report.month=rdata.dispMonth:Attendance.Report.month=null,Attendance.Report.mReportsDate=rdata.fdate,Attendance.Report.mReporteDate=rdata.tdate,Attendance.Report.statusHeader=rdata.statusHeader,param.eNo&&(param.empName=$(Attendance.Report.LayoutId+" #s2id_ZPAtt_monthlyRep_empName span").html()),param.sdate||(param.sdate=Attendance.Report.depLocShiftList.currDate.monthStartDate,param.edate=Attendance.Report.depLocShiftList.currDate.monthEndDate),param.sdate=rdata.fdate,param.edate=rdata.tdate,Attendance.Report.monthlyRepParam=param,navigate&&($(Attendance.Report.LayoutId+" #ZPAtt_monthlyRep_period").select2("val",6),$(Attendance.Report.LayoutId+" #ZPAtt_monthlyRep_fromDate").attr("disabled",!1),$(Attendance.Report.LayoutId+" #ZPAtt_monthlyRep_toDate").attr("disabled",!1)),rdata.isStatWeekendConfigForOrg&&(Layout.Page.container.find("#ZPAtt_statRepSWLegend").removeClass("DNI"),Layout.Page.container.find("#ZPAtt_statRepNSWLegend").removeClass("DNI"),Layout.Page.container.find("#ZPAtt_statRepSWLegendSide").removeClass("DNI"),Layout.Page.container.find("#ZPAtt_statRepNSWLegendSide").removeClass("DNI")),-1!==Layout.Page.pageId.indexOf("attendance-report-monthlyreport")&&"Hour"===$(Attendance.Report.LayoutId+" #ZPAtt_month_Report").data("month")?Attendance.Report.showMonthlyReport(scroll,!0):Attendance.Report.showMonthlyReport(scroll)}})},showMonthlyReport:function(scroll,isHoursMonReport){var data,container=Layout.Page.container,repTableBody=container.find("#ZPAtt_attmonthlyReportTableBody"),repTableHead=container.find("#ZPAtt_attmonthlyReportTableHeader");repTableHead.hide(),container.find("#ZPAtt_monthlyRep_fromDate").val(Attendance.Report.mReportsDate),container.find("#ZPAtt_monthlyRep_toDate").val(Attendance.Report.mReporteDate),scroll?data=Attendance.Report.mReport:(repTableBody.empty(),data=Attendance.Report.monthlyReport);for(var i=0;i<data.length;i++){var tr="<tr class='ZPLRow'>";tr+="<td class='fxdtd' style='max-width:300px;width:300px;height:57px;'><img class='FL' src="+data[i].empPhoto+">";var empId=data[i].empId,empName=data[i].name;tr+="<div class='ZPusrName'><span class='ellipsis W200 CP' onclick=Attendance.Report.getUserReportFromSummary('"+data[i].erecno+"',this,"+data[i].empStat+") data-toggle='tooltip' data-placement='top' data-container='body' title='"+empId+" "+empName+"'><b>"+empId+"</b>"+empName+"</span></div></td>";for(var k=0;k<Object.keys(data[i]).length-10;k++){var status=data[i][k];if(status.notApplicable)tr+="<td class='TC'><span>-</span></td>";else{var weekendClass="",stat="";stat=status.dayStatus;var lStatus=status.dayStatusWithoutCode;lStatus||(lStatus=stat);var colorClass="";if(-1!==lStatus.indexOf("LOP")?colorClass="lop":-1!==lStatus.indexOf("OD")?colorClass="onduty":-1!==lStatus.indexOf("L")?colorClass="leave":-1!==stat.indexOf("W")?(weekendClass="WKend WStripe",colorClass="wkend"):-1!==stat.indexOf("H")?colorClass="holiday":-1!==stat.indexOf("P")?colorClass="present":-1!==stat.indexOf("A")&&(colorClass="absent"),isHoursMonReport)1===(stat=status.hrsStatus).split("/").length&&-1!==stat.indexOf("(")&&(stat=stat.substr(0,stat.indexOf("(")));tr+="<td class='"+weekendClass+"' style='max-width:300px'><span class='RPData "+colorClass+"-border'>"+stat+"</span></td>"}}tr+="</tr>",repTableBody.append(tr)}Attendance.Report.mReportLength<50?Attendance.Report.isEnd=!0:Attendance.Report.isEnd=!1;var emptyRec=container.find("#ZPAtt_mReport_emptyRecInfo");if(0===repTableBody.children().length){container.find("#ZPAtt_attmonthlyReportTable").parent().hide(),emptyRec.fadeIn(200);var empImg=emptyRec.find("i").eq(0);0===empImg.children().length&&Attendance.noDataImg(8,"CR-nodata-rpt",empImg)}else{if(repTableHead.show(),Attendance.Report.statusHeader&&!scroll){repTableHead.empty(),container.find("#ZPAtt_attmonthlyReportTable").parent().fadeIn(200);for(var statusData=Attendance.Report.statusHeader,th="<tr class='ZPLHRow'>",j=0;j<statusData.length;j++){if(0==j){var sort=null===Attendance.Report.Asc?"sort":Attendance.Report.Asc;th+="<th style='max-width:300px;width:300px;'><div><span>"+ZPI18N.getString("zp.employee")+"</span><i class='sort-img "+sort+" CP' id='ZPAtt_monthlyReport_myReqEmpSort' onclick='Attendance.Report.myReqEmpSort(this)' data-toggle='tooltip' data-placement='bottom' data-container='body' data-original-title=' "+ZPI18N.getString("zp.sort")+" '></i></div></th>"}var headerResp=statusData[j].split("-"),date=headerResp[0],month=headerResp[1],day=days[headerResp[3]-1];th+="<th class='text-center'>",th+="<span class='DB MB3'>"+ZPI18N.getString("zp."+month.toLowerCase())+" "+date+"</span>",th+="<span class='DB dgry ZPreg'>"+day+"</span>",th+="</th>"}th+="</tr>",repTableHead.html(th)}emptyRec.hide()}var mon=Attendance.datesInHeader(Attendance.Report.mReportsDate,Attendance.Report.mReporteDate);if(Attendance.Report.month){var aa=Attendance.Report.month.split(" ");mon=ZPI18N.getString("zp."+aa[0].toLowerCase())+" "+aa[1]}container.find("#ZPAtt_monthlyReportDates")[0].innerHTML=mon,container.find("#ZPAtt_attmonthlyReportTable").parent().css("width","auto");var param=Attendance.Report.monthlyRepParam;container.find("#ZPAtt_monthlyRep_fromDate").val(param.sdate?param.sdate:""),container.find("#ZPAtt_monthlyRep_toDate").val(param.edate?param.edate:""),container.find("#ZPAtt_monthlyRep_shift").select2("val",param.shiftId?param.shiftId:0),Attendance.toggleLoadingDiv(!0),repTableBody.closest("div.Scrcont").find("#zp_page_loading").remove(),Attendance.handleTableHeader()},getLeaveTypes:function(isCalView){$(Attendance.Report.LayoutId+" #ZPAtt_statusRep_PaidLeaveDectCont,#ZPAtt_statusRep_ODLeaveDectCont,#ZPAtt_statusRep_UPLeaveDectCont").empty();var param={mode:"getLeaveTypes",conreqcsr:csrfToken},eNo=void 0;if(isCalView){eNo=erecno;Attendance.Entry.erecno&&(eNo=Attendance.Entry.erecno),param.isNullCodeNeeded=!0}else eNo=$(Attendance.Report.LayoutId+" #ZPAtt_monthlyRep_empName").val(),param.isNullCodeNeeded=!1;eNo&&(param.eNo=JSON.stringify(eNo.split(",")));var locObj=$(Attendance.Report.LayoutId+" #ZPAtt_monthlyRep_location").val();locObj&&(param.locationId=JSON.stringify(locObj)),$.post("/AttendanceReportAction.zp",param,function(rdata){isCalView?Attendance.Entry.leaveTypes=rdata.leaveTypes:$.each(rdata.leaveTypes,function(index,defObj){var lCode=defObj.lCode;if(void 0!==lCode){var lName=$("<div/>").text(defObj.lName).html(),lType=defObj.lType,color="leave-border",cont=$(Attendance.Report.LayoutId+" #ZPAtt_statusRep_PaidLeaveDectCont");1===lType?(cont=$(Attendance.Report.LayoutId+" #ZPAtt_statusRep_ODLeaveDectCont"),color="onduty-border"):3===lType&&(cont=$(Attendance.Report.LayoutId+" #ZPAtt_statusRep_UPLeaveDectCont"),color="lop-border");var defHtml="<div class='Dtyps "+color+"'><span title='"+lName+"'>"+lCode+" - "+lName+"</span></div>";cont.append(defHtml)}})})},moreSummaryReport:function(){Attendance.Report.isEnd||(Attendance.Report.sReportStartIndex+=50,Attendance.Report.getSumReport(!0))},sReportStartIndex:0,sumRepParam:{},isLoginDisUserSum:!1,getSumReport:function(scroll,navigate,isFilterSearch){var changedRec=Attendance.Report.sumRepParam,param={mode:"customReport",conreqcsr:csrfToken};navigate&&(param.navigate=navigate);var layout=Layout.Page.container,sumRepFilter=layout.find("#ZPAtt_summaryReportfilter");Attendance.Report.getFilterValues(sumRepFilter,param,"sumRep"),Attendance.Report.setUserTypeID(param);var sDate=sumRepFilter.find("#ZPAtt_sumRep_fromDate"),eDate=sumRepFilter.find("#ZPAtt_sumRep_toDate");if(sDate[0]&&""!==sDate.val().trim()&&(param.sdate=sDate.val().trim()),eDate[0]&&""!==eDate.val().trim()&&(param.edate=eDate.val().trim()),param.sdate&&param.edate){param.getOneMonthData=!0;var empId=$(Attendance.Report.LayoutId+" #ZPAtt_sumRep_empName").val();if(empId&&(param.erecno=JSON.stringify(empId.split(","))),$(Attendance.Report.LayoutId+" #ZPAtt_sumDayReport_myReqEmpSort").hasClass("sort")&&$(Attendance.Report.LayoutId+" #ZPAtt_sumHourReport_myReqEmpSort").hasClass("sort")&&$(Attendance.Report.LayoutId+" #ZPAtt_simpSumDayReport_myReqEmpSort").hasClass("sort")&&$(Attendance.Report.LayoutId+" #ZPAtt_simpSumHourReport_myReqEmpSort").hasClass("sort")||(param.isEmpSortAsc=$(Attendance.Report.LayoutId+" #ZPAtt_sumDayReport_myReqEmpSort").hasClass("sort-u")||$(Attendance.Report.LayoutId+" #ZPAtt_sumHourReport_myReqEmpSort").hasClass("sort-u")||$(Attendance.Report.LayoutId+" #ZPAtt_simpSumDayReport_myReqEmpSort").hasClass("sort-u")||$(Attendance.Report.LayoutId+" #ZPAtt_simpSumHourReport_myReqEmpSort").hasClass("sort-u")),isFilterSearch&&changedRec.sdate===param.sdate&&changedRec.edate===param.edate&&changedRec.locationId===param.locationId&&changedRec.departmentId===param.departmentId&&changedRec.userTypeId===param.userTypeId&&changedRec.shiftId===param.shiftId&&changedRec.eNo===param.eNo&&layout.find("#ZPAtt_showSimpleRep").prop("checked")!==Attendance.Report.isSimpleSumRep){var switchId="#ZPAtt_Summary_Report_day";return"Hour"===layout.find("#ZPAtt_Summary_Report").data("summ")&&(switchId="#ZPAtt_Summary_Report_hr"),Attendance.Report.summReport(Layout.Page.container.find(switchId).eq(0)[0]),void(Attendance.Report.isSimpleSumRep=layout.find("#ZPAtt_showSimpleRep").prop("checked"))}scroll?(changedRec.sdate!==param.sdate||changedRec.edate!==param.edate||changedRec.locationId!==param.locationId||changedRec.departmentId!==param.departmentId||changedRec.userTypeId!==param.userTypeId||changedRec.shiftId!==param.shiftId||changedRec.eNo!==param.eNo?scroll=!1:param.startIndex=Attendance.Report.sReportStartIndex+1,Attendance.appendScroller(layout.find("#ZPAtt_attSumReportTableBody"),scroll),Attendance.appendScroller(layout.find("#ZPAtt_simpSumDayRepBody"),scroll)):(layout.find("#ZPAtt_sReport_emptyRecInfo")[0]&&layout.find("#ZPAtt_sReport_emptyRecInfo").hide(),layout.find("#ZPAtt_detSumRep").hide(),layout.find("#ZPAtt_simpSumRep").hide(),0===layout.find("#ZPAtt_attSumReportScrcont").find("#zp_page_loading").length&&layout.find("#ZPAtt_attSumReportScrcont").append(ZPeople.LOADING_HTML)),$.post("/AttendanceReportAction.zp",param,function(rdata){if(rdata.fail)Attendance.permDenied();else{if(rdata.error)return Attendance.Report.sReportLength=0,"exceeded dates"===rdata.error?ZPeople.Message.showFailureMsg(ZPI18N.getString("zp.datewithinonemonth")):"error in end date"===rdata.error&&ZPeople.Message.showFailureMsg(ZPI18N.getString("zp.greaterfromdate")),void layout.find("#ZPAtt_attSumReportScrcont").find("#zp_page_loading").remove();if(scroll||(Attendance.Report.sReportStartIndex=0,layout.find("#ZPAtt_attSumReportScrcont .table-responsive").scrollTop(0),layout.find("#ZPAtt_simpSumDayRepBody").parent().scrollTop(0),Attendance.Report.totalWorkedHours=0,Attendance.Report.totalCountwSecs=0,Attendance.Report.totalOverSecs=0,Attendance.Report.totalDevSecs=0,Attendance.Report.totalWorkedSecs=0,Attendance.Report.totalOndutySecs=0,Attendance.Report.totalLeaveSecs=0,Attendance.Report.totalLOPSecs=0,Attendance.Report.totalExpectedPaiddaysInSec=0,Attendance.Report.totalWorkingdaysInSec=0,Attendance.Report.totalHolidaydaysInSec=0,Attendance.Report.totalWeekenddaysInSec=0,Attendance.Report.totalPaidOffdaysInSec=0,Attendance.Report.totalAbsentdaysInSec=0,Attendance.Report.totalUnPaidOffdaysInSec=0,Attendance.Report.totalPaiddaysInSec=0,Attendance.Report.PP_PayOffDaysInSec=0,Attendance.Report.PP_ExpectedPayDaysInSec=0,Attendance.Report.totalPaidBreakInSecs=0,Attendance.Report.totalUnPaidBreakInSecs=0,Attendance.Report.totalPermissionInSecs=0,Attendance.Report.totStatWkndOT=0,Attendance.Report.totNonStatWkndOT=0,Attendance.Report.totalStatWknd=0,Attendance.Report.totalNonStatWknd=0,Attendance.Report.totalRegWknd=0,Attendance.Report.totRegWorkHrs=0,Attendance.Report.totLNWorkHrs=0,Attendance.Report.totWkndRegOT=0,Attendance.Report.totWkndLNOT=0,Attendance.Report.totHolidayRegOT=0,Attendance.Report.totHolidayLNOT=0,Attendance.Report.totRegRegOT=0,Attendance.Report.totRegLNOT=0,Attendance.Report.totStatWkndRegOT=0,Attendance.Report.totStatWkndLNOT=0,Attendance.Report.totNonStatWkndRegOT=0,Attendance.Report.totNonStatWkndLNOT=0,Attendance.Report.totWkndOT=0,Attendance.Report.totHolidayOT=0,Attendance.Report.totRegOT=0,Attendance.Report.totRegWeekendHours=0,Attendance.Report.worked=0,Attendance.Report.paidOff=0,Attendance.Report.paid=0,Attendance.Report.expected=0,Attendance.Report.ot=0,Attendance.Report.unpaidOff=0,Attendance.Report.paidBreak=0,Attendance.Report.unpaidBreak=0,Attendance.Report.permission=0),Attendance.Report.isLoginDisUserSum="-6"===param.userTypeId||"5"===param.userTypeId,Attendance.Report.showOTDT=rdata.showOverDevTime,rdata.report)if(Attendance.Report.erecnoList=rdata.report.erecnoList,Attendance.Report.sumEnoListAll=scroll?Attendance.Report.sumEnoListAll.concat(rdata.report.erecnoList):rdata.report.erecnoList,Attendance.Report.sReport=rdata.report,Attendance.Report.sReportLength=rdata.report.erecnoList.length,50===Attendance.Report.sReportLength&&ZPeople.FireScroll.reset(),scroll)for(var i in rdata.report)Attendance.Report.summaryReport[i]=rdata.report[i];else Attendance.Report.summaryReport=rdata.report;Attendance.Report.sumReportsDate=rdata.fdate,Attendance.Report.sumReporteDate=rdata.tdate,param.eNo&&(param.empName=layout.find("#s2id_ZPAtt_sumRep_empName span").html()),Attendance.Report.setUserTypeIDInFilter(param,sumRepFilter,"sumRep"),param.sdate=rdata.fdate,param.edate=rdata.tdate,param.dispMonth=rdata.dispMonth,Attendance.Report.sumRepParam=param,navigate&&(layout.find("#ZPAtt_sumRep_period").select2("val",6),layout.find("#ZPAtt_sumRep_fromDate").attr("disabled",!1),layout.find("#ZPAtt_sumRep_toDate").attr("disabled",!1)),-1!==Layout.Page.pageId.indexOf("attendance-report-summaryreport")&&("Day"===layout.find("#ZPAtt_Summary_Report").data("summ")?Attendance.Report.showSumReport(scroll):Attendance.Report.showSumReport(scroll,!0))}})}else ZPeople.Message.showFailureMsg(ZPI18N.getString("zp.enterfromtodate"))},showSumReport:function(scroll,isHoursSumReport){var repTable,data,enoList,layout=Layout.Page.container,isSimpleRep=layout.find("#ZPAtt_showSimpleRep").prop("checked");isSimpleRep?(layout.find("#ZPAtt_simpSumRep").show(),layout.find("#ZPAtt_detSumRep").hide(),layout.find("#ZPAtt_attSumReportScrcont").removeClass("fixTable").removeClass("rpt-tbl"),repTable=layout.find("#ZPAtt_simpSumDayRepBody"),layout.find("#ZPAtt_attSumReportTableBody").children().remove(),isHoursSumReport?(layout.find("#ZPAtt_simpSumHourRepHeader").show(),layout.find("#ZPAtt_simpSumDayRepHeader").hide()):(layout.find("#ZPAtt_simpSumHourRepHeader").hide(),layout.find("#ZPAtt_simpSumDayRepHeader").show())):(layout.find("#ZPAtt_simpSumRep").hide(),layout.find("#ZPAtt_detSumRep").show(),layout.find("#ZPAtt_attSumReportScrcont").addClass("fixTable").addClass("rpt-tbl"),repTable=layout.find("#ZPAtt_attSumReportTableBody"),layout.find("#ZPAtt_simpSumDayRepBody").children().remove(),isHoursSumReport?(layout.find("#ZPAtt_attSumHourReportTableHeader").show(),layout.find("#ZPAtt_attSumDayReportTableHeader").hide()):(layout.find("#ZPAtt_attSumDayReportTableHeader").show(),layout.find("#ZPAtt_attSumHourReportTableHeader").hide())),scroll?(data=Attendance.Report.sReport,enoList=Attendance.Report.erecnoList):(repTable.empty(),data=Attendance.Report.summaryReport,enoList=Attendance.Report.sumEnoListAll);if(isHoursSumReport||isSimpleRep)if(isSimpleRep)if(Layout.Page.container.find(".tbl_fxdtd").css("top",Layout.Page.container.find(".tbl_hdfxd").height()),isHoursSumReport){Layout.Page.container.find("#ZPAtt_simpleSumReportPaidBrk").addClass("DN"),Layout.Page.container.find("#ZPAtt_simpleSumReportUnPaidBrk").addClass("DN"),data.isBreakConfigured&&(data.isPaidBrkDispNeed&&Layout.Page.container.find("#ZPAtt_simpleSumReportPaidBrk").removeClass("DN"),data.isUnpaidBrkDispNeed&&Layout.Page.container.find("#ZPAtt_simpleSumReportUnPaidBrk").removeClass("DN"));var worked=0,paidOff=0,paid=0,expected=0,ot=0,unpaidOff=0,paidBreak=0,unpaidBreak=0,permission=0;for(var e in enoList){rowclass="ZPLRow",dateofexit="";(empInfo=data[enoList[e]]).doe&&(rowclass="ZPLRow disabled",dateofexit="( "+ZPI18N.getString("zp.exitdate")+" - "+empInfo.doe+")");tr="<tr class='"+rowclass+"' id='"+empInfo.eno+"report'>",empId=empInfo.empId,empName=empInfo.name;tr+='<td width="300" class="P_AM"><div class="ZPusrName W250"><img class="FL Usrimg" src="'+empInfo.empPhoto+'">',tr+='<span class="usrDts" onclick=Attendance.Report.getUserReportFromSummary("'+empInfo.eno+'",this,'+empInfo.empStat+') data-toggle="tooltip" data-placement="top" data-container="body" title="'+empId+" "+empName+'"><span class="usrEmpID">'+empId+" </span> "+empName+'</span><em class="ZPsecName">'+dateofexit+"</em></div></td>",tr+="<td>"+Attendance.disHours(empInfo.totalWorkedDaysInSecs/60)+"</td>",worked+=empInfo.totalWorkedDaysInSecs,data.isPaidOffAvail&&(tr+="<td>"+Attendance.disHours(empInfo.pp_PaidOffDaysInsecs/60)+"</td>",paidOff+=empInfo.pp_PaidOffDaysInsecs,tr+="<td>"+Attendance.disHours(empInfo.totalPayDaysInSecs/60)+"</td>",paid+=empInfo.totalPayDaysInSecs),tr+="<td>"+Attendance.disHours(empInfo.pp_expectedPaidDaysInSecs/60)+"</td>",expected+=empInfo.pp_expectedPaidDaysInSecs,0===Attendance.Report.showOTDT&&(tr+='<td width="100">'+Attendance.disHours(empInfo.overTime_tsecs/60)+"</td>",ot+=empInfo.overTime_tsecs),tr+="<td>"+Attendance.disHours(empInfo.totalUnPaidOffDaysInSecs/60)+"</td>",unpaidOff+=empInfo.totalUnPaidOffDaysInSecs,data.isBreakConfigured&&(tr+="<td"+(data.isPaidBrkDispNeed?"":' class = "DN"')+">"+empInfo.totalPaidBreakHours+"</td>",paidBreak+=empInfo.totalPaidBreakInSecs,tr+="<td"+(data.isUnpaidBrkDispNeed?"":' class = "DN"')+">"+empInfo.totalUnPaidBreakHours+"</td>",unpaidBreak+=empInfo.totalUnPaidBreakInSecs),data.isPermissionConfigured&&(tr+="<td>"+empInfo.totalPermissionHours+"</td>",permission+=empInfo.totalPermissionInSecs),tr+="</tr>",repTable.append(tr)}if(Attendance.Report.worked+=worked,Attendance.Report.paidOff+=paidOff,Attendance.Report.paid+=paid,Attendance.Report.expected+=expected,Attendance.Report.ot+=ot,Attendance.Report.unpaidOff+=unpaidOff,Attendance.Report.paidBreak+=paidBreak,Attendance.Report.unpaidBreak+=unpaidBreak,Attendance.Report.permission+=permission,Attendance.Report.sReportLength<50&&!repTable.find("#ZPAtt_simpleSumReporttotal").is(":visible")&&0!==repTable.children().length){var totTr='<tr class="ZPLRow" style="" id="ZPAtt_simpleSumReporttotal">';totTr+='<td width="300" class="P_AM"><div>'+ZPI18N.getString("zp.total")+"</div></td>",totTr+="<td>"+Attendance.disHours(Attendance.Report.worked/60)+"</td>",data.isPaidOffAvail&&(totTr+="<td>"+Attendance.disHours(Attendance.Report.paidOff/60)+"</td>",totTr+="<td>"+Attendance.disHours(Attendance.Report.paid/60)+"</td>"),totTr+="<td>"+Attendance.disHours(Attendance.Report.expected/60)+"</td>",0===Attendance.Report.showOTDT&&(totTr+='<td width="100">'+Attendance.disHours(Attendance.Report.ot/60)+"</td>"),totTr+="<td>"+Attendance.disHours(Attendance.Report.unpaidOff/60)+"</td>",data.isBreakConfigured&&(totTr+="<td"+(data.isPaidBrkDispNeed?"":' class = "DN"')+">"+Attendance.disHours(Attendance.Report.paidBreak/60)+"</td>",totTr+="<td"+(data.isUnpaidBrkDispNeed?"":' class = "DN"')+">"+Attendance.disHours(Attendance.Report.unpaidBreak/60)+"</td>"),data.isPermissionConfigured&&(totTr+="<td>"+Attendance.disHours(Attendance.Report.permission/60)+"</td>"),totTr+="</tr>",repTable.append(totTr)}}else for(var e in enoList){rowclass="ZPLRow",dateofexit="";(empInfo=data[enoList[e]]).doe&&(rowclass="ZPLRow disabled",dateofexit="( "+ZPI18N.getString("zp.exitdate")+" - "+empInfo.doe+")");var tr="<tr class='"+rowclass+"' id='"+empInfo.eno+"report'>";empId=empInfo.empId,empName=empInfo.name;tr+='<td width="300" class="P_AM"><div class="ZPusrName W250"><img class="FL Usrimg" src="'+empInfo.empPhoto+'">',tr+='<span class="usrDts" onclick=Attendance.Report.getUserReportFromSummary("'+empInfo.eno+'",this,'+empInfo.empStat+') data-toggle="tooltip" data-placement="top" data-container="body" title="'+empId+" "+empName+'"><span class="usrEmpID">'+empId+" </span> "+empName+'</span><em class="ZPsecName">'+dateofexit+"</em></div></td>",tr+="<td>"+empInfo.totalWorkedDays_count+"</td>",data.isPaidOffAvail&&(tr+="<td>"+empInfo.pp_PaidOffDays+"</td>",tr+="<td>"+empInfo.totalPaidDays_count+"</td>"),tr+="<td>"+empInfo.pp_expectedPaidDays+"</td>",0===Attendance.Report.showOTDT&&(tr+='<td width="100">'+Attendance.disHours(empInfo.overTime_tsecs/60)+"</td>"),tr+="<td>"+empInfo.totalUnPaidOffDays_count+"</td></tr>",repTable.append(tr)}else{var tworkingsec=0,tdevsecs=0,toversecs=0,ondutysecs=0,totalworkedsecs=0,leavesecs=0,lopSecs=0,totalWorkedHours=0,totExpectedPaiddaysInSec=0,totWorkingdaysInSec=0,totHolidaydaysInSec=0,totWeekenddaysInSec=0,totPaidOffdaysInSec=0,totAbsentdaysInSec=0,totUnPaidOffdaysInSec=0,totPaiddaysInSec=0,PP_PayDaysInSec=0,PP_ExpectedPayDaysInSec=0,totalPaidBreakInSecs=0,totalUnPaidBreakInSecs=0,totalPermissionInSecs=0,totalRegWknd=0,totalStatWknd=0,totalNonStatWknd=0,totRegWorkHrs=0,totLNWorkHrs=0,totWkndOT=0,totWkndRegOT=0,totWkndLNOT=0,totHolidayOT=0,totHolidayRegOT=0,totHolidayLNOT=0,totRegOT=0,totRegRegOT=0,totRegLNOT=0,totStatWkndOT=0,totStatWkndRegOT=0,totStatWkndLNOT=0,totNonStatWkndOT=0,totNonStatWkndRegOT=0,totNonStatWkndLNOT=0,totRegWeekendHours=0;for(var i in Layout.Page.container.find("#ZPAtt_showHidePaidBreakSumReport").addClass("DN"),Layout.Page.container.find("#ZPAtt_showHideUnpaidBreakSumReport").addClass("DN"),data.isBreakConfigured&&(data.isPaidBrkDispNeed&&Layout.Page.container.find("#ZPAtt_showHidePaidBreakSumReport").removeClass("DN"),data.isUnpaidBrkDispNeed&&Layout.Page.container.find("#ZPAtt_showHideUnpaidBreakSumReport").removeClass("DN")),enoList){var rowclass="ZPLRow",dateofexit="";(empInfo=data[enoList[i]]).doe&&(rowclass="ZPLRow disabled",dateofexit="( "+ZPI18N.getString("zp.exitdate")+" - "+empInfo.doe+")");var tr0="<tr class="+rowclass+" id='"+empInfo.eno+"report'>";tr0+="<td class='fxdtd' style='max-width:300px;width:300px;'><img class='FL' src="+empInfo.empPhoto+">";var empId=empInfo.empId,empName=empInfo.name;if(tr0+="<div class='ZPusrName'><span class='ellipsis W150 CP' onclick=Attendance.Report.getUserReportFromSummary('"+empInfo.eno+"',this,"+empInfo.empStat+") data-toggle='tooltip' data-placement='top' data-container='body' title='"+empId+" "+empName+"'><b>"+empId+"</b>"+empName+"</span><em class='ZPsecName'>"+dateofexit+"</em></div></td>",tr0+="<td class='text-center'><div class='W80'>"+Attendance.disHours(empInfo.tsecs/60)+"</div></td>",tr0+="<td class='text-center TBrdr'><div class='W80'>"+Attendance.disHours(empInfo.pp_expectedPaidDaysInSecs/60)+"</div></td>",tr0+="<td class='P0I TBrdr'><table class='table i_table'><tbody><tr><td class='text-center' width='33.33%'><div class='W120'>"+Attendance.disHours(empInfo.totalWorkedDaysInSecs/60)+"</div></td>",tr0+="<td class='text-center' width='33.33%'><div class='W60'>"+Attendance.disHours(empInfo.pp_PaidOffDaysInsecs/60)+"</div></td><td class='text-center' width='33.33%'>",tr0+="<div class='W60'>"+Attendance.disHours(empInfo.totalPayDaysInSecs/60)+"</div></td></tr></tbody></table></td>",tr0+="<td class='text-center TBrdr'><div class='W120'>"+Attendance.disHours(empInfo.exp_workingDaysInSecs/60)+"</div></td>",tr0+="<td class='P0I TBrdr'><table class='table i_table'><tbody><tr class='wrktbl'><td class='text-center' width='33.33%'><div class='W60'>"+Attendance.disHours(empInfo.workingHours_tsecs/60)+"</div></td>",tr0+="<td class='text-center' width='33.33%'><div class='W60'>"+empInfo.onduty_hours+"</div></td><td class='text-center' width='33.33%'><div class='W60'>",tr0+=Attendance.disHours(empInfo.totalWorkedDaysInSecs/60)+"</div></td></tr></tbody></table></td>",data.isLateNightTrackingEnabledForOrg&&(tr0+="<td class='P0I TBrdr'><table class='table i_table'><tbody><tr class='wrktbl'><td class='text-center' width='33.33%'><div class='W60'>"+Attendance.Report.getSumRepLateNightHoursVal(empInfo,"regularWorkingHours")+"</div></td>",tr0+="<td class='text-center' width='33.33%'><div class='W60'>"+Attendance.Report.getSumRepLateNightHoursVal(empInfo,"lateNightWorkingHours")+"</div></td><td class='text-center' width='33.33%'><div class='W60'>",tr0+=Attendance.disHours(empInfo.workingHours_tsecs/60)+"</div></td></tr></tbody></table></td>"),tr0+="<td class='P0I TBrdr'><table class='table i_table'><tbody><tr class='potbl'><td class='text-center' width='25%'><div class='W60'>"+empInfo.leave_hours+"</div></td>",tr0+="<td class='text-center' width='25%'><div class='W60'>"+Attendance.disHours(empInfo.totalHolidayDaysInSecs/60)+"</div></td><td class='text-center' width='25%'><div class='W60'>",tr0+=Attendance.disHours(empInfo.totalWeekendDaysInSecs/60)+"</div></td><td class='text-center' width='25%'><div class='W60'>"+Attendance.disHours(empInfo.totalPaidOffDaysInSecs/60)+"</div></td></tr></tbody></table></td>",tr0+="<td class='P0I TBrdr'><table class='table i_table'><tbody><tr class='upotbl'><td class='text-center' width='33.33%'><div class='W60'>"+empInfo.lop_leave_hours+"</div></td>",tr0+="<td class='text-center' width='33.33%'><div class='W60'>"+Attendance.disHours(empInfo.totalAbsentDaysInSecs/60)+"</div></td><td class='text-center' width='33.33%'><div class='W60'>",tr0+=Attendance.disHours(empInfo.totalUnPaidOffDaysInSecs/60)+"</div></td></tr></tbody></table></td>",data.isStatConfigForOrg){nonStatCnt="-",statCnt="-",totalWkndOffCnt=regWkndCnt=empInfo.regWeekendHours;regWkndCnt=Attendance.disHours(regWkndCnt/60),empInfo.isStatWeekendConfig&&(totalWkndOffCnt+=(nonStatCnt=empInfo.totalNonStatWkndHrs)+(statCnt=empInfo.totalStatWkndHrs),statCnt=Attendance.disHours(statCnt/60),nonStatCnt=Attendance.disHours(nonStatCnt/60)),tr0+='<td class="P0I TBrdr"><table class="table i_table"><tbody><tr class="upotbl">',tr0+='<td class="text-center" width="25%"><div class="W60">'+statCnt+"</div></td>",tr0+='<td class="text-center" width="25%"><div class="W60">'+nonStatCnt+"</div></td>",tr0+='<td class="text-center" width="25%"><div class="W60">'+regWkndCnt+"</div></td>",tr0+='<td class="text-center" width="25%"><div class="W60">'+Attendance.disHours(totalWkndOffCnt/60)+"</div></td>",tr0+="</tr></tbody></table></td>"}if(0===Attendance.Report.showOTDT){tr0+="<td class='P0I TBrdr'><table class='table i_table'><tbody><tr>";var widthForOverTime="25%";if(data.isStatConfigForOrg&&(tr0+="<td class='text-center grn' width='"+(widthForOverTime="16.66%")+"'><div class='W60'>"+Attendance.Report.getSumRepStatWkndHoursVal(empInfo,"statWeekend_ot")+"</div></td>",tr0+="<td class='text-center grn' width='"+widthForOverTime+"'><div class='W60'>"+Attendance.Report.getSumRepStatWkndHoursVal(empInfo,"nonStatWeekend_ot")+"</div></td>"),tr0+="<td class='text-center grn' width='"+widthForOverTime+"'><div class='W60'>"+Attendance.disHours(empInfo.weekend_ot/60)+"</div></td>",tr0+="<td class='text-center grn' width='"+widthForOverTime+"'><div class='W60'>"+Attendance.disHours(empInfo.holiday_ot/60)+"</div></td><td class='text-center grn' width='"+widthForOverTime+"'><div class='W60'>",tr0+=Attendance.disHours(empInfo.nonWkndHoliday_ot/60)+"</div></td><td class='text-center grn' width='"+widthForOverTime+"'><div class='W60'>"+Attendance.disHours(empInfo.overTime_tsecs/60)+"</div></td></tr></tbody></table></td>",data.isLateNightTrackingEnabledForOrg){if(data.isStatConfigForOrg){var statWkndRegOTStr="-",statWkndLNOTStr="-",statWkndOTStr=Attendance.Report.getSumRepStatWkndHoursVal(empInfo,"statWeekend_ot"),nonStatWkndRegOTStr="-",nonStatWkndLNOTStr="-",nonStatWkndOTStr=Attendance.Report.getSumRepStatWkndHoursVal(empInfo,"nonStatWeekend_ot");empInfo.isStatWeekendConfig&&(statWkndRegOTStr=Attendance.Report.getSumRepLateNightHoursVal(empInfo,"statWeekend_reg_ot"),statWkndLNOTStr=Attendance.Report.getSumRepLateNightHoursVal(empInfo,"statWeekend_lateNight_ot"),nonStatWkndRegOTStr=Attendance.Report.getSumRepLateNightHoursVal(empInfo,"nonStatWeekend_reg_ot"),nonStatWkndLNOTStr=Attendance.Report.getSumRepLateNightHoursVal(empInfo,"nonStatWeekend_lateNight_ot")),tr0+="<td class='P0I TBrdr'><table class='table i_table'><tbody><tr class='wrktbl'><td class='text-center' width='33.33%'><div class='W60'>"+statWkndRegOTStr+"</div></td>",tr0+="<td class='text-center' width='33.33%'><div class='W60'>"+statWkndLNOTStr+"</div></td><td class='text-center' width='33.33%'><div class='W60'>",tr0+=statWkndOTStr+"</div></td></tr></tbody></table></td>",tr0+="<td class='P0I TBrdr'><table class='table i_table'><tbody><tr class='wrktbl'><td class='text-center' width='33.33%'><div class='W60'>"+nonStatWkndRegOTStr+"</div></td>",tr0+="<td class='text-center' width='33.33%'><div class='W60'>"+nonStatWkndLNOTStr+"</div></td><td class='text-center' width='33.33%'><div class='W60'>",tr0+=nonStatWkndOTStr+"</div></td></tr></tbody></table></td>"}tr0+="<td class='P0I TBrdr'><table class='table i_table'><tbody><tr class='wrktbl'><td class='text-center' width='33.33%'><div class='W60'>"+Attendance.Report.getSumRepLateNightHoursVal(empInfo,"weekend_reg_ot")+"</div></td>",tr0+="<td class='text-center' width='33.33%'><div class='W60'>"+Attendance.Report.getSumRepLateNightHoursVal(empInfo,"weekend_lateNight_ot")+"</div></td><td class='text-center' width='33.33%'><div class='W60'>",tr0+=Attendance.disHours(empInfo.weekend_ot/60)+"</div></td></tr></tbody></table></td>",tr0+="<td class='P0I TBrdr'><table class='table i_table'><tbody><tr class='wrktbl'><td class='text-center' width='33.33%'><div class='W60'>"+Attendance.Report.getSumRepLateNightHoursVal(empInfo,"holiday_reg_ot")+"</div></td>",tr0+="<td class='text-center' width='33.33%'><div class='W60'>"+Attendance.Report.getSumRepLateNightHoursVal(empInfo,"holiday_lateNight_ot")+"</div></td><td class='text-center' width='33.33%'><div class='W60'>",tr0+=Attendance.disHours(empInfo.holiday_ot/60)+"</div></td></tr></tbody></table></td>",tr0+="<td class='P0I TBrdr'><table class='table i_table'><tbody><tr class='wrktbl'><td class='text-center' width='33.33%'><div class='W60'>"+Attendance.Report.getSumRepLateNightHoursVal(empInfo,"nonWkndHoliday_reg_ot")+"</div></td>",tr0+="<td class='text-center' width='33.33%'><div class='W60'>"+Attendance.Report.getSumRepLateNightHoursVal(empInfo,"nonWkndHoliday_lateNight_ot")+"</div></td><td class='text-center' width='33.33%'><div class='W60'>",tr0+=Attendance.disHours(empInfo.nonWkndHoliday_ot/60)+"</div></td></tr></tbody></table></td>"}}data.isBreakConfigured&&(data.isPaidBrkDispNeed&&(tr0+="<td class='text-center TBrdr'><div class='W60'>"+empInfo.totalPaidBreakHours+"</div></td>"),data.isUnpaidBrkDispNeed&&(tr0+="<td class='text-center TBrdr'><div class='W60'>"+empInfo.totalUnPaidBreakHours+"</div></td>")),data.isPermissionConfigured&&(tr0+="<td class='text-center TBrdr'><div class='W60'>"+empInfo.totalPermissionHours+"</div></td>"),tr0+="</tr>",repTable.append(tr0),empInfo.tsecs>0&&Number(empInfo.tsecs),tworkingsec+=empInfo.workingHours_tsecs,totalWorkedHours+=empInfo.tsecs,tdevsecs+=empInfo.devTime_tsecs,toversecs+=empInfo.overTime_tsecs,ondutysecs+=empInfo.ondutysecs,totalworkedsecs+=empInfo.totalWorkedDaysInSecs,leavesecs+=empInfo.leavesecs,lopSecs+=empInfo.lop_leave_secs,totExpectedPaiddaysInSec+=empInfo.pp_expectedPaidDaysInSSecs,totWorkingdaysInSec+=empInfo.exp_workingDaysInSecs,totHolidaydaysInSec+=empInfo.totalHolidayDaysInSecs,totWeekenddaysInSec+=empInfo.totalWeekendDaysInSecs,totPaidOffdaysInSec+=empInfo.totalPaidOffDaysInSecs,totAbsentdaysInSec+=empInfo.totalAbsentDaysInSecs,totUnPaidOffdaysInSec+=empInfo.totalUnPaidOffDaysInSecs,totPaiddaysInSec+=empInfo.totalPayDaysInSecs,PP_PayDaysInSec+=empInfo.pp_PaidOffDaysInsecs,PP_ExpectedPayDaysInSec+=empInfo.pp_expectedPaidDaysInSecs,totalPaidBreakInSecs+=empInfo.totalPaidBreakInSecs,totalUnPaidBreakInSecs+=empInfo.totalUnPaidBreakInSecs,totalPermissionInSecs+=empInfo.totalPermissionInSecs,totalRegWknd+=empInfo.totalWeekendDaysInSecs,totRegWeekendHours+=empInfo.regWeekendHours,data.isStatConfigForOrg&&empInfo.isStatWeekendConfig&&(totStatWkndOT+=empInfo.statWeekend_ot,totNonStatWkndOT+=empInfo.nonStatWeekend_ot,totalStatWknd+=empInfo.totalStatWkndHrs,totalNonStatWknd+=empInfo.totalNonStatWkndHrs),data.isLateNightTrackingEnabledForOrg&&empInfo.isLateNightTrackingEnabled&&(totRegWorkHrs+=empInfo.regularWorkingHours,totLNWorkHrs+=empInfo.lateNightWorkingHours,totWkndRegOT+=empInfo.weekend_reg_ot,totWkndLNOT+=empInfo.weekend_lateNight_ot,totHolidayRegOT+=empInfo.holiday_reg_ot,totHolidayLNOT+=empInfo.holiday_lateNight_ot,totRegRegOT+=empInfo.nonWkndHoliday_reg_ot,totRegLNOT+=empInfo.nonWkndHoliday_lateNight_ot,data.isStatConfigForOrg&&empInfo.isStatWeekendConfig&&(totStatWkndRegOT+=empInfo.statWeekend_reg_ot,totStatWkndLNOT+=empInfo.statWeekend_lateNight_ot,totNonStatWkndRegOT+=empInfo.nonStatWeekend_reg_ot,totNonStatWkndLNOT+=empInfo.nonStatWeekend_lateNight_ot)),totWkndOT+=empInfo.weekend_ot,totHolidayOT+=empInfo.holiday_ot,totRegOT+=empInfo.nonWkndHoliday_ot}if(Attendance.Report.totalWorkedHours+=totalWorkedHours,Attendance.Report.totalCountwSecs+=tworkingsec,Attendance.Report.totalOverSecs+=toversecs,Attendance.Report.totalDevSecs+=tdevsecs,Attendance.Report.totalWorkedSecs+=totalworkedsecs,Attendance.Report.totalOndutySecs+=ondutysecs,Attendance.Report.totalLeaveSecs+=leavesecs,Attendance.Report.totalLOPSecs+=lopSecs,Attendance.Report.totalExpectedPaiddaysInSec+=totExpectedPaiddaysInSec,Attendance.Report.totalWorkingdaysInSec+=totWorkingdaysInSec,Attendance.Report.totalHolidaydaysInSec+=totHolidaydaysInSec,Attendance.Report.totalWeekenddaysInSec+=totWeekenddaysInSec,Attendance.Report.totalPaidOffdaysInSec+=totPaidOffdaysInSec,Attendance.Report.totalAbsentdaysInSec+=totAbsentdaysInSec,Attendance.Report.totalUnPaidOffdaysInSec+=totUnPaidOffdaysInSec,Attendance.Report.totalPaiddaysInSec+=totPaiddaysInSec,Attendance.Report.PP_ExpectedPayDaysInSec+=PP_ExpectedPayDaysInSec,Attendance.Report.PP_PayOffDaysInSec+=PP_PayDaysInSec,Attendance.Report.totalPaidBreakInSecs+=totalPaidBreakInSecs,Attendance.Report.totalUnPaidBreakInSecs+=totalUnPaidBreakInSecs,Attendance.Report.totalPermissionInSecs+=totalPermissionInSecs,Attendance.Report.totStatWkndOT+=totStatWkndOT,Attendance.Report.totNonStatWkndOT+=totNonStatWkndOT,Attendance.Report.totalStatWknd+=totalStatWknd,Attendance.Report.totalNonStatWknd+=totalNonStatWknd,Attendance.Report.totalRegWknd+=totalRegWknd,Attendance.Report.totRegWorkHrs+=totRegWorkHrs,Attendance.Report.totLNWorkHrs+=totLNWorkHrs,Attendance.Report.totWkndRegOT+=totWkndRegOT,Attendance.Report.totWkndLNOT+=totWkndLNOT,Attendance.Report.totHolidayRegOT+=totHolidayRegOT,Attendance.Report.totHolidayLNOT+=totHolidayLNOT,Attendance.Report.totRegRegOT+=totRegRegOT,Attendance.Report.totRegLNOT+=totRegLNOT,Attendance.Report.totStatWkndRegOT+=totStatWkndRegOT,Attendance.Report.totStatWkndLNOT+=totStatWkndLNOT,Attendance.Report.totNonStatWkndRegOT+=totNonStatWkndRegOT,Attendance.Report.totNonStatWkndLNOT+=totNonStatWkndLNOT,Attendance.Report.totWkndOT+=totWkndOT,Attendance.Report.totHolidayOT+=totHolidayOT,Attendance.Report.totRegOT+=totRegOT,Attendance.Report.totRegWeekendHours+=totRegWeekendHours,Attendance.Report.sReportLength<50&&!repTable.find("#ZPAtt_sumReporttotal").is(":visible")&&0!==repTable.children().length){var tr1="<tr id='ZPAtt_sumReporttotal' class='ZPLRow' style=''>";if(tr1+="<td class='text-center TBrdr fxdtd' style='max-width:300px;width:300px;'><div class='W80'>"+ZPI18N.getString("zp.total")+"</div></td>",tr1+="<td class='text-center TBrdr'><div class='W80'>"+Attendance.disHours(Attendance.Report.totalWorkedHours/60)+"</div></td>",tr1+="<td class='text-center TBrdr'><div class='W80'>"+Attendance.disHours(Attendance.Report.PP_ExpectedPayDaysInSec/60)+"</div></td>",tr1+="<td class='P0I TBrdr'><table class='table i_table'><tbody><tr><td class='text-center' width='33.33%'><div class='W120'>"+Attendance.disHours(Attendance.Report.totalWorkedSecs/60)+"</div></td>",tr1+="<td class='text-center' width='33.33%'><div class='W60'>"+Attendance.disHours(Attendance.Report.PP_PayOffDaysInSec/60)+"</div></td><td class='text-center' width='33.33%'>",tr1+="<div class='W60'>"+Attendance.disHours(Attendance.Report.totalPaiddaysInSec/60)+"</div></td></tr></tbody></table></td>",tr1+="<td class='text-center TBrdr'><div class='W120'>"+Attendance.disHours(Attendance.Report.totalWorkingdaysInSec/60)+"</div></td>",tr1+="<td class='P0I TBrdr'><table class='table i_table'><tbody><tr class='wrktbl'><td class='text-center' width='33.33%'><div class='W60'>"+Attendance.disHours(Attendance.Report.totalCountwSecs/60)+"</div></td>",tr1+="<td class='text-center' width='33.33%'><div class='W60'>"+Attendance.disHours(Attendance.Report.totalOndutySecs/60)+"</div></td><td class='text-center' width='33.33%'><div class='W60'>",tr1+=Attendance.disHours(Attendance.Report.totalWorkedSecs/60)+"</div></td></tr></tbody></table></td>",data.isLateNightTrackingEnabledForOrg&&(tr1+="<td class='P0I TBrdr'><table class='table i_table'><tbody><tr class='wrktbl'><td class='text-center' width='33.33%'><div class='W60'>"+Attendance.disHours(Attendance.Report.totRegWorkHrs/60)+"</div></td>",tr1+="<td class='text-center' width='33.33%'><div class='W60'>"+Attendance.disHours(Attendance.Report.totLNWorkHrs/60)+"</div></td><td class='text-center' width='33.33%'><div class='W60'>",tr1+=Attendance.disHours(Attendance.Report.totalCountwSecs/60)+"</div></td></tr></tbody></table></td>"),tr1+="<td class='P0I TBrdr'><table class='table i_table'><tbody><tr class='potbl'><td class='text-center' width='25%'><div class='W60'>"+Attendance.disHours(Attendance.Report.totalLeaveSecs/60)+"</div></td>",tr1+="<td class='text-center' width='25%'><div class='W60'>"+Attendance.disHours(Attendance.Report.totalHolidaydaysInSec/60)+"</div></td><td class='text-center' width='25%'><div class='W60'>",tr1+=Attendance.disHours(Attendance.Report.totalWeekenddaysInSec/60)+"</div></td><td class='text-center' width='25%'><div class='W60'>"+Attendance.disHours(Attendance.Report.totalPaidOffdaysInSec/60)+"</div></td></tr></tbody></table></td>",tr1+="<td class='P0I TBrdr'><table class='table i_table'><tbody><tr class='upotbl'><td class='text-center' width='33.33%'><div class='W60'>"+Attendance.disHours(Attendance.Report.totalLOPSecs/60)+"</div></td>",tr1+="<td class='text-center' width='33.33%'><div class='W60'>"+Attendance.disHours(Attendance.Report.totalAbsentdaysInSec/60)+"</div></td><td class='text-center' width='33.33%'><div class='W60'>",tr1+=Attendance.disHours(Attendance.Report.totalUnPaidOffdaysInSec/60)+"</div></td></tr></tbody></table></td>",data.isStatConfigForOrg&&(tr1+='<td class="P0I TBrdr"><table class="table i_table"><tbody><tr class="upotbl">',tr1+='<td class="text-center" width="25%"><div class="W60">'+Attendance.disHours(Attendance.Report.totalStatWknd/60)+"</div></td>",tr1+='<td class="text-center" width="25%"><div class="W60">'+Attendance.disHours(Attendance.Report.totalNonStatWknd/60)+"</div></td>",tr1+='<td class="text-center" width="25%"><div class="W60">'+Attendance.disHours(Attendance.Report.totRegWeekendHours/60)+"</div></td>",tr1+='<td class="text-center" width="25%"><div class="W60">'+Attendance.disHours((Attendance.Report.totalStatWknd+Attendance.Report.totalNonStatWknd+Attendance.Report.totRegWeekendHours)/60)+"</div></td>",tr1+="</tr></tbody></table></td>"),0===Attendance.Report.showOTDT){tr1+="<td class='P0I TBrdr'><table class='table i_table'><tbody><tr>";widthForOverTime="25%";data.isStatConfigForOrg&&(tr1+="<td class='text-center grn' width='"+(widthForOverTime="16.66%")+"'><div class='W60'>"+Attendance.disHours(Attendance.Report.totStatWkndOT/60)+"</div></td>",tr1+="<td class='text-center grn' width='"+widthForOverTime+"'><div class='W60'>"+Attendance.disHours(Attendance.Report.totNonStatWkndOT/60)+"</div></td>"),tr1+="<td class='text-center grn' width='"+widthForOverTime+"'><div class='W60'>"+Attendance.disHours(Attendance.Report.totWkndOT/60)+"</div></td>",tr1+="<td class='text-center grn' width='"+widthForOverTime+"'><div class='W60'>"+Attendance.disHours(Attendance.Report.totHolidayOT/60)+"</div></td><td class='text-center grn' width='"+widthForOverTime+"'><div class='W60'>",tr1+=Attendance.disHours(Attendance.Report.totRegOT/60)+"</div></td><td class='text-center grn' width='"+widthForOverTime+"'><div class='W60'>"+Attendance.disHours(Attendance.Report.totalOverSecs/60)+"</div></td></tr></tbody></table></td>",data.isLateNightTrackingEnabledForOrg&&(data.isStatConfigForOrg&&(tr1+="<td class='P0I TBrdr'><table class='table i_table'><tbody><tr class='wrktbl'><td class='text-center' width='33.33%'><div class='W60'>"+Attendance.disHours(Attendance.Report.totStatWkndRegOT/60)+"</div></td>",tr1+="<td class='text-center' width='33.33%'><div class='W60'>"+Attendance.disHours(Attendance.Report.totStatWkndLNOT/60)+"</div></td><td class='text-center' width='33.33%'><div class='W60'>",tr1+=Attendance.disHours(Attendance.Report.totStatWkndOT/60)+"</div></td></tr></tbody></table></td>",tr1+="<td class='P0I TBrdr'><table class='table i_table'><tbody><tr class='wrktbl'><td class='text-center' width='33.33%'><div class='W60'>"+Attendance.disHours(Attendance.Report.totNonStatWkndRegOT/60)+"</div></td>",tr1+="<td class='text-center' width='33.33%'><div class='W60'>"+Attendance.disHours(Attendance.Report.totNonStatWkndLNOT/60)+"</div></td><td class='text-center' width='33.33%'><div class='W60'>",tr1+=Attendance.disHours(Attendance.Report.totNonStatWkndOT/60)+"</div></td></tr></tbody></table></td>"),tr1+="<td class='P0I TBrdr'><table class='table i_table'><tbody><tr class='wrktbl'><td class='text-center' width='33.33%'><div class='W60'>"+Attendance.disHours(Attendance.Report.totWkndRegOT/60)+"</div></td>",tr1+="<td class='text-center' width='33.33%'><div class='W60'>"+Attendance.disHours(Attendance.Report.totWkndLNOT/60)+"</div></td><td class='text-center' width='33.33%'><div class='W60'>",tr1+=Attendance.disHours(Attendance.Report.totWkndOT/60)+"</div></td></tr></tbody></table></td>",tr1+="<td class='P0I TBrdr'><table class='table i_table'><tbody><tr class='wrktbl'><td class='text-center' width='33.33%'><div class='W60'>"+Attendance.disHours(Attendance.Report.totHolidayRegOT/60)+"</div></td>",tr1+="<td class='text-center' width='33.33%'><div class='W60'>"+Attendance.disHours(Attendance.Report.totHolidayLNOT/60)+"</div></td><td class='text-center' width='33.33%'><div class='W60'>",tr1+=Attendance.disHours(Attendance.Report.totHolidayOT/60)+"</div></td></tr></tbody></table></td>",tr1+="<td class='P0I TBrdr'><table class='table i_table'><tbody><tr class='wrktbl'><td class='text-center' width='33.33%'><div class='W60'>"+Attendance.disHours(Attendance.Report.totRegRegOT/60)+"</div></td>",tr1+="<td class='text-center' width='33.33%'><div class='W60'>"+Attendance.disHours(Attendance.Report.totRegLNOT/60)+"</div></td><td class='text-center' width='33.33%'><div class='W60'>",tr1+=Attendance.disHours(Attendance.Report.totRegOT/60)+"</div></td></tr></tbody></table></td>")}data.isBreakConfigured&&(data.isPaidBrkDispNeed&&(tr1+="<td class='text-center TBrdr'><div class='W60'>"+Attendance.disHours(Attendance.Report.totalPaidBreakInSecs/60)+"</div></td>"),data.isUnpaidBrkDispNeed&&(tr1+="<td class='text-center TBrdr'><div class='W60'>"+Attendance.disHours(Attendance.Report.totalUnPaidBreakInSecs/60)+"</div></td>")),data.isPermissionConfigured&&(tr1+="<td class='text-center TBrdr'><div class='W60'>"+Attendance.disHours(Attendance.Report.totalPermissionInSecs/60)+"</div></td>"),tr1+="</tr>",repTable.append(tr1)}}else for(var e in enoList){var empInfo,rowclass="ZPLRow",dateofexit="";(empInfo=data[enoList[e]]).doe&&(rowclass="ZPLRow disabled",dateofexit="( "+ZPI18N.getString("zp.exitdate")+" - "+empInfo.doe+")");var tr="<tr class='"+rowclass+"' id='"+empInfo.eno+"report'>";tr+="<td class='fxdtd' style='max-width:300px;width:300px;'><img class='FL' src="+empInfo.empPhoto+">";var empId=empInfo.empId,empName=empInfo.name;if(tr+="<div class='ZPusrName'><span class='ellipsis W150 CP' onclick=Attendance.Report.getUserReportFromSummary('"+empInfo.eno+"',this,"+empInfo.empStat+") data-toggle='tooltip' data-placement='top' data-container='body' title='"+empId+" "+empName+"'><b>"+empId+"</b>"+empName+"</span><em class='ZPsecName'>"+dateofexit+"</em></div></td>",tr+="<td class='text-center'><div class='W80'>"+empInfo.pp_expectedPaidDays+"</div></td>",tr+="<td class='P0I TBrdr'><table class='table i_table'><tbody><tr><td class='text-center' width='33.33%'><div class='W120'>"+empInfo.totalWorkedDays_count+"</div></td>",tr+="<td class='text-center' width='33.33%'><div class='W60'>"+empInfo.pp_PaidOffDays+"</div></td><td class='text-center' width='33.33%'>",tr+="<div class='W60'>"+empInfo.totalPaidDays_count+"</div></td></tr></tbody></table></td>",tr+="<td class='text-center TBrdr'><div class='W120'>"+empInfo.exp_workingDays_count+"</div></td>",tr+="<td class='P0I TBrdr'><table class='table i_table'><tbody><tr class='wrktbl'><td class='text-center' width='33.33%'><div class='W60'>"+empInfo.present_count+"</div></td>",tr+="<td class='text-center' width='33.33%'><div class='W60'>"+empInfo.onduty_count+"</div></td><td class='text-center' width='33.33%'><div class='W60'>",tr+=empInfo.totalWorkedDays_count+"</div></td></tr></tbody></table></td>",tr+="<td class='P0I TBrdr'><table class='table i_table'><tbody><tr class='potbl'><td class='text-center' width='25%'><div class='W60'>"+empInfo.leave_count+"</div></td>",tr+="<td class='text-center' width='25%'><div class='W60'>"+empInfo.holiday_count+"</div></td><td class='text-center' width='25%'><div class='W60'>",tr+=empInfo.totalWeekendCount+"</div></td><td class='text-center' width='25%'><div class='W60'>"+empInfo.totalPaidOffDays_count+"</div></td></tr></tbody></table></td>",tr+="<td class='P0I TBrdr'><table class='table i_table'><tbody><tr class='upotbl'><td class='text-center' width='33.33%'><div class='W60'>"+empInfo.lop_leave_count+"</div></td>",tr+="<td class='text-center' width='33.33%'><div class='W60'>"+empInfo.absent_count+"</div></td><td class='text-center' width='33.33%'><div class='W60'>",tr+=empInfo.totalUnPaidOffDays_count+"</div></td></tr></tbody></table></td>",data.isStatConfigForOrg){var regWkndCnt,nonStatCnt="-",statCnt="-",totalWkndOffCnt=regWkndCnt=empInfo.weekend_count;empInfo.isStatWeekendConfig&&(totalWkndOffCnt+=(nonStatCnt=empInfo.nonStatWkndCnt)+(statCnt=empInfo.statWkndCnt)),tr+='<td class="P0I TBrdr"><table class="table i_table"><tbody><tr class="upotbl">',tr+='<td class="text-center" width="25%"><div class="W60">'+statCnt+"</div></td>",tr+='<td class="text-center" width="25%"><div class="W60">'+nonStatCnt+"</div></td>",tr+='<td class="text-center" width="25%"><div class="W60">'+regWkndCnt+"</div></td>",tr+='<td class="text-center" width="25%"><div class="W60">'+totalWkndOffCnt+"</div></td>",tr+="</tr></tbody></table></td>"}0===Attendance.Report.showOTDT&&(tr+="<td class='text-center TBrdr grn'><div class='W80'>"+Attendance.disHours(empInfo.overTime_tsecs/60)+"</div></td>"),tr+="</tr>",repTable.append(tr)}if(0===repTable.children().length){layout.find("#ZPAtt_simpSumRep").hide(),layout.find("#ZPAtt_detSumRep").hide(),layout.find("#ZPAtt_sReport_emptyRecInfo").fadeIn(200);var empImg=layout.find("#ZPAtt_sReport_emptyRecInfo i").eq(0);0===empImg.children().length&&Attendance.noDataImg(8,"CR-nodata-rpt",empImg)}else layout.find("#ZPAtt_sReport_emptyRecInfo").hide(),layout.find("#ZPAtt_showSimpleRep").prop("checked")?layout.find("#ZPAtt_simpSumRep").show():layout.find("#ZPAtt_detSumRep").show();Attendance.Report.sReportLength<50?Attendance.Report.isEnd=!0:Attendance.Report.isEnd=!1,Attendance.Report.sumRepParam.dispMonth?Layout.Page.container.find("#ZPAtt_sumReportDates").html(Attendance.Report.sumRepParam.dispMonth):Layout.Page.container.find("#ZPAtt_sumReportDates").html(Attendance.datesInHeader(Attendance.Report.sumRepParam.sdate,Attendance.Report.sumRepParam.edate));var param=Attendance.Report.sumRepParam;param.sdate&&$(Attendance.Report.LayoutId+" #ZPAtt_sumRep_fromDate").val(param.sdate),param.edate&&$(Attendance.Report.LayoutId+" #ZPAtt_sumRep_toDate").val(param.edate),param.shiftId?$(Attendance.Report.LayoutId+" #ZPAtt_sumRep_shift").select2("val",param.shiftId):$(Attendance.Report.LayoutId+" #ZPAtt_sumRep_shift").select2("val",0),Attendance.toggleLoadingDiv(!0),repTable.closest("div.Scrcont").find("#zp_page_loading").remove(),Attendance.handleTableHeader(),isHoursSumReport?Layout.Page.container.find("#ZPAtt_attSumHourReportTableHeader .ZPLHRow").children(":visible").last().css("width",""):Layout.Page.container.find("#ZPAtt_attSumDayReportTableHeader .ZPLHRow").children(":visible").last().css("width","")},getSumRepLateNightHoursVal:function(empInfo,str){var val="-";return empInfo.isLateNightTrackingEnabled&&(val=Attendance.disHours(empInfo[str]/60)),val},getSumRepStatWkndHoursVal:function(empInfo,str){var val="-";return empInfo.isStatWeekendConfig&&(val=Attendance.disHours(empInfo[str]/60)),val},getUserReportFromSummary:function(erecno,obj,isLoginDisabled){if(Attendance.Report.userReportEno=erecno,$(obj).tooltip("hide"),-1!==Attendance.Report.LayoutId.indexOf("attendance-report-monthlyreport"))Attendance.Report.userReportFromDate=$(Attendance.Report.LayoutId+" #ZPAtt_monthlyRep_fromDate").val().trim(),Attendance.Report.userReportToDate=$(Attendance.Report.LayoutId+" #ZPAtt_monthlyRep_toDate").val().trim();else if(-1!==Attendance.Report.LayoutId.indexOf("attendance-report-dailyreport")){var dateValue=$("#ZPAtt_dailyRep_date").val().trim();Attendance.Report.userReportFromDate=dateValue,Attendance.Report.userReportToDate=dateValue}else-1!==Attendance.Report.LayoutId.indexOf("attendance-report-earlylatereport")?(Attendance.Report.userReportFromDate=Layout.Page.container.find("#ZPAtt_lateComRep_fromDate").val().trim(),Attendance.Report.userReportToDate=Layout.Page.container.find("#ZPAtt_lateComRep_toDate").val().trim()):Attendance.Entry.loadReport?(Attendance.Report.userReportFromDate=Attendance.Entry.sdate,Attendance.Report.userReportToDate=Attendance.Entry.edate):(Attendance.Report.userReportFromDate=$(Attendance.Report.LayoutId+" #ZPAtt_sumRep_fromDate").val().trim(),Attendance.Report.userReportToDate=$(Attendance.Report.LayoutId+" #ZPAtt_sumRep_toDate").val().trim());Attendance.Entry.loadReport=!1,Attendance.Report.userType=isLoginDisabled||null,window.location.replace("#attendance/report/userreport")},userRepPhoto:null,getUserReport:function(navigate){var reportFilter=Layout.Page.container.find("#ZPAtt_userReportfilter"),sDate=reportFilter.find("#ZPAtt_userRep_fromDate").val().trim(),eDate=reportFilter.find("#ZPAtt_userRep_toDate").val().trim(),eno=Layout.Page.container.find("#ZPAtt_userRep_empName").val(),main=Layout.Page.container.find("#ZPAtt_attUserReport"),param={mode:"userReport",conreqcsr:csrfToken};Attendance.Report.getFilterValues(reportFilter,param,"userRep"),Attendance.Report.isUserRepFromNav=void 0,navigate&&(param.navigate=navigate,Attendance.Report.isUserRepFromNav=!0),Attendance.Report.userReportEno&&(eno=Attendance.Report.userReportEno,sDate=Attendance.Report.userReportFromDate,eDate=Attendance.Report.userReportToDate,reportFilter.find("#ZPAtt_userRep_fromDate").val(sDate),reportFilter.find("#ZPAtt_userRep_toDate").val(eDate),reportFilter.find("#ZPAtt_userRep_period").select2("val",6),reportFilter.find("#ZPAtt_userRep_fromDate").attr("disabled",!1),reportFilter.find("#ZPAtt_userRep_toDate").attr("disabled",!1),Attendance.Report.userReportEno=null,Attendance.Report.userReportFromDate=null,Attendance.Report.userReportToDate=null);var totHrsFilter=reportFilter.find("#ZPAtt_userRep_totalHrs").val();if("0"!==totHrsFilter){var totHrsTime=Attendance.Common.convertTimerInputToMinsOrSecs(reportFilter.find("#ZPAtt_userRep_totHrsTime").val(),!0,!0);if(void 0===totHrsTime||"1"===totHrsFilter&&0===totHrsTime)return reportFilter.find("#ZPAtt_userRep_totalHrs").next().next().removeClass("DNI"),!1;if(void 0!==totHrsTime){var totHrsObj={};totHrsObj.timeInSecs=totHrsTime,totHrsObj.type=totHrsFilter,reportFilter.find("#ZPAtt_userRep_totalHrs").next().next().addClass("DNI"),param.totHrsTime=JSON.stringify(totHrsObj)}}0===main.find("#zp_page_loading").length&&(main.children().hide(),main.append(ZPeople.LOADING_HTML)),""!==sDate&&""!==eDate?(param.sdate=sDate,param.edate=eDate,"0"!==eno&&eno!==Attendance.Report.currUserEno&&""!==eno&&(param.erecno=eno),Attendance.Report.userType&&(param.userType=Attendance.Report.userType),Attendance.Report.getSummaryReportUser(param.erecno,param.sdate,param.edate,param.userType,navigate),Layout.Page.container.find("#ZPAtt_userRep_empName").change(function(){Attendance.Report.userType&&(Attendance.Report.userType=null)}),$.post("/AttendanceReportAction.zp",param,function(rdata){if(rdata.fail)Attendance.permDenied();else if(main.children().show(),Attendance.toggleLoadingDiv(!0),rdata&&!rdata.error&&rdata.dayList){Attendance.Report.currUserEno=rdata.userDetails.eNo,Attendance.Report.userReport=rdata,Attendance.Report.showOverDevTime=rdata.showOverDevTime;var layout=Layout.Page.container;Attendance.Report.isUserRepFromNav&&(reportFilter.find("#ZPAtt_userRep_fromDate").val(rdata.sDate).attr("disabled",!1),reportFilter.find("#ZPAtt_userRep_toDate").val(rdata.eDate).attr("disabled",!1),reportFilter.find("#ZPAtt_userRep_period").select2("val",6)),rdata.dispMonth?layout.find("#ZPAtt_userRep_dateNav").html(rdata.dispMonth):layout.find("#ZPAtt_userRep_dateNav").html(Attendance.datesInHeader(rdata.sDate,rdata.eDate)),Attendance.Report.showUserReport(),Attendance.Report.setAbsentInUserRepSummary()}else rdata&&rdata.error&&("exceeded dates"===rdata.error&&ZPeople.Message.showFailureMsg(ZPI18N.getString("zp.datewithinoneyear")),"error in end date"===rdata.error&&ZPeople.Message.showFailureMsg(ZPI18N.getString("zp.greaterfromdate")))})):ZPeople.Message.showFailureMsg(ZPI18N.getString("zp.enterfromtodate"))},showUserReport:function(){var layout=Layout.Page.container,data=Attendance.Report.userReport.dayList;if(data){var reportPage=Layout.Page.container.find("#ZPAtt_attUserReport");reportPage.find(".table-responsive").show(),$(Attendance.Report.LayoutId+" .well.ZPDat").show(),0==Object.keys(data).length&&(reportPage.find(".table-responsive").hide(),$(Attendance.Report.LayoutId+" .well.ZPDat").hide());var tbody=layout.find("#ZPAtt_attUserReportTableBody");tbody.empty();for(var hideAllowanceColumn=!0,totalAllowance=0,i=0;data[i];i++){data[i].tsecs||(data[i].tsecs=0);var workTime="-",status=data[i].status,colorClass="";"Absent"===status||"0.5 day Present, 0.5 day Absent"===status||-1!==status.indexOf("Absent -")&&-1!==status.indexOf("Present -")&&2===status.split(",").length?colorClass="RTC1 absent-bg":"Present"===status||"0.5 day Present"===status||-1!==status.indexOf("Present -")&&1===status.split(",").length?colorClass="RTC1 present-bg":-1!==status.indexOf("Weekend")?colorClass="RTC1 wkend-bg":-1!==status.indexOf("Paid Leave")?(colorClass="RTC1 leave-bg",-1!==status.indexOf("Present")&&(-1!==status.indexOf("0.5 day Paid Leave")&&-1===status.indexOf("0.5 day On Duty")&&-1===status.indexOf("0.5 day Unpaid Leave")||data[i].leaveHours)&&(colorClass="RTC1 present-bg")):-1!==status.indexOf("On Duty")?(colorClass="RTC1 onduty-bg",-1!==status.indexOf("Present")&&(-1!==status.indexOf("0.5 day On Duty")&&-1===status.indexOf("0.5 day Unpaid Leave")||data[i].leaveHours)&&(colorClass="RTC1 present-bg")):-1!==status.indexOf("Unpaid Leave")?(colorClass="RTC1 lop-bg",-1===status.indexOf("Present")||-1===status.indexOf("0.5 day Unpaid Leave")&&!data[i].leaveHours||(colorClass="RTC1 present-bg")):(status.includes("Holiday")||Att_Common_Operations.isRestrictedHoliday(status))&&(colorClass="RTC1 holiday-bg",!status.includes("Present")||!Att_Common_Operations.isUnAvailedRestrictedHoliday(status)&&(!status.includes("0.5 day Holiday)")||status.includes("0.5 day Paid Leave")||status.includes("0.5 day On Duty")||status.includes("0.5 day Unpaid Leave")||data[i].fulldayPresent)||(colorClass="RTC1 present-bg"));var transStat=Attendance.consLeaveStat(status,!0,!1);void 0!==data[i].overTime_tsecs&&(workTime="<span class='grn'>"+Attendance.disHours(data[i].overTime_tsecs/60)+"</span>"),void 0!==data[i].devTime_tsecs&&(workTime="<span class='red'>"+Attendance.disHours(data[i].devTime_tsecs/60)+"</span>");var trow="<tr class='ZPLRow'>";trow+="<td>"+days[data[i].day-1]+", "+Attendance.disDate(data[i].ldate)+"</td>",data[i].filo?(trow+="<td>"+Attendance.disDate(data[i].filo.ftime)+"</td>",trow+="<td>"+Attendance.disDate(data[i].filo.ttime)+"</td>"):(trow+="<td> </td>",trow+="<td> </td>"),trow+="<td>"+Attendance.disHours(data[i].tsecs/60)+"</td>",$(Attendance.Report.LayoutId+" #ZPAtt_showHidePaidBreakUserReport").hide(),$(Attendance.Report.LayoutId+" #ZPAtt_showHideUnpaidBreakUserReport").hide(),Attendance.Report.userReport.isBreakConfigured&&(Attendance.Report.userReport.isPaidBrkDispNeed&&($(Attendance.Report.LayoutId+" #ZPAtt_showHidePaidBreakUserReport").show(),trow+="<td>"+data[i].totalPaidBreakHours+"</td>"),Attendance.Report.userReport.isUnpaidBrkDispNeed&&($(Attendance.Report.LayoutId+" #ZPAtt_showHideUnpaidBreakUserReport").show(),trow+="<td>"+data[i].totalUnPaidBreakHours+"</td>")),$(Attendance.Report.LayoutId+" #ZPAtt_showHidePermission").hide(),Attendance.Report.userReport.isPermissionConfigured&&($(Attendance.Report.LayoutId+" #ZPAtt_showHidePermission").show(),trow+="<td>"+data[i].totalPermissionHours+"</td>"),trow+="<td>"+Attendance.disHours(data[i].wsecs/60)+"</td>",0===Attendance.Report.showOverDevTime&&(trow+="<td>"+workTime+"</td>");var allowance="-";void 0!==data[i].shiftAllowance&&(hideAllowanceColumn=!1,allowance=data[i].shiftAllowance,totalAllowance+=data[i].shiftAllowance),status=Attendance.escapeHtml(status),trow+="<td><span class='ellipsis W200' data-toggle='tooltip' data-placement='left' title='"+transStat+"'><div class='"+colorClass+"'></div>"+transStat+"</span></td>";var shiftInfo=Shift.getShiftName(data[i].shift.shiftId,!0);trow+="<td><span class='ellipsis W150' data-toggle='tooltip' data-placement='left' title='"+shiftInfo.shiftName+" ("+shiftInfo.timeInterval+")'>"+shiftInfo.shiftName+"</span></td><td id='allowanceColumn'><span>"+allowance+"</span></td><td></td></tr>",tbody.append(trow)}hideAllowanceColumn?($("#ZPAtt_attUserReport #allowanceColumn").hide(),$("#ZPAtt_attUserReport #allowanceFooter").hide()):($("#ZPAtt_attUserReport #allowanceColumn").show(),$("#ZPAtt_attUserReport #allowanceFooter").show(),$("#ZPAtt_attUserReport #totalAllowanceAmt").text(Math.round(100*totalAllowance)/100));var colSpan=Attendance.Report.userReport.isBreakConfigured?8:6;0===Attendance.Report.showOverDevTime?($(Attendance.Report.LayoutId+" #ZPAtt_overDevInUReport").show(),colSpan+=1,$("#ZPAtt_attUserReport #allowanceFooter th").eq(0).attr("colspan",colSpan)):($(Attendance.Report.LayoutId+" #ZPAtt_overDevInUReport").hide(),$("#ZPAtt_attUserReport #allowanceFooter th").eq(0).attr("colspan",colSpan)),$(Attendance.Report.LayoutId+" #ZPAtt_attUserReport table").fadeIn(200),$(Attendance.Report.LayoutId+" #ZPAtt_attUserReport").children().hasClass("tabcont")||(Attendance.Report.userReport.isBreakConfigured&&($(Attendance.Report.LayoutId+" #ZPAtt_showHidePaidBreakUserReport").show(),$(Attendance.Report.LayoutId+" #ZPAtt_showHideUnpaidBreakUserReport").show()),ZPView.handleTablePosition(),Attendance.Report.userReport.isBreakConfigured&&($(Attendance.Report.LayoutId+" #ZPAtt_showHidePaidBreakUserReport").hide(),$(Attendance.Report.LayoutId+" #ZPAtt_showHideUnpaidBreakUserReport").hide(),Attendance.Report.userReport.isPaidBrkDispNeed&&$(Attendance.Report.LayoutId+" #ZPAtt_showHidePaidBreakUserReport").show(),Attendance.Report.userReport.isUnpaidBrkDispNeed&&$(Attendance.Report.LayoutId+" #ZPAtt_showHideUnpaidBreakUserReport").show())),Attendance.Report.showHideEarlyLateBirdReport(tbody,"attUserReport",reportPage)}},getSummaryReportUser:function(erec,sdate,edate,userType,navigate){var param={mode:"getSummaryRepForUser",conreqcsr:csrfToken};if(erec&&(param.erecno=erec),navigate&&sdate&&edate){var date1=moment(sdate,dateFmt.toUpperCase())._d,date2=moment(edate,dateFmt.toUpperCase())._d;if(1==date1.getDate()&&date1.getMonth()==date2.getMonth()&&date2.getDate()==date1.getDaysOfMonth()){date2.getDaysOfMonth();navigate<0?(date1.setMonth(date1.getMonth()-1),date2=new Date(date2.getFullYear(),date2.getMonth(),0)):(date1.setMonth(date1.getMonth()+1),date2=new Date(date1.getFullYear(),date1.getMonth()+1,0))}else{var diff=(date2-date1)/864e5+1;navigate<0?(date1.setDate(date1.getDate()-diff),date2.setDate(date2.getDate()-diff)):(date1.setDate(date1.getDate()+diff),date2.setDate(date2.getDate()+diff))}sdate=moment(date1).format(dateFmt.toUpperCase()),edate=moment(date2).format(dateFmt.toUpperCase())}param.sdate=sdate,param.edate=edate,userType&&(param.userType=userType),$.post("/AttendanceReportAction.zp",param,function(rdata){if(rdata.fail)Attendance.permDenied();else if(rdata.summaryReport){var eno=erecno;if(param.erecno&&(eno=param.erecno),param.erecno){var rep=rdata.summaryReport[param.erecno];$(Attendance.Report.LayoutId+" #s2id_ZPAtt_userRep_empName span").html(rep.empId+" "+rep.name),$(Attendance.Report.LayoutId+" #ZPAtt_userRep_empName").val(rep.eno),$(Attendance.Report.LayoutId+" #ZPAtt_userReportPhoto")[0].src=rep.empPhoto}else $(Attendance.Report.LayoutId+" #ZPAtt_userReportPhoto")[0].src=rdata.summaryReport[erecno].empPhoto,$(Attendance.Report.LayoutId+" #ZPAtt_userRep_empName").select2("val","0");Attendance.Report.sumForUserRep=rdata.summaryReport[eno],Attendance.Report.setSummaryInUserRep(rdata.showOverDevTime,rdata.summaryReport)}})},setSummaryInUserRep:function(showOTDT,json){var layout=Layout.Page.container,data=Attendance.Report.sumForUserRep;$(Attendance.Report.LayoutId+" #ZPAtt_uReport_presentCount").text(data.present_count+" "+ZPI18N.getString("zp.days")),$(Attendance.Report.LayoutId+" #ZPAtt_uReport_onDutyCount").text(data.onduty_count+" "+ZPI18N.getString("zp.days")),$(Attendance.Report.LayoutId+" #ZPAtt_uReport_leaveCount").text(data.leave_count+" "+ZPI18N.getString("zp.days")),$(Attendance.Report.LayoutId+" #ZPAtt_uReport_holidayCount").text(data.holiday_count+" "+ZPI18N.getString("zp.days")),$(Attendance.Report.LayoutId+" #ZPAtt_uReport_weekendCount").text(data.weekend_count+" "+ZPI18N.getString("zp.days")),$(Attendance.Report.LayoutId+" #ZPAtt_uReport_lopCount").text(data.lop_leave_count+" "+ZPI18N.getString("zp.days")),$(Attendance.Report.LayoutId+" #ZPAtt_uReport_payDaysCount").text(data.totalPaidDays_count+" "+ZPI18N.getString("zp.days")),data.isStatWeekendConfig?(Attendance.Entry.addStatWkndDays(layout.find("#ZPAtt_uReport_statWeekendCount"),data.statWkndCnt,data.custStatWknd_Name),Attendance.Entry.addStatWkndDays(layout.find("#ZPAtt_uReport_nonStatWeekendCount"),data.nonStatWkndCnt,data.custNonStatWknd_Name)):(layout.find("#ZPAtt_uReport_nonStatWeekendCount").closest(".Dtyps").addClass("DNI"),layout.find("#ZPAtt_uReport_statWeekendCount").closest(".Dtyps").addClass("DNI")),$(Attendance.Report.LayoutId+" #ZPAtt_URep_preDays").text(data.present_count+" "+ZPI18N.getString("zp.days")),$(Attendance.Report.LayoutId+" #ZPAtt_URep_ODDays").text(data.onduty_count+" "+ZPI18N.getString("zp.days")),$(Attendance.Report.LayoutId+" #ZPAtt_URep_leaveDays").text(data.leave_count+" "+ZPI18N.getString("zp.days")),$(Attendance.Report.LayoutId+" #ZPAtt_URep_holDays").text(data.holiday_count+" "+ZPI18N.getString("zp.days")),$(Attendance.Report.LayoutId+" #ZPAtt_URep_wkndDays").text(data.weekend_count+" "+ZPI18N.getString("zp.days")),$(Attendance.Report.LayoutId+" #ZPAtt_URep_LOPDays").text(data.lop_leave_count+" "+ZPI18N.getString("zp.days")),$(Attendance.Report.LayoutId+" #ZPAtt_URep_payDays").text(data.totalPaidDays_count+" "+ZPI18N.getString("zp.days")),data.isStatWeekendConfig?(Attendance.Entry.addStatWkndDays(layout.find("#ZPAtt_URep_statWkndDays"),data.statWkndCnt,data.custStatWknd_Name),Attendance.Entry.addStatWkndDays(layout.find("#ZPAtt_URep_nonStatWkndDays"),data.nonStatWkndCnt,data.custNonStatWknd_Name)):(layout.find("#ZPAtt_URep_nonStatWkndDays").closest(".Dtyps").addClass("DNI"),layout.find("#ZPAtt_URep_statWkndDays").closest(".Dtyps").addClass("DNI")),data.tsecs<0?($(Attendance.Report.LayoutId+" #ZPAtt_uReport_totalhours").text(ZPI18N.getString("zp.na")),$(Attendance.Report.LayoutId+" #ZPAtt_URep_ttlHrs").text(ZPI18N.getString("zp.na"))):($(Attendance.Report.LayoutId+" #ZPAtt_uReport_totalhours").text(Attendance.disHours(data.tsecs/60)+" "+ZPI18N.getString("zp.hrs")),$(Attendance.Report.LayoutId+" #ZPAtt_URep_ttlHrs").text(Attendance.disHours(data.tsecs/60)+" "+ZPI18N.getString("zp.hrs"))),$(Attendance.Report.LayoutId+" #ZPAtt_uReport_totalWorkingHours").text(Attendance.disHours(data.workingHours_tsecs/60)+" "+ZPI18N.getString("zp.hrs")),$(Attendance.Report.LayoutId+" #ZPAtt_uReport_totalOnDutyHours").text(Attendance.disHours(data.ondutysecs/60)+" "+ZPI18N.getString("zp.hrs")),$(Attendance.Report.LayoutId+" #ZPAtt_uReport_totalLeaveHours").text(Attendance.disHours(data.leavesecs/60)+" "+ZPI18N.getString("zp.hrs")),$(Attendance.Report.LayoutId+" #ZPAtt_uReport_totalHolidayHours").text(Attendance.disHours(data.totalHolidayDaysInSecs/60)+" "+ZPI18N.getString("zp.hrs")),$(Attendance.Report.LayoutId+" #ZPAtt_uReport_totalWeekendHours").text(Attendance.disHours(data.regWeekendHours/60)+" "+ZPI18N.getString("zp.hrs")),data.isStatWeekendConfig?(Attendance.Entry.addStatWkndHrs(layout.find("#ZPAtt_uReport_statTotalWeekendHours"),data.totalStatWkndHrs,data.custStatWknd_Name),Attendance.Entry.addStatWkndHrs(layout.find("#ZPAtt_uReport_nonStatTotalWeekendHours"),data.totalNonStatWkndHrs,data.custNonStatWknd_Name)):(layout.find("#ZPAtt_uReport_nonStatTotalWeekendHours").closest(".Dtyps").addClass("DNI"),layout.find("#ZPAtt_uReport_statTotalWeekendHours").closest(".Dtyps").addClass("DNI")),$(Attendance.Report.LayoutId+" #ZPAtt_URep_preHrs").text(Attendance.disHours(data.workingHours_tsecs/60)+" "+ZPI18N.getString("zp.hrs")),$(Attendance.Report.LayoutId+" #ZPAtt_URep_ODHrs").text(Attendance.disHours(data.ondutysecs/60)+" "+ZPI18N.getString("zp.hrs")),$(Attendance.Report.LayoutId+" #ZPAtt_URep_leaveHrs").text(Attendance.disHours(data.leavesecs/60)+" "+ZPI18N.getString("zp.hrs")),$(Attendance.Report.LayoutId+" #ZPAtt_URep_HolHrs").text(Attendance.disHours(data.totalHolidayDaysInSecs/60)+" "+ZPI18N.getString("zp.hrs")),$(Attendance.Report.LayoutId+" #ZPAtt_URep_wkndHrs").text(Attendance.disHours(data.regWeekendHours/60)+" "+ZPI18N.getString("zp.hrs")),$(Attendance.Report.LayoutId+" #ZPAtt_URep_LOPHrs").text(Attendance.disHours(data.lop_leave_secs/60)+" "+ZPI18N.getString("zp.hrs")),data.isStatWeekendConfig?(Attendance.Entry.addStatWkndHrs(layout.find("#ZPAtt_URep_statWkndHrs"),data.totalStatWkndHrs,data.custStatWknd_Name),Attendance.Entry.addStatWkndHrs(layout.find("#ZPAtt_URep_nonStatWkndHrs"),data.totalNonStatWkndHrs,data.custNonStatWknd_Name)):(layout.find("#ZPAtt_URep_nonStatWkndHrs").closest(".Dtyps").addClass("DNI"),layout.find("#ZPAtt_URep_statWkndHrs").closest(".Dtyps").addClass("DNI")),0===showOTDT?($(Attendance.Report.LayoutId+" #ZPAtt_URep_OTHrs").text(Attendance.disHours(data.overTime_tsecs/60)+" "+ZPI18N.getString("zp.hrs")).parent().show(),$(Attendance.Report.LayoutId+" #ZPAtt_URep_DTHrs").parent().show()):($(Attendance.Report.LayoutId+" #ZPAtt_URep_OTHrs").parent().hide(),$(Attendance.Report.LayoutId+" #ZPAtt_URep_DTHrs").parent().hide()),$(Attendance.Report.LayoutId+" #ZPAtt_showHidePaidBreakSumPopup").hide(),$(Attendance.Report.LayoutId+" #ZPAtt_showHideUnpaidBreakSumPopup").hide(),json.isBreakConfigured&&(json.isPaidBrkDispNeed&&($(Attendance.Report.LayoutId+" #ZPAtt_showHidePaidBreakSumPopup").show(),$(Attendance.Report.LayoutId+" #ZPAtt_URep_BreakHrs").text(data.totalPaidBreakHours+" "+ZPI18N.getString("zp.hrs"))),json.isUnpaidBrkDispNeed&&($(Attendance.Report.LayoutId+" #ZPAtt_showHideUnpaidBreakSumPopup").show(),$(Attendance.Report.LayoutId+" #ZPAtt_URep_BreakExtnHrs").text(data.totalUnPaidBreakHours+" "+ZPI18N.getString("zp.hrs")))),$(Attendance.Report.LayoutId+" #ZPAtt_showHidePermissionPopup").hide(),json.isPermissionConfigured&&($(Attendance.Report.LayoutId+" #ZPAtt_showHidePermissionPopup").show(),$(Attendance.Report.LayoutId+" #ZPAtt_URep_Permission").text(data.totalPermissionHours+" "+ZPI18N.getString("zp.hrs"))),$(Attendance.Report.LayoutId+" #ZPAtt_uReport_totalPaysHours").text(Attendance.disHours(data.totalPayDaysInSecs/60)+" "+ZPI18N.getString("zp.hrs")),$(Attendance.Report.LayoutId+" #ZPAtt_URep_payHrs").text(Attendance.disHours(data.totalPayDaysInSecs/60)+" "+ZPI18N.getString("zp.hrs")),Attendance.Report.setAbsentInUserRepSummary()},setAbsentInUserRepSummary:function(){if(Attendance.Report.sumForUserRep&&Attendance.Report.userReport){var sumAbsent=Attendance.Report.sumForUserRep.absent_count,sumAbsentHrs=Attendance.Report.sumForUserRep.totalAbsentDaysInSecs;Attendance.Report.userReport.dayList;$(Attendance.Report.LayoutId+" #ZPAtt_URep_DTHrs").text(Attendance.disHours((sumAbsentHrs-0)/60)+" "+ZPI18N.getString("zp.hrs")),$(Attendance.Report.LayoutId+" #ZPAtt_URep_absDays").text(Math.round(1e3*(sumAbsent-0))/1e3+" "+ZPI18N.getString("zp.days")),$(Attendance.Report.LayoutId+" #ZPAtt_uReport_absentCount").text(Math.round(1e3*(sumAbsent-0))/1e3+" "+ZPI18N.getString("zp.days"))}},lateComerStartIndex:0,moreLateComerReport:function(){Attendance.Report.lateComerStartIndex+=20,Attendance.Report.getLateComerReport(!1,!0)},getLateComerReport:function(navigate,isScroll){isScroll||Layout.Page.container.find("#ZPAtt_lateComerReport").scrollTop(0);var param={mode:"attEarlyLateReport",conreqcsr:csrfToken},reportFilter=Layout.Page.container.find("#ZPAtt_lateComReportfilter"),lateComRep_date=reportFilter.find("#ZPAtt_lateComRep_fromDate").val().trim(),lateComRep_tdate=reportFilter.find("#ZPAtt_lateComRep_toDate").val().trim();if(Attendance.Report.lateComerViewDate=void 0,""!==lateComRep_date&&(param.sdate=lateComRep_date),""!==lateComRep_tdate&&(param.edate=lateComRep_tdate),param.sdate&&param.edate){var dateDiff=moment(param.edate,dateFmt.toUpperCase()).diff(moment(param.sdate,dateFmt.toUpperCase()),"days");if(dateDiff>31)ZPeople.Message.showFailureMsg(ZPI18N.getString("zp.datewithinonemonth"));else if(dateDiff<0)ZPeople.Message.showFailureMsg(ZPI18N.getString("zp.greaterfromdate"));else{navigate&&(param.navigate=navigate),Attendance.Report.getFilterValues(reportFilter,param,"lateComRep"),Layout.Page.container.find("#ZPAtt_earlyLateReport_myReqEmpSort").hasClass("sort")||(param.isEmpSortAsc=Layout.Page.container.find("#ZPAtt_earlyLateReport_myReqEmpSort").hasClass("sort-u"));var inTime,inTimeFilter=reportFilter.find("#ZPAtt_lateComRep_checkIn").val();if("5"===inTimeFilter)param.notRecorded="in";else{if("error"===(obj=Attendance.Report.setCustomFilterValue(!0,inTimeFilter,reportFilter.find("#ZPAtt_lateComRep_checkInTime").val())))return reportFilter.find("#ZPAtt_lateComRep_checkIn").next().next().removeClass("DNI"),!1;obj&&(param.customFromTime=JSON.stringify(obj),inTime=obj.timeInSecs,reportFilter.find("#ZPAtt_lateComRep_checkIn").next().next().addClass("DNI"))}var outTimeFilter=reportFilter.find("#ZPAtt_lateComRep_checkOut").val();if("5"===outTimeFilter)param.notRecorded="out";else{var obj;if("error"===(obj=Attendance.Report.setCustomFilterValue(!1,outTimeFilter,reportFilter.find("#ZPAtt_lateComRep_checkOutTime").val())))return reportFilter.find("#ZPAtt_lateComRep_checkOut").next().next().removeClass("DNI"),!1;if(obj){if(!("3"!==inTimeFilter&&"4"!==inTimeFilter||"3"!==outTimeFilter&&"4"!==outTimeFilter)){var outTime=obj.timeInSecs;inTime>outTime&&(obj.timeInSecs=outTime+86400)}param.customToTime=JSON.stringify(obj),reportFilter.find("#ZPAtt_lateComRep_checkOut").next().next().addClass("DNI")}}var totHrsFilter=reportFilter.find("#ZPAtt_lateComRep_totalHrs").val();if("0"!==totHrsFilter){var totHrsTime=Attendance.Common.convertTimerInputToMinsOrSecs(reportFilter.find("#ZPAtt_lateComRep_totHrsTime").val(),!0,!0);if(void 0===totHrsTime||"1"===totHrsFilter&&0===totHrsTime)return reportFilter.find("#ZPAtt_lateComRep_totalHrs").next().next().removeClass("DNI"),!1;if(void 0!==totHrsTime){var totHrsObj={};totHrsObj.timeInSecs=totHrsTime,totHrsObj.type=totHrsFilter,reportFilter.find("#ZPAtt_lateComRep_totalHrs").next().next().addClass("DNI"),param.totHrsTime=JSON.stringify(totHrsObj)}}isScroll?(param.startIndex=Attendance.Report.lateComerStartIndex+1,Attendance.appendScroller(Layout.Page.container.find("#ZPAtt_lateComerReportTable"),isScroll)):(Layout.Page.container.find("#ZPAtt_lateComerReport_emptyRecInfo")[0]&&Layout.Page.container.find("#ZPAtt_lateComerReport_emptyRecInfo").hide(),Layout.Page.container.find("#ZPAtt_lateComerReportTable").parent().hide(),0===Layout.Page.container.find("#ZPAtt_lateComerReport").find("#zp_page_loading").length&&Layout.Page.container.find("#ZPAtt_lateComerReport").append(ZPeople.LOADING_HTML)),$.post("/AttendanceReportAction.zp",param,function(rdata){if(rdata.fail)Attendance.permDenied();else{var res=rdata.report;if(res){Attendance.Report.currentLateComerReport=res.empDetails,20===res.empDetails.length&&ZPeople.FireScroll.reset(),isScroll||(Attendance.Report.lateComerStartIndex=0);var fDate=res.userDate,tDate=res.viewDate;Attendance.Report.isLateComerReportDiffDate=fDate!==tDate,Layout.Page.container.find("#ZPAtt_lateComRep_fromDate").val(fDate),Layout.Page.container.find("#ZPAtt_lateComRep_toDate").val(tDate),navigate&&(Layout.Page.container.find("#ZPAtt_lateComRep_period").select2("val",6),Layout.Page.container.find("#ZPAtt_lateComRep_fromDate").attr("disabled",!1),Layout.Page.container.find("#ZPAtt_lateComRep_toDate").attr("disabled",!1)),rdata.dispMonth?Layout.Page.container.find("#ZPAtt_lateComRep_dateNav").html(rdata.dispMonth):Layout.Page.container.find("#ZPAtt_lateComRep_dateNav").html(Attendance.datesInHeader(fDate,tDate)),Attendance.Report.showLateComerMultiReport(isScroll,res.shiftDetails)}}})}}else ZPeople.Message.showFailureMsg(ZPI18N.getString("zp.selectfromandto"))},showLateComerMultiReport:function(isScroll,shiftDetails){var lateBirdList=Attendance.Report.currentLateComerReport,reportPage=Layout.Page.container.find("#ZPAtt_lateComerReport"),repTable=reportPage.find("#ZPAtt_lateComerReportTableBody");isScroll||repTable.empty(),reportPage.find("#ZPAtt_attLateComerRepDateHeader").show();var isDiffDate=Attendance.Report.isLateComerReportDiffDate;isDiffDate||reportPage.find("#ZPAtt_attLateComerRepDateHeader").hide();var toDate=Layout.Page.container.find("#ZPAtt_lateComRep_toDate").val().trim();for(var index in Calendar.parseDate(toDate,uidateFormat),lateBirdList){var empDates=lateBirdList[index],i=0;for(var dayIt in empDates){var empInfo=empDates[dayIt],fromDate=empInfo.dateStr,tr="<tr class='ZPLRow'>",tdHeight=56*empDates.length;i<1?(tr+="<td class='fxdtd' style='max-width:300px;width:300px;height:"+tdHeight+"px'><img class='FL' src="+empInfo.empPhoto+">",tr+="<div class='ZPusrName'><span class='ellipsis W200 CP' onclick=Attendance.Report.getUserReportFromSummary('"+empInfo.erecno+"',this) data-toggle='tooltip' data-placement='top' data-container='body' title='"+empInfo.empId+" "+empInfo.empName+"'><b>"+empInfo.empId+"</b>"+empInfo.empName+"</span></div></td>",i++):tr+="<td class='fxdtd' style='max-width:300px;width:300px;visibility:hidden;'></td>",isDiffDate&&(tr+='<td class="text-center B1 " style="padding-left:8px;width:100px;max-width:initial;min-width:120px">'+fromDate+"</td>");var earlyLateComeTime=empInfo.earlyLateComeTime,earlyLateLeaveTime=empInfo.earlyLateLeaveTime,netValue=empInfo.netVal;tr+="<td class='text-center B1 TBrdr'><div class='W80 Mauto'>"+(empInfo.firstIn?empInfo.firstIn:"-")+"</div></td>",tr+="<td class='text-center B1 TBrdr'><div class='W80 Mauto'>"+(empInfo.lastOut?empInfo.lastOut:"-")+"</div></td>",tr+="<td class='text-center B1 TBrdr'><div class='W80 Mauto'>"+(empInfo.thrs?empInfo.thrs:"-")+"</div></td>",tr+="<td class='P0I TBrdr'><table class='table i_table'><tbody><tr>";var earlyEntryVal="-",lateEntryVal="-",earlyEntryClass="",lateEntryClass="";void 0!==earlyLateComeTime&&(earlyLateComeTime<0?(lateEntryVal="-"+Attendance.disHours(-1*earlyLateComeTime/60),lateEntryClass="red"):(earlyEntryVal="+"+Attendance.disHours(earlyLateComeTime/60),earlyEntryClass="grn")),tr+="<td class='text-center' width='50%'><div class='W80 Mauto "+earlyEntryClass+"'>"+earlyEntryVal+"</div></td>",tr+="<td class='text-center' width='50%'><div class='W80 Mauto "+lateEntryClass+"'>"+lateEntryVal+"</div></td>",tr+="</tr></tbody></table></td>",tr+="<td class='P0I TBrdr'><table class='table i_table'><tbody><tr>";var earlyExitVal="-",lateExitVal="-",earlyExitClass="",lateExitClass="";void 0!==earlyLateLeaveTime&&(earlyLateLeaveTime<0?(earlyExitVal="-"+Attendance.disHours(-1*earlyLateLeaveTime/60),earlyExitClass="red"):(lateExitVal="+"+Attendance.disHours(earlyLateLeaveTime/60),lateExitClass="grn")),tr+="<td class='text-center' width='50%'><div class='W80 Mauto "+earlyExitClass+"'>"+earlyExitVal+"</div></td>",tr+="<td class='text-center' width='50%'><div class='W80 Mauto "+lateExitClass+"'>"+lateExitVal+"</div></td>",tr+="</tr></tbody></table></td>";var netValueClass="";if(void 0!==netValue?netValue<0?(netValue="-"+Attendance.disHours(-1*netValue/60),netValueClass="red"):(netValue="+"+Attendance.disHours(netValue/60),netValueClass="grn"):netValue="-",tr+="<td class='text-center B1 TBrdr "+netValueClass+"'> <div class='W80 Mauto'>"+netValue+"</div></td>",void 0!==empInfo.shiftId){var shiftDet=shiftDetails[empInfo.shiftId],shiftName=$("<div/>").text(shiftDet.shiftName).html();tr+="<td class='text-center B1 TBrdr' ><div class='ellipsis W150 Mauto' data-toggle='tooltip' data-placement='top' title='"+Attendance.disTime(shiftDet.fromShiftTime,!0)+" - "+Attendance.disTime(shiftDet.toShiftTime,!0)+"'>"+shiftName+"</div></td></tr>"}else tr+="<td class='text-center B1 TBrdr Mauto'>-</td></tr>";repTable.append(tr)}}Attendance.Report.showHideEarlyLateBirdReport(repTable,"lateComerReport",reportPage)},showHideEarlyLateBirdReport:function(repTable,id,reportPage){if(0===repTable.children().length){reportPage.find("#ZPAtt_"+id+"_emptyRecInfo").fadeIn(200),reportPage.find("#ZPAtt_"+id+"Table").parent().hide();var empImg=reportPage.find("#ZPAtt_"+id+"_emptyRecInfo i").eq(0);0===empImg.children().length&&Attendance.noDataImg(8,"CR-nodata-rpt",empImg)}else reportPage.find("#ZPAtt_"+id+"_emptyRecInfo").hide(),reportPage.find("#ZPAtt_"+id+"Table").parent().fadeIn(200);Attendance.toggleLoadingDiv(!0),Attendance.handleTableHeader(),reportPage.find("#ZPAtt_"+id+"Table tbody").closest("div.Scrcont").find("#zp_page_loading").remove()},balOtReportStartIndex:0,navigate:0,moreBalOtReport:function(){Attendance.Report.balOtReportIsEnd||(Attendance.Report.balOtReportStartIndex+=50,Attendance.Report.getBalOtReport(!1,!0))},getFromToForPayPeriod:function(nav,freq,clsDay_1,clsDay_2,tDay,lUpdateTime,pcls_1,pcls_2){var closureDay,closureDay_2,toDay,fromDay,payrollClosure,type="month",currDate=moment([])._d;"2"==freq?type="week":"3"==freq?type="biWeek":"4"==freq&&(type="semMonth");var clDay=parseInt(clsDay_1);if(tDay=parseInt(tDay),"week"===type)(closureDay=moment([]).day(clDay))._d.getTime()>=currDate.getTime()&&(closureDay=moment(closureDay).add(-1,type)),(toDay=moment(closureDay).day(tDay))._d.getTime()>closureDay._d.getTime()&&(toDay=moment(toDay).add(-1,type)),toDay=toDay.add(nav,type),closureDay=closureDay.add(nav,type),fromDay=moment(toDay).add(-6,"day");else if("month"===type)(closureDay=32===clDay?moment([]).endOf("month"):moment([]).date(clDay))._d.getTime()>=currDate.getTime()&&(closureDay=32===clDay?moment([]).add(-1,type).endOf("month"):moment(closureDay).add(-1,type)),(toDay=32===tDay?moment(closureDay).endOf("month"):moment(closureDay).date(tDay))._d.getTime()>closureDay._d.getTime()&&(toDay=32===tDay?moment(toDay).add(-1,type).endOf("month"):moment(toDay).add(-1,type)),toDay=32===tDay?toDay.add(nav,type).endOf("month"):toDay.add(nav,type),closureDay=32===clDay?closureDay.add(nav,type).endOf("month"):closureDay.add(nav,type),fromDay=32===tDay?moment(toDay).add(-1,type).endOf("month").add(1,"day"):moment(toDay).add(-1,type).add(1,"day");else if("biWeek"===type)closureDay=lUpdateTime&&"-1"!==lUpdateTime?moment(lUpdateTime):(closureDay=moment([]).day(clDay))._d.getTime()<currDate.getTime()?moment(closureDay).add(-1,"week"):moment(closureDay).add(-2,"week"),(toDay=moment(closureDay).day(tDay))._d.getTime()>closureDay._d.getTime()&&(toDay=moment(toDay).add(-1,"week")),toDay=toDay.add(14*nav,"day"),closureDay=closureDay.add(14*nav,"day"),fromDay=moment(toDay).add(-13,"day"),pcls_1&&((payrollClosure=closureDay.clone()).set({day:parseInt(pcls_1)}),payrollClosure>closureDay&&payrollClosure.add({date:7}));else if("semMonth"===type){var clDay_2=parseInt(clsDay_2);closureDay=32===clDay?moment([]).endOf("month"):moment([]).date(clDay),closureDay_2=32===clDay_2?moment([]).endOf("month"):moment([]).date(clDay_2);var clDay_Long=closureDay._d.getTime(),clDay2_Long=closureDay_2._d.getTime(),firstClDay=!0;(clDay_Long<currDate.getTime()&&clDay2_Long<currDate.getTime()&&clDay_2<clDay||currDate.getTime()>clDay_Long&&clDay2_Long>=currDate.getTime()||clDay_Long>currDate.getTime()&&clDay2_Long>=currDate.getTime()&&clDay_2<clDay)&&(firstClDay=!1);var stEndObj=ReportSettings.getStartDayEndDay(tDay),startDay_1=stEndObj.startDay_1,startDay_2=stEndObj.startDay_2,endDay_2=stEndObj.endDay_2;nav+=-1;var cloDay,startDay,endDay,navi=Math.round(nav/2+.1);(clDay_Long<currDate.getTime()&&clDay2_Long<currDate.getTime()||clDay_Long>=currDate.getTime()&&clDay2_Long>=currDate.getTime())&&(navi=Math.round(nav/2-.1)),!firstClDay&&firstClDay||nav%2!=-1||(firstClDay=!firstClDay),firstClDay?(cloDay=clDay_Long<currDate.getTime()&&clDay2_Long<currDate.getTime()?32===clDay?closureDay.add(1,"month").endOf("month"):closureDay.add(1,"month"):closureDay,cloDay=32===clDay?cloDay.add(navi,"month").endOf("month"):cloDay.add(navi,"month"),(endDay=32===tDay?moment(cloDay).endOf("month"):moment(cloDay).date(tDay))._d.getTime()>cloDay._d.getTime()&&(endDay=32===tDay?moment(endDay).add(-1,"month").endOf("month"):moment(endDay).add(-1,"month")),startDay=32===startDay_1?moment(endDay).endOf("month"):moment(endDay).date(startDay_1),endDay._d.getTime()<startDay._d.getTime()&&(startDay=32===startDay_1?moment(startDay).add(-1,"month").endOf("month"):moment(startDay).add(-1,"month")),pcls_1&&(payrollClosure=cloDay.clone(),(payrollClosure=32==pcls_1?moment(payrollClosure).endOf("month"):payrollClosure.set({date:parseInt(pcls_1)}))<cloDay&&(payrollClosure=32==pcls_2?moment(payrollClosure).add(1,"month").endOf("month"):moment(payrollClosure).add(1,"month")))):(cloDay=clDay_Long<currDate.getTime()&&clDay2_Long<currDate.getTime()?32===clDay_2?closureDay_2.add(1,"month").endOf("month"):closureDay_2.add(1,"month"):closureDay_2,cloDay=32===clDay_2?cloDay.add(navi,"month").endOf("month"):cloDay.add(navi,"month"),(endDay=32===endDay_2?moment(cloDay).endOf("month"):moment(cloDay).date(endDay_2))._d.getTime()>cloDay._d.getTime()&&(endDay=32===endDay_2?moment(endDay).add(-1,"month").endOf("month"):moment(endDay).add(-1,"month")),startDay=32===startDay_2?moment(endDay).endOf("month"):moment(endDay).date(startDay_2),endDay._d.getTime()<startDay._d.getTime()&&(startDay=32===startDay_2?moment(startDay).add(-1,"month").endOf("month"):moment(startDay).add(-1,"month")),pcls_2&&(payrollClosure=cloDay.clone(),(payrollClosure=32==pcls_2?moment(payrollClosure).endOf("month"):payrollClosure.set({date:parseInt(pcls_2)}))<cloDay&&(payrollClosure=32==pcls_2?moment(payrollClosure).add(1,"month").endOf("month"):moment(payrollClosure).add(1,"month")))),fromDay=startDay,toDay=endDay,closureDay=cloDay}var obj={};return obj.fromDay=fromDay,obj.toDay=toDay,obj.closureDay=closureDay,obj.payrollclosureDay=payrollClosure||closureDay,obj},getBalOtReport:function(navigate,scroll){var changedRec=Attendance.Report.otRepParam,param={mode:"attOtReport",conreqcsr:csrfToken},otRepFilter=Layout.Page.container.find("#ZPAtt_otReportfilter");Attendance.Report.getFilterValues(otRepFilter,param,"otRep"),!$(Attendance.Report.LayoutId+" #ZPAtt_repBalRepNavigation").data("defaultGenDay")&&$(Attendance.Report.LayoutId+" #ZPAtt_otRep_rpSett option").eq(1)[0]&&$(Attendance.Report.LayoutId+" #ZPAtt_otRep_rpSett").select2("val",$(Attendance.Report.LayoutId+" #ZPAtt_otRep_rpSett option").eq(1).val());var rpSettObj=$(Attendance.Report.LayoutId+" #ZPAtt_otRep_rpSett")[0];rpSettObj&&""!==rpSettObj.value&&"0"!==rpSettObj.value&&(param.rpSettId=rpSettObj.value),$(Attendance.Report.LayoutId+" #ZPAtt_otReport_myReqEmpSort").hasClass("sort")||(param.isEmpSortAsc=$(Attendance.Report.LayoutId+" #ZPAtt_otReport_myReqEmpSort").hasClass("sort-u")),$(Attendance.Report.LayoutId+" #ZPAtt_repBalRepNavigation").closest("ul").hide();var showAdjPaidHrs=!0;$(Attendance.Report.LayoutId+" #ZPAtt_balRep_paidHrs").show(),$(Attendance.Report.LayoutId+" #ZPAtt_balRep_adjHrs").show(),Layout.Page.container.find("#ZP-Regenerate").addClass("DN").attr("disabled","disabled");var navlis=$(Attendance.Report.LayoutId+" #ZPAtt_repBalRepNavigation").closest("ul").find("li i");if(param.rpSettId){$(Attendance.Report.LayoutId+" #ZPAtt_repBalRepNavigation").closest("ul").show(),navlis.show(),navigate&&(Attendance.Report.navigate+=navigate);var selectedOpt=$("option:selected","#ZPAtt_otRep_rpSett",Attendance.Report.LayoutId),freq=selectedOpt.attr("rsFrequency"),lUpdate=selectedOpt.attr("lastupdatedtime"),clDay_1=selectedOpt.attr("closeDay"),clDay_2=selectedOpt.attr("closeDay_2"),tDay=selectedOpt.attr("today");isadmin&&"true"===selectedOpt.attr("allowRegen")&&Layout.Page.container.find("#ZP-Regenerate").removeClass("DN").removeAttr("disabled");var fromToObj=Attendance.Report.getFromToForPayPeriod(Attendance.Report.navigate,freq,clDay_1,clDay_2,tDay,lUpdate);if(param.navigate=Attendance.Report.navigate,1===param.navigate?(navlis.eq(1).removeAttr("onclick"),navlis.eq(1).css("cursor","not-allowed"),$(Attendance.Report.LayoutId+" #ZPAtt_balRep_paidHrs").hide(),$(Attendance.Report.LayoutId+" #ZPAtt_balRep_adjHrs").hide(),showAdjPaidHrs=!1):(navlis.eq(1).attr("onclick","Attendance.Report.getBalOtReport(1)"),navlis.eq(1).css("cursor","")),param.fromDay=moment(fromToObj.fromDay).format("YYYY-MM-DD"),param.toDay=moment(fromToObj.toDay).format("YYYY-MM-DD"),!scroll&&!navigate&&0===param.navigate&&!$(Attendance.Report.LayoutId+" #ZPAtt_repBalRepNavigation").data("defaultGenDay")){var closureDay=fromToObj.closureDay;if($(Attendance.Report.LayoutId+" #ZPAtt_repBalRepNavigation").data("defaultGenDay",closureDay),moment(closureDay._d.getTime()).add(4,"day")._d.getTime()<=moment([])._d.getTime())return void navlis.eq(1).click()}}scroll?changedRec.locationId!==param.locationId||changedRec.departmentId!==param.departmentId||changedRec.erecno!==param.erecno?scroll=!1:param.startIndex=Attendance.Report.balOtReportStartIndex+1:($(Attendance.Report.LayoutId+" #ZPAtt_balOtRep_emptyRecInfo").hide(),$(Attendance.Report.LayoutId+" #ZPAtt_balOtReport").parent().hide(),$(Attendance.Report.LayoutId+" #ZPAtt_balOtReport tbody").empty(),Attendance.toggleLoadingDiv(!1,$(Attendance.Report.LayoutId+" #ZPAtt_balOtReport").parent().parent(),$(Attendance.Report.LayoutId+" #ZPAtt_balOtRep_emptyRecInfo"))),$.post("/AttendanceReportAction.zp",param,function(rdata){if(Attendance.Report.otRepParam=param,rdata.fail)Attendance.permDenied();else if(param.fromDay?$(Attendance.Report.LayoutId+" #ZPAtt_repBalRepNavigation").data("fromDay",param.fromDay).data("toDay",param.toDay):$(Attendance.Report.LayoutId+" #ZPAtt_repBalRepNavigation").data("fromDay",null).data("toDay",null),rdata.report){if(!scroll&&!navigate&&!rdata.report[0]&&0===param.navigate)return void navlis.eq(1).click();if(rdata.fromDay&&rdata.toDay&&($(Attendance.Report.LayoutId+" #ZPAtt_repBalRepNavigation").text(rdata.fromDay+" - "+rdata.toDay),$(Attendance.Report.LayoutId+" #ZPAtt_repBalRepNavigation").next().html($("option:selected","#ZPAtt_otRep_rpSett",Attendance.Report.LayoutId).html())),Attendance.Report.balanceOtReport=rdata,Attendance.consResetEmpSearch("ZPAtt_otRep_empName",Layout.Page.container,!0,!0),scroll)for(var i in rdata.report)Attendance.Report.balOtReportList.push(rdata.report[i]);else Attendance.Report.balOtReportStartIndex=0,$(Attendance.Report.LayoutId+" #ZPAtt_balOtReport").parent().scrollTop(0),Attendance.Report.balOtReportList=rdata.report;rdata.report.length<50?Attendance.Report.balOtReportIsEnd=!0:(ZPeople.FireScroll.reset(),Attendance.Report.balOtReportIsEnd=!1);var showEdit=!1;$(Attendance.Report.LayoutId+" #ZPAtt_otRep_rpSett").parent().show(),!rdata.report[0]||param.rpSettId&&0!==param.navigate||(showEdit=!0);var editAllowed=rdata.isEditAllowed,subEditAllowed=rdata.isEditAllowedForSub,loginUser_adminUserList=rdata.loginUser_adminUserList;Attendance.Report.showBalOtReport(rdata.report,scroll,showEdit,editAllowed,subEditAllowed,showAdjPaidHrs,loginUser_adminUserList)}})},onFilRpSettChange:function(){Attendance.Report.navigate=0,Attendance.Report.getBalOtReport()},showBalOtReport:function(data,isScroll,showEdit,editAllowed,subEditAllowed,showAdjPaidHrs,loginUser_adminUserList){var repTable=$(Attendance.Report.LayoutId+" #ZPAtt_balOtRepBody");for(var empList in isScroll||repTable.empty(),data){var empInfo=data[empList],tr="<tr class='ZPLRow' id='"+empInfo.erecno+"'>";tr+="<td><img class='FL' src="+empInfo.empPhoto+">",tr+="<div class='ZPusrName'><span class='ellipsis W300'><b>"+$("<div/>").text(empInfo.empId).html()+"</b>"+$("<div/>").text(empInfo.empName).html()+"</span></div></td>",tr+="<td>"+Attendance.disHours(empInfo.prevOtHours/60,!1,!0)+"</td>",tr+="<td>"+Attendance.disHours(empInfo.expectedHours/60,!1,!0)+"</td>",tr+="<td>"+Attendance.disHours(empInfo.workedHours/60,!1,!0)+"</td>",showAdjPaidHrs&&((isadmin||isManageAttendanceData&&(!loginUser_adminUserList||loginUser_adminUserList&&loginUser_adminUserList.includes(empInfo.erecno))||editAllowed&&empInfo.erecno===erecno||subEditAllowed&&empInfo.erecno!==erecno)&&showEdit?(empInfo.reportSettingsId?tr+="<td><input type='text' placeholder='00:00' class='form-control table-inpt input-bb1' value='"+Attendance.disHours(empInfo.paidHours/60,!1,!0)+"' onkeyup=Attendance.Report.onChangePaidAdjHrs(this)></td>":tr+="<td>"+Attendance.disHours(empInfo.paidHours/60,!1,!0)+"</td>",tr+="<td><input type='text' placeholder='00:00' class='form-control table-inpt input-bb1' value='"+Attendance.disHours(empInfo.adjustHours/60,!1,!0)+"' onkeyup=Attendance.Report.onChangePaidAdjHrs(this)></td>"):(tr+="<td>"+Attendance.disHours(empInfo.paidHours/60,!1,!0)+"</td>",tr+="<td>"+Attendance.disHours(empInfo.adjustHours/60,!1,!0)+"</td>")),tr+="<td>"+Attendance.disHours(empInfo.balanceHours/60,!1,!0)+"</td>",repTable.append(tr)}if(0===repTable.children().length){$(Attendance.Report.LayoutId+" #ZPAtt_balOtReport").parent().hide(),$(Attendance.Report.LayoutId+" #ZPAtt_balOtRep_emptyRecInfo").fadeIn(200),$(Attendance.Report.LayoutId+" #ZPAtt_balOtReport").parent().parent().removeClass("section");var empImg=Layout.Page.container.find("#ZPAtt_balOtRep_emptyRecInfo i").eq(0);0===empImg.children().length&&Attendance.noDataImg(8,"CR-at-otview",empImg),$(Attendance.Report.LayoutId+" #ZPAtt_balOtReport").parent().parent().removeClass("section"),$("#page-wrapper").removeClass("Abar1"),$(Attendance.Report.LayoutId+" .well.ZPAct").hide()}else 0===$("#ZPAtt_balOtRepBody").find("input").length?($("#page-wrapper").removeClass("Abar1"),$(Attendance.Report.LayoutId+" .well.ZPAct").hide()):($("#page-wrapper").addClass("Abar1"),$(Attendance.Report.LayoutId+" .well.ZPAct").show()),$(Attendance.Report.LayoutId+" #ZPAtt_balOtRep_emptyRecInfo").hide(),$(Attendance.Report.LayoutId+" #ZPAtt_balOtReport").parent().fadeIn(200),$(Attendance.Report.LayoutId+" #ZPAtt_balOtReport").parent().parent().attr("class","Scrcont section"),ZPView.handleTablePosition();Attendance.toggleLoadingDiv(!0)},onChangePaidAdjHrs:function(obj){var input,etime,currRow=$(obj).closest("tr"),currRowData=Attendance.Report.balOtReportList[currRow.index()],paidHrs=currRowData.paidHours,adjHrs=currRowData.adjustHours,inputInd=0;if(2===$(currRow).find("input").length){inputInd=1,(input=$(currRow).find("input").eq(0)).removeAttr("paidHrs");var inputVal=input.val().trim(),isNeg=!1;if("-"===inputVal[0]&&(inputVal=inputVal.substr(1,inputVal.length-1).trim(),isNeg=!0),etime=60*(60*parseInt(inputVal.split(":")[0],10)+parseInt(inputVal.split(":")[1],10)),input.removeClass("error-clr"),"number"!=typeof etime||isNaN(etime))return void input.addClass("error-clr");isNeg&&(etime*=-1)}currRow.children().last().removeAttr("balHrs");var input1=$(currRow).find("input").eq(inputInd);input1.removeAttr("adjHrs");var inputVal1=input1.val().trim(),isNeg1=!1;"-"===inputVal1[0]&&(inputVal1=inputVal1.substr(1,inputVal1.length-1).trim(),isNeg1=!0);var etime1=60*(60*parseInt(inputVal1.split(":")[0],10)+parseInt(inputVal1.split(":")[1],10));if(input1.removeClass("error-clr"),"number"!=typeof etime1||isNaN(etime1))input1.addClass("error-clr");else if(isNeg1&&(etime1*=-1),1===inputInd&&paidHrs!==etime||adjHrs!==etime1){currRow.attr("class","ZPLRow ZPActve");var balOtHrs=currRowData.balanceHours;adjHrs!==etime1&&(input1.attr("adjHrs",etime1),balOtHrs+=etime1-adjHrs),paidHrs!==etime&&1===inputInd&&(input.attr("paidHrs",etime),balOtHrs-=etime-paidHrs),currRow.children().last().text(Attendance.disHours(balOtHrs/60,!1,!0)).attr("balHrs",balOtHrs)}else currRow.attr("class","ZPLRow"),currRow.children().last().text(Attendance.disHours(currRowData.balanceHours/60,!1,!0))},cancelPaidAdjHrsSave:function(){for(var rows=$(Attendance.Report.LayoutId+" #ZPAtt_balOtRepBody").find(".ZPActve"),len=0;len<rows.length;len++){var row=rows.eq(len),currRowData=Attendance.Report.balOtReportList[row.index()],inpInd=0;if(2===row.find("input").length){inpInd=1;var paidHrs=row.find("input").eq(0);paidHrs.removeAttr("paidHrs"),paidHrs.removeClass("error-clr"),paidHrs.val(Attendance.disHours(currRowData.paidHours/60,!1,!0))}var adjHrs=row.find("input").eq(inpInd);adjHrs.removeAttr("adjHrs"),adjHrs.removeClass("error-clr"),adjHrs.val(Attendance.disHours(currRowData.adjustHours/60,!1,!0)),row.children().last().removeAttr("balHrs"),row.children().last().text(Attendance.disHours(currRowData.balanceHours/60,!1,!0))}rows.removeClass("ZPActve")},savePaidAdjHrs:function(obj){var rows=$(Attendance.Report.LayoutId+" #ZPAtt_balOtRepBody").find(".ZPActve");if($(Attendance.Report.LayoutId+" #ZPAtt_balOtRepBody").find(".error-clr")[0])ZPeople.Message.showWarningMsg(ZPI18N.getString("zp.entervalidinput"));else{for(var paidAdjHrsList=new Array,eNoList=new Array,len=0;len<rows.length;len++){var paidHrs,row=rows.eq(len),currRowData=Attendance.Report.balOtReportList[row.index()],inpIndex=0;2===row.find("input").length&&(inpIndex=1,paidHrs=row.find("input").eq(0).attr("paidHrs"));var adjHrs=row.find("input").eq(inpIndex).attr("adjHrs"),paidAdjHrsObj={};paidAdjHrsObj.erecno=currRowData.erecno,eNoList.push(currRowData.erecno),void 0!==paidHrs&&1===inpIndex&&(paidAdjHrsObj.paidHrs=paidHrs),void 0!==adjHrs&&(paidAdjHrsObj.adjHrs=adjHrs),Object.keys(paidAdjHrsObj).length>1&&(Attendance.Report.balOtReportList[row.index()].balanceHours=parseInt(row.children().last().attr("balHrs")),void 0!==paidAdjHrsObj.paidHrs&&(Attendance.Report.balOtReportList[row.index()].paidHours=parseInt(paidAdjHrsObj.paidHrs)),void 0!==paidAdjHrsObj.adjHrs&&(Attendance.Report.balOtReportList[row.index()].adjustHours=parseInt(paidAdjHrsObj.adjHrs)),paidAdjHrsList.push(paidAdjHrsObj))}if(0!==paidAdjHrsList.length){eNoList=eNoList.toString(),$(obj).attr("disabled","true");var param={mode:"updatePaidAdjHours",conreqcsr:csrfToken,paidAdjHoursList:JSON.stringify(paidAdjHrsList),eNoList:eNoList};$.post("/AttendanceReportAction.zp",param,function(){$(obj).removeAttr("disabled"),ZPeople.Message.showSuccessMsg(ZPI18N.getString("zp.viewsavedsuccess")),Attendance.Report.cancelPaidAdjHrsSave()})}}},dateFormat:null,getDepLocShiftList:function(isFromMyReq){if(isFromMyReq||null===Attendance.Report.depLocShiftList)if(isFromMyReq&&Attendance.Reg.depLocShiftList)Attendance.Report.consFilterValues(!0);else{var param={mode:"getDepLocList",conreqcsr:csrfToken};isFromMyReq&&(param.isAttEntryView=!0),$.post("/AttendanceAction.zp",param,function(rdata){"hh:mm a"!==rdata.timeformat?Attendance.timeFormatIs12hr=!1:Attendance.timeFormatIs12hr=!0,isFromMyReq?Attendance.Reg.depLocShiftList=rdata:(Attendance.Report.depLocShiftList=rdata,Attendance.Report.dateFormat=rdata.dateFormat),Attendance.Report.consDepLocShiftOptions(isFromMyReq)})}else Attendance.Report.consFilterValues()},consDepLocShiftOptions:function(isFromMyReq){var rdata=Attendance.Report.depLocShiftList;isFromMyReq&&(rdata=Attendance.Reg.depLocShiftList);var result={},depList=rdata.depList,locList=rdata.locList,entityList=rdata.entityList,bUnitList=rdata.bUnitList,divisionList=rdata.divisionList,repSettList=rdata.reportSettList,desgList=rdata.desgList,depOption="",locOption="",entityOption="",bUnitOption="",divisionOption="",shiftOption="",repSettOption="",desgOption="";if(isOrgStructureEnabled){for(var entityId in entityList)-1===(entityId+"").indexOf("_notEnc")&&(entityOption+="<option value="+entityId+">"+entityList[entityId]+"</option>");for(var bUnitId in result.entityOption=entityOption,bUnitList)-1===(bUnitId+"").indexOf("_notEnc")&&(bUnitOption+="<option value="+bUnitId+">"+bUnitList[bUnitId]+"</option>");for(var divisionId in result.bUnitOption=bUnitOption,divisionList)-1===(divisionId+"").indexOf("_notEnc")&&(divisionOption+="<option value="+divisionId+">"+divisionList[divisionId]+"</option>");result.divisionOption=divisionOption}for(var desgId in desgList)-1===(desgId+"").indexOf("_notEnc")&&(desgOption+="<option value="+desgId+">"+desgList[desgId]+"</option>");for(var d_r_depId in depList)-1===(d_r_depId+"").indexOf("_notEnc")&&(depOption+="<option value="+d_r_depId+">"+depList[d_r_depId]+"</option>");for(var d_r_locId in locList)-1===(d_r_locId+"").indexOf("_notEnc")&&(locOption+="<option value="+d_r_locId+">"+locList[d_r_locId]+"</option>");var shiftList=Shift.shiftList;for(var d_r_shiftId in shiftList)-1!==shiftList[d_r_shiftId].select&&(shiftOption+="<option value="+d_r_shiftId+">"+shiftList[d_r_shiftId].shiftName+"</option>");for(var d_r_settId in repSettList){var repSett=repSettList[d_r_settId],lastScheRunTime="-1",rsSecClosureDay="-1";repSett.last_update&&(lastScheRunTime=repSett.last_update),repSett.rsSecClosureDay&&(rsSecClosureDay=repSett.rsSecClosureDay),repSettOption+="<option value="+repSett.rsID+" rsFrequency="+repSett.rsFrequency+" closeDay="+repSett.rsClosureDay+" toDay="+repSett.rsToDay+" closeDay_2="+rsSecClosureDay+" lastUpdatedTime="+lastScheRunTime+" allowRegen="+repSett.allowRegen+" regenClosureDate="+repSett.regenClosureDate+" regenStartDate="+repSett.regenStartDate+">"+repSett.rsName+"</option>"}result.repSettOption=repSettOption,result.depOption=depOption,result.locOption=locOption,result.shiftOption=shiftOption,result.desgOption=desgOption,Attendance.organizationTag.constructOptions(rdata,result);var datFormat=dateFmt.toUpperCase(),toDay=moment(rdata.currDate.todayDate,datFormat),weekStartDate=moment(toDay).startOf("week").add(weekstarts,"day");toDay._d.getTime()<weekStartDate._d.getTime()&&(weekStartDate=weekStartDate.add(-1,"week"));var weekEndDate=moment(toDay).startOf("week").add(weekstarts,"day");toDay._d.getTime()<weekEndDate._d.getTime()&&(weekEndDate=weekEndDate.add(-1,"week")),weekEndDate=weekEndDate.add(6,"day");var lastWeekStart=moment(weekStartDate).add(-7,"day"),lastWeekEnd=moment(weekEndDate).add(-7,"day");isFromMyReq?(Attendance.Reg.depLocShiftList.currDate.weekStartDate=weekStartDate,Attendance.Reg.depLocShiftList.currDate.weekEndDate=weekEndDate,Attendance.Reg.depLocShiftList.currDate.lastWeekStart=lastWeekStart,Attendance.Reg.depLocShiftList.currDate.lastWeekEnd=lastWeekEnd,Attendance.Reg.depLocShiftOptions=result):(Attendance.Report.depLocShiftList.currDate.weekStartDate=weekStartDate,Attendance.Report.depLocShiftList.currDate.weekEndDate=weekEndDate,Attendance.Report.depLocShiftList.currDate.lastWeekStart=lastWeekStart,Attendance.Report.depLocShiftList.currDate.lastWeekEnd=lastWeekEnd,Attendance.Report.depLocShiftOptions=result),Attendance.Report.consFilterValues(isFromMyReq)},consFilterValues:function(isFromMyReq){var layout=Layout.Page.container;if(isFromMyReq){var pageId=Layout.Page.pageId,myReqFilter=layout.find("#ZPAtt_regFilter"),filId="myReqReg";-1!==pageId.indexOf("attendance-permission-myrequests")?(myReqFilter=layout.find("#ZPAtt_permFilter"),filId="myReqPerm"):-1!==pageId.indexOf("attendance-onduty-myrequests")&&(myReqFilter=layout.find("#ZPAtt_onDutyFilter"),filId="myReqOD"),Attendance.Report.consHierarchyFilters(myReqFilter,filId,!0,Attendance.Reg.depLocShiftOptions)}else{var depLocShiftOptions=Attendance.Report.depLocShiftOptions;layout.find("#ZP-Regenerate").addClass("DN").attr("disabled","disabled");if($(Attendance.Report.LayoutId+" #ZPAtt_attDailyReport").is(":visible"))if(Attendance.Report.dailyReport)$(Attendance.Report.LayoutId+" #ZPAtt_dailyReportChartView").parent().is(":visible")?Attendance.Report.dailyReportShowView("chartView",!0):Attendance.Report.dailyReportShowView("listView",!0);else{var dailyRepFilter=Layout.Page.container.find("#ZPAtt_dailyReportfilter");dailyRepFilter.find("#ZPAtt_dailyRep_date").val(this.depLocShiftList.currDate.todayDate),Attendance.Report.consShiftFilterOptions(dailyRepFilter,"ZPAtt_dailyRep_shift"),Attendance.Report.consHierarchyFilters(dailyRepFilter,"dailyRep",!1,depLocShiftOptions),Attendance.Report.dailyReportShowView("chartView")}else if($(Attendance.Report.LayoutId+" #ZPAtt_lateComerReport").is(":visible"))if($(Attendance.Report.LayoutId+" #ZPAtt_lateComerReportTable").parent().hide(),Attendance.consResetEmpSearch("ZPAtt_lateComRep_empName",Layout.Page.container,!0,!0),Attendance.Report.currentLateComerReport){var reportPage=Layout.Page.container.find("#ZPAtt_lateComerReport"),repTable=reportPage.find("#ZPAtt_lateComerReportTableBody");Attendance.Report.showHideEarlyLateBirdReport(repTable,"lateComerReport",reportPage)}else{var lateComerRepFilter=Layout.Page.container.find("#ZPAtt_lateComReportfilter");lateComerRepFilter.find("#ZPAtt_lateComRep_fromDate").val(this.depLocShiftList.currDate.todayDate),lateComerRepFilter.find("#ZPAtt_lateComRep_toDate").val(this.depLocShiftList.currDate.todayDate),lateComerRepFilter.find("#ZPAtt_lateComRep_fromDate").attr("disabled",!0),lateComerRepFilter.find("#ZPAtt_lateComRep_toDate").attr("disabled",!0),Attendance.Report.consShiftFilterOptions(lateComerRepFilter,"ZPAtt_lateComRep_shift"),Attendance.Report.consHierarchyFilters(lateComerRepFilter,"lateComRep",!1,depLocShiftOptions),Attendance.Report.getLateComerReport()}else if($(Attendance.Report.LayoutId+" #ZPAtt_attmonthlyReport").is(":visible")){var statRepFilter=Layout.Page.container.find("#ZPAtt_monthlyReportfilter");if($(Attendance.Report.LayoutId+" #ZPAtt_attmonthlyReportTable").parent().hide(),$(Attendance.Report.LayoutId+" #ZPAtt_empName_monthlyRep").find(".select2-container")[0]||(Attendance.Report.consHierarchyFilters(statRepFilter,"monthlyRep",!1,depLocShiftOptions),Attendance.Report.consShiftFilterOptions(statRepFilter,"ZPAtt_monthlyRep_shift")),Attendance.consResetEmpSearch("ZPAtt_monthlyRep_empName",Layout.Page.container,!0,!0),Attendance.Report.monthlyReport){if($(Attendance.Report.LayoutId+" #ZPAtt_attmonthlyReportTable").parent().fadeIn(300),0===$(Attendance.Report.LayoutId+" #ZPAtt_attmonthlyReportTableBody").children().length)return void(-1!==Attendance.Report.LayoutId.indexOf("attendance-report-monthlyreport")&&"Day"===$(Attendance.Report.LayoutId+" #ZPAtt_month_Report").data("month")?Attendance.Report.showMonthlyReport(!1):Attendance.Report.showMonthlyReport(!1,!0));Attendance.Report.mReportLength<50?Attendance.Report.isEnd=!0:Attendance.Report.isEnd=!1}else statRepFilter.find("#ZPAtt_monthlyRep_fromDate").attr("disabled",!0),statRepFilter.find("#ZPAtt_monthlyRep_toDate").attr("disabled",!0),Attendance.Report.getMonthlyReport()}else if($(Attendance.Report.LayoutId+" #ZPAtt_attSumReportScrcont").is(":visible")){if(Layout.Page.container.find("#ZPAtt_simpSumRep").hide(),Layout.Page.container.find("#ZPAtt_detSumRep").hide(),!$(Attendance.Report.LayoutId+" #ZPAtt_empName_sumRep").find(".select2-container")[0]){var sumRepFilter=Layout.Page.container.find("#ZPAtt_summaryReportfilter");sumRepFilter.find("#ZPAtt_sumRep_fromDate").val(this.depLocShiftList.currDate.monthStartDate),sumRepFilter.find("#ZPAtt_sumRep_toDate").val(this.depLocShiftList.currDate.todayDate),Attendance.Report.consHierarchyFilters(sumRepFilter,"sumRep",!1,depLocShiftOptions)}if(Attendance.consResetEmpSearch("ZPAtt_sumRep_empName",Layout.Page.container,!0,!0),Attendance.Report.summaryReport)return Layout.Page.container.find("#ZPAtt_showSimpleRep").prop("checked")?Layout.Page.container.find("#ZPAtt_simpSumRep").show():Layout.Page.container.find("#ZPAtt_detSumRep").show(),Layout.Page.container.find("#ZPAtt_simpSumDayRepBody").children().remove(),Layout.Page.container.find("#ZPAtt_attSumReportTableBody").children().remove(),void("Day"===Layout.Page.container.find("#ZPAtt_Summary_Report").data("summ")?Attendance.Report.showSumReport(!1):Attendance.Report.showSumReport(!1,!0));Attendance.Report.getSumReport(),Attendance.Report.sReportLength<50?Attendance.Report.isEnd=!0:Attendance.Report.isEnd=!1}else if($(Attendance.Report.LayoutId+" #ZPAtt_attUserReport").is(":visible"))$(Attendance.Report.LayoutId+" #ZPAtt_attUserReport table").hide(),!Attendance.Report.userReport||Attendance.Report.userReportEno?($(Attendance.Report.LayoutId+" #ZPAtt_userRep_fromDate").val(this.depLocShiftList.currDate.monthStartDate),$(Attendance.Report.LayoutId+" #ZPAtt_userRep_toDate").val(this.depLocShiftList.currDate.todayDate),isSPOCReportView||isManageAttendanceData||isLead?($(Attendance.Report.LayoutId+" #ZPAtt_userRep_empName").parent().show(),Attendance.consResetEmpSearch("ZPAtt_userRep_empName",Layout.Page.container,!0,!0)):$(Attendance.Report.LayoutId+" #ZPAtt_userRep_empName").parent().hide(),Attendance.Report.getUserReport()):Attendance.Report.showUserReport();else if(-1!==Attendance.Report.LayoutId.indexOf("attendance-report-balanceotreport")&&!Attendance.Report.balOtReportList){var otRepFilter=Layout.Page.container.find("#ZPAtt_otReportfilter");Layout.Page.container.find("#ZPAtt_otRep_rpSett").append(this.depLocShiftOptions.repSettOption),Attendance.Report.consHierarchyFilters(otRepFilter,"otRep",!1,depLocShiftOptions),Attendance.Report.getBalOtReport()}}},consTotalHrsFilter:function(obj){var filter=$(obj),val=filter.val(),timePicker=filter.next().children().eq(0);if(filter.next().addClass("DNI").next().addClass("DNI"),"1"==val||"2"==val){filter.next().removeClass("DNI");timePicker.timepicker({defaultTime:"",showMeridian:!1,disableMousewheel:!0,minuteStep:1}).on("changeTime.timepicker",function(e){Attendance.changeToMin(e.time.hours,e.time.minutes)>1440&&$(this).timepicker("setTime","00:00")}),timePicker.attr("placeholder","hh:mm").timepicker("setTime","")}},showHideDirectReportee:function(obj,repToId,empNameId){var filter=$(obj).parent(),empVal=filter.find(empNameId).val();empVal&&""!==empVal?(filter.find(repToId).prop("checked",!1),filter.find(repToId).parent().hide()):filter.find(repToId).parent().show()},consHierarchyFilters:function(filter,repId,isFromMyReq,depLocShiftOptions){var depEleId="#ZPAtt_"+repId+"_department",locEleId="#ZPAtt_"+repId+"_location";if(!(void 0!==filter.find(depEleId)&&filter.find(depEleId).children().length>0||void 0!==filter.find(locEleId)&&filter.find(locEleId).children().length>0||isOrgStructureEnabled&&void 0!=filter.find("#ZPAtt_"+repId+"_entity")[0])){var empNameId="#ZPAtt_"+repId+"_empName";if(isFromMyReq){var attModData=ZPeople.Module.MODULE_DATA.attendance;(isadmin||attModData.isManageAttedance||attModData.isLeadForShift||attModData.isSPOCEntryViewAllowed||"myReqShiftMap"===repId)&&Attendance.consResetEmpSearch("ZPAtt_"+repId+"_empName",Layout.Page.container,!0,!1);var eleId="ZPAtt_"+repId+"_department";txt='<div class="col-md-2"><div class="form-group"> <label>'+ZPI18N.getString("zp.department")+"</label>",txt+='<select multiple="multiple" id="'+eleId+'" placeholder=" '+ZPI18N.getString("zp.alldepartment"),txt+='"</select></div></div>',filter.find(empNameId).closest(".col-md-2").after(txt),eleId="#"+eleId,filter.find(eleId).select2({closeOnSelect:!1}),eleId="ZPAtt_"+repId+"_location",txt='<div class="col-md-2"><div class="form-group"> <label>'+ZPI18N.getString("zp.location")+"</label>",txt+='<select multiple="multiple" id="'+eleId+'" placeholder=" '+ZPI18N.getString("zp.alllocaction"),txt+='"</select></div></div>',filter.find(depEleId).closest(".col-md-2").after(txt),eleId="#"+eleId,filter.find(eleId).select2({closeOnSelect:!1}),Attendance.organizationTag.isEnabled()&&(eleId="ZPAtt_"+repId+"_orgTag",txt='<div class="col-md-2"><div class="form-group"> <label>'+ZPeople.orgTagDisplayName+"</label>",txt+='<select multiple="multiple" id="'+eleId+'" placeholder=" '+ZPI18N.getString("zp.all"),txt+='"</select></div></div>',filter.find(locEleId).closest(".col-md-2").after(txt),eleId="#"+eleId,filter.find(eleId).select2({closeOnSelect:!1}))}var repToId="#ZPAtt_"+repId+"_showDirectRepTo";if(void 0===filter.find(repToId)[0]&&(filter.find(empNameId).after('<label class="checkbox DIB MT10I ML10"><input type="checkbox" id="ZPAtt_'+repId+'_showDirectRepTo"><span>'+ZPI18N.getString("zp.showdirectreportees")+"</span></label>"),filter.find(empNameId).attr("onchange","Attendance.Report.showHideDirectReportee(this,'"+repToId+"', '"+empNameId+"')")),isOrgStructureEnabled){if(ZPeople.orgStructureTagMap.entity){eleId="ZPAtt_"+repId+"_entity";var txt='<div class="col-md-2"><div class="form-group"> <label>'+(ZPeople.orgStructureDispNameMap&&ZPeople.orgStructureDispNameMap.entity?ZPeople.orgStructureDispNameMap.entity:ZPI18N.getString("zp.legalentityname"))+"</label>";txt+='<select multiple="multiple" id="'+eleId+'" placeholder=" '+ZPI18N.getString("zp.all"),txt+='"</select></div></div>',filter.find(depEleId).closest(".col-md-2").before(txt),eleId="#"+eleId,filter.find(eleId).select2({closeOnSelect:!1}),Attendance.Report.removeFilterOrSetOptions(filter.find(eleId),depLocShiftOptions.entityOption)}if(ZPeople.orgStructureTagMap.unit)eleId="ZPAtt_"+repId+"_businessUnit",txt='<div class="col-md-2"><div class="form-group"> <label>'+(ZPeople.orgStructureDispNameMap&&ZPeople.orgStructureDispNameMap.unit?ZPeople.orgStructureDispNameMap.unit:ZPI18N.getString("zp.addbusinessunit"))+"</label>",txt+='<select multiple="multiple" id="'+eleId+'" placeholder=" '+ZPI18N.getString("zp.all"),txt+='"</select></div></div>',filter.find(depEleId).closest(".col-md-2").before(txt),eleId="#"+eleId,filter.find(eleId).select2({closeOnSelect:!1}),Attendance.Report.removeFilterOrSetOptions(filter.find(eleId),depLocShiftOptions.bUnitOption);if(ZPeople.orgStructureTagMap.division)eleId="ZPAtt_"+repId+"_division",txt='<div class="col-md-2"><div class="form-group"> <label>'+(ZPeople.orgStructureDispNameMap&&ZPeople.orgStructureDispNameMap.division?ZPeople.orgStructureDispNameMap.division:ZPI18N.getString("zp.divisionname"))+"</label>",txt+='<select multiple="multiple" id="'+eleId+'" placeholder=" '+ZPI18N.getString("zp.all"),txt+='"</select></div></div>',filter.find(depEleId).closest(".col-md-2").before(txt),eleId="#"+eleId,filter.find(eleId).select2({closeOnSelect:!1}),Attendance.Report.removeFilterOrSetOptions(filter.find(eleId),depLocShiftOptions.divisionOption)}var desgOption=depLocShiftOptions.desgOption;if(void 0!==desgOption&&null!==desgOption&&0!==desgOption.length){eleId="ZPAtt_"+repId+"_desg";txt='<div class="col-md-2"><div class="form-group"> <label>'+ZPI18N.getString("zp.designation")+"</label>",txt+='<select multiple="multiple" id="'+eleId+'" placeholder=" '+ZPI18N.getString("zp.alldesignation"),txt+='"</select></div></div>',filter.find(depEleId).closest(".col-md-2").after(txt),eleId="#"+eleId,filter.find(eleId).select2({closeOnSelect:!1}),Attendance.Report.removeFilterOrSetOptions(filter.find(eleId),desgOption)}Attendance.Report.removeFilterOrSetOptions(filter.find(depEleId),depLocShiftOptions.depOption),Attendance.Report.removeFilterOrSetOptions(filter.find(locEleId),depLocShiftOptions.locOption),Attendance.organizationTag.isEnabled()&&Attendance.Report.removeFilterOrSetOptions(filter.find("#ZPAtt_"+repId+"_orgTag"),depLocShiftOptions.orgTagOption)}},removeFilterOrSetOptions:function(ele,options){void 0!==options&&null!==options&&(0===options.length?ele.closest(".col-md-2").remove():ele.append(options))},consShiftFilterOptions:function(filter,id){var shiftOption=filter.find("#"+id);0===shiftOption.children().length&&shiftOption.append(this.depLocShiftOptions.shiftOption)},setTimePickerEarlyLateFilter:function(obj){var unChangedFilter,filter=$(obj),val=filter.val(),timePicker=filter.next().children().eq(0);filter.next().removeClass("DNI").next().addClass("DNI"),timePicker.timepicker("remove"),unChangedFilter=-1!==timePicker[0].id.indexOf("ZPAtt_lateComRep_checkInTime")?filter.closest(".col-md-2").next().find("#ZPAtt_lateComRep_checkOut"):filter.closest(".col-md-2").prev().find("#ZPAtt_lateComRep_checkIn"),"5"!==val&&unChangedFilter.find("option").length<6&&6===filter.find("option").length&&unChangedFilter.append('<option value="5">'+ZPI18N.getString("zp.earlylaterepfilter.notrecorded")+"</option>"),"1"===val||"2"===val?Attendance.Common.setTimePicker(!1,void 0,"hh:mm",timePicker):"3"===val||"4"===val?Attendance.Common.setTimePicker(Attendance.timeFormatIs12hr,"Attendance.set_DefValue_ForTimePicker_Input(this)",Attendance.timeFormatIs12hr?"1:00 PM":"13:00",timePicker):("5"===val&&unChangedFilter.find("option[value=5]").remove(),filter.next().addClass("DNI"))},setCustomFilterValue:function(isEntry,customFilterVal,time,isTextNeeded){if("0"!==customFilterVal){if(""===time)return"error";var text,timeInSecs=Attendance.Common.convertTimerInputToMinsOrSecs(time,!0),obj={},type=isEntry?"entry":"exit";return(isEntry&&"2"===customFilterVal||!isEntry&&"1"===customFilterVal)&&(timeInSecs=-timeInSecs),"1"===customFilterVal?(type+="ShiftBefore",text=ZPI18N.getString("zp.earlylaterepfilter.earlythanshift")):"2"===customFilterVal?(type+="ShiftAfter",text=ZPI18N.getString("zp.earlylaterepfilter.latethanshift")):"3"===customFilterVal?(type+="Before",text=ZPI18N.getString("zp.before")):"4"===customFilterVal&&(type+="After",text=ZPI18N.getString("zp.after")),obj.type=type,obj.timeInSecs=timeInSecs,isTextNeeded&&(-1!==text.indexOf("{")&&(text=text.substring(0,text.indexOf("{")-1)),obj.text=text+" "+time),obj}},getFilterValues:function(reportFilter,param,filId){var locObj=reportFilter.find("#ZPAtt_"+filId+"_location").val();if(locObj&&0!=locObj.length&&(param.locationId=JSON.stringify(locObj)),Attendance.organizationTag.isEnabled()){var orgTagObj=reportFilter.find("#ZPAtt_"+filId+"_orgTag").val();orgTagObj&&0!=orgTagObj.length&&(param.orgTagId=JSON.stringify(orgTagObj))}var depObj=reportFilter.find("#ZPAtt_"+filId+"_department").val();depObj&&0!=depObj.length&&(param.departmentId=JSON.stringify(depObj));var shiftObj=reportFilter.find("#ZPAtt_"+filId+"_shift").val();shiftObj&&0!=shiftObj.length&&(param.shiftId=JSON.stringify(shiftObj));var entityObj=reportFilter.find("#ZPAtt_"+filId+"_entity").val();entityObj&&0!=entityObj.length&&(param.entityId=JSON.stringify(entityObj));var bUnitObj=reportFilter.find("#ZPAtt_"+filId+"_businessUnit").val();bUnitObj&&0!=bUnitObj.length&&(param.bUnitId=JSON.stringify(bUnitObj));var divisionObj=reportFilter.find("#ZPAtt_"+filId+"_division").val();divisionObj&&0!=divisionObj.length&&(param.divisionId=JSON.stringify(divisionObj));var desgObj=reportFilter.find("#ZPAtt_"+filId+"_desg").val();desgObj&&0!=desgObj.length&&(param.desgId=JSON.stringify(desgObj));var statObj=reportFilter.find("#ZPAtt_"+filId+"_status").val();statObj&&0!=statObj.length&&(param.statFil=JSON.stringify(statObj));var erecno=reportFilter.find("#ZPAtt_"+filId+"_empName").val();"userRep"!==filId&&erecno&&0!=erecno.length&&""!=erecno&&(param.erecno=JSON.stringify(erecno.split(","))),reportFilter.find("#ZPAtt_"+filId+"_showDirectRepTo").prop("checked")&&(param.showDirectRepTo=!0),Attendance.Report.getEmpProfDateofExitFilter(reportFilter,param,filId)},getEmpProfDateofExitFilter:function(reportFilter,param,filId){var statObj=reportFilter.find("#ZPAtt_"+filId+"_empProfile").val();statObj&&0!=statObj.length&&(param.userTypeId=JSON.stringify(statObj)),reportFilter.find("#ZPAtt_"+filId+"_incExitDate").prop("checked")&&(param.incDateOfExit=!0)},generateReportPopup:function(){var startDate=$("option:selected","#ZPAtt_otRep_rpSett",Attendance.Report.LayoutId).attr("regenstartdate"),endDate=$("option:selected","#ZPAtt_otRep_rpSett",Attendance.Report.LayoutId).attr("regenclosuredate");ZPeople.BSModal.confirm(Attendance.Report.regenerateOTReport,ZPI18N.getString("zp.alert"),ZPI18N.getString("zp.regenotrep",new Array(startDate,endDate)))},regenerateOTReport:function(){var param={mode:"regenOTRep",conreqcsr:csrfToken},repSettId=Layout.Page.container.find("#ZPAtt_otRep_rpSett").val().trim();repSettId&&""!==repSettId&&(param.repSettId=repSettId,ZPeople.Message.showWarningMsg(ZPI18N.getString("zp.waituntilotisgen")),$.post("/AttendanceReportAction.zp",param,function(rdata){"success"===rdata.status?(ZPeople.Message.showSuccessMsg(ZPI18N.getString("zp.reportgensucces")),$("option:selected","#ZPAtt_otRep_rpSett",Attendance.Report.LayoutId).attr("allowRegen","false"),Attendance.Report.getBalOtReport()):rdata.errMsg&&("only for super admin"===rdata.errMsg?ZPeople.Message.showFailureMsg(ZPI18N.getString("zp.thisoponlyforsuperadmin")):"ot report already generated"===rdata.errMsg&&ZPeople.Message.showFailureMsg(ZPI18N.getString("zp.otrepalreadygen")))}))}},Attendance.ReportImport={showImport:function(){ZPeople.BSModal.show($("#"+Layout.Page.pageId+" #ZPAtt_report_importPopup")),$(Attendance.Report.LayoutId+" #ZPAtt_report_importSuccMsg").hide(),$(Attendance.Report.LayoutId+" #ZPAtt_report_importSuccvalues").hide(),$(Attendance.Report.LayoutId+" #ZPAtt_report_import").parent().parent().removeAttr("class"),$(Attendance.Report.LayoutId+" #ZPAtt_report_import").fadeIn(300),$(Attendance.Report.LayoutId+" #ZPAtt_report_impEx").fadeIn(300),$(Attendance.Report.LayoutId+" #ZPAtt_report_importFileConf").hide(),$(Attendance.Report.LayoutId+" #ZPAtt_report_importMap").hide(),$(Attendance.Report.LayoutId+" #ZPAtt_report_importInput").val(""),$(Attendance.Report.LayoutId+" #ZPAtt_report_importDesc").after($(Attendance.Report.LayoutId+" #ZPAtt_report_importInputCont").show()),$(Attendance.Report.LayoutId+" #ZPAtt_report_importInputCont span").text(ZPI18N.getString("zp.importfile")),$(Attendance.Report.LayoutId+" #ZPAtt_report_importInputCont").attr("class","btn btn-primary ZPbtnDefault"),$(Attendance.Report.LayoutId+" #ZPAtt_report_importNext").hide(),$(Attendance.Report.LayoutId+" #ZPAtt_report_importPrevious").hide(),$(Attendance.Report.LayoutId+" #ZPAtt_report_importHeader li").first().attr("class","active"),$(Attendance.Report.LayoutId+" #ZPAtt_report_importHeader li").last().removeAttr("class"),Layout.Page.container.find("#ZPAtt_report_importHeader .modal-body").find("#zp_page_loading").remove(),Layout.Page.container.find("#ZPAtt_report_importHeader .modal-body").children().show(),Attendance.ReportImport.getPendingImport(),Layout.Page.container.find("#importErrDiv").hide()},onInputChange:function(){var fileName=$(Attendance.Report.LayoutId+" #ZPAtt_report_importInput").val();$(Attendance.Report.LayoutId+" #ZPAtt_report_importProgress").hide(),$(Attendance.Report.LayoutId+" #ZPAtt_report_importProgress").next().show(),fileName=fileName.replace("C:\\fakepath\\",""),$(Attendance.Report.LayoutId+" #ZPAtt_report_importFName").text(fileName),$(Attendance.Report.LayoutId+" #ZPAtt_report_importSuccMsg").hide(),$(Attendance.Report.LayoutId+" #ZPAtt_report_importSuccvalues").hide(),$(Attendance.Report.LayoutId+" #ZPAtt_report_importProgress").after($(Attendance.Report.LayoutId+" #ZPAtt_report_importInputCont")),$(Attendance.Report.LayoutId+" #ZPAtt_report_importInputCont span").text(ZPI18N.getString("zp.removeandnew")),$(Attendance.Report.LayoutId+" #ZPAtt_report_importInputCont").attr("class","btn btn-default ZPbtnDefault");var extn=fileName.split(".").pop();"xls"===extn||"csv"===extn?($(Attendance.Report.LayoutId+" #ZPAtt_report_importFName").next().attr("class","IC-rou-tik ML5 filetck"),$(Attendance.Report.LayoutId+" #ZPAtt_report_importNext").fadeIn(300),Layout.Page.container.find("#ZPAtt_report_importNext").attr("disabled",!1),$(Attendance.Report.LayoutId+" #ZPAtt_report_importNext").unbind("click").bind("click",function(){Attendance.ReportImport.submitImport()})):($(Attendance.Report.LayoutId+" #ZPAtt_report_importFName").next().attr("class","IC-r-close ML5 PR S18 red"),$(Attendance.Report.LayoutId+" #ZPAtt_report_importNext").hide(),$(Attendance.Report.LayoutId+" #ZPAtt_report_importInput").val(""),""===$(Attendance.Report.LayoutId+" #ZPAtt_report_importFName").text()&&$(Attendance.Report.LayoutId+" #ZPAtt_report_importFName").text(ZPI18N.getString("zp.choosefile"))),$(Attendance.Report.LayoutId+" #ZPAtt_report_import").hide(),$(Attendance.Report.LayoutId+" #ZPAtt_report_impEx").hide(),$(Attendance.Report.LayoutId+" #ZPAtt_report_importFileConf").fadeIn(300),$(Attendance.Report.LayoutId+" #ZPAtt_report_importMap").hide()},submitImport:function(){$(Attendance.Report.LayoutId+" #ZPAtt_report_importNext").unbind("click"),Attendance.ReportImport.ProgressBarWidth=0,$(Attendance.Report.LayoutId+" #ZPAtt_report_importProgress").next().hide(),$(Attendance.Report.LayoutId+" #ZPAtt_report_importProgress div").width(Attendance.ReportImport.ProgressBarWidth+"%").parent().show(),Attendance.ReportImport.showProgress();var form=$(Attendance.Report.LayoutId+" #ZPAtt_report_importInput")[0].form;""!==$(Attendance.Report.LayoutId+" #ZPAtt_report_importInput").val()&&(Layout.Page.container.find("#ZPAtt_report_importNext").attr("disabled",!0),$(Attendance.Report.LayoutId+" #ZPAtt_report_importFormCsrf").val(csrfToken),form.action="AttendanceImport.zp",form.submit())},ProgressBarWidth:0,showProgress:function(){$(Attendance.Report.LayoutId+" #ZPAtt_report_importProgress div").width(Attendance.ReportImport.ProgressBarWidth+"%"),Attendance.ReportImport.ProgressBarWidth+=2,Attendance.ReportImport.ProgressBarWidth<=99&&setTimeout(Attendance.ReportImport.showProgress,1)},getPendingImport:function(){var pendingMsg=$(Attendance.Report.LayoutId+" #ZPAtt_report_importMsg");pendingMsg.parent().hide();var param={mode:"getPendingImportInfo",conreqcsr:csrfToken,type:"balanceOtReport"};$.post("/AttendanceAction.zp",param,function(rdata){"empty"===rdata.tableInfo.tableHeaders?(pendingMsg.unbind("click"),pendingMsg.html(""),pendingMsg.parent().hide()):(pendingMsg.attr("class","blu CP"),pendingMsg.unbind("click").bind("click",function(){Attendance.ReportImport.showMapping(rdata.tableInfo)}),pendingMsg.html(rdata.tableInfo.recordCount+" "+ZPI18N.getString("zp.recordspending")),pendingMsg.parent().fadeIn(300))})},showMapping:function(obj){Layout.Page.container.find("#ZPAtt_report_importNext").attr("disabled",!1),$(Attendance.Report.LayoutId+" #ZPAtt_report_import").hide(),$(Attendance.Report.LayoutId+" #ZPAtt_report_impEx").hide(),$(Attendance.Report.LayoutId+" #ZPAtt_report_importFileConf").hide(),$(Attendance.Report.LayoutId+" #ZPAtt_report_importMap").fadeIn(300),$(Attendance.Report.LayoutId+" #ZPAtt_report_importPrevious").fadeIn(300),$(Attendance.Report.LayoutId+" #ZPAtt_report_importNext").fadeIn(300),$(Attendance.Report.LayoutId+" #ZPAtt_report_importHeader li").last().attr("class","active"),$(Attendance.Report.LayoutId+" #ZPAtt_report_importNext").unbind("click").bind("click",function(){Attendance.ReportImport.submitMappingBalOrRep(obj.fileFormat)});var rArray=obj.tableHeaders,res="<option value='None' selected='selected'>-- "+ZPI18N.getString("zp.select")+" --</option>";for(var i in rArray)res+="<option value='"+i+"'>"+rArray[i]+"</option>";$(Attendance.Report.LayoutId+" #ZPAtt_report_balRep_importIds select").html(res),$(Attendance.Report.LayoutId+" #ZPAtt_report_balRep_importAdjHrs select").html(res),$(Attendance.Report.LayoutId+" #ZPAtt_report_balRep_importPaidHrs select").html(res),$(Attendance.Report.LayoutId+" #ZPAtt_report_importMsg").unbind("click"),$(Attendance.Report.LayoutId+" #ZPAtt_report_importMsg").attr("class","blu"),$(Attendance.Report.LayoutId+" #ZPAtt_report_importMsg").parent().fadeIn(300),obj.error&&"rowExceededLimit"===obj.error?(ZPeople.Message.showFailureMsg(ZPI18N.getString("zp.importcntexceederror"),!0),Layout.Page.container.find("#ZPAtt_report_importNext").attr("disabled",!0),Layout.Page.container.find("#ZPAtt_report_importMsg").text("")):void 0!==obj.recordCount?$(Attendance.Report.LayoutId+" #ZPAtt_report_importMsg").text(obj.recordCount+" "+ZPI18N.getString("zp.recordsfound")):$(Attendance.Report.LayoutId+" #ZPAtt_report_importMsg").text("0 "+ZPI18N.getString("zp.recordsfound")),$(Attendance.Report.LayoutId+" #ZPAtt_report_importMap select").select2()},submitMappingBalOrRep:function(){var si_Id=$(Attendance.Report.LayoutId+" #ZPAtt_report_balRep_importIds select")[0].selectedIndex,si_adjHrs=$(Attendance.Report.LayoutId+" #ZPAtt_report_balRep_importAdjHrs select")[0].selectedIndex,si_paidHrs=$(Attendance.Report.LayoutId+" #ZPAtt_report_balRep_importPaidHrs select")[0].selectedIndex;if(0!==si_Id)if(0!==si_adjHrs||0!==si_paidHrs){var param={mode:"balRepImportMapping",mailId:si_Id-1,conreqcsr:csrfToken};0!==si_adjHrs&&(param.adjustHrs=si_adjHrs-1),0!==si_paidHrs&&(param.paidHrs=si_paidHrs-1),Layout.Page.container.find("#ZPAtt_report_importNext").attr("disabled",!0),Layout.Page.container.find("#ZPAtt_report_importHeader .modal-body").children().hide(),Layout.Page.container.find("#ZPAtt_report_importHeader .modal-body").append(ZPeople.LOADING_HTML),$.post("/AttendanceAction.zp",param,function(resultData){if(Layout.Page.container.find("#ZPAtt_report_importHeader .modal-body").find("#zp_page_loading").remove(),Layout.Page.container.find("#ZPAtt_report_importHeader .modal-body").children().show(),resultData.msg){if(0===resultData.msg.length)return void ZPeople.Message.showFailureMsg(ZPI18N.getString("zp.unabletoprocess"));if($(Attendance.Report.LayoutId+" #ZPAtt_report_import").parent().parent().attr("class","ZPImfrm ZPRecList"),$(Attendance.Report.LayoutId+" #ZPAtt_report_importMap").hide(),$(Attendance.Report.LayoutId+" #ZPAtt_report_importMsg").parent().hide(),$(Attendance.Report.LayoutId+" #ZPAtt_report_importSuccMsg").fadeIn(300),$(Attendance.Report.LayoutId+" #ZPAtt_report_importSuccvalues").fadeIn(300),$(Attendance.Report.LayoutId+" #ZPAtt_report_importSuccvalues span")[0].innerHTML=resultData.msg.totalCount,$(Attendance.Report.LayoutId+" #ZPAtt_report_importSuccvalues span")[1].innerHTML=resultData.msg.successCount,$(Attendance.Report.LayoutId+" #ZPAtt_report_importPrevious").hide(),$(Attendance.Report.LayoutId+" #ZPAtt_report_importNext").hide(),-1!==Layout.Page.pageId.indexOf("attendance-report-balanceotreport")&&Attendance.Report.getBalOtReport(),resultData.msg.emptyEmpIds.length>0||resultData.msg.errorInfo.length>0||resultData.msg.skippedEmpInfo.length>0){var rowNumber=0;if(Layout.Page.container.find("#importErrDiv").show(),Layout.Page.container.find("#importErrTBody").find("tr").remove(),resultData.msg.skippedEmpInfo.length>0){for(length=resultData.msg.skippedEmpInfo.length,Layout.Page.container.find("#importErrTBody").append($("<tr class='ZPLRow' ><td colspan=2 class='err-lst'>"+ZPI18N.getString("zp.invalidempinfo")+"<ul></ul></td></tr>")),i=0;i<length;i++)$($(Layout.Page.container.find("#importErrTBody").find(".ZPLRow")[rowNumber]).find("ul")).append("<li>"+$("<div/>").text(resultData.msg.skippedEmpInfo[i]).html()+"</li>");rowNumber++}if(resultData.msg.emptyEmpIds.length>0){for(length=resultData.msg.emptyEmpIds.length,Layout.Page.container.find("#importErrTBody").append($("<tr class='ZPLRow' ><td colspan=2 class='err-lst'>"+ZPI18N.getString("zp.emptyempids")+"<ul></ul></td></tr>")),i=0;i<length;i++)$($(Layout.Page.container.find("#importErrTBody").find(".ZPLRow")[rowNumber]).find("ul")).append("<li>"+resultData.msg.emptyEmpIds[i]+"</li>");rowNumber++}resultData.msg.errorInfo.length>0&&resultData.msg.errorInfo.forEach(function(obj,index){for(Layout.Page.container.find("#importErrTBody").append($("<tr class='ZPLRow'><td>Row "+obj[0]+" :</td><td></td></tr>")),i=1;i<obj.length;i++)$($(Layout.Page.container.find("#importErrTBody").find(".ZPLRow")[index+rowNumber]).find("td")[1]).append(obj[i]+"<br>")})}}else if(resultData.fail||resultData.error){var errorMsg=resultData.fail?resultData.fail:ZPI18N.getString("zp.unabletoprocess");ZPeople.Message.showFailureMsg(errorMsg),Layout.Page.container.find("#ZPAtt_report_importNext").attr("disabled",!1),Layout.Page.container.find("#ZPAtt_report_importNext").unbind("click").bind("click",function(){Attendance.ReportImport.submitMappingBalOrRep()})}})}else ZPeople.Message.showFailureMsg(ZPI18N.getString("zp.chooseadjorpiadhrs"));else ZPeople.Message.showFailureMsg(ZPI18N.getString("zp.choosereqcolumns"))}};var Att_Common_Operations={isModuleDataLoaded:!1,depLocShiftList:void 0,teamDepLocShiftList:void 0,attendance:{},shifts:{},filterValues:null,landingPage:void 0,landingPageId:void 0,landingPageURL:void 0,myRequestPage:void 0,myRequestPageId:void 0,myRequestPageURL:void 0,attReqViewFormId:void 0,attReqViewRecId:void 0,recordsPerReq:30,summaryPageRegex:/attendance\/[a-z]+\/summary/,workdriveFileUpload:void 0,cloudFileUpload:void 0,initComponents:function(event){(void 0==event||event.detail.fromUI)&&(landingPage=settingsPage.container,landingPageId=landingPage[0].id,Att_Common_Operations.myRequestPage=void 0,Att_Common_Operations.attReqViewFormId=void 0,Att_Common_Operations.attReqViewRecId=void 0,Att_Common_Operations.isAttListViewPage()?Att_Common_Operations.checkModuleDataLoad():landingPageId.includes("shift")?Att_Common_Operations.getShiftDepLocShiftList(Att_Common_Operations.checkModuleDataLoad):Att_Common_Operations.getAttendanceDepLocShiftList(Att_Common_Operations.checkModuleDataLoad))},checkModuleDataLoad:function(){if(Att_Common_Operations.isModuleDataLoaded||void 0===ZPeople.Module.MODULE_DATA.attendance||(Att_Common_Operations.isModuleDataLoaded=!0),Att_Common_Operations.isModuleDataLoaded)landingPageURL=Att_Common_Operations.getLandingPageURL(),Att_Common_Operations.initPageComponent(),Att_Common_Operations.addClickEventForSort();else{var params={initmodule:JSON.stringify({modulePrefix:"attendance"})};ZPeople.Request.send("/gettabdetails/initpage",params,function(result){result.initmodule&&(ZPeople.Module.MODULE_DATA.attendance=result.initmodule,Att_Common_Operations.isModuleDataLoaded=!0,landingPageURL=Att_Common_Operations.getLandingPageURL(),Att_Common_Operations.initPageComponent(),Att_Common_Operations.addClickEventForSort())})}},isAllEntriesAllowed:function(){if(ZPeople.Module.MODULE_DATA.attendance.showAllEntries,Att_Common_Operations.isModuleDataLoaded||void 0!==ZPeople.Module.MODULE_DATA.attendance)return 0==ZPeople.Module.MODULE_DATA.attendance.showAllEntries},validateRedirectionURL:function(){if(settingsUrlProps.urlParamsArr&&settingsUrlProps.urlParamsArr.mode){var mode=settingsUrlProps.urlParamsArr.mode,formId=settingsUrlProps.urlParamsArr.formId,recordId=settingsUrlProps.urlParamsArr.recordId;if("AttendancePermissions"==mode)return{isValid:!0,redirectToURL:"attendance/hourlyperm/viewmyrequest-formId:"+formId+"/recordId:"+recordId};if("AttendanceOD"==mode)return{isValid:!0,redirectToURL:"attendance/onduty/viewmyrequest-formId:"+formId+"/recordId:"+recordId};if("Shift"==mode)return{isValid:!0,redirectToURL:"attendance/shiftchangerequests/viewmyrequest-formId:"+formId+"/recordId:"+recordId}}},getLandingPageURL:function(){var moduleData,url=Layout.Page.hash.replace("#","");"operations/attendance"===url&&((moduleData=ZPeople.Module.MODULE_DATA.attendance).isRegConfigured?url+="/regularization":moduleData.isOnDutyConfigured?url+="/onduty":moduleData.isPermissionConfigured?url+="/hourlyperm":url+="/biometricidmapping");"operations/shift"===url&&((moduleData=ZPeople.Module.MODULE_DATA.attendance).isManageAttSettings||isadmin?url+="/manageshifts":moduleData.isManageAttedance?url+="/employeeshiftmapping":url+="/shiftchangerequests");url.includes("operations/attendance/viewmyrequest")&&((moduleData=ZPeople.Module.MODULE_DATA.attendance).isRegConfigured?url="operations/attendance/regularization/viewmyrequest":moduleData.isOnDutyConfigured?url="operations/attendance/onduty/viewmyrequest":moduleData.isPermissionConfigured&&(url="operations/attendance/hourlyperm/viewmyrequest"));return!url.includes("operations")||url.includes("operations/attendance/searchuser")||url.includes("operations/shift/searchuser")?url.includes("team/user")||url.includes("operations/attendance/searchuser")||url.includes("operations/shift/searchuser")?(Att_Common_Operations.attReqViewFormId=Layout.Page.urlparam["viewmyrequest-formId"],Att_Common_Operations.attReqViewRecId=Layout.Page.urlparam.recordId):(Att_Common_Operations.attReqViewFormId=Layout.Page.childUrlParam.formId,Att_Common_Operations.attReqViewRecId=Layout.Page.childUrlParam.recordId):(Att_Common_Operations.attReqViewFormId=settingsUrlProps.urlParamsArr.formId,Att_Common_Operations.attReqViewRecId=settingsUrlProps.urlParamsArr.recordId),url},addClickEventForSort:function(){landingPageId.includes("manageshifts")||landingPage.find(".zpl_icncnt").find("i").off("click").on("click",function(){Att_Common_Operations.toggleSort(this)})},toggleSort:function(curEle){var bodyHeader=landingPage.find(".zpl_rgtcnt").find("table").find("thead");if((curEle=$(curEle)).addClass("ignore"),curEle.hasClass("asc")?(curEle.addClass("desc"),curEle.removeClass("asc")):(curEle.addClass("asc"),curEle.removeClass("desc")),$(".PI_sort:not(.ignore)",bodyHeader).removeClass("asc desc"),curEle.removeClass("ignore"),"#operations/shift"==(page=Layout.Page.hash))"operations-shift-employeeshiftmapping"==(pageId=(page=settingsPage.container)[0].id)?shiftMapping.isCalView?shiftMapping.isHoursView?shiftMapping.getHoursListView():shiftMapping.getUserCalView(!1):shiftMapping.getUserListView(!1,!1):"operations-shift-shiftchangerequests"==pageId?shiftRequest.getShiftMapRequest(!1,!0):"operations-shift-autoshiftrequests"==pageId&&AutoAssignShiftRequest.getShiftMapRequest(!1,!0);else if("#operations/attendance"==page){var page,pageId;"operations-attendance-regularization"==(pageId=(page=settingsPage.container)[0].id)?regularization_operation.getData(!1,!0):"operations-attendance-onduty"==pageId?onduty.getRequest(!1,!0):"operations-attendance-hourlyperm"==pageId?permission.getRequest(!1,!0):"operations-attendance-biometricidmapping"==pageId&&useridmapping.getUserMapIdList()}else-1!=page.indexOf("regularization")?regularization_operation.getData(!1,!0):-1!=page.indexOf("onduty")?onduty.getRequest(!1,!0):-1!=page.indexOf("hourlyperm")?permission.getRequest(!1,!0):-1!=page.indexOf("biometricidmapping")?useridmapping.getUserMapIdList():-1!=page.indexOf("manageshifts")?shifts.reFetchShiftDetails():-1!=page.indexOf("shiftchangerequests")?shiftRequest.getShiftMapRequest(!1,!0):-1!=page.indexOf("autoshiftrequests")?AutoAssignShiftRequest.getShiftMapRequest(!1,!0):-1!=page.indexOf("employeeshiftmapping")&&(shiftMapping.isCalView?shiftMapping.isHoursView?shiftMapping.getHoursListView():shiftMapping.getUserCalView(!1):shiftMapping.getUserListView(!1,!1))},getSortParams:function(param,isFromExp){var bodyHeader=landingPage.find(".zpl_rgtcnt").find("table").find("thead"),sortEle=$(".asc , .desc",bodyHeader),sortType=!!sortEle.hasClass("asc"),sortBy=sortEle.attr("id");return"regEmpSort"===sortBy||"odEmpSort"===sortBy||"permEmpSort"===sortBy||"bioIdEmpSort"===sortBy||"shiftMapEmpSort"===sortBy||"shiftListEmpSort"===sortBy||"shiftHrsEmpSort"===sortBy||"shiftWeekEmpSort"===sortBy?isFromExp?param+="&isEmpSortAsc="+sortType:param.isEmpSortAsc=sortType:"bioIdSort"===sortBy?isFromExp?param+="&isIdSortAsc="+sortType:param.isIdSortAsc=sortType:"shiftTimeSort"===sortBy?isFromExp?param+="&isSortTime="+sortType:param.isSortTime=sortType:"shiftNameSort"===sortBy&&(isFromExp?param+="&isSortName="+sortType:param.isSortName=sortType),param},getAttendanceDepLocShiftList:function(callback){var isDataLoaded=!1;if(landingPageId.includes("entry")?(Att_Common_Operations.attendance.teamDepLocShiftList&&(Att_Common_Operations.filterValues=Att_Common_Operations.attendance.teamDepLocShiftList,isDataLoaded=!0),Att_Common_Operations.attendance.depLocShiftList&&(Att_Common_Operations.filterValues=Att_Common_Operations.attendance.depLocShiftList,isDataLoaded=!0)):landingPageId.includes("team")?Att_Common_Operations.attendance.teamDepLocShiftList&&(Att_Common_Operations.filterValues=Att_Common_Operations.attendance.teamDepLocShiftList,isDataLoaded=!0):Att_Common_Operations.attendance.depLocShiftList&&(Att_Common_Operations.filterValues=Att_Common_Operations.attendance.depLocShiftList,isDataLoaded=!0),isDataLoaded){if(void 0==callback)return Att_Common_Operations.filterValues;callback()}else{var param={mode:"getDepLocList",conreqcsr:csrfToken,isAttEntryView:!0};(landingPageId.includes("team")||landingPageId.includes("entry"))&&(param.isMyTeamData=!0),ZPeople.Request.send("/AttendanceAction.zp",param,function(rdata){if("hh:mm a"!==rdata.timeformat?Attendance.timeFormatIs12hr=!1:Attendance.timeFormatIs12hr=!0,param.isMyTeamData?Att_Common_Operations.attendance.teamDepLocShiftList=rdata:Att_Common_Operations.attendance.depLocShiftList=rdata,Att_Common_Operations.filterValues=rdata,void 0==callback)return Att_Common_Operations.filterValues;callback()})}},getShiftDepLocShiftList:function(callback){var isDataLoaded=!1;if(settingsPage.container[0].id.includes("attendance")?Att_Common_Operations.shifts.teamDepLocShiftList&&(Att_Common_Operations.filterValues=Att_Common_Operations.shifts.teamDepLocShiftList,isDataLoaded=!0):Att_Common_Operations.shifts.depLocShiftList&&(Att_Common_Operations.filterValues=Att_Common_Operations.shifts.depLocShiftList,isDataLoaded=!0),isDataLoaded){if(void 0==callback)return Att_Common_Operations.filterValues;callback()}else{var param={mode:"getDepLocShiftList",conreqcsr:csrfToken};settingsPage.container[0].id.includes("attendance")&&(param.isMyTeamData=!0),ZPeople.Request.sendAsyncPost("/AttendanceShiftAction.zp",param,function(rdata){if("hh:mm a"!==rdata.timeformat?Attendance.timeFormatIs12hr=!1:Attendance.timeFormatIs12hr=!0,param.isMyTeamData?Att_Common_Operations.shifts.teamDepLocShiftList=rdata:Att_Common_Operations.shifts.depLocShiftList=rdata,Att_Common_Operations.filterValues=rdata,void 0==callback)return Att_Common_Operations.filterValues;callback()})}},moreOptionMenu:function(moreOpt){var id=Att_Common_Operations.getFilterDivId()+"MoreOptions";$("#moreoptionmenu").length>0&&$("#moreoptionmenu").remove();var moreOptionIcon={import:"imprt",export:"exprt",download:"downld",print:"print"};isManageAttendanceData||Att_Common_Operations.isEmpShiftMapPage()&&shiftMapping.isAssignShiftPermAvailableForPage()||delete moreOptionIcon.import;var mhtml='<div id="'+id+'" class="zpl_drpdwn zmenu zmenu--iconwithtext"><ul>';$.each(moreOpt,function(indx,value){if(value.type&&value.type in moreOptionIcon){var cssClass=moreOptionIcon[value.type];mhtml+='<li data-action="'+value.callback+'" data-icon-class="PI_'+cssClass+'">',mhtml+='<div class="zmenu__iconcontainer"><i class="zmenu__icon PI_'+cssClass+'"></i></div>'}mhtml+='<span class="zmenu__text">'+value.name+"</span></li>"}),mhtml+="</ul></div>",landingPage.append(mhtml),ZPeopleComponents.menu("#"+id,{forElement:"#"+id+"Btn",contentType:"icon-text"})},initPageComponent:function(){Att_Common_Operations.isAttListViewPage()||(landingPageURL.includes("shift")?Att_Common_Operations.getShiftDepLocShiftList(Att_Common_Operations.callSpecificPage):Att_Common_Operations.getAttendanceDepLocShiftList(Att_Common_Operations.callSpecificPage))},callSpecificPage:function(){var isViewPage=landingPageURL.includes("viewmyrequest");landingPageURL.includes("regularization")?(Att_Common_Operations.setMyRequestPage(),regularization_operation.init(isViewPage)):landingPageURL.includes("onduty")?(Att_Common_Operations.setMyRequestPage(),onduty.init(isViewPage)):landingPageURL.includes("hourlyperm")?(Att_Common_Operations.setMyRequestPage(),permission.init(isViewPage)):landingPageURL.includes("biometricidmapping")?useridmapping.init():landingPageURL.includes("manageshifts")?ShiftConfig.Shift.init():Att_Common_Operations.isSelfReqPage()&&Att_Common_Operations.isEmpShiftMapPage()?SingleUserShiftMapping.init():landingPageURL.includes("employeeshiftmapping")?shiftMapping.init():landingPageURL.includes("shiftchangerequests")?(Att_Common_Operations.setMyRequestPage(),shiftRequest.init(isViewPage)):landingPageURL.includes("autoshiftrequests")?(Att_Common_Operations.setMyRequestPage(),AutoAssignShiftRequest.init(isViewPage)):landingPageURL.includes("punchImportExport")?punchImpExp.init():landingPageURL.includes("mapshiftpattern")&&ShiftPatternApplicability.init()},setMyRequestPage:function(){Att_Common_Operations.myRequestPageId=landingPageId.replace("-viewmyrequest",""),Att_Common_Operations.myRequestPage=landingPage.parent().find("#"+Att_Common_Operations.myRequestPageId),Att_Common_Operations.myRequestPageURL=landingPageURL.includes("/viewmyrequest")?landingPageURL.substring(0,landingPageURL.indexOf("/viewmyrequest")):landingPageURL},getEmpChosenApprErecno:function(modal,id){modal.find("#emptyErrMsg").removeClass("MB10"),modal.find("#emptyErrMsg").html(""),ZPeopleComponents.select(modal.find("#"+id)).setAttributes({className:""});var appErecno=ZPeopleComponents.select(modal.find("#"+id)).getValue();return""===appErecno&&(modal.find("#emptyErrMsg").addClass("MB10"),modal.find("#emptyErrMsg").html(ZPI18N.getString("zp.chooseapprovererrormsg")),ZPeopleComponents.select(modal.find("#"+id)).setAttributes({className:"ztextbox__error"})),appErecno},returnUsersOptions:function(){var options=[];return FormsCommon.getPrimaryLookupValues(3).forEach(function(currUser){var obj={};obj.label=decodeHTML(currUser.Value),obj.value=currUser.Id,options.push(obj)}),options},closeFilterifOpen:function(){Att_Common_Operations.isFilterOpen()&&Att_Common_Operations.changeFilterClass()},changeFilterClass:function(isFromAuditCard){var page=landingPage;isFromAuditCard&&(page=landingPage.find("#auditHistory_cards"));var pageId=settingsPage.container[0].id;if(("attendance-entry-summary"===pageId||pageId.includes("attendance-team-user-summary"))&&page.find(".zpl_attnLstvw").length>0&&(page=page.find(".zpl_attnLstvw")),page.hasClass("zpl_fltr_flt"))page.removeClass("zpl_fltr_flt");else{page.addClass("zpl_fltr_flt");var filterDivId=Att_Common_Operations.getFilterDivId();page.find("#"+filterDivId+"FilterPeriod")[0]&&ZPeopleComponents.select(page.find("#"+filterDivId+"FilterPeriod")).setFocus()}},isFilterOpen:function(isFromAuditCard){var page=landingPage;isFromAuditCard&&(page=landingPage.find("#auditHistory_cards"));var pageId=settingsPage.container[0].id;if(("attendance-entry-summary"===pageId||pageId.includes("attendance-team-user-summary"))&&page.find(".zpl_attnLstvw").length>0&&(page=page.find(".zpl_attnLstvw")),page.hasClass("zpl_fltr_flt"))return!0},getFilterValues:function(filter,param){var page=settingsPage.container,filterId=Att_Common_Operations.getFilterDivId();if(Att_Common_Operations.isSelfReqPage()){var erecArr=[];erecArr.push(AttendanceTeam.getSelfReqPageErecno()),param.erecno=JSON.stringify(erecArr)}else{var locObj=ZPeopleComponents.tokenfield(filter.find("#"+filterId+"FilterLoc")).getSelectedValuesId();locObj&&0!=locObj.length&&(param.locationId=JSON.stringify(locObj));var depObj=ZPeopleComponents.tokenfield(filter.find("#"+filterId+"FilterDep")).getSelectedValuesId();depObj&&0!=depObj.length&&(param.departmentId=JSON.stringify(depObj));var desgnObj=ZPeopleComponents.tokenfield(filter.find("#"+filterId+"FilterDesgn")).getSelectedValuesId();if(desgnObj&&0!=desgnObj.length&&(param.desgId=JSON.stringify(desgnObj)),Attendance.organizationTag.isEnabled()){var orgTagObj=ZPeopleComponents.tokenfield(filter.find("#"+filterId+"FilterOrgTag")).getSelectedValuesId();orgTagObj&&0!=orgTagObj.length&&(param.orgTagId=JSON.stringify(orgTagObj))}if(isOrgStructureEnabled){if(ZPeople.orgStructureTagMap.entity){var entityObj=ZPeopleComponents.tokenfield(filter.find("#"+filterId+"FilterEntity")).getSelectedValuesId();entityObj&&0!=entityObj.length&&(param.entityId=JSON.stringify(entityObj))}if(ZPeople.orgStructureTagMap.unit){var bUnitObj=ZPeopleComponents.tokenfield(filter.find("#"+filterId+"FilterBUnit")).getSelectedValuesId();bUnitObj&&0!=bUnitObj.length&&(param.bUnitId=JSON.stringify(bUnitObj))}if(ZPeople.orgStructureTagMap.division){var divisionObj=ZPeopleComponents.tokenfield(filter.find("#"+filterId+"FilterDivision")).getSelectedValuesId();divisionObj&&0!=divisionObj.length&&(param.divisionId=JSON.stringify(divisionObj))}}var erecnoValues=ZPeopleComponents.tokenfield(filter.find("#"+filterId+"FilterEmployee")).getAllValues();erecnoValues&&0!=erecnoValues.length&&""!=erecnoValues&&(param.erecno=JSON.stringify(Att_Common_Operations.getAllIdsFromValues(erecnoValues))),landingPageURL.includes("operations")&&filter.find("#"+filterId+"FilterShowDirectRepTo")[0].checked&&(param.showDirectRepTo=!0),Att_Common_Operations.getEmpProfDateofExitFilter(filter,param,filterId),!Att_Common_Operations.isSelfReqPage()&&landingPageURL.includes("team")&&(param.isMyTeamData=!0)}var status=ZPeopleComponents.select(page.find("#"+filterId+"TopStatus")).getValue();if("-3"!==status){var selStatus=[];selStatus.push(status),param.statFil=JSON.stringify(selStatus)}Att_Common_Operations.isSelfReqPage()||landingPageURL.includes("operation")||!Att_Common_Operations.isDirectReportees()||(param.showDirectRepTo=!0)},getEmpProfDateofExitFilter:function(filter,param,filId){if(landingPageURL.includes("operations")&&!landingPageURL.includes("operations/attendance/searchuser")&&!landingPageURL.includes("operations/shift/searchuser")){filId=Att_Common_Operations.getFilterDivId();var statObj=ZPeopleComponents.tokenfield(filter.find("#"+filId+"FilterEmpProfile")).getSelectedValuesId();statObj&&0!=statObj.length&&(param.userTypeId=JSON.stringify(statObj)),filter.find("#"+filId+"FilterSelectiveEmp")[0].checked&&(param.incDateOfExit=!0)}},getAllIdsFromValues:function(values){var ids=[];return $.each(values,function(index,obj){ids.push(obj.id)}),ids},handleOnChangeEvent:function(event){var detail=event.detail,element=event.detail.element.attr("id");if("regPeriod"===element||"regStartDate"===element||"regEndDate"===element||-1!=element.indexOf("check-in")||-1!=element.indexOf("check-out")||-1!=element.indexOf("ZPAtt_OD_fromTime")||-1!=element.indexOf("ZPAtt_OD_toTime")||-1!=element.indexOf("permFromTime")||"permDate"===element||-1!=element.indexOf("permToTime")||-1!=element.indexOf("odStartDate")||-1!=element.indexOf("odEndDate")||detail.fromUI)if("regPeriod"===element||"regEmps"===element||"regStartDate"===element||"regEndDate"===element){var value="regPeriod"===element||void 0;regularization_operation.constructDates(value,event.detail&&event.detail.fromUI)}else-1!==element.indexOf("check-in")||-1!==element.indexOf("check-out")?regularization_operation.regFILOChanged(event.detail.element):"odStartDate"===element||"odEndDate"===element||"odEmps"===element?onduty.getAttFiloInfo():-1!==element.indexOf("ZPAtt_OD_fromTime")||-1!==element.indexOf("ZPAtt_OD_toTime")?onduty.odFILOChanged(event.detail.element):-1!==element.indexOf("ZPAtt_OD_dayTaken")?onduty.odOnDuraChanged(event.detail.element):"ZPAtt_OD_AvailUnit"===element?onduty.consODPopup():"permDate"===element||"permTypes"===element||"permFromTime"===element||"permToTime"===element||"permEmps"===element?(permission.hidePermissionError(element),"permEmps"===element&&permission.permissionEmployeeChange(),"permTypes"===element&&(permission.addPermissionReasonMandatory(),permission.addPermissionAttachMentMandatory(),permission.getPermissionBalance()),"permDate"===element&&(permission.permissionDateEmpty(),permission.getPermissionBalance()),"permFromTime"===element&&permission.getPermissionBalance()):"ZPAtt_shiftMarginStarts"!==element&&"ZPAtt_shiftMarginEnds"!==element&&"ZPAtt_newShiftFromTime"!==element&&"ZPAtt_newShiftToTime"!==element||shifts.marginDefinition()},getFilterHtml:function(){var filterDivId=Att_Common_Operations.getFilterDivId(),html='<div class="zpl_fltr"><div><div class="zpl_fltrhd"><h5>'+ZPI18N.getString("zp.filter")+'</h5><i class="PI_cls" onclick="Att_Common_Operations.changeFilterClass();" title="'+ZPI18N.getString("zp.close")+'"></i></div></div>';return html+='<div class="zpl_fltrcnt" id="'+filterDivId+'_filter"><div><div class="zpl_fltclps fltopn"><div class="zpl_fltrlst">',html+='<div class="zpl_secn"><div><label>'+ZPI18N.getString("zp.period")+'</label></div><div><select id="'+filterDivId+'FilterPeriod"></select></div>',Att_Common_Operations.isEmpShiftMapPage()&&(html+='<div class="zpl_secn"><div><label>'+ZPI18N.getString("zp.date")+'</label></div><input id="'+filterDivId+'Date" style="width:257px"/></div>'),Att_Common_Operations.isAttListViewPage()||(html+='<div class="zpl_secn"><div><label>'+ZPI18N.getString("zp.from")+'</label></div><input id="'+filterDivId+'FromDate" style="width:257px"/></div>',html+='<div class="zpl_secn"><div><label>'+ZPI18N.getString("zp.to")+'</label></div><input id="'+filterDivId+'ToDate" style="width:257px"/></div>'),html+="</div>",Att_Common_Operations.isSelfReqPage()||Att_Common_Operations.isAttListViewPage()||(html+='<div class="zpl_secn"><div><label>'+ZPI18N.getString("zp.employee")+'</label></div><div><textarea id="'+filterDivId+'FilterEmployee"  rows="60"></textarea></div></div>',landingPageURL.includes("operations")&&(html+='<div class="zpl_secn"><div class="zcheckbox zcheckbox--horizontal"><input id="'+filterDivId+'FilterShowDirectRepTo" type="checkbox" name="check" value="" class="zcheckbox__helper"><label for="'+filterDivId+'FilterShowDirectRepTo" class="zcheckbox__label">'+ZPI18N.getString("zp.showdirectreportees")+"</label></div></div>"),html+='<div class="zpl_secn"><div><label>'+ZPI18N.getString("zp.department")+'</label></div><div><textarea id="'+filterDivId+'FilterDep" rows="60" ></textarea></div></div>',html+='<div class="zpl_secn"><div><label>'+ZPI18N.getString("zp.designation")+'</label></div><div><textarea id="'+filterDivId+'FilterDesgn" rows="60" ></textarea></div></div>',html+='<div class="zpl_secn"><div><label>'+ZPI18N.getString("zp.location")+'</label></div><div><textarea id="'+filterDivId+'FilterLoc" rows="60" ></textarea></div></div>',landingPageURL.includes("operations")&&!Att_Common_Operations.isEmpShiftMapPage()&&(html+='<div class="zpl_secn"><div><label>'+ZPI18N.getString("zp.useremployeeprofile")+'</label></div><div><textarea id="'+filterDivId+'FilterEmpProfile" rows="60" ></textarea></div>',html+='<div class="zcheckbox"><input id="'+filterDivId+'FilterSelectiveEmp" type="checkbox" name="check" value="" class="zcheckbox__helper" checked><label for="'+filterDivId+'FilterSelectiveEmp" class="zcheckbox__label">'+ZPI18N.getString("zp.exitdatewithinrepdate")+"</label></div></div>")),(Att_Common_Operations.isEmpShiftMapPage()||Att_Common_Operations.isShiftReqPage()||Att_Common_Operations.isAutoShiftReqPage())&&(html+='<div class="zpl_secn"><div><label>'+ZPI18N.getString("zp.shift")+'</label></div><div><textarea id="'+filterDivId+'FilterShift" rows="60" ></textarea></div></div>'),Att_Common_Operations.isRegReqPage()&&(html+='<div class="zpl_secn"><div><label>'+ZPI18N.getString("zp.reason")+'</label></div><div><select id="'+filterDivId+'FilterReason"></select></div></div>'),html+="</div></div></div></div>"},getMoreOptionHtml:function(){var btnId=Att_Common_Operations.getFilterDivId()+"MoreOptionsBtn";return'<i class="zpl_ibg PI_more" tabindex="0" aria-label="'+ZPI18N.getString("zp.more")+'" id="'+btnId+'" onclick="Att_Common_Operations.showMoreOptions();" title="'+ZPI18N.getString("zp.more")+'"></i>'},constructFilterDropdown:function(page){var filterDivId=Att_Common_Operations.getFilterDivId(),appendToEle=page.find("#"+filterDivId+"_filter"),options=[];Att_Common_Operations.isAttListViewPage()?(options.push({label:ZPI18N.getString("zp.weekly"),value:"0"}),options.push({label:ZPI18N.getString("zp.monthly"),value:"1"})):(options.push({label:ZPI18N.getString("zp.today"),value:"4"}),options.push({label:ZPI18N.getString("zp.yesterday"),value:"5"}),options.push({label:ZPI18N.getString("zp.thisweek"),value:"2"}),options.push({label:ZPI18N.getString("zp.lastweek"),value:"3"}),options.push({label:ZPI18N.getString("zp.onlyparticularmonth"),value:"0"}),options.push({label:ZPI18N.getString("zp.lastmonth"),value:"1"}),Att_Common_Operations.isRequestPage()?(options.push({label:ZPI18N.getString("zp.thisyear"),value:"6"}),options.push({label:ZPI18N.getString("zp.lastyear"),value:"7"}),options.push({label:ZPI18N.getString("zp.custom"),value:"8"})):options.push({label:ZPI18N.getString("zp.custom"),value:"6"}));var filterLayout=page.find(".zpl_fltr");if(Att_Common_Operations.isPatternMappingPage()){var patternTypeOptns=[];patternTypeOptns.push({label:ZPI18N.getString("zp.weekly"),value:"1"}),patternTypeOptns.push({label:ZPI18N.getString("zp.monthly"),value:"3"}),patternTypeOptns.push({label:ZPI18N.getString("zp.custom"),value:"4"}),Att_Common_Operations.createTokenFieldComponent(patternTypeOptns,"All Pattern Types",filterLayout.find("#"+filterDivId+"FilterPatternType"),appendToEle),Att_Common_Operations.createTokenFieldComponent(ShiftPatternApplicability.patternNames,"All Patterns",filterLayout.find("#"+filterDivId+"FilterPattern"),appendToEle)}if(0!=filterLayout.find("#"+filterDivId+"FilterPeriod").length&&ZPeopleComponents.select(filterLayout.find("#"+filterDivId+"FilterPeriod"),{removeExistingDropdown:!0}).destroy(),ZPeopleComponents.select(filterLayout.find("#"+filterDivId+"FilterPeriod")).setAttributes({options:options,multiple:!1,dropdownList:{appendTo:appendToEle},placeholder:ZPI18N.getString("zp.select")}),page.find("#"+filterDivId+"_filter").css("position","relative"),Att_Common_Operations.isPatternMappingPage()||Att_Common_Operations.isRequestPage())ZPeopleComponents.select(filterLayout.find("#"+filterDivId+"FilterPeriod")).setValue("0");else if(Attendance.Entry&&Attendance.Entry.selectedView){if(Attendance.Entry.selectedView){var selectedView="month"==Attendance.Entry.selectedView?"1":"0";ZPeopleComponents.select(filterLayout.find("#"+filterDivId+"FilterPeriod")).setValue(selectedView)}}else ZPeopleComponents.select(filterLayout.find("#"+filterDivId+"FilterPeriod")).setValue("0");if(!Att_Common_Operations.isAttListViewPage()){var dateOptions={calendarIcon:!0,calendarIconUIType:"button",showPickerOnFocus:!0,format:dateFmt,picker:!0,datestep:0,spinButtons:"none",clearButton:"none",pickerOptions:{appendTo:"#"+filterDivId+"_filter"},pickerclose:Att_Common_Operations.dateOnChange};ZPeopleComponents.datefield(filterLayout.find("#"+filterDivId+"FromDate")).destroy(),ZPeopleComponents.datefield(filterLayout.find("#"+filterDivId+"FromDate"),dateOptions),ZPeopleComponents.datefield(filterLayout.find("#"+filterDivId+"ToDate")).destroy(),ZPeopleComponents.datefield(filterLayout.find("#"+filterDivId+"ToDate"),dateOptions),0!==filterLayout.find("#"+filterDivId+"Date").length&&(ZPeopleComponents.datefield(filterLayout.find("#"+filterDivId+"Date")).destroy(),ZPeopleComponents.datefield(filterLayout.find("#"+filterDivId+"Date"),dateOptions)),Att_Common_Operations.isRequestPage()&&(ZPeopleComponents.datefield(filterLayout.find("#"+filterDivId+"FromDate")).setValue(Att_Common_Operations.filterValues.currDate.monthStartDate),ZPeopleComponents.datefield(filterLayout.find("#"+filterDivId+"ToDate")).setValue(Att_Common_Operations.filterValues.currDate.monthEndDate)),filterLayout.find("#"+filterDivId+"FilterPeriod").on("zselectchange",Att_Common_Operations.callback)}if(Att_Common_Operations.isPatternMappingPage())return ModuleAdmin.consResetEmpSearch(filterDivId+"FilterEmployee",filterLayout,!0),void ZPeopleComponents.tokenfield("#"+filterDivId+"FilterEmployee").setAttribute("dropdownList",{appendTo:"#"+filterDivId+"_filter"});if(!Att_Common_Operations.isSelfReqPage()&&!Att_Common_Operations.isAttListViewPage()&&!Att_Common_Operations.isPatternMappingPage()){if("entry"!==filterDivId&&(ModuleAdmin.consResetEmpSearch(filterDivId+"FilterEmployee",filterLayout,!0),ZPeopleComponents.tokenfield("#"+filterDivId+"FilterEmployee").setAttribute("dropdownList",{appendTo:"#"+filterDivId+"_filter"})),"entry"===filterDivId)return filterLayout.find("#s2id_"+filterDivId+"FilterEmployee")[0]||ModuleAdmin.consResetEmpSearch(filterDivId+"FilterEmployee",filterLayout,!0),void ZPeopleComponents.select("#"+filterDivId+"FilterEmployee").setAttribute("dropdownList",{appendTo:"#"+filterDivId+"_filter",fitForElement:!0,closeOnScroll:!1});filterLayout.find("#"+filterDivId+"FilterDep").closest(".zpl_secn").hide();var deptArr=[],depList=Att_Common_Operations.filterValues.depList;Object.keys(Att_Common_Operations.filterValues.depList).length>0&&filterLayout.find("#"+filterDivId+"FilterDep").closest(".zpl_secn").show(),$.each(depList,function(key,value){deptArr.push({value:key,label:decodeHTML(value)})}),Att_Common_Operations.createTokenFieldComponent(deptArr,ZPI18N.getString("zp.alldepartment"),filterLayout.find("#"+filterDivId+"FilterDep"),appendToEle),filterLayout.find("#"+filterDivId+"FilterDesgn").closest(".zpl_secn").hide();var desgArr=[],desgList=Att_Common_Operations.filterValues.desgList;Object.keys(Att_Common_Operations.filterValues.desgList).length>0&&filterLayout.find("#"+filterDivId+"FilterDesgn").closest(".zpl_secn").show(),$.each(desgList,function(key,value){desgArr.push({value:key,label:decodeHTML(value)})}),Att_Common_Operations.createTokenFieldComponent(desgArr,ZPI18N.getString("zp.alldesignation"),filterLayout.find("#"+filterDivId+"FilterDesgn"),appendToEle),filterLayout.find("#"+filterDivId+"FilterLoc").closest(".zpl_secn").hide();var locArr=[],locList=Att_Common_Operations.filterValues.locList;if(Object.keys(Att_Common_Operations.filterValues.locList).length>0&&filterLayout.find("#"+filterDivId+"FilterLoc").closest(".zpl_secn").show(),$.each(locList,function(key,value){locArr.push({value:key,label:decodeHTML(value)})}),Att_Common_Operations.createTokenFieldComponent(locArr,ZPI18N.getString("zp.alllocaction"),filterLayout.find("#"+filterDivId+"FilterLoc"),appendToEle),Attendance.organizationTag.isEnabled()){var orgTagList=Att_Common_Operations.filterValues.orgTagList,html='<div class="zpl_secn"><div><label>'+ZPeople.orgTagDisplayName+"</label></div><div><textarea id="+filterDivId+'FilterOrgTag rows="60" ></textarea></div></div>';filterLayout.find("#"+filterDivId+"FilterLoc").closest(".zpl_secn").after(html),filterLayout.find("#"+filterDivId+"FilterOrgTag").closest(".zpl_secn").hide();var orgTagArr=[];Object.keys(Att_Common_Operations.filterValues.orgTagList).length>0&&filterLayout.find("#"+filterDivId+"FilterOrgTag").closest(".zpl_secn").show(),$.each(orgTagList,function(key,value){orgTagArr.push({value:key,label:decodeHTML(value)})}),Att_Common_Operations.createTokenFieldComponent(orgTagArr,ZPI18N.getString("zp.all"),filterLayout.find("#"+filterDivId+"FilterOrgTag"),appendToEle)}var entityList=Att_Common_Operations.filterValues.entityList,bUnitList=Att_Common_Operations.filterValues.bUnitList,divisionList=Att_Common_Operations.filterValues.divisionList;if(isOrgStructureEnabled){if(ZPeople.orgStructureTagMap.entity){html='<div class="zpl_secn"><div><label>'+(ZPeople.orgStructureDispNameMap&&ZPeople.orgStructureDispNameMap.entity?ZPeople.orgStructureDispNameMap.entity:ZPI18N.getString("zp.legalentityname"))+"</label></div><div><textarea id="+filterDivId+'FilterEntity rows="60" ></textarea></div></div>';filterLayout.find("#"+filterDivId+"FilterDep").closest(".zpl_secn").before(html);var entityOpt=[];for(var entityId in entityList)-1===(entityId+"").indexOf("_notEnc")&&entityOpt.push({label:decodeHTML(entityList[entityId]),value:entityId});Att_Common_Operations.createTokenFieldComponent(entityOpt,ZPI18N.getString("zp.all"),filterLayout.find("#"+filterDivId+"FilterEntity"),appendToEle)}if(ZPeople.orgStructureTagMap.unit){html='<div class="zpl_secn"><div><label>'+(ZPeople.orgStructureDispNameMap&&ZPeople.orgStructureDispNameMap.unit?ZPeople.orgStructureDispNameMap.unit:ZPI18N.getString("zp.addbusinessunit"))+"</label></div><div><textarea id="+filterDivId+'FilterBUnit rows="60" ></textarea></div></div>';filterLayout.find("#"+filterDivId+"FilterDep").closest(".zpl_secn").before(html);var unitOpt=[];for(var bUnitId in bUnitList)-1===(bUnitId+"").indexOf("_notEnc")&&unitOpt.push({label:decodeHTML(bUnitList[bUnitId]),value:bUnitId});Att_Common_Operations.createTokenFieldComponent(unitOpt,ZPI18N.getString("zp.all"),filterLayout.find("#"+filterDivId+"FilterBUnit"),appendToEle)}if(ZPeople.orgStructureTagMap.division){html='<div class="zpl_secn"><div><label>'+(ZPeople.orgStructureDispNameMap&&ZPeople.orgStructureDispNameMap.division?ZPeople.orgStructureDispNameMap.division:ZPI18N.getString("zp.divisionname"))+"</label></div><div><textarea id="+filterDivId+'FilterDivision rows="60" ></textarea></div></div>';filterLayout.find("#"+filterDivId+"FilterDep").closest(".zpl_secn").before(html);var divOpt=[];for(var divisionId in divisionList)-1===(divisionId+"").indexOf("_notEnc")&&divOpt.push({label:decodeHTML(divisionList[divisionId]),value:divisionId});Att_Common_Operations.createTokenFieldComponent(divOpt,ZPI18N.getString("zp.all"),filterLayout.find("#"+filterDivId+"FilterDivision"),appendToEle)}}landingPageURL.includes("operations")&&!Att_Common_Operations.isEmpShiftMapPage()&&($("#"+filterDivId+"FilterEmpProfile").on("ztokenfieldtokenremove",function(){Att_Common_Operations.checkUnCheckSelEmp()}),$("#"+filterDivId+"FilterEmpProfile").on("ztokenfieldtokenadd",function(){Att_Common_Operations.checkUnCheckSelEmp()}),Att_Common_Operations.setValuesForEmpProfiles(filterLayout.find("#"+filterDivId+"FilterEmpProfile"),appendToEle))}if(Att_Common_Operations.isEmpShiftMapPage()||Att_Common_Operations.isShiftReqPage()||Att_Common_Operations.isAutoShiftReqPage()){var shiftOption=[];for(var d_r_shiftId in Att_Common_Operations.filterValues.shiftlist)-1!==Att_Common_Operations.filterValues.shiftlist[d_r_shiftId].select&&shiftOption.push({label:decodeHTML(Att_Common_Operations.filterValues.shiftlist[d_r_shiftId].shiftName),value:d_r_shiftId});Att_Common_Operations.createTokenFieldComponent(shiftOption,ZPI18N.getString("zp.allshift"),filterLayout.find("#"+filterDivId+"FilterShift"),appendToEle)}if(Att_Common_Operations.isRegReqPage()&&(filterLayout.find("#"+filterDivId+"FilterReason").closest(".zpl_secn").hide(),regularization_operation.isRegReasonsEnabled())){filterLayout.find("#"+filterDivId+"FilterReason").closest(".zpl_secn").show();var regReasonsArr=[];regReasonsArr.push({value:"-3",label:ZPI18N.getString("zp.all")}),$.each(ZPeople.Module.MODULE_DATA.attendance.regReasons,function(index,data){regReasonsArr.push({value:index,label:data})}),0!=filterLayout.find("#"+filterDivId+"FilterReason").length&&ZPeopleComponents.select(filterLayout.find("#"+filterDivId+"FilterReason"),{removeExistingDropdown:!0}).destroy(),ZPeopleComponents.select(filterLayout.find("#"+filterDivId+"FilterReason")).setAttributes({options:regReasonsArr,multiple:!1,dropdownList:{appendTo:appendToEle}}),ZPeopleComponents.select(filterLayout.find("#"+filterDivId+"FilterReason")).setValue("-3")}},createTokenFieldComponent:function(data,placeholder,eleId,appendToId,dropdownListWidth,width,onchange){ZPeopleComponents.tokenfield(eleId,{removeExistingDropdown:!0}).destroy();var options={data:data,contentType:"text",dataMapping:{value:"value",text:"label",id:"value",informativeText:"label",titleText:"label"},allowDuplicateValues:!1,sort:!1,placeholder:void 0!=placeholder?placeholder:"",dropdownList:{itemType:"checkbox",appendTo:appendToId,fitForElement:!0}};dropdownListWidth&&(options.dropdownList.width=dropdownListWidth),width&&(options.width=width),onchange&&(options.change=Att_Common_Operations.initComponents),ZPeopleComponents.tokenfield(eleId).setAttributes(options)},getTotalHoursBasedOnShift:function(shiftAllowedTimings,regFromTime,regToTime){var isFromCurDay=!0,isToCurDay=!0;regFromTime<shiftAllowedTimings.shiftAllowedFromTime&&(isFromCurDay=!1),(regToTime<shiftAllowedTimings.shiftAllowedFromTime||isFromCurDay&&regFromTime>regToTime)&&(isToCurDay=!1);var totalHours=isFromCurDay&&!isToCurDay?1440-regFromTime+regToTime:regToTime-regFromTime;return totalHours<0?0:totalHours},getMyRequestDateFilter:function(param,filter,isFromExp){var filterDivId=Att_Common_Operations.getFilterDivId(),sDate=ZPeopleComponents.datefield(filter.find("#"+filterDivId+"FromDate")).getValue().dateString,eDate=ZPeopleComponents.datefield(filter.find("#"+filterDivId+"ToDate")).getValue().dateString,period=ZPeopleComponents.select(filter.find("#"+filterDivId+"FilterPeriod")).getValue();if("2"===period&&(""===sDate||""===eDate))return ModuleComp.Msg.showFailureMsg(ZPI18N.getString("zp.enterfromtodate")),void(param.error=!0);if(""===period){var dateOptions={calendarIcon:!0,calendarIconUIType:"button",showPickerOnFocus:!0,format:dateFmt,picker:!0,datestep:0,spinButtons:"none",clearButton:"none",pickerOptions:{appendTo:"#"+filterDivId+"_filter"}};if(ZPeopleComponents.datefield(filter.find("#"+filterDivId+"FromDate")).destroy(),ZPeopleComponents.datefield(filter.find("#"+filterDivId+"FromDate"),dateOptions),ZPeopleComponents.datefield(filter.find("#"+filterDivId+"ToDate")).destroy(),ZPeopleComponents.datefield(filter.find("#"+filterDivId+"ToDate"),dateOptions),isFromExp)return param;ZPeopleComponents.select(filter.find("#"+filterDivId+"FilterPeriod")).setValue("0"),ZPeopleComponents.datefield(filter.find("#"+filterDivId+"FromDate")).setValue(Att_Common_Operations.filterValues.currDate.monthStartDate),ZPeopleComponents.datefield(filter.find("#"+filterDivId+"ToDate")).setValue(Att_Common_Operations.filterValues.currDate.monthEndDate),sDate=ZPeopleComponents.datefield(filter.find("#"+filterDivId+"FromDate")).getValue().dateString,eDate=ZPeopleComponents.datefield(filter.find("#"+filterDivId+"ToDate")).getValue().dateString}var fromDate=new Date(moment(sDate,dateFmt.toUpperCase())._d),toDate=new Date(moment(eDate,dateFmt.toUpperCase())._d);if(fromDate.getTime()>toDate.getTime())return ModuleComp.Msg.showFailureMsg(ZPI18N.getString("zp.greaterfromdate")),param.error=!0,!1;var nextYearDate=new Date(fromDate.getFullYear()+1,fromDate.getMonth(),fromDate.getDate()-1);return toDate.getTime()>nextYearDate?(ModuleComp.Msg.showFailureMsg(ZPI18N.getString("zp.datewithinoneyear")),param.error=!0,!1):isFromExp?(param+="&sDate="+sDate,param+="&eDate="+eDate):(sDate&&""!==sDate&&(param.sDate=sDate),void(eDate&&""!==eDate&&(param.eDate=eDate)))},setUpMonthlyNavCalendar:function(event,ele){Calendar.setUpCalendar(event,$(ele).parent().parent().find('[elem="dateNavigator"]'),2,void 0,Att_Common_Operations.navigateBasedOnCal)},navigateBasedOnCal:function(undefined,undefined,data){var fromDate,toDate,filterDivId=Att_Common_Operations.getFilterDivId();ZPeopleComponents.select(landingPage.find("#"+filterDivId+"FilterPeriod")).setValue("6"),data.weekselection?(fromDate=CalendarView.formatDate(data.fromDate),toDate=CalendarView.formatDate(data.toDate)):data.isCustom?(fromDate=data.fromDate,toDate=data.toDate):data.selectedDay?fromDate=CalendarView.formatDate(new Date(new Date(data.selectedYear,data.selectedMonth).setDate(data.selectedDay))):(fromDate=CalendarView.formatDate(new Date(data.selectedYear,data.selectedMonth)),toDate=CalendarView.formatDate(new Date(new Date(data.selectedYear,data.selectedMonth+1)-1))),ZPeopleComponents.datefield(landingPage.find("#"+filterDivId+"FromDate")).setValue(fromDate),ZPeopleComponents.datefield(landingPage.find("#"+filterDivId+"ToDate")).setValue(toDate),Att_Common_Operations.isODReqPage()?onduty.getRequest():Att_Common_Operations.isRegReqPage()?regularization_operation.getData():Att_Common_Operations.isPermReqPage()?permission.getRequest():Att_Common_Operations.isShiftReqPage()?shiftRequest.getShiftMapRequest():Att_Common_Operations.isAutoShiftReqPage()&&AutoAssignShiftRequest.getShiftMapRequest()},getFilterDivId:function(){if(Att_Common_Operations.isMySpaceMyShiftPage())return"mySpaceShift";if(Att_Common_Operations.isMySpaceActionListPage())return"actionListShift";if(Att_Common_Operations.isUserSpaceShiftPage())return"userSpaceShift";var suffix="";landingPageURL.includes("entry")||!landingPageURL.includes("operations")&&(landingPageURL.includes("attendance/shiftchangerequests/viewmyrequest")||landingPageURL.includes("attendance/hourlyperm/viewmyrequest")||landingPageURL.includes("attendance/onduty/viewmyrequest")||landingPageURL.includes("attendance/regularization/viewmyrequest"))?suffix="Entry":landingPageURL.includes("team/user")?suffix="TeamUser":landingPageURL.includes("team")?suffix="Team":landingPageURL.includes("operations/attendance/searchuser")?suffix="AttOprUser":landingPageURL.includes("operations/shift/searchuser")?suffix="ShiftOprUser":landingPageURL.includes("operations/shift")&&(suffix="ShiftOpr");var filterDivId="reg";return landingPageURL.includes("onduty")?filterDivId="od":landingPageURL.includes("hourlyperm")?filterDivId="perm":landingPageURL.includes("employeeshiftmapping")?filterDivId="shiftList":landingPageURL.includes("shiftchangerequests")?filterDivId="shiftReq":landingPageURL.includes("punchImportExport")?filterDivId="entry":landingPageURL.includes("biometricidmapping")?filterDivId="useridMapping":Att_Common_Operations.summaryPageRegex.test(landingPageURL)?filterDivId="attendanceSummary":landingPageURL.includes("operations/shift/mapshiftpattern")?filterDivId="shiftPatterns":landingPageURL.includes("operations/shift/autoshiftrequests")&&(filterDivId="autoAssign"),filterDivId+suffix},resetFilterOptions:function(){var filterLayout=landingPage.find(".zpl_fltr"),filterDivId=Att_Common_Operations.getFilterDivId();if(Att_Common_Operations.isRegReqPage()&&regularization_operation.isRegReasonsEnabled()&&ZPeopleComponents.select(filterLayout.find("#"+filterDivId+"FilterReason")).setValue("-3"),ZPeopleComponents.select(filterLayout.find("#"+filterDivId+"FilterPeriod")).setValue("0"),Att_Common_Operations.isEmpShiftMapPage()||Att_Common_Operations.isShiftReqPage()||Att_Common_Operations.isAutoShiftReqPage()){if(ZPeopleComponents.datefield(filterLayout.find("#"+filterDivId+"FromDate")).setValue(Att_Common_Operations.filterValues.currDate.monthStartDate),ZPeopleComponents.datefield(filterLayout.find("#"+filterDivId+"ToDate")).setValue(Att_Common_Operations.filterValues.currDate.monthEndDate),Att_Common_Operations.isEmpShiftMapPage()&&shiftMapping.isHoursView)ZPeopleComponents.select(filterLayout.find("#"+filterDivId+"FilterPeriod")).setValue("4"),ZPeopleComponents.datefield(filterLayout.find("#"+filterDivId+"Date")).setValue(Att_Common_Operations.filterValues.currDate.todayDate);else if(Att_Common_Operations.isEmpShiftMapPage()&&shiftMapping.isCalView){ZPeopleComponents.select(filterLayout.find("#"+filterDivId+"FilterPeriod")).setValue("2");var toDay=moment(Att_Common_Operations.filterValues.currDate.todayDate,dateFmt.toUpperCase()),weekStartDate=moment(toDay).startOf("week").add(weekstarts,"day");toDay._d.getTime()<weekStartDate._d.getTime()&&(weekStartDate=weekStartDate.add(-1,"week"));var weekEndDate=moment(toDay).startOf("week").add(weekstarts,"day");toDay._d.getTime()<weekEndDate._d.getTime()&&(weekEndDate=weekEndDate.add(-1,"week")),weekEndDate=weekEndDate.add(6,"day"),ZPeopleComponents.datefield(filterLayout.find("#"+filterDivId+"FromDate")).setValue(weekStartDate.format(dateFmt.toUpperCase())),ZPeopleComponents.datefield(filterLayout.find("#"+filterDivId+"ToDate")).setValue(weekEndDate.format(dateFmt.toUpperCase()))}}else ZPeopleComponents.datefield(filterLayout.find("#"+filterDivId+"FromDate")).setValue(Att_Common_Operations.currMonthSDate),ZPeopleComponents.datefield(filterLayout.find("#"+filterDivId+"ToDate")).setValue(Att_Common_Operations.currMonthEDate);ZPeopleComponents.datefield(filterLayout.find("#"+filterDivId+"FromDate")).setAttributes({disabled:!0}),ZPeopleComponents.datefield(filterLayout.find("#"+filterDivId+"ToDate")).setAttributes({disabled:!0}),Att_Common_Operations.isEmpShiftMapPage()&&shiftMapping.isHoursView&&ZPeopleComponents.datefield(filterLayout.find("#"+filterDivId+"Date")).setAttributes({disabled:!0}),Att_Common_Operations.isSelfReqPage()||(isOrgStructureEnabled&&(ZPeople.orgStructureTagMap.entity&&ZPeopleComponents.tokenfield(filterLayout.find("#"+filterDivId+"FilterEntity")).removeAllTokens(),ZPeople.orgStructureTagMap.unit&&ZPeopleComponents.tokenfield(filterLayout.find("#"+filterDivId+"FilterBUnit")).removeAllTokens(),ZPeople.orgStructureTagMap.division&&ZPeopleComponents.tokenfield(filterLayout.find("#"+filterDivId+"FilterDivision")).removeAllTokens()),Attendance.organizationTag.isEnabled()&&ZPeopleComponents.tokenfield(filterLayout.find("#"+filterDivId+"FilterOrgTag")).removeAllTokens(),ZPeopleComponents.tokenfield(filterLayout.find("#"+filterDivId+"FilterDep")).removeAllTokens(),ZPeopleComponents.tokenfield(filterLayout.find("#"+filterDivId+"FilterDesgn")).removeAllTokens(),ZPeopleComponents.tokenfield(filterLayout.find("#"+filterDivId+"FilterLoc")).removeAllTokens(),"entry"===filterDivId?ZPeopleComponents.select(filterLayout.find("#"+filterDivId+"FilterEmployee")).deselectAllOptions():ZPeopleComponents.tokenfield(filterLayout.find("#"+filterDivId+"FilterEmployee")).removeAllTokens(),landingPageURL.includes("operations")&&(filterLayout.find("#"+filterDivId+"FilterShowDirectRepTo")[0].checked=!1)),(Att_Common_Operations.isEmpShiftMapPage()||Att_Common_Operations.isShiftReqPage()||Att_Common_Operations.isAutoShiftReqPage())&&ZPeopleComponents.tokenfield(filterLayout.find("#"+filterDivId+"FilterShift")).removeAllTokens(),!landingPageURL.includes("operations")||Att_Common_Operations.isEmpShiftMapPage()||Att_Common_Operations.isSelfReqPage()||(ZPeopleComponents.tokenfield(filterLayout.find("#"+filterDivId+"FilterEmpProfile")).removeAllTokens(),Att_Common_Operations.setValuesForEmpProfiles(filterLayout.find("#"+filterDivId+"FilterEmpProfile"),landingPage.find("#"+filterDivId+"_filter")),filterLayout.find("#"+filterDivId+"FilterSelectiveEmp").parent().show())},checkUnCheckSelEmp:function(){var filterLayout=landingPage.find(".zpl_fltr"),filterDivId=Att_Common_Operations.getFilterDivId(),isExEmp=ZPeopleComponents.tokenfield(filterLayout.find("#"+filterDivId+"FilterEmpProfile")).getSelectedValuesId().includes("18");filterLayout.find("#"+filterDivId+"FilterSelectiveEmp").parent().hide(),isExEmp&&!filterLayout.find("#"+filterDivId+"FilterSelectiveEmp").parent().is(":visible")&&filterLayout.find("#"+filterDivId+"FilterSelectiveEmp").parent().show()},setValuesForEmpProfiles:function(empProfId,appendTo){var empStatusArr=[];empStatusArr.push({label:ZPI18N.getString("zp.activeusers"),value:"19"}),empStatusArr.push({label:ZPI18N.getString("zp.activeprofiles"),value:"-2"}),empStatusArr.push({label:ZPI18N.getString("zp.exemployees"),value:"18"}),empStatusArr.push({label:ZPI18N.getString("zp.logindisabledemp"),value:"17"}),ZPeopleComponents.tokenfield(empProfId).destroy();var values=[];values.push({label:ZPI18N.getString("zp.activeusers"),value:"19"}),values.push({label:ZPI18N.getString("zp.activeprofiles"),value:"-2"}),values.push({label:ZPI18N.getString("zp.exemployees"),value:"18"});var options={data:empStatusArr,values:values,contentType:"text",dataMapping:{value:"value",text:"label",id:"value",informativeText:"label",titleText:"label"},allowDuplicateValues:!1,sort:!1,dropdownList:{itemType:"checkbox",appendTo:appendTo,fitForElement:!0}};ZPeopleComponents.tokenfield(empProfId,options)},setDatePeriodVal:function(filter,resultData){var filterDivId=Att_Common_Operations.getFilterDivId(),curMonth=Att_Common_Operations.filterValues.currDate.thisMonth.split("-")[0]+Att_Common_Operations.filterValues.currDate.thisMonth.split("-")[1].trim(),fromElement=filter.find("#"+filterDivId+"FromDate"),toElement=filter.find("#"+filterDivId+"ToDate");if(ZPeopleComponents.datefield(fromElement).setValue(resultData.fDate),ZPeopleComponents.datefield(fromElement).setAttributes({disabled:!0}),ZPeopleComponents.datefield(toElement).setValue(resultData.tDate),ZPeopleComponents.datefield(toElement).setAttributes({disabled:!0}),resultData.fDate==Att_Common_Operations.filterValues.currDate.monthStartDate&&resultData.tDate==Att_Common_Operations.filterValues.currDate.monthEndDate)ZPeopleComponents.select(filter.find("#"+filterDivId+"FilterPeriod")).setValue("0");else if(resultData.fDate==Att_Common_Operations.filterValues.currDate.prevMonthStart&&resultData.tDate==Att_Common_Operations.filterValues.currDate.prevMonthEnd)ZPeopleComponents.select(filter.find("#"+filterDivId+"FilterPeriod")).setValue("1");else if(resultData.fDate==Att_Common_Operations.filterValues.currDate.todayDate&&resultData.tDate==Att_Common_Operations.filterValues.currDate.todayDate)ZPeopleComponents.select(filter.find("#"+filterDivId+"FilterPeriod")).setValue("4");else if(resultData.fDate==Att_Common_Operations.filterValues.currDate.prevDay&&resultData.tDate==Att_Common_Operations.filterValues.currDate.prevDay)ZPeopleComponents.select(filter.find("#"+filterDivId+"FilterPeriod")).setValue("5");else if(resultData.fDate==Att_Common_Operations.filterValues.currDate.curYearStart&&resultData.tDate==Att_Common_Operations.filterValues.currDate.curYearEnd)ZPeopleComponents.select(filter.find("#"+filterDivId+"FilterPeriod")).setValue("6");else if(resultData.fDate==Att_Common_Operations.filterValues.currDate.prevYearStart&&resultData.tDate==Att_Common_Operations.filterValues.currDate.prevYearEnd)ZPeopleComponents.select(filter.find("#"+filterDivId+"FilterPeriod")).setValue("7");else{var toDay=moment(Att_Common_Operations.filterValues.currDate.todayDate,dateFmt.toUpperCase()),weekStartDate=moment(toDay).startOf("week").add(weekstarts,"day"),prevWeekStartDate=moment(weekStartDate).add(-1,"week").format(dateFmt.toUpperCase());weekStartDate=moment(weekStartDate).format(dateFmt.toUpperCase());var weekEndDate=moment(toDay).startOf("week").add(weekstarts,"day");weekEndDate=weekEndDate.add(6,"day");var prevWeekEndDate=moment(weekEndDate).add(-1,"week").format(dateFmt.toUpperCase());weekEndDate=moment(weekEndDate).format(dateFmt.toUpperCase()),resultData.fDate==weekStartDate&&resultData.tDate==weekEndDate?ZPeopleComponents.select(filter.find("#"+filterDivId+"FilterPeriod")).setValue("2"):resultData.fDate==prevWeekStartDate&&resultData.tDate==prevWeekEndDate?ZPeopleComponents.select(filter.find("#"+filterDivId+"FilterPeriod")).setValue("3"):(ZPeopleComponents.select(filter.find("#"+filterDivId+"FilterPeriod")).setValue("8"),ZPeopleComponents.datefield(fromElement).setAttributes({disabled:!1}),ZPeopleComponents.datefield(toElement).setAttributes({disabled:!1}))}resultData.dispMonth==curMonth&&Att_Common_Operations.myRequestPage.find(".zpl_fltrvwlst").find("#"+filterDivId+"FilterPeriodTopVal").closest("li").remove()},onPeriodChange:function(filter){var filterDivId=Att_Common_Operations.getFilterDivId(),fromElement=filter.find("#"+filterDivId+"FromDate"),toElement=filter.find("#"+filterDivId+"ToDate"),currMonthSDate=Att_Common_Operations.filterValues.currDate.monthStartDate,currMonthEDate=Att_Common_Operations.filterValues.currDate.monthEndDate;ZPeopleComponents.datefield(fromElement).setAttributes({disabled:!0}),ZPeopleComponents.datefield(toElement).setAttributes({disabled:!0});var toDay=moment(Att_Common_Operations.filterValues.currDate.todayDate,dateFmt.toUpperCase()),weekStartDate=moment(toDay).startOf("week").add(weekstarts,"day");toDay._d.getTime()<weekStartDate._d.getTime()&&(weekStartDate=weekStartDate.add(-1,"week"));var weekEndDate=moment(toDay).startOf("week").add(weekstarts,"day");toDay._d.getTime()<weekEndDate._d.getTime()&&(weekEndDate=weekEndDate.add(-1,"week")),weekEndDate=weekEndDate.add(6,"day");var pValue=ZPeopleComponents.select(filter.find("#"+filterDivId+"FilterPeriod")).getValue();""!==pValue&&("1"===pValue?(currMonthSDate=Att_Common_Operations.filterValues.currDate.prevMonthStart,currMonthEDate=Att_Common_Operations.filterValues.currDate.prevMonthEnd):"2"===pValue?(currMonthSDate=weekStartDate.format(dateFmt.toUpperCase()),currMonthEDate=weekEndDate.format(dateFmt.toUpperCase())):"3"===pValue?(currMonthSDate=moment(weekStartDate).add(-1,"week").format(dateFmt.toUpperCase()),currMonthEDate=moment(weekEndDate).add(-1,"week").format(dateFmt.toUpperCase())):"4"===pValue?(currMonthSDate=Att_Common_Operations.filterValues.currDate.todayDate,currMonthEDate=Att_Common_Operations.filterValues.currDate.todayDate):"5"===pValue?(currMonthSDate=Att_Common_Operations.filterValues.currDate.prevDay,currMonthEDate=Att_Common_Operations.filterValues.currDate.prevDay):"6"===pValue?Att_Common_Operations.isRequestPage()?(currMonthSDate=Att_Common_Operations.filterValues.currDate.curYearStart,currMonthEDate=Att_Common_Operations.filterValues.currDate.curYearEnd):(ZPeopleComponents.datefield(fromElement).setAttributes({disabled:!1}),ZPeopleComponents.datefield(toElement).setAttributes({disabled:!1})):Att_Common_Operations.isRequestPage()&&("7"===pValue?(currMonthSDate=Att_Common_Operations.filterValues.currDate.prevYearStart,currMonthEDate=Att_Common_Operations.filterValues.currDate.prevYearEnd):"8"===pValue&&(ZPeopleComponents.datefield(fromElement).setAttributes({disabled:!1}),ZPeopleComponents.datefield(toElement).setAttributes({disabled:!1}))),(Att_Common_Operations.isRequestPage()&&"8"!==pValue||!Att_Common_Operations.isRequestPage()&&"6"!==pValue)&&(ZPeopleComponents.datefield(fromElement).setValue(currMonthSDate),ZPeopleComponents.datefield(toElement).setValue(currMonthEDate)))},onShiftChangePeriod:function(filter){var filterDivId=Att_Common_Operations.getFilterDivId(),fromElement=filter.find("#"+filterDivId+"FromDate"),toElement=filter.find("#"+filterDivId+"ToDate");-1!=Layout.Page.hash.indexOf("employeeshiftmapping")&&shiftMapping.isHoursView&&(fromElement=filter.find("#"+filterDivId+"Date"));var currMonthSDate=Att_Common_Operations.filterValues.currDate.monthStartDate,currMonthEDate=Att_Common_Operations.filterValues.currDate.monthEndDate;ZPeopleComponents.datefield(fromElement).setAttributes({disabled:!0}),ZPeopleComponents.datefield(toElement).setAttributes({disabled:!0});var toDay=moment(Att_Common_Operations.filterValues.currDate.todayDate,dateFmt.toUpperCase()),weekStartDate=moment(toDay).startOf("week").add(weekstarts,"day");toDay._d.getTime()<weekStartDate._d.getTime()&&(weekStartDate=weekStartDate.add(-1,"week"));var weekEndDate=moment(toDay).startOf("week").add(weekstarts,"day");toDay._d.getTime()<weekEndDate._d.getTime()&&(weekEndDate=weekEndDate.add(-1,"week")),weekEndDate=weekEndDate.add(6,"day");var pValue=ZPeopleComponents.select(filter.find("#"+filterDivId+"FilterPeriod")).getValue();""!==pValue&&("1"===pValue?(currMonthSDate=Att_Common_Operations.filterValues.currDate.prevMonthStart,currMonthEDate=Att_Common_Operations.filterValues.currDate.prevMonthEnd):"2"===pValue?(currMonthSDate=weekStartDate.format(dateFmt.toUpperCase()),currMonthEDate=weekEndDate.format(dateFmt.toUpperCase())):"3"===pValue?(currMonthSDate=moment(weekStartDate).add(-1,"week").format(dateFmt.toUpperCase()),currMonthEDate=moment(weekEndDate).add(-1,"week").format(dateFmt.toUpperCase())):"4"===pValue?(currMonthSDate=Att_Common_Operations.filterValues.currDate.todayDate,currMonthEDate=Att_Common_Operations.filterValues.currDate.todayDate):"5"===pValue?(currMonthSDate=Att_Common_Operations.filterValues.currDate.prevDay,currMonthEDate=Att_Common_Operations.filterValues.currDate.prevDay):"6"===pValue&&(ZPeopleComponents.datefield(fromElement).setAttributes({disabled:!1}),ZPeopleComponents.datefield(toElement).setAttributes({disabled:!1})),"6"!==pValue&&(ZPeopleComponents.datefield(fromElement).setValue(currMonthSDate),ZPeopleComponents.datefield(toElement).setValue(currMonthEDate)))},dateOnChange:function(event){(Att_Common_Operations.isEmpShiftMapPage()||Att_Common_Operations.isPatternMappingPage())&&landingPage.find("#"+Att_Common_Operations.getFilterDivId()+"FilterPeriod").attr("type","custom")},callback:function(event){if(event.detail.fromUI&&(Att_Common_Operations.isEmpShiftMapPage()||Att_Common_Operations.isPatternMappingPage()?Att_Common_Operations.onShiftChangePeriod(event.detail.element.parents(".zpl_fltr")):landingPageURL.includes("punchImportExport")?Att_Common_Operations.onEntryPeriodChange():Att_Common_Operations.onPeriodChange(event.detail.element.parents(".zpl_fltr"))),Att_Common_Operations.isEmpShiftMapPage()||Att_Common_Operations.isPatternMappingPage()){var filPeriod=landingPage.find("#"+Att_Common_Operations.getFilterDivId()+"FilterPeriod"),pValue=ZPeopleComponents.select(filPeriod).getValue();"0"===pValue||"1"===pValue?filPeriod.attr("type","monthly"):"2"===pValue||"3"===pValue?filPeriod.attr("type","weekly"):"4"===pValue||"5"===pValue?filPeriod.attr("type","daily"):event.detail.fromUI||Att_Common_Operations.isPatternMappingPage()||Att_Common_Operations.onShiftChangePeriod(event.detail.element.parents(".zpl_fltr"))}},onEntryPeriodChange:function(){var filter=landingPage.find(".zpl_fltr"),fromElement=filter.find("#entryFromDate"),toElement=filter.find("#entryToDate");fromElement.closest(".zpl_secn").hide(),toElement.closest(".zpl_secn").hide(),"6"===ZPeopleComponents.select(filter.find("#entryFilterPeriod")).getValue()&&(fromElement.closest(".zpl_secn").show(),toElement.closest(".zpl_secn").show())},changeCheckBox:function(obj,val){var page=landingPage;$(obj).prop("id");"removeAll"===val?(page.find("thead input[type=checkbox]:enabled").prop("checked",!1),page.find("tbody input[type=checkbox]:enabled").prop("checked",!1)):"all"===val?$(obj).is(":checked")?page.find("tbody input[type=checkbox]:enabled").prop("checked",!0):page.find("tbody input[type=checkbox]:enabled").prop("checked",!1):page.find("tbody input[type=checkbox]:checked:enabled").length===page.find("tbody input[type=checkbox]:enabled").length?page.find("thead input[type=checkbox]:enabled").prop("checked",!0):page.find("thead input[type=checkbox]:enabled").prop("checked",!1),page.find(".actn_ovrly").addClass("opn"),0===page.find("tbody input[type=checkbox]:checked:enabled").length&&page.find(".actn_ovrly").removeClass("opn")},cancelRequest:function(body,header,callback,extraDetails){ModuleComp.Modal.setup({id:"zp_modal_cancelpop",type:2,header:header,body:body,deleteOnHide:!0,closeOnSubmit:!1,isConfirm:!1,confirmButtonClass:"zlabel--blue",buttonValue:ZPI18N.getString("zp.confirm"),iconClass:"ico info",backdrop:!1,successCallback:callback,extraDetails:extraDetails})},cancelReq:function(modal){var extraDetails=modal.data("extraDetails"),selectedreq="";void 0!==extraDetails&&void 0!==extraDetails.cancelId?selectedreq=extraDetails.cancelId:landingPage.find("#"+extraDetails.detailId).find("tbody input[type=checkbox]:checked:enabled").each(function(){selectedreq=""===selectedreq?$(this).attr("val"):selectedreq+","+$(this).attr("val")}),Att_Common_Operations.cancelReqIndividual(selectedreq,extraDetails)},cancelReqIndividual:function(listId,extraDetails){var current_modal=extraDetails.modalId,page="undefined"!=typeof landingPage&&Att_Common_Operations.isRequestPage()?landingPage:Layout.Page.container,modal=page.find("#"+("Reg"===current_modal?"ZPAtt_Reg_Details":"OD"===current_modal?"ZPAtt_OD_Details":"shiftChange"===current_modal?"ZPAtt_Shift_Details":"autoAssignShift"===current_modal?"ZPAtt_Auto_Assign_Shift":"ZPAtt_Permission_Details")),params={mode:"Reg"===current_modal?"cancelRegList":"OD"===current_modal?"cancelODList":"shiftChange"===current_modal||"autoAssignShift"===current_modal?"cancelShiftChange":"cancelPermission",conreqcsr:csrfToken};if("autoAssignShift"===current_modal&&(params.isAutoAssignRequest=!0),params["Reg"==current_modal?"regId":"OD"===current_modal?"ODId":"shiftChange"===current_modal||"autoAssignShift"===current_modal?"listId":"recordId"]=listId,!extraDetails.cancelReasonMandatory||void 0!==page.find("#cancel_reason textArea").val()&&""!==page.find("#cancel_reason textArea").val().trim()){params.reason=page.find("#cancel_reason textArea").val();var actionUrl="shiftChange"===current_modal||"autoAssignShift"===current_modal?"/AttendanceShiftAction.zp":"/AttendanceAction.zp";page.find("#zp_modal_blubtn").attr("disabled",!0),$.post(actionUrl,params,function(resultData){if(page.find("#zp_modal_cancelpop").remove(),modal.find("#"+("Reg"===current_modal?"cancelRegIndividual":"OD"===current_modal?"cancelODIndividual":"autoAssignShift"===current_modal?"cancelAutoAssignShiftIndividual":"shiftChange"===current_modal?"cancelShiftChangeIndividual":"cancelPermission")).addClass("DN"),void 0!=resultData&&"success"==resultData.status){var emptyMsg="Reg"===current_modal?ZPI18N.getString("zp.nodatamsg",new Array(ZPI18N.getString("zp.sregularization"))):"OD"===current_modal?ZPI18N.getString("zp.nodatamsg",new Array(ZPI18N.getString("zp.sonduty"))):"autoAssignShift"===current_modal?ZPI18N.getString("zp.norec"):"shiftChange"===current_modal?ZPI18N.getString("zp.nodatamsg",new Array(ZPI18N.getString("zp.sshiftchangerequest"))):ZPI18N.getString("zp.nodatamsg",new Array(ZPI18N.getString("zp.spermission")));Att_Common_Operations.postRecStatChange(resultData,current_modal,emptyMsg,listId)}if(extraDetails.layoutParam&&extraDetails.apprParam&&(extraDetails.apprParam.setApprovalStatus(resultData.currentApprovalStatus),new ApprovalOperations(extraDetails.apprParam,extraDetails.layoutParam).updateApprovalPages({refresh:!0,currentApprovalStatus:resultData.currentApprovalStatus,isResubmitApplicable:!1})),void 0!=resultData&&"success"==resultData.status){for(var regRows=modal.find("#"+("Reg"===current_modal?"attendanceRegListBody #regRow":"OD"===current_modal?"ZPAtt_OD_DetListBody #ODRow":"shiftChange"===current_modal||"autoAssignShift"===current_modal?"attendanceShiftListBody #shiftRow":"ZPAtt_Permission_DetListBody #permRow")),n=regRows.length,i=0;i<n;i++)$(regRows.find("td:last")[i]).html(ZPI18N.getString("zp.cancelled"));if("Reg"===current_modal||"OD"==current_modal){var listHead=modal.find("#"+("Reg"===current_modal?"attendanceRegListHeader":"ZPAtt_OD_DetListHeader"));listHead.find("#"+("Reg"===current_modal?"reg":"OD")+"BulkApprovalRej").hide(),listHead.find("#"+("Reg"===current_modal?"reg":"OD")+"ApprovalState").show()}}else page.find("#zp_modal_blubtn").attr("disabled",!1),ModuleComp.Msg.showFailureMsg(resultData.message)})}else page.find("#cancel_reason_error").text(ZPI18N.getString("zp.cancellReq.error.providereason")).removeClass("DN")},postRecStatChange:function(rdata,bodyId,emptyMsg,recId,regDetsHasRejectedData){if(Att_Common_Operations.isRequestPage()){bodyId="shiftChange"===(bodyId="permission"===bodyId?"Permission":bodyId)||"autoAssignShift"===bodyId?"Shift":bodyId;var statFilter=ZPeopleComponents.select(Att_Common_Operations.myRequestPage.find("#"+Att_Common_Operations.getFilterDivId()+"TopStatus")).getValue(),page=Att_Common_Operations.myRequestPage.find(".zpl_rgtcnt"),tslisttbody=page.find("#ZPAtt_"+bodyId+"MyReqBody");if(-3!=statFilter&&statFilter!=rdata.currentApprovalStatus){tslisttbody.find("#list-"+recId).remove();"Reg"===bodyId?regularization_operation.NaN-=1:"OD"===bodyId?onduty.NaN-=1:"Permission"===bodyId?permission.NaN-=1:"Shift"===bodyId&&(shiftRequest.NaN-=1),0===tslisttbody.children().length?(0===page.find("#emptPage").length?(page.append('<div id="emptyDivCnt"></div>'),Att_Common_Operations.emptyPages(ZPI18N.getString("zp.nodatamsg",emptyMsg))):page.find("#emptyDivCnt").show(),page.find("#ZPAtt_"+bodyId+"MyReqDetails").hide(),page.find("#ZPAtt_"+bodyId+"MyReq").hide()):(page.find("#ZPAtt_"+bodyId+"MyReqDetails").show(),page.find("#ZPAtt_"+bodyId+"MyReq").show(),page.find("#emptyDivCnt").hide())}else-3==statFilter&&tslisttbody.find("#list-"+recId).find("#appStatusTd").html(Att_Common_Operations.getApprovalTd(rdata.currentApprovalStatus,bodyId,regDetsHasRejectedData))}},getApprovalTd:function(status,bodyId,regDetsHasRejectedData){if(bodyId="zp_"+bodyId+"Approval_approvereject",1==status){var dispStr=regDetsHasRejectedData?ZPI18N.getString("zp.partiallyapproved"):ZPI18N.getString("zp.approved");return'<span class="'+(regDetsHasRejectedData?"org":"grn")+'" id = "'+bodyId+'">'+dispStr+"</span>"}return 0==status?'<span class="red" id = "'+bodyId+'" >'+ZPI18N.getString("zp.rejected")+"</span>":-1==status||status===zpconst.ApprovalStatus.CancellationPending?'<span class="org" id = "'+bodyId+'">'+ZPI18N.getString("zp.waitingmsg")+"</span>":-2==status?'<span class="org" id = "'+bodyId+'">'+ZPI18N.getString("zp.submitted")+"</span>":2==status?'<span class="red" id = "'+bodyId+'">'+ZPI18N.getString("zp.cancelled")+"</span>":void 0},deleteConfirm:function(deleteTitle,deleteMsg,buttonVal,extraDetails){ModuleComp.Modal.delete(Att_Common_Operations.deleteBulkRows,deleteTitle,deleteMsg,buttonVal,JSON.parse(extraDetails))},confirmpopUp:function(Id,callBack,callBackparams,extraDtls){extraDtls||(extraDtls={}),void 0!==callBack&&void 0!==Id&&ModuleComp.Modal.confirm(callBack,extraDtls.header,extraDtls.body,extraDtls.btnVal,{calId:Id},extraDtls.cancelButtonValue,extraDtls.hiddenCallback)},deleteBulkRows:function(modal){var pageId="",extraDetails=modal.data("extraDetails");if(void 0!==extraDetails&&void 0!==extraDetails.pageId&&(pageId=extraDetails.pageId),"useridmapping"!==pageId&&"shiftMappingList"!==pageId){var selectedreq="";"shiftConfig"===pageId?settingsPage.container.find(".zpl_rgtcnt").find("tbody input[type=checkbox]:checked:enabled").each(function(){selectedreq=""===selectedreq?$(this).attr("val"):selectedreq+","+$(this).attr("val")}):landingPage.find(".zpl_rgtcnt").find("tbody input[type=checkbox]:checked:enabled").each(function(){selectedreq=""===selectedreq?$(this).attr("val"):selectedreq+","+$(this).attr("val")}),"reg"===pageId?regularization_operation.deleteRegList(selectedreq):"od"===pageId?onduty.deleteODList(selectedreq):"perm"===pageId?permission.deletePermissionList(selectedreq):"shiftMapping"===pageId?shiftRequest.deleteShiftMapList(selectedreq):"autoAssignShiftRequest"===pageId?AutoAssignShiftRequest.deleteShiftMapList(selectedreq):"shiftConfig"===pageId&&ShiftConfig.Shift.deleteBulkShift(selectedreq)}else"useridmapping"===pageId?useridmapping.deleteMapper(extraDetails.id):"shiftMappingList"===pageId&&shiftMapping.deleteShiftMapping(extraDetails);ModuleComp.Modal.hide("zp_modal_deletepop")},addClickEventAndCallBack:function(element,callBack){element.off().on("click",callBack)},showMoreOptions:function(){var element=Att_Common_Operations.getFilterDivId()+"MoreOptions";ZPeopleComponents.menu("#"+element).show()},emptyPages:function(header){new EmptyPages("zp_nd_reqstsubmt",header,"",landingPage.find(".zpl_rgtcnt #emptyDivCnt")).show()},noDataFoundImage:function(header){new EmptyPages("zp_nd_nodata",header,"",landingPage.find(".zpl_rgtcnt #emptyDivCnt")).show()},Export:{construct:function(){Attendance.ExportNew.showExportPopup()}},ExportPDF:{construct:function(){Attendance.ExportNew.showExportPopup(!0)}},addErrClassToZC:function(modal,id,fieldType){"datefield"===fieldType?ZPeopleComponents.datefield(modal.find("#"+id)).setAttributes({className:"ztextbox__error"}):"timefield"===fieldType?ZPeopleComponents.timefield(modal.find("#"+id)).setAttributes({className:"ztextbox__error"}):ZPeopleComponents.select(modal.find("#"+id)).setAttributes({className:"ztextbox__error"})},removeErrClassFromZC:function(modal,id,fieldType){"datefield"===fieldType?ZPeopleComponents.datefield(modal.find("#"+id)).setAttributes({className:""}):"timefield"===fieldType?ZPeopleComponents.timefield(modal.find("#"+id)).setAttributes({className:""}):ZPeopleComponents.select(modal.find("#"+id)).setAttributes({className:""})},getErrorElement:function(errorElement,id,modal){return void 0===errorElement&&(errorElement=modal.find("#"+id)),errorElement},hideAppToErr:function(modal){if(modal&&(modal.find("#appErr").is(":visible")&&modal.find("#appErr").hide(),Att_Common_Operations.isEmpShiftMapPage()||Att_Common_Operations.isShiftReqPage()||Att_Common_Operations.isAutoShiftReqPage())){let ele;(ele=Att_Common_Operations.isTeamReqPage()?modal.find("#empSel"):(ele=modal.find("#employeeBox select").next()).length>0?ele:modal.find("#groupGBox select").next()).length>0&&ele.removeClass("ztextbox__error")}},handleApplicableError:function(modal,isWarningNeeded){if(isWarningNeeded){let warningMsg=Att_Common_Operations.isTeamReqPage()?"zp.selectappusers":"zp.applicableerrormsg";ModuleComp.Msg.showWarningMsg(ZPI18N.getString(warningMsg))}if(modal&&(Att_Common_Operations.isEmpShiftMapPage()||Att_Common_Operations.isShiftReqPage()||Att_Common_Operations.isAutoShiftReqPage())){let ele,errorMessage;Att_Common_Operations.isTeamReqPage()?(ele=modal.find("#empSel"),errorMessage="zp.pleaseselectuser"):(errorMessage="zp.selectonecri",ele=(ele=modal.find("#employeeBox select").next()).length>0?ele:modal.find("#groupGBox select").next());let errorEle=modal.find("#appErr");errorEle.html(ZPI18N.getString(errorMessage)),errorEle.show(),ele.length>0&&ele.addClass("ztextbox__error")}},print:function(){var hasReasonHeader=!1,newWindow=window.open();newWindow.focus();var newContent='<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html>',copyhead=$("head").clone();copyhead.find("script").each(function(){$(this).remove()});var header,wholeCont=landingPage.clone();$(wholeCont).find("[elem=dateNavigator]").text();landingPageURL.includes("regularization")&&void 0!==landingPage.find("#ZPAtt_RegMyReqHeader_Reason")[0].style.cssText&&"display: none;"===landingPage.find("#ZPAtt_RegMyReqHeader_Reason")[0].style.cssText&&($(wholeCont).find("#ZPAtt_RegMyReqHeader_Reason").remove(),hasReasonHeader=!0),$(wholeCont).find("[id]").each(function(){$(this).removeAttr("id")}),$(wholeCont).find(".zpl_crdwthful").addClass("fxdtbl_inhrt"),header=landingPageURL.includes("operations")?landingPageURL.includes("searchuser")?landingPage.parents(".zpl_cvr").find("#zp-contwrap-operations-shift-searchuser .zpl_tabpane li.zpl_act")[0].innerText:landingPage.parentsUntil(".zpl_act.zpl_tblfxd.zpl_crdwthful").parentsUntil(".zpl_cvr").find(".zpl_tabpane li.zpl_act")[0].innerText:landingPageURL.includes("team")?landingPageURL.includes("user")?landingPage.parents(".zpl_cvr").find("#zp-contwrap-attendance-team .zpl_tabpane li.zpl_act")[0].innerText:landingPage.parents(".zpl_cvr").find(".zpl_cstmProfNav .zpl_tabpane li.zpl_act")[0].innerText:landingPageURL.includes("entry")||landingPageURL.includes("mydata")?landingPage.parents(".zpl_cvr").find(".zpl_cstmProfNav .zpl_tabpane li.zpl_act")[0].innerText:landingPageURL.includes("leavetracker")?landingPage.parents(".zpl_cvr").find("#zp-contwrap-leavetracker-mydata .zpl_tabpane li.zpl_act")[0].innerText:landingPage.parents(".zpl_cvr").find("#zp-contwrap-attendance-entry .zpl_tabpane li.zpl_act")[0].innerText,$(wholeCont).find(".zpl_rgt").remove(),$(wholeCont).find(".zpl_lft").remove(),$(wholeCont).find(".actn_ovrly").remove(),$(wholeCont).find(".zpl_cntrdv .zpl_inav").remove(),$(wholeCont).find(".zcheckbox").remove(),$(wholeCont).find(".PI_cls").remove(),landingPageURL.includes("attendance/team/user/employeeshiftmapping")||landingPageURL.includes("attendance/team/employeeshiftmapping")||landingPageURL.includes("attendance/entry/employeeshiftmapping")||landingPageURL.includes("operations/shift/employeeshiftmapping")||landingPageURL.includes("operations/shift/searchuser/employeeshiftmapping")||$(wholeCont).find(".zpl_btnmnu").remove(),$(wholeCont).find(".d-flexcap.MLauto").remove(),$(wholeCont).find(".PI_sort").remove(),$(wholeCont).find("#topSettMenu").remove(),$(wholeCont).find(".zpl_fltrvw").remove(),(landingPageURL.includes("regularization")||landingPageURL.includes("onduty")||landingPageURL.includes("permission")||landingPageURL.includes("employeeshiftmapping")&&landingPageURL.includes("operations"))&&($(wholeCont).find("table.zpl_tbl>thead>tr>th:first-child").remove(),$(wholeCont).find("table.zpl_tbl>tbody>tr>td:first-child").remove()),Att_Common_Operations.isEmpShiftMapPage()&&($(wholeCont).find("#editShiftTopBand").remove(),$(wholeCont).find(".zpl_inav").remove(),$(wholeCont).find(".zpl_lft").remove(),$(wholeCont).find(".zpl_tbllftfxd").addClass($(wholeCont).attr("class")),$(wholeCont).find("tr td").attr("style","border-color:#DCDCDC"),$.each($(wholeCont).find(".zpl_shftmap .zpl_shftdts"),function(index){$(wholeCont).find(".zpl_shftmap .zpl_shftdts")[index].style.top="15px",$(wholeCont).find(".zpl_shftmap .zpl_shftdts")[index].style.position="absolute"})),$(wholeCont).find("thead").find("th").attr("style","background:#e5e5f0!important;border-color:#ffff!important"),hasReasonHeader&&$(wholeCont).find(".zpl_tblcntr.zpl_itbl.wd100_per .w300").attr("style","border-bottom:2px solid!important;border-color:#ffff!important");var logoCont=$(".zpl_mnLgo.CP").clone();if($(logoCont).find("i").remove(),newContent+=copyhead.html(),newContent+='<body onload="self.print()" style="overflow:scroll;width:100%;"><div class="zpl_mnLgo CP">',newContent+=logoCont.html(),newContent+='</div><div style="padding:10px"><span>'+header+"</span>",landingPageURL.includes("attendance/team/user/employeeshiftmapping")||landingPageURL.includes("operations/shift/searchuser/employeeshiftmapping")){var employeeCont=landingPage.parents(".zpl_cvr").find(".zpl_usrprfdv").clone();$(employeeCont).find(".zpl_bcknavi").remove(),newContent+=employeeCont.html()}newContent+="</div>",newContent+=wholeCont.html(),newWindow.document.write(newContent),newWindow.document.close()},viewRecords:function(){Attendance.ImportNew.importContainer.find("#closeMark").trigger("click")},initializeTooltip:function(){landingPage.find("[title]").ztooltip()},removeErrClass:function(event){var apprId=event.detail.element.attr("id"),modalId="ZPAtt_OD_approverId"==apprId?"addonduty":"ZPAtt_Perm_approverId"==apprId?"addpermission":"addreglsn",modal=landingPage.find("#"+modalId);modal.find("#emptyErrMsg").removeClass("MB10"),ZPeopleComponents.select(event.detail.element).setAttributes({className:""}),modal.find("#emptyErrMsg").html("")},isRecordRedirectURL:function(){return"attendance/regularization"===Att_Common_Operations.myRequestPageURL||"attendance/hourlyperm"===Att_Common_Operations.myRequestPageURL||"attendance/onduty"===Att_Common_Operations.myRequestPageURL||"attendance/shiftchangerequests"===Att_Common_Operations.myRequestPageURL||"attendance/autoshiftrequests"===Att_Common_Operations.myRequestPageURL},isAttAllUsersOperationsPage:function(){var pageId=settingsPage.container[0].id;return!(pageId.includes("searchuser")||!pageId.includes("operations-attendance"))},isShiftAllUsersOperationsPage:function(){var pageId=settingsPage.container[0].id;return!(pageId.includes("searchuser")||!pageId.includes("operations-shift"))},isEmpShiftMapPage:function(){var pageId=settingsPage.container[0].id;return!("operations-shift-employeeshiftmapping"!==pageId&&"attendance-team-employeeshiftmapping"!==pageId&&"attendance-entry-employeeshiftmapping"!==pageId&&!pageId.includes("attendance-team-user-employeeshiftmapping")&&!pageId.includes("operations-shift-searchuser-employeeshiftmapping")&&"leavetracker-mydata-employeeshiftmapping"!==pageId)},isRequestPage:function(){return!!(Att_Common_Operations.isODReqPage()||Att_Common_Operations.isRegReqPage()||Att_Common_Operations.isPermReqPage()||Att_Common_Operations.isShiftReqPage()||Att_Common_Operations.isAutoShiftReqPage())},isODReqPage:function(){var pageId=settingsPage.container[0].id;return!!(pageId.includes("operations-attendance-onduty")||"attendance-entry-onduty"===pageId||"attendance-team-onduty"===pageId||pageId.includes("attendance-team-user-onduty")||pageId.includes("operations-attendance-searchuser-onduty"))},isRegReqPage:function(){var pageId=settingsPage.container[0].id;return!!(pageId.includes("operations-attendance-regularization")||"attendance-entry-regularization"===pageId||"attendance-team-regularization"===pageId||pageId.includes("attendance-team-user-regularization")||pageId.includes("operations-attendance-searchuser-regularization"))},isPermReqPage:function(){var pageId=settingsPage.container[0].id;return!!(pageId.includes("operations-attendance-hourlyperm")||"attendance-entry-hourlyperm"===pageId||"attendance-team-hourlyperm"===pageId||pageId.includes("attendance-team-user-hourlyperm")||pageId.includes("operations-attendance-searchuser-hourlyperm"))},isOperationsShiftMappingPage:function(){var pageId=settingsPage.container[0].id;return!("operations-shift-employeeshiftmapping"!==pageId&&!pageId.includes("operations-shift-searchuser-employeeshiftmapping")&&!pageId.includes("attendance-team-user-employeeshiftmapping"))},isShiftReqPage:function(){var pageId=settingsPage.container[0].id;return!!(pageId.includes("operations-shift-shiftchangerequests")||"attendance-team-shiftchangerequests"===pageId||"attendance-entry-shiftchangerequests"===pageId||pageId.includes("attendance-team-user-shiftchangerequests")||pageId.includes("operations-shift-searchuser-shiftchangerequests"))},isAutoShiftReqPage:function(){var pageId=settingsPage.container[0].id;return!!(pageId.includes("operations-shift-autoshiftrequests")||"attendance-team-autoshiftrequests"===pageId||"attendance-entry-autoshiftrequests"===pageId||pageId.includes("attendance-team-user-autoshiftrequests")||pageId.includes("operations-shift-searchuser-autoshiftrequests"))},isManageShiftPage:function(){var pageId=settingsPage.container[0].id;return!("settings-service-shift-manage"!==pageId&&!pageId.includes("operations-shift-manageshifts"))},isAttListViewSelfUserPage:function(){return"attendance-entry-summary"===settingsPage.container[0].id},isAttListViewPage:function(){var pageId=settingsPage.container[0].id;return!("attendance-entry-summary"!==pageId&&!pageId.includes("attendance-team-user-summary")&&!pageId.includes("operations-attendance-searchuser-summary"))},isPatternMappingPage:function(){return"operations-shift-mapshiftpattern"===settingsPage.container[0].id},isSelfReqPage:function(){return!!(settingsPage.container[0].id.includes("attendance-entry-")||Att_Common_Operations.isSingleUserTeamPage()||Att_Common_Operations.isAttListViewPage()||LVUtil.Tab.isMyPage()||Att_Common_Operations.isMySpaceMyShiftPage())||(!(void 0==Attendance||!Attendance.isInEmbedPage||!isEndUser)||void 0)},isSingleUserTeamPage:function(){var pageId=settingsPage.container[0].id;if(pageId.includes("attendance-team-user-")||pageId.includes("operations-attendance-searchuser-")||pageId.includes("operations-shift-searchuser-"))return!0},isTeamReqPage:function(){var pageId=settingsPage.container[0].id;if(pageId.includes("operations-attendance-searchuser-")||"attendance-team-employeeshiftmapping"===pageId||"attendance-team-shiftchangerequests"===pageId||"attendance-team-regularization"===pageId||"attendance-team-hourlyperm"===pageId||"attendance-team-onduty"===pageId)return!0},isMySpaceMyShiftPage:function(){var pageId=Layout.Page.container[0].id;if(pageId.includes("home_myspace_overview_myshift")||"myspace"===pageId&&Layout.Page.container.find(".zpl_act").attr("id").includes("home_myspace_overview_myshift"))return!0},isUserSpaceShiftPage:function(){if(Layout.Page.container[0].id.includes("home_user_shift_id"))return!0},isMySpaceActionListPage:function(){var pageId=Layout.Page.container[0].id;if(pageId.includes("home_myspace_overview_actionlist")||"myspace"===pageId&&Layout.Page.container.find(".zpl_act").attr("id").includes("home_myspace_overview_actionlist"))return!0},isOwnPage:function(){if(Att_Common_Operations.isSingleUserTeamPage())return AttendanceTeam.getSelfReqPageErecno()===erecno},getExportImportMode:function(){return Att_Common_Operations.isAttListViewPage()?"attendanceEntries":Att_Common_Operations.isEmpShiftMapPage()&&!Att_Common_Operations.isSelfReqPage()?"employeeShiftMapping":"attendance"},appendTopStatusAndEmpFilter:function(){var pageDiv=Att_Common_Operations.getFilterDivId(),page=settingsPage.container;page.find(".zpl_rgt");if(void 0===page.find("#"+pageDiv+"TopStatus")[0]){var html='<div><select id="'+pageDiv+'TopStatus" class="select-js" style="display: none;"></select></div>';if(Att_Common_Operations.isSelfReqPage()||landingPageURL.includes("operation")||Att_Common_Operations.isEmpShiftMapPage()||(html+='<ul class="zpl_grpmnu"><li class="zpl_act" tabindex="0" aria-label="'+ZPI18N.getString("zp.local.Direct")+ZPI18N.getString("zp.reportees")+'" id="directRep" onclick="Att_Common_Operations.directIndirectRep()"><span>'+ZPI18N.getString("zp.local.Direct")+"</span></li>",html+='<li id="indirectRep" tabindex="0" aria-label="'+ZPI18N.getString("zp.all")+ZPI18N.getString("zp.reportees")+'" onclick="Att_Common_Operations.directIndirectRep()"><span>'+ZPI18N.getString("zp.all")+"</span></li></ul>"),page.find(".zpl_rgt").children().eq(0).before(html),Att_Common_Operations.isRequestPage()){var statusArr=[],statusVal="-1";Att_Common_Operations.isApprConfiguredForCurPage()?(statusArr.push({label:ZPI18N.getString("zp.all"),value:"-3"}),statusArr.push({label:ZPI18N.getString("zp.approved"),value:"1"}),statusArr.push({label:ZPI18N.getString("zp.pending"),value:"-1"}),statusArr.push({label:ZPI18N.getString("zp.rejected"),value:"0"}),statusArr.push({label:ZPI18N.getString("zp.cancelled"),value:"2"})):(statusVal="-2",statusArr.push({label:ZPI18N.getString("zp.all"),value:"-3"}),statusArr.push({label:ZPI18N.getString("zp.submitted"),value:"-2"}),statusArr.push({label:ZPI18N.getString("zp.cancelled"),value:"2"})),ZPeopleComponents.select(page.find("#"+pageDiv+"TopStatus")).setAttributes({options:statusArr,multiple:!1,dropdownList:{appendTo:page}}),page.find("#"+pageDiv+"TopStatus").on("zselectchange",Att_Common_Operations.topStatusOnChange),ZPeopleComponents.select(page.find("#"+pageDiv+"TopStatus")).setValue(statusVal)}else if(Att_Common_Operations.isEmpShiftMapPage()&&!Att_Common_Operations.isSelfReqPage()&&!landingPageURL.includes("operation")&&showRepShift){var optionArr=[];optionArr.push({label:ZPI18N.getString("zp.directreportees"),value:"1"}),optionArr.push({label:ZPI18N.getString("zp.allsubordinates"),value:"2"}),showDepShift&&optionArr.push({label:ZPI18N.getString("zp.common.teammembers"),value:"3"}),ZPeopleComponents.select(page.find("#"+pageDiv+"TopStatus")).setAttributes({options:optionArr,multiple:!1,dropdownList:{appendTo:page}}),page.find("#"+pageDiv+"TopStatus").on("zselectchange",Att_Common_Operations.directIndirectRepDep),ZPeopleComponents.select(page.find("#"+pageDiv+"TopStatus")).setValue("1")}}},isApprConfiguredForCurPage:function(){return Att_Common_Operations.isODReqPage()&&ZPeople.Module.MODULE_DATA.attendance.isODApprConfigured||Att_Common_Operations.isRegReqPage()&&ZPeople.Module.MODULE_DATA.attendance.isRegApprConfigured||Att_Common_Operations.isPermReqPage()&&ZPeople.Module.MODULE_DATA.attendance.isPermApprConfigured||Att_Common_Operations.isShiftReqPage()&&ZPeople.Module.MODULE_DATA.attendance.isShiftApprConfigured||Att_Common_Operations.isAutoShiftReqPage()&&ZPeople.Module.MODULE_DATA.attendance.isAutoAssignShiftApprConfigured},directIndirectRepDep:function(event){event.detail.fromUI&&(shiftMapping.userCalValue=null,shiftMapping.userHoursValue=null,shiftMapping.userListValue=null,TimelySettings.constructBasedOnFilters())},directIndirectRep:function(){Att_Common_Operations.isEmpShiftMapPage()&&(shiftMapping.userCalValue=null,shiftMapping.userHoursValue=null,shiftMapping.userListValue=null),Att_Common_Operations.isDirectReportees()?(landingPage.find(".zpl_btnmnu #indirectRep").addClass("zpl_act"),landingPage.find(".zpl_btnmnu #directRep").removeClass("zpl_act")):(landingPage.find(".zpl_btnmnu #directRep").addClass("zpl_act"),landingPage.find(".zpl_btnmnu #indirectRep").removeClass("zpl_act")),TimelySettings.constructBasedOnFilters()},isDirectReportees:function(){return landingPage.find(".zpl_btnmnu #directRep").hasClass("zpl_act")},topStatusOnChange:function(event){event.detail.fromUI&&TimelySettings.constructBasedOnFilters()},approvalCloseCallBack:function(){Att_Common_Operations.isRequestPage()&&void 0!==Att_Common_Operations.myRequestPageURL&&""!==Att_Common_Operations.myRequestPageURL&&(Att_Common_Operations.isRecordRedirectURL()?window.location.href="#attendance/entry/summary-mode:list":window.location.href="#"+Att_Common_Operations.myRequestPageURL)},getRestrictedHolidayDisplayName:function(){let attModuleData=ZPeople.Module.MODULE_DATA.attendance?ZPeople.Module.MODULE_DATA.attendance:ZPLite.Reports.moduleData.attendance;return attModuleData&&attModuleData.restrictedHolidayDisplayName&&""!==attModuleData.restrictedHolidayDisplayName.trim()?attModuleData.restrictedHolidayDisplayName:ZPI18N.getString("zp.restricted")+" "+ZPI18N.getString("zp.holiday")},isRestrictedHoliday:function(status){return status.includes(Att_Common_Operations.getRestrictedHolidayDisplayName()+")")},isAvailedRestrictedHoliday:function(status){return status.includes("Holiday("+Att_Common_Operations.getRestrictedHolidayDisplayName()+")")},isUnAvailedRestrictedHoliday:function(status){return Att_Common_Operations.isRestrictedHoliday(status)&&!Att_Common_Operations.isAvailedRestrictedHoliday(status)},replaceApplicabilityContents:function(modal,headerContent,notesContent){let eligibilityHTML="<h5>"+headerContent+"</h5><p>"+notesContent+"</p>",applicabilityDiv=$(modal.find("#appToSec").find("div")[0]);applicabilityDiv.find("label").remove(),applicabilityDiv.append(eligibilityHTML)},onFileUpload:function(event,reqName){var file=event.target.files[0],fileName=file.name,extension=(fileName=fileName.replace("C:\\fakepath\\","")).split(".").pop().toLowerCase(),fileSize=file.size;let readableSize="";var modal=Att_Common_Operations.getReqModal(reqName);if(fileSize>5242880)modal.find("#attachMentError").html(ZPI18N.getString("zp.attReq.supportDoc.sizeExceed"));else{readableSize=fileSize>=1048576?(fileSize/1048576).toFixed(2)+" MB":(fileSize/1024).toFixed(2)+" KB";var afterUploadHTML='<div><div class="zpl_atchimg"> <i class="'+Att_Common_Operations.getFileIcon(extension)+'"></i>';afterUploadHTML+='</div><div class="zpl_atchdtl"><h4>'+fileName+"</h4><p><span>"+readableSize+"</span>",afterUploadHTML+='</p></div><div class="zpl_atchicn"><i class="PI_delete" onclick="Att_Common_Operations.onInputFileDelete(\''+reqName+"')\"></i></div></div>";var afterUpload=modal.find("#afterUpload");modal.find("#beforeUpload").hide(),afterUpload.show(),afterUpload.html(afterUploadHTML)}},getReqModal:function(reqName){var modal;switch(reqName){case"REG":modal=landingPage.find("#addreglsn");break;case"OD":modal=landingPage.find("#addonduty");break;case"PERM":modal=landingPage.find("#addpermission")}return modal},onInputFileDelete:function(reqName){var modal=Att_Common_Operations.getReqModal(reqName),afterUpload=modal.find("#afterUpload");afterUpload.empty(),afterUpload.hide(),modal.find("#fileuploadInput").val(""),modal.find("#beforeUpload").show()},showCloudPickerModal:function(url,reqName){CloudPicker.init("",Att_Common_Operations.cloudPickerCallBack,"Attendance",{reqName:reqName}),CloudPicker.construct(url)},cloudPickerCallBack:function(){let docObj=CloudPicker.getFileObj();Att_Common_Operations.removeCloudFileObj();try{docObj=JSON.parse(docObj)}catch(error){return void ZPeople.Message.failure(ZPI18N.getString("zp.photovalidationservererror"))}var reqName=CloudPicker.extraProps.reqName,fileName=decodeURIComponent(docObj.docName);docObj.docName=fileName;var docType=void 0!=docObj.docType?docObj.docType:"",mimeType=void 0!=docObj.mimeType?docObj.mimeType:"",fileIconClass="";if(fileName.indexOf(".")<0)if(mimeType.includes("image")||docType.includes("image"))fileIconClass=Att_Common_Operations.getFileIconBasedOnType("image");else if(mimeType.includes("document")||docType.includes("document")||docType.includes("txt"))fileIconClass=Att_Common_Operations.getFileIconBasedOnType("document");else if(mimeType.includes("spreadsheet")||docType.includes("sheet"))fileIconClass=Att_Common_Operations.getFileIconBasedOnType("sheet");else{if(!mimeType.includes("pdf")&&!docType.includes("pdf"))return(modal=Att_Common_Operations.getReqModal(reqName)).find("#attachMentError").html(ZPI18N.getString("zp.invalidfile"));fileIconClass=Att_Common_Operations.getFileIconBasedOnType("pdf")}var modal=Att_Common_Operations.getReqModal(reqName),fileExtn=Att_Common_Operations.getExtensionFromFilename(fileName);if(!(fileIconClass=fileIconClass||Att_Common_Operations.getFileIcon(fileExtn))&&!Att_Common_Operations.isAllowedExtensions(fileExtn))return(modal=Att_Common_Operations.getReqModal(reqName)).find("#attachMentError").html(ZPI18N.getString("zp.invalidfile"));Att_Common_Operations.setCloudFileUpload(docObj);var afterUploadHTML='<div><div class="zpl_atchimg"> <i class="'+fileIconClass+'"></i>';afterUploadHTML+='</div><div class="zpl_atchdtl"><h4>'+fileName+"</h4><p>",afterUploadHTML+='</p></div><div class="zpl_atchicn"><i class="PI_delete" onclick="Att_Common_Operations.onInputFileDelete(\''+reqName+"')\"></i></div></div>";var afterUpload=modal.find("#afterUpload");modal.find("#beforeUpload").hide(),afterUpload.show(),afterUpload.html(afterUploadHTML)},getExtensionFromFilename:function(fileName){let fileExtn="";return-1!=fileName.lastIndexOf(".")&&(fileExtn=(fileExtn=fileName.substr(fileName.lastIndexOf(".")+1,fileName.length)).toLowerCase()),fileExtn},setCloudFileUpload:function(obj){this.cloudFileUpload=obj},getCloudFileUpload:function(){return this.cloudFileUpload},showWorkDriveModal:function(ele,reqName){if(0==$("head").find('script[src="'+ZPeople.STATIC_CDN+'/personal/stable/jsapps/workdrive-third-party/workdrive-frame-sdk.js"]').length){var script=document.createElement("script");return script.type="text/javascript",script.readyState?script.onreadystatechange=function(){"loaded"!==script.readyState&&"complete"!==script.readyState||(script.onreadystatechange=null,Att_Common_Operations.showWorkDriveModal(ele,reqName))}:script.onload=function(){Att_Common_Operations.showWorkDriveModal(ele,reqName)},script.src=ZPeople.STATIC_CDN+"/personal/stable/jsapps/workdrive-third-party/workdrive-frame-sdk.js",void document.head.appendChild(script)}var workdriveinstance=new WorkDrive,Options={service:"zohopeople"};Options.WDDomainURL=workDriveUrl,Options.height="75%",Options.width="50%",Options.responseCallBack=Att_Common_Operations.workDriveCallback,Options.showCloseIcon=!0,Options.canShare=!0,Options.disableFolderSelection=!0;var shareOptions={showshareDialog:!0},shareFields={collaboratorShare:!1,teamShare:!0,orgShare:!0,externalShare:!1,linkOnly:!0};shareOptions.shareFields=shareFields,shareOptions.defaultShare="teamShare",Options.shareOptions=shareOptions;var obj={};obj.reqName=reqName,Options.handBackObj=obj,Options.componentType="pick",workdriveinstance.loadPicker(Options)},workDriveCallback:function(object){Att_Common_Operations.removeCloudFileObj(),$("body").find("#zp_upload_wd").removeClass("active");var filesModel=(object=JSON.parse(JSON.stringify(object))).callbackDataFromWorkDrive.fileModel[0],fileName=decodeURIComponent(filesModel.name),fileType=filesModel.type,fileIconClass="";if(fileName.indexOf(".")<0)if("image"===fileType)fileIconClass=Att_Common_Operations.getFileIconBasedOnType("image");else if("writer"===fileType)fileIconClass+=Att_Common_Operations.getFileIconBasedOnType("document");else if("zohosheet"===fileType)fileIconClass+=Att_Common_Operations.getFileIconBasedOnType("sheet");else{if("pdf"!==fileType)return(modal=Att_Common_Operations.getReqModal(reqName)).find("#attachMentError").html(ZPI18N.getString("zp.invalidfile"));fileIconClass+=Att_Common_Operations.getFileIconBasedOnType("pdf")}var reqName=object.callbackDataFromWorkDrive.handbackobj.reqName,fileExtn=Att_Common_Operations.getExtensionFromFilename(fileName),modal=Att_Common_Operations.getReqModal(reqName);if(!fileIconClass&&!Att_Common_Operations.isAllowedExtensions(fileExtn))return(modal=Att_Common_Operations.getReqModal(reqName)).find("#attachMentError").html(ZPI18N.getString("zp.invalidfile"));var docDispName=filesModel.name,obj={};obj.type=filesModel.type,obj.fileName=docDispName,obj.permalink=object.callbackDataFromWorkDrive.permissionModel[0].link,Att_Common_Operations.setWorkDriveFileUpload(obj);var afterUploadHTML='<div><div class="zpl_atchimg"> <i class="'+(fileIconClass=fileIconClass||Att_Common_Operations.getFileIcon(fileExtn))+'"></i>';afterUploadHTML+='</div><div class="zpl_atchdtl"><h4>'+fileName+"</h4><p>",afterUploadHTML+='</p></div><div class="zpl_atchicn"><i class="PI_delete" onclick="Att_Common_Operations.onInputFileDelete(\''+reqName+"')\"></i></div></div>";var afterUpload=modal.find("#afterUpload");modal.find("#beforeUpload").hide(),afterUpload.show(),afterUpload.html(afterUploadHTML)},isAllowedExtensions:function(fileExtn){return!!fileExtn&&/^(xls|csv|xlsx|jpeg|png|jpg|pdf|doc|docs|txt)$/i.test(fileExtn)},setWorkDriveFileUpload:function(obj){this.workdriveFileUpload=obj},getWorkDriveFileUpload:function(){return this.workdriveFileUpload},appendUploadfile:function(formData,param,reqName){var fileInput=Att_Common_Operations.getReqModal(reqName).find('[elem="fileuploadInput"]')[0],file=fileInput&&fileInput.files&&fileInput.files[0];file?formData.append(param,file):null!=Att_Common_Operations.getWorkDriveFileUpload()?formData.append("uploadFromWD",JSON.stringify(Att_Common_Operations.getWorkDriveFileUpload())):null!=Att_Common_Operations.getCloudFileUpload()&&formData.append("uploadFromCloud",JSON.stringify(Att_Common_Operations.getCloudFileUpload()))},getFileIconBasedOnType:function(fileType){return"image"==fileType?"PI_ft_img":"sheet"==fileType?"PI_ft_xls":"document"==fileType?"PI_ft_doc":"pdf"==fileType?"PI_ft_pdf":fileType.startsWith("text")?"PI_ft_txt":"PI_ft_pdf"},getFileIconBasedOnFilePath:function(filePath){if(filePath){if(filePath.includes("writer."))return"PI_ft_doc";if(filePath.includes("sheet."))return"PI_ft_xls"}return"PI_ft_pdf"},removeCloudFileObj:function(){this.cloudFileUpload=void 0,this.workdriveFileUpload=void 0},downloadFile:function(attacheMentId){var form=document.createElement("form");form.id="downloadAttAttachment",form.setAttribute("method","get"),form.setAttribute("action","downloadAttAttachment"),form.setAttribute("target","exportresp");var exportElement=document.createElement("input");exportElement.setAttribute("type","hidden"),exportElement.setAttribute("name","conreqcsr"),exportElement.setAttribute("value",csrfToken),form.appendChild(exportElement),exportElement=document.createElement("input"),form.setAttribute("target","exportresp"),exportElement.setAttribute("type","hidden"),exportElement.setAttribute("name","attachMentId"),exportElement.setAttribute("value",attacheMentId),form.appendChild(exportElement),exportElement=document.createElement("input"),form.setAttribute("target","exportresp"),exportElement.setAttribute("type","hidden"),exportElement.setAttribute("name","recordId"),exportElement.setAttribute("value",ZP5Form.CURRFORM_PARAM.recordId),form.appendChild(exportElement),exportElement=document.createElement("input"),form.setAttribute("target","exportresp"),exportElement.setAttribute("type","hidden"),exportElement.setAttribute("name","formId"),exportElement.setAttribute("value",ZP5Form.CURRFORM_PARAM.formId),form.appendChild(exportElement),document.body.appendChild(form),form.submit(),form.reset(),$("#downloadAttAttachment").remove()},getFileIcon:function(fileExtn){void 0==fileExtn&&(fileExtn="pdf");return"pdf"===(fileExtn=fileExtn.toLowerCase())?"PI_ft_pdf":"xls"===fileExtn||"xlsx"===fileExtn||"xlsm"===fileExtn||"sxc"===fileExtn||"ods"===fileExtn||"csv"===fileExtn||"tsv"===fileExtn?"PI_ft_xls":"htm"===fileExtn||"html"===fileExtn?"PI_ft_html":"doc"===fileExtn||"docx"===fileExtn||"sxw"===fileExtn||"odt"===fileExtn||"rtf"===fileExtn?"PI_ft_doc":"ppt"===fileExtn||"pps"===fileExtn||"odp"===fileExtn||"sxi"===fileExtn||"pptx"===fileExtn?"PI_ft_ppt":"zip"===fileExtn?"PI_ft_zip":"mp3"===fileExtn||"mp4a"===fileExtn||"wav"===fileExtn?"PI_ft_mp3":"jpg"===fileExtn||"jpeg"===fileExtn||"gif"===fileExtn||"png"===fileExtn?"PI_ft_img":"workdrive"===fileExtn?"PI_workdrive":"txt"===fileExtn?"PI_ft_txt":"mov"==fileExtn||"wmv"==fileExtn||"mpeg"==fileExtn||"mpg"==fileExtn||"mp4"==fileExtn||"webm"==fileExtn||"webmv"==fileExtn?"PI_ft_mov":"PI_ft_unknwn"}},AttendanceTeam={redirectToTeamUserPage:function(userId){ZPeople.Request.send("/timeAttendance/initialtab",{module:"attendance"},function(response){response.initialLink&&(window.location.href=response.initialLink+userId)})},initTeamUserPage:function(){if(Att_Common_Operations.isRequestPage()||Att_Common_Operations.isEmpShiftMapPage()||Att_Common_Operations.isAutoShiftReqPage())Att_Common_Operations.initComponents();else if(Layout.Page.hashDtl.hash.includes("balanceotview"))Attendance.Overtime.init();else if(Layout.Page.hashDtl.hash.includes("locationtracker"))Attendance.LiveLocation.init();else{Attendance.Entry.erecno=null;var profErecno=Layout.Page.urlparam.id;profErecno!==erecno&&(Attendance.Entry.erecno=profErecno),Attendance.Entry.init()}},addThirdLevelTabParam:function(params){let userId=Layout.Page.urlparam.id;userId&&(params.userErecno=userId)},getPreviousPageUrl:function(){let isFromSearchAtt=settingsUrlProps.niceUrl.includes("attendance/searchuser/"),isFromSearchShift=settingsUrlProps.niceUrl.includes("shift/searchuser/");return isFromSearchAtt?"#operations/attendance/searchuser":isFromSearchShift?"#operations/shift/searchuser":"TAMS.Team.goBackFromView"},resetToTeam:function(){window.location.href=TAMS.Team.subMode&&TAMS.Team.subMode==TAMS.Team.SUBMODE.MEMBERS?"#attendance/team/members":"#attendance/team/reportees"},entryPageSwitch:function(switchToTabName){var redUrl,mode=Layout.Page.urlparam.mode?Layout.Page.urlparam.mode:"list",curUrl=Layout.Page.hash;"list"==mode?redUrl=curUrl.replace("mode:list","mode:"+switchToTabName):"tabler"==mode?redUrl=curUrl.replace("mode:tabler","mode:"+switchToTabName):"calendar"==mode&&(redUrl=curUrl.replace("mode:calendar","mode:"+switchToTabName)),window.location.href=redUrl},raiseReqFromEntryPage:function(reqType){Att_Common_Operations.initComponents(),"reg"===reqType?regularization_operation.initRegReqFromEntry():"od"===reqType?onduty.initODReqFromEntry():"perm"===reqType&&permission.initPermReqFromEntry()},getSelfReqPageErecno:function(){return settingsPage.container[0].id.includes("attendance-entry-")?erecno:Layout.Page.urlparam.id?Layout.Page.urlparam.id:erecno}};Attendance.ImportNew={importfileUpContiner:null,importfileUpObj:null,importObj:null,options:null,importContainer:null,format:null,fileData:null,details:null,saveContainer:null,landingPage:void 0,landingPageId:void 0,landingPageURL:void 0,construct:function(){var modalObj;if(landingPage=settingsPage.container,landingPageId=landingPage[0].id,landingPageURL=Att_Common_Operations.getLandingPageURL(),null==Attendance.ImportNew.importfileUpObj){dtls=Attendance.ImportNew.details?Attendance.ImportNew.details:{};var popUpParams={id:"AttImportFile"};popUpParams.cardId=popUpParams.id+"_Card",popUpParams.callback=function(){landingPage.find("#"+popUpParams.cardId).html(dtls.fileSlider?dtls.fileSlider(dtls):"")},(modalObj=Attendance.ImportNew.importfileUpObj=new fullPageModal(ZPI18N.getString("zp.import"),popUpParams)).ftExtraCls="DN",modalObj._saveToggle=!1,modalObj._fullPageModalId="AttImportFileUpload",modalObj.construct()}else Attendance.ImportNew.importfileUpObj.open(),modalObj=Attendance.ImportNew.importfileUpObj;var container=Attendance.ImportNew.importfileUpContiner=landingPage.find("#"+modalObj._fullPageModalId);container.find("#pendingImport").hide(),container.find("[name=AttImportFile]").addClass("zpl_crdwthful zpl_crdfull"),container.find(".zpl_mmnulft").addClass("DNI"),container.find("#importFileDiv2").addClass("DN"),container.find("#importFileDiv1").removeClass("DN"),container.find("[elem=AttConfigImportFile]").val(""),container.find('[elem="AttConfigImportButton"]').off("click").on("click",function(event){$(event.target).siblings("[elem=AttConfigImportFile]").trigger("click")}),Attendance.ImportNew.isFromRemoveAndNew=!1,""!==container.find("#partialRecCnt").text()&&container.find("#pendingImport").show(),"BulkShiftMapping"===Attendance.ImportNew.details.module&&(Attendance.ImportNew.saveContainer=Attendance.ImportNew.importfileUpContiner),container.find('[elem="AttfileUploadedButton"]').off("click").on("click",function(event){Attendance.ImportNew.isFromRemoveAndNew=!0,$(event.target).siblings("[elem=AttConfigImportFile]").trigger("click")}),container.find('[elem="AttConfigImportFile"]').off("change").on("change",function(event){Attendance.ImportNew.onInputChange(event)}),container.find(".PI_cls").attr("title",ZPI18N.getString("zp.close")),container.find("#nextButton").on("click",function(){Attendance.ImportNew.removeErrMsg(container),null==container.find("[elem=AttConfigImportFile]")[0].files[0]?(container.find("#importFileDiv1").find(".zpl_upld").append("<span class='ztextbox--error__label'> "+ZPI18N.getString("zp.uploadfilewarning")+"</span>"),container.find("#importFileDiv1").find(".zpl_fldrp").addClass("ztextbox__error")):Attendance.ImportNew.submitImport()}),modalObj.setCloseCallback(function(){var modal=Attendance.ImportNew.importfileUpContiner;modal.find("select").each(function(){ZPeopleComponents.select(modal.find("#"+$(this).attr("id"))).destroy()}),Attendance.ImportNew.importfileUpObj.remove(),Attendance.ImportNew.importfileUpObj=null,Attendance.ImportNew.importfileUpContiner=null})},removeErrMsg:function(container){container.find("#importFileDiv1").find(".ztextbox__error").removeClass("ztextbox__error"),container.find("#importFileDiv1").find(".ztextbox--error__label").remove()},onInputChange:function(event){var cont=Attendance.ImportNew.importfileUpContiner;cont.find("#importFileDiv1").addClass("DN"),cont.find("[elem=AttfileUploadedButton]").text(ZPI18N.getString("zp.removeandnew"));var fileName=$(event.target).val(),extn=(fileName=fileName.replace("C:\\fakepath\\","")).split(".").pop();"xls"===extn||"csv"===extn||"xlsx"===extn?(Attendance.ImportNew.removeErrMsg(cont),cont.find("#importFileDiv2").find("[elem=AttConfigImportFile]").html(fileName),cont.find("#importFileDiv2").find("[elem=importFormConfigfileName]").text(fileName),cont.find("#importFileDiv2").removeClass("DN")):cont.find("#importFileDiv1").removeClass("DN")},getPendingImportHtmlSecn:function(){var html='<div class="zpl_secn" id="pendingImport" class="zpl_imprtrecord">';return html+='<div class="zpl_imprtrecord"><div id="partialRecCnt"></div>',html+='<button type="button" class="zlabel zlabel--blue zlabel--medium" id="partialRecMap">Click Here</button></div></div>'},partialImportedDataShow:function(response){var cont=Attendance.ImportNew.importfileUpContiner,pendingMsg=ZPI18N.getString("zp.recordspending");cont.find("#partialRecCnt").html("<div>"+response.recordCount+" "+pendingMsg.substring(0,pendingMsg.lastIndexOf("?")+1)+"</div>"),cont.find("#partialRecMap").off("click").on("click",function(){Attendance.ImportNew.fileData=response,Attendance.ImportNew.constructImportDiv()}),cont.find("#pendingImport").show()},submitImport:function(){var cont=Attendance.ImportNew.importfileUpContiner;cont.find("#importFileDiv1,#importFileDiv2").addClass("DN"),cont.find("#loadingImportDiv").show(),cont.find("#loadingImportDiv").html(ZPeople.LOADING_HTML);var formData=new FormData,importFile=cont.find("#importFileDiv1").find("[elem=AttConfigImportFile]")[0].files;Attendance.ImportNew.isFromRemoveAndNew&&(importFile=cont.find("#importFileDiv2").find("[elem=AttConfigImportFile]")[0].files),importFile.length>0&&formData.append("importFile",importFile[0]),null!==Attendance.ImportNew.details.module&&formData.append("module",Attendance.ImportNew.details.module),formData.append("conreqcsr",csrfToken),formData.append("mode","Operations"),landingPageURL.includes("employeeshiftmapping")&&formData.append("shiftType",shiftMapping.Import.isUserShiftMapping?"UserWise":"ShiftWise"),cont.find("#fullModFooter").find("#nextButton").addClass("DN"),$.ajax({url:landingPageURL.includes("employeeshiftmapping")||landingPageURL.includes("manageshifts")||landingPageURL.includes("shiftchangerequests")||landingPageURL.includes("shift/manage")?"/ShiftImport.zp":"/AttendanceImport.zp",type:"POST",data:formData,contentType:!1,processData:!1,success:function(response){var res=JSON.parse(response);res.error&&"rowExceededLimit"===res.error?(ModuleComp.Msg.showFailureMsg(null===Attendance.ImportNew.details.module?ZPI18N.getString("zp.performanceImportcntexceederror"):ZPI18N.getString("zp.importcntexceederror"),!0),cont.find("#fullModFooter #nextButton").attr("disabled",!0)):(Attendance.ImportNew.fileData=res,Attendance.ImportNew.constructImportDiv())}})},constructImportDiv:function(){var tab1=new Tab;tab1.id="Attimport_mapping",tab1.cardId="Attimport_mapping_card",tab1.name=ZPI18N.getString("zp.mapdetails"),tab1.callback=Attendance.ImportNew.importMapping;var tab2=new Tab;tab2.id="Attimport_verify",tab2.cardId="Attimport_verify_card",tab2.name=ZPI18N.getString("zp.verify"),tab2.callback=Attendance.ImportNew.verify;var tab3=new Tab,tab4=new Tab;"BulkShiftMapping"==Attendance.ImportNew.details.module&&(tab3.id="Attimport_confirm",tab3.cardId="Attimport_confirm_card",tab3.name=ZPI18N.getString("zp.confirm"),tab3.callback=Attendance.ImportNew.details.checkAttEntryUpd,tab4.id="Attimport_conflict",tab4.cardId="Attimport_conflict_card",tab4.name=ZPI18N.getString("zp.sandbox.conflict"),tab4.callback=Attendance.ImportNew.conflict);var tab5=new Tab;if(tab5.id="Attimport_summary",tab5.cardId="Attimport_summary_card",tab5.name=ZPI18N.getString("zp.ImportSummary"),tab5.callback=Attendance.ImportNew.details.submitMapping,"BulkShiftMapping"==Attendance.ImportNew.details.module)if(shiftMapping.Import.isUserShiftMapping){tab3.callback=Attendance.ImportNew.confirm;importObj=Attendance.ImportNew.importObj=new fullPageModal("Import",tab3,tab5)}else var importObj=Attendance.ImportNew.importObj=new fullPageModal("Import",tab1,tab2,tab3,tab4,tab5);else importObj=Attendance.ImportNew.importObj=new fullPageModal("Import",tab1,tab2,tab5);importObj._fullPageModalId="Attimport_slider",Attendance.ImportNew.importObj.topNavigation=!0,null!=Attendance.ImportNew.importfileUpObj&&Attendance.ImportNew.importfileUpObj.close(),importObj._saveToggle=!1,importObj._previousToggle=!0,importObj.construct(0),Attendance.ImportNew.importContainer.find("#tabLeftUl").find("#Attimport_summary").addClass("disabled"),"BulkShiftMapping"!=Attendance.ImportNew.details.module||shiftMapping.Import.isUserShiftMapping||Attendance.ImportNew.hideTabs(),importObj.setCloseCallback(function(){var modal=Attendance.ImportNew.importContainer;modal.find("select").each(function(){ZPeopleComponents.select(modal.find("#"+$(this).attr("id"))).destroy()}),Attendance.ImportNew.importContainer.remove(),Attendance.ImportNew.importObj=null,Attendance.ImportNew.importContainer=null})},hideTabs:function(){shiftMapping.Import.isUserShiftMapping?(Attendance.ImportNew.importContainer.find("#tabLeftUl").find("li:nth-child(1)").hide(),Attendance.ImportNew.importContainer.find("#Attimport_confirm_card").removeClass("zpl_act"),Attendance.ImportNew.importContainer.find("#tabLeftUl").find("li:nth-child(2)").find($("b")).html("1")):(Attendance.ImportNew.importContainer.find("#tabLeftUl").find("li:nth-child(3)").addClass("disabled").hide(),Attendance.ImportNew.importContainer.find("#tabLeftUl").find("li:nth-child(4)").addClass("disabled").hide(),Attendance.ImportNew.importContainer.find("#tabLeftUl").find("li:nth-child(5)").find($("b")).html("3"))},confirm:function(){Attendance.ImportNew.importContainer&&0!==Attendance.ImportNew.importContainer.find("#Attimport_confirm_card").children().length||(Attendance.ImportNew.importContainer=landingPage.find("#"+Attendance.ImportNew.importObj._fullPageModalId),Attendance.ImportNew.importContainer.find("#Attimport_confirm_card").html(Attendance.ImportNew.details.confirmSliderHtml()),Attendance.ImportNew.importContainer.find("#Attimport_confirm_card").find("#ZPAtt_updAttEntryOnShiftImp")[0].checked=!0),shiftMapping.Import.isUserShiftMapping&&(Attendance.ImportNew.hideTabs(),Attendance.ImportNew.details.checkAttEntryUpd(Attendance.ImportNew.fileData.tableHeaders)),Attendance.ImportNew.importContainer.find("#tabLeftUl").find("#Attimport_mapping,#Attimport_verify").addClass("disabled"),Attendance.ImportNew.importContainer.find("#tabLeftUl").find("li:nth-child(3)").removeClass("disabled"),Attendance.ImportNew.importObj._previousToggle=!1},conflict:function(){0===Attendance.ImportNew.importContainer.find("#Attimport_conflict_card").children().length&&Attendance.ImportNew.importContainer.find("#Attimport_conflict_card").html(Attendance.ImportNew.details.conflictSliderHtml()),shiftMapping.Import.importParam||Attendance.ImportNew.importContainer.find("#fullModFooter").find("#nextButton").trigger("click")},headerHash:null,importMapping:function(){var obj=Attendance.ImportNew.fileData;if(!Attendance.ImportNew.importContainer||0===Attendance.ImportNew.importContainer.find("#Attimport_mapping_card").children().length){Attendance.ImportNew.importContainer=landingPage.find("#"+Attendance.ImportNew.importObj._fullPageModalId),Attendance.ImportNew.importContainer.find("#Attimport_mapping_card").html(Attendance.ImportNew.details.getMappingSliderHtml());var cont=Attendance.ImportNew.importContainer.find("#Attimport_mapping_card");ZPeopleComponents.collapsiblepanel(cont.find("#Attimport_mapping_collapseDiv"),{toggleButtonPosition:"right"}),Attendance.ImportNew.fileFormat=obj.fileFormat,Attendance.ImportNew.tableHeaders=obj.tableHeaders;var theadersList=obj.tableHeaders,result=[];for(var i in Attendance.ImportNew.headerHash={},result.push({label:ZPI18N.getString("zp.select"),value:"-1"}),theadersList){var optval=decodeHTML(theadersList[i]);result.push({label:optval,value:i}),optval=optval.toLowerCase().trim(),Attendance.ImportNew.headerHash[optval]=i}Attendance.ImportNew.options=result,cont.find("[elem=mapUnMapDiv").off("click").on("click",Attendance.ImportNew.showHideMapUnmapFields),cont.find("[value=All]").trigger("click"),cont.find("select").each(function(){ZPeopleComponents.select($(this)).setAttributes({options:result}),ZPeopleComponents.select($(this)).setValue("-1"),ZPeopleComponents.select($(this)).setAttributes({change:Attendance.ImportNew.onSelValueChange})});var isAttendance=null==Attendance.ImportNew.details.module||"RegMyRequest"==Attendance.ImportNew.details.module||"ODMyRequest"==Attendance.ImportNew.details.module||"PermissionMyRequest"==Attendance.ImportNew.details.module,isShift="BulkShiftMapping"==Attendance.ImportNew.details.module;(isAttendance||isShift)&&(Attendance.ImportNew.details.hideUnHideDateFmt(cont),Attendance.ImportNew.setDateFormatOptions(cont)),Attendance.ImportNew.details.autoMappingFields&&(Attendance.ImportNew.details.autoMappingFields(cont,obj.tableHeaders),Attendance.ImportNew.details.autoMappingFields=void 0),Attendance.ImportNew.setMappedUnMappedColumns(cont)}},showHideMapUnmapFields:function(event){var obj="mapUnMapDiv"==$(event.target).attr("elem")?event.target:$(event.target).closest("[elem=mapUnMapDiv]"),cont=Attendance.ImportNew.importContainer.find("#Attimport_mapping_card");if(!$(obj).hasClass("zpl_act")){$(obj).siblings().removeClass("zpl_act"),$(obj).addClass("zpl_act");let elemVal=$(obj).attr("value");cont.find("#zp_empty_data").hide(),cont.find("#Attimport_mapping_collapseDiv").parents(".zpl_crd").show(),cont.find("[elem=rowContainer]").removeClass("DN"),cont.find("[elem=mappingFieldDiv]").removeClass("DN"),"All"!==elemVal&&($.each(cont.find("#Attimport_mapping_collapseDiv"),function(ind,collPanel){$.each(cont.find('[elem="mappingFieldDiv"]'),function(col,fieldDiv){Attendance.ImportNew.showHideField(fieldDiv,elemVal)}),$(collPanel).find('[elem="rowContainer"]').length==$(collPanel).find('[elem="rowContainer"].DN').length?$(collPanel).parents(".zpl_crd").addClass("DN"):$(collPanel).parents(".zpl_crd").removeClass("DN")}),Attendance.ImportNew.showHideContainer())}},resetFields:function(){var container=Attendance.ImportNew.importContainer.find("#Attimport_mapping_card");container.find("select").each(function(){let value=ZPeopleComponents.select($(this)).getValue();-1!=value&&""!==value&&ZPeopleComponents.select($(this)).setValue(-1)});var shwDiv=container.find("[elem=mapUnMapDiv].zpl_act");shwDiv.removeClass("zpl_act"),shwDiv.trigger("click")},setDateFormatOptions:function(container,isFromVerify){var options=[];options.push({label:ZPI18N.getString("zp.select"),value:"-1"}),options.push({label:"MM-dd-yyyy",value:"MM-dd-yyyy"}),options.push({label:"dd-MM-yyyy",value:"dd-MM-yyyy"}),options.push({label:"dd-MMM-yyyy",value:"dd-MMM-yyyy"}),options.push({label:"dd-MMM-yy",value:"dd-MMM-yy"}),options.push({label:"MM/dd/yyyy",value:"MM/dd/yyyy"}),options.push({label:"dd/MM/yyyy",value:"dd/MM/yyyy"}),options.push({label:"yyyy-MM-dd",value:"yyyy-MM-dd"}),options.push({label:"yyyy/MM/dd",value:"yyyy/MM/dd"});var switchDiv,value,isMandate,dateSelectId=null;(0!=container.find("#date_fmtReg").length?dateSelectId="#ZPAtt_reg_importDateFor":0!=container.find("#date_fmtOD").length?dateSelectId="#ZPAtt_OD_importDateFor":0!=container.find("#date_fmtPerms").length?dateSelectId="#ZPAtt_permission_importDateFor":0!=container.find("#date_fmtShiftMap").length?dateSelectId="#ZPAtt_Shift_importDateFor":0!=container.find("#date_fmtEntry").length&&(dateSelectId="#ZPAtt_entry_importDateFor"),null!==dateSelectId)&&(isFromVerify?(switchDiv=Attendance.ImportNew.importContainer.find("#Attimport_mapping_card"),value=ZPeopleComponents.select(switchDiv.find(dateSelectId+"_map")).getValue(),isMandate=switchDiv.find(dateSelectId+"_map").parent().siblings("label").hasClass("zpl_mtry")&&(-1==value||""==value)):(value=0!==(switchDiv=Attendance.ImportNew.importContainer.find("#Attimport_verify_card")).find(dateSelectId).length?ZPeopleComponents.select(switchDiv.find(dateSelectId)).getValue():"-1",dateSelectId+="_map"),ZPeopleComponents.select(container.find(dateSelectId)).setAttributes({options:options,multiple:!1}),ZPeopleComponents.select(container.find(dateSelectId)).setAttributes({className:isMandate?"ztextbox__error":""}),ZPeopleComponents.select(container.find(dateSelectId)).setValue(value))},onSelValueChange:function(obj){var cont=Attendance.ImportNew.importContainer.find("#Attimport_mapping_card");Attendance.ImportNew.setMappedUnMappedColumns(cont);var elemVal=cont.find("[elem=mapUnMapDiv].zpl_act").attr("value");Attendance.ImportNew.showHideField($(obj.target).parents('[elem="mappingFieldDiv"]'),elemVal);var collapsibleSectionPanel=$(obj.target).parents("#Attimport_mapping_collapseDiv");collapsibleSectionPanel.find('[elem="rowContainer"]').length==collapsibleSectionPanel.find('[elem="rowContainer"].DN').length?collapsibleSectionPanel.parents(".zpl_crd").addClass("DN"):collapsibleSectionPanel.parents(".zpl_crd").removeClass("DN"),Attendance.ImportNew.showHideContainer(),$(obj.target).parents('[elem="mappingFieldDiv"]').find(".zbadges").remove(),"-1"!==obj.detail.selectedValue&&-1==$(obj.target).parents('[elem="mappingFieldDiv"]').find("select").attr("id").indexOf("importDateFor")&&$(obj.target).parents('[elem="mappingFieldDiv"]').find("label").append('<b class="zbadges">(c:'+obj.detail.selectedValue+")</b>")},showHideField:function(fieldDiv,elemVal){"All"!==elemVal&&$.each($(fieldDiv).find("select"),function(ind,singleFieldDiv){let selval=ZPeopleComponents.select($(singleFieldDiv)).getValue();$(singleFieldDiv).parents("[elem=mappingFieldDiv]");(""==selval||"-1"==selval)&&"Mapped"==elemVal||""!=selval&&"-1"!=selval&&"Unmapped"==elemVal?$(fieldDiv).addClass("DN"):$(fieldDiv).removeClass("DN");let rowContainer=$(fieldDiv).closest("[elem=rowContainer]");rowContainer.find('[elem="mappingFieldDiv"]').length==rowContainer.find('[elem="mappingFieldDiv"].DN').length?rowContainer.addClass("DN"):rowContainer.removeClass("DN")})},showHideContainer:function(){var cont=Attendance.ImportNew.importContainer.find("#Attimport_mapping_card");cont.find(".zpl_crd").hasClass("DN")?(cont.find(".zpl_crd").hide(),Attendance.ImportNew.showHideNoData({div:cont,msg:"Mapped"==cont.find("[elem=mapUnMapDiv].zpl_act").attr("value")?ZPI18N.getString("zp.nomappingsfound"):ZPI18N.getString("zp.allFieldsMapped")}),cont.find("#zp_empty_data").show()):(cont.find("#zp_empty_data").hide(),$.each(cont.find("#Attimport_mapping_collapseDiv:visible"),function(col,collPanel){$(collPanel).parents(".zpl_crd").show()}))},showHideNoData:function(obj){var pageContainer=obj.div;0===pageContainer.find("#zp_empty_data").length&&pageContainer.find(".zpl_rgtcnt").append("<div id='zp_empty_data'></div>");var div=pageContainer.find("#zp_empty_data");(div.show(),0!==div.find("#emptPage").length)?div.find("#emptPage").show():new EmptyPages("zp_nd_nodata",obj.msg,"",div).show()},setMappedUnMappedColumns:function(container){var mappped=0,unMapped=0;container.find("select").each(function(){var value=ZPeopleComponents.select($(this)).getValue();-1==value||""===value?unMapped++:mappped++}),container.find("#mappedNo").text(mappped),container.find("#unMappedNo").text(unMapped),Attendance.ImportNew.mappped=mappped,Attendance.ImportNew.unMapped=unMapped},updateMapFields:function(event){var selVal=event.detail.selectedValue;($(this).siblings("label").hasClass("zpl_mtry")||$(this).parent().siblings("label").hasClass("zpl_mtry"))&&(-1==selVal||""==selVal?ZPeopleComponents.select($(this)).setAttributes({className:"ztextbox__error"}):ZPeopleComponents.select($(this)).setAttributes({className:""}));var select=Attendance.ImportNew.importContainer.find("#Attimport_mapping_card").find("#"+$(this).attr("id")+"_map");ZPeopleComponents.select(select).setValue(selVal)},updatingMappedUnMappedColumnOnChange:function(obj){var container=Attendance.ImportNew.importContainer.find("#Attimport_mapping_card"),value=ZPeopleComponents.select($(this)).getValue();-1==obj.detail.previousValue&&""==obj.detail.previousValue||-1!=value&&""!==value?-1!=obj.detail.previousValue&&""!=obj.detail.previousValue||-1==value||""==value||(Attendance.ImportNew.mappped++,Attendance.ImportNew.unMapped--):(Attendance.ImportNew.unMapped++,Attendance.ImportNew.mappped--),container.find("#mappedNo").text(Attendance.ImportNew.mappped),container.find("#unMappedNo").text(Attendance.ImportNew.unMapped)},verify:function(){var verifyDiv=Attendance.ImportNew.importContainer.find("#Attimport_verify_card");0===verifyDiv.children().length&&Attendance.ImportNew.importContainer.find("#Attimport_verify_card").html(Attendance.ImportNew.details.getVerifySliderHtml());var mappingDiv=Attendance.ImportNew.importContainer.find("#Attimport_mapping_card");ZPeopleComponents.collapsiblepanel(verifyDiv.find("#Attimport_verify_collapseDiv"),{toggleButtonPosition:"right"});var isAttendance=null==Attendance.ImportNew.details.module||"RegMyRequest"==Attendance.ImportNew.details.module||"ODMyRequest"==Attendance.ImportNew.details.module||"PermissionMyRequest"==Attendance.ImportNew.details.module,isShift="BulkShiftMapping"==Attendance.ImportNew.details.module;(isAttendance||isShift)&&(Attendance.ImportNew.details.hideUnHideDateFmt(verifyDiv),Attendance.ImportNew.setDateFormatOptions(verifyDiv,!0)),verifyDiv.find("select").each(function(){if(-1===$(this).attr("id").indexOf("importDateFor")){var value=ZPeopleComponents.select(mappingDiv.find("#"+$(this).attr("id")+"_map")).getValue();ZPeopleComponents.select($(this)).setAttributes({options:Attendance.ImportNew.options}),ZPeopleComponents.select($(this)).setValue(value),!$(this).siblings("label").hasClass("zpl_mtry")&&!$(this).parent().siblings("label").hasClass("zpl_mtry")||-1!=value&&""!=value||ZPeopleComponents.select($(this)).setAttributes({className:"ztextbox__error"}),ZPeopleComponents.select($(this)).setAttributes({change:Attendance.ImportNew.updateMapFields})}})},importSummary:function(resultData){var cont=Attendance.ImportNew.importContainer.find("#Attimport_summary_card");if("ShiftDetailsMapping"==Attendance.ImportNew.details.module){if(resultData.fail||resultData.error){cont.find("#zp_page_loading").remove();var failMsg=resultData.fail?resultData.fail:ZPI18N.getString("zp.unabletoprocess")+" "+ZPI18N.getString("zp.checkinputs");return ModuleComp.Msg.showFailureMsg(failMsg),Attendance.ImportNew.importContainer.find("#fullModFooter").find("#nextButton").removeClass("DN").text(ZPI18N.getString("zp.next")),Attendance.ImportNew.importContainer.find("#fullModFooter").find("#saveButton").addClass("DN"),void Attendance.ImportNew.importObj.showTab(1)}resultData.msg=resultData}if(resultData&&resultData.msg){if(resultData.msg.errorType)return ModuleComp.Msg.showFailureMsg(resultData.msg.errorType),void Attendance.ImportNew.importObj.close();cont.html(Attendance.ImportNew.details.getImportSummaryHtml(resultData)),Attendance.ImportNew.importContainer.find("#tabLeftUl").find("#Attimport_mapping,#Attimport_verify").addClass("disabled"),Attendance.ImportNew.importContainer.find("#tabLeftUl").find("#Attimport_mapping,#Attimport_verify").addClass("disabled"),Attendance.ImportNew.importContainer.find("#tabLeftUl").find("#Attimport_conflict").is(":visible")&&Attendance.ImportNew.importContainer.find("#tabLeftUl").find("#Attimport_conflict").addClass("disabled"),Attendance.ImportNew.importContainer.find("#tabLeftUl").find("#Attimport_confirm").is(":visible")&&Attendance.ImportNew.importContainer.find("#tabLeftUl").find("#Attimport_confirm").addClass("disabled"),Attendance.ImportNew.importContainer.find("#tabLeftUl").find("#Attimport_summary").removeClass("disabled"),Attendance.ImportNew.importContainer.find("#fullModFooter").addClass("DNI"),cont.find("#zp_page_loading").remove()}else if(resultData.fail||resultData.error){cont.find("#zp_page_loading").remove(),(failMsg=resultData.fail?resultData.fail:ZPI18N.getString("zp.unabletoprocess"))==ZPI18N.getString("zp.att.importschedule")?(Attendance.ImportNew.importObj.close(),ModuleComp.Msg.showWarningMsg(failMsg)):(ModuleComp.Msg.showFailureMsg(failMsg),Attendance.ImportNew.importContainer.find("#fullModFooter").find("#nextButton").removeClass("DN").text(ZPI18N.getString("zp.next")),Attendance.ImportNew.importContainer.find("#fullModFooter").find("#saveButton").addClass("DN"),Attendance.ImportNew.importObj.showTab(1))}},showFailureMsgForImport:function(){ModuleComp.Msg.showFailureMsg(ZPI18N.getString("zp.choosereqcolumns")),Attendance.ImportNew.importContainer.find("#fullModFooter").find("#nextButton").removeClass("DN").text("Next"),Attendance.ImportNew.importContainer.find("#fullModFooter").find("#saveButton").addClass("DN"),Attendance.ImportNew.importObj.showTab(2)}};