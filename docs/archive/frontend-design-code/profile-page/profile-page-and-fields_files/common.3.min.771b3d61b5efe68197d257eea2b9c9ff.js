ZPDateTime={months_short:new Array(ZPI18N.getString("zp.jan"),ZPI18N.getString("zp.feb"),ZPI18N.getString("zp.mar"),ZPI18N.getString("zp.apr"),ZPI18N.getString("zp.may"),ZPI18N.getString("zp.jun"),ZPI18N.getString("zp.jul"),ZPI18N.getString("zp.aug"),ZPI18N.getString("zp.sep"),ZPI18N.getString("zp.oct"),ZPI18N.getString("zp.nov"),ZPI18N.getString("zp.dec")),months_long:new Array(ZPI18N.getString("zp.january"),ZPI18N.getString("zp.february"),ZPI18N.getString("zp.march"),ZPI18N.getString("zp.april"),ZPI18N.getString("zp.may"),ZPI18N.getString("zp.june"),ZPI18N.getString("zp.july"),ZPI18N.getString("zp.august"),ZPI18N.getString("zp.september"),ZPI18N.getString("zp.october"),ZPI18N.getString("zp.november"),ZPI18N.getString("zp.december")),days:new Array(ZPI18N.getString("zp.sun"),ZPI18N.getString("zp.mon"),ZPI18N.getString("zp.tue"),ZPI18N.getString("zp.wed"),ZPI18N.getString("zp.thu"),ZPI18N.getString("zp.fri"),ZPI18N.getString("zp.sat")),days_long:new Array(ZPI18N.getString("zp.sunday"),ZPI18N.getString("zp.monday"),ZPI18N.getString("zp.tuesday"),ZPI18N.getString("zp.wednesday"),ZPI18N.getString("zp.thursday"),ZPI18N.getString("zp.friday"),ZPI18N.getString("zp.saturday")),getDay:function(day){return this.days[day]},getMonth:function(count,type){return"long"===type?this.months_long[count]:this.months_short[count]},getDateDisplayFormat:function(date){if(void 0!==date&&null!==date){var postedDateObj=new Date;date=this.convertToTimezone(date),postedDateObj.setTime(date);var postedYear=postedDateObj.getUTCFullYear(),postedMonth=postedDateObj.getUTCMonth(),postedDate=postedDateObj.getUTCDate(),currDateObj=new Date;currDateObj.setTime(this.convertToTimezone(currDateObj.getTime()));var currYear=currDateObj.getUTCFullYear(),currDate=currDateObj.getUTCDate(),currMonth=currDateObj.getUTCMonth();currDateObj.setTime(currDateObj.setDate(currDateObj.getUTCDate()-1));var postedTime,postedDay,prevDate=currDateObj.getUTCDate(),prevMonth=currDateObj.getUTCMonth();if(postedYear===currYear)currDate===postedDate&&postedMonth===currMonth?postedDay=ZPI18N.getString("zp.today"):prevDate!==postedDate||postedMonth!==currMonth&&postedMonth!==prevMonth?(postedDate<10&&(postedDate="0"+postedDate),postedDay=postedDate+" "+ZPDateTime.getMonth(postedMonth,"long")):postedDay=ZPI18N.getString("zp.yesterday"),postedTime=" "+postedDay+" "+ZPDateTime.getDisplayTime(postedDateObj,!Calendar.is12HrFormat());else postedYear!==currYear&&(postedTime=Calendar.twoDig(postedDate)+" "+ZPDateTime.getMonth(postedMonth,"long")+" "+postedYear+" , "+ZPDateTime.getDisplayTime(postedDateObj,!Calendar.is12HrFormat()));return postedTime}},getDateDisplayFormatWithoutTime:function(date){if(void 0!==date&&null!==date){var postedDateObj=new Date;date=this.convertToTimezone(date),postedDateObj.setTime(date);var postedYear=postedDateObj.getUTCFullYear(),postedMonth=postedDateObj.getUTCMonth(),postedDate=postedDateObj.getUTCDate();return postedDate<10&&(postedDate="0"+postedDate),postedDate+"-"+ZPDateTime.getMonth(postedMonth)+"-"+postedYear}},getDisplayTime:function(postedDateObj,is24HrFormat){var postedHour=postedDateObj.getUTCHours(),postedMin=postedDateObj.getUTCMinutes(),periodType="AM";return 1!=is24HrFormat?(postedHour>=12?(0===(postedHour%=12)&&(postedHour="12"),periodType="PM"):0===postedHour&&(postedHour="12"),0===postedMin?postedMin="00":postedMin<10&&(postedMin="0"+postedMin),postedHour+":"+postedMin+" "+periodType):(0===postedMin?postedMin="00":postedMin<10&&(postedMin="0"+postedMin),postedHour+":"+postedMin)},convertToTimezone:function(postTime,userGMTString){var tempDate=new Date;return tempDate.setTime(postTime),userGMTString=void 0!==userGMTString?userGMTString:ZPeople.TIME.userGMTString,postTime=tempDate.getTime()+Number(userGMTString),!0!==ZPeople.TIME.useDaylightTime&&"true"!==ZPeople.TIME.useDaylightTime||!0!==ZPeople.TIME.inDaylightTime&&"true"!==ZPeople.TIME.inDaylightTime||(postTime+=Number(ZPeople.TIME.daylightTime)),postTime},convertToCompanyTimezone:function(time){var tempDate=new Date;return tempDate.setTime(time),time=tempDate.getTime()+Number(ZPeople.TIME.companyGMTString),!0!==ZPeople.TIME.companyUseDaylightTime&&"true"!==ZPeople.TIME.companyUseDaylightTime||(time+=Number(ZPeople.TIME.companydaylightTime)),time},getDateDiff:function(fromDate,toDate){for(var diff=0,fromDateObj=new Date(fromDate),toDateObj=new Date(toDate),dummyFromDateObj=fromDateObj;dummyFromDateObj<=toDateObj;)diff++,dummyFromDateObj.setDate(dummyFromDateObj.getDate()+1);return diff}},zpconst={ApprovalStatus:{CancellationPending:-4,NotSubmitedd:-3,NoStatus:-2,Pending:-1,Approved:1,Rejected:0,Cancelled:2,Intermediate_Approved:3,Revoked:21,Draft:4},EmployeeStatus:{activeemprecord:"3",exitemprecord:"23",all:"6"},FormApprovalType:{Default:0,Appraisal:1,NoCriteria:2,NoApprover:3},FromAddressType:{PreDefined:0,Domain_Verified:1,Captcha_Verified:2},ResponseCodes:{PERMISSION_DENIED_TO_ADD_OR_EDIT_DATA:7323,API_ERR_PERMISSION_DENIED_TO_VIEW:7040,API_ERR_INVALID_FORMNAME:7011,API_ERR_PERMISSION_DENIED_TO_EDIT:7039,API_ERR_NO_ERROR:7e3},CommonMessages:{FAILUREMSG:"failure",SUCCESSMSG:"success"},UniqueFields:{CANDIDATE_KEY_DUPLICATE_RECORD_ADD_ERROR:4e3,CANDIDATE_KEY_ALREADY_CHECKED_NO_DUPLICATE:4001},TriggerFields:{CUSTOM_VALIDATION_NOT_ENABLED:0},FieldType:{TEXT:1,TEXT_AREA:3,EMAIL_ADDRESS:4,NUMBER:5,CURRENCY:6,PHONE_NUMBER:8,CHECK_BOX:9,DATE:10,SINGLE_SELECT:12,MULTI_SELECT:13,PLAIN_TEXT:14,FILE_UPLOAD:18,DECIMAL:19,IMAGE:20,URL:21,DATE_TIME:22,PICKLIST:25,SCRIPT:15,FORMULA_DATE:24,LOOKUP:26,GENDER:28,BLOODGROUP:27,COUNTRY:29,AUTONUMBER:30,SELECT_DISPLYTYPE:100,RADIO_DISPLYTYPE:101,MULTISELECT_DISPLYTYPE:102,CHECK_BOXES_DISPLYTYPE:103},Permission:{NO_DATA:0,MY_DATA:1,TEAM_DATA:2,SUB_DATA:4,ALL_DATA:3},Search_Opr:{EQUAL:18,NOT_EQUAL:19,LESS_THAN:20,GREATER_THAN:21,LESS_EQUAL:22,GREATER_EQUAL:23,STARTS_WITH:24,ENDS_WITH:25,CONTAINS:26,NOT_CONTAINS:27,LIKE:28,EMPTY:29,NOT_EMPTY:30,YESTERDAY:31,TODAY:32,TOMORROW:33,LAST_7_DAYS:34,LAST_30_DAYS:35,LAST_60_DAYS:36,LAST_90_DAYS:37,LAST_120_DAYS:38,NEXT_7_DAYS:39,NEXT_30_DAYS:40,NEXT_60_DAYS:41,NEXT_90_DAYS:42,NEXT_120_DAYS:43,LAST_MONTH:44,THIS_MONTH:45,NEXT_MONTH:46,CURR_PREV_MONTH:47,CURR_NEXT_MONTH:48,TRUE:49,FALSE:50,LAST_YEAR:51,CURRENT_YEAR:52,NEXT_YEAR:53,PREVIOUS_2_YEAR:54,NEXT_2_YEAR:55,CURRENT_PREVIOUS_YEAR:56,CURRENT_NEXT_YEAR:57,BETWEEN:58,IN:61,NOT_IN:62,LOGIN_USERS_DEPT:63,LOGIN_USER:64,LAST_WEEK:65,THIS_WEEK:66,NEXT_WEEK:67},ControlPanelFunctions:{permissions:"Manage_Permissions",customize:"Manage_Tabs_Forms_Customization",automation:"Manage_Automation"},systemServices:["organization","timetracker","leavetracker","attendance","files","performance","onboarding","announcements","officereadiness","zp_offboarding","salarydetails"]};var Calendar={currrentDate:new Date,curYear:(new Date).getFullYear(),curMonth:(new Date).getMonth(),weekfromdate:new Date,weektodate:new Date,monthfromdate:new Date,monthtodate:new Date,selectedDay:null,selectedMonth:null,selectedYear:null,DEF_DATEFORMAT:"%d-%b-%Y",DB_DATEFORMAT:"%Y-%m-%d",months:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],hrs24regex:/^((([0-1](\d{0,1}))|(2([0-3]{0,1})))||(\d{1}))$/,minregex:/^(([0-5](\d{0,1}))||(\d{1}))$/,hrs12regex:/^((([0](\d{0,1}))|([1]([0-2]{0,1})))||(\d{1}))$/,ampmregex:/^(am|pm)$/i,CAL_DAY_CLASS:{empty:"empty",weekend:"weekend",day:"day",today:"today",leave:"leave",ntallow:"ntallow"},calObj:function(){this.curDate=null,this.curYear=null,this.curMonth=null,this.calcontId=null,this.outerdivId=null,this.daysObj=null,this.divid=null,this.callback=null,this.selectedDay=null,this.selectedMonth=null,this.selectedYear=null,this.tdonclick=null,this.tronclick=null},setCurrentDate:function(year,month,date){this.currrentDate.setFullYear(year,month,date)},getCurrentDate:function(isPeopleDateFormat){var currentDate=new Date(curyear,curmonth,curdate);return!0===isPeopleDateFormat&&(currentDate=this.formatDate(currentDate)),currentDate},getFirstDayofMonth:function(year,month){return void 0==year&&(year=this.currrentDate.getFullYear()),void 0==month&&(month=this.currrentDate.getMonth()),new Date(year,month,1).getDay()},daysInMonth:function(year,month){return void 0==year&&(year=this.currrentDate.getFullYear()),void 0==month&&(month=this.currrentDate.getMonth()),new Date(year,month+1,0).getDate()},getFirstDayOfCurrYear(isPeopleDf){let date=new Date(curyear,0,1);return isPeopleDf&&(date=this.formatDate(date)),date},getLastDayOfCurrYear(isPeopleDf){let date=new Date(curyear,11,31);return isPeopleDf&&(date=this.formatDate(date)),date},initCalendar:function(calObj){var pageId=$("#"+calObj.outerdivId),calhtml=NewCalendar.Template.getCalendarHTML(calObj.calcontId,void 0,calObj);pageId.html(calhtml);var rarrClass="IC-ar-rgt",larrClass="IC-ar-lft";Calendar.showNewCalendar()&&(larrClass="PI_alft",rarrClass="PI_argt"),pageId.find(".ZPclose").on("click",function(){pageId.parent().hide()}),pageId.find(".ZPclr").on("click",function(){clearCalendarSelection()}),pageId.find("."+larrClass).on("click",function(){Calendar.previousMonth(calObj)}),pageId.find("."+rarrClass).on("click",function(){Calendar.nextMonth(calObj)}),this.daysObj=calObj.daysObj,this.constructCalendar(calObj)},initMonthlyCalendar:function(calObj){var currCalObj=$("#"+calObj.outerdivId).find("table.ZPUsel"),Obj=$("#"+calObj.outerdivId).find("#calmonth"),tmpcal=Calendar.currentObj.val();currCalObj.find("#header").find("span#calmonth").attr("box","2");var header=void 0!==calObj.curYear?calObj.curYear:tmpcal.getFullYear(),rarrClass="IC-ar-rgt",larrClass="IC-ar-lft";Calendar.showNewCalendar()&&(larrClass="PI_alft",rarrClass="PI_argt"),currCalObj.find("#moncalbody").html(Calendar.getMonthsHtml(void 0!==calObj.curMonth?calObj:tmpcal)),currCalObj.find("."+larrClass).on("click",function(){Calendar.eachyeartraversel(!1,Obj,calObj)}),currCalObj.find("."+rarrClass).on("click",function(){Calendar.eachyeartraversel(!0,Obj,calObj)}),currCalObj.find("#calbody").addClass("DNI"),currCalObj.find("#moncalbody").removeClass("DNI"),currCalObj.find("#yearcalbody").addClass("DNI"),currCalObj.find("#header").find("span#calmonth").html(header),$("#"+calObj.outerdivId).find("#calmonth").on("click",function(){Calendar.toggleCalView($(this),calObj)})},constructCalendar:function(calObj){var mode=calObj.mode;let isweekselectionenabled=calObj.weekselection,previousyear=calObj.curYear,nextyear=calObj.curYear,previousmonth=calObj.curMonth,nextmonth=calObj.curMonth;0==calObj.curMonth?(previousyear=calObj.curYear-1,previousmonth=11,nextmonth=1):calObj.curMonth>=11?(nextyear=calObj.curYear+1,previousmonth-=1,nextmonth=0):(previousmonth-=1,nextmonth=calObj.curMonth+1);let ndayofprevmonth=this.daysInMonth(previousyear,previousmonth);var fdayofmonth=this.getFirstDayofMonth(calObj.curYear,calObj.curMonth);calObj.constructOnWeekstarts&&weekstarts&&(fdayofmonth-=Number(weekstarts))<0&&(fdayofmonth+=7);var ndayofmonth=this.daysInMonth(calObj.curYear,calObj.curMonth);isweekselectionenabled?$("#"+calObj.outerdivId).find("table").addClass("zpwk_cal"):$("#"+calObj.outerdivId).find("table").addClass("zpday_cal"),$("#"+calObj.outerdivId).find("#calmonth").html(Calendar.months[calObj.curMonth]+" "+calObj.curYear),$("#"+calObj.outerdivId).find("#calmonth").off("click"),$("#"+calObj.outerdivId).find("#calmonth").on("click",function(){Calendar.toggleCalView($(this),calObj)}),$("#"+calObj.outerdivId).find("#calmonthnew").html(Calendar.months[calObj.curMonth]+" "+calObj.curYear);var tmpmonth=calObj.curMonth;tmpmonth++;var monthlist=$("#"+calObj.outerdivId).find(".zpmon");$(monthlist[0]).html(calObj.curYear),$("#"+calObj.outerdivId).find(".zpmonsel").hasClass("zpmon zpmonsel")?$("#"+calObj.outerdivId).find(".zpmonsel").removeClass("zpmon zpmonsel"):$("#"+calObj.outerdivId).find(".zpmonsel").addClass("zpmon zpmonsel"),$(monthlist[tmpmonth]).hasClass("zpmon zpmonsel")?$(monthlist[tmpmonth]).removeClass("zpmon zpmonsel"):$(monthlist[tmpmonth]).addClass("zpmon zpmonsel");var tdlist=$("#"+calObj.outerdivId).find("#calbody").find(".datelist").find("td.day"),startcal=!1,cal=1,i=0,nextcal=1,row=1,mindate=calObj.mindate,maxdate=calObj.maxdate;tdlist.each(function(){if(i!==fdayofmonth||startcal||(startcal=!0),startcal&&cal<=ndayofmonth){row=i%7==0?i/7:row;var dateStr=calObj.curMonth+1+"-"+cal+"-"+calObj.curYear;if(this.innerHTML='<div class="zpflc"><span class="num">'+cal+"</span></div>",$(this).attr("date",dateStr),"defaultcalendar"===mode&&void 0!==calObj.date)calObj.date.getMonth()+1+"-"+calObj.date.getDate()+"-"+calObj.date.getFullYear()===dateStr&&(void 0==isweekselectionenabled?$(this).css("background-color","#CCEEFF"):$(this).parent().addClass(calObj.daysObj.week));this.ddata=cal,this.mdata=calObj.curMonth,this.ydata=calObj.curYear;let now=new Date(calObj.curYear,calObj.curMonth,cal);this.className=calObj.daysObj.day,void 0==isweekselectionenabled?(cal+""==curdate+""&&curmonth+1+""==calObj.curMonth+1+""&&curyear+""==calObj.curYear+""&&(this.className=calObj.daysObj.day+" "+calObj.daysObj.today),cal+""==calObj.selectedDay+""&&calObj.selectedMonth+1+""==calObj.curMonth+1+""&&calObj.selectedYear+""==calObj.curYear+""&&(void 0===this.className?this.className=calObj.daysObj.day+" "+calObj.daysObj.selected:this.className+=" "+calObj.daysObj.selected),("string"==typeof mindate||mindate instanceof String)&&(mindate=new Date(mindate)),("string"==typeof maxdate||maxdate instanceof String)&&(maxdate=new Date(maxdate)),void 0!==mindate&&void 0!==maxdate&&(now<mindate||now>maxdate)?this.className+=" "+calObj.daysObj.ntallow:void 0!==mindate&&now<mindate?this.className+=" "+calObj.daysObj.ntallow:void 0!==maxdate&&now>maxdate&&(this.className+=" "+calObj.daysObj.ntallow),void 0==isweekselectionenabled&&(this.onclick=function(event){-1==this.className.indexOf(calObj.daysObj.ntallow)&&calObj.tdonclick&&"function"==typeof calObj.tdonclick&&calObj.tdonclick(this,calObj)})):1==isweekselectionenabled&&(cal+""==curdate+""&&curmonth+1+""==calObj.curMonth+1+""&&curyear+""==calObj.curYear+""&&$(this).parent().addClass(calObj.daysObj.day+" "+calObj.daysObj.week),cal+""==calObj.selectedDay+""&&calObj.selectedMonth+1+""==calObj.curMonth+1+""&&calObj.selectedYear+""==calObj.curYear+""&&(void 0===this.className?$(this).parent().addClass(calObj.daysObj.day+" "+calObj.daysObj.selectedweek):$(this).parent().addClass(calObj.daysObj.selectedweek))),cal++,28===i&&$($("#"+calObj.outerdivId).find("#calbody").children(".datelist").get(4)).show(),35===i&&$($("#"+calObj.outerdivId).find("#calbody").children(".datelist").get(5)).show(),42===i&&$($("#"+calObj.outerdivId).find("#calbody").children(".datelist").get(6)).show()}else{if(1==isweekselectionenabled&&28!==i&&35!==i&&42!==i){dateStr=void 0;let txt=1;if(i<fdayofmonth){txt=ndayofprevmonth-(fdayofmonth>0?fdayofmonth-1:fdayofmonth)+i;let prv=11==previousmonth?12:previousmonth+1;dateStr=prv+"-"+txt+"-"+previousyear,this.mdata=prv,this.ydata=previousyear}else if(i>=ndayofmonth){txt=nextcal;let nxt=0==nextmonth?1:nextmonth+1;dateStr=nxt+"-"+txt+"-"+nextyear,nextcal++,this.mdata=nxt,this.ydata=nextyear}this.innerHTML='<div class="zpflc"><span class="num">'+txt+"</span></div>",$(this).attr("date",dateStr),this.ddata=txt,this.className=calObj.daysObj.day}else this.innerHTML="",this.className=calObj.daysObj.day+" "+calObj.daysObj.empty;28===i&&$($("#"+calObj.outerdivId).find("#calbody").children(".datelist").get(4)).hide(),35===i&&$($("#"+calObj.outerdivId).find("#calbody").children(".datelist").get(5)).hide(),42===i&&$($("#"+calObj.outerdivId).find("#calbody").children(".datelist").get(6)).hide()}i++});var trlist=$("#"+calObj.outerdivId).find("#calbody").find("tr.datelist"),_workweekfrom=Number(workweekfrom),_workweekto=Number(workweekto);calObj.constructOnWeekstarts&&weekstarts&&((_workweekfrom-=Number(weekstarts))<0&&(_workweekfrom+=7),(_workweekto-=Number(weekstarts))<0&&(_workweekto+=7));var wday=new Array;if(_workweekfrom<_workweekto)for(i=_workweekfrom;i<=_workweekto;i++)wday.push(i);else{for(i=0;i<=_workweekto;i++)wday.push(i);for(i=_workweekfrom;i<=6;i++)wday.push(i)}$.each(trlist,function(trindex,data){var datatd=$(trlist.get(trindex)).find("td."+Calendar.daysObj.day+",td."+Calendar.daysObj.today+",td."+Calendar.daysObj.weekend+",td."+Calendar.daysObj.empty+",td."+Calendar.daysObj.leave);1==isweekselectionenabled&&(trlist[trindex].onclick=function(){calObj.tronclick&&"function"==typeof calObj.tronclick&&calObj.tronclick(this,calObj)}),$.each(datatd,function(tdindex,data){Calendar.inArray(tdindex,wday)?$(datatd.get(tdindex)).hasClass(Calendar.daysObj.empty)||$(datatd.get(tdindex)).addClass(Calendar.daysObj.day):$(datatd.get(tdindex)).hasClass(Calendar.daysObj.empty)||$(datatd.get(tdindex)).addClass(Calendar.daysObj.weekend)})}),$("#"+calObj.outerdivId).find("#caltimeview").find("input").on("keyup",function(){Calendar.updateDateTime($(this),calObj)}),calObj.callback&&"function"==typeof calObj.callback&&calObj.callback(calObj)},toggleCalView:function(Obj,calObj,nextview){var type=1;void 0===nextview&&(void 0!==Obj.attr("box")&&parseInt(Obj.attr("box"))<4&&(type=parseInt(Obj.attr("box"))),1==type?type=2:2==type?type=3:3==type&&(type=void 0!=calObj.type&&2==calObj.type?2:1)),ZPUtil.Validation.isEmpty(nextview)||(type=parseInt(nextview));var currCalObj=Obj.parents(".zpfcal").find("table.ZPUsel");currCalObj.find("#header").find("span#calmonth").attr("box",type+""),1==type?(currCalObj.find("#calbody").removeClass("DNI"),currCalObj.find("#moncalbody").addClass("DNI"),currCalObj.find("#yearcalbody").addClass("DNI")):2==type?(currCalObj.find("#calbody").addClass("DNI"),currCalObj.find("#moncalbody").removeClass("DNI"),currCalObj.find("#yearcalbody").addClass("DNI")):3==type&&(currCalObj.find("#calbody").addClass("DNI"),currCalObj.find("#moncalbody").addClass("DNI"),currCalObj.find("#yearcalbody").removeClass("DNI")),Calendar.constructCurCalView(Obj,type,calObj)},constructCurCalView:function(Obj,type,calObj){var currCalObj=Obj.parents(".zpfcal").find("table.ZPUsel"),tmpcal=Calendar.currentObj.val(),header=void 0!==calObj.curMonth?ZPDateTime.months_short[calObj.curMonth]+" "+calObj.curYear:ZPDateTime.months_short[tmpcal.getMonth()]+" "+tmpcal.getFullYear(),rarrClass="IC-ar-rgt",larrClass="IC-ar-lft";if(Calendar.showNewCalendar()&&(larrClass="PI_alft",rarrClass="PI_argt"),currCalObj.find("."+rarrClass).off("click"),currCalObj.find("."+larrClass).off("click"),1==type)Calendar.constructCalendar(calObj),currCalObj.find("."+larrClass).on("click",function(){Calendar.previousMonth(calObj)}),currCalObj.find("."+rarrClass).on("click",function(){Calendar.nextMonth(calObj)});else if(2==type)header=void 0!==calObj.curYear?calObj.curYear:tmpcal.getFullYear(),currCalObj.find("#moncalbody").html(Calendar.getMonthsHtml(void 0!==calObj.curMonth?calObj:tmpcal)),currCalObj.find("."+larrClass).on("click",function(){Calendar.eachyeartraversel(!1,Obj,calObj)}),currCalObj.find("."+rarrClass).on("click",function(){Calendar.eachyeartraversel(!0,Obj,calObj)});else if(3==type){var fromyear=void 0!==calObj.curYear?calObj.curYear:tmpcal.getFullYear(),toyear=void 0!==calObj.curYear?calObj.curYear+11:tmpcal.getFullYear()+11;header=fromyear+"&nbsp;-&nbsp;"+toyear,currCalObj.find("#yearcalbody").html(Calendar.getYearHtml(fromyear,toyear,void 0!==calObj.curYear?calObj.curYear:tmpcal.getFullYear(),calObj)),currCalObj.find("."+larrClass).on("click",function(){Calendar.traversemultiyear(!1,fromyear,toyear,Obj,calObj)}),currCalObj.find("."+rarrClass).on("click",function(){Calendar.traversemultiyear(!0,fromyear,toyear,Obj,calObj)})}currCalObj.find("#header").find("span#calmonth").html(header)},getMonthsHtml:function(calObj){var html='<tr><td colspan="7">',tempCal=new Date;return $.each(ZPDateTime.months_short,function(ind,str){html+='<span class="month ',ind===calObj.curMonth&&(html+=" active"),ind===tempCal.getMonth()&&calObj.curYear===tempCal.getFullYear()&&(html+=" today"),html+='" month="'+ind+'">'+str+"</span>"}),html+="</td><tr>",(html=$(html)).find("span").on("click",function(){Calendar.selectmonth(calObj,$(this))}),html},getYearHtml:function(from,to,curryear,calObj){for(var html='<tr><td colspan="7">',i=from;i<=to;i++)html+='<span class="year ',i===(new Date).getFullYear()&&(html+=" today"),i===curryear&&(html+=" active"),html+='" year="'+i+'">'+i+"</span>";return html+="</td></tr>",(html=$(html)).find("span").on("click",function(){Calendar.selectyear(calObj,$(this))}),html},highlightSelectNode:function(calObj,type){var Obj=$("#"+calObj.outerdivId),count=0;"month"===type?(Obj=Obj.find("#mnthView"),count=calObj.curMonth):"year"===type&&(Obj=Obj.find("#yearView"),count=calObj.curYear),Obj.find("tr").find("td").children().removeClass("active"),$(Obj.find("tr").find("td").children()[count]).addClass("active")},selectmonth:function(calObj,clickedObj){var month=clickedObj.attr("month"),Obj=$("#"+calObj.outerdivId).find("#calmonth");if(month<=11){calObj.curMonth=parseInt(month),calObj.clickedMonth=parseInt(month);var year=void 0!==calObj.curSelYear?parseInt(calObj.curSelYear):parseInt(calObj.curYear);calObj.curYear=year,calObj.clickedYear=year}void 0!=calObj.type&&2==calObj.type||(clickedObj.ddata=null!==calObj.selectedDay?calObj.selectedDay:calObj.curDate),clickedObj.mdata=calObj.curMonth,clickedObj.ydata=calObj.curYear,null!==calObj.selectedDay?"singlecalendar"===calObj.calcontId&&1!=calObj.weekselection?Calendar.selectDate(clickedObj,calObj):"fromcalendar"===calObj.calcontId?Calendar.selectFromDate(clickedObj,calObj):"tocalendar"===calObj.calcontId&&Calendar.selectToDate(clickedObj,calObj):void 0!=calObj.type&&2==calObj.type&&(Calendar.selectMonthSetValue(clickedObj,calObj),Calendar.hideSingleCalendar()),void 0!=calObj.type&&2==calObj.type||Calendar.toggleCalView(Obj,calObj,"1")},selectyear:function(calObj,clickedObj){var year=clickedObj.attr("year"),Obj=$("#"+calObj.outerdivId).find("#calmonth");void 0!==year&&(calObj.curYear=parseInt(year),calObj.clickedYear=parseInt(year)),void 0!=calObj.type&&2==calObj.type||(clickedObj.ddata=null!==calObj.selectedDay?calObj.selectedDay:calObj.curDate),clickedObj.mdata=null!==calObj.selectedMonth?calObj.selectedMonth:calObj.curMonth,clickedObj.ydata=calObj.curYear,"singlecalendar"===calObj.calcontId?void 0!=calObj.type&&2==calObj.type||1==calObj.weekselection?void 0!=calObj.type&&2!=calObj.type&&1!=calObj.weekselection&&Calendar.selectMonthSetValue(clickedObj,calObj):Calendar.selectDate(clickedObj,calObj):"fromcalendar"===calObj.calcontId?Calendar.selectFromDate(clickedObj,calObj):"tocalendar"===calObj.calcontId&&Calendar.selectToDate(clickedObj,calObj),Calendar.toggleCalView(Obj,calObj,"2")},eachyeartraversel:function(isIncrease,Obj,calObj){var header=void 0!==calObj.curSelYear?calObj.curSelYear:calObj.curYear;0!=header&&(isIncrease?header+=1:header-=1),calObj.curSelYear=header;var monthObj=Obj.parents(".zpfcal").find("table.ZPUsel").find("#moncalbody").find("tr").find("td");monthObj.children().removeClass("active"),monthObj.children().removeClass("today");var tempCal=new Date;void 0!==tempCal.getMonth()&&tempCal.getFullYear()===header&&monthObj.find("[month='"+tempCal.getMonth()+"']").addClass("today"),calObj.curYear===header&&monthObj.find("[month='"+calObj.curMonth+"']").addClass("active"),Obj.parents(".zpfcal").find("table.ZPUsel").find("#header").find("span#calmonth").attr("curryear",header+"").html(header)},traversemultiyear:function(isincrease,from,to,Obj,calObj){var start,end;from=void 0!==calObj.currgrpstart?calObj.currgrpstart:from,to=void 0!==calObj.currgrpend?calObj.currgrpend:to;isincrease?end=(start=to+1)+11:(start=from-12,end=from-1),calObj.currgrpstart=start,calObj.currgrpend=end,Obj.parents(".zpfcal").find("table.ZPUsel").find("#yearcalbody").html(Calendar.getYearHtml(start,end,void 0!==calObj.curYear?(new Date).getFullYear():tmpcal.getFullYear(),calObj));var yearObj=Obj.parents(".zpfcal").find("table.ZPUsel").find("#yearcalbody").find("tr").find("td");yearObj.children().removeClass("active"),yearObj.children().removeClass("today"),yearObj.find("[year='"+(new Date).getFullYear()+"']").addClass("today"),yearObj.find("[year='"+calObj.curYear+"']").addClass("active");var header=start+"&nbsp;-&nbsp;"+end;Obj.parents(".zpfcal").find("table.ZPUsel").find("#header").find("span#calmonth").attr("currselyear",header+"").html(header)},nextMonth:function(calObj){var month=calObj.curMonth,year=calObj.curYear;11===month?(calObj.curMonth=0,calObj.curYear=year+1):calObj.curMonth=month+1,calObj.clickedMonth=null,this.constructCalendar(calObj)},previousMonth:function(calObj){var month=calObj.curMonth,year=calObj.curYear;0===month?(calObj.curMonth=11,calObj.curYear=year-1):calObj.curMonth=month-1,calObj.clickedMonth=null,this.constructCalendar(calObj)},minstohrs:function(totaltime){var mins=totaltime%60,hrs=(totaltime-(mins=mins.toFixed(0)))/60;return(hrs=(hrs=(hrs=hrs.toFixed(0))<1?"00":hrs)>=1&&hrs<10?"0"+hrs:hrs)+":"+(mins=(mins=mins<1?"00":mins)>=1&&mins<10?"0"+mins:mins)},hrstomins:function(hours){if(ZPUtil.Validation.isEmpty(hours))return 0;var splitHours=hours.split(":");if(splitHours.length>1){var hrs=Number(splitHours[0]),mins=0,secs=0,minsSplit=splitHours[1].split(":");return minsSplit.length>1?(mins=Number(minsSplit[0]),secs=Number(minsSplit[1])):mins=Number(splitHours[1]),60*hrs+mins+secs/60}return 0},minstotimeIn24Hr:function(totaltime){var mins=totaltime%60,hrs=(totaltime-mins)/60;return(hrs=hrs<10?"0"+hrs:hrs)+":"+(mins=mins<10?"0"+mins:mins)},minstotime:function(totaltime,show12OnNight){var mins=totaltime%60,hrs=(totaltime-mins)/60,meridian="AM";return hrs>12?(hrs-=12,meridian="PM"):12===hrs&&(meridian="PM"),(hrs=(hrs=show12OnNight?hrs<1?"12":hrs:hrs<1?"00":hrs)>=1&&hrs<10?"0"+hrs:hrs)+":"+(mins=(mins=mins<1?"00":mins)>=1&&mins<10?"0"+mins:mins)+" "+meridian},minstotimeFormat:function(totaltime,show12OnNight){return Calendar.is12HrFormat()?Calendar.minstotime(totaltime,show12OnNight):Calendar.minstotimeIn24Hr(totaltime)},minstodecimal:function(totaltime){var mins=totaltime%60;return((totaltime-mins)/60+mins/60).toFixed(2)},timetomins:function(calhrs,calmins,ampm){if(-1!==calhrs.indexOf(":")){var splitTime=calhrs.split(":");splitTime[0]&&(calhrs=Number(splitTime[0])),splitTime[1]&&(calmins=Number(splitTime[1]))}var tottime=0;return"pm"===ampm?tottime=calhrs<12?60*(calhrs+12)+calmins:60*calhrs+calmins:"am"===ampm&&(tottime=calhrs>=12?60*(calhrs-12)+calmins:60*calhrs+calmins),{hrs:calhrs,mins:calmins,tottime:tottime}},inArray:function(str,arr){for(var key in str=str.toString(),arr){var tempstr=arr[key];if((tempstr=tempstr.toString())===str)return!0}return!1},getCurrentWeek:function(){var dateobj=new Date(curyear,curmonth,curdate),day=dateobj.getDay(),date=dateobj.getDate();return day<weekstarts&&(date-=7),this.weekfromdate=new Date(curyear,curmonth,curdate),this.weekfromdate.setDate(date-day+weekstarts),this.weektodate=new Date(curyear,curmonth,curdate),this.weektodate.setDate(date-day+6+weekstarts),{from:this.weekfromdate,to:this.weektodate}},getNextWeek:function(tmpDate){return void 0!==tmpDate&&(this.weektodate=tmpDate.to,this.weekfromdate=tmpDate.from),this.weektodate.setDate(this.weektodate.getDate()+7),this.weekfromdate.setDate(this.weekfromdate.getDate()+7),{from:this.weekfromdate,to:this.weektodate}},getPreviousWeek:function(tmpDate){return void 0!==tmpDate&&(this.weektodate=tmpDate.to,this.weekfromdate=tmpDate.from),this.weektodate.setDate(this.weektodate.getDate()-7),this.weekfromdate.setDate(this.weekfromdate.getDate()-7),{from:this.weekfromdate,to:this.weektodate}},getCurrentDay:function(){return this.daydate=new Date(curyear,curmonth,curdate),{day:this.daydate}},getNextDay:function(tmpDate){return void 0!==tmpDate&&(this.daydate=tmpDate.day),null===this.daydate&&(this.daydate=new Date(curyear,curmonth,curdate)),this.daydate.setDate(this.daydate.getDate()+1),{day:this.daydate}},getPreviousDay:function(tmpDate){return void 0!==tmpDate&&(this.daydate=tmpDate.day),null===this.daydate&&(this.daydate=new Date(curyear,curmonth,curdate)),this.daydate.setDate(this.daydate.getDate()-1),{day:this.daydate}},getCurrentMonth:function(){return this.tmpMonth=curmonth,this.tmpYear=curyear,this.monthfromdate=new Date(curyear,curmonth),this.monthfromdate.setDate(1),this.monthtodate=new Date(curyear,curmonth),this.monthtodate.setDate(new Date(curyear,curmonth+1,0).getDate()),{from:this.monthfromdate,to:this.monthtodate}},getNextMonth:function(tmpDate){return void 0!==tmpDate&&(this.monthtodate=tmpDate.to,this.monthfromdate=tmpDate.from,this.tmpMonth=this.monthfromdate.getMonth(),this.tmpYear=this.monthfromdate.getFullYear()),11===this.tmpMonth?(this.tmpMonth=0,this.tmpYear=this.tmpYear+1):this.tmpMonth=this.tmpMonth+1,this.monthfromdate=new Date(this.tmpYear,this.tmpMonth),this.monthfromdate.setDate(1),this.monthtodate=new Date(this.tmpYear,this.tmpMonth),this.monthtodate.setDate(new Date(this.tmpYear,this.tmpMonth+1,0).getDate()),{from:this.monthfromdate,to:this.monthtodate}},getPreviousMonth:function(tmpDate){return void 0!==tmpDate&&(this.monthtodate=tmpDate.to,this.monthfromdate=tmpDate.from,this.tmpMonth=this.monthfromdate.getMonth(),this.tmpYear=this.monthfromdate.getFullYear()),0===this.tmpMonth?(this.tmpMonth=11,this.tmpYear=this.tmpYear-1):this.tmpMonth=this.tmpMonth-1,this.monthfromdate=new Date(this.tmpYear,this.tmpMonth),this.monthfromdate.setDate(1),this.monthtodate=new Date(this.tmpYear,this.tmpMonth),this.monthtodate.setDate(new Date(this.tmpYear,this.tmpMonth+1,0).getDate()),{from:this.monthfromdate,to:this.monthtodate}},getCurrentYear:function(){return this.fromTmpYear=curyear,this.fromTmpMonth=0,this.fromTmpDay=1,this.toTmpYear=curyear,this.toTmpMonth=11,this.toTmpDay=31,this.yearfromdate=new Date(this.fromTmpYear,this.fromTmpMonth),this.yearfromdate.setDate(this.fromTmpDay),this.yeartodate=new Date(this.toTmpYear,this.toTmpMonth),this.yeartodate.setDate(new Date(this.toTmpYear,this.toTmpMonth,this.toTmpDay).getDate()),{from:this.yearfromdate,to:this.yeartodate}},getPreviousYear:function(tmpDate){return void 0!==tmpDate&&(this.yeartodate=tmpDate.to,this.yearfromdate=tmpDate.from,this.fromTmpYear=this.yearfromdate.getFullYear(),this.toTmpYear=this.yeartodate.getFullYear()),this.fromTmpYear<this.toTmpYear?(this.fromTmpYear=this.fromTmpYear-1,this.toTmpYear=this.fromTmpYear):(this.fromTmpYear=this.fromTmpYear-1,this.toTmpYear=this.toTmpYear-1),this.fromTmpMonth=0,this.fromTmpDay=1,this.toTmpMonth=11,this.toTmpDay=31,this.yearfromdate=new Date(this.fromTmpYear,this.fromTmpMonth,this.fromTmpDay),this.yeartodate=new Date(this.toTmpYear,this.toTmpMonth),this.yeartodate.setDate(new Date(this.toTmpYear,this.toTmpMonth,this.toTmpDay).getDate()),{from:this.yearfromdate,to:this.yeartodate}},getNextYear:function(tmpDate){return void 0!==tmpDate&&(this.yeartodate=tmpDate.to,this.yearfromdate=tmpDate.from,this.fromTmpYear=this.yearfromdate.getFullYear(),this.toTmpYear=this.yeartodate.getFullYear()),this.fromTmpYear<this.toTmpYear?(this.fromTmpYear=this.fromTmpYear+1,this.toTmpYear=this.fromTmpYear):(this.fromTmpYear=this.fromTmpYear+1,this.toTmpYear=this.toTmpYear+1),this.fromTmpMonth=0,this.fromTmpDay=1,this.toTmpMonth=11,this.toTmpDay=31,this.yearfromdate=new Date(this.fromTmpYear,this.fromTmpMonth,this.fromTmpDay),this.yeartodate=new Date(this.toTmpYear,this.toTmpMonth),this.yeartodate.setDate(new Date(this.toTmpYear,this.toTmpMonth,this.toTmpDay).getDate()),{from:this.yearfromdate,to:this.yeartodate}},getLastMonth:function(){return this.getCurrentMonth(),this.getPreviousMonth()},getLastYear:function(){return this.getCurrentYear(),this.getPreviousYear()},getLastWeek:function(){return this.getCurrentWeek(),this.getPreviousWeek()},getLastDay:function(){return this.getCurrentDay(),this.getPreviousDay()},getCurrentHalfMonth:function(){return this.tmpMonth=curmonth,this.tmpYear=curyear,this.monthfromdate=new Date(curyear,curmonth),curdate<=15?(this.monthfromdate.setDate(1),this.monthtodate=new Date(curyear,curmonth,15)):(this.monthfromdate.setDate(16),this.monthtodate=new Date(curyear,curmonth),this.monthtodate.setDate(new Date(curyear,curmonth+1,0).getDate())),{from:this.monthfromdate,to:this.monthtodate}},getNextHalfMonth:function(tmpDate){return void 0!==tmpDate&&(this.monthtodate=tmpDate.to,this.monthfromdate=tmpDate.from),this.monthtodate.getDate()>15?(11===this.tmpMonth?(this.tmpMonth=0,this.tmpYear=this.tmpYear+1):this.tmpMonth=this.tmpMonth+1,this.monthfromdate=new Date(this.tmpYear,this.tmpMonth,1),this.monthtodate=new Date(this.tmpYear,this.tmpMonth,15)):(this.monthfromdate=new Date(this.tmpYear,this.tmpMonth,16),this.monthtodate=new Date(this.tmpYear,this.tmpMonth),this.monthtodate.setDate(new Date(this.tmpYear,this.tmpMonth+1,0).getDate())),{from:this.monthfromdate,to:this.monthtodate}},getPreviousHalfMonth:function(tmpDate){return void 0!==tmpDate&&(this.monthtodate=tmpDate.to,this.monthfromdate=tmpDate.from),this.monthfromdate.getDate()<15?(0===this.tmpMonth?(this.tmpMonth=11,this.tmpYear=this.tmpYear-1):this.tmpMonth=this.tmpMonth-1,this.monthfromdate=new Date(this.tmpYear,this.tmpMonth,16),this.monthtodate=new Date(this.tmpYear,this.tmpMonth),this.monthtodate.setDate(new Date(this.tmpYear,this.tmpMonth+1,0).getDate())):(this.monthfromdate=new Date(this.tmpYear,this.tmpMonth,1),this.monthtodate=new Date(this.tmpYear,this.tmpMonth,15)),{from:this.monthfromdate,to:this.monthtodate}},getCurrentWeekdays:function(){this.getCurrentWeek();var days=new Array,tempdate=this.weekfromdate;days.push(new Date(tempdate));for(var i=0;i<6;i++)tempdate.setDate(tempdate.getDate()+1),days.push(new Date(tempdate));return days},getPreviousWeekdays:function(){for(var days=new Array,tempdate=this.weekfromdate,i=0;i<7;i++)tempdate.setDate(tempdate.getDate()+1),days.push(new Date(tempdate));return days},getNextWeekdays:function(){for(var days=new Array,tempdate=this.weekfromdate,i=0;i<7;i++)tempdate.setDate(tempdate.getDate()+1),days.push(new Date(tempdate));return days},formatDate:function(cdate){var test={},tmpDate=uidateFormat,udate=uidateFormat.match(/%./g),date=cdate.getDate(),month=cdate.getMonth(),fullyear=cdate.getFullYear(),year=cdate.getFullYear();year>2e3?year-=2e3:2e3===year?year="00":year-=1900,test["%b"]=Calendar.months[month],date<10&&(date="0"+date),(month+=1)<10&&(month="0"+month),year>0&&year<10&&(year="0"+year),test["%d"]=date,test["%m"]=month,test["%Y"]=fullyear,test["%y"]=year;for(var i=0;i<udate.length;i++)tmpDate=tmpDate.replace(udate[i],test[udate[i]]);return tmpDate},formatMonth:function(cdate){var test={},tmpDate="%d-%b-%Y",udate="%d-%b-%Y".match(/%./g),month=cdate.getMonth(),fullyear=cdate.getFullYear(),year=cdate.getFullYear();year>2e3?year-=2e3:2e3===year?year="00":year-=1900,test["%b"]=Calendar.months[month],(month+=1)<10&&(month="0"+month),year>0&&year<10&&(year="0"+year),test["%m"]=month,test["%Y"]=fullyear,test["%y"]=year;for(var i=0;i<udate.length;i++)"%d"!=udate[i]&&(tmpDate=tmpDate.replace(udate[i],test[udate[i]]));var dateIndx=tmpDate.indexOf("%d");return 0==dateIndx?tmpDate=tmpDate.substring(3):dateIndx>0&&(tmpDate=tmpDate.substring(0,dateIndx-1)+tmpDate.substring(dateIndx+2)),tmpDate},parseDate:function(str,uiformat,timeNeeded){for(var today=new Date,tmpDate=str.split(/\W+/),udate=uiformat.match(/%./g),date=-1,month=-1,year=-1,i=0;i<tmpDate.length;i++)switch(udate[i]){case"%d":date=tmpDate[i];break;case"%b":for(var j=0;j<12;j++)if(Calendar.months[j].toLowerCase()===tmpDate[i].toLowerCase()){month=j;break}break;case"%m":month=tmpDate[i]-1;break;case"%Y":case"%y":(year=Number(tmpDate[i]))>=0&&year<100&&(year+=year>69?1900:2e3)}if(year%4==0&&1==month&&date>29)return today;if(-1===date||date<=0||date>31||-1===month||month<0||month>12||-1===year||year<=0)return today;if(timeNeeded){var hrs=0,mins=0,secs=0,time=str.split(" ")[1].split(":");return isNaN(time[0])||(hrs=time[0]),isNaN(time[1])||(mins=time[1]),isNaN(time[2])||(secs=time[2]),new Date(year,month,date,hrs,mins,secs)}return new Date(year,month,date)},parseMonth:function(str,uiformat){for(var today=new Date,tmpDate=str.split(/\W+/),udate=uiformat.match(/%./g),month=-1,year=-1,i=0,formatItr=0;i<tmpDate.length;)switch(udate[formatItr]){case"%d":formatItr++;break;case"%b":for(var j=0;j<12;j++)if(Calendar.months[j].toLowerCase()===tmpDate[i].toLowerCase()){month=j;break}i++,formatItr++;break;case"%m":month=tmpDate[i]-1,i++,formatItr++;break;case"%Y":case"%y":(year=Number(tmpDate[i]))>=0&&year<100&&(year+=year>69?1900:2e3),i++,formatItr++}return-1===month||month<0||month>12||-1===year||year<=0?today:new Date(year,month,1)},equalsTo:function(compareToDate,date){return compareToDate.getDate()===date.getDate()&&compareToDate.getMonth()===date.getMonth()&&compareToDate.getFullYear()===date.getFullYear()&&compareToDate.getHours()===date.getHours()&&compareToDate.getMinutes()===date.getMinutes()},isvalidDate:function(chkdate){var ufmt=uidateFormat.match(/%./g),udate=chkdate.split(/\W+/),date=0,month=0,year=0;if(udate.length>3)return!1;for(var i=0;i<udate.length;i++)switch(ufmt[i]){case"%d":date=udate[i];break;case"%m":month=udate[i];break;case"%Y":case"%y":year=udate[i];break;case"%b":month=udate[i];for(var j=0;j<Calendar.months.length;j++)month===Calendar.months[j]&&(month=j+1)}var valid=!0;return 0===date||date.match(/^([0-9]{1,2})$/i)||(valid=!1),month.toString().match(/^([0-9]{1,2})$/i)||(valid=!1),year.toString().match(/^([0-9]{2}|[0-9]{4})$/i)||(valid=!1),0!==date&&(date=Math.round(date)),month=Math.round(month),(year=Math.round(year))<100&&(year+=2e3),(month<1||month>12)&&(valid=!1),(date>this.daysInMonth(year,month-1)||0==date)&&(valid=!1),valid},constructCalforMonth:function(month){var year=this.curYear;this.curMonth=month,this.constructCalendar(year,month)},getMonthDaysCount:function(month,year){var days=31;return 1===month?days=year%4==0?29:28:3!==month&&5!==month&&8!==month&&10!==month||(days=30),days},convertLongToDate:function(dateLong){var date=new Date;return date.setTime(dateLong),this.formatDate(date)},convertHourFormat:function(value){if(!Calendar.is12HrFormat())return value;try{var timeJson,tempVal=value.toLowerCase(),is12HrFormat=!1;-1===tempVal.indexOf("am")&&-1===tempVal.indexOf("pm")||(is12HrFormat=!0);var time=value.split(" ");if(is12HrFormat)timeJson=Calendar.timetomins(time[1],0,time[2].toLowerCase());else{var meridian="am";Calendar.parseDate(value,uidateFormat,!0).getHours()>12&&(meridian="pm"),timeJson=Calendar.timetomins(time[1],0,meridian)}value=time[0]+" "+Calendar.minstohrs(timeJson.tottime)+":00"}catch(e){}return value},convertTo12Hours:function(value){try{if(!Calendar.is12HrFormat())return value;var dateObj=Calendar.parseDate(value,uidateFormat,!0),formatDate=Calendar.formatDate(dateObj),hrs=dateObj.getHours(),amPm=hrs>11?"PM":"AM";return"PM"===amPm&&12!==hrs&&(hrs=dateObj.getHours()%12),formatDate+=" "+Calendar.twoDig(hrs)+":"+Calendar.twoDig(dateObj.getMinutes())+" "+amPm}catch(e){return value}},twoDig:function(val){return val<10?"0"+val:val},is12HrFormat:function(){return"hh:mm a"===timeFormat},getPeopleDateFormat:function(date,isParsed,df){return isParsed||(void 0===df&&(df=uidateFormat),date=Calendar.parseDate(date,df)),Calendar.twoDig(date.getDate())+" "+months[date.getMonth()]+" "+date.getFullYear()},convertLongToDateTime:function(value){var dateObj=new Date(value),formatDate=Calendar.formatDate(dateObj),hrs=dateObj.getHours(),amPm=hrs>11?"PM":"AM";return"PM"===amPm&&12!==hrs&&(hrs=dateObj.getHours()%12),formatDate+=" "+Calendar.twoDig(hrs)+":"+Calendar.twoDig(dateObj.getMinutes())+" "+amPm},findPostion:function(obj,tempcal){var itemleft=$(obj).offset().left,calWidth=tempcal.width(),itemtop=$(obj).offset().top;$(obj).attr("caltype");tempcal.off("click"),tempcal.on("click",function(event){event.stopPropagation()}),tempcal.removeClass("DN"),itemtop+$(obj).height()+tempcal.height()>$(window).height()?(itemtop-=tempcal.height(),itemtop-=$(obj).height()/2):(itemtop+=$(obj).height(),itemtop+=$(obj).height()/2);var winWidth=window.innerWidth;return calWidth+itemleft>winWidth&&(itemleft=itemleft-(calWidth+itemleft-winWidth)-10),{itemleft:itemleft,itemtop:itemtop}}},daysObj={empty:"empty",weekend:"weekend",day:"day",today:"today",leave:"zpcalholi",selected:"leave",ntallow:"ntallow",week:"this_wk",selectedweek:"sel_wk"};Calendar.currentObj=null,Calendar.setUpCalendar=function(event,obj,type,callback,selectCallback,hiddenCallback,settingObj){ZPeople.stopEvents(event),Calendar.currentObj=$(obj),Calendar.currentObj.off("keyup"),Calendar.currentObj.on("keyup",function(event){Calendar.renderSingleCalendar(type,callback,selectCallback,hiddenCallback,settingObj)}),Calendar.renderSingleCalendar(type,callback,selectCallback,hiddenCallback,settingObj)},Calendar.renderSingleCalendar=function(type,callback,selectCallback,hiddenCallback,settingObj){$("#singlecalendar").remove();var tempcal=NewCalendar.Template.getSingleCalendar(void 0,void 0,!(!settingObj||!settingObj.constructOnWeekstarts));tempcal.attr("id","singlecalendar"),tempcal.addClass("DN"),$("body").append(tempcal);var calObj=new Calendar.calObj;if(void 0!==type&&2===type&&(calObj.type=type),tmpcal=$(Calendar.currentObj).is("input")?Calendar.currentObj.val():Calendar.currentObj.text().trim()){if(void 0!=calObj.type&&2==calObj.type){tmpcal=Calendar.parseMonth(tmpcal,"%d-%b-%Y")}else if(settingObj&&1==settingObj.weekselection){var splitFT,from,loc=tmpcal.indexOf("-");loc<5&&-1!=loc&&(from=(splitFT=tmpcal.split("-"))[0]+"-"+splitFT[1]+"-"+splitFT[2],splitFT.length>3&&splitFT[3]+"-"+splitFT[4]+"-"+splitFT[5]),loc>=11&&-1!=loc&&1==settingObj.attendance&&(from=(splitFT=tmpcal.split("-"))[0].trim(),3==splitFT.length&&splitFT[2].trim()),from&&(tmpcal=ZPUtil.Validation.isDate(from)?Calendar.parseDate(ZPUtil.Validation.isDate(from)?from:Calendar.getCurrentDate(!0),uidateFormat):Calendar.parseDate(ZPUtil.Validation.isDate(tmpcal)?tmpcal:Calendar.getCurrentDate(!0),uidateFormat),calObj.selectedDay=calObj.curDate=tmpcal.getDate())}else tmpcal=Calendar.parseDate(ZPUtil.Validation.isDate(tmpcal)?tmpcal:Calendar.getCurrentDate(!0),uidateFormat),calObj.selectedDay=calObj.curDate=tmpcal.getDate();calObj.selectedMonth=calObj.curMonth=tmpcal.getMonth(),calObj.selectedYear=calObj.curYear=tmpcal.getFullYear()}else void 0!=calObj.type&&2==calObj.type||(calObj.curDate=(new Date).getDate()),calObj.curMonth=(new Date).getMonth(),calObj.curYear=(new Date).getFullYear();if(calObj.calcontId="singlecalendar",calObj.outerdivId="singlecalendar",calObj.daysObj=daysObj,calObj.divid="caldiv",calObj.callback=callback,calObj.selectCallback=selectCallback,calObj.tdonclick=Calendar.selectDate,calObj.tronclick=Calendar.selectWeek,calObj.hiddenCallback=hiddenCallback,calObj.totaldata=!0,calObj.prearrow="IC-ar-lft",calObj.nextarrow="IC-ar-rgt",void 0!==settingObj&&(calObj.mindate=settingObj.mindate,calObj.maxdate=settingObj.maxdate,calObj.weekselection=settingObj.weekselection,settingObj.constructOnWeekstarts&&(calObj.constructOnWeekstarts=settingObj.constructOnWeekstarts),void 0!=settingObj.selectedDate?(tmpcal=new Date(settingObj.selectedDate),calObj.selectedDay=calObj.curDate=tmpcal.getDate(),calObj.selectedMonth=calObj.curMonth=tmpcal.getMonth(),calObj.selectedYear=calObj.curYear=tmpcal.getFullYear()):void 0!=settingObj.fromDate&&void 0!=settingObj.toDate&&(tmpcal=new Date(settingObj.fromDate),calObj.selectedDay=calObj.curDate=tmpcal.getDate(),calObj.selectedMonth=calObj.curMonth=tmpcal.getMonth(),calObj.selectedYear=calObj.curYear=tmpcal.getFullYear(),calObj.fromDate=Calendar.isvalidDate(settingObj.fromDate),calObj.toDate=Calendar.isvalidDate(settingObj.toDate))),void 0!=calObj.type&&2==calObj.type?Calendar.initMonthlyCalendar(calObj):Calendar.initCalendar(calObj),void 0!==type&&1===type)if($("#singlecalendar").find(".monnav1").find(".error-clr").removeClass("error-clr"),$("#singlecalendar").find(".monnav1,#cal_close").show(),""===$(Calendar.currentObj).val()){var timeObj=Calendar.getTime(),hrs=$("#singlecalendar").find(".monnav1").find("input");$(hrs[0]).val(timeObj.hours),$(hrs[1]).val(timeObj.minutes),"hh:mm a"===timeFormat?$(hrs[2]).val(timeObj.isampm.toUpperCase()):$(hrs[2]).val(timeObj.seconds)}else{var tmpcal,newTime=$("#singlecalendar td input"),splitFull=(tmpcal=Calendar.currentObj.val()).split(" "),splitTime=splitFull[1].split(":"),isValid=Calendar.validateTime(splitTime[0],"hrs");$(newTime[0]).val(splitTime[0]),isValid||$(newTime[0]).addClass("error-clr"),isValid=Calendar.validateTime(splitTime[1],"mins"),$(newTime[1]).val(splitTime[1]),isValid||$(newTime[1]).addClass("error-clr"),Calendar.is12HrFormat()?(isValid=Calendar.validateTime(splitFull[2],"ampm"),$(newTime[2]).val(splitFull[2]),isValid||$(newTime[2]).addClass("error-clr")):(isValid=Calendar.validateTime(splitTime[2],"sec"),$(newTime[2]).val(splitTime[2]),isValid||$(newTime[2]).addClass("error-clr")),tmpcal=Calendar.parseDate(tmpcal,uidateFormat),calObj.curDate=tmpcal.getDate(),calObj.curMonth=tmpcal.getMonth(),calObj.curYear=tmpcal.getFullYear()}else $("#singlecalendar").find(".monnav1,#cal_close").hide();var posObj=Calendar.findPostion(Calendar.currentObj,tempcal);$("#singlecalendar").show(),$("#singlecalendar").css("left",posObj.itemleft),$("#singlecalendar").css("top",posObj.itemtop),$(".ZPcalsha").after($('<div class="zpohi" id="calScrollStop"></div>'))},Calendar.setUpDoubleCalendar=function(event,obj,type,callback,selectCallback,hiddenCallback,settingObj){ZPeople.stopEvents(event),Calendar.currentObj=$(obj),Calendar.currentObj.attr("maxlength","23"),Calendar.currentObj.off("keyup"),Calendar.currentObj.on("keyup",function(event){var splitFT,from,tmpcal=Calendar.currentObj.val();if(tmpcal){var loc=tmpcal.indexOf("-");loc<5&&-1!=loc?(from=(splitFT=tmpcal.split("-"))[0]+"-"+splitFT[1]+"-"+splitFT[2],splitFT.length>3&&splitFT[3]+"-"+splitFT[4]+"-"+splitFT[5]):(from=(splitFT=tmpcal.split("-"))[0],splitFT[1]),Calendar.currentObj.data("fdate",from)}Calendar.renderDoubleCalendar(type,callback,selectCallback,hiddenCallback,settingObj)}),Calendar.renderDoubleCalendar(type,callback,selectCallback,hiddenCallback,settingObj)},Calendar.renderDoubleCalendar=function(type,callback,selectCallback,hiddenCallback,settingObj){$("#doublecalendar").remove();var splitFT,from,to,tempcal=NewCalendar.Template.getDoubleCalendar();if(tempcal.attr("id","doublecalendar"),tempcal.addClass("DN"),$("body").append(tempcal),tmpcal=Calendar.currentObj.val()){var loc=tmpcal.indexOf("-");loc<5&&-1!=loc?(from=(splitFT=tmpcal.split("-"))[0]+"-"+splitFT[1]+"-"+splitFT[2],splitFT.length>3&&(to=splitFT[3]+"-"+splitFT[4]+"-"+splitFT[5])):(from=(splitFT=tmpcal.split("-"))[0],to=splitFT[1]),null===to&&(to=Calendar.parseDate(new Date,uidateFormat))}var calObj=new Calendar.calObj,tmpcal=Calendar.currentObj.val();from?(from=Calendar.parseDate(from,uidateFormat),calObj.selectedDay=calObj.curDate=from.getDate(),calObj.selectedMonth=calObj.curMonth=from.getMonth(),calObj.selectedYear=calObj.curYear=from.getFullYear()):(calObj.curDate=(new Date).getDate(),calObj.curYear=(new Date).getFullYear(),calObj.curMonth=(new Date).getMonth()),calObj.calcontId="fromcalendar",calObj.outerdivId="fromcalendar",calObj.daysObj=daysObj,calObj.divid="caldiv",calObj.tdonclick=Calendar.selectFromDate,calObj.callback=callback,calObj.selectCallback=selectCallback,calObj.hiddenCallback=hiddenCallback,calObj.totaldata=!0,calObj.prearrow="IC-ar-lft",calObj.nextarrow="IC-ar-rgt",calObj.currentObj=Calendar.currentObj,void 0!==settingObj&&(calObj.mindate=settingObj.mindate,calObj.maxdate=settingObj.maxdate),Calendar.initCalendar(calObj);calObj=new Calendar.calObj;to?(to=Calendar.parseDate(to,uidateFormat),calObj.selectedDay=calObj.curDate=to.getDate(),calObj.selectedMonth=calObj.curMonth=to.getMonth(),calObj.selectedYear=calObj.curYear=to.getFullYear()):(calObj.curDate=(new Date).getDate(),calObj.curYear=(new Date).getFullYear(),calObj.curMonth=(new Date).getMonth()),calObj.calcontId="tocalendar",calObj.outerdivId="tocalendar",calObj.callback=callback,calObj.selectCallback=selectCallback,calObj.hiddenCallback=hiddenCallback,calObj.daysObj=daysObj,calObj.divid="caldiv",calObj.tdonclick=Calendar.selectToDate,calObj.totaldata=!0,calObj.prearrow="IC-ar-lft",calObj.nextarrow="IC-ar-rgt",void 0!==settingObj&&(calObj.mindate=settingObj.mindate,calObj.maxdate=settingObj.maxdate),Calendar.initCalendar(calObj);var posObj=Calendar.findPostion(Calendar.currentObj,tempcal);$("#doublecalendar").show(),$("#doublecalendar").css("left",posObj.itemleft),$("#doublecalendar").css("top",posObj.itemtop),$(".ZPcalsha").after($('<div class="zpohi" id="calScrollStop"></div>'))},Calendar.selectWeek=function(obj,calObj){var tmpDateObj=new Date;let tdlist=$(obj).find("td");if(7==tdlist.length){let fromdate=new Date($(tdlist[0]).attr("date")),todate=new Date($(tdlist[6]).attr("date"));if(void 0!=fromdate&&void 0!==todate){var tmpDate=Calendar.formatDate(fromdate)+"-"+Calendar.formatDate(todate);Calendar.setDateTime(tmpDate),$("#singlecalendar").find(".monnav1").is(":hidden")&&$("#singlecalendar").find("#calbody").is(":visible")?Calendar.hideSingleCalendar():$(obj).addClass("selweek"),calObj.fromDate=fromdate,calObj.toDate=todate,calObj.selectCallback&&"function"==typeof calObj.selectCallback&&calObj.selectCallback(tmpDateObj,Calendar.currentObj,calObj),calObj.hiddenCallback&&"function"==typeof calObj.hiddenCallback&&calObj.hiddenCallback(tmpDateObj,Calendar.currentObj,calObj)}}},Calendar.selectDate=function(obj,calObj){var tmpDateObj=new Date;calObj.selectedDay=obj.ddata,void 0===calObj.clickedMonth||null===calObj.clickedMonth?calObj.selectedMonth=obj.mdata:calObj.selectedMonth=calObj.clickedMonth,void 0===calObj.clickedYear||null===calObj.clickedYear?calObj.selectedYear=obj.ydata:calObj.selectedYear=calObj.clickedYear,tmpDateObj.setFullYear(calObj.selectedYear,calObj.selectedMonth,calObj.selectedDay);var tmpDate=Calendar.formatDate(tmpDateObj),valid=!0,time=null;if($("#singlecalendar").find(".monnav1").is(":visible")){$("#singlecalendar").find(".error-clr").removeClass("error-clr");var hrs=$("#singlecalendar").find(".monnav1").find("input"),hours=$(hrs[0]).val(),minutes=$(hrs[1]).val(),seconds=Calendar.is12HrFormat()?"":$(hrs[2]).val(),isampm=Calendar.is12HrFormat()?$(hrs[2]).val():"";Calendar.validateTime(hours,"hrs")||(valid=!1,$(hrs[0]).addClass("error-clr")),Calendar.validateTime(minutes,"mins")||(valid=!1,$(hrs[1]).addClass("error-clr")),Calendar.validateTime(isampm,"ampm")||(valid=!1,$(hrs[2]).addClass("error-clr")),Calendar.validateTime(seconds,"mins")||(valid=!1,$(hrs[2]).addClass("error-clr")),(Calendar.is12HrFormat()?""===hours&&""===minutes&&""===isampm:""===hours&&""===minutes&&""===seconds)&&(valid=!0),valid&&(time=Calendar.getSelectedTime(hours,minutes,isampm,seconds))}valid&&(null!==time&&(tmpDate=tmpDate+" "+time),Calendar.setDateTime(tmpDate,calObj),$("#singlecalendar").find(".monnav1").is(":hidden")&&null===time&&$("#singlecalendar").find("#calbody").is(":visible")?Calendar.hideSingleCalendar():($("#singlecalendar").find(".leave").removeClass("leave"),$(obj).addClass("leave"))),calObj.selectCallback&&"function"==typeof calObj.selectCallback&&calObj.selectCallback(tmpDateObj,Calendar.currentObj,calObj),calObj.hiddenCallback&&"function"==typeof calObj.hiddenCallback&&calObj.hiddenCallback(tmpDateObj,Calendar.currentObj,calObj)},Calendar.selectMonthSetValue=function(obj,calObj){var tmpDateObj=new Date;void 0===calObj.clickedMonth||null===calObj.clickedMonth?calObj.selectedMonth=obj.mdata:calObj.selectedMonth=calObj.clickedMonth,void 0===calObj.clickedYear||null===calObj.clickedYear?calObj.selectedYear=obj.ydata:calObj.selectedYear=calObj.clickedYear,tmpDateObj.setFullYear(calObj.selectedYear,calObj.selectedMonth,1);var tmpMonth=Calendar.formatMonth(tmpDateObj);Calendar.setDateTime(tmpMonth,calObj),calObj.selectCallback&&"function"==typeof calObj.selectCallback&&calObj.selectCallback(tmpDateObj,Calendar.currentObj,calObj),calObj.hiddenCallback&&"function"==typeof calObj.hiddenCallback&&calObj.hiddenCallback(tmpDateObj,Calendar.currentObj,calObj)},Calendar.updateDateTime=function(obj,calObj){if($("#singlecalendar").find(".monnav1").is(":visible")){var value=$(obj).val();$(obj).removeClass("error-clr");var type="hrs";if("minutes"===$(obj).attr("id")?type="mins":"ampm"===$(obj).attr("id")?type="ampm":"seconds"===$(obj).attr("id")&&(type="sec"),Calendar.validateTime(value,type)){var inputTime=$("#singlecalendar").find(".monnav1").find("input"),hours=$(inputTime[0]).val(),minutes=$(inputTime[1]).val(),isampm=Calendar.is12HrFormat()?$(inputTime[2]).val():"",seconds=Calendar.is12HrFormat()?"":$(inputTime[2]).val(),time=Calendar.getSelectedTime(hours,minutes,isampm,seconds);if(null!==time){var tmpDate=null;if(null===(tmpDate=$(Calendar.currentObj).is("input")?Calendar.currentObj.val():Calendar.currentObj.text())||""===tmpDate.trim()){var tmpDateObj=new Date,tdObj=$("#singlecalendar").find(".today")[0];tmpDateObj.setFullYear(tdObj.ydata,tdObj.mdata,tdObj.ddata),tmpDate=Calendar.formatDate(tmpDateObj)}else tmpDate=tmpDate.split(" ")[0];tmpDate=tmpDate+" "+time,Calendar.setDateTime(tmpDate,calObj),calObj.selectCallback&&"function"==typeof calObj.selectCallback&&calObj.selectCallback(tmpDateObj,Calendar.currentObj),calObj.hiddenCallback&&"function"==typeof calObj.hiddenCallback&&calObj.hiddenCallback(tmpDateObj,Calendar.currentObj)}}else $(obj).addClass("error-clr")}},Calendar.validateTime=function(value,type){var isValid=!1;if("hrs"===type){var hrsRegex=Calendar.is12HrFormat()?Calendar.hrs12regex:Calendar.hrs24regex;value.match(hrsRegex)&&(isValid=!0)}else"mins"===type||"sec"===type?value.match(Calendar.minregex)&&(isValid=!0):"ampm"===type&&(""===value.trim()||value.match(Calendar.ampmregex))&&(isValid=!0);return isValid},Calendar.getSelectedTime=function(hours,minutes,isampm,seconds,date){if(Calendar.is12HrFormat()?""===hours&&""===minutes&&""===isampm:""===hours&&""===minutes&&""===seconds){var timeObj=Calendar.getTime(date);hours=timeObj.hours,minutes=timeObj.minutes,isampm=timeObj.isampm,seconds=timeObj.seconds}return hours=""===hours?"00":hours,minutes=""===minutes?"00":minutes,isampm=""===isampm?"AM":isampm,seconds=""===seconds?"00":seconds,Calendar.is12HrFormat()?hours+":"+minutes+" "+isampm.toUpperCase():hours+":"+minutes+":"+seconds},Calendar.setDateTime=function(tmpDate,calObj){Calendar.showNewCalendar()?-1!=Layout.Page.hash.indexOf("#reports/")&&($(Calendar.currentObj).is("input")?Calendar.currentObj.val(tmpDate):Calendar.currentObj.text(" "+tmpDate)):(ZPForm.Field.closeconfmsg(!0),$(Calendar.currentObj).is("input")?Calendar.currentObj.val(tmpDate):Calendar.currentObj.text(" "+tmpDate))},Calendar.getTime=function(date){void 0==date&&(date=new Date);var hours=date.getHours(),minutes=date.getMinutes(),seconds=date.getSeconds(),isampm="";return"hh:mm a"===timeFormat?(isampm="AM",hours>=12&&(isampm="PM"),0===(hours%=12)&&(hours=12)):seconds<10&&(seconds="0"+seconds),hours<10&&(hours="0"+hours),minutes<10&&(minutes="0"+minutes),{hours:hours,minutes:minutes,seconds:seconds,isampm:isampm}},Calendar.selectFromDate=function(obj,calObj){""===Calendar.currentObj.val()&&Calendar.currentObj.removeData();var tmpDateObj=new Date;calObj.selectedDay=obj.ddata,void 0===calObj.clickedMonth||null===calObj.clickedMonth?calObj.selectedMonth=obj.mdata:calObj.selectedMonth=calObj.clickedMonth,void 0===calObj.clickedYear||null===calObj.clickedYear?calObj.selectedYear=obj.ydata:calObj.selectedYear=calObj.clickedYear,tmpDateObj.setFullYear(calObj.selectedYear,calObj.selectedMonth,calObj.selectedDay),tmpDate=Calendar.formatDate(tmpDateObj),Calendar.currentObj.data("fdate",tmpDate);var date=tmpDate;Calendar.currentObj.data("tdate")&&(date+="-"+Calendar.currentObj.data("tdate")),Calendar.currentObj.val(date),this.selectCallback&&"function"==typeof this.selectCallback&&(calObj.clickedEle=obj,this.selectCallback(tmpDateObj,calObj))},Calendar.selectToDate=function(obj,calObj){""===Calendar.currentObj.val()&&Calendar.currentObj.removeData();var tmpDateObj=new Date;calObj.selectedDay=obj.ddata,void 0===calObj.clickedMonth||null===calObj.clickedMonth?calObj.selectedMonth=obj.mdata:calObj.selectedMonth=calObj.clickedMonth,void 0===calObj.clickedYear||null===calObj.clickedYear?calObj.selectedYear=obj.ydata:calObj.selectedYear=calObj.clickedYear,tmpDateObj.setFullYear(calObj.selectedYear,calObj.selectedMonth,calObj.selectedDay),tmpDate=Calendar.formatDate(tmpDateObj),Calendar.currentObj.data("tdate",tmpDate);var date=tmpDate;Calendar.currentObj.data("fdate")&&(date=Calendar.currentObj.data("fdate")+"-"+date),Calendar.currentObj.val(date),this.selectCallback&&"function"==typeof this.selectCallback&&(calObj.clickedEle=obj,this.selectCallback(tmpDateObj,calObj)),Calendar.currentObj.data("fdate")&&Calendar.currentObj.data("tdate")&&$("#doublecalendar").find("#fromcalendar").find("#calbody").is(":visible")&&$("#doublecalendar").find("#tocalendar").find("#calbody").is(":visible")&&(this.hiddenCallback&&"function"==typeof this.hiddenCallback&&this.hiddenCallback(tmpDateObj,calObj),Calendar.hideDoubleCalendar())},Calendar.hideDoubleCalendar=function(){$("#doublecalendar").hide(),$('[id="calScrollStop"]').remove()},Calendar.hideSingleCalendar=function(){$("#singlecalendar").find(".error-clr").removeClass("error-clr"),$("#singlecalendar").hide(),$('[id="calScrollStop"]').remove()},Calendar.showNewCalendar=function(){return showNewTab&&ZPOnboarding?ZPUtil.Validation.isEmpty(ZPOnboarding.tabsJson):showNewTab};var ZPComponent={};(ZPComponent={ALL_DATA:void 0,load:function(){$.ajax({type:"POST",async:!1,url:"/commonAction.zp",data:{mode:"GET_ALL_RECORDS_FOR_COMPONENT",conreqcsr:csrfToken},success:function(data){ZPComponent.ALL_DATA=data}})},getAllData:function(){return void 0===ZPComponent.ALL_DATA&&ZPComponent.load(),ZPComponent.ALL_DATA}}).CONSTANTS={USERS:"Users",DEPARTMENTS:"Departments",DESIGNATIONS:"Designations",ROLES:"Roles",LOCATIONS:"Locations",SHIFTS:"Shifts",MARITALSTATUS:"MaritalStatus",GENDERS:"Genders",GROUPS:"Groups",EMPLOYEETYPES:"EmployeeTypes",getI18NValue:function(key){if(key!==ZPComponent.CONSTANTS.EMPLOYEETYPES){name=ZPI18N.getString("zp."+key.toLowerCase());return ZPUtil.Validation.isEmpty(name)?(key===ZPComponent.CONSTANTS.MARITALSTATUS&&(key="Marital Status"),key):name}var name=ZPI18N.getString("zp.employeeType")}};var ZPPickList={};(ZPPickList={allData:null,allUsers:null,allUsersObj:null,allDepartments:null,allDesignations:null,allRoles:null,allLocations:null,sharedSelectedUsers:null,sharedSelectedDepartments:null,sharedSelectedDesignations:null,sharedSelectedRoles:null,sharedSelectedLocations:null,allUsersSelected:null,allDepartmentsSelected:null,allDesignationsSelected:null,allRolesSelected:null,allLocationsSelected:null,allGroupsSelected:null,loginUserNeed:!1,LAYOUT:null,extraDtls:null,initSingleComponent:function(key){var component=ZPPickList.init(key);return ZPPickList.makeAsSingleComponent(component)},initSingleComponentUser:function(key,loginUserNeed,usersList){var component=ZPPickList.initComponent(key,loginUserNeed,new Array({component:ZPPickList.CONSTANTS.USERS,selectedList:usersList}));return ZPPickList.makeAsSingleComponent(component)},makeAsSingleComponent:function(component){return $(component).addClass("AJDrop"),$(component).find(".ZPCusPd").addClass("ZptxtBox rt"),$(component).find(".lfttab").addClass("DN"),component},initComponent:function(keys,loginUserNeed,componentDtls,isAllBtnOnly,usersLst){return ZPPickList.loginUserNeed=void 0!==loginUserNeed&&loginUserNeed,ZPPickList.init(keys,componentDtls,isAllBtnOnly,usersLst)},picklistComponentTemplate:"<div class='input-group dropdown' id='pickListComp'><div id='key_list' class='form-control DN'></div><span aria-expanded='false' class='input-group-addon BL0I' data-toggle='dropdown'><i class='IC-addlist gry CP'></i></span><div class='dropdown-menu ZPCusPd ZPappBox  ZPCmn-Arrow top gray'><div class='ZPTabVt'><div class='lfttab'><ul id='leftSideActiveKeyList' role='tablist' class='nav nav-pills nav-stacked'></ul></div><div class='rhttabscrl'><div class='tab-content'><div class='tab-pane active' role='tabpanel'><div><div class='ZPtopSearch'><label class='checkbox DIB FL PT8 MR10' title='Select All' id='selectAllLabelID'><input id='zp_sharedto_all_checkbox' type='checkbox' onClick='ZPPickList.allCheckSelection()'><span></span></label><div class='ZPsearch' id='ZPsearch'><div class='dvsearch Dropdown PR'><span class='ZPico-search FL MT2 ML8 ZPtooltip IC-lens S16' zptitle='Search Category'></span></div><input type='search' class='ZPselect' id='dvZPselect' placeholder='"+ZPI18N.getString("zp.search")+"' value='' name='Search'></div></div><div class='ZPapplCb'><ul id='searchResult_ul'></ul></div></div></div></div></div></div></div></div>",init:function(keys,componentDtls,isAllBtnOnly,usersLst){ZPPickList.LAYOUT=$(ZPPickList.picklistComponentTemplate),"attendance-settings-absentschedule"!==Layout.Page.pageId&&"timetracker-settings-schedulersettings"!==Layout.Page.pageId&&"leavetracker-settings-compensatoryoffschedule"!==Layout.Page.pageId&&"attendance-shiftmapping-shiftrotation"!==Layout.Page.pageId&&"timetracker-settings-remindersettings"!==Layout.Page.pageId||ZPPickList.LAYOUT.find("#selectAllLabelID").prop("title",ZPI18N.getString("zp.app.selectAll",new Array(ZPPickList.CONSTANTS.getI18NValue(ZPPickList.CONSTANTS.ROLES),ZPPickList.CONSTANTS.getI18NValue(ZPPickList.CONSTANTS.ROLES).toLowerCase()))),ZPPickList.allUsers=[],ZPPickList.searchList=[],ZPPickList.allUsersObj={},ZPPickList.allDepartments={},ZPPickList.allDesignations={},ZPPickList.allRoles={},ZPPickList.allLocations={},ZPPickList.allShifts={},ZPPickList.allGroups={},ZPPickList.allDivisions={},ZPPickList.sharedSelectedUsers=[],ZPPickList.sharedSelectedDepartments=[],ZPPickList.sharedSelectedDesignations=[],ZPPickList.sharedSelectedRoles=[],ZPPickList.sharedSelectedLocations=[],ZPPickList.sharedSelectedShifts=[],ZPPickList.sharedSelectedGroups=[],ZPPickList.sharedSelectedDivisions=[],ZPPickList.extraDtls={},isAllBtnOnly=void 0!==isAllBtnOnly&&isAllBtnOnly,ZPPickList.isAllBtnOnly=isAllBtnOnly,ZPPickList.allUsersSelected=!1,ZPPickList.allDepartmentsSelected=!1,ZPPickList.allDesignationsSelected=!1,ZPPickList.allRolesSelected=!1,ZPPickList.allLocationsSelected=!1,ZPPickList.allGroupsSelected=!1,ZPPickList.generateKeys(keys),ZPPickList.defaultActions(),ZPPickList.initFireScroll();var initRecord=!1;if(componentDtls&&null!==componentDtls){for(var index in componentDtls){var componentDtl=componentDtls[index],component=componentDtl.component,selectedList=componentDtl.selectedList,extraDtlsJson=componentDtl.extraDtlsJson&&null!=componentDtl.extraDtlsJson?componentDtl.extraDtlsJson:{};component&&null!=component&&(selectedList&&null!=selectedList&&(component===ZPPickList.CONSTANTS.USERS?(ZPPickList.allUsers=selectedList,extraDtlsJson.skipUpdate=!(!componentDtl.skipUpdate||!0!==componentDtl.skipUpdate)):component===ZPPickList.CONSTANTS.DEPARTMENTS?(ZPPickList.allDepartments=selectedList,extraDtlsJson.skipUpdate=!(!componentDtl.skipUpdate||!0!==componentDtl.skipUpdate)):component===ZPPickList.CONSTANTS.DIVISIONS&&(ZPPickList.allDivisions=selectedList,extraDtlsJson.skipUpdate=!(!componentDtl.skipUpdate||!0!==componentDtl.skipUpdate))),0!==extraDtlsJson.length&&(ZPPickList.extraDtls[component]=extraDtlsJson,ZPUtil.Validation.isFunction(extraDtlsJson.switchKeyCallback)&&(ZPPickList.extraDtls.switchKeyCallback=extraDtlsJson.switchKeyCallback)))}initRecord=keys.length!=componentDtls.length,ZPPickList.skipSorting=!0}else ZPPickList.skipSorting=!1,initRecord=!0;return initRecord&&(null===ZPPickList.allData?ZPPickList.initRecords(usersLst):ZPPickList.getRecordDetails(usersLst,!0)),ZPPickList.LAYOUT},defaultActions:function(){$(document).on("show.bs.dropdown","#pickListComp",function(){var childLists=ZPPickList.LAYOUT.find("#leftSideActiveKeyList").children();$.each(childLists,function(key,value){$(this).removeClass("active")});var firstItem=ZPPickList.LAYOUT.find("#leftSideActiveKeyList").children()[0];$(firstItem).addClass("active");var activeField=ZPPickList.LAYOUT.find("#leftSideActiveKeyList").children(".active").attr("activeKey");ZPPickList.getAllRecords(activeField),ZPPickList.LAYOUT.find("#dvZPselect").val("")}),$(document).on("click",".dropdown-menu",function(e){$(this).hasClass("ZPnotifyBox")&&e.stopPropagation(),$(this).hasClass("ZPplusBox")&&e.stopPropagation(),$(this).hasClass("ZPCusPd")&&e.stopPropagation()}),ZPPickList.LAYOUT.find("#dvZPselect").on("keyup",function(){var activeField=ZPPickList.LAYOUT.find("#leftSideActiveKeyList").children(".active").attr("activeKey"),searchStr=$(this).val().trim();if(searchStr.length<=0)ZPPickList.getAllRecords(activeField);else{searchStr=searchStr.toLowerCase();var tempList=[];activeField===ZPPickList.CONSTANTS.USERS?(ZPPickList.LAYOUT.find("#leftSideActiveKeyList").find('[activekey="Users"]').attr("count",0),$.each(ZPPickList.allUsers,function(key,value){var id,name=ZPeople.decodeTxt(value.name);void 0!==value.empid&&(id=ZPeople.decodeTxt(value.empid)),-1!==name.toLowerCase().indexOf(searchStr)?tempList.push(value):void 0!==id&&-1!==id.toLowerCase().indexOf(searchStr)&&tempList.push(value)}),ZPPickList.searchList=tempList,ZPPickList.constructUsersList(tempList,!0)):activeField===ZPPickList.CONSTANTS.DEPARTMENTS?ZPPickList.searchRecord(searchStr,ZPPickList.allDepartments,ZPPickList.sharedSelectedDepartments,activeField):activeField===ZPPickList.CONSTANTS.DESIGNATIONS?ZPPickList.searchRecord(searchStr,ZPPickList.allDesignations,ZPPickList.sharedSelectedDesignations,activeField):activeField===ZPPickList.CONSTANTS.ROLES?ZPPickList.searchRecord(searchStr,ZPPickList.allRoles,ZPPickList.sharedSelectedRoles,activeField):activeField===ZPPickList.CONSTANTS.LOCATIONS?ZPPickList.searchRecord(searchStr,ZPPickList.allLocations,ZPPickList.sharedSelectedLocations,activeField):activeField===ZPPickList.CONSTANTS.SHIFTS?ZPPickList.searchRecord(searchStr,ZPPickList.allShifts,ZPPickList.sharedSelectedShifts,activeField):activeField===ZPPickList.CONSTANTS.GROUPS?ZPPickList.searchRecord(searchStr,ZPPickList.allGroups,ZPPickList.sharedSelectedGroups,activeField):activeField===ZPPickList.CONSTANTS.DIVISIONS&&ZPPickList.searchRecord(searchStr,ZPPickList.allDivisions,ZPPickList.sharedSelectedDivisions,activeField)}})},initFireScroll:function(){ZPPickList.LAYOUT.find(".rhttabscrl").find(".ZPapplCb").on("scroll",function(){var widHei=$(this).height(),scrHei=this.scrollHeight,inHei=$(this).scrollTop(),activeKey=ZPPickList.LAYOUT.find("#leftSideActiveKeyList").find(".active").attr("activekey"),len=0,selList=[],sharedList=[];if(0===ZPPickList.LAYOUT.find("#dvZPselect").val().trim().length){switch(activeKey){case ZPPickList.CONSTANTS.USERS:selList=ZPPickList.allUsers,sharedList=ZPPickList.sharedSelectedUsers,len=ZPPickList.allUsers.length;break;case ZPPickList.CONSTANTS.DEPARTMENTS:selList=ZPPickList.allDepartments,sharedList=ZPPickList.sharedSelectedDepartments,len=Object.keys(ZPPickList.allDepartments).length;break;case ZPPickList.CONSTANTS.DESIGNATIONS:selList=ZPPickList.allDesignations,sharedList=ZPPickList.sharedSelectedDesignations,len=Object.keys(ZPPickList.allDesignations).length;break;case ZPPickList.CONSTANTS.ROLES:selList=ZPPickList.allRoles,sharedList=ZPPickList.sharedSelectedRoles,len=Object.keys(ZPPickList.allRoles).length;break;case ZPPickList.CONSTANTS.LOCATIONS:selList=ZPPickList.allLocations,sharedList=ZPPickList.sharedSelectedLocations,len=Object.keys(ZPPickList.allLocations).length;break;case ZPPickList.CONSTANTS.SHIFTS:selList=ZPPickList.allShifts,sharedList=ZPPickList.sharedSelectedShifts,len=Object.keys(ZPPickList.allShifts).length;break;case ZPPickList.CONSTANTS.GROUPS:selList=ZPPickList.allGroups,sharedList=ZPPickList.sharedSelectedGroups,len=Object.keys(ZPPickList.allGroups).length;break;case ZPPickList.CONSTANTS.DIVISIONS:selList=ZPPickList.allDivisions,sharedList=ZPPickList.sharedSelectedDivisions,len=Object.keys(ZPPickList.allDivisions).length;break;default:len=0}scrHei<inHei+widHei+15&&ZPPickList.LAYOUT.find("#searchResult_ul li").length<len&&(activeKey===ZPPickList.CONSTANTS.USERS?ZPPickList.constructUsersList(ZPPickList.allUsers,!1,!0):(ZPPickList.constructShareList(selList,activeKey,!0),ZPPickList.makeSelectable(sharedList,Object.keys(selList).length,activeKey)))}else scrHei<inHei+widHei+15&&ZPPickList.LAYOUT.find("#searchResult_ul li").length<ZPPickList.searchList.length&&(activeKey===ZPPickList.CONSTANTS.USERS?ZPPickList.constructUsersList(ZPPickList.searchList,!0,!0):(ZPPickList.constructShareList(ZPPickList.searchList,activeKey,!0),ZPPickList.makeSelectable(sharedList,Object.keys(ZPPickList.searchList).length,activeKey)))})},searchRecord:function(searchKey,recordArr,selectedArr,activeField){var tempList=[];$.each(recordArr,function(key,value){-1!==ZPeople.decodeTxt(value.recName).toLowerCase().indexOf(searchKey)&&tempList.push(value)}),ZPPickList.LAYOUT.find("#leftSideActiveKeyList").find("[activekey="+activeField+"]").attr("count",0),ZPPickList.searchList=tempList,ZPPickList.constructShareList(tempList,activeField),ZPPickList.makeSelectable(selectedArr,Object.keys(recordArr).length,activeField)},initRecords:function(usersLst){$.ajax({type:"POST",async:!1,url:"/createViewAction.zp",data:{mode:"getAllRecords",conreqcsr:csrfToken},success:function(data){ZPPickList.allData=data,ZPPickList.getRecordDetails(usersLst,!0)}})},getRecordDetails:function(usersLst,reload){if(!ZPPickList.isSkipUpdate(ZPPickList.CONSTANTS.USERS))for(var userList=ZPeople.getUserListData(usersLst,reload),i=0;i<userList.length;i++){var singleUser=userList[i];(("attendance-settings-absentschedule"===Layout.Page.pageId||"true"===singleUser.isLogEnb)&&singleUser.usererec!==erecno||ZPPickList.loginUserNeed)&&(-1===ZPPickList.allUsers.indexOf(singleUser.usererec)&&ZPPickList.allUsers.push(singleUser),ZPPickList.allUsersObj[singleUser.usererec]=singleUser.name)}ZPPickList.allDepartments=ZPPickList.isSkipUpdate(ZPPickList.CONSTANTS.DEPARTMENTS)?ZPPickList.allDepartments:ZPPickList.allData.Departments,ZPPickList.allDesignations=ZPPickList.allData.Designations,ZPPickList.allRoles=ZPPickList.allData.Roles,ZPPickList.allLocations=ZPPickList.allData.Locations,ZPPickList.allShifts=ZPPickList.allData.Shifts,ZPPickList.allGroups=ZPPickList.allData.Groups,ZPPickList.allDivisions=ZPPickList.allData.Divisions},activeClassListTemplate:"<li id='activeField_' role='presentation'><a data-toggle='tab' role='tab' onClick='ZPPickList.getRecords(this)'></a></li>",sharedListDivTemplate:"<span class='clearfix DN'></span><div id='zp_shared_list_'><div id='zp_shared_sub_list_header' class=' appltagh DN'><span class='clearfix'></span><p id='header_name'><i class='IC-mini S12' onmousedown='ZPPickList.expandCollapseHeader(event,this)'></i></p><button class=' btn btn-default btn-sm FR DN' type='button' onClick='ZPPickList.clearSharedDisplayList(event,this)'>"+ZPI18N.getString("zp.clear")+"</button><div class='clearfix'></div></div><div id='zp_shared_sub_list_records' class='cust-labelTags MT3 MB10'></div></div>",generateKeys:function(keys){ZPPickList.LAYOUT.find("#key_list").empty(),ZPPickList.LAYOUT.find("#leftSideActiveKeyList").empty(),$.each(keys,function(key,value){ZPPickList.LAYOUT.find("#key_list").append(ZPPickList.sharedListDivTemplate),ZPPickList.LAYOUT.find("#key_list").find("#zp_shared_list_").attr("id","zp_shared_list_"+value),ZPPickList.LAYOUT.find("#key_list").find("#zp_shared_list_"+value).find("#header_name").append(ZPPickList.CONSTANTS.getI18NValue(value)),ZPPickList.LAYOUT.find("#key_list").find("#zp_shared_list_"+value).find("#zp_shared_sub_list_header").find("button").attr("key",value),ZPPickList.LAYOUT.find("#leftSideActiveKeyList").append(ZPPickList.activeClassListTemplate),ZPPickList.LAYOUT.find("#leftSideActiveKeyList").find("#activeField_").attr("id","activeField_"+value),ZPPickList.LAYOUT.find("#leftSideActiveKeyList").find("#activeField_"+value).attr("activeKey",value),ZPPickList.LAYOUT.find("#leftSideActiveKeyList").find("#activeField_"+value).find("a").html(ZPPickList.CONSTANTS.getI18NValue(value))})},allCheckSelection:function(){var isAllChecked=ZPPickList.LAYOUT.find("#zp_sharedto_all_checkbox").is(":checked"),childLength=(childList=ZPPickList.LAYOUT.find("#searchResult_ul").children()).length,activeField=ZPPickList.LAYOUT.find("#leftSideActiveKeyList").children(".active").attr("activeKey"),sharedRecordList=ZPPickList.LAYOUT.find("#zp_shared_list_"+activeField).find("#zp_shared_sub_list_records");if(isAllChecked){if(0===ZPPickList.LAYOUT.find("#dvZPselect").val().trim().length&&ZPPickList.isAllBtnOnly){if(0==childLength)return ZPPickList.LAYOUT.find("#zp_sharedto_all_checkbox").prop("checked",!1),void ZPPickList.emptySelection(activeField);var showAllList=ZPPickList.LAYOUT.find("#searchResult_ul");if(showAllList.empty(),childList=[],ZPPickList.LAYOUT.find("#zp_shared_list_"+activeField).find("#zp_shared_sub_list_records").empty(),activeField===ZPPickList.CONSTANTS.ROLES){ZPPickList.sharedSelectedRoles=[],showAllList.append(ZPPickList.getHTMLForShareList("0",ZPI18N.getString("zp.allroles"),!0,ZPPickList.CONSTANTS.ROLES)),ZPPickList.LAYOUT.find("#leftSideActiveKeyList").find('[activekey="Roles"]').attr("count",0);var obj={recName:ZPI18N.getString("zp.allroles"),recID:"0"};childList.push(obj)}else if(activeField===ZPPickList.CONSTANTS.DEPARTMENTS){ZPPickList.sharedSelectedDepartments=[],showAllList.append(ZPPickList.getHTMLForShareList("0",ZPI18N.getString("zp.alldepartment"),!0,ZPPickList.CONSTANTS.DEPARTMENTS)),ZPPickList.LAYOUT.find("#leftSideActiveKeyList").find('[activekey="Departments"]').attr("count",0);obj={recName:ZPI18N.getString("zp.alldepartment"),recID:"0"};childList.push(obj)}else if(activeField===ZPPickList.CONSTANTS.DESIGNATIONS){ZPPickList.sharedSelectedDesignations=[],showAllList.append(ZPPickList.getHTMLForShareList("0",ZPI18N.getString("zp.alldesignation"),!0,ZPPickList.CONSTANTS.DESIGNATIONS)),ZPPickList.LAYOUT.find("#leftSideActiveKeyList").find('[activekey="Designations"]').attr("count",0);obj={recName:ZPI18N.getString("zp.alldesignation"),recID:"0"};childList.push(obj)}else if(activeField===ZPPickList.CONSTANTS.LOCATIONS){ZPPickList.sharedSelectedLocations=[],showAllList.append(ZPPickList.getHTMLForShareList("0",ZPI18N.getString("zp.alllocaction"),!0,ZPPickList.CONSTANTS.LOCATIONS)),ZPPickList.LAYOUT.find("#leftSideActiveKeyList").find('[activekey="Locations"]').attr("count",0);obj={recName:ZPI18N.getString("zp.alllocaction"),recID:"0"};childList.push(obj)}else if(activeField===ZPPickList.CONSTANTS.SHIFTS){ZPPickList.sharedSelectedShifts=[],showAllList.append(ZPPickList.getHTMLForShareList("0",ZPI18N.getString("zp.allshifts"),!0,ZPPickList.CONSTANTS.SHIFTS)),ZPPickList.LAYOUT.find("#leftSideActiveKeyList").find('[activekey="Shifts"]').attr("count",0);obj={recName:ZPI18N.getString("zp.allshifts"),recID:"0"};childList.push(obj)}else if(activeField===ZPPickList.CONSTANTS.GROUPS){ZPPickList.sharedSelectedGroups=[],showAllList.append(ZPPickList.getHTMLForShareList("0",ZPI18N.getString("zp.allgroups"),!0,ZPPickList.CONSTANTS.GROUPS)),ZPPickList.LAYOUT.find("#leftSideActiveKeyList").find('[activekey="Groups"]').attr("count",0);obj={recName:ZPI18N.getString("zp.allgroups"),recID:"0"};childList.push(obj)}else if(activeField===ZPPickList.CONSTANTS.USERS){ZPPickList.sharedSelectedUsers=[],showAllList.append(ZPPickList.getHTMLForShareList("0",ZPI18N.getString("zp.allusers"),!0,ZPPickList.CONSTANTS.USERS)),ZPPickList.LAYOUT.find("#leftSideActiveKeyList").find('[activekey="Users"]').attr("count",0);obj={fname:ZPI18N.getString("zp.allusers"),usererec:"0"};childList.push(obj)}else if(activeField===ZPPickList.CONSTANTS.DIVISIONS){ZPPickList.sharedSelectedDivisions=[],showAllList.append(ZPPickList.getHTMLForShareList("0",ZPI18N.getString("zp.allusers"),!0,ZPPickList.CONSTANTS.DIVISIONS)),ZPPickList.LAYOUT.find("#leftSideActiveKeyList").find('[activekey="Divisions"]').attr("count",0);obj={fname:ZPI18N.getString("zp.AllDivision"),recID:"0"};childList.push(obj)}childLength=1}else 0===ZPPickList.LAYOUT.find("#dvZPselect").val().trim().length?activeField===ZPPickList.CONSTANTS.ROLES?(childList=ZPPickList.allRoles,ZPPickList.allRolesSelected=!0):activeField===ZPPickList.CONSTANTS.DEPARTMENTS?(childList=ZPPickList.allDepartments,ZPPickList.allDepartmentsSelected=!0):activeField===ZPPickList.CONSTANTS.DESIGNATIONS?(childList=ZPPickList.allDesignations,ZPPickList.allDesignationsSelected=!0):activeField===ZPPickList.CONSTANTS.LOCATIONS?(childList=ZPPickList.allLocations,ZPPickList.allLocationsSelected=!0):activeField===ZPPickList.CONSTANTS.SHIFTS?childList=ZPPickList.allShifts:activeField===ZPPickList.CONSTANTS.GROUPS?(childList=ZPPickList.allGroups,ZPPickList.allGroupsSelected=!0):activeField===ZPPickList.CONSTANTS.USERS?(childList=ZPPickList.allUsers,ZPPickList.allUsersSelected=!0):activeField===ZPPickList.CONSTANTS.DIVISIONS&&(childList=ZPPickList.allDivisions):childList=ZPPickList.searchList,childLength=activeField!==ZPPickList.CONSTANTS.USERS?Object.keys(childList).length:childList.length;if(childLength>0){var selUserHtml="",setSelectedListFn=ZPPickList.isValidCallback(activeField,"extraFldDtls","setSelectedList");$.each(childList,function(key,value){ZPPickList.LAYOUT.find("#zp_sharedto_all_checkbox").prop("checked",!0);var selectedID=activeField!==ZPPickList.CONSTANTS.USERS?value.recID:value.usererec;if(0===sharedRecordList.find("#"+selectedID).length){var selectedName=activeField!==ZPPickList.CONSTANTS.USERS?value.recName:value.name;activeField===ZPPickList.CONSTANTS.USERS&&ZPPickList.isAllBtnOnly&&(selectedName=value.fname),selUserHtml+=null!==setSelectedListFn?setSelectedListFn(activeField,selectedID,selectedName):"<span id='"+selectedID+"' class='label label-primary FL MR5' key='"+activeField+"'>"+selectedName+"<i class='CP IC-cls S8 ML5 zp_selvalue' onClick='ZPPickList.removeRecordFromSharedList(event,this)'></i></span>",ZPPickList.selectionRecord(activeField,selectedID,!0),ZPPickList.LAYOUT.find("#searchResult_ul").find("li#record_"+selectedID).find("input[type=checkbox]").prop("checked",!0)}}),""!==selUserHtml&&sharedRecordList.append(selUserHtml)}else ZPPickList.LAYOUT.find("#zp_sharedto_all_checkbox").prop("checked",!1),ZPPickList.emptySelection(activeField)}else childLength>0&&(childList.find('.checkbox input[type="checkbox"]').prop("checked",!1),sharedRecordList.find("#zp_shared_sub_list_records").empty(),ZPPickList.emptySelection(activeField),0===ZPPickList.LAYOUT.find("#dvZPselect").val().trim().length&&ZPPickList.isAllBtnOnly&&(ZPPickList.LAYOUT.find("#zp_sharedto_all_checkbox").prop("checked",!1),ZPPickList.LAYOUT.find("#searchResult_ul").empty(),ZPPickList.LAYOUT.find("#leftSideActiveKeyList").find('[activekey="'+activeField+'"]').attr("count",0),activeField===ZPPickList.CONSTANTS.ROLES?ZPPickList.constructShareList(ZPPickList.allRoles,activeField):activeField===ZPPickList.CONSTANTS.DEPARTMENTS?ZPPickList.constructShareList(ZPPickList.allDepartments,activeField):activeField===ZPPickList.CONSTANTS.DESIGNATIONS?ZPPickList.constructShareList(ZPPickList.allDesignations,activeField):activeField===ZPPickList.CONSTANTS.LOCATIONS?ZPPickList.constructShareList(ZPPickList.allLocations,activeField):activeField===ZPPickList.CONSTANTS.SHIFTS?ZPPickList.constructShareList(ZPPickList.allShifts,activeField):activeField===ZPPickList.CONSTANTS.GROUPS?ZPPickList.constructShareList(ZPPickList.allGroups,activeField):activeField===ZPPickList.CONSTANTS.USERS?ZPPickList.constructUsersList(ZPPickList.allUsers):activeField===ZPPickList.CONSTANTS.DIVISIONS&&ZPPickList.constructUsersList(ZPPickList.allDivisions),"attendance-settings-absentschedule"!==Layout.Page.pageId&&"timetracker-settings-schedulersettings"!==Layout.Page.pageId&&"leavetracker-settings-compensatoryoffschedule"!==Layout.Page.pageId&&"attendance-shiftmapping-shiftrotation"!==Layout.Page.pageId&&"timetracker-settings-remindersettings"!==Layout.Page.pageId||(activeField===ZPPickList.CONSTANTS.ROLES?ZPPickList.allRolesSelected=!1:activeField===ZPPickList.CONSTANTS.DEPARTMENTS?ZPPickList.allDepartmentsSelected=!1:activeField===ZPPickList.CONSTANTS.DESIGNATIONS?ZPPickList.allDesignationsSelected=!1:activeField===ZPPickList.CONSTANTS.LOCATIONS?ZPPickList.allLocationsSelected=!1:activeField===ZPPickList.CONSTANTS.GROUPS?ZPPickList.allGroupsSelected=!1:activeField===ZPPickList.CONSTANTS.USERS&&(ZPPickList.allUsersSelected=!1))));var recordSelectionCallback=ZPPickList.isValidCallback(activeField,"extraFldDtls","recordSelectCallback");if(null!==recordSelectionCallback){var childList=ZPPickList.LAYOUT.find("#searchResult_ul").children();sharedRecordList=recordSelectionCallback(childList,"0",sharedRecordList=ZPPickList.LAYOUT.find("#zp_shared_list_"+activeField).find("#zp_shared_sub_list_records"),isAllChecked)}ZPPickList.adjustDivHeight(),ZPPickList.updateHeaderOption(activeField)},recordSelection:function(obj){var isAllChecked=ZPPickList.LAYOUT.find("#zp_sharedto_all_checkbox").is(":checked");if(isAllChecked)ZPPickList.LAYOUT.find("#zp_sharedto_all_checkbox").prop("checked",!1);else{var childList=$(obj).parent().parent().parent().parent().children();childList.length===childList.find(".checkbox input[type='checkbox']:checked").length&&"attendance-settings-absentschedule"!==Layout.Page.pageId&&"timetracker-settings-schedulersettings"!=Layout.Page.pageId&&"leavetracker-settings-compensatoryoffschedule"!==Layout.Page.pageId&&"attendance-shiftmapping-shiftrotation"!==Layout.Page.pageId&&"timetracker-settings-remindersettings"!==Layout.Page.pageId&&(ZPPickList.LAYOUT.find("#zp_sharedto_all_checkbox")[0].checked=!0)}var isSelected=$(obj).is(":checked"),activeField=ZPPickList.LAYOUT.find("#leftSideActiveKeyList").children(".active").attr("activeKey"),selectedID=$(obj).attr("id"),selectedName=$(obj).data("fieldName"),sharedRecordList=ZPPickList.LAYOUT.find("#zp_shared_list_"+activeField).find("#zp_shared_sub_list_records"),setSelectedListFn=ZPPickList.isValidCallback(activeField,"extraFldDtls","setSelectedList");if(isSelected){var selUserHtml="<span id='"+selectedID+"' class='label label-primary FL MR5' key='"+activeField+"'>"+selectedName+"<i class='CP IC-cls S8 ML5 zp_selvalue' onClick='ZPPickList.removeRecordFromSharedList(event,this)'></i></span>";null!==setSelectedListFn&&(selUserHtml=setSelectedListFn(activeField,selectedID,selectedName)),sharedRecordList.append(selUserHtml)}else 0===ZPPickList.LAYOUT.find("#dvZPselect").val().trim().length&&ZPPickList.isAllBtnOnly&&"0"===sharedRecordList[0].firstChild.id&&(ZPPickList.LAYOUT.find("#zp_sharedto_all_checkbox").prop("checked",!1),ZPPickList.LAYOUT.find("#searchResult_ul").empty(),ZPPickList.LAYOUT.find("#leftSideActiveKeyList").find('[activekey="'+activeField+'"]').attr("count",0),activeField===ZPPickList.CONSTANTS.ROLES?ZPPickList.constructShareList(ZPPickList.allRoles,activeField):activeField===ZPPickList.CONSTANTS.DEPARTMENTS?ZPPickList.constructShareList(ZPPickList.allDepartments,activeField):activeField===ZPPickList.CONSTANTS.DESIGNATIONS?ZPPickList.constructShareList(ZPPickList.allDesignations,activeField):activeField===ZPPickList.CONSTANTS.LOCATIONS?ZPPickList.constructShareList(ZPPickList.allLocations,activeField):activeField===ZPPickList.CONSTANTS.SHIFTS?ZPPickList.constructShareList(ZPPickList.allShifts,activeField):activeField===ZPPickList.CONSTANTS.GROUPS?ZPPickList.constructShareList(ZPPickList.allGroups,activeField):activeField===ZPPickList.CONSTANTS.USERS?ZPPickList.constructUsersList(ZPPickList.allUsers):activeField===ZPPickList.CONSTANTS.DIVISIONS&&ZPPickList.constructShareList(ZPPickList.allDivisions)),sharedRecordList.find("#"+selectedID).remove();var recordSelectionCallback=ZPPickList.isValidCallback(activeField,"extraFldDtls","recordSelectCallback");null!==recordSelectionCallback&&(recordSelectionCallback(obj,"0",null,isAllChecked=ZPPickList.LAYOUT.find("#zp_sharedto_all_checkbox").is(":checked")),sharedRecordList=recordSelectionCallback(obj,selectedID,sharedRecordList,isSelected)),ZPPickList.selectionRecord(activeField,selectedID,isSelected),ZPPickList.LAYOUT.find("#zp_sharedto_all_checkbox")[0].checked||"attendance-settings-absentschedule"!==Layout.Page.pageId&&"timetracker-settings-schedulersettings"!==Layout.Page.pageId&&"leavetracker-settings-compensatoryoffschedule"!==Layout.Page.pageId&&"attendance-shiftmapping-shiftrotation"!==Layout.Page.pageId&&"timetracker-settings-remindersettings"!==Layout.Page.pageId||(activeField===ZPPickList.CONSTANTS.ROLES?ZPPickList.allRolesSelected=!1:activeField===ZPPickList.CONSTANTS.DEPARTMENTS?ZPPickList.allDepartmentsSelected=!1:activeField===ZPPickList.CONSTANTS.DESIGNATIONS?ZPPickList.allDesignationsSelected=!1:activeField===ZPPickList.CONSTANTS.LOCATIONS?ZPPickList.allLocationsSelected=!1:activeField===ZPPickList.CONSTANTS.GROUPS?ZPPickList.allGroupsSelected=!1:activeField===ZPPickList.CONSTANTS.USERS&&(ZPPickList.allUsersSelected=!1)),ZPPickList.adjustDivHeight(),ZPPickList.updateHeaderOption(activeField)},addRemoveRecord:function(key,pkid,isSelected,array){var index=array.indexOf(pkid);-1===index?array.push(pkid):array.splice(index,1);var addRemoveRecordCallback=ZPPickList.isValidCallback(key,"extraFldDtls","addRemoveRecordCallback");null!==addRemoveRecordCallback&&(sharedRecordList=addRemoveRecordCallback(pkid,isSelected))},emptySelection:function(activeField){activeField===ZPPickList.CONSTANTS.USERS?ZPPickList.sharedSelectedUsers=[]:activeField===ZPPickList.CONSTANTS.DEPARTMENTS?ZPPickList.sharedSelectedDepartments=[]:activeField===ZPPickList.CONSTANTS.DESIGNATIONS?ZPPickList.sharedSelectedDesignations=[]:activeField===ZPPickList.CONSTANTS.ROLES?ZPPickList.sharedSelectedRoles=[]:activeField===ZPPickList.CONSTANTS.LOCATIONS?ZPPickList.sharedSelectedLocations=[]:activeField===ZPPickList.CONSTANTS.SHIFTS?ZPPickList.sharedSelectedShifts=[]:activeField===ZPPickList.CONSTANTS.GROUPS?ZPPickList.sharedSelectedGroups=[]:activeField===ZPPickList.CONSTANTS.DIVISIONS&&(ZPPickList.sharedSelectedDivisions=[]),ZPPickList.LAYOUT.find("#zp_shared_list_"+activeField).find("#zp_shared_sub_list_records").empty()},selectionRecord:function(activeField,ID,isSelected){activeField===ZPPickList.CONSTANTS.USERS?ZPPickList.addRemoveRecord(activeField,ID,isSelected,ZPPickList.sharedSelectedUsers):activeField===ZPPickList.CONSTANTS.DEPARTMENTS?ZPPickList.addRemoveRecord(activeField,ID,isSelected,ZPPickList.sharedSelectedDepartments):activeField===ZPPickList.CONSTANTS.DESIGNATIONS?ZPPickList.addRemoveRecord(activeField,ID,isSelected,ZPPickList.sharedSelectedDesignations):activeField===ZPPickList.CONSTANTS.ROLES?ZPPickList.addRemoveRecord(activeField,ID,isSelected,ZPPickList.sharedSelectedRoles):activeField===ZPPickList.CONSTANTS.LOCATIONS?ZPPickList.addRemoveRecord(activeField,ID,isSelected,ZPPickList.sharedSelectedLocations):activeField===ZPPickList.CONSTANTS.SHIFTS?ZPPickList.addRemoveRecord(activeField,ID,isSelected,ZPPickList.sharedSelectedShifts):activeField===ZPPickList.CONSTANTS.GROUPS?ZPPickList.addRemoveRecord(activeField,ID,isSelected,ZPPickList.sharedSelectedGroups):activeField===ZPPickList.CONSTANTS.DIVISIONS&&ZPPickList.addRemoveRecord(activeField,ID,isSelected,ZPPickList.sharedSelectedDivisions)},adjustDivHeight:function(){ZPPickList.getSelectedUsers().length<=0&&ZPPickList.getSelectedDepartments().length<=0&&ZPPickList.getSelectedDesignations().length<=0&&ZPPickList.getSelectedRoles().length<=0&&ZPPickList.getSelectedLocations().length<=0&&ZPPickList.getSelectedShifts().length<=0&&ZPPickList.getSelectedGroups().length<=0&&ZPPickList.getSelectedDivisions().length<=0?ZPPickList.LAYOUT.find("#key_list").hasClass("input-lbltags")&&ZPPickList.LAYOUT.find("#key_list").removeClass("input-lbltags"):ZPPickList.LAYOUT.find("#key_list").hasClass("input-lbltags")||ZPPickList.LAYOUT.find("#key_list").addClass("input-lbltags")},updateHeaderOption:function(key){if(ZPPickList.LAYOUT.find("#zp_shared_list_"+key).find("#zp_shared_sub_list_records").children().length>0){(-1==Layout.Page.hash.indexOf("#performance")&&-1==Layout.Page.hash.indexOf("#selfservice/user/goals")&&-1==Layout.Page.hash.indexOf("#selfservice/user/kra")||void 0==ZPForm.CURRFORM_PARAM.tableName||"P_TimesheetJob"!=ZPForm.CURRFORM_PARAM.tableName)&&ZPPickList.LAYOUT.find("#zp_shared_list_"+key).find("#zp_shared_sub_list_header").find("button").removeClass("DN"),ZPPickList.LAYOUT.find("#zp_shared_list_"+key).find("#zp_shared_sub_list_header").show(),ZPPickList.LAYOUT.find("#zp_shared_list_"+key).prev().show();var expColDivObj=ZPPickList.LAYOUT.find("#zp_shared_list_"+key+" #header_name i");$(expColDivObj).hasClass("IC-expnd")&&($(expColDivObj).removeClass("IC-expnd").addClass("IC-mini"),ZPPickList.LAYOUT.find("#zp_shared_list_"+key+" #zp_shared_sub_list_records").slideToggle("fast"))}else{ZPPickList.LAYOUT.find("#zp_shared_list_"+key).find("#zp_shared_sub_list_header").find("button").addClass("DN"),ZPPickList.LAYOUT.find("#zp_shared_list_"+key).find("#zp_shared_sub_list_header").hide(),ZPPickList.LAYOUT.find("#zp_shared_list_"+key).prev().hide();expColDivObj=ZPPickList.LAYOUT.find("#zp_shared_list_"+key+" #header_name i");$(expColDivObj).hasClass("IC-mini")&&($(expColDivObj).removeClass("IC-mini").addClass("IC-expnd"),ZPPickList.LAYOUT.find("#zp_shared_list_"+key+" #zp_shared_sub_list_records").slideToggle("fast"))}},removeRecordFromSharedList:function(event,obj){event.stopPropagation();var selectedID=$(obj).closest("span").attr("id"),activeField=$(obj).closest("span").attr("key");"attendance-settings-absentschedule"!==Layout.Page.pageId&&"timetracker-settings-schedulersettings"!==Layout.Page.pageId&&"leavetracker-settings-compensatoryoffschedule"!==Layout.Page.pageId&&"attendance-shiftmapping-shiftrotation"!==Layout.Page.pageId&&"timetracker-settings-remindersettings"!==Layout.Page.pageId||(activeField===ZPPickList.CONSTANTS.ROLES?ZPPickList.allRolesSelected=!1:activeField===ZPPickList.CONSTANTS.DEPARTMENTS?ZPPickList.allDepartmentsSelected=!1:activeField===ZPPickList.CONSTANTS.DESIGNATIONS?ZPPickList.allDesignationsSelected=!1:activeField===ZPPickList.CONSTANTS.LOCATIONS?ZPPickList.allLocationsSelected=!1:activeField===ZPPickList.CONSTANTS.GROUPS?ZPPickList.allGroupsSelected=!1:activeField===ZPPickList.CONSTANTS.USERS&&(ZPPickList.allUsersSelected=!1)),ZPPickList.LAYOUT.find("#searchResult_ul").find("li#record_"+selectedID).length>0?ZPPickList.LAYOUT.find("#searchResult_ul").find("li#record_"+selectedID).find("input[type=checkbox]").trigger("click"):(ZPPickList.selectionRecord(activeField,selectedID,!1),$(obj).closest("span").remove(),ZPPickList.adjustDivHeight(),ZPPickList.updateHeaderOption(activeField)),ZPPickList.LAYOUT.find("#zp_sharedto_all_checkbox").prop("checked",!1)},clearSharedDisplayList:function(event,obj){event.stopPropagation();var key=$(obj).attr("key");ZPPickList.clearSharedDisplayListBasedOnKey(key),"attendance-settings-absentschedule"!==Layout.Page.pageId&&"timetracker-settings-schedulersettings"!==Layout.Page.pageId&&"leavetracker-settings-compensatoryoffschedule"!==Layout.Page.pageId&&"attendance-shiftmapping-shiftrotation"!==Layout.Page.pageId&&"timetracker-settings-remindersettings"!==Layout.Page.pageId||(key===ZPPickList.CONSTANTS.ROLES?ZPPickList.allRolesSelected=!1:key===ZPPickList.CONSTANTS.DEPARTMENTS?ZPPickList.allDepartmentsSelected=!1:key===ZPPickList.CONSTANTS.DESIGNATIONS?ZPPickList.allDesignationsSelected=!1:key===ZPPickList.CONSTANTS.LOCATIONS?ZPPickList.allLocationsSelected=!1:key===ZPPickList.CONSTANTS.GROUPS?ZPPickList.allGroupsSelected=!1:key===ZPPickList.CONSTANTS.USERS&&(ZPPickList.allUsersSelected=!1))},clearSharedDisplayListBasedOnKey:function(key){key===ZPPickList.CONSTANTS.USERS?ZPPickList.sharedSelectedUsers.length=0:key===ZPPickList.CONSTANTS.DEPARTMENTS?ZPPickList.sharedSelectedDepartments.length=0:key===ZPPickList.CONSTANTS.DESIGNATIONS?ZPPickList.sharedSelectedDesignations.length=0:key===ZPPickList.CONSTANTS.ROLES?ZPPickList.sharedSelectedRoles.length=0:key===ZPPickList.CONSTANTS.LOCATIONS?ZPPickList.sharedSelectedLocations.length=0:key===ZPPickList.CONSTANTS.SHIFTS?ZPPickList.sharedSelectedShifts.length=0:key===ZPPickList.CONSTANTS.GROUPS?ZPPickList.sharedSelectedGroups.length=0:key===ZPPickList.CONSTANTS.DIVISIONS&&(ZPPickList.sharedSelectedDivisions.length=0);var activeField=ZPPickList.LAYOUT.find("#leftSideActiveKeyList").children(".active").attr("activeKey");ZPPickList.LAYOUT.find("#zp_sharedto_all_checkbox").prop("checked",!1),ZPPickList.LAYOUT.find("#zp_shared_list_"+key).find("#zp_shared_sub_list_records").children().remove(),ZPPickList.LAYOUT.find("#zp_shared_list_"+key).find("#zp_shared_sub_list_header").hide(),ZPPickList.LAYOUT.find("#zp_shared_list_"+key).prev().hide(),ZPPickList.LAYOUT.find("#zp_shared_list_"+key).find("#zp_shared_sub_list_header").find("button").addClass("DN"),ZPPickList.adjustDivHeight(),key===activeField&&ZPPickList.allCheckSelection(),ZPPickList.updateHeaderOption(key);var clearSharedDisplayListCallback=ZPPickList.isValidCallback(key,"extraFldDtls","clearSharedDisplayListCallback");null!==clearSharedDisplayListCallback&&clearSharedDisplayListCallback()},expandCollapseHeader:function(event,obj){void 0!==event&&event.stopPropagation(),$(obj).hasClass("IC-mini")?($(obj).removeClass("IC-mini"),$(obj).addClass("IC-expnd")):($(obj).removeClass("IC-expnd"),$(obj).addClass("IC-mini"));var parentDiv=$(obj).parent().parent().parent(),recordObj=$(parentDiv).find("#zp_shared_sub_list_records");$(recordObj).slideToggle("fast")},getRecords:function(obj){var key=$(obj).parent().attr("activekey");ZPPickList.LAYOUT.find("#zp_sharedto_all_checkbox").prop("checked",!1),ZPPickList.LAYOUT.find("#dvZPselect").val(""),ZPPickList.LAYOUT.find("#selectAllLabelID").prop("title",ZPI18N.getString("zp.app.selectAll",new Array(ZPPickList.CONSTANTS.getI18NValue(key),ZPPickList.CONSTANTS.getI18NValue(key).toLowerCase()))),ZPPickList.getAllRecords(key);var switchKeyCallback=ZPPickList.extraDtls.switchKeyCallback;switchKeyCallback&&switchKeyCallback(key)},getAllRecords:function(key){if(ZPPickList.LAYOUT.find("#leftSideActiveKeyList").find('[role="presentation"]').attr("count",0),ZPPickList.LAYOUT.find(".dropdown-menu").find(".rhttabscrl").find(".tab-pane").find(".ZPapplCb").scrollTop(0),key===ZPPickList.CONSTANTS.USERS&&void 0!==ZPPickList.allUsers)"0"!==ZPPickList.sharedSelectedUsers[0]?ZPPickList.constructUsersList(ZPPickList.allUsers):(ZPPickList.LAYOUT.find("#zp_sharedto_all_checkbox").prop("checked",!0),ZPPickList.LAYOUT.find("#searchResult_ul").empty().append(ZPPickList.getHTMLForShareList("0",ZPI18N.getString("zp.allusers"),!0,ZPPickList.CONSTANTS.USERS)));else if(key===ZPPickList.CONSTANTS.ROLES&&void 0!==ZPPickList.allRoles){if("0"!==ZPPickList.sharedSelectedRoles[0])ZPPickList.constructShareList(ZPPickList.allRoles,key),ZPPickList.makeSelectable(ZPPickList.sharedSelectedRoles,Object.keys(ZPPickList.allRoles).length,key);else ZPPickList.LAYOUT.find("#zp_sharedto_all_checkbox").prop("checked",!0),ZPPickList.LAYOUT.find("#searchResult_ul").empty().append(ZPPickList.getHTMLForShareList("0",ZPI18N.getString("zp.allroles"),!0,ZPPickList.CONSTANTS.ROLES))}else if(key===ZPPickList.CONSTANTS.DEPARTMENTS&&void 0!==ZPPickList.allDepartments){if("0"!==ZPPickList.sharedSelectedDepartments[0])ZPPickList.constructShareList(ZPPickList.allDepartments,key),ZPPickList.makeSelectable(ZPPickList.sharedSelectedDepartments,Object.keys(ZPPickList.allDepartments).length,key);else ZPPickList.LAYOUT.find("#zp_sharedto_all_checkbox").prop("checked",!0),ZPPickList.LAYOUT.find("#searchResult_ul").empty().append(ZPPickList.getHTMLForShareList("0",ZPI18N.getString("zp.alldepartment"),!0,ZPPickList.CONSTANTS.DEPARTMENTS))}else if(key===ZPPickList.CONSTANTS.DESIGNATIONS&&void 0!==ZPPickList.allDesignations){if("0"!==ZPPickList.sharedSelectedDesignations[0])ZPPickList.constructShareList(ZPPickList.allDesignations,key),ZPPickList.makeSelectable(ZPPickList.sharedSelectedDesignations,Object.keys(ZPPickList.allDesignations).length,key);else ZPPickList.LAYOUT.find("#zp_sharedto_all_checkbox").prop("checked",!0),ZPPickList.LAYOUT.find("#searchResult_ul").empty().append(ZPPickList.getHTMLForShareList("0",ZPI18N.getString("zp.alldesignation"),!0,ZPPickList.CONSTANTS.DESIGNATIONS))}else if(key===ZPPickList.CONSTANTS.LOCATIONS&&void 0!==ZPPickList.allLocations){if("0"!==ZPPickList.sharedSelectedLocations[0])ZPPickList.constructShareList(ZPPickList.allLocations,key),ZPPickList.makeSelectable(ZPPickList.sharedSelectedLocations,Object.keys(ZPPickList.allLocations).length,key);else ZPPickList.LAYOUT.find("#zp_sharedto_all_checkbox").prop("checked",!0),ZPPickList.LAYOUT.find("#searchResult_ul").empty().append(ZPPickList.getHTMLForShareList("0",ZPI18N.getString("zp.alllocaction"),!0,ZPPickList.CONSTANTS.LOCATIONS))}else if(key===ZPPickList.CONSTANTS.SHIFTS&&void 0!==ZPPickList.allShifts){if("0"!==ZPPickList.sharedSelectedShifts[0])ZPPickList.constructShareList(ZPPickList.allShifts,key),ZPPickList.makeSelectable(ZPPickList.sharedSelectedShifts,Object.keys(ZPPickList.allShifts).length,key);else ZPPickList.LAYOUT.find("#zp_sharedto_all_checkbox").prop("checked",!0),ZPPickList.LAYOUT.find("#searchResult_ul").empty().append(ZPPickList.getHTMLForShareList("0",ZPI18N.getString("zp.allshifts"),!0,ZPPickList.CONSTANTS.SHIFTS))}else if(key===ZPPickList.CONSTANTS.GROUPS&&void 0!==ZPPickList.allGroups){if("0"!==ZPPickList.sharedSelectedGroups[0])ZPPickList.constructShareList(ZPPickList.allGroups,key),ZPPickList.makeSelectable(ZPPickList.sharedSelectedGroups,Object.keys(ZPPickList.allGroups).length,key);else ZPPickList.LAYOUT.find("#zp_sharedto_all_checkbox").prop("checked",!0),ZPPickList.LAYOUT.find("#searchResult_ul").empty().append(ZPPickList.getHTMLForShareList("0",ZPI18N.getString("zp.allgroups"),!0,ZPPickList.CONSTANTS.GROUPS))}else if(key===ZPPickList.CONSTANTS.DIVISIONS&&void 0!==ZPPickList.allDivisions){if("0"!==ZPPickList.sharedSelectedDivisions[0])ZPPickList.constructShareList(ZPPickList.allDivisions,key),ZPPickList.makeSelectable(ZPPickList.sharedSelectedDivisions,Object.keys(ZPPickList.allDivisions).length,key);else ZPPickList.LAYOUT.find("#zp_sharedto_all_checkbox").prop("checked",!0),ZPPickList.LAYOUT.find("#searchResult_ul").empty().append(ZPPickList.getHTMLForShareList("0",ZPI18N.getString("zp.allgroups"),!0,ZPPickList.CONSTANTS.DIVISIONS))}},constructUsersList:function(usersList,isSearch,isMore){if(jQuery.isEmptyObject(usersList)||usersList.length<=0)ZPPickList.LAYOUT.find("#searchResult_ul").html(ZPI18N.getString("zp.norec"));else{var showAllList=isMore?ZPPickList.LAYOUT.find("#searchResult_ul"):ZPPickList.LAYOUT.find("#searchResult_ul").empty();ZPPickList.skipSorting||(usersList=usersList.sort(function(a,b){return a.name>b.name}));var isSchedulerPage="attendance-settings-absentschedule"===Layout.Page.pageId||"timetracker-settings-schedulersettings"===Layout.Page.pageId||"leavetracker-settings-compensatoryoffschedule"===Layout.Page.pageId||"attendance-shiftmapping-shiftrotation"===Layout.Page.pageId||"timetracker-settings-remindersettings"===Layout.Page.pageId;isSearch||(usersList.length===ZPPickList.sharedSelectedUsers.length&&(!isSchedulerPage||isSchedulerPage&&ZPPickList.allUsersSelected)?ZPPickList.LAYOUT.find("#zp_sharedto_all_checkbox")[0].checked=!0:ZPPickList.LAYOUT.find("#zp_sharedto_all_checkbox")[0].checked=!1);var st=parseInt(ZPPickList.LAYOUT.find("#leftSideActiveKeyList").find('[activekey="Users"]').attr("count")),len=st+10>usersList.length?usersList.length:st+10;if(-1==Layout.Page.hash.indexOf("#performance")&&-1==Layout.Page.hash.indexOf("#selfservice/user/goals")&&-1==Layout.Page.hash.indexOf("#selfservice/user/kra")||void 0==ZPForm.CURRFORM_PARAM.tableName||"P_TimesheetJob"!=ZPForm.CURRFORM_PARAM.tableName){for(i=st;i<len;i++){var isSelectable=-1!==ZPPickList.sharedSelectedUsers.indexOf(usersList[i].usererec);showAllList.append(ZPPickList.getHTMLForShareList(usersList[i].usererec,(void 0!==usersList[i].empid?usersList[i].empid+" - ":"")+usersList[i].name,isSelectable,ZPPickList.CONSTANTS.USERS))}st=st+10>usersList.length?usersList.length:st+10}else{if(ZPPickList.sharedSelectedUsers.length<=0)return void ZPPickList.LAYOUT.find("#searchResult_ul").html(ZPI18N.getString("zp.norec"));len=st+10>ZPPickList.sharedSelectedUsers.length?ZPPickList.sharedSelectedUsers.length:st+10;for(var i=st;i<len;i++)for(var j=0;j<usersList.length;j++)if(usersList[j].usererec==ZPPickList.sharedSelectedUsers[i]){showAllList.append(ZPPickList.getHTMLForShareList(usersList[j].usererec,(void 0!==usersList[j].empid?usersList[j].empid+" - ":"")+usersList[j].name,!0,ZPPickList.CONSTANTS.USERS));break}st=st+10>ZPPickList.sharedSelectedUsers.length?ZPPickList.sharedSelectedUsers.length:st+10}ZPPickList.LAYOUT.find("#leftSideActiveKeyList").find('[activekey="Users"]').attr("count",st)}},constructShareList:function(records,key,isMore){if(jQuery.isEmptyObject(records)||records.length<=0)ZPPickList.LAYOUT.find("#searchResult_ul").html(ZPI18N.getString("zp.norec"));else{var showAllList=isMore?ZPPickList.LAYOUT.find("#searchResult_ul"):ZPPickList.LAYOUT.find("#searchResult_ul").empty(),sortedRecords=records;ZPPickList.skipSorting||(sortedRecords=ZPUtil.sortByJSONValue(records,"recName",!0));var st=parseInt(ZPPickList.LAYOUT.find("#leftSideActiveKeyList").find("[activekey="+key+"]").attr("count")),len=st+10>Object.keys(sortedRecords).length?Object.keys(sortedRecords).length:st+10,sharedList=[];if(key===ZPPickList.CONSTANTS.ROLES?sharedList=ZPPickList.sharedSelectedRoles:key===ZPPickList.CONSTANTS.DEPARTMENTS?sharedList=ZPPickList.sharedSelectedDepartments:key===ZPPickList.CONSTANTS.DESIGNATIONS?sharedList=ZPPickList.sharedSelectedDesignations:key===ZPPickList.CONSTANTS.LOCATIONS?sharedList=ZPPickList.sharedSelectedLocations:key===ZPPickList.CONSTANTS.SHIFTS?sharedList=ZPPickList.sharedSelectedShifts:key===ZPPickList.CONSTANTS.GROUPS?sharedList=ZPPickList.sharedSelectedGroups:key===ZPPickList.CONSTANTS.DIVISIONS&&(sharedList=ZPPickList.sharedSelectedDivisions),(-1!=Layout.Page.hash.indexOf("#performance")||-1!=Layout.Page.hash.indexOf("#selfservice/user/goals")||-1!=Layout.Page.hash.indexOf("#selfservice/user/kra"))&&void 0!=ZPForm.CURRFORM_PARAM.tableName&&"P_TimesheetJob"==ZPForm.CURRFORM_PARAM.tableName&&sharedList.length<=0)ZPPickList.LAYOUT.find("#searchResult_ul").html(ZPI18N.getString("zp.norec"));else{if(ZPPickList.LAYOUT.find("#zp_sharedto_all_checkbox").prop("checked",!1),ZPPickList.skipSorting){if(sortedRecords instanceof Array)for(i=st;i<len;i++){isSelectable=-1!==sharedList.indexOf(sortedRecords[i].recID);showAllList.append(ZPPickList.getHTMLForShareList(sortedRecords[i].recID,sortedRecords[i].recName,isSelectable))}else if(sortedRecords instanceof Object){var tempList=Object.keys(sortedRecords);if(-1==Layout.Page.hash.indexOf("#performance")&&-1==Layout.Page.hash.indexOf("#selfservice/user/goals")&&-1==Layout.Page.hash.indexOf("#selfservice/user/kra")||void 0==ZPForm.CURRFORM_PARAM.tableName||"P_TimesheetJob"!=ZPForm.CURRFORM_PARAM.tableName)for(i=st;i<len;i++){isSelectable=-1!==sharedList.indexOf(tempList[i]);showAllList.append(ZPPickList.getHTMLForShareList(sortedRecords[tempList[i]].recID,sortedRecords[tempList[i]].recName,isSelectable))}else{len=st+10>sharedList.length?sharedList.length:st+10;for(var i=st;i<len;i++)for(var j=0;j<tempList.length;j++)if(tempList[j]==sharedList[i]){showAllList.append(ZPPickList.getHTMLForShareList(sortedRecords[tempList[j]].recID,sortedRecords[tempList[j]].recName,!0));break}}}}else for(var i=st;i<len;i++){var isSelectable=-1!==sharedList.indexOf(sortedRecords[i].recID);showAllList.append(ZPPickList.getHTMLForShareList(sortedRecords[i].recID,sortedRecords[i].recName,isSelectable))}var c=ZPPickList.LAYOUT.find("#leftSideActiveKeyList").find("[activekey="+key+"]").attr("count");c=-1==Layout.Page.hash.indexOf("#performance")&&-1==Layout.Page.hash.indexOf("#selfservice/user/goals")&&-1==Layout.Page.hash.indexOf("#selfservice/user/kra")||void 0==ZPForm.CURRFORM_PARAM.tableName||"P_TimesheetJob"!=ZPForm.CURRFORM_PARAM.tableName?parseInt(c)+10>Object.keys(sortedRecords).length?Object.keys(sortedRecords).length:parseInt(c)+10:parseInt(c)+10>sharedList.length?sharedList.length:parseInt(c)+10,ZPPickList.LAYOUT.find("#leftSideActiveKeyList").find("[activekey="+key+"]").attr("count",c)}}},getHTMLForShareList:function(key,value,isSelectable,activeField){var row=$("<li id='record_"+key+"'><div class='MT3 zp_value'><label class='checkbox DIB PT8 MR10'><span class='ML2'>"+value+"</span></label></div></li>");if(activeField){var html=ZPUtil.getJSONKeyValue(ZPUtil.getJSONKeyValue(ZPPickList.getExtraDtls(activeField),"extraFldDtls"),"html"),idNamePair=ZPUtil.getJSONKeyValue(ZPUtil.getJSONKeyValue(ZPPickList.getExtraDtls(activeField),"extraFldDtls"),"idNamePair");if(html){html=html.replace("$USER",key);var appendLayout=row.find(".zp_value");Object.keys(idNamePair).length>0&&appendLayout.removeClass("MT3").addClass("ZPSchPoPvl"),$.each(idNamePair,function(id,idJson){var inputId=idJson.inputId,text=idJson.text,addClass=idJson.add_class;if(inputId&&text){var dummyHtml=html;dummyHtml=(dummyHtml=(dummyHtml=dummyHtml.replace("$ID",inputId)).replace("$TEXT",text)).replace("$ADD_CLASS",addClass||"");var inputHtml=$(dummyHtml),onkeyup=ZPPickList.isValidCallback(activeField,"extraFldDtls","onkeyup");if(null!==onkeyup&&inputHtml.on("keyup",onkeyup),inputHtml.data("fieldId",key),inputHtml.attr("elementType",id),-1==Layout.Page.hash.indexOf("#performance")&&-1==Layout.Page.hash.indexOf("#selfservice/user/goals")&&-1==Layout.Page.hash.indexOf("#selfservice/user/kra")||void 0==ZPForm.CURRFORM_PARAM.tableName||"P_TimesheetJob"!=ZPForm.CURRFORM_PARAM.tableName||key==Appraisal.selectUsererecno||inputHtml.attr("disabled","disabled"),appendLayout.after(inputHtml),appendLayout=row.find(".zp_value").siblings(":last"),isSelectable){var makeSelectableCallback=ZPPickList.isValidCallback(activeField,"extraFldDtls","makeSelectableCallback");null!==makeSelectableCallback&&makeSelectableCallback(new Array(key),isSelectable,row)}}})}}var inputField=$("<input type='checkbox' id="+key+" "+(isSelectable?"checked='true'":"")+" onClick='ZPPickList.recordSelection(this)'>");return inputField.data("fieldName",value),-1==Layout.Page.hash.indexOf("#performance")&&-1==Layout.Page.hash.indexOf("#selfservice/user/goals")&&-1==Layout.Page.hash.indexOf("#selfservice/user/kra")||void 0==ZPForm.CURRFORM_PARAM.tableName||"P_TimesheetJob"!=ZPForm.CURRFORM_PARAM.tableName||key==Appraisal.selectUsererecno||inputField.attr("disabled","disabled"),row.find("label.checkbox").prepend(inputField),row},makeSelectable:function(array,originalTotalLength,activeField){if(originalTotalLength<=0)ZPPickList.LAYOUT.find("#zp_sharedto_all_checkbox").prop("checked",!1);else{var sharedList=[],allList=[],allSelected=!1,isSchedulerPage="attendance-settings-absentschedule"===Layout.Page.pageId||"timetracker-settings-schedulersettings"===Layout.Page.pageId||"leavetracker-settings-compensatoryoffschedule"===Layout.Page.pageId||"attendance-shiftmapping-shiftrotation"===Layout.Page.pageId||"timetracker-settings-remindersettings"===Layout.Page.pageId;if(activeField===ZPPickList.CONSTANTS.ROLES?(sharedList=ZPPickList.sharedSelectedRoles,allList=ZPPickList.allRoles,allSelected=ZPPickList.allRolesSelected):activeField===ZPPickList.CONSTANTS.DEPARTMENTS?(sharedList=ZPPickList.sharedSelectedDepartments,allList=ZPPickList.allDepartments,allSelected=ZPPickList.allDepartmentsSelected):activeField===ZPPickList.CONSTANTS.DESIGNATIONS?(sharedList=ZPPickList.sharedSelectedDesignations,allList=ZPPickList.allDesignations,allSelected=ZPPickList.allDesignationsSelected):activeField===ZPPickList.CONSTANTS.LOCATIONS?(sharedList=ZPPickList.sharedSelectedLocations,allList=ZPPickList.allLocations,allSelected=ZPPickList.allLocationsSelected):activeField===ZPPickList.CONSTANTS.SHIFTS?(sharedList=ZPPickList.sharedSelectedShifts,allList=ZPPickList.allShifts):activeField===ZPPickList.CONSTANTS.GROUPS?(sharedList=ZPPickList.sharedSelectedGroups,allList=ZPPickList.allGroups,allSelected=ZPPickList.allGroupsSelected):activeField===ZPPickList.CONSTANTS.DIVISIONS&&(sharedList=ZPPickList.sharedSelectedDivisions,allList=ZPPickList.allDivisions),array.length===originalTotalLength&&(!isSchedulerPage||isSchedulerPage&&allSelected))ZPPickList.LAYOUT.find("#zp_sharedto_all_checkbox")[0].checked=!0,ZPPickList.LAYOUT.find("#searchResult_ul").children().find("input[type=checkbox]").each(function(){-1!==sharedList.indexOf(this.id)?this.checked=!0:this.checked=!1});else{var recLst=ZPPickList.LAYOUT.find("#searchResult_ul").children();$.each(array,function(key,value){var row=recLst.find("input#"+value);void 0!==row&&row.length>0&&(row[0].checked=!0)})}var checkBoxSelectedCount=sharedList.length,currChildlength=Object.keys(0===ZPPickList.LAYOUT.find("#dvZPselect").val().trim().length?allList:ZPPickList.searchList).length;0===checkBoxSelectedCount&&0===currChildlength?ZPPickList.LAYOUT.find("#zp_sharedto_all_checkbox").prop("checked",!1):checkBoxSelectedCount===currChildlength&&(!isSchedulerPage||isSchedulerPage&&allSelected)?ZPPickList.LAYOUT.find("#zp_sharedto_all_checkbox")[0].checked=!0:ZPPickList.LAYOUT.find("#zp_sharedto_all_checkbox").prop("checked",!1);var makeSelectableCallback=ZPPickList.isValidCallback(activeField,"extraFldDtls","makeSelectableCallback");null!==makeSelectableCallback&&makeSelectableCallback(array)}},setSelectedUsers:function(userList){ZPPickList.constructSharedListForEditPage(userList,ZPPickList.CONSTANTS.USERS,ZPPickList.sharedSelectedUsers)},setSelectedDepartments:function(departmentList){ZPPickList.constructSharedListForEditPage(departmentList,ZPPickList.CONSTANTS.DEPARTMENTS,ZPPickList.sharedSelectedDepartments)},setSelectedDesignations:function(designationList){ZPPickList.constructSharedListForEditPage(designationList,ZPPickList.CONSTANTS.DESIGNATIONS,ZPPickList.sharedSelectedDesignations)},setSelectedRoles:function(roleList){ZPPickList.constructSharedListForEditPage(roleList,ZPPickList.CONSTANTS.ROLES,ZPPickList.sharedSelectedRoles)},setSelectedLocations:function(locationList){ZPPickList.constructSharedListForEditPage(locationList,ZPPickList.CONSTANTS.LOCATIONS,ZPPickList.sharedSelectedLocations)},setSelectedShifts:function(shiftList){ZPPickList.constructSharedListForEditPage(shiftList,ZPPickList.CONSTANTS.SHIFTS,ZPPickList.sharedSelectedShifts)},setSelectedGroups:function(groupList){ZPPickList.constructSharedListForEditPage(groupList,ZPPickList.CONSTANTS.GROUPS,ZPPickList.sharedSelectedGroups)},setSelectedDivisions:function(divList){ZPPickList.constructSharedListForEditPage(divList,ZPPickList.CONSTANTS.DIVISIONS,ZPPickList.sharedSelectedDivisions)},setSelectedRecords:function(key,list){key===ZPPickList.CONSTANTS.USERS?ZPPickList.sharedSelectedUsers=list:key===ZPPickList.CONSTANTS.ROLES&&void 0!==ZPPickList.allRoles?ZPPickList.sharedSelectedRoles=list:key===ZPPickList.CONSTANTS.DEPARTMENTS&&void 0!==ZPPickList.allDepartments?ZPPickList.sharedSelectedDepartments=list:key===ZPPickList.CONSTANTS.DESIGNATIONS&&void 0!==ZPPickList.allDesignations?ZPPickList.sharedSelectedDesignations=list:key===ZPPickList.CONSTANTS.LOCATIONS&&void 0!==ZPPickList.allLocations?ZPPickList.sharedSelectedLocations=list:key===ZPPickList.CONSTANTS.SHIFTS&&void 0!==ZPPickList.allShifts?ZPPickList.sharedSelectedShifts=list:key===ZPPickList.CONSTANTS.GROUPS&&void 0!==ZPPickList.allGroups?ZPPickList.sharedSelectedGroups=list:key===ZPPickList.CONSTANTS.DIVISIONS&&void 0!==ZPPickList.allDivisions&&(ZPPickList.sharedSelectedDivisions=list)},constructSharedListForEditPage:function(obj,fieldName,sharedArr){if(!(Object.keys(obj).length<=0)){var objArr=[];objArr=obj.constructor!==Array?Object.keys(obj):obj;var isSchedulerPage="attendance-settings-absentschedule"===Layout.Page.pageId||"timetracker-settings-schedulersettings"===Layout.Page.pageId||"leavetracker-settings-compensatoryoffschedule"===Layout.Page.pageId||"attendance-shiftmapping-shiftrotation"===Layout.Page.pageId||"timetracker-settings-remindersettings"===Layout.Page.pageId;ZPPickList.setSelectedRecords(fieldName,objArr);var selUserHtml="",othersList=[],objLen=objArr.length;if(fieldName===ZPPickList.CONSTANTS.ROLES){var showAllSelected=!isSchedulerPage||ZPPickList.allRolesSelected;ZPPickList.isAllBtnOnly&&objLen===Object.keys(ZPPickList.allRoles).length&&!ZPPickList.checkIfThereDeletedRecords(objArr,Object.keys(ZPPickList.allRoles))&&showAllSelected?(ZPPickList.setSelectedRecords(fieldName,["0"]),selUserHtml="<span id='0' class='label label-primary FL MR5' key='"+fieldName+"'>"+ZPI18N.getString("zp.allroles")+"<i class='CP IC-cls S8 ML5 zp_selvalue' onClick='ZPPickList.removeRecordFromSharedList(event,this)'></i></span>",ZPPickList.LAYOUT.find("#zp_shared_list_"+fieldName).find("#zp_shared_sub_list_records").html(selUserHtml),ZPPickList.adjustDivHeight(),ZPPickList.updateHeaderOption(fieldName)):ZPPickList.constructAllDataList(objArr,fieldName,selUserHtml,othersList)}else if(fieldName===ZPPickList.CONSTANTS.DEPARTMENTS){showAllSelected=!isSchedulerPage||ZPPickList.allDepartmentsSelected;ZPPickList.isAllBtnOnly&&objLen===Object.keys(ZPPickList.allDepartments).length&&!ZPPickList.checkIfThereDeletedRecords(objArr,Object.keys(ZPPickList.allDepartments))&&showAllSelected?(ZPPickList.setSelectedRecords(fieldName,["0"]),selUserHtml="<span id='0' class='label label-primary FL MR5' key='"+fieldName+"'>"+ZPI18N.getString("zp.alldepartment")+"<i class='CP IC-cls S8 ML5 zp_selvalue' onClick='ZPPickList.removeRecordFromSharedList(event,this)'></i></span>",ZPPickList.LAYOUT.find("#zp_shared_list_"+fieldName).find("#zp_shared_sub_list_records").html(selUserHtml),ZPPickList.adjustDivHeight(),ZPPickList.updateHeaderOption(fieldName)):ZPPickList.constructAllDataList(objArr,fieldName,selUserHtml,othersList)}else if(fieldName===ZPPickList.CONSTANTS.DESIGNATIONS){showAllSelected=!isSchedulerPage||ZPPickList.allDesignationsSelected;ZPPickList.isAllBtnOnly&&objLen===Object.keys(ZPPickList.allDesignations).length&&!ZPPickList.checkIfThereDeletedRecords(objArr,Object.keys(ZPPickList.allDesignations))&&showAllSelected?(ZPPickList.setSelectedRecords(fieldName,["0"]),selUserHtml="<span id='0' class='label label-primary FL MR5' key='"+fieldName+"'>"+ZPI18N.getString("zp.alldesignation")+"<i class='CP IC-cls S8 ML5 zp_selvalue' onClick='ZPPickList.removeRecordFromSharedList(event,this)'></i></span>",ZPPickList.LAYOUT.find("#zp_shared_list_"+fieldName).find("#zp_shared_sub_list_records").html(selUserHtml),ZPPickList.adjustDivHeight(),ZPPickList.updateHeaderOption(fieldName)):ZPPickList.constructAllDataList(objArr,fieldName,selUserHtml,othersList)}else if(fieldName===ZPPickList.CONSTANTS.LOCATIONS){showAllSelected=!isSchedulerPage||ZPPickList.allLocationsSelected;ZPPickList.isAllBtnOnly&&objLen===Object.keys(ZPPickList.allLocations).length&&!ZPPickList.checkIfThereDeletedRecords(objArr,Object.keys(ZPPickList.allLocations))&&showAllSelected?(ZPPickList.setSelectedRecords(fieldName,["0"]),selUserHtml="<span id='0' class='label label-primary FL MR5' key='"+fieldName+"'>"+ZPI18N.getString("zp.alllocaction")+"<i class='CP IC-cls S8 ML5 zp_selvalue' onClick='ZPPickList.removeRecordFromSharedList(event,this)'></i></span>",ZPPickList.LAYOUT.find("#zp_shared_list_"+fieldName).find("#zp_shared_sub_list_records").html(selUserHtml),ZPPickList.adjustDivHeight(),ZPPickList.updateHeaderOption(fieldName)):ZPPickList.constructAllDataList(objArr,fieldName,selUserHtml,othersList)}else if(fieldName===ZPPickList.CONSTANTS.SHIFTS)ZPPickList.isAllBtnOnly&&objLen===Object.keys(ZPPickList.allShifts).length&&!ZPPickList.checkIfThereDeletedRecords(objArr,Object.keys(ZPPickList.allShifts))?(ZPPickList.setSelectedRecords(fieldName,["0"]),selUserHtml="<span id='0' class='label label-primary FL MR5' key='"+fieldName+"'>"+ZPI18N.getString("zp.allshifts")+"<i class='CP IC-cls S8 ML5 zp_selvalue' onClick='ZPPickList.removeRecordFromSharedList(event,this)'></i></span>",ZPPickList.LAYOUT.find("#zp_shared_list_"+fieldName).find("#zp_shared_sub_list_records").html(selUserHtml),ZPPickList.adjustDivHeight(),ZPPickList.updateHeaderOption(fieldName)):ZPPickList.constructAllDataList(objArr,fieldName,selUserHtml,othersList);else if(fieldName===ZPPickList.CONSTANTS.GROUPS){showAllSelected=!isSchedulerPage||ZPPickList.allGroupsSelected;ZPPickList.isAllBtnOnly&&objLen===Object.keys(ZPPickList.allGroups).length&&!ZPPickList.checkIfThereDeletedRecords(objArr,Object.keys(ZPPickList.allGroups))&&showAllSelected?(ZPPickList.setSelectedRecords(fieldName,["0"]),selUserHtml="<span id='0' class='label label-primary FL MR5' key='"+fieldName+"'>"+ZPI18N.getString("zp.allgroups")+"<i class='CP IC-cls S8 ML5 zp_selvalue' onClick='ZPPickList.removeRecordFromSharedList(event,this)'></i></span>",ZPPickList.LAYOUT.find("#zp_shared_list_"+fieldName).find("#zp_shared_sub_list_records").html(selUserHtml),ZPPickList.adjustDivHeight(),ZPPickList.updateHeaderOption(fieldName)):ZPPickList.constructAllDataList(objArr,fieldName,selUserHtml,othersList)}else if(fieldName===ZPPickList.CONSTANTS.USERS){var allUsers=[];showAllSelected=!isSchedulerPage||ZPPickList.allUsersSelected;ZPPickList.isAllBtnOnly&&objLen===ZPPickList.allUsers.length&&showAllSelected&&$.each(ZPPickList.allUsers,function(key,value){allUsers[key]=value.usererec}),ZPPickList.isAllBtnOnly&&objLen===ZPPickList.allUsers.length&&showAllSelected&&!ZPPickList.checkIfThereDeletedRecords(objArr,allUsers)?(ZPPickList.setSelectedRecords(fieldName,["0"]),selUserHtml="<span id='0' class='label label-primary FL MR5' key='"+fieldName+"'>"+ZPI18N.getString("zp.allusers")+"<i class='CP IC-cls S8 ML5 zp_selvalue' onClick='ZPPickList.removeRecordFromSharedList(event,this)'></i></span>",ZPPickList.LAYOUT.find("#zp_shared_list_"+fieldName).find("#zp_shared_sub_list_records").html(selUserHtml),ZPPickList.adjustDivHeight(),ZPPickList.updateHeaderOption(fieldName)):ZPPickList.constructAllDataList(objArr,fieldName,selUserHtml,othersList)}else fieldName===ZPPickList.CONSTANTS.DIVISIONS&&(ZPPickList.isAllBtnOnly&&objLen===Object.keys(ZPPickList.allDivisions).length&&!ZPPickList.checkIfThereDeletedRecords(objArr,Object.keys(ZPPickList.allDivisions))?(ZPPickList.setSelectedRecords(fieldName,["0"]),selUserHtml="<span id='0' class='label label-primary FL MR5' key='"+fieldName+"'>"+ZPI18N.getString("zp.AllDivision")+"<i class='CP IC-cls S8 ML5 zp_selvalue' onClick='ZPPickList.removeRecordFromSharedList(event,this)'></i></span>",ZPPickList.LAYOUT.find("#zp_shared_list_"+fieldName).find("#zp_shared_sub_list_records").html(selUserHtml),ZPPickList.adjustDivHeight(),ZPPickList.updateHeaderOption(fieldName)):ZPPickList.constructAllDataList(objArr,fieldName,selUserHtml,othersList))}},constructAllDataList:function(objArr,fieldName,selUserHtml,othersList){var setSelectedListFn=ZPPickList.isValidCallback(fieldName,"extraFldDtls","setSelectedList");$.each(objArr,function(ind,value){var recordName=ZPPickList.getNameByID(fieldName,value);void 0!==recordName?selUserHtml+=null!==setSelectedListFn?setSelectedListFn(fieldName,value,recordName):"<span id='"+value+"' class='label label-primary FL MR5' key='"+fieldName+"'>"+recordName+(-1==Layout.Page.hash.indexOf("#performance")&&-1==Layout.Page.hash.indexOf("#selfservice/user/goals")&&-1==Layout.Page.hash.indexOf("#selfservice/user/kra")||void 0==ZPForm.CURRFORM_PARAM.tableName||"P_TimesheetJob"!=ZPForm.CURRFORM_PARAM.tableName?"<i class='CP IC-cls S8 ML5 zp_selvalue' onClick='ZPPickList.removeRecordFromSharedList(event,this)'></i>":"")+"</span>":(selUserHtml+=ZPPickList.getDollarTags(fieldName,value),othersList.push(value))}),ZPPickList.LAYOUT.find("#zp_shared_list_"+fieldName).find("#zp_shared_sub_list_records").html(selUserHtml),ZPPickList.adjustDivHeight(),ZPPickList.updateHeaderOption(fieldName)},checkIfThereDeletedRecords:function(arr1,arr2){return $.grep(arr1,function(element){return-1===$.inArray(element,arr2)}).length>0},getDeletedRecordsById:function(key,othersList,selUserHtml,setSelectedListFn){return key===ZPPickList.CONSTANTS.USERS?(delRecords=ZPeople.getUserDetailsByIds(othersList,!1),selUserHtml=ZPPickList.getDeletedRecordHtml(key,delRecords,selUserHtml,setSelectedListFn)):void 0!==othersList&&othersList.length>0&&void 0!==key&&$.ajax({type:"POST",async:!1,url:"/commonAction.zp",data:{mode:"GET_DELETEDRECORDS",type:key,list:JSON.stringify(othersList),conreqcsr:csrfToken},success:function(data){if(1==data.success)return delRecords=data.delRecords,selUserHtml=ZPPickList.getDeletedRecordHtml(key,delRecords,selUserHtml,setSelectedListFn)}}),selUserHtml},getDollarTags:function(key,value){var selUserHtml="";return key===ZPPickList.CONSTANTS.USERS?selUserHtml+="$USER:"+value+":USER$":key===ZPPickList.CONSTANTS.DEPARTMENTS?selUserHtml+="$DEPT:"+value+":DEPT$":key===ZPPickList.CONSTANTS.DESIGNATIONS?selUserHtml+="$DESIG:"+value+":DESIG$":key===ZPPickList.CONSTANTS.ROLES?selUserHtml+="$ROLE:"+value+":ROLE$":key===ZPPickList.CONSTANTS.LOCATIONS?selUserHtml+="$LOC:"+value+":LOC$":key===ZPPickList.CONSTANTS.SHIFTS?selUserHtml+="$SHIFT:"+value+":SHIFT$":key===ZPPickList.CONSTANTS.GROUPS?selUserHtml+="$GROUP:"+value+":GROUP$":key===ZPPickList.CONSTANTS.DIVISIONS&&(selUserHtml+="$DIVISIONS:"+value+":DIVISIONS$"),selUserHtml},getNameByID:function(key,id){if(key===ZPPickList.CONSTANTS.USERS)return ZPeople.getUserDetailsByIdFromAllUsers(id).name;if(key===ZPPickList.CONSTANTS.DEPARTMENTS){if(void 0!==ZPPickList.allDepartments[id+""])return ZPPickList.allDepartments[id+""].recName}else if(key===ZPPickList.CONSTANTS.DESIGNATIONS){if(void 0!==ZPPickList.allDesignations[id+""])return ZPPickList.allDesignations[id+""].recName}else if(key===ZPPickList.CONSTANTS.ROLES){if(void 0!==ZPPickList.allRoles[id+""])return ZPPickList.allRoles[id+""].recName}else if(key===ZPPickList.CONSTANTS.LOCATIONS){if(void 0!==ZPPickList.allLocations[id+""])return ZPPickList.allLocations[id+""].recName}else if(key===ZPPickList.CONSTANTS.SHIFTS){if(void 0!==ZPPickList.allShifts[id+""])return ZPPickList.allShifts[id+""].recName}else if(key===ZPPickList.CONSTANTS.GROUPS){if(void 0!==ZPPickList.allGroups[id+""])return ZPPickList.allGroups[id+""].recName}else if(key===ZPPickList.CONSTANTS.DIVISIONS&&void 0!==ZPPickList.allDivisions[id+""])return ZPPickList.allDivisions[id+""].recName},getSelectedUsers:function(){return ZPPickList.sharedSelectedUsers},getSelectedDepartments:function(){return ZPPickList.sharedSelectedDepartments},getSelectedDesignations:function(){return ZPPickList.sharedSelectedDesignations},getSelectedRoles:function(){return ZPPickList.sharedSelectedRoles},getSelectedLocations:function(){return ZPPickList.sharedSelectedLocations},getSelectedShifts:function(){return ZPPickList.sharedSelectedShifts},getSelectedGroups:function(){return ZPPickList.sharedSelectedGroups},getSelectedDivisions:function(){return ZPPickList.sharedSelectedDivisions},isAllDataSelected:function(selectedData,allData){return ZPUtil.checkIsEqualArrays(selectedData,allData)?["0"]:selectedData},isAllDataCheckBoxSelected:function(selectedData,key){return key===ZPPickList.CONSTANTS.USERS&&ZPPickList.allUsersSelected||key===ZPPickList.CONSTANTS.DEPARTMENTS&&ZPPickList.allDepartmentsSelected||key==ZPPickList.CONSTANTS.DESIGNATIONS&&ZPPickList.allDesignationsSelected||key===ZPPickList.CONSTANTS.ROLES&&ZPPickList.allRolesSelected||key===ZPPickList.CONSTANTS.LOCATIONS&&ZPPickList.allLocationsSelected||key===ZPPickList.CONSTANTS.GROUPS&&ZPPickList.allGroupsSelected?["0"]:selectedData},getExtraDtls:function(key){return ZPPickList.extraDtls&&ZPPickList.extraDtls[key]},isSkipUpdate:function(activeField){var skipUpdate=ZPUtil.getJSONKeyValue(ZPPickList.getExtraDtls(activeField),"skipUpdate");return void 0!==skipUpdate&&skipUpdate},isValidCallback:function(selectedKey,parentKey,key){var callbackFn=ZPUtil.getJSONKeyValue(ZPUtil.getJSONKeyValue(ZPPickList.getExtraDtls(selectedKey),parentKey),key);return ZPUtil.Validation.isFunction(callbackFn)?callbackFn:null}}).CONSTANTS={USERS:"Users",DEPARTMENTS:"Departments",DESIGNATIONS:"Designations",ROLES:"Roles",LOCATIONS:"Locations",SHIFTS:"Shifts",GROUPS:"Groups",DIVISIONS:"Divisions",getI18NValue:function(key){var name=ZPI18N.getString("zp."+key.toLowerCase());return key===ZPPickList.CONSTANTS.DIVISIONS&&ZPeople.orgStructureDispNameMap.hasOwnProperty("division")&&(name=ZPeople.orgStructureDispNameMap.division),ZPUtil.Validation.isEmpty(name)?key:name}};var ZPDoublePickList={},ID={APPLICABLE_ID:"zp_dc_applicableFor_inner",NOT_APPLICABLE_ID:"zp_dc_notApplicableFor_inner"};ZPDoublePickList={keyList:null,allData:null,allUsers:null,allUsersObj:null,allDepartments:null,allDesignations:null,allRoles:null,allLocations:null,allShifts:null,allGenders:null,allMaritalStatus:null,appliSelectedUsers:null,appliSelectedDepartments:null,appliSelectedDesignations:null,appliSelectedRoles:null,appliSelectedLocations:null,appliSelectedShifts:null,appliSelectedGenders:null,appliSelectedMaritalStatus:null,notAppliSelectedUsers:null,notAppliSelectedDepartments:null,notAppliSelectedDesignations:null,notAppliSelectedRoles:null,notAppliSelectedLocations:null,notAppliSelectedShifts:null,skipSorting:!1,loginUserNeed:!1,LAYOUT:$("<div id='zp_doubleComponent'><ul class='applcnList row'><li class='col-sm-6 text-center active'><a data-toggle='tab' href='#zp_dc_applicableFor' aria-expanded='false'>"+ZPI18N.getString("zp.applicablefor",[""])+"</a></li><li class='col-sm-6 text-center'><a data-toggle='tab' href='#zp_dc_notApplicableFor' aria-expanded='true'>"+ZPI18N.getString("zp.notapplicableforlabel",[""])+"</a></li></ul><div class='tab-content'><div id='zp_dc_applicableFor' class='tab-pane active'><div class='form-group'><div id="+ID.APPLICABLE_ID+" class='col-sm-10 col-sm-offset-1 appliforid'></div></div></div><div id='zp_dc_notApplicableFor' class='tab-pane'><div class='form-group'><div id="+ID.NOT_APPLICABLE_ID+" class='col-sm-10 col-sm-offset-1 appliforid'></div></div></div></div></div>"),clear:function(){ZPDoublePickList.allUsers=[],ZPDoublePickList.allUsersObj={},ZPDoublePickList.allDepartments={},ZPDoublePickList.allDesignations={},ZPDoublePickList.allRoles={},ZPDoublePickList.allLocations={},ZPDoublePickList.allShifts={},ZPDoublePickList.allGenders={},ZPDoublePickList.allMaritalStatus={},ZPDoublePickList.appliSelectedUsers=[],ZPDoublePickList.appliSelectedDepartments=[],ZPDoublePickList.appliSelectedDesignations=[],ZPDoublePickList.appliSelectedRoles=[],ZPDoublePickList.appliSelectedLocations=[],ZPDoublePickList.appliSelectedShifts=[],ZPDoublePickList.appliSelectedGenders=[],ZPDoublePickList.appliSelectedMaritalStatus=[],ZPDoublePickList.notAppliSelectedUsers=[],ZPDoublePickList.notAppliSelectedDepartments=[],ZPDoublePickList.notAppliSelectedDesignations=[],ZPDoublePickList.notAppliSelectedRoles=[],ZPDoublePickList.notAppliSelectedLocations=[],ZPDoublePickList.notAppliSelectedShifts=[]},getRecordDetails:function(){if(-1!==ZPDoublePickList.keyList.indexOf(ZPComponent.CONSTANTS.USERS))for(var userList=ZPeople.getUserListData(),i=0;i<userList.length;i++){var singleUser=userList[i];(("attendance-settings-absentschedule"===Layout.Page.pageId||"true"===singleUser.isLogEnb)&&singleUser.usererec!==erecno||ZPDoublePickList.loginUserNeed)&&(ZPDoublePickList.allUsers.push(singleUser),ZPDoublePickList.allUsersObj[singleUser.usererec]=singleUser.name)}-1!==ZPDoublePickList.keyList.indexOf(ZPComponent.CONSTANTS.DEPARTMENTS)&&(ZPDoublePickList.allDepartments=ZPDoublePickList.allData.Departments),-1!==ZPDoublePickList.keyList.indexOf(ZPComponent.CONSTANTS.DESIGNATIONS)&&(ZPDoublePickList.allDesignations=ZPDoublePickList.allData.Designations),-1!==ZPDoublePickList.keyList.indexOf(ZPComponent.CONSTANTS.ROLES)&&(ZPDoublePickList.allRoles=ZPDoublePickList.allData.Roles),-1!==ZPDoublePickList.keyList.indexOf(ZPComponent.CONSTANTS.LOCATIONS)&&(ZPDoublePickList.allLocations=ZPDoublePickList.allData.Locations),-1!==ZPDoublePickList.keyList.indexOf(ZPComponent.CONSTANTS.SHIFTS)&&(ZPDoublePickList.allShifts=ZPDoublePickList.allData.Shifts)},applicableForTextBoxTemplate:"<div class='input-group dropdown' id='commonPickListComp'><div id='key_list' class='form-control DN'></div><span aria-expanded='false' class='input-group-addon BL0I' data-toggle='dropdown'><i class='IC-addlist gry CP'></i></span><div class='dropdown-menu ZPCusPd ZPappBox  ZPCmn-Arrow top gray'><div class='ZPTabVt'><div class='lfttab'><ul id='leftSideActiveKeyList' role='tablist' class='nav nav-pills nav-stacked'></ul></div><div class='rhttabscrl'><div class='tab-content'><div class='tab-pane active' role='tabpanel'><div><div class='ZPtopSearch'><label class='checkbox DIB FL PT8 MR10' title='Select All' id='zp_sharedto_all_label'><input id='zp_sharedto_all_checkbox' type='checkbox'><span></span></label><div class='ZPsearch' id='ZPsearch'><div class='dvsearch Dropdown PR'><span class='ZPico-search FL MT2 ML8 ZPtooltip IC-lens S16' zptitle='Search Category'></span></div><input type='search' class='ZPselect' id='dvZPselect' placeholder='"+ZPI18N.getString("zp.search")+"' value='' name='Search'></div></div><div class='ZPapplCb'><ul id='searchResult_ul'></ul></div></div></div></div></div></div></div></div>",init:function(keys,loginUserNeedF){return(null===ZPDoublePickList.allData||Object.keys(ZPDoublePickList.allData).length<=0)&&(ZPDoublePickList.allData=ZPComponent.getAllData()),ZPDoublePickList.clear(),ZPDoublePickList.keyList=keys,ZPDoublePickList.loginUserNeed=loginUserNeedF,ZPDoublePickList.getRecordDetails(),ZPDoublePickList.LAYOUT.find("#"+ID.APPLICABLE_ID).html(ZPDoublePickList.applicableForTextBoxTemplate),ZPDoublePickList.LAYOUT.find("#"+ID.APPLICABLE_ID+" #zp_sharedto_all_checkbox").attr("onclick","ZPDoublePickList.allCheckSelection('"+ID.APPLICABLE_ID+"')"),ZPDoublePickList.LAYOUT.find("#"+ID.NOT_APPLICABLE_ID).html(ZPDoublePickList.applicableForTextBoxTemplate),ZPDoublePickList.LAYOUT.find("#"+ID.NOT_APPLICABLE_ID+" #zp_sharedto_all_checkbox").attr("onclick","ZPDoublePickList.allCheckSelection('"+ID.NOT_APPLICABLE_ID+"')"),ZPDoublePickList.generateKeys(keys,ID.APPLICABLE_ID),ZPDoublePickList.generateKeys(keys,ID.NOT_APPLICABLE_ID),ZPDoublePickList.defaultActions(ID.APPLICABLE_ID),ZPDoublePickList.defaultActions(ID.NOT_APPLICABLE_ID),ZPDoublePickList.LAYOUT.find("#zp_dc_applicableFor_inner #commonPickListComp,#zp_dc_notApplicableFor_inner #commonPickListComp").find(".dropdown-menu").addClass("ZPSchPoP"),ZPDoublePickList.LAYOUT},generateKeys:function(keys,id){ZPDoublePickList.LAYOUT.find("#"+id+" #key_list").empty(),ZPDoublePickList.LAYOUT.find("#"+id+" #leftSideActiveKeyList").empty(),$.each(keys,function(key,value){(id!==ID.NOT_APPLICABLE_ID||value!==ZPComponent.CONSTANTS.MARITALSTATUS&&value!==ZPComponent.CONSTANTS.GENDERS)&&(ZPDoublePickList.LAYOUT.find("#"+id+" #key_list").append(ZPPickList.sharedListDivTemplate),ZPDoublePickList.LAYOUT.find("#"+id+" #key_list").find("#zp_shared_list_").attr("id","zp_shared_list_"+value),ZPDoublePickList.LAYOUT.find("#"+id+" #key_list").find("#zp_shared_list_"+value).find("#header_name").append(ZPComponent.CONSTANTS.getI18NValue(value)),ZPDoublePickList.LAYOUT.find("#"+id+" #key_list").find("#zp_shared_list_"+value).find("#zp_shared_sub_list_header").find("button").attr("key",value),ZPDoublePickList.LAYOUT.find("#"+id+" #key_list").find("#zp_shared_list_"+value).find("#zp_shared_sub_list_header").find("button").attr("onclick","ZPDoublePickList.clearSharedDisplayList(event,this)"),ZPDoublePickList.LAYOUT.find("#"+id+" #key_list").find("#zp_shared_list_"+value+" #zp_shared_sub_list_header #header_name i").attr("onmousedown","ZPDoublePickList.expandCollapseHeader(event,this)"),ZPDoublePickList.LAYOUT.find("#"+id+" #leftSideActiveKeyList").append(ZPPickList.activeClassListTemplate),ZPDoublePickList.LAYOUT.find("#"+id+" #leftSideActiveKeyList").find("#activeField_").attr("id","activeField_"+value),ZPDoublePickList.LAYOUT.find("#"+id+" #leftSideActiveKeyList").find("#activeField_"+value).attr("activeKey",value),ZPDoublePickList.LAYOUT.find("#"+id+" #leftSideActiveKeyList").find("#activeField_"+value).addClass("showThisKey"),ZPDoublePickList.LAYOUT.find("#"+id+" #leftSideActiveKeyList").find("#activeField_"+value).find("a").removeAttr("onClick"),ZPDoublePickList.LAYOUT.find("#"+id+" #leftSideActiveKeyList").find("#activeField_"+value).find("a").attr("onClick","ZPDoublePickList.getRecords(this)").data("key",value),ZPDoublePickList.LAYOUT.find("#"+id+" #leftSideActiveKeyList").find("#activeField_"+value).find("a").html(ZPComponent.CONSTANTS.getI18NValue(value)))})},defaultActions:function(id){$(document).on("show.bs.dropdown","#"+id+" #commonPickListComp",function(){var childLists=ZPDoublePickList.LAYOUT.find("#"+id+" #leftSideActiveKeyList").children(".showThisKey");$.each(childLists,function(key,value){$(this).removeClass("active")});var firstItem=ZPDoublePickList.LAYOUT.find("#"+id+" #leftSideActiveKeyList").children(".showThisKey")[0];if(void 0!==firstItem){$(firstItem).addClass("active");var activeField=ZPDoublePickList.LAYOUT.find("#"+id+" #leftSideActiveKeyList").children(".showThisKey.active").attr("activeKey");ZPDoublePickList.getAllRecords(id,activeField),ZPDoublePickList.LAYOUT.find("#"+id+" #dvZPselect").val("")}else ZPDoublePickList.LAYOUT.find("#"+id+" #searchResult_ul").html(ZPI18N.getString("zp.nolistfound"))}),$(document).on("click",".dropdown-menu",function(e){$(this).hasClass("ZPnotifyBox")&&e.stopPropagation(),$(this).hasClass("ZPplusBox")&&e.stopPropagation(),$(this).hasClass("ZPCusPd")&&e.stopPropagation()}),ZPDoublePickList.LAYOUT.find("#"+id+" #dvZPselect").on("keyup",function(){var compID=ZPDoublePickList.getComponentID(this);ZPDoublePickList.defaultSearchAction(compID,this)})},defaultSearchAction:function(compID,obj){var activeField=ZPDoublePickList.LAYOUT.find("#"+compID+" #leftSideActiveKeyList").children(".showThisKey.active").attr("activeKey"),searchStr=$(obj).val().trim();if(searchStr.length<=0)ZPDoublePickList.getAllRecords(compID,activeField);else{searchStr=searchStr.toLowerCase();var tempList=[];activeField===ZPComponent.CONSTANTS.USERS?($.each(ZPDoublePickList.allUsers,function(key,value){-1!==ZPeople.decodeTxt(value.name).toLowerCase().indexOf(searchStr)&&tempList.push(value)}),ZPDoublePickList.constructUsersList(compID,tempList,!0,!0)):activeField===ZPComponent.CONSTANTS.DEPARTMENTS?ZPDoublePickList.searchRecord(compID,activeField,searchStr,ZPDoublePickList.allDepartments):activeField===ZPComponent.CONSTANTS.DESIGNATIONS?ZPDoublePickList.searchRecord(compID,activeField,searchStr,ZPDoublePickList.allDesignations):activeField===ZPComponent.CONSTANTS.ROLES?ZPDoublePickList.searchRecord(compID,activeField,searchStr,ZPDoublePickList.allRoles):activeField===ZPComponent.CONSTANTS.LOCATIONS?ZPDoublePickList.searchRecord(compID,activeField,searchStr,ZPDoublePickList.allLocations):activeField===ZPComponent.CONSTANTS.SHIFTS&&ZPDoublePickList.searchRecord(compID,activeField,searchStr,ZPDoublePickList.allShifts)}},searchRecord:function(compID,key,searchKey,recordArr){var tempList=[];$.each(recordArr,function(key,value){-1!==ZPeople.decodeTxt(value.recName).toLowerCase().indexOf(searchKey)&&tempList.push(value)}),ZPDoublePickList.constructShareList(compID,tempList),ZPDoublePickList.makeSelectable(compID,key,recordArr.length)},getComponentID:function(obj){return $(obj).parents().find("#zp_doubleComponent .active .col-sm-10.appliforid").attr("id")},getRecords:function(obj){var compID=ZPDoublePickList.getComponentID(obj),key=$(obj).data("key");ZPDoublePickList.LAYOUT.find("#"+compID+" #zp_sharedto_all_checkbox").prop("checked",!1),ZPDoublePickList.LAYOUT.find("#"+compID+" #dvZPselect").val(""),ZPDoublePickList.getAllRecords(compID,key)},getAllRecords:function(id,key){key===ZPComponent.CONSTANTS.USERS&&void 0!==ZPDoublePickList.allUsers?ZPDoublePickList.constructUsersList(id,ZPDoublePickList.allUsers,!0):key===ZPComponent.CONSTANTS.ROLES&&void 0!==ZPDoublePickList.allRoles?(ZPDoublePickList.constructShareList(id,ZPDoublePickList.allRoles),ZPDoublePickList.makeSelectable(id,key,Object.keys(ZPDoublePickList.allRoles).length)):key===ZPComponent.CONSTANTS.DEPARTMENTS&&void 0!==ZPDoublePickList.allDepartments?(ZPDoublePickList.constructShareList(id,ZPDoublePickList.allDepartments),ZPDoublePickList.makeSelectable(id,key,Object.keys(ZPDoublePickList.allDepartments).length)):key===ZPComponent.CONSTANTS.DESIGNATIONS&&void 0!==ZPDoublePickList.allDesignations?(ZPDoublePickList.constructShareList(id,ZPDoublePickList.allDesignations),ZPDoublePickList.makeSelectable(id,key,Object.keys(ZPDoublePickList.allDesignations).length)):key===ZPComponent.CONSTANTS.LOCATIONS&&void 0!==ZPDoublePickList.allLocations?(ZPDoublePickList.constructShareList(id,ZPDoublePickList.allLocations),ZPDoublePickList.makeSelectable(id,key,Object.keys(ZPDoublePickList.allLocations).length)):key===ZPComponent.CONSTANTS.SHIFTS&&void 0!==ZPDoublePickList.allShifts?(ZPDoublePickList.constructShareList(id,ZPDoublePickList.allShifts),ZPDoublePickList.makeSelectable(id,key,Object.keys(ZPDoublePickList.allShifts).length)):key===ZPComponent.CONSTANTS.GENDERS&&void 0!==ZPDoublePickList.allGenders?(ZPDoublePickList.constructShareList(id,ZPDoublePickList.allGenders),ZPDoublePickList.makeSelectable(id,key,Object.keys(ZPDoublePickList.allGenders).length)):key===ZPComponent.CONSTANTS.MARITALSTATUS&&void 0!==ZPDoublePickList.allMaritalStatus&&(ZPDoublePickList.constructShareList(id,ZPDoublePickList.allMaritalStatus),ZPDoublePickList.makeSelectable(id,key,Object.keys(ZPDoublePickList.allMaritalStatus).length))},constructUsersList:function(id,usersList,isSelect,isSearch){if(jQuery.isEmptyObject(usersList)||usersList.length<=0)ZPDoublePickList.LAYOUT.find("#"+id+" #searchResult_ul").html(ZPI18N.getString("zp.norec"));else{var array=isSelect?ZPDoublePickList.getSpecificArray(id,ZPComponent.CONSTANTS.USERS):[];isSearch||(usersList.length===array.length?ZPDoublePickList.LAYOUT.find("#"+id+" #zp_sharedto_all_checkbox")[0].checked=!0:ZPDoublePickList.LAYOUT.find("#"+id+" #zp_sharedto_all_checkbox")[0].checked=!1);for(var showAllList=ZPDoublePickList.LAYOUT.find("#"+id+" #searchResult_ul").empty(),i=0;i<usersList.length;i++){var isSelectable=-1!==array.indexOf(usersList[i].usererec);showAllList.append(ZPDoublePickList.getHTMLForShareList(usersList[i].usererec,usersList[i].name,isSelectable))}}},constructShareList:function(id,records){if(jQuery.isEmptyObject(records)||records.length<=0)ZPDoublePickList.LAYOUT.find("#"+id+" #searchResult_ul").html(ZPI18N.getString("zp.norec"));else{ZPDoublePickList.LAYOUT.find("#"+id+" #zp_sharedto_all_checkbox").prop("checked",!1);var showAllList=ZPDoublePickList.LAYOUT.find("#"+id+" #searchResult_ul").empty();ZPDoublePickList.skipSorting||(sortedRecords=ZPUtil.sortByJSONValue(records,"recName",!0)),$.each(sortedRecords,function(key,value){showAllList.append(ZPDoublePickList.getHTMLForShareList(value.recID,value.recName))})}},getHTMLForShareList:function(key,value,isSelectable){var row=$("<li id='record_"+key+"'><div class='MT3'><label class='checkbox DIB PT8 MR10'><span class='ML2'>"+value+"</span></label></div></li>"),inputField=$("<input type='checkbox' id='"+key+"' "+(isSelectable?"checked='checked'":"")+" onClick='ZPDoublePickList.recordSelection(this)'>");return inputField.data("fieldName",value),row.find("label.checkbox").prepend(inputField),row},getSpecificArray:function(id,key){if(id===ID.APPLICABLE_ID){if(key===ZPComponent.CONSTANTS.USERS)return ZPDoublePickList.getSelectedApplicableUsers();if(key===ZPComponent.CONSTANTS.DEPARTMENTS)return ZPDoublePickList.getSelectedApplicableDepartments();if(key===ZPComponent.CONSTANTS.DESIGNATIONS)return ZPDoublePickList.getSelectedApplicableDesignations();if(key===ZPComponent.CONSTANTS.ROLES)return ZPDoublePickList.getSelectedApplicableRoles();if(key===ZPComponent.CONSTANTS.LOCATIONS)return ZPDoublePickList.getSelectedApplicableLocations();if(key===ZPComponent.CONSTANTS.SHIFTS)return ZPDoublePickList.getSelectedApplicableShifts();if(key===ZPComponent.CONSTANTS.GENDERS)return ZPDoublePickList.getSelectedApplicableGender();if(key===ZPComponent.CONSTANTS.MARITALSTATUS)return ZPDoublePickList.getSelectedApplicableMStatus()}else{if(key===ZPComponent.CONSTANTS.USERS)return ZPDoublePickList.getSelectedNotApplicableUsers();if(key===ZPComponent.CONSTANTS.DEPARTMENTS)return ZPDoublePickList.getSelectedNotApplicableDepartments();if(key===ZPComponent.CONSTANTS.DESIGNATIONS)return ZPDoublePickList.getSelectedNotApplicableDesignations();if(key===ZPComponent.CONSTANTS.ROLES)return ZPDoublePickList.getSelectedNotApplicableRoles();if(key===ZPComponent.CONSTANTS.LOCATIONS)return ZPDoublePickList.getSelectedNotApplicableLocations();if(key===ZPComponent.CONSTANTS.SHIFTS)return ZPDoublePickList.getSelectedNotApplicableShifts()}return[]},setSpecificArray:function(id,key,array){var rec=void 0===array?[]:array;id===ID.APPLICABLE_ID?key===ZPComponent.CONSTANTS.USERS?ZPDoublePickList.setSelectedApplicableUsers(rec):key===ZPComponent.CONSTANTS.DEPARTMENTS?ZPDoublePickList.setSelectedApplicableDepartments(rec):key===ZPComponent.CONSTANTS.DESIGNATIONS?ZPDoublePickList.setSelectedApplicableDesignations(rec):key===ZPComponent.CONSTANTS.ROLES?ZPDoublePickList.setSelectedApplicableRoles(rec):key===ZPComponent.CONSTANTS.LOCATIONS?ZPDoublePickList.setSelectedApplicableLocations(rec):key===ZPComponent.CONSTANTS.SHIFTS?ZPDoublePickList.setSelectedApplicableShifts(rec):key===ZPComponent.CONSTANTS.GENDERS?ZPDoublePickList.setSelectedApplicableGender(rec):key===ZPComponent.CONSTANTS.MARITALSTATUS&&ZPDoublePickList.setSelectedApplicableMstatus(rec):key===ZPComponent.CONSTANTS.USERS?ZPDoublePickList.setSelectedNotApplicableUsers(rec):key===ZPComponent.CONSTANTS.DEPARTMENTS?ZPDoublePickList.setSelectedNotApplicableDepartments(rec):key===ZPComponent.CONSTANTS.DESIGNATIONS?ZPDoublePickList.setSelectedNotApplicableDesignations(rec):key===ZPComponent.CONSTANTS.ROLES?ZPDoublePickList.setSelectedNotApplicableRoles(rec):key===ZPComponent.CONSTANTS.LOCATIONS?ZPDoublePickList.setSelectedNotApplicableLocations(rec):key===ZPComponent.CONSTANTS.SHIFTS&&ZPDoublePickList.setSelectedNotApplicableShifts(rec)},setArrayData:function(id,key,array){id===ID.APPLICABLE_ID?key===ZPComponent.CONSTANTS.USERS?ZPDoublePickList.appliSelectedUsers=array:key===ZPComponent.CONSTANTS.DEPARTMENTS?ZPDoublePickList.appliSelectedDepartments=array:key===ZPComponent.CONSTANTS.DESIGNATIONS?ZPDoublePickList.appliSelectedDesignations=array:key===ZPComponent.CONSTANTS.ROLES?ZPDoublePickList.appliSelectedRoles=array:key===ZPComponent.CONSTANTS.LOCATIONS?ZPDoublePickList.appliSelectedLocations=array:key===ZPComponent.CONSTANTS.SHIFTS?ZPDoublePickList.appliSelectedShifts=array:key===ZPComponent.CONSTANTS.GENDERS?ZPDoublePickList.appliSelectedGenders=array:key===ZPComponent.CONSTANTS.MARITALSTATUS&&(ZPDoublePickList.appliSelectedMaritalStatus=array):key===ZPComponent.CONSTANTS.USERS?ZPDoublePickList.notAppliSelectedUsers=array:key===ZPComponent.CONSTANTS.DEPARTMENTS?ZPDoublePickList.notAppliSelectedDepartments=array:key===ZPComponent.CONSTANTS.DESIGNATIONS?ZPDoublePickList.notAppliSelectedDesignations=array:key===ZPComponent.CONSTANTS.ROLES?ZPDoublePickList.notAppliSelectedRoles=array:key===ZPComponent.CONSTANTS.LOCATIONS?ZPDoublePickList.notAppliSelectedLocations=array:key===ZPComponent.CONSTANTS.SHIFTS&&(ZPDoublePickList.notAppliSelectedShifts=array)},makeSelectable:function(id,key,originalTotalLength){if(originalTotalLength<=0)ZPDoublePickList.LAYOUT.find("#"+id+" #zp_sharedto_all_checkbox").prop("checked",!1);else{var array=ZPDoublePickList.getSpecificArray(id,key);array.length===originalTotalLength&&(ZPDoublePickList.LAYOUT.find("#"+id+" #zp_sharedto_all_checkbox")[0].checked=!0),$.each(array,function(key,value){var row=ZPDoublePickList.LAYOUT.find("#"+id+" #searchResult_ul").children().find("input#"+value);void 0!==row&&row.length>0&&(row[0].checked=!0)});var checkBoxSelectedCount=ZPDoublePickList.LAYOUT.find("#"+id+" #searchResult_ul").children("li").find("input[type='checkbox']:checked").length,currChildlength=ZPDoublePickList.LAYOUT.find("#"+id+" #searchResult_ul").children().length;0===checkBoxSelectedCount&&0===currChildlength?ZPDoublePickList.LAYOUT.find("#"+id+" #zp_sharedto_all_checkbox").prop("checked",!1):checkBoxSelectedCount===currChildlength?ZPDoublePickList.LAYOUT.find("#"+id+" #zp_sharedto_all_checkbox")[0].checked=!0:ZPDoublePickList.LAYOUT.find("#"+id+" #zp_sharedto_all_checkbox").prop("checked",!1)}},allCheckSelection:function(compID){var isAllChecked=ZPDoublePickList.LAYOUT.find("#"+compID+" #zp_sharedto_all_checkbox").is(":checked"),childList=ZPDoublePickList.LAYOUT.find("#"+compID+" #searchResult_ul").children(),childLength=childList.length,activeField=ZPDoublePickList.LAYOUT.find("#"+compID+" #leftSideActiveKeyList").children(".showThisKey.active").attr("activeKey"),sharedRecordList=ZPDoublePickList.LAYOUT.find("#"+compID+" #zp_shared_list_"+activeField).find("#zp_shared_sub_list_records");if(isAllChecked){var selUserHtml="",fieldName=activeField===ZPComponent.CONSTANTS.MARITALSTATUS?"Marital Status":activeField;selUserHtml+="<span id='-1' alldata='true' class='label label-primary FL MR5'>"+ZPI18N.getString("zp.all")+" "+ZPComponent.CONSTANTS.getI18NValue(activeField)+"<i class='IC-cls S8 ML5' onClick='ZPDoublePickList.removeRecordFromSharedList(event,this, \""+compID+'", "'+fieldName+"\")'></i></span>",$.each(childList,function(key,value){$(this).find("input")[0].checked=!0;var selectedID=$(this).find("input").attr("id");$(this).find("input").data("fieldName");ZPDoublePickList.selectionRecord(compID,activeField,selectedID,!0)}),""!==selUserHtml&&sharedRecordList.append(selUserHtml)}else childLength>0&&(childList.find('.checkbox input[type="checkbox"]').prop("checked",!1),sharedRecordList.find("#zp_shared_sub_list_records").empty(),ZPDoublePickList.emptySelection(compID,activeField));ZPDoublePickList.updateHeaderOption(compID,activeField),ZPDoublePickList.adjustDivHeight(compID)},updateHeaderOption:function(compID,key){if(ZPDoublePickList.LAYOUT.find("#"+compID+" #zp_shared_list_"+key).find("#zp_shared_sub_list_records").children().length>0){ZPDoublePickList.LAYOUT.find("#"+compID+" #zp_shared_list_"+key).find("#zp_shared_sub_list_header").find("button").removeClass("DN"),ZPDoublePickList.LAYOUT.find("#"+compID+" #zp_shared_list_"+key).find("#zp_shared_sub_list_header").show(),ZPDoublePickList.LAYOUT.find("#"+compID+" #zp_shared_list_"+key).prev().show();var expColDivObj=ZPDoublePickList.LAYOUT.find("#"+compID+" #zp_shared_list_"+key+" #header_name i");$(expColDivObj).hasClass("IC-expnd")&&($(expColDivObj).removeClass("IC-expnd").addClass("IC-mini"),ZPDoublePickList.LAYOUT.find("#"+compID+" #zp_shared_list_"+key+" #zp_shared_sub_list_records").slideToggle("fast"))}else{ZPDoublePickList.LAYOUT.find("#"+compID+" #zp_shared_list_"+key).find("#zp_shared_sub_list_header").find("button").addClass("DN"),ZPDoublePickList.LAYOUT.find("#"+compID+" #zp_shared_list_"+key).find("#zp_shared_sub_list_header").hide(),ZPDoublePickList.LAYOUT.find("#"+compID+" #zp_shared_list_"+key).prev().hide();expColDivObj=ZPDoublePickList.LAYOUT.find("#"+compID+" #zp_shared_list_"+key+" #header_name i");$(expColDivObj).hasClass("IC-mini")&&($(expColDivObj).removeClass("IC-mini").addClass("IC-expnd"),ZPDoublePickList.LAYOUT.find("#"+compID+" #zp_shared_list_"+key+" #zp_shared_sub_list_records").slideToggle("fast"))}},emptySelection:function(id,key){id===ID.APPLICABLE_ID?key===ZPComponent.CONSTANTS.USERS?ZPDoublePickList.appliSelectedUsers=[]:key===ZPComponent.CONSTANTS.DEPARTMENTS?ZPDoublePickList.appliSelectedDepartments=[]:key===ZPComponent.CONSTANTS.DESIGNATIONS?ZPDoublePickList.appliSelectedDesignations=[]:key===ZPComponent.CONSTANTS.ROLES?ZPDoublePickList.appliSelectedRoles=[]:key===ZPComponent.CONSTANTS.LOCATIONS?ZPDoublePickList.appliSelectedLocations=[]:key===ZPComponent.CONSTANTS.SHIFTS?ZPDoublePickList.appliSelectedShifts=[]:key===ZPComponent.CONSTANTS.GENDERS?ZPDoublePickList.appliSelectedGenders=[]:key===ZPComponent.CONSTANTS.MARITALSTATUS&&(ZPDoublePickList.appliSelectedMaritalStatus=[]):key===ZPComponent.CONSTANTS.USERS?ZPDoublePickList.notAppliSelectedUsers=[]:key===ZPComponent.CONSTANTS.DEPARTMENTS?ZPDoublePickList.notAppliSelectedDepartments=[]:key===ZPComponent.CONSTANTS.DESIGNATIONS?ZPDoublePickList.notAppliSelectedDesignations=[]:key===ZPComponent.CONSTANTS.ROLES?ZPDoublePickList.notAppliSelectedRoles=[]:key===ZPComponent.CONSTANTS.LOCATIONS?ZPDoublePickList.notAppliSelectedLocations=[]:key===ZPComponent.CONSTANTS.SHIFTS&&(ZPDoublePickList.notAppliSelectedShifts=[]),ZPDoublePickList.LAYOUT.find("#"+id+" #zp_shared_list_"+key).find("#zp_shared_sub_list_records").empty()},clearSelectionData:function(){$.each(ZPDoublePickList.keyList,function(k,v){ZPDoublePickList.emptySelection(ID.APPLICABLE_ID,v),ZPDoublePickList.getSpecificArray(ID.APPLICABLE_ID,v).length=0,ZPDoublePickList.LAYOUT.find("#"+ID.APPLICABLE_ID+" #leftSideActiveKeyList").children(".showThisKey.active").attr("activeKey")===v&&ZPDoublePickList.getAllRecords(ID.APPLICABLE_ID,v),ZPDoublePickList.LAYOUT.find("#"+ID.APPLICABLE_ID+" #zp_sharedto_all_checkbox").prop("checked",!1),ZPDoublePickList.LAYOUT.find("#"+ID.APPLICABLE_ID+" #zp_shared_list_"+v).find("#zp_shared_sub_list_records").children().remove(),ZPDoublePickList.LAYOUT.find("#"+ID.APPLICABLE_ID+" #zp_shared_list_"+v).find("#zp_shared_sub_list_header").hide(),ZPDoublePickList.LAYOUT.find("#"+ID.APPLICABLE_ID+" #zp_shared_list_"+v).prev().hide(),ZPDoublePickList.LAYOUT.find("#"+ID.APPLICABLE_ID+" #zp_shared_list_"+v).find("#zp_shared_sub_list_header").find("button").addClass("DN"),ZPDoublePickList.adjustDivHeight(ID.APPLICABLE_ID)}),$.each(ZPDoublePickList.keyList,function(k,v){ZPDoublePickList.emptySelection(ID.NOT_APPLICABLE_ID,v),ZPDoublePickList.getSpecificArray(ID.NOT_APPLICABLE_ID,v).length=0,ZPDoublePickList.LAYOUT.find("#"+ID.NOT_APPLICABLE_ID+" #zp_sharedto_all_checkbox").prop("checked",!1),ZPDoublePickList.LAYOUT.find("#"+ID.NOT_APPLICABLE_ID+" #zp_shared_list_"+v).find("#zp_shared_sub_list_records").children().remove(),ZPDoublePickList.LAYOUT.find("#"+ID.NOT_APPLICABLE_ID+" #zp_shared_list_"+v).find("#zp_shared_sub_list_header").hide(),ZPDoublePickList.LAYOUT.find("#"+ID.NOT_APPLICABLE_ID+" #zp_shared_list_"+v).prev().hide(),ZPDoublePickList.LAYOUT.find("#"+ID.NOT_APPLICABLE_ID+" #zp_shared_list_"+v).find("#zp_shared_sub_list_header").find("button").addClass("DN"),ZPDoublePickList.adjustDivHeight(ID.NOT_APPLICABLE_ID)})},recordSelection:function(obj){var compID=ZPDoublePickList.getComponentID(obj),isSelected=$(obj).is(":checked"),activeField=ZPDoublePickList.LAYOUT.find("#"+compID+" #leftSideActiveKeyList").children(".showThisKey.active").attr("activeKey"),selectedID=$(obj).attr("id");ZPDoublePickList.selectionRecord(compID,activeField,selectedID,isSelected);var list=ZPDoublePickList.getAllIds(activeField),childrenObj=ZPDoublePickList.LAYOUT.find("#"+compID+" #searchResult_ul").children(),sharedRecordList=ZPDoublePickList.LAYOUT.find("#"+compID+" #zp_shared_list_"+activeField).find("#zp_shared_sub_list_records"),allCheckObj=ZPDoublePickList.LAYOUT.find("#"+compID+" #zp_sharedto_all_checkbox");if(list.length===childrenObj.children().find("input:checked").length)allCheckObj[0].checked=!0,sharedRecordList.html("<span id='-1' alldata='true' class='label label-primary FL MR5'>All "+activeField+"<i class='IC-cls S8 ML5' onClick='ZPDoublePickList.removeRecordFromSharedList(event,this, \""+compID+'", "'+activeField+"\")'></i></span>");else if(allCheckObj[0].checked=!1,0===sharedRecordList.find("span[alldata='true']").length)if(isSelected){var selectedName=$(obj).data("fieldName");sharedRecordList.append("<span id='"+selectedID+"' class='label label-primary FL MR5'>"+selectedName+"<i class='IC-cls S8 ML5' onClick='ZPDoublePickList.removeRecordFromSharedList(event,this, \""+compID+'", "'+activeField+"\")'></i></span>")}else sharedRecordList.find("#"+selectedID).remove();else{var selHtml="",childs=childrenObj.children().find("input:checked");$.each(childs,function(){var selectedID=$(this).attr("id"),selectedName=$(this).data("fieldName");selHtml+="<span id='"+selectedID+"' class='label label-primary FL MR5'>"+selectedName+"<i class='IC-cls S8 ML5' onClick='ZPDoublePickList.removeRecordFromSharedList(event,this, \""+compID+'", "'+activeField+"\")'></i></span>"}),sharedRecordList.html(selHtml)}ZPDoublePickList.adjustDivHeight(compID),ZPDoublePickList.updateHeaderOption(compID,activeField)},selectionRecord:function(compID,activeField,pkid,isSelected){var array=ZPDoublePickList.getSpecificArray(compID,activeField),index=array.indexOf(pkid);-1===index?array.push(pkid):array.splice(index,1)},adjustDivHeight:function(compID){compID===ID.APPLICABLE_ID?(ZPDoublePickList.getSelectedApplicableUsers().length<=0&&ZPDoublePickList.getSelectedApplicableDepartments().length<=0&&ZPDoublePickList.getSelectedApplicableDesignations().length<=0&&ZPDoublePickList.getSelectedApplicableRoles().length<=0&&ZPDoublePickList.getSelectedApplicableLocations().length<=0&&ZPDoublePickList.getSelectedApplicableShifts().length<=0&&ZPDoublePickList.getSelectedApplicableGender().length<=0&&ZPDoublePickList.getSelectedApplicableMStatus().length<=0?ZPDoublePickList.LAYOUT.find("#"+compID+" #key_list").hasClass("input-lbltags")&&ZPDoublePickList.LAYOUT.find("#"+compID+" #key_list").removeClass("input-lbltags"):ZPDoublePickList.LAYOUT.find("#"+compID+" #key_list").hasClass("input-lbltags")||ZPDoublePickList.LAYOUT.find("#"+compID+" #key_list").addClass("input-lbltags"),ZPDoublePickList.hideShowNotApplicableKey()):ZPDoublePickList.getSelectedNotApplicableUsers().length<=0&&ZPDoublePickList.getSelectedNotApplicableDepartments().length<=0&&ZPDoublePickList.getSelectedNotApplicableDesignations().length<=0&&ZPDoublePickList.getSelectedNotApplicableRoles().length<=0&&ZPDoublePickList.getSelectedNotApplicableLocations().length<=0&&ZPDoublePickList.getSelectedNotApplicableShifts().length<=0?ZPDoublePickList.LAYOUT.find("#"+compID+" #key_list").hasClass("input-lbltags")&&ZPDoublePickList.LAYOUT.find("#"+compID+" #key_list").removeClass("input-lbltags"):ZPDoublePickList.LAYOUT.find("#"+compID+" #key_list").hasClass("input-lbltags")||ZPDoublePickList.LAYOUT.find("#"+compID+" #key_list").addClass("input-lbltags"),ZPDoublePickList.noDataValidation(compID)},hideShowNotApplicableKey:function(){$.each(ZPDoublePickList.keyList,function(key,value){ZPDoublePickList.getSpecificArray(ID.APPLICABLE_ID,value).length<=0?ZPDoublePickList.LAYOUT.find("#"+ID.NOT_APPLICABLE_ID+" #activeField_"+value).addClass("showThisKey").show():(ZPDoublePickList.LAYOUT.find("#"+ID.NOT_APPLICABLE_ID+" #activeField_"+value).removeClass("showThisKey").hide(),ZPDoublePickList.getSpecificArray(ID.NOT_APPLICABLE_ID,value).length=0,ZPDoublePickList.LAYOUT.find("#"+ID.NOT_APPLICABLE_ID+" #zp_sharedto_all_checkbox").prop("checked",!1),ZPDoublePickList.LAYOUT.find("#"+ID.NOT_APPLICABLE_ID+" #zp_shared_list_"+value).find("#zp_shared_sub_list_records").children().remove(),ZPDoublePickList.LAYOUT.find("#"+ID.NOT_APPLICABLE_ID+" #zp_shared_list_"+value).find("#zp_shared_sub_list_header").hide(),ZPDoublePickList.LAYOUT.find("#"+ID.NOT_APPLICABLE_ID+" #zp_shared_list_"+value).prev().hide(),ZPDoublePickList.LAYOUT.find("#"+ID.NOT_APPLICABLE_ID+" #zp_shared_list_"+value).find("#zp_shared_sub_list_header").find("button").addClass("DN"))})},removeRecordFromSharedList:function(event,obj,compID,activeField){event.stopPropagation();var selectedID=$(obj).parent().attr("id"),selectedIDArr=selectedID.split("_");ZPDoublePickList.LAYOUT.find("#"+compID+" #searchResult_ul").find("li#record_"+selectedID).length>0?ZPDoublePickList.LAYOUT.find("#"+compID+" #searchResult_ul").find("li#record_"+selectedID).find("input[type=checkbox]").trigger("click"):($(obj).parent().remove(),"-1"===selectedID?(ZPDoublePickList.emptySelection(compID,activeField),ZPDoublePickList.LAYOUT.find("#"+compID+" #leftSideActiveKeyList").children(".showThisKey.active").attr("activeKey")===activeField?ZPDoublePickList.LAYOUT.find("#"+compID+" #zp_sharedto_all_checkbox").trigger("click"):(ZPDoublePickList.adjustDivHeight(compID),ZPDoublePickList.updateHeaderOption(compID,activeField))):(ZPDoublePickList.selectionRecord(compID,activeField,selectedIDArr[1],null,!1),ZPDoublePickList.adjustDivHeight(compID),ZPDoublePickList.updateHeaderOption(compID,activeField)))},clearSharedDisplayList:function(event,obj){void 0!==event&&event.stopPropagation();var compID=ZPDoublePickList.getComponentID(obj),key=$(obj).attr("key");ZPDoublePickList.getSpecificArray(compID,key).length=0,ZPDoublePickList.LAYOUT.find("#"+compID+" #leftSideActiveKeyList").children(".showThisKey.active").attr("activeKey")===key&&ZPDoublePickList.getAllRecords(compID,key),ZPDoublePickList.LAYOUT.find("#"+compID+" #zp_sharedto_all_checkbox").prop("checked",!1),ZPDoublePickList.LAYOUT.find("#"+compID+" #zp_shared_list_"+key).find("#zp_shared_sub_list_records").children().remove(),ZPDoublePickList.LAYOUT.find("#"+compID+" #zp_shared_list_"+key).find("#zp_shared_sub_list_header").hide(),ZPDoublePickList.LAYOUT.find("#"+compID+" #zp_shared_list_"+key).prev().hide(),ZPDoublePickList.LAYOUT.find("#"+compID+" #zp_shared_list_"+key).find("#zp_shared_sub_list_header").find("button").addClass("DN"),ZPDoublePickList.adjustDivHeight(compID)},expandCollapseHeader:function(event,obj){void 0!==event&&event.stopPropagation(),$(obj).hasClass("IC-mini")?($(obj).removeClass("IC-mini"),$(obj).addClass("IC-expnd")):($(obj).removeClass("IC-expnd"),$(obj).addClass("IC-mini"));var parentDiv=$(obj).parent().parent().parent(),recordObj=$(parentDiv).find("#zp_shared_sub_list_records");$(recordObj).slideToggle("fast")},setSelectedApplicableUsers:function(userList){ZPDoublePickList.constructSharedListForEditPage(ID.APPLICABLE_ID,userList,ZPComponent.CONSTANTS.USERS)},setSelectedApplicableDepartments:function(departmentList){ZPDoublePickList.constructSharedListForEditPage(ID.APPLICABLE_ID,departmentList,ZPComponent.CONSTANTS.DEPARTMENTS)},setSelectedApplicableDesignations:function(designationList){ZPDoublePickList.constructSharedListForEditPage(ID.APPLICABLE_ID,designationList,ZPComponent.CONSTANTS.DESIGNATIONS)},setSelectedApplicableRoles:function(roleList){ZPDoublePickList.constructSharedListForEditPage(ID.APPLICABLE_ID,roleList,ZPComponent.CONSTANTS.ROLES)},setSelectedApplicableLocations:function(locationList){ZPDoublePickList.constructSharedListForEditPage(ID.APPLICABLE_ID,locationList,ZPComponent.CONSTANTS.LOCATIONS)},setSelectedApplicableShifts:function(shiftList){ZPDoublePickList.constructSharedListForEditPage(ID.APPLICABLE_ID,shiftList,ZPComponent.CONSTANTS.SHIFTS)},setSelectedApplicableGender:function(genderList){ZPDoublePickList.constructSharedListForEditPage(ID.APPLICABLE_ID,genderList,ZPComponent.CONSTANTS.GENDERS)},setSelectedApplicableMstatus:function(mstatusList){ZPDoublePickList.constructSharedListForEditPage(ID.APPLICABLE_ID,mstatusList,ZPComponent.CONSTANTS.MARITALSTATUS)},setSelectedNotApplicableUsers:function(userList){ZPDoublePickList.constructSharedListForEditPage(ID.NOT_APPLICABLE_ID,userList,ZPComponent.CONSTANTS.USERS)},setSelectedNotApplicableDepartments:function(departmentList){ZPDoublePickList.constructSharedListForEditPage(ID.NOT_APPLICABLE_ID,departmentList,ZPComponent.CONSTANTS.DEPARTMENTS)},setSelectedNotApplicableDesignations:function(designationList){ZPDoublePickList.constructSharedListForEditPage(ID.NOT_APPLICABLE_ID,designationList,ZPComponent.CONSTANTS.DESIGNATIONS)},setSelectedNotApplicableRoles:function(roleList){ZPDoublePickList.constructSharedListForEditPage(ID.NOT_APPLICABLE_ID,roleList,ZPComponent.CONSTANTS.ROLES)},setSelectedNotApplicableLocations:function(locationList){ZPDoublePickList.constructSharedListForEditPage(ID.NOT_APPLICABLE_ID,locationList,ZPComponent.CONSTANTS.LOCATIONS)},setSelectedNotApplicableShifts:function(shiftList){ZPDoublePickList.constructSharedListForEditPage(ID.NOT_APPLICABLE_ID,shiftList,ZPComponent.CONSTANTS.SHIFTS)},constructSharedListForEditPage:function(compID,obj,fieldName){if(!(Object.keys(obj).length<=0)){var objArr=[];objArr=obj.constructor!==Array?Object.keys(obj):obj;var allList=ZPDoublePickList.isAllSelected(fieldName,objArr),selUserHtml="";void 0!=allList&&"-1"===allList[0]?(selUserHtml="<span id='-1' alldata='true' class='label label-primary FL MR5'>"+ZPI18N.getString("zp.all")+" "+ZPComponent.CONSTANTS.getI18NValue(fieldName)+"<i class='IC-cls S8 ML5' onClick='ZPDoublePickList.removeRecordFromSharedList(event,this, \""+compID+'", "'+fieldName+"\")'></i></span>",ZPDoublePickList.setArrayData(compID,fieldName,objArr)):$.each(objArr,function(key,value){var recordName=ZPDoublePickList.getNameByID(fieldName,value);selUserHtml+="<span id='"+value+"' class='label label-primary FL MR5'>"+recordName+"<i class='CP IC-cls S8 ML5' onClick='ZPPickList.removeRecordFromSharedList(event,this, \""+compID+'", "'+fieldName+"\")'></i></span>",ZPDoublePickList.selectionRecord(compID,fieldName,value,!0)}),ZPDoublePickList.LAYOUT.find("#"+compID+" #zp_shared_list_"+fieldName).find("#zp_shared_sub_list_records").html(selUserHtml),ZPDoublePickList.adjustDivHeight(compID),ZPDoublePickList.updateHeaderOption(compID,fieldName)}},getNameByID:function(key,id){return key===ZPComponent.CONSTANTS.USERS?ZPeople.getUserDetailsByIdFromAllUsers(id).name:key===ZPComponent.CONSTANTS.DEPARTMENTS?ZPDoublePickList.allDepartments[id+""].recName:key===ZPComponent.CONSTANTS.DESIGNATIONS?ZPDoublePickList.allDesignations[id+""].recName:key===ZPComponent.CONSTANTS.ROLES?ZPDoublePickList.allRoles[id+""].recName:key===ZPComponent.CONSTANTS.LOCATIONS?ZPDoublePickList.allLocations[id+""].recName:key===ZPComponent.CONSTANTS.SHIFTS?ZPDoublePickList.allShifts[id+""].recName:key===ZPComponent.CONSTANTS.GENDERS?ZPDoublePickList.allGenders[id+""].recName:key===ZPComponent.CONSTANTS.MARITALSTATUS?ZPDoublePickList.allMaritalStatus[id+""].recName:void 0},getSelectedApplicableUsers:function(){return ZPDoublePickList.appliSelectedUsers},getSelectedApplicableDepartments:function(){return ZPDoublePickList.appliSelectedDepartments},getSelectedApplicableDesignations:function(){return ZPDoublePickList.appliSelectedDesignations},getSelectedApplicableRoles:function(){return ZPDoublePickList.appliSelectedRoles},getSelectedApplicableLocations:function(){return ZPDoublePickList.appliSelectedLocations},getSelectedApplicableShifts:function(){return ZPDoublePickList.appliSelectedShifts},getSelectedApplicableGender:function(){return ZPDoublePickList.appliSelectedGenders},getSelectedApplicableMStatus:function(){return ZPDoublePickList.appliSelectedMaritalStatus},getSelectedNotApplicableUsers:function(){return ZPDoublePickList.notAppliSelectedUsers},getSelectedNotApplicableDepartments:function(){return ZPDoublePickList.notAppliSelectedDepartments},getSelectedNotApplicableDesignations:function(){return ZPDoublePickList.notAppliSelectedDesignations},getSelectedNotApplicableRoles:function(){return ZPDoublePickList.notAppliSelectedRoles},getSelectedNotApplicableLocations:function(){return ZPDoublePickList.notAppliSelectedLocations},getSelectedNotApplicableShifts:function(){return ZPDoublePickList.notAppliSelectedShifts},getAllIds:function(key){var ids=[],allData=[];if(key===ZPComponent.CONSTANTS.USERS)return $.each(ZPDoublePickList.allUsers,function(key,usr){ids.push(usr.usererec)}),ids;for(var id in key===ZPComponent.CONSTANTS.DEPARTMENTS?allData=ZPDoublePickList.allDepartments:key===ZPComponent.CONSTANTS.DESIGNATIONS?allData=ZPDoublePickList.allDesignations:key===ZPComponent.CONSTANTS.ROLES?allData=ZPDoublePickList.allRoles:key===ZPComponent.CONSTANTS.LOCATIONS?allData=ZPDoublePickList.allLocations:key===ZPComponent.CONSTANTS.SHIFTS?allData=ZPDoublePickList.allShifts:key===ZPComponent.CONSTANTS.GENDERS?allData=ZPDoublePickList.allGenders:key===ZPComponent.CONSTANTS.MARITALSTATUS&&(allData=ZPDoublePickList.allMaritalStatus),allData)ids.push(id);return ids},isAllSelected:function(key,selectedIds){var allData=ZPDoublePickList.getAllIds(key);return ZPUtil.checkIsEqualArrays(selectedIds,allData)?["-1"]:selectedIds},noDataValidation:function(){(Leave.Settings.isSettingsPage()||Appraisal.CFSSetting.isCFSSettingPage()||Appraisal.GoalSettingPeriod.goalSettingPeriodPage())&&(ZPDoublePickList.LAYOUT.find("#"+ID.APPLICABLE_ID+" #key_list > #applicableForAll").remove(),ZPDoublePickList.getSelectedApplicableUsers().length<=0&&ZPDoublePickList.getSelectedApplicableDepartments().length<=0&&ZPDoublePickList.getSelectedApplicableDesignations().length<=0&&ZPDoublePickList.getSelectedApplicableRoles().length<=0&&ZPDoublePickList.getSelectedApplicableLocations().length<=0&&ZPDoublePickList.getSelectedApplicableShifts().length<=0&&ZPDoublePickList.getSelectedApplicableGender().length<=0&&ZPDoublePickList.getSelectedApplicableMStatus().length<=0&&ZPDoublePickList.getSelectedNotApplicableUsers().length<=0&&ZPDoublePickList.getSelectedNotApplicableDepartments().length<=0&&ZPDoublePickList.getSelectedNotApplicableDesignations().length<=0&&ZPDoublePickList.getSelectedNotApplicableRoles().length<=0&&ZPDoublePickList.getSelectedNotApplicableLocations().length<=0&&ZPDoublePickList.getSelectedNotApplicableShifts().length<=0&&ZPDoublePickList.LAYOUT.find("#"+ID.APPLICABLE_ID+" #key_list").prepend('<div id="applicableForAll" class="dgry S12 PT5">'+ZPI18N.getString("zp.appForAllUsers")+"</div>"))},getData:function(){var data={};return $.each(ZPDoublePickList.keyList,function(key,value){var array=ZPDoublePickList.getSpecificArray(ID.APPLICABLE_ID,value);if(array.length>0){var temp={mode:1,list:array=ZPDoublePickList.isAllSelected(value,array)};data[value]=temp}else{var array2=ZPDoublePickList.getSpecificArray(ID.NOT_APPLICABLE_ID,value);if((array2=ZPDoublePickList.isAllSelected(value,array2)).length>0){temp={mode:0,list:array2};data[value]=temp}}}),data},setData:function(data){if(void 0!==data){var keyListTemp=Object.keys(data);$.each(keyListTemp,function(key,value){var compID=1===parseInt(data[value].mode)?ID.APPLICABLE_ID:ID.NOT_APPLICABLE_ID,selectedList=data[value].list;-1!=selectedList.indexOf("-1")&&(selectedList=ZPDoublePickList.getAllIds(value)),ZPDoublePickList.setSpecificArray(compID,value,selectedList)})}}};var ZPComponents={};ZPComponents.SystemView={Configuration:{DETAILS:{},init:function(){var json={};return Timetracker.forms.isModuleForm()?json=Timetracker.views.init():-1!==Layout.Page.currentmode.indexOf("leavetracker/views/applications")?json=Leave.Util.SystemView.init():-1!==Layout.Page.currentmode.indexOf("performance/salary/employeesalary")?json=Appraisal.Salary.customSalaryView():-1!==Layout.Page.currentmode.indexOf("salarydetails/salary/listview")||-1!==Layout.Page.currentmode.indexOf("salarydetails/team/salary")?json=Compensation.Salary.initListView():-1!==Layout.Page.currentmode.indexOf("salarydetails/salary/othersview")?json=Compensation.Salary.initListView():-1===Layout.Page.currentmode.indexOf("salarydetails/revision/listview")&&-1===Layout.Page.currentmode.indexOf("salarydetails/team/revision")||(json=Compensation.Revision.initListView()),json.refreshInit=!0,ZPComponents.SystemView.Configuration.set(json),json},get:function(){return this.DETAILS[Layout.Page.currentmode]},set:function(json){ZPComponents.SystemView.Configuration.DETAILS[Layout.Page.currentmode]=json},isEnabled:function(){return!!Layout.UrlConf.isModuleForm()},getFormId:function(){var conf=ZPComponents.SystemView.Configuration.get();if(void 0!==conf&&void 0!==conf.formId)return conf.formId},getTableName:function(){var conf=ZPComponents.SystemView.Configuration.get();if(void 0!==conf&&void 0!==conf.tableName)return conf.tableName},getSystemViewName:function(){var conf=ZPComponents.SystemView.Configuration.get();return void 0!==conf&&void 0!==conf.systemViewName?conf.systemViewName:ZPI18N.getString("zp.systemview")},setRefreshInit:function(refreshData){var conf=ZPComponents.SystemView.Configuration.get();void 0!==conf&&(conf.refreshInit=refreshData)},setRequiredParams:function(json){return-1!==Layout.Page.currentmode.indexOf("timetracker/scheduler/jobs")||-1!==Layout.Page.currentmode.indexOf("timetracker/scheduler/projects")||-1!==Layout.Page.currentmode.indexOf("timetracker/scheduler/clients")?json=Timetracker.views.setAdditionalViewParams(json):-1!==Layout.Page.currentmode.indexOf("leavetracker/views/applications")?json.recEditCallback=json.recViewCallback=Leave.Util.SystemView.changeURL:-1!==Layout.Page.currentmode.indexOf("performance/salary/employeesalary")?json=Appraisal.Salary.setAdditionalViewParams(json):-1===Layout.Page.currentmode.indexOf("salarydetails/salary/listview")&&-1===Layout.Page.currentmode.indexOf("salarydetails/salary/othersview")&&-1===Layout.Page.hash.indexOf("salarydetails/revision/listview")||(json=Compensation.FormHandler.setAdditionalViewParams(json)),json}},init:function(){var conf=ZPComponents.SystemView.Configuration.get();return(void 0===conf||conf.refreshInit)&&(void 0===conf&&(conf=ZPComponents.SystemView.Configuration.init()),void 0!==conf.header&&Layout.Page.container.find("#zp_views_rightheader").html(conf.header),void 0!==conf.selActionHTML&&Layout.Page.container.find("#zp_view_record_selectionactions").html(conf.selActionHTML),void 0!==conf.wrapperClass&&$("#page-wrapper").attr("class",conf.wrapperClass),ZPView.CURR_VIEWPARAMS={formId:ZPComponents.SystemView.Configuration.getFormId()},ZPComponents.SystemView.Configuration.setRefreshInit(!1),ZPView.constructViews()),conf},load:function(){var conf=ZPComponents.SystemView.init(),formAccess=Layout.Page.hash.split("-")[0].split("/").pop();ZPView.CURR_VIEWPARAMS={formId:ZPComponents.SystemView.Configuration.getFormId(),isEmbed:!1},void 0!==Layout.Page.urlparam.viewId&&(ZPView.CURR_VIEWPARAMS.viewId=Layout.Page.urlparam.viewId),ZPView.CURR_VIEWPARAMS=ZPComponents.SystemView.Configuration.setRequiredParams(ZPView.CURR_VIEWPARAMS),void 0!==ZPView.CURR_VIEWPARAMS.viewId?$("#page-wrapper").addClass("Abar1"):($("#page-wrapper").removeClass("Abar1"),Layout.Page.container.find("#zp_view_pagination").css("display","")),"add"===formAccess||"edit"===formAccess||"view"===formAccess||"createview"===formAccess||"editview"===formAccess?"createview"===formAccess?ZPNewView.getCreateViewPage():"editview"===formAccess?ZPNewView.getEditViewPage():void 0!==conf.formLoadCallback&&"function"==typeof conf.formLoadCallback&&conf.formLoadCallback():void 0!==Layout.Page.urlparam.viewId?(ZPView.init(),void 0!==conf.onchangeCallback&&"function"==typeof conf.onchangeCallback&&conf.onchangeCallback()):void 0!==conf.dataCallback&&"function"==typeof conf.dataCallback&&(conf.dataCallback(),void 0!==conf.onchangeCallback&&"function"==typeof conf.onchangeCallback&&conf.onchangeCallback())},toggleSearch:function(){var conf=ZPComponents.SystemView.Configuration.get();void 0!==conf.searchCallback&&"function"==typeof conf.searchCallback&&conf.searchCallback()},exportData:function(){var conf=ZPComponents.SystemView.Configuration.get();void 0!==conf.exportCallback&&"function"==typeof conf.exportCallback&&conf.exportCallback()},deleteRecords:function(recIds){var conf=ZPComponents.SystemView.Configuration.get();void 0!==conf.recDeleteCallback&&"function"==typeof conf.recDeleteCallback&&conf.recDeleteCallback(recIds)}},ZPComponents.Search={URL:"commonAction.zp",SEARCH_DETAILS:{},ResposeFormat:{0:{1:"id",2:"name",3:"empid",4:"photo",5:"zuid"},1:{1:"id",2:"html",3:"empid",4:"photo",5:"zuid",6:"text"},2:{1:"id",2:"html",3:"text"},3:{1:"usererec",2:"name",3:"empid",4:"avatar",5:"id"},4:{1:"eNo",2:"fName",3:"eId",4:"photo"},handleSpecialFormats:function(result,data,type){return 1===type?(result.text=ZPeople.decodeTxt(data[1]+" "+result.html),result.html=data[1]+" "+result.html):2===type&&(result.text=ZPeople.decodeTxt(result.html)),result}},Configuration:{JSON:null,LAST_RESPONSE:null,getJSON:function(){return ZPComponents.Search.Configuration.JSON},setJSON:function(json){ZPComponents.Search.Configuration.JSON=json},setExtraSearchParams:function(){var json=this.getJSON();if(null!=json&&ZPUtil.Validation.isFunction(json.extraParamCallback))return json.extraParamCallback()},getSelectedValues:function(){var json=this.getJSON();return ZPUtil.Validation.isFunction(json.selectedValFun)?json.selectedValFun():void 0!==json.selectedVals?json.selectedVals:[]},checkIsSelected:function(id){var arr=this.getSelectedValues();return!(null==arr||!ZPUtil.checkIsExistInArray(arr,id))},change:function(){var resp=$(this).val();ZPComponents.Search.Configuration.isReturnWithDetail()&&(resp=ZPComponents.Search.Configuration.getUserDetails(resp)),ZPComponents.Search.Configuration.getJSON().changeCallback(resp)},isReturnWithDetail:function(){var json=this.getJSON();return null!==json&&void 0!==json.fullResponse&&json.fullResponse},getLastResult:function(){return null!==ZPComponents.Search.Configuration.LAST_RESPONSE&&ZPComponents.Search.Configuration.LAST_RESPONSE.length>0?ZPComponents.Search.Configuration.LAST_RESPONSE:[]},getUserDetails:function(id){var returnVal,result=this.getLastResult();return result.length>0&&$.each(result,function(){if(this.id===id)return returnVal=this,!1}),returnVal},getDefaultOption:function(){var json=this.getJSON();if(json.defaultOption)return json.defaultOption},alwaysShowDefOpt:function(){var json=this.getJSON();return!!json.alwaysShowDefOpt&&json.alwaysShowDefOpt},getInitialSelection:function(json){var result;return void 0===json&&(json=this.getJSON()),json.initialSelection?result=json.initialSelection:json.initCurrentUser&&((result={}).id=ZPeople.CURR_USER.usererec,result.text=ZPeople.decodeTxt(ZPeople.CURR_USER.name),result.html=ZPeople.CURR_USER.name,result.photo=ZPeople.CURR_USER.thumb),void 0!=result&&(result.defaultvalue=!0),result}},createNewSelect:function(Obj,json){if(ZPComponents.Search.Configuration.JSON=json,"select"===json.inpFormat||$(Obj).length>0){if(0==$(Obj).length){var inpObj=Layout.Page.parentContainer.find("#"+json.id);0==inpObj.length&&(inpObj=$("#"+json.id)),0==inpObj.length&&(inpObj=$("#"+json.id))}else inpObj=$(Obj);inpObj.data("searchJson",json),ZPUtil.Validation.isFunction(json.changeCallback)&&(inpObj.off("change"),inpObj.on("change",ZPComponents.Search.Configuration.change));var initSel=ZPComponents.Search.Configuration.getInitialSelection();void 0===json.scrollStart&&(json.scrollStart=1),void 0!==json.initDefaultValues&&1==json.initDefaultValues?ZPComponents.Search.getDefaultValues(json):json.needScrolledValues&&(json.initDefaultValues=!0),inpObj.select2({placeholder:"select",minimumInputLength:0,maximumSelectionSize:0,multiple:$(inpObj).attr("multiple"),closeOnSelect:!1,cache:!1,templateResult:function(opt){if(opt.defaultvalue&&void 0!==this.element){var json=this.element.data("searchJson");opt=ZPComponents.Search.Configuration.getInitialSelection(json)}return void 0!==opt?ZPComponents.Search.isEmpSearch()&&void 0!==opt.photo?$('<img src="'+opt.photo+'" style="width: 32px;height: 32px;border-radius: 50%;cursor: pointer;" class="MR5"/><span>'+opt.html+"</span>"):$(opt.html):void 0},language:{inputTooShort:function(){return ZPI18N.getString("zp.entermorechar")},noResults:function(max){return ZPI18N.getString("zp.nomatchesfound")},inputTooLong:function(maximum){return ZPI18N.getString("zp.maxselectmsg",[maximum])}},ajax:{delay:250,data:params=>{return console.log("query params ==",params),{term:params.term,page:params.page}},transport:function(queryparam,success,failure){let query=queryparam.data;if(query.page=query.page||1,query.callback=success,console.log("transport =="),console.log(query,success,failure),void 0==query.term){if(query.page&&query.page<=1){var tempjson=inpObj.data("searchJson");ZPComponents.Search.reset(tempjson),ZPComponents.Search.Configuration.JSON=tempjson}var defValues,defOpt=ZPComponents.Search.Configuration.getDefaultOption();inpObj.select2("val");if(void 0!==json.initDefaultValues&&1==json.initDefaultValues){if(query.page&&query.page<=1){var ans=Object.assign([],json.defaultInitValues);json.defaultValues=ans,defValues=json.defaultValues}else query.page&&query.page>1&&(json.scrollStart=json.scrollStart+25,ZPComponents.Search.getDefaultValues(json),defValues=json.defaultValues);query.page&&query.page<=1&&void 0!==defValues&&defValues.length>0?(query.page<=1&&void 0!==defOpt&&void 0!==defValues[0]&&defValues[0].id!==defOpt.id&&defValues.unshift(defOpt),defOpt=defValues[0]):void 0!==defValues&&defValues.length>0&&(defOpt=defValues[0]),inpObj.data("searchJson",json)}if(defOpt)return void(void 0!==defValues?(0==defValues.length&&(defValues=[defOpt]),success({results:defValues,pagination:{more:void 0==json.isNextAvailable||1==json.isNextAvailable}})):query.page<=1&&success({results:[defOpt]}));success(void 0!=initSel?{results:[initSel]}:{results:[]})}else{var selJ=inpObj.data("searchJson");selJ.respfun=ZPComponents.Search.getResult,selJ.query=query,selJ.isMultiple&&(selJ.selectedVals=inpObj.val()),ZPComponents.Search.get(query.term,selJ)}},processResults:(data,params)=>(console.log("processResults =="),console.log(data,params),data)},DataAdapter:{current:function(callback){callback(currentData)},query:function(params,callback){callback(queryiedData)}}})}},create:function(json){if(ZPComponents.Search.Configuration.JSON=json,"select"===json.inpFormat){var inpObj=Layout.Page.parentContainer.find("#"+json.id);0==inpObj.length&&(inpObj=$("#"+json.id)),inpObj.data("searchJson",json),ZPUtil.Validation.isFunction(json.changeCallback)&&(inpObj.off("change"),inpObj.on("change",ZPComponents.Search.Configuration.change));var initSel=ZPComponents.Search.Configuration.getInitialSelection();void 0===json.scrollStart&&(json.scrollStart=1),void 0!==json.initDefaultValues&&1==json.initDefaultValues?ZPComponents.Search.getDefaultValues(json):json.needScrolledValues&&(json.initDefaultValues=!0),inpObj.select2({placeholder:json.placeHolder,minimumInputLength:json.minimumInputLength?json.minimumInputLength:0,maximumSelectionSize:json.maximumSelectionSize?json.maximumSelectionSize:0,multiple:void 0!==json.isMultiple&&json.isMultiple,closeOnSelect:!json.isMultiple,dropdownCssClass:"slt2img",formatNoMatches:function(){return void 0===json.noMatchMessage?ZPI18N.getString("zp.nomatchesfound"):json.noMatchMessage},formatInputTooShort:function(){return void 0===json.formatInputTooShortMessage?ZPI18N.getString("zp.entermorechar"):json.formatInputTooShortMessage},formatSelectionTooBig:function(max){return void 0===json.maxselectionmsg?ZPI18N.getString("zp.maxselectmsg",[max]):json.maxselectionmsg},formatResult:function(opt){if(opt.defaultvalue&&void 0!==this.element){var json=this.element.data("searchJson");opt=ZPComponents.Search.Configuration.getInitialSelection(json)}return void 0!==opt?ZPComponents.Search.isEmpSearch()&&void 0!==opt.photo?'<img src="'+opt.photo+'" style="width: 32px;height: 32px;border-radius: 50%;cursor: pointer;" class="MR5"/>'+opt.html:opt.html:void 0},query:function(query){if(0===query.term.length){if(query.page<=1){var tempjson=this.element.data("searchJson");ZPComponents.Search.reset(tempjson),ZPComponents.Search.Configuration.JSON=tempjson}var defValues,defOpt=ZPComponents.Search.Configuration.getDefaultOption();inpObj.select2("val");if(void 0!==json.initDefaultValues&&1==json.initDefaultValues){if(query.page<=1){var ans=Object.assign([],json.defaultInitValues);json.defaultValues=ans,defValues=json.defaultValues}else query.page>1&&(json.scrollStart=json.scrollStart+25,ZPComponents.Search.getDefaultValues(json),defValues=json.defaultValues);query.page<=1&&void 0!==defValues&&defValues.length>0?(query.page<=1&&void 0!==defOpt&&void 0!==defValues[0]&&defValues[0].id!==defOpt.id&&defValues.unshift(defOpt),defOpt=defValues[0]):void 0!==defValues&&defValues.length>0&&(defOpt=defValues[0]),inpObj.data("searchJson",json)}if(defOpt)return void(void 0!==defValues?(0==defValues.length&&(defValues=[defOpt]),query.callback({results:defValues,more:void 0==json.isNextAvailable||1==json.isNextAvailable})):query.page<=1&&query.callback({results:[defOpt]}));void 0!=initSel?query.callback({results:[initSel]}):query.callback({results:[]})}else{var selJ=inpObj.data("searchJson");selJ.respfun=ZPComponents.Search.getResult,selJ.query=query,selJ.isMultiple&&(selJ.selectedVals=inpObj.val()),ZPComponents.Search.get(query.term,selJ)}},initSelection:function(element,callback){callback(void 0!=initSel?initSel:{})}}),void 0!==initSel&&inpObj.select2("val",[]),inpObj.on("open",function(){$(".select2-drop:visible").find(".select2-search").find(".select2-input").attr("placeholder",void 0!==json.searchplaceHolder?json.searchplaceHolder:"")})}},getDefaultValues:function(json){void 0!==json&&void 0!==json.type&&(ZPComponents.Search.responseType=json.type);var params={mode:"SEARCH",isDef:!0,start:json.scrollStart,searchType:json.searchType};void 0!==json.searchMode&&(params.searchMode=json.searchMode);var extraParam=ZPComponents.Search.Configuration.setExtraSearchParams(params);if(void 0!==extraParam)if(extraParam.projectManagerPerm||extraParam.customAdminAction){var isProjectManagerKey=extraParam.projectManagerPerm;if(extraParam.projectManagerPerm&&(delete extraParam.projectManagerPerm,params.extraparam=JSON.stringify(extraParam)),extraParam.customAdminAction){var actionType=extraParam.customAdminAction;delete extraParam.customAdminAction,params.extraparam=JSON.stringify(extraParam),extraParam.customAdminAction=actionType}isProjectManagerKey&&(extraParam.projectManagerPerm=!0)}else params.extraparam=JSON.stringify(extraParam);var result={matches:[],ids:[]};ZPeople.Request.sendAsyncPost(ZPComponents.Search.URL,params,function(data){var matchlist=[];if(void 0!==data.results&&data.results.length>0?matchlist=data.results:void 0!==data.matches&&data.matches.length>0&&(matchlist=data.matches),matchlist.length>0){for(var uLen=matchlist.length,dfOption=ZPComponents.Search.Configuration.getDefaultOption(),uCnt=0;uCnt<uLen;uCnt++){var list=matchlist[uCnt],dtl=ZPComponents.Search.convertUserDataToJson(list,result);void 0===dtl||void 0!==dfOption&&dtl.id===dfOption.id||ZPComponents.Search.Configuration.checkIsSelected(list[0])||result.matches.push(dtl)}return void 0!==result.matches?(1==json.scrollStart&&(json.defaultInitValues=result.matches),json.defaultValues=result.matches,json.isNextAvailable=data.isNextAvailable,1!=json.scrollStart&&(json.defaultInitValues=json.defaultInitValues.concat(json.defaultValues))):(json.defaultValues=[],1==json.scrollStart&&(json.defaultInitValues=[]),json.isNextAvailable=!1),void("ZPAtt_SPOCUser_AppField_Final"===json.id&&(ModuleAdmin.empCrtiDefVal=json))}json.defaultValues=[],1==json.scrollStart&&(json.defaultInitValues=[]),json.isNextAvailable=!1,"ZPAtt_SPOCUser_AppField_Final"===json.id&&(ModuleAdmin.empCrtiDefVal=json)})},getResult:function(data,json){void 0!==json&&void 0!==json.query&&json.query.callback({results:data})},INITIATEDKEYS:{},isInitiated:function(key){var keys=this.INITIATEDKEYS[this.getSearchType()];return void 0!==keys&&-1!==keys.indexOf(key)},updateInitiate:function(key){void 0===this.INITIATEDKEYS[this.getSearchType()]&&(this.INITIATEDKEYS[this.getSearchType()]=keys=[]),void 0!=key&&1===key.length&&-1===this.INITIATEDKEYS[this.getSearchType()].indexOf(key)&&this.INITIATEDKEYS[this.getSearchType()].push(key)},isNextAvailable:function(key){var json=ZPComponents.Search.getData(key);return void 0==json||void 0===json.isNextAvailable||json.isNextAvailable},getStartIndex:function(key){var json=ZPComponents.Search.getData(key);return void 0!=json&&void 0!==json.start&&1===ZPComponents.Search.getSearchSequence(key)?json.start:1},getSearchSequence:function(key){var json=ZPComponents.Search.getData(key);if(void 0!=json&&void 0!==json.searchSeq)return json.searchSeq},key:null,responseType:null,JSON:null,getSearchType:function(){return null!==ZPComponents.Search.Configuration.JSON&&void 0!==ZPComponents.Search.Configuration.JSON.searchType?ZPComponents.Search.Configuration.JSON.searchType:"emp"},isEmpSearch:function(){return"emp"===ZPComponents.Search.getSearchType()},getPrefixKey:function(key){return key.trim().slice(0,1).toLowerCase()},get:function(key,json){if(void 0!=key&&key.trim().length>0){(key=key.toLowerCase()).trim().length<=1&&ZPComponents.Search.reset(json),ZPComponents.Search.Configuration.JSON=json,ZPComponents.Search.key=key;var result,dtl=ZPComponents.Search.getSearchDetails(key);ZPComponents.Search.updateInitiate(key),dtl.hasResult&&0===(result=ZPComponents.Search.matchData(key,json.limit)).length&&(dtl.doSearch=!0);var keyPref=ZPComponents.Search.getPrefixKey(key);if(void 0!==json&&void 0!==json.type&&(ZPComponents.Search.responseType=json.type),(void 0===result||result.length<json.limit)&&dtl.doSearch){var params={mode:"SEARCH",key:encodeURIComponent(key),start:ZPComponents.Search.getStartIndex(keyPref),searchSeq:ZPComponents.Search.getSearchSequence(keyPref),searchType:json.searchType};void 0!==json.searchMode&&(params.searchMode=json.searchMode);var extraParam=ZPComponents.Search.Configuration.setExtraSearchParams(params);void 0===extraParam?-1!==Layout.Page.hash.indexOf("timetracker/scheduler/projectdashboard/feeds")&&(extraParam={projectId:Layout.Page.urlparam.id}):!extraParam.projectManagerPerm&&!extraParam.customAdminAction||void 0!==key&&""!==key||(extraParam.projectManagerPerm&&delete extraParam.projectManagerPerm,extraParam.customAdminAction&&delete extraParam.customAdminAction),void 0!==extraParam&&(params.extraparam=JSON.stringify(extraParam)),ZPeople.Request.send(ZPComponents.Search.URL,params,ZPComponents.Search.response,json)}else ZPComponents.Search.loadResponse(json,result)}},response:function(data,param,json){150!==data.totalCnt&&2===data.searchSeq?ZPComponents.Search.setSearchDone(!0):ZPComponents.Search.setSearchDone(!1),param.key=decodeURIComponent(param.key);var prefix=ZPComponents.Search.getPrefixKey(param.key);ZPComponents.Search.setData(data,prefix);var matches=ZPComponents.Search.matchData(param.key,json.limit);void 0!==matches&&ZPComponents.Search.loadResponse(json,matches)},getData:function(key){if(void 0!==key){var type=ZPComponents.Search.getSearchType();if(void 0!==ZPComponents.Search.SEARCH_DETAILS[type])return ZPComponents.Search.SEARCH_DETAILS[type][key]}},setData:function(data,prefix){var type=ZPComponents.Search.getSearchType();if(void 0===ZPComponents.Search.SEARCH_DETAILS[type]&&(ZPComponents.Search.SEARCH_DETAILS[type]={}),data.results){var oldData=ZPComponents.Search.SEARCH_DETAILS[type][prefix];void 0!==oldData&&(data.results=oldData.results.concat(data.results)),ZPComponents.Search.SEARCH_DETAILS[type][prefix]=data}void 0!==data.matches&&(ZPComponents.Search.updateMatches(data.matches),delete data.matches)},setDataProperty:function(prefix,name,value){ZPComponents.Search.getData(prefix)[name]=value},MATCH_DATA:{},updateMatches:function(matches){var type=ZPComponents.Search.getSearchType();void 0===ZPComponents.Search.MATCH_DATA[type]&&(ZPComponents.Search.MATCH_DATA[type]={ids:[],details:[]}),$.each(matches,function(){-1===ZPComponents.Search.MATCH_DATA[type].ids.indexOf(this[0])&&(ZPComponents.Search.MATCH_DATA[type].ids.push(this[0]),ZPComponents.Search.MATCH_DATA[type].details.push(this))})},getMatches:function(){var type=ZPComponents.Search.getSearchType();return ZPComponents.Search.MATCH_DATA[type]},SEARCHES:{},getLastSearchDetails:function(){var type=this.getSearchType();return void 0===this.SEARCHES[type]&&(this.SEARCHES[type]={keys:[],isSearchDone:!1}),this.SEARCHES},isSearchDone:function(){return this.getLastSearchDetails().isSearchDone},setSearchDone:function(val){return this.getLastSearchDetails().isSearchDone=val},getSearchKeys:function(){var type=this.getSearchType();if(void 0===this.SEARCHES[type])return this.SEARCHES[type].keys},updateSearchKey:function(key){var keys=this.getSearchKeys();void 0!==keys&&-1===keys.indexOf(key)&&keys.push(key)},getSearchDetails:function(key){var isSearchDone=ZPComponents.Search.isSearchDone(),result={};if(ZPComponents.Search.isInitiated(ZPComponents.Search.getPrefixKey(key))&&isSearchDone){var keys=ZPComponents.Search.getSearchKeys();if(void 0!==keys&&keys.length>0)if(result.doSearch=!1,-1!==keys.indexOf(key.toLowerCase()))result.hasResult=!0;else{var lastSearchedKey=keys[keys.length-1];0===key.toLowerCase().indexOf(lastSearchedKey)&&key.length===lastSearchedKey.length+1||(result.doSearch=!0),result.hasResult=!0,ZPComponents.Search.updateSearchKey(key)}else isSearchDone?result.hasResult=!0:result.doSearch=!0}else ZPComponents.Search.updateSearchKey(key),result.doSearch=!0,ZPComponents.Search.isInitiated(ZPComponents.Search.getPrefixKey(key))&&(result.hasResult=!0);return result},matchData:function(key,limit){if(ZPComponents.Search.key===key){limit=void 0===limit?10:limit;for(var matches,result={matches:[],ids:[]},keySrt=ZPComponents.Search.getPrefixKey(key),isNxtAv=(key.toLowerCase(),ZPComponents.Search.isNextAvailable(keySrt)),isInitiated=ZPComponents.Search.isInitiated(keySrt),matchData=ZPComponents.Search.getMatches(),itrCnt=1;itrCnt<=2;itrCnt++){if(1===itrCnt)void 0!=(data=ZPComponents.Search.getData(keySrt))&&data.results.length>0&&(matches=data.results);else void 0!==matchData&&(matches=matchData.details);if(void 0!=matches&&matches.length>0){-1!==key.indexOf("@")&&(result=ZPComponents.Search.iterateData(3,matches,limit,result));var sLoop=1;ZPComponents.Search.isEmpSearch()&&(sLoop=2);for(var typeCnt=1;typeCnt<=sLoop;typeCnt++){var moreCnt=limit-result.matches.length;if((result=ZPComponents.Search.iterateData(typeCnt,matches,moreCnt,result)).matches.length===limit||isNxtAv&&1===itrCnt&&isInitiated&&result.matches.length>0)return result.matches;2==itrCnt&&0==result.matches.length&&(result.matches=[])}}}if(ZPComponents.Search.isEmpSearch()&&void 0!==result.matches&&0===result.matches.length){var data;moreCnt=limit;if(void 0!=(data=ZPComponents.Search.getData(keySrt))&&data.results.length>0&&(result=ZPComponents.Search.iterateData(3,data.results,moreCnt,result)),result.matches.length<limit&&void 0!==matchData&&matchData.details.length>0){moreCnt=limit-result.matches.length;result=ZPComponents.Search.iterateData(3,matches,moreCnt,result)}}return result.matches}},iterateData:function(type,list,limit,result){for(var lkey=ZPComponents.Search.key.toLowerCase(),selectArr=[],order1=[],order2=[],order3=[],uLen=list.length,isEmpSearch=ZPComponents.Search.isEmpSearch(),uCnt=0;uCnt<uLen;uCnt++){var data=list[uCnt];if(-1===result.ids.indexOf(data[0])&&!ZPComponents.Search.Configuration.checkIsSelected(data[0])){if(1===type)if(searchName=isEmpSearch?ZPeople.getUserDisplayName(data[2],data[3]):data[1],(name=ZPeople.decodeTxt(searchName).toLowerCase().trim())===lkey||-1!==name.indexOf(" ")&&0===name.split(" ").indexOf(lkey))result.matches.push(ZPComponents.Search.convertUserDataToJson(data,result));else if(-1!==name.indexOf(" ")&&-1!==name.split(" ").indexOf(lkey)&&-1==selectArr.indexOf(data[0]))order1.push(ZPComponents.Search.convertUserDataToJson(data,result)),selectArr.push(data[0]);else if(0===name.indexOf(lkey)&&-1==selectArr.indexOf(data[0]))order2.push(ZPComponents.Search.convertUserDataToJson(data,result)),selectArr.push(data[0]);else if(isEmpSearch){(empid=ZPeople.decodeTxt(data[1]).toLowerCase().trim())!==lkey&&0!==empid.indexOf(lkey)&&-1===empid.indexOf(lkey)||-1!=selectArr.indexOf(data[0])||(result.ids.push(data[0]),order3.push(ZPComponents.Search.convertUserDataToJson(data,result)),selectArr.push(data[0]))}else isEmpSearch||name!==(lkey=lkey.trim())&&0!==name.indexOf(lkey)||-1!=selectArr.indexOf(data[0])||result.matches.push(ZPComponents.Search.convertUserDataToJson(data,result));else if(2===type&&isEmpSearch){var empid=ZPeople.decodeTxt(data[1]).toLowerCase().trim(),name=ZPeople.decodeTxt(ZPeople.getUserDisplayName(data[2],data[3])).toLowerCase().trim();0===empid.indexOf(lkey)?result.matches.push(ZPComponents.Search.convertUserDataToJson(data,result)):-1!==name.indexOf(lkey)&&-1==selectArr.indexOf(data[0])?(order2.push(ZPComponents.Search.convertUserDataToJson(data,result)),selectArr.push(data[0])):-1!==empid.indexOf(lkey)&&-1==selectArr.indexOf(data[0])&&(order3.push(ZPComponents.Search.convertUserDataToJson(data,result)),selectArr.push(data[0]))}else if(3===type&&isEmpSearch){var email=ZPeople.decodeTxt(data[4]).toLowerCase().trim();""!==email&&(email===lkey?result.matches.push(ZPComponents.Search.convertUserDataToJson(data,result)):0===email.indexOf(lkey)&&-1==selectArr.indexOf(data[0])?(order2.push(ZPComponents.Search.convertUserDataToJson(data,result)),selectArr.push(data[0])):-1!==email.indexOf(lkey)&&-1==selectArr.indexOf(data[0])&&(order3.push(ZPComponents.Search.convertUserDataToJson(data,result)),selectArr.push(data[0])))}if(result.matches.length===limit)break}}if(result.matches.length===limit)return result;if(0===result.matches.length)for(uCnt=0;uCnt<uLen;uCnt++){data=list[uCnt];if(-1===result.ids.indexOf(data[0])&&!ZPComponents.Search.Configuration.checkIsSelected(data[0])&&1===type){var searchName;searchName=isEmpSearch?ZPeople.getUserDisplayName(data[2],data[3]):data[1];for(var spltname=(name=ZPeople.decodeTxt(searchName).toLowerCase().trim()).split(" "),i=0;i<spltname.length;i++)-1!==name.indexOf(" ")&&-1!==spltname[i].indexOf(lkey)&&-1==selectArr.indexOf(data[0])&&(order3.push(ZPComponents.Search.convertUserDataToJson(data,result)),selectArr.push(data[0]))}}if(result.matches.length<limit){var moreCnt=limit-result.matches.length;order1.length>0&&(order1.length<=moreCnt?(result.matches=result.matches.concat(order1),moreCnt=limit-result.matches.length):ZPComponents.Search.moveValuesInArray(result.matches,order1,moreCnt)),order2.length>0&&(order2.length<=moreCnt?(result.matches=result.matches.concat(order2),moreCnt=limit-result.matches.length):ZPComponents.Search.moveValuesInArray(result.matches,order2,moreCnt)),order3.length>0&&(order3.length<=moreCnt?result.matches=result.matches.concat(order3):ZPComponents.Search.moveValuesInArray(result.matches,order3,moreCnt))}return result},convertUserDataToJson:function(data,userData){var result={};if(void 0!==data){userData.ids.push(data[0]);var format=ZPComponents.Search.ResposeFormat[ZPComponents.Search.responseType];void 0===format&&(ZPComponents.Search.responseType=0,format=ZPComponents.Search.ResposeFormat[0]),result[format[1]]=data[0],ZPComponents.Search.isEmpSearch()?(result[format[2]]=ZPeople.getUserDisplayName(data[2],data[3]),void 0!==format[3]&&(result[format[3]]=data[1]),""===data[6].trim()?""===data[5].trim()?result[format[4]]=ZPeople.getDefaultUserImagePath():result[format[4]]=contactUrl+"/file?ID="+data[5]+"&fs=thumb":0==data[6].indexOf("/newhr/images/sampleemployeephotos/")?result[format[4]]=data[6]:result[format[4]]=ZPeople.applyPortalName("viewPhoto?filename="+data[6]),void 0!=format[5]&&(result[format[5]]=data[5]),void 0!==data[4]&&(result.emailid=ZPUtil.getNoValueString(data[4])),void 0!==data[7]&&(result.mobile=ZPUtil.getNoValueString(data[7])),void 0!==data[8]&&(result.workphone=ZPUtil.getNoValueString(data[8]))):result[format[2]]=data[1],result=ZPComponents.Search.ResposeFormat.handleSpecialFormats(result,data,ZPComponents.Search.responseType)}return result},loadResponse:function(json,result){ZPUtil.Validation.isFunction(json.respfun)&&(ZPComponents.Search.Configuration.alwaysShowDefOpt()&&result.unshift(ZPComponents.Search.Configuration.getDefaultOption()),ZPComponents.Search.Configuration.LAST_RESPONSE=result,json.respfun(result,json))},moveValuesInArray:function(a1,a2,count){for(var i=0;i<count;i++)a1.push(a2[i])},reset:function(json,isEmpty,resetDefaultValues){(void 0!=json&&void 0!==json.id&&null!==ZPComponents.Search.Configuration.JSON&&json.id!==ZPComponents.Search.Configuration.JSON.id||isEmpty)&&(ZPComponents.Search.MATCH_DATA={},ZPComponents.Search.SEARCHES={},ZPComponents.Search.SEARCH_DETAILS[json.searchType]={},ZPComponents.Search.INITIATEDKEYS[json.searchType]=[],void 0!==json&&1==resetDefaultValues&&(json.defaultInitValues=[],json.defaultValues=[]),ZPComponents.Search.setSearchDone(!1))}},ZPComponents.v2={dialCodeOptions:function(){void 0==ZPComponents.dialCode.dialCodes&&ZPComponents.dialCode.init();var items=[];items.push({innerHTML:`<div class="zpl_flgsel"><span class="zpl_flgselcde cc">${ZPI18N.getString("zp.select")}</span> </div>`});for(var i=0;i<ZPComponents.dialCode.dialCodes.length;i++){var item={};item.d_name=ZPComponents.dialCode.dialCodes[i].d_name,item.c_code=ZPComponents.dialCode.dialCodes[i].c_code,item.d_code=ZPComponents.dialCode.dialCodes[i].d_code,item.iconClassName=`pic flag_${item.c_code.toUpperCase()}`,item.innerHTML=`<div class="zpl_flgsel"> <span class="pic flag_${item.c_code.toUpperCase()}"></span> <span class="cn">#d_name#</span> <span class="zpl_flgselcde cc">+#d_code#</span> </div>`,items.push(item)}return{contentType:"custom",showSearchField:!0,search:{criteria:"startswith",by:"d_name",highlightKeyword:!0},options:items,dataMapping:{label:"d_code",value:"c_code",text:"d_name"}}},dialCode:function(){var html='<div><select id="mobDialCode" class="zpl_dialcode_select" data-show-search-field="true"></select></div>';html=$(html)[0];var options=ZPComponents.v2.dialCodeOptions();return Users.components.initSelect($(html).find("#mobDialCode"),options,[],ZPComponents.dialCode.cc),html}},ZPComponents.dialCode={initData:{},init:function(isHtmlnotNeed){void 0!=ZPComponents.dialCode.dialCodes&&ZPComponents.dialCode.updateData(),ZPeople.Request.sendAsyncPost("/users/getDialCodes",{},ZPComponents.dialCode.updateData,isHtmlnotNeed)},updateData:function(data,params,isHtmlnotNeed){var dialCodes;if(void 0!=data?(dialCodes=data.mobDtls,ZPComponents.dialCode.dialCodes=dialCodes):dialCodes=ZPComponents.dialCode.dialCodes,!isHtmlnotNeed){if(ZPComponents.dialCode.dialCodeHtml='<option value="Select"></option>',void 0!=dialCodes)for(var i=0;i<dialCodes.length;i++)ZPComponents.dialCode.dialCodeHtml+='<option value="'+dialCodes[i].c_code+'"  cc="'+dialCodes[i].c_code+'" cn="'+dialCodes[i].d_name+'" dc="'+dialCodes[i].d_code+'">'+dialCodes[i].d_code+" - "+dialCodes[i].d_name+" </option>";return ZPComponents.dialCode.dialCodeHtml}},constructHtml:function(element,initval){void 0==ZPComponents.dialCode.dialCodeHtml&&ZPComponents.dialCode.init();var initData=ZPComponents.dialCode.dialCodeHtml;initval=void 0==initval?"-Select-":initval,$(element).html(initData).val(initval).select2({formatResult:function(dcode){if(!dcode.id)return dcode.text;var con_code=$(dcode.element).attr("cc"),dial_code=$(dcode.element).attr("dc"),con_name=$(dcode.element).attr("cn");return void 0!=con_code&&void 0!=dial_code&&void 0!=con_name?$('<div class="select2-flag"><span class="pic flag_'+con_code.toUpperCase()+'" ></span><span class="cn">'+con_name+"</span><span class='cc'>+"+dial_code+"</span></div>"):$('<div class="select2-flag"><span class="pic flag" ></span><span class="cn">Select</span><span class="cc">-</span></div>')},formatSelection:function(dcode){var con_code=$(dcode.element).attr("cc"),dial_code=$(dcode.element).attr("dc");return void 0!=con_code&&void 0!=dial_code?'<div class="select2-result-label"><em class="select2-flag"><span class="pic flag_'+con_code.toUpperCase()+'" ></span><span class="cc">+'+dial_code+"</span></em></div>":'<div class="select2-result-label"><em class="select2-flag"><span class="pic flag" >-</span><span class="cc">-</span></em></div>'},escapeMarkup:function(string){return string}})},isValidDialCode:function(val){if(ZPComponents.dialCode.dialCodes){var retValue="";return $.each(ZPComponents.dialCode.dialCodes,function(index,jObj){if(val==jObj.d_code)return retValue=jObj.c_code,!1}),retValue}},isValidCountryCode:function(val){if(ZPComponents.dialCode.dialCodes){var retValue=!1;return $.each(ZPComponents.dialCode.dialCodes,function(index,jObj){if(val==jObj.c_code)return retValue=!0,!1}),retValue}}},function($){$.fn.appendDialCode=function(initval){ZPComponents.dialCode.constructHtml($(this),initval)}}(jQuery);var ZPMaps={};ZPMaps={staticLoaded:!1,isGeoMap:!1,loadStatic:function(){if(!ZPMaps.staticLoaded&&!ZPMaps.staticLoadedForGeo){var mapHeader='<script type="text/javascript" src="'+ZPeople.jsMapsStaticURL+'/zmaps-sdk-min.js"><\/script>';mapHeader+='<script type="text/javascript" src="'+ZPeople.jsMapsStaticURL+'/zmaps-drawing-tool-min.js"><\/script>',mapHeader+='<script type="text/javascript" src="'+ZPeople.jsMapsStaticURL+'/turf.min.js"><\/script>',mapHeader+='<link rel="stylesheet" type="text/css" href="'+ZPeople.cssMapsStaticURL+'/zmaps-sdk-min.css" />',$(document.head).prepend($(mapHeader)),ZPMaps.staticLoaded=!0}},staticLoadedForGeo:!1,loadStaticForGeo:function(id){if(!ZPMaps.staticLoadedForGeo){var mapHeader="";ZPMaps.staticLoaded||(mapHeader+='<link rel="stylesheet" type="text/css" href="'+ZPeople.cssMapsStaticURL+'/zmaps-sdk-min.css" />',mapHeader+='<link rel="stylesheet" type="text/css" href="'+ZPeople.cssMapsStaticURL+'/maps.css"/>'),""!=mapHeader&&$(document.head).prepend($(mapHeader));$(document.head).prepend("<style>.zmap-drawingtoolbar-container {top: 3% !important;} </style>");$(document.head).prepend("<style>.zmap-searchbox-inputbox {height: 48px} </style>");$(document.head).prepend("<style>.zmap-searchBoxResult {z-index: 920 !important;}</style>");$(document.head).prepend("<style>.zmap-searchbox-search-icon {margin-top: 1% !important;}</style>"),ZPMaps.staticLoaded?ZPMaps.loadMap(null,null,!0,id):$.getScript(ZPeople.jsMapsStaticURL+"/leaflet.js",function(){$.getScript(ZPeople.jsMapsStaticURL+"/leafletutil.js",function(){$.getScript(ZPeople.jsMapsStaticURL+"/zmaps-drawing-tool-min.js",function(){$.getScript(ZPeople.jsMapsStaticURL+"/zmaps-sdk-min.js",function(){$.getScript(ZPeople.jsMapsStaticURL+"/turf.min.js",function(){ZPMaps.loadMap(null,null,!0,id)})})})})}),ZPMaps.staticLoadedForGeo=!0}},shapeId:{rectangle:"48",square:"49",circle:"83",polygon:"62",polyline:"82",lasso:"64"},shapeColors:{circle:"black",polygon:"#00FF00",square:"#FF0076",rectangle:"pink",lasso:"#5100FF",polyline:"#5100FF"},isMapLoadedForGeo:!1,loadMap:function(lat,lon,fromGeo,id,inOrOut,time,markerColBlue){try{fromGeo&&(ZPMaps.isMapLoadedForGeo=!1);var param={conreqcsr:csrfToken,method:"getGeoAPIKeys"};param.referral=document.domain;$.post("getGeoAPIKeys.zp",param,function(rdata){ZPMaps.loadMapsSDK(lat,lon,fromGeo,id,inOrOut,time,markerColBlue,rdata),ZPMaps.isMapLoadedForGeo=!0})}catch(err){}},loadMapinListView:function(lat,lon,obj,inOrOut,time,markerColBlue){try{var param={conreqcsr:csrfToken,method:"getGeoAPIKeys"};param.referral=document.domain;$.post("getGeoAPIKeys.zp",param,function(rdata){if(2==rdata.mapType)ZPMaps.isGeoMap=!0,window.open("https://maps.google.com/?q="+lat+","+lon,"_blank");else{var mapCont="<div id='ZP5Att_mapCont' class='zpl_popovr zpopover zpopover--bottom' data-type='popover' data-display-type='callout' data-position='top' aria-haspopup='true' aria-expanded='true'  tabindex='0' onclick=ZPeople.stopEvents(event) style='left: -25px; margin: 8px 0;'>";mapCont+="<div class='showMap'>",mapCont+="<div style='overflow:hidden;width:280px;height:280px;resize:none;max-width:100%;'>",mapCont+="<div id='display-google-map' style='height:100%; width:100%;max-width:100%;'>",mapCont+="<div id='"+Layout.Page.pageId+"_map' style='height:100%;width:100%;border:0;'></div></div>",mapCont+="</div></div></div>",$(obj).after(mapCont),ZPMaps.loadMapsSDK(lat,lon,!1,Layout.Page.pageId+"_map",inOrOut,time,markerColBlue,rdata)}})}catch(err){}},loadMapsSDK:function(lat,lon,fromGeo,id,inOrOut,time,markerColBlue,response,isFromLiveLocPage){try{var retryCount=0;lat||(lat=13.0804251,lon=80.281807),""!=id&&void 0!=id||(id="map");var zMaps=new ZMapsSDK;function initCallback(){try{ZPMaps.map=new ZMap(id,zMaps),ZPMaps.map.setMapCenter(lat,lon),ZPMaps.map.setMaxZoom(18),ZPMaps.map.setMinZoom(1),ZPMaps.map.setZoomToLevel(14),fromGeo&&(ZPMaps.map.showCurrentLocationIcon(!0),ZPMaps.map.onCurrentLocationClick(function(ZMap,Msg,lat,lon){lat&&lon&&ZMap.setMapCenter(lat,lon)})),ZPMaps.map.loadMap(),fromGeo&&ZPMaps.map.onLoad(function(){if("undefined"!=typeof settingsPage){var modal=settingsPage.container.find("#addGeoRestriction");modal.length>0&&modal.show()}ZPMaps.consDrawingToolbar(),void 0!==modal&&2!=response.mapType&&modal.length>0&&modal.hide(),ZPMaps.map.onShapeDeleteViaButton(function(ZMap,ZShapes){ZPMaps.gJson="",$("#"+Layout.Page.pageId+"_map-zmap-drawingtoolbar-container-id ."+Layout.Page.pageId+"_map-zmap-drawingtoolbar-section-shapes").removeAttr("style")}),(new ZMapsSearchBoxOptions).enableLocationPicker(!1),ZPMaps.map.showSearchBox(ZPMaps.addressCallback),$("#"+Layout.Page.pageId+"_map .current-location-icon").attr("title","Show My Location"),$("#"+Layout.Page.pageId+"_map .ZMaps-control-active-max").attr("title","Zoom In"),$("#"+Layout.Page.pageId+"_map .ZMaps-control-active-min").attr("title","Zoom Out")}),!lat&&!lon||fromGeo||ZPMaps.map.onLoad(function(){if(isFromLiveLocPage){var hashUrl=Layout.Page.hash;-1!==hashUrl.indexOf("entry")||-1!==hashUrl.indexOf("searchuser")||-1!==hashUrl.indexOf("team/user")?Attendance.LiveLocation.getUserDetails():Attendance.LiveLocation.getAllUsersLiveLocation()}else ZPMaps.setData(lat,lon,inOrOut,time,markerColBlue)})}catch(err){}}response.zohomapsAPIKey&&zMaps.setApiKey(response.zohomapsAPIKey),1==response.mapType&&zMaps.setMapVendor(MapVendors.Zoho),2==response.mapType&&response.gmapsAPIKey&&(zMaps.setGMapsApiKey(response.gmapsAPIKey),zMaps.setMapVendor(MapVendors.Google)),zMaps.setZDC(ZDC[ZPeople.ZPDataCenter]?ZDC[ZPeople.ZPDataCenter]:ZDC.US),zMaps.init(initCallback),void 0!=ZMapGoogleLibrariesLoaded&&ZMapGoogleLibrariesLoaded&&initCallback()}catch(err){-1!==err.message.indexOf("ZMapsSDK is not defined")&&retryCount<5&&(retryCount++,setTimeout(function(){ZPMaps.loadMapsSDK(lat,lon,fromGeo,id,inOrOut,time,markerColBlue,response,isFromLiveLocPage)},1e3))}},consDrawingToolbar:function(){var optionJSON={drawing_modes:[ZMapsDrawingMode.Circle,ZMapsDrawingMode.Square,ZMapsDrawingMode.Rectangle,ZMapsDrawingMode.Polygon,ZMapsDrawingMode.Lasso],stroke_weight:3,fill:!0,fill_opacity:.2,stroke_width:5,position:"right",show_delete_icon:!0,circle:{fill_color:ZPMaps.shapeColors[ZMapsDrawingMode.Circle],stroke_color:ZPMaps.shapeColors[ZMapsDrawingMode.Circle]},polygon:{fill_color:ZPMaps.shapeColors[ZMapsDrawingMode.Polygon],stroke_color:ZPMaps.shapeColors[ZMapsDrawingMode.Polygon]},square:{fill_color:ZPMaps.shapeColors[ZMapsDrawingMode.Square],stroke_color:ZPMaps.shapeColors[ZMapsDrawingMode.Square]},rectangle:{fill_color:ZPMaps.shapeColors[ZMapsDrawingMode.Rectangle],stroke_color:ZPMaps.shapeColors[ZMapsDrawingMode.Rectangle]},lasso:{fill_color:ZPMaps.shapeColors[ZMapsDrawingMode.Lasso],stroke_color:ZPMaps.shapeColors[ZMapsDrawingMode.Lasso]}};ZPMaps.map.showDrawingToolBar(ZPMaps.onShapeDrawncallback,optionJSON)},onShapeDrawncallback:function(zMapsShape){zMapsShape.id=ZPMaps.shapeId[zMapsShape.shapeType],zMapsShape.setDeleteAble(!0),zMapsShape.setStrokeColor(ZPMaps.shapeColors[zMapsShape.shapeType]),zMapsShape.setFillColor(ZPMaps.shapeColors[zMapsShape.shapeType]),zMapsShape.setShapeOpacity(.5),zMapsShape.setStrokeWidth(5),ZPMaps.map.addShape(zMapsShape),ZPMaps.gJson=zMapsShape.getShapeAsJSON(),$("#"+Layout.Page.pageId+"_map-zmap-drawingtoolbar-container-id ."+Layout.Page.pageId+"_map-zmap-drawingtoolbar-section-shapes").attr("style","opacity: 0.5; pointer-events: none;")},addressCallback:function(map,addressJSON){ZPMaps.map.setMapCenter(addressJSON.lat,addressJSON.lon)},removeShape:function(){ZPMaps.gJson="",ZPMaps.map&&ZPMaps.map.removeAllShapes()},shapeType:{rectangle:"ZMapsShapeType.Rectangle",circle:"ZMapsShapeType.Circle",polygon:"ZMapsShapeType.Polygon",polyline:"ZMapsShapeType.Polygon",square:"ZMapsShapeType.Square"},loadShape:function(jsondata){var jsData=jQuery.parseJSON(jsondata),id=jsData[0].id,type=jsData[0].type;"circle"==type&&(jsData[0].center_point||(jsData[0].center_point=jsData[0].coordinates),delete jsData[0].coordinates),jsData[0].deletable=!0;var geoJson=jsData[0];ZPMaps.gJson=geoJson;var zMapsShape=new ZMapsShape(id,type);zMapsShape.createFromJSON(geoJson),zMapsShape.setDeleteAble(!0),zMapsShape.setStrokeColor(ZPMaps.shapeColors[zMapsShape.shapeType]),zMapsShape.setFillColor(ZPMaps.shapeColors[zMapsShape.shapeType]),zMapsShape.setShapeOpacity(.5),zMapsShape.setStrokeWidth(5),ZPMaps.map.addShape(zMapsShape),ZPMaps.map.fitToShapes(zMapsShape),$("#"+Layout.Page.pageId+"_map-zmap-drawingtoolbar-container-id ."+Layout.Page.pageId+"_map-zmap-drawingtoolbar-section-shapes").attr("style","opacity: 0.5; pointer-events: none;")},setData:function(lat,lon,name,address,isMarkerBlue){if(isMarkerBlue)var icon="/images/maps-blueMarker.svg";else icon="/images/maps-redMarker.svg";icon=ZPMaps.map.domain+icon,ZPMaps.map.removeAllMarkers();var marker=new ZMarker(name,lat,lon);""!=name&&void 0!=name&&(marker.setTitle(name),marker.showInfoWindow(!0),marker.setCustomInfoWindowView(name+"<br>"+address)),marker.setIcon(icon),marker.autoOpenInfoWindow([ZMarkersEventType.OnMouseOver,ZMarkersEventType.Onclick]),ZPMaps.map.addMarker(marker);var markerarray=[];markerarray[0]=marker,ZPMaps.map.fitToMarkers(markerarray)},showCurrentLocation:function(){ZPMaps.map.showCurrentLocation()},addCurrentLocationMarker:function(){navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(position){var currMarker=new ZMarker(ZMaps_CurrentMarker,position.coords.latitude,position.coords.longitude),icon=ZPMaps.map.domain+ZMapsLocationMarkerIcon;currMarker.setIcon(icon),ZPMaps.map.addMarker(currMarker)})},hideFullScreen:function(){2==ZPeople.GeoMapType&&$("#"+Layout.Page.pageId+"_map .gm-fullscreen-control").hide()}};var IPRestrictions={isInitialized:!1,appfor:{},exceptfor:{},ipResDetails:{},APPLICABLE_FOR_KEYS:["role","loc","dept","desg","user"],allI18NKeys:{role:"zp.allroles",location:"zp.alllocation",desg:"zp.alldesignation",department:"zp.alldepartment",users:"zp.allemployees"},filterEdited:!1,init:function(){Layout.Page.container.find(".addTag").select2(),IPRestrictions.getIPRestrictDetails(!1),IPRestrictions.constructApplicableFor(),IPRestrictions.filterEdited=!1,IPRestrictions.contructfilterOptions()},constructApplicableFor:function(){APPLICABLEFORKEYS=[ZPPickList.CONSTANTS.ROLES,ZPPickList.CONSTANTS.DEPARTMENTS,ZPPickList.CONSTANTS.DESIGNATIONS,ZPPickList.CONSTANTS.LOCATIONS,ZPPickList.CONSTANTS.USERS],ZPPickList.loginUserNeed=!0,ZPPickList.init(APPLICABLEFORKEYS)},toggleFilter:function(){if($("#"+Layout.Page.pageId+" #ipRestriction_filter").hasClass("ZPFilsel"))$("#"+Layout.Page.pageId+" #ipRestriction_filter").removeClass("blu ZPFilsel"),$("#"+Layout.Page.pageId+" #ipRestrict_FiltersList").attr("class","ZPFilMain"),$("#"+Layout.Page.pageId+" #ipRestrict_filterCloseButton").hide(),$("#page-wrapper").attr("class","Nbar2");else if($("#"+Layout.Page.pageId+" #ipRestriction_filter").addClass("blu ZPFilsel"),$("#"+Layout.Page.pageId+" #ipRestrict_FiltersList").attr("class","ZPFilMain TEbnd"),$("#"+Layout.Page.pageId+" #ipRestrict_filterCloseButton").show(),$("#page-wrapper").attr("class","Nbar2F"),$("#"+Layout.Page.pageId+" #ipRestrict_FiltersList .col-md-2").children().length>5?($("#page-wrapper").attr("class","Nbar2F2"),$("#"+Layout.Page.pageId+" #ipRestrict_FiltersList").attr("class","ZPFilMain TEbnd1")):($("#page-wrapper").attr("class","Nbar2F"),$("#"+Layout.Page.pageId+" #ipRestrict_FiltersList").attr("class","ZPFilMain TEbnd")),!IPRestrictions.filterEdited){var applDiv=Layout.Page.container.find("#zp_ipRestrict_applicable");IPRestrictions.togglePlaceholder(applDiv.find("#ipRestrict_department"),IPRestrictions.allI18NKeys.department),IPRestrictions.togglePlaceholder(applDiv.find("#ipRestrict_desg"),IPRestrictions.allI18NKeys.desg),IPRestrictions.togglePlaceholder(applDiv.find("#ipRestrict_location"),IPRestrictions.allI18NKeys.location),IPRestrictions.togglePlaceholder(applDiv.find("#ipRestrict_role"),IPRestrictions.allI18NKeys.role),IPRestrictions.togglePlaceholder(applDiv.find("#appl_ipRestrict_users"),IPRestrictions.allI18NKeys.users,"users")}},resetFilterInputs:function(){var applicableFilter=Layout.Page.container.find("#zp_ipRestrict_applicable");applicableFilter.find("#ipRestrict_department").select2("val",0),applicableFilter.find("#ipRestrict_desg").select2("val",0),applicableFilter.find("#ipRestrict_location").select2("val",0),applicableFilter.find("#ipRestrict_role").select2("val",0),applicableFilter.find("#appl_ipRestrict_users").select2("val","");var exceptionFilter=Layout.Page.container.find("#zp_ipRestrict_exception");exceptionFilter.find("#ipRestrict_department").select2("val",""),exceptionFilter.find("#ipRestrict_desg").select2("val",""),exceptionFilter.find("#ipRestrict_location").select2("val",""),exceptionFilter.find("#ipRestrict_role").select2("val",""),exceptionFilter.find("#except_ipRestrict_users").select2("val","")},populateFilterOptions:function(tagname,options,id){var select=Layout.Page.container.find(id).find("select[name="+tagname+"]");for(var id in select.select2({closeOnSelect:!1}),options){var obj=options[id];$(select).append(ZP.create("option",{value:obj.recID,text:ZPeople.decodeTxt(obj.recName)}))}},contructfilterOptions:function(){var applicableFilter=Layout.Page.container.find("#zp_ipRestrict_applicable");applicableFilter.find("#ipRestrict_department").children().remove(),applicableFilter.find("#ipRestrict_desg").children().remove(),applicableFilter.find("#ipRestrict_location").children().remove(),applicableFilter.find("#ipRestrict_role").children().remove(),applicableFilter.find("#appl_ipRestrict_users").children().remove();var exceptionFilter=Layout.Page.container.find("#zp_ipRestrict_exception");exceptionFilter.find("#ipRestrict_department").children().remove(),exceptionFilter.find("#ipRestrict_desg").children().remove(),exceptionFilter.find("#ipRestrict_location").children().remove(),exceptionFilter.find("#ipRestrict_role").children().remove(),exceptionFilter.find("#except_ipRestrict_users").children().remove(),IPRestrictions.userInputSelect2(applicableFilter.find("#appl_ipRestrict_users_div").find("input[name=users]")),IPRestrictions.userInputSelect2(exceptionFilter.find("#except_ipRestrict_users_div").find("input[name=users]")),IPRestrictions.populateFilterOptions("department",ZPPickList.allDepartments,"#zp_ipRestrict_applicable"),IPRestrictions.populateFilterOptions("desg",ZPPickList.allDesignations,"#zp_ipRestrict_applicable"),IPRestrictions.populateFilterOptions("role",ZPPickList.allRoles,"#zp_ipRestrict_applicable"),IPRestrictions.populateFilterOptions("location",ZPPickList.allLocations,"#zp_ipRestrict_applicable"),IPRestrictions.populateFilterOptions("department",ZPPickList.allDepartments,"#zp_ipRestrict_exception"),IPRestrictions.populateFilterOptions("desg",ZPPickList.allDesignations,"#zp_ipRestrict_exception"),IPRestrictions.populateFilterOptions("role",ZPPickList.allRoles,"#zp_ipRestrict_exception"),IPRestrictions.populateFilterOptions("location",ZPPickList.allLocations,"#zp_ipRestrict_exception")},getToggleSearch:function(){IPRestrictions.getIPRestrictDetails(!0),IPRestrictions.toggleFilter()},filterValuesOnChange:function(select,type){var name=$(select).attr("name");IPRestrictions.filterEdited=!0;var isApplicable="appl"==type,oppmodal=isApplicable?Layout.Page.container.find("#zp_ipRestrict_exception"):Layout.Page.container.find("#zp_ipRestrict_applicable"),curmodal=isApplicable?Layout.Page.container.find("#zp_ipRestrict_applicable"):Layout.Page.container.find("#zp_ipRestrict_exception"),divId="#ipRestrict_"+name,oppdivId="#ipRestrict_"+name;"users"==name&&(divId=isApplicable?"#appl_ipRestrict_users":"#except_ipRestrict_users",oppdivId=isApplicable?"#except_ipRestrict_users":"#appl_ipRestrict_users");var oppEle,values=curmodal.find(divId).val();values&&0!=values[0]&&values.length>0?("users"==name&&isApplicable?(0==curmodal.find("#ipRestrict_department").val()&&IPRestrictions.togglePlaceholder(curmodal.find("#ipRestrict_department"),""),0==curmodal.find("#ipRestrict_desg").val()&&IPRestrictions.togglePlaceholder(curmodal.find("#ipRestrict_desg"),""),0==curmodal.find("#ipRestrict_location").val()&&IPRestrictions.togglePlaceholder(curmodal.find("#ipRestrict_location"),""),0==curmodal.find("#ipRestrict_role").val()&&IPRestrictions.togglePlaceholder(curmodal.find("#ipRestrict_role"),"")):"users"!=name&&isApplicable&&IPRestrictions.togglePlaceholder(curmodal.find("#appl_ipRestrict_users"),"","users"),(oppEle=oppmodal.find(oppdivId)).select2("val",""),oppmodal.find(oppdivId+"_div").addClass("DN")):("users"==name&&isApplicable?(0==curmodal.find("#ipRestrict_department").val()&&(IPRestrictions.togglePlaceholder(curmodal.find("#ipRestrict_department"),IPRestrictions.allI18NKeys.department),curmodal.find("#ipRestrict_department").select2("val",0)),0==curmodal.find("#ipRestrict_desg").val()&&(IPRestrictions.togglePlaceholder(curmodal.find("#ipRestrict_desg"),IPRestrictions.allI18NKeys.desg),curmodal.find("#ipRestrict_desg").select2("val",0)),0==curmodal.find("#ipRestrict_location").val()&&(IPRestrictions.togglePlaceholder(curmodal.find("#ipRestrict_location"),IPRestrictions.allI18NKeys.location),curmodal.find("#ipRestrict_location").select2("val",0)),0==curmodal.find("#ipRestrict_role").val()&&(IPRestrictions.togglePlaceholder(curmodal.find("#ipRestrict_role"),IPRestrictions.allI18NKeys.role),curmodal.find("#ipRestrict_role").select2("val",0))):"users"!=name&&isApplicable&&""==curmodal.find("#appl_ipRestrict_users").val()&&0==curmodal.find("#ipRestrict_department").val()&&0==curmodal.find("#ipRestrict_desg").val()&&0==curmodal.find("#ipRestrict_location").val()&&0==curmodal.find("#ipRestrict_role").val()&&IPRestrictions.togglePlaceholder(curmodal.find("#appl_ipRestrict_users"),IPRestrictions.allI18NKeys.users,"users"),(oppEle=oppmodal.find(oppdivId)).parents(oppdivId+"_div").removeClass("DN"),isApplicable&&0!=curmodal.find("#appl_ipRestrict_users").val()&&IPRestrictions.togglePlaceholder(curmodal.find(divId),""),isApplicable||""!=oppmodal.find("#appl_ipRestrict_users").val()||0!=oppmodal.find("#ipRestrict_department").val()||0!=oppmodal.find("#ipRestrict_desg").val()||0!=oppmodal.find("#ipRestrict_location").val()||0!=oppmodal.find("#ipRestrict_role").val()||IPRestrictions.togglePlaceholder(oppmodal.find("#appl_ipRestrict_users"),IPRestrictions.allI18NKeys.users,"users"),isApplicable||oppEle.select2("val",""))},switchApplicableFilterTabs:function(ele){if("appl"==$(ele).attr("id")){var applDiv=Layout.Page.container.find("#zp_ipRestrict_applicable");applDiv.removeClass("DN"),Layout.Page.container.find("#zp_ipRestrict_exception").addClass("DN"),""!=applDiv.find("#appl_ipRestrict_users").val()||(IPRestrictions.togglePlaceholder(applDiv.find("#ipRestrict_department"),IPRestrictions.allI18NKeys.department),IPRestrictions.togglePlaceholder(applDiv.find("#ipRestrict_desg"),IPRestrictions.allI18NKeys.desg),IPRestrictions.togglePlaceholder(applDiv.find("#ipRestrict_location"),IPRestrictions.allI18NKeys.location),IPRestrictions.togglePlaceholder(applDiv.find("#ipRestrict_role"),IPRestrictions.allI18NKeys.role),0==applDiv.find("#ipRestrict_department").val()&&0==applDiv.find("#ipRestrict_desg").val()&&0==applDiv.find("#ipRestrict_location").val()&&0==applDiv.find("#ipRestrict_role").val()&&IPRestrictions.togglePlaceholder(applDiv.find("#appl_ipRestrict_users"),IPRestrictions.allI18NKeys.users,"users"))}else Layout.Page.container.find("#zp_ipRestrict_exception").removeClass("DN"),Layout.Page.container.find("#zp_ipRestrict_applicable").addClass("DN");$(ele).addClass("activ"),$(ele).siblings().removeClass("activ")},getIPRestrictDetails:function(isFromSearch){var param={mode:"list",method:"get"},url="getIPRestriction.zp";if(ZPeople.Module.CURRENT_MODULEPREFIX&&(url=ZPeople.Module.CURRENT_MODULEPREFIX+url),isFromSearch){var applicableFilter=Layout.Page.container.find("#zp_ipRestrict_applicable"),exceptionFilter=Layout.Page.container.find("#zp_ipRestrict_exception"),desgObj=applicableFilter.find("#ipRestrict_desg").val();desgObj&&0!=desgObj.length&&(param.desgId=JSON.stringify(desgObj),param.desgIdType=0),(desgObj=exceptionFilter.find("#ipRestrict_desg").val())&&0!=desgObj.length&&(param.desgId=JSON.stringify(desgObj),param.desgIdType=1);var roleObj=applicableFilter.find("#ipRestrict_role").val();roleObj&&0!=roleObj.length&&(param.roleId=JSON.stringify(roleObj),param.roleIdType=0),(roleObj=exceptionFilter.find("#ipRestrict_role").val())&&0!=roleObj.length&&(param.roleId=JSON.stringify(roleObj),param.roleIdType=1);var departMentObj=applicableFilter.find("#ipRestrict_department").val();departMentObj&&0!=departMentObj.length&&(param.deptId=JSON.stringify(departMentObj),param.deptIdType=0),(departMentObj=exceptionFilter.find("#ipRestrict_department").val())&&0!=departMentObj.length&&(param.deptId=JSON.stringify(departMentObj),param.deptIdType=1);var locationObj=applicableFilter.find("#ipRestrict_location").val();locationObj&&0!=locationObj.length&&(param.locationId=JSON.stringify(locationObj),param.locationIdType=0),(locationObj=exceptionFilter.find("#ipRestrict_location").val())&&0!=locationObj.length&&(param.locationId=JSON.stringify(locationObj),param.locationIdType=1);var empObj=applicableFilter.find("#appl_ipRestrict_users").val();empObj&&0!=empObj.length&&(param.empId=JSON.stringify(empObj.split(",")),param.empIdType=0),(empObj=exceptionFilter.find("#except_ipRestrict_users").val())&&0!=empObj.length&&(param.empId=JSON.stringify(empObj.split(",")),param.empIdType=1)}ZPeople.Request.send(url,param,IPRestrictions.list,isFromSearch)},list:function(data,params,isFromSearch){if("success"==data.status){var iprs=jQuery("<div></div>"),ipDummyRow=Layout.Page.container.find(".iprestrictions").find(".dummy"),iprsList=data.ipres;if(iprsList.length>0){for(i in iprsList){ipRow=ipDummyRow.clone();var iprestID=iprsList[i].iprestId;ipRow.removeAttr("class").attr("value",iprestID),ipRow.addClass("ZPLRow"),ipRow.find(".fip").append(iprsList[i].fromIp),ipRow.find(".tip").append(iprsList[i].toIp);var types=iprsList[i].type;ZPUtil.checkIsExistInArray(types,"0")&&(ipRow.find(".modules").append(jQuery("<span></span>",{class:"btn-sm addbadge FL MR5",value:1}).append(ZPI18N.getString("zp.timetracker"))),ipRow.find(".modules").append(jQuery("<span></span>",{class:"btn-sm addbadge FL MR5",value:2}).append(ZPI18N.getString("zp.attendance"))),ipRow.find(".modules").append(jQuery("<span></span>",{class:"btn-sm addbadge FL MR5",value:3}).append(ZPI18N.getString("zp.files")))),ZPUtil.checkIsExistInArray(types,"1")&&ipRow.find(".modules").append(jQuery("<span></span>",{class:"btn-sm addbadge FL MR5",value:1}).append(ZPI18N.getString("zp.timetracker"))),ZPUtil.checkIsExistInArray(types,"2")&&ipRow.find(".modules").append(jQuery("<span></span>",{class:"btn-sm addbadge FL MR5",value:2}).append(ZPI18N.getString("zp.attendance"))),ZPUtil.checkIsExistInArray(types,"3")&&ipRow.find(".modules").append(jQuery("<span></span>",{class:"btn-sm addbadge FL MR5",value:3}).append(ZPI18N.getString("zp.files"))),iprs.append(ipRow),IPRestrictions.ipResDetails[iprestID]=iprsList[i]}Layout.Page.container.find("#NoIpConfigured").hide(),Layout.Page.container.find("#ZPAtt_iprestrict_noRecFilteredInfo").hide(),Layout.Page.container.find("#ipConfigDiv").show()}else{var emptyMsg=Layout.Page.container.find("#NoIpConfigured");isFromSearch&&(emptyMsg=Layout.Page.container.find("#ZPAtt_iprestrict_noRecFilteredInfo")),$(emptyMsg).show(),0===emptyMsg.find("i").eq(0).children().length&&Attendance.noDataImg(8,"CR-nodata",emptyMsg.find("i").eq(0)),Layout.Page.container.find("#ipConfigDiv").hide()}Layout.Page.container.find("#ipConfigDiv").siblings("#zp_page_loading").remove(),iprs.append(ipDummyRow),iprs.find(".ZPtitle").tooltip(),Layout.Page.container.find(".iprestrictions").empty().append(iprs.children()),Layout.Page.container.find("#ipConfig_Tab").parent().hasClass("tabcont")||ZPView.handleTablePosition()}else ZPeople.Message.showFailureMsg(ZPI18N.getString("zp.sorryservererror"))},getOptions:function(ele){var edetails={};void 0!=ele&&(edetails.ele=ele);var html=Layout.Page.container.find("#ApplicableFor");html.find("#appl").addClass("active"),html.find("#appl").siblings().removeClass("active"),Layout.Page.container.find("#exceptionDiv").addClass("DN"),Layout.Page.container.find("#applicableDiv").removeClass("DN"),Layout.Page.container.find("#users_field #selectedempcount").text(""),IPRestrictions.emptyDropdown(),IPRestrictions.regApplicable(Layout.Page.container.find("#applicableDiv"),"appl"),IPRestrictions.regApplicable(Layout.Page.container.find("#exceptionDiv"),"except"),IPRestrictions.populateApplicableOptions("location","loc",ZPPickList.allLocations),IPRestrictions.populateApplicableOptions("designation","desg",ZPPickList.allDesignations),IPRestrictions.populateApplicableOptions("department","dept",ZPPickList.allDepartments),IPRestrictions.populateApplicableOptions("role","role",ZPPickList.allRoles),IPRestrictions.userInputSelect2(Layout.Page.container.find("#exceptionDiv").find("input[name=users].except")),IPRestrictions.userInputSelect2(Layout.Page.container.find("#applicableDiv").find("input[name=users].appl")),IPRestrictions.appendSelect2(Layout.Page.container.find("#applicableDiv")),IPRestrictions.appendSelect2(Layout.Page.container.find("#exceptionDiv")),IPRestrictions.isInitialized=!0,IPRestrictions.updateOptions(edetails)},updateOptions:function(edetails){if(edetails.hasOwnProperty("ele")){Layout.Page.container.find("#addIPRes #exampleModalLabel").html(ZPI18N.getString("zp.editiprestriction"));var tRow=$(edetails.ele).closest("tr"),params={mode:"info",ipresId:tRow.attr("value"),method:"get"},url=(edetails={ele:tRow},"getIPRestriction.zp");ZPeople.Module.CURRENT_MODULEPREFIX&&(url=ZPeople.Module.CURRENT_MODULEPREFIX+url),ZPeople.Request.send(url,params,IPRestrictions.updateEditOptions,edetails)}else{Layout.Page.container.find("#addIPRes #exampleModalLabel").html(ZPI18N.getString("zp.addiprestriction")),Layout.Page.container.find("#fip").val(""),Layout.Page.container.find("#tip").val(""),Layout.Page.container.find("#addIprsModule").val("").select2(),Layout.Page.container.find("#selConditional").addClass("DN"),Layout.Page.container.find(".zpTabs_innerTitleOut").removeClass("DN"),Layout.Page.container.find("#saveIp").attr("onclick","IPRestrictions.save()"),Layout.Page.container.find("#addIPRes").modal("show"),IPRestrictions.appfor={role:[],dept:[],desg:[],loc:[],user:[]},IPRestrictions.exceptfor={role:[],dept:[],desg:[],loc:[],user:[]},Layout.Page.container.find("#addIprsModule").parent().find(".error").hide(),Layout.Page.container.find("#fip").parent().find(".error").hide(),Layout.Page.container.find("#tip").parent().find(".error").hide();var applicableModal=Layout.Page.container.find("#applicableDiv");IPRestrictions.togglePlaceholder(applicableModal.find("#location_field select[name=location]"),"zp.alllocaction"),IPRestrictions.togglePlaceholder(applicableModal.find("#department_field select[name=department]"),"zp.alldepartment"),IPRestrictions.togglePlaceholder(applicableModal.find("#designation_field select[name=designation]"),"zp.alldesignation"),IPRestrictions.togglePlaceholder(applicableModal.find("#role_field select[name=role]"),"zp.allroles")}},updateEditOptions:function(data,params,edetails){if("success"==data.status){var ele=$(edetails.ele);Layout.Page.container.find("#fip").val(ele.find(".fip").text()),Layout.Page.container.find("#tip").val(ele.find(".tip").text());var mods=ele.find(".modules span").map(function(){return $(this).attr("value")}).get();Layout.Page.container.find("#addIprsModule").val(mods).select2(),IPRestrictions.appfor={role:data.roles,dept:data.dep,desg:data.desig,loc:data.loc,user:data.users},IPRestrictions.exceptfor={role:data.exceptroles,dept:data.exceptdep,desg:data.exceptdesig,loc:data.exceptloc,user:data.exceptusers},IPRestrictions.setApplData(Layout.Page.container.find("#applicableDiv"),IPRestrictions.appfor,!0),IPRestrictions.setApplData(Layout.Page.container.find("#exceptionDiv"),IPRestrictions.exceptfor,!1),Layout.Page.container.find("#saveIp").attr("onclick",'IPRestrictions.save("'+params.ipresId+'")'),Layout.Page.container.find("#addIprsModule").parent().find(".error").hide(),Layout.Page.container.find("#fip").parent().find(".error").hide(),Layout.Page.container.find("#tip").parent().find(".error").hide(),Layout.Page.container.find("#addIPRes").modal("show"),IPRestrictions.populateConditonalOption(params.ipresId)}else data.isBGProcessRunning?ZPeople.Message.showWarningMsg(ZPI18N.getString("zp.iprestriction.v2.error.editiprestriction")):ZPeople.Message.showFailureMsg(ZPI18N.getString("zp.sorryservererror"))},save:function(ipresId){var fip=Layout.Page.container.find("#fip").val(),tip=Layout.Page.container.find("#tip").val(),modules=Layout.Page.container.find("#addIprsModule").val(),succ=!0;if(void 0==fip||null==fip||""==fip?(Layout.Page.container.find("#fip").parent().find(".error").text(ZPI18N.getString("zp.enterIp")).show(),succ=!1):IPRestrictions.isIP(fip)?Layout.Page.container.find("#fip").parent().find(".error").hide():(Layout.Page.container.find("#fip").parent().find(".error").text(ZPI18N.getString("zp.invalidIp")).show(),succ=!1),void 0==tip||null==tip||""==tip?(Layout.Page.container.find("#tip").parent().find(".error").text(ZPI18N.getString("zp.enterIp")).show(),succ=!1):IPRestrictions.isIP(tip)||(Layout.Page.container.find("#tip").parent().find(".error").text(ZPI18N.getString("zp.invalidIp")).show(),succ=!1),succ&&(IPRestrictions.isValidRange(fip,tip)?Layout.Page.container.find("#tip").parent().find(".error").hide():(Layout.Page.container.find("#tip").parent().find(".error").text(ZPI18N.getString("zp.invalidIpRange")).show(),succ=!1)),null===modules?(Layout.Page.container.find("#addIprsModule").parent().find(".error").text(ZPI18N.getString("zp.selectModule")).show(),succ=!1):Layout.Page.container.find("#addIprsModule").parent().find(".error").hide(),3==modules.length&&(modules=["0"]),succ){var params={fromIp:fip,toIp:tip,modules:JSON.stringify(modules)};if(IPRestrictions.getApplData(IPRestrictions.appfor,!0),IPRestrictions.getApplData(IPRestrictions.exceptfor,!1),params.appfor=JSON.stringify(IPRestrictions.appfor),params.exceptfor=JSON.stringify(IPRestrictions.exceptfor),Layout.Page.container.find("#saveIp").prop("disabled",!0),void 0==ipresId||null==ipresId){params.method="add",params.version=2;var url="addIPRestriction.zp";ZPeople.Module.CURRENT_MODULEPREFIX&&(url=ZPeople.Module.CURRENT_MODULEPREFIX+url),ZPeople.Request.send(url,params,IPRestrictions.handleAdd)}else{params.method="edit",params.ipresId=ipresId,params.version=Layout.Page.container.find("select[name=selConditional]").val();url="editIPRestriction.zp";ZPeople.Module.CURRENT_MODULEPREFIX&&(url=ZPeople.Module.CURRENT_MODULEPREFIX+url),ZPeople.Request.send(url,params,IPRestrictions.handleEdit)}Layout.Page.container.find("#saveIp").prop("disabled",!1)}},isIP:function(str){str=str.trim();return/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/.test(str)},isValidRange:function(fip,tip){var fromlong=0,tolong=0,fips=fip.split(".");for(var i in fips)fromlong+=Math.pow(256,4-i)*parseInt(fips[i].trim());var tips=tip.split(".");for(i in tips)tolong+=Math.pow(256,4-i)*parseInt(tips[i].trim());return!(fromlong>tolong)},handleAdd:function(data,params){if("success"==data.status){var iprs=Layout.Page.container.find(".iprestrictions");ipRow=iprs.find(".dummy").clone(),ipRow.removeAttr("class").attr("value",data.ipresId),ipRow.addClass("ZPLRow"),null!=data.toIp&&void 0!=data.toIp&&(params.toIp=data.toIp),IPRestrictions.updateRow(ipRow,params),iprs.append(ipRow),Layout.Page.container.find("#NoIpConfigured").hide(),Layout.Page.container.find("#ZPAtt_iprestrict_noRecFilteredInfo").hide(),Layout.Page.container.find("#ipConfigDiv").show(),ZPeople.Message.showSuccessMsg(ZPI18N.getString("zp.ipAdded"))}else ZPeople.Message.showFailureMsg(data.msg?data.msg:ZPI18N.getString("zp.sorryservererror"));"success"!=data.status&&data.msg||Layout.Page.container.find("#addIPRes").modal("hide")},handleEdit:function(data,params){if("success"==data.status){var tr=Layout.Page.container.find("tr[value="+params.ipresId+"]");null!=data.toIp&&void 0!=data.toIp&&(params.toIp=data.toIp),IPRestrictions.updateRow(tr,params),IPRestrictions.ipResDetails[params.ipresId]&&(IPRestrictions.ipResDetails[params.ipresId].version=params.version),ZPeople.Message.showSuccessMsg(ZPI18N.getString("zp.ipEdited")),IPRestrictions.isInitialized=!1}else if(ZPeople.Message.showFailureMsg(data.msg?data.msg:ZPI18N.getString("zp.sorryservererror")),data.permissionDenied&&params.ipresId){var typeArr=IPRestrictions.ipResDetails[params.ipresId].type;1==typeArr.length&&0==typeArr[0]?Layout.Page.container.find("#addIprsModule").val([1,2,3]).select2():Layout.Page.container.find("#addIprsModule").val(typeArr).select2()}else Layout.Page.container.find("#addIprsModule").val().select2();"success"!=data.status&&data.msg||Layout.Page.container.find("#addIPRes").modal("hide")},updateRow:function(ipRow,params){ipRow.find(".fip").text(params.fromIp),ipRow.find(".tip").text(params.toIp);var types=params.modules;ipRow.find(".modules").empty(),ZPUtil.checkIsExistInArray(types,"0")&&(ipRow.find(".modules").append(jQuery("<span></span>",{class:"btn-sm addbadge FL MR5",value:1}).append(ZPI18N.getString("zp.timetracker"))),ipRow.find(".modules").append(jQuery("<span></span>",{class:"btn-sm addbadge FL MR5",value:2}).append(ZPI18N.getString("zp.attendance"))),ipRow.find(".modules").append(jQuery("<span></span>",{class:"btn-sm addbadge FL MR5",value:3}).append(ZPI18N.getString("zp.files")))),ZPUtil.checkIsExistInArray(types,"1")&&ipRow.find(".modules").append(jQuery("<span></span>",{class:"btn-sm addbadge FL MR5",value:1}).append(ZPI18N.getString("zp.timetracker"))),ZPUtil.checkIsExistInArray(types,"2")&&ipRow.find(".modules").append(jQuery("<span></span>",{class:"btn-sm addbadge FL MR5",value:2}).append(ZPI18N.getString("zp.attendance"))),ZPUtil.checkIsExistInArray(types,"3")&&ipRow.find(".modules").append(jQuery("<span></span>",{class:"btn-sm addbadge FL MR5",value:3}).append(ZPI18N.getString("zp.files")))},deleteIPR:function(ele){var params={method:"delete"};params.conreqcsr=csrfToken,params.ipresId=$(ele).closest("tr").attr("value");var url="deleteIPRestriction.zp";ZPeople.Module.CURRENT_MODULEPREFIX&&(url=ZPeople.Module.CURRENT_MODULEPREFIX+url),$.post(url,params,function(data){if("success"==data.status){if(Layout.Page.container.find("tr[value="+params.ipresId+"]").remove(),ZPeople.Message.showSuccessMsg(ZPI18N.getString("zp.ipDeleted")),Layout.Page.container.find("tbody tr").length<=1){var emptyMsg=Layout.Page.container.find("#NoIpConfigured");$(emptyMsg).show(),0===emptyMsg.find("i").eq(0).children().length&&Attendance.noDataImg(8,"CR-nodata",emptyMsg.find("i").eq(0)),Layout.Page.container.find("#ipConfigDiv").hide()}}else ZPeople.Message.showFailureMsg(data.msg?data.msg:ZPI18N.getString("zp.sorryservererror")),Attendance.deleteConfirmMsg(ele,"ZPAtt_ipDelAction")})},switchApplicableTabs:function(ele){"appl"==$(ele).attr("id")?(Layout.Page.container.find("#applicableDiv").removeClass("DN"),Layout.Page.container.find("#exceptionDiv").addClass("DN")):(Layout.Page.container.find("#exceptionDiv").removeClass("DN"),Layout.Page.container.find("#applicableDiv").addClass("DN")),$(ele).addClass("active"),$(ele).siblings().removeClass("active")},regApplicable:function(modal,type){modal.children("div").removeClass("DN"),modal.find("."+type).on("change",function(){var name=$(this).attr("name"),data=$(this).select2("data"),arr=_.pluck(data,"id"),type=$(this).attr("class"),oppmodal=-1!=type.indexOf("appl")?Layout.Page.container.find("#exceptionDiv"):Layout.Page.container.find("#applicableDiv"),oppType=-1!=type.indexOf("appl")?"except":"appl",oppEle=oppmodal.find("[name="+name+"]."+oppType);if(oppEle.parents(".zp-label").removeClass("DN"),"users"==name&&oppEle.parents(".zp-label").prev().removeClass("DN"),"users"==name){var usercount=Layout.Page.container.find("#users_field .select2-search-choice").length,applicabletype=Layout.Page.container.find("#applicableDiv");-1!=type.indexOf("appl")&&usercount?(IPRestrictions.togglePlaceholder(applicabletype.find("#location_field select[name=location]"),""),IPRestrictions.togglePlaceholder(applicabletype.find("#department_field select[name=department]"),""),IPRestrictions.togglePlaceholder(applicabletype.find("#designation_field select[name=designation]"),""),IPRestrictions.togglePlaceholder(applicabletype.find("#role_field select[name=role]"),"")):-1==type.indexOf("appl")||usercount||(IPRestrictions.togglePlaceholder(applicabletype.find("#location_field select[name=location]"),"zp.alllocaction"),IPRestrictions.togglePlaceholder(applicabletype.find("#department_field select[name=department]"),"zp.alldepartment"),IPRestrictions.togglePlaceholder(applicabletype.find("#designation_field select[name=designation]"),"zp.alldesignation"),IPRestrictions.togglePlaceholder(applicabletype.find("#role_field select[name=role]"),"zp.allroles"))}1==arr.length&&"0"==arr[0]||"0"==_.last(arr)?$(this).select2("data",_.filter(data,function(obj){return"0"==obj.id})):-1!=arr.indexOf("0")&&$(this).select2("data",_.filter(data,function(obj){return"0"!=obj.id})),arr.length>0&&($(this).is("input")?oppEle.select2("val",""):oppEle.select2("val",[]),oppEle.parents(".zp-label").addClass("DN"),"users"==name&&oppEle.parents(".zp-label").prev().addClass("DN"))})},togglePlaceholder:function(ele,key,name){if("users"===name)return ele.attr("data-placeholder",ZPI18N.getString(key)),void ele.select2("val","");ele.attr("data-placeholder",ZPI18N.getString(key)),ele.select2()},setApplData:function(modal,data,appFor){var mapping={role:"role",loc:"location",dept:"department",desg:"designation",user:"users"},oppmodal=Layout.Page.container.find("#exceptionDiv");for(var indx in appFor||(oppmodal=Layout.Page.container.find("#applicableDiv")),IPRestrictions.APPLICABLE_FOR_KEYS){var field=IPRestrictions.APPLICABLE_FOR_KEYS[indx],obj=data[field],arr=_.isArray(obj)?obj:[];if(0!=arr.length)if(modal.find("#"+mapping[field]+"_field").removeClass("DN"),1==arr.length&&"0"==arr[0]||"0"==_.last(arr)?oppmodal.find("#"+mapping[field]+"_field").removeClass("DN"):oppmodal.find("#"+mapping[field]+"_field").addClass("DN"),"user"==field){appFor&&arr.length>0&&(IPRestrictions.togglePlaceholder(modal.find("#location_field select[name=location]"),""),IPRestrictions.togglePlaceholder(modal.find("#department_field select[name=department]"),""),IPRestrictions.togglePlaceholder(modal.find("#designation_field select[name=designation]"),""),IPRestrictions.togglePlaceholder(modal.find("#role_field select[name=role]"),""));var values=[];modal.find("#users_field").prev().removeClass("DN");var userList=ZPeople.getUserDetailsByIds(arr,!1);for(var i in arr){var id=arr[i],empObj=ZPeople.getUserDetailsByIdInList(id,userList);"0"!=id&&empObj&&empObj.name&&-1!=empObj.id&&values.push({id:id,text:ZPeople.decodeTxt(empObj.name),html:empObj.name,photo:empObj.photo})}modal.find("input[name=users]").select2("data",values),"0"!=id&&oppmodal.find("#users_field").prev().addClass("DN")}else"0"!=_.last(arr)&&(modal.find("[name="+mapping[field]+"]").select2("val",arr),modal.find("[name="+mapping[field]+"]").val(arr).trigger("change"));else oppmodal.find("#"+mapping[field]+"_field").removeClass("DN"),"user"==field&&oppmodal.find("#users_field").prev().removeClass("DN")}},populateApplicableOptions:function(tagname,type,options){var select=Layout.Page.container.find("#applicableDiv select[name="+tagname+"]");$.each(options,function(indx,obj){0!=obj.ID&&$(select).append(ZP.create("option",{value:obj.recID,text:ZPeople.decodeTxt(obj.recName)}))});select=Layout.Page.container.find("#exceptionDiv select[name="+tagname+"]");$.each(options,function(indx,obj){0!=obj.ID&&$(select).append(ZP.create("option",{value:obj.recID,text:ZPeople.decodeTxt(obj.recName)}))})},appendSelect2:function(applicabletype){applicabletype.find("#location_field select[name=location]").val("").select2({closeOnSelect:!1}),applicabletype.find("#department_field select[name=department]").val("").select2({closeOnSelect:!1}),applicabletype.find("#designation_field select[name=designation]").val("").select2({closeOnSelect:!1}),applicabletype.find("#role_field select[name=role]").val("").select2({closeOnSelect:!1}),applicabletype.find("#users_field input[name=users]").select2("data",null)},getApplData:function(applicableFor,type){for(var mapping={role:"role",loc:"location",dept:"department",desg:"designation",user:"users"},appclass=type?"appl":"except",appUserele=Layout.Page.container.find("#ApplicableFor [name=users]."+appclass),applUSerarr=_.pluck(appUserele.select2("data"),"id"),version=Layout.Page.container.find("select[name=selConditional]").val(),appliConfigured=!1,i=0;i<IPRestrictions.APPLICABLE_FOR_KEYS.length;i++){var applArr=[],keyName=IPRestrictions.APPLICABLE_FOR_KEYS[i],ele=Layout.Page.container.find("#ApplicableFor [name="+mapping[keyName]+"]."+appclass);applArr=_.pluck(ele.select2("data"),"id"),type&&0==applArr.length&&""==ele.attr("data-placeholder")&&(1==version||applUSerarr.length>0)?applicableFor[IPRestrictions.APPLICABLE_FOR_KEYS[i]]=[-1]:(appliConfigured=!(!type||"user"==keyName||2!=version)||appliConfigured,applicableFor[keyName]=applArr)}if(appliConfigured)for(i=0;i<IPRestrictions.APPLICABLE_FOR_KEYS.length;i++){if("user"!=(keyName=IPRestrictions.APPLICABLE_FOR_KEYS[i]))1==(applArr=applicableFor[keyName]).length&&-1==applArr[0]&&applArr.pop()}},emptyDropdown:function(){Layout.Page.container.find("#location_field select[name=location]").empty(),Layout.Page.container.find("#department_field select[name=department]").empty(),Layout.Page.container.find("#designation_field select[name=designation]").empty(),Layout.Page.container.find("#role_field select[name=role]").empty(),Layout.Page.container.find("select[name=selConditional]").empty()},userInputSelect2:function(ele){var eleId=$(ele).attr("id"),isMultiple=$(ele).attr("ismultiple");if(void 0==eleId||""==eleId){var maxIndx=0;$.each(Layout.Page.container.find("[id^="+Layout.Page.pageId+"_empsearch_]"),function(){var indx=$(this).attr("id").split("_")[2];maxIndx=Math.max(indx,maxIndx)}),eleId=Layout.Page.pageId+"_empsearch_"+(maxIndx+1),$(ele).attr("id",eleId)}var json={id:eleId,inpFormat:"select",isMultiple:isMultiple,initCurrentUser:!1,type:1,limit:10,searchMode:"IPGEO_RESTRICTION_SETTINGS",searchType:"emp"};ZPComponents.Search.reset(json,!0),json.maximumSelectionSize=1e3,json.initDefaultValues=!0,ZPComponents.Search.create(json)},populateConditonalOption:function(ipresID){var select=Layout.Page.container.find("select[name=selConditional]");$("#"+Layout.Page.pageId+" select[name=selConditional] option[value='1']").length<1&&($(select).append(ZP.create("option",{value:1,text:"OR"})),$(select).append(ZP.create("option",{value:2,text:"AND"})));var version=ipresID&&IPRestrictions.ipResDetails[ipresID]?IPRestrictions.ipResDetails[ipresID].version:2;$(select).val(version).select2(),Layout.Page.container.find(".zpTabs_innerTitleOut").removeClass("DN"),1==version?(Layout.Page.container.find(".zpTabs_innerTitleOut").addClass("DN"),Layout.Page.container.find("#selConditional").removeClass("DN")):Layout.Page.container.find("#selConditional").addClass("DN")},hideIPRestrictionConfiuration:function(data){Layout.Page.container.find("#addIPRes").modal("hide")}};ModuleAdmin={init:function(){var layout=Layout.Page.container;layout.css("background","#f9fafc"),layout.find("select[multiple='multiple']").select2({minimumResultsForSearch:5,closeOnSelect:!1,maximumSelectionLength:15});var modal='<div class="modal popRgtModel PopSsModel" role="dialog" data-keyboard="false" id="ZPAtt_SPOCGroupsList_Popup" style="display: block; z-index: 995;"> <div class="modal-dialog SPOC_wrpr" role="document"> <div class="modal-content"> <div class="modal-header"> <div class="zp-back" data-dismiss="modal"><i class="IC-ar-lft"></i></div> <div class="ssp-profmin"> <span class="ssp-un">'+ZPI18N.getString("zp.shiftgroups")+'</span> </div> <a class="IC-cls close" data-dismiss="modal"></a> </div> <div class="modal-body P0I"> <div class="zpcont-dt zpnew-recview"> <div class="zprow" id="ZPAtt_SPOCGroupsList"> </div> </div> </div> </div> </div> </div>';$("#page-wrapper").append(modal),modal=$("#page-wrapper").find("#ZPAtt_SPOCGroupsList_Popup"),AttendanceShift.getDepLocShiftList(),ModuleAdmin.getGroupsList(),ModuleAdmin.getSettingsList()},getModule:function(){var module;return"leavetracker-settings-moduleadmin"===Layout.Page.pageId?module="leave":"attendance-settings-moduleadmin"===Layout.Page.pageId?module="attendance":"timetracker-settings-moduleadmin"===Layout.Page.pageId&&(module="timetracker"),module},formCompFieldOptions:{},getValueFromEmpLookUp:function(fcId){if(ModuleAdmin.formCompFieldOptions[fcId])ModuleAdmin.consFormOptions(fcId);else{var param={mode:"getOptionForFormFeilds",conreqcsr:csrfToken,fcId:fcId};param.module=ModuleAdmin.getModule(),$.post("/moduleAdminAction.zp",param,function(rdata){var fieldValues=rdata.fieldValues[fcId];ModuleAdmin.formCompFieldOptions[fcId]=fieldValues,ModuleAdmin.consFormOptions(fcId)})}},consFormOptions:function(fcId,isReturn){var layout=Layout.Page.container,formOptions=ModuleAdmin.formCompFieldOptions[fcId];if(!formOptions)return"";var htmlCont="";for(var i in formOptions){var value=formOptions[i];htmlCont+="<option value='"+value.optionId+"'>"+$("<div/>").text(value.optionVal).html()+"</option>"}if(isReturn)return htmlCont;layout.find("#ZPAtt_SPOCSelectGrpCrit").html(htmlCont)},currSettId:null,populateSettingsOptions:function(show,obj){var layout=Layout.Page.container;if(show){if(layout.find("#ZPAtt_SPOCAddSettingsPopup").modal("show"),layout.find("#ZPAtt_SPOCSettingsName").val(""),layout.find("#ZPAtt_SPOCAddSettingsPopup .ERR").remove(),layout.find("#ZPAtt_SPOCUser_AddAdmin,#ZPAtt_SPOCGroupsSelect").select2("val",""),layout.find("#ZPAtt_SPOCAddSettingsPopup input[type=checkbox]").prop("checked",!1),layout.find("#ZPAtt_SPOCViewShiftEnabled,#ZPAtt_SPOCEditShiftEnabled").prop("checked",!0),layout.find("#s2id_ZPAtt_SPOCUser_AddAdmin")[0]||ModuleAdmin.consResetEmpSearch("ZPAtt_SPOCUser_AddAdmin",layout,!0),ModuleAdmin.entryViewChange(),ModuleAdmin.currSettId=null,obj){var settingsId=$(obj).attr("id");ModuleAdmin.currSettId=settingsId;var list=ModuleAdmin.settingsList[settingsId];layout.find("#ZPAtt_SPOCSettingsName").val(list.settingsName),layout.find("#ZPAtt_SPOCViewAttEnabled").prop("checked",1===list.viewAttEntry),layout.find("#ZPAtt_SPOCEditAttEnabled").prop("checked",1===list.editAttEntry),layout.find("#ZPAtt_SPOCViewShiftEnabled").prop("checked",1===list.viewShiftMap),layout.find("#ZPAtt_SPOCEditShiftEnabled").prop("checked",1===list.editShiftMap),layout.find("#ZPAtt_SPOCEViewReportEnabled").prop("checked",1===list.viewAttReport),layout.find("#ZPLveEntry_ViewEnabled").length>0&&(layout.find("#ZPLveEntry_ViewEnabled").prop("checked",1===list.viewLvEntry),layout.find("#ZPLveEntry_EditEnabled").prop("checked",1===list.editLvEntry),layout.find("#ZPLveReport_ViewEnabled").prop("checked",1===list.viewLvReport)),layout.find("#ZPTT_EntriesViewEnabled").prop("checked",1===list.viewTTEntries),layout.find("#ZPTT_EntriesEditEnabled").prop("checked",1===list.editTTEntries),layout.find("#ZPTT_ReportViewEnabled").prop("checked",1===list.viewTTReport),ModuleAdmin.entryViewChange();var groupIds=list.groupIds,userIds=list.userIds;if(0!==groupIds.length&&layout.find("#ZPAtt_SPOCGroupsSelect").select2("val",groupIds),0!==userIds.length){var userList=ZPeople.getUserDetailsByIds(userIds,!1),values=[];for(var i in userIds){var id=userIds[i],userDtl=ZPeople.getUserDetailsByIdInList(id,userList);userDtl&&userDtl.name&&values.push({id:id,text:ZPeople.decodeTxt(userDtl.name),html:userDtl.name,photo:userDtl.photo})}layout.find("#ZPAtt_SPOCUser_AddAdmin").select2("data",values)}}}else layout.find("#ZPAtt_SPOCAddSettingsPopup").modal("hide")},groupMappingList:{},currGroupId:null,populateGroupOptions:function(obj,show){var layout=Layout.Page.container;if(show){layout.find("#ZPAtt_SPOCAddGroupPopup").modal("show"),$(".modal-backdrop.in").last().css("z-index","996"),layout.find("#ZPAtt_SPOCGroupName").val(""),layout.find("#ZPAtt_SPOCAddGroupPopup .ERR").remove(),layout.find(".sltd_grpsDv").remove(),layout.find("#ZPAtt_SPOCSelectGrpCrit").parent().show(),layout.find("#ZPAtt_SPOCUser_AppField_user").parent().hide(),ModuleAdmin.currGroupId=null;var groupId,select=layout.find("#ZPAtt_SPOCGroupBasedOn").closest(".slt_grps_rw").find("select");layout.find("#s2id_ZPAtt_SPOCGroupBasedOn")[0]||(select.select2(),layout.find("#ZPAtt_SPOCGroupBasedOn").on("change",function(){ModuleAdmin.consGroupOptions()}),layout.find("#ZPAtt_SPOC_AddApplicable").on("click",function(){ModuleAdmin.addNewCriteria(this)})),layout.find("#ZPAtt_SPOCContOrNotCont").select2("val","0"),layout.find("#ZPAtt_SPOCSelectGrpCrit").select2("val",""),layout.find("#ZPAtt_SPOCUser_AppField_user").select2("val",""),ModuleAdmin.populateApplicableOptions();var divId=$(obj).attr("id");if(void 0!==divId&&"ZPAtt_SPOCAddGroup"!==divId&&(groupId=$(obj).attr("id")),layout.find("#ZPAtt_SPOCGroupBasedOn").select2("val","0"),groupId){ModuleAdmin.currGroupId=groupId;var mappings=ModuleAdmin.groupMappingList[groupId];if(layout.find("#ZPAtt_SPOCGroupName").val(ModuleAdmin.groupsList[groupId]),void 0!==mappings)ModuleAdmin.populateGroupMappings(mappings);else{var param={mode:"getGroupMappings",conreqcsr:csrfToken,groupId:groupId};param.module=ModuleAdmin.getModule(),$.post("/moduleAdminAction.zp",param,function(rdata){var mapp=rdata.groupList;ModuleAdmin.groupMappingList[groupId]=mapp,ModuleAdmin.populateGroupMappings(mapp)})}}}else layout.find("#ZPAtt_SPOCAddGroupPopup").modal("hide")},populateGroupMappings:function(mappings){var layout=Layout.Page.container,appList=mappings.applicableObj,expList=mappings.exceptionObj,appFormField=mappings.appFormFieldObj,expFormField=mappings.expFormFieldObj,formCompOptions=mappings.formCompOptions,mapping={loc:"locOption",dept:"depOption",desg:"desgOption",role:"roleOption",entity:"entityOption",busiUnit:"bUnitOption",division:"divisionOption",user:""},mappingText={loc:ZPI18N.getString("zp.location"),dept:ZPI18N.getString("zp.department"),desg:ZPI18N.getString("zp.designation"),role:ZPI18N.getString("zp.role"),entity:ZPI18N.getString("zp.employeeentity"),busiUnit:ZPI18N.getString("zp.employeeunit"),division:ZPI18N.getString("zp.divisionname"),user:ZPI18N.getString("zp.employee")},crtEle=layout.find(".slt_grps");if(!crtEle.find(".sltd_grpsDv")[0]){var crtParEle="<div class='sltd_grpsDv'><h5>"+ZPI18N.getString("zp.selectedcriteria")+"</h5><div class='sltd_grpsShw'></div>";crtEle.append(crtParEle)}var lookUps=ZPeople.Module.getData().empFormLookUps,empList="",isEmpAppli="";for(var i in appList)"user"!==i?ModuleAdmin.consGroupMapOptions(i,mappingText[i],mapping,appList[i],0):(empList=appList[i],isEmpAppli=0);for(var k in expList)"user"!==k?ModuleAdmin.consGroupMapOptions(k,mappingText[k],mapping,expList[k],1):(empList=expList[k],isEmpAppli=1);for(var j in appFormField){var dipsName=lookUps[j].dispName;ModuleAdmin.formCompFieldOptions[j]=formCompOptions[j],ModuleAdmin.consGroupMapOptions("fFields_"+j,dipsName,mapping,appFormField[j],0,ModuleAdmin.consFormOptions(j,!0))}for(var l in expFormField){dipsName=lookUps[l].dispName;ModuleAdmin.formCompFieldOptions[l]=formCompOptions[l],ModuleAdmin.consGroupMapOptions("fFields_"+l,dipsName,mapping,expFormField[l],1,ModuleAdmin.consFormOptions(l,!0))}""!==empList&&ModuleAdmin.consGroupMapOptions("user",ZPI18N.getString("zp.employee"),mapping,empList,isEmpAppli)},consGroupMapOptions:function(grpBaseVal,grpBaseText,mapping,values,conditionVal,formOptions){var layout=Layout.Page.container,conditionEle=layout.find("#ZPAtt_SPOCContOrNotCont")[0].outerHTML.replace("ZPAtt_SPOCContOrNotCont","ZPAtt_SPOCContOrNotCont_"+grpBaseVal),shows="<div class='slt_grps_rw spc_adDv'>";shows+="<div class='zp-sm-3'><span class='slct_val' id="+grpBaseVal+">"+$("<div/>").text(grpBaseText).html()+"</span></div>",shows+="<div class='zp-sm-3'>"+conditionEle+"</div>";var orText="";if("user"!==grpBaseVal){var mapOpt=AttendanceShift.depLocShiftOptions;grpBaseVal.startsWith("fFields_")?shows+="<div class='zp-sm-3'><select multiple='' tabindex='-1' id='ZPAtt_SPOCSelectGrpCrit_"+grpBaseVal+"'>"+formOptions+"</select></div>":shows+="<div class='zp-sm-3'><select multiple='' tabindex='-1' id='ZPAtt_SPOCSelectGrpCrit_"+grpBaseVal+"'>"+mapOpt[mapping[grpBaseVal]]+"</select></div>"}else shows+="<div class='zp-sm-3'><input type='hidden' multiple='multiple' id='ZPAtt_SPOCUser_AppField_Final'/></div>",0!==layout.find(".sltd_grpsShw").children().length&&(orText="<div class='sltd_OR'>("+ZPI18N.getString("zp.captialor")+")</div>");shows+="<div class='zp-sm-1 text-center'><i class='IC-cls-fill red' onclick=ModuleAdmin.removeCurrEle(this)></i>",shows+="</div>",layout.find(".sltd_grpsShw").append(orText).append(shows);var recentEle=layout.find(".sltd_grpsShw .slt_grps_rw:last-child");recentEle.find("select").select2(),recentEle.find("#ZPAtt_SPOCContOrNotCont_"+grpBaseVal).select2("val",conditionVal),"user"!==grpBaseVal?recentEle.find("#ZPAtt_SPOCSelectGrpCrit_"+grpBaseVal).select2("val",values):(ModuleAdmin.consResetEmpSearch("ZPAtt_SPOCUser_AppField_Final",layout,!0),ModuleAdmin.consGroupMapUsers(values)),layout.find("#ZPAtt_SPOCGroupBasedOn option[value='"+grpBaseVal+"']")[0].remove()},consGroupMapUsers:function(val,showClass,hideClass){var layout=Layout.Page.container,userList=ZPeople.getUserDetailsByIds(val,!1),values=[];for(var i in val){var id=val[i],userDtl=ZPeople.getUserDetailsByIdInList(id,userList);userDtl&&userDtl.name&&values.push({id:id,text:ZPeople.decodeTxt(userDtl.name),html:userDtl.name,photo:userDtl.photo})}layout.find("#ZPAtt_SPOCUser_AppField_Final").select2("data",values)},populateApplicableOptions:function(){var layout=Layout.Page.container,option="<option value=0>"+ZPI18N.getString("zp.groupbasedon",new Array(""))+"</option>";option+="<optgroup label='"+ZPI18N.getString("zp.systemfields")+"'>",option+="<option value='loc'>"+ZPI18N.getString("zp.location")+"</option>",option+="<option value='dept'>"+ZPI18N.getString("zp.department")+"</option>",option+="<option value='desg'>"+ZPI18N.getString("zp.designation")+"</option>",option+="<option value='role'>"+ZPI18N.getString("zp.role")+"</option>",isOrgStructureEnabled&&(option+="<option value='entity'>"+ZPI18N.getString("zp.employeeentity")+"</option>",option+="<option value='busiUnit'>"+ZPI18N.getString("zp.employeeunit")+"</option>",option+="<option value='division'>"+ZPI18N.getString("zp.divisionname")+"</option>"),option+="<option value='user'>"+ZPI18N.getString("zp.employee")+"</option>",option+="</optgroup>",option+="<optgroup label='"+ZPI18N.getString("zp.customefields")+"'>";var moduleData=ZPeople.Module.getData(),formFields=(layout=Layout.Page.container,moduleData.empFormLookUps);for(var i in formFields){var field=formFields[i],dipsName=field.dispName;option+="<option value='fFields_"+field.fcId+"'>"+dipsName+"</option>"}option+="</optgroup>",layout.find("#ZPAtt_SPOCGroupBasedOn").html(option)},consGroupOptions:function(){var layout=Layout.Page.container,mapVal=layout.find("#ZPAtt_SPOCGroupBasedOn").val();if("user"===mapVal)layout.find("#ZPAtt_SPOCSelectGrpCrit").parent().hide(),layout.find("#ZPAtt_SPOCUser_AppField_user").select2("val",""),layout.find("#ZPAtt_SPOCUser_AppField_user").parent().show(),layout.find("#s2id_ZPAtt_SPOCUser_AppField_user")[0]||ModuleAdmin.consResetEmpSearch("ZPAtt_SPOCUser_AppField_user",layout,!0);else if(layout.find("#ZPAtt_SPOCSelectGrpCrit").parent().show(),layout.find("#ZPAtt_SPOCUser_AppField_user").parent().hide(),layout.find("#ZPAtt_SPOCSelectGrpCrit").html("").select2("val",""),mapVal.startsWith("fFields_"))ModuleAdmin.getValueFromEmpLookUp(mapVal.substring("8"));else{var mapOpt=AttendanceShift.depLocShiftOptions;layout.find("#ZPAtt_SPOCSelectGrpCrit").html(mapOpt[{loc:"locOption",dept:"depOption",desg:"desgOption",role:"roleOption",entity:"entityOption",busiUnit:"bUnitOption",division:"divisionOption",user:""}[mapVal]])}},empCrtiDefVal:null,addNewCriteria:function(obj){var layout=Layout.Page.container,grpCrtVal=layout.find("#ZPAtt_SPOCSelectGrpCrit").select2("val"),grpBaseVal=layout.find("#ZPAtt_SPOCGroupBasedOn").select2("val");if(!("user"!==grpBaseVal&&0===grpCrtVal.length||"user"===grpBaseVal&&0===layout.find("#ZPAtt_SPOCUser_AppField_user").select2("val").length)){var thisObj=$(obj),grpBaseText=layout.find("#ZPAtt_SPOCGroupBasedOn option:selected").text(),conditionVal=layout.find("#ZPAtt_SPOCContOrNotCont").select2("val"),conditionEle=layout.find("#ZPAtt_SPOCContOrNotCont")[0].outerHTML.replace("ZPAtt_SPOCContOrNotCont","ZPAtt_SPOCContOrNotCont_"+grpBaseVal),crtEle=thisObj.closest(".slt_grps");if(!crtEle.find(".sltd_grpsDv")[0]){var crtParEle="<div class='sltd_grpsDv'><h5>"+ZPI18N.getString("zp.selectedcriteria")+"</h5><div class='sltd_grpsShw'></div>";crtEle.append(crtParEle)}var shows="<div class='slt_grps_rw spc_adDv'>";if(shows+="<div class='zp-sm-3'><span class='slct_val' id="+grpBaseVal+">"+$("<div/>").text(grpBaseText).html()+"</span></div>",shows+="<div class='zp-sm-3'>"+conditionEle+"</div>","user"!==grpBaseVal)shows+="<div class='zp-sm-3'>"+layout.find("#ZPAtt_SPOCSelectGrpCrit")[0].outerHTML.replace("ZPAtt_SPOCSelectGrpCrit","ZPAtt_SPOCSelectGrpCrit_"+grpBaseVal)+"</div>";else shows+="<div class='zp-sm-3'><input type='hidden' multiple='multiple' id='ZPAtt_SPOCUser_AppField_Final'/></div>";shows+="<div class='zp-sm-1 text-center'><i class='IC-cls-fill red' onclick=ModuleAdmin.removeCurrEle(this)></i>",shows+="</div>";var recentEle="";if("user"!==grpBaseVal?(layout.find(".sltd_grpsShw").prepend(shows),recentEle=layout.find(".sltd_grpsShw .slt_grps_rw:first-child")):(layout.find(".sltd_grpsShw").append(shows),recentEle=layout.find(".sltd_grpsShw .slt_grps_rw:last-child")),1!==layout.find(".sltd_grpsShw").children().length&&layout.find(".sltd_grpsShw #user")[0]&&!layout.find(".sltd_grpsShw .sltd_OR")[0]&&layout.find(".sltd_grpsShw #user").closest(".slt_grps_rw").before("<div class='sltd_OR'>("+ZPI18N.getString("zp.captialor")+")</div>"),recentEle.find("select").select2(),recentEle.find("#ZPAtt_SPOCContOrNotCont_"+grpBaseVal).select2("val",conditionVal),"user"!==grpBaseVal)recentEle.find("#ZPAtt_SPOCSelectGrpCrit_"+grpBaseVal).select2("val",grpCrtVal);else{ModuleAdmin.consResetEmpSearch("ZPAtt_SPOCUser_AppField_Final",layout,!0);var empVals=layout.find("#ZPAtt_SPOCUser_AppField_user").select2("val");ModuleAdmin.consGroupMapUsers(empVals),layout.find("#ZPAtt_SPOCSelectGrpCrit").parent().show(),layout.find("#ZPAtt_SPOCUser_AppField_user").parent().hide()}layout.find("#ZPAtt_SPOCGroupBasedOn option:selected")[0].remove(),layout.find("#ZPAtt_SPOCGroupBasedOn").select2("val","0"),layout.find("#ZPAtt_SPOCContOrNotCont").select2("val","0"),layout.find("#ZPAtt_SPOCSelectGrpCrit").html("").select2("val","")}},removeCurrEle:function(obj){var layout=Layout.Page.container,parent=$(obj).closest(".slt_grps_rw"),id=parent.find(".zp-sm-3 span").attr("id");if(id.startsWith("fFields_")){var field=ZPeople.Module.getData().empFormLookUps[id.substring("8")],dipsName=field.dispName,fcId=field.fcId;layout.find("#ZPAtt_SPOCGroupBasedOn optgroup").eq(1).append("<option value='fFields_"+fcId+"'>"+dipsName+"</option>")}else{var option="";"loc"===id?option="<option value='loc'>"+ZPI18N.getString("zp.location")+"</option>":"dept"===id?option="<option value='dept'>"+ZPI18N.getString("zp.department")+"</option>":"desg"===id?option="<option value='desg'>"+ZPI18N.getString("zp.designation")+"</option>":"role"===id?option="<option value='role'>"+ZPI18N.getString("zp.role")+"</option>":"entity"===id?option="<option value='entity'>"+ZPI18N.getString("zp.employeeentity")+"</option>":"busiUnit"===id?option="<option value='busiUnit'>"+ZPI18N.getString("zp.employeeunit")+"</option>":"division"===id?option="<option value='division'>"+ZPI18N.getString("zp.divisionname")+"</option>":"user"===id&&(option="<option value='user'>"+ZPI18N.getString("zp.employee")+"</option>"),layout.find("#ZPAtt_SPOCGroupBasedOn optgroup").eq(0).append(option)}var clsPar=parent.closest(".sltd_grpsShw");parent.remove(),layout.find(".sltd_grpsShw #user")[0]&&2!==layout.find(".sltd_grpsShw").children().length||layout.find(".sltd_OR").remove(),0===clsPar.children().length&&clsPar.parent().remove()},saveSPOCSettings:function(obj){var layout=Layout.Page.container,settName=layout.find("#ZPAtt_SPOCSettingsName").val().trim(),adminIds=layout.find("#ZPAtt_SPOCUser_AddAdmin").select2("val"),groupIds=layout.find("#ZPAtt_SPOCGroupsSelect").select2("val");if(layout.find("#ZPAtt_SPOCAddSettingsPopup .ERR").remove(),""!==settName)if(0!==adminIds.length)if(0!==groupIds.length){var viewAttEntry=layout.find("#ZPAtt_SPOCViewAttEnabled").is(":checked")?1:0,editAttEntry=layout.find("#ZPAtt_SPOCEditAttEnabled").is(":checked")?1:0,viewShiftMap=layout.find("#ZPAtt_SPOCViewShiftEnabled").is(":checked")?1:0,editShiftMap=layout.find("#ZPAtt_SPOCEditShiftEnabled").is(":checked")?1:0,viewAttReport=layout.find("#ZPAtt_SPOCEViewReportEnabled").is(":checked")?1:0,viewLeaveEntry=0,editLeaveEntry=0,viewLeaveReport=0;layout.find("#ZPLveEntry_ViewEnabled").length>0&&(viewLeaveEntry=layout.find("#ZPLveEntry_ViewEnabled").is(":checked")?1:0,editLeaveEntry=layout.find("#ZPLveEntry_EditEnabled").is(":checked")?1:0,viewLeaveReport=layout.find("#ZPLveReport_ViewEnabled").is(":checked")?1:0);var viewTTEntries=layout.find("#ZPTT_EntriesViewEnabled").is(":checked")?1:0,editTTEntries=layout.find("#ZPTT_EntriesEditEnabled").is(":checked")?1:0,viewTTReport=layout.find("#ZPTT_ReportViewEnabled").is(":checked")?1:0,param={mode:"saveSPOCSetting",conreqcsr:csrfToken,settingsName:settName,groupIds:JSON.stringify(groupIds),adminIds:JSON.stringify(adminIds),viewAttEntry:viewAttEntry,editAttEntry:editAttEntry,viewShiftMap:viewShiftMap,editShiftMap:editShiftMap,viewAttReport:viewAttReport,viewLvEntry:viewLeaveEntry,editLvEntry:editLeaveEntry,viewLvReport:viewLeaveReport,viewTTReport:viewTTReport,viewTTEntries:viewTTEntries,editTTEntries:editTTEntries};ModuleAdmin.currSettId&&(param.settingsId=ModuleAdmin.currSettId),$(obj).attr("disabled","disabled"),param.module=ModuleAdmin.getModule(),$.post("/moduleAdminAction.zp",param,function(rdata){$(obj).removeAttr("disabled"),rdata&&rdata.error&&"adminIdPresent"===rdata.error?layout.find("#ZPAtt_SPOCUser_AddAdmin").after("<span class='ERR MT5'>"+ZPI18N.getString("zp.adminusercannotshiftadmin")+"</span>"):(ModuleAdmin.getSettingsList(),layout.find("#ZPAtt_SPOCAddSettingsPopup").modal("hide"))})}else layout.find("#ZPAtt_SPOCGroupsSelect").after("<span class='ERR MT5'>"+ZPI18N.getString("zp.groupismandat")+"</span>");else layout.find("#ZPAtt_SPOCUser_AddAdmin").after("<span class='ERR MT5'>"+ZPI18N.getString("zp.adminismandat")+"</span>");else layout.find("#ZPAtt_SPOCSettingsName").after("<span class='ERR MT5'>"+ZPI18N.getString("zp.nameismandat")+"</span>")},saveSPOCGroup:function(obj){var layout=Layout.Page.container,gName=layout.find("#ZPAtt_SPOCGroupName").val().trim();if(layout.find("#ZPAtt_SPOCAddGroupPopup .ERR").remove(),""!==gName){var applicableFor={},appForLookUp={},exceptFor={},exceptForLookUp={};if(layout.find(".sltd_grpsShw .slt_grps_rw").each(function(i,ele){var name=(ele=$(ele)).find("span").attr("id"),conts=ele.find("#ZPAtt_SPOCContOrNotCont_"+name).select2("val"),crit=ele.find("#ZPAtt_SPOCSelectGrpCrit_"+name).select2("val");"user"!==name&&0===crit.length||"user"===name&&0===layout.find("#ZPAtt_SPOCUser_AppField_Final").select2("val").length?ZPeople.Message.showWarningMsg(ZPI18N.getString("zp.applicablemandat")):("user"===name&&(crit=layout.find("#ZPAtt_SPOCUser_AppField_Final").select2("val")),name.startsWith("fFields_")?(name=name.substring("8"),"0"===conts?appForLookUp[name]=crit:exceptForLookUp[name]=crit):"0"===conts?applicableFor[name]=crit:exceptFor[name]=crit)}),0!==Object.keys(applicableFor).length||0!==Object.keys(appForLookUp).length||0!==Object.keys(exceptFor).length||0!==Object.keys(exceptForLookUp).length){var param={mode:"saveSPOCGroup",conreqcsr:csrfToken,applicableFor:JSON.stringify(applicableFor),exceptFor:JSON.stringify(exceptFor),appForLookUp:JSON.stringify(appForLookUp),exceptForLookUp:JSON.stringify(exceptForLookUp),groupName:gName},groupId=ModuleAdmin.currGroupId;groupId&&(param.groupId=groupId),$(obj).attr("disabled","disabled"),param.module=ModuleAdmin.getModule(),$.post("/moduleAdminAction.zp",param,function(rdata){$(obj).removeAttr("disabled"),delete ModuleAdmin.groupMappingList[groupId];var grpId=null;layout.find("#ZPAtt_SPOCGroupsList_Popup").hasClass("in")||(grpId=rdata.groupId),ModuleAdmin.getGroupsList(grpId),layout.find("#ZPAtt_SPOCAddGroupPopup").modal("hide")})}else ZPeople.Message.showWarningMsg(ZPI18N.getString("zp.applicablemandat"))}else layout.find("#ZPAtt_SPOCGroupName").after("<span class='ERR MT5'>"+ZPI18N.getString("zp.nameismandat")+"</span>")},getApplData:function(appFor,appForLookUp,type){for(var layout=Layout.Page.container,mapping=["loc","dept","desg","role","entity","busiUnit","division","user"],appclass=type?"AppField":"ExpField",mapLen=mapping.length,i=0;i<mapLen;i++){var applArr,field=mapping[i];0!==(applArr=i===mapLen-1?layout.find("#ZPAtt_SPOCUser_"+appclass+"_user").select2("val"):layout.find("#ZPAtt_SPOC_"+field+"_"+appclass+" select").select2("val")).length&&(appFor[mapping[i]]=applArr)}layout.find("div[id*=ZPAtt_lookUp_"+appclass+"] select").each(function(i,ele){var val=(ele=$(ele)).select2("val");if(0!==val.length){var fcId=ele.attr("name");appForLookUp[fcId]=val}})},switchApplicable:function(obj){var layout=Layout.Page.container;$(obj).addClass("active").siblings().removeClass("active"),"ZPAtt_SPOCHeadAppli"===obj.id?(layout.find("#ZPAtt_SPOCApplicables").removeClass("DN"),layout.find("#ZPAtt_SPOCExceptions").addClass("DN")):(layout.find("#ZPAtt_SPOCApplicables").addClass("DN"),layout.find("#ZPAtt_SPOCExceptions").removeClass("DN"))},settingsList:null,getSettingsList:function(){var layout=Layout.Page.container,param={mode:"getAllSPOCSettings",conreqcsr:csrfToken};param.module=ModuleAdmin.getModule(),null===ModuleAdmin.settingsList&&layout.find("#ZPAtt_SPOCSettingsList").append(ZPeople.LOADING_HTML),$.post("/moduleAdminAction.zp",param,function(rdata){layout.find("#ZPAtt_SPOCSettingsList #zp_page_loading").remove(),ModuleAdmin.settingsList=rdata.settingsList,ModuleAdmin.consSettingsList()})},consSettingsList:function(){var layout=Layout.Page.container,list=ModuleAdmin.settingsList,tableCont=layout.find("#ZPAtt_SPOCSettingsTable");if(0===Object.keys(list).length){layout.find("#ZPAtt_SPOCSettingsList .spoc_cnt").hide();var emptyMsg=layout.find("#ZPAtt_SPOCSettingsemptyRecInfo").show();return 0===emptyMsg.find("i").eq(0).children().length&&ModuleAdmin.noDataImg(8,"CR-at-shift-cal",emptyMsg.find("i").eq(0)),void tableCont.html("")}layout.find("#ZPAtt_SPOCSettingsList .spoc_cnt").show(),layout.find("#ZPAtt_SPOCSettingsemptyRecInfo").hide();var cont="<tbody class='CP'>";for(var i in list){var settings=list[i];cont+="<tr id='"+i+"' onclick=ModuleAdmin.populateSettingsOptions(true,this)>",cont+="<td width='20%'><b>"+$("<div/>").text(settings.settingsName).html()+"</b></td>",cont+="<td width='20%'>";var userDet=settings.users;for(var k in userDet){if(cont+="<div class='zpusImg'><img class='img-26' src='"+(det=userDet[k]).empPhoto+"'>",cont+="<div class='zpusImg_nme'><span><b>"+$("<div/>").text(det.empId).html()+" - </b> "+$("<div/>").text(det.empName).html()+"</span></div></div>","1"===k&&void 0!==userDet[parseInt(k)+1]){cont+="<span class='DB'>  + "+(Object.keys(userDet).length-2)+" "+ZPI18N.getString("zp.more")+"</span>";break}}cont+="</td>",cont+="<td width='20%'>";var groupDet=settings.groups;for(var l in groupDet){var det=groupDet[l];if(cont+="<span class='grp_tg'>"+$("<div/>").text(det.groupName).html()+"</span>","1"===l&&void 0!==groupDet[parseInt(l)+1]){cont+="<span class='DB'>  + "+(Object.keys(groupDet).length-2)+" "+ZPI18N.getString("zp.more")+"</span>";break}}cont+="</td>",cont+="<td width='20%'><div class='crd_actns'><i class='CR-ed-pen MR10'></i><i class='CR-ed-delete' onclick=ModuleAdmin.delSettPopup(this,event)></i></div></td>"}tableCont.html(cont)},entryViewChange:function(){var layout=Layout.Page.container,editButt=layout.find("#ZPAtt_SPOCEditAttEnabled");editButt.prop("disabled",!1),layout.find("#ZPAtt_SPOCViewAttEnabled").is(":checked")||(editButt.prop("checked",!1),editButt.prop("disabled",!0));var editSButt=layout.find("#ZPAtt_SPOCEditShiftEnabled");editSButt.prop("disabled",!1),layout.find("#ZPAtt_SPOCViewShiftEnabled").is(":checked")||(editSButt.prop("checked",!1),editSButt.prop("disabled",!0))},delSettPopup:function(obj,event){event.stopPropagation();var popup=$("#confirmationPopup");popup.modal({backdrop:"static",keyboard:!1});var popupConf=$("#confirmConfirmationPopup"),popupCancel=$("#cancelConfirmationPopup");popupConf.removeClass("btn-primary").addClass("btn-danger"),popupConf.html("").append(ZPI18N.getString("zp.delete")),$("#textConfirmationPopupBody").html(ZPI18N.getString("zp.deleteshiftadminconfirmmsg")),popupConf.unbind("click").click(function(event){ModuleAdmin.deleteSettings(obj)}),popupCancel.unbind("click").click(function(event){popup.modal("hide")})},deleteSettings:function(obj){var settId=$(obj).closest("tr").attr("id"),param={mode:"deletSPOCSetting",conreqcsr:csrfToken,settingsId:settId};param.module=ModuleAdmin.getModule(),$.post("/moduleAdminAction.zp",param,function(){$("#"+settId).remove(),delete ModuleAdmin.settingsList[settId];var layout=Layout.Page.container;if(0===Object.keys(ModuleAdmin.settingsList).length){layout.find("#ZPAtt_SPOCSettingsList .spoc_cnt").hide();var emptyMsg=layout.find("#ZPAtt_SPOCSettingsemptyRecInfo").show();0===emptyMsg.find("i").eq(0).children().length&&ModuleAdmin.noDataImg(8,"CR-at-shift-cal",emptyMsg.find("i").eq(0))}})},groupsList:null,getGroupsList:function(groupId){var layout=Layout.Page.container,param={mode:"getAllSPOCGroups",conreqcsr:csrfToken};param.module=ModuleAdmin.getModule(),$.post("/moduleAdminAction.zp",param,function(rdata){var groupList=rdata.groupList;ModuleAdmin.groupsList=groupList;var listkeys=Object.keys(groupList),selectHtml="",html='<div class="zp-sm-4" onclick="ModuleAdmin.populateGroupOptions(this,true);"><div class="spoc_Crd ad_grp CP"><div class="add_admn"><span class="CR-addemp S22"><span class="path1"></span><span class="path2"></span></span>';for(var key in html+='<h5 class="S14">'+ZPI18N.getString("zp.addshiftgroup")+' </h5></div><p class="">'+ZPI18N.getString("zp.spocgroupconfigdesc")+"</p></div></div>",listkeys){var value=listkeys[key];html+='<div class="zp-sm-4" onclick="ModuleAdmin.populateGroupOptions(this,true);" id="'+value+'"><div class="spoc_Crd grp CP"><div class="grp_tit">'+$("<div/>").text(groupList[value]).html()+'</div><div class="grp_crd_actns">',html+='<i class="IC-pen MR10 FR"></i><i class="IC-delete FR" onclick=ModuleAdmin.showHideSPOCGroupDel(this,true,event)></i></div></div></div>',selectHtml+="<option value='"+value+"'>"+$("<div/>").text(groupList[value]).html()+"</option>"}$("#page-wrapper").find("#ZPAtt_SPOCGroupsList").html(html);var groupsSelect=layout.find("#ZPAtt_SPOCGroupsSelect"),groupsSelectVal=groupsSelect.select2("val");groupsSelect.html(selectHtml),groupId&&groupsSelectVal.push(groupId),groupsSelect.select2("val",groupsSelectVal)})},showHideSPOCGroupDel:function(obj,show,event){event.stopPropagation();var parent=$(obj).closest(".spoc_Crd");if(show){parent.addClass("dlt_opt");var confMsg='<div class="zp_popdete" onclick=ModuleAdmin.delLayClick(event)><div class="zp_popdetebx"><span>'+ZPI18N.getString("zp.deleteshiftgroupconfirmmsg")+"</span>";confMsg+='<a class="zp_popdetecf" onclick=ModuleAdmin.delSPOCGroup(this,event)>Confirm</a><a class="zp_popdetecl" onclick=ModuleAdmin.showHideSPOCGroupDel(this,false,event)>Cancel</a></div></div>',parent.append(confMsg)}else parent.removeClass("dlt_opt"),parent.children().last().remove()},delSPOCGroup:function(obj,event){event.stopPropagation();var layout=Layout.Page.container,parent=$(obj).closest(".zp-sm-4"),groupId=parent.attr("id"),param={mode:"deletSPOCGroup",conreqcsr:csrfToken,groupId:groupId};param.module=ModuleAdmin.getModule(),$.post("/moduleAdminAction.zp",param,function(rdata){parent.remove();var groupsSelect=layout.find("#ZPAtt_SPOCGroupsSelect"),groupsSelectVal=groupsSelect.select2("val");layout.find("#ZPAtt_SPOCGroupsSelect option[value='"+groupId+"']").remove();var index=groupsSelectVal.indexOf(groupId);index>-1&&groupsSelectVal.splice(index,1),groupsSelect.select2("val",groupsSelectVal)})},delLayClick:function(event){event.stopPropagation()},consResetEmpSearch:function(id,layout,construct,reset){var eleId="#"+id,searchJson=layout.find(eleId).data("searchJson");construct&&!searchJson&&(ModuleAdmin.changeinputtoselect2(id,layout[0].id),searchJson=layout.find(eleId).data("searchJson")),reset&&searchJson&&ZPComponents.Search.reset(searchJson,!0)},noDataImg:function(path,imgClass,container){path=void 0!==path&&path>0?path:8;for(var nodata="<i class="+imgClass+">",i=1;i<=path;i++)nodata+='<i class="path'+i+'"></i>';nodata+="</i>",container.html(nodata)},changeinputtoselect2:function(elementId,parentId,initialSelection){var tabName="SHIFT",defaultValue=ZPI18N.getString("zp.searchemployee");"ZPAtt_SPOCUser_AddAdmin"===elementId&&(tabName="SHIFT_ADMIN");var obj={id:elementId,inpFormat:"select",initCurrentUser:!1,type:1,limit:10,isMultiple:!0,searchMode:"ATTENDANCE_"+tabName,searchType:"emp",placeHolder:defaultValue,initDefaultValues:!0};void 0!==initialSelection&&(obj.initialSelection=initialSelection),"ZPAtt_SPOCUser_AppField_Final"===elementId&&null!==ModuleAdmin.empCrtiDefVal&&((obj=ModuleAdmin.empCrtiDefVal).initDefaultValues=!1,obj.needScrolledValues=!0),ZPComponents.Search.create(obj)},openLearnMore:function(module){if(void 0!==module){var href="https://www.zoho.com/people/help/adminguide/";"leave"==module?href+="leavemoduleadmin.html":"attendance"==module?href+="attendancemoduleadmin.html":"timetracker"==module&&(href+="timesheetmoduleadmin.html"),window.open(href)}}};var Integration={ZP_PAGE_LOADING:'<div class="ctable" id="zp_page_loading"><div class="ctcell"><div class="loader-inner line-scale"><div></div><div></div><div></div><div></div><div></div></div></div></div>',apiInteg:{},formsList:[]};Integration.apiInteg.apiReferencecallbackInit=function(otherDetails){Layout.Page.container.append(Integration.ZP_PAGE_LOADING),ZPeople.Request.send("/apiref.zp",{method:"getFormsAndComponentsListForApi",mode:"forms"},Integration.apiInteg.apiRefcallback,otherDetails)},Integration.apiInteg.apiRefcallback=function(resultData,params,otherDetails){var pageId=Layout.Page.container,formsListObj=resultData.formsList;Integration.formsList=formsListObj;var formsListElm="";$.each(formsListObj,function(index,obj){formsListElm+=Integration.apiInteg.constructFormListElms(obj)}),pageId.find("div#zp_page_loading").remove(),pageId.find("ul#formsList").html(formsListElm),void 0!=otherDetails&&"fromAutomation"==otherDetails&&deluge.rearrangeFormsList(pageId)},Integration.apiInteg.constructFormListElms=function(formsList){var formsListElms='<li class="list-group-item" id="getForms'+formsList.formId+'">';return formsListElms+='<div class="form-group"><b class="IC-ar-rgt" onclick=Integration.apiInteg.getFormComponents(this,"'+formsList.formId+'","'+formsList.tableName+'")></b><span class="ZPbold">'+formsList.dispName+"</span><em>"+formsList.compName+"</em>",formsListElms+='<div class="dvswitch"> <a title="" class="ZPtitle" data-original-title="Copy"><span class="IC-copy" onclick=ZPeople.copyTxtToClipBoard("'+formsList.compName+'") linkNm = "'+formsList.compName+'"></span></a><input type="text" class="valselect" id="clipCopylist" value="'+formsList.compName+'"/></div>',formsListElms+="</div>",formsListElms+="</li>"},Integration.apiInteg.getFormComponents=function(thisObj,formId,tableName){var pageId=Layout.Page.container,fieldGrpElms=$(thisObj).closest("li#getForms"+formId);fieldGrpElms.find("ul[name='fieldGrp']").length>0?(pageId.find(fieldGrpElms.find("ul[name='fieldGrp']")).toggleClass("DN"),fieldGrpElms.find("ul[name='fieldGrp']").is(":visible")?fieldGrpElms.find("b.IC-ar-rgt").attr("class","IC-ar-dwn"):fieldGrpElms.find("b.IC-ar-dwn").attr("class","IC-ar-rgt")):ZPeople.Request.send("/getFormComponentsForAPI.zp",{method:"getFormsAndComponentsListForApi",formId:formId,tableName:tableName,mode:"fields"},Integration.apiInteg.fetcCompCallBack)},Integration.apiInteg.fetcCompCallBack=function(data,getFormId){var formCompListElm="",formGrpElm=Layout.Page.container.find("li#getForms"+getFormId.formId);formGrpElm.find("ul[name='fieldGrp']").length<=0&&Object.keys(data).length>0&&$.each(data.formComponents,function(index,formCompObj){Object(formCompObj.tabularSections).length>0?$.each(formCompObj.tabularSections,function(tabSecIndex,tabularectionsObj){$.each(tabularectionsObj,function(tabSectionName,content){"object"==typeof content&&$.each(content,function(tableFieldsIndex,formCompOfTableSecObj){formCompListElm+=Integration.apiInteg.constructFormComponentsElm(formCompOfTableSecObj)})})}):formCompListElm+=Integration.apiInteg.constructFormComponentsElm(formCompObj)}),formGrpElm.append(formCompListElm),formGrpElm.find("b.IC-ar-rgt").attr("class","IC-ar-dwn")},Integration.apiInteg.constructFormComponentsElm=function(dataObj){var formCompsElm='<ul name="fieldGrp">';return formCompsElm+="<li>",formCompsElm+='<div class="form-group"> <span>'+dataObj.displayname+"</span><em>"+dataObj.labelname+"</em>",formCompsElm+='<div class="dvswitch"> <a title="" class="ZPtitle" data-original-title="Copy"><span class="IC-copy" onclick=ZPeople.copyTxtToClipBoard("'+dataObj.labelname+'") linkNm = "'+dataObj.labelname+'"></span></a><input type="text" class="valselect" id="clipCopyelm" value="'+dataObj.labelname+'"/></div>',formCompsElm+="</div>",formCompsElm+="</li>",formCompsElm+="</ul>"};