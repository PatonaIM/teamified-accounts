!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var r=t();for(var n in r)("object"==typeof exports?exports:e)[n]=r[n]}}(self,(function(){return(()=>{"use strict";var t,r={r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},n={};r.r(n),t=function(){var e=void 0;function t(e){let t={};if(!e)return t;let r=!e.responseStart||e.responseStart<=0?e.fetchStart:e.responseStart,n=0===e.requestStart?e.fetchStart:e.requestStart;return t.redirectionTime=parseFloat(e.redirectEnd-e.redirectStart).toFixed(2),t.dnsTime=parseFloat(e.domainLookupEnd-e.domainLookupStart).toFixed(2),t.tcpTime=parseFloat(e.connectEnd-e.connectStart).toFixed(2),t.connectionTime=parseFloat(e.connectStart>0&&n-e.connectStart>0?n-e.connectStart:e.connectEnd-e.connectStart).toFixed(2),t.backendTime=parseFloat(r-n).toFixed(2),t.downloadTime=r>0&&e.responseEnd-r>0?parseFloat(e.responseEnd-r).toFixed(2):"0.00",t.networkTime=parseFloat(parseFloat(t.redirectionTime)+parseFloat(t.dnsTime)+parseFloat(t.connectionTime)+parseFloat(t.downloadTime)).toFixed(2),t.ttfbTime=e.responseStart>0&&e.fetchStart>0?parseFloat(e.responseStart-e.fetchStart).toFixed(2):parseFloat(parseFloat(t.backendTime)+parseFloat(t.networkTime)-parseFloat(t.downloadTime)).toFixed(2),e.domComplete&&e.domContentLoadedEventStart?(t.docrenderingTime=parseFloat(e.domComplete-e.domContentLoadedEventStart).toFixed(2),t.pagerenderingTime=parseFloat(e.loadEventEnd>0&&e.loadEventStart>0?e.loadEventEnd-e.loadEventStart:0).toFixed(2)):t.docrenderingTime=t.pagerenderingTime="0.00",t.frontendTime=parseFloat(parseFloat(t.docrenderingTime)+parseFloat(t.pagerenderingTime)).toFixed(2),t.firstrequestTime=parseFloat(e.responseEnd-e.fetchStart).toFixed(2),t.domcontentloaded=parseFloat(e.domContentLoadedEventStart).toFixed(2),t.secondroundtripTime=parseFloat(t.domcontentloaded-t.firstrequestTime).toFixed(2),t.dominteractive=parseFloat(e.domInteractive).toFixed(2),t.totalTime=parseFloat(e.duration).toFixed(2),t.pageloadtype=e.type||e.initiatorType||e.entryType,t.size=e.encodedBodySize||0,t.url=e.name,t.responseStatus=null!=e.responseStatus?e.responseStatus:200,t.redirectionTime="NaN"==t.redirectionTime?"0.00":t.redirectionTime,t.dnsTime="NaN"==t.dnsTime?"0.00":t.dnsTime,t.tcpTime="NaN"==t.tcpTime?"0.00":t.tcpTime,t.connectionTime="NaN"==t.connectionTime?"0.00":t.connectionTime,t.backendTime="NaN"==t.backendTime?"0.00":t.backendTime,t.downloadTime="NaN"==t.downloadTime?"0.00":t.downloadTime,t.networkTime="NaN"==t.networkTime?"0.00":t.networkTime,t.ttfbTime="NaN"==t.ttfbTime?"0.00":t.ttfbTime,t.docrenderingTime="NaN"==t.docrenderingTime?"0.00":t.docrenderingTime,t.pagerenderingTime="NaN"==t.pagerenderingTime?"0.00":t.pagerenderingTime,t.frontendTime="NaN"==t.frontendTime?"0.00":t.frontendTime,t.firstrequestTime="NaN"==t.firstrequestTime?"0.00":t.firstrequestTime,t.domcontentloaded="NaN"==t.domcontentloaded?"0.00":t.domcontentloaded,t.secondroundtripTime="NaN"==t.secondroundtripTime?"0.00":t.secondroundtripTime,t.dominteractive="NaN"==t.dominteractive?"0.00":t.dominteractive,t.totalTime="NaN"==t.totalTime?"0.00":t.totalTime,t}function r(e,r){e.getEntries().forEach((e=>{if(e.name&&e.name.includes("clientmetricslog?logtype=clientmetrics"))return;let r,n=t(e);r="undefined"!=typeof performance&&performance.timeOrigin?performance.timeOrigin:(new Date).getTime();let a=r+Number(n.totalTime);n.startTime=r,n.endTime=a,n.type="live_resource_clientmetrics",this.callback(n)}))}return{startPerformaceObserver:function(t){"function"==typeof t&&"undefined"!=typeof PerformanceObserver&&(e=new PerformanceObserver(r.bind({callback:t}))).observe({entryTypes:["resource"]})},stopPerformaceObserver:function(){void 0!==e&&e.disconnect()},getInitialLoadData:function(){let e={};if("undefined"==typeof performance||!performance.getEntries)return;e=t(performance.getEntries()[0]);let r={...e};return r.time=performance.timeOrigin+e.perfEntries.startTime,r.type="initial_load_clientmetrics",r},getWebStats:function(){let e={};e.domain=location.host;var t=navigator.connection||navigator.mozConnection||navigator.webkitConnection||navigator.msConnection;return e.connectionType=t?t.effectiveType:"",navigator.deviceMemory?e.devicememory=navigator.deviceMemory+"":e.devicememory="",e.userAgent=navigator.userAgent,e.screenResolution=window.screen.width+"x"+window.screen.height,e}}}();var a={sessions:[],currentSession:void 0,customTracking:{}},o=!1;function i(e){a.customTracking=e}function s(e){return a.customTracking[e]}function u(){return o}function c(e){Tt=!0,Tt="null"!=localStorage.getItem("currentBlobId"),a.sessions.push(e),a.currentSession=e;var r={type:"Session",category:"message internal",data:JSON.stringify(a.currentSession)};r=Qe({timestamp:$e()},r),(It=[]).push(r),t.startPerformaceObserver(y)}function l(){Tt=!1,t.stopPerformaceObserver();var e=It;return It=[],e.slice(0)}function m(){Tt=!1}function d(){Tt=!0}function p(){}function g(){var e=localStorage.getItem("videoStatus");if("recording"===e||"pause"===e){var t=localStorage.getItem("currentRecOrgId"),r=pe().zgid;if((r=parseInt(r))!=(t=parseInt(t))&&!isNaN(r))return murphy.endRemoteSession(),murphy.recording.removeRecorder(),"sessionExists"}}function f(){for(var e=["initiateScreenRecording","getTimeEllapsed","clearRecordedContent","destroyRecorder","getRecordUrl","sendRecording","isInitialised","isRecordingTab","retainMaskElements","recorderState","showMurphyRecorderTour","closeMurphyRecorderTour","getModuleId","uploadedDataHandler","getUploadedFiles","deleteWritetousUploadedFiles","deleteElement","fileNameCheck","clearDrawnElements","getVideoSize","getVideoType","urlChange","removeRecorder","recInitInOtherOrgs"],t=0;t<e.length;t++)window.murphy.recording[e[t]]=window.murphy.videoInstance[e[t]].bind(window.murphy.videoInstance)}function h(){for(var e=["getTimeEllapsed","clearRecordedContent","destroyRecorder","getRecordUrl","sendRecording","isInitialised","isRecordingTab","retainMaskElements","recorderState","showMurphyRecorderTour","closeMurphyRecorderTour","getModuleId","uploadedDataHandler","getUploadedFiles","deleteWritetousUploadedFiles","deleteElement","fileNameCheck","clearDrawnElements","getVideoSize","getVideoType","urlChange","removeRecorder","recInitInOtherOrgs"],t=0;t<e.length;t++)window.murphy.recording[e[t]]=p}function y(e){Tt&&(e.timeEllapsed=window.murphy.recording.getTimeEllapsed(),e.category="perfEntries",delete e.firstrequestTime,delete e.secondroundtripTime,delete e.docrenderingTime,delete e.domcontentloaded,delete e.dominteractive,delete e.frontendTime,delete e.pagerenderingTime,It.push(e))}class v extends Error{constructor(e){super(e),this.name="RageRequestError"}}class b extends Error{constructor(e){super(e),this.name="RageFetchRequestError"}}class S extends Error{constructor(e){super(e),this.name="RageClickError"}}var T,_=function(e){var t,r,n,a=window,o=a.location,i=document,u=o.href,c=[],l=[],m={},d={},p=e,g=["click","focus","change","keypress"],f=["type","name","title","alt","lt-prop-dp","data-zcqa","lt-prop-route"];function h(e){function t(e){"id"!=e.name&&"class"!=e.name&&(c[e.name]=e.value,l.push(e.name))}function r(e){o.test(e)&&(i=Ae(i=c[e]))&&-1==m.indexOf(e)&&(m.push(e),u.push("["+e+'="'+i+'"]'))}var n,a,o,i,s,u=[],c={},l=[],m=[];if(!e||!e.tagName)return"";if(u.push(e.tagName.toLowerCase()),e.id&&u.push("#"+e.id),(n=e.className)&&ze(n)){var d=(a=n.split(/\s+/)).length;for(s=0;s<d;s++)u.push("."+a[s])}var p=f.length;for(s=0;s<p;s++)Xe(o=f[s])?(l.length<=0&&e.attributes.forEach(t),l.find(r)):(i=Ae(i=e.getAttribute(o)))&&-1==m.indexOf(o)&&(m.push(o),u.push("["+o+'="'+i+'"]'));return u.join("")}function y(e){var t,r=200,n=[],a=0,o=0,i=" > ".length;for(Tt&&(r=400);e&&a++<4&&!("html"===(t=h(e))||a>1&&o+n.length*i+t.length>=r);)n.push(t),o+=t.length,e=e.parentNode;return n.reverse().join(" > ")}function T(e){if(We(e)){if(("xhr"===e.category||"roguexhr"===e.category)&&e.data.url){var t=Me(e.data.url,100);e.data.url=t}if("fetch"===e.category){t=Me(e.requestedUrl,100);e.requestedUrl=t;t=Me(e.url,100);e.url=t}if("rogueFetch"===e.category){t=Me(e.data.url,100);e.data.url=t}}var n=Qe({timestamp:$e()},e);if(n.bubbled)return n;if(Tt&&void 0!==window.murphy.recording&&(n.timeEllapsed=window.murphy.recording.getTimeEllapsed(),n.location=window.location.href,It.push(n)),"Custom Track"==e.type){var a=c.length;"rageClick"==e.category&&0!=a&&"rageClick"==c[a-1].category&&c[a-1].message==e.message?(c[a-1].count++,c[a-1].rageClickTimestamps instanceof Array||(c[a-1].rageClickTimestamps=[]),c[a-1].rageClickTimestamps.push((new Date).getTime())):c.push(n)}else{var o=Ye(r)?r(n):n;o&&c.push(o)}return c.length>p&&("InitLoadPerfEntry"==c[0].category?c.splice(1,1):c.shift()),n}function _(e,t,r,n){if(null!=e){var a=e[t];e[t]=r(a),e[t].__murphy__=!0,e[t].__orig__=a,n&&n.push([e,t,a])}}function I(e){if(e){var t;try{t=e.type}catch(e){return}return"keypress"===t?w(e):E(e)}}var E=function(e){var r,n,a,o=e.type;t=null;try{n=y(e.target)}catch(e){n="<unknown>"}try{a=y(e.currentTarget)}catch(e){a="<unknown>"}if(""!=n&&!n.includes("murphy")&&-1!=g.indexOf(e.type)){if(m.target==n&&m.evtName==o&&"click"!=o)return(m={}).timeStamp=e.timeStamp,m.target=n,void(m.evtName=o);if(""!=n&&!n.includes("murphy")&&-1!=g.indexOf(e.type)&&"click"!=o)return T({category:"user."+o,message:n,division:"userEvents",isTrusted:e.isTrusted}),(m={}).timeStamp=e.timeStamp,m.target=n,void(m.evtName=o);if(u=n+" : "+a,"click"==o&&d.target==n){if((r=2===e.detail?0:e.timeStamp-d.timeStamp)>=35&&r<he.rageClick.timeInterval){if(d.timeStamp=e.timeStamp,d.crumb.rageClick=!0,null==d.crumb.rageCount?d.crumb.rageCount=2:d.crumb.rageCount++,d.timeStamp=e.timeStamp,d.crumb.rageCount>=he.rageClick.tokenLimit){var i=new S;i.message=d.crumb.message,i.type="rogueClick",murphy.addCustomTracking({category:"rageClick",count:d.crumb.rageCount,message:d.crumb.message}),he.rageClick.enable&&murphy.error(i)}return void(m=d)}r>=he.rageClick.timeInterval&&(d.crumb.rageCount=void 0)}if(n==a)if(n==m.target&&o==m.evtName)m.timeStamp=e.timeStamp;else{var s=T({category:"user."+o,message:n+"+ "+a,division:"userEvents",isTrusted:e.isTrusted});(m={}).crumb=s}else if(n==m.target&&o==m.evtName){if((r=e.timeStamp-m.timeStamp)>=0&&r<25){var u=n+" : "+a;if(null==m.crumb.bubble)m.crumb.bubble=[];else{for(var c=m.crumb.bubble.length,l="user."+o+u,p=0;p<c;p++)if(l==m.crumb.bubble[p].category+m.crumb.bubble[p].message)return void(f=!0);if(f)return}return s=T({category:"user."+o,message:u,division:"userEvents",bubbled:!0,isTrusted:e.isTrusted}),void m.crumb.bubble.push(s)}}else{if("click"==o&&(r=e.timeStamp-d.timeStamp)>=0&&r<=35){var f=!1;if(l="user."+o+u,null==d.crumb.bubble)d.crumb.bubble=[];else for(c=d.crumb.bubble.length,p=0;p<c;p++)if(l==d.crumb.bubble[p].category+d.crumb.bubble[p].message){f=!0;break}if(f)return;return s=T({category:"user."+o,message:u=n+" : "+a,division:"userEvents",bubbled:!0,isTrusted:e.isTrusted}),void d.crumb.bubble.push(s)}s=T({category:"dummyBaseuser."+o,message:n,division:"userEvents",isTrusted:e.isTrusted}),(m={}).crumb=s,m.crumb.bubble=[],s=T({category:"user."+o,message:n+" : "+a,division:"userEvents",bubbled:!0,isTrusted:e.isTrusted}),m.crumb.bubble.push(s)}m.timeStamp=e.timeStamp,m.target=n,m.evtName=o,"click"==o&&(d=m)}},w=function(e){var r;try{r=e.target}catch(e){return}var n=r&&r.tagName;if(n&&("INPUT"===n||"TEXTAREA"===n||r.isContentEditable)){var a=t;a||E(e),clearTimeout(a),t=setTimeout((function(){t=null}),5e3)}};function k(e){var t=a[e]&&a[e].prototype;t&&t.hasOwnProperty&&t.hasOwnProperty("addEventListener")&&(_(t,"addEventListener",(function(e){return function(t,r,n,a){return e.call(this,t,function(e,t){if(e&&e.__murphy__)return e.__murphy_wrapped;if(!Ye(e))return e;function r(){try{t&&Ye(t)&&t.apply(this,arguments)}catch(e){}return e.apply(this,arguments)}for(var n in e)Ve(e,n)&&(r[n]=e[n]);return r.prototype=e.prototype,e.__murphy__=!0,e.__murphy_wrapped=r,r.__orig__=e,r}(r,I),n,a)}}),l),_(t,"removeEventListener",(function(e){return function(t,r,n,a){return r&&r.__murphy__?e.call(this,t,r.__murphy_wrapped,n,a):e.call(this,t,r,n,a)}}),l))}for(var x=["EventTarget"],R=x.length,O=0;O<R;O++)k(x[O]);function q(e,t){var r=Be(o.href),n=Be(t),a=Be(e);if(e!==t){window.murphy.recording.isInitialised()&&window.murphy.recording.urlChange(),u=t,r.protocol===n.protocol&&r.host===n.host&&(t=n.relative),r.protocol===a.protocol&&r.host===a.host&&(e=a.relative);var i=Me(e);T({category:"navigation",data:{to:Me(t),from:i}})}}i.addEventListener("click",E,!1),i.addEventListener("keypress",w,!1);var C=a.XMLHttpRequest&&a.XMLHttpRequest.prototype;function D(e){var t;if(e&&e instanceof FormData)for(var r of e.values()){if("object"==typeof r&&r.constructor===Object)r=JSON.stringify(dummy);else if(r instanceof File){let e={};e.filename=r.name,e.size=r.size,e.type=r.type,r=JSON.stringify(e)}else if(r instanceof Blob){let e={};e.size=r.size,e.type=r.type,r=JSON.stringify(e)}else"string"!=typeof r&&(r=r.toString());t=t?t+r:""+r}else e&&e.constructor===Object?t=JSON.stringify(e):e&&"string"!=typeof e?t=e.toString():e&&"string"==typeof e&&(t=e);return t}if(_(C,"open",(function(e){return function(t,r){return this.__murphy_xhr&&this.__murphy_xhr.isListenerAttached?this.__murphy_xhr={method:t,url:r,status_code:null,startimestamp:$e(),isListenerAttached:!0}:this.__murphy_xhr={method:t,url:r,status_code:null,startimestamp:$e()},this.__murphy_xhr.async=arguments[2],e.apply(this,arguments)}}),l),_(C,"setRequestHeader",(function(e){return function(t,r){if(Tt){this.__murphy_xhr=this.__murphy_xhr||{},this.__murphy_xhr.reqHeaders=this.__murphy_xhr.reqHeaders||{};var n={};n[t]=r,n=at(n,t),this.__murphy_xhr.reqHeaders=Qe(this.__murphy_xhr.reqHeaders,n)}return e.apply(this,arguments)}}),l),_(C,"send",(function(e){return function(){var t=this;if(null==t.__murphy_xhr)return e.apply(this,arguments);var r=arguments[0];!t.__murphy_xhr.url.startsWith("https://")&&t.requestURL&&t.requestURL.startsWith("https://")&&(t.__murphy_xhr.url=t.requestURL);var n=!1;if(he.rageRequest.enable){for(var a=0;a<he.rageRequest.regexPatternToExclude.length&&!(n=he.rageRequest.regexPatternToExclude[a].test(t.__murphy_xhr.url));a++);n||i.call(this)}function o(){if(t.__murphy_xhr&&4===t.readyState){window.murphy.recording.isInitialised()&&window.murphy.recording.retainMaskElements();try{Tt&&(s("stripXhrResponse")||(t.__murphy_xhr.response=t.response),t.__murphy_xhr.respHeaders=nt(t.getAllResponseHeaders())),t.__murphy_xhr.hasOwnProperty("roguexhrInfo")||(t.__murphy_xhr.timeTaken=$e()-t.__murphy_xhr.startimestamp,t.__murphy_xhr.status_code=t.status,t.__murphy_xhr.url!=he.logUrl&&T({type:"http",category:"xhr",data:t.__murphy_xhr}))}catch(e){}}}function i(){var e=this.__murphy_xhr,t=c.call(this,r),n=ge.checkLimit(t.messageKey);n.urlInfo;if(n?.result>0&&this.__murphy_xhr.url!=he.logUrl){var a=new v;if(t.queryParams&&t.payload){var o=Pe(t.queryParams,900);a.queryParams=o,a.payload=t.payload,this.__murphy_xhr.roguexhrInfo="REQ_WITH_SAME_payLoad&queryParams"}else if(t.queryParams){o=Pe(t.queryParams,900);a.queryParams=o,this.__murphy_xhr.roguexhrInfo="REQ_WITH_SAME_queryParams"}else t.payload&&(this.__murphy_xhr.roguexhrInfo="REQ_WITH_SAME_payLoad");var i=e.url.split("?")[0],s=he.rageRequest.apiBasePath,u=i.split("/"+s+"/");i=u[0]!=i?(i=s+"/"+u[1]).split("/").map((function(e,t){var r=/(v(?:\d+\.?\d*))/.test(e);return r||(e=e.replace(/([0-9]+)/g,"*")),e=1!=t||r?e:"*"})).join("/"):1===u.length?u[0]:"Unable to get the URL",a.message=i,a.type="rogueXHR",this.__murphy_xhr.hasOwnProperty("status_code")&&delete this.__murphy_xhr.status_code,this.__murphy_xhr.hasOwnProperty("startimestamp")&&delete this.__murphy_xhr.startimestamp,this.__murphy_xhr.rageStartTimeStamp=n.urlInfo.startTimeStamp,this.__murphy_xhr.rageEndTimeStamp=n.urlInfo.endTimeStamp,T({type:"http",category:"roguexhr",data:this.__murphy_xhr,count:n?.result+he.rageRequest.tokenLimit}),murphy.error(a)}}function u(){T({type:"http",category:"xhr",data:t.__murphy_xhr,message:"timeout",timeout:this.timeout})}function c(e){var t,r,n=this.__murphy_xhr;r=D(e);var a=n.url.split("?");return t=a.length>1?a[1]:void 0,{messageKey:n.method+a[0]+(t||"")+(r||""),queryParams:t,payload:r}}return Tt&&(t.__murphy_xhr.params=arguments[0]),t.__murphy_xhr&&!t.__murphy_xhr.isListenerAttached&&(t.addEventListener("readystatechange",o),t.addEventListener("timeout",u),t.__murphy_xhr.hasOwnProperty("roguexhrInfo")||(t.__murphy_xhr.isListenerAttached=!0)),e.apply(this,arguments)}}),l),a.history.pushState&&a.history.replaceState){var L=a.onpopstate;a.onpopstate=function(){var e=o.href;if(q(u,e),L)return L.apply(this,arguments)};var N=function(e){return function(){var t=arguments.length>2?arguments[2]:void 0;return t&&q(u,t+""),e.apply(this,arguments)}};_(a.history,"pushState",N,l),_(a.history,"replaceState",N,l)}function P(e){try{var t=e[1]?e[1].method:null,r=e[1]?e[1].body:null;t=t||"GET";r=D(r);var n,a=e[0].split("?");n=a.length>1?a[1]:void 0;var o={messageKey:t+a[0]+(n||"")+(r||""),queryParams:n,payload:r},i=ge.checkLimit(o.messageKey),s={};i.urlInfo;if(i?.result>0&&e[0]!=he.logUrl){var u=new b;o.queryParams&&o.payload?s.rogueFetchInfo="REQ_WITH_SAME_payLoad&queryParams":o.queryParams?s.rogueFetchInfo="REQ_WITH_SAME_queryParams":o.payload&&(s.rogueFetchInfo="REQ_WITH_SAME_payLoad");var c=e[0].split("?")[0],l=he.rageRequest.apiBasePath,m=c.split("/"+l+"/");c=m[0]!=c?(c=l+"/"+m[1]).split("/").map((function(e,t){var r=/(v(?:\d+\.?\d*))/.test(e);return r||(e=e.replace(/([0-9]+)/g,"*")),e=1!=t||r?e:"*"})).join("/"):1===m.length?m[0]:"Unable to get the URL",u.message=c,u.type="rogueFetch",s.rageStartTimeStamp=i.urlInfo.startTimeStamp,s.rageEndTimeStamp=i.urlInfo.endTimeStamp,s.url=e[0],T({type:"http",category:"rogueFetch",data:s,count:i?.result+he.rageRequest.tokenLimit}),murphy.error(u)}}catch(e){}}if(window.fetch){_(a,"fetch",(function(e){return function(){var t=(new Date).getTime(),r=arguments[1]?arguments[1].method:null;r=r||"GET";var n=!1;if(he.rageRequest.enable){for(var a=0;a<he.rageRequest.regexPatternToExclude.length&&!(n=he.rageRequest.regexPatternToExclude[a].test(arguments[0]));a++);n||P(arguments)}return e.apply(this,arguments).then((e=>{try{T({category:"fetch",method:r,status:e.status,requestedUrl:arguments[0],url:e.url,ok:e.ok,startimestamp:t,timeTaken:(new Date).getTime()-t})}catch(e){}return e})).catch((e=>{try{T({category:"fetch",method:r,startimestamp:t,msg:e.toString(),status:0,url:arguments[0],timeTaken:(new Date).getTime()-t})}catch(e){}return Promise.reject(e)}))}}),l)}return{getBreadCrumbs:function(e){var t=c.slice(0);return e&&(c=[]),t},getWrappedPrototypes:function(){return l.slice(0)},addAttrWhiteLists:function(e){return(ze(e)||Xe(e))&&f.push(e),Ke(e)&&(n=e.filter((function(e){return f.indexOf(e)<0})),f=f.concat(n)),f.slice(0)},removeAttrWhiteLists:function(e){if(ze(e)){var t=f.indexOf(e);t>-1&&f.splice(t,1)}return Ke(e)&&(n=f.filter((function(t){return e.indexOf(t)<0})),f=n.slice(0)),f.slice(0)},addEventWhiteLists:function(e){return ze(e)&&g.push(e),Ke(e)&&(n=e.filter((function(e){return g.indexOf(e)<0})),g=g.concat(n)),g.slice(0)},removeEventWhiteLists:function(e){if(ze(e)){var t=g.indexOf(e);t>-1&&g.splice(t,1)}return Ke(e)&&(n=g.filter((function(t){return e.indexOf(t)<0})),g=n.slice(0)),g.slice(0)},beforeBreadCrumbCapture:function(e){Ye(e)&&!r&&(r=e)},addBreadCrumb:function(e){return!!We(e)&&(e.type="Custom Track",e.category||(e.category=e.type),T(e),!0)},restoreAll:function(){a.removeEventListener("popstate",popstateHandler),i.removeEventListener("click",E),i.removeEventListener("keypress",w),l&&l.forEach((function(e){var t=e[0],r=e[1],n=e[2];"removeEventListener"!=n&&(t[r]=n)}))}}},I=window,E=(I.location,"Window Error"),w="Handled Exception",k="Custom Info",x="Unhandled Promise",R=[],O=[],q=[],C=[],D=[],L=[];function N(e,t,r,n){if(null!=e&&"function"==typeof e[t]){var a=e[t];e[t]=r(a,t),e[t].__murphy__=!0,e[t].__orig__=a,n&&n.push([e,t,a])}}function P(e,t){var r,n;return function(){if(R.length>=5)e.apply(this,arguments),r=!1,clearTimeout(n);else if(!r){var a=arguments,o=this,i=function(){e.apply(o,a),r=!1};r=!0,n=setTimeout(i,t)}}}function U(e){var t=O.map((function(e){return e.uniString})).indexOf(e.msg+e.fileName+e.stackVal);return t>-1?O[t].pos:"false"}function A(){var e={};return pe&&null!=pe&&(e=pe()),Qe(e,Ze())}function j(e){!function(e){var t=e.errorObj,r=U(t);if(t.preventClientGrouping&&(r="false"),"false"==r){e.count=1;var n=R.push(e);O.push({uniString:t.msg+t.fileName+t.stackVal,pos:n-1})}else{if(R[r].lastOccured=e.time,R[r].count+=1,R[r].errorObj&&"RageClickError"==R[r].errorObj.name){var a=0;R[r].breadCrumbs&&R[r].breadCrumbs instanceof Array&&(a=R[r].breadCrumbs.length),0!=a&&"rageClickEntryInErrorGrouping"==R[r].breadCrumbs[a-1].category?(R[r].breadCrumbs[a-1].count++,R[r].breadCrumbs[a-1].rageClickTimestamps instanceof Array||(R[r].breadCrumbs[a-1].rageClickTimestamps=[]),R[r].breadCrumbs[a-1].rageClickTimestamps.push((new Date).getTime())):R[r].breadCrumbs.push({category:"rageClickEntryInErrorGrouping",type:"Custom Track",count:R[r].count+1,timestamp:(new Date).getTime()})}if(R[r].errorObj?.name&&["RageFetchRequestError","RageRequestError"].includes(R[r].errorObj.name)&&(a=e.breadCrumbs?.length)>0&&(R[r].breadCrumbs instanceof Array||(R[r].breadCrumbs=[]),R[r].breadCrumbs.push(e.breadCrumbs[a-1])),Tt){var o=It.length;null!=It[o-1]&&(It[o-1].nearest_uuID=R[r].uuID)}}T&&T()}(e)}function F(e){if(e.sessionData&&e.sessionData.sessionId)for(var t=e.errors.length,r=0;r<t;r++)e.errors[r].sessionId=e.sessionData.sessionId,e.errors[r].tabId=e.sessionData.tabId;try{ut({type:"POST",url:he.logUrl,data:JSON.stringify(e),dataType:"json",headers:he.headers})}catch(e){return}}async function M(e){if(navigator.sendBeacon){var t=he.headers["X-MURPHY-AUTHKEY"]||"";t=encodeURIComponent(t);var r=he.headers["X-MURPHYSDK-VERSION"]||"",n=he.logUrl+"?authKey="+t+"&sdkVersion="+r;if(_t.sPushed&&0===R.length&&0===C.length&&(_t.tabEnd>0||_t.sessionEnd>0)&&navigator.sendBeacon(n,JSON.stringify({sessionData:_t})),R.length>0){var a={errors:R};R=[],O=[],_t.sPushed?(_t.sPushed=!1,a.sessionData=_t):(_t.sessionEnd>0&&_t.sessionEnd-Number(_t.sessionStart)<ue||_t.tabEnd>0&&_t.tabEnd-Number(_t.tabStart)<ue)&&(a.sessionData=_t),navigator.sendBeacon(n,JSON.stringify(a))}if(C.length>0){var o={info:C};C=[],_t.sPushed?o.sessionData=_t:(_t.sessionEnd>0&&_t.sessionEnd-Number(_t.sessionStart)<ue||_t.tabEnd>0&&_t.tabEnd-Number(_t.tabStart)<ue)&&(o.sessionData=_sessionData),navigator.sendBeacon(n,JSON.stringify(o))}if(st.exceptions.request.length>0)for(var i=0;i<st.exceptions.request.length;i++)navigator.sendBeacon(n,st.exceptions.request[i].obj.data)}le||(window.murphy.recording.isRecordingTab()?e.returnValue="video is recording . ":Oe())}function H(){I.addEventListener("error",B)}function B(e){var t;if(!ye&&(e instanceof Error||e instanceof Event)&&(le&&!St&&(wt.init(),St=!0),(e instanceof Error||e instanceof Event)&&(e instanceof Event&&(t=V(e.message,e.filename||document.location.href,e.lineno,e.colno,e.error)),e instanceof Error&&(t=V(e.message,e.fileName||document.location.href,e.lineNumber,e.columnNumber,e)),t))){var r=t.errorObj,n=U(r);if("false"==n){t.count=1;var a=R.push(t);O.push({uniString:r.msg+r.fileName+r.stackVal,pos:a-1})}else R[n].lastOccured=t.time,R[n].count+=1}}function z(e,t,r){Y(e,t||w,r)}function K(e,t){Y(e,t||k)}function W(e,t){var r,n,a;if(Ve(e,"errorObj")){var o={errorObj:e.errorObj,type:e.type,sessionId:_t.sessionId,tabId:_t.tabId};if(o.breadCrumbs=e.breadCrumbs,Ye(t.setTags)){var i=Qe(t.setTags(),Ze());o=Qe(o,i)}if(We(t.config)){var s,u=t.config;s=u.logUrl?u.logUrl:"https://"+u.appDomain+"/murphy/"+u.appKey+"/ingest/exceptions";try{r={type:"POST",url:s,data:JSON.stringify({errors:[o]}),dataType:"json",headers:{"X-MURPHY-AUTHKEY":u.authKey,"X-MURPHYSDK-VERSION":he.headers["X-MURPHYSDK-VERSION"]}},n=et(),a=r.async||!0,n.open(r.type,r.url,a),n.addEventListener("load",r.success),n.addEventListener("error",r.error),n.setRequestHeader("content-type","application/json"),n.setRequestHeader("X-MURPHY-AUTHKEY",r.headers["X-MURPHY-AUTHKEY"]||""),n.setRequestHeader("X-MURPHYSDK-VERSION",r.headers["X-MURPHYSDK-VERSION"]||""),n.setRequestHeader("x-remote-user",pe&&pe().zuid||""),n.send(r.data)}catch(e){return}}}}function V(e,t,r,n,a,o){var i;if(o=o||E,!e||e.toUpperCase()!="Script error.".toUpperCase()){var s,u=e;if(e=function(e){var t=e.length;return t>2e3&&(e=e.substring(0,1800)+" ... "+e.substring(t-195,t)),e}(e),s=/\b[\w](['A-Za-z0-9._%\-+]*@[A-Za-z0-9-]+(\.[a-zA-Z0-9-]{1,22}){0,9}\.[a-zA-Z]{2,22})\b/g,e=e.replace(s,"**(email)"),"string"==typeof a)i=a;else if("object"==typeof a&&a)if(""==a.stack||null==a.stack)i="@"+a.fileName+":"+a.lineNumber+":"+a.columnNumber;else if(i=a.stack,u.length>2e3||u!=e){var c=a.stack.split("\n");u.includes(c[0])&&(c[0]=e,i=c.join("\n"))}var l=void 0;he&&he.normalizedWindowURL&&he.normalizedWindowURL.path&&(l=he.normalizedWindowURL.path);var m={errorObj:{msg:e,fileName:t,lineno:r,colno:n,stackVal:i,name:a.name},type:o,sessionId:_t.sessionId,tabId:_t.tabId,normalizedWindowURL:ct(l)};return a.queryParams&&(m.errorObj.queryParams=a.queryParams),a.type&&(m.errorObj.type=a.type),m=Qe(m,A())}}async function X(e){try{var t=localStorage.getItem("currentBlobId"),r=localStorage.getItem("currentVideoId");"null"!=t&&"null"!=r&&(e.videoId=r)}catch(e){}j(e)}function Y(e,t,r){if(e instanceof Error||e instanceof Event&&e.error){var n;if(e instanceof Event&&(n=V(e.message,e.filename||document.location.href,e.lineno,e.colno,e.error,t)),e instanceof Error){var a=e.message;("Handled Exception"===t&&e.name||t===x&&e.name)&&(a=e.name+": "+e.message),n=V(a,e.fileName||document.location.href,e.lineNumber,e.columnNumber,e,t)}if(n){if(r&&We(r)&&(We(r.customTags)&&(n=Qe(n,r.customTags)),n.errorObj.preventClientGrouping=r.preventClientGrouping,We(r.customGrouping)&&r.customGrouping.enable&&(n.errorObj.errorGroupingHash=r.customGrouping.errorGroupingHash),We(r.frameworkData)&&Se&&"isFrameworkError"in r.frameworkData&&r.frameworkData.isFrameworkError)){var o=r.frameworkData;"finalMsg"in o&&(n.errorObj.msg=o.finalMsg),"lyteErrorCode"in o&&(n.errorObj.name=o.lyteErrorCode,n.isFrameworkError=!0);for(var i=1;i<5;i++){var s=`arg${i}`;s in o&&(n[s]=o[s])}}if(Tt){var u=JSON.parse(JSON.stringify(n));u.category="exception",u.errorObj.url=u.url,u.timeEllapsed=window.murphy.recording.getTimeEllapsed(),It.push(u)}if(ce&&de&&(n=Qe(n,{breadCrumbs:de.getBreadCrumbs()})),We(he.maskSensitiveData)&&(n=Qe(n,{maskingOptions:he.maskSensitiveData})),se){var c=n,l=D.length;if(l>0)for(var m=0;m<l;m++)c=D[m](n);c&&X(c)}if($(n),!fe||"function"!=typeof e.preventDefault)return!1;e.preventDefault()}}}function J(t){var r;t.reason?r=t.reason:t.detail&&t.detail.reason&&(r=e.detail.reason),r&&r instanceof Error&&Y(r,x),fe&&"function"==typeof t.preventDefault&&t.preventDefault()}function $(e){var t,r=q.length;for(t=0;t<r;t++)q[t](e)}function G(e){"function"==typeof e&&-1==q.indexOf(e)&&q.push(e)}function Q(e){if(e)for(var t=q.length,r=0;r<t;r++)q[r]==e&&(q.splice(r,1),t--,r--);else q=[]}function Z(e){return de?de.getBreadCrumbs(e):[]}function ee(e){Ye(e)&&D.push(e)}function te(e){if(e)for(var t=D.length,r=0;r<t;r++)D[r]==e&&(D.splice(r,1),t--,r--);else D=[]}var re,ne=[];function ae(e,t,r){var n,a,o={};delete(n=Ze()).time,delete n.uuID,n._zl_timestamp=(new Date).getTime(),n.user_agent=n.userAgent,delete n.userAgent;var i=murphy.sendUserInfo();n.zuid=i?.envData?.zuid,n.zgid=i?.envData?.zgid,n.build_name=i?.envData?.releaseDetails?.releaseName,n.build_id=i?.envData?.releaseDetails?.releaseId,n.build_revision=i?.envData?.releaseDetails?.releaseRevision,a=i?.normalizedWindowURL?.path,n.normalised_url=ct(a),(o=n).level=e||"info",o.message=t,r&&r.constructor===Object&&(o.customFields=r),murphy.isMurphyInstalled()&&function(e){ne.push(e),re&&re()}(o)}function oe(){re=P((function(){var e,t={appLogs:ne};ne=[],e=t,ut({type:"POST",url:he.appLogUrl,data:JSON.stringify(e),dataType:"json",headers:he.headers})}),ue)}var ie,se,ue,ce,le,me,de,pe,ge,fe,he={},ye=!1,ve=!1,be={development:"dev",test:"testing",production:"production"},Se=!1,Te=window;function _e(e){if(!ye){if(he.appDomain=e.appDomain,he.appKey=e.appKey,he.authKey=e.authKey,he.maskAllQueryParams=e.maskAllQueryParams,e.logUrl?he.logUrl=e.logUrl:he.logUrl="https://"+e.appDomain+"/murphy/"+e.appKey+"/ingest/exceptions",e.appLogUrl?he.appLogUrl=e.appLogUrl:he.appLogUrl="https://"+e.appDomain+"/murphy/"+e.appKey+"/ingest/infoLogs",he.logsBatch=e.batchCount||10,e.rageRequest&&e.rageRequest.enable)if(he.rageRequest=e.rageRequest,he.rageRequest.timeInterval||(he.rageRequest.timeInterval=1e3),he.rageRequest.tokenLimit||(he.rageRequest.tokenLimit=3),he.rageRequest.apiBasePath||(he.rageRequest.apiBasePath="crm"),he.rageRequest.regexPatternToExclude){if(he.rageRequest.regexPatternToExclude instanceof Array){var t;t=he.rageRequest.regexPatternToExclude.filter(Xe),he.rageRequest.regexPatternToExclude=t}else he.rageRequest.regexPatternToExclude=[];he.rageRequest.regexPatternToExclude.push(/murphy\/[a-z0-9_\-]+\/ingest\/exceptions$/)}else he.rageRequest.regexPatternToExclude=[/murphy\/[a-z0-9_\-]+\/ingest\/exceptions$/];else he.rageRequest={enable:!1};e.rageClick&&e.rageClick.enable?(he.rageClick=e.rageClick,he.rageClick.timeInterval||(he.rageClick.timeInterval=750),he.rageClick.tokenLimit||(he.rageClick.tokenLimit=2)):he.rageClick={timeInterval:750,tokenLimit:2,enable:!1},We(e.maskSensitiveData)&&(he.maskSensitiveData=e.maskSensitiveData,We(e.maskSensitiveData.requestAttributes)&&(Ke(he.maskSensitiveData.requestAttributes.headers)||(he.maskSensitiveData.requestAttributes.headers=["X-ZCSRF-TOKEN"]),Ke(he.maskSensitiveData.requestAttributes.queryParams)||(he.maskSensitiveData.requestAttributes.queryParams=[]))),fe=null!=e.hideConsoleLogs&&e.hideConsoleLogs,We(e.consoleConfig)&&(he.consoleConfig=e.consoleConfig);const r="history.state";We(e.normalizedWindowURL)&&e.normalizedWindowURL.path?(he.normalizedWindowURL={...e.normalizedWindowURL},he.normalizedWindowURL.path=`${r}.${he.normalizedWindowURL.path}`):he.normalizedWindowURL={path:r+".normalizedWindowUrl"},ie=function(e){if(null!=be[e])return be[e]}(e.environment||"development"),se=null==e.pushLogs?!Je(ie,be):e.pushLogs,null==e.pushInfo?!Je(ie,be):e.pushInfo,ce=null==e.enableTracking||e.enableTracking,ue=void 0===e.waitTime?6e4:e.waitTime,me=Ge(e._maxTrackData)?e._maxTrackData:100,le=void 0!==e.enableSessionTracking&&e.enableSessionTracking,Se=null!=e.isLyteEnabled&&e.isLyteEnabled,Ye(e.multiTabCallBack)&&we(e.multiTabCallBack),he.headers["X-MURPHY-AUTHKEY"]=he.authKey,he.headers["X-MURPHYSDK-VERSION"]="2.12.0",he.rageRequest.enable&&(ge=new tt(he.rageRequest.tokenLimit,he.rageRequest.timeInterval))}}function Ie(e,t){(!ye||ye&&!0===t)&&"function"==typeof e&&(pe=e)}function Ee(){var e={};return"function"==typeof pe&&(e.zuid=pe().zuid,e.envData=pe()),e={...e,...he}}function we(e){murphy.multiTabCallBack=e}async function ke(e){ye||(We(e)&&(We(e.config)&&_e(e.config),Ye(e.setTags)&&Ie(e.setTags),Ye(e.multiTabCallBack)&&we(e.multiTabCallBack)),le&&!St&&(wt.init(),Ne()&&(St=!0)),function(){if(pe&&void 0!==pe){var e,t=R.length;for(e=0;e<t;e++)R[e]=Qe(R[e],pe())}}(),T=P((function(){if(0!=R.length){var e={errors:R};R=[],O=[],le&&!_t.sPushed&&(wt.pushSessionData(pe().zuid),e.sessionData=_t),F(e)}}),ue),P((function(){var e={info:C};C=[],le&&!_t.sPushed&&(wt.pushSessionData(pe().zuid),e.sessionData=_sessionData),F(e)}),ue),oe(),function(){var e=I.console;e&&fe&&function(e,t,r){if(null!=e)for(var n in e)if("function"==typeof e[n]){var a=e[n];e[n]=t(a),e[n].__murphy__=!0,e[n].__orig__=a,r&&r.push([e,n,a])}}(e,(function(e){return function(){}}),L);if(e&&he.consoleConfig){var t=function(e){return function(){var t=(new Error).stack;if("function"==typeof he.consoleConfig.warn.warningCallback){var r=/[^\s]+\.js/g,n=t.match(r);n instanceof Array?n.shift():n=[];var a={fileNames:n,message:arguments[0]};he.consoleConfig.warn.warningCallback(a)}e.apply(this,arguments)}};for(var r in he.consoleConfig)We(he.consoleConfig[r])&&"warn"==r&&N(e,r,t,L)}}(),function(){Te.removeEventListener("error",B),Te.addEventListener("error",Y),Te.addEventListener("unhandledrejection",J),I.addEventListener("beforeunload",M),le||wt.storeNoOfTabsInDB();!function(){if(!Ne())return;var e=localStorage.getItem("currentVideoId");null!==e&&"null"!==e&&"sessionExists"!=murphy.recording.checkSessionExistsInOtherOrg()&&murphy.multiTabCallBack&&"function"==typeof murphy.multiTabCallBack&&(murphy.loadRecAfterInitialPageLoad=!0);window.addEventListener("storage",Re)}()}(),ce&&(de=_(me)),ye=!0,Ne()&&async function(){new Promise(((e,t)=>{if(!navigator.mediaDevices||!navigator.mediaDevices.getDisplayMedia||!window.indexedDB)return o=!1,void e(!1);var r=indexedDB.open("murphyTestIDB",1);r.onupgradeneeded=e=>{e.target.result.createObjectStore("blobs",{keyPath:"name"})},r.onerror=function(t){o=!1,murphy.error(new Error("Error while checking recorderSupport - could not open IDB")),e(!1)},r.onsuccess=function(t){var n=t.target.result.transaction("blobs","readwrite").objectStore("blobs").put({name:"key",value:"value"});n.onsuccess=function(){o=!0,r.result.close(),window.indexedDB.deleteDatabase("murphyTestIDB").onerror=e=>{murphy.error(new Error("Error while deleting murphyTestDB"))},e(!0)},n.onerror=function(t){o=!1,e(!1),murphy.error(new Error("Error while checking recorderSupport - could not write data into IDB"))}}}))}())}function xe(){ye&&(Q(),te(),Te.removeEventListener("error",Y),Te.removeEventListener("unhandledrejection",J),I.removeEventListener("beforeunload",M),window.removeEventListener("storage",Re),L&&L.forEach((function(e){var t=e[0],r=e[1],n=e[2];t[r]=n})),ye=!1)}function Re(e){if(Ne()){if("currentBlobId"===e.key&&("null"!==localStorage.getItem("currentBlobId")?"sessionExists"!=murphy.recording.checkSessionExistsInOtherOrg()&&(Tt=!0):Tt=!1),"murphyRecInitialisedBeforeSendingInOtherTab"==e.key&&"true"==localStorage.getItem("murphyRecInitialisedBeforeSendingInOtherTab")){var t=localStorage.getItem("currentRecOrgId"),r=pe().zgid;(r=parseInt(r))==(t=parseInt(t))&&murphy.recording.recInitInOtherOrgs()}if("currentVideoId"===e.key){var n=localStorage.getItem("currentVideoId");if("null"!==n&&0===It.length){var a={};a.uuid=n,"sessionExists"!=murphy.recording.checkSessionExistsInOtherOrg()&&murphy.multiTabCallBack&&"function"==typeof murphy.multiTabCallBack&&(murphy.multiTabCallBack(),c(a))}}}}function Oe(){if(Ne()){var e=JSON.parse(localStorage.getItem("noOfTabs"));(e-=1)>=0&&(localStorage.setItem("noOfTabs",e),localStorage.setItem("onlyOne",!1),0===e)&&localStorage.setItem("onlyOne",!0)}}function qe(){Et()?wt.setPeers("pop"):Oe()}function Ce(e){if(Le())return window.moduleGenerator?(window.murphy.videoInstance||(window.murphy.videoInstance=new moduleGenerator,window.murphy.recording.setInstalled(),f()),window.murphy.recording.initiateScreenRecording(e)):void new Promise((function(e){var t;(t=document.createElement("script")).type="text/javascript";var r=document.getElementsByTagName("HEAD")[0];t.addEventListener("load",(function(t){e(t.target)})),r.appendChild(t)})).then((t=>(window.murphy.videoInstance=new moduleGenerator,window.murphy.recording.setInstalled(),f(),window.murphy.recording.initiateScreenRecording(e))))}function De(){ve=!0}function Le(){return ye}function Ne(){var e=!0;try{localStorage&&(e=!0)}catch(t){e=!1}return e}function Pe(e,t){try{var r=e.length;r>t&&(e=e.substring(0,t/2)+e.substring(r-t/2,r))}catch(e){}return e}function Ue(e){var t=!1;try{return t=/^[\w](['A-Za-z0-9._%\-+]*@[A-Za-z0-9-]+(\.[a-zA-Z0-9-]{1,22}){0,9}\.[a-zA-Z]{2,22})$/.test(e)}catch(e){return t}return t}function Ae(e){return""!=e&&e?Ue(e)?e="**(email)":je(e)?"**(token)":e:e}function je(e){var t=!1;try{if(e.length>25)return t=/^(?=.*[A-Za-z])(?=.*\d)[^ :;,]*$/.test(e.trim())}catch(e){}return t}function Fe(e){var t=e;try{return t=decodeURIComponent(e)}catch(e){}return t}function Me(e,t){try{if(null==e)return;t=t||100;const a=new URL(e),o=a.searchParams;var r=!1;We(he.maskSensitiveData)&&We(he.maskSensitiveData.requestAttributes)&&(r=he.maskSensitiveData.requestAttributes.maskAllQueryParams,he.maskSensitiveData.requestAttributes.queryParams.forEach((e=>{o.has(e)&&o.set(e,"*")}))),r?Array.from(o.keys()).forEach((e=>{o.set(e,"*")})):Array.from(o.keys()).forEach((e=>{o.get(e).length>t&&o.set(e,"*"),(o.get(e).length>25&&je(o.get(e))||Ue(Fe(o.get(e))))&&o.set(e,"*")})),a.search=o.toString();var n=a.toString();return n.length>2048&&(n=n.slice(0,2e3)),n}catch(t){return e.length>2048&&(e=e.slice(0,2e3)),e=function(e,t){try{t=t||100;const r=e.split("?");if(r.length<2)return e.slice(0,2e3);const n=r[0];let a=r[1].split("&").filter((e=>""!==e)),o=!1;return We(he.maskSensitiveData)&&We(he.maskSensitiveData.requestAttributes)&&(o=he.maskSensitiveData.requestAttributes.maskAllQueryParams,he.maskSensitiveData.requestAttributes.queryParams.forEach((e=>{a=a.map((t=>{const[r,n]=t.split("=");return r===e?`${r}=*`:t}))}))),a=o?a.map((e=>{const[t,r]=e.split("=");return`${t}=*`})):a.map((e=>{const[r,n]=e.split("="),a=Fe(n);return n.length>t||n.length>25&&je(n)||Ue(a)?`${r}=*`:e})),`${n}?${a.join("&")}`}catch(t){return e}}(e)}}function He(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))}function Be(e){if("string"!=typeof e)return{};var t=e.match(/^(([^:\/?#]+):)?(\/\/([^\/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/),r=t[6]||"",n=t[8]||"";return{protocol:t[2],host:t[4],path:t[5],query:r,relative:t[5]+r+n}}function ze(e){return"[object String]"===Object.prototype.toString.call(e)}function Ke(e){return"[object Array]"===Object.prototype.toString.call(e)}function We(e){return"object"==typeof e&&null!==e}function Ve(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Xe(e){return"[object RegExp]"===Object.prototype.toString.call(e)}function Ye(e){return"function"==typeof e}function Je(e,t){return e==t.development}function $e(){return(new Date).getTime()}function Ge(e){return"number"==typeof e}function Qe(e,t){if(!t||"object"!=typeof t)return e;for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e}function Ze(){var e=window.location;return{time:$e(),userAgent:navigator.userAgent,url:Me(e.href),domain:e.host,uuID:He()}}function et(){return window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")}function tt(e,t){var r,n={},a=(t=t||1e3,e||3),o=$e();n[1]={},this.curKey=1,this.checkLimit=function(e){var i=$e(),s=Math.ceil((i-o)/t),u=0;return n[s]?(n[s][e]||(n[s][e]={},n[s][e].startTimeStamp=i),u=n[s][e].count=Ge(n[s][e].count)?n[s][e].count+1:1):Number(s)>Number(this.curKey)&&(this.curKey=s,n[s]={},n[s][e]||(n[s][e]={},n[s][e].startTimeStamp=i),u=n[s][e].count=Ge(n[s][e].count)?n[s][e].count+1:1,clearTimeout(r),r=setTimeout(function(){this.clearbeforeKeys(s)}.bind(this),t-1)),u-a>0?(n[s][e].endTimeStamp=i,{result:u-a,urlInfo:n[s][e]}):0},this.clearbeforeKeys=function(e){e=Number(e),Object.keys(n).forEach((function(t,r){(t=Number(t))!=e&&t<e&&delete n[t]}))}}function rt(){var e=[];try{if(We(he.maskSensitiveData)&&We(he.maskSensitiveData.requestAttributes)&&(e=he.maskSensitiveData.requestAttributes.headers),e instanceof Array)return e}catch(e){return[]}}function nt(e){try{if("string"==typeof e)return function(e){try{var t=rt();e.forEach((e=>{const[r,n]=e;(t.includes(r)||e[1].length>25&&je(e[1])||Ue(Fe(e[1])))&&(e[1]="*")}))}catch(e){}return e}(e.split(/\r\n/).filter((e=>""!==e)).map((e=>{const[t,...r]=e.split(":");return[t.trim(),r.join(":").trim()]}))).map((([e,t])=>`${e}: ${t}`)).join("\r\n")}catch(e){}return e}function at(e,t){try{var r=[];r=rt();e[t].length>25&&je(e[t])&&(e[t]="*"),Ue(e[t])&&(e[t]="*"),r.includes(t)&&(e[t]="*")}catch(e){}return e}function ot(){var e={requestAttributes:{queryParams:[],headers:[]}};try{var t=function(){var e=[];try{if(We(he.maskSensitiveData)&&We(he.maskSensitiveData.requestAttributes)){var t=he.maskSensitiveData.requestAttributes.maskAllQueryParams;if(1==t)return t;e=he.maskSensitiveData.requestAttributes.queryParams}if(e instanceof Array)return e}catch(e){return[]}}();1==t?e.requestAttributes.maskAllQueryParams=!0:e.requestAttributes.queryParams=t,e.requestAttributes.headers=rt()}catch(e){}return e}function it(e){var t="",r="";try{var n=e.match(/[^\s]+\.js/g);n&&(t=n[0]),r=t.replace(/^[^\w\d]+|[^\w\d]+$/g,"")}catch(e){}return r}var st={exceptions:{request:[],maxRetryQueueLength:5}};function ut(e,t){var r=void 0===e.async||e.async,n=t&&t.maxRetries||5,a=0,o=t&&t.retryDelay||5e3,i=He(),s=t&&t.retryModule||"exceptions";var u={obj:e,retryUUID:i};if(st[s].request.push(u),st[s].request.length>st[s].maxRetryQueueLength){st[s].request.shift()}!function t(){var u=et();u.open(e.type,e.url,r);const c=t=>{if("exceptions"!=s||""!=t.currentTarget.response){m();for(var r=0;r<st[s].request.length;r++)if(st[s].request[r].retryUUID==i){st[s].request.splice(r,1);break}e.success&&e.success(t)}else l(t)},l=r=>{if(m(),a<n){for(var u=!1,c=0;c<st[s].request.length;c++)if(st[s].request[c].retryUUID==i){u=!0;break}if(u)return a++,void setTimeout(t,o)}else for(c=0;c<st[s].request.length;c++)if(st[s].request[c].retryUUID==i){st[s].request.splice(c,1);break}e.error&&e.error(r)},m=()=>{u.removeEventListener("load",c),u.removeEventListener("error",l)};u.addEventListener("load",c),u.addEventListener("error",l),u.setRequestHeader("content-type","application/json"),u.setRequestHeader("X-MURPHY-AUTHKEY",e.headers["X-MURPHY-AUTHKEY"]||""),u.setRequestHeader("X-MURPHYSDK-VERSION",e.headers["X-MURPHYSDK-VERSION"]||""),u.setRequestHeader("x-remote-user",pe&&pe().zuid||""),u.send(e.data)}()}function ct(e){var t;try{"string"!=typeof(t=e.split(".").reduce(((e,t)=>e&&void 0!==e[t]?e[t]:void 0),window))&&(t=void 0),t.length>200&&(t=t.substr(0,200))}catch(e){}return t}var lt="murphy_sessionId",mt="murphy_masterId",dt="murphy_slaveId",pt="murphy_peers",gt="murphy_sessionStartTime",ft="murphy_newTabOpened",ht="murphy_newSessionStarted",yt="murphy_sessionEnded",vt="murphy_tabClosed",bt="murphy_hasSessionErrors",St=!1,Tt=!1,_t={zuid:null,sessionStart:0,sessionMsg:"",sessionEnd:0,tabStart:0,tabMsg:"",tabEnd:0,sessionId:"",tabId:"",sPushed:!1},It=[];function Et(){return St}var wt={browserTabId:He(),ismaster:!1,isslave:!1,isFirstPage:!1,storeTabId:function(){Ne()&&"visible"==document.visibilityState&&localStorage.setItem("currentTabId",wt.browserTabId)},storeSessionInfo:function(){Ne()&&(null==localStorage.getItem(lt)&&(localStorage.setItem(lt,wt.browserTabId),localStorage.setItem(gt,Date.now()),localStorage.setItem(ht,ht),localStorage.setItem(bt,"false"),wt.setSessionObject(ht)),null!==localStorage.getItem(mt)?wt.isslave=!0:(localStorage.setItem(mt,wt.browserTabId),wt.ismaster=!0),sessionStorage.setItem(dt,wt.browserTabId),wt.setSessionObject(ft),wt.setPeers("push"),_t.zuid=pe().zuid)},storeNoOfTabsInDB:function(e){if(!Ne())return;const t=indexedDB.open("session_db",1);var r={},n=!0;t.onupgradeneeded=e=>{r.db=e.target.result,r.db.createObjectStore("session_store",{keyPath:"name"})},t.onsuccess=a=>{r.db=a.target.result;const o=r.db.transaction("session_store","readwrite",{durability:"strict"}).objectStore("session_store");o.openCursor().onsuccess=r=>{var a=r.target.result;if(a){if(n=!1,"noOfTabs"==a.key){var i=a.value.value,s=o.put({name:"noOfTabs",value:i});i=JSON.parse(localStorage.getItem("noOfTabs")),i+=1,localStorage.setItem("noOfTabs",i),i>1&&localStorage.setItem("onlyOne","false"),"session"===e&&wt.storeSessionInfo();var u=t.result;s.onsuccess=function(){u.close()}}a.continue()}else if(n){n=!1;s=o.put({name:"noOfTabs",value:1});localStorage.setItem("noOfTabs",1),"session"===e&&wt.storeSessionInfo(),s.onsuccess=function(){t.result.close()}}}}},setPeers:function(e){var t=[];if(Ne()){if(null!==localStorage.getItem(pt)&&(t=JSON.parse(localStorage.getItem(pt))),"push"===e)t.push(wt.browserTabId);else if("pop"===e){var r=t.indexOf(wt.browserTabId);if(r>-1){t.splice(r,1);var n=JSON.parse(localStorage.getItem("noOfTabs"));if((n-=1)>=0&&(localStorage.setItem("noOfTabs",n),localStorage.setItem("onlyOne",!1),0==n))return localStorage.setItem("murphy_peers",JSON.stringify([])),localStorage.removeItem(mt),localStorage.removeItem(lt),localStorage.removeItem(gt),localStorage.removeItem(ht),localStorage.removeItem(bt),void localStorage.setItem("onlyOne",!0)}}localStorage.setItem(pt,JSON.stringify(t))}},pushSessionData:function(e){Ne()&&(_t.sPushed||(null!==localStorage.getItem(ht)&&localStorage.getItem(ht)==ht&&(_t.sessionMsg=localStorage.getItem(ht),localStorage.removeItem(ht)),null!==localStorage.getItem(bt)&&"false"==localStorage.getItem(bt)&&localStorage.setItem(bt,"true"),_t.sPushed=!0))},setSessionObject:function(e){Ne()&&(e===ht?(_t.sessionStart=localStorage.getItem(gt),_t.sessionId=localStorage.getItem(lt)):e===ft?(_t.sessionStart=localStorage.getItem(gt),_t.tabStart=Date.now(),_t.tabMsg=ft,_t.sessionId=localStorage.getItem(lt),_t.tabId=sessionStorage.getItem(dt)):e===yt?(_t.sessionMsg=yt,_t.sessionEnd=Date.now(),_t.sPushed||null===localStorage.getItem(bt)||"true"!=localStorage.getItem(bt)?wt.setSessionObject(vt):(_t.tabMsg="",_t.sPushed=!0,localStorage.removeItem(bt))):e===vt&&(_t.tabMsg=vt,_t.tabEnd=Date.now()))},cleanUpBeforeUnload:function(){wt.setPeers("pop"),Ne()&&(null!==localStorage.getItem(pt)&&0===JSON.parse(localStorage.getItem(pt)).length?wt.setSessionObject(yt):wt.setSessionObject(vt),"murphy_newSessionStarted"===_t.sessionMsg&&(_t.sessionMsg=""))},init:function(){if(Ne()){St=!0;try{window.addEventListener("unload",(function(){Ne()&&(null!==localStorage.getItem(pt)&&0===JSON.parse(localStorage.getItem(pt)).length?(null!==localStorage.getItem(lt)&&localStorage.removeItem(lt),null!==localStorage.getItem(gt)&&localStorage.removeItem(gt),null!==localStorage.getItem(mt)&&localStorage.removeItem(mt),null!==localStorage.getItem(pt)&&localStorage.removeItem(pt),null!==localStorage.getItem(ht)&&localStorage.removeItem(ht),null!==localStorage.getItem(bt)&&localStorage.removeItem(bt)):wt.ismaster&&null!==localStorage.getItem(mt)&&localStorage.removeItem(mt))})),window.addEventListener("beforeunload",(function(e){window.murphy.recording.isRecordingTab()?e.returnValue="video is recording . ":wt.cleanUpBeforeUnload()})),window.addEventListener("storage",(function(e){if(Ne()&&null!==e.key&&e.key===mt&&null==localStorage.getItem(mt)&&!wt.ismaster){var t=[];null!==localStorage.getItem(pt)&&(t=JSON.parse(localStorage.getItem(pt))),wt.browserTabId===t[0]&&(wt.ismaster=!0,localStorage.setItem(mt,wt.browserTabId),wt.isslave=!1)}})),wt.storeNoOfTabsInDB("session")}catch(e){return}}}};return function(e){var t=e;function r(e){return de?de.addBreadCrumb(e):[]}wt.storeTabId(),he.headers={"content-type":"application/json"};var n={config:_e,setTags:Ie,error:z,customInfo:K,pushToOtherService:W,info:r,install:ke,uninstall:xe,subscribe:G,unsubscribe:Q,getTrackingData:Z,whiteListAttributes:function(e){return de?de.addAttrWhiteLists(e):[]},blackListAttributes:function(e){return de?de.removeAttrWhiteLists(e):[]},whiteListEvents:function(e){return de?de.addEventWhiteLists(e):[]},blackListEvents:function(e){return de?de.removeEventWhiteLists(e):[]},addCustomTracking:r,beforeTrack:function(e){return de?de.beforeBreadCrumbCapture(e):[]},beforeError:ee,deregisterBeforeError:te,beginRemoteSession:c,endRemoteSession:l,pauseSession:m,resumeSession:d,setCustomTrackingForVideo:i,sendUserInfo:Ee,isMurphyTabInstalled:Et,initiateTabClose:qe,isMurphyInstalled:Le,getMaskingOptions:ot,getFileNameFromStack:it,appLog:function(e,t,r){if(""==t||"string"!=typeof t||null==t)return"msg not found";var n=he,a={};a.configObj=n,ae(e,t,r)},recording:{initiateScreenRecording:function(e){return Ce(e)},isInstalled:function(){return ve},setInstalled:De,checkSessionExistsInOtherOrg:g,isMurphyRecSupported:u}};t.murphy||(t.murphy=n,h(),H()),document.addEventListener("visibilitychange",(function(){if("visible"==document.visibilityState){if(!Ne())return;localStorage.setItem("currentTabId",wt.browserTabId)}}))}(window||self),"undefined"!=typeof enableMurphy&&enableMurphy(),n})()}));