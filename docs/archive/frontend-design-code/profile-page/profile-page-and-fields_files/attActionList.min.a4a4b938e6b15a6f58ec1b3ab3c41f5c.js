var AttActionList={};AttActionList.AttendanceReminder={checkInBeforeTime:null,checkOutBeforeTime:null,checkOutAfterTime:null,checkInTime:null,checkOutTime:null,shiftFtime:null,shiftTtime:null,shiftName:null,checkInBeforeTimeOut:null,checkInAfterTimeOut:null,checkOutBeforeTimeOut:null,checkOutAfterTimeOut:null,expectedFromTime:null,expectedToTime:null,avoidConstructingReminders:!1,allowUIEntry:0,construct:function(cardContainer,attData){if(attData.avoidConstructingReminders||!attData.yetToCheckIn&&!attData.checkInOpen)return AttActionList.AttendanceReminder.avoidConstructingReminders=!0,AttActionList.AttendanceReminder.removeCheckInReminders(),void AttActionList.AttendanceReminder.removeCheckOutReminders();AttActionList.AttendanceReminder.allowUIEntry=attData.allowUIEntry,attData.shiftFtime&&(AttActionList.AttendanceReminder.shiftFtime=attData.shiftFtime),attData.shiftTtime&&(AttActionList.AttendanceReminder.shiftTtime=attData.shiftTtime),attData.shiftName&&(AttActionList.AttendanceReminder.shiftName=attData.shiftName);var currentTime=(new Date).getTime();attData.expectedFromTime&&(AttActionList.AttendanceReminder.expectedFromTime=attData.expectedFromTime,AttActionList.AttendanceReminder.checkInTime=attData.expectedFromTime+(attData.checkInNotifyAfter?60*attData.checkInNotifyAfter*1e3:0),AttActionList.AttendanceReminder.checkInBeforeTime=attData.expectedFromTime-(attData.checkInNotifyBefore?60*attData.checkInNotifyBefore*1e3:18e5)),attData.expectedToTime&&(AttActionList.AttendanceReminder.expectedToTime=attData.expectedToTime,AttActionList.AttendanceReminder.checkOutTime=attData.expectedToTime+(attData.checkOutNotifyAfter?60*attData.checkOutNotifyAfter*1e3:0),AttActionList.AttendanceReminder.checkOutBeforeTime=attData.expectedToTime-(attData.checkOutNotifyBefore?60*attData.checkOutNotifyBefore*1e3:18e5),attData.nonWorkingMins?AttActionList.AttendanceReminder.checkOutAfterTime=attData.expectedToTime+60*attData.nonWorkingMins*1e3:AttActionList.AttendanceReminder.checkOutAfterTime=attData.expectedToTime+108e5),attData.yetToCheckIn?AttActionList.AttendanceReminder.checkInBeforeTime<=currentTime&&currentTime<AttActionList.AttendanceReminder.expectedFromTime?(AttActionList.AttendanceReminder.constuctCheckInBefore(cardContainer),AttActionList.AttendanceReminder.checkInAfterTimeOut=setTimeout(AttActionList.AttendanceReminder.constuctCheckInAfter,AttActionList.AttendanceReminder.checkInTime-currentTime)):AttActionList.AttendanceReminder.checkInBeforeTime>currentTime?(AttActionList.AttendanceReminder.checkInBeforeTimeOut=setTimeout(AttActionList.AttendanceReminder.constuctCheckInBefore,AttActionList.AttendanceReminder.checkInBeforeTime-currentTime),AttActionList.AttendanceReminder.checkInAfterTimeOut=setTimeout(AttActionList.AttendanceReminder.constuctCheckInAfter,AttActionList.AttendanceReminder.checkInTime-currentTime)):currentTime>=AttActionList.AttendanceReminder.checkInTime&&currentTime<=AttActionList.AttendanceReminder.expectedToTime?AttActionList.AttendanceReminder.constuctCheckInAfter(cardContainer):currentTime<=AttActionList.AttendanceReminder.checkInTime&&(AttActionList.AttendanceReminder.checkInAfterTimeOut=setTimeout(AttActionList.AttendanceReminder.constuctCheckInAfter,AttActionList.AttendanceReminder.checkInTime-currentTime)):attData.checkInOpen&&(AttActionList.AttendanceReminder.checkOutBeforeTime<=currentTime&&currentTime<AttActionList.AttendanceReminder.expectedToTime?(AttActionList.AttendanceReminder.constuctCheckOutBefore(cardContainer),AttActionList.AttendanceReminder.checkOutAfterTimeOut=setTimeout(AttActionList.AttendanceReminder.constuctCheckOutAfter,AttActionList.AttendanceReminder.checkOutTime-currentTime)):AttActionList.AttendanceReminder.checkOutBeforeTime>currentTime?(AttActionList.AttendanceReminder.checkOutBeforeTimeOut=setTimeout(AttActionList.AttendanceReminder.constuctCheckOutBefore,AttActionList.AttendanceReminder.checkOutBeforeTime-currentTime),AttActionList.AttendanceReminder.checkOutAfterTimeOut=setTimeout(AttActionList.AttendanceReminder.constuctCheckOutAfter,AttActionList.AttendanceReminder.checkOutTime-currentTime)):currentTime>=AttActionList.AttendanceReminder.checkOutTime&&currentTime<=AttActionList.AttendanceReminder.checkOutAfterTime?AttActionList.AttendanceReminder.constuctCheckOutAfter(cardContainer):currentTime<=AttActionList.AttendanceReminder.checkOutTime&&(AttActionList.AttendanceReminder.checkOutAfterTimeOut=setTimeout(AttActionList.AttendanceReminder.constuctCheckOutAfter,AttActionList.AttendanceReminder.checkOutTime-currentTime)))},constuctCheckInBefore:function(cardContainer){clearTimeout(AttActionList.AttendanceReminder.checkInBeforeTimeOut),void 0!=cardContainer&&cardContainer||(cardContainer=ActionList.Card.wrapperEle.find("#actionList_ATTENDANCE"));var currentTime=(new Date).getTime();currentTime<AttActionList.AttendanceReminder.expectedFromTime&&currentTime>=AttActionList.AttendanceReminder.checkInBeforeTime&&(AttActionList.AttendanceReminder.constructAttReminderCard(cardContainer,!0,!0,currentTime),setTimeout(AttActionList.AttendanceReminder.removeCheckInBefore,AttActionList.AttendanceReminder.expectedFromTime-currentTime),AttActionList.AttendanceReminder.reminderRunningTimer=setInterval(AttActionList.AttendanceReminder.checkInCountDown,1e3))},removeCheckInBefore:function(){var cardContainer=ActionList.Card.wrapperEle.find("#actionList_ATTENDANCE");cardContainer.find("#att_checkIn_before").length>0&&cardContainer.find("#att_checkIn_before").remove(),clearTimeout(AttActionList.AttendanceReminder.checkInBeforeTimeOut),clearInterval(AttActionList.AttendanceReminder.reminderRunningTimer)},constuctCheckInAfter:function(cardContainer){clearTimeout(AttActionList.AttendanceReminder.checkInAfterTimeOut),void 0!=cardContainer&&cardContainer||(cardContainer=ActionList.Card.wrapperEle.find("#actionList_ATTENDANCE"));var currentTime=(new Date).getTime();currentTime<=AttActionList.AttendanceReminder.expectedToTime&&currentTime>AttActionList.AttendanceReminder.checkInTime&&(AttActionList.AttendanceReminder.constructAttReminderCard(cardContainer,!0,!1,currentTime),setTimeout(AttActionList.AttendanceReminder.removeCheckInAfter,AttActionList.AttendanceReminder.expectedToTime-currentTime))},removeCheckInAfter:function(){var cardContainer=ActionList.Card.wrapperEle.find("#actionList_ATTENDANCE");cardContainer.find("#att_checkIn_after").length>0&&cardContainer.find("#att_checkIn_after").remove(),clearTimeout(AttActionList.AttendanceReminder.checkInAfterTimeOut)},constuctCheckOutBefore:function(cardContainer){clearTimeout(AttActionList.AttendanceReminder.constuctCheckOutBefore),void 0!=cardContainer&&cardContainer||(cardContainer=ActionList.Card.wrapperEle.find("#actionList_ATTENDANCE"));var currentTime=(new Date).getTime();currentTime>=AttActionList.AttendanceReminder.checkOutBeforeTime&&currentTime<AttActionList.AttendanceReminder.expectedToTime&&(AttActionList.AttendanceReminder.constructAttReminderCard(cardContainer,!1,!0,currentTime),setTimeout(AttActionList.AttendanceReminder.removeCheckOutBefore,AttActionList.AttendanceReminder.expectedToTime-currentTime),AttActionList.AttendanceReminder.reminderRunningTimer=setInterval(AttActionList.AttendanceReminder.checkOutCountDown,1e3))},removeCheckOutBefore:function(){var cardContainer=ActionList.Card.wrapperEle.find("#actionList_ATTENDANCE");cardContainer.find("#att_checkOut_before").length>0&&cardContainer.find("#att_checkOut_before").remove(),clearTimeout(AttActionList.AttendanceReminder.checkOutBeforeTimeOut),clearInterval(AttActionList.AttendanceReminder.reminderRunningTimer)},constuctCheckOutAfter:function(cardContainer){clearTimeout(AttActionList.AttendanceReminder.constuctCheckOutAfter),void 0!=cardContainer&&cardContainer||(cardContainer=ActionList.Card.wrapperEle.find("#actionList_ATTENDANCE"));var currentTime=(new Date).getTime();currentTime>=AttActionList.AttendanceReminder.checkOutTime&&currentTime<=AttActionList.AttendanceReminder.checkOutAfterTime&&(AttActionList.AttendanceReminder.constructAttReminderCard(cardContainer,!1,!1,currentTime),setTimeout(AttActionList.AttendanceReminder.removeCheckOutAfter,AttActionList.AttendanceReminder.checkOutAfterTime-currentTime))},removeCheckOutAfter:function(){var cardContainer=ActionList.Card.wrapperEle.find("#actionList_ATTENDANCE");cardContainer.find("#att_checkOut_after")&&cardContainer.find("#att_checkOut_after").remove(),clearTimeout(AttActionList.AttendanceReminder.checkOutAfterTimeOut)},constructAttReminderCard:function(cardContainer,isCheckin,isBefore,currentTime){if(isCheckin?AttActionList.AttendanceReminder.removeCheckOutReminders():AttActionList.AttendanceReminder.removeCheckInReminders(),!AttActionList.AttendanceReminder.avoidConstructingReminders){cardContainer.addClass("zpl_msplst");var cardId=isCheckin?"att_checkIn":"att_checkOut",cardHtml='<div id="'+(cardId+=isBefore?"_before":"_after")+'"><span class="PI_s_attnd icn"></span>';if(cardHtml+='<div class="zpl_msp-dts"><div class="zpl_msp-name"><div class="zpl_msp-title">',cardHtml+=isCheckin?ZPI18N.getString("zp.att.shift.checkin.reminder"):ZPI18N.getString("zp.att.shift.checkOut.reminder"),cardHtml+="</div></div>",cardHtml+="<div><em>",isBefore){var diffInSecs=(isCheckin?AttActionList.AttendanceReminder.expectedFromTime-currentTime:AttActionList.AttendanceReminder.expectedToTime-currentTime)/1e3,sec=parseInt(diffInSecs%60),min=parseInt((diffInSecs-sec)/60%60),hrs=parseInt((diffInSecs-min)/3600),reminderHours=Attendance.disTwoDigit(0)+":"+Attendance.disTwoDigit(min)+" "+ZPI18N.getString("zp.hrs");min<=0&&hrs<=0&&(reminderHours=Attendance.disTwoDigit(sec)+" "+ZPI18N.getString("zp.lms.seconds")),cardHtml+=isCheckin?ZPI18N.getString("zp.att.shift.checkin.before"):ZPI18N.getString("zp.att.shift.checkOut.before"),cardHtml+='</em> <em id="reminderHrs">'+reminderHours+"</em>"}else cardHtml+=isCheckin?ZPI18N.getString("zp.att.shift.checkin.after"):ZPI18N.getString("zp.att.shift.checkOut.after"),cardHtml+="</em>";if(cardHtml+="</div>",cardHtml+="</div>",isCheckin)cardHtml+='<div class="zpl_compoffar w150"><span class="zpl_progtitle"><b>'+AttActionList.AttendanceReminder.shiftName+"</b></span>",cardHtml+="<div><span><em>"+Attendance.disTime(AttActionList.AttendanceReminder.shiftFtime,!1,!0)+"</em>-<em>"+Attendance.disTime(AttActionList.AttendanceReminder.shiftTtime,!1,!0)+"</em></span>",cardHtml+="</div>",cardHtml+="</div>",AttActionList.AttendanceReminder.allowUIEntry||(cardHtml+='<div class="zpl_msp-act" onclick="TAMSUtil.Attendance.punch()"><div class="zpl_hvr"><button class="zlabel zlabel--green zlabel--medium zlabel--outline">'+ZPI18N.getString("zp.checkin")+"</button></div></div>");else{var time="";if(TAMSUtil.Attendance.totalsecs){sec=parseInt(TAMSUtil.Attendance.totalsecs%60),min=parseInt((TAMSUtil.Attendance.totalsecs-sec)/60%60),hrs=parseInt((TAMSUtil.Attendance.totalsecs-min)/3600);time=Attendance.disTwoDigit(hrs)+":"+Attendance.disTwoDigit(min)+" "+ZPI18N.getString("zp.hrs")}var totHrs=""!=time?time:"00:00 "+ZPI18N.getString("zp.hrs");cardHtml+='<div class="zpl_compoffar w150"><span class="zpl_progtitle"><b>'+ZPI18N.getString("zp.totalhours")+"</b></span>",cardHtml+='<div><span id="reminder_totalHours">'+totHrs+"</span>",cardHtml+="</div>",cardHtml+="</div>",AttActionList.AttendanceReminder.allowUIEntry||(cardHtml+='<div class="zpl_msp-act" onclick="TAMSUtil.Attendance.punch()"><div class="zpl_hvr"><button class="zlabel zlabel--red zlabel--medium zlabel--outline">'+ZPI18N.getString("zp.checkout")+"</button></div></div>")}cardContainer.append(cardHtml)}},removeCheckInReminders:function(){AttActionList.AttendanceReminder.removeCheckInBefore(),AttActionList.AttendanceReminder.removeCheckInAfter()},removeCheckOutReminders:function(){AttActionList.AttendanceReminder.removeCheckOutBefore(),AttActionList.AttendanceReminder.removeCheckOutAfter()},setTimeoutBasedonWmsCallBack:function(){if(!AttActionList.AttendanceReminder.avoidConstructingReminders){var cardContainer=ActionList.Card.wrapperEle.find("#actionList_ATTENDANCE"),currentTime=(new Date).getTime();AttActionList.AttendanceReminder.checkOutBeforeTime<=currentTime&&currentTime<AttActionList.AttendanceReminder.checkOutTime?(AttActionList.AttendanceReminder.constuctCheckOutBefore(cardContainer),AttActionList.AttendanceReminder.checkOutAfterTimeOut=setTimeout(AttActionList.AttendanceReminder.constuctCheckOutAfter,AttActionList.AttendanceReminder.checkOutTime-currentTime)):AttActionList.AttendanceReminder.checkOutBeforeTime>currentTime?(AttActionList.AttendanceReminder.checkOutBeforeTimeOut=setTimeout(AttActionList.AttendanceReminder.constuctCheckOutBefore,AttActionList.AttendanceReminder.checkOutBeforeTime-currentTime),AttActionList.AttendanceReminder.checkOutAfterTimeOut=setTimeout(AttActionList.AttendanceReminder.constuctCheckOutAfter,AttActionList.AttendanceReminder.checkOutTime-currentTime)):currentTime>=AttActionList.AttendanceReminder.checkOutTime&&currentTime<=AttActionList.AttendanceReminder.checkOutAfterTime&&AttActionList.AttendanceReminder.constuctCheckOutAfter(cardContainer)}},checkInCountDown:function(){clearInterval(AttActionList.AttendanceReminder.reminderRunningTimer);var cardContainer=ActionList.Card.wrapperEle.find("#actionList_ATTENDANCE");if(cardContainer.find("#att_checkIn_before").length>0){var curTime=(new Date).getTime(),diffInSecs=(AttActionList.AttendanceReminder.expectedFromTime-curTime)/1e3,sec=parseInt(diffInSecs%60),min=parseInt((diffInSecs-sec)/60%60),hrs=parseInt((diffInSecs-min)/3600);if(sec<=0&&min<=0&&hrs<=0)return void AttActionList.AttendanceReminder.removeCheckInBefore();var reminderHours="";reminderHours=min<=0&&hrs<=0?Attendance.disTwoDigit(sec)+" "+ZPI18N.getString("zp.lms.seconds"):Attendance.disTwoDigit(hrs)+":"+Attendance.disTwoDigit(min)+" "+ZPI18N.getString("zp.hrs"),cardContainer.find("#att_checkIn_before").find("#reminderHrs").html(reminderHours),curTime<AttActionList.AttendanceReminder.expectedFromTime?AttActionList.AttendanceReminder.reminderRunningTimer=setInterval(AttActionList.AttendanceReminder.checkInCountDown,1e3):AttActionList.AttendanceReminder.removeCheckInBefore()}},checkOutCountDown:function(){clearInterval(AttActionList.AttendanceReminder.reminderRunningTimer);var cardContainer=ActionList.Card.wrapperEle.find("#actionList_ATTENDANCE");if(cardContainer.find("#att_checkOut_before").length>0){var curTime=(new Date).getTime(),diffInSecs=(AttActionList.AttendanceReminder.expectedToTime-curTime)/1e3,sec=parseInt(diffInSecs%60);if(sec<=0&&min<=0&&hrs<=0)return void AttActionList.AttendanceReminder.removeCheckOutBefore();var min=parseInt((diffInSecs-sec)/60%60),hrs=parseInt((diffInSecs-min)/3600),reminderHours="";reminderHours=min<=0&&hrs<=0?Attendance.disTwoDigit(sec)+" "+ZPI18N.getString("zp.lms.seconds"):Attendance.disTwoDigit(hrs)+":"+Attendance.disTwoDigit(min)+" "+ZPI18N.getString("zp.hrs"),cardContainer.find("#att_checkOut_before").find("#reminderHrs").html(reminderHours),curTime<AttActionList.AttendanceReminder.expectedToTime?AttActionList.AttendanceReminder.reminderRunningTimer=setInterval(AttActionList.AttendanceReminder.checkOutCountDown,1e3):AttActionList.AttendanceReminder.removeCheckOutBefore()}}},AttActionList.Shift={construct:function(cardContainer,shiftMapDetails){if(ZPeople.Module.MODULE_DATA.attendance){shiftMapping.setShiftGlobalVariables();var hideRunningTimer=ZPeople.Module.MODULE_DATA.attendance.hideRunningTimer;if(cardContainer.empty(),0===cardContainer.children().length){var page=settingsPage.container;page.closest(".main-wrp").parent().find("#actionListShiftSingleDayEdit").remove(),$(shiftMapping.getShiftMapPopupHtml()).insertAfter(page.closest(".main-wrp")),shiftMapping.hideShiftChangeDropDown()}var dayList=shiftMapDetails.dayList;cardContainer.addClass("zpl_msplst").addClass("zpl_mspgroup");var crdHtml='<div><span class="PI_s_shifts icn"></span>';crdHtml+='<div><div class="zpl_msp-dts"><div class="zpl_msp-name"><span class="zpl_msp-title">'+ZPI18N.getString("zp.wrksch")+"</span></div>",crdHtml+='<div class="d-flex d-flexclmcap10"><em>'+dayList[0].ldate+"</em>-<em>"+dayList[6].ldate+"</em></div></div>",crdHtml+='<div class="zpl_mspace-gap"><nav class="zpl_prgreslne zpl_timlnshift">',crdHtml+='<div class="zpl_shiftg" id="shiftTg"></div><ol id="dailyData"></ol></nav></div></div></div>',cardContainer.append(crdHtml);for(var shiftHtml="",dailyDataHtml="",cntnsShiftdays=0,prevDayShiftDet=void 0,index=0;index<7;index++){var currDayDet=dayList[index],curDayShiftDet=currDayDet.shift;delete curDayShiftDet.to,delete curDayShiftDet.from,JSON.stringify(curDayShiftDet)!=JSON.stringify(prevDayShiftDet)?(0!=index&&(shiftHtml+=AttActionList.Shift.getDailyShifthtml(cntnsShiftdays,prevDayShiftDet)),cntnsShiftdays=1):cntnsShiftdays+=1,prevDayShiftDet=curDayShiftDet,6==index&&(shiftHtml+=AttActionList.Shift.getDailyShifthtml(cntnsShiftdays,curDayShiftDet));var day=days[(index+weekstarts)%7],date=currDayDet.attDate.split("-")[2],isCurrentDay=currDayDet.isToday,isPrevDayExtended=currDayDet.isPrevDayExtended,totHrs="00:00"===currDayDet.tHrs?"":currDayDet.tHrs+" Hrs",status=ZSEC.Encoder.encodeForHTML(currDayDet.finalStatus),isEditAllowed=shiftMapDetails.isEditShift,showStatus=!1,className="grn";if(void 0!=status&&(showStatus=!0,className=currDayDet.clrClass),isCurrentDay&&isPrevDayExtended){var prevDate=cardContainer.find("#dailyData").children().last(),totalHourSpn=cardContainer.find("#totHrsSpn").prev();prevDate[0]&&($(prevDate).removeAttr("class"),$(prevDate).attr("class","zpl_sel"),$(totalHourSpn).removeAttr("id"),$(totalHourSpn).attr("id","shiftCard_curtotHrsSpn"))}dailyDataHtml=`<li ${isCurrentDay&&!isPrevDayExtended?' class="zpl_sel"':""} date="${currDayDet.ldate}">\n\t\t\t\t\t\t\t\t\t<div class="zpl_bdrlne"></div>\n\t\t\t\t\t\t\t\t\t<div class="zpl_prgreslnehdr">\n\t\t\t\t\t\t\t\t\t\t${isEditAllowed?'<i class="PI_edt" onclick="AttActionList.Shift.onShiftEditClick(this)"></i>':""}\n\t\t\t\t\t\t\t\t\t\t<span class="zpl_prgresicn"></span>\n\t\t\t\t\t\t\t\t\t\t<span class="zpl_prgreslnetxt">\n\t\t\t\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\t\t\t\t<em> ${day} </em>\n\t\t\t\t\t\t\t\t\t\t\t\t<b> ${date} </b>\n\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t<span class="${className}" title="${showStatus?status:""}">${showStatus?status:""}</span>\n\t\t\t\t\t\t\t\t\t\t\t<span id= ${isCurrentDay&&!isPrevDayExtended?"shiftCard_curtotHrsSpn":"totHrsSpn"}>${hideRunningTimer&&isCurrentDay?"":totHrs}</span>\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t </li>`,cardContainer.find("#dailyData").append(dailyDataHtml)}cardContainer.find("#shiftTg").append(shiftHtml)}else{var params={initmodule:JSON.stringify({modulePrefix:"attendance"})};ZPeople.Request.send("/gettabdetails/initpage",params,function(result){result.initmodule&&(ZPeople.Module.MODULE_DATA.attendance=result.initmodule,AttActionList.Shift.construct(cardContainer,shiftMapDetails))})}},getDailyShifthtml:function(cntnsShiftdays,curDayShiftDet){var shiftTime=Attendance.disTime(curDayShiftDet.fTime,!1,!0)+" - "+Attendance.disTime(curDayShiftDet.tTime,!1,!0),shiftName=curDayShiftDet.shiftName;return`<div class="zpl_shft-day${cntnsShiftdays}">\n\t\t\t\t\t\t\t\t<div class="zpl_shftdts jc${curDayShiftDet.colorCode}">\n\t\t\t\t\t\t\t\t\t<span title="${shiftName}">${shiftName}</span>\n\t\t\t\t\t\t\t\t\t<em title="${shiftTime}">${shiftTime}</em>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>`},onShiftEditClick:function(obj){ActionList.Card.shiftEditObj&&$(ActionList.Card.shiftEditObj).removeClass("zpl_db"),$(obj).attr("id","changeShiftClickButtonId"),shiftMapping.getApplicableShifts(erecno,!0,obj),ActionList.Card.shiftEditObj=obj},changeShift:function(obj){var params={erecno:erecno,shiftid:obj.id,mode:"addUserShiftMapping",update:!0,conreqcsr:csrfToken,fdate:$(ActionList.Card.shiftEditObj).closest("li").attr("date"),tdate:$(ActionList.Card.shiftEditObj).closest("li").attr("date"),loadDataForCalView:!0,updateAttEntries:!1};Attendance.isSpiceJet()||(params.updateAttEntries=!0),$.post("/AttendanceShiftAction.zp",params,function(rdata){rdata.error?rdata.error===ZPI18N.getString("zp.cannoteditpastshift")?ModuleComp.Msg.showFailureMsg(ZPI18N.getString("zp.cannoteditpastshift")):"payPeriodExceed"===rdata.error?ModuleComp.Msg.showFailureMsg(ZPI18N.getString("zp.attendance.shiftChange.immutableinfo")):"Todate is mandatory when pattern mapped"===rdata.error&&ModuleComp.Msg.showFailureMsg(ZPI18N.getString("zp.todatemandatorywhenpatternset")):(shiftMapping.hideShiftChangeDropDown(),isShiftApprConfigured?ModuleComp.Msg.showSuccessMsg(ZPI18N.getString("zp.shiftchangerequestraisedsuccess")):AttActionList.Shift.updateChangedShift())})},updateChangedShift:function(){ModuleComp.Msg.showSuccessMsg(ZPI18N.getString("zp.shiftmapeditsuccessmsg"));var param={mode:"getAttListForShift",conreqcsr:csrfToken,loadToday:!1,view:"week",preMonth:0};void 0!==weekstarts&&(param.weekStarts=weekstarts+1),param.isNewVerMySpace=!0,$.post("/AttendanceViewAction.zp",param,function(rdata){AttActionList.Shift.construct(settingsPage.container.find("#actionList_SHIFT"),rdata)})}};