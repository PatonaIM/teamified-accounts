var UserWidget={};UserWidget.cardsView={modalCof:{DEPT_MEMB_BDAY_BUDDIES:{callback:()=>UserWidget.Components.userListModel,header:ZPI18N.getString("zp.BirthdayBuddy"),params:{isDateBased:!0},skipChat:!0},DEP_NEW_HIRES:{callback:()=>UserWidget.Components.userListModel,header:ZPI18N.getString("zp.widget.newhires"),params:{isDateBased:!0},bodyClass:"zpl_msp-crdcnt zpl_mspproimg",skipChat:!0},FAVORITES:{callback:()=>UserWidget.Components.userListModel,header:ZPI18N.getString("zp.favorites"),onclick:()=>ZPeople.getUserPage},DEP_WORK_ANN:{callback:()=>UserWidget.Components.userListModel,header:ZPI18N.getString("zp.widget.work_anniversary"),bodyClass:"zpl_msp-crdcnt",skipChat:!0},DEP_RECENT_IN:{callback:()=>UserWidget.Components.userListModel,header:ZPI18N.getString("zp.widget.recently_checkin"),searchNeeded:!0,bodyClass:"zpl_msp-crdcnt"},REPORTEES:{callback:()=>UserWidget.Components.userListModel,header:ZPI18N.getString("zp.reportees"),onclick:()=>ZPeople.getUserPage,searchNeeded:!0},DEPARTMENT_MYSPACE:{callback:()=>UserWidget.Components.userListModel,header:ZPI18N.getString("zp.deptmem"),onclick:()=>ZPeople.getUserPage,searchNeeded:!0},FAVORITES_MYSPACE:{callback:()=>UserWidget.Components.userListModel,header:ZPI18N.getString("zp.favorites"),onclick:()=>ZPeople.getUserPage,searchNeeded:!0},TEAMMATES_ONLEAVE:{callback:()=>TAMSUtil.UserSpace.Leave.showMoreUsers,header:ZPI18N.getString("zp.teammateonleavewid"),onclick:()=>ZPeople.getUserPage},BIRTHDAY_BUDDIES:{callback:()=>UserWidget.Components.userListModel,header:ZPI18N.getString("zp.BirthdayBuddy"),params:{isDateBased:!0},skipChat:!0},NEW_HIRES:{callback:()=>UserWidget.Components.userListModel,header:ZPI18N.getString("zp.widget.newhires"),params:{isDateBased:!0},bodyClass:"zpl_msp-crdcnt zpl_mspproimg",skipChat:!0},COLLEAGUE_WORK_ANN:{callback:()=>UserWidget.Components.userListModel,header:ZPI18N.getString("zp.widget.work_anniversary"),bodyClass:"zpl_msp-crdcnt",skipChat:!0}},createCard:(wrap,param)=>{let container,isInit=!1,params={},confDtls=UserWidget.cardsView.modalCof[param.mode];if(confDtls.params&&(params={...confDtls.params}),params.end=param.minCount?param.minCount:4,params.isNeedCount=!0,params.mode=param.mode,!isInit&&!param.containerConstructed){let contentWrap=wrap.find('[divtype="container"]');container=$('<div class="'+("icon"==param.type?"zpl_avatarimg zpl_msp-crdcnt":"zpl_msp-crdcnt zpl_msp-lstview "+(confDtls.bodyClass?confDtls.bodyClass:""))+'">'+ZPeople.LOADING_HTML+"</div>");let widheader=void 0!=param.header?"<h5>"+param.header+"</h5>":"";contentWrap.append(widheader,container),isInit=!0}param.containerConstructed&&param.container&&(container=param.container),ZPeople.Request.send("/getUserList.zp",params,function(response){"DEP_RECENT_IN"!=param.mode||"PERMISSION_DENIED"!=response.message&&"NO_DATA"!=response.message&&"NOT_VALID"!=response.message?"icon"==param.type?UserWidget.cardsView.constructUserIconList(response,param,container):UserWidget.cardsView.constructUserList(response,param,container):$("#depRecentIN").hide()})},constructUserList:(userList,param,cardContainer)=>{param.containerConstructed&&cardContainer.html(ZPeople.LOADING_HTML),cardContainer.find("#zp_page_loading").remove();let count=param.minCount?param.minCount+1:5,conf=UserWidget.cardsView.modalCof[param.mode],i=0;userList.result?("DEP_RECENT_IN"==param.mode&&$("#depRecentIN").show(),userList.result.forEach(function(userObj){let userCard,html="";if("DEP_NEW_HIRES"==param.mode||"DEPT_MEMB_BDAY_BUDDIES"==param.mode||"NEW_HIRES"==param.mode||"BIRTHDAY_BUDDIES"==param.mode){let mode,type;if("DEP_NEW_HIRES"==param.mode||"NEW_HIRES"==param.mode)mode="NEW_HIRES",type=6,userObj.desname&&(html='<div><em title="'+userObj.desname+'">'+userObj.desname+"</em></div>");else{mode="BIRTHDAY_BUDDIES",type=5;let alreadyWished=void 0!==userList.collaPostDtl&&void 0!==userList.collaPostDtl[userObj.zuid+"_"+type];html=userObj.eno!=erecno?alreadyWished?'<div class="wish"><em class="d-flexclmcap8"><i class="PI_whatnew"></i>'+ZPI18N.getString("zp.wished")+"</em></div>":'<div class="wish"><a>'+ZPI18N.getString("zp.wish")+"</a></div>":""}userList.mode=mode,userCard=UserWidget.Components.userCard(userObj,()=>{ZPUsers.manageCollabPopup(Layout.Page.pageContWrapper.find(".main-wrp:visible"),mode,userList,type,userObj.eno,UserWidget.cardsView.setAsWished,userList)},void 0,userObj.zuid+"_"+type,html)}else if("DEP_RECENT_IN"==param.mode){let html="";if(i>=count)return;var time=-1;if(userObj.diffTime&&userObj.diffTime>=0){var hours=Math.floor(userObj.diffTime/36e5%24),minutes=Math.floor(userObj.diffTime/6e4%60);if(hours>=1){var hourI18n=ZPI18N.getString("zp.lms.feedback.hoursago");1==hours&&(hourI18n=ZPI18N.getString("zp.leavetype.hour")+" "+ZPI18N.getString("zp.ago")),time=hours+" "+hourI18n}else time=minutes<=5?ZPI18N.getString("zp.lms.feedback.justnow"):minutes+" "+ZPI18N.getString("zp.lms.feedback.minutesago")}else{if(userObj.diffTime&&userObj.diffTime<0)return;userObj.fTime&&(time=userObj.fTime)}if(userObj.inStatus&&void 0!=userObj.checkInBuilding&&""!=userObj.checkInBuilding?html+='<div title="'+ZPeople.decodeTxt(userObj.inStatus)+" ("+userObj.checkInBuilding+')">':html+="<div>",userObj.inStatus){var colourCode=Attendance.setClassToShowStatus(userObj.inColourCode);html+='<span autorefresh="true" uid="'+userObj.eno+'"  class="'+colourCode+' ">'+ZSEC.Encoder.encodeForHTML(userObj.inStatus)+"</span>",void 0!=userObj.checkInBuilding&&""!=userObj.checkInBuilding&&(html+='<em class="zpl_dots sm" id="checkInBuildingIN_Dot"></em><span class="grn zpl_ellipsis" id="checkInBuildingIN_Div"><i class="PI_building '+colourCode+' tooltip-js" id="checkInBuildingIN_Icon" title="'+userObj.checkInBuilding+'"></i></span>'),html+='<em class="zpl_msp-splt"> | </em>'}else userObj.location&&(html+="<span>"+ZSEC.Encoder.encodeForHTML(userObj.location)+"</span><em class='zpl_msp-splt'> | </em>");-1!=time&&(html+='<em title="'+time+'">'+time+"</em>"),html+="</div>",userCard=UserWidget.Components.userCard(userObj,ZPeople.getUserPage,userObj.eno,void 0,html),i++}else{let html="";userObj.desname&&(html="<div><em>"+userObj.desname+"</em></div>"),userCard=UserWidget.Components.userCard(userObj,conf.onclick,userObj.eno,void 0,html)}cardContainer.append(userCard)}),userList.count>count&&cardContainer.append($('<div class="zpl_mspmore"><a class="zpl_link" data-popup-open="teasmbday">+'+(userList.count-count)+" "+ZPI18N.getString("zp.more")+"</a></div>").on("click",function(){"DEP_RECENT_IN"==param.mode?TAMSUtil.UserSpace.Attendance.showModel(param.mode,userList):UserWidget.cardsView.showModel(param.mode)}))):cardContainer.html(UserWidget.Components.getNoDataTxt(param.mode))},constructUserIconList:(userList,param,cardContainer)=>{cardContainer.find("#zp_page_loading").remove();let count=param.minCount?param.minCount+1:5;userList.result?(userList.result.forEach(function(userObj){cardContainer.append(UserWidget.Components.userIcnCard(userObj))}),userList.count>count&&cardContainer.append($('<span class="zpl_totaltxt">+'+(userList.count-count)+"</span>").on("click",function(){UserWidget.cardsView.showModel(param.mode)}))):cardContainer.html(UserWidget.Components.getNoDataTxt(param.mode))},showModel:(mode,response)=>{let extdtls={},param={},confDtls=UserWidget.cardsView.modalCof[mode],model=Layout.Page.parentContainer.find("#"+mode);0==model.length&&(model=confDtls.callback()(confDtls.header,mode),confDtls.params&&(param={...confDtls.params}),Layout.Page.parentContainer.append(model),param.mode=mode,extdtls.param=param,extdtls.container=model.find("tbody"),extdtls.mode=mode,response?UserWidget.cardsView.constructList(response.result,extdtls,response):(UserWidget.cardsView.getUserList(extdtls),ZPeople.FireScroll.init(UserWidget.cardsView.getUserList,mode,extdtls))),model.addClass("zpl_mopen")},getUserList:dtls=>{let params={};dtls.param&&(params={...dtls.param});let start=$(dtls.container).attr("start");start?(params.start=start,dtls.container.append('<div class="zpl_Emptydata loader">'+ZPeople.LOADING_HTML+"</div>")):dtls.container.append('<div class="loader zpl_nodata"><div class="zpl_crdcnt"> <div class="zpl_Emptydata"> <div><div class="zpl_emptimg ">'+ZPeople.LOADING_HTML+"</div> </div> </div> </div></div>"),ZPeople.Request.send("/getUserList.zp",params,function(response){$(dtls.container).attr("start",response.nxtsrt),params.start&&1!=params.start||$(dtls.container).empty(),response.more&&(ZPeople.FireScroll.getFireScrollPropertie(params.mode).triggered=!1),void 0==params.start&&"NO_DATA"==response.message&&void 0==response.result&&dtls.container.append('<div class="zpl_crd zpl_nodata"><div class="zpl_crdcnt"> <div class="zpl_Emptydata"> <div><div class="zpl_emptimg zp_nd_cases"></div><p>'+ZPI18N.getString("zp.nosearchemployeefound")+"</p> </div> </div> </div></div>"),response.result&&UserWidget.cardsView.constructList(response.result,dtls,response),dtls.container.find(".zpl_Emptydata.loader").remove()})},constructList:(list,dtls,response)=>{let container=dtls.container,conf=UserWidget.cardsView.modalCof[dtls.param.mode];list.forEach(function(data){if("DEP_NEW_HIRES"==dtls.param.mode||"NEW_HIRES"==dtls.param.mode||"DEPT_MEMB_BDAY_BUDDIES"==dtls.param.mode||"BIRTHDAY_BUDDIES"==dtls.param.mode){let mode,type;"DEP_NEW_HIRES"==dtls.param.mode||"NEW_HIRES"==dtls.param.mode?(mode="NEW_HIRES",type=6):(mode="BIRTHDAY_BUDDIES",type=5),response.mode=mode;let alreadyWished=void 0!==response.collaPostDtl&&void 0!==response.collaPostDtl[data.zuid+"_"+type],html=data.eno!=erecno?alreadyWished?'<div class="wish"><em class="d-flexclmcap8"><i class="PI_whatnew"></i>'+("NEW_HIRES"===mode?ZPI18N.getString("zp.welcomenotesent"):ZPI18N.getString("zp.wished"))+"</em></div>":'<div class="wish"><a>'+("NEW_HIRES"===mode?ZPI18N.getString("zp.sendwelcomenote"):ZPI18N.getString("zp.wish"))+"</a></div>":"";container.append(UserWidget.Components.userListRow(data,()=>{ZPUsers.manageCollabPopup(Layout.Page.pageContWrapper.find(".main-wrp:visible"),mode,response,type,data.eno,UserWidget.cardsView.setAsWished,response)},void 0,data.zuid+"_"+type,html,conf.skipChat))}else if("DEP_RECENT_IN"==dtls.param.mode){let html="";var time=-1;if(data.diffTime&&data.diffTime>=0){var hours=Math.floor(data.diffTime/36e5%24),minutes=Math.floor(data.diffTime/6e4%60);if(hours>=1){var hourI18n=ZPI18N.getString("zp.lms.feedback.hoursago");1==hours&&(hourI18n=ZPI18N.getString("zp.leavetype.hour")+" "+ZPI18N.getString("zp.ago")),time=hours+" "+hourI18n}else time=minutes<=5?ZPI18N.getString("zp.lms.feedback.justnow"):minutes+" "+ZPI18N.getString("zp.lms.feedback.minutesago")}else{if(data.diffTime&&data.diffTime<0)return;data.fTime&&(time=data.fTime)}if(html='<div class="zpl_w-100">',data.inStatus){var colourCode=Attendance.setClassToShowStatus(data.inColourCode);html+='<span class="'+colourCode+' ">'+ZSEC.Encoder.encodeForHTML(data.inStatus)+"</span>",void 0!=data.checkInBuilding&&""!=data.checkInBuilding&&(html+='<em class="zpl_dots"></em><i class="PI_building '+colourCode+' tooltip-js MR10" title="'+data.checkInBuilding+'"></i><span class="'+colourCode+' zpl_ellipsis" title="'+data.checkInBuilding+'">'+data.checkInBuilding+"</span>"),html+='<em class="zpl_msp-splt"> | </em>'}else data.location&&(html+="<span>"+ZSEC.Encoder.encodeForHTML(data.location)+"</span><em class='zpl_msp-splt'> | </em>");-1!=time&&(html+="<em>"+time+"</em>"),html+="</div>",container.append(UserWidget.Components.userListRow(data,ZPeople.getUserPage,data.eno,void 0,html,conf.skipChat))}else container.append(UserWidget.Components.userListRow(data,conf.onclick?conf.onclick():void 0,data.eno,void 0,void 0,conf.skipChat))})},setAsWished:list=>{Object.keys(list.collaPostDtl).forEach(function(data){Layout.Page.parentContainer.find('[fieldid="'+data+'"] .wish').html('<em class="d-flexclmcap8"><i class="PI_whatnew"></i>'+("NEW_HIRES"===list.mode?ZPI18N.getString("zp.welcomenotesent"):ZPI18N.getString("zp.wished"))+"</em>")})}},UserWidget.Actions={favouriteAction:function(Obj,erecno,isfav){Obj.off("click"),Obj.css({"pointer-events":"none",color:"var(--thmgrybg1)"});var title,successMsg,params={};params.mode=isfav?"removemyFavorites":"markasFav",params.erecnos=erecno,ZPeople.Request.send("/favouriteaction.zp",params,function(data){let isFav=!!data[0].isFav;isFav?(Obj.addClass("org"),title=ZPI18N.getString("zp.unmarkfromfavorites"),successMsg="zp.addedasfavoritemsgsuccess"):(Obj.removeClass("org"),title=ZPI18N.getString("zp.markasfavorite"),successMsg="zp.removedfromfavoritemsgsuccess"),Obj.on("click",function(){UserWidget.Actions.favouriteAction($(this),erecno,isFav)}),Obj.attr("title",title),Obj.removeAttr("style"),ZPSearch.Page.isNeedRefresh=!0,ZPeople.Message.success(ZPI18N.getString(successMsg))},void 0,()=>{ZPeople.Message.failure(ZPI18N.getString(isfav?"zp.lms.unabletoremovefromfavourites":"zp.lms.unabletoaddtofavourites")),Obj.removeAttr("style"),Obj.on("click",function(){UserWidget.Actions.favouriteAction($(this),erecno,isfav)})})},searchUser:(model,params,searchStr)=>{let prevSearchStr=params.param.searchedTerm;if(ZPUtil.Validation.isEmpty(searchStr)?delete params.param.searchedTerm:params.param.searchedTerm=searchStr,void 0!=prevSearchStr&&prevSearchStr!=params.param.searchedTerm||params.param.searchedTerm&&void 0==prevSearchStr&&params.param.searchedTerm.length>1){let container=$(params.container);container.empty(),container.removeAttr("start"),UserWidget.cardsView.getUserList(params)}}},UserWidget.Components={userListModel:(header,id,needSearch,searchCallBack,searchParam,isNeedFooder,mode)=>{let model=$('<div id="'+id+'" class="zpl_mdl zpl_mcenter zpl_servcicn zpl_mopen" ><div class="zpl_minr"><div class="zpl_mhder"><div><h4>'+header+'</h4></div><a class="_cls PI_cls"></a></div><div class="zpl_mcnt"><div class="zpl_crd"><div class="zpl_crdcnt">'+(needSearch?'<div class="zpl_secn zpl_tblfxd"><div class="zpl_btnmnu P0I"><div><div class="zpl_search zpl_srchsml"><input placeholder="'+ZPI18N.getString("zp.searchemployee")+'" class="searchuser ztextbox"><i class="PI_lens"></i><i id="clsSearch" class="PI_cls"></i></div></div></div></div>':"")+("GETUSERLISTBYSTATUS"!=mode?'<div class="zpl_tblres mdl_maxhgt zpl_minhgt400" scroll="enabled"><table class="zpl_tbl wd100_per"><tbody></tbody></table></div>':'<div id="listEmpByStatus"></div>')+"</div></div></div>"+(isNeedFooder?'<div class="zpl_mfoter"><button type="button" class="zlabel zlabel--outline zlabel--medium cancel">'+ZPI18N.getString("zp.cancel")+"</button></div>":"")+"</div></div>");if(model.find("._cls.PI_cls, button.cancel").on("click",function(){model.remove()}),needSearch&&ZPUtil.Validation.isFunction(searchCallBack)){let close=model.find("#clsSearch");model.data("isAllowed",!0),model.find("input.searchuser").on("keyup",function(){ZPUtil.Validation.isEmpty(model.find("input.searchuser").val().trim())?close.removeClass("DIBI"):close.addClass("DIBI"),model.data("isAllowed")&&model.find("input.searchuser").val().trim().length<=100&&(model.data("isAllowed",!1),setTimeout(function(){model.data("isAllowed",!0),searchCallBack(model,searchParam,model.find("input.searchuser").val().trim())},600))}),close.on("click",function(){model.find("input.searchuser").val(""),close.removeClass("DIBI"),searchCallBack(model,searchParam,model.find("input.searchuser").val().trim())})}return model},userListModelCommon:mode=>{let extdtls={},param={},model=Layout.Page.parentContainer.find("#"+mode+"_msid"),confDtls=UserWidget.cardsView.modalCof[mode];0==model.length&&(model=UserWidget.Components.userListModel(confDtls.header,mode+"_msid",confDtls.searchNeeded,UserWidget.Actions.searchUser,extdtls),confDtls.params&&(param={...confDtls.params}),Layout.Page.parentContainer.append(model),param.mode=mode,extdtls.param=param,extdtls.container=model.find("tbody"),extdtls.mode=mode,ZPeople.FireScroll.init(UserWidget.cardsView.getUserList,mode+"_msid",extdtls),UserWidget.cardsView.getUserList(extdtls)),model.addClass("zpl_mopen")},userListRow:(userData,callback,param,id,html,skipChat)=>{let attnstatus="";if(userData.leaveAttStat){var leaveAttStat=ZPeople.decodeTxt(userData.leaveAttStat),colourClass=Attendance.setClassToShowStatus(userData.colourCode);Attendance.isLeaveAvail(userData.colourCode)&&(leaveAttStat=userData.leaveAttStat),attnstatus='<span class="'+colourClass+' ">'+leaveAttStat+"</span>",void 0!=userData.checkInBuilding&&""!=userData.checkInBuilding&&(attnstatus+='<em class="zpl_dots"></em><i class="PI_building grn tooltip-js MR10" title="'+userData.checkInBuilding+'"></i><span class="'+colourClass+' " zpl_ellipsis" title="'+userData.checkInBuilding+'">'+userData.checkInBuilding+"</span>"),Layout.Page.parentContainer.find('[autorefresh="true"][uid="'+userData.eno+'"]').attr("class",colourClass).html(leaveAttStat)}let userObj=$('<tr><td><div class="zpl_em"><div class="zpl_emimg"><img src="'+userData.photo+'"><span cstus="true" uid="'+userData.zuid+'"></span></div><div class="zpl_emdts zpl_ellipsis w400"><div><em>'+userData.eid+" - </em><b>"+userData.name+"</b></div>"+attnstatus+(html||"")+"</div></div></td>"+(!skipChat&&userData.zuid&&userData.zuid!==_LOGGEDIN_ZUID&&"true"==ZPeople.ISCHAT?'<td width="70"><div hvr="true" class="zpl_hvr"><i chat_comm="true" uid="'+userData.zuid+'" data-title-position="right" title="'+ZPI18N.getString("zp.chatandcall")+'" tabindex="0" class="PI_pharw"></i></div></td>':"")+"</tr>");return id&&userObj.attr("fieldid",id),ZPUtil.Validation.isFunction(callback)&&userObj.find(".zpl_emimg,.zpl_emdts").off("click").on("click",function(){callback(param)}),userObj},userCard:(userObj,callback,param,id,exthtml)=>{let info=$('<div class="zpl_em"><div class="zpl_emimg CP"><img alt="" src="'+userObj.photo+'"></div><div class="zpl_emdts CP"><div><em>'+userObj.eid+" - </em><b>"+userObj.name+"</b></div>"+(exthtml||"")+"</div></div>");return id&&info.attr("fieldid",id),ZPUtil.Validation.isFunction(callback)&&info.find(".zpl_emimg,.zpl_emdts").off("click").on("click",function(){callback(param)}),info},userIcnCard:(userObj,callback,param)=>{let icnCard=$('<div class="zpl_em" popup="user" empid="'+userObj.eno+'" isusrzuid="false"><div class="zpl_emimg"><img src="'+userObj.photo+'"></div></div>');return ZPUtil.Validation.isFunction(callback)&&icnCard.find(".zpl_emimg").off("click").on("click",function(){callback(param)}),icnCard},getNoDataTxt:function(mode){let key;return"BIRTHDAY_BUDDIES"===mode||"DEPT_MEMB_BDAY_BUDDIES"===mode||"FAVORITES_ON_BDAY_BUDDIES"===mode||"SEARCH_USER_ON_BDAY_BUDDIES"===mode?key="zp.nobirthdaycelebrations":"NEW_HIRES"===mode||"DEP_NEW_HIRES"===mode?key="zp.5_0_nonewhires":"FAVORITES"===mode?key="zp.nofavoritefound":"DEP_WORK_ANN"===mode?key="zp.noworkanniversarycelebrations":"DEPT_FILES"===mode&&(key="zp.esign.nofiles"),'<div id="emptPage_'+mode+'" class="zpl_nodata"> <div class="zpl_crdcnt"> <div class="zpl_Emptydata"> <div><p>'+ZPI18N.getString(key)+"</p> </div> </div> </div> </div>"},getNoDataHtml:function(imgClass,text){return'<div id="emptPage" class="zpl_crd zpl_nodata"> <div class="zpl_crdcnt"> <div class="zpl_Emptydata"> <div> <div class="zpl_emptimg '+imgClass+'"></div> <h4>'+ZPI18N.getString(text)+"</h4> <p></p> </div> </div> </div> </div>"},card:(header,content)=>{let card=$('<div class="zpl_msplst"><div class="zpl_msp-crdlst">'+(void 0!=header?"<h5>"+header+"</h5>":"")+"</div></div>");return card.find(".zpl_msp-crdlst").append(content),card},getUserCard:function(info,callback,mode,param,btmTxtTyp,isNeedFavicon){var bDate;let jDateArr;var dateArray;if(mode&&("BIRTHDAY_BUDDIES"===mode||"DEPT_MEMB_BDAY_BUDDIES"===mode||"FAVORITES_ON_BDAY_BUDDIES"===mode||"SEARCH_USER_ON_BDAY_BUDDIES"===mode||"BIRTHDAY_BUDDIES_MONTH"===mode)&&(void 0!==info.empDOB&&"-"!=info.empDOB&&(dateArray=info.empDOB.split("-")),void 0!==dateArray)){var month=parseInt(dateArray[0]);bDate=dateArray[1]+" "+ZPUsers.Bday.monthNamesShort[month-1],info.displaydate=bDate}"NEW_HIRES"===mode&&(jDateArr=info.empDOJ.split("-"));let attStatus="";if(info.leaveAttStat){var leaveAttStat=ZPeople.decodeTxt(info.leaveAttStat),colourClass=Attendance.setClassToShowStatus(info.colourCode);Attendance.isLeaveAvail(info.colourCode)&&(leaveAttStat=info.leaveAttStat),attStatus='<div class="zpl_flex-center zpl_w-100"><div class="'+colourClass+' zpl_nowrap">'+leaveAttStat+"</div>",void 0!=info.checkInBuilding&&""!=info.checkInBuilding&&(attStatus+='<em class="zpl_dots"></em><div class="'+colourClass+' zpl_ellipsis zpl_flexgap2">',attStatus+='<i class="PI_building '+colourClass+' zpl_h5 tooltip-js" title="'+info.checkInBuilding+'"></i>',attStatus+='<div class="zpl_ellipsis" title="'+info.checkInBuilding+'">'+info.checkInBuilding+"</div>",attStatus+="</div></div>")}let cardAriaLabel="NEW_HIRES"===mode?'data-popup-open="newhire" aria-label="'+ZPI18N.getString("zp.lms.joineddate")+":"+jDateArr[1]+" "+ZPUsers.Bday.monthNamesShort[parseInt(jDateArr[0])-1]+","+info.name+" - "+info.eid+(ZPUtil.Validation.isEmpty(info.desname)?"":","+info.desname)+(ZPUtil.Validation.isEmpty(info.dpname)?"":","+info.dpname)+'"':"BIRTHDAY_BUDDIES"===mode||"BIRTHDAY_BUDDIES_MONTH"===mode?'data-popup-open="bday" aria-label="'+ZPI18N.getString("zp.lms.joineddate")+": "+bDate[1]+" "+ZPUsers.Bday.monthNamesShort[parseInt(bDate[0])-1]+","+info.name+" - "+info.eid+(ZPUtil.Validation.isEmpty(info.dpname)?"":","+info.desname)+(ZPUtil.Validation.isEmpty(info.dpname)?"":","+info.dpname)+'"':"",cardHtml=`<div class="zpl_dfcrd zpl_emcrd zpl_cpd" tabindex="0" ${mode?'role="listitem" aria-hidden="true"':'role="button"'} ${cardAriaLabel}> \n\t\t\t\t\t\t\t${void 0!=bDate?`<div class="zpl_tg"><b>${bDate.split(" ")[0]}</b><span>${bDate.split(" ")[1]}</span></div>`:""}\n\t\t\t\t\t\t\t${"NEW_HIRES"===mode&&jDateArr?`<div class="zpl_tg"><b>${jDateArr[1]}</b><span>${ZPUsers.Bday.monthNamesShort[parseInt(jDateArr[0])-1]}</span></div>`:""}\n\t\t\t\t\t\t\t${info.eno!==erecno?`<div class="zpl_addfav">\n\t\t\t\t\t\t\t\t${isNeedFavicon?`<i class="PI_star_line ${info.isFav?`org" title="${ZPI18N.getString("zp.unmarkfromfavorites")}"`:`" title="${ZPI18N.getString("zp.markasfavorite")}"`} id ="zp_addfav" tabindex="0" role="button" aria-label="Favourite" aria-hidden="true"></i>`:""}\n\t\t\t\t\t\t\t\t${info.zuid!==_LOGGEDIN_ZUID&&"true"==ZPeople.ISCHAT?`<i chat_comm="true" uid="${info.zuid}" aria-label="Options: Call, Chat, Video Call" tabindex="0" aria-haspopup="true" role="button" aria-hidden="true" class="PI_pharw" title="${ZPI18N.getString("zp.chatandcall")}" id = "zp_msg"></i>`:""}\n\t \t\t\t\t\t\t</div>`:""}\n\t\t\t\t\t\t\t<div class="zpl_emcrdcnt"> \n\t\t\t\t\t\t\t\t<div class="zpl_em zpl_cp"> \n\t\t\t\t\t\t\t\t\t<div class="zpl_emimg zpl_bday"> \n\t\t\t\t\t\t\t\t\t\t<img src="${info.photo}" alt="" aria-haspopup="dialog"> \n\t\t\t\t\t\t\t\t\t\t<span cstus="true" uid="${info.zuid}"></span>\n\t\t\t\t\t\t\t\t\t</div> \n\t\t\t\t\t\t\t\t</div> \n\t\t\t\t\t\t\t\t<div class="zpl_emrole"> \n\t\t\t\t\t\t\t\t\t<span class="user_dtls" aria-label="${info.name+" - "+info.eid}" aria-haspopup="dialog"><em>${info.eid}</em> - <b id="ename">${info.name}</b></span> \n\t\t\t\t\t\t\t\t\t<a class="zpl_email txttrim" href="mailto:${info.email}" tabindex="-1" aria-hidden="true">${info.email}</a>\n\t\t\t\t\t\t\t\t\t${ZPUtil.Validation.isEmpty(info.desname)?"":'<em class="desname">'+info.desname+"</em>"} \n\t\t\t\t\t\t\t\t\t${ZPUtil.Validation.isEmpty(info.dpname)?"":'<em class="txttrim depname zpl_cp" deptId="'+info.dpid+'">'+info.dpname+"</em>"}\n\t\t\t\t\t\t\t\t</div> \n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>`,userObj=$(cardHtml);switch(btmTxtTyp){case"status":userObj.find(".zpl_emrole").append(attStatus);break;case"wish":let wish="NEW_HIRES"===mode?ZPI18N.getString("zp.sendwelcomenote"):ZPI18N.getString("zp.wish");userObj.append(info.alreadyWished?'<em class="zpl_wished"><i class="PI_tick"></i>'+("NEW_HIRES"===mode?ZPI18N.getString("zp.welcomenotesent"):ZPI18N.getString("zp.wished"))+"</em>":'<a class="wish_clg" aria-label="'+wish+'"  aria-hidden="true" aria-haspopup="dialog" tabindex="0">'+wish+"</a>")}return userObj.find(".zpl_emimg,.user_dtls,.wish_clg").off("click").on("click",function(){callback(param)}),userObj.find("#zp_addfav").off("click").on("click",function(){UserWidget.Actions.favouriteAction($(this),info.eno,info.isFav)}),userObj},getClass:colourCode=>{switch(colourCode){case"#00bd9e":return"zpl_onlin";case"#e95b6d":return"zpl_oflin";case"#fccaa1":return"zpl_leav";case"#ffe5a3":return"zpl_idle";case"#9cc6e5":return"zpl_leav"}}},UserWidget.chatStatus={getChatStatusElement:function(userzuid){var chatObj=UserWidget.chatStatus.getUserChatObj(userzuid),chatStatusClass="";if("NOT_IN_CONTACT"!==chatObj){var status=chatObj.STATUS;"3"===chatObj.STYPE?"1"===status?chatStatusClass='<div class="zpl_emimgsrt"><i class="PI_phone grn"></i></div>':"4"===status?chatStatusClass='<div class="zpl_emimgsrt"><i class="PI_phone org"></i></div>':"7"===status&&(chatStatusClass='<div class="zpl_emimgsrt"><i class="PI_arwlft org"></i></div>'):(chatStatusClass='<span class="zpl_onlin"></span>',"0"===status||"2"===status||"-1"===status?chatStatusClass='<span class="zpl_oflin"></span>':"3"===status?chatStatusClass='<span class="zpl_busy"></span>':"4"===status?chatStatusClass='<span class="zpl_idle"></span>':"5"===status?chatStatusClass='<div class="zpl_emimgsrt"><i class="PI_frm_phone red"></i></div>':"7"===status&&(chatStatusClass='<div class="zpl_emimgsrt"><i class="PI_arwlft org"></i></div>'))}return""!=chatStatusClass&&(chatStatusClass=$(chatStatusClass).attr("cstus",!0).attr("uid",`${userzuid}`)),chatStatusClass},getUserChatObj:function(zuid){var zohocontacts=WmsContacts.getZohoContacts();if(void 0===zohocontacts)return"NOT_IN_CONTACT";var userContDtl=zohocontacts[zuid];return void 0===userContDtl?"NOT_IN_CONTACT":userContDtl}};