!function(e){"use strict";function t(){return p.createDocumentFragment()}function r(e){return p.createElement(e)}function o(e,t){if(!e)throw new Error("Failed to construct "+t+": 1 argument required, but only 0 present.")}function n(e){if(1===e.length)return i(e[0]);for(var r=t(),o=M.call(e),n=0;n<e.length;n++)r.appendChild(i(o[n]));return r}function i(e){return"string"==typeof e?p.createTextNode(e):e}for(var a,s,l,c,d,p=e.document,u=Object.prototype.hasOwnProperty,f=Object.defineProperty||function(e,t,r){return u.call(r,"value")?e[t]=r.value:(u.call(r,"get")&&e.__defineGetter__(t,r.get),u.call(r,"set")&&e.__defineSetter__(t,r.set)),e},h=[].indexOf||function(e){for(var t=this.length;t--&&this[t]!==e;);return t},m=function(e){var t=void 0===e.className,r=t?e.getAttribute("class")||"":e.className,o=t||"object"==typeof r,n=(o?t?r:r.baseVal:r).replace(_,"");n.length&&I.push.apply(this,n.split(g)),this._isSVG=o,this._=e},v={get:function(){return new m(this)},set:function(){}},y="dom4-tmp-".concat(Math.random()*+new Date).replace(".","-"),_=/^\s+|\s+$/g,g=/\s+/,b="classList",A=function(e,t){return this.contains(e)?t||this.remove(e):(void 0===t||t)&&(t=!0,this.add(e)),!!t},E=e.DocumentFragment&&DocumentFragment.prototype,C=e.Node,L=(C||Element).prototype,$=e.CharacterData||C,P=$&&$.prototype,w=e.DocumentType,R=w&&w.prototype,N=(e.Element||C||e.HTMLElement).prototype,O=e.HTMLSelectElement||r("select").constructor,T=O.prototype.remove,k=e.ShadowRoot,x=e.SVGElement,S=/ /g,D=function(e){var t="querySelectorAll"===e;return function(r){var o,n,i,a,s,l,c=this.parentNode;if(c){for(a=(i=this.getAttribute("id")||y)===y?i:i.replace(S,"\\ "),l=r.split(","),n=0;n<l.length;n++)l[n]="#"+a+" "+l[n];r=l.join(",")}if(i===y&&this.setAttribute("id",i),s=(c||this)[e](r),i===y&&this.removeAttribute("id"),t)for(n=s.length,o=new Array(n);n--;)o[n]=s[n];else o=s;return o}},j=function(e){"query"in e||(e.query=N.query),"queryAll"in e||(e.queryAll=N.queryAll)},I=["matches",N.matchesSelector||N.webkitMatchesSelector||N.khtmlMatchesSelector||N.mozMatchesSelector||N.msMatchesSelector||N.oMatchesSelector||function(e){var t=this.parentNode;return!!t&&-1<h.call(t.querySelectorAll(e),this)},"closest",function(e){for(var t,r=this;(t=r&&r.matches)&&!r.matches(e);)r=r.parentNode;return t?r:null},"prepend",function(){var e=this.firstChild,t=n(arguments);e?this.insertBefore(t,e):this.appendChild(t)},"append",function(){this.appendChild(n(arguments))},"before",function(){var e=this.parentNode;e&&e.insertBefore(n(arguments),this)},"after",function(){var e=this.parentNode,t=this.nextSibling,r=n(arguments);e&&(t?e.insertBefore(r,t):e.appendChild(r))},"replace",function(){this.replaceWith.apply(this,arguments)},"replaceWith",function(){var e=this.parentNode;e&&e.replaceChild(n(arguments),this)},"remove",function(){var e=this.parentNode;e&&e.removeChild(this)},"query",D("querySelector"),"queryAll",D("querySelectorAll")],M=I.slice,B=I.length;B;B-=2)if((s=I[B-2])in N||(N[s]=I[B-1]),"remove"===s&&(O.prototype[s]=function(){return 0<arguments.length?T.apply(this,arguments):N.remove.call(this)}),/^(?:before|after|replace|replaceWith|remove)$/.test(s)&&($&&!(s in P)&&(P[s]=I[B-1]),w&&!(s in R)&&(R[s]=I[B-1])),/^(?:append|prepend)$/.test(s))if(E)s in E||(E[s]=I[B-1]);else try{t().constructor.prototype[s]=I[B-1]}catch(e){}if(j(p),E)j(E);else try{j(t().constructor.prototype)}catch(e){}var F;k&&j(k.prototype),r("a").matches("a")||(N[s]=(F=N[s],function(e){return F.call(this.parentNode?this:t().appendChild(this),e)})),m.prototype={length:0,add:function(){for(var e,t=0;t<arguments.length;t++)e=arguments[t],this.contains(e)||I.push.call(this,s);this._isSVG?this._.setAttribute("class",""+this):this._.className=""+this},contains:function(e){return function(t){return-1<(B=e.call(this,s=function(e){if(!e)throw"SyntaxError";if(g.test(e))throw"InvalidCharacterError";return e}(t)))}}([].indexOf||function(e){for(B=this.length;B--&&this[B]!==e;);return B}),item:function(e){return this[e]||null},remove:function(){for(var e,t=0;t<arguments.length;t++)e=arguments[t],this.contains(e)&&I.splice.call(this,B,1);this._isSVG?this._.setAttribute("class",""+this):this._.className=""+this},toggle:A,toString:function(){return I.join.call(this," ")}},x&&!(b in x.prototype)&&f(x.prototype,b,v),b in p.documentElement?((c=r("div")[b]).add("a","b","a"),"a b"!=c&&("add"in(l=c.constructor.prototype)||(l=e.TemporaryTokenList.prototype),d=function(e){return function(){for(var t=0;t<arguments.length;)e.call(this,arguments[t++])}},l.add=d(l.add),l.remove=d(l.remove),l.toggle=A)):f(N,b,v),"contains"in L||f(L,"contains",{value:function(e){for(;e&&e!==this;)e=e.parentNode;return this===e}}),"head"in p||f(p,"head",{get:function(){return a||(a=p.getElementsByTagName("head")[0])}}),function(){for(var t,r=e.requestAnimationFrame,o=e.cancelAnimationFrame,n=["o","ms","moz","webkit"],i=n.length;!o&&i--;)r=r||e[n[i]+"RequestAnimationFrame"],o=e[n[i]+"CancelAnimationFrame"]||e[n[i]+"CancelRequestAnimationFrame"];o||(r?(t=r,r=function(e){var r=!0;return t((function(){r&&e.apply(this,arguments)})),function(){r=!1}},o=function(e){e()}):(r=function(e){return setTimeout(e,15,15)},o=function(e){clearTimeout(e)})),e.requestAnimationFrame=r,e.cancelAnimationFrame=o}();try{new e.CustomEvent("?")}catch(t){e.CustomEvent=function(e,t){function r(e,t,r,o){this.initEvent(e,t,r),this.detail=o}return function(o,n){var i=p.createEvent(e);if("string"!=typeof o)throw new Error("An event name must be provided");return"Event"==e&&(i.initCustomEvent=r),null==n&&(n=t),i.initCustomEvent(o,n.bubbles,n.cancelable,n.detail),i}}(e.CustomEvent?"CustomEvent":"Event",{bubbles:!1,cancelable:!1,detail:null})}try{new Event("_")}catch(t){if(t=function(e){function t(e,t){o(arguments.length,"Event");var r=p.createEvent("Event");return t||(t={}),r.initEvent(e,!!t.bubbles,!!t.cancelable),r}return t.prototype=e.prototype,t}(e.Event||function(){}),e.Event){var H=e.Event;Object.keys(H).forEach((function(e,r){t[e]=H[e]}))}f(e,"Event",{value:t}),Event!==t&&(Event=t)}try{new KeyboardEvent("_",{})}catch(t){t=function(t){var r,n=0,i={char:"",key:"",location:0,ctrlKey:!1,shiftKey:!1,altKey:!1,metaKey:!1,altGraphKey:!1,repeat:!1,locale:navigator.language,detail:0,bubbles:!1,cancelable:!1,keyCode:0,charCode:0,which:0};try{var a=p.createEvent("KeyboardEvent");a.initKeyboardEvent("keyup",!1,!1,e,"+",3,!0,!1,!0,!1,!1),n="+"==(a.keyIdentifier||a.key)&&3==(a.keyLocation||a.location)&&(a.ctrlKey?a.altKey?1:3:a.shiftKey?2:4)||9}catch(e){}function s(e,t,r){try{t[e]=r[e]}catch(e){}}function l(t,a){o(arguments.length,"KeyboardEvent"),a=function(e,t){for(var r in t)t.hasOwnProperty(r)&&!t.hasOwnProperty.call(e,r)&&(e[r]=t[r]);return e}(a||{},i);var l,c=p.createEvent(r),d=a.ctrlKey,u=a.shiftKey,f=a.altKey,h=a.metaKey,m=a.altGraphKey,v=n>3?function(e){for(var t=[],r=["ctrlKey","Control","shiftKey","Shift","altKey","Alt","metaKey","Meta","altGraphKey","AltGraph"],o=0;o<r.length;o+=2)e[r[o]]&&t.push(r[o+1]);return t.join(" ")}(a):null,y=String(a.key),_=String(a.char),g=a.location,b=a.keyCode||(a.keyCode=y)&&y.charCodeAt(0)||0,A=a.charCode||(a.charCode=_)&&_.charCodeAt(0)||0,E=a.bubbles,C=a.cancelable,L=a.repeat,$=a.locale,P=a.view||e;if(a.which||(a.which=a.keyCode),"initKeyEvent"in c)c.initKeyEvent(t,E,C,P,d,f,u,h,b,A);else if(0<n&&"initKeyboardEvent"in c){switch(l=[t,E,C,P],n){case 1:l.push(y,g,d,u,f,h,m);break;case 2:l.push(d,f,u,h,b,A);break;case 3:l.push(y,g,d,f,u,h,m);break;case 4:l.push(y,g,v,L,$);break;default:l.push(char,y,g,v,L,$)}c.initKeyboardEvent.apply(c,l)}else c.initEvent(t,E,C);for(y in c)i.hasOwnProperty(y)&&c[y]!==a[y]&&s(y,c,a);return c}return r=0<n?"KeyboardEvent":"Event",l.prototype=t.prototype,l}(e.KeyboardEvent||function(){}),f(e,"KeyboardEvent",{value:t}),KeyboardEvent!==t&&(KeyboardEvent=t)}try{new MouseEvent("_",{})}catch(t){t=function(t){function r(t,r){o(arguments.length,"MouseEvent");var n=p.createEvent("MouseEvent");return r||(r={}),n.initMouseEvent(t,!!r.bubbles,!!r.cancelable,r.view||e,r.detail||1,r.screenX||0,r.screenY||0,r.clientX||0,r.clientY||0,!!r.ctrlKey,!!r.altKey,!!r.shiftKey,!!r.metaKey,r.button||0,r.relatedTarget||null),n}return r.prototype=t.prototype,r}(e.MouseEvent||function(){}),f(e,"MouseEvent",{value:t}),MouseEvent!==t&&(MouseEvent=t)}}(window),function(e){function t(e,t){function o(e){if(!this||this.constructor!==o)return new o(e);this._keys=[],this._values=[],this._itp=[],this.objectOnly=t,e&&r.call(this,e)}return t||v(e,"size",{get:f}),e.constructor=o,o.prototype=e,o}function r(e){this.add?e.forEach(this.add,this):e.forEach((function(e){this.set(e[0],e[1])}),this)}function o(e){return this.has(e)&&(this._keys.splice(m,1),this._values.splice(m,1),this._itp.forEach((function(e){m<e[0]&&e[0]--}))),-1<m}function n(e){return this.has(e)?this._values[m]:void 0}function i(e,t){if(this.objectOnly&&t!==Object(t))throw new TypeError("Invalid value used as weak collection key");if(t!=t||0===t)for(m=e.length;m--&&!y(e[m],t););else m=e.indexOf(t);return-1<m}function a(e){return i.call(this,this._values,e)}function s(e){return i.call(this,this._keys,e)}function l(e,t){return this.has(e)?this._values[m]=t:this._values[this._keys.push(e)-1]=t,this}function c(e){return this.has(e)||this._values.push(e),this}function d(){(this._keys||0).length=this._values.length=0}function p(){return u(this._itp,this._values)}function u(e,t,r){var o=[0],n=!1;return e.push(o),{next:function(){var i,a=o[0];return!n&&a<t.length?(i=r?[t[a],r[a]]:t[a],o[0]++):(n=!0,e.splice(e.indexOf(o),1)),{done:n,value:i}}}}function f(){return this._values.length}function h(e,t){for(var r=this.entries();;){var o=r.next();if(o.done)break;e.call(t,o.value[1],o.value[0],this)}}var m,v=Object.defineProperty,y=function(e,t){return isNaN(e)?isNaN(t):e===t};"undefined"==typeof WeakMap&&(e.WeakMap=t({delete:o,clear:d,get:n,has:s,set:l},!0)),"undefined"!=typeof Map&&"function"==typeof(new Map).values&&(new Map).values().next||(e.Map=t({delete:o,has:s,get:n,set:l,keys:function(){return u(this._itp,this._keys)},values:p,entries:function(){return u(this._itp,this._keys,this._values)},forEach:h,clear:d})),"undefined"!=typeof Set&&"function"==typeof(new Set).values&&(new Set).values().next||(e.Set=t({has:a,add:c,delete:o,clear:d,keys:p,values:p,entries:function(){return u(this._itp,this._values,this._values)},forEach:h})),"undefined"==typeof WeakSet&&(e.WeakSet=t({delete:o,add:c,clear:d,has:a},!0))}("undefined"!=typeof exports&&"undefined"!=typeof global?global:window),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.ES6Promise=t()}(this,(function(){"use strict";function e(e){return"function"==typeof e}function t(){var e=setTimeout;return function(){return e(r,1)}}function r(){for(var e=0;e<A;e+=2)(0,O[e])(O[e+1]),O[e]=void 0,O[e+1]=void 0;A=0}function o(e,t){var r=arguments,o=this,n=new this.constructor(i);void 0===n[k]&&v(n);var a=o._state;return a?function(){var e=r[a-1];L((function(){return m(a,n,e,o._result)}))}():u(o,n,e,t),n}function n(e){if(e&&"object"==typeof e&&e.constructor===this)return e;var t=new this(i);return l(t,e),t}function i(){}function a(e){try{return e.then}catch(e){return j.error=e,j}}function s(t,r,i){r.constructor===t.constructor&&i===o&&r.constructor.resolve===n?function(e,t){t._state===S?d(e,t._result):t._state===D?p(e,t._result):u(t,void 0,(function(t){return l(e,t)}),(function(t){return p(e,t)}))}(t,r):i===j?(p(t,j.error),j.error=null):void 0===i?d(t,r):e(i)?function(e,t,r){L((function(e){var o=!1,n=function(e,t,r,o){try{e.call(t,r,o)}catch(e){return e}}(r,t,(function(r){o||(o=!0,t!==r?l(e,r):d(e,r))}),(function(t){o||(o=!0,p(e,t))}),e._label);!o&&n&&(o=!0,p(e,n))}),e)}(t,r,i):d(t,r)}function l(e,t){e===t?p(e,new TypeError("You cannot resolve a promise with itself")):function(e){var t=typeof e;return null!==e&&("object"===t||"function"===t)}(t)?s(e,t,a(t)):d(e,t)}function c(e){e._onerror&&e._onerror(e._result),f(e)}function d(e,t){e._state===x&&(e._result=t,e._state=S,0!==e._subscribers.length&&L(f,e))}function p(e,t){e._state===x&&(e._state=D,e._result=t,L(c,e))}function u(e,t,r,o){var n=e._subscribers,i=n.length;e._onerror=null,n[i]=t,n[i+S]=r,n[i+D]=o,0===i&&e._state&&L(f,e)}function f(e){var t=e._subscribers,r=e._state;if(0!==t.length){for(var o=void 0,n=void 0,i=e._result,a=0;a<t.length;a+=3)o=t[a],n=t[a+r],o?m(r,o,n,i):n(i);e._subscribers.length=0}}function h(){this.error=null}function m(t,r,o,n){var i=e(o),a=void 0,s=void 0,c=void 0,u=void 0;if(i){if(a=function(e,t){try{return e(t)}catch(e){return I.error=e,I}}(o,n),a===I?(u=!0,s=a.error,a.error=null):c=!0,r===a)return void p(r,new TypeError("A promises callback cannot return that same promise."))}else a=n,c=!0;r._state!==x||(i&&c?l(r,a):u?p(r,s):t===S?d(r,a):t===D&&p(r,a))}function v(e){e[k]=M++,e._state=void 0,e._result=void 0,e._subscribers=[]}function y(e,t){this._instanceConstructor=e,this.promise=new e(i),this.promise[k]||v(this.promise),b(t)?(this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?d(this.promise,this._result):(this.length=this.length||0,this._enumerate(t),0===this._remaining&&d(this.promise,this._result))):p(this.promise,new Error("Array Methods must be provided an Array"))}function _(e){this[k]=M++,this._result=this._state=void 0,this._subscribers=[],i!==e&&("function"!=typeof e&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof _?function(e,t){try{t((function(t){l(e,t)}),(function(t){p(e,t)}))}catch(t){p(e,t)}}(this,e):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}var g;g=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)};var b=g,A=0,E=void 0,C=void 0,L=function(e,t){O[A]=e,O[A+1]=t,2===(A+=2)&&(C?C(r):T())},$="undefined"!=typeof window?window:void 0,P=$||{},w=P.MutationObserver||P.WebKitMutationObserver,R="undefined"==typeof self&&"undefined"!=typeof process&&"[object process]"==={}.toString.call(process),N="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,O=new Array(1e3),T=void 0;T=R?function(){return process.nextTick(r)}:w?function(){var e=0,t=new w(r),o=document.createTextNode("");return t.observe(o,{characterData:!0}),function(){o.data=e=++e%2}}():N?function(){var e=new MessageChannel;return e.port1.onmessage=r,function(){return e.port2.postMessage(0)}}():void 0===$&&"function"==typeof require?function(){try{var e=require("vertx");return void 0!==(E=e.runOnLoop||e.runOnContext)?function(){E(r)}:t()}catch(e){return t()}}():t();var k=Math.random().toString(36).substring(16),x=void 0,S=1,D=2,j=new h,I=new h,M=0;return y.prototype._enumerate=function(e){for(var t=0;this._state===x&&t<e.length;t++)this._eachEntry(e[t],t)},y.prototype._eachEntry=function(e,t){var r=this._instanceConstructor,l=r.resolve;if(l===n){var c=a(e);if(c===o&&e._state!==x)this._settledAt(e._state,t,e._result);else if("function"!=typeof c)this._remaining--,this._result[t]=e;else if(r===_){var d=new r(i);s(d,e,c),this._willSettleAt(d,t)}else this._willSettleAt(new r((function(t){return t(e)})),t)}else this._willSettleAt(l(e),t)},y.prototype._settledAt=function(e,t,r){var o=this.promise;o._state===x&&(this._remaining--,e===D?p(o,r):this._result[t]=r),0===this._remaining&&d(o,this._result)},y.prototype._willSettleAt=function(e,t){var r=this;u(e,void 0,(function(e){return r._settledAt(S,t,e)}),(function(e){return r._settledAt(D,t,e)}))},_.all=function(e){return new y(this,e).promise},_.race=function(e){var t=this;return new t(b(e)?function(r,o){for(var n=e.length,i=0;i<n;i++)t.resolve(e[i]).then(r,o)}:function(e,t){return t(new TypeError("You must pass an array to race."))})},_.resolve=n,_.reject=function(e){var t=new this(i);return p(t,e),t},_._setScheduler=function(e){C=e},_._setAsap=function(e){L=e},_._asap=L,_.prototype={constructor:_,then:o,catch:function(e){return this.then(null,e)}},_.polyfill=function(){var e=void 0;if("undefined"!=typeof global)e=global;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var r=null;try{r=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===r&&!t.cast)return}e.Promise=_},_.Promise=_,_})),void 0===window.Promise&&(window.Promise=window.ES6Promise)
/**
 * @license
 * Copyright (c) 2016 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
 */,function(){"use strict";var e;if((e=document.createEvent("Event")).initEvent("foo",!0,!0),e.preventDefault(),!e.defaultPrevented){var t=Event.prototype.preventDefault;Event.prototype.preventDefault=function(){this.cancelable&&(t.call(this),Object.defineProperty(this,"defaultPrevented",{get:function(){return!0},configurable:!0}))}}var r=/Trident/.test(navigator.userAgent);if((!window.CustomEvent||r&&"function"!=typeof window.CustomEvent)&&(window.CustomEvent=function(e,t){t=t||{};var r=document.createEvent("CustomEvent");return r.initCustomEvent(e,Boolean(t.bubbles),Boolean(t.cancelable),t.detail),r},window.CustomEvent.prototype=window.Event.prototype),!window.Event||r&&"function"!=typeof window.Event){var o=window.Event;if(window.Event=function(e,t){t=t||{};var r=document.createEvent("Event");return r.initEvent(e,Boolean(t.bubbles),Boolean(t.cancelable)),r},o)for(var n in o)window.Event[n]=o[n];window.Event.prototype=o.prototype}if(!window.MouseEvent||r&&"function"!=typeof window.MouseEvent){var i=window.MouseEvent;if(window.MouseEvent=function(e,t){t=t||{};var r=document.createEvent("MouseEvent");return r.initMouseEvent(e,Boolean(t.bubbles),Boolean(t.cancelable),t.view||window,t.detail,t.screenX,t.screenY,t.clientX,t.clientY,t.ctrlKey,t.altKey,t.shiftKey,t.metaKey,t.button,t.relatedTarget),r},i)for(var n in i)window.MouseEvent[n]=i[n];window.MouseEvent.prototype=i.prototype}if(Array.from||(Array.from=function(e){return[].slice.call(e)}),!Object.assign){var a=function(e,t){for(var r,o=Object.keys(t),n=0;n<o.length;n++)e[r=o[n]]=t[r]};Object.assign=function(e,t){for(var r,o=[].slice.call(arguments,1),n=0;n<o.length;n++)(r=o[n])&&a(e,r);return e}}}(window.WebComponents),function(){var e="undefined"==typeof HTMLTemplateElement;/Trident/.test(navigator.userAgent)&&function(){var e=Document.prototype.importNode;Document.prototype.importNode=function(){var t=e.apply(this,arguments);if(t.nodeType===Node.DOCUMENT_FRAGMENT_NODE){var r=this.createDocumentFragment();return r.appendChild(t),r}return t}}();var t=Node.prototype.cloneNode,r=Document.prototype.createElement,o=Document.prototype.importNode,n=function(){if(!e){var t=document.createElement("template"),r=document.createElement("template");r.content.appendChild(document.createElement("div")),t.content.appendChild(r);var o=t.cloneNode(!0);return 0===o.content.childNodes.length||0===o.content.firstChild.content.childNodes.length||!(document.createDocumentFragment().cloneNode()instanceof DocumentFragment)}}(),i="template",a=function(){};if(e){var s=document.implementation.createHTMLDocument("template"),l=!0,c=document.createElement("style");c.textContent=i+"{display:none;}";var d=document.head;d.insertBefore(c,d.firstElementChild),a.prototype=Object.create(HTMLElement.prototype);var p=!document.createElement("div").hasOwnProperty("innerHTML");function u(e){Object.defineProperty(e,"innerHTML",{get:function(){for(var e="",t=this.content.firstChild;t;t=t.nextSibling)e+=t.outerHTML||t.data.replace(f,h);return e},set:function(e){for(s.body.innerHTML=e,a.bootstrap(s);this.content.firstChild;)this.content.removeChild(this.content.firstChild);for(;s.body.firstChild;)this.content.appendChild(s.body.firstChild)},configurable:!0})}a.decorate=function(e){if(!e.content){var t;for(e.content=s.createDocumentFragment();t=e.firstChild;)e.content.appendChild(t);if(p)e.__proto__=a.prototype;else if(e.cloneNode=function(e){return a._cloneNode(this,e)},l)try{u(e)}catch(e){l=!1}a.bootstrap(e.content)}},u(a.prototype),a.bootstrap=function(e){for(var t,r=e.querySelectorAll(i),o=0,n=r.length;o<n&&(t=r[o]);o++)a.decorate(t)},document.addEventListener("DOMContentLoaded",(function(){a.bootstrap(document)})),Document.prototype.createElement=function(){"use strict";var e=r.apply(this,arguments);return"template"===e.localName&&a.decorate(e),e};var f=/[&\u00A0<>]/g;function h(e){switch(e){case"&":return"&amp;";case"<":return"&lt;";case">":return"&gt;";case"Â ":return"&nbsp;"}}}(e||n)&&(a._cloneNode=function(e,r){var o=t.call(e,!1);return this.decorate&&this.decorate(o),r&&(o.content.appendChild(t.call(e.content,!0)),this.fixClonedDom(o.content,e.content)),o},a.prototype.cloneNode=function(e){return a._cloneNode(this,e)},a.fixClonedDom=function(e,t){if(t.querySelectorAll)for(var r,o,n=t.querySelectorAll(i),a=e.querySelectorAll(i),s=0,l=a.length;s<l;s++)o=n[s],r=a[s],this.decorate&&this.decorate(o),r.parentNode.replaceChild(o.cloneNode(!0),r)},Node.prototype.cloneNode=function(e){var r;if(this instanceof DocumentFragment){if(!e)return this.ownerDocument.createDocumentFragment();r=this.ownerDocument.importNode(this,!0)}else r=t.call(this,e);return e&&a.fixClonedDom(r,this),r},Document.prototype.importNode=function(e,t){if(e.localName===i)return a._cloneNode(e,t);var r=o.call(this,e,t);return t&&a.fixClonedDom(r,e),r},n&&(window.HTMLTemplateElement.prototype.cloneNode=function(e){return a._cloneNode(this,e)})),e&&(window.HTMLTemplateElement=a)}(),function(){"use strict";var e=new function(){},t=new Set("annotation-xml color-profile font-face font-face-src font-face-uri font-face-format font-face-name missing-glyph".split(" "));function r(e){var r=t.has(e);return e=/^[a-z][.0-9_a-z]*-[\-.0-9_a-z]*$/.test(e),!r&&e}function o(e){var t=e.isConnected;if(void 0!==t)return t;for(;e&&!(e.__CE_isImportDocument||e instanceof Document);)e=e.parentNode||(window.ShadowRoot&&e instanceof ShadowRoot?e.host:void 0);return!(!e||!(e.__CE_isImportDocument||e instanceof Document))}function n(e,t){for(;t&&t!==e&&!t.nextSibling;)t=t.parentNode;return t&&t!==e?t.nextSibling:null}function i(e,t,r){r=r||new Set;for(var o=e;o;){if(o.nodeType===Node.ELEMENT_NODE){var a=o;t(a);var s=a.localName;if("link"===s&&"import"===a.getAttribute("rel")){if((o=a.import)instanceof Node&&!r.has(o))for(r.add(o),o=o.firstChild;o;o=o.nextSibling)i(o,t,r);o=n(e,a);continue}if("template"===s){o=n(e,a);continue}if(a=a.__CE_shadowRoot)for(a=a.firstChild;a;a=a.nextSibling)i(a,t,r)}o=o.firstChild?o.firstChild:n(e,o)}}function a(e,t,r){e[t]=r}function s(){this.a=new Map,this.o=new Map,this.f=[],this.b=!1}function l(e,t){e.b=!0,e.f.push(t)}function c(e,t){e.b&&i(t,(function(t){return d(e,t)}))}function d(e,t){if(e.b&&!t.__CE_patched){t.__CE_patched=!0;for(var r=0;r<e.f.length;r++)e.f[r](t)}}function p(e,t){var r=[];for(i(t,(function(e){return r.push(e)})),t=0;t<r.length;t++){var o=r[t];1===o.__CE_state?e.connectedCallback(o):h(e,o)}}function u(e,t){var r=[];for(i(t,(function(e){return r.push(e)})),t=0;t<r.length;t++){var o=r[t];1===o.__CE_state&&e.disconnectedCallback(o)}}function f(e,t,r){var o=(r=r||{}).w||new Set,n=r.s||function(t){return h(e,t)},a=[];if(i(t,(function(t){if("link"===t.localName&&"import"===t.getAttribute("rel")){var r=t.import;r instanceof Node&&(r.__CE_isImportDocument=!0,r.__CE_hasRegistry=!0),r&&"complete"===r.readyState?r.__CE_documentLoadHandled=!0:t.addEventListener("load",(function(){var r=t.import;if(!r.__CE_documentLoadHandled){r.__CE_documentLoadHandled=!0;var i=new Set(o);i.delete(r),f(e,r,{w:i,s:n})}}))}else a.push(t)}),o),e.b)for(t=0;t<a.length;t++)d(e,a[t]);for(t=0;t<a.length;t++)n(a[t])}function h(e,t){if(void 0===t.__CE_state){var r=t.ownerDocument;if((r.defaultView||r.__CE_isImportDocument&&r.__CE_hasRegistry)&&(r=e.a.get(t.localName))){r.constructionStack.push(t);var n=r.constructor;try{try{if(new n!==t)throw Error("The custom element constructor did not produce the element being upgraded.")}finally{r.constructionStack.pop()}}catch(e){throw t.__CE_state=2,e}if(t.__CE_state=1,t.__CE_definition=r,r.attributeChangedCallback)for(r=r.observedAttributes,n=0;n<r.length;n++){var i=r[n],a=t.getAttribute(i);null!==a&&e.attributeChangedCallback(t,i,null,a,null)}o(t)&&e.connectedCallback(t)}}}function m(e,t){this.c=e,this.a=t,this.b=void 0,f(this.c,this.a),"loading"===this.a.readyState&&(this.b=new MutationObserver(this.f.bind(this)),this.b.observe(this.a,{childList:!0,subtree:!0}))}function v(e){e.b&&e.b.disconnect()}function y(){var e=this;this.b=this.a=void 0,this.f=new Promise((function(t){e.b=t,e.a&&t(e.a)}))}function _(e){if(e.a)throw Error("Already resolved.");e.a=void 0,e.b&&e.b(void 0)}function g(e){this.i=!1,this.c=e,this.m=new Map,this.j=function(e){return e()},this.g=!1,this.l=[],this.u=new m(e,document)}s.prototype.connectedCallback=function(e){var t=e.__CE_definition;t.connectedCallback&&t.connectedCallback.call(e)},s.prototype.disconnectedCallback=function(e){var t=e.__CE_definition;t.disconnectedCallback&&t.disconnectedCallback.call(e)},s.prototype.attributeChangedCallback=function(e,t,r,o,n){var i=e.__CE_definition;i.attributeChangedCallback&&-1<i.observedAttributes.indexOf(t)&&i.attributeChangedCallback.call(e,t,r,o,n)},m.prototype.f=function(e){var t=this.a.readyState;for("interactive"!==t&&"complete"!==t||v(this),t=0;t<e.length;t++)for(var r=e[t].addedNodes,o=0;o<r.length;o++)f(this.c,r[o])},g.prototype.define=function(e,t){var o,n,i,a,s,l=this;if(!(t instanceof Function))throw new TypeError("Custom element constructors must be functions.");if(!r(e))throw new SyntaxError("The element name '"+e+"' is not valid.");if(this.c.a.get(e))throw Error("A custom element with name '"+e+"' has already been defined.");if(this.i)throw Error("A custom element is already being defined.");this.i=!0;try{var c=function(e){var t=d[e];if(void 0!==t&&!(t instanceof Function))throw Error("The '"+e+"' callback must be a function.");return t},d=t.prototype;if(!(d instanceof Object))throw new TypeError("The custom element constructor's prototype is not an object.");o=c("connectedCallback"),n=c("disconnectedCallback"),i=c("adoptedCallback"),a=c("attributeChangedCallback"),s=t.observedAttributes||[]}catch(e){return}finally{this.i=!1}t={localName:e,constructor:t,connectedCallback:o,disconnectedCallback:n,adoptedCallback:i,attributeChangedCallback:a,observedAttributes:s,constructionStack:[]},function(e,t,r){e.a.set(t,r),e.o.set(r.constructor,r)}(this.c,e,t),this.l.push(t),this.g||(this.g=!0,this.j((function(){return function(e){if(!1!==e.g){e.g=!1;for(var t=e.l,r=[],o=new Map,n=0;n<t.length;n++)o.set(t[n].localName,[]);for(f(e.c,document,{s:function(t){if(void 0===t.__CE_state){var n=t.localName,i=o.get(n);i?i.push(t):e.c.a.get(n)&&r.push(t)}}}),n=0;n<r.length;n++)h(e.c,r[n]);for(;0<t.length;){n=(i=t.shift()).localName;for(var i=o.get(i.localName),a=0;a<i.length;a++)h(e.c,i[a]);(n=e.m.get(n))&&_(n)}}}(l)})))},g.prototype.get=function(e){if(e=this.c.a.get(e))return e.constructor},g.prototype.whenDefined=function(e){if(!r(e))return Promise.reject(new SyntaxError("'"+e+"' is not a valid custom element name."));var t=this.m.get(e);return t||(t=new y,this.m.set(e,t),this.c.a.get(e)&&!this.l.some((function(t){return t.localName===e}))&&_(t)),t.f},g.prototype.v=function(e){v(this.u);var t=this.j;this.j=function(r){return e((function(){return t(r)}))}},window.CustomElementRegistry=g,g.prototype.define=g.prototype.define,g.prototype.get=g.prototype.get,g.prototype.whenDefined=g.prototype.whenDefined,g.prototype.polyfillWrapFlushCallback=g.prototype.v;var b=window.Document.prototype.createElement,A=window.Document.prototype.createElementNS,E=window.Document.prototype.importNode,C=window.Document.prototype.prepend,L=window.Document.prototype.append,$=window.DocumentFragment.prototype.prepend,P=window.DocumentFragment.prototype.append,w=window.Node.prototype.cloneNode,R=window.Node.prototype.appendChild,N=window.Node.prototype.insertBefore,O=window.Node.prototype.removeChild,T=window.Node.prototype.replaceChild,k=Object.getOwnPropertyDescriptor(window.Node.prototype,"textContent"),x=window.Element.prototype.attachShadow,S=Object.getOwnPropertyDescriptor(window.Element.prototype,"innerHTML"),D=window.Element.prototype.getAttribute,j=window.Element.prototype.setAttribute,I=window.Element.prototype.removeAttribute,M=window.Element.prototype.getAttributeNS,B=window.Element.prototype.setAttributeNS,F=window.Element.prototype.removeAttributeNS,H=window.Element.prototype.insertAdjacentElement,K=window.Element.prototype.prepend,U=window.Element.prototype.append,V=window.Element.prototype.before,q=window.Element.prototype.after,z=window.Element.prototype.replaceWith,W=window.Element.prototype.remove,G=window.HTMLElement,Y=Object.getOwnPropertyDescriptor(window.HTMLElement.prototype,"innerHTML"),J=window.HTMLElement.prototype.insertAdjacentElement;function Q(e,t,r){function n(t){return function(r){for(var n=[],i=0;i<arguments.length;++i)n[i-0]=arguments[i];i=[];for(var a=[],s=0;s<n.length;s++){var l=n[s];if(l instanceof Element&&o(l)&&a.push(l),l instanceof DocumentFragment)for(l=l.firstChild;l;l=l.nextSibling)i.push(l);else i.push(l)}for(t.apply(this,n),n=0;n<a.length;n++)u(e,a[n]);if(o(this))for(n=0;n<i.length;n++)(a=i[n])instanceof Element&&p(e,a)}}r.h&&(t.prepend=n(r.h)),r.append&&(t.append=n(r.append))}var X,Z=window.customElements;if(!Z||Z.forcePolyfill||"function"!=typeof Z.define||"function"!=typeof Z.get){var ee=new s;X=ee,window.HTMLElement=function(){function t(){var t=this.constructor;if(!(o=X.o.get(t)))throw Error("The custom element being constructed was not registered with `customElements`.");var r=o.constructionStack;if(!r.length)return r=b.call(document,o.localName),Object.setPrototypeOf(r,t.prototype),r.__CE_state=1,r.__CE_definition=o,d(X,r),r;var o,n=r[o=r.length-1];if(n===e)throw Error("The HTMLElement constructor was either called reentrantly for this constructor or called multiple times.");return r[o]=e,Object.setPrototypeOf(n,t.prototype),d(X,n),n}return t.prototype=G.prototype,t}(),function(){var e=ee;a(Document.prototype,"createElement",(function(t){if(this.__CE_hasRegistry){var r=e.a.get(t);if(r)return new r.constructor}return t=b.call(this,t),d(e,t),t})),a(Document.prototype,"importNode",(function(t,r){return t=E.call(this,t,r),this.__CE_hasRegistry?f(e,t):c(e,t),t})),a(Document.prototype,"createElementNS",(function(t,r){if(this.__CE_hasRegistry&&(null===t||"http://www.w3.org/1999/xhtml"===t)){var o=e.a.get(r);if(o)return new o.constructor}return t=A.call(this,t,r),d(e,t),t})),Q(e,Document.prototype,{h:C,append:L})}(),Q(ee,DocumentFragment.prototype,{h:$,append:P}),function(){var e=ee;function t(t,r){Object.defineProperty(t,"textContent",{enumerable:r.enumerable,configurable:!0,get:r.get,set:function(t){if(this.nodeType===Node.TEXT_NODE)r.set.call(this,t);else{var n=void 0;if(this.firstChild){var i=this.childNodes,a=i.length;if(0<a&&o(this)){n=Array(a);for(var s=0;s<a;s++)n[s]=i[s]}}if(r.set.call(this,t),n)for(t=0;t<n.length;t++)u(e,n[t])}}})}a(Node.prototype,"insertBefore",(function(t,r){if(t instanceof DocumentFragment){var n=Array.prototype.slice.apply(t.childNodes);if(t=N.call(this,t,r),o(this))for(r=0;r<n.length;r++)p(e,n[r]);return t}return n=o(t),r=N.call(this,t,r),n&&u(e,t),o(this)&&p(e,t),r})),a(Node.prototype,"appendChild",(function(t){if(t instanceof DocumentFragment){var r=Array.prototype.slice.apply(t.childNodes);if(t=R.call(this,t),o(this))for(var n=0;n<r.length;n++)p(e,r[n]);return t}return r=o(t),n=R.call(this,t),r&&u(e,t),o(this)&&p(e,t),n})),a(Node.prototype,"cloneNode",(function(t,r){return t=w.call(this,t),r||(this.ownerDocument.__CE_hasRegistry?f(e,t):c(e,t)),t})),a(Node.prototype,"removeChild",(function(t){var r=o(t),n=O.call(this,t);return r&&u(e,t),n})),a(Node.prototype,"replaceChild",(function(t,r){if(t instanceof DocumentFragment){var n=Array.prototype.slice.apply(t.childNodes);if(t=T.call(this,t,r),o(this))for(u(e,r),r=0;r<n.length;r++)p(e,n[r]);return t}n=o(t);var i=T.call(this,t,r),a=o(this);return a&&u(e,r),n&&u(e,t),a&&p(e,t),i})),k&&k.get?t(Node.prototype,k):l(e,(function(e){t(e,{enumerable:!0,configurable:!0,get:function(){for(var e=[],t=0;t<this.childNodes.length;t++)e.push(this.childNodes[t].textContent);return e.join("")},set:function(e){for(;this.firstChild;)O.call(this,this.firstChild);R.call(this,document.createTextNode(e))}})}))}(),function(){var e=ee;function t(t,r){Object.defineProperty(t,"innerHTML",{enumerable:r.enumerable,configurable:!0,get:r.get,set:function(t){var n=this,a=void 0;if(o(this)&&(a=[],i(this,(function(e){e!==n&&a.push(e)}))),r.set.call(this,t),a)for(var s=0;s<a.length;s++){var l=a[s];1===l.__CE_state&&e.disconnectedCallback(l)}return this.ownerDocument.__CE_hasRegistry?f(e,this):c(e,this),t}})}function r(t,r){a(t,"insertAdjacentElement",(function(t,n){var i=o(n);return t=r.call(this,t,n),i&&u(e,n),o(t)&&p(e,n),t}))}x&&a(Element.prototype,"attachShadow",(function(e){return this.__CE_shadowRoot=x.call(this,e)})),S&&S.get?t(Element.prototype,S):Y&&Y.get?t(HTMLElement.prototype,Y):l(e,(function(e){t(e,{enumerable:!0,configurable:!0,get:function(){return w.call(this,!0).innerHTML},set:function(e){var t="template"===this.localName,r=t?this.content:this,o=b.call(document,this.localName);for(o.innerHTML=e;0<r.childNodes.length;)O.call(r,r.childNodes[0]);for(e=t?o.content:o;0<e.childNodes.length;)R.call(r,e.childNodes[0])}})})),a(Element.prototype,"setAttribute",(function(t,r){if(1!==this.__CE_state)return j.call(this,t,r);var o=D.call(this,t);j.call(this,t,r),r=D.call(this,t),e.attributeChangedCallback(this,t,o,r,null)})),a(Element.prototype,"setAttributeNS",(function(t,r,o){if(1!==this.__CE_state)return B.call(this,t,r,o);var n=M.call(this,t,r);B.call(this,t,r,o),o=M.call(this,t,r),e.attributeChangedCallback(this,r,n,o,t)})),a(Element.prototype,"removeAttribute",(function(t){if(1!==this.__CE_state)return I.call(this,t);var r=D.call(this,t);I.call(this,t),null!==r&&e.attributeChangedCallback(this,t,r,null,null)})),a(Element.prototype,"removeAttributeNS",(function(t,r){if(1!==this.__CE_state)return F.call(this,t,r);var o=M.call(this,t,r);F.call(this,t,r);var n=M.call(this,t,r);o!==n&&e.attributeChangedCallback(this,r,o,n,t)})),J?r(HTMLElement.prototype,J):H?r(Element.prototype,H):console.warn("Custom Elements: `Element#insertAdjacentElement` was not patched."),Q(e,Element.prototype,{h:K,append:U}),function(e){var t=Element.prototype;function r(t){return function(r){for(var n=[],i=0;i<arguments.length;++i)n[i-0]=arguments[i];i=[];for(var a=[],s=0;s<n.length;s++){var l=n[s];if(l instanceof Element&&o(l)&&a.push(l),l instanceof DocumentFragment)for(l=l.firstChild;l;l=l.nextSibling)i.push(l);else i.push(l)}for(t.apply(this,n),n=0;n<a.length;n++)u(e,a[n]);if(o(this))for(n=0;n<i.length;n++)(a=i[n])instanceof Element&&p(e,a)}}V&&(t.before=r(V)),V&&(t.after=r(q)),z&&a(t,"replaceWith",(function(t){for(var r=[],n=0;n<arguments.length;++n)r[n-0]=arguments[n];n=[];for(var i=[],a=0;a<r.length;a++){var s=r[a];if(s instanceof Element&&o(s)&&i.push(s),s instanceof DocumentFragment)for(s=s.firstChild;s;s=s.nextSibling)n.push(s);else n.push(s)}for(a=o(this),z.apply(this,r),r=0;r<i.length;r++)u(e,i[r]);if(a)for(u(e,this),r=0;r<n.length;r++)(i=n[r])instanceof Element&&p(e,i)})),W&&a(t,"remove",(function(){var t=o(this);W.call(this),t&&u(e,this)}))}(e)}(),document.__CE_hasRegistry=!0;var te=new g(ee);Object.defineProperty(window,"customElements",{configurable:!0,enumerable:!0,value:te})}}.call(self),
/**
@license @nocompile
Copyright (c) 2018 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
function(){"use strict";!function(){if(void 0===window.Reflect||void 0===window.customElements||window.customElements.polyfillWrapFlushCallback)return;const e=HTMLElement;window.HTMLElement={HTMLElement:function(){return Reflect.construct(e,[],this.constructor)}}.HTMLElement,HTMLElement.prototype=e.prototype,HTMLElement.prototype.constructor=HTMLElement,Object.setPrototypeOf(HTMLElement,e)}()}(),(()=>{var e={238:()=>{window.DOMPurifyCopy=window.DOMPurify?window.DOMPurify:void 0},508:function(e){e.exports=function(){function e(e,t,r,o,n,i,a){if(o||!(t in e))return Object.defineProperty&&(()=>{try{return Object.defineProperty({},"x",{}),1}catch(e){}})()?Object.defineProperty(e,t,{value:r,writable:n=!0===n,configurable:i=!0===i,enumerable:a=!0===a}):(e[t]=r,e)}!function(e,t){t&&function(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}(e.prototype,t)}(r,[{key:"debug",value:function(){var e;if(globalThis.console&&this.level!==this.LEVELS.NONE&&this.level===this.LEVELS.DEBUG){for(var t=arguments.length,r=Array(t),o=0;o<t;o++)r[o]=arguments[o];(e=globalThis.console).debug.apply(e,r.concat([performance.now()]))}}},{key:"info",value:function(){var e;if(globalThis.console&&this.level!==this.LEVELS.NONE&&!(this.level>this.LEVELS.INFO)){for(var t=arguments.length,r=Array(t),o=0;o<t;o++)r[o]=arguments[o];(e=globalThis.console).log.apply(e,r.concat([performance.now()]))}}},{key:"warn",value:function(){var e;if(globalThis.console&&this.level!==this.LEVELS.NONE&&!(this.level>this.LEVELS.WARN)){for(var t=arguments.length,r=Array(t),o=0;o<t;o++)r[o]=arguments[o];(e=globalThis.console).warn.apply(e,r.concat([performance.now()]))}}},{key:"error",value:function(){var e;if(globalThis.console&&this.level!==this.LEVELS.NONE&&!(this.level>this.LEVELS.ERROR)){for(var t=arguments.length,r=Array(t),o=0;o<t;o++)r[o]=arguments[o];(e=globalThis.console).error.apply(e,r.concat([performance.now()]))}}}]);var t=r;function r(e){if(!(this instanceof r))throw new TypeError("Cannot call a class as a function");this.LEVELS={NONE:-1,DEBUG:0,INFO:1,WARN:2,ERROR:3},e===this.LEVELS.NONE||e===this.LEVELS.DEBUG||e===this.LEVELS.INFO||e===this.LEVELS.WARN||e===this.LEVELS.ERROR?this.level=e:this.level=this.LEVELS.ERROR}var o=globalThis.ZWAF||{version:"7.2.5"},n=(t=new t,o.defineProperty||(o.defineProperty=e),o.logger||(o.logger=t),o["7.2.5"]||(o["7.2.5"]={version:"7.2.5",defineProperty:e,logger:t}),!1);function i(e,t){if(e instanceof Object)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t(r,e[r])}function a(e,t){var r;(r=Array.prototype.splice).call.apply(r,[e,e.length,0].concat((e=>{if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)})(t)))}function s(e,t){if(!e||e.constructor===Object)return e;for(var r={},o=0;o<e.length;o++){var n=e[o];r[n[t]]=n}return r}function l(e){if(e&&e.constructor===String)return e.toLowerCase();if(e.constructor===Array)for(var t=0;t<e.length;t++)e[t]=l(e[t]);return e}function c(e,t,r,o){if(Array.isArray(e))for(var n=0,i=e.length;n<i;n++)d(e,t,n,r);else for(var a in e)o&&-1!==o.indexOf(a)||d(e,t,a,r)}function d(e,t,r,o){var n;o?(n=e[r],Array.isArray(n)?(t[r]||(t[r]=[]),c(n,t[r],o)):n instanceof Object?(t[r]||(t[r]={}),c(n,t[r],o)):t[r]=n):t[r]=e[r]}function p(e,t,r){var o=2<arguments.length&&void 0!==r?r:{};if(o=Object.assign({path:"/",SameSite:"lax","max-age":864e7},o),encodeURIComponent){var n,i=encodeURIComponent(e)+"="+encodeURIComponent(t);for(n in o){i+="; "+n;var a=o[n];!0!==a&&(i+="="+a)}document.cookie=i}}function u(e,t){p(e,"",{path:1<arguments.length&&void 0!==t?t:"/","max-age":-1})}t={log:function(){var e;globalThis&&globalThis.console&&globalThis.console.log&&globalThis.navigator&&globalThis.navigator.userAgent&&!n&&(e=globalThis.navigator.userAgent.match(/opera|chrome|safari|firefox|msie|trident(?=\/)/i),n=!0,e&&e[0].search(/trident|msie/i)<0?(globalThis.console.log("%cSTOP!","color:red;font-size:xx-large;font-weight:bold;"),globalThis.console.log("%cThis is a browser feature intended for developers. Do not enter or paste code which you don't understand. It may allow attackers to steal your information or impersonate you.\nSee https://en.wikipedia.org/wiki/Self-XSS for more details","font-size:large;")):globalThis.console.log("STOP!\nThis is a browser feature intended for developers. Do not enter or paste code which you don't understand. It may allow attackers to steal your information or impersonate you.\nSee https://en.wikipedia.org/wiki/Self-XSS for more details"))}},"7.2.5"!==o.version||o.Console||o.defineProperty(o,"Console",t,!0,!1,!1,!0),o["7.2.5"].Console||o.defineProperty(o["7.2.5"],"Console",t,!0,!1,!1,!0),["_zcsr_tmp","com_chat_owner","com_avcliq_owner","wms.agent"].some((function(e){return t=e,t+="=",e=document.cookie,r=void 0,e.split("; ").forEach((function(e){if(void 0===r){var o=void 0;try{decodeURIComponent&&(o=decodeURIComponent(e))}catch(t){o=e,ZWAF&&ZWAF.logger&&ZWAF.logger.warn&&ZWAF.logger.warn("Error while trying to decode Cookie value!")}0===o.indexOf(t)&&(r=o.substring(t.length))}})),!!r;var t,r}))&&o&&o["7.2.5"]&&o["7.2.5"].Console&&o["7.2.5"].Console.log();var f="_zwaf_ua";t={init:function(){u(f);var e=!!globalThis.ulaa,t=navigator&&navigator.brave&&"function"==typeof navigator.brave.isBrave;e?p(f,"Ulaa"):t?p(f,"Brave"):globalThis.addEventListener("load",(function(){globalThis.setTimeout((function(){globalThis.getComputedStyle(globalThis.document.documentElement).getPropertyValue("--arc-palette-background")&&p(f,"Arc")}),1e3)}))},disable:function(){u(f)}},"7.2.5"!==o.version||o.UAIdentification||o.defineProperty(o,"UAIdentification",t,!0,!1,!1,!0),o["7.2.5"].UAIdentification||o.defineProperty(o["7.2.5"],"UAIdentification",t,!0,!1,!1,!0),o&&o["7.2.5"]&&o["7.2.5"].UAIdentification&&o["7.2.5"].UAIdentification.init();var h,m=Object.hasOwnProperty,v=Object.setPrototypeOf,y=Object.isFrozen,_=Object.getPrototypeOf,g=Object.getOwnPropertyDescriptor,b=Object.freeze,A=(t=Object.seal,Object.create),E="undefined"!=typeof Reflect&&Reflect,C=(C=E.apply)||function(e,t,r){return e.apply(t,r)},L=(b=b||function(e){return e},t=t||function(e){return e},(L=E.construct)||function(e,t){return new(Function.prototype.bind.apply(e,[null].concat((e=>{if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)})(t))))}),$=j(Array.prototype.forEach),P=j(Array.prototype.pop),w=j(Array.prototype.push),R=j(String.prototype.toLowerCase),N=j(String.prototype.toString),O=j(String.prototype.match),T=j(String.prototype.replace),k=j(String.prototype.indexOf),x=j(String.prototype.trim),S=j(RegExp.prototype.test),D=(h=TypeError,function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return L(h,t)});function j(e){return function(t){for(var r=arguments.length,o=Array(1<r?r-1:0),n=1;n<r;n++)o[n-1]=arguments[n];return C(e,t,o)}}function I(e,t,r){r=r||R,v&&v(e,null);for(var o=t.length;o--;){var n,i=t[o];"string"==typeof i&&(n=r(i))!==i&&(y(t)||(t[o]=n),i=n),e[i]=!0}return e}function M(e){var t=A(null),r=void 0;for(r in e)!0===C(m,e,[r])&&(t[r]=e[r]);return t}function B(e,t){for(;null!==e;){var r=g(e,t);if(r){if(r.get)return j(r.get);if("function"==typeof r.value)return j(r.value)}e=_(e)}return function(e){return null}}var F=b(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),H=b(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),K=b(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),U=b(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),V=b(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),q=b(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),z=b(["#text"]),W=b(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),G=b(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Y=b(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),J=b(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),Q=t(/\{\{[\w\W]*|[\w\W]*\}\}/gm),X=t(/<%[\w\W]*|[\w\W]*%>/gm),Z=t(/\${[\w\W]*/gm),ee=t(/^data-[\-\w.\u00B7-\uFFFF]/),te=t(/^aria-[\-\w]+$/),re=t(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),oe=t(/^(?:\w+script|data):/i),ne=t(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),ie=t(/^html$/i),ae=t(/^[a-z][.\w]*(-[.\w]+)+$/i),se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function le(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}E=function e(t){var r=0<arguments.length&&void 0!==t?t:"undefined"==typeof window?null:window,o=function(t){return e(t)};if(o.version="2.5.8",o.removed=[],r&&r.document&&9===r.document.nodeType){var n=r.document,i=r.document,a=r.DocumentFragment,s=(t=r.HTMLTemplateElement,r.Node),l=r.Element,c=r.NodeFilter,d=void 0===(ce=r.NamedNodeMap)?r.NamedNodeMap||r.MozNamedAttrMap:ce,p=r.HTMLFormElement,u=r.DOMParser,f=r.trustedTypes,h=B(ce=l.prototype,"cloneNode"),m=B(ce,"nextSibling"),v=B(ce,"childNodes"),y=B(ce,"parentNode"),_=("function"==typeof t&&(ce=i.createElement("template")).content&&ce.content.ownerDocument&&(i=ce.content.ownerDocument),((e,t)=>{if("object"!==(void 0===e?"undefined":se(e))||"function"!=typeof e.createPolicy)return null;var r=null,o="data-tt-policy-suffix";t="dompurify"+((r=t.currentScript&&t.currentScript.hasAttribute(o)?t.currentScript.getAttribute(o):r)?"#"+r:"");try{return e.createPolicy(t,{createHTML:function(e){return e},createScriptURL:function(e){return e}})}catch(e){return null}})(f,n)),g=_?_.createHTML(""):"",A=(t=i).implementation,E=t.createNodeIterator,C=t.createDocumentFragment,L=t.getElementsByTagName,j=n.importNode,ce={};try{ce=M(i).documentMode?i.documentMode:{}}catch(t){}var de,pe={},ue=(o.isSupported="function"==typeof y&&A&&void 0!==A.createHTMLDocument&&9!==ce,Q),fe=X,he=Z,me=ee,ve=te,ye=oe,_e=ne,ge=ae,be=re,Ae=null,Ee=I({},[].concat(le(F),le(H),le(K),le(V),le(z))),Ce=!0,Le=null,$e=I({},[].concat(le(W),le(G),le(Y),le(J))),Pe=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),we=null,Re=null,Ne=!0,Oe=!0,Te=!1,ke=!0,xe=!1,Se=!0,De=!1,je=!1,Ie=!1,Me=!1,Be=!1,Fe=!1,He=!0,Ke=!1,Ue=!0,Ve=!1,qe={},ze=null,We=I({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),Ge=null,Ye=I({},["audio","video","img","source","image","track"]),Je=null,Qe=I({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Xe="http://www.w3.org/1998/Math/MathML",Ze="http://www.w3.org/2000/svg",et="http://www.w3.org/1999/xhtml",tt=et,rt=null,ot=I({},[Xe,Ze,et],N),nt=void 0,it=["application/xhtml+xml","text/html"],at=void 0,st=null,lt=i.createElement("form"),ct=function(e){return e instanceof RegExp||e instanceof Function},dt=function(e){st&&st===e||(e=M(e=e&&"object"===(void 0===e?"undefined":se(e))?e:{}),nt=nt=-1===it.indexOf(e.PARSER_MEDIA_TYPE)?"text/html":e.PARSER_MEDIA_TYPE,at="application/xhtml+xml"===nt?N:R,Ae="ALLOWED_TAGS"in e?I({},e.ALLOWED_TAGS,at):Ee,Le="ALLOWED_ATTR"in e?I({},e.ALLOWED_ATTR,at):$e,rt="ALLOWED_NAMESPACES"in e?I({},e.ALLOWED_NAMESPACES,N):ot,Je="ADD_URI_SAFE_ATTR"in e?I(M(Qe),e.ADD_URI_SAFE_ATTR,at):Qe,Ge="ADD_DATA_URI_TAGS"in e?I(M(Ye),e.ADD_DATA_URI_TAGS,at):Ye,ze="FORBID_CONTENTS"in e?I({},e.FORBID_CONTENTS,at):We,we="FORBID_TAGS"in e?I({},e.FORBID_TAGS,at):{},Re="FORBID_ATTR"in e?I({},e.FORBID_ATTR,at):{},qe="USE_PROFILES"in e&&e.USE_PROFILES,Ne=!1!==e.ALLOW_ARIA_ATTR,Oe=!1!==e.ALLOW_DATA_ATTR,Te=e.ALLOW_UNKNOWN_PROTOCOLS||!1,ke=!1!==e.ALLOW_SELF_CLOSE_IN_ATTR,xe=e.SAFE_FOR_TEMPLATES||!1,Se=!1!==e.SAFE_FOR_XML,De=e.WHOLE_DOCUMENT||!1,Me=e.RETURN_DOM||!1,Be=e.RETURN_DOM_FRAGMENT||!1,Fe=e.RETURN_TRUSTED_TYPE||!1,Ce=!1!==e.DONT_TRIM,Ie=e.FORCE_BODY||!1,He=!1!==e.SANITIZE_DOM,Ke=e.SANITIZE_NAMED_PROPS||!1,Ue=!1!==e.KEEP_CONTENT,Ve=e.IN_PLACE||!1,be=e.ALLOWED_URI_REGEXP||be,tt=e.NAMESPACE||et,Pe=e.CUSTOM_ELEMENT_HANDLING||{},e.CUSTOM_ELEMENT_HANDLING&&ct(e.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Pe.tagNameCheck=e.CUSTOM_ELEMENT_HANDLING.tagNameCheck),e.CUSTOM_ELEMENT_HANDLING&&ct(e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Pe.attributeNameCheck=e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),e.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(Pe.allowCustomizedBuiltInElements=e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),xe&&(Oe=!1),Be&&(Me=!0),qe&&(Ae=I({},[].concat(le(z))),Le=[],!0===qe.html&&(I(Ae,F),I(Le,W)),!0===qe.svg&&(I(Ae,H),I(Le,G),I(Le,J)),!0===qe.svgFilters&&(I(Ae,K),I(Le,G),I(Le,J)),!0===qe.mathMl)&&(I(Ae,V),I(Le,Y),I(Le,J)),e.ADD_TAGS&&I(Ae=Ae===Ee?M(Ae):Ae,e.ADD_TAGS,at),e.ADD_ATTR&&I(Le=Le===$e?M(Le):Le,e.ADD_ATTR,at),e.ADD_URI_SAFE_ATTR&&I(Je,e.ADD_URI_SAFE_ATTR,at),e.FORBID_CONTENTS&&I(ze=ze===We?M(ze):ze,e.FORBID_CONTENTS,at),Ue&&(Ae["#text"]=!0),De&&I(Ae,["html","head","body"]),Ae.table&&(I(Ae,["tbody"]),delete we.tbody),b&&b(e),st=e)},pt=I({},["mi","mo","mn","ms","mtext"]),ut=I({},["annotation-xml"]),ft=I({},["title","style","font","a","script"]),ht=I({},H),mt=(I(ht,K),I(ht,U),I({},V)),vt=(I(mt,q),function(e){w(o.removed,{element:e});try{e.parentNode.removeChild(e)}catch(t){try{e.outerHTML=g}catch(t){e.remove()}}}),yt=function(e,t){try{w(o.removed,{attribute:t.getAttributeNode(e),from:t})}catch(e){w(o.removed,{attribute:null,from:t})}if(t.removeAttribute(e),"is"===e&&!Le[e])if(Me||Be)try{vt(t)}catch(e){}else try{t.setAttribute(e,"")}catch(e){}},_t=function(e){var t=void 0,r=void 0,o=(Ie?e="<remove></remove>"+e:r=(o=O(e,/^[\r\n\t ]+/))&&o[0],"application/xhtml+xml"===nt&&tt===et&&(e='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+e+"</body></html>"),_?_.createHTML(e):e);if(tt===et)try{t=(new u).parseFromString(o,nt)}catch(e){}if(!t||!t.documentElement){t=A.createDocument(tt,"template",null);try{t.documentElement.innerHTML=de?g:o}catch(e){}}return o=t.body||t.documentElement,e&&r&&o.insertBefore(i.createTextNode(r),o.childNodes[0]||null),tt===et?L.call(t,De?"html":"body")[0]:De?t.documentElement:o},gt=function(e){return E.call(e.ownerDocument||e,e,c.SHOW_ELEMENT|c.SHOW_COMMENT|c.SHOW_TEXT|c.SHOW_PROCESSING_INSTRUCTION|c.SHOW_CDATA_SECTION,null,!1)},bt=function(e){return e instanceof p&&("string"!=typeof e.nodeName||"string"!=typeof e.textContent||"function"!=typeof e.removeChild||!(e.attributes instanceof d)||"function"!=typeof e.removeAttribute||"function"!=typeof e.setAttribute||"string"!=typeof e.namespaceURI||"function"!=typeof e.insertBefore||"function"!=typeof e.hasChildNodes)},At=function(e){return"object"===(void 0===s?"undefined":se(s))?e instanceof s:e&&"object"===(void 0===e?"undefined":se(e))&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName},Et=function(e,t,r){pe[e]&&$(pe[e],(function(e){e.call(o,t,r,st)}))},Ct=function(e){if(Et("beforeSanitizeElements",e,null),!bt(e)&&!S(/[\u0080-\uFFFF]/,e.nodeName)){var t,r,n,i,a=at(e.nodeName);if(Et("uponSanitizeElement",e,{tagName:a,allowedTags:Ae}),(!e.hasChildNodes()||At(e.firstElementChild)||At(e.content)&&At(e.content.firstElementChild)||!S(/<[/\w]/g,e.innerHTML)||!S(/<[/\w]/g,e.textContent))&&!("select"===a&&S(/<template/i,e.innerHTML)||7===e.nodeType||Se&&8===e.nodeType&&S(/<[/\w]/g,e.data))){if(Ae[a]&&!we[a])return e instanceof l&&((r=y(t=e))&&r.tagName||(r={namespaceURI:tt,tagName:"template"}),n=R(t.tagName),i=R(r.tagName),!rt[t.namespaceURI]||(t.namespaceURI===Ze?r.namespaceURI===et?"svg"!==n:r.namespaceURI===Xe?"svg"!==n||"annotation-xml"!==i&&!pt[i]:!Boolean(ht[n]):t.namespaceURI===Xe?r.namespaceURI===et?"math"!==n:r.namespaceURI===Ze?"math"!==n||!ut[i]:!Boolean(mt[n]):t.namespaceURI===et?r.namespaceURI===Ze&&!ut[i]||r.namespaceURI===Xe&&!pt[i]||mt[n]||!ft[n]&&ht[n]:"application/xhtml+xml"!==nt||!rt[t.namespaceURI]))||("noscript"===a||"noembed"===a||"noframes"===a)&&S(/<\/no(script|embed|frames)/i,e.innerHTML)?(vt(e),!0):(xe&&3===e.nodeType&&(r=e.textContent,r=T(r,ue," "),r=T(r,fe," "),r=T(r,he," "),e.textContent!==r)&&(w(o.removed,{element:e.cloneNode()}),e.textContent=r),Et("afterSanitizeElements",e,null),!1);if(!we[a]&&$t(a)){if(Pe.tagNameCheck instanceof RegExp&&S(Pe.tagNameCheck,a))return!1;if(Pe.tagNameCheck instanceof Function&&Pe.tagNameCheck(a))return!1}if(Ue&&!ze[a]){var s=y(e)||e.parentNode,c=v(e)||e.childNodes;if(c&&s)for(var d=c.length-1;0<=d;--d){var p=h(c[d],!0);p.__removalCount=(e.__removalCount||0)+1,s.insertBefore(p,m(e))}}}}return vt(e),!0},Lt=function(e,t,r){if(He&&("id"===t||"name"===t)&&(r in i||r in lt))return!1;if((!Oe||Re[t]||!S(me,t))&&(!Ne||!S(ve,t)))if(!Le[t]||Re[t]){if(!($t(e)&&(Pe.tagNameCheck instanceof RegExp&&S(Pe.tagNameCheck,e)||Pe.tagNameCheck instanceof Function&&Pe.tagNameCheck(e))&&(Pe.attributeNameCheck instanceof RegExp&&S(Pe.attributeNameCheck,t)||Pe.attributeNameCheck instanceof Function&&Pe.attributeNameCheck(t))||"is"===t&&Pe.allowCustomizedBuiltInElements&&(Pe.tagNameCheck instanceof RegExp&&S(Pe.tagNameCheck,r)||Pe.tagNameCheck instanceof Function&&Pe.tagNameCheck(r))))return!1}else if(!Je[t]&&!S(be,T(r,_e,""))&&("src"!==t&&"xlink:href"!==t&&"href"!==t||"script"===e||0!==k(r,"data:")||!Ge[e])&&(!Te||S(ye,T(r,_e,"")))&&r)return!1;return!0},$t=function(e){return"annotation-xml"!==e&&O(e,ge)},Pt=function(e){var t=void 0,r=void 0,n=(Et("beforeSanitizeAttributes",e,null),e.attributes);if(n&&!bt(e)){var i={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Le,nodeName:e.nodeName.toLowerCase()};for(r=n.length;r--;){var a,s=(a=n[r]).name,l=a.namespaceURI;if(t="value"===s?a.value:x(a.value),Ce&&(t=a.value),a=at(s),i.attrName=a,i.attrValue=t,i.keepAttr=!0,i.keepElement=!0,i.forceKeepAttr=void 0,Et("uponSanitizeAttribute",e,i),!i.keepElement)return!0;if(t=i.attrValue,!i.forceKeepAttr&&(yt(s,e),i.keepAttr))if(!ke&&S(/\/>/i,t))yt(s,e);else{xe&&(t=T(t,ue," "),t=T(t,fe," "),t=T(t,he," "));var c=at(e.nodeName);if(Lt(c,a,t))if(!Ke||"id"!==a&&"name"!==a||(yt(s,e),t="user-content-"+t),Se&&S(/((--!?|])>)|<\/(style|title)/i,t))yt(s,e);else{if(_&&"object"===(void 0===f?"undefined":se(f))&&"function"==typeof f.getAttributeType&&!l)switch(f.getAttributeType(c,a)){case"TrustedHTML":t=_.createHTML(t);break;case"TrustedScriptURL":t=_.createScriptURL(t)}try{l?e.setAttributeNS(l,s,t):e.setAttribute(s,t),bt(e)?vt(e):P(o.removed)}catch(e){}}}}Et("afterSanitizeAttributes",e,null)}return!1},wt=function e(t){var r,o=gt(t);for(Et("beforeSanitizeShadowDOM",t,null);r=o.nextNode();)Et("uponSanitizeShadowNode",r,null),Ct(r),Pt(r)&&vt(r),r.content instanceof a&&e(r.content);Et("afterSanitizeShadowDOM",t,null)};o.sanitize=function(e){var t,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},l=void 0,c=void 0,d=void 0;if("string"!=typeof(e=(de=!e)?"\x3c!--\x3e":e)&&!At(e)){if("function"!=typeof e.toString)throw D("toString is not a function");if("string"!=typeof(e=e.toString()))throw D("dirty is not a string, aborting")}if(!o.isSupported){if("object"===se(r.toStaticHTML)||"function"==typeof r.toStaticHTML){if("string"==typeof e)return r.toStaticHTML(e);if(At(e))return r.toStaticHTML(e.outerHTML)}return e}if(je||dt(i),o.removed=[],Ve="string"!=typeof e&&Ve){if(e.nodeName&&(i=at(e.nodeName),!Ae[i]||we[i]))throw D("root node is forbidden and cannot be sanitized in-place")}else if(e instanceof s)1===(i=(l=_t("\x3c!----\x3e")).ownerDocument.importNode(e,!0)).nodeType&&"BODY"===i.nodeName||"HTML"===i.nodeName?l=i:l.appendChild(i);else{if(!Me&&!xe&&!De&&-1===e.indexOf("<"))return _&&Fe?_.createHTML(e):e;if(!(l=_t(e)))return Me?null:Fe?g:""}l&&Ie&&vt(l.firstChild);for(var p=gt(Ve?e:l);t=p.nextNode();)3===t.nodeType&&t===c||(Ct(t),Pt(t)?vt(t):(t.content instanceof a&&wt(t.content),c=t));if(c=null,Ve)return e;if(Me){if(Be)for(d=C.call(l.ownerDocument);l.firstChild;)d.appendChild(l.firstChild);else d=l;return Le.shadowroot||Le.shadowrootmod?j.call(n,d,!0):d}return i=De?l.outerHTML:l.innerHTML,De&&Ae["!doctype"]&&l.ownerDocument&&l.ownerDocument.doctype&&l.ownerDocument.doctype.name&&S(ie,l.ownerDocument.doctype.name)&&(i="<!DOCTYPE "+l.ownerDocument.doctype.name+">\n"+i),xe&&(i=T(i,ue," "),i=T(i,fe," "),i=T(i,he," ")),_&&Fe?_.createHTML(i):i},o.setConfig=function(e){dt(e),je=!0},o.clearConfig=function(){st=null,je=!1},o.isValidAttribute=function(e,t,r){return st||dt({}),e=at(e),t=at(t),Lt(e,t,r)},o.addHook=function(e,t){"function"==typeof t&&(pe[e]=pe[e]||[],w(pe[e],t))},o.removeHook=function(e){if(pe[e])return P(pe[e])},o.removeHooks=function(e){pe[e]&&(pe[e]=[])},o.removeAllHooks=function(){pe={}}}else o.isSupported=!1;return o}();var ce=(Object.seal||function(e){return e})(/\$\{[A-Z._]+?\}/i);function de(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}var pe=Object.freeze;return(t={FORCE_BODY:!0,ALLOWED_URI_REGEXP:!1,REUSE_CONFIG:!1,REMOVE_ONEVENTS:!0,EXTENDS:["GLOBAL_TAGS","GLOBAL_ATTR","FORBID_TAGS","FORBID_ATTR","TAG_RULES","GLOBAL_ATTR_RULES","GLOBAL_APPEND_ATTR","ADD_DATA_URI_TAGS","ADD_URI_SAFE_ATTR"],ALLOWED_STYLE:"NONE",STYLE_RULES:{FORBID_PROPS:[],FORBID_CSSRULES:[],UNSAFE_PROP_RULES:{}}}).GLOBAL_TAGS="a|abbr|acronym|address|area|article|aside|audio|b|bdi|bdo|big|blink|blockquote|body|br|button|canvas|caption|center|cite|code|col|colgroup|content|data|datalist|dd|decorator|del|details|dfn|dir|div|dl|dt|element|em|fieldset|figcaption|figure|font|footer|form|h1|h2|h3|h4|h5|h6|head|header|hgroup|hr|html|i|img|input|ins|kbd|label|legend|li|main|map|mark|marquee|menu|menuitem|meter|nav|nobr|ol|optgroup|option|output|p|pre|progress|q|rp|rt|ruby|s|samp|section|select|shadow|small|source|spacer|span|strike|strong|sub|summary|sup|table|tbody|td|template|textarea|tfoot|th|thead|time|title|tr|track|tt|u|ul|var|video|wbr|#text".split("|"),t.GLOBAL_ATTR="accept|action|align|alt|autocomplete|background|bgcolor|border|cellpadding|cellspacing|checked|cite|class|clear|color|cols|colspan|coords|datetime|default|dir|disabled|download|enctype|face|for|headers|height|hidden|high|href|hreflang|id|ismap|label|lang|list|loop|low|max|maxlength|media|method|min|multiple|name|noshade|novalidate|nowrap|open|optimum|pattern|placeholder|poster|preload|pubdate|radiogroup|readonly|rel|required|rev|reversed|role|rows|rowspan|spellcheck|scope|selected|shape|size|span|srclang|start|src|step|summary|tabindex|title|target|type|usemap|valign|value|width|xmlns|sandbox".split("|"),t.FORBID_TAGS=[],t.FORBID_ATTR=[],t.GLOBAL_ATTR_RULES={},t.GLOBAL_APPEND_ATTR={},t.ADD_DATA_URI_TAGS=[],t.ADD_URI_SAFE_ATTR=[],t.TAG_RULES={a:{APPEND_ATTR:{rel:{ATTR_NAME:"rel",APPEND_ATTR_VALUE:"noopener noreferrer",SIBLING_CONDITIONS:[{ATTR_NAME:"target",CONDITIONS:[{IS_MANDATORY:"true",CONTAINS:"_blank"}]}]}}}},t.TAG_SPECIFIC_ATTRS={},t=function e(t,r){var o="GLOBAL_TAGS",n="GLOBAL_ATTR",d="GLOBAL_ATTRIBUTES",p="FORBID_TAGS",u="FORBID_ATTR",f="TAG_RULES",h="STYLE_RULES",m="GLOBAL_ATTR_RULES",v="GLOBAL_APPEND_ATTR",y="ADD_DATA_URI_TAGS",_="ADD_URI_SAFE_ATTR",g="REMOVE_ONEVENTS",b=["ALLOW_ARIA_ATTR","ALLOW_DATA_ATTR","ALLOW_UNKNOWN_PROTOCOLS","SAFE_FOR_TEMPLATES","WHOLE_DOCUMENT","RETURN_DOM","RETURN_DOM_FRAGMENT","IN_PLACE","DONT_TRIM","FORCE_BODY","SANITIZE_DOM","KEEP_CONTENT","ALLOWED_URI_REGEXP"],A=[],E=(a(A,b),a(A,["EXTENDS",g,"ALLOWED_STYLE"]),{iframe:{ATTR_RULES:{sandbox:{FALLBACK_VALUE:"allow-popups allow-forms allow-scripts allow-same-origin",CONDITIONS:[{NOT_CONTAINS:["allow-top-navigation","allow-popups-to-escape-sandbox"]}]}},APPEND_ATTR:{sandbox:{APPEND_ATTR_VALUE:"allow-popups allow-forms allow-scripts allow-same-origin"}}},embed:{ATTR_RULES:{type:{CONDITIONS:[{EQUAL:"application/pdf",FALLBACK_VALUE:"application/pdf"}]}},APPEND_ATTR:{type:{APPEND_ATTR_VALUE:"application/pdf"},typemustmatch:{APPEND_ATTR_VALUE:"true"}}},object:{ATTR_RULES:{type:{CONDITIONS:[{EQUAL:"application/pdf",FALLBACK_VALUE:"application/pdf"}]}},APPEND_ATTR:{type:{APPEND_ATTR_VALUE:"application/pdf"},typemustmatch:{APPEND_ATTR_VALUE:"true"}}}}),C=void 0,L=void 0,$=void 0,P=t.GLOBAL_TAGS,w=t.GLOBAL_ATTR,R=t.FORBID_TAGS,N=t.FORBID_ATTR,O=t.TAG_RULES,T=t.STYLE_RULES,k=t.GLOBAL_ATTR_RULES,x=t.GLOBAL_APPEND_ATTR,S=t.TAG_SPECIFIC_ATTRS,D=T.FORBID_PROPS,j=T.FORBID_CSSRULES,I=T.UNSAFE_PROP_RULES,M=D&&0!==D.length||j&&0!==j.length;function B(e,t,r){if(e.constructor===String){if(t.CASE_SENSITIVE||(e=e.toLowerCase()),t.DONT_TRIM||(e=e.trim()),t.MAX_LENGTH&&e.length>t.MAX_LENGTH)return!1;if(t.MIN_LENGTH&&e.length<t.MIN_LENGTH)return!1;if(t.REGEX&&t.REGEX.constructor===RegExp&&-1===e.search(t.REGEX))return!1;if(t.REGEX&&t.REGEX.constructor===String&&(new RegExp(t.REGEX),-1===e.search(t.REGEX)))return!1;if(t.REGEX&&t.REGEX.constructor===Array)for(var o=0;o<t.REGEX.length;o++)if(-1===e.search(t.REGEX[o]))return!1;if(t.VALIDATOR&&t.VALIDATOR.HANDLER&&!t.VALIDATOR.HANDLER(e,t.VALIDATOR.CONFIG,r))return!1;if(void 0!==t.STARTS_WITH&&0!==e.indexOf(t.STARTS_WITH))return!1;if(void 0!==t.ENDS_WITH&&e.lastIndexOf(t.ENDS_WITH)!==e.length-t.ENDS_WITH.length)return!1;if(t.CONTAINS&&t.CONTAINS.constructor===String&&-1===e.indexOf(t.CONTAINS))return!1;if(t.CONTAINS&&t.CONTAINS.constructor===Array)for(var n=0;n<t.CONTAINS.length;n++)if(-1===e.indexOf(t.CONTAINS[n]))return!1;if(t.NOT_CONTAINS&&t.NOT_CONTAINS.constructor===String&&-1<e.indexOf(t.NOT_CONTAINS))return!1;if(t.NOT_CONTAINS&&t.NOT_CONTAINS.constructor===Array)for(var i=0;i<t.NOT_CONTAINS.length;i++)if(-1<e.indexOf(t.NOT_CONTAINS[i]))return!1;if(void 0!==t.EQUAL&&e!=t.EQUAL)return!1;if(void 0!==t.NOT_EQUAL&&e==t.NOT_EQUAL)return!1}if(t.LIST&&-1===t.LIST.indexOf(e))return!1;if("INTEGER"===t.TYPE||"FLOAT"===t.TYPE){r=void 0;try{r="INTEGER"===t.TYPE?globalThis.parseInt(e,10):globalThis.parseFloat(e)}catch(e){return!1}if(globalThis.isNaN(r))return!1;if(void 0!==t.GREATER_THAN&&r<=t.GREATER_THAN)return!1;if(void 0!==t.GREATER_THAN_OR_EQUAL&&r<t.GREATER_THAN_OR_EQUAL)return!1;if(void 0!==t.LESSER_THAN&&r>=t.LESSER_THAN)return!1;if(void 0!==t.LESSER_THAN_OR_EQUAL&&r>t.LESSER_THAN_OR_EQUAL)return!1;if(void 0!==t.EQUAL&&r!==t.EQUAL)return!1;if(void 0!==t.NOT_EQUAL&&r===t.NOT_EQUAL)return!1}return!0}function F(e,t,r){var o=!0;if(t&&t.CONDITIONS&&0!==t.CONDITIONS.length){r=t.ATTR_NAME||r;for(var n,i,a,s,l=0;l<t.CONDITIONS.length;l++){var c=t.CONDITIONS[l];if(n=e,i=r,s=void 0,s=!1!==(a=c).IS_MANDATORY,o=i&&!n.hasAttribute(i.toLowerCase())?a.IS_FORBIDDEN||!s:!a.IS_FORBIDDEN&&B(s=null==(s=n.getAttribute(i.toLowerCase()))?"":s,a,i),o=c.NEGATION?!o:o){if(c.NEXT)return F(e,c.NEXT,r);break}}}return{isValid:o,rule:t}}function H(e){i(e,(function(t,r){if(r&&r.constructor===String&&(0<D.length&&-1<D.indexOf(t)&&(e[t]="",C=!0),I[t]))for(var o=I[t],n=0;n<o.CONDITIONS.length;n++)if(B(r,o.CONDITIONS[n],t))return e[t]=void 0===o.FALLBACK_VALUE?"":o.FALLBACK_VALUE,C=!0}))}function K(e){if(e&&(e.CONDITIONS&&0<e.CONDITIONS.length&&(e.CONDITIONS=(e=>{if(e)for(var t=0;t<e.length;t++)e[t]=(e=>{if(e&&!e.CASE_SENSITIVE){for(var t=["STARTS_WITH","ENDS_WITH","CONTAINS","EQUAL","NOT_EQUAL","LIST"],r=0;r<t.length;r++){var o=t[r];e[o]&&(e[o]=l(e[o]))}e.NEXT&&K(e.NEXT)}return e})(e[t]);return e})(e.CONDITIONS)),e.SIBLING_CONDITIONS)&&0<e.SIBLING_CONDITIONS.length)for(var t=0;t<e.SIBLING_CONDITIONS.length;t++)K(e.SIBLING_CONDITIONS[t])}function U(g){return e(g=function(e){if(e&&e.constructor===Object){e[f]||(e[f]={}),e[m]||(e[m]={}),e[v]||(e[v]={}),e[y]||(e[y]=[]),e[_]||(e[_]=[]),e[o]||(e[o]=[]),e[n]||(e[n]=[]),e[d]||(e[d]=[]),e[p]||(e[p]=[]),e[u]||(e[u]=[]),e[h]||(e[h]={}),e[h].FORBID_CSSRULES||(e[h].FORBID_CSSRULES=[]),e[h].FORBID_PROPS||(e[h].FORBID_PROPS=[]),e[h].UNSAFE_PROP_RULES||(e[h].UNSAFE_PROP_RULES={}),e.TAG_SPECIFIC_ATTRS={};for(var r=0;r<A.length;r++){var g=A[r];void 0===e[g]&&(e[g]=t[g])}e[f]=s(e[f],"NAME"),e[m]=s(e[m],"ATTR_NAME"),e[v]=s(e[v],"APPEND_ATTR_NAME");for(var b=e,E=b.TAG_RULES,C=b.TAG_SPECIFIC_ATTRS,L=b.STYLE_RULES,$=b.GLOBAL_ATTR,P=b.GLOBAL_ATTRIBUTES,R=b.GLOBAL_ATTR_RULES,N=b.EXTENDS,T=L.FORBID_CSSRULES,k=L.FORBID_PROPS,x=L.UNSAFE_PROP_RULES,M=(i(b.GLOBAL_APPEND_ATTR,(function(e,t){K(t)})),i(R,(function(e,t){K(t)})),function(r){var s,l,d=N[r];switch(d){case n:var g=[];a(g,w),i(S,(function(e){-1<(e=g.indexOf(e))&&g.splice(e,1)})),a($,P),a($,g);break;case o:case p:case u:case y:case _:a(e[d],t[d]);break;case f:s=E,(l=O)&&l.constructor===Object&&i(l,(function(e,t){e in s?(void 0===s[e].APPEND_ATTR&&(s[e].APPEND_ATTR=t.APPEND_ATTR),void 0===s[e].ATTR_RULES&&(s[e].ATTR_RULES=t.ATTR_RULES)):s[e]=t}));break;case v:case m:i(t[d],(function(r){e[d][r]||(e[d][r]={},c(t[d][r],e[d][r],!0))}));break;case h:k.push.apply(k,de(D)),T.push.apply(T,de(j)),i(I,(function(e){x[e]||(x[e]={},c(I[e],x[e],!0))}))}}),B=0;B<N.length;B++)M(B);i(R,(function(e){-1===$.indexOf(e)&&($.push(e),C[e]&&C[e].constructor===Array||(C[e]=[]),-1===C[e].indexOf("*"))&&C[e].push("*")})),i(E,(function(e,t){e=l(e),t.APPEND_ATTR||(t.APPEND_ATTR={}),t.APPEND_ATTR=s(t.APPEND_ATTR,"APPEND_ATTR_NAME"),i(t.APPEND_ATTR,(function(e,t){K(t)})),t.ATTR_RULES||(t.ATTR_RULES={}),t.ATTR_RULES=s(t.ATTR_RULES,"ATTR_NAME"),i(t.ATTR_RULES,(function(t,r){K(r),t=l(t),(-1===$.indexOf(t)||C[t]&&0<C[t].length)&&(-1===$.indexOf(t)&&$.push(t),C[t]&&C[t].constructor===Array||(C[t]=[]),-1===C[t].indexOf(e))&&C[t].push(e)}))})),delete e.USE_PROFILES}else c(t,e={},!0);return e}(g),r(globalThis))}return M||i(I,(function(){M=!0})),U.sanitize=function(e,o){var n,a;return o=(n=o)&&n.constructor===Object?(a={},i(t,(function(e,t){e in n&&-1!==b.indexOf(e)&&(!0===n[e]||!1===n[e]||n[e]&&n[e].constructor===RegExp)?a[e]=n[e]:a[e]=t})),a.SAFE_FOR_TEMPLATES&&(a.ALLOW_DATA_ATTR=!1),a.RETURN_DOM_FRAGMENT&&(a.RETURN_DOM=!0),a.KEEP_CONTENT&&a.GLOBAL_TAGS.push("#text"),a.ADD_TAGS&&delete a.ADD_TAGS,a.ADD_ATTR&&delete a.ADD_ATTR,a):t,e=r.sanitize(e,o),(o=U.removed).splice.apply(o,[0,U.removed.length].concat(de(r.removed))),e},a(R,["script"]),a(N,[]),T=t.ALLOWED_STYLE,r.removeAllHooks(),C=!1,-1===R.indexOf("style")&&R.push("style"),-1===N.indexOf("style")&&N.push("style"),"INLINE"!==T&&"ALL"!==T||(N.splice(N.indexOf("style"),1),-1===w.indexOf("style")&&w.push("style"),M&&r.addHook("uponSanitizeAttribute",(function(e,t){var r,o;"style"===t.attrName&&(e.ownerDocument.baseURI||((r=(o=globalThis.document).createElement("base")).href=o.baseURI,e.ownerDocument.head.appendChild(r)),C=!1,H(e.style),0===(o=e.style.cssText).length?t.keepAttr=!1:t.attrValue=C?o:e.getAttribute("style"))}))),"INTERNAL"!==T&&"ALL"!==T||(R.splice(R.indexOf("style"),1),-1===P.indexOf("style")&&P.push("style"),M&&r.addHook("uponSanitizeElement",(function(e,t){if("style"===t.tagName&&null!==e.sheet&&(t=e.sheet.cssRules,C=!1,function e(t,r){for(var o=t.length-1;0<=o;o--){var n=t[o];0<j.length&&-1<j.indexOf(n.type)?(r.deleteRule(o),C=!0):1===n.type&&n.selectorText||8===n.type&&n.keyText?n.style&&H(n.style):4!==n.type&&7!==n.type&&12!==n.type||!n.cssRules||e(n.cssRules,n)}}(t,e.sheet),C)){for(var r=[],o=r,n=t,i=n.length-1;0<=i;i--)1!==n[i].type&&3!==n[i].type&&4!==n[i].type&&7!==n[i].type&&12!==n[i].type||o.push(n[i].cssText);e.textContent=r.join("\n")}}))),(k||O)&&(L={},i(E,(function(e,t){L[e]={},i(t.ATTR_RULES,(function(t,r){L[e][t]=r}))})),i(L,(function(e,t){i(k,(function(t,r){L[e][t]=r}))})),i(O,(function(e,t){L[e]||(L[e]={}),i(t.ATTR_RULES,(function(t,r){L[e][t]=r}))})),r.addHook("uponSanitizeAttribute",(function(e,t){var r,o,n=L[t.nodeName]&&L[t.nodeName][t.attrName]||k&&k[t.attrName];n&&(r=(n=F(e,n,t.attrName)).isValid,(n=n.rule)&&n.FORCE_KEEP_ATTR&&(t.forceKeepAttr=!0),r||(r=e,e=t,"REMOVE_ELEMENT"===(t=n).ACTION?e.keepElement=!1:void 0===t.FALLBACK_VALUE||(n=t.FALLBACK_VALUE,(o=ce.exec(t.FALLBACK_VALUE))&&(r=r.getAttribute(t.ATTR_NAME),"${ZWAF.URL_COMPONENT}"===o[0]&&(r=globalThis.encodeURIComponent(r)),n=t.FALLBACK_VALUE.replace(o[0],r)),oe.test(n.replace(ne,"")))?e.keepAttr=!1:e.attrValue=n))}))),(x||O)&&($={},i(E,(function(e,t){$[e]={},i(t.APPEND_ATTR,(function(t,r){$[e][t]=r}))})),i($,(function(e,t){i(k,(function(t,r){$[e][t]=r}))})),i(O,(function(e,t){$[e]||($[e]={}),i(t.APPEND_ATTR,(function(t,r){$[e][t]=r}))})),r.addHook("afterSanitizeAttributes",(function(e){var t,r=e.nodeName.toLowerCase(),o={};i(x,(function(e,t){o[e]=t})),i($[r],(function(e,t){o[e]=t})),t=e,i(o,(function(e,r){if(!t.hasAttribute(e.toLowerCase()))if(r.SIBLING_CONDITIONS&&0!=r.SIBLING_CONDITIONS.length)for(var o=0;o<r.SIBLING_CONDITIONS.length;o++){var n=(i=F(t,r.SIBLING_CONDITIONS[o])).isValid,i=i.rule;if(n)return n=(void 0!==i.APPEND_ATTR_VALUE?i:r).APPEND_ATTR_VALUE,t.setAttribute(e,n)}else t.setAttribute(e,r.APPEND_ATTR_VALUE)}))}))),t[g]&&r.addHook("uponSanitizeAttribute",(function(e,t){0===t.attrName.indexOf("on")&&(t.keepAttr=!1)})),S&&r.addHook("uponSanitizeAttribute",(function(e,t){S[t.attrName]&&-1===S[t.attrName].indexOf(t.nodeName)&&-1===S[t.attrName].indexOf("*")&&(t.keepAttr=!1)})),t.ALLOWED_TAGS=P,t.ALLOWED_ATTR=w,t.GLOBAL_ATTRIBUTES=w,t&&!t.REUSE_CONFIG&&pe&&pe(t),U.isSupported=r.isSupported,U.version=r.version,U.removed=[],U}(t,E),pe&&pe(t),delete globalThis.DOMPurify,"7.2.5"!==o.version||o.HTMLPurifier||o.defineProperty(o,"HTMLPurifier",t,!0,!1,!1,!0),o["7.2.5"].HTMLPurifier||o.defineProperty(o["7.2.5"],"HTMLPurifier",t,!0,!1,!1,!0),o}()},587:function(e){e.exports=function(){function e(e,t,r,o,n,i,a){if(o||!(t in e))return Object.defineProperty&&(()=>{try{return Object.defineProperty({},"x",{}),1}catch(e){}})()?Object.defineProperty(e,t,{value:r,writable:n=!0===n,configurable:i=!0===i,enumerable:a=!0===a}):(e[t]=r,e)}var t,r,o=(o=String.prototype.codePointAt)||function(e){if(null===this)throw new TypeError(" ");var t,r,o=String(this),n=o.length;if(e=e?Number(e):0,!((e=globalThis.isNaN(e)?0:e)<0||n<=e))return r=void 0,55296<=(t=o.charCodeAt(e))&&t<=56319&&e+1<n&&56320<=(r=o.charCodeAt(e+1))&&r<=57343?1024*(t-55296)+r-56320+65536:t},n=String.fromCodePoint;n||(t=String.fromCharCode,r=Math.floor,n=function(){for(var e=[],o=arguments.length,n=Array(o),i=0;i<o;i++)n[i]=arguments[i];var a=n.length,s=-1;if(!a)return"";for(var l="";++s<a;){var c=Number(n[s]);if(!isFinite(c)||c<0||1114111<c||r(c)!==c)throw new RangeError("Invalid code point: "+c);c<=65535?e.push(c):e.push(55296+((c-=65536)>>10),c%1024+56320),(s+1===a||16384<e.length)&&(l+=t.apply(void 0,e),e.length=0)}return l}),function(e,t){t&&function(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}(e.prototype,t)}(a,[{key:"debug",value:function(){var e;if(globalThis.console&&this.level!==this.LEVELS.NONE&&this.level===this.LEVELS.DEBUG){for(var t=arguments.length,r=Array(t),o=0;o<t;o++)r[o]=arguments[o];(e=globalThis.console).debug.apply(e,r.concat([performance.now()]))}}},{key:"info",value:function(){var e;if(globalThis.console&&this.level!==this.LEVELS.NONE&&!(this.level>this.LEVELS.INFO)){for(var t=arguments.length,r=Array(t),o=0;o<t;o++)r[o]=arguments[o];(e=globalThis.console).log.apply(e,r.concat([performance.now()]))}}},{key:"warn",value:function(){var e;if(globalThis.console&&this.level!==this.LEVELS.NONE&&!(this.level>this.LEVELS.WARN)){for(var t=arguments.length,r=Array(t),o=0;o<t;o++)r[o]=arguments[o];(e=globalThis.console).warn.apply(e,r.concat([performance.now()]))}}},{key:"error",value:function(){var e;if(globalThis.console&&this.level!==this.LEVELS.NONE&&!(this.level>this.LEVELS.ERROR)){for(var t=arguments.length,r=Array(t),o=0;o<t;o++)r[o]=arguments[o];(e=globalThis.console).error.apply(e,r.concat([performance.now()]))}}}]);var i=a;function a(e){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.LEVELS={NONE:-1,DEBUG:0,INFO:1,WARN:2,ERROR:3},e===this.LEVELS.NONE||e===this.LEVELS.DEBUG||e===this.LEVELS.INFO||e===this.LEVELS.WARN||e===this.LEVELS.ERROR?this.level=e:this.level=this.LEVELS.ERROR}var s=globalThis.ZWAF||{version:"7.2.5"},l=(i=new i,s.defineProperty||(s.defineProperty=e),s.logger||(s.logger=i),s["7.2.5"]||(s["7.2.5"]={version:"7.2.5",defineProperty:e,logger:i}),!1),c=(i={log:function(){var e;globalThis&&globalThis.console&&globalThis.console.log&&globalThis.navigator&&globalThis.navigator.userAgent&&!l&&(e=globalThis.navigator.userAgent.match(/opera|chrome|safari|firefox|msie|trident(?=\/)/i),l=!0,e&&e[0].search(/trident|msie/i)<0?(globalThis.console.log("%cSTOP!","color:red;font-size:xx-large;font-weight:bold;"),globalThis.console.log("%cThis is a browser feature intended for developers. Do not enter or paste code which you don't understand. It may allow attackers to steal your information or impersonate you.\nSee https://en.wikipedia.org/wiki/Self-XSS for more details","font-size:large;")):globalThis.console.log("STOP!\nThis is a browser feature intended for developers. Do not enter or paste code which you don't understand. It may allow attackers to steal your information or impersonate you.\nSee https://en.wikipedia.org/wiki/Self-XSS for more details"))}},Array.prototype.indexOf||function(e){if(null==this)throw new TypeError(" ");var t={},r=t.length>>>0;if(0!=r){var o=0;if(0<(arguments.length<=1?0:arguments.length-1)&&(o=Number(arguments.length<=2?void 0:arguments[2]),isNaN(o)?o=0:0!==o&&o!==1/0&&o!==-1/0&&(o=(0<o||-1)*Math.floor(Math.abs(o)))),!(r<=o))for(var n=0<=o?o:Math.max(r-Math.abs(o),0);n<r;n++)if(n in t&&t.charAt(n)===e)return n}return-1});function d(e,t,r){var o=2<arguments.length&&void 0!==r?r:{};if(o=Object.assign({path:"/",SameSite:"lax","max-age":864e7},o),encodeURIComponent){var n,i=encodeURIComponent(e)+"="+encodeURIComponent(t);for(n in o){i+="; "+n;var a=o[n];!0!==a&&(i+="="+a)}document.cookie=i}}function p(e,t){d(e,"",{path:1<arguments.length&&void 0!==t?t:"/","max-age":-1})}"7.2.5"!==s.version||s.Console||s.defineProperty(s,"Console",i,!0,!1,!1,!0),s["7.2.5"].Console||s.defineProperty(s["7.2.5"],"Console",i,!0,!1,!1,!0),["_zcsr_tmp","com_chat_owner","com_avcliq_owner","wms.agent"].some((function(e){return t=e,t+="=",e=document.cookie,r=void 0,e.split("; ").forEach((function(e){if(void 0===r){var o=void 0;try{decodeURIComponent&&(o=decodeURIComponent(e))}catch(t){o=e,ZWAF&&ZWAF.logger&&ZWAF.logger.warn&&ZWAF.logger.warn("Error while trying to decode Cookie value!")}0===o.indexOf(t)&&(r=o.substring(t.length))}})),!!r;var t,r}))&&s&&s["7.2.5"]&&s["7.2.5"].Console&&s["7.2.5"].Console.log(),i={arrayIndexOf:c};var u=(Object.freeze&&Object.freeze(i),"7.2.5"!==s.version||s.util||s.defineProperty(s,"util",i,!0,!1,!1,!0),s["7.2.5"].util||s.defineProperty(s["7.2.5"],"util",i,!0,!1,!1,!0),"_zwaf_ua");function f(e){for(var t=[],r=0;r<e.length;r++)t.push(e[r].charCodeAt(0));return t}c={init:function(){p(u);var e=!!globalThis.ulaa,t=navigator&&navigator.brave&&"function"==typeof navigator.brave.isBrave;e?d(u,"Ulaa"):t?d(u,"Brave"):globalThis.addEventListener("load",(function(){globalThis.setTimeout((function(){globalThis.getComputedStyle(globalThis.document.documentElement).getPropertyValue("--arc-palette-background")&&d(u,"Arc")}),1e3)}))},disable:function(){p(u)}},"7.2.5"!==s.version||s.UAIdentification||s.defineProperty(s,"UAIdentification",c,!0,!1,!1,!0),s["7.2.5"].UAIdentification||s.defineProperty(s["7.2.5"],"UAIdentification",c,!0,!1,!1,!0),s&&s["7.2.5"]&&s["7.2.5"].UAIdentification&&s["7.2.5"].UAIdentification.init(),c={};for(var h=i.arrayIndexOf,m={HTML:f([",",".","-","_"," "]),HTMLATTR:f([",",".","-","_"]),CSS:f([]),JAVASCRIPT:f([",",".","_"])},v={},y="34=&quot|38=&amp|60=&lt|62=&gt|160=&nbsp|161=&iexcl|162=&cent|163=&pound|164=&curren|165=&yen|166=&brvbar|167=&sect|168=&uml|169=&copy|170=&ordf|171=&laquo|172=&not|173=&shy|174=&reg|175=&macr|176=&deg|177=&plusmn|178=&sup2|179=&sup3|180=&acute|181=&micro|182=&para|183=&middot|184=&cedil|185=&sup1|186=&ordm|187=&raquo|188=&frac14|189=&frac12|190=&frac34|191=&iquest|192=&Agrave|193=&Aacute|194=&Acirc|195=&Atilde|196=&Auml|197=&Aring|198=&AElig|199=&Ccedil|200=&Egrave|201=&Eacute|202=&Ecirc|203=&Euml|204=&Igrave|205=&Iacute|206=&Icirc|207=&Iuml|208=&ETH|209=&Ntilde|210=&Ograve|211=&Oacute|212=&Ocirc|213=&Otilde|214=&Ouml|215=&times|216=&Oslash|217=&Ugrave|218=&Uacute|219=&Ucirc|220=&Uuml|221=&Yacute|222=&THORN|223=&szlig|224=&agrave|225=&aacute|226=&acirc|227=&atilde|228=&auml|229=&aring|230=&aelig|231=&ccedil|232=&egrave|233=&eacute|234=&ecirc|235=&euml|236=&igrave|237=&iacute|238=&icirc|239=&iuml|240=&eth|241=&ntilde|242=&ograve|243=&oacute|244=&ocirc|245=&otilde|246=&ouml|247=&divide|248=&oslash|249=&ugrave|250=&uacute|251=&ucirc|252=&uuml|253=&yacute|254=&thorn|255=&yuml|338=&OElig|339=&oelig|352=&Scaron|353=&scaron|376=&Yuml|402=&fnof|710=&circ|732=&tilde|913=&Alpha|914=&Beta|915=&Gamma|916=&Delta|917=&Epsilon|918=&Zeta|919=&Eta|920=&Theta|921=&Iota|922=&Kappa|923=&Lambda|924=&Mu|925=&Nu|926=&Xi|927=&Omicron|928=&Pi|929=&Rho|931=&Sigma|932=&Tau|933=&Upsilon|934=&Phi|935=&Chi|936=&Psi|937=&Omega|945=&alpha|946=&beta|947=&gamma|948=&delta|949=&epsilon|950=&zeta|951=&eta|952=&theta|953=&iota|954=&kappa|955=&lambda|956=&mu|957=&nu|958=&xi|959=&omicron|960=&pi|961=&rho|962=&sigmaf|963=&sigma|964=&tau|965=&upsilon|966=&phi|967=&chi|968=&psi|969=&omega|977=&thetasym|978=&upsih|982=&piv|8194=&ensp|8195=&emsp|8201=&thinsp|8204=&zwnj|8205=&zwj|8206=&lrm|8207=&rlm|8211=&ndash|8212=&mdash|8216=&lsquo|8217=&rsquo|8218=&sbquo|8220=&ldquo|8221=&rdquo|8222=&bdquo|8224=&dagger|8225=&Dagger|8226=&bull|8230=&hellip|8240=&permil|8242=&prime|8243=&Prime|8249=&lsaquo|8250=&rsaquo|8254=&oline|8260=&frasl|8364=&euro|8465=&image|8472=&weierp|8476=&real|8482=&trade|8501=&alefsym|8592=&larr|8593=&uarr|8594=&rarr|8595=&darr|8596=&harr|8629=&crarr|8656=&lArr|8657=&uArr|8658=&rArr|8659=&dArr|8660=&hArr|8704=&forall|8706=&part|8707=&exist|8709=&empty|8711=&nabla|8712=&isin|8713=&notin|8715=&ni|8719=&prod|8721=&sum|8722=&minus|8727=&lowast|8730=&radic|8733=&prop|8734=&infin|8736=&ang|8743=&and|8744=&or|8745=&cap|8746=&cup|8747=&int|8756=&there4|8764=&sim|8773=&cong|8776=&asymp|8800=&ne|8801=&equiv|8804=&le|8805=&ge|8834=&sub|8835=&sup|8836=&nsub|8838=&sube|8839=&supe|8853=&oplus|8855=&otimes|8869=&perp|8901=&sdot|8968=&lceil|8969=&rceil|8970=&lfloor|8971=&rfloor|10216=&lang|10217=&rang|9674=&loz|9824=&spades|9827=&clubs|9829=&hearts|9830=&diams",_=(y="34=&quot|38=&amp|60=&lt|62=&gt|160=&nbsp|161=&iexcl|162=&cent|163=&pound|164=&curren|165=&yen|166=&brvbar|167=&sect|168=&uml|169=&copy|170=&ordf|171=&laquo|172=&not|173=&shy|174=&reg|175=&macr|176=&deg|177=&plusmn|178=&sup2|179=&sup3|180=&acute|181=&micro|182=&para|183=&middot|184=&cedil|185=&sup1|186=&ordm|187=&raquo|188=&frac14|189=&frac12|190=&frac34|191=&iquest|192=&Agrave|193=&Aacute|194=&Acirc|195=&Atilde|196=&Auml|197=&Aring|198=&AElig|199=&Ccedil|200=&Egrave|201=&Eacute|202=&Ecirc|203=&Euml|204=&Igrave|205=&Iacute|206=&Icirc|207=&Iuml|208=&ETH|209=&Ntilde|210=&Ograve|211=&Oacute|212=&Ocirc|213=&Otilde|214=&Ouml|215=&times|216=&Oslash|217=&Ugrave|218=&Uacute|219=&Ucirc|220=&Uuml|221=&Yacute|222=&THORN|223=&szlig|224=&agrave|225=&aacute|226=&acirc|227=&atilde|228=&auml|229=&aring|230=&aelig|231=&ccedil|232=&egrave|233=&eacute|234=&ecirc|235=&euml|236=&igrave|237=&iacute|238=&icirc|239=&iuml|240=&eth|241=&ntilde|242=&ograve|243=&oacute|244=&ocirc|245=&otilde|246=&ouml|247=&divide|248=&oslash|249=&ugrave|250=&uacute|251=&ucirc|252=&uuml|253=&yacute|254=&thorn|255=&yuml|338=&OElig|339=&oelig|352=&Scaron|353=&scaron|376=&Yuml|402=&fnof|710=&circ|732=&tilde|913=&Alpha|914=&Beta|915=&Gamma|916=&Delta|917=&Epsilon|918=&Zeta|919=&Eta|920=&Theta|921=&Iota|922=&Kappa|923=&Lambda|924=&Mu|925=&Nu|926=&Xi|927=&Omicron|928=&Pi|929=&Rho|931=&Sigma|932=&Tau|933=&Upsilon|934=&Phi|935=&Chi|936=&Psi|937=&Omega|945=&alpha|946=&beta|947=&gamma|948=&delta|949=&epsilon|950=&zeta|951=&eta|952=&theta|953=&iota|954=&kappa|955=&lambda|956=&mu|957=&nu|958=&xi|959=&omicron|960=&pi|961=&rho|962=&sigmaf|963=&sigma|964=&tau|965=&upsilon|966=&phi|967=&chi|968=&psi|969=&omega|977=&thetasym|978=&upsih|982=&piv|8194=&ensp|8195=&emsp|8201=&thinsp|8204=&zwnj|8205=&zwj|8206=&lrm|8207=&rlm|8211=&ndash|8212=&mdash|8216=&lsquo|8217=&rsquo|8218=&sbquo|8220=&ldquo|8221=&rdquo|8222=&bdquo|8224=&dagger|8225=&Dagger|8226=&bull|8230=&hellip|8240=&permil|8242=&prime|8243=&Prime|8249=&lsaquo|8250=&rsaquo|8254=&oline|8260=&frasl|8364=&euro|8465=&image|8472=&weierp|8476=&real|8482=&trade|8501=&alefsym|8592=&larr|8593=&uarr|8594=&rarr|8595=&darr|8596=&harr|8629=&crarr|8656=&lArr|8657=&uArr|8658=&rArr|8659=&dArr|8660=&hArr|8704=&forall|8706=&part|8707=&exist|8709=&empty|8711=&nabla|8712=&isin|8713=&notin|8715=&ni|8719=&prod|8721=&sum|8722=&minus|8727=&lowast|8730=&radic|8733=&prop|8734=&infin|8736=&ang|8743=&and|8744=&or|8745=&cap|8746=&cup|8747=&int|8756=&there4|8764=&sim|8773=&cong|8776=&asymp|8800=&ne|8801=&equiv|8804=&le|8805=&ge|8834=&sub|8835=&sup|8836=&nsub|8838=&sube|8839=&supe|8853=&oplus|8855=&otimes|8869=&perp|8901=&sdot|8968=&lceil|8969=&rceil|8970=&lfloor|8971=&rfloor|10216=&lang|10217=&rang|9674=&loz|9824=&spades|9827=&clubs|9829=&hearts|9830=&diams".split("|"),0);_<y.length;_++){var g=y[_].split("=");v[g[0]]=g[1]}for(var b=[],A=0;A<255;A++)b[A]=48<=A&&A<=57||65<=A&&A<=90||97<=A&&A<=122?null:A.toString(16);function E(e){return e<256?b[e]:e.toString(16)}function C(e,t){return-1!==h.call(e,t)||null===(e=E(t))?n(t):t<=31&&9!=t&&10!=t&&13!=t||127<=t&&t<=159||32===t?"&#x20;":void 0!==(t=v[t])?t+";":"&#x"+e+";"}function L(e,t){return-1!==h.call(e,t)||null===E(t)?String.fromCharCode(t):(e=t.toString(16),t<256?"\\x"+"00".substr(e.length)+e.toUpperCase():"\\u"+"0000".substr(e.length)+e.toUpperCase())}function $(e,t){return-1!==h.call(e,t)||null===(e=E(t))?n(t):"\\"+e+" "}function P(e,t,r,n){if(null==t||"string"!=typeof t)return t;for(var i,a="",s=0;s<t.length;s++)n?(a+=r(e,i=o.call(t,s),n),65535<i&&s++):a+=r(e,t.charCodeAt(s));return a}return c.encodeForHTML=function(e){return P(m.HTML,e,C,!0)},c.encodeForHTMLAttribute=function(e){return P(m.HTMLATTR,e,C,!0)},c.encodeForJavaScript=function(e){return P(m.JAVASCRIPT,e,L,!1)},c.encodeForCSS=function(e){return P(m.CSS,e,$,!0)},Object.freeze&&Object.freeze(c),"7.2.5"!==s.version||s.Encoder||s.defineProperty(s,"Encoder",c,!0,!1,!1,!0),s["7.2.5"].Encoder||s.defineProperty(s["7.2.5"],"Encoder",c,!0,!1,!1,!0),s}()},887:()=>{window.DOMPurifyCopy&&(window.DOMPurify=window.DOMPurifyCopy,window.DOMPurifyCopy=void 0)}},t={};function r(o){var n=t[o];if(void 0!==n)return n.exports;var i=t[o]={exports:{}};return e[o].call(i.exports,i,i.exports,r),i.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var o in t)r.o(t,o)&&!r.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";r(238);var e=r(508),t=r.n(e);window.ZWAF=t(),r(887),r(587)})()})();var runtime=function(e){"use strict";var t,r=Object.prototype,o=r.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",l=i.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function d(e,t,r,o){var i=t&&t.prototype instanceof v?t:v,a=Object.create(i.prototype),s=new N(o||[]);return n(a,"_invoke",{value:$(e,r,s)}),a}function p(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=d;var u="suspendedStart",f="executing",h="completed",m={};function v(){}function y(){}function _(){}var g={};c(g,a,(function(){return this}));var b=Object.getPrototypeOf,A=b&&b(b(O([])));A&&A!==r&&o.call(A,a)&&(g=A);var E=_.prototype=v.prototype=Object.create(g);function C(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function L(e,t){function r(n,i,a,s){var l=p(e[n],e,i);if("throw"!==l.type){var c=l.arg,d=c.value;return d&&"object"==typeof d&&o.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(d).then((function(e){c.value=e,a(c)}),(function(e){return r("throw",e,a,s)}))}s(l.arg)}var i;n(this,"_invoke",{value:function(e,o){function n(){return new t((function(t,n){r(e,o,t,n)}))}return i=i?i.then(n,n):n()}})}function $(e,r,o){var n=u;return function(i,a){if(n===f)throw new Error("Generator is already running");if(n===h){if("throw"===i)throw a;return{value:t,done:!0}}for(o.method=i,o.arg=a;;){var s=o.delegate;if(s){var l=P(s,o);if(l){if(l===m)continue;return l}}if("next"===o.method)o.sent=o._sent=o.arg;else if("throw"===o.method){if(n===u)throw n=h,o.arg;o.dispatchException(o.arg)}else"return"===o.method&&o.abrupt("return",o.arg);n=f;var c=p(e,r,o);if("normal"===c.type){if(n=o.done?h:"suspendedYield",c.arg===m)continue;return{value:c.arg,done:o.done}}"throw"===c.type&&(n=h,o.method="throw",o.arg=c.arg)}}}function P(e,r){var o=r.method,n=e.iterator[o];if(n===t)return r.delegate=null,"throw"===o&&e.iterator.return&&(r.method="return",r.arg=t,P(e,r),"throw"===r.method)||"return"!==o&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+o+"' method")),m;var i=p(n,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function R(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function N(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function O(e){if(null!=e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function r(){for(;++n<e.length;)if(o.call(e,n))return r.value=e[n],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(typeof e+" is not iterable")}return y.prototype=_,n(E,"constructor",{value:_,configurable:!0}),n(_,"constructor",{value:y,configurable:!0}),y.displayName=c(_,l,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,_):(e.__proto__=_,c(e,l,"GeneratorFunction")),e.prototype=Object.create(E),e},e.awrap=function(e){return{__await:e}},C(L.prototype),c(L.prototype,s,(function(){return this})),e.AsyncIterator=L,e.async=function(t,r,o,n,i){void 0===i&&(i=Promise);var a=new L(d(t,r,o,n),i);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},C(E),c(E,l,"Generator"),c(E,a,(function(){return this})),c(E,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var o in t)r.push(o);return r.reverse(),function e(){for(;r.length;){var o=r.pop();if(o in t)return e.value=o,e.done=!1,e}return e.done=!0,e}},e.values=O,N.prototype={constructor:N,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(R),!e)for(var r in this)"t"===r.charAt(0)&&o.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(o,n){return s.type="throw",s.arg=e,r.next=o,n&&(r.method="next",r.arg=t),!!n}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var l=o.call(a,"catchLoc"),c=o.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),R(r),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var o=r.completion;if("throw"===o.type){var n=o.arg;R(r)}return n}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,o){return this.delegate={iterator:O(e),resultName:r,nextLoc:o},"next"===this.method&&(this.arg=t),m}},e}("object"==typeof module?module.exports:{});try{regeneratorRuntime=runtime}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=runtime:Function("r","regeneratorRuntime = r")(runtime)}function _regeneratorValues(e){if(null!=e){var t=e["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],r=0;if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}}throw new TypeError(_typeof(e)+" is not iterable")}function _regenerator(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",n=r.toStringTag||"@@toStringTag";function i(r,o,n,i){var l=o&&o.prototype instanceof s?o:s,c=Object.create(l.prototype);return _regeneratorDefine2(c,"_invoke",function(r,o,n){var i,s,l,c=0,d=n||[],p=!1,u={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,r){return i=t,s=0,l=e,u.n=r,a}};function f(r,o){for(s=r,l=o,t=0;!p&&c&&!n&&t<d.length;t++){var n,i=d[t],f=u.p,h=i[2];r>3?(n=h===o)&&(l=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=f&&((n=r<2&&f<i[1])?(s=0,u.v=o,u.n=i[1]):f<h&&(n=r<3||i[0]>o||o>h)&&(i[4]=r,i[5]=o,u.n=h,s=0))}if(n||r>1)return a;throw p=!0,o}return function(n,d,h){if(c>1)throw TypeError("Generator is already running");for(p&&1===d&&f(d,h),s=d,l=h;(t=s<2?e:l)||!p;){i||(s?s<3?(s>1&&(u.n=-1),f(s,l)):u.n=l:u.v=l);try{if(c=2,i){if(s||(n="next"),t=i[n]){if(!(t=t.call(i,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(l=TypeError("The iterator does not provide a '"+n+"' method"),s=1);i=e}else if((t=(p=u.n<0)?l:r.call(o,u))!==a)break}catch(t){i=e,s=1,l=t}finally{c=1}}return{value:t,done:p}}}(r,n,i),!0),c}var a={};function s(){}function l(){}function c(){}t=Object.getPrototypeOf;var d=[][o]?t(t([][o]())):(_regeneratorDefine2(t={},o,(function(){return this})),t),p=c.prototype=s.prototype=Object.create(d);function u(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,c):(e.__proto__=c,_regeneratorDefine2(e,n,"GeneratorFunction")),e.prototype=Object.create(p),e}return l.prototype=c,_regeneratorDefine2(p,"constructor",c),_regeneratorDefine2(c,"constructor",l),l.displayName="GeneratorFunction",_regeneratorDefine2(c,n,"GeneratorFunction"),_regeneratorDefine2(p),_regeneratorDefine2(p,n,"Generator"),_regeneratorDefine2(p,o,(function(){return this})),_regeneratorDefine2(p,"toString",(function(){return"[object Generator]"})),(_regenerator=function(){return{w:i,m:u}})()}function _regeneratorDefine2(e,t,r,o){var n=Object.defineProperty;try{n({},"",{})}catch(e){n=0}_regeneratorDefine2=function(e,t,r,o){function i(t,r){_regeneratorDefine2(e,t,(function(e){return this._invoke(t,r,e)}))}t?n?n(e,t,{value:r,enumerable:!o,configurable:!o,writable:!o}):e[t]=r:(i("next",0),i("throw",1),i("return",2))},_regeneratorDefine2(e,t,r,o)}function asyncGeneratorStep(e,t,r,o,n,i,a){try{var s=e[i](a),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(o,n)}function _asyncToGenerator(e){return function(){var t=this,r=arguments;return new Promise((function(o,n){var i=e.apply(t,r);function a(e){asyncGeneratorStep(i,o,n,a,s,"next",e)}function s(e){asyncGeneratorStep(i,o,n,a,s,"throw",e)}a(void 0)}))}}function _classPrivateMethodInitSpec(e,t){_checkPrivateRedeclaration(e,t),t.add(e)}function _checkPrivateRedeclaration(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function _assertClassBrand(e,t,r){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:r;throw new TypeError("Private element is not present on this object")}function _wrapNativeSuper(e){var t="function"==typeof Map?new Map:void 0;return _wrapNativeSuper=function(e){if(null===e||!_isNativeFunction(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return _construct(e,arguments,_getPrototypeOf(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),_setPrototypeOf(r,e)},_wrapNativeSuper(e)}function _construct(e,t,r){if(_isNativeReflectConstruct())return Reflect.construct.apply(null,arguments);var o=[null];o.push.apply(o,t);var n=new(e.bind.apply(e,o));return r&&_setPrototypeOf(n,r.prototype),n}function _isNativeFunction(e){try{return-1!==Function.toString.call(e).indexOf("[native code]")}catch(t){return"function"==typeof e}}function _defineProperty(e,t,r){return(t=_toPropertyKey(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _callSuper(e,t,r){return t=_getPrototypeOf(t),_possibleConstructorReturn(e,_isNativeReflectConstruct()?Reflect.construct(t,r||[],_getPrototypeOf(e).constructor):t.apply(e,r))}function _possibleConstructorReturn(e,t){if(t&&("object"==_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(_isNativeReflectConstruct=function(){return!!e})()}function _getPrototypeOf(e){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},_getPrototypeOf(e)}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},_setPrototypeOf(e,t)}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,o=Array(t);r<t;r++)o[r]=e[r];return o}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,_toPropertyKey(o.key),o)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return"symbol"==_typeof(t)?t:t+""}function _toPrimitive(e,t){if("object"!=_typeof(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=_typeof(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}function ReplaceWith(e){var t=this.parentNode,r=arguments.length,o=+(t&&"object"===_typeof(e));if(t){for(;r-- >o;)t&&"object"!==_typeof(arguments[r])&&(arguments[r]=document.createTextNode(arguments[r])),t||!arguments[r].parentNode?t.insertBefore(this.previousSibling,arguments[r]):arguments[r].parentNode.removeChild(arguments[r]);o&&t.replaceChild(this,e)}}[Element.prototype,CharacterData.prototype,DocumentType.prototype].forEach((function(e){e.hasOwnProperty("after")||Object.defineProperty(e,"after",{configurable:!0,enumerable:!0,writable:!0,value:function(){var e=Array.prototype.slice.call(arguments),t=document.createDocumentFragment();e.forEach((function(e){var r=e instanceof Node;t.appendChild(r?e:document.createTextNode(String(e)))})),this.parentNode.insertBefore(t,this.nextSibling)}})})),Element.prototype.replaceWith||(Element.prototype.replaceWith=ReplaceWith),CharacterData.prototype.replaceWith||(CharacterData.prototype.replaceWith=ReplaceWith),DocumentType.prototype.replaceWith||(DocumentType.prototype.replaceWith=ReplaceWith),String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return t=t||0,this.indexOf(e,t)===t}),String.prototype.endsWith||(String.prototype.endsWith=function(e,t){return(void 0===t||t>this.length)&&(t=this.length),this.substring(t-e.length,t)===e});var _Lyte={version:"3.8.3-BETA9",$:{consoleTime:[]},registeredMixins:{},registeredServices:{},requiredServices:{},toBeInjectedServices:{},_registeredComponents:{},_keywords:{component:["init","didConnect","didDestroy","constructor","onError","actions","methods","data"],adapter:["namespace","actionNamespace","host","withCredentials","buildURL","methodForRequest","headersForRequest","reloadRecord","reloadRecord","reloadAll","processRequest","parseResponse","parseRequest","super"],serializer:["normalize","normalizeResponse","serialize","serializeKey","deserializeKey","extractMeta","payloadKey","serializeRecord","normalizeRecord","super"],route:["getDependencies","getResources","beforeModel","model","afterModel","redirect","renderTemplate","afterRender","beforeExit","didDestroy","queryParams","title","routeName","component","parent","currentModel","forceFetch","setTitle","setQueryParams","getQueryParams","setDynamicParam","getDynamicParam","removeFromCache","refresh","transitionTo","replaceWith","actions"],is:function(e,t){var r=["component","adapter","serializer","route"];t&&(r=[t]);for(var o=r.length,n=0;n<o;n++){var i=this[r[n]];if(i&&-1!=i.indexOf(e))return!0}return!1}},Mixin:{},Service:{},debug:!1,performance:!1,toBeRegistered:[],browser:{},registeredCustomComponent:{},Globals:{}};window.isLyteWidgetParent?(_widgetLyte=_Lyte,_Lyte.isWidgetBuild=!0,window.__lyteConfig.isWidgetBuild=!0):Lyte=_Lyte;var IdleTaskScheduler=_createClass((function e(t){_classCallCheck(this,e),this.idleCallback=this.idleCallback.bind(this),this.timeout=50,this.chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",this.tasks=new Map,this.idleCallbackRequested=!1,this.delayInit=!1,this.useRequestIdleCallback=!0,this.priorityQueue=[],this.processTime={},this.perf=!1,null!=t&&(void 0!==t.useRequestIdleCallback&&(this.useRequestIdleCallback=t.useRequestIdleCallback),void 0!==t.delayInit&&(this.delayInit=t.delayInit),void 0!==t.timeout&&(this.timeout=t.timeout),void 0!==t.priorityQueue&&(this.priorityQueue=t.priorityQueue),void 0!==t.perf&&(this.perf=t.perf))}),[{key:"isGenerator",value:function(e){return null!==e&&"object"===_typeof(e)&&"function"==typeof e.next&&"function"==typeof e[Symbol.iterator]}},{key:"init",value:function(e){1==this.delayInit&&(void 0!==e&&(void 0!==e.useRequestIdleCallback&&(this.useRequestIdleCallback=e.useRequestIdleCallback),void 0!==e.timeout&&(this.timeout=e.timeout),void 0!==e.perf&&(this.perf=e.perf)),this.delayInit=!1,this.tasksScheduler())}},{key:"getUniqueKey",value:function(e){for(var t;null==t||this.tasks.has(t);)t=void 0,t=this.generateUniqueKey(e);return t}},{key:"generateUniqueKey",value:function(e){for(var t="",r=this.chars.length,o=0;o<e;o++)t+=this.chars.charAt(Math.floor(Math.random()*r));return t}},{key:"enqueueTask",value:function(e,t,r){if(r||(r=this.getUniqueKey(6)),!this.tasks.has(r))return this.tasks.set(r,{handler:e,data:t}),this.tasksScheduler(),r;console.error("Task with id-"+r+" is alreaded queued for execution.")}},{key:"deleteTask",value:function(e){if(e){var t=this.tasks.get(e);if(this.tasks.delete(e),this.priorityQueue.length){var r=this.priorityQueue.indexOf(e);-1!=r&&this.priorityQueue.splice(r,1)}return t}}},{key:"getPriorityQObj",value:function(){var e,t,r=0;if(this.priorityQueue.length){for(var o=this.priorityQueue.length;r<o;){if(e=this.priorityQueue[r],this.tasks.has(e)){t=this.tasks.get(e);break}r++}if(t)return{id:e,obj:t,ind:r}}return!1}},{key:"dequeueTask",value:function(e){if(e){var t=this.tasks.get(e);return this.tasks.delete(e),t}if(this.tasks.size||this.priorityQueue.length){var r,o,n,i,a=this.getPriorityQObj(),s=!1;if(!1!==a)e=a.id,n=a.obj,i=a.ind,s=!0;else{if(!this.tasks.size)return;e=(t=this.tasks.entries().next().value)[0],n=t[1]}if(this.currentTask={id:e,handler:n.handler},Lyte.extendEventListeners(this.currentTask),this.isGenerator(n.handler)){if(0!=(r=n.handler.next()).done)return this.currentTask.triggerEvent("done",e),s&&this.priorityQueue.splice(i,1),this.tasks.delete(e),this.dequeueTask();if("function"==typeof(o=r.value))return o}else this.currentTask.triggerEvent("done",e),s&&this.priorityQueue.splice(i,1),this.tasks.delete(e);return n}}},{key:"tasksScheduler",value:function(){0==this.delayInit&&(this.tasks.size?0==this.idleCallbackRequested&&("requestIdleCallback"in window&&this.useRequestIdleCallback?(this.idleCallbackRequested=!0,requestIdleCallback(this.idleCallback)):this.requestIdleCallback(this.idleCallback)):"cancelIdleCallback"in window&&this.useRequestIdleCallback&&cancelIdleCallback(this.idleCallback))}},{key:"idleCallback",value:function(e){for(var t,r=e.timeRemaining();r>0&&this.tasks.size;){if(t=this.dequeueTask(),this.perf)var o=performance.now();if("function"==typeof t&&t(),"object"==_typeof(t)){var n,i=t.data||[];"function"==typeof t.handler&&(n=t).handler.apply(n,_toConsumableArray(i))}if(this.perf){var a=performance.now(),s=this.currentTask.id;this.processTime[s]=(this.processTime.hasOwnProperty(s)?this.processTime[s]:0)+(a-o)}r=e.timeRemaining()}this.idleCallbackRequested=!1,this.tasksScheduler()}},{key:"requestIdleCallback",value:function(e){var t=this;setTimeout((function(){setTimeout((function(){var r=Date.now();e({timeRemaining:function(){var e=Date.now()-r;return e>t.timeout?0:t.timeout-e}})}),1)}),50)}}]);!function(e){var t=e.$.userAgent=window.userAgent=navigator.userAgent,r=new Map;if(t.match(/rv:11/)&&(e.browser.ie=!0,window.action=function(){}),t.match("Edge")){var o=createElement("div");o.innerHTML="<template><div>c</div></template>",o.querySelector("template").childNodes.length?e.browser.ie=!0:e.browser.edge=!0,o.remove()}e.Globals.set=function(t,r){e.Component.set(e.__gl,t,r)},e.Globals.get=function(t){return e.Component._get(e.__gl,t)},Object.defineProperty(e.Service,"__Lyte__",{value:e}),Object.defineProperty(e.Mixin,"__Lyte__",{value:e}),Object.defineProperty(e.$,"__Lyte__",{value:e}),e.Mixin.__Lyte__.requiredMixins={},e.oldProxy="undefined"!=typeof $Lt&&$Lt.oldProxy?$Lt.oldProxy:void 0,e.$.assetsDiv=document.createElement("div"),e.$.assetsDiv.setAttribute("id","lyteAssetsDiv"),e.assetsDivContainer=document.head,e.$.widgetWrapper=document.createElement("shadow-wrapper"),e.$.widgetWrapper.attachShadow({mode:"open"}),e.$.widgetWrapper.setAttribute("id","widgetWrapperDiv"),e.domContentLoaded=function(e){"complete"===document.readyState||"interactive"===document.readyState?e():window.addEventListener("DOMContentLoaded",(function(){e()}))},e.getSecurity=function(){return e.warn("Lyte loads the current version of the security and automatically updates in upcoming version if necessary. If you need a specific version or want full control, you can load your own securtiy js version instead"),window.ZWAF["7.2.5"]},e.createApplication=function(t,r){r.init&&r.init.apply(e)},e.registerErrorCodes=function(t){Object.assign(e.errorCodes,t)},e.establishObserverBindings=function(t,r,o,n){var i=this,a=n&&r?n._fldGrps.JsonPathWatch:i.constructor._deepWatchProperties;r&&(i=r);for(var s=0;s<t.length;s++){for(var l=t[s].properties,c={},d=!1,p={},u=0;u<l.length;u++){var f,h=!1;if("string"==typeof l[u]){if(-1!=l[u].search(/^\$\./g)){var m,v=l[u].match(/[^\$.][^\.]*/g)[0];-1!=v.search(/\[[0-9*]\]/g)&&(v=v.split(/\[[0-9*]\]/g)[0]),null==a[v]&&(a[v]=[]),null==p[v]&&(p[v]=[]);var y="^\\$\\."+v+"\\.?";y=new RegExp(y),m=l[u].replace(y,"$."),a[v].includes(m)||a[v].push(m),p[v].includes(m)||p[v].push(m),v+=".*",c.hasOwnProperty(v)?d=!0:(f=e.getProperty.call(this,v,r,o),c[v]=!0,d=!1)}else if(-1!==l[u].indexOf(".[]"))h=!0,f=e.getProperty.call(this,l[u].substring(0,l[u].indexOf(".[]")),r,o);else{if(-1!==l[u].indexOf(".*")){var _=l[u].split(".")[0];if(!(!r&&this.component.__data[_]&&this.component.__data[_].watch||r&&n&&n.fieldList&&n.fieldList[_]&&n.fieldList[_].watch))continue}f=e.getProperty.call(this,l[u],r,o)}d||(f._observers||Object.defineProperty(f,"_observers",{value:new Set,enumerable:!1,writable:!0,configurable:!0}),f._observers.add({callee:i,observer:t[s],isArrayObserver:h}))}else e.warn("ERR27",JSON.stringify(l[u]),t[s].fnName,this.tagName)}t[s].Jpath=p,c={}}},e.Context=_createClass((function t(r,o){if(_classCallCheck(this,t),r){if(Object.defineProperties(this,{__scope__:{value:r},get:{value:this.get,writable:!1,enumerable:!1,configurable:!1},set:{value:this.set,writable:!1,enumerable:!1,configurable:!1}}),o&&"object"==_typeof(o))for(var n in o)this[n]=o[n]}else e.error("Pass the scope context to create instance")}),[{key:"get",value:function(e){return null==e?this.$lc:this.$lc&&this.$lc.hasOwnProperty(e)?this.$lc[e]:void 0}},{key:"set",value:function(t,r){var o=this.__scope__;o.$lc=o.$lc||{};var n={};if(t&&"object"==_typeof(t))for(var i in t)o.$lc[i]!==t[i]&&(e.Component.set(o.$lc,i,t[i]),n[i]=t[i]);else o.$lc[t]!==r&&(e.Component.set(o.$lc,t,r),n[t]=r);this.setChildContext(n,o)}},{key:"setChildContext",value:function(e,t){t.__lp?t.component&&t.component.component.$lc.set(e):t.$node.querySelectorAll("[lyte-rendered]").forEach((function(t){var r=t;r&&r.component&&r.component.$lc&&r.component.$lc.set(e)}))}}]),e.getProperty=function(e,t,r){var o=e.match(/([^[\].]+|\[\])/g),n=this;t?(n=r,r[o[0]]||(r[o[0]]={}),n=r[o[0]]):(n._properties[o[0]]||(n._properties[o[0]]={}),n=n._properties[o[0]]),Object.defineProperty(n,"_path",{enumerable:!1,value:o[0]});for(var i=1;i<o.length;i++)(o[i].startsWith("'")||o[i].startsWith('"'))&&(o[i]=o[i].substring(1,o[i].length-1)),n[o[i]]||(n[o[i]]={},Object.defineProperty(n[o[i]],"_path",{enumerable:!1,value:n._path+"."+o[i]})),n=n[o[i]];return n},e.getErrorMessage=function(t){var r=Array.from(arguments).slice(1);return e.errorCodes[t]?e.errorCodes[t].replace(/{(\d+)}/g,(function(e,t){return r[t]})):t},e.error=function(){var t=arguments[0],r=t.stack;t=r?t:Error(e.getErrorMessage.apply(e,arguments)),e.onerror&&e.onerror.call(this,t,arguments[1]),e.triggerEvent("error",t,arguments[1]);var o=t.stack&&-1==t.stack.indexOf(t.message);r&&!o&&(t=JSON.parse(JSON.stringify(t,Object.getOwnPropertyNames(t)))),arguments[1]?console.error(t.stack?o?t:t.stack:t.message,arguments[1]):console.error(t.stack?o?t:t.stack:t.message)},e.warn=function(){var t=arguments[0];t=t.stack?JSON.parse(JSON.stringify(t,Object.getOwnPropertyNames(t))):Error(e.getErrorMessage.apply(e,arguments)),e.triggerEvent("warn",t),console.warn(t.stack?-1!=t.stack.indexOf(t.message)?t.stack.replace("Error: ",""):t:t.message)};var n={},i=Function.prototype;function a(e){return e.match(/\.[a-zA-Z]+(?=\?|$)/)}function a(e){return e.match(/\.[a-zA-Z]+(?=\?|$)/)}i.on||(i.on=function(){return e.warn("'.on()' method with the argument '"+arguments[0]+"' cannot be executed outside component scope."),{type:"callBack",value:"observer"===this.type?this.value:this,properties:arguments,observes:"observer"===this.type?this:void 0}}),i.observes||(i.observes=function(){return e.warn("'.observes()' method with the arguments '"+arguments[0]+"' cannot be executed outside component scope."),{type:"observer",value:this,properties:arguments,on:e._onObj,lyteOn:e._onObj}}),i.computed||(i.computed=function(){return e.warn("'.computed()' method with the arguments '"+arguments[0]+"' cannot be executed outside component scope."),{type:"computed",value:this,properties:arguments}}),e._onObj=function(){return{type:"callBack",value:"observer"===this.type?this.value:this,properties:arguments,observes:"observer"===this.type?this:void 0}},e._observesObj=function(){return{type:"observer",value:this,properties:arguments,on:e._onObj,lyteOn:e._onObj}},e._computedObj=function(){return{type:"computed",value:this,properties:arguments}},e._preRegister=function(){e._actualFnProtoOn=Function.prototype.on,e._actualFnProtoObserves=Function.prototype.observes,e._actualFnProtoComputed=Function.prototype.computed;var t=Function.prototype;t.on=t.lyteOn=e._onObj,t.observes=t.lyteObserves=e._observesObj,t.computed=t.lyteComputed=e._computedObj},e._postRegister=function(){var t=Function.prototype;t.on=e._actualFnProtoOn,t.observes=e._actualFnProtoObserves,t.computed=e._actualFnProtoComputed},Object.defineProperty(e.Mixin,"register",{get:function(){return e._preRegister(),e.registerMixinWrapper},enumerable:!0}),e.registerMixinWrapper=function(){try{e.registerMixin.apply(e,arguments),e._postRegister()}catch(t){e._postRegister()}},e.registerMixin=function(t,r){var o;if(e.registeredMixins[t]=r,o=n[t])for(var i in o)e.$.requiredMixins[i](r,o[i],i)},e.Mixin.get=function(t){return e.registeredMixins[t]},e.$.instantiateService=function(t,o){var n=e.registeredServices[t];if(1==n.singleton){if(r.has(t))return r.get(t);var i=new n(o);return r.set(t,i),i}return new n(o)},e.Service.register=function(t,r,o){if(e.registeredServices.hasOwnProperty(t))e.warn("Service -"+t+" is already registered");else{if(!e._keywords.is(t)){var n=r;o&&(n.singleton=o),e.registeredServices[t]=n;var i=e.requiredServices[t];return i&&i.size&&i.forEach((function(r){var o=n;r.isGlobal&&(o=e.__gS[r.key]=e.__gS[r.key]||e.$.instantiateService(t,r.data)),r.cB(o,r.key,r.name,t)})),n}e.warn("Service name-"+t+" should not be a keyword used in Lyte")}},e.Service.getInjected=function(t){if(e.__gS.hasOwnProperty(t))return e.__gS[t]},e.$.requiredServices=function(t,r,o,n,i,a,s){var l=e.requiredServices[r]||(e.requiredServices[r]=new Map),c=e.$.genMapId(l);return l.set(c,{key:t,cB:o,type:n,name:i,serviceName:r,isGlobal:a,data:s}),r+"-"+c},e.$.lazyRegisterService=function(e,t){var r=t.scope,o=t.name,n=r[t.type][o];n&&(n[t.key]=e)},e.$.injectServices={},Object.defineProperty(e,"__gS",{value:{}}),e.injectServices=function(t){var r={};Array.isArray(t)||(t=[t]),t.forEach((function(t){if(t&&"object"==_typeof(t)){var o=t.as,n=t.service,i=t.data;e._keywords.is(o)?e.warn("Service cannot be used in any keywords of Lyte."):e.toBeInjectedServices.hasOwnProperty(o)?e.warn("A service has already been injected in the key named, ",o):(e.toBeInjectedServices[o]=n,r[o]={service:n,data:i},e.registeredServices[n]&&(e.__gS[o]=e.$.instantiateService(n,i)))}else"string"==typeof t?e.toBeInjectedServices.hasOwnProperty(t)?e.warn("A service has already been injected in the key named, ",t):(e.toBeInjectedServices[t]=t,r[t]={service:t},e.registeredServices[t]&&(e.__gS[t]=e.$.instantiateService(t))):e.warn("Invalid data passed to injectServices",t)}));var o=e.$.injectServices;for(var n in o)for(var i in r)o[n](i,r[i].service,n,e.__gS[i],void 0,r[i].data)},e.$.genMapId=function(e){for(var t=Math.floor(1e10*Math.random()+1);e.get(t);)t=Math.floor(1e10*Math.random()+1);return t.toString()},e.$.toRemoveFromRequiredServices=function(t){var r=t.split("-"),o=r[r.length-1],n=o.length,i=t.substr(0,t.length-(n+1)),a=e.requiredServices[i];a&&a.delete(o)},e.toBeUsedServices=function(t){var r={},o=t.services;return o&&o.forEach((function(o){if("string"==typeof o)r[o]=o;else if(o&&"object"==_typeof(o)){var n=o.as,i=o.service;e._keywords.is(n,t.type)?e.warn("Service cannot be used in any keywords of Lyte."):r[n]=i}})),r},e.extendService=function(t){var r,o=e.toBeUsedServices(t);for(var n in o)if(r=o[n],t.isGlobal&&e.__gS.hasOwnProperty(n)||!t.isGlobal&&e.registeredServices.hasOwnProperty(r)){var i=t.ins;t.isGlobal?e.__gS[n]:e.$.instantiateService(r),Array.isArray(i)||(i=[t.ins]),i.forEach((function(o){o[n]=t.isGlobal?e.__gS[n]:e.$.instantiateService(r)}))}else e.$.requiredServices(n,r,t.callback,t.type,t.name,t.isGlobal,t.data)},e.$.requiredMixins=function(e,t,r){var o=n[e]?n[e]:n[e]={};o[r]?o[r].push(t):o[r]=[t]},e.Mixin.exists=function(t){return!!e.registeredMixins[t]},e.log=function(t,r,o){e.debug&&(o?console.log("%c"+t,"color:"+o):console.log(t))},e.time=function(t){var r;e.performance&&(-1!=(r=e.$.consoleTime.indexOf(t))?(e.$.consoleTime.splice(r,1),console.timeEnd(t)):(e.$.consoleTime.push(t),console.time(t)))},e.isRecord=function(e){return!!(e&&e.$&&e.$.hasOwnProperty("isModified"))},e.isComponent=function(e){return!!(e&&e.$node&&e.__data)},e.$.reqFiles={},e.injectResources=function(t,r,o,n){var i=[],s=[];return r=r||function(){},o=o||function(){},new Promise((function(e,r){c(t,function(){n&&n.defer?(n.defer({injectJS:l,files:t,errorFiles:s}),e()):l(t,(function(){o(i,s),s.length?r(i,s):e(i,s)}))}.bind(this))}));function l(t,r,o){var n;function c(){0==++n&&r(i,s)}o=o||[],t?(Array.isArray(t)||(t=[t]),t.length||r(i,s),n=-t.length,t.forEach((function(t){if("string"==typeof t){var r=a(t);!r||".js"!=r&&".css"!=r||-1!=o.indexOf(t)?c():(o.push(t),function(t,r){var o=e.injectResources.respObj[t];if(!o||e.injectResources.availableTags[t]&&"preload"!=e.injectResources.availableTags[t].tag.getAttribute("rel")){var n=e.injectResources.availableTags[t];"error"==n.type?s.push(n.event):i.push(n.event),r()}else{var l,c=a(t);".js"==c?((l=document.createElement("script")).setAttribute("type","text/javascript"),l.setAttribute("src",t)):".css"==c&&((l=document.createElement("link")).setAttribute("type","text/css"),l.setAttribute("rel","stylesheet"),l.setAttribute("href",t)),o.getAttributeNames().forEach((function(e){-1==["href","as","rel"].indexOf(e)&&l.setAttribute(e,o.getAttribute(e))})),l.onerror=l.onload=function(o){"error"==o.type?s.push(o):i.push(o),delete e.injectResources.respObj[t],e.injectResources.availableTags[t].tag.remove(),e.injectResources.availableTags[t]={tag:l,event:o,type:"error"==o.type?"error":"load"},r(),l.onerror=l.onload=void 0},e.$.assetsDiv.appendChild(l)}}(t,(function(){c()})))}else Array.isArray(t)?l(t,(function(){c()})):(n--,l(t.parent,(function(){l(t.child,(function(){c()})),c()})))}))):r(i,s)}function c(t,o){var n;function i(){0==++n&&o()}function s(t,r,o){delete e.$.reqFiles[t],o||(e.injectResources.availableTags[t]&&(e.injectResources.availableTags[t].tag.remove(),delete e.injectResources.respObj[t]),e.injectResources.availableTags[t]={tag:this,event:r,type:r.type})}t?(Array.isArray(t)||(t=[t]),t.length||o(),n=-t.length,t.forEach((function(t){"string"==typeof t?function(t,o,n){e.$.reqFiles[t]?e.$.reqFiles[t].push(n):(e.$.reqFiles[t]=[n],o&&"error"!=o.event.type?(-1!=e.removeFromCache.arr.indexOf(t)&&e.removeFromCache.arr.splice(e.removeFromCache.arr.indexOf(t),1),s.call(o.tag,t,o.event,!0),n()):function(t,o){var n,i=r.internal||{},s=a(t);i.file=t,null!=s?((n=document.createElement("link")).setAttribute("href",t),i.tag=n,".css"==s?n.setAttribute("as","style"):n.setAttribute("as","script"),n.setAttribute("rel","preload"),n.onerror=n.onload=function(e){o.call(this,e),this.onerror=this.onload=void 0},e.triggerEvent("onBeforeInject",i),e.$.assetsDiv.appendChild(n)):e.error("Type of file is not specified in injectResources.")}(t,(function(o){e.injectResources.respObj[t]=this,e.$.reqFiles[t].forEach((function(e){e()})),s.call(this,t,o),r.call(this,o)})))}(t,e.injectResources.availableTags[t],(function(){i()})):Array.isArray(t)?new Promise((function(e){c(t,e)})).then((function(){i()})):(n--,new Promise((function(e){c(t.parent,e)})).then((function(){i()})),new Promise((function(e){c(t.child,e)})).then((function(){i()})))}))):o()}},e.injectResources.availableTags=[],e.injectResources.respObj=[],e.$.replaceOldInjectResource=function(){e.injectResources=function(t,r,o){var n=[],i=[];return r=r||function(){},o=o||function(){},new Promise((function(e){s(t,e)})).then((function(){o(n,i)}));function s(t,o){var l;function c(){0==++l&&o()}function d(t,r){var o=this.getAttribute("src")||this.getAttribute("href");delete e.$.reqFiles[o],r||(e.injectResources.availableTags[o]&&e.injectResources.availableTags[o].tag.remove(),this.onerror=this.onload=void 0,e.injectResources.availableTags[o]={tag:this,event:{type:t.type}})}t?(Array.isArray(t)||(t=[t]),t.length||o(),l=-t.length,t.forEach((function(t){"string"==typeof t?function(t,o,s){e.$.reqFiles[t]?e.$.reqFiles[t].push(s):(e.$.reqFiles[t]=[s],o&&"error"!=o.event.type?(-1!=e.removeFromCache.arr.indexOf(t)&&e.removeFromCache.arr.splice(e.removeFromCache.arr.indexOf(t),1),d.call(o.tag,o.event,!0),s()):function(t,o){var s=a(t);if(tag=document.createElement({".js":"script",".css":"link"}[s]),s){".css"==s?(tag.setAttribute("href",t),tag.setAttribute("type","text/css"),tag.setAttribute("rel","stylesheet")):tag.setAttribute("src",t),tag.onerror=tag.onload=function(e){"error"==e.type?i.push(e):n.push(e),o&&o.call(this,e)};var l=r.internal||{};l.file=t,l.tag=tag,e.triggerEvent("onBeforeInject",l),e.$.assetsDiv.appendChild(tag)}else e.error("Type of file is not specified in injectResources.")}(t,(function(o){e.$.reqFiles[t].forEach((function(e){e()})),d.call(this,o),r.call(this,o)})))}(t,e.injectResources.availableTags[t],(function(){c()})):Array.isArray(t)?new Promise((function(e){s(t,e)})).then((function(){c()})):new Promise((function(e){s(t.parent,e)})).then((function(){new Promise((function(e){s(t.child,e)})).then((function(){c()}))}))}))):o()}},e.injectResources.availableTags=[],e.injectResources.respObj=[]},e.removeFromCache=function(t){e.removeFromCache.assign(t),e.removeFromCache.arr.length&&(e.removeFromCache.arr.forEach((function(t){e.injectResources.availableTags[t]&&(e.injectResources.availableTags[t].tag.remove(),delete e.injectResources.availableTags[t],delete e.injectResources.respObj[t])})),e.removeFromCache.arr=[])},e.removeFromCache.arr=[],e.removeFromCache.assign=function(t){t="*"==t?Object.keys(e.injectResources.availableTags):Array.isArray(t)?t:[t],e.removeFromCache.arr=e.removeFromCache.arr.concat(t)},e.$.prefetchSupport=!1;try{if(!e.browser.ie){var s=document.createElement("link");e.$.prefetchSupport=s.relList.supports("prefetch")&&s.relList.supports("preload")}}catch(e){}function l(){e.assetsDivContainer.appendChild(e.$.assetsDiv)}e.$.prefetchSupport||(console.log("Prefetch is not supported. Falling back to old implementation"),e.$.replaceOldInjectResource()),e.checkProperty=function(t,r,o,n,i,a,s,l,c){var d="extends";switch(t){case"type":if("any"==n)break;if(e.Transform.hasOwnProperty(n)&&null!=r){var p=e.Transform[n],u=!0;if(Array.isArray(r)){if("array"!=e.Transform[n][d])return{code:"ERR03",message:e.errorCodes.ERR03,expected:n};p.hasOwnProperty("items")&&(u=e.checkProperty("items",r,o,p.items))}else if("object"===_typeof(r)&&"object"==e.Transform[n][d]&&p.hasOwnProperty("properties"))u=e.checkProperty("properties",r,o,p.properties);else if(-1!=e.types.indexOf(e.Transform[n][d])&&e.Transform[n][d]!=_typeof(r))return{code:"ERR03",message:e.errorCodes.ERR03,expected:n};if(!0!==u)return u}else if(null!=r)if(Array.isArray(r)){if("array"!=n)return{code:"ERR03",message:e.errorCodes.ERR03,expected:n}}else if(n!=_typeof(r))return{code:"ERR03",message:e.errorCodes.ERR03,expected:n};break;case"mandatory":var f=n;if("object"==_typeof(n)&&c&&1==n.skipValidationOnInit&&(f=!1),f&&(null==r||null==r||""===r))return{code:"ERR02",message:e.errorCodes.ERR02};break;case"maximum":if("number"==typeof r&&r>n)return{code:"ERR04",message:e.errorCodes.ERR04,expected:n};break;case"minimum":if("number"==typeof r&&r<n)return{code:"ERR05",message:e.errorCodes.ERR05,expected:n};break;case"maxLength":case"maxItems":if(r&&r.length>n)return{code:"ERR06",message:e.errorCodes.ERR06,expected:n};break;case"minLength":case"minItems":if(r&&r.length<n)return{code:"ERR07",message:e.errorCodes.ERR07,expected:n};break;case"pattern":if("string"==typeof r&&!new RegExp(n).test(r))return{code:"ERR08",message:e.errorCodes.ERR08,expected:n};break;case"uniqueItems":if(Array.isArray(r)&&n)for(var h=[],m=0;m<r.length;m++){var v=r[m];if(-1!=h.indexOf(v))return{code:"ERR09",message:e.errorCodes.ERR09};h.push(v)}break;case"constant":if(Array.isArray(r)){var y=r.length==n.length&&r.every((function(e,t){return e===n[t]}));if(!y)return{code:"ERR10",message:e.errorCodes.ERR10,expected:n}}else if("object"==_typeof(r)){if(!(y=store.adapter.$.compareObjects(r,n)))return{code:"ERR10",message:e.errorCodes.ERR10,expected:n}}else if(r&&r!=n)return{code:"ERR10",message:e.errorCodes.ERR10,expected:n};break;case"items":if(Array.isArray(r))for(m=0;m<r.length;m++){n.any&&Array.isArray(n)||(n=[n]);for(var _=n.length,g=(u=!0,0);g<_;g++)for(var t in p=n[g])if(!0!==(y=e.checkProperty(t,r[m],m,p[t],p))){!0===u&&(y.path=y.path?m+"."+y.path:y.path,u=y);break}if(!0!==u)return u}break;case"properties":if("object"==_typeof(r)&&!Array.isArray(r))for(var o in r)if(n.hasOwnProperty(o)){var b=n[o];for(b.any&&Array.isArray(b)||(b=[b]),_=b.length,u=!0,m=0;m<_;m++)for(var t in p=b[m])if(1!=(y=e.checkProperty(t,r[o],o,p[t],p))){!0===u&&(y.path=y.path?o+"."+y.path:o.toString(),u=y);break}if(!0!==u)return u}break;case"validation":if(1!=(y=e.customValidator[n].apply(a,[o,r,l])))return y;break;case"instanceof":if(!("object"!==_typeof(r)||Array.isArray(r)||r instanceof n))return{code:"ERR30",message:e.errorCodes.ERR30,property:o,instanceof:n}}return!0},e.checkNestedProp=function(t,r,o,n,i,a,s,l,c){var d;if(e.Transform[o.type]&&((o=e.Transform[o.type]).type=o.extends),0!=r.length){if("array"==o.type)o.items&&!isNaN(r[0])&&"object"==_typeof(o.items)&&(r=r.slice(1),e.checkNestedProp(t,r,o.items,n,i,a,s,l,c));else if("object"==o.type&&o.properties&&o.properties.hasOwnProperty(r[0])){var p=r[0];r=r.slice(1),e.checkNestedProp(t,r,o.properties[p],n,i,a,s,l,c)}}else if(o&&(o.properties||o.items)&&!l.hasOwnProperty("warn")){var u={__data:{}};o.properties?u.__data[a]=o.properties[a]:o.items&&n.index?u.__data[n.index]=o:u.__data[a]=o.items;var f=e.validate(i,a,s,u),h=n.attr?n.attr:n.key,m=n.path.split("."),v=null==n.index&&a?n.path+(""!=n.path?".":"")+a:null!=n.index?n.path+(""!=n.path?".":"")+n.index:n.path;if(f&&"object"==(void 0===f?"undefined":_typeof(f))&&f.code){f.value=s,f.path=""!=n.path?n.path:a,n.isRec&&c&&null==n.key&&""!=n.path&&(h=n.path.split(".")[0],m.shift(),m=1==m.length&&m[0]==a?[]:m),n.Error&&n.Error[h]?n.Error[h].code&&n.Error[h].nested?n.Error[h].nested:n.Error[h].nested={}:n.Error[h]={nested:{}},n.Error[h].code="ERR34",n.Error[h].message=e.errorCodes.ERR34,d=n.Error[h].nested,n._cmpErr[h]||(n._cmpErr[h]={}),n._cmpErr[h].code="ERR34",n._cmpErr[h].message=e.errorCodes.ERR34;var y=n._cmpErr[h].path?n._cmpErr[h].path:[];""!=n.path&&m.forEach((function(e){d=d&&!d[e]?d[e]={}:d[e]})),null!=n.index?d[n.index]=f:d[a]=f,y.includes(v)||y.push(v),n._cmpErr[h].path=y}else{n.isRec&&c&&null==n.key&&(h=n.path.split(".")[0],m.shift(),m=1==m.length&&m[0]==a?[a]:m),d=n.Error[h]&&n.Error[h].nested?n.Error[h].nested:void 0;var _=n._cmpErr[h]||void 0;if(_&&_.path&&_.path.includes(v)){var g=_.path.indexOf(v);_.path.splice(g,1)}if(d){n.index;var b=!0;v.split(".").forEach((function(e){d[e]&&d[e].code?(delete d[e],b=!(!d||0!=Object.keys(d).length)):d=d[e]})),1==b&&n.Error[h]&&n._cmpErr[h]&&(delete n.Error[h],delete n._cmpErr[h])}}(l.value&&l.value.hasOwnProperty("code")&&f.code||!l.value)&&(l.value=f)}n.index&&delete n.index},e.types=["string","object","number","boolean","array","any"],e.attr=function(t,r){var o={};if(o.type=t,null==r&&(r={}),-1==e.types.indexOf(t)&&!e.Transform.hasOwnProperty(t))throw new Error("Not a valid field type - "+t);return Object.assign(o,r),o},window.prop=e.attr,e.defineRelation=function(e,t,r){var o={type:"relation",relType:t,relatedTo:e};return r&&(o.opts=r),o},e.belongsTo=function(e,t){return this.defineRelation(e,"belongsTo",t)},e.hasMany=function(e,t){return this.defineRelation(e,"hasMany",t)},e.Transform={},e.customValidator={},e.registerDataType=function(t,r){var o="extends";this.Transform.hasOwnProperty(t)?e.warn("Custom Field Type - "+t+" -  already exists."):null!=r[o]?this.Transform[t]=r:e.error("Not a valid field type - "+r[o])},e.registerValidator=function(t,r){this.customValidator.hasOwnProperty(t)?e.warn("Custom Validator with name - "+t+" - already exists"):this.customValidator[t]=r},e.patterns={email:/^([A-Za-z0-9._%\-'+/]+@[A-Za-z0-9.-]+\.[a-zA-Z]{2,22})$/,url:/(^(ht|f)tp(s?):\/\/[0-9a-zA-Z][-.\w]*(:[0-9])*(\/?)([a-zA-Z0-9\-.?,:'/\\+=&amp;%$#_[\]@!()*;~]*)?$)/,ampm:/^(AM|PM|am|pm)$/,hour:/^(0?[0-9]|1[0-9]|2[0-4])$/,minute:/^(0?[0-9]|[1-5][0-9]|60)$/,boolean:/^(true|false|TRUE|FALSE)$/,alphaNumeric:/([a-zA-Z0-9])+/,alphabetsOnly:/([a-zA-Z])+/,numeric:/([0-9])+/,phoneNo:/^[0-9a-zA-Z+.()\-;\s]+$/},e.validate=function(t,r,o,n,i){var a=n.__data[r],s=!1,l=a?a.type:void 0,c=a;if(c){c.any&&Array.isArray(c)||(c=[c]);for(var d=c.length,p=!0,u=0;u<d;u++){var f=c[u];for(var h in f)!0!==(s=e.checkProperty(h,o,r,f[h],f,t,l,void 0,i))&&!0===p&&(p=s)}if(!0!==p)return p}return!1},e.registerPattern=function(e,t){this.patterns[e]=t},e.errorCodes={ERR01:"Primary key cannot be modified",ERR02:"Mandatory field cannot be empty",ERR03:"Type of value does not match the specified data type",ERR04:"Value is greater than the maximum value allowed",ERR05:"Value is less than the minimum value allowed",ERR06:"Length of string/array is greater than the maximum limit allowed",ERR07:"Length of string/array is less than the minimum limit allowed",ERR08:"String does not match the specified pattern",ERR09:"Values in array are not unique",ERR10:"Value is not equal to the specified constant",ERR11:"Model of related field is not defined",ERR12:"Model of backward relation is not defined",ERR13:"Record not found",ERR14:"Model does not match the related field model",ERR15:"Error in creating a record as a relation",ERR16:"Record with primary key already exists",ERR17:"Value cannot be changed because record has been deleted",ERR18:"Action not defined",ERR19:"Model not defined",ERR20:"Key not specified",ERR21:"'belongsTo' relationship expects a single object/id",ERR22:"Type not specified for polymorphic relation",ERR23:"Primary Key value not present",ERR24:"Error while relating record",ERR25:"Backward relation not present",ERR26:"Primary key value cannot be undefined or null",ERR27:"Observer can observe only string data type value, '{0}' value cannot be observed in the function named '{1}' in the component '{2}'",ERR28:"Unloaded record cannot be saved",ERR29:"Property not defined in the object",ERR30:"Error in variables declaration for Query",ERR31:"Query not registered for the Model",ERR32:"Property not defined in the object",ERR33:"Property's value is not an instanceof the mentioned class",ERR34:"Type definition for nested properties / items does not match with the value",ERR35:"A datatype mismatch has occurred for custom DataType '{0}'"},e.registeredGlobalEvents=e.__lyteRegisteredEvents={},e.__lyteRegisteredEventsGlobal={},e.triggerEvent=function(e){var t,r,o;"object"==_typeof(e)&&e.global?(r=e.args,t=Array.prototype.slice.call(r,1),eventName=r[0],o="__lyteRegisteredEventsGlobal"):(t=Array.prototype.slice.call(arguments,1),eventName=arguments[0],o="__lyteRegisteredEvents");var n=!1,i=this[o][eventName];if(i)for(var a=0;a<i.listeners.length;a++){var s=i.listeners[a];if(s&&!1===s.apply(this,t)){n=!0;break}}else i=this[o][eventName]={listeners:[]};var l=new CustomEvent(eventName,{detail:t});n||document.dispatchEvent(l)},e.triggerGlobalEvent=function(){return e.triggerEvent({global:!0,args:Array.from(arguments)})},e.addEventListener=function(t,r,o){if("function"==typeof r){var n=o&&o.global?"__lyteRegisteredEventsGlobal":"__lyteRegisteredEvents",i=this[n][t];return i||(i=this[n][t]={listeners:[]}),t+"-"+(i.listeners.push(r)-1)}e.error("Second parameter to Lyte.Component.addGlobalEventListener() must be a function")},e.removeEventListener=function(t,r){var o;if(t&&-1!=(o=t.lastIndexOf("-"))){var n=t.split("-");if(r){if(n=t.split("-"),!(i=this[r&&r.global?"__lyteRegisteredEventsGlobal":"__lyteRegisteredEvents"][n[0]])||!i.listeners[n[1]])return void e.error("No such listener registered");i.listeners[n[1]]=null}else{var i,a=t.substring(0,o),s=t.substring(o+1);if(!(i=this.__lyteRegisteredEvents[a])||!i.listeners[s])return void e.error("No such listener registered");i.listeners[s]=null}}else e.error("listener unique id not specified / invalid")},e.extendEventListeners=function(t){t&&"object"==_typeof(t)&&!t.hasOwnProperty("__lyteRegisteredEvents")&&Object.defineProperties(t,{__lyteRegisteredEvents:{value:{}},addEventListener:{value:e.addEventListener},removeEventListener:{value:e.removeEventListener},triggerEvent:{value:e.triggerEvent}})},e.deepCopyObject=function(t){for(var r,o,n,i,a,s,l=[{source:t,target:Array.isArray(t)?[]:Object.create(Object.getPrototypeOf(t))}],c=[t],d=l[0].target,p=[d];r=l.shift();)if(o=Object.keys(r.source),r.source instanceof Map)for(o=Array.from(r.source.keys()),MapKeys=0;MapKeys<o.length;MapKeys++)r.source.get(o[MapKeys])&&"object"!=_typeof(r.source.get(o[MapKeys]))?r.target.set(o[MapKeys],r.source.get(o[MapKeys])):r.target.set(o[MapKeys],e.deepCopyObject(r.source.get(o[MapKeys])));else{for(n=0;n<o.length;n++)(i=Object.getOwnPropertyDescriptor(r.source,o[n]))&&(i.value&&"object"==_typeof(i.value)?(a=i.value,i.value=Array.isArray(a)?[]:a instanceof Set?new Set:a instanceof Map?new Map:Object.create(Object.getPrototypeOf(a)),-1==(s=c.indexOf(a))?(c.push(a),p.push(i.value),Object.defineProperty(r.target,o[n],i),l.push({source:a,target:i.value})):(i.value=p[s],Object.defineProperty(r.target,o[n],i))):Object.defineProperty(r.target,o[n],i));e.isRecord(r.source)&&(Object.defineProperty(r.target,"$",{value:{}}),r.target.$.isNew=r.source.$.isNew,r.target.$.isModified=r.source.$.isModified,r.target.$.isDeleted=r.source.$.isDeleted,r.target.$.pK=r.source.$.pK,r.target.$._attributes=r.source.$._attributes,r.target.$.isCloned=!0,r.target.$.model={_name:r.source.$.model._name},r.source.$.hasOwnProperty("deepNest")&&(r.target.$.deepNest=r.source.$.deepNest),r.source.$.hasOwnProperty("partialType")&&(r.target.$.partialType=r.source.$.partialType)),Array.isArray(r.source)&&r.source.partial&&Object.defineProperty(r.target,"partial",{value:r.source.partial})}return d},e.nestScpId=1,e.nestScp={},e.__nestRef__={},e.__nestScp__=new Map,e.establishObjectBinding=function(t,r,o,n,i,a){var s,l,c,d=t.__component__&&t.__component__.component.__data?t.__component__.component.__data[r]:void 0;if(o){t&&!t.$&&t._scp?Array.from(t._scp.keys()).forEach((function(t){var r=e.nestScp[t];s=store.modelFor(r.model)})):s=t.$.model;var p=!1;if(l=s&&s.fieldList&&s.fieldList.hasOwnProperty(r)?s.fieldList[r]:{}){var u=e.Transform[l.type];u&&(u.hasOwnProperty("properties")||u.hasOwnProperty("items"))&&(p=!0)}if(!(l&&"relation"!==l.type&&l.watch||p))return void(t._scp&&Array.from(t._scp.keys()).forEach((function(o){var n=t._scp.get(o).paths,i=e.nestScp[o]||void 0;for(var s in a=i&&i.watch?i.watch:a,n){var l=s?s.split("."):[];l.push(r),e.bindObj(t,r,o,l,new Map,void 0,d,a,!0)}})));d=l}n&&t._scp&&t._scp.size&&Array.from(t._scp.keys()).forEach((function(o){var n=t._scp.get(o).paths,i=e.nestScp[o]||void 0;for(var s in a=i&&i.watch?i.watch:a,n){var l=s?s.split("."):[];l.push(r),e.bindObj(t,r,o,l,new Map,void 0,d,a,!0)}}));var f=!1;if(d&&e.Transform[d.type]){var h=e.Transform[d.type];(h.hasOwnProperty("properties")||h.hasOwnProperty("items"))&&(d=e.Transform[d.type],f=!0)}if((!o||l.watch||l.properties||l.items||a||f)&&t[r]){var m;t&&t.__component__?(t.__component__.__scpObj||Object.defineProperty(t.__component__,"__scpObj",{value:{}}),t.__component__,m=t.__component__.__scpObj):e.isRecord(t)&&(t.$.__scpObj||Object.defineProperty(t.$,"__scpObj",{value:{}}),m=t.$.__scpObj);var v=m;if(m){var y=!1,_=!1;if(o)if(t[r]&&!e.__nestScp__.has(t[r]))c={model:s._name,attr:r,pK:t.$.pK,Error:{}},y=!0;else{var g=e.__nestScp__.get(t[r]),b=e.__nestRef__[g]=e.__nestRef__[g]||new Map,A=e.$.genMapId(b);b.set(A,!0),e.setRecBindMap(e.nestScp[g],{model:s._name,attr:r,pK:t.$.pK,Error:{}}),v[r]=g+"_"+A}else if(t[r]&&!e.__nestScp__.has(t[r])){var E=[];(L={}).key=r,L.dtype=t.__component__.component.__data[r],L._cmpErr=t.errors,L.Error={},E.push(L),c={data:t[r],PropsInfo:E},L.dtype.watch&&(c.watch=!0),_=!0}else{g=e.__nestScp__.get(t[r]);var C=e.nestScp[g];if(C){C.PropsInfo||(C.PropsInfo=[]);var L,$=C.PropsInfo;(L={}).key=r,L.Error={},L._cmpErr=t.errors,L.dtype=t.__component__.component.__data[r],L.dtype.watch&&(C.watch=!0),$.push(L)}b=e.__nestRef__[g]=e.__nestRef__[g]||new Map,A=e.$.genMapId(b),b.set(A,!0),v[r]=g+"_"+A}if(c){var P=e.nestScpId++;b=e.__nestRef__[P]=e.__nestRef__[P]||new Map,A=e.$.genMapId(b),b.set(A,!0),e.__nestScp__.set(t[r],P),y&&(e.nestScp[P]={},e.setRecBindMap(e.nestScp[P],c),e.nestScp[P].Error=c.Error),_&&(e.nestScp[P]=c),e.nestScp[P]._data=t[r],v[r]=v[r]||P+"_"+A,e.bindObj(t,r,P,[],new Map,void 0,d,a)}}}},e.removeNestScp2Bind=function(e,t){if((e=e.model).has(t.model)){var r=e.get(t.model);if(r.has(t.pK)){var o=r.get(t.pK);o.has(t.attr)&&o.delete(t.attr),o.size||r.delete(t.pK)}r.size||e.delete(t.model)}},e.setRecBindMap=function(e,t){var r=e.model=e.model||new Map,o=t.model,n=t.pK,i=t.attr;o&&!r.has(o)&&r.set(o,new Map),r=r.get(o),n&&!r.has(n)&&r.set(n,new Map),r=r.get(n),i&&!r.has(i)&&r.set(i,!0)},e.bindObj=function(t,r,o,n,i,a,s,l,c){i=i||new Map;var d=null!=r?t[r]:t,p=!1;if(c||n.length||e.__nestScp__.get(t)!==o||delete e.nestScp[o].cyclic,n.length>1&&d&&e.nestScp[o]&&e.nestScp[o].hasOwnProperty("data")&&e.nestScp[o].data===d){if(i.get(d))p=!0;else try{JSON.stringify(d)}catch(e){p=!0}e.checkAndAddBind(d,o,n,p)&&e.estObjScp(d,o,n,p)}else{var u,f;if(s&&(s.hasOwnProperty("items")||s.hasOwnProperty("properties")?(u=s.items||s.properties,f=!0):null==l&&1==s.watch&&(l=s.watch)),u=l?void 0:u,Array.isArray(d))i.get(d)?p=!0:(i.set(d,!0),d.forEach((function(t,r){n.push(r),(l||s&&s.hasOwnProperty("items")&&"object"==_typeof(s.items))&&e.bindObj(d,r,o,n,i,void 0,u,l),n.pop()}))),e.checkAndAddBind(d,o,n,p)&&(Array.isArray(l)&&(h=e.checkEstablishingSCP(d,n,l),Array.isArray(d)&&0==d.length&&(h=!0)),(h||"boolean"==typeof l&&l||f)&&e.estObjScp(d,o,n,p));else if(d&&"object"==_typeof(d)){var h;if(p=!1,i.get(d))p=!0;else for(var m in i.set(d,!0),d)n.push(m),(l||u&&u.hasOwnProperty(m))&&e.bindObj(d,m,o,n,i,void 0,u?u[m]:void 0,l),n.pop();e.checkAndAddBind(d,o,n,p)&&(Array.isArray(l)&&(h=e.checkEstablishingSCP(d,n,l),Array.isArray(d)&&0==d.length&&(h=!0)),(h||"boolean"==typeof l&&l||f)&&e.estObjScp(d,o,n,p))}}},e.checkAndAddBind=function(t,r,o,n){return!t._scp||!t._scp.size||(!(t._scp.size&&t._scp.has(r)&&t._scp.get(r).paths.hasOwnProperty(o.join(".")))||(n&&(e.nestScp[r].cyclic=!0),!1))},e.estObjScp=function(t,r,o,n){t._scp||Object.defineProperty(t,"_scp",{value:new Map,enumerable:!1,configurable:!0});var i=t._scp;i.has(r)||i.set(r,{});var a=i.get(r);o=o?o.join("."):o,(a.paths=a.paths||{})[o]=!0;var s=e.nestScp[r];s.cyclic||1!=n||(s.cyclic=!0)},e.cmpObjs=function(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(var o in t){if(!r.hasOwnProperty(o))return!1;if(0==e.cmpData(t[o],r[o]))return!1}return!0},e.cmpData=function(t,r){if(Array.isArray(t)){if(!Array.isArray(r)||t.length!==r.length)return!1;if(t===r)return!0;for(var o=t.length,n=0;n<o;n++)if(0==e.cmpData(t[n],r[n]))return!1}else{if(t&&r&&"object"==_typeof(t)&&"object"==_typeof(r))return t===r||e.cmpObjs(t,r);if(t!==r)return!1}return!0},e.nestScpRmPath=function(e,t){if(e&&e.paths)for(var r in e=e.paths)r.startsWith(t+".")&&delete e[r]},e.nestScpRemove=function(t,r,o){var n=t._scp;if(n&&n.size){if(o){e.nestScpRmPath(n.get(r),o);var i=n.get(r),a=i?i.paths:void 0;a&&!Object.keys(a).length&&n.delete(r)}else n.delete(r);n.size||delete t._scp}},e.rmNestScp=function(t,r,o,n,i){if(Array.isArray(t))o.get(t)||(o.set(t,!0),t.forEach((function(t,n){e.rmNestScp(t,r,o,void 0,i)}))),e.nestScpRemove(t,r,i);else if(t&&"object"==_typeof(t)){if(!o.get(t))for(var a in o.set(t,!0),t)e.rmNestScp(t[a],r,o,void 0,i);e.nestScpRemove(t,r,i)}},e.removeNestScp=function(t,r,o,n,i,a,s,l){a=a||new Map,r=Number.parseInt(r);var c=e.nestScp[r],d=e.__nestRef__[r];l&&c.model&&e.removeNestScp2Bind(c,l),i?(d&&d.has(o)&&d.delete(o),(!d||d&&!d.size)&&(delete e.__nestRef__[r],e.__nestScp__.has(t)&&e.__nestScp__.delete(t),e.rmNestScp(t,r,a,!0,n),s||delete e.nestScp[r])):e.rmNestScp(t,r,a,!0,n)},e.resolvePromises=function(t){return"string"==typeof t||t instanceof Promise?t:Array.isArray(t)?function(t){var r=[],o=!1;if(t.every((function(e,t){return!(e instanceof Promise||e&&!Array.isArray(e)&&"object"==_typeof(e)&&"function"==typeof e.then)||(o=!0,!1)})),!o)return Promise.resolve(t);var n=new Promise((function(o,n){Promise.all(t).then((function(e){t.forEach((function(t,o){r[o]=e[o]})),o(r)}),(function(t){n(t),e.error("Error on resolve promises",t)}))}));return n}(t):"object"==_typeof(t)?function(t){var r=[],o=[],n=Object.keys(t);if(n.forEach((function(e){var n=t[e];(n instanceof Promise||n&&!Array.isArray(n)&&"object"==_typeof(n)&&"function"==typeof n.then)&&(r.push(e),o.push(n))})),o.length){var i={};return new Promise((function(a,s){Promise.all(o).then((function(e){n.forEach((function(o){-1!=r.indexOf(o)?i[o]=e[r.indexOf(o)]:i[o]=t[o]})),a(i)}),(function(t){s(t),e.error("Error on resolve promises",t)}))}))}return Promise.resolve(t)}(t):void 0},"complete"===document.readyState||"interactive"===document.readyState?l():document.addEventListener("DOMContentLoaded",(function(e){l()}),!0);var c=XMLHttpRequest.prototype.send;function d(t,r,o,n){var i=e.__nodeXHRMap=e.__nodeXHRMap||new Map,a=i.get(r);a||i.set(r,new Map),a=i.get(r);var s=r.lyteState=r.lyteState||[],l=n||o;-1==s.indexOf(l)&&s.push(l),r.setAttribute("lyte-state","");var c=a.get(t);if(c||(a.set(t,[]),c=a.get(t)),n)return c.push({state:n}),{target:r,event:t};c.push({isXHR:!0,xhr:o});var d=function(e){4==o.readyState&&(p(o,t,r),o.removeEventListener("readystatechange",d))};o.addEventListener("readystatechange",d)}function p(t,r,o){var n=e.__nodeXHRMap,i=n.get(o);if(i){var a=i.get(r);if(a&&a){var s=a,l=-1;if(s.every((function(e,r){return!(e&&e.isXHR&&e.xhr==t||"string"==typeof t&&e.state==t)||(l=r,!1)})),-1!=l){s.splice(l,1);var c=o.lyteState.indexOf(t);if(o.lyteState.splice(c,1),!s.length){i.delete(r);var d=o&&Array.isArray(o.lyteState)?o.lyteState.indexOf(t):-1;-1!=d&&o.lyteState.splice(d,1),o&&o.lyteState&&0==o.lyteState.length&&(o.lyteState=null,o.removeAttribute("lyte-state"))}i.size||n.delete(o)}}}}XMLHttpRequest.prototype.send=function(){var t,r=window.event,o=r?r.target:void 0;if(e.getConfig("stateHandling"))if(r)t=r.type,/^(click|dblclick)$/.test(t)&&o&&o.getAttribute&&"false"!=o.getAttribute("lyte-state-handling")&&d(t,o,this);else{var n=e&&e.Router?e.Router.getRouteInstance():void 0;if(n){var i=n.transition?n.transition.ev:void 0;i&&i.target&&i.target.getAttribute&&"false"!=i.target.getAttribute("lyte-state-handling")&&((e.__transXHRMap=e.__transXHRMap||new Map).set(n.transition,{currentAction:i,XHR:this}),d(i.type,i.target,this))}}c.apply(this,arguments)},e.addEventListener("transitionStart",(function(e){var t=e.nextTrans;t&&e.prevTrans&&(window.event&&/^(click|dblclick)$/.test(window.event.type)?(t.ev=window.event,e.prevTrans.ev&&delete e.prevTrans.ev):409!=e.prevTrans.state&&308!=e.prevTrans.state||!e.prevTrans.ev||(t.ev=e.prevTrans.ev,delete e.prevTrans.ev))})),e.addEventListener("afterRouteTransition",(function(t){if(t&&t.trans){var r=e.__transXHRMap,o=!1;if(409==t.trans.state||308==t.trans.state){var n=window.event,i=t.trans.ev;if(!n||n&&i&&n!=i&&n.target==i.target&&n.type==i.type?t.trans.nested=!0:o=!0,r){var a=r.get(t.trans);a&&(p(a.XHR,a.currentAction.type,a.currentAction.target),r.delete(t.trans))}}else 200==t.trans.state&&(r&&r.delete(t.trans),o=!0);o&&t.trans.ev&&delete t.trans.ev}})),e.addEventListener("beforeRouteTransition",(function(e){e&&e.prevTrans&&e.prevTrans.nested&&(e.trans.ev=e.prevTrans.ev,delete e.prevTrans.ev,e.trans.fromPrevTrans=!0)})),e.setState=function(t){t||console.error("Please provide a state name");var r=window.event;if(/^(click|dblclick)$/.test(r.type)){var o=r.target;if(1==e.getConfig("stateHandling")&&o&&o.getAttribute&&"false"!=o.getAttribute("lyte-state-handling")&&!o.getAttribute("lyte-state")){var n=e.__stateMap=e.__stateMap||new Map;if(n.get(t))console.error("There is already a open state by the name",t);else{var i=d(r.type,o,void 0,t);n.set(t,i)}}}},e.removeState=function(t){t||console.error("Please provide a state name");var r=e.__stateMap;if(r){var o=r.get(t);o&&(r.delete(t),p(t,o.event,o.target))}},e.setConfig=function(t,r,o){"mutable"==t&&(1==r?e.__gl=e.mut(e.__gl__):0==r&&(e.__gl=e.__gl__));var n=e.__config=e.__config||{};o?Object.defineProperty(n,t,{value:r}):n[t]=r},e.getConfig=function(t){var r=e.__config;if(r)return r[t]},e.establishWatchScope=function(t,r){var o,n=this;for(var i in t){var a=i,s=t[i];if(n.component&&n.component.__data&&n.component.__data[a]){o=n.getData(a),s=!!n.component.__data[a].watch||s,"object"==_typeof(o)&&e.establishObjectBinding(n.component.data,i,!1,void 0,void 0,s);var l=n.component.__data;e.nestScp[e.__nestScp__.get(o)]&&(l[i].watch=s)}else if(r){var c=r.fieldList;c[i]&&null==c[i].watch&&(c[i].watch=s,r._fldGrps.watch[i]=c[i])}}},e.checkEstablishingSCP=function(t,r,o){if(Array.isArray(o)){var n;if(n=r.join("."),e.checkWatchPath(n,o,!0)&&"object"!=_typeof(t))return!0;for(var i=Object.keys(t),a=0;a<i.length;a++){var s=i[a],l=""==n?s:n+"."+s;if(e.checkWatchPath(l,o,!0))return!0}}},e.checkWatchPath=function(t,r,o){if("boolean"==typeof r&&!0===r)return!0;if(Array.isArray(r))for(var n=0;n<r.length;n++){var i=r[n];if("$.*"==i&&t&&t.includes("."))return!1;var a=-1!=(i=(i=(i=i.replace(/ /g,"")).replace(/\$\.\./g,"..")).replace(/\$\./g,"")).search(/\.\./g)||-1!=i.search(/\[|\\]|\{|\}/g)||i.includes("*");if(t==i)return!0;if(a){if(o&&-1!=i.search(/\.\./)&&"..*"==(i=i.replace(/\.\.\S+/g,"..*")))return!0;if(i=(i=(i=0==(i=0==i.search(/\[/)?i.replace("[",""):i).search(/\.\.\[/)?i.replace("..[",".."):i).replace(/\.*\[/g,".")).replace(/\]/g,""),e.checkWeirdPath(i,t))return!0}}},e.checkWeirdPath=function(e,t){if(t==e)return!0;if(e.includes("..")||e.includes("*")){var r=e;r=(r=(r=(r=(r=r.replace(/\*/g,"$$")).replace(/\.\./g,"::")).replace(/\./g,"\\.")).replace(/\:\:/g,"\\.?.*\\.?")).replace(/\$/g,".*");var o=e.split("."),n=o.length;return""==o[n-2]&&"*"!=o[n-1]&&(r+="$"),!!new RegExp(r).test(t)}},e.ignoreMut=function(e){e()};var u=new WeakMap;e.mut=function(t){if(t&&t.__ltPrx__)return t;if(t&&u.has(t))return u.get(t);if(!t||t&&"Object"!==t.constructor.name&&"Record"!==t.constructor.name&&!Array.isArray(t)&&!t.__ltPrx__)return t;var r=new Proxy(t,{set:function(t,r,o){return Array.isArray(t)?t[r]=o:e.Component.set(t,r,o),!0},get:function(t,r){if("__ltPrx__"===r)return!0;if("__target__"===r)return t;var o=t[r];if(o&&o.__ltPrx__)return o;if(o&&u.has(o))return u.get(o);var n=Object.getOwnPropertyDescriptor(t,r);if(o&&("Object"===o.constructor.name||Array.isArray(o)||o&&o.$&&o.$.hasOwnProperty("isModified"))&&!o.__ltPrx__&&n&&n.configurable){var i=e.mut(o);return u.set(o,i),i}return o}});return u.set(t,r),r},e.immut=function(t,r){var o;return r=r||new WeakMap,t&&Array.isArray(t)?o=Array.from(t):t&&"object"==_typeof(t)&&(o=Object.assign({},t)),r.get(t,o),new Proxy(t,{get:function(t,o){var n;return(n=r.get(t)[o])&&"object"==_typeof(n)&&!r.has(n)?e.immut(n,r):n},set:function(t,o,n){var i=r.get(obj);return e.Component.set(i,o,n),!0}})},e.TransformHierarchy=function(t,r,o,n){if(!n.get(t)){n.set(t,!0);var i=e.Transform[t],a=i.extends;if(-1!=e.types.indexOf(a))s=i[o];else if(e.Transform[a]){e.TransformHierarchy(i.extends,r,o,n);var s=i[o]}s&&(r.data=s(r.data,r.key,r.model?r.model:r.record,r.pkVal))}},e.deepCopy=function(t,r){var o;if((r=r||new WeakMap).has(t))return r.get(t);if("object"!==_typeof(t)||null==t)return t;if(t instanceof Map){o=new Map(t);var n=new Proxy(o,{get:function(t,o,n){return"get"===o?function(o){var n=t.get(o);return"object"===_typeof(n)&&null!==n?e.deepCopy(n,r):n}:"set"===o?function(e,r){return t.set(e,r)}:"has"===o?function(e){return t.has(e)}:"delete"===o?function(e){return t.delete(e)}:function(e){return t[o](e)}}});return r.set(t,n),n}if(t instanceof Set){o=new Set(t);var i=new Proxy(o,{get:function(e,t,r){return"add"===t?function(t){return e.add(t)}:"has"===t?function(t){return e.has(t)}:"delete"===t?function(t){return e.delete(t)}:function(r){return e[t](r)}}});return r.set(t,i),i}if(o=Array.isArray(t)?Array.from(t):/Record|Object/.test(t.constructor.name)?Object.assign({},t):void 0,e.isRecord(t)&&(Object.defineProperty(o,"$",{value:{}}),o.$.isNew=t.$.isNew,o.$.isModified=t.$.isModified,o.$.isDeleted=t.$.isDeleted,o.$.pK=t.$.pK,o.$._attributes=t.$._attributes,o.$.isCloned=!0,o.$.model={_name:t.$.model._name},t.$.hasOwnProperty("deepNest")&&(o.$.deepNest=t.$.deepNest),t.$.hasOwnProperty("partialType")&&(o.$.partialType=t.$.partialType)),Array.isArray(t)&&t.partial&&Object.defineProperty(o,"partial",{value:t.partial}),o){var a=new Proxy(o,{get:function(t,o,n){if(!t.propertyIsEnumerable(o))return t[o];var i=Reflect.get(t,o,n);return t[o]instanceof Node||t[o]instanceof Event?t[o]:"object"===_typeof(i)&&null!==i?e.deepCopy(i,r):i},set:function(e,t,o,n){return"object"===_typeof(o)&&null!==o&&r.set(o,o),Reflect.set(e,t,o,n)}});return r.set(t,a),a}return t},e.Proto=function(){function t(e){var r=e.context,o=void 0===r?{}:r,n=e.data,i=void 0===n?{}:n;for(var a in _classCallCheck(this,t),i)this[a]=i[a];t.processDefault(this,this.constructor.fieldList,o)}return _createClass(t,null,[{key:"getDef",value:function(t){if(this._protoMap.has(t))return this._protoMap.get(t);e.error("Proto with name ".concat(t," does not exist."))}},{key:"isExtendedProto",value:function(t){for(t=Object.getPrototypeOf(t);t&&t!==Function.prototype&&t!==Object.prototype;){if(t===e.Proto)return!0;t=Object.getPrototypeOf(t)}}},{key:"processDynamic",value:function(t,r,o,n,i){var a,s,l=t[r].default;return l.startsWith("{{")?(i[s=e.Compile.getMustache(l)]?i[s].push(r):i[s]=[r],n.push(s),a=LyteComponent.get(o,s)):a=l[r],a}},{key:"getContextProperties",value:function(t){for(var r={},o=Object.keys(t),n=0;n<o.length;n++){var i=o[n];e.getProperty(i,!0,r)}return r}},{key:"addDynamicObserver",value:function(t,r,o){var n=o.observes.apply(o,r),i=this.getContextProperties(t);e.establishObserverBindings([n],!0,i),LyteComponent.establishBindings(i,t)}},{key:"processDefault",value:function(t,r,o){var n=[],i={};for(var a in r)0==t.hasOwnProperty(a)&&void 0!==r[a].default&&(t[a]=this.processDynamic(r,a,o,n,i));n.length>0&&this.addDynamicObserver(o,n,(function(r){r&&"change"==r.type&&i[r.item].forEach((function(n){e.Component.set(t,n,LyteComponent.get(o,r.item))}))}))}},{key:"createObj",value:function(t){var r=t.name,o=t.data,n=void 0===o?{}:o,i=t.context,a=void 0===i?{}:i;if(this.isExtendedProto(this)&&(r=this.name),this._protoMap.has(r))return new(this._protoMap.get(r))({context:a,data:n});e.error("Proto with name ".concat(r," does not exist."))}},{key:"register",value:function(r,o){if(this.isExtendedProto(this)&&(r=this.name,o=this.prototype.props(),delete this.prototype.props),!this._protoMap.has(r)){var n=_defineProperty({},r,function(e){function t(){return _classCallCheck(this,t),_callSuper(this,t,arguments)}return _inherits(t,e),_createClass(t)}(t)),i=n[r];for(var a in i._name=r,i.fieldList={},i.obs={},i._properties={},i.events={},o)i.addField(a,o[a]);return e&&e.establishObserverBindings(i.obs,!0,i._properties,i),i._protoMap.set(r,i),i}e.error("Proto with name ".concat(r," already exists."))}},{key:"addField",value:function(e,t){switch(defaultCallback=arguments[2],t.type){case"any":case"string":case"number":case"boolean":case"object":case"array":this.fieldList[e]=t;break;case"observer":this.obs[e]=t;break;case"callback":t.observes&&(this.obs[e]=t);break;default:"function"==typeof defaultCallback&&defaultCallback(this,e,t)}}},{key:"validate",value:function(t,r){var o=t.constructor._name;if(this._protoMap.has(o)){var n=this._protoMap.get(o).fieldList;for(var i in r=r||{},n){var a=n[i],s=void 0;if("any"==a.type&&a.validation){if(!0!==(s=e.checkProperty("validation",t[i],i,a.validation,a,t))){e.Component.set(r,i,s);continue}}else for(var l in a)if(!0!==(s=e.checkProperty(l,t[i],i,a[l],a,t))){e.Component.set(r,i,s);break}}return!Object.keys(r).length||r}e.error("Proto with name ".concat(o," does not exist."))}}])}(),e.Proto._protoMap=new Map,Object.defineProperty(e,"__gl__",{value:{}}),e.__gl=e.__gl__}(_Lyte),function(e){function t(t){var r,o,n,i,a,s,l,c,d,p,u,f="function",h="route",m="Transition",v="pending",y="completed",_="aborted",g="parseRouteMapping",b="constructRunLoop",A="Route"+m,E="getDependencies",C="getResources",L="before",$="after",P="forceFetch",w=L+"Model",R="model",N=$+"Model",O="redirect",T="renderTemplate",k=$+"Render",x=L+"Exit",S="didDestroy",D="will"+m,j="did"+m,I="onError",M="beforeLoad",B="onBeforeLoad",F=L+"Route"+m,H=$+"Route"+m,K=L+"TemplateDestroy",U="resources",V="dependencies",q="lt-prop",z="start-from",W=q+"-"+h,G=q+"-fragment",Y=q+"-dp",J=q+"-qp",Q=q+"-td",X=q+"-trans",Z="refresh-"+h,ee=q+"-"+Z,te="link-to",re="LINK-TO",oe="stateChange",ne=T+" hook should return either component or HTML. Rendering of HTML directly into the DOM within the "+T+" hook is deprecated.",ie="MediumOrchid",ae=Lyte.time,se=Lyte.log,le=JSON.parse,ce=this,de=document,pe=de.location,ue={routeHash:{},urlCache:{},stickyRoutes:{},allLinks:{},activeLinkTags:[]},fe=!0,he=!1,me=we()?we().index:0,ve=!1,ye=function(){},_e={},ge={getResources:U,getDependencies:V};function be(e){ce[H](e),n._trans.triggerEvent(H,{trans:e}),Lyte.triggerEvent(H,{trans:e}),ce.triggerEvent(H,{trans:e})}function Ae(e,t,r,o,n){t&&("object"!=_typeof(t)||Array.isArray(t)?dt.call(this,{stopTrans:!0,err:Error($t(203)).stack,instance:r,hook:o,index:n}):e.setData(t))}function Ee(e,t){var r;if(t){if(!(r=t.outlet?t.outlet.querySelector(e):void 0))return Ee(e,t.parent)}else(r=de.querySelector(e))||Pt(428,e);return r}function Ce(e){for(var t,r=0;t=e[r];r++){for(var o,n=t.parentNode,i=de.createElement("script"),a=0;o=t.attributes[a];a++)i.setAttribute(o.name,o.value);i.innerHTML=t.innerHTML,n.appendChild(i),n.removeChild(t)}}function Le(e,t){var r=(t=t||n).routes[e];return{queryParams:r.__ltp.queryParams,dynamicParam:r.__ltp.dynamicParam}}function $e(e){return!e.aborted&&!e.paused}function Pe(t){var r=t.replace?"replaceState":"pushState",o=ue.history?Et(Ke(t.url,!0)):"#"+(ue.slashAfterHash?Et(t.url):"/"==t.url[0]&&t.url.length>1?t.url.substring(1,t.url.length):t.url);t.title=t.title||de.title;var n=[t.state,t.title];o&&n.push(o),e.history[r].apply(history,n)}function we(){return history.state&&history.state.meta}function Re(){return history.state&&history.state.data}function Ne(e,t){if(ce.__lp.AuxRouter)return ce.__lp.AuxRouter[e].call(ce.__lp.AuxRouter,t)}function Oe(e,t){if(ce.__lp.AuxRouter)return ce.__lp.AuxRouter.__lp[e].call(ce.__lp.AuxRouter,t)}function Te(e){var t;return we()&&(t=we().url)||(t=ue.history?Fe():He((e&&e.newURL||pe.hash).replace(/.*#/,""))),t}function ke(e,t){if(2!=e.button&&!e.defaultPrevented){var r=t||e.currentTarget;if(!("A"===(r=t||e.currentTarget).children[0].tagName&&r.getAttribute("lt-prop-prevent-default")&&"true"!=r.getAttribute("lt-prop-prevent-default")||1==e.ctrlKey||1==e.metaKey||2==e.which||r.children[0].hasAttribute("target")&&"_self"!==r.children[0].getAttribute("target"))){e.preventDefault(),r.matched||r.getMatchedObject();var o=Object.assign({},r.matched);o.route=Array.isArray(o.route)?o.route.join("."):o.route;var n,i=r.ltProp.replace||r.hasAttribute("lt-prop-replace"),a=ce[i&&"false"!=i?"replaceWith":"transitionTo"](r.matched),s={};if(n=r.getAttribute(X))try{s=le(n)}catch(e){Pt(498,X,t.outerHTML)}var l=r.getAttribute(Q);if(l=l||s.data){if("string"==typeof l)try{l=le(l)}catch(e){Pt(498,Q,t.outerHTML)}s.data=l}for(var c in s)a[c]=s[c]}}}function xe(e,t){if(e.length)for(var r,o=0;r=e[o];o++)if(r!=t[o])return!1;return!0}function Se(e){return{route:e.route.join("."),fragment:e.fragment,dynamicParams:e.dynamicParams.filter(Ie),queryParams:e.queryParams}}function De(e,t){Lyte.warn("addRoutes function will be deprecated from next version");var r=t?t.split("."):[],o=ue.routes,n=[];r.forEach((function(e){n.push((o=o[e]).__lp.path)})),o?Me.call(c,e,r,n):console.error(t+" is not specified in router map.")}function je(e){return e.split(".").filter((function(e){return""!=e}))}function Ie(e){return null!=e}function Me(e,t,r){ae(g);var o=ue.routes?ue.routes:ue.routes={},n={};return r=r||[],t=t||[],c={route:function(e,i,a){if("object"==_typeof(i)){if(i.path){if(bt(i.path,"?")){var s=i.path.split("?");i.defQP=_t(s[1]),i.path=s[0]||"/"}}else i.path=Et(e);i.queryParams&&(i.defQP=i.queryParams)}else _typeof(i)==f&&(a=i),i={path:Et(e)};if(n=Je(r,ue.routeHash)[i.path]={__lp:{}},"/"==i.path)r.push("/");else{var l=i.path;(Ft(l)||Ht(l))&&Ct(l).every((function(e,t,r){if(Ft(e)||Ht(e)){var o;if(Ft(e))o=e.replace(":","");else{o=e.replace("*",""),i.wildcard=n.__lp.wildcard=!0,i.sufix=n.__lp.sufix=[];for(var a,s=t+1;a=r[s];s++)n.__lp.sufix.push(a)}return i.dkey=n.__lp.dkey=o,i.dIndex=n.__lp.dIndex=t,!1}return!0})),r.push(l)}var c=Je(t,o)||o;t.push(e),n.__lp.route=Array.from(t),c[e]?Object.assign(c[e].__lp,i):c[e]={__lp:i},c[e].__lp.def||(c[e].__lp.def=new Promise((function(t){c[e].__lp.resolve=t}))),a&&a.call(this,{}),t.pop(),r.pop()}},e.call(c,{}),ae(g),o}function Be(e){if(!ce.init){var t,o=e.matched;e.currRoute=t=o.route.join("."),o.refreshRoute&&i.info.route,r={replace:o.replace||!(!o.refreshRoute||!ce.checkIfSameRoute(Se(e.matched),Se(i.matched)))||o.replace,title:n?n.title:de.title,fromHistory:!1};var s=function(e){var t=Ue(e.matched);return t&&(e.path=r.url=t,qe(t,Qt(e))),t}(e);return s&&a?(se("Transitioning to "+t+" "+s,h),a._trans):(se("Transition failed"),{})}Pt(405)}function Fe(){if(ue.history){var e=He(pe.pathname+pe.search+(pe.hash||""));return Et(e=Ke(e))}return Et(He(pe.hash.replace("#","")))}function He(e){return e||(e="/"),e}function Ke(e,t){var r;if((r=ue.baseURL)&&e){if(r=Et(r),0==e.indexOf(r)&&!t)return e.replace(r,"");if(t&&0!=e.indexOf(r))return r+e}return e}function Ue(e){if(e&&e.route){var t;Array.isArray(e.route)?t=e.route.join("."):e.route=je(t=e.route),e.queryParams=e.queryParams||{},e.dynamicParams=e.dynamicParams||[],e.refreshModel=!1;for(var r,o,i=!!n,a=e.dynamicParams.length!=e.route.length,s=0,l=this.tagName==re,c=ue.routes,d=r="",p={},u=0,f=e.route.length;u<f;u++){if(o=e.route[u],i&&n.matched.route[u]!=o&&(i=!1),!(c=Je(o,c))&&!c.__lp&&c.__lp.path)return Pt(422,e.route,u),!1;var h=c.__lp.def;h||l||Pt(422,e.route,u);var m,v=c.__lp.path;if(h&&h.__lp){if(h.queryParams){m=c.__lp.defQP;var y=h.__lp.qpdef;for(var _ in y)e.queryParams.hasOwnProperty(_)||(i&&y[_].sticky?e.queryParams[_]=n.routes[u].__ltp.queryParams[_]:m&&m.hasOwnProperty(_)&&(p[_]=e.queryParams[_]=m[_])),Ue.caller&&"pathProcessor"!=Ue.caller.name&&y[_].cipher&&ue.cipher.encryptor&&(e.queryParams[_]=ue.cipher.encryptor(e.queryParams[_])),l||e.refreshModel||!y[_].refreshModel||(e.refreshModel=!0)}}else if(m=c.__lp.defQP)for(var _ in m)e.queryParams&&!e.queryParams.hasOwnProperty(_)&&(e.queryParams[_]=m[_]);if(c.__lp.dkey){var g=Ct(v),b=Ct(v),A=a?s:u;if(!e.dynamicParams||!e.dynamicParams[A])return Pt(499,o,l?this:void 0),!1;g[c.__lp.dIndex]=encodeURI(e.dynamicParams[A]),b[c.__lp.dIndex]=Et("<<dp>>"),d+=Et(b.join("/")),r+=Et(g.join("/")),s++}else d+=Et(v),r+=Et(v)}return ue.stickyRoutes[t]||(ue.urlCache[t]={url:Lt(d),defQP:p}),Ve(r,e)}}function Ve(e,t){if(e="/"==e[e.length-1]&&1!=e.length?e.slice(0,-1):e,t.queryParams){var r=!0;for(var o in t.queryParams)null!=t.queryParams[o]&&(r?(e+="?",r=!1):e+="&",e+=o+"="+encodeURIComponent(t.queryParams[o]))}return ue.history&&t.fragment&&(e=e+"#"+t.fragment),Lt(e)}function qe(e,t,o){ae(A),e&&ue.baseURL&&-1==de.location.pathname.indexOf(ue.baseURL)?Pt(400):(t=t||(!fe&&we()&&we().matched&&we().url==Fe()?Vt(we().matched):wt(e)))&&t.matched.route.length&&(clearTimeout(u),t.prevTrans=t.prevTrans||Lyte.Router.__lp.prevTrans,t.path=t.path||e,t.transComp=t.transComp||ze(t.prevTrans,t.matched,t.R),function(e){(a=new Xe(e))._processed=e,a.url=e.path,a.runLoop={},a._trans=function(e){var t=new Bt(e);return e.state=t.state=201,t}(a),Lyte.extendEventListeners(a),Lyte.extendEventListeners(a._trans),a.routes=function(e){for(var t,r,o=e.matched,n=[],i=e.prevTrans,s=!0,l=0;r=o.route[l];l++){if(!(t=ce.__lp.getDefinition(a.matched._routes[l])))return!1;i&&s&&i.matched&&i.matched.route[l]==r?(n.push(new Wt({routes:n,fns:t,index:l,processed:e,prevInstance:i.routes[l]})),Ne("initAuxRoute",{Route:Wt,processed:e,routes:n,refMatch:i,i:l,similarRoute:s,_route:a.matched._routes[l]})):(n[l]=new Wt({routes:n,fns:t,index:l,processed:e}),Ne("initAuxRoute",{processed:e,routes:n,refMatch:i,i:l,similarRoute:s=!1,_route:a.matched._routes[l]}))}return i=void 0,n}(e),l?((r=l).url=e.path,a._trans.data=Re()||{},r.replace=!0,l=void 0):a._trans.data&&ce.history.replaceState(a._trans.data)}(p=t),Lyte.triggerEvent("transitionStart",{prevTrans:i&&i._trans,nextTrans:a._trans}),ce.triggerEvent("transitionStart",{prevTrans:i&&i._trans,nextTrans:a._trans}),u=setTimeout((function(){p=void 0,n&&102==n.state&&a&&ce.checkIfSameRoute(a.info,n.info)&&!n.aborted&&JSON.stringify(n._data)==JSON.stringify(a._trans.data)?1==n.iPause&&n.resume():(n&&102==n.state&&n.abort({state:409}),(n=a)._trans.data=n._trans.data||{},n._data=Lyte.deepCopyObject(n._trans.data),t.previous=!0,n.transComp=t.transComp,n.runLoop=Ye(d=t),n._trans.data&&(r.data=n._trans.data),r.state=n.stateObj=function(e){return{meta:{matched:e.matched,url:e.url,index:e.fromHistory?we()?we().index:me:e.replace&&we()?we().index:me+=1},data:e.data}}({replace:r.replace,data:r.data,url:n.url,matched:n.matched,fromHistory:r.fromHistory}),function(e){ce.history||function(){function e(){return this}function t(e,t,r,o){o||we().index++,Pe({state:{meta:we(),data:e},title:t,url:r})}ce.history=new e,Object.defineProperty(e.prototype,"state",{get:function(){return Re()},set:function(e){return he?he=!1:Lyte.warn("setting on data will not be pushed to history. If needed, use `LR.history.replaceState`."),e}}),e.prototype.replaceState=function(){t.apply(Array.from(arguments).push(!0))},e.prototype.pushState=function(){t.apply(Array.from(arguments))}}(),ce.history.index=e.state.meta.index,ce.history.fromHistory=!!e.fromHistory&&(i?i.stateObj.meta.index<n.stateObj.meta.index?"forward":"back":"reload"),he=!0,ce.history.state=Re()||{},ce.history.initial=fe,ce.history}(r),n.run())}),0))}function ze(e,t,r){var o,n,i=!0,a=!0,s=[],l=[],c=[],d=t.route.join("."),p="";if(e){for(var u,f=e.matched,h=t.refreshRoute&&d==e.info.route?t.refreshRoute:t.startFrom,m=0,v=t.route.length;m<v;m++)p=p+(p?".":"")+(u=t.route[m]),!a||u!=f.route[m]||h&&p==h?(a=!1,null==o&&e.routes[m]&&e.routes[m].__ltp.rendered&&e.routes[m].outlet&&(o=m),c.push(u)):(n=r?r[m]:ce.__lp.getDefinition(u.slice(0,m)),i&&We(n,m,f,t)?(l.push(u),e.routes[m].__ltp.rendered?s.push(u):c.push(u)):(i=!1,c.push(u)));if(f.route.length>t.route.length){var y=t.route.length;null==o&&e.routes[y].__ltp.rendered&&(o=y)}}else c=c.concat(t.route);return{rendered:s,unRendered:c,unRenderedListeners:{},common:l,templateToRemove:o}}function We(e,t,r,o){var n=!0,i=Je(e.__lp.objPath,ue.routes);return!e.queryParams&&!i.__lp.dkey||(!i.__lp.dkey||r.dynamicParams[t]==o.dynamicParams[t])&&(e.queryParams&&o.refreshModel&&e.queryParams.every((function(t){return!n||!e.__lp.qpdef[t].refreshModel||!o.queryParams&&!r.queryParams||o.queryParams[t]==r.queryParams[t]||(n=!1)})),n)}_e[E]=_e[C]=function(e,t){var r=this.routes[t],o=e==E?"loadDependencies":"loadResources",n=this.R[t][e];if(r.__lp[ge[e]+"Loaded"]=!0,n&&$e(this)){var i=st.call(this,{callback:n,instance:this.routes[t],hook:e,index:t,args:[Le(t)]});if(i&&i instanceof Promise)return i;r.__lp[ge[e]]=i,r.__lp[ge[e]+"Loaded"]=!i||!(i.length||"object"==_typeof(i)),i&&(e==E&&console.warn("Requesting files in getDependencies will stall execution of route till download completes. Please validate files before requesting."),r.__lp[o]=function(){r.__lp[o]=v},et.call(this,{reqType:ge[e],r:r,index:t}))}return at()},_e[w]=_e[R]=_e[N]=function(e,t){var r=this.routes[t],o=this.R[t][e],n=[this.R[t][e],r,Le(t)];if(e==N&&n.splice(2,0,r.currentModel),o){function i(t){r.$[e]=t,e==R&&(r.currentModel=t),delete o.then}o.then={success:i,failure:i}}return at.apply(this,n)},_e[O]=function(e,t){var r=this.routes[t];return st.call(this,{callback:this.R[t][e],instance:r,hook:e,index:t,args:[r.currentModel,Le(t)]}),new Promise((function(o){ce.__lp.AuxRouter?Oe("callAuxHook",{instance:r,hook:e,index:t}).then((function(){o()})):o()}))},_e[I]=function(e,t,r,o,i){ft.call(n,n.prom),this._trans.triggerEvent(I,{error:r,hook:e});for(var a=this.routes[t];t>=0&&!this.aborted&&this.paused;t--){var s=this.routes[t];if(se(I+" of "+s.routeName,h,ie),0==lt.call(this,I,t,[r,this._trans,Le(t),e]))break}ct(r,e,a.routeName,o,i)},_e[D]=function(e,t){return 0==lt.call(i,e,t,[n._trans])&&yt(n.runLoop.previous,e),at()},_e[F]=function(){if($e(this)){var e;(e=i&&i._trans)&&(delete e.abort,delete e.pause);var t={prevTrans:e,trans:n._trans,history:ce.history};ce[F](t.prevTrans,t.trans,t.history),n._trans.triggerEvent(F,t),Lyte.triggerEvent(F,t),ce.triggerEvent(F,t)}return at()},_e[H]=function(e){var t=Oe("transitionComplete",{trans:n});t instanceof Promise?t.then((function(){be(e)})):be(e)},_e[M]=function(e,t){var r,o=this.routes[t],n=st.call(this,{callback:this.R[t][e],instance:this.routes[t],hook:e,index:t,args:Le(t)});if(n&&n.outlet&&(r=Ee(n.outlet,o.parent)))if(r.childNodes[0]&&rt({outlet:r,route:o},!1),n.component){var i=de.createElement(n.component);Ae.call(this,i,n.data,routeInstance,e,t),r.innerHTML="",r.appendChild(routeInstance.component=i)}else if(renderTemplate.html){routeInstance.component=void 0,r.innerHTML=renderTemplate.html;var a=r.getElementsByTagName("script");a.length&&Ce(Array.from(a))}return at()},_e[B]=function(){return new Promise((function(e,t){for(var r=n.matched.route.length,o=1;o<=r&&$e(n);o++){var i=r-o;if(n.R[i].actions&&n.R[i].actions.onBeforeLoad&&console.log(B+" action is depricated. Use beforeLoad callback"),0==lt.call(n,B,i,[Le(i)])||o==r){e();break}}}))},_e[k]=_e[j]=function(e,t){return new Promise(function(r,o){var i=setTimeout(function(){if(e==k){var o=this.routes[t];o.__ltp.rendered=!0,st.call(this,{callback:this.R[t][e],hook:e,index:t,instance:o,args:[o.currentModel,Le(t),o.component]}),n.routes[t+1]||n._trans.triggerEvent(k),r()}else _e.removeTemplate.call(this),0==lt.call(this,e,t,[Le(t),n._trans])&&(yt(n.runLoop.current,e),t=0),r(),0==t&&At.call(this,{state:200})}.bind(this,e,t),0);this.fns.push(i)}.bind(this))},_e[x]=function(e,t){var r=i.routes[t],o=i.R[t][e];return at.call(this,o,r,r.currentModel,Le(t,i))},_e[T]=function(e,t){var r=this.routes[t],o=this.R[t];if(o[e]){_e.removeTemplate.call(this);var n=st.call(this,{callback:o[e],instance:r,hook:e,index:t,args:[r.currentModel,Le(t)]});if($e(this))if(n&&(r.outletName=n.outlet)){var i,a=r.currentModel;if(r.outlet=i=Ee(n.outlet,r.parent)){var s={outlet:n.outlet,route:r};if(n.component)if(r.component&&!n.reRender&&r.component.tagName.toLocaleLowerCase()==n.component&&r.outlet==i&&i.contains(r.component))Ae.call(this,r.component,a,r,e,t);else{rt(s,!1);var l=de.createElement(n.component);l._route=r.__lp.objPath,Ae.call(this,l,a,r,e,t),i.innerHTML="",i.appendChild(r.component=l)}else if(n.html){r.component=void 0,rt(s,!1),i.innerHTML=n.html;var c=i.getElementsByTagName("script");c.length&&Ce(Array.from(c))}}}else Lyte.warn(ne)}else $e(this)&&this.runLoop.templateToRemove&&this.R.length==t+1&&_e.removeTemplate.call(this);return at()},_e.removeTemplate=function(){var e=this.runLoop.templateToRemove;this.cleared||(i&&e&&function(e){for(var t,r=0,o=e.length;r<o;r++)for(var i,a=(t=e[r]).routes.length-1;a>=t.index;a--)(i=t.routes[a]).outlet&&(rt({outlet:i.outletName,route:i},!0),i.outlet.innerHTML="",n.routes[a]&&n.routes[a].__lp.objPath==i.__lp.objPath||ot.call(this,i,a,t))}(e),this.cleared=!0,s!=this&&(s=this),delete this.runLoop.templateToRemove,Lyte.removeFromCache())},this.configureDefaults=function(e){e=e||{},ue.history="html5"==e.history,ue.baseURL=e.baseURL,ue.slashAfterHash=null==e.slashAfterHash||e.slashAfterHash,ue.deferInit=e.deferInit||!1,ue.preserveUrlOnBrowserNavigation=e.preserveUrlOnBrowserNavigation,ue.linkActiveClass=e.hasOwnProperty("linkActiveClass")?e.linkActiveClass:"",ue.cipher=e.cipher,ue.queryParamOptions={sticky:!e.queryParamOptions||!e.queryParamOptions.hasOwnProperty("sticky")||e.queryParamOptions.sticky},Lyte.$.prefetchSupport&&0!=e.execRouteRequirementsOnDemand?ue.execRouteRequirementsOnDemand=!0:(Lyte.$.replaceOldInjectResource&&Lyte.$.replaceOldInjectResource(),ue.execRouteRequirementsOnDemand=!1),this.__lp.config=ue},this.__lp={version:"3.2.7",pendingReg:[],resetRouter:function(){ce.__lp.trans=ce.__lp.prevTrans=n=i=s=void 0},getDefinition:function(e,t){return"*"==e?ue.routes:(t=Je(e,t=t||ue.routes))&&t.__lp&&t.__lp.def||void 0}},this.configureRoutes=function(e){this.__lp.config||this.configureDefaults(),Me.call(this,e);for(var t=0,r=this.__lp.pendingReg.length;t<r;t++)It.apply({},this.__lp.pendingReg[t]);Ne("configureRoutes"),this.__lp.pendingReg=[],Lyte.domContentLoaded((function(){!ue.deferInit&&ce.init&&ce.init()})),this.__lp.routesConfigured=!0},this.init=function(t){var r;return delete this.init,this.popstate=function(e){var t,r;if(ue.preserveUrlOnBrowserNavigation){if(ve)return void(ve=!1);we()&&i&&i.stateObj.meta.index!=we().index&&(ve=!0,r=Te(e),t=i.stateObj.meta.index-we().index,history.go(t))}r=r||Te(e),l={fromHistory:!0,url:r,goValue:t},e&&history.state&&(l.data=history.state),n&&!n.aborted&&(console.log("aborting from dispatch"),n.abort({state:308,iAbort:!0})),qe(r)},e.addEventListener("popstate",this.popstate),ue.history?this.popstate():qe((l={fromHistory:!0,url:Fe()}).url),r=function(){function e(){return _classCallCheck(this,e),_callSuper(this,e,arguments)}return _inherits(e,_wrapNativeSuper(HTMLElement)),_createClass(e,[{key:"attributeChangedCallback",value:function(e,t,r){if(this.matched&&this.hasAttribute("lyte-rendered")){var o=this.getElementsByTagName("A")[0];o&&(e===q?(this.handleLtProp(),this.hasAttribute("lt-prop-custom")||this.setCustomAttributes(o,!0),this.constructHref(o)):/^(lt-prop-route|lt-prop-fragment|lt-prop-dp|lt-prop-qp)$/.test(e)?(this.getMatchedObject(),this.constructHref(o,e,t,r)):this.hasAttribute("lt-prop-custom")||o.setAttribute(e.substring(8),r))}}},{key:"connectedCallback",value:function(){if(this.ltProp=this.ltProp||{},this.handleLtProp(),this.hasAttribute("lyte-rendered"))this.getElementsByTagName("A")[0]&&!this.matched&&this.getMatchedObject();else{var e;if(this.hasAttribute("lt-prop-custom")||this.ltProp.custom)(e=this.getElementsByTagName("A")[0])&&(this.getMatchedObject(),this.constructHref(e));else{for(e=de.createElement("a");this.childNodes[0];)e.appendChild(this.childNodes[0]);this.setCustomAttributes(e),this.getMatchedObject(),this.constructHref(e),this.appendChild(e)}Lyte.Component?this._linkToEventId=Lyte.Component.addLyteEventListener(this,"click",(function(e){ke(e,this)}),this):this.addEventListener("click",ke),this.setAttribute("lyte-rendered","")}}},{key:"modifyLinkToTagsInRoute",value:function(e){var t=Array.isArray(this.matched.route)?this.matched.route.join("."):this.matched.route,r=ue.allLinks[t];if(e){if(r){var o=r.indexOf(this);-1!=o&&r.splice(o,1)}}else r?r.push(this):ue.allLinks[t]=[this];if(ue.stickyRoutes[t]){var n,i=ue.routes;if(e){if(!this.matched)return;n=e}else n=this.matched.route;if(!n)return;for(var a=0,s=(n=Array.isArray(n)?n:je(n)).length;a<s;a++){if(!(i=Je(n[a],i))||!i.__lp)return Pt(422,n,a),!1;var l=i.__lp.def.__lp;if(e){var c=l.stickyLinks.indexOf(this);-1!==c&&l.stickyLinks.splice(c,1)}else l.qpdef&&l.stickyLinks.push(this)}}}},{key:"disconnectedCallback",value:function(){var e=this.modifyLinkToTagsInRoute.bind(this);Lyte.Component.shouldIgnoreDisconnect()||(this.matched&&this.matched.route&&e(this.matched.route),this._linkToEventId&&Lyte.Component.removeLyteEventListener(this,this._linkToEventId))}},{key:"handleLtProp",value:function(){var e=this.getAttribute(q);if(e)try{this.ltProp=le(e)}catch(e){Lyte.warn("Error while parsing ltProp in link-to")}}},{key:"setCustomAttributes",value:function(e,t){for(var r in this.ltProp)/^(id|class|style|target)$/.test(r)&&e.setAttribute(r,this.ltProp[r]);if(!t)for(var o,n,i=0;o=this.attributes[i];i++)(n=o.nodeName)!==q&&/^(lt-prop-id|lt-prop-rel|lt-prop-class|lt-prop-style|lt-prop-target|lt-prop-prevent-default|lt-prop-data-tabindex|lt-prop-tabindex|lt-prop-aria-label|lt-prop-aria-attributes)$/.test(n)&&e.setAttribute(n.substring(8),o.nodeValue)}},{key:"constructHref",value:function(e,t,r){var o,n=this.modifyLinkToTagsInRoute.bind(this);(o=ce.getURL.call(this,this.matched))&&(e.setAttribute("href",o),t===W?(n(r),n()):n())}}],[{key:"observedAttributes",get:function(){return[W,Y,G,J,q,"lt-prop-class","lt-prop-id","lt-prop-rel","lt-prop-title","lt-prop-style","lt-prop-target","lt-prop-data-tabindex","lt-prop-prevent-default","lt-prop-tabindex","lt-prop-aria-label","lt-prop-aria-attributes"]}}])}(),r.prototype.getMatchedObject=function(){var e=this.matched||{},t=this.getAttribute.bind(this),r=t(Y)||this.ltProp.dp||[],o=t(J)||this.ltProp.qp||{};if(!(r instanceof Array))try{r=le(r)}catch(e){return void Pt(498,"dynamicParams",this.outerHTML)}if(!(o instanceof Object))try{if(o=le(o),Array.isArray(o))return void Pt(498,"queryParams",this.outerHTML)}catch(e){return void Pt(498,"queryParams",this.outerHTML)}return e.route=t(W)||this.ltProp.route,e.fragment=t(G)||this.ltProp.fragment,e.dynamicParams=r||[],e.queryParams=o||{},e.refreshRoute=null!=t(ee)?t(ee):this.ltProp[Z],e.refreshRoute=""==e.refreshRoute||"true"==e.refreshRoute?e.route:e.refreshRoute,e.startFrom=t("lt-prop-start-from")||this.ltProp[z],this.matched=e},customElements.define(te,r),this},this.beforeScroll=this[F]=this[H]=ye,this.checkIfSameRoute=function(e,t){return!(e.route!=t.route||e.fragment!=t.fragment||e.dynamicParams.length!==t.dynamicParams.length||!Kt(e.queryParams,t.queryParams))&&xe(e.dynamicParams,t.dynamicParams)},this.addRoutes=function(e,t){if(Lyte.Router.__lp.routesConfigured)De(e,t);else var r=setInterval((function(){Lyte.Router.__lp.routesConfigured&&(clearInterval(r),De(e,t))}),0)},this.replaceWith=function(){var e=Vt.call(this,Ut.apply(this,arguments));if(e)return e.matched.replace=!0,Be(e)},this.transitionTo=function(){var e;if(e=Vt.call(this,Ut.apply(this,arguments)))return Be(e)},this.getURL=function(e){if(e){e.route?e.queryParams||(e.queryParams={}):e=Ut.apply(this,arguments);var t,r,o,n=this.tagName==re,i=ue.urlCache;if(!ue.queryParamOptions.sticky&&(o=i[Array.isArray(e.route)?e.route.join("."):e.route])){if(t=o.url,r=e.dynamicParams&&e.dynamicParams.length)for(var a=0;a<r;a++)t=t.replace("<<dp>>",e.dynamicParams[a]);else-1!=t.indexOf("<<dp>>")&&Pt(499,e.route,n?this:void 0);for(var s in o.defQP)!e.queryParams[s]&&o.defQP[s]&&(e.queryParams[s]=o.defQP[s]);t=Ve(t,e)}else t=n?Ue.apply(this,arguments):Ue.call(this,e);if(t)return ue.history?Ke(t,!0):"#"+t}},this.getRoute=function(e){var t=wt(Ke(e),!0);return t&&(t.dynamicParams=t.dynamicParams.filter(Ie),t.route=t.route.join(".")),t};var Ge=[w,R,N,O,T,k];function Ye(e){ae(b);var t=e.transComp,r=[],o={},l=[],c=[],d=[],p=[],u=[];if(e.previous){var h=[{hook:F}];if(i){for(var m=i.matched.route.length-1;i.matched.route[m];m--){var y=n.matched._routes[m];y&&y.join(".")==i.matched._routes[m].join(".")||d.push({hook:x,index:m}),p.push({hook:D,index:m})}return ae(b),{previous:p.concat(h).concat(d),current:d}}return ae(b),{previous:h}}return t.rendered&&t.rendered.length&&t.rendered.forEach((function(e,t){n.routes[t].__ltp.rendered=!0,r.push({hook:O,index:t}),u.push({hook:j,index:n.matched.route.length-t-1})})),t.unRendered&&t.unRendered.length&&t.unRendered.forEach(function(e,i){var s=t.rendered.length+i;(!t.redirected||t.redirected&&t.redirected.index!=s)&&(l.push({hook:M,index:s}),c=c.concat([{hook:E,index:s},{hook:C,index:s}]));var d=n.routes[s];(_typeof(d.forceFetch)==f?st.call(this,{callback:d.forceFetch,instance:d,hook:P,index:s,args:[Le(s)]}):d.forceFetch)?(o[s]=[{hook:w,index:s},{hook:R,index:s},{hook:N,index:s}],a.routes[s].__ltp.fetchStatus=v,[O,T,k].forEach((function(e){r.push({hook:e,index:s}),e==T&&t.unRendered[i+1]&&r.push({hook:M,index:s+1})}))):Ge.forEach((function(e){t.redirected&&t.redirected.index==s&&e!=O?(-1==[w,R,N].indexOf(e)&&r.push({hook:e,index:s}),e==T&&t.unRendered[i+1]&&r.push({hook:M,index:s+1})):(r.push({hook:e,index:s}),e==T&&t.unRendered[i+1]&&r.push({hook:M,index:s+1}))})),u.push({hook:j,index:n.matched.route.length-s-1})}.bind(this)),(r={previous:[],current:[{hook:B}].concat(l).concat(c.concat(r).concat(u)),forceFetch:o}).templateToRemove=i&&i.runLoop.templateToRemove?i.runLoop.templateToRemove:[],null!=t.templateToRemove&&r.templateToRemove.push({index:t.templateToRemove,routes:s.routes}),ae(b),r}function Je(e,t){if(t)return e?(Array.isArray(e)||"string"!=typeof e||(e=je(e)),e.every((function(e){return t&&t[e]?(t=t[e],!0):t=!1})),t):t}var Qe=0;function Xe(e){this.transId=Qe+=1,this.matched=e.matched,this.target=e.matched.target,this.fns=[],this.__lp={Trans:this},this.updateStateData=function(e){this._data=Lyte.deepCopyObject(e),history.state[this.R[0].routeName]=e,history.replaceState(history.state,"")}.bind(this),this.pending={dependencies:new Set,resources:new Set,forceFetch:new Set},this.info={route:e.matched.target,queryParams:e.matched.queryParams,dynamicParams:e.matched.dynamicParams.filter(Ie)},e.matched.fragment&&(this.info.fragment=e.matched.fragment),this.R=e.R,this.running=this.aborted=this.paused=!1,this.abort=function(e){r&&r.goValue&&(ve=!1),this.abort=ye,function(e){e.runningProm&&e.runningProm.reject(_),e.fRunningProm&&e.fRunningProm.reject(_)}(this),this.aborted=!0,e||(e={state:308}),this.running&&se("Transition aborted.",h),e.iAbort||delete this.runLoop.templateToRemove,At.call(this,e)}.bind(this),this.pause=function(e){return se("Transition paused.",h),e&&e.iPause?this.iPause=!0:(this.iPause=!1,this.state=this._trans.state=307,this._trans.triggerEvent(oe,this.state)),this.paused=n.prom||!0,this.resume=this._trans.resume=function(e){if((e=e||this).prom==e.eProm){if(delete e._trans.resume,delete e.resume,se("Transition resumed.",h),e.paused){var t,r=e.prom;if(1!=e.paused&&(t=e.paused.state),e.runLoop[t])if(t==P){var o=e.runLoop.forceFetch[r.index];o[0]&&r.hook==o[0].hook&&o.splice(0,1)}else e.runLoop[t][0]&&e.runLoop[t][0].hook==e.paused.hook&&e.runLoop[t][0].index==e.paused.index&&yt(e.runLoop[t],e.paused.hook,e.paused.index);e.iPause=e.paused=!1,e.state=e._trans.state=102,this._trans.triggerEvent(oe,e.state),this.forceFetchRunning?e.runLoop.forceFetch[r.index][0]?e.run(e.runLoop.forceFetch[r.index][0]):(e.routes[r.index].__ltp.fetchStatus=y,null!=e.pending.waitingForFF&&e.pending.waitingForFF==r.index&&(delete e.pending.waitingForFF,e.run())):(t&&t==P&&!e.runLoop.forceFetch[r.index][0]&&(e.routes[r.index].__ltp.fetchStatus=y),e.run())}}else e.pendingResume||(e.pendingResume=e.resume,delete e._trans.resume,delete e.resume)}.bind(this),this._trans}.bind(this)}function Ze(){Lyte.debug&&console.log.apply(this,Array.from(arguments))}function et(e){var t=function(){};t.internal={};var r=e.r,o=e.reqType,i=e.index,s=r.__lp,l=t.internal.hook=n.prom.hook;t.internal.route=s.objPath,Ze(o+" before inject",this.transId,s.objPath),Lyte.injectResources(s[o],t,function(e,t){if(!ue.execRouteRequirementsOnDemand&&(!this.aborted||s.objPath==this.routes[i].__lp.objPath&&n.transComp.redirected&&n.transComp.common.length&&i<=n.transComp.common.length-1||p&&p.transComp.redirected&&i<=p.transComp.common.length-1)){n.aborted&&(n=ce.__lp.trans.aborted?a:!ce.__lp.trans.aborted,s=n.routes[i].__lp);var c=l==E?"loadDependencies":"loadResources",d=l==E?"errorDependencies":"errorResources";n.pending[o].has(i)?((s=n.routes[i].__lp)[o+"Loaded"]=!0,delete s[c],n.pending[o].delete(i),t.length?(Ze(o+" inject completed","failure",n.transId),n.paused||n.pause({iPause:!0}),_e[I].call(n,l,i,r.__lp[d]=t,424)):(Ze(o+" inject completed","success",n.transId,s.objPath),n.pending.forceFetch.has(i)?(n.pending.forceFetch.delete(i),ht.call(n,n.runLoop.forceFetch,n.fRunningProm.resolve,n.runLoop.forceFetch[i][0])):vt.call(n,n.runLoop,"current",n.runningProm.resolve))):n.routes[i].__lp[c]=function(){if(t.length)return Ze(o+" inject completed","failure",n.transId,this.objPath),n.routes[i].__lp[o+"Loaded"]=!0,delete n.routes[i].__lp[c],n.paused||n.pause({iPause:!0}),_e[I].call(n,l,i,r.__lp[d]=t,424),!1;n.routes[i].__lp[o+"Loaded"]=!0,delete n.routes[i].__lp[c]}}}.bind(n),{defer:function(e){var t=this;function n(){return!this.aborted||!(!a||s.objPath!=(a.routes[i]&&a.routes[i].__lp.objPath))&&(a._processed.transComp.redirected&&i<=a._processed.transComp.common.length-1?(s=(t=a).routes[i].__lp,!0):this!=t)}if(s.objPath==t.routes[i].__lp.objPath){if(!n.call(this))return;var c=e.injectJS,d=e.files,p=l==E?"loadDependencies":"loadResources",u=l==E?"errorDependencies":"errorResources",f=function(e){if(n.call(this)){var a=t;a.routes[i].__lp[o+"Loaded"]=!0,e.length?(Ze(o+" inject completed","failure",a.transId,s.objPath),a.paused||a.pause({iPause:!0}),_e[I].call(a,l,i,r.__lp[u]=e,424)):(Ze(o+" inject completed","success",a.transId,s.objPath),a.pending[o].has(i)&&(a.pending[o].delete(i),a.pending.forceFetch.has(i)?(a.pending.forceFetch.delete(i),ht.call(a,a.runLoop.forceFetch,a.fRunningProm.resolve,a.runLoop.forceFetch[i][0])):vt.call(a,a.runLoop,"current",a.runningProm.resolve)))}}.bind(this);if("pending"==s[p]){if(!n.call(this))return;c(d,(function(e,r){Ze(o+" after inject",t.transId,this.objPath),delete t.routes[i].__lp[p],f(r)}))}else s[p]=function(){c(d,function(e,r){n.call(this)&&(Ze(o+" after inject",t.transId,this.objPath),delete t.routes[i].__lp[p],f(r))}.bind(t))}}}.bind(n)})}var tt=function(e,t){var r=1==e.__lp[t+"Loaded"],o=t==V?"loadDependencies":"loadResources";return!e.__lp[o]||"function"!=typeof e.__lp[o]||r?r:0!=e.__lp[o]()&&1==e.__lp[t+"Loaded"]};function rt(e,t){Lyte.triggerEvent(K,e),ce.triggerEvent(K,e)}function ot(e,t,r){se(S+" of "+e.routeName,h,ie),st.call(this,{callback:e.didDestroy,instance:e,hook:S,index:t,args:[e.currentModel,Le(t,r)]})}var nt=[E,C,w,R,N];function it(e){return bt(nt,e)}function at(e,t){if(e){var r,o=arguments,i=n,a=n.prom,s=a.hook,l=a.index,c=it(s),d=this;return new Promise((function(n,p){try{var u=e.apply(t,Array.from(o).slice(2));c&&u&&(u=Lyte.resolvePromises(u)),r=Promise.resolve(u)}catch(e){return void dt.call(d,{hook:s,index:l,stopTrans:c,err:e,instance:t,promise:{resolve:n,reject:p}})}r.then((function(){e.then&&e.then.success.apply(this,arguments)}),(function(e){i.prom=a,p(e),dt.call(d,{hook:s,index:l,stopTrans:c,err:e,instance:t,PR:!0})})),Promise.all([Oe("callAuxHook",{instance:t,hook:s,index:l})||r,r]).then((function(){"previous"!=a.state&&i._trans!=t.transition?p("old transition's promise rejected"):n()}))}))}return Promise.resolve()}function st(e){var t=e.callback,r=e.instance,o=e.hook,n=e.index,i=e.args;if(t){var a=it(o);try{var s=t.apply(r,i);return"redirect"!=o&&Oe("callAuxHook",{instance:r,hook:o,index:n,returnValue:s}),s}catch(e){return void dt.call(this,{hook:o,index:n,stopTrans:a,err:e,instance:r})}}}function lt(e,t,r){var o,n=this.routes[t];if(n.actions&&(o=n.actions[e]))try{var i=o.apply(n,r);if(Oe("callAuxHook",{instance:n,hook:e,index:t,args:r,returnValue:i}),0==i)return!1}catch(t){return ct(t,e,n.routeName),!1}}function ct(e,t,r,o,n){if("string"==typeof e||"object"==_typeof(e)&&e.stack&&!e.$){e.stack||(e=Error(e)),e.$=!0;var i=$t(o||420,t,r);e.stack=e.stack.replace(e.message,e.message=e.message+"\n\t"+i),Pt(e)}else Pt(o,t,r,e,n&&n.PR)}function dt(e){var t=e.instance,r=e.stopTrans,o=e.err,n=e.hook,i=e.index;r?(this.pause(),_e[I].call(this,n,i,o,420,e)):(ct(o,n,t.routeName),e.promise&&e.promise.resolve())}function pt(e,t,r,o,n){o=o||ye,n=n||function(e){e!=_&&Pt(e)},new Promise(function(o,n){"nestedForcedPromises"==t?(this.fRunningProm={resolve:o,reject:n},e.call(this,this.runLoop.forceFetch,o)):(this.runningProm={resolve:o,reject:n},e.call(this,this.runLoop,r,o))}.bind(this)).then(o,n)}function ut(){pt.call(this,vt,"nestedPromises","previous",function(){if(d&&!n.running&&!n.aborted){if(n.state=n._trans.state=102,n._trans.triggerEvent(oe,n.state),r)if(ue.preserveUrlOnBrowserNavigation){r.fromHistory&&r.goValue&&(ve=!0,history.go(-r.goValue)),r.state.data=n._trans.data||r.state.data,o=Lyte.deepCopyObject(r),n.stateObj=r.state;var e=setInterval((function(){o?ve||(clearInterval(e),Pe(o),o=void 0):clearInterval(e)}),0)}else r.state.data=n._trans.data||r.state.data,Pe(r),n.stateObj=r.state;ce.__lp.trans=n,d.previous=!1,n.runLoop=Ye.call(this,d),function(e,t){ue.linkActiveClass&&ue.activeLinkTags.forEach((function(e){e.classList.remove(ue.linkActiveClass)})),ue.activeLinkTags=[];var r,o,i=e.matched;try{function a(e){e.getAttribute("lt-prop-route")==i.target&&-1==activeLinkTags.indexOf(e)&&activeLinkTags.push(e)}function s(e){o.__ltp.queryParams[e]=r.__lp.qpdef[e].cipher&&ue.cipher.decryptor?ue.cipher.decryptor(i.queryParams[e]):i.queryParams[e]}for(var l=0,c=n.R.length;l<c;l++)r=n.R[l],o=n.routes[l],r.queryParams&&r.queryParams.forEach(s),o.__ltp.dynamicParam=i.dynamicParams[l],l+1==c&&r.__lp.linkTags.forEach(a);Tt(t)}catch(d){Pt(d)}}(d,n.info),d=r=void 0,n.running=!0}pt.call(this,vt,"nestedPromises","current")}.bind(this))}function ft(e){if(n.eProm=e,this.pendingResume){var t=this.pendingResume;delete this.pendingResume,t()}}function ht(e,t,r){if($e(this)&&e){if(!r){for(var o in e){var i=e[o][0];i&&(i.running||ht.call(this,e,t,i))}return}this.R[r.index];var a=this.routes[r.index];if(r.state=P,n.prom=r,r.hook==w&&!tt(a,V))return this.pending.dependencies.add(r.index),void this.pending.forceFetch.add(r.index);mt(r),e[r.index][0].running=!0,e[r.index].splice(0,1),_e[r.hook].call(this,r.hook,r.index).then(function(o){ft.call(n,n.prom),r.hook==N?(a.__ltp.fetchStatus=y,null!=this.pending.waitingForFF&&this.pending.waitingForFF==r.index&&(delete this.pending.waitingForFF,vt.call(this,this.runLoop,"current",this.runningProm.resolve))):r.hook==R?e[r.index][0]&&e[r.index][0].hook==N&&ht.call(this,e,t,e[r.index][0]):e[r.index][0]&&e[r.index][0].hook==R&&ht.call(this,e,t,e[r.index][0])}.bind(this),(function(){}))}else this.forceFetchRunning=!1}function mt(e,t){if(Lyte.debug){var r=e.hook,o=e.index;if(t=t||n,-1!=[F,B].indexOf(e.hook))return void se(r,h,ie);var a="previous"==e.state?i.R[o]:t.R[o];se(r+" of route "+a.routeName,h,ie)}}function vt(e,t,r){if($e(this)){var o=e[t];if(o&&o.length){var i=o[0],a=this.R[i.index],s=this.routes[i.index];if(i.hook==w&&!tt(s,V))return void this.pending.dependencies.add(i.index);if(i.hook==T&&!tt(s,U))return void this.pending.resources.add(i.index);if(i.hook==O&&a.forceFetch&&s.__ltp.fetchStatus==v)return this.forceFetchRunning||(this.forceFetchRunning=!0,pt.call(this,ht,"nestedForcedPromises")),void(this.pending.waitingForFF=i.index);$e(this)&&this.runningProm.resolve==r&&(i.state=t,n.prom=i,mt(i),ae(i.hook+i.index),_e[i.hook].call(this,i.hook,i.index).then(function(){ft.call(n,n.prom),ae(i.hook+i.index),this.runningProm.resolve==r&&(yt(e[t],i.hook,i.index),vt.call(this,e,t,r))}.bind(this)))}else r&&r()}else this.paused&&this.runningProm&&this.runningProm.reject(_)}function yt(e,t,r){for(var o,n=0;o=e[n];n++)if(o.hook==t)if(null!=r){if(r==o.index){e.splice(n,1);break}}else e.splice(n,1),n--}function _t(e){if(e){for(var t,r={},o=bt(e,"?")?e.split("?")[1]:e,n=0,i=(o=bt(o,"&")?o.split(/&/g):[o]).length;n<i;n++)r[(t=o[n].split("="))[0]]=t[1]?decodeURIComponent(t[1]):t[1];return r}}function gt(e,t){for(var r=0,o=e.length;r<o;r++)t.shift()}function bt(e,t){return-1!=e.indexOf(t)}function At(e){if(!this.auxTrans){if(this.running){n==a&&(a=void 0),o&&(clearInterval(void 0),Pe(o),o=void 0),Tt(n.info);for(var t=0,r=n.fns.length;t<r;t++)clearTimeout(n.fns[t]);var l;if(n.pendingResume=void 0,n.running=!1,n.state=n._trans.state=e.state,n._trans.triggerEvent(oe,n.state),fe||200==n.state)ce.__lp.prevTrans=i=n,ae(A),se("Transition completed.",h),ue.history&&n.info.fragment&&(l=de.getElementById(n._trans.info.fragment))&&l.scrollIntoView&&0!=ce.beforeScroll(n._trans)&&l.scrollIntoView(),_e[H](n._trans);else e.iAbort||s==n?(ce.__lp.prevTrans=i=n,n.state&&201!=n.state&&_e[H](n._trans)):(n.state&&201!=n.state&&_e[H](n._trans),ce.__lp.trans=n=i);fe&&(fe=!1)}else i&&(ce.__lp.trans=n=i);delete ce.__lp.trans._processed}}function Et(e){return"/"==e[0]?e:"/"+e}function Ct(e){return e.match(/[^/?]+/g)||[]}function Lt(e){return(e=e.replace(/\/\//g,"/")).replace(/\/\?/g,"?")}function $t(){var e,t=arguments;switch(t[0]){case 400:e=t[1]?"url '"+t[1]+"' is not defined in router.":"Base path of url is not specified.";break;case 405:e="Method not allowed before router initialization.";break;case 422:e="There is no route definition for the route "+t[1].splice(0,t[2]+1).join(".")+".";break;case 424:e="File not loaded in "+t[1]+" of route "+t[2]+"."+(+t[3]?"\n"+t[3][0].target.outerHTML:"");break;case 498:e="Invalid argument "+t[1]+(t[2]?" provided in "+t[2]:".");break;case 499:e=t[1]?"Dynamic params for the route "+t[1]+" is not provided"+(t[2]&&t[2].outerHTML?" in "+t[2].outerHTML:"."):"Transition tried without arguments.";break;case 420:e=(t[3]?"Promise rejected":"Error")+" in "+t[1]+" of route "+t[2]+".";break;case 428:e="There is no outlet named "+t[1]+".";break;case 203:e="Data provided for component is not valid."}return"LR "+t[0]+": "+e}function Pt(){Lyte.error(arguments[0].stack?arguments[0]:$t.apply(this,arguments),arguments[3])}function wt(e,t){if(e){var r,o=[];if(ue.history){var n=e.split("#");(r=n[1])&&(e=n[0])}var i=e.split("?");if("/"==(e=decodeURI(i[0]))){if(!Je(["/"],ue.routeHash))return void Pt(400,e);o.push([e])}else{var a,s=i[1],l=Ct(e),c=0,d=[0],p=[];p.dynamicParams=[],function e(t){for(var r in t)if(!a){var n,i=t[r];if("__lp"!=r){var s=Ct(r);if(s&&!1!==(n=Rt(s,l,c,i,p)))if(d.push(n),c=d[d.length-1],l.length==c){var u=Array.from(p.concat(r));if(i["/"]&&(u=u.concat("/")),o.push(u),!i.__lp.wildcard&&!i.__lp.dkey)return void(/[:*]/.test(u.join(""))||(a=u));d.pop(),c=d[d.length-1]}else{var f=Object.keys(i);if(p.push(r),l[c])if(i.__lp.wildcard&&!i.__lp.sufix.length&&1==f.length){var h=Array.from(p);i["/"]&&(h=h.concat("/")),o.push(h)}else f.length>1&&e(i);p.pop(),d.pop(),c=d[d.length-1]}}}}(ue.routeHash)}if(a)return Ot(t,a,e,s,r);if(1==o.length)return Ot(t,o[0],e,s,r);if(o.length)return Ot(t,function e(t,r,o){o=o||0;for(var n,i=i||function(e){for(var t=[],r=0,o=0,n=e.length;o<n;o++)r=(i=e[o]).length>r?i.length:r;var i;for(o=0;i=e[o];o++)for(var a=0;a<r;a++)t[a]=t[a]||[],t[a][o]=i[a];return t}(t),a=Math.max.apply(Math,_toConsumableArray(i[o]));n=Nt(i[o],a,r,t);){o+=1;for(var s=[],l=[],c=0,d=n.length;c<d;c++)s.push(r[c]),l.push(t[c]);var p=[],u=[];for(c=0,d=l.length;c<d;c++)null!=l[c][o]&&(p.push(s[c]),u.push(l[c]));return p.length?1==p.length?p[0]:e(u,p,o):s[0]}return r[i[o].indexOf(a)]}(function(e){for(var t=[],r=0,o=e.length;r<o;r++){var n=Array.from(e[r]),i=0,a=[];"/"==n[0]&&n.shift(),"/"==n[n.length-1]&&n.pop();var s=-1;n.every((function(e,t){var r=!0;return Ct(e).every((function(e,o){return s++,e==l[s]?(i++,n.length==t+1&&a.push(i),!0):-1!=e.indexOf(":")?(a.push(i),i=0,!0):(-1!=e.indexOf("*")&&(r=!1),a.push(i),!1)})),r})),t.push(a)}return t}(o),o),e,s,r);Pt(400,e)}else Pt(400,"")}function Rt(e,t,r,o,n){var i;if(!o.__lp.wildcard&&!o.__lp.dkey&&(i=Je(n,ue.routeHash).__lp)&&i.wildcard&&!(r+=t.slice(r).indexOf(e[0])))return!1;for(var a,s=0;a=e[s];s++,r++)if(a!=t[r]&&!Ft(a))if(Ht(a))o.__lp.sufix.length&&(r=t.indexOf(o.__lp.sufix[0])-1);else{if("/"!=e[r])return!1;r--}return r}function Nt(e,t,r,o){for(var n=[],i=0,a=e.length;i<a;i++)e[i]==t&&n.push(i);return 1!=n.length&&n}function Ot(t,r,o,n,i){var a,s,l,c={route:Je(r,ue.routeHash).__lp.route,queryParams:n?_t(n):{}};if(ue.history&&(c.fragment=i),c.dynamicParams=function(e,t){for(var r,o,n=ue.routes,i=[],a=Ct(e.split("?")[0]),s=0,l=t.route.length;s<l;s++){var c=(n=Je([t.route[s]],n)).__lp;if(c.wildcard)if(c.sufix.length){var d=a.slice(0,a.indexOf(c.sufix[0]));o=d.join("/"),gt(d.concat(c.sufix),a)}else o=a.join("/");else c.dkey?(r=a[c.dIndex],gt(Ct(c.path),a),o=r):(gt(Ct(c.path),a),o=void 0);i.push(o)}return i}(o,c),t)return c;c.dpProcessed=!0;var d=Vt(c);return 0!=d&&(s=Lyte.deepCopyObject(d.matched),l=Lyte.deepCopyObject(d.matched),d.matched.hasOwnProperty("refreshModel")||Ue(d.matched),a=Ue(l),Kt(l.queryParams,s.queryParams)||(Pe({replace:!0,state:e.history.state,url:a,fromHistory:!0}),d.path=a)),d}function Tt(e){ue.linkActiveClass&&ue.allLinks[e.route]&&ue.allLinks[e.route].forEach((function(t){var r=t.getAttribute(Y);if(xe(e.dynamicParams,r?JSON.parse(r):[])){t.classList.add(ue.linkActiveClass),ue.activeLinkTags.push(t);var o=t.getElementsByTagName("A")[0];o&&o.setAttribute("href",ce.getURL(t.getMatchedObject()))}}))}function kt(e,t,r,o){e&&e.mixins&&(Array.isArray(e.mixins)||(e.mixins=[e.mixins]),e.mixins.forEach((function(e){if(Lyte.registeredMixins[e])if(e=Lyte.registeredMixins[e],o){var s=ce.getRouteInstance(r,i),l=ce.getRouteInstance(r,n),c=a&&ce.getRouteInstance(r,a);s||l?function(e,t,r,o,n){for(var i in e)"actions"==i?(t.actions||(o.actions=r.actions=t.actions={}),r.actions=o.actions=Object.assign(t.actions,e.actions),n&&(n.actions=r.actions)):(r[i]=o[i]=t[i]=e[i],n&&(n[i]=r[i]))}(e,t,s=s||{},l=l||{},c):jt(e,t)}else jt(e,t);else o||Lyte.$.requiredMixins(e,r,"router")})))}function xt(e,t,r,o,n,i){if(e&&e.services){var a=[],s=[];e.services.forEach((function(e){"string"==typeof e?a.push(e):e&&"object"==_typeof(e)&&(n||!e.scope||e.scope&&"static"==e.scope?a.push(e):s.push(e))}))}a&&a.length&&function(e,t,r,o,n,i){var a=St(r,t);Lyte.extendService({services:e||[],type:"route",ins:o||a,isGlobal:n,data:i,callback:function(e,o,i,a){var s={};s.as=o,s.service=a,Lyte.extendService({services:[s],type:"route",isGlobal:n,ins:r?St(r,t):Dt()})}})}(a,t,r,o,n,i),s&&s.length&&St(r,t).forEach((function(e){e&&e.__lp&&(e.__lp.toBeUsed=s)}))}function St(e,t){var r,o=[t];return[i,a,n].forEach((function(t){t&&(r=ce.getRouteInstance(e,t))&&o.push(r)})),o}function Dt(e,t){var r=!e;for(var o in t=t||[],e=e||ue.routes)"__lp"==o?e.__lp.def&&t.push(e.__lp.def):Dt(e[o],t);if(r)return i&&i!=n&&(t=t.concat(i.routes)),n&&(t=t.concat(n.routes)),t}function jt(e,t){for(var r in e)"actions"==r?t.actions=Object.assign(t.actions||{},e.actions):t[r]="queryParams"==r?Lyte.deepCopyObject(e[r]):e[r]}function It(e,t,r){if(kt(r=r||{},t,e),t.__lp={options:r,objPath:e.replace(/\//g,"."),stickyLinks:[],linkTags:[]},xt(r,t,e),Lyte.toBeInjectedServices){var o=Lyte.toBeInjectedServices,n=[];for(var i in o)n.push({as:i,service:o[i]});xt({services:n},t,e,void 0,!0)}var a=ue.queryParamOptions.sticky;if(t.queryParams&&(t.__lp.qpdef={},t.queryParams.forEach((function(r,o){if("string"==typeof r)t.__lp.qpdef[r]={sticky:a,refreshModel:!0},null==ue.stickyRoutes[e]&&a&&(ue.stickyRoutes[e]=a);else if("object"==_typeof(r)){for(var n in r)t.__lp.qpdef[n]={cipher:r[n].cipher,sticky:r[n].hasOwnProperty("sticky")?r[n].sticky:a,refreshModel:!r[n].hasOwnProperty("refreshModel")||r[n].refreshModel},!ue.stickyRoutes[e]&&t.__lp.qpdef[n].sticky&&(ue.stickyRoutes[e]=!0);t.queryParams[o]=n}}))),e=je(e),t.routeName=e[e.length-1],Lyte.extendEventListeners(t),r.listener)return ce.__lp.AuxRouter.setRouteDef(e,t),t;!function(e,t){for(var r,o=ue.routes,n=e.length,i=n-1,a=0;a<n;a++){if(r=e[a],i===a){var s=o[r];s&&s.__lp?(s.__lp.resolve(t),s.__lp.def=t):s?s.__lp={def:t}:o[r]={__lp:{def:t}}}else o[r]||(o[r]={});o=o[r]}}(e,t)}Xe.prototype.run=function(e){e?ht.call(this,this.runLoop.forceFetch,this.fRunningProm.resolve,e):(ut.call(this),de.title=this.title=this.routes[this.routes.length-1].title||de.title)},Lyte.$.requiredMixins.router=function(e,t){t.forEach((function(t){var r=ce.__lp.getDefinition(t);e&&r&&kt(r.__lp.options,r,t,!0)}))},Lyte.$.injectServices.router=function(e,t,r,o,n,i){var a={};a.as=e,a.service=t,xt({services:[a]},void 0,void 0,Dt(),!0,i)},this.registerRoute=function(){ue.routes?It.apply({},arguments):this.__lp.pendingReg.push(arguments)};var Mt=["runLoop","running","paused","R","routes",_,"prom","run",v,"matched","fns","reqProm","_processed"];function Bt(e){for(var t in e)-1==Mt.indexOf(t)&&("info"==t?this.info=Lyte.deepCopyObject(e[t]):this[t]=e[t])}function Ft(e){return bt(e,":")}function Ht(e){return bt(e,"*")}function Kt(e,t){var r=Object.keys(e),o=Object.keys(t);if(r.length!=o.length)return!1;for(var n in e)if(e[n]!=t[n])return!1;return!0}function Ut(e){var t;return"object"==_typeof(e)?t=e:(t={queryParams:{},dynamicParams:[]},Array.from(arguments).forEach((function(e,r){Array.isArray(e)?Pt(498,JSON.stringify(e)):0==r?t.route=e:e&&"object"==_typeof(e)?t.queryParams=Lyte.deepCopyObject(e):t.dynamicParams.push(e)}))),t}function Vt(e){if(e.route){var t,r=ue.routes,o=[],n=function(e,n){if(!(r=Je(e,r)))throw Error($t(400,i.target));if(!(t=r.__lp.def))throw Error($t(422,i.route,n));o.push(t)};if(e._routes)i=e;else{var i={route:Array.isArray(e.route)?e.route:je(e.route),queryParams:e.queryParams||{},dynamicParams:[],fragment:e.fragment,target:"",refreshRoute:e.refreshRoute,startFrom:e.startFrom,_routes:[]};if(e.dynamicParams)if(e.dpProcessed)i.dynamicParams=Array.from(e.dynamicParams);else var a=Array.from(e.dynamicParams)}try{i.route.forEach(e._routes?n:function(e,t){i.target=i.target?i.target+"."+e:e,i._routes.push(je(i.target)),n(e,t),a&&i.dynamicParams.push(r.__lp.dkey?a.shift():void 0)}),a&&a.length&&Lyte.error("Extra dynamic params found. Provide exact numbers dynamic params required for the transition "+JSON.stringify(a))}catch(e){return Pt(e),!1}return{matched:i,R:o}}this.tagName==re?Pt(498,W,this.outerHTML):Pt(499)}this.getRouteInstance=function(e,t){var r;if(ce&&!ce.init&&(r=t||ce.__lp&&ce.__lp.trans||n)&&r.routes){var o=r.routes.length;if(e){if("*"==e)return r.routes;var i=e.split(".").length-1,a=r.routes[i];return a&&a.__lp.objPath==e?a:void 0}return r.routes[o-1]}};var qt=[M,E,C,w,R,N,O,T,k,x],zt=new WeakSet,Wt=_createClass((function e(t){var r=t.routes,o=t.fns,i=t.index,s=t.processed,l=t.prevInstance,c=t._trans;_classCallCheck(this,e),_classPrivateMethodInitSpec(this,zt);var d=this,p=l||o;for(var u in p)!l&&bt(qt,u)||("__lp"==u?this.__lp=Lyte.deepCopyObject(p.__lp):this[u]=p[u]);s.transComp&&!s.transComp.rendered[i]&&s.transComp.redirected&&s.transComp.redirected.index<i&&(delete this.__lp.loadDependencies,delete this.__lp.loadResources,this.$={},delete this.currentModel),this.__ltp={queryParams:{}},this.__lp&&this.__lp.toBeUsed&&this.__lp.toBeUsed.length&&(d=this,Lyte.extendService({services:this.__lp.toBeUsed||[],type:"route",ins:this,callback:function(e,t,r,o){var n={};n.key=t,n.service=o,Lyte.extendService({services:[n],type:"route",ins:d})}})),this.transition=c||a._trans,this.parent=r[i-1],l||(this.$={},this.init&&this.init(),this.throwEvent=void 0!==Lyte.Component&&Lyte.Component.throwEvent),this.replaceWith=ce.replaceWith,this.transitionTo=ce.transitionTo,this.removeFromCache=function(e){Lyte.removeFromCache.assign(e)},this.setTitle=function(e){de.title=this.title=e},this.getQueryParams=function(){return this.__ltp.queryParams||{}},this.getDynamicParam=function(){return this.__ltp.dynamicParam},Object.defineProperty(d,"$lg",{value:Lyte.__gl}),this.getRouteInstance=function(e){return ce.getRouteInstance(e)},this.setDynamicParam=function(e){if(e&&this.__ltp.dynamicParam&&this.__ltp.dynamicParam!=e){var t=Array.from(n.matched.dynamicParams);return t.splice(this.__lp.objPath.split(".").length-1,1,e),_assertClassBrand(zt,this,Gt).call(this,Yt(n.matched,{dynamicParams:t}))}return n._trans}}),[{key:"setQueryParams",value:function(e,t,r){var o,i={};"object"==_typeof(e)?(i=e,r=t):i[e]=t,"object"==_typeof(r)&&(o=r.refresh),o=r;var a=Yt(n.matched,{queryParams:Object.assign({},n.matched.queryParams,i)});return Kt(n.matched.queryParams,a.queryParams)?n._trans:(a.refreshModel=null==a.refreshModel?o:a.refreshModel,_assertClassBrand(zt,this,Gt).call(this,a))}},{key:"refresh",value:function(e){var t=-1!=this.transition.target.indexOf(this.__lp.objPath)?je(this.__lp.objPath).length-1:je(this.transition.target).length,o=Array.from(n.matched.route),i={matched:n.matched,R:n.R,transComp:{unRendered:o.splice(t),rendered:o}};if(n.abort({state:308,iAbort:!0}),r={replace:!0,data:n.data,fromHistory:!1,url:n.url},qe(n.url,i),e&&e.refreshTemplate)for(var s,l=t;s=a.routes[l];l++)delete s.component;return a._trans}}]);function Gt(e){var t=Ue(e),o={matched:e,R:n.R};return r={data:n.data,url:t,fromHistory:!1},qe(t,Qt(o)),a._trans}function Yt(e,t){var r=Object.assign({},e);return r.route=t.route||Array.from(e.route),r.dynamicParams=t.dynamicParams||Array.from(e.dynamicParams),r.queryParams=t.queryParams||Object.assign(e.queryParams),r}this._RouteClass=Wt;var Jt=[E,C,w,R,N,O,T,k];function Qt(e){if(n)if(n.running){var t=e.matched;if(102==n.state&&n.prom&&n.prom.hook==O){var r=ze(n,t,e.R),o=Jt.indexOf(n.prom.hook)<=5?n.prom.index:n.prom.index+1,i=ze(s,t,e.R);r.common.length<i.common.length?(r.rendered.length<i.rendered.length&&(e.prevTrans=s,n.runLoop.templateToRemove.length&&n.runLoop.templateToRemove.pop()),r=i,n.prom.index<=i.common.length-1&&(r.redirected=n.prom)):r.common.length-1>=o&&n.prom.index<=r.common.length-1&&(e.prevTrans=n,r.redirected=n.prom)}var a={route:t.target,queryParams:t.queryParams,dynamicParams:t.dynamicParams.filter(Ie)};ce.checkIfSameRoute(n.info,a)&&!n.aborted?n.pause({iPause:!0}):n.abort({state:409,iAbort:!0}),e.transComp=r}else n&&!n.aborted&&n.abort({state:409,iAbort:!0});return e}return Lyte.extendEventListeners(this),ce.__lp.AuxRouterInit=function(){ce.__lp.AuxRouter.run=_e,ce.__lp.AuxRouter.Route=Wt},this}Lyte.Router=new t,Lyte.Router._class=t}(window),function(e,t){var r=_regenerator().m(W),o=_regenerator().m(X),n=e.lytePrivateData=new WeakMap,a=new IdleTaskScheduler({delayInit:!0,timeout:40});e._wrapperComponents=[];var s=e.isLyteWidgetParent?e._widgetLyte:e.Lyte,l=s;e.__lyteConfig||(e.__lyteConfig={_definedBeforeBridging:[],_alreadyDefinedBeforeBridging:[],v3:!0,_pendingV3Components:{},_firstRegisteredComp:{}});var c=e.__lyteConfig;if(c.customElementsDefine||(c.customElementsDefine=customElements.constructor.prototype.define,Object.defineProperty(customElements.constructor.prototype,"define",{value:function(e,t,r,o){customElements.get(e)?c._alreadyDefinedBeforeBridging.push({name:e,compClass:t,options:r,_lyteOptions:o,scope:this}):(c._definedBeforeBridging.push({name:e,compClass:t,options:r,_lyteOptions:o,scope:this}),c.customElementsDefine.apply(this,arguments))},enumerable:!1})),c.instanciateBridge||(c.instanciateBridge=function(){if(c.isWidgetBuild||c._LyteCustomElement&&c._customElementPrototype&&c._LyteYield){c.instanctiatedBridge=!0,c.versionBridge={component:{}};var t=function(){function t(){_classCallCheck(this,t)}return _createClass(t,null,[{key:"define",value:function(r,o,n,i){var a,s;c.isWidgetBuild||(i?"lyte-yield"==r?i&&i.widget||(a=c._LyteYield):i&&i.v4raw||i&&i.v3raw?a=function(e){function t(){return _classCallCheck(this,t),_callSuper(this,t)}return _inherits(t,e),_createClass(t)}(c._LyteCustomElement):i&&(i.v3||i.v4)?a=function(e){function t(){return _classCallCheck(this,t),_callSuper(this,t)}return _inherits(t,e),_createClass(t)}(c._customElementPrototype):i&&(i.widget||i.widgetRaw):s=!0);var l=arguments;!s&&i?(i.v3?(H.V3.pendingComp.firstRegister(r,"v3"),t.allList.v3[r]=o,c.isWidgetBuild||(a._observedAttributes=o._observedAttributes,l=[r,a])):i.widget?(H.V3.pendingComp.firstRegister(r,"widget"),t.allList.widget[r]=o):i.widgetRaw?(t.allList.widgetRaw[r]=o,H.V3.pendingComp.firstRegister(r,"widgetRaw")):i.v3raw?(t.allList.v3raw[r]=o,H.V3.pendingComp.firstRegister(r,"v3raw")):i.v4raw?(t.allList.v4raw[r]=o,H.V3.pendingComp.firstRegister(r,"v4raw")):i.v4&&(t.allList.v4[r]=o,H.V3.pendingComp.firstRegister(r,"v4")),customElements.get(r)||t.definedHere[r]||(e.__lyteConfig.customElementsDefine.apply(this,l),t.definedHere[r]=o)):e.__lyteConfig.customElementsDefine.apply(this,l)}},{key:"register",value:function(){[c._alreadyDefinedBeforeBridging,c._definedBeforeBridging].forEach((function(e){e&&e.length&&e.forEach((function(e){e._lyteOptions&&(e._lyteOptions.v3raw?(t.allList.v3raw[e.name]=e.compClass,H.V3.pendingComp.firstRegister(e.name,"v3raw")):e._lyteOptions&&e._lyteOptions.v4raw?(t.allList.v4raw[e.name]=e.compClass,H.V3.pendingComp.firstRegister(e.name,"v4raw")):e._lyteOptions&&e._lyteOptions.v3?(t.allList.v3[e.name]=e.compClass,H.V3.pendingComp.firstRegister(e.name,"v3")):e._lyteOptions&&e._lyteOptions.v4?(t.allList.v4[e.name]=e.compClass,H.V3.pendingComp.firstRegister(e.name,"v4")):e._lyteOptions&&e._lyteOptions.widget?(t.allList.widget[e.name]=e.compClass,H.V3.pendingComp.firstRegister(e.name,"widget")):e._lyteOptions&&e._lyteOptions.widgetRaw&&(t.allList.widgetRaw[e.name]=e.compClass,H.V3.pendingComp.firstRegister(e.name,"widgetRaw")))}))})),c.versionBridge||c.customElementsDefine||(c.customElementsDefine=customElements.constructor.prototype.define),Object.defineProperty(customElements.constructor.prototype,"define",{value:function(e,r,o,n){t.define.apply(this,[e,r,o,n])},enumerable:!1})}}])}();c.versionBridge.component.V3Registry=t,t.allList={v3:{},v4:{},other:{},v3raw:{},v4raw:{},widget:{},widgetRaw:{}},t.definedHere={},t.register()}}),s.Security={_ourSanitizerInstance_:{},_userSanitizerInstance_:{},_eM:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;","=":"&#x3D;"},_eR:/[&<>"'`=]/g,_eF:function(e){return this._eM[e]},escape:function(e){return"string"!=typeof e&&(e=""+e),e.replace(this._eR,this._eF.bind(this))}},!e.isLyteWidget){var d={GLOBAL_TAGS:[],GLOBAL_ATTRIBUTES:[],FORBID_TAGS:[],FORBID_ATTR:[],REUSE_CONFIG:!0};s.Security._ourSanitizerInstance_=ZWAF["7.2.5"].HTMLPurifier(d),s.Security._ourSanitizerInstance_._GLOBAL_TAGS=d.GLOBAL_TAGS,s.Security._ourSanitizerInstance_._GLOBAL_ATTRIBUTES=d.GLOBAL_ATTRIBUTES,d.GLOBAL_ATTRIBUTES.push("is","yield-name","lt-prop-route","lt-prop-dp","lt-prop-fragment","lt-prop-qp","lt-prop","lt-prop-class","lt-prop-id","lt-prop-rel","lt-prop-title","lt-prop-style","lt-prop-target","lt-prop-td","lt-prop-custom","lt-prop-target","lt-prop-id","lt-prop-class","lt-prop-style","lt-prop-rel","lt-prop-title"),d.GLOBAL_TAGS.push("link-to"),s.Security._ourSanitizerInstance_._FORBID_TAGS=d.FORBID_TAGS,s.Security._ourSanitizerInstance_._FORBID_ATTR=d.FORBID_ATTR,s.Security.createSanitizer=function(e){e&&e.__target__&&(e=e.__target__),e.GLOBAL_ATTRIBUTES||(e.GLOBAL_ATTRIBUTES=[]),e.FORBID_TAGS||(e.FORBID_TAGS=[]),e.FORBID_ATTR||(e.FORBID_ATTR=[]),e.GLOBAL_TAGS||(e.GLOBAL_TAGS=[]),e.REUSE_CONFIG=!0,e.GLOBAL_ATTRIBUTES.push("is","yield-name","lt-prop-route","lt-prop-dp","lt-prop-fragment","lt-prop-qp","lt-prop","lt-prop-class","lt-prop-id","lt-prop-rel","lt-prop-title","lt-prop-style","lt-prop-target","lt-prop-td","lt-prop-custom","lt-prop-target","lt-prop-id","lt-prop-class","lt-prop-style","lt-prop-rel","lt-prop-title"),e.GLOBAL_TAGS.push("link-to");for(var t=Array.from(e.GLOBAL_TAGS),r=[],o=0;o<t.length;o++)if(H._registeredComponents[t[o]]?r=H._registeredComponents[t[o]].observedAttributes:l.registeredCustomComponent[t[o]]&&(r=l.registeredCustomComponent[t[o]].observedAttributes),r)for(var n=0;n<r.length;n++)-1==e.GLOBAL_ATTRIBUTES.indexOf(r[n])&&e.GLOBAL_ATTRIBUTES.push(r[n]);return s.Security._userSanitizerInstance_=ZWAF["7.2.5"].HTMLPurifier(e),s.Security._userSanitizerInstance_._GLOBAL_TAGS=e.GLOBAL_TAGS,s.Security._userSanitizerInstance_._GLOBAL_ATTRIBUTES=e.GLOBAL_ATTRIBUTES,s.Security._userSanitizerInstance_._FORBID_TAGS=e.FORBID_TAGS,s.Security._userSanitizerInstance_._FORBID_ATTR=e.FORBID_ATTR,s.Security._userSanitizerInstance_}}var p=["focus","focusin","focusout","resize","scroll","click","dblclick","mousedown","mouseup","mousemove","mouseover","mouseout","change","select","submit","keydown","keypress","keyup","contextmenu"],u="registerHelper",f="delete";function h(e,t){e[t]||defProp(e,t,{value:new Set,enumerable:!1,writable:!0,configurable:!0})}function m(e,t,r){e[t]||defProp(e,t,{value:r,enumerable:!1,writable:!0,configurable:!0})}function v(e,t){if(t){var r=e._bindings;r||(h(e,"_bindings"),r=e._bindings),r.add(t)}}function y(e,t){e[t]||defProp(e,t,{value:[],enumerable:!1,writable:!0,configurable:!0})}function _(){return document.createDocumentFragment()}function g(e){return document.createElement(e)}function b(e,t,r){e.insertBefore(t,r)}function A(e,t,r){e[t][f](r),e[t].size||delete e[t]}e.defProp=function(){Object.defineProperty.apply(Object,arguments)},s.registerErrorCodes({LC001:"Error while parsing custom prop handler attribute {0}. Check if the value provided is a valid JSON",LC002:"{0} Component is not compiled. Please compile using Lyte CLI",LC003:"Helper named {0} is not defined",LC004:"Action named {0} doesn't exists",LC005:"Lyte.objectUtils doesn't support {0} function",LC006:"Lyte.arrayUtils doesn't support {0} function",LC007:"Component name not specified in Lyte.Component.render",LC008:"Specified outlet {0} doesn't exists - Lyte.Component.render",LC009:"Method named {0} doesn't exists in {1} component",LC010:"Parent Node / reference Node not provided for insertBefore method",LC011:"Error in promise provided in initialize function of data '{0}' of {1} component",LC020:"{0} component not supporting hide-tag rendering. please add @hide-tag-supported in the component's template tag.",LC021:"Directive syntax is used but source not loaded"});var E=navigator.userAgent;if(E.match(/rv:11/)&&(s._ie=!0,e.action=function(){}),E.match("Edge")){var C=g("div");C.innerHTML="<template><div>c</div></template>",C.querySelector("template").childNodes.length?s._ie=!0:s._ed=!0,C.remove()}var L=function(){function e(){var t;return _classCallCheck(this,e),(t=_callSuper(this,e)).attributes.t||(H.frSpecial=!0),t}return _inherits(e,_wrapNativeSuper(HTMLElement)),_createClass(e)}();if(s._ie||s._ed){var $=_();$.appendChild(document.createTextNode("  dummy ")),$.childNodes[0].replaceWith(document.createTextNode("changed")),"changed"!==$.childNodes[0].textContent&&(s._rwpf=!0),s._ms=!0}s.Component={},l.Compile={};var P=s.Component;function w(){}s.Component.lazyRegisterScheduler=a,s.Component.priorityRegistrationQ=a.priorityQueue,s.arrayUtils=function(){return H.aF.apply(H,arguments)},s.objectUtils=function(){return H.oF.apply(H,arguments)},Object.defineProperty(P,"register",{get:function(){return l._preRegister(),H.registerComponentWrapper},enumerable:!0}),P.nonFalsyAttrs={add:function(e){Array.isArray(e)?e.forEach((function(e){H.nonFalsyAttrList.push(e)})):H.nonFalsyAttrList.push(e)},_remove:function(e){var t=H.nonFalsyAttrList.indexOf(e);-1!==t&&H.nonFalsyAttrList.splice(t,1)},remove:function(e){Array.isArray(e)?e.forEach((function(e){P.nonFalsyAttrs._remove(e)})):P.nonFalsyAttrs._remove(item)}},P.getComponentClass=function(e){return H._registeredComponents[e]},P.registerHelper=function(){H.registerHelper.apply(H,arguments)},P.set=function(){H.set.apply(H,arguments)},P.registeredHelpers={},P.registeredComponents={},P.customPropHandlersList={},P.registerCustomPropHandler=function(e){if(H.String.dasherize(e),e=H.String.toCamelCase(e),-1===H.customPropHandlers.indexOf(e)){H.customPropHandlers.push(e);var t=S.prototype[e]=function(){var t=arguments.length,r=arguments[0],o=arguments[2],n=I.getCmpData(this.component?this.component.data:this.$data);if(!r){var i={};for(var a in n)if(a.startsWith(e)){var s=a.substring(e.length);i[s=H.String.lowerCaseFirstLetter(s)]=n[a]}return i}if("string"==typeof r){if(!(t>1))return n[e+H.String.upperCaseFirstLetter(r)];this.set(e+H.String.upperCaseFirstLetter(r),arguments[1],o)}else if("object"===_typeof(r))for(var l in r){var c=e+H.String.upperCaseFirstLetter(l);this.set(c,r[l],arguments[1])}};P.customPropHandlersList[e]=t,H.customPropRegex=new RegExp("^("+H.customPropHandlers.join("|")+")")}},P.unregisterComponent=function(e,t){if(t=t||{},P.registeredComponents[e]){var r=H._registeredComponents[e];if(r.activeInstances>0)s.warn("There are active instances of the component "+e+" and hence cannot be unregistered");else if(r.component.activeInstances>0)s.warn("There are active instances of the component "+e+" and hence cannot be unregistered");else{r._properties=r.component._properties={},r._mixins=r._actions=r._template=r._dynamicNodes=null,r._callBacks=r.component._callBacks={},r._observers=r.component._observers=[],r._data=r.component_data=void 0,r._methods=r.component._methods={},r.prototype.get=w,r.prototype.set=w,Object.defineProperty(r.prototype,"setData",{configurable:!0,writable:!0,value:function(e,t){if(this._initProperties=this._initProperties||{},"string"==typeof e)this._initProperties[e]=t;else if("object"===_typeof(e))for(var r in e)this._initProperties[r]=e[r]}}),Object.defineProperty(r.prototype,"setMethods",{configurable:!0,writable:!0,value:function(e,t){if(this._initMethods=this._initMethods||{},"string"==typeof e)this._initMethods[e]=t;else if("object"===_typeof(e))for(var r in e)this._initMethods[r]=e[r]}}),delete P.registeredComponents[e];var o=document.querySelector("template[tag-name="+e+"]");o&&o.remove();var n=r._helperTemplate;n&&n.remove(),r.component._depthTemp&&r.component._depthTemp.remove()}}else s.warn("Component "+e+" not yet registered")},s.createCustomElement=function(t,r){var o=r.constructor;delete r.constructor;var n=r.connectedCallback;delete r.connectedCallback;var i=r.attributeChangedCallback;delete r.attributeChangedCallback;var a=r.disconnectedCallback;delete r.disconnectedCallback,this.defProperty=function(e,t,r){var o={};r.get&&(o.get=r.get),r.set&&(o.set=r.set),Object.defineProperty(e,t,o,!0)};var d=function(){function r(){var t;return _classCallCheck(this,r),t=_callSuper(this,r),e.ignoreParent?(t.__lyteIgnore=!0,_possibleConstructorReturn(t)):(t.decideConstructor(),t)}return _inherits(r,_wrapNativeSuper(HTMLElement)),_createClass(r,[{key:"decideConstructor",value:function(){if(c&&(c.v4||c.isWidgetBuild)){var t=c.versionBridge.component.V3Registry,o=t.allList.v4raw[this.localName],n=t.allList.v3raw[this.localName],i=t.allList.widgetRaw[this.localName];if(o){if(!n||this._callee&&this._callee.__v4||this.hasAttribute("lyte-v4")||this.hasAttribute("lyte-registry")||c.lyteV4||c.fromV4Render){var a=o,s=this;r._V4InsApi.forEach((function(e){s[e]=a.prototype[e]}))}}else if(i)if(this._callee&&this._callee.__widget||this.hasAttribute("lyte-widget")||e.__lyteConfig.isWidgetComponent||c.lyteWidget||c.fromWidgetRender){var l=i,d=this;"widgetRaw"!=c._firstRegisteredComp[this.localName]&&r._V3InsApi.forEach((function(e){d[e]=l.prototype[e]}))}else{if(!n)return H.V3.pendingComp.add(this),void(this.__v3lyteIgnore=!0);var p=n;"v3raw"!=c._firstRegisteredComp[this.localName]&&r._V3InsApi.forEach((function(e){self[e]=p.prototype[e]}))}}this.actualConstructor()}},{key:"actualConstructor",value:function(){this.isNewComp(t)?this.executeCallbacks(o,arguments):this.__lyteIgnore=!0}},{key:"connectedCallback",value:function(){this._connectedCallback()}},{key:"_connectedCallback",value:function(){this.__lyteIgnore||this.hasAttribute("lyte-rendered-ce")||(this.executeCallbacks(n,arguments),this.setAttribute("lyte-rendered-ce",""),this._connectedCalled=!0)}},{key:"attributeChangedCallback",value:function(e,t,r){this._attributeChangedCallback(e,t,r)}},{key:"_attributeChangedCallback",value:function(){this.__lyteIgnore&&!this.__v3lyteIgnore||this.executeCallbacks(i,arguments)}},{key:"disconnectedCallback",value:function(){this._disconnectedCallback()}},{key:"_disconnectedCallback",value:function(){this.__v3lyteIgnore?H.V3.pendingComp.remove(this):P.shouldIgnoreDisconnect()||this.__lyteIgnore||(this.executeCallbacks(a,arguments),this._parentHelper=null)}},{key:"executeCallbacks",value:function(e,t){e&&e.apply(this,Array.from(t))}},{key:"isNewComp",value:function(e){return!this.hasAttribute("lyte-rendered-ce")}}])}();d._V4InsApi=["_connectedCallback","_attributeChangedCallback","_disconnectedCallback","actualConstructor","executeLyteCallbacks","isClonedNode","_isClonedAttribute","isClonedAttribute"],d._V3InsApi=["_connectedCallback","_attributeChangedCallback","_disconnectedCallback","actualConstructor","executeCallbacks","isNewComp"];var p=r.static;if(r._static=p,p){for(var u in p)"object"===_typeof(p[u])?this.defProperty(d,u,p[u]):Object.defineProperty(d,u,{value:p[u]});delete r.static}for(var u in d._definition=r,r)"object"===_typeof(r[u])?this.defProperty(d.prototype,u,r[u]):Object.defineProperty(d.prototype,u,{writable:!0,value:r[u]});r.static=p,r.constructor=o,r.connectedCallback=n,r.attributeChangedCallback=i,r.disconnectedCallback=a,"complete"===document.readyState||"interactive"===document.readyState?customElements.define(t,d,void 0,s.isWidgetBuild?{widgetRaw:!0}:{v3raw:!0}):I.toBeRegistered.push({name:t,def:d,_lyteOptions:s.isWidgetBuild?{widgetRaw:!0}:{v3raw:!0}}),l.registeredCustomComponent[t]=d};var R="undefined"!=typeof HTMLElement?HTMLElement:Element;function N(){l.$.assetsDiv&&(l.$.assetsDiv.addEventListener("click",(function(){e.event||(H._windowEvNeeded=!0)})),l.$.assetsDiv.dispatchEvent(new Event("click"))),s._ie||document.body.appendChild(H.lyteComponentsDiv),document.body.appendChild(H.hDiv);for(var t=p,r=0;r<t.length;r++){var o=t[r];document.body.addEventListener(o,T,!0)}var n=H.toBeRegistered;if(n.length){for(var i=0;i<n.length;i++)customElements.define(n[i].name,n[i].def,void 0,n[i]._lyteOptions);H.toBeRegistered=[]}if(/iPad|iPhone|iPod/.test(E)&&!e.MSStream){var a=g("style");a.innerHTML="* { cursor : pointer}",document.head.appendChild(a)}if(l.isWidgetBuild){var c=l.$.widgetWrapper;document.body.appendChild(c),e.docEventListenerHandler&&e.docEventListenerHandler.attachShadow(c.shadowRoot),I.shadow.shadowList.push(c.shadowRoot),c.shadowRoot._shadowChild=[],c.shadowRoot._lyteShadow=!0,c.shadowRoot._compList=[],c.shadowRoot._duplicateStyle=[],c.shadowRoot._linkRef=[],c.instantiated=!0,I.shadow.attachEvents(c.shadowRoot)}}s.appendTemplateDiv=function(){document.body.appendChild(H.tDiv),document.body.appendChild(H.h1Div),B.appendTemp()},s.getAllHiddenComponents=function(){return H.hiddenComponentsDiv.content.childNodes},document._addShadowForGlobalRegistry=function(e){for(var t=0;t<p.length;t++){var r=p[t];e.addEventListener(r,T,!0)}for(var o=0;o<windowEventListeners.length;o++)e.addEventListener.apply(e,windowEventListeners[o]);e.addEventListener("change",O),e.addEventListener("scroll",I.scrollEventHandler,!0)};var O=function(e){var t=e.target||e.srcElement;if(t._attributeDetails){var r="value";"checkbox"!==t.type&&"radio"!==t.type||(r="checked");var o=[],n=t._attributeDetails[r],i=M.getAttr(t._specialAttributeDetails);if(n&&(n.isLbind||i)){var a=t;if(!t._callee){for(;a&&!H.isCustomElement(a)&&"LYTE-YIELD"!==a.tagName;){if("BODY"===a.tagName){a=null;break}a=a.parentNode}a&&"LYTE-YIELD"===a.tagName?t._callee=a._registerYield._callee:t._callee=a}var s=t._callee;if(i&&M.triggerAllListeners(s,i.hookName,t,!0),t&&H.adCx(t,o),n){var l=H.getNew(s.component.data,n.dynamicValue);if(!l.context)return;var c=+l.lastKey;if(Array.isArray(l.context)&&"number"==typeof c){var d=c<l.context.length;l.context[c]===t[r]&&d||H.aF(l.context,d?"replaceAt":"insertAt",c,t[r])}else H.set(l.context,l.lastKey,t[r])}t&&H.rmCx(t,o)}}};document.addEventListener("change",O);var T=function(t){var r,o=t.target,n=t.type;if(/^(click|dblclick)$/.test(n)&&o.getAttribute&&null!=o.getAttribute("lyte-state")&&!s.isWidgetBuild)t.preventDefault();else{!t.currentTarget||t.currentTarget===document.body||t.currentTarget instanceof DocumentFragment||(o=t.currentTarget),H._windowEvNeeded&&(r=!0,e.event=t);for(var i=!1;o&&o.getAttribute&&(!o.getAttribute(n)||!["mouseenter","mousemove","mouseover","mouseout","mouseleave"].includes(t.type)&&o.hasAttribute("disabled")&&"blur"!=n)&&"BODY"!=o.tagName&&(!o._hiddenBoundEvents||!o._hiddenBoundEvents[n])&&(!H.hasLyteEvents(o,n)||!(i=H.handleLyteEvents(o,t)));)o=o.parentNode;if(!i&&o){var a=o;if(!(o._callee&&o._callee.component&&o._callee.component.constructor._v4||o.component&&o.component.constructor&&o.component.constructor._v4)){if(!o._callee){for(;a&&!H.isCustomElementV3(a)&&"LYTE-YIELD"!==a.tagName;){if("BODY"===a.tagName){a=null;break}a=a.parentNode}a&&"LYTE-YIELD"===a.tagName?o._callee=a._registerYield._callee:o._callee=a===o?void 0:a}if(o._evBoundEvents&&o._evBoundEvents[n]){var l=o._evBoundEvents[n],c=s.deepCopyObject(l);H.skipArgProcessing(c,t,o),H.throwAction.call(o,o,n,c,void 0,void 0,o,t,void 0,!0)}else if(o.getAttribute&&o.getAttribute(n)&&o._boundEvents&&o._boundEvents[n]){o.getAttribute(n).split(" => ")[1];var d=o._boundEvents[n],p=s.deepCopyObject(d);H.skipArgProcessing(p,t,o),H.throwAction.call(o._callee,o._callee,n,p,void 0,void 0,o,t)}if(B.triggerGlobalEvent(o,n,t),"LABEL"===o.tagName){var u=o.querySelector("input");if(u&&u.getAttribute(n)){u.getAttribute(n).split(" => ")[1];var f=o._boundEvents[n],h=s.deepCopyObject(f);H.skipArgProcessing(h,t,o),H.throwAction.call(o._callee,o._callee,n,h,void 0,void 0,u,t)}}r&&(e.event=void 0),t._handledResolve&&t._handledResolve()}}else t._handledResolve&&t._handledResolve()}},x=function(){function t(){var e;return _classCallCheck(this,t),(e=_callSuper(this,t)).decideConstructor(),e}return _inherits(t,_wrapNativeSuper(HTMLElement)),_createClass(t,[{key:"decideConstructor",value:function(){if(c&&(c.v4||e.__lyteConfig.isWidgetBuild)){var r=c.versionBridge.component.V3Registry,o=r.allList.v4[this.localName],n=r.allList.v3[this.localName],i=r.allList.widget[this.localName];if(o){if(!n||this._callee&&this._callee.__v4||this.hasAttribute("lyte-v4")||this.hasAttribute("lyte-registry")||c.lyteV4||c.fromV4Render){var a=o,s=this;t._V4InsApi.forEach((function(e){s[e]=a.prototype[e]}))}}else if(i)if(this._callee&&this._callee.__widget||this.hasAttribute("lyte-widget")||e.__lyteConfig.isWidgetComponent||c.lyteWidget||c.fromWidgetRender){var l=i,d=this;"widget"!=c._firstRegisteredComp[this.localName]&&t._V3InsApi.forEach((function(e){d[e]=l.prototype[e]}))}else{if(!n)return H.V3.pendingComp.add(this),void(this.__v3lyteIgnore=!0);var p=n;"v3"!=c._firstRegisteredComp[this.localName]&&t._V3InsApi.forEach((function(e){self[e]=p.prototype[e]}))}}}},{key:"connectedCallback",value:function(){this._connectedCallback()}},{key:"_connectedCallback",value:function(){var e;this._callee=this._callee||H.getCallee(this.parentNode,this),B.yield.connect(this),!this._registerYield&&this._callee&&(this._callee._fR&&this._callee._fR._yieldCallee?this._registerYield={_callee:this._callee._fR._yieldCallee.component.$node}:this._callee._yields&&(e=this.attributes["yield-name"])&&(e=e.nodeValue)&&this._callee._yields[e]&&(this._registerYield={_callee:this._callee._yields[e]._callee}))}},{key:"disconnectedCallback",value:function(){this._disconnectedCallback()}},{key:"_disconnectedCallback",value:function(){if(this.__v3lyteIgnore)H.V3.pendingComp.remove(this);else if(!(P.shouldIgnoreDisconnect()||this._deleted||this._ignoreDisconnect)&&(B.yield.disConnect(this),this._deleted=!0,this._properties)){var e=[],t=I.getCmpData(this.component.data);H.adCx(this,e),H.removeSelectedBindingDeep(this._properties,t,!0);try{var r=n.get(this.component);H.removeSelectedBindingDeep(this._privateProperties,r,!0)}catch(e){}var o=this._registerYield;if(o){var i=[];this._parentHelper=null;var a="delete";for(var s in H.adCx(o,i),this._dynamicProperty)if(this._dynamicProperty[s].isActualNode)this._dynamicProperty[s].isActualNode._helperNodes[a](this);else{var l=o._callee.getProperty(s)._helperNodes;l&&l[a](this)}this._dynamicProperty={};for(var c=0;c<this._helpers.length;c++)o._callee.removeHelpers(this._helpers[c]);this._helpers=[],H.rmCx(o,i),H.rmCx(this,e)}else H.rmCx(this,e)}}},{key:"getProperty",value:function(e){var t=e.match(/([^[\].]+|\[\])/g),r=this;r._properties[t[0]]||(r._properties[t[0]]={}),r=r._properties[t[0]],defProp(r,"_path",{enumerable:!1,value:t[0]});for(var o=1;o<t.length;o++)(t[o].startsWith("'")||t[o].startsWith('"'))&&(t[o]=t[o].substring(1,t[o].length-1)),r[t[o]]||(r[t[o]]={},defProp(r[t[o]],"_path",{enumerable:!1,value:r._path+"."+t[o]})),r=r[t[o]];return r}}])}();x._V4InsApi=["_connectedCallback","getProperty","_disconnectedCallback"],x._V3InsApi=["_connectedCallback","getProperty","_disconnectedCallback"],customElements.define("lyte-yield",x,void 0,s.isWidgetBuild?{widget:!0}:{v3:!0});var S=function(t){function r(){var t;return _classCallCheck(this,r),t=_callSuper(this,r),e.isLyteWidget&&e.parentWrapperComps&&-1!=e.parentWrapperComps.indexOf(t.tagName)&&!t.children.length||e.ignoreParent?(t.__lyteIgnore=!0,_possibleConstructorReturn(t)):(t.decideConstructor(),t)}return _inherits(r,t),_createClass(r,[{key:"decideConstructor",value:function(){if(e.__lyteConfig&&(e.__lyteConfig.v4||e.__lyteConfig.isWidgetBuild)){var t=this,o=c.versionBridge.component.V3Registry,n=o.allList.v4[this.localName],i=o.allList.v3[this.localName],a=o.allList.widget[this.localName];if(n){if(!i||this._callee&&this._callee.__v4||this.hasAttribute("lyte-v4")||this.hasAttribute("lyte-registry")||c.lyteV4||c.fromV4Render){var s=n;r._V4InsApi.forEach((function(e){t[e]=s.prototype[e]})),this.setData=s.componentClass.prototype.setData,this.setMethods=s.componentClass.prototype.setMethods}else if(i){var l=i;t.component=t.constructor.component=l.component}}else if(a)if(this._callee&&this._callee.__widget||c.__widget||this.hasAttribute("lyte-widget")||e.__lyteConfig.isWidgetComponent||c.lyteWidget||c.fromWidgetRender){var d=a;"widget"!=c._firstRegisteredComp[this.localName]&&r._V3InsApi.forEach((function(e){t[e]=d.prototype[e]})),t.component=d.component,t.__widget=!0}else{if(!i)return H.V3.pendingComp.add(this),void(this.__v3lyteIgnore=!0);var p=i;"v3"!=c._firstRegisteredComp[this.localName]&&r._V3InsApi.forEach((function(e){t[e]=p.prototype[e]})),t.component=p.component}else if(this.hasAttribute("lyte-widget")||e.__lyteConfig.isWidgetComponent||c.lyteWidget||c.fromWidgetRender)return H.V3.pendingComp.add(this),void(this.__v3lyteIgnore=!0)}this.actualConstructor()}},{key:"doRegistration",value:function(e,t){if(!this.component.constructor.__isRegistered)if(a.tasks.get(e)||a.currentTask&&a.currentTask.id===e){if(a.currentTask&&a.currentTask.id!==e){if(l.performance)var r=performance.now();var o=a.tasks.get(a.currentTask.id);if(o&&a.isGenerator(o.handler)){for(var n=o.handler.next();0==n.done;)"function"==typeof(d=n.value)&&d(),n=o.handler.next();a.dequeueTask(a.currentTask.id)}if(l.performance){var i=performance.now(),s=l.Component.registerPerf[a.currentTask.id];l.Component.registerPerf[a.currentTask.id]=(s||0)+(i-r)}}if(l.performance)var c=performance.now();var d,p=a.dequeueTask(e).handler;if(a.isGenerator(p))for(n=p.next();0==n.done;)"function"==typeof(d=n.value)&&d(),n=p.next();if(l.performance){var u=performance.now();s=l.Component.registerPerf[e],l.Component.registerPerf[e]=(s||0)+(u-c)}}else l.performance&&(c=performance.now()),t._registerComponent(e,t,t.component._widget),a.dequeueTask(e),l.performance&&(u=performance.now(),s=l.Component.registerPerf[e],l.Component.registerPerf[e]=(s||0)+(u-c))}},{key:"actualConstructor",value:function(){if(this.hasAttribute("lyte-rendered")||this._ccCalled)return this.component=void 0,void(this.__lyteIgnore=!0);if(!P.registeredComponents[this.localName]){this.__lyteIgnore=!0;var t=H._registeredComponents[this.localName];return t._pendingComponents=t._pendingComponents||[],void t._pendingComponents.push(this)}var r,o;this.__v3=!0,P.currentWidget?P.currentWidget:this._callee&&this._callee.__lyteWidget,this.constr=this.constructor,(i=this.constructor.__widgetName)&&(r=widgetMap,e.ss=widgetMap,i=r.get(i)),this.constr.activeInstances++,this.constructor.component.activeInstances++;var n,i,a,c=this.attributes._lyteprop,d=(o=c=c?c.nodeValue:void 0)?H.fRP[o]:void 0,p=this.component=d?d.component:this.component?new this.component:new this.constructor.component;if(p.__isComponent__=!0,l.getConfig("lazyComponentRegister")&&this.doRegistration(this.localName,this.constructor),this._properties={},this._privateProperties={},this.registeredProp=H.directive.registeredProp[this.localName],p._config=this.constructor._config,p.actions,!d){var u={};n=p.data={};var f=this.component.constructor._data?this.component.constructor._data.apply(p):{};for(var h in defProp(u,"__component__",{value:this,configurable:!0,writable:!0,enumerable:!1}),u.errors={},n=p.data=u,H.__data.length&&H.__data.forEach((function(e){f=Object.assign(f,e)})),p.__data=f,this._hideAttr={},f){var m,v=f[h];if(n[h]=v.default,v.initialize&&"function"==typeof v.initialize){var y=v.initialize.apply(this.component);y?n[h]=y:s.error("LC011",h,this.tagName)}if(l.Transform[v.type]){var _=l.Transform[v.type];/^(object|array)$/.test(_.extends)&&(_.hasOwnProperty("properties")||_.hasOwnProperty("items"))&&(m=!0)}(/^(object|array)$/.test(v.type)&&v.watch||m)&&l.establishObjectBinding(n,h,!1,void 0,void 0,!!v.watch||void 0),v.hasOwnProperty("hideAttr")&&(this._hideAttr[h]=v.hideAttr)}if(this._initMethods){var g=Object.keys(this._initMethods);defProp(n,"$methodAttributes",{value:{},enumerable:!1,writable:!0,configurable:!0});var b=g.reduce((function(e,t){return e[t]=!0,e}),{});n.$methodAttributes=b}if(this.$data){var A=this.$data;for(var E in A)n[E]=A[E]}if(this.$data=n,Object.defineProperty(n,"__compNode",{enumerable:!1,writable:!0,value:this}),this._initProperties){var C=Object.keys(this._initProperties).filter((function(e){return!n.$methodAttributes||!n.$methodAttributes[e]}));defProp(n,"$dataAttributes",{value:{},enumerable:!1,writable:!0,configurable:!0});var L=C.reduce((function(e,t){return e[t]=!0,e}),{});n.$dataAttributes=L}var $=this.component.constructor._observedAttributes;$&&this.attributes&&Object.values(this.attributes).forEach((function(e){$.includes(H.String.toCamelCase(e.name))&&(n.$dataAttributes?n.$dataAttributes:defProp(n,"$dataAttributes",{value:{},enumerable:!1,writable:!0,configurable:!0}),n.$dataAttributes[H.String.toCamelCase(e.name)]=!0)})),$=[],defProp(p,"$dataAttributes",{value:{},enumerable:!1,writable:!0,configurable:!0}),defProp(p,"$methodAttributes",{value:{},enumerable:!1,writable:!0,configurable:!0}),p.$dataAttributes=n.$dataAttributes,p.$methodAttributes=n.$methodAttributes,p.$dataAttributes&&(Object.freeze(p.$dataAttributes),Object.freeze(n.$dataAttributes)),p.$methodAttributes&&(Object.freeze(p.$methodAttributes),Object.freeze(n.$methodAttributes)),p.$data=n,this.constructor._serviceToBeUsed&&function(e,t,r){for(var o in r=r||e.constructor._serviceToBeUsed){var n=r[o];if(l.registeredServices.hasOwnProperty(n))e.component[o]=new l.registeredServices[n];else{e.__toRemoveLazy=e.__toRemoveLazy||{};var i=e,a=l.$.requiredServices(o,n,(function(e,t,r,o){i.component[t]=l.$.instantiateService(o),i.__toRemoveLazy[o].forEach((function(e){l.$.toRemoveFromRequiredServices(e)})),delete i.__toRemoveLazy[o]}));e.__toRemoveLazy[n]=e.__toRemoveLazy[n]||[],e.__toRemoveLazy[n].push(a)}}}(this),this.initializeMethod(this,this.component.constructor._methods)}if(p.$node)for(var w in p.$node)"localName"!=w&&(this[w]=p.$node[w]);for(var R in p.$node=this,P.customPropHandlersList)this[R]=P.customPropHandlersList[R];if(this.component&&this.component.constructor._template&&this.component.constructor._template.widget&&(this.__lyteWidget=this.component.constructor._template.widget,(i=widgetMap.get(this.__lyteWidget))&&i.components.set(this,!0)),p._config&&(a=1==p._config.clientLifeCycleHooks||"object"==_typeof(p._config.clientLifeCycleHooks)&&p._config.clientLifeCycleHooks.includes("constructor")),d)this._fR=d,delete H.fRP[o];else for(var w in this._actions=this._actions?this._actions:{},this._callee=this._callee||this.getCallee(this.parentNode),this._callee&&this.constructor.__widgetName&&this._callee.constructor.__widgetName!=this.constructor.__widgetName&&i.additionalComps.add(this.parentElement),!a&&this.hasAttribute("server-rendered"),n)(e.isLyteWidget||e.__lyteEnablePromise)&&n[w]instanceof Promise||H.handleValidation(n,w,n[w],p,!0)&&(n[w]=void 0)}},{key:"getMethods",value:function(e){return this.component.getMethods(e)}},{key:"hasAction",value:function(e){return this.component.hasAction(e)}},{key:"setActions",value:function(e,t){return this.component.setActions(e,t)}},{key:"setMethods",value:function(e,t){return this.component.setMethods(e,t)}},{key:"getCallee",value:function(e){return H.getCallee(e,this)}},{key:"afterConnected",value:function(t,r){this.constructor;var o=this.component.constructor;if((!0===this.constructor._mutable||l.getConfig("mutable"))&&(this.component.data=l.mut(this.component.data)),this.getAttribute("_lyteprop"))return"";for(var n=o._observedAttributes,i=0;i<n.length;i++){var a=n[i],s=this.getProperty(a);defProp(s,"__fromComponent",{value:!0,enumerable:!1})}this.getProperty("errors");var c=l.__gl,d=this.component,p=d.data;p.$lg=c;var u,f=this._parentContext?this._parentContext:this._callee?Object.assign({},this._callee.component.$lc||{}):void 0;if(l.Context&&(this.component.$lc=p.$lc=new l.Context(this.component,f)),this._parentContext=void 0,this._initProperties){var h=this._initProperties;for(var m in h){var v,y=d.__data[m];if(v=!y||y.type===H.getDataType(h[m])||void 0===h[m]&&"boolean"!==y.type?h[m]:H.typeCast(h[m],d.__data[m].type),!H.handleValidation(p,m,v,d,!0)){var _;if(p[m]=v,y&&l.Transform[y.type]){var g=l.Transform[y.type];/^(object|array)$/.test(g.extends)&&(g.hasOwnProperty("properties")||g.hasOwnProperty("items"))&&(_=!0)}(y&&/^(object|array)$/.test(y.type)&&y.watch||_)&&l.establishObjectBinding(p,m,void 0,void 0,void 0,!!y.watch||void 0)}}this._initProperties=void 0}if(this._initMethods){var b=this._initMethods;for(var A in b)d.$node._methods[A]=b[A];this._initMethods=void 0}if(M.afterConnect(this),d._config&&null!=d._config.clientLifeCycleHooks&&(u=1==d._config.clientLifeCycleHooks||"object"==_typeof(d._config.clientLifeCycleHooks)&&d._config.clientLifeCycleHooks.includes("init")),r&&this.cmpBind(t),e.isLyteWidget){var E=this.component.data.errors;Object.keys(E).length&&(p._error=!0)}!u&&this.hasAttribute("server-rendered")||(this.callback("init"),this.onCallBack("init")),this.registerYields(),p.lyteUnbound&&(H.unbound=!0);var C="";return p.lyteFastRender?(C=this.renderFast(o._dynamicNodes,o._sta,d),requestAnimationFrame((function(){requestAnimationFrame((function(){H.callCC()}))}))):C=this.renderNodes(o._template,o._dynamicNodes,void 0,void 0,void 0,void 0,o._tC,void 0,!0),C}},{key:"initializeMethod",value:function(e,t){var r;for(var o in e.component?r=e.component:e=(r=e).$node,r.methods={},e._methods=r.methods,t)r.methods[o]=t[o]}},{key:"renderComponent",value:function(e,t){var r=e.componentName,o=e.staticAttrs,n=I._registeredComponents[r];if(!n)return"";var i=I._registeredComponents[r].component,s=new n.component;t.component=s,l.getConfig("lazyComponentRegister")&&this.doRegistration(r,n),!0===this.constructor._mutable||l.getConfig("mutable")?s.data=l.mut({}):s.data={};var c=I.getCmpData(s.data),d=i._data?i._data.apply(s):{};for(var p in d)c[p]=d[p].default;c.errors={},s.__data=d;var u=I._registeredComponents[r].component._observedAttributes;for(var f in t.data=t.data||{},o)-1!==u.indexOf(f)&&(t.data[f]=o[f]);var h,m=t.data;if(m)for(var v in m){var y;y=!s.__data[v]||s.__data[v].type===H.getDataType(m[v])||void 0===m[v]&&"boolean"!==s.__data[v].type?m[v]:H.typeCast(m[v],s.__data[v].type),H.handleValidation(c,v,y,s)||(c[v]=y)}if(s.$node={querySelector:w,localName:r},this.initializeMethod(s,i._methods),s.init&&s.init.apply(s),i._callBacks&&(h=i._callBacks.init))for(var _=0;_<h.length;_++)h[_].value.apply(s);if(t.unbound=!0,delete s.$node.querySelector,l.getConfig("lazyComponentRegister")&&!I._registeredComponents[r].component.__isRegistered){var g=l.Component.lazyRegisterScheduler.dequeueTask(r);if(l.performance)var b=performance.now();if(g&&a.isGenerator(g.handler))for(var A,E=g.handler.next();0==E.done;)"function"==typeof(A=E.value)&&A(),E=g.handler.next();if(l.performance){var C=performance.now(),L=l.Component.registerPerf[r];l.Component.registerPerf[r]=(L||0)+(C-b)}}return this.renderFast(I._registeredComponents[r].component._dynamicNodes,I._registeredComponents[r].component._sta,s,t)}},{key:"renderFast",value:function(e,t,r,o){var n,i,a=this;r&&(i=this.component,this.component=r);for(var c=I.getCmpData(this.component.data),d="",p=t,u=t.cc,f=0;f<u.length;f++)if(null!=u[f]){var h=u[f],m=e[h];if(m.dynamicValue){var v=H.getDD(c,m.newDynamicValue);v=null==v||null==v?"":v,d+=l.Security.escape(v)}else if(m.helperInfo){H.ffr=!0;var y=this.processHelper({name:m.helperInfo.name,args:this.processArgs(this,m,[],void 0,void 0,!0)},void 0);H.ffr=!1,y=null==y||null==y?"":y,d+="unescape"===m.helperInfo.name?y:l.Security.escape(y)}else if(m.type)switch(m.type){case"for":var _,g=e[h-1].attr.items;g.dynamicValue?_=H.getDD(c,g.newDynamicValue):g.helperInfo&&(_=this.processHelper({name:g.helperInfo.name,args:this.processArgs(this,g,[],void 0,void 0,!0)},void 0));var b=m._args.item||"item",A=m._args.index||"index",E="";if(_&&_.length){for(var C=c[b],L=c[A],$=0;$<_.length;$++){var w=_[$];c[b]=w,c[A]=$,E+=this.renderFast(m.dynamicNodes,m._sta,void 0,o)}c[b]=C,c[A]=L}d+=E;break;case"forIn":var R,N=e[h-1].attr.object;N.dynamicValue?R=H.getDD(c,N.newDynamicValue):N.helperInfo&&(R=this.processHelper({name:N.helperInfo.name,args:this.processArgs(this,N,[],void 0,void 0,!0)},void 0));var O=m._args.value||"value",T=m._args.key||"key",k="",x=void 0;if(R&&(x=Object.keys(R))){for(var S=c[O],D=c[T],j=0;j<x.length;j++){var M=x[j];c[O]=R[M],c[T]=M,k+=this.renderFast(m.dynamicNodes,m._sta,void 0,o)}c[b]=S,c[A]=D}d+=k;break;case"if":case"switch":var B,F,K=e[h-1].attr.value;if(K.dynamicValue?B=H.getDD(c,K.newDynamicValue):K.helperInfo&&(B=this.processHelper({name:K.helperInfo.name,args:this.processArgs(this,K,[],void 0,void 0,!0)},void 0)),B)F="if"===m.type?"true":B.toString();else if("if"===m.type)F="false";else switch(B){case void 0:F="undefined";break;case null:F="null";break;case!1:F="false";break;case"":F='""'}var U=m.cases[F];if(U)for(;U&&(d+=this.renderFast(U.dynamicNodes,U._sta,void 0,o),U.additional);)U=U.additional.next?m.cases[U.additional.next]:m.default;else(U=m.default)&&U._sta&&(d+=this.renderFast(U.dynamicNodes,U._sta,void 0,o));break;case"attr":for(var V=void 0,q=void 0,z=e.length,W=h+1;W<z;W++){var G=e[W];if("registerYield"!==G.type&&"componentDynamic"!==G.type&&"insertYield"!==G.type&&"component"!==G.type)break;if(("componentDynamic"===e[W].type||"insertYield"===e[W].type||"component"===e[W].type)&&e[W].position.toString()==e[h].position.toString()){if("componentDynamic"!=e[W].type){V=e[W];break}if(P.registeredComponents[e[W].componentName]){V=e[W];break}}}var Y=void 0;V&&(Y="component"!==V.type,n=H.fRC++,q=H.fRP[n]={data:{}}),V&&"component"===V.type||(d=d.substring(0,d.length-11));var J,Q=m.attr,X={},Z=function(){if(Q[ee].dynamicValue){var e=Q[ee].newDynamicValue?H.getDD(c,Q[ee].newDynamicValue):a.get(Q[ee].dynamicValue);q?(q.data[Q[ee].camelCase]=e,"string"==typeof e&&Y&&(e=a.formatValue(ee,e),d=d+e+" ")):(e=a.formatValue(ee,e),d=d+e+" ")}else if(Q[ee].helperInfo)if("action"===Q[ee].helperInfo.name){var t,r=Q[ee].helperInfo.args[0];r.startsWith('"')||r.startsWith("'")?t=r.substring(1,r.length-1):(s.warn("Deprecation warning. Action name "+r+" must be in quotes"),t=r);var n=a.processArgs(a,Q[ee],[],"__lyteEvent__","__lyteNode__"),i=Q[ee].globalEvent||-1!==Q[ee].name.indexOf("-")?Q[ee].name:Q[ee].name.substr(2);X[i]={name:t,args:Q[ee].helperInfo.args,actArgs:n,globalEvent:!!Q[ee].globalEvent,skipArgProcessing:!0}}else if("method"===Q[ee].helperInfo.name){if(o?o.methods:a.component.methods,q){var l=q.methods=q.methods||{},p=o?o.component:a.component,u=a.processArgs(a,Q[ee],[],"__lyteEvent__","__lyteNode__");J=function(){this.$node;var e=u.slice(1),t=u[0],r=Array.from(arguments),o=e.concat(r);return p.$node._methods[t].apply(p,o)},l[Q[ee].camelCase]=J}}else{var f=a.processHelper({name:Q[ee].helperInfo.name,args:a.processArgs(a,Q[ee],[],void 0,void 0,!0)},void 0);q?(q.data[Q[ee].camelCase]=f,"string"==typeof f&&Y&&(f=a.formatValue(ee,f),d=d+f+" ")):(f=a.formatValue(ee,f),d=d+f+" ")}else if(Q[ee].hookNode){var h=a.formatValue(ee,Q[ee].stringValue,!0);d=d+h+" "}};for(var ee in Q)Z();if(Object.keys(X).length){var te=H.fRC++;d=d+"lyteaction="+te+" ",H.fRP[te]=X,X.componentName=this.component.$node.localName||"undefined"}q&&"component"!==V.type&&"insertYield"!==V.type&&(d=d+"_lyteprop="+n+" "),m.attrHandling||(p[f+1]=p[f+1].substr(1),m.attrHandling=!0);break;case"insertYield":var re=void 0!==n?H.fRP[n]:void 0;re&&delete H.fRP[n],n=void 0;var oe=void 0,ne=m.yieldName||re.data.yieldName;re&&delete re.data.yieldName;var ie=void 0;if(o&&o.yields)oe=o.yields[ne],ie=o._yieldCallee;else{if(!(oe=this._yields[ne]))break;ie=oe._callee}if(oe){var ae=void 0,se=void 0;ie instanceof HTMLElement?ae=ie:(ae=this,se=this.component,this.component=ie.component);var le={},ce=[],de=I.getCmpData(ae.component.data);if(oe._cx&&H.adCx(oe,ce),re)for(var pe in re.data)le[pe]=de[pe],de[pe]=re.data[pe];var ue=ae.component;for(var fe in i&&i.$node==ie&&(ue=i),d+=ae.renderFast(oe.dynamicNodes||oe._dynamicNodes,oe._sta,ue,ie),le)de[fe]=le[fe];oe._cx&&H.rmCx(oe,ce),se&&(ae.component=se)}break;case"component":if(void 0!==n){var he=H.fRP[n],me=he.data.componentName;me&&(P.registeredComponents[me]?(d=d+"<"+me+(s.isWidgetBuild?" lyte-widget ":"")+" _lyteprop="+n+">",n=void 0,d=(d+=this.renderComponent({componentName:me},he,c))+"</"+me+">"):d+="component not registered")}break;case"componentDynamic":var ve=void 0!==n?H.fRP[n]:{};n=void 0,d+=this.renderComponent(m,ve,c);break;case"registerYield":var ye=void 0;void 0!==n?ye=H.fRP[n]:(n=H.fRC++,ye=H.fRP[n]={}),ye.yields=ye.yields||{},ye.yields[m._args["yield-name"]]=m,ye._yieldCallee||(ye._yieldCallee=o||{component:this.component})}else d+=p[f]}else d+=p[f];return r&&(this.component=i),d}},{key:"formatValue",value:function(e,t,r){var o,n=_typeof(t);""===t&&(n="undefined");var i="src"==e||"href"==e;switch(n){case"boolean":return t?e:"";case"object":return o=void 0!==Record&&t instanceof Record?JSON.stringify(t.$.toJSON()):JSON.stringify(t),e+'="'+(i?o:l.Security.escape(o))+'"';case"undefined":return e;default:return"@class"==e&&(e="lyte-directive-class class"),e+'="'+(i?t:l.Security.escape(t))+'"'}}},{key:"renderNodes",value:function(t,r,o,n,i,a,c,d,p){var u,f=this;n=n||{};var h=this.constr,m=!1;s._ms||!t?(m=!0,u=H.getContentForIE(c,h)):t.hasAttribute("depth")?(m=!0,u=H.getContentForIE(t,h)):u=t.content.cloneNode(!0,"lyte");for(var v,y=[],_=[],A=(I.getCmpData(this.component.data),new Map),E=function(){var t=r[C],a=t.type,c=t.position,h=u;if(h=Z(h,c),t.trans&&(h._hooksPresent=!0),r._cache||f.registeredProp&&f.registeredProp.length||(r._cache={}),"componentDynamic"===a){if(s.isWidgetBuild&&h.setAttribute("lyte-widget",""),o&&(h._parentHelper=o),n.node?h._cx=n:o&&(h._cx=o._cx),H.renderInParent(h),e.isLyteWidget){M.connect(h,!0);var m=h.localName;!e.disableLyteControlQuery&&e._lyteUtilFunctions&&e._lyteUtilFunctions[m]&&h.__renderInParent&&e._lyteUtilFunctions[m].forEach((function(t){h[t]=_asyncToGenerator(_regenerator().m((function r(){var o,n,i,a,s=arguments;return _regenerator().w((function(r){for(;;)switch(r.n){case 0:return o=$Lt,n=$Lt,r.n=1,e.getDetailsFromParent(h,t,!1,Array.from(s));case 1:return i=r.v,a=n._aW.call(n,i),r.a(2,o._aR.call(o,a))}}),r)})))}))}}else if("text"===a)f.bindNode(h,void 0,o,n,r[C],_,i,void 0,r._cache,a,void 0,A);else if("attr"===a){if(h._attributeDetails=t.attr,"LYTE-YIELD"===h.nodeName){h._callee=f,h.component={},h.component.data={},defProp(h.component.data,"__component__",{value:h,configurable:!0,writable:!0,enumerable:!1}),h._properties={};for(var b=0;b<h.attributes.length;b++){var E=h.attributes[b];"is"!==E.nodeName&&"yield-name"!==E.nodeName&&(h._properties[H.String.toCamelCase(E.nodeName)]={})}}var L=[],$=[];for(var P in t.attr){var w=t.attr[P];w._depthTemp=t._depthTemp;var R=P,N=void 0;if(w&&(w.dynamicValue||w.helperInfo)){n.node?h._cx=n:o&&(h._cx=o._cx);var O=void 0,T=void 0;if(w.helperInfo&&"action"===w.helperInfo.name){h._boundEvents=h._boundEvents||{},T=(O=w.helperInfo.args[0]).startsWith('"')||O.startsWith("'")?O.substring(1,O.length-1):O;var k=w.globalEvent||-1!==R.indexOf("-")?R:R.substr(2);h._boundEvents[k]={name:T,args:w.helperInfo.args},Math.floor(1e3*Math.random())}w.globalEvent||(h.hasAttribute(R)||h.setAttribute(R,"{{dummy}}"),(N=f.bindNode(h.attributes.getNamedItem(R),L,o,n,w,void 0,i,void 0,r._cache,a,C))!==h.attributes.getNamedItem(R)&&(h._removedAttributes=h._removedAttributes||{},h._removedAttributes[R]=N))}w.hookNode&&$.push({attr:w,node:N})}M.addNodeLazy($,f,t,h,o,d,n),t.attr&&Object.keys(t.attr).length&&(h._callee=f);for(var x=0;x<L.length;x++)h.removeAttribute(L[x])}else if(/^(for|forIn|component)$/.test(a)){var S;switch((e.isLyteWidget||e.__lyteEnablePromise)&&(h._cases=t.cases),n.node?h._cx=n:o&&(h._cx=o._cx),h._dynamicNodes=t.dynamicNodes,s._ms&&(h._tC=t.templateContent),t.actualTemplate&&(h._tC=t.actualTemplate),h._hiddenTemplate||(h._hiddenTemplate=[]),a){case"for":h._ht=t._ht,S=f.updateForHelper(h,{type:"default"},n.node?n:void 0,i,t._sta,void 0,p);break;case"forIn":h._ht=t._ht,S=f.updateForInHelper(h,{type:"default"},n.node?n:void 0,i,void 0,p);break;case"component":S=f.updateDynamicComponent(h,!1,n.node?n:void 0,i,C,o)}S&&y.push(S)}else if(/^(if|switch)$/.test(a)){h._cases=t.cases,h._default=t.default,h._ht=t._ht,n.node?h._cx=n:o&&(h._cx=o._cx),t.actualTemplate&&(h._tC=t.actualTemplate,h._origTemplate||(s._ie?h._origTemplate=g("template"):h._origTemplate=t._depthTemp.cloneNode(!0),h.hasAttribute("value")&&h._origTemplate.setAttribute("value",h.getAttribute("value")))),h._hiddenTemplate||(h._hiddenTemplate=[]);var D=f.updateSwitchHelper(a,h,n.node?n:void 0,void 0,i,d,void 0,A);if(D){if(y.push(D),D.toAppendMain.querySelector("template[is=break]"))return h._isStopped="break",u=l.Compile.getTrimmedContent(u,t.position,void 0),v=t.position,0;if(D.toAppendMain.querySelector("template[is=continue]"))return h._isStopped="continue",u=l.Compile.getTrimmedContent(u,t.position,void 0),0}}else if("registerYield"===a)n.node?h._cx=n:o&&(h._cx=o._cx),h._dynamicNodes=t.dynamicNodes,h._sta=t._sta,h._ht=t._ht,s._ms&&(h._tC=t.templateContent),h._callee=f;else if("insertYield"===a){o&&(h._parentHelper=o),n.node?h._cx=n:o&&(h._cx=o._cx),h._hiddenTemplate||(h._hiddenTemplate=[]),h.component=h.component||{data:{}},h._properties=h._properties||{},h.component=h.component||{data:{}},h._properties=h._properties||{};for(var j=I.getCmpData(h.component.data),B=0;B<h.attributes.length;B++){var F=h.attributes[B],K=F.name,U=F.value;"yield-name"!==K&&(h._properties&&!h._properties[K]&&(h._properties[K]={}),h._attributeDetails&&!h._attributeDetails[K]&&(j[K]=U))}f.updateYield(h,!1,n.node?n:void 0)}},C=0;C<r.length&&0!==E();C++);r._cache=void 0;for(var L=0;L<_.length;L++){var $=_[L].dynamicPositions,P=$.initialNode,w=$.dynamicNodeValue,R=w.childNodes.length;R||(w.appendChild(document.createTextNode("")),R=1);var N=w.childNodes[0];if(s._rwpf&&"#document-fragment"===P.parentNode.nodeName){for(;w.childNodes.length;)b(P.parentNode,w.childNodes[0],P);P.remove()}else P.replaceWith.apply(P,w.childNodes);_[L].dynamicPositions={startingNode:N,length:R}}return A.size&&A.forEach((function(e,t){e.pN.insertBefore(t,e.cN),e.cN.nextSibling?e.pN.insertBefore(document.createElement("textend"),e.cN.nextSibling):e.pN.appendChild(document.createElement("textend"))})),v&&((a=a||{}).stop=!0),o?n.type?(o._helpers[n.itemIndex]=y,m&&(u=h.createDocFragment1(u)),u):(o._helpers=o._helpers||[],o._helpers.push.apply(o._helpers,y),m&&(u=h.createDocFragment1(u)),u):(this.executeBlockHelpers(y),m&&(u=h.createDocFragment1(u)),u)}},{key:"executeBlockHelpers",value:function(e,t){for(var r=0;r<e.length;r++){var o=e[r].lastNode,n=o.parentNode;o._placeHolder&&(n=(o=o._placeHolder).parentNode),b(n,e[r].toAppendMain,o),e[r]=e[r].lastNode}}},{key:"updateBlockHelpers",value:function(e,t){for(var r=0;r<e.length;r++)switch(e[r].getAttribute("is")){case"for":this.updateForHelper(e[r],{type:"default"},t);break;case"if":this.updateSwitchHelper("if",e[r],t);break;case"forIn":this.updateForInHelper(e[r],{type:"default"},t);break;case"switch":this.updateSwitchHelper("switch",e[r],t);break;case"component":this.updateDynamicComponent(e[r],!1,t);break;case"insertYield":break;case"yield":case"registerYield":t&&(e[r]._cx=t);break;default:"LYTE-YIELD"===e[r].tagName&&this.updateYield(e[r],!1,t)}}},{key:"attributeChangedCallback",value:function(e,t,r){this._attributeChangedCallback(e,t,r)}},{key:"_attributeChangedCallback",value:function(e,t,r){if(!this.__lyteIgnore&&!this.__v3lyteIgnore){this.constructor;var o=this.component.constructor;if(!o._observedMethodAttributes||!o._observedMethodAttributes[e]){var n=H.String.toCamelCase(e),i=H.customPropHandlers.indexOf(n);if(-1===i){if(t!==r){var a=this.attributes.getNamedItem(e);if(a){if(a.__lyteIgnore)return void(this.attributes.getNamedItem(e).__lyteIgnore=!1)}else if(this["__"+e])return void(this["__"+e]=!1);var l=this.component,c=l.__data[n];if(c&&c.type){var d=c.type;if("string"!==d){var p={attr:e,tagName:this.tagName};if(r=H.typeCast(r,d,p),p.isError)return void s.warn("data type of the value provided for attribute "+e+" of "+this.tagName+" is not valid")}}var u=l.data;u[n]!==r?this.set(n,null===r?void 0:r,void 0,void 0,!0):H.clearError(u,n)}}else{var f=H.customPropHandlers[i],h=r;if(h)try{for(var m in h=JSON.parse(h)){var v=f+H.String.upperCaseFirstLetter(m);this.set(v,h[m])}}catch(t){s.error("LC001",e)}}}}}},{key:"removeHelpersSpecificIndex",value:function(e,t,r,o){var n=e.getAttribute("is");if(e._helpers[t])for(var i=0;i<e._helpers[t].length;i++)this.removeHelpers(e._helpers[t][i],void 0,void 0,t,e,o);if(M.removeAll(n,this,e,t,r,t,e,o),B.rmHelpersSpecificIndex(e,t),e._forContent[t]){for(var a=0;a<e._forContent[t].length;a++)e._forContent[t][a].remove();var s=this;Object.keys(e._items[t]._dynamicProperty).forEach((function(t){if(e._dynProps[t]--,!e._dynProps[t]){var r=s.getProperty(t);r._helperNodes&&r._helperNodes[f](e)}})),e._items[t]={_dynamicProperty:{},itemProperty:{},indexProperty:{},propProperty:{},propPropertyDyn:{},propNodes:{}}}}},{key:"removeHelpers",value:function(t,r,o,n,i,a){var s=t.getAttribute("is");o||(t.remove(),delete("component"===t.getAttribute("is")?this.__dc:this.__h)[t.__lyteId]);var l="delete",c=[];if(H.adCx(t,c),t._forContent){if("for"===t.getAttribute("is")){if(t._helpers)for(var d=0;d<t._helpers.length;d++){for(var p=0;p<t._helpers[d].length;p++)this.removeHelpers(t._helpers[d][p],void 0,void 0,n,i,a);t._helpers[d]=[]}for(var u=0;u<t._forContent.length;u++)for(var f=0;f<t._forContent[u].length;f++)t._forContent[u][f].remove();var h=t.getAttribute("item");if(t._items.length){for(var m=t._items[0].itemProperty,v=0;v<t._items.length;v++){var y=t._items[v]._dynamicProperty;for(var _ in y){var g=this.getProperty(_);g._helperNodes&&g._helperNodes[l](t)}}if(m)for(var b=0;b<t._items.length;b++)this.removeBindings(_defineProperty({},h,t._items[b].itemProperty),_defineProperty({},h,t._attributes.items[b]))}if(M.removeAll(s,this,t,void 0,void 0,n,i,a),!r&&t._actualBinding){t._attributes.items&&t._attributes.items._bindings&&t._actualBinding._createdBinding&&t._attributes.items._bindings[l](t._actualBinding),t._actualBinding._forHelpers&&t._actualBinding._forHelpers[l](t);var A=t._removedAttributes.items._multipleProperty;t._removedAttributes&&t._removedAttributes.items&&!t._removedAttributes.items.helperValue&&A&&A[0].actProp._forHelpers&&A[0].actProp._forHelpers[l](t)}t._items=[]}else{if(t._helpers)for(var E=Object.keys(t._helpers),C=0;C<E.length;C++){for(var L=0;L<t._helpers[E[C]].length;L++)this.removeHelpers(t._helpers[E[C]][L],void 0,void 0,n,i,a);t._helpers[E[C]]=[]}for(var $ in t._forContent)for(var P=0;P<t._forContent[$].length;P++)t._forContent[$][P].remove();var w=t._items,R=t.getAttribute("key");for(var N in w){var O=w[N],T=O.itemProperty,k=O._dynamicProperty;for(var x in k){var S=this.getProperty(x);S._helperNodes&&S._helperNodes[l](t)}T&&this.removeBindings(_defineProperty({},R,t._items[N].itemProperty),_defineProperty({},R,t._attributes.object[N]))}r||(t._actualBinding&&(t._attributes.object&&t._attributes.object._bindings&&t._actualBinding._createdBinding&&t._attributes.object._bindings[l](t._actualBinding),t._actualBinding._forHelpers&&t._actualBinding._forHelpers[l](t)),A=t._removedAttributes.object._multipleProperty,t._removedAttributes.object&&!t._removedAttributes.object.helperValue&&A&&A[0].actProp._forHelpers&&A[0].actProp._forHelpers[l](t),t._propBindingObject&&t._attributes.object&&t._attributes.object._bindings&&t._attributes.object._bindings[l](t._propBindingObject)),M.removeAll(s,this,t,void 0,void 0,n,i,a),t._items={}}if((e.isLyteWidget||e.__lyteEnablePromise)&&t._promiseContent)for(var D=0;D<t._promiseContent.length;D++)t._promiseContent[D].remove();B.forRmHelpers(t)}else if(t._caseContent||t._yieldContent){if(t._helpers){for(var j=0;j<t._helpers.length;j++)this.removeHelpers(t._helpers[j],void 0,void 0,n,i,a);t._helpers=[]}if(t._caseContent){for(var I=0;I<t._caseContent.length;I++)t._caseContent[I].remove();for(var F in t._dynamicProperty)if(t._dynamicProperty[F].isActualNode)t._dynamicProperty[F].isActualNode._helperNodes[l](t);else{var K=this.getProperty(F)._helperNodes;K&&K[l](t)}t._dynamicProperty={}}else{for(var U=0;U<t._yieldContent.length;U++)t._yieldContent[U].remove();t._dynamicProperty={}}B.ifRmHelpers(t);var V=H.pendingViewPortElements;if(t._inPve&&V.length){var q=V.indexOf(H.getFakeTemplate(t));-1!=q&&V.splice(q,1)}M.removeAll(s,this,t,void 0,void 0,n,i,a)}else if(t._renderedComponent)for(var z in t._renderedComponent){var W=t._renderedComponent[z];W&&(H.hDiv.content.contains(W)&&W.constructor.prototype._disconnectedCallback.call(W),W.remove(),t._renderedComponent[z]=null)}H.rmCx(t,c)}},{key:"updateYield",value:function(e,t,r){e._specialNodes||(e._specialNodes=[]);var o=this.constructor;this.component.constructor,e._callee||(e._callee=this);var n=e._callee._yields[e.getAttribute("yield-name")];if(n){e._registerYield=n;var i=n._callee||e._callee._callee;if(i){n._callee||(n._callee=i),e._dynamicProperty=e._dynamicProperty||{};var a={},l=[];H.adCx(n,l);var c=I.getCmpData(i.component.data);Object.keys(e._properties).forEach((function(t){a[t]={},a[t].value=c[t],a[t].property=i._properties[t],i._properties[t]=e._properties[t];var r=I.getCmpData(e.component.data);c[t]=r[t]})),s._ms||!n._ht||n._htA||(n._htA=!0,n.content.append(n._ht.content.cloneNode(!0)));var d=e._callee,p=i.renderNodes(n,n._dynamicNodes||[],e,{node:e},!0,void 0,n._tC,d);if(!e.component.data.lyteUnbound){var u=I.getCmpData(e.component.data);H.establishBindings(e._properties,u)}i.executeBlockHelpers(e._helpers),Object.keys(e._properties).forEach((function(e){c[e]=a[e].value,i._properties[e]=a[e].property})),H.rmCx(n,l),e.appendChild(p)}else{if(s._ms){var f=g("div");f.innerHTML=n.outerHTML,s._ie&&(f.firstChild.innerHTML=n.innerHTML);var h=f.childNodes[0];o.splitTextNodes(h),h=o.createDocFragment1(h),e.appendChild(h)}else e.appendChild(n.content.cloneNode(!0,"lyte"));e._helpers=[]}}}},{key:"updateDynamicComponent",value:function(e,t,r,o,n,i){var a;e._specialNodes||(e._specialNodes=[]),e._callee=this;var s=e.hasAttribute("lyte-keep-alive");if(!e._placeHolder){var l=document.createTextNode("");H.replaceWithPf(e,l),e._placeHolder=l,l._helper=e,e._placeHolder._actTemplate=e,H.tDiv.content.appendChild(e),this._removedTemplate||(this._removedTemplate=[]),this._removedTemplate.push(e)}if(!e._renderedComponent){e._renderedComponent={};var d=H.createLyteId(this);this.__dc[d]=e,e.__lyteId=d}e._cx=r||e._cx,e._dynamicProperty=e._dynamicProperty||{};var p=e.getAttribute("component-name")||(e._attributes?e._attributes["component-name"]:void 0);if(p){var u,f=!1;if(t){if(s&&P._setIgnoreDisconnect(!0),e._renderedComponent[e._currentComponent]){var h=e._renderedComponent[e._currentComponent];s?H.hDiv.content.appendChild(h):h.remove()}if(P._setIgnoreDisconnect(!1),s||(e._dynamicProperty={}),e._renderedComponent[p]&&s)u=e._renderedComponent[p];else{var m=!1;this.__widget&&(c.__widget=m=!0),u=g(p),m&&(c.__widget=!1),f=!0}}else{var v=!1;this.__widget&&(c.__widget=v=!0),u=g(p),v&&(c.__widget=!1),f=!0}if(!s&&e._currentComponent&&(e._renderedComponent[e._currentComponent]=null),f){for(var y=0;y<e.attributes.length;y++)"is"!==e.attributes[y].name&&"component-name"!==e.attributes[y].name&&"lyte-keep-alive"!==e.attributes[y].name&&u.setAttribute(e.attributes[y].name,e.attributes[y].value);if(e._attributes)for(var _ in e._attributes)"component-name"!==_&&u.setData(H.String.toCamelCase(_),e._attributes[_]);var A=this.renderNodes(e,e._dynamicNodes,e,void 0,o,void 0,e._tC);u.appendChild(A)}return f&&(u._toRegEvnts=e._toRegEvnts),t?(P._setIgnoreDisconnect(!0),e._placeHolder?b(e._placeHolder.parentNode,u,e._placeHolder):b(e.parentNode,u,e),P._setIgnoreDisconnect(!1)):a={toAppendMain:u,lastNode:e},e._renderedComponent[p]=u,e._currentComponent=p,u._callee=this,u._actions=e._actions,u.setMethods(e._initMethods),u._attributeDetails=e._attributeDetails,u._boundEvents=e._boundEvents,u._cx=e._cx,a}}},{key:"beforeUpdateFor",value:function(e,t,r,o){var n=t._items[o].propProperty;n[r]||(n[r]={}),e._properties[r]||(e._properties[r]={}),t._properties=_defineProperty({},r,r);var i=n[r];n[r]=e._properties[r],e._properties[r]=i}},{key:"afterUpdateFor",value:function(e,t,r,o){var n=o.itemIndex,i=t._items[n].propProperty,a=i[r];i[r]=this.getProperty(r),e._properties[r]=a}},{key:"updateForHelper",value:function(t,r,o,n,i,a,l){var c=t.hasAttribute("has-child");if(t._specialNodes||(t._specialNodes=[]),t._propNodes||(t._propNodes={}),"TEMPLATE"!==t.tagName){if(Object.keys(t).forEach((function(e){"innerHTML"!==e&&"innerText"!==e&&(t._origTemplate[e]=t[e])})),s._ie){var d=g("div");d.innerHTML=t._tC,t._origTemplate.innerHTML=d.children[0].innerHTML,this.constr.splitTextNodes(t._origTemplate),t.hasAttribute("depth")&&t._origTemplate.setAttribute("depth",t.getAttribute("depth"))}var p=t._origTemplate._placeHolder=document.createTextNode("");t._origTemplate.setAttribute("item",t.getAttribute("item")),t._origTemplate.setAttribute("index",t.getAttribute("index")),(e.isLyteWidget||e.__lyteEnablePromise)&&t.hasAttribute("has-child")&&t._origTemplate.setAttribute("has-child",t.getAttribute("has-child")),t.hasAttribute("unbound")&&t._origTemplate.setAttribute("unbound","true"),H.replaceWithPf(t,t._origTemplate._placeHolder),(t=H.replaceWithOrigTemplate(t)).setAttribute("is","for"),H.apdNode(t,this),p._helper=t}else if(!t._placeHolder){var u;u=document.createTextNode(""),H.replaceWithPf(t,u),t._placeHolder=u,u._helper=t,H.apdNode(t,this)}t._sta=t._sta||i;var f=this;if(t._callee=this,t._attributes=t._attributes||{},!("update"!==r.type||t._currentItems!==t._attributes.items||r&&r.force))return{};t._cx=o||t._cx;var h=t.getAttribute("index");h||(t.setAttribute("index","index"),h="index");var m=t.getAttribute("item");m||(t.setAttribute("item","item"),m="item"),t.hasAttribute("dir-obj")&&(t._dirObj=JSON.parse(t.getAttribute("dir-obj")));var v=I.getCmpData(f.component.data),y=v[m],A=v[h],E=f._properties[m],C=f._properties[h];f._properties[m]=f._properties[h]={};var L,$,P=t._attributes.items,w=(t.content,t._dynamicNodes),R=t;t._items||(t._items=[]),t._dynProps=t._dynProps||{};var N,O=r.firstIndex,T=r.secondIndex,k=r.thirdIndex,x=O+T,S=!0,D=0;if(r)switch(r.type){case"remove":L=O,D=O;for(var j=O,B=T;B>0;B--,j++)this.removeHelpersSpecificIndex(t,j);M.for.beforeUpdate(t,[O,T],[],[]);for(var F=O+T;F<t._items.length;F++)t._items[F]._cx.itemIndex=t._items[F]._cx.itemIndex-T;t._items.splice(O,T),t._helpers.splice(O,T),M.for.afterUpdate(t,[O,T],[]),t._forContent.splice(O,T),t._specialNodes&&t._specialNodes.splice(O,T);break;case"insert":$=O,L=T,D=O+T,t._forContent[O]&&(R=t._forContent[O][0]);for(var K=[],U=[],V=[],q=[],z=T,W=O;z>0;z--,W++)K.push([]),U.push({}),V.push([]),q.push({__dummy:!0});M.for.beforeUpdate(t,[O,0],q,U),t._helpers.splice.apply(t._helpers,[O,0].concat(K)),t._items.splice.apply(t._items,[O,0].concat(U)),M.for.afterUpdate(t,[O,0],q);for(var G=O+T;G<t._items.length;G++)t._items[G]._cx.itemIndex=t._items[G]._cx.itemIndex+T;t._forContent.splice.apply(t._forContent,[O,0].concat(V)),t._specialNodes&&t._specialNodes.splice.apply(t._specialNodes,[O,0].concat(V));break;case"replace":$=O,L=T,D=O+T,this.removeHelpersSpecificIndex(t,O);for(var Y=[],J=[],Q=[],X=[],Z=T,ee=O;Z>0;Z--,ee++)Y.push([]),Q.push([]),J.push({}),X.push({__dummy:!0});M.for.beforeUpdate(t,[r.firstIndex,1],X,J),_(),t._forContent[O+1]&&(R=t._forContent[O+1][0]),t._helpers.splice.apply(t._helpers,[O,1].concat(Y)),t._items.splice.apply(t._items,[O,1].concat(J)),M.for.afterUpdate(t,[r.firstIndex,1],X);for(var te=O+T;te<t._items.length;te++)t._items[te]._cx.itemIndex=t._items[te]._cx.itemIndex+T-1;t._forContent.splice.apply(t._forContent,[O,1].concat(Q)),t._specialNodes&&t._specialNodes.splice.apply(t._specialNodes,[O,1].concat(Q)),1==r.secondIndex&&(S=!1);break;case"splice":$=O,L=T,D=O+T;for(var re=[],oe=[],ne=[],ie=[],ae=T,se=O;ae>0;ae--,se++)re.push([]),ne.push([]),oe.push({}),ie.push({__dummy:!0});for(var le=k,ce=0;le>0;le--,ce++)this.removeHelpersSpecificIndex(t,O+ce);M.for.beforeUpdate(t,[O,k],ie,oe),_(),t._forContent[O+k]&&(R=t._forContent[O+k][0]),t._helpers.splice.apply(t._helpers,[O,k].concat(re)),t._items.splice.apply(t._items,[O,k].concat(oe)),M.for.afterUpdate(t,[O,k],ie);for(var de=O+T;de<t._items.length;de++)t._items[de]._cx.itemIndex=t._items[de]._cx.itemIndex+T-k;t._forContent.splice.apply(t._forContent,[O,k].concat(ne)),t._specialNodes&&t._specialNodes.splice.apply(t._specialNodes,[O,k].concat(ne)),r.secondIndex==r.thirdIndex&&(S=!1);break;case"update":t.getAttribute("item");for(var pe=0;pe<t._items.length;pe++)this.removeHelpersSpecificIndex(t,pe),M.for.update(t);t._items=[];case"default":t._forContent=[],t._specialNodes=[],t._propNodes={},t._helpers=[],$=0,L=P?P.length:0,D=P?P.length:0;break;default:s.error("Error in updateForHelper")}R||(R=t),R!=t&&t._helpers.length>0&&(r.type,1)&&(R=H.findLastNodeL(R,x,t));var ue,fe=!1,he=H.unbound;(t.hasAttribute("unbound")||t._attributes&&t._attributes.unbound&&"false"!==t._attributes.unbound)&&(fe=!0,H.unbound=!0),!t._fRender&&("lyteFastRender"==t.getAttribute("unbound")||t._attributes&&"lyteFastRender"==t._attributes.unbound)&&(t._fRender=!0),t._currentItems=P,(!s._ms&&L-$>0||(e.isLyteWidget||e.__lyteEnablePromise)&&P instanceof Promise)&&t._ht&&!t._htA&&(t.content.append(t._ht.content.cloneNode(!0)),t._htA=!0);var me={data:{},prop:{},node:{}},ve={data:{},prop:{},node:{}},ye=t;if("remove"!==r.type){var _e="",ge=[],be=_();if(c&&(e.isLyteWidget||e.__lyteEnablePromise)){var Ae,Ee=!0;switch(P instanceof Promise?P.__lyte.status:"resolved"){case"init":ue="__lyteAwait__";break;case"resolved":ue="true",Ee=!1;break;case"rejected":ue="__lyteFail__"}t._promiseContent&&t._promiseContent.length&&this.removeHelpers(t,void 0,!0),ye=t.content.querySelector("[case="+ue+"]"),Ae=t._cases[ue],ye._ht=Ae._ht,ye._ht&&!ye._htA&&(ye.content.append(ye._ht.content.cloneNode(!0)),ye._htA=!0),w=Ae.dynamicNodes,Ee&&this.renderPromiseNodes(ye,w,t,{},n,void 0,t._tC,a,be)}M.beforeDirObj(t,me,ve);for(var Ce=$,Le=L;Le>0;Ce++,Le--){t._helpers[Ce]=[],t._specialNodes[Ce]=[],t._items[Ce]={_dynamicProperty:{},itemProperty:{},indexProperty:{},propProperty:{},propPropertyDyn:{},propNodes:{}},v[m]=P[Ce],v[h]=Ce;var $e={};$e[m]={},$e[m]._data=P[Ce],$e[m]._dyn=[m],$e[h]={},$e[h]._data=Ce,$e[h]._dyn=[h],f._properties[m]={},f._properties[h]={};var Pe={itemValue:m,itemIndex:Ce,type:"for",node:t,indexValue:h};t._items[Ce]._cx=Pe;var we={},Re=void 0;t._fRender?_e+=this.renderFast(w,t._sta,this.component):(w._cache=$e,Re=this.renderNodes(ye.hasAttribute("depth")&&ye._depthTemp?ye._depthTemp:ye,w,t,Pe,n,we,t._tC,a));for(var Ne=Object.keys(t._items[Ce]._dynamicProperty),Oe=0;Oe<Ne.length;Oe++){var Te=Ne[Oe];t._dynProps[Te]?t._dynProps[Te]++:t._dynProps[Te]=1}if(t._items[Ce].itemProperty=this.getProperty(m),t._items[Ce].indexProperty=this.getProperty(h),H.unbound||H.establishBindings(_defineProperty({},m,t._items[Ce].itemProperty),_defineProperty({},m,t._attributes.items[Ce])),t._fRender?ge.push(t._forContent[Ce]=[]):t._forContent[Ce]=Array.from(Re.childNodes),this.executeBlockHelpers(t._helpers[Ce],t),t._fRender||be.appendChild(Re),we.stop)break}if(t._fRender){var ke,xe=document.createElement("template");if(xe.innerHTML=_e,be.appendChild(xe.content),H.processAction(be),s._ie){ke=[];for(var Se=be.childNodes,De=0;De<Se.length;De++)1==Se[De].nodeType&&ke.push(Se[De])}else ke=be.children;for(De=0;De<ge.length;De++)ge[De].push(ke[De]);requestAnimationFrame((function(){requestAnimationFrame((function(){H.callCC()}))}))}H.unbound=he,"default"===r.type?N={toAppendMain:be,lastNode:R}:R._placeHolder?b(R._placeHolder.parentNode,be,R._placeHolder):b(R.parentNode,be,R),!fe&&t._removedAttributes&&t._removedAttributes.items&&!t._removedAttributes.items.helperValue&&t._removedAttributes.items._multipleProperty&&H.establishBindings({items:t._removedAttributes.items._multipleProperty[0].actProp},{items:P})}if(H.unbound=he,S)for(var je=D;je<t._items.length;je++)t._items[je].indexProperty&&H.affectChanges(t._items[je].indexProperty);return v[m]=y,v[h]=A,f._properties[m]=E,f._properties[h]=C,M.afterDirObj(t,me,ve),M.afterRender(t,this,ve,r,l),t._currentItems=P,N}},{key:"renderPromiseNodes",value:function(e,t,r,o,n,i,a,s,l){var c=this.renderNodes(e,t,void 0,{},n,void 0,a,s);r._promiseContent=[];for(var d=[c],p=0;p<d.length;p++)11==d[p].nodeType?r._promiseContent=r._promiseContent.concat(Array.from(d[p].childNodes)):r._promiseContent.push(d[p]),l.append(d[p])}},{key:"updateForInHelper",value:function(t,r,o,n,i,a){var l=t.hasAttribute("has-child");if(t._specialNodes||(t._specialNodes=[]),t._propNodes||(t._propNodes={}),"TEMPLATE"!==t.tagName){if(Object.keys(t).forEach((function(e){"innerHTML"!==e&&"innerText"!==e&&(t._origTemplate[e]=t[e])})),s._ie){var c=g("div");c.innerHTML=t._tC,t._origTemplate.innerHTML=c.children[0].innerHTML,this.constr.splitTextNodes(t._origTemplate),t.hasAttribute("depth")&&t._origTemplate.setAttribute("depth",t.getAttribute("depth"))}var d=t._origTemplate._placeHolder=document.createTextNode("");t._origTemplate.setAttribute("key",t.getAttribute("key")),t._origTemplate.setAttribute("value",t.getAttribute("value")),t.hasAttribute("unbound")&&t._origTemplate.setAttribute("unbound","true"),(e.isLyteWidget||e.__lyteEnablePromise)&&t.hasAttribute("has-child")&&t._origTemplate.setAttribute("has-child",t.getAttribute("has-child")),H.replaceWithPf(t,t._origTemplate._placeHolder),(t=H.replaceWithOrigTemplate(t)).setAttribute("is","forIn"),H.apdNode(t,this),d._helper=t}else if(!t._placeHolder){var p;p=document.createTextNode(""),H.replaceWithPf(t,p),t._placeHolder=p,H.apdNode(t,this),p._helper=t}var u=this;if(t._callee=this,t._attributes=t._attributes||{},!("update"!==r.type||t._currentObject!==t._attributes.object||r&&r.force))return{};o=o||t._cx,t._cx=o;var f=t.getAttribute("key");f||(f="key",t.setAttribute("key","key"));var h=t.getAttribute("value");h||(h="value",t.setAttribute("value","value")),M.setDirObj(t);var m=I.getCmpData(u.component.data),y=m[f],A=m[h],E=u._properties[f],C=u._properties[h];u._properties[f]=u._properties[h]={};var L,$=t._attributes.object,P=(t.content,t._dynamicNodes),w=t,R=[];if(t._items||(t._items={}),t._dynProps=t._dynProps||{},r)switch(r.type){case"delete":this.removeHelpersSpecificIndex(t,r.property,void 0,r.type),M.forIn.delete(t,r);var N=t._keysArray.indexOf(r.property);N>-1&&t._keysArray.splice(N,1),t._helpers&&delete t._helpers[r.property],delete t._propBindingObject[r.property],t._forContent[r.property]=null,delete t._forContent[r.property];break;case"add":var O;R=[r.property],!(O=-1!=t._keysArray.indexOf(r.property))&&t._keysArray.push(r.property);var T=M.forIn.add(t,r,R,O);T&&(w=T);break;case"update":t._keysArray.forEach((function(e,o,n){this.removeHelpersSpecificIndex(t,e,void 0,r.type)}),this),M.forIn.update(t),t._keysArray=R=$?Object.keys($):[],t._helpers={},t._items={},t._propBindingObject={};case"default":t._forContent={},t._specialNodes={},t._propNodes={},t._helpers={},t._keysArray=R=$?Object.keys($):[];break;default:s.error("Error in updateForHelper")}if(!$){var k=_();"default"!==r.type?b(w.parentNode,k,w):L={toAppendMain:k,lastNode:w}}var x,S=H.unbound;(t.hasAttribute("unbound")||t._attributes&&t._attributes.unbound)&&(H.unbound=!0),t._currentObject=$,!s._ms&&(R.length||(e.isLyteWidget||e.__lyteEnablePromise)&&$ instanceof Promise)&&t._ht&&!t._htA&&(t.content.append(t._ht.content.cloneNode(!0)),t._htA=!0);var D=t,j={data:{},prop:{},node:{}},B={data:{},prop:{},node:{}};if($&&"remove"!==r.type){var F=_();if(t._propBindingObject=t._propBindingObject||{},l&&(e.isLyteWidget||e.__lyteEnablePromise)){var K,U=!0;switch($ instanceof Promise?$.__lyte.status:"resolved"){case"init":x="__lyteAwait__";break;case"resolved":x="true",U=!1;break;case"rejected":x="__lyteFail__"}t._promiseContent&&t._promiseContent.length&&this.removeHelpers(t,void 0,!0),D=t.content.querySelector("[case="+x+"]"),K=t._cases[x],D._ht=K._ht,D._ht&&!D._htA&&(D.content.append(D._ht.content.cloneNode(!0)),D._htA=!0),P=K.dynamicNodes,U&&this.renderPromiseNodes(D,P,t,{},n,void 0,t._tC,i,F)}M.beforeDirObj(t,j,B),R.forEach((function(e,r,o){t._helpers[e]=[],t._specialNodes[e]=[],t._items[e]={_dynamicProperty:{},itemProperty:{},propProperty:{},propPropertyDyn:{},propNodes:{}},m[f]=e,m[h]=$[e],u._properties[f]={},u._properties[h]={};var a={};a[f]={},a[f]._data=e,a[f]._dyn=[f],a[h]={},a[h]._data=$[e],a[h]._dyn=[h];var s={itemIndex:e,itemValue:h,keyValue:f,type:"forIn",node:t};t._items[e]._cx=s,P._cache=a;var l=this.renderNodes(D.hasAttribute("depth")&&D._depthTemp?D._depthTemp:D,P,t,s,n,void 0,t._tC,i);Object.keys(t._items[e]._dynamicProperty).forEach((function(e){t._dynProps[e]?t._dynProps[e]++:t._dynProps[e]=1})),t._items[e].itemProperty=this.getProperty(h),t._propBindingObject[e]=t._items[e].itemProperty,t._forContent[e]=Array.from(l.childNodes),this.executeBlockHelpers(t._helpers[e],t),F.appendChild(l)}),this),H.unbound||(v(t._attributes.object,t._propBindingObject),H.establishBindings(t._propBindingObject,t._attributes.object)),H.unbound=S,"default"!==r.type?w._placeHolder?b(w._placeHolder.parentNode,F,w._placeHolder):b(w.parentNode,F,w):L={toAppendMain:F,lastNode:w}}return H.unbound=S,m[f]=y,m[h]=A,u._properties[f]=E,u._properties[h]=C,M.afterDirObj(t,j,B),M.afterRender(t,this,B,r,a),t._currentObject=$,L}},{key:"updateSwitchHelper",value:function(e,t,r,o,n,i,a,l){if(t._specialNodes||(t._specialNodes=[]),s._ms||!t._ht||t._htA||(t.content.append(t._ht.content.cloneNode(!0)),t._htA=!0),"TEMPLATE"!==t.tagName){if(Object.keys(t).forEach((function(e){"innerHTML"!==e&&"innerText"!==e&&(t._origTemplate[e]=t[e])})),s._ie){var c=g("div");c.innerHTML=t._tC,t._origTemplate.innerHTML=c.children[0].innerHTML,this.constr.splitTextNodes(t._origTemplate),t.hasAttribute("depth")&&t._origTemplate.setAttribute("depth",t.getAttribute("depth"))}var d=t._origTemplate._placeHolder=document.createTextNode("");H.replaceWithPf(t,t._origTemplate._placeHolder),(t=H.replaceWithOrigTemplate(t)).setAttribute("is",e),H.apdNode(t,this),d._helper=t}else if(!t._placeHolder){var p;p=document.createTextNode(""),H.replaceWithPf(t,p),t._placeHolder=p,p._helper=t,H.apdNode(t,this)}var u,f,h=t;if(t._callee||(t._callee=this),r=r||t._cx,t._cx=r,t._dynamicProperty=t._dynamicProperty?t._dynamicProperty:{},""===t.getAttribute("value")||t.getAttribute("value")?f=t.getAttribute("value"):t._attributes&&(f=t._attributes.value),f)switch(f instanceof Promise?f.__lyte.status:"resolved"){case"init":u="__lyteAwait__";break;case"rejected":u="__lyteFail__";break;case"resolved":u="if"===e?"true":f.toString()}else if("if"===e)u="false";else switch(f){case void 0:u="undefined";break;case null:u="null";break;case!1:u="false";break;case"":u='""';break;case 0:u="0"}if(u!==t._currentCase){t._currentCase=u;var m,v=t._depthTemp||t,y=t._cases[u];if(!y&&(y=t._default,m=s._ms?y.templateContent:v.content.querySelector("[default]"),s._ms||!y._ht||m._htA||(m._htA=!0,m.content.append(y._ht.content.cloneNode(!0))),t._isDefault=!0,!m)){t._caseContent&&t._caseContent.length&&this.removeHelpers(t,void 0,!0),t._caseContent=[];var A=document.createTextNode("");if(t._caseContent.push(A),t._currentCaseName=u,t._helpers=t._helpers||[],o)return void(h._placeHolder?b(h._placeHolder.parentNode,A,h._placeHolder):b(h.parentNode,A,t));var E=_();return E.append(A),{lastNode:h,toAppendMain:E}}t._caseContent&&t._caseContent.length&&this.removeHelpers(t,void 0,!0);var C,L=y,$=u;C=m||(s._ms?{}:v.content.querySelector("[case='"+H.cssEscape($)+"']"));for(var P=[];L;){s._ms||!L._ht||C._htA||(C._htA=!0,C.content.append(L._ht.content.cloneNode(!0)));var w=L.dynamicNodes,R=C.getAttribute("render-view-port-template");if(R){var N=I._registeredComponents[R];if(N){var O=N.component._preRenderTemplate;O||s.error("Viewport template for the component '"+R+"' not found.");var T=O.getAttribute("root"),k=O.content.cloneNode(!0);!T&&C.content.appendChild(document.createElement("dummy-view-port")),C.content.appendChild(k),T&&C.content.appendChild(document.createElement("dummy-view-port"))}else s.error("Unable to load viewport template for the component '"+R+"' . Since it is not registered yet.")}var x=this.renderNodes(C,w,t,void 0,n,void 0,L.templateContent,i);if(P.push(x),!L.additional)break;L.additional.next?(C=s._ms?{}:t.content.querySelector("[case='"+H.cssEscape(L.additional.next)+"']"),L=t._cases[L.additional.next]):(C=s._ms?{}:t.content.querySelector("[default]"),L=t._default)}t._caseContent=[];for(var S,D=_(),j=0;j<P.length;j++)11==P[j].nodeType?t._caseContent=t._caseContent.concat(Array.from(P[j].childNodes)):t._caseContent.push(P[j]),D.append(P[j]);return this.executeBlockHelpers(t._helpers,t),o?(D.querySelector("template[is=break]")?S="break":D.querySelector("template[is=continue]")&&(S="continue"),t._placeHolder?b(t._placeHolder.parentNode,D,t._placeHolder):b(t.parentNode,D,t),S):{toAppendMain:D,lastNode:t}}}},{key:"dummy",value:function(e,t){this.constr._properties[boundValue].observer}},{key:"callObservers",value:function(e,t){var r=this.constr._properties[e],o=r?r.observer:void 0;if(o)for(var n=0;n<o.length;n++)-1!==t.indexOf(".")&&o[n].path!==t||this["_"+o[n].functionName].apply(this)}},{key:"bindNode",value:function(t,r,o,n,i,a,c,d,p,u,f,m){var _,b,A=n.itemValue,E=n.itemIndex,C=n.type,L=n.indexValue,$=i.dynamicValue,P=i.directiveValue,w=i.helperInfo,R=t.ownerElement,N=[],O=I.getCmpData(this.component.data);2===t.nodeType&&(t={nodeName:t.nodeName,ownerElement:t.ownerElement,nodeType:2,nodeValue:t.nodeValue,_attributeDetails:t._attributeDetails,_isDirectiveNode:i._isDirectiveNode},b=H.directive.isDirectiveNode(i)),w&&w.name,t._callee=this;var T=!1;if(!P&&w&&Object.keys(w).length){T=!0,t.nodeName,_=t.helperValue=w;var k=[];if("action"===w.name){var x=w.args[0];w.args[0]=x.startsWith("'")?x.replace(/'/g,""):x,x=w.args.slice(0,1)[0];var S=w.args.slice(1,w.args.length),D=!1,j=t.nodeName;return-1!=j.indexOf("-")&&(D=!0),k=[R,j,D,{name:x,args:S}],void this.processHelper({name:w.name,args:k},t)}k="method"===w.name?w.args:this.processArgs(this,{helperInfo:w},N,void 0,t,void 0,p),_=this.processHelper({name:w.name,args:k},t),"unescape"===w.name&&(t={dynamicPositions:{initialNode:t,dynamicNodeValue:_},_callee:t._callee,helperValue:t.helperValue},_=void 0,a.push(t))}else{w={},P&&($=P),t.syntaxValue=$;var B=[];_=H.get(O,$,B,p,this),N.push(B)}if(2==t.nodeType){var F=t.ownerElement.tagName;("INPUT"==F||"TEXTAREA"==F||"DIV"==F&&t.ownerElement.hasAttribute("contenteditable"))&&(t.ownerElement._rA=t.ownerElement._rA||[],t.ownerElement._rA.push(t)),R._origTemplate?t.ownerElement=R._origTemplate:(R.hasAttribute("lyte-for")||R.hasAttribute("lyte-if")||R.hasAttribute("lyte-switch")||R.hasAttribute("lyte-forin"))&&"TEMPLATE"!==R.tagName&&(s._ie?(t.ownerElement=g("template"),t.ownerElement.setAttribute("is",i._depthTemp)):t.ownerElement=i._depthTemp.cloneNode(!0),R._origTemplate=t.ownerElement)}var K,U=!1;if(!H.unbound){var V;o&&(V=C?o._items[E]._dynamicProperty:o._dynamicProperty);for(var q=0;q<N.length;q++){for(var z=N[q],W=[],G=void 0,Y=0;Y<z.length;Y++)if(!G)if(z[Y].startsWith("$dataAttributes")||z[Y].startsWith("$methodAttributes"))G=!0;else{var J=void 0,Q=this.getProperty(z[Y]);if(o){var X=z[Y].search(/\W/);J=-1!==X?z[Y].substring(0,X):z[Y];var Z=!0;o&&o._dirObj&&C&&J&&(o._dirObj.prop&&-1!=o._dirObj.prop.indexOf(J)||o._dirObj.node&&-1!=o._dirObj.node.indexOf(J)||o._dirObj.data&&-1!=o._dirObj.data.indexOf(J)?(Z=!1,U=!0):U=!1),!Z||J===A||J===L||n.node&&n.node._properties&&n.node._properties[J]?(t._cx=n,y(Q,"_dynamicNodes"),Q._dynamicNodes.push(t),J!==L&&(K=Q)):(h(Q,"_helperNodes"),Q._helperNodes.add(o),V[z[Y]]?V[z[Y]].push(t):(V[z[Y]]=[]).push(t))}else y(Q,"_dynamicNodes"),Q._dynamicNodes.push(t);if(R&&(R.hasAttribute("lyte-for")||R.hasAttribute("lyte-if")||R.hasAttribute("lyte-switch")||R.hasAttribute("lyte-forin"))||R&&"TEMPLATE"===R.tagName&&/^(for|forIn)$/.test(R.getAttribute("is"))&&!T){var ee=R.getAttribute("is");("for"===ee&&"items"===t.nodeName||"forIn"===ee&&"object"===t.nodeName)&&(Q._forHelpers||h(Q,"_forHelpers"),t.ownerElement._actualBinding=Q,Q._forHelpers.add(t.ownerElement))}c?H.establishSelectedBinding(Q,O,this):U&&M.lazyProp.add(W,t,o,E,J,N,z[Y])}z.length>1&&!G&&(t._multipleProperty=t._multipleProperty||[],t._multipleProperty.push({dynamicProp:K?void 0:V,actProp:this.getProperty(z[0]),helperNode:o,dynamicValues:z,index:q})),M.lazyProp.iterate(this,W)}}if(_="boolean"===!_typeof(_)&&"number"===!_typeof(_)?_||"":_,b)P||H.directive.setNodeArgs(t,_,this);else if(2===t.nodeType){var te=t._parentNode?t._parentNode:t.ownerElement;te.tagName&&te.getAttribute("is");var re=H.isCustomElementV3(te,!0);re&&!b&&(te.set?te.set(H.String.toCamelCase(t.nodeName),_):(te._initProperties=te._initProperties||{},te._initProperties[H.String.toCamelCase(t.nodeName)]=_));var oe=_;
//!== "string"
if(re&&"string"!=typeof _&&!d)te._attributes=te._attributes||{},te._attributes[t.nodeName]=_,"TEMPLATE"===te.nodeName&&T&&("for"===te.getAttribute("is")&&"items"===t.nodeName||"forIn"===te.getAttribute("is")&&"object"===t.nodeName&&!H.unbound)&&(t.ownerElement._actualBinding={_forHelpers:(new Set).add(te),_createdBinding:!0},_&&v(_,t.ownerElement._actualBinding)),r.push(t.nodeName);else if(b&&e.isLyteWidget&&-1!=t.tagName.indexOf("-")&&(t.$data||(t.$data={},Object.defineProperty(t.$data,"__compNode",{enumerable:!1,writable:!0,value:t})),t.$data[H.String.toCamelCase(t.nodeName)]=_),"boolean"==typeof _)te._attributes=t.ownerElement._attributes||{},te._attributes[t.nodeName]=_,_?te.setAttribute(t.nodeName,""):r.push(t.nodeName);else{var ne;if(_&&"object"===_typeof(_))if(void 0!==Record&&_ instanceof Record)ne=JSON.stringify(_.$.toJSON());else try{ne=JSON.stringify(_)}catch(e){l.error("Data passed for property '"+t.nodeName+"' of '"+t.ownerElement.nodeName.toLocaleLowerCase()+"' cannot be serialized. The component '"+t.ownerElement.nodeName.toLocaleLowerCase()+"' might not be registered before its use.")}else ne=null==_||null==_?"":_;if(_=ne,H.isControlHelper(t.ownerElement))te._attributes=t.ownerElement._attributes||{},te._attributes[t.nodeName]=_,r.push(t.nodeName);else{var ie=void 0===_?"":_;t.ownerElement.setAttribute(t.nodeName,ie)}}"LYTE-YIELD"===te.tagName&&(I.getCmpData(te.component.data)[H.String.toCamelCase(t.nodeName)]=oe),/^(INPUT|TEXTAREA|SELECT)$/.test(te.nodeName)&&("value"===t.nodeName?te.value=void 0===_?"":_:"checked"===t.nodeName&&(te.checked=_)),_||-1===H.booleanAttrList.indexOf(t.nodeName)&&-1===H.nonFalsyAttrList.indexOf(t.nodeName)||r.push(t.nodeName)}else t.nodeValue=void 0===_?"":_;return t}},{key:"debounce",value:function(e,t){var r;return function(){var o=this,n=arguments;r&&clearTimeout(r),r=setTimeout((function(){e.apply(o,n),r=null}),t||100)}}},{key:"getProperty",value:function(e){var t="string"==typeof e&&"#"==e[0]?"_privateProperties":"_properties",r=e.match(/([^[\].]+|\[\])/g),o=this;r[0]="string"==typeof r[0]&&"#"==r[0][0]?r[0].substr(1):r[0],o[t][r[0]]||(o[t][r[0]]={}),o=o[t][r[0]],"_privateProperties"==t&&defProp(o,"_private",{enumerable:!1,value:!0}),defProp(o,"_path",{enumerable:!1,value:r[0]});for(var n=1;n<r.length;n++)(r[n].startsWith("'")||r[n].startsWith('"'))&&(r[n]=r[n].substring(1,r[n].length-1)),o[r[n]]||(o[r[n]]={},"_privateProperties"==t&&defProp(o[r[n]],"_private",{enumerable:!1,value:!0}),defProp(o[r[n]],"_path",{enumerable:!1,value:o._path+"."+r[n]})),o=o[r[n]];return o}},{key:"updateNode",value:function(t,r,o,i){var a,s,c=this,d=this.component,p="delete",u=[];if(2==t.nodeType&&(s=H.directive.isDirectiveNode(t)),t._multipleProperty)for(var f=0;f<t._multipleProperty.length;f++)if(t._multipleProperty[f]&&t._multipleProperty[f].dynamicValues.lastIndexOf(r)>0){u[f]=!1;var m=void 0;if((a=t._multipleProperty[f]).dynamicProp){if(u[f]=a,m=a.dynamicProp[a.actProp._path]){var _=m.indexOf(t);m.splice(_,1)}var g=a.helperNode;if(0===m.length)if("if"===g.getAttribute("is"))a.actProp._helperNodes[p](g),delete a.dynamicProp[a.actProp._path];else if(delete a.dynamicProp[a.actProp._path],g._items){for(var b=!0,A=0;A<g._items.length;A++)if(g._items[A]._dynamicProperty&&g._items[A]._dynamicProperty[a.actProp._path]){b=!1;break}b&&a.actProp._helperNodes[p](g)}}if(!u[f]&&(u[f]="dynamicNodes",m=a.actProp._dynamicNodes)){var E=m.indexOf(t);m.splice(E,1),m.length||delete a.actProp._dynamicNodes}}if(t.syntaxValue||t.helperValue){var C,L,$;if(t._cx||2===t.nodeType&&t.ownerElement._cx){C=t._cx||t.ownerElement._cx;var P=[];H.changeContext(C.node,P,C)}else"LYTE-YIELD"===t.tagName&&t._callee._cx&&(L=!0,C=t._callee._cx,P=[],H.changeContext(C.node,P,C,!0));var w=[],R=!1;if(t.helperValue){R=!0;var N=$=t.helperValue,O=this.processHelper({name:N.name,args:this.processArgs(this,{helperInfo:N},w,void 0,t)},t);if($=O,"unescape"===N.name){for(var T=t.dynamicPositions,k=T.startingNode,x=T.length;x>1;){var S=k.nextSibling;k.remove(),k=S,x--}var D=$.childNodes.length;D||($.appendChild(document.createTextNode("")),D=1);var j=$.childNodes[0];k.replaceWith.apply(k,$.childNodes);var B={startingNode:j,length:D};t.dynamicPositions=B,$=void 0}}else{var F,K,U=t.syntaxValue;-1===U.indexOf(".")&&-1===U.indexOf("[")||(F=U,U=U.substring(0,U.indexOf("."))),K=i?n.get(d):I.getCmpData(d.data);var V=F?H.get(K,F,w,void 0,d.$node):K[i?U.substr(1):U];$="boolean"===!_typeof(V)&&"number"===!_typeof(V)?V||"":V}if(w[0]instanceof Array||(w=[w]),u)for(f=0;f<u.length;f++)if(u[f]){var q=t._multipleProperty[f],z=t._multipleProperty[f].index,W=w[z][0].substring(0,w[z][0].indexOf(".")),G=void 0;t._propNode&&(G=this._properties[W],this._properties[W]=null);var Y=this.getProperty(w[z][0]),J=this.getProperty(W),Q=this.getData(W);if("dynamicNodes"===u[f])y(Y,"_dynamicNodes"),Y._dynamicNodes.push(t);else{h(Y,"_helperNodes"),Y._helperNodes.add(q.helperNode);var X=q.dynamicProp;X[Y._path]?X[Y._path].push(t):(X[Y._path]=[]).push(t)}if(t.ownerElement&&(t.ownerElement.hasAttribute("lyte-for")||t.ownerElement.hasAttribute("lyte-if")||t.ownerElement.hasAttribute("lyte-switch")||t.ownerElement.hasAttribute("lyte-forin"))||t.ownerElement&&"TEMPLATE"===t.ownerElement.tagName&&/^(for|forIn)$/.test(t.ownerElement.getAttribute("is"))&&!R){var Z=t.ownerElement.getAttribute("is");("for"===Z&&"items"===t.nodeName||"forIn"===Z&&"object"===t.nodeName)&&(q.actProp._forHelpers.has(t.ownerElement)&&q.actProp._forHelpers.delete(t.ownerElement),Y._forHelpers||h(Y,"_forHelpers"),t.ownerElement._actualBinding=Y,Y._forHelpers.add(t.ownerElement))}null!=Q&&(H.establishBindings(J,Q),t._propNode&&M.updateMulProp(t,q,W,J,Y)),G&&(this._properties[W]=G),t._multipleProperty[f].actProp=Y,t._multipleProperty[f].dynamicValues=w[z]}if(s)H.directive.setNodeArgs(t,$,this),t.ownerElement.hasAttribute("comp-in-parent")&&l.Component.set(t.ownerElement.$data,H.String.toCamelCase(t.nodeName),$),t._saveNode?M.updateName(this,t,$):t.ownerElement._initialClassValue&&H.directive.class.updateValue(t.ownerElement);else if(2===t.nodeType){var ee=[],te=t._parentNode?t._parentNode:t.ownerElement;if("TEMPLATE"===te.tagName&&"component"===te.getAttribute("is")&&"component-name"!==t.nodeName)if(te.hasAttribute("lyte-keep-alive"))for(var re in te._renderedComponent)ee.push(te._renderedComponent[re]);else{var oe=te._currentComponent;oe&&te._renderedComponent[oe]&&ee.push(te._renderedComponent[oe])}ee.push(te);for(var ne,ie=function(){var r=ee[ae],n=H.isCustomElementV3(r,!0),i=H.String.toCamelCase(t.nodeName);r.set?r.set(i,$,void 0,!0):(e.isLyteWidget&&r.__updateProp&&n&&r.$data&&(r.$data[i]=$,r.__updateProp.data.forEach((function(e){var t;(t="string"==typeof e&&"#"==e[0]?r._callee._privateProperties[e.substr(1)]:r._callee._properties[e])&&t[i]&&H.affectChanges(t[i])}))),r._initProperties=r._initProperties||{},ee._handledInitProperties&&e.isLyteWidget&&"TEMPLATE"!=r.tagName?DataBindingLayer.updateInitProperties(r,i,$):r._initProperties[i]=$);var a=r&&"LYTE-YIELD"===r.tagName?I.getCmpData(r.component.data):void 0;
//!== "string"
if("LYTE-YIELD"===r.tagName&&a&&t.nodeName&&a[t.nodeName]!==$&&H.set(a,H.String.toCamelCase(t.nodeName),$,void 0,void 0,r),r._attributes=r._attributes||{},n&&"string"!=typeof $){if("TEMPLATE"===t.ownerElement.nodeName){if(t.helperValue){if("for"===t.ownerElement.getAttribute("is")&&"items"===t.nodeName||"forIn"===t.ownerElement.getAttribute("is")&&"object"===t.nodeName){var s=t.ownerElement._attributes[t.nodeName],d=$;H.removeSelectedBindingDeep(t.ownerElement._actualBinding,s),d&&(v(d,t.ownerElement._actualBinding),H.establishBindings(t.ownerElement._actualBinding,d)),"object"===t.nodeName&&H.removeSelectedBindingDeep(t.ownerElement._propBindingObject,s)}}else if("for"===t.ownerElement.getAttribute("is")&&"items"===t.nodeName||"forIn"===t.ownerElement.getAttribute("is")&&"object"===t.nodeName){var p=t.ownerElement._attributes[t.nodeName];"object"===t.nodeName&&H.removeSelectedBindingDeep(t.ownerElement._propBindingObject,p)}r["__"+t.nodeName]=!0,r.removeAttribute(t.nodeName)}}else if("boolean"==typeof $)r._attributes=r._attributes||{},r._attributes[t.nodeName]=$,$?r.setAttribute(t.nodeName,""):r.removeAttribute(t.nodeName);else{if($&&"object"===_typeof($))if(void 0!==Record&&$ instanceof Record)ne=JSON.stringify($.$.toJSON());else try{ne=JSON.stringify($)}catch(e){l.error("Data passed for property '"+t.nodeName+"' of '"+t.ownerElement.nodeName.toLocaleLowerCase()+"' cannot be serialized. The component '"+t.ownerElement.nodeName.toLocaleLowerCase()+"' might not be registered before its use.")}else ne=null==$||null==$?"":$;var u=void 0===($=ne)?"":$,f=t.ownerElement;f.hasAttribute(t.nodeName)||-1!==H.nonFalsyAttrList.indexOf(t.nodeName)?"INPUT"==f.tagName&&"value"==t.nodeName&&f.validity.badInput||f.setAttribute(t.nodeName,u):t.nodeValue=u}if(r._attributes[t.nodeName]=$,/^(INPUT|TEXTAREA|SELECT)$/.test(r.nodeName))if("value"===t.nodeName){var h=void 0===$?"":$;r.value!==h&&(r.value=h)}else"checked"===t.nodeName&&(r.checked=$);$||-1===H.booleanAttrList.indexOf(t.nodeName)&&-1===H.nonFalsyAttrList.indexOf(t.nodeName)||r.removeAttribute(t.nodeName);var m,y,_=r._isStopped;switch(r.getAttribute("is")){case"for":o?o.type="update":o={type:"update"},c.updateForHelper(r,o);break;case"if":m=c.updateSwitchHelper("if",r,void 0,!0,!0);break;case"forIn":o?o.type="update":o={type:"update"},c.updateForInHelper(r,o);break;case"switch":c.updateSwitchHelper("switch",r,void 0,!0,!0);break;case"component":"component-name"===t.nodeName&&c.updateDynamicComponent(r,"update")}_&&_!==m?y=m?"break"===m?"MS":"SM":"break"===_?"SM":"SS":"break"===m?y="MS":"continue"===m&&(y="SS"),y&&c.handleBreak(r._cx,y)},ae=0;ae<ee.length;ae++)ie()}else t.nodeValue=void 0===$?"":$;if(t.ownerElement&&t.ownerElement._hooksPresent){var se=M.getAttr(t.ownerElement._specialAttributeDetails);se&&M.triggerAllListeners(this,se,t.ownerElement)}C&&H.removeContext(C.node,P,C,L)}}},{key:"handleBreak",value:function(e,t){if(e){for(var r=e.node,o=e.itemIndex,n=(r.getAttribute("item"),e.node._forContent),i="M"===t[0]?n.length:o+1,a=o;a<i;a++){for(var s=n[a],l=0;l<s.length;l++)s[l].remove(),(s[l]._forContent||s[l]._caseContent)&&this.removeHelpers(s[l]);n[a]=[],H.removeSelectedBindingDeep(r._items[a].itemProperty,r._attributes.items[a]),r._helpers[a]=[],r._items[a]={_dynamicProperty:{},itemProperty:{},indexProperty:{}},r._items[a]={_dynamicProperty:{},itemProperty:{},indexProperty:{},propProperty:{},propPropertyDyn:{},propNodes:{}}}var c=r._attributes.items.length;"M"===t[1]?this.updateForHelper(r,{firstIndex:o,secondIndex:c-o,type:"replace"},void 0,{}):this.updateForHelper(r,{firstIndex:o,secondIndex:1,type:"replace"},void 0,{})}}},{key:"createCustomEvent",value:function(e,t,r){var o=new CustomEvent(e);t._actions[e]=o,t._actions[e].processAction=r}},{key:"isEmptyString",value:function(e){return!("string"==typeof e)||""===e}},{key:"processArgs",value:function(e,t,r,o,n,i,a,s){s="unbound"==t.helperInfo.name||s;var l=t.newHelperInfo&&i?t.newHelperInfo.args:t.helperInfo.args;r=r||[];var c=I.getCmpData(e.component.data);l=Array.isArray(l)?Array.from(l):l;for(var d=e.__lyteWidget,p=0;p<l.length;p++)if(l[p]&&l[p].type)this.internalHelpers(e,l,p,r,o,n,i,a,s);else if(this.isEmptyString(l[p]))i&&l[p]instanceof Array&&(l[p]=H.getDD(c,l[p]));else if(l[p].startsWith("'")&&l[p].endsWith("'"))l[p]=l[p].substr(1,l[p].length-2);else{l[p]=l[p].trim();var u=[];if("event"===l[p]&&o)l[p]=d&&widgetMap.has(d)?widgetMap.get(d).getClone(o):o;else if("this"===l[p]&&n){var f=2===n.nodeType?n.ownerElement:n;l[p]=d&&widgetMap.has(d)?widgetMap.get(d).getClone(f):f}else l[p]=H.get(e.component.data,l[p],u,a);!0!==s&&r.push(u)}return l}},{key:"internalHelpers",value:function(e,t,r,o,n,i,a,s,l){var c=t[r].value,d=this.processHelper({name:c.name,args:this.processArgs(e,{helperInfo:c},o,n,i,a,s,l)},i);t[r]=d}},{key:"processHelper",value:function(t,r){var o,n=[],i=t.name,a=P.registeredHelpers[i];if(e.isLyteWidget&&-1==H.defaultHelpers.indexOf(i)&&(o=this.component.constructor)._widget&&!(a=o._helpers[i]||a))s.error("LC003",t.name);else{if(a){switch(t.name){case"method":n.push(this,r);break;case"lbind":n.push(this,r.ownerElement);break;case"lyteViewPort":if(!r||!r.ownerElement)return!1;n.push(r.ownerElement),t.args.length||n.push(!1)}return a.apply(this,n.concat(t.args))}s.error("LC003",t.name)}}},{key:"getActionProperty",value:function(e){var t=this._properties;return t?t[e].value:void 0}},{key:"hasInternalBindings",value:function(e){return e.match(/[(]{1}[^)]+[)]{1}/)}},{key:"getArgValues",value:function(e,t){for(var r=[],o=0;o<e.length;o++)r.push(t[e[o]].value);return r}},{key:"createEventListeners",value:function(e,t,r){if(e._callee||e===this||(e._callee=this),-1==p.indexOf(t)){var o=t.substr(2);e.getAttribute(o),P.registeredComponents[e.localName]&&!e.component||"TEMPLATE"===e.tagName&&"component"===e.getAttribute("is")?(e._toRegEvnts=e._toRegEvnts||{},e._toRegEvnts[t.substr(2)]={listener:T,attrVal:this.tagName.toLowerCase()+" => "+r.name}):(e.setAttribute(o,this.tagName.toLowerCase()+" => "+r.name),e.addEventListener(t.substr(2),T)),e.hasAttribute(t)&&(e[t]=void 0),e.removeAttribute(t)}}},{key:"registerParentYield",value:function(e){var t,r=this._callee._yields[e];r&&(s._ie?((t=document.createElement("div")).innerHTML=r.outerHTML,t=t.childNodes[0],this.constructor.splitTextNodes(t)):t=r.cloneNode(!0),Object.keys(r).forEach((function(e){t[e]=r[e]})),this._yields[e]=t)}},{key:"registerYields",value:function(){this._yields={};for(var e=this.querySelectorAll("template[is=registerYield],template[is=yield]"),t=[],r=0;r<e.length;r++){for(var o=e[r],n=H.getYieldName(o);o.hasChildNodes();)o.content.appendChild(o.childNodes[0]);o.hasAttribute("from-parent")&&this._callee?this._callee._yields?this.registerParentYield(n):t.push(o):this._yields[n]=o,B.setTxtNode(this,o)}if(t.length&&this._callee){var i=this;this.lazyYield=function(){if(i._callee){for(var e=0;e<t.length;e++){var r=t[e];i.registerParentYield(r.getAttribute("yield-name"))}i._callee.removeEventListener("onReady",i.lazyYield),delete i.lazyYield}},this._callee.addEventListener("onReady",this.lazyYield)}}},{key:"connectedCallback",value:function(){this._connectedCalled||this.__lyteIgnore||this.__v3lyteIgnore||(this._connectedCalled=!0,this._connectedCallback())}},{key:"_connectedCallback",value:function(){if(!this.hasAttribute("lyte-rendered")&&P.registeredComponents[this.localName]&&!this._ccCalled){var e=this._fR;if(e||(this._callee=this._callee||this.getCallee(this.parentNode)),this.__h={},this.__counter=0,this.__dc={},e){if(P.shouldIgnoreDisconnect())return;var t=e.methods;t&&this.setMethods(t),H.ccDelay.push(this),this._ccCalled=!0}else this.actualConnectedCallback();var r=I.getCmpData(this.component.data);if((this._initProperties&&this._initProperties.hasOwnProperty("lyteViewPort")?this._initProperties.lyteViewPort:r.lyteViewPort)&&H._registeredComponents[this.localName].component._hasViewportTemp){H.isViewPortPending||(requestAnimationFrame((function(){requestAnimationFrame((function(){H.executePendingViewPort()}))})),H.isViewPortPending=!0),H.pendingViewPortElements.push(this);var o=this;l._preRegister();var n=function(e){if(!1===e.newValue){var t=H.pendingViewPortElements.indexOf(o);-1!=t&&H.pendingViewPortElements.splice(t,1)}}.observes("lyteViewPort");l._postRegister(),n.fnName="__**--Lyte__**",l.establishObserverBindings.call(this,[n])}}}},{key:"cmpBind",value:function(e){var t=I.getCmpData(this.component.data);if(!H.unbound&&!e){l.establishObserverBindings.call(this,this.component.constructor._observers),l.establishWatchScope.call(this,this.constructor._deepWatchProperties),v(t,this._properties),H.establishBindings(this._properties,t);var r=n.get(this.component);r&&(v(r,this._privateProperties),H.establishBindings(this._privateProperties,r))}}},{key:"actualConnectedCallback",value:function(){var t=this;H.debugPerf(this,{render:1}),this._transitionHelperNodes=[],this._specialNodes=[],this._propProperty={},this._propList=[],this._propNodes={},this._hiddenTemplate=[];var r=I.getCmpData(this.component.data),o=this._fR;o&&(this._callee=this._callee||this.getCallee(this.parentNode));var n=this.component.constructor._templateAttributes;if(n&&n.attr){var i=function(){var e=n.attr[a];if(!t.hasAttribute(e.name)&&!r.hasOwnProperty(e.name)||e.globalEvent){if(e.helperInfo&&"action"===e.helperInfo.name){t._evBoundEvents=t._evBoundEvents||{};var o,i=e.helperInfo.args[0];o=i.startsWith('"')||i.startsWith("'")?i.substring(1,i.length-1):i;var l=e.globalEvent||-1!==e.name.indexOf("-")?e.name:e.name.substr(2);t._evBoundEvents[l]={name:o,args:e.helperInfo.args,from:"component"};var c=t.getAttribute(e.name),d=t.component.constructor._template.getAttribute(e.name);t.setAttribute(e.name,d+(c?" ; "+c:""))}if(!e.globalEvent)if(e.from="component",e.staticValue)t.setAttribute(n.attr[a].name,e.staticValue);else if(H.directive.isDirectiveNode(e)){var p,u=e.name;if(t._specialAttributeDetails?t._specialAttributeDetails.forEach((function(e){e.hookName==u&&(p=!0)})):t._specialAttributeDetails=[],e.hasOwnProperty("stringValue")){if(!p){var f={hookName:e.hookName,hookNode:e.hookNode,name:e.name,stringValue:e.stringValue};t._specialAttributeDetails.push(f)}}else if(e.hasOwnProperty("dynamicValue")){t.setAttribute(e.hookName,"{{dummy}}");var h=t.attributes.getNamedItem(e.hookName);e._isDirectiveNode=!0,t.bindNode(h,[],void 0,{},e,void 0,void 0,!0),t._specialAttributeDetails||(t._specialAttributeDetails=[]);var m={hookName:e.hookName,hookNode:e.hookNode,name:e.name,dynamicValue:e.dynamicValue};t._specialAttributeDetails.push(m)}}else a.startsWith("@")?s.error(t,"LC021"):(t.setAttribute(n.attr[a].name,"{{dummy}}"),t.bindNode(t.attributes.getNamedItem(n.attr[a].name),[],void 0,{},n.attr[a],void 0,void 0,!0))}};for(var a in n.attr)i()}for(var c in this._toRegEvnts)this.addEventListener(c,this._toRegEvnts[c].listener),this.hasAttribute(c)?this.setAttribute(c,this.getAttribute(c)+" ; "+this._toRegEvnts[c].attrVal):this.setAttribute(c,this._toRegEvnts[c].attrVal);this._toRegEvnts={};var d=H.unbound,p=this.getAttribute("ssrbindservernode");p&&!this.component.data.lyteUnbound&&(this.bindServerData(),this.removeAttribute("ssrbindservernode"));var u=this.afterConnected(o,p);if(!p&&this.cmpBind(o),H.unbound=d,"string"==typeof u){if(u)if(H.frSpecial){var f=document.createElement("template");f.innerHTML=u,this.innerHTML="",this.appendChild(f.content)}else this.innerHTML=u;H.processAction(this)}else{if(this.component.data.lyteViewPort)if(this._vpc=!0,s._ie){for(var h=0;h<u.childNodes.length;h++)if(u.childNodes[h].tagName){this._dummyViewPortF=u.childNodes[h];break}for(h=u.childNodes.length-1;h>=0;h--)if(u.childNodes[h].tagName){this._dummyViewPortL=u.childNodes[h];break}}else this._dummyViewPortF=u.children[0],this._dummyViewPortL=u.children[u.children.length-1];H.directive.getTransitionArg(this,"hide-tag")?H.directive.getTransitionArg(this,"hide-tag-supported")?B.connect(this,u):s.error(this,"LC020",this.localName):this.appendChild(u)}var m,v=this.component.__data,y=this.attributes;this.__lyteIgnore=!0;for(var _=y.length-1;_>-1;_--){var g=I.String.toCamelCase(y[_].nodeName);v[g]&&v[g].hideAttr&&this.removeAttribute(y[_].nodeName)}for(var b in this._hideAttr){var A=H.String.dasherize(b);0==this._hideAttr[b]&&this.getAttribute(A)!=this.component.data[b]&&this.setAttribute(A,this.component.data[b])}if(this.__lyteIgnore=!1,this._callee&&this._callee.serverCall&&(this.serverCall=!0),this.serverCall&&!this.hasAttribute("server-rendered")){this.setAttribute("server-rendered","");var E=I.sendtoclient.call(this,this,!0,this.component.__data);this.setAttribute("component-data",JSON.stringify(E))}this.hasAttribute("server-rendered")||this.setAttribute("lyte-rendered",""),o||l._ignoreOnReady||this.dispatchEvent(new CustomEvent("onReady")),this.component._config&&null!=this.component._config.clientLifeCycleHooks&&(m=1==this.component._config.clientLifeCycleHooks||"object"==_typeof(this.component._config.clientLifeCycleHooks)&&this.component._config.clientLifeCycleHooks.includes("didConnect")),e.isLyteWidget||M.connect(this);var C=this.component._ssr?this.component._ssr.overrides:void 0;if((!this.hasAttribute("server-rendered")||this.serverCall||m)&&(C&&C.didConnect&&this.serverCall?C.didConnect.apply(this):this.callback("didConnect"),this.onCallBack("didConnect")),null==this.serverCall&&this.callback("didRender"),o&&this.removeAttribute("_lyteprop"),s.isWidgetBuild&&this.hasAttribute("comp-in-parent")){var L={};for(var $ in this.component.data)L[$]=this.component.data[$];for(h=0;h<this.attributes.length;h++){var P=this.attributes[h],w=H.String.toCamelCase(P.name);this._attributeDetails&&this._attributeDetails[P.name]||(L[w]=null,delete L[w])}DataBindingLayer.sendDataUpdateToFrame(this,L)}H.debugPerf(this,{render:0})}},{key:"onCallBack",value:function(e){var t=this.component.constructor._callBacks[e];if(t)for(var r=0;r<t.length;r++)try{H.debugPerf(this,this.__renderId,t[r].fnName,this.localName),t[r].value.call(this.component),H.debugPerf(this,this.__renderId,t[r].fnName,this.localName)}catch(e){s.error(e)}}},{key:"callback",value:function(e){var t,r=this.component[e];if(r){arguments.length>1&&(t=Array.from(arguments)).splice(0,1);try{var o=this.component;H.debugPerf(this,this.__renderId__,e,this.localName),r.apply(D(o),t||[]),H.debugPerf(this,this.__renderId__,e,this.localName)}catch(e){s.error(e)}}}},{key:"establishObserverBindings",value:function(){for(var e=this.component.constructor._observers,t=0;t<e.length;t++)for(var r=e[t].properties,o=0;o<r.length;o++){var n=void 0,i=!1;-1!==r[o].indexOf(".[]")?(i=!0,n=this.getProperty(r[o].substring(0,r[o].indexOf(".[]")))):n=this.getProperty(r[o]),h(n,"_observers"),n._observers.add({callee:this,observer:e[t],isArrayObserver:i})}}},{key:"removeBindings",value:function(e,t){for(var r in e){var o=t[r];o&&o._bindings&&o._bindings.delete(e[r]),"object"===_typeof(e[r])&&o&&this.removeBindings(e[r],o)}}},{key:"actualDisconnected",value:function(){try{var e=this;if(!e.component)return;for(s in e._cx=null,e._callee=null,e.component.$node=null,e.component.__data=null,e.component.data.__target__?e.component.data.__target__.__component__=null:e.component.data.__component__=null,e.component.data=null,e.component=null,e.__dc=e.__dc||{},e.__h=e.__h||{},e.__dc){var t=e.__dc[s];if(t.hasAttribute("lyte-keep-alive"))for(var r=Object.keys(t._renderedComponent),o=0;o<r.length;o++){var n=r[o];if(n!==t._currentComponent){var i=t._renderedComponent[n];i.constructor.prototype._disconnectedCallback.call(i),i.remove()}}}for(s in e.__h)e.__h[s].remove();e.__h={},e.__dc={};var a=e._yields;for(var s in a)a[s]._callee=null;e=null}catch(e){console.error(e)}}},{key:"disconnectedCallback",value:function(){this._disconnectedCallback()}},{key:"_disconnectedCallback",value:function(){if(this.shadowRoot&&docEventListenerHandler){var e=docEventListenerHandler.docShadows.indexOf(this.shadowRoot);-1!=e&&docEventListenerHandler.docShadows.splice(e,1)}if(this.__v3lyteIgnore)H.V3.pendingComp.remove(this);else if(!P.shouldIgnoreDisconnect()&&this.component&&!this.__lyteIgnore&&!this._ignoreDisconnect){this.callback("willDestroy"),this.onCallBack("willDestroy"),-1!=Array.from(H.hiddenComponentsDiv.content.childNodes).indexOf(this)&&H.hiddenComponentsDiv.content.removeChild(this),this._hiddenTemplate&&this._hiddenTemplate.length&&B.callDisconnectedCallback(this);var t=this.constructor.__widgetName;t&&(t=widgetMap.get(t)).additionalComps.delete(this.parentElement),this._removedTemplate&&(this._removedTemplate.forEach((function(e){H.tDiv.content.contains(e)&&H.tDiv.content.removeChild(e)})),this._removedTemplate=[]);var r=H.pendingViewPortElements;if(this.component.data.lyteViewPort){var o=r.indexOf(this);-1!=o&&r.splice(o,1)}if(P.viewPortSettings.handlePendingItems&&this._vpc&&(H.executeVpe=!0),r.length)for(var i=0;i<r.length;i++){var a=H.getActViewPortTemplate(r[i]);a&&"TEMPLATE"==a.tagName&&"if"==a.getAttribute("is")&&a._callee==this&&(r.splice(i,1),i--)}if(this.__elmCnt&&delete DataBindingLayer.parentMap[this.__elmCnt],this.__elmCntW&&delete DataBindingLayer.childMap[this.__elmCntW],this._destroyed=!0,this.__toRemoveLazy){for(var s in this.__toRemoveLazy)this.__toRemoveLazy[s].forEach((function(e){l.$.toRemoveFromRequiredServices(e)}));delete this.__toRemoveLazy}this.$lc=null,this.component._bindings=null,this._parentHelper=null;var c=this.__scpObj,d=I.getCmpData(this.component.data);if(c)for(var p in c){var u=d[p],f=c[p].split("_");u&&l.removeNestScp(d[p],f[0],f[1],void 0,this)}if(this.$data&&this.$data.__compNode&&(this.$data.__compNode=null),!this._fR){H.removeSelectedBindingDeep(this._properties,d,!0);try{var h=n.get(this.component);H.removeSelectedBindingDeep(this._privateProperties,h,!0)}catch(e){}}var m=this.__h;for(p in m)(m[p]._actualBinding||m[p]._hiddenTemplate&&m[p]._hiddenTemplate.length)&&this.removeHelpers(m[p]);for(var v in m={},this._properties)this._properties[v]={};if(this._privateProperties)for(var y in this._privateProperties)this._privateProperties[y]={};if(M.removeAll("comp",this,this),M.removeData(this),this._specialNodes=null,this.callback("didDestroy"),this.onCallBack("didDestroy"),this._didDestroyCalled=!0,this.__lyteWidget){var _=widgetMap.get(this.__lyteWidget);_&&_.removeComponent(this)}H.dcc||(H.dcc=[],requestAnimationFrame((function(){requestAnimationFrame((function(){try{H.executeVpe&&(P.viewPortSettings.executePendingViewPortElements(),H.executeVpe=!1);for(var e,t=0;e=H.dcc[t];t++)e.actualDisconnected()}catch(e){console.error(e)}H.dcc=void 0}))}))),H.dcc.push(this),this.lazyYield&&this.removeEventListener("onReady",this.registerParentYield),this.constr.activeInstances--,this.component.constructor.activeInstances--}}}],[{key:"observedAttributes",get:function(){return this._observedAttributesDasherized}},{key:"dasherizeObservedAttributes",value:function(){for(var e=[],t=0;t<this._observedAttributes.length;t++)e[t]=H.String.dasherize(this._observedAttributes[t]);H.__dataNames.forEach((function(t){e.push(H.String.dasherize(t))})),H.customPropHandlers.forEach((function(t,r){e.push(H.String.dasherize(t))})),this._observedAttributesDasherized=e}},{key:"updateValue",value:function(e,t,r){for(var o=t.split("."),n=e,a=0;a<o.length-1;a++)n=n[o[a]];n[o[i]]=r}},{key:"createDocFragment1",value:function(e){if(e.content)return e.content;for(var t=e.childNodes,r=_(),o=t.length,n=0;n<o;n++)r.appendChild(t[0]);return r}},{key:"_registerComponentFn",value:_regenerator().m((function t(r,o,n){var i,a,c,d,p,u,f,h,m,v,y,_=this;return _regenerator().w((function(t){for(;;)switch(t.n){case 0:return-1!=H._reRegisteredComponents.indexOf(r)&&(o.component._template=JSON.parse(o.component._template),l.getConfig("lazyComponentRegister")&&H._reRegisteredComponents.splice(H._reRegisteredComponents.indexOf(r),1)),n&&(e.widgetComps=e.widgetComps||{},(e.widgetComps[n]=e.widgetComps[n]||[]).push(r)),this.__widgetName=n,i=H.lyteComponentsDiv,a=s.$.assetsDiv,c=this.component._template,m=g("div"),t.n=1,function(){if(_.component._template&&"string"==typeof _.component._template)for(_.component._template.replace(/\\'/g,"'"),m.innerHTML=_.component._template,n&&(h=document.createElement("template"));m.firstChild;)"STYLE"===m.firstChild.nodeName?(a.querySelector("style[from-component='"+r+"']")&&a.querySelector("style[from-component='"+r+"']").remove(),m.firstChild.setAttribute("from-component",r),h&&h.content.appendChild(m.firstChild.cloneNode(!0)),a.appendChild(m.firstChild)):("TEMPLATE"==m.firstChild.tagName&&(f=m.firstChild),i.appendChild(m.firstChild));else document.querySelector("template[tag-name='"+r+"']")&&(f=document.querySelector("template[tag-name='"+r+"']"),i.appendChild(f));if(_.component._template=f,n&&(_.component._template.setAttribute("widget",n),_.component._template._widgetStyles=h),_.component._template.class=_,_.component._template.widget=n,_._helperTemplate=document.createElement("template"),_._helperTemplate.setAttribute("_lyteht",r),H.h1Div.content.appendChild(_._helperTemplate),_.component._template){if(H.needDummyComponentsDiv)if(s._ie){var e=s.Compile.getTemplateFromString(c);H.dummyLyteComponentsDiv.appendChild(e)}else d=_.component._template.cloneNode(!0);if(_.component._template&&_.component._template.content,v=-1!==_.component._observedAttributes.indexOf("lyteUnbound"),y=s._ie?_.component._template:_.component._template.content,v&&(s._ie?((p=document.createElement("div")).innerHTML=_._template.outerHTML,p=p.childNodes[0]):p=_.component._template.cloneNode(!0)),_.splitTextNodes(y),v&&_.splitTextNodes(p),!_.component._dynamicNodes)if(s.Compile.getDynamicNodes){var t=s.Compile.getDynamicNodes(r,void 0,s._ie?y:void 0);if(t.errors)return console.error("Error in the component",t.componentName,t.errors),!1;_.component._dynamicNodes=t.dynamicNodes}else s.error("LC002",r)}};case 1:if(this.component._dynamicNodes){t.n=3;break}return t.n=2,"";case 2:t.n=7;break;case 3:return t.d(_regeneratorValues(X(y,this.component._dynamicNodes,r,this,p?s._ie?p:p.content:void 0)),4);case 4:return t.n=5,function(){s._ed?_._tC=_.component._tC=_.component._template.outerHTML:s._ie&&(_._tC=_.component._tC=y.outerHTML),_.component._templateAttributes=_.component._templateAttributes||{type:"attr",attr:{},position:[]},u=[_.component._templateAttributes]};case 5:return t.d(_regeneratorValues(X(this.component._template,u,r,this)),6);case 6:return t.n=7,function(){if(_.component._templateAttributes=u[0],_.component._templateAttributes&&_.component._templateAttributes.attr){var e=_.component._template.attributes;try{for(var t=0;t<e.length;t++){var r=e[t].name;_.component._templateAttributes.attr[r]||"tag-name"===r||"use-strict"===r||(_.component._templateAttributes.attr[r]={name:r,staticValue:e[t].value},_.component._template.removeAttribute(r),d&&d.removeAttribute(r),t--)}}catch(e){s.error("Error with templateAttributes. ")}}d&&H.dummyLyteComponentsDiv.appendChild(d),_.component._sta=p?H.processStatic(p):void 0};case 7:return t.n=8,function(){_.component.__isRegistered=!0,H.postRegistration(r,o)};case 8:return t.a(2)}}),t,this)}))},{key:"_registerComponent",value:function(e,t,r){for(var o,n=this._registerComponentFn(e,t,r),i=n.next();0==i.done;)"function"==typeof(o=i.value)&&o(),i=n.next()}},{key:"splitTextNodes",value:function(e){if(e&&e.childNodes&&e.childNodes.length)for(var t=e.childNodes.length-1;t>=0;t--)this.splitTextNodes(e.childNodes[t]);if("TEMPLATE"!==e.tagName||s._ie||this.splitTextNodes(e.content),e.nodeType===e.TEXT_NODE){var r=e.nodeValue;if(r){var o=r.match(/{{[^}]*?(?:(?:('|")[^\1]*?\1)[^}]*?)*}}/g);if(!o)return;for(var n=[],i=0;i<o.length;i++){var a=r.indexOf(o[i]),l=a+o[i].length;a&&n.push(document.createTextNode(r.substring(0,a))),n.push(document.createTextNode(r.substring(a,l))),r=r.substring(l)}if((r.trim()||!e.nextSibling||3!==e.nextSibling.nodeType||e.nextSibling.nodeValue.trim())&&n.push(document.createTextNode(r)),s._rwpf&&"#document-fragment"===e.parentNode.nodeName){for(var c=0;c<n.length;c++)b(e.parentNode,n[c],e);e.remove()}else e.replaceWith.apply(e,n)}}}}])}(R);function D(e){var t;return e&&(t=e.$node)&&t.__lyteWidget&&widgetMap.has(t.__lyteWidget)?widgetMap.get(t.__lyteWidget).getClone(e):e}S._V4InsApi=["doRegistration","getData","getDirectiveObj","getShadowObj","getFastObj","cmpBind","component","actualConstructor","_connectedCallback","actualConnectedCallback","getMethods","hasAction","setActions","setMethods","getCallee","afterConnected","bindServerData","bindServerNode","getServerTemplates","bindServerFor","bindServerIf","getRandomId","getssrType","renderComponent","renderFast","formatValue","renderNodes","executeBlockHelpers","updateBlockHelpers","_attributeChangedCallback","removeHelpersSpecificIndex","removeHelpers","updateYield","updateDynamicComponent","updateForHelper","updateForInHelper","rmCaseBindings","getCaseTemplate","getCaseIndexScope","getSwitchScope","updateSwitchHelper","callObservers","bindNode","debounce","getProperty","updateNode","handleBreak","createCustomEvent","isEmptyString","processArgs","internalHelpers","internalArray","processHelper","getActionProperty","hasInternalBindings","getArgValues","createEventListeners","registerParentYield","getYieldName","registerYields","onCallBack","callback","establishObserverBindings","removeBindings","actualDisconnected","_disconnectedCallback","throwAction","get","set"],S._V3InsApi=["doRegistration","getData","cmpBind","component","actualConstructor","_connectedCallback","actualConnectedCallback","getMethods","hasAction","setActions","setMethods","getCallee","afterConnected","renderComponent","renderFast","formatValue","renderNodes","executeBlockHelpers","updateBlockHelpers","_attributeChangedCallback","removeHelpersSpecificIndex","removeHelpers","updateYield","updateDynamicComponent","updateForHelper","updateForInHelper","updateSwitchHelper","callObservers","bindNode","debounce","getProperty","updateNode","handleBreak","createCustomEvent","isEmptyString","processArgs","internalHelpers","processHelper","getActionProperty","hasInternalBindings","getArgValues","createEventListeners","registerParentYield","registerYields","onCallBack","callback","establishObserverBindings","removeBindings","actualDisconnected","_disconnectedCallback","throwAction","get","set","initializeMethod"],S._V4StaticApi=["_observers","_callBacks","_properties","activeInstances","_depthTemp","_bindsIds","_ssr","_config","_mixins","_serviceToBeUsed","_actions","_template","_dynamicNodes","_templateAttributes","_observedAttributes","_observedMethodAttributes","_data","_methods","_pendingComponents","splitTextNodes","_registerComponent","createDocFragment1","updateValue","seperateStyle","getFastRenderSupported","setTemplateAttributes"],S.version={v3:{component:void 0}};var j=String.prototype._replace?String.prototype._replace:String.prototype.replace,I=(t={_windowEvNeeded:!1,defaultHelpers:["unbound","action","lbind","method","stringifyHTML","unescape","escape","debugger","log","ifEquals","if","negate","ifNotEquals","concat","encAttr","expHandlers","lyteViewPort"],baseCompClass:_createClass((function e(){var t=this;_classCallCheck(this,e),this.$||(this.$={});var r=this,o=function(e){var o=t;t.$[e]=function(){return o.$functions[e].apply(r,Array.from(arguments))}};for(var n in this.$functions)o(n);this.$.validate=function(){var e=r,t=e.data;for(var o in t)I.handleValidation(t,o,t[o],e)},this._setWidget&&this._setWidget()}),[{key:"executePrivate",value:function(){var e={};if(this._privateData){var t=this._privateData.apply(this);t.then||(t=Promise.resolve(t)),t.then((function(t){for(var r in t){var o=t[r];e.$set(r,o.default)}}))}return n.set(this,e),e}}]),fRP:{},fRC:0,customPropRegex:"",customPropHandlers:[],_registeredComponents:{},_reRegisteredComponents:[],toBeRegistered:[],getCmpData:function(e){return e&&e.__target__?e.__target__:e}},_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(t,"getCmpData",(function(e){return e&&e.__target__?e.__target__:e})),"updateCustomCrmComponent",(function(e,t){for(var r in e)if(e[r]&&"observer"===e[r].type)e[r].fnName=r,t.component._observers.push(e[r]);else if(e[r]&&"callBack"===e[r].type){for(var o=e[r].properties,n=0;n<o.length;n++)t.component._callBacks[o[n]]||(t.component._callBacks[o[n]]=[]),e[r].fnName=r,t.component._callBacks[o[n]].push(e[r]);e[r].observes&&(e[r].observes.fnName=r,t.component._observers.push(e[r].observes))}else t.component.prototype[r]=e[r];return e})),"dataFromMixin",(function(e,t,r,o){for(var n=e.length,i=0;i<n;i++)for(var a in e[i])"actions"===a?Object.assign(t,e[i][a]):"methods"===a?Object.assign(r,e[i][a]):o[a]=e[i][a];return{actionsFromMixin:t,methodsFromMixin:r,newDefinition:o}})),"throwEvent",(function(e){var t=this.$node?this.$node:this,r=t._actions?t._actions[e]:void 0,o=[];if(arguments.length>1)for(var n=1;n<arguments.length;n++)o.push(arguments[n]);H.throwAction.call(t,t._callee,e,void 0,!0,o,t),this.$node&&t.dispatchEvent(r||new CustomEvent(e,{detail:o}))})),"throwAction",(function(t,r,o,n,i,a,l,c,d){var p,u=!1;if(this._route&&n)p=(t=s.Router.getRouteInstance(this._route)).actions||(t.actions={});else if(this.routeName){var f=this.parent;f&&(p=f.component?(t=f.component).component?t.component.constructor._actions:(t=s.Router.getRouteInstance(t._route)).actions||(t.actions={}):(t=f).actions||(t.actions={}))}else if(t){if(!t.component||t._didDestroyCalled)return;p=t.component.constructor._actions}if(t){if(s.isWidgetBuild){if(!this.__widget)return}else if(this.__widget)return;var h=i||[];if(o=o||(this._actions&&this._actions[r]?this._actions[r].processAction:void 0)){var m,v=[];if(a&&H.adCx(a,v),m=o.skipArgProcessing?o.args:s.isWidgetBuild||e.isLyteWidget?t.processArgs(t,{helperInfo:o},void 0,l,a):this.processArgs(t,{helperInfo:o},void 0,l,a),h.splice.apply(h,[0,0].concat(m)),a&&H.rmCx(a,v),p[o.name])if(n){var y=this._callee.component;H.debugPerf(this,this.__renderId,"Action : "+o.name,this.localName),p[o.name].apply(D(y),h),H.debugPerf(this,this.__renderId,"Action : "+o.name,this.localName),c=!0}else{var _=a.parentNode,g=this.component;H.debugPerf(this,this.__renderId,"Action "+o.name,this.localName);var b=p[o.name].apply(D(g),h);if(H.debugPerf(this,this.__renderId,"Action "+o.name,this.localName),l.currentTarget instanceof DocumentFragment||l.currentTarget==document.body||d||(b=!1),c=!0,u=B.shouldStop(a,l),!1!==b&&!l.cancelBubble&&!u)if(o.from&&a.getAttribute(l.type)&&a._boundEvents&&a._boundEvents[l.type]){a._callee.component.constructor._actions;var A=a._boundEvents[l.type],E=s.deepCopyObject(A);H.skipArgProcessing(E,l,a),H.throwAction.call(a._callee,a._callee,l.type,E,void 0,void 0,a,l,c)}else{if(H.hasLyteEvents(a,r)&&(b=!H.handleLyteEvents(a,l)),!1===b)return;if(H.isCustomElement(a)&&(t=_),_&&(l.currentTarget==document.body||l.currentTarget instanceof DocumentFragment)){for(var C;_&&_.getAttribute&&(!_.getAttribute(r)||_.hasAttribute("disabled"))&&"BODY"!=_.tagName&&(!_._hiddenBoundEvents||!_._hiddenBoundEvents[r])&&(!H.hasLyteEvents(_,r)||!(C=H.handleLyteEvents(_,l)));)_=_.parentNode;if(C||!_||"BODY"===_.tagName)return;if(_._callee||(_._callee=_.getCallee?_.getCallee(_):H.getCallee(_)),_&&l.type===r&&!l.cancelBubble){if(_._evBoundEvents&&_._evBoundEvents[r]){var L=_._evBoundEvents[r],$=s.deepCopyObject(L);H.skipArgProcessing($,l,_),H.throwAction.call(_,_,r,$,void 0,void 0,_,l,c)}else if(_&&_._boundEvents&&_._boundEvents[r]){var P=_._boundEvents[r],w=s.deepCopyObject(P);H.skipArgProcessing(w,l,_),H.throwAction.call(_._callee,_._callee,r,w,void 0,void 0,_,l,c)}B.triggerGlobalEvent(_,r,l,c,!0)}}}}else s.error("LC004",o.name)}else if(n&&p){var R=p[r]||p[H.String.toCamelCase(r)]||p[H.String.dasherize(r)];if(R){var N=H.isCustomElement(t)?t.component:t;c=!0,!1!==R.apply(D(N),h)&&H.throwAction.call(t,t._callee,r,o,n,i,void 0,void 0,c)}else H.throwAction.call(t,t._callee,r,o,n,i,void 0,void 0,c)}}else this.component&&this instanceof HTMLElement&&this.hasAttribute("comp-in-parent")?DataBindingLayer.sendThrowEventUpdate(this,r,i):c||s.warn("Nothing handled the action "+r+".")})),"isControlHelper",(function(e){return"TEMPLATE"===e.tagName&&e.getAttribute("is")&&"component"!==e.getAttribute("is")||e.hasAttribute("lyte-for")||e.hasAttribute("lyte-if")||e.hasAttribute("lyte-switch")||e.hasAttribute("lyte-forin")})),"isCustomElement",(function(e,t){return e.hasAttribute&&(("TEMPLATE"===e.tagName||e.attributes["lyte-for"]||e.attributes["lyte-if"]||e.attributes["lyte-switch"]||e.attributes["lyte-forin"])&&t||e.nodeName&&-1!==e.nodeName.indexOf("-")&&(e.localName.startsWith("lyte-")||e.localName.startsWith("crux-")||P.registeredComponents[e.localName]||"LYTE-YIELD"===e.tagName||e.hasAttribute("lyte-v4")||e.hasAttribute("lyte-widget")||e.hasAttribute("lyte-registry")||(e._attributes?e._attributes["lyte-registry"]:void 0)))})),"isCustomElementV3",(function(e,t){return e.hasAttribute&&(("TEMPLATE"===e.tagName||e.attributes["lyte-for"]||e.attributes["lyte-if"]||e.attributes["lyte-switch"]||e.attributes["lyte-forin"])&&t||e.nodeName&&-1!==e.nodeName.indexOf("-")&&(P.registeredComponents[e.localName]||"LYTE-YIELD"===e.tagName))})),"componentSet",(function(t,r,o,n,i,a){n||this.get(t)!==r?((e.isLyteWidget||e.__lyteEnablePromise)&&r instanceof Promise&&!r.__lyte&&(H.listenPromise(this.data,t,r),o||(o={}),o.skipTypeCast=!0,o.skipValidation=!0),H.set(this.data,t,r,o,void 0,i,a)):H.clearError(this.data,t)})),"componentGet",(function(e){return e?H.get(this.data,e):this.data})),_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(t,"nodeGet",(function(e){return e?this.component.get(e):this.component.data})),"nodeSet",(function(t,r,o,n,i){e.isLyteWidget&&this.hasAttribute("comp-in-parent")&&("object"==_typeof(r)?this.setAttribute(H.String.dasherize(t),JSON.stringify(r)):this.setAttribute(H.String.dasherize(t),r)),!this.component&&e.isLyteWidget?l.Component.set(this.$data,t,r):this.component.set(t,r,o,void 0,n,i)})),"registerComponentWrapper",(function(){try{var e=H.registerComponent.apply(H,arguments);return s._postRegister(),e}catch(e){s._postRegister()}})),"registerComponent",(function(t,r,o,n,i){var c;if(i){c=i,r.data=c.prototype.data,r.actions=c.actions?c.actions():{},r.methods=c.methods?c.methods():{},r._helpers=c.helpers?c.helpers():{};var d=c.observers?c.observers():{};for(var p in d)r[p]=d[p]}if(-1!=H._reRegisteredComponents.indexOf(t)||!P.registeredComponents[t]||n&&!(n&&P.registeredWidgetComponents&&P.registeredWidgetComponents[n]&&P.registeredWidgetComponents[n][t])){var u,f;!n&&H._registeredComponents[t]||n&&P.registeredWidgetComponents&&P.registeredWidgetComponents[n]&&P.registeredWidgetComponents[n][t]?(u=H._registeredComponents[t],f=!0):(u=function(e){function t(){return _classCallCheck(this,t),_callSuper(this,t,arguments)}return _inherits(t,e),_createClass(t)}(S),u._properties={},u.activeInstances=0,u.prototype.throwAction=this.throwAction,u.compName=t,H.directive.registeredProp[t]=[]),B.define.remove(u),B.define.getContent(u),Object.defineProperty(u.prototype,"setData",{configurable:!0,writable:!0,value:function(e,t,r){return this.component?this.component.setData(e,t,r):this.set(e,t,r)}}),Object.defineProperty(u.prototype,"toggleData",{configurable:!0,writable:!0,value:function(e){if(!this.component){var t=H.get(this.$data,e);return this.set(e,!t)}return this.component.toggleData(e)}}),Object.defineProperty(u.prototype,"getData",{configurable:!0,writable:!0,value:function(e){return this.component?this.component.getData(e):H.get(this.$data,e)}}),Object.defineProperty(u.prototype,"setMethods",{configurable:!0,writable:!0,value:function(e,t){return this.component.setMethods(e,t)}}),u.prototype.get=this.nodeGet,u.prototype.set=this.nodeSet,u._bindsIds=[];var h=(o=o||{}).alias,m=n?widgetScopeMap.get(n):void 0,v=(m&&m.Lyte,{}),y={};for(var p in o)"services"==p&&(y[p]={},o.services.forEach((function(e){if("string"==typeof e)y[p][e]=e;else if(e&&"object"===_typeof(e)){var t=e.as,r=e.service;l._keywords.is(t,"component")?l.warn("Service cannot be used in any keywords of Lyte."):e.scope&&"static"!=e.scope?"instance"==e.scope&&(r=e.service,t=e.as||r,v[p]=v[p]||{},v[p][t]=r):y[p][t]=r}}))),"mixins"==p&&(y[p]=[],Array.isArray(o.mixins)?o.mixins.forEach((function(e){s.Mixin.exists(e)?y[p].push(s.registeredMixins[e]):s.$.requiredMixins(e,t,"component")})):s.error("Mixins should be passed inside an array")),"ssr"==p&&(u._ssr=o[p],o[p].config&&(u._config=o[p].config));c||(c=function(e){function t(){return _classCallCheck(this,t),_callSuper(this,t,arguments)}return _inherits(t,e),_createClass(t)}(I.baseCompClass));var _=c.prototype.$functions={};_.validate=function(){var e=this.data;for(var t in e)H.handleValidation(e,t,e[t],this)},_.getError=function(e){return H.getErrorStructure(this,e)},_.addEventListener=function(){return e.LyteWidgetClass.addEventListener.apply(this,Array.from(arguments))},_.removeEventListener=function(t){var r=this.__wName;e.LyteWidgetClass.removeEventListener.call(this,t,r)},_.triggerEvent=function(t,r,o,n){return e.LyteWidgetClass.triggerEvent.apply(this,Array.from(arguments))},c.prototype._setWidget=function(){n&&Object.defineProperty(this,"__wName",{enumerable:!1,configurable:!1,writable:!1,value:n})},c._v3=!0,c._widget=n,u.component=c,c._helpers=r._helpers||{},delete r.helpers;var g=c.prototype;g.$lg=l.__gl,g.set=this.componentSet,g.get=this.componentGet,e.requireValidateInComponent&&(g.validate=function(){var e=this.data;for(var t in e)H.handleValidation(e,t,e[t],this)}),g.throwEvent=this.throwEvent,g.executeMethod=H.executeMethod,g.getData=H.componentGetData,g.setData=H.componentSetData,g.toggleData=H.componentToggleData,g.getMethods=H.componentGetMethods,g.setMethods=H.componentSetMethods,g.hasAction=H.componentHasAction,g.setActions=H.componentsetActions,u._mixins=o.mixins,u._serviceToBeUsed=v?v.services:void 0;var b={},A=l.toBeInjectedServices;if(A)for(var E in A)l.$.injectServices.component(E,A[E],void 0,l.__gS[E],u);for(var C in y)if("mixins"==C){var L={},$={};H.dataFromMixin(y.mixins,b,L,$),r=Object.assign($,r),b=Object.assign(b,{})}else if("services"==C){var w=y[C];for(var R in w)l.registeredServices.hasOwnProperty(w[R])?r[R]=l.$.instantiateService(w[R]):l.$.requiredServices(R,w[R],(function(e,r,o,n){H._registeredComponents[t].component.prototype[r]=l.$.instantiateService(n)}))}u._actions=Object.assign({},b,r.actions),u._dynamicNodes=r._dynamicNodes,u._templateAttributes=r._templateAttributes,u._callBacks={},u._observers=[],c._callBacks={},c._observers=[],c._properties={},c.activeInstances=0;var N=P.__globalObs;if(N)for(var p in N)r[p]=N[p];if(c._depthTemp=document.createElement("template"),c._mixins=o.mixins,c._actions=u._actions,c._template=r._template,c._dynamicNodes=r._dynamicNodes,c._templateAttributes=r._templateAttributes,r._preRenderTemplate){var O=r._preRenderTemplate,T=document.createElement("div");T.innerHTML=O,c._preRenderTemplate=T.firstChild,r._preRenderTemplate=null}delete r._template,delete r._dynamicNodes,delete r._templateAttributes;var k=r.data?r.data:void 0,x=Object.assign({},L,r.methods);u._observedAttributes=r._observedAttributes||[],u._lyteUtilFunctions=r._lyteUtilFunctions||[],H._lyteUtilFunctions[t]=r._lyteUtilFunctions||[];var D,j=r._observedAttributes,M=r._observedAttributesType,F=H._observedAttributesType[t]={};if(M&&M.length&&M.forEach((function(e,t){F[j[t]]=e})),u.dasherizeObservedAttributes(),u._observedMethodAttributes=r._observedMethodAttributes||{},c._observedAttributes=r._observedAttributes||[],c._observedMethodAttributes=r._observedMethodAttributes||{},u._deepWatchProperties=r._deepWatchProperties||{},delete r._observedAttributes,delete r._observedMethodAttributes,delete r.data,delete r.methods,r=H.updateCustomCrmComponent(r,u),u._data=k,u._privateData=u._privateData||r._privateData,delete r._privateData,u._methods=x,c._data=k,c._methods=x,l.getConfig("lazyComponentRegister")?(a.tasks.get(t)&&a.deleteTask(t),a.enqueueTask(u._registerComponentFn(t,u,n),[],t)):u._registerComponent(t,u,n),P.registeredComponents[t]=!0,h&&(P.registeredComponents[h]=!0),s.isWidgetBuild&&(e._wrapperComponents.push(t.toUpperCase()),h&&e._wrapperComponents.push(h.toUpperCase())),H._registeredComponents[t]||("complete"===document.readyState||"interactive"===document.readyState||l.getConfig("preLoadLyteComponents")?(customElements.define(t,u,void 0,s.isWidgetBuild?{widget:!0}:{v3:!0}),h&&(D=function(e){function t(){return _classCallCheck(this,t),_callSuper(this,t,arguments)}return _inherits(t,e),_createClass(t)}(u),customElements.define(h,D,void 0,s.isWidgetBuild?{widget:!0}:{v3:!0}))):(H.toBeRegistered.push({name:t,def:u,_lyteOptions:s.isWidgetBuild?{widget:!0}:{v3:!0}}),h&&(D=function(e){function t(){return _classCallCheck(this,t),_callSuper(this,t,arguments)}return _inherits(t,e),_createClass(t)}(u),H.toBeRegistered.push({name:h,def:D,_lyteOptions:s.isWidgetBuild?{widget:!0}:{v3:!0}}))),H._registeredComponents[t]=u,h&&(H._registeredComponents[h]=D,H._lyteUtilFunctions[h]=r._lyteUtilFunctions||[],H._observedAttributesType[h]=H._observedAttributesType[t])),n){var K=P.registeredWidgetComponents=P.registeredWidgetComponents||{};(K[n]=K[n]||{})[t]=u}var U=H.V3.pendingComp.find(t);if(U&&U.length&&H.V3.pendingComp.execute(V),f){var V=u._pendingComponents||[];V.forEach((function(e){delete e.__lyteIgnore,e.actualConstructor(),Array.from(e.attributes).forEach((function(t){-1!=e.constructor.observedAttributes.indexOf(t.name)&&e.attributeChangedCallback(t.name,null,t.value)})),e.connectedCallback()})),u._pendingComponents=[]}return u}s.warn("Component "+t+" already registered")})),"postRegistration",(function(e,t){var r=t.component._depthTemp;!H._ie&&r&&r.content.childNodes.length?(r.setAttribute("data-id","depthTemp_"+e),H.lyteComponentsDiv.appendChild(r)):delete t.component._depthTemp})),"registerHelper",(function(e,t){P.registeredHelpers[e]=t})),"registerMixin",(function(e,t){s.Mixin.register.call(s,e,t)})),"typeCast",(function(e,t,r){if(null===e)return e;try{switch(t){case"string":return"object"===_typeof(e)?JSON.stringify(e):e.toString();case"number":if(""==e)return;var o=+e;if(isNaN(o))throw"TypeCast exception";return o;case"array":case"object":return JSON.parse(e);case"boolean":return!(!e&&""!==e||"false"===e);default:return e}}catch(t){return r&&(r.isError=!0),e}})),"sendtoclient",(function(e,t,r){var o=t?e.component.data:e,n={},i=r;for(var a in o)if(t){var s=e.component.__data[a];if("bindIds"==a&&(n[a]={value:o[a]}),s&&/^(object|array)$/.test(s.type)&&e._attributeDetails&&e._attributeDetails.hasOwnProperty(I.String.dasherize(a)))n[a]={fP:!0};else if(o[a]instanceof Date)n[a]={value:o[a],type:"Date"};else if(i[a])n[a]={value:o[a],type:i[a].type};else{var l=_typeof(o[a]);null==o[a]&&(l=void 0),n[a]={value:o[a],type:l}}}else"Date"==o[a].type?n[a]=new Date(o[a].value):o[a].fP||(n[a]=o[a].value);return n})),"getDataType",(function(e){var t=_typeof(e);return"object"===t&&Array.isArray(e)?"array":t})),_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(t,"getAttrDataType",(function(t,r){var o=e._observedAttributesType;if(o&&o[t])return o[t][r]})),"handleValidation",(function(e,t,r,o,n){var i=s.validate(e,t,r,o,n),a=I.getCmpData(o.data);return i?(H.set(a.errors,t,i),o.$node.callback&&o.$node.callback("onError",t,i)):H.clearError(e,t),i})),"clearError",(function(e,t){e.errors&&e.errors[t]&&s.objectUtils(e.errors,"delete",t)})),"createLyteId",(function(e){return e.__counter++,"__lyteId"+e.__counter})),"apdNode",(function(e,t){H.tDiv.content.appendChild(e);var r=this.createLyteId(t);t.__h[r]=e,e.__lyteId=r})),"update",(function(t,r,o,n,i,a,s,c,d,p,u){var f,h,m=t.__component__,y=!0;if(!a){if(a=t[r],m&&"LYTE-YIELD"!==m.tagName){if(h=m.component.__data[r],(!n||"object"==_typeof(n)&&1!=n.skipValidation)&&h&&(f=h.type)&&(y=!h.hideAttr,f===H.getDataType(o)||void 0===o&&"boolean"!==f||(o=H.typeCast(o,f))),!(o!==a||n&&n.force))return void H.clearError(t,r);if((!n||"object"==_typeof(n)&&1!=n.skipValidation)&&H.handleValidation(t,r,o,m.component))return}t.hasOwnProperty(r)||Array.isArray(t)?(!e.isLyteWidget||n&&0==n.postmessage?!l.isWidgetBuild||n&&0==n.postmessage||!t.__component__||!t.__component__.hasAttribute("comp-in-parent")||u||DataBindingLayer.sendDataUpdateToFrame(t.__component__,_defineProperty({},r,o)):DataBindingLayer.valueSet(t,r,o),t[r]=o):H.oF(t,"add",r,o,!0)}e.isLyteWidget&&n&&!1===n.postmessage&&(y=!1);var _,g,b,A=!!m,E=H.String.dasherize(r),C=!1;if(t._scp&&(l.cmpData(a,o)||(C=!0),a&&(Array.isArray(a)||"object"==_typeof(a))&&Array.from(t._scp.keys()).forEach((function(e){var t=l.nestScp[e],r=t.cyclic;l.removeNestScp(a,e),r&&l.bindObj(t._data,void 0,e,[],new Map,void 0,void 0,!0)}))),(l.isRecord(t)&&t.$.__scpObj||t.hasOwnProperty("__component__")&&t.__component__.__scpObj)&&(l.isRecord(t)?(_=t.$.__scpObj,g=t):(_=t.__component__.__scpObj,g=t.__component__),_.hasOwnProperty(r))){var L=_[r].split("_");l.removeNestScp(a,L[0],L[1],void 0,g,void 0,l.isRecord(o)||Array.isArray(o)&&o.model&&o.add?o:void 0),delete _[r]}if(h&&l.Transform[h.type]){var $=l.Transform[h.type];/^(object|array)$/.test($.extends)&&($.hasOwnProperty("properties")||$.hasOwnProperty("items"))&&(b=!0)}if((i&&l.isRecord(t)||t&&t.hasOwnProperty("_scp")&&t._scp.size||h&&/^(object|array)$/.test(h.type)&&1==h.watch||b)&&l.establishObjectBinding(t,r,i,!0,p,h&&h.watch?h.watch:void 0),m&&c&&("string"==typeof o&&m.getAttribute(E)!==o||m.hasAttribute(E))&&(!H.customPropRegex.exec(r)||m.hasAttribute(E))&&y)if(o&&"object"===_typeof(o)){var P,w;try{var R=JSON.parse(m.getAttribute(E));P=JSON.stringify(R)}catch(e){}try{if(w=JSON.stringify(o),!l.isWidgetBuild||!u||P!==w){var N=m.attributes.getNamedItem(E);N.__lyteIgnore=!0,m.setAttribute(E,w),N.__lyteIgnore=!1}}catch(e){}}else{var O=H.typeCast(o,"string");try{if(m.getAttribute(E)!==O){var T=m.attributes.getNamedItem(E);T&&(T.__lyteIgnore=!0),O=O||"",m.setAttribute(E,O),T&&(T.__lyteIgnore=!1)}}catch(e){}}if(o&&"string"!=typeof o&&"boolean"!=typeof o&&"number"!=typeof o){if(a&&"object"===_typeof(a)&&a._bindings){o._bindings||defProp(o,"_bindings",{enumerable:!1,writable:!0,value:new Set,configurable:!0});var k=m?I.getCmpData(m.component.data):void 0;if(m&&k===t&&-1===r.indexOf(".")&&!e.isLyteWidget){var x=m.getProperty(r);if(this.removeSelectedBindingDeep(x,a),v(o,x),this.establishBindings(x,o),x._forHelpers)for(var S=x._forHelpers.toArrayLyte(),D=0;D<S.length;D++){var j=S[D];j._propBindingObject&&this.removeSelectedBindingDeep(j._propBindingObject,a)}this.affectChanges(x,void 0,a,s,t[r],void 0,n)}else if(t._bindings)for(var M=t._bindings.toArrayLyte(),B=0;B<M.length;B++){var F=M[B][r];if(F){if(this.removeSelectedBindingDeep(F,a),v(o,F),this.establishBindings(F,o),F._forHelpers)for(var K=F._forHelpers.toArrayLyte(),U=0;U<K.length;U++){var V=K[U];V._propBindingObject&&this.removeSelectedBindingDeep(V._propBindingObject,a)}this.affectChanges(F,void 0,a,s,t[r],void 0,n)}}}else if(t._bindings)for(var q=t._bindings.toArrayLyte(),z=0;z<q.length;z++){var W=q[z];W[r]&&(v(o,W[r]),this.establishBindings(W[r],o),this.affectChanges(W[r],void 0,a,s,t[r],void 0,n))}h=h||(m&&"LYTE-YIELD"!==m.tagName?m.component.__data[r]:void 0),i&&l.isRecord(t)||t&&t.hasOwnProperty("_scp")&&t._scp.size||h&&/^(object|array)$/.test(h.type)&&(h.watch||h.hasOwnProperty("items")||h.hasOwnProperty("properties"))}else{if(a&&"object"===_typeof(a)&&a._bindings&&t._bindings)for(var G=t._bindings.toArrayLyte(),Y=0;Y<G.length;Y++){var J=G[Y];if(J[r]&&(this.removeSelectedBindingDeep(J[r],a),J[r]._forHelpers))for(var Q=J[r]._forHelpers.toArrayLyte(),X=0;X<Q.length;X++){var Z=Q[X];Z._propBindingObject&&this.removeSelectedBindingDeep(Z._propBindingObject,a)}}if(t._bindings)for(var ee=t._bindings.toArrayLyte(),te=0;te<ee.length;te++){var re=ee[te];re[r]&&this.affectChanges(re[r],void 0,a,s,t[r],void 0,n)}}C&&t._scp&&this.callDeepObservers(t,{type:"deepChange",oldValue:a,newValue:o},r);var oe=H.String.dasherize(r);if(m&&m.__widgetP&&DataBindingLayer.sendLbindUpdate(m,oe,o),A&&!d&&m._attributeDetails&&m._callee){var ne,ie=H.String.dasherize(r),ae=m._attributeDetails[ie];if(ae&&ae.isLbind&&(ne=ae.dynamicValue),ne){var se;m._cx&&(se=[],H.changeContext(m._cx.node,se,m._cx));var le=I.getCmpData(m._callee.component.data),ce=H.getNew(le,ne);if(!ce.context)return;var de=!1;if(ce.context===le?m._callee._properties[ce.lastKey]&&m._callee._properties[ce.lastKey].__fromComponent&&(de=!0):de=!0,de){var pe=+ce.lastKey;if(Array.isArray(ce.context)&&"number"==typeof pe){var ue=pe<ce.context.length;ce.context[pe]===o&&ue||H.aF(ce.context,ue?"replaceAt":"insertAt",pe,o)}else H.set(ce.context,ce.lastKey,o,n)}se&&H.removeContext(m._cx.node,se,m._cx)}}})),"getContentForIE",(function(e,t,r,o){if("string"==typeof e){r=!0;var n=g("div");n.innerHTML=e,e=n.childNodes[0],t.splitTextNodes(e)}if(e.getAttribute&&e.getAttribute("depth")){l._ms&&o&&(o._content=n);var i=parseInt(e.getAttribute("depth"));e=s._ie?e:r?e.content:e.content.cloneNode(!0);for(var a=0;a<i;a++)e=e.childNodes[0]}return e})),"replaceWithPf",(function(e,t){s._rwpf?(b(e.parentNode,t,e),e.remove()):e.replaceWith(t)})),"getCallee",(function(e,t){for(;e&&!H.isCustomElementV3(e)&&"LYTE-YIELD"!==e.tagName;){if("BODY"===e.tagName){e=null;break}e=e.parentNode}return e&&"LYTE-YIELD"===e.tagName?e._registerYield?e._registerYield._callee:void 0:t===e?void 0:e})),"set",(function(e,t,r,o,n,i,a){var c,d,p=-1,u={};l.isRecord(e)&&n&&(c=e),"object"===_typeof(t)&&t||(p=(t+="").lastIndexOf("."));var f=t;if(-1!==p){var h=t.substring(0,p);t=t.substring(p+1),e=H.get(e,h),d=!0}e&&e.__ltPrx__&&(e=e.__target__);var m=e[t]&&e[t].__target__?e[t].__target__:e[t],v=r&&r.__target__?r.__target__:r;if("string"!=typeof t||m!==v||o&&o.force){if(e._setterScope)var y=e._setterScope;var _=[];if(e._scp&&e._scp.size&&(Array.from(e._scp.keys()).forEach((function(t){var r=e._scp.get(t);obj=r.paths;var o,n,i,a=l.nestScp[t],s={},c=Object.keys(obj);if(c.length>1?i="*":1==c.length&&(i=c[0]),s.path=i,s.id=t,c.length>1&&(s.paths=c),s.attr=void 0,s.data=a.data,s.PropsInfo=a.PropsInfo||void 0,a.model){var d=a.model;s.Error=a.Error;for(var p=Array.from(a.model.keys()),u=0;u<p.length;u++){var f=p[u],h=d.get(f);if(h)for(var m=Array.from(h.keys()),v=m.length,y=0;y<v;y++){var g=m[y],b=h.get(g),A=Array.from(b.keys()),E=A.length;for(k=0;k<E;k++){var C=A[k],L=Object.assign({},s),$=store.peekRecord(f,g);$&&((n=(o=$.$.model).fieldList[C])&&(n.properties||n.items||1==n.watch||l.Transform[n.type])&&(L.data=l.deepCopyObject($[C]),L.rec=$,L.isRec=!0,L.attr=C,L.dtype=o.fieldList[C],L._cmpErr=$.$.error,L.key=C),_.push(L))}}}}else _.push(s)})),_.forEach((function(i){if(!o||"object"==_typeof(o)&&1!=o.skipValidation){var a=i.id,s=i.path.split("."),c=i.dtype;i.isRec&&(n&&((s=f.split(".")).splice(-1),s.shift()),s=1==s.length&&s[0]==t?[]:s,u.Prop=c,l.checkNestedProp(a,s,c,i,e,t,r,u,n)),i.PropsInfo&&i.PropsInfo.forEach((function(o){o.path=i.path,o.attr=i.attr,c=o.dtype,u.Prop=c,l.checkNestedProp(a,s,c,o,e,t,r,u,n)}))}})),u.value&&u.value.code))return void s.error("ERR35",u.Prop.type);f=f===t?f:void 0;var g={};if("object"===_typeof(t))if(!s.isRecord(e)||n||e.$.isCloned)for(var b in t)H.set(e,b,t[b],r,n,i);else{for(var A in t){var E=t[A],C=e.$.model.fieldList[A];!(C=C?C.type:void 0)||void 0===E&&"boolean"!==C||C===H.getDataType(E)||(t[A]=H.typeCast(E,C))}var L=store.$.setData(e.$,t,void 0,o,void 0,void 0,g);if(L.$.isError)return L}else if(s.isRecord(e)&&(!n||n&&d)&&!e.$.isCloned){e[t];var $=e.$.model.fieldList[t];!($=$?$.type:void 0)||void 0===r&&"boolean"!==$||$===H.getDataType(r)||(r=H.typeCast(r,$));var P=store.$.setData(e.$,t,r,o,void 0,void 0,g);if(P.$.isError)return P}else H.update(e,t,r,o,n,void 0,y,f,i,c,a);_&&_.length&&_.forEach((function(e){e.isRec&&store.$.deepValueChange(e.rec,e.attr,e.rec[e.attr],e)}))}else e.__component__?H.clearError(e,t):s.isRecord(e)&&!e.$.isCloned&&(store.$.clrRecErr(e.$,t),e.$.emit&&e.$.emit("set",[e,t]),e.$.model&&e.$.model.emit&&e.$.model.emit("set",[e.$.model._name,e,t]),store.emit&&store.emit("set",[e.$.model._name,e,t]))})),_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(t,"adCx",(function(e,t){var r="LYTE-YIELD"===e.tagName;!e._cx||r&&"LYTE-YIELD"===e._cx.node.tagName?r&&e._callee._cx&&H.changeContext(e._callee._cx.node,t,e._callee._cx,!0):H.changeContext(e._cx.node,t,e._cx,r)})),"rmCx",(function(e,t,r){var o="LYTE-YIELD"===e.tagName;!e._cx||o&&"LYTE-YIELD"===e._cx.node.tagName?o&&e._callee._cx&&H.removeContext(e._callee._cx.node,t,e._callee._cx,!0,r):H.removeContext(e._cx.node,t,e._cx,o,r)})),"changeContext",(function(e,t,r,o){if(r){var n,i,a="LYTE-YIELD"===e.tagName;if(!e._cx||a&&"LYTE-YIELD"===e._cx.node.tagName?("LYTE-YIELD"===e.tagName||o)&&e._callee&&e._callee._cx&&H.changeContext(e._callee._cx.node,t,e._callee._cx):H.changeContext(e._cx.node,t,e._cx,"LYTE-YIELD"===e.tagName||o),a){var s=e._registerYield._callee;s&&s._cx&&H.changeContext(s._cx.node,t,s._cx)}if(r.type){if("for"===r.type){if(n=e.getAttribute("index"),i=e.getAttribute("item"),0===e._items.length)return}else if(n=e.getAttribute("key"),i=e.getAttribute("value"),0===Object.keys(e._items).length)return;var l=e._callee,c=I.getCmpData(l.component.data),d=c[i],p=c[n],u=l._properties[i],f=l._properties[n],h={};e._childProp&&e._childProp.length?e._childProp.forEach((function(o){if(r.node._propNodes[o]){h[o]={data:l.component.data[o],prop:l._properties[o]};var n=r.itemIndex;l.component.data[o]=r.node._propNodes[o][n],l._properties[o]=e._items[n].propProperty[o],t.__prop=!0}})):e._currentProp&&e._currentProp.length&&e._currentProp.forEach((function(o){if(r.node._propNodes[o]){h[o]={data:l.component.data[o],prop:l._properties[o]};var n=r.itemIndex;l.component.data[o]=r.node._propNodes[o][n],l._properties[o]=e._items[n].propProperty[o],t.__prop=!0}}));var m="for"===r.type?e._currentItems:e._currentObject;c[i]=m[r.itemIndex],c[n]=r.itemIndex,l._properties[i]=e._items[r.itemIndex].itemProperty,l._properties[n]=e._items[r.itemIndex].indexProperty;var v={initialItemValue:d,initialIndexValue:p,initialItemProp:u,initialIndexProp:f,initialPropDetails:h};t.push(v)}else{var y={},_=e._registerYield._callee,g=I.getCmpData(_.component.data);Object.keys(r.node._properties).forEach((function(e){y[e]={},y[e].value=g[e],y[e].property=_._properties[e],_._properties[e]=r.node._properties[e];var t=I.getCmpData(r.node.component.data);g[e]=t[e]})),t.push(y)}}})),"gotoParentContext",(function(e,t,r,o,n){var i="LYTE-YIELD"===e.tagName;if(n||(!e._cx||i&&"LYTE-YIELD"===e._cx.node.tagName?("LYTE-YIELD"===e.tagName||o)&&e._callee&&e._callee._cx&&H.removeContext(e._callee._cx.node,t,e._callee._cx):H.removeContext(e._cx.node,t,e._cx,"LYTE-YIELD"===e.tagName||o)),i){var a=e._registerYield._callee;a&&a._cx&&H.removeContext(a._cx.node,t,a._cx)}})),"removeContext",(function(e,t,r,o,n){if(r){var i,a;if(t.__prop||this.gotoParentContext(e,t,r,o,n),r.type){if("for"===r.type){if(i=e.getAttribute("index"),a=e.getAttribute("item"),0===e._items.length)return}else if(i=e.getAttribute("key"),a=e.getAttribute("value"),0===Object.keys(e._items).length)return;var s,l=e._callee,c=(e._attributes.items,I.getCmpData(l.component.data));s=t.__prop?t.pop():t.shift(),c[a]=s.initialItemValue;var d=s.initialPropDetails;if(d)for(var p in d){var u=d[p];c[p]=u.data,l._properties[p]=u.prop}c[a]=s.initialItemValue,c[i]=s.initialIndexValue,l._properties[a]=s.initialItemProp,l._properties[i]=s.initialIndexProp}else{var f,h=e._registerYield._callee,m=I.getCmpData(h.component.data);f=t.__prop?t.pop():t.shift(),Object.keys(r.node._properties).forEach((function(e){m[e]=f[e].value,h._properties[e]=f[e].property}))}t.__prop&&this.gotoParentContext(e,t,r,o,n)}})),"sortCommands",(function(e,t){var r={};e&&e.__target__&&(e=e.__target__);var o=e.slice();r.origianlArray=e;for(var n=[],i=0;i<t.length;i++){var a=t[i];t[i]&&t[i].__target__&&(a=t[i].__target__);var s=o.indexOf(a);-1===s?(n.push({type:"Add",element:a,toIndex:i}),o.splice(i,0,a)):s!==i&&(n.push({type:"Move",element:a,fromIndex:s,toIndex:i}),o.splice(s,1),o.splice(i,0,a))}for(var l=o.length-1;l>=t.length;l--)n.push({type:"Remove",element:o[l]}),o.splice(l,1);return r.commands=n,r.changedArray=t,r})),"oF",(function(){var e=arguments[0];e&&e.__target__&&(e=e.__target__);var t=arguments[1],r=arguments[2],o=arguments[3];o&&o.__target__&&(o=o.__target__);var n=arguments[5];if("add"!==t||arguments[4]||e._propNodes){var i={};if(i.type=t,i.property=r,/^(add|delete)$/.test(t)){var a=e._bindings;if("delete"===t?H.set(e,r,void 0,void 0,n):e[r]=o,a)for(var l=a.toArrayLyte(),c=0;c<l.length;c++){var d=l[c]._forHelpers;if(d)for(var p=d.toArrayLyte(),u=0;u<p.length;u++){var f=p[u];if("forIn"==f.getAttribute("is")){f.getAttribute("key");var h=[];"add"===t&&H.adCx(f,h),f._callee.updateForInHelper(f,i),"add"===t&&H.rmCx(f,h),M.affectChangesComp(f)}}}"delete"===t&&delete e[r]}else s.error("LC005",t)}else H.set(e,r,o,void 0,n)})),"aF",(function(){var e=Array.from(arguments),t=!1;e[0]&&"object"==_typeof(e[0])&&e[0].fromOverride&&(e.shift(),t=!0);var r=e[0];r&&r.__target__&&(r=r.__target__);var o=r.length,n=!0,i=e[1],a=e[3],c={};if(a&&a.__target__&&(a=a.__target__),!/^(replaceAt|removeAt|shift)$/.test(i)||r.length){var d;if("sort"==i){var p=e[0],u=e[2],f=e[3]||[],m=p.slice();if(f.forEach((function(e){m.push(e)})),e[2])if("function"==typeof e[2])m.sort(u);else{var v=e[2],y=v.sortBy,_=v.sortOrder;m.sort((function(e,t){return(e=y?l.isRecord(e)?e.$.get(y):e[y]:e)>(t=y?l.isRecord(t)?t.$.get(y):t[y]:t)?_?1:-1:e<t?_?-1:1:0}))}else m.sort();d=this.sortCommands(p,m).commands}var g,b=e[2],A=[];if(r._scp&&/^(replaceAt|splice|removeAt|remove|insertAt)$/.test(i)&&(r._scp.forEach((function(e,t){var r,o={},n=l.nestScp[t],i=e.paths,a=Object.keys(i);if(a.length>1?r="*":1==a.length&&(r=a[0]),o.path=r,o.id=t,a.length>1&&(o.paths=a),o.attr=void 0,o.data=n.data,o.reInit=l.isRecord(n.data)||Array.isArray(n.data)&&n.data.model&&n.data.add,o.PropsInfo=n.PropsInfo||void 0,o.index=b,n.model){var s=n.model;o.Error=n.Error;for(var c=Array.from(n.model.keys()),d=0;d<c.length;d++){var p=c[d],u=s.get(p);if(u)for(var f=Array.from(u.keys()),h=f.length,m=0;m<h;m++){var v=f[m],y=u.get(v),_=Array.from(y.keys()),g=_.length;for(k=0;k<g;k++){var E=_[k],C=Object.assign({},o),L=store.peekRecord(p,v);L&&(model=L.$.model,field=model.fieldList[E],field&&(field.properties||field.items||1==field.watch||l.Transform[field.type])&&(C.data=l.deepCopyObject(L[E]),C.rec=L,C.isRec=!0,C.attr=E,C.dtype=model.fieldList[E],C._cmpErr=L.$.error,C.key=E),A.push(C))}}}}else o.reInit=l.isRecord(n.data)||Array.isArray(n.data)&&n.data.model&&n.data.add,A.push(o)})),A.forEach((function(e){var t=e.id,o=""==e.path?[]:e.path.split("."),n=e.dtype||void 0;e.isRec&&(c.Prop=n,l.checkNestedProp(t,o,n,e,r,e.index,a,c)),e.PropsInfo&&e.PropsInfo.forEach((function(i){i.path=e.path,n=i.dtype,i.index=e.index,c.Prop=n,l.checkNestedProp(t,o,n,i,r,e.index,a,c)}))})),c.value&&c.value.code))s.error("ERR35",c.Prop.type);else switch(i){case"replaceAt":var E=parseInt(e[2]);if(E>r.length)return s.warn("index provided for replaceAt is greater than array length"),[];var C=e[3];Array.isArray(C)?t&&(C=[C]):C=[C];var L=r.splice.apply(r,[E,1].concat(C)),$={firstIndex:E,secondIndex:C.length,type:"replace"};if(1==$.secondIndex&&(n=!1),r._bindings)for(var P=r._bindings.toArrayLyte(),w=0;w<P.length;w++){var R=P[w];if(R._forHelpers)for(var N=R._forHelpers.toArrayLyte(),O=0;O<N.length;O++){var T=N[O];if("for"==T.getAttribute("is")){for(var x=E+L.length,S=T.getAttribute("item"),D=E,j=0;D<x;D++,j++)H.removeSelectedBindingDeep(_defineProperty({},S,T._items[D].itemProperty),_defineProperty({},S,L[j]));var I=[];H.adCx(T,I),T._callee.updateForHelper(T,$),H.rmCx(T,I),M.affectChangesComp(T)}}for(var B in R){var F=parseInt(B),K=1==$.secondIndex?F==$.firstIndex:F>=$.firstIndex;if(!isNaN(F)&&K){var U=F-$.firstIndex,V=void 0;if(V=U<1?L[U]:r[$.firstIndex-1+$.secondIndex+U],this.removeSelectedBindingDeep(R[B],V),R[B]._forHelpers)for(var q=R[B]._forHelpers.toArrayLyte(),z=0;z<q.length;z++){var W=q[z];W._propBindingObject&&this.removeSelectedBindingDeep(W._propBindingObject,V)}if(r[F]&&"object"===_typeof(r[F])&&(h(r[F],"_bindings"),this.establishBindings({dummy:R[B]},{dummy:r[F]})),this.affectChanges(R[B],void 0,V,void 0,r[F]),1==$.secondIndex)break}}}return g={type:"array",insertedItems:C,removedItems:L,index:E},H.bindWatchObj(A,r,C,L,E),H.callArrayObservers(r,g,n,o),L[0];case"splice":var G=parseInt(e[2]);if(G>r.length)return s.warn("index provided is greater than array length"),[];var Y,J=e.length>3?e[3]:r.length-G,Q=!1;e.length>4?t?(Y=e.splice(4,e.length),Q=!0):Y=e[4]:(Y=[],Q=!0),Array.isArray(Y)?!Q&&t&&(Y=[Y]):Y=[Y];var X=r.splice.apply(r,[G,J].concat(Y)),Z={firstIndex:G,secondIndex:Y.length,thirdIndex:J,type:"splice"};if(Z.secondIndex==Z.thirdIndex&&(n=!1),r._bindings)for(var ee=r._bindings.toArrayLyte(),te=0;te<ee.length;te++){var re=ee[te];if(re._forHelpers)for(var oe=re._forHelpers.toArrayLyte(),ne=0;ne<oe.length;ne++){var ie=oe[ne];if("for"==ie.getAttribute("is")){for(var ae=G+X.length,se=ie.getAttribute("item"),le=G,ce=0;le<ae;le++,ce++)H.removeSelectedBindingDeep(_defineProperty({},se,ie._items[le].itemProperty),_defineProperty({},se,X[ce]));var de=[];H.adCx(ie,de),ie._callee.updateForHelper(ie,Z),H.rmCx(ie,de),M.affectChangesComp(ie)}}for(var pe in re){var ue=parseInt(pe),fe=Z.secondIndex==Z.thirdIndex?pe>=Z.firstIndex&&pe<Z.firstIndex+Z.secondIndex:ue>=Z.firstIndex;if(!isNaN(ue)&&fe){var he=ue-Z.firstIndex,me=void 0;if(me=he<Z.thirdIndex?X[he]:r[Z.firstIndex-Z.thirdIndex+Z.secondIndex+he],this.removeSelectedBindingDeep(re[pe],me),re[pe]._forHelpers){var ve=re[pe]._forHelpers.toArrayLyte();for(z=0;z<ve.length;z++){var ye=ve[z];ye._propBindingObject&&this.removeSelectedBindingDeep(ye._propBindingObject,me)}}r[ue]&&"object"===_typeof(r[ue])&&(h(r[ue],"_bindings"),this.establishBindings({dummy:re[pe]},{dummy:r[ue]})),this.affectChanges(re[pe],void 0,me,void 0,r[ue])}}}return g={type:"array",index:G,insertedItems:Y,removedItems:X},H.bindWatchObj(A,r,Y,X,G),H.callArrayObservers(r,g,n,o),X;case"push":var _e=e[2];return t&&e.length>3?_e=e.splice(2,e.length):Array.isArray(_e)?t&&(_e=[_e]):_e=[_e],H.aF(r,"insertAt",r.length,_e);case"pop":return H.aF(r,"remove",r.length-1)[0];case"shift":case"shiftObject":return H.aF(r,"remove",0)[0];case"removeAt":case"remove":var ge=parseInt(e[2]);if(ge>r.length)return s.warn("index provided for removeAt is greater than array length"),[];var be=e[3]?parseInt(e[3]):1,Ae={firstIndex:ge,secondIndex:be,type:"remove"},Ee=r.splice(ge,be);if(r._bindings)for(var Ce=r._bindings.toArrayLyte(),Le=0;Le<Ce.length;Le++){var $e=Ce[Le];if($e._forHelpers)for(var Pe=$e._forHelpers.toArrayLyte(),we=0;we<Pe.length;we++){var Re=Pe[we];if("for"==Re.getAttribute("is")){for(var Ne=ge+Ee.length,Oe=Re.getAttribute("item"),Te=ge,ke=0;Te<Ne;Te++,ke++)H.removeSelectedBindingDeep(_defineProperty({},Oe,Re._items[Te].itemProperty),_defineProperty({},Oe,Ee[ke]));var xe=[];H.adCx(Re,xe),Re._callee.updateForHelper(Re,Ae),H.rmCx(Re,xe),M.affectChangesComp(Re)}}for(var Se in $e){var De=parseInt(Se);if(!isNaN(De)&&De>=Ae.firstIndex){var je=De-Ae.firstIndex,Ie=void 0;if(Ie=je<Ae.secondIndex?Ee[je]:r[Ae.firstIndex-Ae.secondIndex+je],this.removeSelectedBindingDeep($e[Se],Ie),$e[Se]._forHelpers){var Me=$e[Se]._forHelpers.toArrayLyte();for(z=0;z<Me.length;z++){var Be=Me[z];Be._propBindingObject&&this.removeSelectedBindingDeep(Be._propBindingObject,Ie)}}r[De]&&"object"===_typeof(r[De])&&(h(r[De],"_bindings"),this.establishBindings({dummy:$e[Se]},{dummy:r[De]})),this.affectChanges($e[Se],void 0,Ie,void 0,r[De])}}}return g={type:"array",removedItems:Ee,index:ge},H.bindWatchObj(A,r,void 0,Ee,ge),H.callArrayObservers(r,g,n,o),Ee;case"removeObject":b=[b];case"removeObjects":Array.isArray(b)?t&&(b=[b]):b=[b],b==r&&(b=Array.from(b));for(var Fe=0;Fe<b.length;Fe++){var He=b[Fe];He&&He.__target__&&(He=He.__target__);var Ke=r.indexOf(He);-1!==Ke&&H.aF(r,"removeAt",Ke)}break;case"unshift":case"unshiftObject":case"unshiftObjects":var Ue,Ve;return e.length>3&&t?(Ue=e.splice(2,e.length),Ve=!0):Ue=e[2],Array.isArray(Ue)?!Ve&&t&&(Ue=[Ue]):Ue=[Ue],H.aF(r,"insertAt",0,Ue);case"insertAt":var qe=parseInt(e[2]),ze=e[3],We=ze.length;Array.isArray(ze)?t&&(ze=[ze]):ze=[ze];for(var Ge=qe;Ge>r.length;Ge--)ze.unshift(void 0),qe--;var Ye={firstIndex:qe,secondIndex:ze.length,type:"insert"};if(r.splice.apply(r,[qe,0].concat(ze)),r._bindings)for(var Je=r._bindings.toArrayLyte(),Qe=0;Qe<Je.length;Qe++){var Xe=Je[Qe];if(Xe._forHelpers)for(var Ze=Xe._forHelpers.toArrayLyte(),et=0;et<Ze.length;et++){var tt=Ze[et];if("for"==tt.getAttribute("is")){var rt=[];H.adCx(tt,rt),tt._callee.updateForHelper(tt,Ye),H.rmCx(tt,rt),M.affectChangesComp(tt)}}for(var ot in Xe){var nt=parseInt(ot);if(!isNaN(nt)&&nt>=Ye.firstIndex){if(this.removeSelectedBindingDeep(Xe[ot],r[nt+Ye.secondIndex]),Xe[ot]._forHelpers){var it=Xe[ot]._forHelpers.toArrayLyte();for(z=0;z<it.length;z++){var at=it[z];at._propBindingObject&&this.removeSelectedBindingDeep(at._propBindingObject,oldObject)}}r[nt]&&"object"===_typeof(r[nt])&&(h(r[nt],"_bindings"),this.establishBindings({dummy:Xe[ot]},{dummy:r[nt]})),this.affectChanges(Xe[ot],void 0,r[nt+Ye.secondIndex],void 0,r[nt])}}}var st=parseInt(e[2]);return g={type:"array",insertedItems:Array.isArray(e[3])?e[0].slice(st,st+We):[e[3]],index:st},H.bindWatchObj(A,r,ze,void 0,st),H.callArrayObservers(r,g,n,o),r.length;case"concat":H.aF(r,"insertAt",r.length,e[2]);break;case"sort":var lt=[];if(d.forEach((function(e){switch(e.type){case"Remove":var t=r.splice(e.toIndex,1);lt.push({firstIndex:e.toIndex,secondIndex:1,type:"remove",removedItem:t[0]});break;case"Move":var o=r.splice(e.fromIndex,1);r.splice(e.toIndex,0,e.element),lt.push({firstIndex:e.fromIndex,secondIndex:1,type:"remove",removedItem:o[0]}),lt.push({firstIndex:e.toIndex,secondIndex:1,type:"insert"});break;case"Add":r.splice(e.toIndex,0,e.element),lt.push({firstIndex:e.toIndex,secondIndex:1,type:"insert"})}})),r._bindings)for(var ct=r._bindings.toArrayLyte(),dt=0;dt<ct.length;dt++){var pt=ct[dt];if(pt._forHelpers)for(var ut=pt._forHelpers.toArrayLyte(),ft=0;ft<ut.length;ft++){var ht=ut[ft];if("for"==ht.getAttribute("is")){var mt=[];H.adCx(ht,mt);for(var vt=0;vt<lt.length;vt++){var yt=lt[vt],_t=ht.getAttribute("item");"remove"==yt.type&&this.removeSelectedBindingDeep(_defineProperty({},_t,ht._items[yt.firstIndex].itemProperty),_defineProperty({},_t,yt.removedItem)),ht._callee.updateForHelper(ht,yt)}H.rmCx(ht,mt),M.affectChangesComp(ht)}}}if(Array.isArray(e[3])&&e[3].length){g={type:"array",insertedItems:e[3]};var gt=[];e[3].forEach((function(e){gt.push(r.indexOf(e))})),g.indices=gt,H.callArrayObservers(r,g,n,o)}return r;default:return void s.error("LC006",i)}}else s.warn(i+" operation cannot be performed on empty array")})),"callDeepObservers",(function(e,t,r,o){var n=this;Array.from(e._scp.keys()).forEach((function(i){var a,s=e._scp.get(i).paths,c=Object.keys(s);1==c.length?a=c[0]:c.length>1&&(a=c);var d,p=l.nestScp[i];if(p.model)for(var u=p.model,f=Array.from(p.model.keys()),h=0;h<f.length;h++){var m=f[h],v=u.get(m);if(v)for(var y=Array.from(v.keys()),_=y.length,g=0;g<_;g++){var b=y[g],A=v.get(b),E=Array.from(A.keys()),C=E.length;for(k=0;k<C;k++){var L=E[k],$=store.peekRecord(m,b);n.deepObsBind($,!0,L,t,c,a,e,r,o)}}}else d=p.data,n.deepObsBind(d,!1,void 0,t,c,a,e,r,o)}))})),"deepObsBind",(function(t,r,o,n,i,a,s,c,d){var p,u,f=n.type;if(t._bindings)for(var h=Object.assign({},n),m=t._bindings.toArrayLyte(),v=0;v<m.length;v++){u=a;var y=m[v],_=void 0;if(p=m[v]._path,r?y.hasOwnProperty(o)&&y[o].hasOwnProperty("*")&&(_=y[o]["*"],p=y[o]._path):y.hasOwnProperty("*")&&(_=y["*"]),_){var g=_._observers?_._observers.toArrayLyte():[];if(c)if(i.length>1){for(var b=i.length,A=[],E=0;E<b;E++)A.push(i[E]?i[E]+"."+c:c);u=A}else 1==i.length&&(u=a?a.concat("."+c):c);for(var C=0;C<g.length;C++){var L=g[C];h.path=u,h.type="deepChange",h.data=t;var $=_._path.split(".");$.pop(),h.item=$.join(".");var P=null!=h.index?(""!=u?u+".":u)+h.index:u;if(L.callee&&L.callee.component){var w=!0,R=L.callee.component.__data[h.item],N=R?R.watch:void 0;if(R&&"boolean"!=typeof N){var O=g[C].observer.Jpath[p];w=l.checkWatchPath(P,O)}w&&L.observer.value.call(D(L.callee.component),h)}else{var T=s._setterScope?s._setterScope:e;if(Array.isArray(T))for(var k=T.length,x=0;x<k;x++){var S=T[x];w=!0,h.data&&h.hasOwnProperty("item")&&(O=h.data.$.model._fldGrps.watch[h.item].watch,Array.isArray(O)&&(O=g[C].observer.Jpath[p],w=l.checkWatchPath(P,O))),w&&L.observer.value.call(D(S),h)}else w=!0,h.data&&h.hasOwnProperty("item")&&(O=h.data.$.model._fldGrps.watch[h.item].watch,Array.isArray(O)&&(O=g[C].observer.Jpath[p],w=l.checkWatchPath(P,O))),w&&L.observer.value.call(D(T),h)}}}!d&&"array"==f&&y.length&&this.affectChanges(y.length,void 0,initialArrLength,void 0,array.length,d)}})),_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(t,"callArrayObservers",(function(t,r,o,n){if(t._scp&&t._scp.size&&this.callDeepObservers(t,Object.assign({},r),void 0,!0),t._bindings)for(var i=t._bindings.toArrayLyte(),a=0;a<i.length;a++){var s=i[a],l=i[a]._path;if(s._observers)for(var c=s._observers.toArrayLyte(),d=0;d<c.length;d++){var p=c[d];if(p.isArrayObserver)if(r&&(r.item=l),p.callee&&p.callee.component)p.observer.value.call(D(p.callee.component),r);else{var u=t._setterScope?t._setterScope:e;if(Array.isArray(u))for(var f=u.length,h=0;h<f;h++){var m=u[h];p.observer.value.call(D(m),r)}else p.observer.value.call(D(u),r)}}s.length&&this.affectChanges(s.length,void 0,n,void 0,t.length,o)}})),"bindWatchObj",(function(e,t,r,o,n){e&&e.length&&e.forEach((function(e){if(e.isRec&&store.$.deepValueChange(e.rec,e.attr,t,e),o&&o.forEach((function(t){l.removeNestScp(t,e.id,void 0,void 0,void 0,void 0,e.reInit?e.data:void 0)})),r&&r.forEach((function(t,r){if(t&&(Array.isArray(t)||"object"==_typeof(t))){var o=e.path.split(",");o.push(n+r),l.bindObj(t,void 0,e.id,o&&o.length?o:[],void 0,void 0,void 0,!0)}})),void 0!==n){var i=l.nestScp[e.id];if(i&&i.cyclic)l.removeNestScp(i._data,e.id),l.bindObj(i._data,void 0,e.id,[],void 0,void 0,void 0,!0);else{var a=r?r.length:0,s=n+a,c=t.slice(s);c.forEach((function(t){l.removeNestScp(t,e.id)})),c.forEach((function(t,r){if(t&&(Array.isArray(t)||"object"==_typeof(t))){var o=e.path.split(",");o.push(s+r),l.bindObj(t,void 0,e.id,o&&o.length?o:[],void 0,void 0,void 0,!0)}}))}}}))})),"establishUpdateBindings",(function(e,t,r){for(var o=e.toArrayLyte(),n=0;n<o.length;n++){var i=o[n];i[t]&&(v(r,i[t]),this.establishBindings(i[t],r))}})),"establishSelectedBinding",(function(e,t,r){if(e)for(var o=e._path.split("."),n=r.getProperty(o[0]),i=t[o[0]],a=0;a<o.length&&i&&"object"===_typeof(i);a++)v(i,n),n=n[o[a+1]],i=i[o[a+1]]})),"establishBindings",(function(e,t){if(e._helperNodes)for(var r=e._path,o=e._helperNodes.toArrayLyte(),n=0;n<o.length;n++){var i=o[n]._dynamicProperty?o[n]._dynamicProperty[r]:void 0;if(i)for(var a=0;a<i.length;a++){var s=i[a].ownerElement;if(s&&"TEMPLATE"===s.tagName&&"for"===s.getAttribute("is")&&s._items){s.getAttribute("item");for(var l=0;l<s._items.length;l++){var c=t[l],d=s.getAttribute("item");c&&"object"===_typeof(s._items[l])&&this.establishBindings(s._items[l].itemProperty,_defineProperty({},d,c))}}}}for(var p in e){var u=t[p];u&&"string"!=typeof u&&"number"!=typeof u&&"boolean"!=typeof u?(v(u,e[p]),"object"===_typeof(e[p])&&this.establishBindings(e[p],u)):v(t,e)}})),"removeSelectedBindingDeep",(function(e,t,r){if(t||r){for(var o in t&&t._bindings&&A(t,"_bindings",e),e){var n=void 0;t&&(n=t[o]),n&&n._bindings&&A(n,"_bindings",e[o]),"object"===_typeof(e[o])&&this.removeSelectedBindingDeep(e[o],n,r)}if(r){var i=e._dynamicNodes,a=e._helperNodes;i&&i.length&&e._dynamicNodes.splice(0,i.length),a&&a.size&&a.clear()}if(e&&e._forHelpers)for(var s=e._forHelpers.toArrayLyte(),l=0;l<s.length;l++){var c=s[l];if("for"===c.getAttribute("is")){c.getAttribute("item");for(var d=c._attributes.items,p=c._items,u=0;u<p.length;u++)this.removeSelectedBindingDeep(p[u].itemProperty,d[u],r)}else c._propBindingObject&&t&&t._bindings&&(A(t,"_bindings",c._propBindingObject),this.removeSelectedBindingDeep(c._propBindingObject,t,r))}}})),"removeAllBindings",(function(e,t){for(var r in e)t[r]&&t[r]._bindings&&A(t[r],"_bindings",e[r]),t[r]&&"string"!=typeof t[r]&&H.removeAllBindings(e[r],t[r])})),"affectChanges",(function(t,r,o,n,i,a,s){if(t._dynamicNodes)for(var l=0;l<t._dynamicNodes.length;l++)t._dynamicNodes[l]._callee.updateNode(t._dynamicNodes[l],t._path,s,t._private);var c=t._private?"#"+t._path:t._path,d=t._private;if(t._helperNodes)for(var p=[],u=t._helperNodes.toArrayLyte(),f=0;f<u.length;f++)if(t._helperNodes.has(u[f])){if("for"===u[f].getAttribute("is")&&u[f]._items){var h=[];H.adCx(u[f],h);var m=u[f].getAttribute("index"),v=u[f].getAttribute("item"),y=u[f]._callee,_=I.getCmpData(y.component.data),g=_[v],b=_[m],A=y._properties[v],E=y._properties[m],C=u[f]._attributes.items,L={data:{},prop:{},node:{}},$={data:{},prop:{},node:{}};M.beforeDirObj(u[f],L,$);for(var P=0;P<u[f]._items.length;P++)if(_[v]=C[P],_[m]=P,y._properties[v]=u[f]._items[P].itemProperty,u[f]._items[P]._dynamicProperty[c]){p=u[f]._items[P]._dynamicProperty[c];for(var w=0;w<p.length;w++)p[w]._callee.updateNode(p[w],c,s,d)}_[v]=g,_[m]=b,y._properties[v]=A,y._properties[m]=E,M.afterDirObj(u[f],L,$),H.rmCx(u[f],h)}else if("forIn"===u[f].getAttribute("is")&&u[f]._items){var R=[];H.adCx(u[f],R);var N=u[f].getAttribute("key"),O=u[f].getAttribute("value"),T=u[f]._callee,k=I.getCmpData(T.component.data),x=k[O],S=k[N],j=T._properties[O],B=T._properties[N],F=u[f]._attributes.object;for(var K in u[f]._items)if(k[O]=F[K],k[N]=K,T._properties[O]=u[f]._items[K].itemProperty,u[f]._items[K]._dynamicProperty[c]){p=u[f]._items[K]._dynamicProperty[c];for(var U=0;U<p.length;U++)p[U]._callee.updateNode(p[U],c,s,d)}k[O]=x,k[N]=S,T._properties[O]=j,T._properties[N]=B,H.rmCx(u[f],R)}else{var V=[];if((p=u[f]._dynamicProperty[t._private?"#"+t._path:t._path]||[]).length){H.adCx(u[f],V);for(var q=0;q<p.length;q++)p[q]._callee.updateNode(p[q],t._path,s,t._private);H.rmCx(u[f],V)}}M.affectChangesComp(u[f])}if(t._observers){var z=t._observers.toArrayLyte();if(0!=a&&(null!=o||null!=i))for(var W=0;W<z.length;W++){var G=z[W],Y={type:"change",oldValue:o,newValue:i,item:t._path};if(G.callee&&G.callee.component)G.observer.value.call(D(G.callee.component),Y);else{var J=n||e;if(Array.isArray(J))for(var Q=J.length,X=0;X<Q;X++){var Z=J[X];G.observer.value.call(D(Z),Y)}else G.observer.value.call(D(J),Y)}}}if(Array.isArray(t))for(var ee=0;ee<t.length;ee++)for(var te in t[ee])this.affectChanges(t[ee][te],!0,o?o[ee]?o[ee][te]:o[ee]:o,n,i?i[ee]?i[ee][te]:i[ee]:i);else for(var re in t){var oe=o?o[re]:o,ne=i?i[re]:i;"*"==re&&t[re].hasOwnProperty("_observers")&&(oe=o,ne=i),this.affectChanges(t[re],!0,oe,n,ne)}})),"skipArgProcessing",(function(e,t,r){if(e.skipArgProcessing){var o=e.args=e.actArgs;o.shift();var n=o.indexOf("__lyteEvent__"),i=o.indexOf("__lyteNode__");-1!==n&&(o[n]=t),-1!==i&&(o[i]=r)}else e.args.shift()})),"getDV",(function(e){for(var t,r,o=[],n=o,i=[],a="",s=[],l=[],c=[],d=0;d<e.length;d++)if("."!==e[d])if("["!==e[d]){if(('"'===e[d]||"'"===e[d])&&e[d++]===t){for(;"s"===e[d]&&"]"!=e[d];)d++;s.pop(),r=!0}"]"!==e[d]?a=a.concat(e[d]):(l.pop(),a.length&&(!0===r||isNaN(parseInt(a))?n.push(a):c.length&&(n=c.pop(),i.length&&Array.isArray(n[n.length-1])&&!n[n.length-1].length&&n.pop(),n.push(a),!l.length&&i.length&&i.shift())),!l.length&&i.length?(o.push(i.shift()),n=o):c.length&&!i.length&&(n=c.pop()),a="",r="")}else{for(l.push(d),a.length&&n.push(a);"s"===e[d+1];)d++;'"'===e[d+1]||"'"===e[d+1]?(s.push(e[d+1]),t=e[d+1],d++):i.length?(n.push([]),c.push(n),n=n[n.length-1]):(i.push([]),c.push(n),n=i[i.length-1]),a=""}else a.length&&n.push(a),a="";return a.length&&o.push(a),(s.length||l.length)&&console.log("check the syntax",s,l),o})),_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(t,"ccDelay",[]),"callCC",(function(){this.ccDelay.forEach((function(e){e.component&&e.actualConnectedCallback()})),this.ccDelay=[]})),"getDD",(function(e,t){var r=e;return t.forEach((function(t,o){if(Array.isArray(t)){if(null==e)return;var n=H.getDD(r,t);if(null==n)return;e=e[n]}else{if(null==e)return;e=e[t]}})),e})),"processStatic",(function(e){for(var t=e.innerHTML.split("__**"),r=[],o=0;o<t.length;o++)t[o].startsWith("--Lyte")?r.push(parseInt(t[o].substring(6))):r.push(void 0);return t.cc=r,t})),"findLastNodeL",(function(e,t,r){var o,n=0;switch(null!=t&&(n=t),r.getAttribute("is")){case"for":r._helpers[n]&&(o=r._helpers[n][0]),e||r._forContent[0]&&(e=r._forContent[0][0]);break;case"forIn":r._helpers[r._keysArray[0]]&&(o=r._helpers[r._keysArray[0]][0]),e||r._forContent[r._keysArray[0]]&&(e=r._forContent[r._keysArray[0]][0]);break;case"if":case"switch":o=r._helpers[n],e||(e=r._caseContent[0]);break;case"component":return e._renderedComponent[e._currentComponent]||e}return e||(e=r._placeHolder),o&&e==o._placeHolder&&(e=this.findLastNodeL(void 0,void 0,o)),e})),"processAction",(function(e){Array.from(e.querySelectorAll("[lyteaction]")).forEach((function(e){var t=e.attributes.lyteaction.value;e._boundEvents=H.fRP[t],delete H.fRP[t];var r=e._boundEvents._cx,o=e._boundEvents;delete o._cx;var n=o.componentName;for(var i in delete o.componentName,e._boundEvents)if(-1!==i.indexOf("-")){e._actions=e._actions||{},e._actions[i]=new CustomEvent(i),e._actions[i].processAction=e._boundEvents[i],e._boundEvents[i].actArgs.shift();var a=e._boundEvents[i].actArgs.indexOf("__lyteNode__");-1!==a&&(e._boundEvents[i].actArgs[a]=e),e._boundEvents[i].args=e._boundEvents[i].actArgs,delete e._boundEvents[i]}else{var l=s.deepCopyObject(e._boundEvents[i].args),c=l.splice(0,1)[0],d=ee(c=c.startsWith("'")?c.replace(/'/g,""):c,l);e.setAttribute(i.startsWith("on")?i.substr(2):i,n+" => "+d),e._boundEvents[i].globalEvent||e.addEventListener(i,T)}e._boundEvents._cx=r,e.removeAttribute("lyteaction")}))})),"getCtxVal",(function(t,r,o){return null!=t?((e.isLyteWidget||e.__lyteEnablePromise)&&t&&t[r]instanceof Promise&&!t[r].__lyte&&H.listenPromise(t,r,t[r]),"string"==typeof r&&"#"==r[0]?(t.__compNode?n.get(t.__compNode.component):t)[r.substr(1)]:t[r]):void 0})),"getPrivateDataName",(function(e){return"string"==typeof e&&"#"==e[0]?e.substr(1):e})),"getPrivateData",(function(e,t){return"string"==typeof t&&"#"==t[0]?(data=n.get(e),t=t.substr(1),data[t]):e.data[t]})),"getPrivateDataDetails",(function(e,t){return"string"==typeof t&&"#"==t[0]?(data=n.get(e),t=t.substr(1),{pData:data,pName:t,isPrivate:!0}):{pData:e.data,pName:t,isPrivate:!1}})),_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(t,"setPrivateData",(function(e,t,r){"string"==typeof t&&"#"==t[0]?(t=t.substr(1),n.get(e.component).$set(t,r)):e.setData(t,r)})),"assignPrivateData",(function(e,t,r){"string"==typeof t&&"#"==t[0]?(t=t.substr(1),n.get(e.component)[t]=r):e.data[t]=r})),"assignPrivateHashData",(function(e,t,r){"string"==typeof t&&"#"==t[0]?(t=t.substr(1),n.get(e.component)[t]=r):e.$data[t]=r})),"listenPromise",(function(e,t,r){r.then((function(o){r.__lyteUserResolved=!0,r.__lyte.status="resolved",l.Component.set(e,t,o)}),(function(){r.__lyteUserRejected=!0,r.__lyte.status="rejected",l.Component.set(e,t,e[t],{force:!0,skipTypeCast:!0,skipValidation:!0})})),defProp(r,"__lyte",{value:{status:"init"}})})),"get",(function(e,t,r,o,n){if(r||(r=[]),o&&o.hasOwnProperty(t))return nodeValue=o[t]._data,o[t]._dyn&&o[t]._dyn.forEach((function(e){r.push(e)})),nodeValue;try{var i=t.match(/([^[\]]+|\[\])/g),a=e;r.push(i[0]);for(var s=i[0].split("."),l=0;l<s.length;l++)e=H.getCtxVal(e,s[l],n);for(var c=1;c<i.length;c++){var d=i[c];if(d.startsWith(".")){for(var p=d.substring(1).split("."),u=0;u<p.length;u++)e=H.getCtxVal(e,p[u],n);r[0]=r[0]+d}else if(d.startsWith("'")||d.startsWith('"')||!isNaN(d))isNaN(d)?(r[0]=r[0]+"."+d.substring(1,d.length-1),e=H.getCtxVal(e,d.substring(1,d.length-1),n)):(r[0]=r[0]+"."+d,e=H.getCtxVal(e,d,n));else{r.length;var f=H.get(a,d,r);r[0]=r[0]+"."+f,e=H.getCtxVal(e,f,n)}}return o&&(o[t]={},o[t]._data=e,o[t]._dyn=r),e}catch(e){return}})),"getNew",(function(e,t){try{"string"==typeof t&&"#"==t[0]&&(e=n.get(e.__compNode.component),t=t.substr(1))}catch(e){}try{var r=t.match(/([^[\]]+|\[\])/g),o=e,i=r[0].split(".");if(r.length<2){if(i.length<2)return{context:o,lastKey:i[0]};for(var a=0;a<i.length-1;a++)e=e[i[a]];return{context:e,lastKey:i[a]}}for(var s=0;s<i.length;s++)e=e[i[s]];for(var l=1;l<r.length-1;l++){var c=r[l];if(c.startsWith("."))for(var d=c.substring(1).split("."),p=0;p<d.length;p++)e=e[d[p]];else e=c.startsWith("'")||c.startsWith('"')||!isNaN(c)?e[c.substring(1,c.length-1)]:e[this.get(o,c)]}var u=r[l];if(u.startsWith(".")){for(var f=u.substring(1).split("."),h=0;h<f.length-1;h++)e=e[f[h]];u=f[h]}else u=u.startsWith("'")||u.startsWith('"')||!isNaN(u)?u.substring(1,u.length-1):this.get(o,u);return{context:e,lastKey:u}}catch(e){return}})),"componentGetData",(function(e){if(e&&e.match(/^\$\./g)){if($L&&$L.Jwalk)return $L.Jwalk(this.data,e);s.warn("For using JSON path synatx , include the Jwalk file from the lyte-plugins")}return e?this.get(e):this.data})),"componentSetData",(function(e,t,r){if("string"==typeof e)this.set(e,t,r);else if("object"===_typeof(e))for(var o in e)this.set(o,e[o],t)})),"componentToggleData",(function(e){this.set(e,!this.get(e))})),"componentGetMethods",(function(e){var t=this.$node;if(t)return e&&t._methods?t._methods[e]:t._methods})),_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(t,"componentHasAction",(function(e){var t=this.$node;if(t)return!(!e||!t._actions[e])})),"componentsetActions",(function(e,t){var r=this.constructor._actions;if("string"==typeof e)r[e]=t;else if("object"===_typeof(e))for(var o in e)r[o]=e[o]})),"componentSetMethods",(function(e,t){var r=this.$node;if(r)if("string"==typeof e)r._methods[e]=t;else if("object"===_typeof(e))for(var o in e)r._methods[o]=e[o]})),"render",(function(t,r,o,n){var i;H.fromV3Render=!0;var a,d=document;if(d=l.isWidgetBuild?e._widgetDocument:document,c&&s.isWidgetBuild&&(c.fromWidgetRender=!0),!t)return s.error("LC007"),H.fromV3Render=!1,void(c&&s.isWidgetBuild&&(c.fromWidgetRender=!1));if("string"==typeof t)i=g(t);else{if(!t.compName)return s.error("LC007"),H.fromV3Render=!1,void(c&&s.isWidgetBuild&&(c.fromWidgetRender=!1));i=g(t.compName)}return r&&i.setData(r),n&&n.methods&&i.setMethods(n.methods),n&&n.attributes&&n.attributes.forEach((function(e){"object"==_typeof(e)?i.setAttribute(e.name,e.value):i.setAttribute(e,"")})),o&&((a="string"==typeof o?d.querySelector(o):o)?(n&&n.dataType&&(i.component.__data=n.dataType),a.appendChild(i),i._callee=i.getCallee?i.getCallee(a):void 0):s.error("LC008",o)),H.fromV3Render=!1,c&&s.isWidgetBuild&&(c.fromWidgetRender=!1),i})),"String",{cache_c:{},cache_d:{},upperCaseFirstLetter:function(e){return e.charAt(0).toUpperCase()+e.slice(1)},lowerCaseFirstLetter:function(e){return e.charAt(0).toLowerCase()+e.slice(1)},toCamelCase:function(e){return this.cache_c[e]||(this.cache_c[e]=j.call(e,/(-\w)/g,(function(e){return e[1].toUpperCase()}))),this.cache_c[e]},dasherize:function(e){return this.cache_d[e]||(this.cache_d[e]=j.call(e,/([a-z])([A-Z])/g,"$1-$2").toLowerCase()),this.cache_d[e]},concatArg:function(e,t){var r=t.args.length;return t.args.forEach((function(t,o){null!=t&&"''"!=t&&("object"==_typeof(t)?e+=H.String.concatAll(e,t.value):e+=t,r!=o+1&&(e+=","))})),e},_deConcatArg:function(e,t,r){t.args.length;var o="",n="";return r&&(o="{{",n="}}"),t.args.forEach((function(t,r){null!=t&&"''"!=t&&("object"==_typeof(t)?e=e+o+H.String._deConcatAll(e,t.value)+n:t.startsWith("'")&&t.endsWith("'")?e+=t.slice(1,t.length-1):e=e+o+t+n)})),e},concatAll:function(e,t){return e=t.name+"(",this.concatArg(e,t)+")"},_deConcatAll:function(e,t,r){return"concat"!=t.name&&(e=t.name+"("),e=this._deConcatArg(e,t,r),"concat"!=t.name&&(e+=")"),e},refine:function(e){var t,r=l.Compile.getMustache(e);r?t=l.Compile.getHelper(r):/{{.*}}/.test(e)&&!/\\{{.*}}/.test(e)&&(t=l.Compile.splitMixedText(e));var o="{{";if(t)o+=this.concatAll(o,t);else{if(!r)return e;o+=r}return o+"}}"},deRefine:function(e){var t,r=l.Compile.getMustache(e);r&&(t=l.Compile.getHelper(r,void 0,!0));var o="";if(t&&"concat"==t.name)o=this._deConcatAll(o,t,!0);else{if(!r)return e;o="{{"+r+"}}"}return o}}),"appendChild",(function(e,t){P._setIgnoreDisconnect(!0),e.appendChild(t),P._setIgnoreDisconnect(!1)})),"replaceWith",(function(){var e=Array.from(arguments),t=e.shift();P._setIgnoreDisconnect(!0);for(var r,o=t.parentNode,n=0;r=e[n];n++)o.insertBefore(r,t);t.remove(),P._setIgnoreDisconnect(!1)})),"insertBefore",(function(e,t,r){if(P._setIgnoreDisconnect(!0),!r){if(!e)return s.error("LC010"),void P._setIgnoreDisconnect(!1);r=e.parentNode}b(r,t,e||null),P._setIgnoreDisconnect(!1)})),"insertAfter",(function(){var e=Array.from(arguments),t=e.shift();P._setIgnoreDisconnect(!0),t.after.apply(t,e),P._setIgnoreDisconnect(!1)})),"executeMethod",(function(){var e=this.$node;if(e){var t=Array.prototype.slice.call(arguments,1),r=H.String.toCamelCase(arguments[0]);return e._methods[r]?e._methods[r].apply(this,t):void s.error("LC009",r,this.$node.tagName)}})),_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(t,"getProperData",(function(e){var t=e.dataType,r=e.attr,o=e.newValue,n=e.tagName;switch(t){case"boolean":o=!(!o||"false"===o);break;case"object":try{(o=JSON.parse(o))instanceof Object||s.warn("data type of the value provided for attribute "+r+" of "+n+" is not valid")}catch(e){return void s.warn("attribute "+r+" is not a valid JSON string.")}break;case"array":try{(o=JSON.parse(o))instanceof Array||s.warn("data type of the value provided for attribute "+r+" of "+n+" is not valid")}catch(e){return void s.warn("attribute "+r+" is not a valid JSON string.")}break;case"number":var i=+o;if(o!==i+"")return void s.warn("data type of the value provided for attribute "+r+" of "+n+" is not valid");o=i}return e.newValue=o,!0})),"cssEscape",(function(e){return e?e.replace(/['"]/g,"\\$&"):e})),"shadow",{shadowList:[],toAddEvents:[],attachEvents:function(t){for(var r=I.globalDOMEvents,o=0;o<r.length;o++){var n=r[o];e.__lyteEnableDelayAction&&t.addEventListener(n,I.docCaptureGlobalEventHandler,!0),t.addEventListener(n,I.globalEventHandler,!0),e.__lyteEnableDelayAction&&t.addEventListener(n,I.docBubbleGlobalEventHandler)}for(var i=this.toAddEvents,a=i.length,s=0;s<a;s++)t.addEventListener(i[s].eventName,i[s].listener,i[s].options);t.addEventListener("change",I.changeEventHandler),t.addEventListener("scroll",I.scrollEventHandler,!0),["scroll"].forEach((function(e){t.addEventListener(e,(function(r){t.host.getRootNode().dispatchEvent(new CustomEvent(e,{detail:{actualTarget:r.target}}))}),!0)}),!0)},createLessDiv:function(e,t){var r=document.createElement("div");r.setAttribute("id","lessDiv"),e.appendChild(r),t._lessDiv=r,t._lessDiv._impNames=[]},insertInLessDiv:function(e,t){var r=this;e&&e._lessDiv._impNames&&e._lessDiv._impNames.forEach((function(e){t._impNames.push(e);var o=document.createElement("style");o.setAttribute("placeHolder",r.importStyle[e].src),o.setAttribute("id",e),t.appendChild(o)}))},updateLessDiv:function(e,t){var r=this;e._impNames.forEach((function(o){t.forEach((function(t){if(r.importStyle[o]&&"resolved"==r.importStyle[o].status&&r.importStyle[o].response[t]){var n=document.createElement("style");n.setAttribute("lyte-id-imported","shadow-style-"+t),n.setAttribute("impSrc",o),n.innerHTML=r.importStyle[o].response[t];var i=e.querySelector("[id="+o+"]");I.insertBeforeNative(e,n,i)}}))}))},getHostElement:function(e){if(e){var t=e.host;if(t&&t.tagName)return t}},appendChild:function(e,t,r){var o;o=r&&r instanceof Object&&r.referenceNode?r.referenceNode:void 0;var n=!1;r&&r.native||(P._setIgnoreDisconnect(!0),n=!0);var i=o?o.getRootNode():t?t.getRootNode():void 0,a=t,s=this.getHostElement(i);if(i&&s&&(a=this.looping(a)),l.isWidgetBuild&i&&s&&e&&s!=(e.lastElementChild?this.getHostElement(e.lastElementChild.getRootNode()):this.getHostElement(e.getRootNode()))){var c={type:"appendChild",shadowParent:s,outlet:e,element:t,nonShadowParent:a};this.addElements(c)}else e.appendChild(t);n&&P._setIgnoreDisconnect(!1)},looping:function(e){for(;e;){if(e.component&&"LYTE-YIELD"!=e.tagName)return e;e=e.parentNode}},addElements:function(e,t){var r=e.element,o=l.$.widgetWrapper;Array.isArray(r)?r.forEach((function(e,t){o.shadowRoot.appendChild(e)})):o.shadowRoot.append(r)},prependStyle:function(e,t){var r=e.querySelectorAll("[lyte-id^='shadow-']"),o=r[r.length-1];o?H.insertBeforeNative(e,t,o.nextSibling):H.insertBeforeNative(e,t,e.childNodes[0])}}),"V3",{pendingComp:{remove:function(t){var r,o=e.__lyteConfig._pendingV3Components;if(o[t.localName]){var n=o[t.localName].indexOf(t);-1!=n&&(o[t.localName].splice(n,1),r=!0)}return r},add:function(t){var r=e.__lyteConfig._pendingV3Components;r[t.localName]?-1==r[t.localName].indexOf(t)&&r[t.localName].push(t):r[t.localName]=[t]},find:function(t){return e.__lyteConfig._pendingV3Components[t]},execute:function(e){e.forEach((function(e){delete e.__v3lyteIgnore,e.decideConstructor(),Array.from(e.attributes).forEach((function(t){-1!=e.constructor.observedAttributes.indexOf(t.name)&&e._attributeChangedCallback(t.name,null,t.value)})),e._connectedCallback()})),e.splice(0,e.length)},firstRegister:function(t,r){var o=e.__lyteConfig._firstRegisteredComp;o[t]||(o[t]=r)}}}),"directive",{save:{triggerMap:{input:["value","checked","disabled"],select:["value","selectedIndex"],textarea:["value"],div:["id"],span:["id"]},addNode:function(e,t,r,o,n,i,a,s){var c=H.directive.getExactTransitionArg(t,r)||r.id;if(c){H.setPrivateData(e,c,o),H.object.initalize(r,"__updateProp"),H.array.initalize(r.__updateProp,t.hookName),-1==r.__updateProp[t.hookName].indexOf(c)&&r.__updateProp[t.hookName].push(c),n&&(n._saveNode=c),t._saveNode=c,"prop"!=t.hookName&&"node"!=t.hookName||this.addData(o,t);var d=r._cx,p=!!d&&d.node;if(i)if(p){if(r._helperNode=p,s){var u=d.type,f=d.itemIndex;switch(u){case"forIn":case"for":a._dirObj&&(a._dirObj.prop&&-1!=a._dirObj.prop.indexOf(c)&&this.estBndPrevNode(e,a,c,o,d),a._dirObj.node&&-1!=a._dirObj.node.indexOf(c)&&this.estBndPrevNode(e,a,c,o,d),a._dirObj.data&&-1!=a._dirObj.data.indexOf(c)&&this.estBndPrevNode(e,a,c,o,d)),H.array.initalize(p,"_currentProp"),H.array.checkAndPush(p._currentProp,c),p._propNodes[c]||("forIn"==p.getAttribute("is")?p._propNodes[c]={}:p._propNodes[c]=[]),p._propNodes[c][f]?(this.for.beforeUpdateSpecific(p,[f,1],[o],c,!0),this.for.afterUpdateSpecific(p,[f,1],[o],c)):p._propNodes[c][f]=o}}}else{var h=e.getProperty(c);H.array.initalize(e._propNodes,c),e._propNodes[c].push(h)}}else l.error("No value provided for save directive")},addData:function(t,r){if(!t.$data){var o=this.triggerMap[t.localName];if(o)t.$data={},Object.defineProperty(t.$data,"__compNode",{enumerable:!1,writable:!0,value:t}),o.forEach((function(e){t.$data[e]=t[e]}));else if(l.Component.registeredComponents[t.localName]){var n=r.hookName,i=H.directive.getExactTransitionArg(r,t)||t.id;t.$data={},Object.defineProperty(t.$data,"__compNode",{enumerable:!1,writable:!0,value:t}),Object.defineProperty(t.$data,"__lyteDirective",{enumerable:!1,value:{name:n,value:i,node:t}})}else t.$data={},Object.defineProperty(t.$data,"__compNode",{enumerable:!1,writable:!0,value:t});for(var a=0;a<t.attributes.length;a++){var s=t.attributes[a],c=H.String.toCamelCase(s.name),d=s.value;if(-1==d.indexOf("{{")&&!t.$data[c]){if(d&&(-1!=d.indexOf("{")||-1!=d.indexOf("["))&&(e.isLyteWidget||"object"==H.getAttrDataType(t.localName,c)||t.__data&&t.__data[c]&&"object"==t.__data[c].type))try{d=JSON.parse(d)}catch(e){}t.$data[c]=d}}}},updateName:function(e,t,r){var o,n=t._saveNode;o="@data"==t.nodeName?t.ownerElement.$data:t.ownerElement,H.getPrivateData(e.component,n)==o&&H.setPrivateData(e,n,null),H.setPrivateData(e,r,o),t._saveNode=r,t.ownerElement._specialAttributeDetails.forEach((function(e){("prop"==e.hookName||"node"==e.hookName||"data"==e.hookName)&&(e._saveNode=r)}))},removeNode:function(e,t){t._specialAttributeDetails&&t._specialAttributeDetails.forEach((function(r){if("prop"==r.hookName||"node"==r.hookName||"data"==r.hookName){var o=H.directive.getActualTransitionArg(r,t);o=H.getPrivateDataName(o),e.component.data[o]=null}}))},removeAllNode:function(e,t,r){H.iterator(e,r,(function(e){Array.isArray(e)?e.forEach((function(e){M.removeNode(t,e)})):M.removeNode(t,e)}))},getAttr:function(e){var t=!1;return e&&e.forEach((function(e){("prop"==e.hookName||"node"==e.hookName||"data"==e.hookName)&&(t=e)})),t},triggerAllListeners:function(e,t,r,o){var n=r.localName,i=this.triggerMap[n];i&&(i.forEach((function(e){M.setData(e,r)})),e._cx&&M.updateCxNodes(e))},setData:function(e,t){l.Component.set(t.$data,e,t[e])},addNodeLazy:function(e,t,r,o,n,i,a){e.forEach((function(e){var s,l=e.attr,c=e.node;if(l&&l.stringValue&&(s=!0),l.hookNode)if(H.directive.infoA(t,r,o,n,l,i,a),"prop"==l.hookName||"node"==l.hookName||"data"==l.hookName){a&&a.node?o._cx=a:n&&(o._cx=n._cx);var d=o;M.addData(o,l),"data"==l.hookName&&(d=o.$data),M.addNode(t,l,o,d,c,s,n,a)}else"class"==l.hookName&&(s?H.directive.class.addStaticValue(o):H.directive.class.addValue(c.ownerElement))}))},updateCxNodes:function(e){for(var t=e._cx,r=!0,o=function(){if("for"==t.type||"forIn"==t.type){var o=t.node,n=t.itemIndex;e.__updateProp.data?e.__updateProp.data.forEach((function(t){o._propNodes[t]&&(r&&l.Component.set(o._propNodes[t],n,e.$data,{force:!0}),M.affectChangesArr(o._items[n].propProperty[t]),M.establishBindingsArr(o._items[n].propProperty[t],o._propNodes[t][n])),M.affectChangesComp(o)})):e.__updateProp.prop?e.__updateProp.prop.forEach((function(t){o._propNodes[t]&&(r&&l.Component.set(o._propNodes[t][n],"$data",e.$data,{force:!0}),M.affectChangesArr(o._items[n].propProperty[t],o._propNodes[t]))})):e.__updateProp.node&&e.__updateProp.node.forEach((function(t){o._propNodes[t]&&(r&&l.Component.set(o._propNodes[t][n],"$data",e.$data,{force:!0}),M.affectChangesArr(o._items[n].propProperty[t],o._propNodes[t]))}))}r=!1,t=t.node._cx};t;)o();e.__updateProp.data&&e.__updateProp.data.forEach((function(t){e._callee&&e._callee._propProperty&&e._callee._propProperty[t]&&e._callee._propProperty[t].length&&(M.affectChangesArr(e._callee._propProperty[t]),M.establishBindingsArr(e._callee._propProperty[t],e._callee.$data[t],!0))}))},setDataInParentComp:function(t,r){t.__updateProp.data?t.__updateProp.data.forEach((function(o){if(e.isLyteWidget&&r){var n=t._callee._properties[o];if(n){var i=H.getPrivateDataDetails(t._callee.component,o),a=i.pData,s=i.pName;for(var c in a[s]=t.$data,n)H.affectChanges(n[c])}}else{var d=H.getPrivateDataDetails(t._callee.component,o),p=d.pData,u=d.pName;l.Component.set(p,u,t.$data,{force:!0})}})):t.__updateProp.prop?t.__updateProp.prop.forEach((function(e){var r=H.getPrivateDataDetails(t._callee.component,e),o=r.pData,n=r.pName;l.Component.set(o,n,t,{force:!0})})):t.__updateProp.node&&t.__updateProp.node.forEach((function(e){var r=H.getPrivateDataDetails(t._callee.component,e),o=r.pData,n=r.pName;l.Component.set(o,n,t,{force:!0})}))},affectChangesArr:function(e){e&&e.forEach((function(e){e&&H.affectChanges(e)}))},establishBindingsArr:function(e,t,r){e&&e.forEach((function(e){H.establishBindings(e,t),r&&v(t,e)}))},afterRender:function(e,t,r,o,n){var i=this,a=function(a){for(var s=e._cx,l=e;s;){if("for"==s.type||"forIn"==s.type){l=s.node;var c=s.node._propNodes[a];if(s.node._propNodes[a]){if("default"!=o.type&&"for"==e.getAttribute("is")){var d=c[s.itemIndex]._bindings;if(d){var p=d.toArrayLyte();i.establishBindingsArr(p,e._propNodes[a])}}c[s.itemIndex]=e._propNodes[a],i.affectChangesArr(l._items[s.itemIndex].propProperty[a]),"for"==e.getAttribute("is")&&i.establishBindingsArr(l._items[s.itemIndex].propProperty[a],l._propNodes[a][s.itemIndex])}else s.node._propNodes[a]||((c="forIn"==s.node.getAttribute("is")?s.node._propNodes[a]={}:s.node._propNodes[a]=[])[s.itemIndex]=e._propNodes[a]);s.node._childProp?-1==s.node._childProp.indexOf[a]&&s.node._childProp.push(a):s.node._childProp=[a]}s=s.node._cx,e=l}if(l&&(H.assignPrivateHashData(t,a,l._propNodes[a]),t._propProperty[a]||(t._propProperty[a]=[]),"update"==o.type||"default"==o.type))if("update"==o.type){var u=l._propNodes[a]._bindings;if(u){var f=u.toArrayLyte();f.forEach((function(r){-1==t._propProperty[a].indexOf(r)&&(t._propProperty[a].push(r),t._propProperty[a].push([])),"forIn"==e.getAttribute("is")&&M.establishBindingsArr(f,l._propNodes[a])}))}}else{var h=r.data[a];n&&h&&Object.keys(h).length&&-1==t._propProperty[a].indexOf(h)&&(Array.isArray(h)?h.forEach((function(e){t._propProperty[a].push(e)})):t._propProperty[a].push(h))}};for(var s in e._propNodes)a(s)},estBndPrevNode:function(e,t,r,o,n){this.addFlagInData(t);var i=t,a=o,s=n.itemIndex,l=i._items[s].propProperty[r];l&&l.forEach((function(e){e._path!=r||a._establish||(H.establishBindings(_defineProperty({},r,e),_defineProperty({},r,a)),a._establish=!0)})),e._properties[r]={}},removeAll:function(e,t,r,o,n,i,a,s){var l=this;if(/^(if|switch|for)$/.test(e)?r._specialNodes&&r._specialNodes.length&&this.removeAllNode("for",t,r._specialNodes):"forIn"==e&&r._specialNodes&&Object.keys(r._specialNodes).length&&this.removeAllNode("forIn",t,r._specialNodes),r._propNodes&&Object.keys(r._propNodes).length){var c=function(c){null!=o?l.removeInIndex(t,r,c,o,r._propNodes[c][o],!0,n,i,a,s):(H.iterator(e,r._propNodes[c],(function(e,o){M.removeInIndex(t,r,c,e,o,!0,n,i,a,s)})),r._propNodes[c]="for"==e?[]:{})};for(var d in r._propNodes)c(d)}},addFlagInData:function(e){for(;e;)"forIn"==e.getAttribute("is")&&m(e._currentObject,"_propNodes",!0),e=e._cx&&e._cx.node},removeInIndex:function(e,t,r,o,n,i,a,s,l,c){var d=this;if(t._items[o]){var p,u=t._items[o].propProperty[r];if(u&&(u.forEach((function(e){H.removeSelectedBindingDeep(e,n)})),t._items[o].propProperty[r]=[],t._items[o].propPropertyDyn[r]=[]),c&&"update"==c&&l==t)return;t==l&&(p=!0);for(var f=t._cx,h=function(){if("for"==f.type||"forIn"==f.type){var e=f.itemIndex,t=f.node;if(t._items[e]){var o=t._items[e].propProperty[r],n=t._items[e].propPropertyDyn[r];o&&(d.affectChangesArr(o),o.forEach((function(o,i){var a,l=t._propNodes[r][e];n[i].split(".").forEach((function(e){-1!=e.indexOf(s)&&(a=!0)})),!a&&p||H.removeSelectedBindingDeep(o,l)})),a&&(t._items[e].propProperty[r]=[]))}t==l&&(p=!0)}f=f.node._cx};f;)h();if(e&&e._propProperty[r]&&-1!=e._propProperty[r].indexOf(r)){var m=this.getActualPropData(t,r);m._bindings&&m._bindings.toArrayLyte().forEach((function(e){H.removeSelectedBindingDeep(e,m)}))}}},removeInParent:function(e,t,r,o,n,i){for(var a=t._cx,s=function(){if("for"==a.type||"forIn"==a.type){var e=a.itemIndex,t=a.node,o=t._items[e].propProperty[r];o&&o.forEach((function(o){H.removeSelectedBindingDeep(o,t._propNodes[r][e])}))}a=a.node._cx};a;)s();if(e&&e._propProperty[r]&&-1!=e._propProperty[r].indexOf(r)){var l=this.getActualPropData(t,r);l._bindings&&l._bindings.toArrayLyte().forEach((function(e){H.removeSelectedBindingDeep(e,l)}))}},removeInChild:function(e,t,r,o,n,i){var a=this;if(t._helpers)for(var s=function(o){for(var s=0;s<t._helpers[o].length;s++){var l=t._helpers[o][s];a.removeInChild(e,l,r,o,n,i);var c=t._items[o].propProperty[r];c&&c.forEach((function(e){H.removeSelectedBindingDeep(e,t._propNodes[r][o])}))}},l=0;l<t._helpers.length;l++)s(l)},addInParent:function(e,t,r){var o=t._cx;if(o)for(var n=o.itemIndex,i=o.node;o;)"for"!=o.type&&"forIn"!=o.type||(i=o.node,n=o.itemIndex,this.affectChangesArr(i._items[n].propProperty[r]),this.establishBindingsArr(i._items[n].propProperty[r],i._propNodes[r][n])),o=o.node._cx},addInChild:function(e,t,r,o){if(t._helpers)for(var n=0;n<t._helpers.length;n++)for(var i=0;i<t._helpers[n].length;i++){var a=t._helpers[n][i];this.addInChild(e,a,r);var s=a._cx.itemIndex;this.establishBindingsArr(a._items[s].propProperty[r],a._propNodes[r][s])}},affectChangesComp:function(e){var t=e._currentProp?e._currentProp:e._childProp;t&&t.forEach((function(t){var r=e._callee;r._propProperty[t]&&r._propProperty[t].forEach((function(e){H.affectChanges(e)}))}))},getActualPropData:function(e,t){for(var r=e,o=e._cx;o;)r=o.node,o=o.node._cx;return r._propNodes[t]},forIn:{delete:function(e,t){if(e._propNodes&&Object.keys(e._propNodes).length)for(var r in e._propNodes){var o=e._propNodes[r];if(o[t.property]=null,delete o[t.property],o._bindings){var n=o._bindings.toArrayLyte();M.affectChangesArr(n)}}},add:function(e,t,r,o){var n,i=e._callee;if(e._propNodes&&Object.keys(e._propNodes).length&&(o&&r.forEach((function(r,o,n){i.removeHelpersSpecificIndex(e,r,void 0,t.type)})),e._forContent[t.property])){var a=e._keysArray.indexOf(t.property);n=e._forContent[e._keysArray[a+1]]?e._forContent[e._keysArray[a+1]][0]:e}return n},update:function(e){if(e._propNodes&&Object.keys(e._propNodes).length)for(var t in e._items)for(var r in e._propNodes){var o=e._propNodes[r];if(o[t]=null,delete o[t],!e._cx||"for"!=e._cx.type&&"forIn"!=e._cx.type||M.addInParent(e._callee,e,r),o._bindings){var n=o._bindings.toArrayLyte();M.affectChangesArr(n)}}}},for:{update:function(e){if(e._propNodes&&Object.keys(e._propNodes).length)for(var t in e._propNodes){var r=e._propNodes[t];if(r.shift(),!e._cx||"for"!=e._cx.type&&"forIn"!=e._cx.type||M.addInParent(e._callee,e,t),r._bindings){var o=r._bindings.toArrayLyte();M.affectChangesArr(o)}}},beforeUpdate:function(e,t,r,o){var n=this;if(e._propNodes&&Object.keys(e._propNodes).length){var i=function(i){o.forEach((function(t,r){t&&(t.propProperty||(t.propProperty={}),t.propProperty[i]||("forIn"==e.getAttribute("is")?t.propProperty[i]={}:t.propProperty[i]=[]))})),n.beforeUpdateSpecific(e,t,r,i)};for(var a in e._propNodes)i(a)}},beforeUpdateSpecific:function(e,t,r,o,n){var i=t[0];if(r.length&&"for"==e.getAttribute("is"))if(0==t[1])for(var a=i;a<e._propNodes[o].length;a++)M.removeInParent(e._callee,e,o,a,e._propNodes[o][a]);else if(r.length!=t[1])for(var s=i;s<e._propNodes[o].length;s++)M.removeInParent(e._callee,e,o,s,e._propNodes[o][s]);var l=e._callee;if(!n&&l&&l._propProperty[o]){var c=M.getActualPropData(e,o);c._bindings&&c._bindings.toArrayLyte().forEach((function(e){H.removeSelectedBindingDeep(e,c)}))}var d=e._propNodes[o];"forIn"==e.getAttribute("is")?r.length?d[i]=r[0]:(d[i]=null,delete d[i]):d.splice.apply(d,t.concat(r))},afterUpdate:function(e,t,r){if(e._propNodes&&Object.keys(e._propNodes).length)for(var o in e._propNodes)this.afterUpdateSpecific(e,t,r,o)},afterUpdateSpecific:function(e,t,r,o){var n=t[0];if(0==t[1])for(var i=n+r.length;i<e._propNodes[o].length;i++)M.addInParent(e._callee,e,o,i,e._propNodes[o][i]),M.addInChild(e._callee,e,o,i,e._propNodes[o][i]);else if(r.length){if(r.length!=t[1])for(var a=n+r.length;a<e._propNodes[o].length;a++)M.addInParent(e._callee,e,o,a,e._propNodes[o][a]),M.addInChild(e._callee,e,o,a,e._propNodes[o][a])}else M.addInParent(e._callee,e,o),M.addInChild(e._callee,e,o);var s=e._callee;if(s&&s._propProperty[o]){var l=M.getActualPropData(e,o);M.affectChangesArr(s._propProperty[o]),M.establishBindingsArr(s._propProperty[o],l,!0)}}},beforeDirObj:function(e,t,r){if(e._dirObj&&e._dirObj.data){var o=e._callee;e._dirObj.data.forEach((function(e){t.data[e]=H.getPrivateData(o.component,e),H.assignPrivateData(o.component,e,null),r.data[e]=o._properties[e],o._properties[e]=null}))}},afterDirObj:function(e,t,r){if(e._dirObj&&e._dirObj.data){var o=e._callee;e._dirObj.data.forEach((function(e){H.assignPrivateData(o.component,e,t.data[e]),o._properties[e]=r.data[e]}))}},updateMulProp:function(e,t,r,o,n){e._cx&&t.helperNode&&t.helperNode._items[e._cx.itemIndex].propProperty[r]&&(t.helperNode._items[e._cx.itemIndex].propProperty[r].push(o),t.helperNode._items[e._cx.itemIndex].propPropertyDyn[r].push(n._path))},lazyProp:{add:function(e,t,r,o,n,i,a){e.push({node:t,helperNode:r,forIndex:o,boundValue:n,dynamicValuesArray:i,dynamicValues:a})},iterate:function(e,t){t.forEach((function(t){var r=t.node,o=t.helperNode,n=t.boundValue,i=t.forIndex,a=(t.dynamicValuesArray,t.dynamicValues);r._propNode=!0;var s=o._items[i].propPropertyDyn;s[n]||(s[n]=[]),s[n].push(a);var l=o._items[i].propProperty;l[n]||(l[n]=[]);var c=e.getProperty(n);l[n].push(c);var d=H.get(e.component.data,n);d&&d._establish&&H.establishBindings(_defineProperty({},n,c),_defineProperty({},n,d)),e._properties[n]={}}))}},afterConnect:function(e){if(e._callee){var t=e.hasAttribute("lyte-directive-prop"),r=e.hasAttribute("lyte-directive-node"),o=e.hasAttribute("lyte-directive-data");if((t||o||r)&&!e.__updateProp){var n={attr:{hookName:t?"prop":r?"node":"data",hookNode:!0,stringValue:t?e.getAttribute("lyte-directive-prop"):r?e.getAttribute("lyte-directive-node"):e.getAttribute("lyte-directive-data")},node:e};this.addNodeLazy([n],e._callee,void 0,e,e._cx?e._cx.node:void 0,void 0,e._cx)}}},setDirObj:function(e){e.hasAttribute("dir-obj")&&(e._dirObj=JSON.parse(e.getAttribute("dir-obj")))},connect:function(e,t){e.__updateProp&&e._callee&&e._callee.component&&(e._cx?this.updateCxNodes(e):this.setDataInParentComp(e,t))},removeData:function(e){if(e._propProperty)for(var t in e._propProperty)e._propProperty[t]=null}},hide:{appendTemp:function(){document.body.appendChild(H.hiddenComponentsDiv),document.body.appendChild(H.hiddenYieldsDiv)},triggerGlobalEvent:function(e,t,r,o,n){if(e&&e._hiddenBoundEvents&&e._hiddenBoundEvents[t]&&!r.cancelBubble&&(n||r.currentTarget==document.body)){var i=e._hiddenBoundEvents[t],a=s.deepCopyObject(i);H.skipArgProcessing(a,t,e),H.throwAction.call(e.parentElement._callee,e.parentElement._callee,t,a,void 0,void 0,e,r,o)}},connect:function(e,t){e._callee?B.template(e,H.hiddenComponentsDiv,t):console.error(" Error:Parent node of current template is not of type TEMPLATE . Cannot hide this template")},yield:{connect:function(e){e._callee&&H.directive.getTransitionArg(e._callee,"hide-tag")&&(H.directive.getTransitionArg(e._callee,"hide-tag-supported")?B.template(e,H.hiddenYieldsDiv):s.error(e._callee,"LC020",e._callee.localName))},disConnect:function(e){-1!=Array.from(H.hiddenYieldsDiv.content.childNodes).indexOf(e)&&H.hiddenYieldsDiv.content.removeChild(e),e._hiddenTemplate&&e._hiddenTemplate.length&&B.callDisconnectedCallback(e)}},rmHelpersSpecificIndex:function(e,t){if("number"==typeof t&&e._hiddenTemplate[t]&&e._hiddenTemplate.length){for(var r in e._hiddenTemplate[t])e._hiddenTemplate[t][r].disconnectedCallback();"for"==e.getAttribute("is")?e._hiddenTemplate.splice(t,1):delete e._hiddenTemplate[t]}},forRmHelpers:function(e){if(e._hiddenTemplate&&e._hiddenTemplate.length){for(var t=0;t<e._hiddenTemplate.length;t++){for(var r=0;r<e._hiddenTemplate[t].length;r++)e._hiddenTemplate[t][r].disconnectedCallback();e._hiddenTemplate[t]=[]}e._hiddenTemplate=[]}},ifRmHelpers:function(e){e._hiddenTemplate&&e._hiddenTemplate.length&&B.callDisconnectedCallback(e)},setTxtNode:function(e,t){if(H.directive.getTransitionArg(e,"hide-tag"))if(H.directive.getTransitionArg(e,"hide-tag-supported")){var r=document.createTextNode("");H.replaceWithPf(t,r)}else s.error(e,"LC020",e.localName)},shouldStop:function(e,t){var r=!1;return e._hiddenBoundEvents&&e._hiddenBoundEvents[t.type]&&e._hiddenBoundFlag&&(r=!0,e._hiddenBoundFlag=!1),r},define:{remove:function(e){var t=Element.prototype.remove;Object.defineProperty(e.prototype,"remove",{configurable:!0,writable:!0,value:function(){if(null==this._firstChild||null==this._firstChild.parentElement)return t.call(this),this._firstChild=void 0,void(this._lastChild=void 0);for(firstNode=this._firstChild,parent=firstNode.parentElement,lastNode=this._lastChild;firstNode.nextSibling!=lastNode;)parent.removeChild(firstNode.nextSibling);this._firstChild=void 0,this._lastChild=void 0,parent.removeChild(firstNode),parent.removeChild(lastNode)}})},getContent:function(e){Object.defineProperty(e.prototype,"getContent",{configurable:!0,writable:!0,value:function(){for(arr=[],null==this._firstChild&&console.error("Cannot access template through getContent"),firstNode=this._firstChild,lastNode=this._lastChild,firstNode=firstNode.nextSibling;firstNode!=lastNode;)arr.push(firstNode),firstNode=firstNode.nextSibling;return arr}})}},addHiddenBoundEvents:function(e,t){if(e._boundEvents)for(var r=0;r<t.childNodes.length;r++)e._boundEvents&&(t.childNodes[r]._hiddenBoundEvents=e._boundEvents,t.childNodes[r]._boundEvents&&(t.childNodes[r]._hiddenBoundFlag=!0))},callDisconnectedCallback:function(e){for(var t=0;t<e._hiddenTemplate.length;t++)e._hiddenTemplate[t].disconnectedCallback();e._hiddenTemplate=[]},template:function(e,t,r){P._setIgnoreDisconnect(!0),e._ignoreDisconnect=!0,e.__lyteIgnore=!0,e._callee;var o=e.parentElement,n=document.createDocumentFragment(),i=e.childNodes.length,a=document.createTextNode(""),s=document.createTextNode("");e._firstChild=a,e._lastChild=s;for(var l=0;l<i;l++)e.childNodes[0]._hiddenBoundEvents=e._boundEvents,e.childNodes[0]._boundEvents&&(e.childNodes[0]._hiddenBoundFlag=!0),n.append(e.childNodes[0]);var c=Array.from(o.childNodes).indexOf(e);o.insertBefore(a,o.childNodes[c]),c=Array.from(o.childNodes).indexOf(e),n.childNodes.length&&(o.insertBefore(n,o.childNodes[c]),c=Array.from(o.childNodes).indexOf(e)),r&&(this.addHiddenBoundEvents(e,r),o.insertBefore(r,o.childNodes[c])),c=Array.from(o.childNodes).indexOf(e),o.insertBefore(s,o.childNodes[c]);var d=e._parentHelper;if(d)if("LYTE-YIELD"==d.tagName)d._hiddenTemplate.push(e);else if(d._forContent){if(e._cx){var p=e._cx.itemIndex;d._hiddenTemplate[p]||(d._hiddenTemplate[p]=[]),d._hiddenTemplate[p].push(e)}}else d._caseContent&&d._hiddenTemplate.push(e);else e._callee&&e._callee._hiddenTemplate.push(e);t.content.appendChild(e),e._ignoreDisconnect=!1,P._setIgnoreDisconnect(!1),e.__lyteIgnore=!1}},class:{addStaticValue:function(e){if(e.hasAttribute("lyte-directive-class")){var t=e.getAttribute("lyte-directive-class").replace(/\s+/g," ");e.setAttribute("class",t.trim()),e._initialClassValue=t.trim()}},addValue:function(e){e._transitionArgs&&e._transitionArgs.hasOwnProperty("class")&&(e._transitionArgs.class=e._transitionArgs.class.replace(/\s+/g," "),e.setAttribute("class",e._transitionArgs.class.trim()),e._initialClassValue=e._transitionArgs.class.trim())},updateValue:function(e){if(e._transitionArgs&&e._transitionArgs.hasOwnProperty("class")){var t=e.getAttribute("class"),r=e._initialClassValue.replace(/\s+/g," ");r=r.trimEnd();var o=t.substr(r.length).trim(),n=e._transitionArgs.class.trim().replace(/\s+/g," "),i=n+" "+o;i=i.trim(),e.setAttribute("class",i),e._initialClassValue=n}}},registeredProp:{},compileNode:function(e,t,r,o,n,i){e._special=!0;var a={};if(a.name=e.attributes[n].name,t[a.name]&&t[a.name].dynamicValue)a.dynamicValue=t[a.name].dynamicValue;else if(t[a.name]&&t[a.name].helperInfo)a.helperInfo=t[a.name].helperInfo;else{a.stringValue=e.attributes[n].nodeValue;var s=e.attributes[n].nodeName;r.push(s),o.push({name:"lyte-directive-"+s.slice(1,s.length),value:a.stringValue}),-1==this.registeredProp[i].indexOf(a.stringValue)&&this.registeredProp[i].push(a.stringValue)}t[a.name]=a,a.hookNode=!0;var l=e.attributes[n].name.slice(1,e.attributes[n].name.length);return a.hookName=l,{add:!0,specialAttr:!0,attrToPush:a}},isDirectiveNode:function(e){return!!(e.hookNode||e.nodeName&&e.nodeName.startsWith("@")||e._isDirectiveNode)},getActualTransitionArg:function(e,t){if(e.hasOwnProperty("dynamicValue")||e.hasOwnProperty("helperInfo")){if(t.hasOwnProperty("_transitionArgs")&&t._transitionArgs.hasOwnProperty(e.hookName))return t._transitionArgs[e.hookName]}else if(e.hasOwnProperty("stringValue")&&e.hasOwnProperty("stringValue"))return""===e.stringValue||"true"===e.stringValue||"false"!==e.stringValue&&e.stringValue},getExactTransitionArg:function(e,t){if(e.hasOwnProperty("dynamicValue")||e.hasOwnProperty("helperInfo")){if(t.hasOwnProperty("_transitionArgs")&&t._transitionArgs.hasOwnProperty(e.hookName))return t._transitionArgs[e.hookName]}else if(e.hasOwnProperty("stringValue")&&e.hasOwnProperty("stringValue"))return""===e.stringValue&&t.id&&(e.stringValue=t.id),e.stringValue},getTransitionArg:function(e,t,r){var o;e.component&&e.component.constructor._options&&this.setAttrFromRender(e);var n=this;return e._specialAttributeDetails&&e._specialAttributeDetails.forEach((function(i){t!=i.hookName||(o=r?i:n.getActualTransitionArg(i,e))})),o},setNodeArgs:function(e,t,r){var o=e.nodeName;e.ownerElement.removeAttribute(o),e.ownerElement._transitionArgs||(e.ownerElement._transitionArgs={});var n=o;o.startsWith("@")&&(n=o.slice(1,o.length)),e.ownerElement._transitionArgs[n]=t,e.ownerElement.setAttribute("lyte-directive-"+n,"prop"==n||"data"==n?t:"")},infoA:function(e,t,r,o,n,i,a){this.setSpecialNodes(e,o,r,t,a),r._specialAttributeDetails&&r._specialAttributeDetails.length?r._specialAttributeDetails.push(n):r._specialAttributeDetails=[n]},setSpecialNodes:function(e,t,r,o,n){t&&(t._hooksPresent||t._defaultSetSpecialNode||r.hasAttribute("lyte-directive-prop")||r.hasAttribute("lyte-directive-node")||r.hasAttribute("lyte-directive-data"))?t._specialNodes&&("for"==t.getAttribute("is")||"forIn"==t.getAttribute("is")?t._specialNodes[n.itemIndex].push(r):(t&&/if|switch/g.test(t.getAttribute("is"))||t&&"LYTE-YIELD"==t.tagName)&&t._specialNodes.push(r)):r&&r._hooksPresent&&e._specialNodes?(e._specialNodes.push(r),e._hooksPresent=!0,e.hc=!0):r&&r._defaultSetSpecialNode&&e._specialNodes&&(e._specialNodes.push(r),e._defaultSetSpecialNode=!0)}}),"iterator",(function(e,t,r){if("for"==e)t.forEach((function(e,t){r.apply(this,[e,t])}));else if("forIn"==e)for(var o in t){var n=t[o];r.apply(this,[n,o])}})),"array",{initalize:function(e,t){e[t]||(e[t]=[])},checkAndPush:function(e,t){-1==e.indexOf(t)&&e.push(t)}}),"object",{initalize:function(e,t){e[t]||(e[t]={})}}),"styleSheet",{preload:function(e){var t,r,o=document.createElement("link");o.rel="preload",o.href=e,o.as="style";var n=new Promise((function(e,o){t=e,r=o}));return o.onload=function(){t()},o.onerror=function(){r()},s.$.assetsDiv.appendChild(o),n}}),"getYieldName",(function(e){if(e.getAttribute("yield-name"))return e.getAttribute("yield-name");if(e._attributes&&e._attributes["yield-name"])return e._attributes["yield-name"];if(e._initProperties){var t=e._initProperties.yield;if(t){if(t.getAttribute("yield-name"))return t.getAttribute("yield-name");if(t._attributes["yield-name"])return t._attributes["yield-name"]}}})),_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(t,"debugPerf",(function(e,t,r,o){if("object"!=_typeof(t))l.performance?l.time("["+t+"] "+r+" of "+o+" component"):l.debug&&l.log("["+t+"] "+r+" of "+o+" component");else if(l.performance||l.debug)if(1==t.render){var n=Math.floor(9e8*Math.random()).toString();e.__renderId=n,e.setAttribute("__renderId__",n),l.log("Component :  "+e.localName+" "+e.__renderId,void 0,"green"),l.performance&&l.time("["+e.__renderId+"] renderTime for "+e.localName)}else 0==t.render&&l.performance&&l.time("["+e.__renderId+"] renderTime for "+e.localName)})),"renderInParent",(function(t){return null==t.__renderInParent&&(e.isLyteWidget&&e.parentWrapperComps&&-1!=e.parentWrapperComps.indexOf(t.tagName)&&!t.children.length?t.__renderInParent=!0:t.__renderInParent=!1),t.__renderInParent})),"doCompOnRegex",/^(onfocus|onfocusin|onfocusout|onresize|onscroll|onclick|ondblclick|onmousedown|onmouseup|onmousemove|onmouseover|onmouseout|onchange|onselect|onsubmit|onkeydown|onkeypress|onkeyup|oncontextmenu)$/),"doCompOnCspRegex",/^(__focus|__focusin|__focusout|__resize|__scroll|__click|__dblclick|__mousedown|__mouseup|__mousemove|__mouseover|__mouseout|__change|__select|__submit|__keydown|__keypress|__keyup|__contextmenu)$/),"_lyteUtilFunctions",{}),"_observedAttributesType",{}),"arrayOverride",(function(){for(var e=["push","pop","splice","shift","unshift","concat","replaceAt","shiftObject","remove","removeAt","removeObject","removeObjects","unshiftObject","unshiftObjects","insertAt"],t=function(){var t=e[r];Array.prototype[t]=function(){var e=Array.from(arguments);return H&&(this._bindings||this._scp)?(e.unshift({fromOverride:!0},this,t),H.aF.apply(H,e)):this["_"+t].apply(this,e)}},r=0;r<e.length;r++)t()}))),M=I.directive.save,B=I.directive.hide;s.Component.appendChild=function(){return I.shadow.appendChild.apply(I.shadow,Array.from(arguments))},I.appendChild=s.Component.appendChild,I.globalEventHandler=T,I.docCaptureGlobalEventHandler=function(t){var r=t.type;if(e.docEventListenerHandler&&e.docEventListenerHandler.docEventlisteners&&t.composedPath()[0].getRootNode().host){var o=e.docEventListenerHandler.docEventlisteners.capture[r];o&&Array.from(o).forEach((function(e){-1!=o.indexOf(e)&&e(t)}))}},I.docBubbleGlobalEventHandler=function(t){var r=t.type;if(e.docEventListenerHandler&&e.docEventListenerHandler.docEventlisteners&&t.composedPath()[0].getRootNode().host){var o=e.docEventListenerHandler.docEventlisteners.bubble[r];o&&Array.from(o).forEach((function(e){-1!=o.indexOf(e)&&e(t)}))}},I.globalDOMEvents=p,I.changeEventHandler=O,e.isLyteWidget&&(e.Component=I.baseCompClass,e.Component.registerHelper=function(){return H.registerHelper.apply(H,arguments)}),s.typeCast=I.typeCast,s.getDataType=I.getDataType,s.Component._get=I.get,P.chromeBugFix=function(){var e=E.match(/Chrom(e|ium)\/([0-9]+)\./);(e=e?parseInt(e[2],10):0)>62&&(this.chI=[],document.addEventListener("focus",(function(e){var t=e.target;"INPUT"!==t.tagName&&"TEXTAREA"!==t.tagName&&"DIV"!==t.tagName||-1==l.Component.chI.indexOf(t)&&l.Component.chI.push(t)}),!0),this.chromeBugFix=function(){var e=l.Component.chI,t=e.length,r=["_callee","_attributeDetails","_attributes","_removedAttributes","_yields","_rA","_cx"],o=[],n=[];document.querySelectorAll("[lyte-keep-alive]").forEach((function(e,t){for(var r in e._renderedComponent)n.push.apply(n,Array.from(e._renderedComponent[r].querySelectorAll("input")))})),H.tDiv.content.querySelectorAll("[lyte-keep-alive]").forEach((function(e,t){for(var r in e._renderedComponent)n.push.apply(n,Array.from(e._renderedComponent[r].querySelectorAll("input")))}));for(var i,a=t-1;i=e[a];a--)document.compareDocumentPosition(i)%2&&-1==n.indexOf(i)&&(e.splice(a,1),i.remove(),o.push(i),i._rA=i._rA||[],i._rA.forEach((function(e){e.ownerElement=void 0})),r.forEach((function(e){i[e]=void 0})),Array.from(i.attributes).forEach((function(e){i.removeAttribute(e.nodeName)})))},l.addEventListener("afterRouteTransition",(function(){l.Component.chromeBugFix()})),l.Router||setInterval((function(){I.String.cache_c={},I.String.cache_d={}}),3e5))},l.addEventListener("beforeRouteTransition",(function(){l.Component.viewPortSettings.resetLazy()})),I.__data=[],I.__dataNames=[],P.defineData=function(e){H.__data.push(e),Object.keys(e).forEach((function(e){H.__dataNames.push(e)}))},s.__lc=I;var F,H=I;function K(e,t){for(var r=document.createElementNS("http://www.w3.org/2000/svg","svg"),o=0;o<e.childNodes.length;o++)r.appendChild(e.childNodes[o].cloneNode(!0));var n=document.createElement("template");for(n.setAttribute("is",t),o=0;o<r.childNodes.length;o++)n.content.appendChild(r.childNodes[o]),o--;return n}function U(e,t){var r=document.createElement("template");return r.setAttribute("is",t),r.innerHTML=e.innerHTML,r}function V(e,t){t.splitTextNodes(e),t.component._depthTemp.content.appendChild(e)}function q(e,t,r,o){var n=!0;"TEMPLATE"==e.tagName&&(t._ht=e.innerHTML,n=!1),t._ht&&(n&&(e.innerHTML=t._ht,o.splitTextNodes(e)),r&&r.innerHTML!==t._ht&&(r.innerHTML=t._ht,o.splitTextNodes(r)))}function z(e){if(l.clientConfig&&l.clientConfig.csp)return H.doCompOnCspRegex.test(e)}function W(t,o,n,i,a,c,d,p,u,f,h,m){var v,y,_,g,b,A,E,C,L,$,P,w,R,N,O,T,k,x,S,D,j,M,B,F,W,X,te,re,oe,ne,ie,ae,se,le,ce,de,pe,ue,fe,he,me,ve,ye,_e,ge,be,Ae,Ee,Ce,Le,$e,Pe,we,Re,Ne,Oe;return _regenerator().w((function(r){for(;;)switch(r.n){case 0:v=o[c],y=v.type,_=v.position,g=Z(t,_),a&&(b=Z(a,_)),Oe=y,r.n="text"===Oe?1:"insertYield"===Oe?2:"componentDynamic"===Oe?3:"attr"===Oe?4:"for"===Oe||"forIn"===Oe||"registerYield"===Oe?5:"component"===Oe?6:"if"===Oe||"switch"===Oe?7:8;break;case 1:return(A=l.Compile.getMustache(g.nodeValue))&&(E=l.Compile.getHelper(A)),C=A,E?(v.helperInfo=E,b&&(v.newHelperInfo=l.Compile.getHelper(A,!0),H.replaceWithPf(b,document.createTextNode("__**--Lyte"+c+"__**")))):C&&(v.dynamicValue=C,v.newDynamicValue=H.getDV(C),b&&H.replaceWithPf(b,document.createTextNode("__**--Lyte"+c+"__**"))),r.a(3,8);case 2:return b&&(b.appendChild(document.createTextNode("__**--Lyte"+c+"__**")),L=b.attributes["yield-name"],v.yieldName=L?L.nodeValue:void 0),r.a(3,8);case 3:if(s.isWidgetBuild&&g.setAttribute("lyte-widget",""),b){for(s.isWidgetBuild&&b.setAttribute("lyte-widget",""),b.appendChild(document.createTextNode("__**--Lyte"+c+"__**")),v.componentName=b.localName,$=Array.from(b.attributes),v.staticAttrs={},P=0;P<$.length;P++)v.staticAttrs[H.String.toCamelCase($[P].nodeName)]=$[P].nodeValue;delete v.staticAttrs._lyteprop}return r.a(3,8);case 4:for(w=[],R=[],N=g,O=v.attr=v.attr||{},T=0;T<N.attributes.length;T++)-1!==N.attributes[T].nodeValue.indexOf("{{")&&(k=N.attributes[T].nodeValue,x=l.Compile.getMustache(k),S=void 0,x?S=l.Compile.getHelper(x):/{{.*}}/.test(k)&&!/\\{{.*}}/.test(k)&&(S=l.Compile.splitMixedText(k)),!S||"action"!==S.name&&"method"!==S.name||!H.doCompOnRegex.test(N.attributes[T].name)&&!z(N.attributes[T].name)?(S||x)&&(B={},N.attributes[T].name.startsWith("lbind:")?(w.push(N.attributes[T].name),R.push({name:N.attributes[T].name.substring(6),value:N.attributes[T].nodeValue}),B.isLbind=!0,B.name=N.attributes[T].name.substring(6),B.camelCase=H.String.toCamelCase(B.name)):(B.name=N.attributes[T].name,B.camelCase=H.String.toCamelCase(B.name)),S?"lbind"===S.name?(B.dynamicValue=S.args[0],B.newDynamicValue=H.getDV(S.args[0]),B.isLbind=!0):(B.helperInfo=S,B.newHelperInfo=l.Compile.getHelper(x,!0)):(B.dynamicValue=x,B.newDynamicValue=H.getDV(x)),O[B.name]=B):(O[N.attributes[T].name.substr(2)]={name:N.attributes[T].name.substr(2),camelCase:H.String.toCamelCase(N.attributes[T].name.substr(2)),helperInfo:S,newHelperInfo:l.Compile.getHelper(x,!0),globalEvent:!0},D=s.deepCopyObject(S.args),j=(j=D.splice(0,1)[0]).startsWith("'")?j.replace(/'/g,""):j,M=ee(j,D),N.setAttribute(N.attributes[T].name.substr(2),n+" => "+M),b&&b.setAttribute(N.attributes[T].name.substr(2),n+" => "+M),w.push(N.attributes[T].name))),N.attributes[T].name.startsWith("@")&&((F=H.directive.compileNode(N,O,w,R,T,n)).add,attrToPush=F.attrToPush);if(w.length)for(W=0;W<w.length;W++)N.removeAttribute(w[W]),b&&b.removeAttribute(w[W]);if(b){for(X in O)b.removeAttribute(X);b.setAttribute("_lyteAttr","__**--Lyte"+c+"__**","")}if(R.length)for(te=0;te<R.length;te++)N.setAttribute(R[te].name,R[te].value);return r.a(3,8);case 5:q(g,v,b,i);case 6:if(re=s._ie?g:g.content,b||"registerYield"!=y&&!g.hasAttribute("unbound")||(s._ms?((b=document.createElement("div")).innerHTML=v.actualTemplate?v.actualTemplate:g.outerHTML,b=b.childNodes[0],i.splitTextNodes(b)):b=g.cloneNode(!0)),ne=b?s._ie?b:b.content:void 0,v.actualTemplate&&(re=H.getContentForIE(v.actualTemplate,i,void 0,s._ms?v:void 0),b&&(ne=H.getContentForIE(v.actualTemplate,i))),ie=!1,(e.isLyteWidget||e.__lyteEnablePromise)&&g.hasAttribute("has-child"))(ae=Object.keys(v.cases)).length?ae.forEach((function(e){var t,r=H.getContentForIE(re.querySelector("[case='"+H.cssEscape(e)+"']"),void 0,!0);q(r,v.cases[e],t,i);var a=v.cases[e].dynamicNodes;if(a.length){ie=e;for(var s=0;s<a.length;s++)s==a.length-1?f.push({dynN:g,__case__:"1_1",__from__:u,__isInternal__:!0,arguments:["TEMPLATE"===r.tagName?r.content:r,v.cases[e].dynamicNodes,n,i,t],__idx__:s,__callback__:function(t){v.cases[e]._ht&&(v.cases[e]._ht=r.cloneNode(!0),i._helperTemplate.content.append(v.cases[e]._ht),r.innerHTML="",h.push(r)),ie===e&&G(t,v,i,c,y,o,b,ne,re)}}):f.push({dynN:g,__case__:"1_2",__from__:u,__isInternal__:!0,arguments:["TEMPLATE"===r.tagName?r.content:r,v.cases[e].dynamicNodes,n,i,t],__idx__:s})}else J(v,i,c,e,t,r,ne)})):(ne&&(se=v.actualTemplate?ne:b,v._sta=H.processStatic(se)),s._ms&&(v.actualTemplate?(v.templateContent=re.outerHTML,v._content&&(v.actualTemplate=v._content.innerHTML,delete v._content)):v.templateContent=g.outerHTML,g.innerHTML="",h.push(g)),v.actualTemplate&&(oe=y,s._ie||V(oe=v.svg?K(re,y):U(re,y),i),(o[c-1]&&o[c-1].position.toString()===o[c].position.toString()?o[c-1]:o[c])._depthTemp=oe),b&&(v._args={},"registerYield"===y?H.replaceWithPf(b,document.createTextNode("__**--Lyte"+c+"__**")):"component"===y?H.replaceWithPf(b,document.createTextNode((b.hasAttribute("_lyteattr")?b.getAttribute("_lyteattr"):"")+"__**--Lyte"+c+"__**")):H.replaceWithPf(b,document.createTextNode("__**--Lyte"+c+"__**")),Array.from(b.attributes).forEach((function(e){v._args[e.nodeName]=e.nodeValue}))),v._ht&&(v._ht=g.cloneNode(!0),i._helperTemplate.content.append(v._ht),g.innerHTML="",h.push(g)));else if((le=v.dynamicNodes).length)for(ie=!0,ce=0;ce<le.length;ce++)ce==le.length-1?f.push({dynN:g,__isInternal__:!0,arguments:[re,v.dynamicNodes,n,i,ne],__idx__:ce,__callback__:function(e){G(e,v,i,c,y,o,b,ne,re)}}):f.push({dynN:g,__isInternal__:!0,arguments:[re,v.dynamicNodes,n,i,ne],__idx__:ce});return 0==ie&&G(g,v,i,c,y,o,b,ne,re),r.a(3,8);case 7:if(q(g,v,b,i),de=b?s._ie?b:b.content:void 0,v.actualTemplate&&(g=H.getContentForIE(v.actualTemplate,i,void 0),b&&(pe=H.getContentForIE(v.actualTemplate,i),de=s._ie?pe:pe.content)),ue=!1,fe="default","{{lyteViewPort}}"==g.getAttribute("value")&&(i.component._hasViewportTemp=!0),s._ms){for(he={},ve=s._ed?g.content.childNodes:g.childNodes,P=0;P<ve.length;P++)"TEMPLATE"===ve[P].tagName&&(ve[P].getAttribute("case")?he[ve[P].getAttribute("case")]=ve[P]:ve[P].hasAttribute("default")&&(me=ve[P]));if(ye=Object.keys(v.cases),_e=!1,v[fe].dynamicNodes&&(content=H.getContentForIE(me,void 0,!0),de&&(ge=de.querySelector("[default]")),q(content,v[fe],ge,i),le=v[fe].dynamicNodes,be=!1,le&&le.length))for(ye.length||(be=!0,ue=!0),Ae=0;Ae<le.length;Ae++)Ae==le.length-1?f.push({dynN:g,__isInternal__:!0,arguments:[content,v[fe].dynamicNodes,n,i,ge?H.getContentForIE(ge):void 0],__idx__:Ae,__callback__:function(e){me.remove(),v[fe].templateContent=me.outerHTML,de&&(v[fe]._sta=H.processStatic(ge)),!0===be&&Q(e,v,i,c,y,o,b)}}):f.push({dynN:g,__isInternal__:!0,arguments:[content,v[fe].dynamicNodes,n,i,ge?H.getContentForIE(ge):void 0],__idx__:Ae});ye.forEach((function(e,t){var r;content=H.getContentForIE(he[e],void 0,!0),de&&(r=H.getContentForIE(de.querySelector("[case='"+I.cssEscape(e)+"']"))),q(content,v.cases[e],r,i);var a=v.cases[e].dynamicNodes;if(a.length){ue=!0,_e=e;for(var s=0;s<a.length;s++)s==a.length-1?f.push({dynN:g,__isInternal__:!0,arguments:[content,v.cases[e].dynamicNodes,n,i,r?H.getContentForIE(r):void 0],__idx__:s,__callback__:function(t){he[e].remove(),de&&(v.cases[e]._sta=H.processStatic(r)),v.cases[e].templateContent=he[e].outerHTML,_e==e&&Q(t,v,i,c,y,o,b)}}):f.push({dynN:g,__isInternal__:!0,arguments:[content,v.cases[e].dynamicNodes,n,i,r?H.getContentForIE(r):void 0],__idx__:s})}else J(v,i,c,e,r,content,de)}))}else{if(Ee=g.content||g,Ce=Object.keys(v.cases),Le=!1,v[fe].dynamicNodes)if(de&&($e=H.getContentForIE(de.querySelector("[default]"))),q(Pe=H.getContentForIE(Ee.querySelector("[default]"),void 0,!0),v[fe],$e,i),we=v[fe].dynamicNodes,Re=!1,we&&we.length)for(Ce.length||(Re=!0,ue=!0),Ne=0;Ne<we.length;Ne++)Ne==we.length-1?f.push({dynN:g,__isInternal__:!0,arguments:["TEMPLATE"===Pe.tagName?Pe.content:Pe,v[fe].dynamicNodes,n,i,$e],__idx__:Ne,__callback__:function(e){Y(v,i,$e,Pe,de,fe),!0===Re&&Q(e,v,i,c,y,o,b)}}):f.push({dynN:g,__isInternal__:!0,arguments:["TEMPLATE"===Pe.tagName?Pe.content:Pe,v[fe].dynamicNodes,n,i,$e],__idx__:Ne});else Y(v,i,$e,Pe,de,fe);Ce.length&&Ce.forEach((function(e){var t;de&&(t=H.getContentForIE(de.querySelector("[case='"+I.cssEscape(e)+"']")));var r=H.getContentForIE(Ee.querySelector("[case='"+H.cssEscape(e)+"']"),void 0,!0);q(r,v.cases[e],t,i);var a=v.cases[e].dynamicNodes;if(a&&a.length){ue=!0,Le=e;for(var s=0;s<a.length;s++)s==a.length-1?f.push({dynN:g,__isInternal__:!0,arguments:["TEMPLATE"===r.tagName?r.content:r,v.cases[e].dynamicNodes,n,i,t?H.getContentForIE(t):void 0],__idx__:s,__callback__:function(r){var n=H.getContentForIE(Ee.querySelector("[case='"+H.cssEscape(e)+"']"),void 0,!0);J(v,i,c,e,t,n,de),Le==e&&Q(r,v,i,c,y,o,b)}}):f.push({dynN:g,__isInternal__:!0,arguments:["TEMPLATE"===r.tagName?r.content:r,v.cases[e].dynamicNodes,n,i,t?H.getContentForIE(t):void 0],__idx__:s})}else J(v,i,c,e,t,r,de)}))}return!1===ue&&Q(g,v,i,c,y,o,b),r.a(3,8);case 8:"function"==typeof p&&p(m);case 9:return r.a(2)}}),r)}function G(e,t,r,o,n,i,a,l,c){var d;if(l){var p=t.actualTemplate?l:a;t._sta=H.processStatic(p)}s._ms&&(t.actualTemplate?(t.templateContent=c.outerHTML,t._content&&(t.actualTemplate=t._content.innerHTML,delete t._content)):t.templateContent=e.outerHTML,e.innerHTML=""),t.actualTemplate&&(d=n,s._ie||V(d=t.svg?K(c,n):U(c,n),r),(i[o-1]&&i[o-1].position.toString()===i[o].position.toString()?i[o-1]:i[o])._depthTemp=d),a&&(t._args={},"registerYield"===n?H.replaceWithPf(a,document.createTextNode("__**--Lyte"+o+"__**")):"component"===n?H.replaceWithPf(a,document.createTextNode((a.hasAttribute("_lyteattr")?a.getAttribute("_lyteattr"):"")+"__**--Lyte"+o+"__**")):H.replaceWithPf(a,document.createTextNode("__**--Lyte"+o+"__**")),Array.from(a.attributes).forEach((function(e){t._args[e.nodeName]=e.nodeValue}))),t._ht&&(t._ht=e.cloneNode(!0),r._helperTemplate.content.append(t._ht),e.innerHTML="")}function Y(e,t,r,o,n,i){n&&(e[i]._sta=H.processStatic(r)),e[i]._ht&&(e[i]._ht=o.cloneNode(!0),t._helperTemplate.content.append(e[i]._ht),o.innerHTML="")}function J(e,t,r,o,n,i,a){a&&(e.cases[o]._sta=H.processStatic(n)),e.cases[o]._ht&&(e.cases[o]._ht=i.cloneNode(!0),t._helperTemplate.content.append(e.cases[o]._ht),i.innerHTML="")}function Q(e,t,r,o,n,i,a){var l;t.actualTemplate&&(l=n,s._ie||V(l=t.svg?K(e.content,n):U(e,n),r),i[o-1]&&i[o-1].position.toString()===i[o].position.toString()?i[o-1]._depthTemp=l:i[o]._depthTemp=l),a&&H.replaceWithPf(a,document.createTextNode("__**--Lyte"+o+"__**")),t._ht&&(t._ht=e.cloneNode(!0),r._helperTemplate.content.append(t._ht),e.innerHTML="")}function X(e,t,r,n,i){var a,s,l,c,d,p;return _regenerator().w((function(o){for(;;)switch(o.n){case 0:if(!t.length){o.n=4;break}a=Array.from(t),s=0,l=[],c=_regenerator().m((function o(){var c,u,f;return _regenerator().w((function(o){for(;;)switch(o.n){case 0:if(c=a[p],u=[],!a[p].__isInternal__){o.n=4;break}if(s++,!(c.arguments&&c.arguments[1]&&c.arguments[1].length)){o.n=2;break}return d=[].concat(_toConsumableArray(c.arguments),[c.__idx__,a,c.__callback__,p,u,l,c.dynN]),o.d(_regeneratorValues(W.apply(void 0,_toConsumableArray(d))),1);case 1:o.n=3;break;case 2:c.callback&&"function"==typeof c.callback&&c.callback(c.dynN);case 3:o.n=5;break;case 4:return o.d(_regeneratorValues(W(e,t,r,n,i,p-s,0,void 0,p,u,l,c.dynN)),5);case 5:u.length&&(f=[],u.forEach((function(e){if(e.__callback__){var t={callback:e.__callback__,dynN:e.dynN,__isInternal__:!0};delete e.__callback__,delete e.dynN,f.push(e),f.push(t)}else f.push(e)})),a.splice.apply(a,[p+1,0].concat(f)));case 6:return o.a(2)}}),o)})),p=0;case 1:if(!(p<a.length)){o.n=3;break}return o.d(_regeneratorValues(c()),2);case 2:p++,o.n=1;break;case 3:o.n=5;break;case 4:return o.n=5,"";case 5:return o.a(2)}}),o)}function z(e){if(l.clientConfig&&l.clientConfig.csp)return H.doCompOnCspRegex.test(e)}function Z(e,t){for(var r=e,o=0;o<t.length;o++)r="TEMPLATE"!=r.tagName||s._ie?r.childNodes[t[o]]:r.content.childNodes[t[o]];return r}function ee(e,t){for(var r=0;r<t.length;r++)t[r]&&"object"===_typeof(t[r])&&(t[r]=ee(t[r].value.name,t[r].value.args));return e?e+"("+t.toString()+")":t.toString()}if(B.define.remove(x),c.instanciateBridge(),customElements.define("lyte-safari-test-component",L,void 0,s.isWidgetBuild?{widget:!0}:{v3:!0}),document.createElement("div").innerHTML="<lyte-safari-test-component t></lyte-safari-test-component>",P.render=H.render,P.insertBefore=H.insertBefore,P.insertAfter=H.insertAfter,P.replaceWith=H.replaceWith,P.appendChild=H.appendChild,H.tDiv=g("template"),H.tDiv.setAttribute("id","dummy-templates-div"),H.hDiv=g("template"),H.hDiv.setAttribute("id","keep-alive-div"),H.h1Div=g("template"),H.h1Div.setAttribute("id","lyte-helper-div"),l.Compile.componentsDiv=H.lyteComponentsDiv=g("div"),H.lyteComponentsDiv.setAttribute("id","lyte-components-div"),H.hiddenComponentsDiv=g("template"),H.hiddenComponentsDiv.setAttribute("id","hidden-component-div"),H.hiddenYieldsDiv=g("template"),H.hiddenYieldsDiv.setAttribute("id","hidden-yields-div"),Set.prototype.toArrayLyte=function(){return"Set"===this.constructor.name?Array.from(this):Array.from(this._values)},"complete"===document.readyState||"interactive"===document.readyState?N():document.addEventListener("DOMContentLoaded",(function(e){N()}),!0),H.doCompile=X,H[u]("unbound",(function(e){return e})),H[u]("action",(function(e,t,r,o){r?(e._actions=e._actions?e._actions:{},e._actions[t]||(this.createCustomEvent(t,e,o),e.removeAttribute(t))):this.createEventListeners(e,t,o)})),H[u]("lbind",(function(e){return this.getData(e)})),H[u]("method",(function(e,t,r){e=arguments[0],t=arguments[1],r=arguments[2];var o=arguments[0].component,n=t?t.ownerElement:null,i=arguments[1].nodeName;t=null;var a=Array.prototype.slice.call(arguments,2),l=function(){var e=this.$node,t=[];H.adCx(e,t);var n=this.$node._callee.processArgs(this.$node._callee,{helperInfo:{args:a}},[],void 0,this.$node),i=n.splice(0,1)[0];H.rmCx(e,t);var l=Array.from(arguments),c=n.concat(l);if(o.$node._methods[i]){H.debugPerf(this,e.__renderId,"Method :  "+i,o.$node.localName);var d=o.$node._methods[i].apply(o,c);return H.debugPerf(this,e.__renderId,"Method : "+i,o.$node.localName),d}s.error("LC009",r,o.$node.tagName)};if(!n)return l;n.set?n._methods[H.String.toCamelCase(i)]=l:n.setMethods(H.String.toCamelCase(i),l)})),H[u]("stringifyHTML",(function(){return l.Component.registeredHelpers.unescape.apply(this,arguments).innerHTML})),H[u]("unescapeAttr",(function(){return l.Component.registeredHelpers.unescape.apply(this,arguments).innerHTML})),Object.defineProperty(l.Security,"ignoreSanitizer",{get:function(){return F},set:function(e){return s.warn("Lyte.Security.ignoreSanitizer' API has been deprecated due to security considerations.So Lyte will sanitize the content passed to unescape helper by default."),F=e},configurable:!0,enumerable:!0}),H[u]("unescape",(function(t,r,o,n){if(H.ffr)return t;if(e.isLyteWidget&&(l.Security.ignoreSanitizer=!0),!l.Security.ignoreSanitizer||n&&n.force){if(r&&Object.keys(r)&&Object.keys(r).length>0&&(Object(r.GLOBAL_TAGS).length>0&&-1!=(s=r.GLOBAL_TAGS.indexOf("link-to"))&&r.GLOBAL_TAGS.splice(s,1),r&&r.GLOBAL_ATTRIBUTES&&Object.keys(r.GLOBAL_ATTRIBUTES).length>0))for(var i=["is","yield-name","lt-prop-route","lt-prop-dp","lt-prop-fragment","lt-prop-qp","lt-prop","lt-prop-class","lt-prop-id","lt-prop-rel","lt-prop-title","lt-prop-style","lt-prop-target","lt-prop-td","lt-prop-custom","lt-prop-target","lt-prop-id","lt-prop-class","lt-prop-style","lt-prop-rel","lt-prop-title"],a=0;a<i.length;a++){var s;-1!=(s=r.GLOBAL_ATTRIBUTES.indexOf(i[a]))&&r.GLOBAL_ATTRIBUTES.splice(s,1)}if(r&&r.GLOBAL_TAGS){null==r.GLOBAL_ATTRIBUTES&&(r.GLOBAL_ATTRIBUTES=[]);for(var c=Array.from(r.GLOBAL_TAGS),d=[],p=0;p<c.length;p++)for(I._registeredComponents[c[p]]?d=I._registeredComponents[c[p]].observedAttributes:l.registeredCustomComponent[c[p]]&&(d=l.registeredCustomComponent[c[p]].observedAttributes?l.registeredCustomComponent[c[p]].observedAttributes:[]),a=0;a<d.length;a++)-1==r.GLOBAL_ATTRIBUTES.indexOf(d[a])&&r.GLOBAL_ATTRIBUTES.push(d[a])}var u=document.createElement("div");if(o&&Object.keys(o).length)if(r&&Object.keys(r).length){l.Security.addGlobalObject(o,r);var f=o.sanitize(t);l.Security.removeGlobalObject(o,r)}else f=o.sanitize(t);else r&&Object.keys(r).length?(l.Security.addGlobalObject(l.Security._ourSanitizerInstance_,r),f=l.Security._ourSanitizerInstance_.sanitize(t),l.Security.removeGlobalObject(l.Security._ourSanitizerInstance_,r)):f=e.isLyteWidget?t:l.Security._ourSanitizerInstance_.sanitize(t);return u.innerHTML=f,u}var h=document.createElement("div");return h.innerHTML=t,h})),e.isLyteWidget||H[u]("escape",(function(e,t){return"url"==t?ZWAF["7.2.5"].Encoder.encodeForHTMLAttribute(e):"js"==t?ZWAF["7.2.5"].Encoder.encodeForJavaScript(e):"css"==t?ZWAF["7.2.5"].Encoder.encodeForCSS(e):e})),H[u]("debugger",(function(){})),H[u]("log",(function(){console.log.apply(e,Array.from(arguments))})),H[u]("ifEquals",(function(e,t){return e===t})),H[u]("if",(function(e,t,r){return e?t:r})),H[u]("negate",(function(e){return!e})),H[u]("ifNotEquals",(function(e,t){return e!==t})),H[u]("concat",(function(){for(var e="",t=arguments.length,r=0;r<t;r++)null!=arguments[r]&&(e+=arguments[r]);return e})),H[u]("toString",(function(e){return null==e?"":"object"==_typeof(e)?JSON.stringify(e):e})),defProp(HTMLElement.prototype,"setData",{writable:!0,configurable:!0,enumerable:!1,value:function(t,r){if(this._initProperties=this._initProperties||{},"string"==typeof t)e.isLyteWidget&&"TEMPLATE"!=this.tagName&&DataBindingLayer.updateInitProperties(this,t,r),this._initProperties[t]=r;else if("object"===_typeof(t))for(var o in t)e.isLyteWidget&&"TEMPLATE"!=this.tagName&&DataBindingLayer.updateInitProperties(this,o,t[o]),this._initProperties[o]=t[o]}}),defProp(HTMLElement.prototype,"setMethods",{configurable:!0,writable:!0,enumerable:!1,value:function(e,t){if(this._initMethods=this._initMethods||{},"string"==typeof e)this._initMethods[e]=t;else if("object"===_typeof(e))for(var r in e)this._initMethods[r]=e[r]}}),e.isLyteWidget||H[u]("encAttr",(function(e){return ZWAF["7.2.5"].Encoder.encodeForHTMLAttribute(encodeURIComponent(e))})),H[u]("expHandlers",(function(e,t,r,o){var n=arguments.length;if("++"==t){if("postfix"==r)return e++;if("prefix"==r)return++e}else if("--"==t){if("postfix"==r)return e--;if("prefix"==r)return--e}else{if("=="==t)return e==r;if("==="==t)return e===r;if("!="==t)return e!=r;if("!=="==t)return e!==r;if("&&"==t)return e&&r;if("||"==t)return e||r;if("+"==t)return n>2?e+r:e;if("-"==t)return n>2?e-r:-e;if("*"==t)return e*r;if("/"==t)return e/r;if("%"==t)return e%r;if("<"==t)return e<r;if(">"==t)return e>r;if("<="==t)return e<=r;if(">="==t)return e>=r;if("|"==t)return e|r;if("&"==t)return e&r;if("!"==t)return!e;if("="==t)return r;if("+="==t)return e+r;if("-="==t)return e-r;if("*="==t)return e*r;if("/="==t)return e/r;if("?:"==t)return e?r:o}})),P.register("lyte-event-listener",{_template:'<template tag-name="lyte-event-listener"></template>',_dynamicNodes:[],_observedAttributes:["eventName"],init:function(){var e=this,t=s.addEventListener(this.get("eventName"),(function(){var t=Array.prototype.slice.call(arguments);t.splice(0,0,"on-fire"),e.throwEvent.apply(e,t)}));this.regId=t},data:function(){return{eventName:s.attr("string")}},didDestroy:function(){s.removeEventListener(this.regId)}}),P.registerCustomPropHandler("ltProp"),P.shouldIgnoreDisconnect=function(){return H.ignoreDisconnect||c.ignoreDisconnect},P._setIgnoreDisconnect=function(e){H.ignoreDisconnect=c.ignoreDisconnect=e},P.addLyteEventListener=function(e,t,r,o){return e._lyteEvents=e._lyteEvents||{},e._lyteEvents[t]=e._lyteEvents[t]||[],t+"-"+e._lyteEvents[t].push({func:r,fromEventListener:!0,context:o})},P.removeLyteEventListener=function(e,t){if(t){var r=t.split("-"),o=(r[0],parseInt(r[1]));e._lyteEvents&&e._lyteEvents[r[0]]&&!isNaN(o)?e._lyteEvents[r[0]][r[1]-1]={}:s.error("Invalid listenerId / listener is not available")}else s.error("No listenerId provided")},P.throwEvent=H.throwEvent,H.hasLyteEvents=function(e,t){return!(!e._lyteEvents||!e._lyteEvents[t])},H.handleLyteEvents=function(t,r){for(var o,n=t._lyteEvents[r.type],i=0;i<n.length;i++)if(n[i].func&&(!1===n[i].func.call(n[i].context?n[i].context:e,r)||r.cancelBubble)){o=!0;break}return o&&r.stopPropagation(),o},e.LyteComponent||Object.defineProperty(e,"LyteComponent",{get:function(){return s.warn("Usage of LyteComponent is deprecated. Use Lyte.Component instead"),I}}),P.chromeBugFix(),H.booleanAttrList=["async","autocomplete","autofocus","autoplay","border","challenge","checked1","compact","contenteditable","controls","default","defer","disabled","formNoValidate","frameborder","hidden","indeterminate","ismap","loop","multiple","muted","nohref","noresize","noshade","novalidate","nowrap","open","readonly","required","reversed","scoped","scrolling","seamless","selected","sortable","spellcheck","translate"],H.nonFalsyAttrList=[],l.$.requiredMixins.component=function(e,t){var r=[],o={},n={},i={};r.push(e),t.forEach((function(e){var t=e,a=I._registeredComponents[t];r.length&&I.dataFromMixin(r,o,n,i),a._actions=Object.assign(a._actions,o),a.component._actions=Object.assign(a._actions,o);var s=Object.assign(a._methods,n);delete i.methods,I.updateCustomCrmComponent(i,a),a._methods=s,a.component._methods=s,I._registeredComponents[t]=a}))},l.$.injectServices.component=function(e,t,r,o,n,i){if(n){var a={};a[n.compName]=n}var s=n?a:H._registeredComponents;s&&Object.keys(s).forEach((function(r){var n=s[r];o&&l.__gS[e]?n.component.prototype[e]=o:l.$.requiredServices(e,t,(function(e,t){n.component.prototype[t]=e}),void 0,void 0,!0,i)}))},l.Security.addGlobalObject=function(e,t){for(var r in t)Array.isArray(t[r])&&t[r].forEach((function(t){-1==e["_"+r].indexOf(t)&&e["_"+r].push(t)}))},l.Security.removeGlobalObject=function(e,t){for(var r in t)Array.isArray(t[r])&&t[r].forEach((function(t){var o=e["_"+r].indexOf(t);-1!=o&&e["_"+r].splice(o,1)}))},l.Compile.getTrimmedContent=function(e,t,r){var o=e;if(r){t=[];for(var n=r.parentNode;t.unshift(this.getArrayIndex(n.childNodes,r)),n=n.parentNode,r=r.parentNode,n;);}for(var i=0;i<t.length;i++){for(var a=e.childNodes.length-1;a>t[i];a--)e.childNodes[a].remove();e=e.childNodes[t[i]]}return o},l.Compile.getArrayIndex=function(e,t){for(var r=0;r<e.length;r++)if(e[r]===t)return r},l.Compile.splitMixedText=function(e){for(var t,r,o=[],n=0,i={name:"concat",args:[]},a=[],s=0;s<e.length;s++){var l=s;if(r&&"'"===e[s])"'"===t&&"\\"!==e[s-1]?(a.pop(),t=void 0):a.length||(t=e[s],a.push(t));else if(r&&'"'===e[s])'"'===t&&"\\"!==e[s-1]?(a.pop(),t=void 0):a.length||(t=e[s],a.push(t));else if((!r||a.length)&&r||"\\"===e[s-1]||"{"!==e[s]||"{"!==e[++s]){if((r&&!a.length||!r)&&"}"===e[s]&&"}"===e[++s]&&o.length){o.pop(n),r=!1;var c=e.substr(n,l-n),d=this.getHelper(c);d?(c=d,i.args.push({type:"helper",value:c})):i.args.push(c),n=s+1}}else o.push("{{"),i.args.push("'"+e.substr(n,l-n)+"'"),n=s+1,r=!0}return n<e.length&&i.args.push("'"+e.substr(n,e.length-n)+"'"),i},l.Compile.getHelper=function(e,t,r){var o=/\((?:[^)]*|(?:(?:"(?:[^"\\]|\\.)*?")|(?:'([^'\\]|\\.)*?')|[\w\s!@#$%^&*)([\]+=.,_-]*?)*?)\)$/.exec(e);if(o)return this.getHelperInfo(e,o,t,r)},l.Compile.getHelperInfo=function(e,t,r,o){var n={};if(n.name=e.substr(0,t.index).replace(/\s/g,""),t=t?t[0].trim():t,"lyteViewPort"==n.name&&"()"==t)return n.args=[],n;var i=this.getHelperArgs(t.substr(1,t.length-2),r,o);return!1!==i&&(n.args=i,n)},l.Compile.getHelperArgs=function(e,t,r){for(var o=[],n=[],i=0,a=0;a<e.length;a++)if(o.length||","!==e.charAt(a))"("===e.charAt(a)?"'"!=o[o.length-1]&&'"'!=o[o.length-1]&&(o.push(e.charAt(a)),e.charAt(a)):")"===e.charAt(a)?"("===o[o.length-1]&&o.pop():"'"===e.charAt(a)&&"\\"!==e.charAt(a-1)?"'"===o[o.length-1]?o.pop():'"'!==o[o.length-1]&&(o.push(e.charAt(a)),e.charAt(a)):'"'===e.charAt(a)&&"\\"!==e.charAt(a-1)&&('"'===o[o.length-1]?o.pop():"'"!==o[o.length-1]&&(o.push(e.charAt(a)),e.charAt(a)));else{var s=e.substr(i,a-i);(s=s.trim())&&s.startsWith('"')&&s.endsWith('"')&&(s="'"+(s=s.slice(1,-1))+"'"),s=this.getHelperArgValue(s,t,r),n.push(s),i=a+1}if(o.length)return!1;var l=e.substr(i,e.length-i);(l=l.trim())&&l.startsWith('"')&&l.endsWith('"')&&(l="'"+(l=l.slice(1,-1))+"'");try{l=this.getHelperArgValue(l,t,r)}catch(e){return!1}if(n.push(l),t){var c=[];n.forEach((function(e){"string"==typeof e&&"'"!==e[0]&&"event"!==e&&"this"!==e?c.push(H.getDV(e)):c.push(e)})),n=c}return n},l.Compile.getHelperArgValue=function(e,t,r){switch(e){case"undefined":case"":return;case"true":return!0;case"false":return!1;case"null":return null;default:return e&&e.startsWith("'")&&e.endsWith("'")?(r||(e=(e=e.replace(/\\\'/g,"'")).replace(/\\\"/g,'"')),e):/\([\w\s,')(]*/.test(e)?{type:"helper",value:this.getHelper(e,t,r)}:isNaN(e)?e:parseInt(e)}},l.Compile.getMustache=function(e){if(e=e&&"string"==typeof e?e.trim():e,/^{{(?=[\s]*[#\w-_\(\$)]+)/.test(e)){var t=e.match(/{{[#a-zA-Z0-9_.[\]()]*(?![\\])}}/g);if(t&&t.length>1)return;if(!this.syntaxCheck(e)||!/{{[^}]*?(?:(?:('|")[^\1]*?\1)[^}]*?)*}}$/.test(e))return;var r=e.match(/[\w!@#$%^&*)(+=.,_-]+[\s]*[(]{0,1}(?:"([^"]|\\")*?"|'([^']|\\')*?'|[\w\s!@#$%^&*)([\]+=.,_-]*?)*?[)]{0,1}[\s]*(?=}})/g);if(r&&r.length>1)return;return r?r[0].trim():r}},l.Compile.syntaxCheck=function(e){for(var t,r=[],o=0;o<e.length;o++)"'"===e[o]?"'"===t&&"\\"!==e[o-1]?(r.pop(),t=void 0):r.length||(t=e[o],r.push(t)):'"'===e[o]&&('"'===t&&"\\"!==e[o-1]?(r.pop(),t=void 0):r.length||(t=e[o],r.push(t)));return!r.length},I.replaceWithOrigTemplate=function(e){return e._origTemplate._fakeTemp=e,e._origTemplate},I.pendingViewPortElements=[],I.isInViewPort=function(t,r){if(r)return!0;var o=t.getBoundingClientRect();if(0==o.width&&0==o.height&&0==o.top&&0==o.bottom&&"dummy-port-element"!=t.localName)return!1;var n=e.innerHeight||document.documentElement.clientHeight,i=e.innerWidth||document.documentElement.clientWidth;return(o.top>=0&&o.top<=n||o.bottom>=0&&o.bottom<=n||o.top<=0&&o.bottom>=0)&&(o.left>=0&&o.left<=i||o.right>=0&&o.right<=i||o.left<=0&&o.right>=0)},H._doneRaf={},l.Component.registerHelper("lyteViewPort",(function(t,r){var o=this.localName,n=H.getActViewPortTemplate(t);if(n._viewPortRendered)return!1;var i,a,s=r,c=H.pendingViewPortElements;if(n._disable={},r&&"object"==_typeof(r)&&(n._lazy=t._lazy=r.lazy,n._custom=!0,s=r.disableViewPort,(r.viewIn||r.viewOut)&&(n._viewIn=r.viewIn?Object.assign(r.viewIn):void 0,n._viewOut=r.viewOut?Object.assign(r.viewOut):void 0,n._renderPromise=new Promise((function(e,t){i=e,a=t})),n._promiseObject={resolvedByLyte:!1,spouse:n._viewIn,resolve:function(){!n._viewOut._afterAppendCalled&&n._viewOut.beforeRemove&&n._renderPromise&&!n._viewOut._beforeRemoveCalled&&(n._viewOut.beforeRemove.apply(n._viewOut,[t._promiseObject]),n._viewOut._beforeRemoveCalled=!0),n._renderPromise&&i()},reject:function(){n._renderPromise._reject=!0,a()}},n._renderPromise.then((function(){if(n._callee.component){var e=H.waitingForResolve.indexOf(t._renderPromise);-1!=e&&H.waitingForResolve.splice(e,1),n._renderPromise._resolved=!0;var r=c.indexOf(n);-1!=r&&c.splice(r,1);var o=n._viewIn;o&&o.beforeAppend&&o.beforeAppend.apply(o),H._executeIfTemplates(n),o&&o.afterAppend&&o.afterAppend.apply(o),n._renderPromise=null}}),(function(){l.error("Promise rejected - Viewport cannot be toggled.")})))),!s)return H._doneRaf[o]||(requestAnimationFrame((function(){setTimeout((function(){for(var t=[],r=Array.from(c),n=[],i=r.length-1;i>=0;i--){var a=r[i],s=(d=H.getActViewPortTemplate(a))._viewOut;s&&s.afterAppend&&(s.afterAppend.apply(s,[d._promiseObject]),s._afterAppendCalled=!0)}for(i=r.length-1;i>=0;i--){var l=r[i],d=H.getActViewPortTemplate(l);if(H.isViewPortTemplate(l)&&!l._callee._destroyed){var p={};if(H._isInViewPort(d,d._callee,n,void 0,p)){var u=c.splice(i,1)[0];l._inPve=!1,l._viewPortRendered=!0,!p.beforeRemoveHook&&t.push(u)}d._inPve=l._inPve,d._viewPortRendered=l._viewPortRendered}}for(var f=0;f<n.length;f++)n[f].viewOutIns.beforeRemove.apply(n[f].viewOutIns,n[f].arg),H.waitingForResolve.push(n[f].node._renderPromise);for(var h=0;h<t.length;h++)H._executeIfTemplates(t[h]);H._doneRaf[o]=!1,t.length&&requestAnimationFrame((function(){setTimeout((function(){H.executePendingViewPort()}),1)})),!e.isLyteWidget&&H.resolveLazy()}),1)})),H._doneRaf[o]=!0),-1==c.indexOf(H.getFakeTemplate(t))&&(t._inPve=!0,c.push(t)),!0;if(c.length){var d=H.getFakeTemplate(t),p=c.indexOf(d);t._inpve=d._inPve=!1,t._viewPortRendered=d._viewPortRendered=!0,-1!=p&&c.splice(p,1)}})),I.waitingForResolve=[],I._isInViewPort=function(e,t,r,o,n){var i=e._caseContent[0];if(i&&H.isInViewPort(i,o)){if(e._isInView=!0,!e._custom)return!0;var a=e._viewOut;if(a&&!e._renderPromise._resolved&&a.beforeRemove&&!a._beforeRemoveCalled){if(e._promiseObject.resolvedByLyte=!0,a._beforeRemoveCalled=!0,r.push({viewOutIns:a,arg:[e._promiseObject],node:e}),n)return n.beforeRemoveHook=!0,!0}else if(!e._renderPromise._reject)return n&&(n.beforeRemoveHook=!0),!0}},I.__preLazyRender=!1,I.resolveLazy=function(){I.pendingViewPortElements&&requestAnimationFrame((function(){setTimeout((function(){var e=!1;for(var t in H._doneRaf)H._doneRaf[t]&&(e=!0);H.waitingForResolve.length?Promise.all(H.waitingForResolve).then((function(){I.resolveLazy()}),(function(){l.error("Promise rejected - Viewport cannot be toggled.")})):e?I.resolveLazy():(!H.__preLazyRender&&l.triggerEvent("preLazyRender"),H.__preLazyRender=!0,H.executePendingViewPort({lazy:!0}))}),1)}))},I._executeIfTemplates=function(e){var t,r,o=H.getActViewPortTemplate(e);if(o._attributes.value=!1,o._cx||2===o.nodeType&&o.ownerElement._cx){r=o._cx||o.ownerElement._cx;var n=[];H.changeContext(r.node,n,r)}else"LYTE-YIELD"===o.tagName&&o._callee._cx&&(t=!0,r=o._callee._cx,n=[],H.changeContext(r.node,n,r,!0));o._callee.updateSwitchHelper("if",o,o._cx,!0,!0),r&&H.removeContext(r.node,n,r,t)},I.isViewPortTemplate=function(e){if(("TEMPLATE"==e.tagName||e._origTemplate)&&"if"==e.getAttribute("is"))return!0},I.getActViewPortTemplate=function(e){return e._origTemplate?e._origTemplate:e},I.getFakeTemplate=function(e){return e._fakeTemp?e._fakeTemp:e},I.executePendingViewPort=function(t){var r=H.pendingViewPortElements;if(r.length){var o,n=Array.from(r),i=[],a=[],c=s.Component.viewPortSettings,d=c.lazy.count,p="elements"==c.lazy.toggleBy,u="screen"==c.lazy.toggleBy;if(t&&t.lazy&&t.lazy.toggleBy&&(d=t.lazy.count,p="elements"==t.lazy.toggleBy,u="screen"==t.lazy.toggleBy,p?H._toggleElementsCount=d:"screen"==u&&(H._toggleScreenCount=d)),H.autoRender=H.autoRender||t&&"autoRender"==t.force,t&&t.force||H.autoRender)i=n;else{for(var f=n.length-1;f>=0;f--){var h=n[f];if(H.isViewPortTemplate(h)){var m=H.getActViewPortTemplate(h);if((o=m._lazy&&t&&t.lazy)&&p){if(0==d){requestAnimationFrame((function(){setTimeout((function(){H.executePendingViewPort({lazy:!0})}))}));break}d--}var v={};if(H._isInViewPort(m,m._callee,a,o,v)){var y=r.splice(f,1)[0];h._inPve=!1,h._viewPortRendered=!0,!v.beforeRemoveHook&&i.push(y)}m._inPve=h._inPve,m._viewPortRendered=h._viewPortRendered}else(H.isInViewPort(h._dummyViewPortF)||H.isInViewPort(h._dummyViewPortL))&&(h._dummyViewPortF=h._dummyViewPortL=void 0,i.push(r.splice(f,1)[0]))}for(var _=0;_<a.length;_++)a[_].viewOutIns.beforeRemove.apply(a[_].viewOutIns,a[_].arg),H.waitingForResolve.push(a[_].node._renderPromise)}for(var g=n.length,b=0;b<i.length;b++){var A=i[b];H.isViewPortTemplate(A)?H._executeIfTemplates(A):A.setData("lyteViewPort",!1)}H.isViewPortPending=!1,i.length&&!e.isLyteWidget?requestAnimationFrame((function(){requestAnimationFrame((function(){H.executePendingViewPort()}))})):g!=H.pendingViewPortElements.length||t&&t.lazy||l.triggerEvent("viewportRendered")}else H.isViewPortPending=!1},e.addEventListener("resize",(function(){requestAnimationFrame((function(){requestAnimationFrame((function(){H.executePendingViewPort()}))}))})),I.scrollEventHandler=function(){e.isLyteWidget&&(P.viewPortSettings.debounce=100);var t=P.viewPortSettings.debounce;t?(H.viewPortScrollDebounce&&clearTimeout(H.viewPortScrollDebounce),H.viewPortScrollDebounce=setTimeout((function(){requestAnimationFrame((function(){requestAnimationFrame((function(){H.executePendingViewPort()}))})),H.viewPortScrollDebound=void 0}),t)):requestAnimationFrame((function(){requestAnimationFrame((function(){H.executePendingViewPort()}))}))},document.addEventListener("scroll",I.scrollEventHandler,!0),I.core={},I.core._constructor=S,I.core._registerComponent=S._registerComponent,I.core.registerComponent=H.registerComponent,I.core.executeBlockHelpers=S.prototype.executeBlockHelpers,I.core.updateForHelper=S.prototype.updateForHelper,I.core.updateForInHelper=S.prototype.updateForInHelper,I.core.updateSwitchHelper=S.prototype.updateSwitchHelper,P.String=H.String,P.arrayOverride=H.arrayOverride,e.isLyteWidget||s.isWidgetBuild)for(var te=["push","pop","splice","shift","unshift","combine","sort"],re=function(){var e=te[oe];Object.defineProperty(Array.prototype,"$"+e,{enumerable:!1,value:function(){var t=Array.from(arguments);if(H&&(this._bindings||this._scp)){var r={fromOverride:!0};return"combine"===e?t.unshift(r,this,"concat"):t.unshift(r,this,e),H.aF.apply(H,t)}return this[e].apply(this,t)}})},oe=0;oe<te.length;oe++)re();P.viewPortSettings={debounce:0,lazy:{toggleBy:"elements",count:100},executePendingViewPortElements:function(e){I.executePendingViewPort(e)},resetLazy:function(){I.__preLazyRender=!1}},I.insertBeforeNative=function(e,t,r){e.insertBefore(t,r)}}(window),Lyte.registerErrorCodes({LD01:"Primary key value might be missing in the response data that is received, {0}",LD02:"{0} - {1} is not registered",LD03:"Cannot set the error {0} for {1}",LD04:"No such record to merge, {0}",LD05:"Model( {0} ) of related property - {1} not found in model - {2}",LD06:"Backward relation not present in model( {0} ), for the property {1} of model( {2} )",LD07:"{0} type not handled in handleArrayOperations",LD08:"{0} {1} will be deprecated from next version {2}",LD09:"deserializeKey cannot be processed for payload with more than two keys. Please use payloadKey callback instead or try modifying the same in normalizeResponse callback",LD10:"Response data not in a format lyte data store expects",LD11:"Deprecation Warning! findRecord response payload will not accept an array. It will be deprecated from the next version",LD12:"Response ( {0} ) is not in a format, lyte data store expects",LD13:"Response processing failed in {0} for model-{1} {2}, since invalid data is received in {1}(modelName) key of the data",LD14:"Cannot register {0} - {1}, as it already exists.",LD15:"Primary key value might be missing in the response data that is received, {0}",LD16:"Record merge failed for the record in model - {0} with primaryKey value - {1}, since either the persisted(saved) primary key value for a newly created record is not received from server or not in the proper structure to merge",LD17:"Record with the primary key value already exists",LD18:"No { 0 } present",LD19:"Deprecation Warning! findAll will not accept response payload values other than an array or any empty value. Current implementation which allows this will be deprecated from the next version",LD20:"Record cannot be saved as a state, when it is not either a new or a modified record or in a error state.",LD21:"No such state ( {0} ) saved for the record.",LD22:"For create / createRecord, response with a primary key value should be received",LD23:"PrimaryKey field {1} in {0} cannot have default value",LD24:"Response couldn't be parsed, {0}",LD25:"Cannot create record for the data - {0}",LD26:"Only one baseKey is allowed for a model",LD27:"Record merge failed, since the data passed is invalid - {0}",LD28:"Record merge failed for the model - {0}, since a valid primary key value is not found in the data to be merged - {1}",LD29:"Unloaded record-{0} of the model-{1} is being saved",LD30:"Variable value in query is mandatory for {0}",LD31:"Datatype defined for {0} is mismatch with the value's datatype",LD32:"Query '{0}' was not registered for the model '{1}"});var $Record=function(){Object.assign(this,{inIDB:!1,isPersisted:!0,isUnloaded:!1,isModified:!1,isNew:!1,isDeleted:!1,isError:!1,events:[],validatedOnCreate:!0,error:{}})},Record=function(e,t,r,o){var n=store.modelFor(e),i=r?r.delayPersistence:store.$.getFromCB("adapter",e,"delayPersistence");Object.assign(this,t),Object.defineProperties(this,{$:{writable:!0,value:new $Record}});var a=store.$.getpKVal(this,n);o&&Object.defineProperties(this.$,{isCloned:{value:!0,writable:!1},donor:{value:store.$.peekRecord(e,a)}}),Object.defineProperties(this.$,{pK:{value:a,writable:!0},model:{value:n},_attributes:{value:{},writable:!0},_relationships:{value:{},writable:!0},isDirty:{value:function(){var e,t=this.record;return!!t.$.isModified||!!(e=store.$.isDirty(t,this.model.relations)).length&&e}},undoStack:{value:store.$.genUnRedoStack(),writable:!0},redoStack:{value:store.$.genUnRedoStack(),writable:!0},delayPersistence:{value:i}}),this.$.record=this,n.sort&&!o&&store.$.defProp(this.$,"created_Time",store.$.getCreatedTime(n.cT));var s=store.$.saveParent;s&&this!==s&&store.$.defProp(this.$,"parent",s);var l=n._fldGrps.default,c=n._fldGrps.watch,d=n._fldGrps.hasMany,p=n._fldGrps.nested_prop;for(var u in l){var f=l[u],h=t[u];void 0!==h&&""!==h||(this[u]=store.$.getDefaultVal(this,f.default))}for(var m in c)Lyte.establishObjectBinding(this,m,!0,void 0,void 0,!0);for(var v in p)Lyte.establishObjectBinding(this,v,!0,void 0,void 0,v&&v.watch?v.watch:void 0);for(var y in d){var _=d[y];this.hasOwnProperty(y)?this[y]=Array.isArray(this[y])?Array.from(this[y]):this[y]:store.modelFor(_.relatedTo)&&!o&&store.$.getFromCB("serializer",_.relatedTo,"initHasManyRelation")&&(this[y]=[])}var g=n._properties;if(Object.keys(g).length&&(this._bindings||store.$.defProp(this,"_bindings",new Set,!1,!0),this._bindings.add(g),store.$.establishObserverBindings(this,g)),n.deprecate&&n.deprecate.size&&Lyte.__config&&Lyte.__config.deprecateModelFields){var b=new Proxy(this,{get:function(e,t,r){return n.deprecate.has(t)&&Lyte.warn("Property - '"+t+"' of Model-'"+n._name+"' has been deprecated. "),e[t]},set:function(e,t,r){return n.deprecate.has(t)&&Lyte.warn("Property - "+t+" of Model-"+n._name+" has been deprecated."),Reflect.set.apply(Reflect,arguments)}});return this.$.record=b,b}};Object.defineProperties($Record.prototype,{get:{value:function(e){var t=this.record[e];return Lyte.Component&&Lyte.Component._get&&(t=Lyte.Component._get(this.record,e)),Lyte.getConfig("mutable")&&(Lyte.isRecord(t)||Array.isArray(t)&&t.model)?Lyte.mut(t):t}},set:{value:function(e,t,r){return this.isDeleted?store.$.setRecErr(this,this.model._pK,"ERR17"):store.$.setData(this,e,t,r),this.record}},getDirtyAttributes:{value:function(){var e=[],t=this._attributes;if(Object.keys(t).length)for(var r in t)e.push(r);return e}},rollBackAttributes:{value:function(e,t){Array.isArray(e)||(e=[e]);for(var r=this.record.$.record,o=[],n=this.model,i=this._attributes,a=0;a<e.length;a++){var s=e[a];if(i.hasOwnProperty(s)){var l=n.fieldList[s],c=i[s];"relation"==l.type?(store.$.rllBckRecArr(c,r,n,l),(r.$.dN&&r.$.dN.hasOwnProperty(s)?r.$.dN[s]:new Map).forEach((function(e,t){store.$.deleteDeepNest(r,s,t)}))):store.$.cmpSet(r,s,c,void 0,!0),o.push(s),delete i[s]}store.$.clrRecErr(this,s)}if(Object.keys(this._attributes).length||(this.hasOwnProperty("dN")&&(!this.dN||Object.keys(this.dN).length)||r.$.isNew||store.$.removeParentNesting(r,"modified"),store.$.cmpSet(this,"isModified",!1),store.$.changePersist(r,!0),this.isNew||store.$.deleteFromArray(n.dirty,this.get(n._pK))),o.length>0){var d=[r,o];this.emit("change",d),n.emit("change",d)}}},rollBack:{value:function(e,t){var r=this.model,o=(r._pK,new Map);t=!1!==t&&r._fldGrps.inherit&&Object.keys(r._fldGrps.inherit).length,e?(this.rollBackState(e,t),store.$.removeOnSave(this.model._name,this.record.$.pK)):(t&&store.$.rBinherit(this,o,""),store.$.rollBackRecord(this))}},deleteRecord:{value:function(e){var t=this.model,r=this.record.$.record;e=void 0!==e?e:r.$.delayPersistence?r.$.delayPersistence.delete:void 0,store.$.removeFromStore(t,r.$.pK,void 0,void 0,e)}},destroyRecord:{value:function(e,t,r,o){var n;return(Lyte.perfomance||Lyte.debug)&&(n=store.$.requestIdGenerator(this.model._name,"destroyRecord"),store.$.PerfomanceLog(n,"destroyRecord",this.model._name)),this.deleteRecord(r),this.save(e,t,"destroyRecord",void 0,o,n)}},addEventListener:{value:function(e,t){return store.$.eventListeners.add(this,e,t)}},removeEventListener:{value:function(e){store.$.eventListeners.remove(this,e)}},emit:{value:function(e,t){store.$.eventListeners.emit(this,e,t)}},triggerAction:{value:function(e,t,r,o,n){var i=this.model,a=i.actions;return(a?a[e]:void 0)?store.adapter.$.handleAction(e,i,this.record.$.record,t,r,o,n):Promise.reject({code:"ERR18",message:Lyte.errorCodes.ERR18,data:e})}},save:{value:function(e,t,r,o,n){var i;(Lyte.perfomance||Lyte.debug)&&(i=store.$.requestIdGenerator(this.model._name,"save"),store.$.PerfomanceLog(i,"save",this.model._name));var a=this;if(this.isCloned){if(this.isUnloaded)return Promise.resolve();a=store.$.savingDonorRecord(this)}var s,l=a.model,c=a.record,d=a.isDirty(),p=r&&r.validateOnSave,u=r&&r.skipValidation,f=l.fieldList;if(!0!==a.isUnloaded)if(a.isDeleted){if(!a.isNew)return store.adapter.$.del(l._name,c,!0,o,e,t,n,i)}else{if(a.isNew){var h=a;return u||c.$.validatedOnCreate&&!p||(s=store.$.validateRecord(a.record,f)),!u&&(0==s||h&&h.error&&Object.keys(h.error).length>0)?Promise.reject(h.error):store.adapter.$.create(l._name,c,!0,e,t,n,i)}if(a.isModified||d&&d.length){if(!u&&r&&p&&(s=store.$.validateRecord(a.record,f)),!u&&(0==s||c&&c.$&&c.$.isError))return Promise.reject(c.$.error);var m=store.$.updateJSON(a.record,l,d);return store.adapter.$.put(l._name,m,c,!0,e,t,n,i)}}else if(Lyte.warn("LD29","object"==_typeof(c.$.pK)?JSON.stringify(c.$.pK):c.$.pK,l._name),store.$.getFromCB("adapter",l._name,"rejectUnloadRecordSave"))return Promise.reject({code:"ERR28",message:Lyte.errorCodes.ERR28,data:c});return Promise.resolve()}},getInitialValues:{value:function(e){var t=!1;e?(Array.isArray(e)||(e=[e]),t=!0):e=this.getDirtyAttributes();for(var r={},o=this.record.$.record,n=this._attributes,i=0;i<e.length;i++)if(null!=o[e]&&o[e[i]].add){r[e[i]]=o[e[i]].slice(0);for(var a=n[e[i]],s=o[e[i]].model._pK,l=a.length-1;l>=0;l--)if("added"==a[l]._type)for(var c=0;c<a[l].records.length;c++){var d=store.$.getIndex(r[e[i]],s,a[l].records[c].$.pK);-1!=d&&r[e[i]].splice(d,1)}else if("removed"==a[l]._type)for(c=a[l].records.length-1;c>=0;c--)r[e[i]].splice(a[l]._indices[c],0,a[l].records[c]);else"changed"==a[l]._type&&(r[e[i]]=Array.isArray(a[l].records)?Array.from(a[l].records):a[l].records)}else r[e[i]]=n[e[i]];return t?r[e[0]]:r}},toJSON:{value:function(e,t){var r,o=!0;return t=!!t,"object"==_typeof(e)&&(0==e.inherit&&(o=e.inherit),"state"==e._type&&(r=e.parentState,e=e._type)),Object.assign({},store.$.toJSON(this.model._name,this.record.$.record,e||!0,void 0,void 0,o,t,r))}},undo:{value:function(e,t){var r=this.undoStack._order_.length;for(t=t||(r?r-1:r);r-- >t;)store.$.unredoOp(1,this,e)}},getCurrentState:{value:function(){return this.undoStack._order_.length}},redo:{value:function(e){store.$.unredoOp(2,this,e)}},validate:{value:function(e,t){var r={},o=this.model.fieldList;Array.isArray(e)?e.forEach((function(e,t){o[e]&&(r[e]=o[e])})):"object"==_typeof(e)&&(r=e),0!=Object.keys(r).length&&1!=e||(r=o);var n=this.record,i=store.$.validateRecord(n,r,t);if(t&&i&&"object"==_typeof(i))return i}},saveState:{value:function(e){if(this.isNew||this.isModified){for(var t,r=this._savedState=this._savedState||{},o=e;!o;)t=Math.floor(1e5*Math.random()+1),o=r.hasOwnProperty(t)?o:t;var n={modelName:this.model._name,pK:this.pK,_stateId_:o},i=this.toJSON({_type:"state",parentState:n});store.$.defProp(i,"$",{},!1,!0),this.model._arrPk.forEach((function(e){delete i[e]}));var a=this.undoStack,s=this.redoStack,l=this._attributes,c=this.dN;if(a&&Object.keys(a).length){var d=a._order_;a=i.$.undoStack=store.$.deepCopyStack(a),store.$.defProp(a,"_order_",Lyte.deepCopyObject(d),!1,!0)}return s&&Object.keys(s).length&&(d=s._order_,s=i.$.redoStack=store.$.deepCopyStack(s),store.$.defProp(s,"_order_",Lyte.deepCopyObject(d),!1,!0)),l&&Object.keys(l).length&&(i.$._attributes=store.$.deepCopyAttrs(this.model,l)),c&&Object.keys(c).length&&(i.$.dN=Lyte.deepCopyObject(c)),i.$.__state__=n,this._savedState[o]=i,o}Lyte.warn("LD20")}},clearState:{value:function(e){e?delete this._savedState[e]:this._savedState={}}},rollBackState:{value:function(e,t){var r=this._savedState,o=r?r[e]:void 0;o?(this.dN&&(this.dN={}),store.$.setData(this,o,void 0,void 0,{},void 0,t,o.$.dN,o.$.__state__),store.$.updateDn(this.record.$.record),this.undoStack=o.$.undoStack||store.$.genUnRedoStack(),this.redoStack=o.$.redoStack||store.$.genUnRedoStack(),this._attributes=o.$._attributes||{},store.$.checkAttrs(this.record.$.record),delete this._savedState[e]):Lyte.warn("LD21",e)}},hasSavedState:{value:function(e){return!(!this._savedState||!this._savedState.hasOwnProperty(e))}},persist:{value:function(e){var t,r,o=this.model._name,n=this.record.$.record,i={obj:new Map};if(this.isNew)t="create",store.$.toJSON(o,n,void 0,t,i);else if(r=this.isDirty()){var a=store.$.updateJSON(n,this.model,r);store.$.toJSON(o,a,void 0,void 0,i)}var s=i.obj.get(this.pK);store.adapter.$.mergeResponse(n,this.model,void 0,this.pK,s,!0),store.adapter.$.updateIDB(o,t||(n.$.isDeleted||n.$.isUnloaded?"deleteRecord":n.$.isModified||r?"updateRecord":void 0),n)}},clone:{value:function(e){var t,r;e&&"object"==_typeof(e)&&(t=e.inherit,r=e.addNotDefinedFields);var o=this.record.$.record,n=this.record.$.toJSON({type:"isClone",inherit:t},r),i=new Map;return i.set(o.$.model._name,new Map),store.$.insertIntoStore(o.$.model._name,n,void 0,void 0,void 0,void 0,void 0,{type:"isClone",_RefMap:i})}}});var Model=function(e,t){Object.assign(this,{_name:e,fieldList:{id:{type:"string",primaryKey:!0,defined:!1}},relations:{},_properties:{},deprecate:{},_fldGrps:{default:{},hasMany:{},watch:{},inherit:{},nested_prop:{},inverse:{},JsonPathWatch:{}},data:[],dirty:[],_deleted:new Map,events:{}}),store.$.defProp(this.data,"_recMap",new Map);var r=[];for(var o in t)store.$.registerField(this,o,t[o],r);this._pK||(this._pK="id"),this.isComp=!1;var n=this._pK.split(",");n.length>1&&(this.isComp=!0),this._arrPk=n,"undefined"!=typeof Lyte&&(Lyte.establishObserverBindings(r,!0,this._properties,this),Lyte.establishWatchScope(this._fldGrps.JsonPathWatch,this)),store.$.defArrUtls(this.data),store.$.defUtls(this.data,this),store.$.defProp(this,"extends",store.$.extendModel)};Model.prototype.addEventListener=function(e,t){return store.$.eventListeners.add(this,e,t)},Model.prototype.removeEventListener=function(e){store.$.eventListeners.remove(this,e)},Model.prototype.emit=function(e,t){store.$.eventListeners.emit(this,e,t)},Model.prototype.on=function(e,t){return this.addEventListener(e,t)},Model.prototype.setGql=function(e,t,r){store.$.setQuery(this,t,e,r)};var store={model:{},$:{idbOpen:!0,request:{},toRelate:{},idbQueue:[],idbQ:{},idbQ2:{},nestScp:{},nestScpId:1,getAdapter:function(e){if("application"==e.name)return store.adapter[e.name];if(e.model||e.name){var t=e.model||store.model[e.name];if(t&&t.extend&&!store.adapter.hasOwnProperty(t._name))return store.adapter[t.extend];var r=t?t._name:e.name;return store.adapter[r]}},registerModel:function(e,t,r){if(store.model.hasOwnProperty(e))return Lyte.warn("LD14","Model",e),Lyte._postRegister(),{error:Lyte.getErrorMessage("LD14","Model",e),extends:function(){}};try{var o,n,i,a,s,l,c;if(r&&"object"==_typeof(r)&&(o=r.extends||void 0,n=r.actions||void 0,i=r.idb||void 0,a=r.gql||void 0,s=r.sort||void 0,l=r.deprecate||void 0,c=r.endPoint||void 0),o){var d=Object.assign({},store.model[o].fieldList);for(var p in d)"relation"==d[p].type&&delete d[p];t=Object.assign(t,d)}var u=store.model[e]=new Model(e,t);o&&store.$.extendModel(o,u),n&&(u.actions=n),i&&(u.idb=i),a&&(u.gql=a),s&&(u.sort=s,u.cT=new Map);var f=new Map;l&&(Array.isArray(l)||(l=[l]),l.forEach((function(e){f.has(e)||f.set(e,!0)}))),u.deprecate=f,c&&(u.endPoint=c),Lyte._postRegister()}catch(e){Lyte._postRegister()}return u},changePersist:function(e,t,r){if(!e.$.isUnloaded||e.$.isPeristed!==t)switch(t){case!0:e.$.isNew||e.$.isModified||e.$.isDeleted||(store.$.cmpSet(e.$,"isPersisted",!0),e.$._relationState&&!r&&store.$.UpdateParentSate(e,void 0,t));break;case!1:(e.$.isNew||e.$.isModified||e.$.isDeleted||e.$.dN&&Object.keys(e.$.dN)&&Object.keys(e.$.dN).length)&&store.$.cmpSet(e.$,"isPersisted",!1)}},getFromCB:function(e,t,r){var o,n=store[e];/^(adapter|serializer)$/.test(e)&&store.model.hasOwnProperty(t)&&store.model[t].extend&&(o=store.model[t].extend);for(var i=n&&n.hasOwnProperty(t)?n[t]:o&&n.hasOwnProperty(o)?n[o]:void 0,a=i?i[r]:void 0;void 0===a;)if(i&&i.$super)a=(i=i.$super)?i[r]:void 0;else{if(i||(i=n.application),!i||!i.hasOwnProperty(r)){if("adapter"==e){switch(r){case"host":a=window.location.origin?window.location.origin:window.location.protocol+"//"+window.location.host;break;case"namespace":a="";break;case"actionNamespace":a="action";break;case"batchNamespace":a="batch";break;default:a=void 0}break}break}if(a=i[r],!i&&!a)break}return a},newCB:function(e,t,r,o,n){for(var i in t.__extendedBy=[],o)t[i]=o[i];store.$.extendOptions(n,e,r,t,store),store.$.lazyExtend(e,t,r),store.$.defProp(t,"is",e),store.$.defProp(t,"__name",r)},extendOptions:function(e,t,r,o,n){e&&e.mixins&&e.mixins.length&&e.mixins.forEach((function(e){if(Lyte.Mixin.exists(e)){var i=Lyte.registeredMixins[e];for(var a in i)o[a]=i[a]}else Lyte.$.requiredMixins(e,{name:r,scope:n},t)}));var i=e?e.services:[];if(store.$.extendService(i,t,r,o,n),Lyte.toBeInjectedServices){var a=Lyte.toBeInjectedServices,s=[];for(var l in a)s.push({as:l,service:a[l]});store.$.extendService(s,t,r,o,n,!0)}},extendService:function(e,t,r,o,n,i,a){Lyte.extendService({services:e,type:t,name:r,ins:o,isGlobal:i,data:a,callback:function(e,r,o,a){Lyte.$.lazyRegisterService(i?e:Lyte.$.instantiateService(a),{scope:n,type:t,name:o,key:r})}})},lazyExtend:function(e,t,r){var o=store[e];if(o.__toAddSuper&&o.__toAddSuper.hasOwnProperty(r)){for(var n=o.__toAddSuper[r],i=0;i<n.length;i++){var a,s=o[n[i]];s&&s.is==e&&(s.$super=t,t.__extendedBy.push(n[i]),"application"!=r&&(o.__toAddSuper.application&&(a=o.__toAddSuper.application.indexOf(s.__name))>-1&&o.__toAddSuper.application.splice(a,1),o.application&&(a=o.application.__extendedBy.indexOf(s.__name))>-1&&o.application.__extendedBy.splice(a,1)))}delete o.__toAddSuper[r]}},cbDef:function(e,t){Object.defineProperties(e.prototype,{super:{value:function(){return store.$.super.call(this,arguments)}},extends:{value:function(e){store.$.extendCallback.call(this,store,t,e)}}})},changeRelPkMaps:function(e,t,r,o,n){var i=e.$.model,a=i.relations;for(var s in a)for(var l=a[s],c=l.length,d=0;d<c;d++){var p=l[d],u=p.relKey,f=p.relType;if(e.hasOwnProperty(u)){var h,m=e[u],v=store.model[p.relatedTo];if(v&&(h=store.$.getBackwardRel(i,p,v))&&"hasMany"==h.relType)if(P=h.opts&&h.opts.sort&&h.opts.sort.sortFn&&h.opts.sort.observes,"belongsTo"==f&&Lyte.isRecord(m))switch(o){case"sort":case"srtObsChk":if(m&&Array.isArray(m[h.relKey]))if("sort"==o)P&&-1!=h.opts.sort.observes.indexOf(n)&&store.$.handleArrOp(m[h.relKey],"sort");else if(n!==h.relKey)return!0;break;default:m[h.relKey]&&m[h.relKey]._recMap&&m[h.relKey]._recMap.delete(t)&&m[h.relKey]._recMap.set(r,e)}else if("hasMany"==f&&Array.isArray(m))for(var y=m.length,_=0;_<y;_++){var g=m[_];switch(o){case"sort":case"srtObsChk":if(g&&Array.isArray(g[h.relKey]))if("sort"==o)P&&-1!=h.opts.sort.observes.indexOf(n)&&store.$.handleArrOp(g[h.relKey],"sort");else if(n!==h.relKey)return!0;break;default:Lyte.isRecord(g)&&g[h.relKey]&&g[h.relKey]._recMap&&g[h.relKey]._recMap.delete(t)&&g[h.relKey]._recMap.set(r,e)}}}}var b=e.$._relationships;for(var A in b){var E=b[A],C=store.modelFor(A);for(var u in E)for(var L=E[u],$=C.fieldList[u],P=$.opts&&$.opts.sort&&$.opts.sort.sortFn&&$.opts.sort.observes,w=L.length,R=0;R<w;R++){var N=(g=L[R])[u];if(Array.isArray(N))switch(o){case"sort":case"srtObsChk":if(Array.isArray(N))if("sort"==o)P&&-1!=$.opts.sort.observes.indexOf(n)&&store.$.handleArrOp(N,"sort");else if(n!==$.relKey)return!0;break;default:N._recMap&&N._recMap.delete(t)&&N._recMap.set(r,e)}}}},updateNestScp:function(e,t){if(Lyte.isRecord(e)){var r=e.$.__scpObj||{};for(var o in r)if(i=(i=r[o]).split("_")[0],Lyte.nestScp&&Lyte.nestScp.hasOwnProperty(i)&&Lyte.nestScp[i].model){var n=Lyte.nestScp[i].model.get(e.$.model._name);if(n.has(t)){var i=n.get(t);n.delete(t),n.set(e.$.pK,i)}}}},getDefaultVal:function(e,t){return"function"!=typeof t?t:t.call(e)},deepValueChange:function(e,t,r,o){var n={emit:!1,attr:[],oldRec:{}};store.$.estAttrs(e,t,r,n,o),store.$.checkAttrs(e),store.$.changeCallbck(e,n)},updateDn:function(e){var t=e.$.model.relations;for(var r in t)t[r].forEach((function(t){var r=t.opts,o=t.relKey,n=t.relType;if(r&&r.deepNest&&e.hasOwnProperty(o)){var i=e[o];"belongsTo"==n&&(i.$.isModified||i.$.dN&&Object.keys(i.$.dN).length)?store.$.setDeepNest(e,o,i.$.pK,"updated"):"hasMany"==n&&Array.isArray(i)&&i.forEach((function(t){(t.$.isModified||t.$.dN&&Object.keys(t.$.dN).length)&&store.$.setDeepNest(e,o,t.$.pK,"updated")}))}}))},genUnRedoStack:function(){var e={};return store.$.defProp(e,"_order_",[],!1),e},deepCopyStack:function(e){if(e&&"object"==_typeof(e))for(var t in e=Object.assign({},e))if(Array.isArray(e[t])){var r=e[t]=Array.from(e[t]);r.forEach((function(e,t){r[t]=Object.assign(e)}))}return e},deepCopyAttrs:function(e,t){var r=e.fieldList;for(var o in t=Object.assign({},t)){var n=t[o];r[o]&&"relation"==r[o].type&&Array.isArray(n)&&(n=t[o]=Array.from(n)).forEach((function(e,t){n[t]=Object.assign({},e),e.hasOwnProperty("records")&&e.records&&(e.records=Array.from(e.records)),e.hasOwnProperty("_indices")&&e._indices&&(e._indices=Array.from(e._indices))}))}return t},addTo_Del:function(e,t,r){var o={index:r,data:t};(e._deleted=e._deleted||new Map).set(t.$.pK,o)},scExtd:function(e,t,r,o){var n="adapter"==e?store.adapter:store.serializer;if(t)return n.hasOwnProperty(t)?(Lyte.warn("LD14",e,t),{error:Lyte.getErrorMessage("LD14",e,t),extends:function(){}}):(n[t]="adapter"==e?new Adapter(r,o,t):new Serializer(r,o,t),n.application&&"application"!=t&&(n[t].$super=n.application,n.application.__extendedBy.push(t)),n.application||"application"==t||(n.__toAddSuper=n.__toAddSuper||{},n.__toAddSuper.hasOwnProperty("application")||(n.__toAddSuper.application=[]),n.__toAddSuper.application.push(t)),n[t])},initCB:function(e,t,r,o,n){var i=store.$.cbScp(t,r,e),a=o.args,s={};if(i)return s.data=store.$.cB(i,a,r,t,n),s},cB:function(e,t,r,o,n){store.$.PerfomanceLog(n,r,o,!0);var i=e.func.apply(e.scope,t.concat(e.name));return store.$.PerfomanceLog(n,r,o),i},cbScp:function(e,t,r){var o,n=store[r],i=n.application;/^(adapter|serializer)$/.test(r)&&store.model.hasOwnProperty(e)&&store.model[e].extend&&(o=store.model[e].extend);for(var a=n&&n.hasOwnProperty(e)?n[e]:o&&n.hasOwnProperty(o)?n[o]:void 0;;){if(a&&a[t]&&"function"==typeof a[t])return{scope:a,func:a[t],name:t};if(!a||!a.$super)return i&&i[t]&&"function"==typeof i[t]?{scope:i,func:i[t],name:t}:void 0;a=a.$super}},comparePk:function(e,t){var r=e.$.pK,o=_typeof(r);if("string"==o||"number"==o)return r===t;if("object"==_typeof(r)){var n=Object.keys(r).length,i=0;for(var a in r)r[a]===t[a]&&i++;return n===i}},getpKVal:function(e,t){var r=(t=t||e.$.model)._arrPk;if(1==r.length)return e[r[0]];var o={};return r.forEach((function(t){o[t]=e[t]})),o},unredoOp:function(e,t,r){var o,n;1==e?(o=t.undoStack,n=t.redoStack):(o=t.redoStack,n=t.undoStack);var i=[],a={};if(r?(i=Array.isArray(r)?r:[r]).forEach((function(e){if(o[e].length)for(var t=o._order_.length-1;t>=0;t--){var r=o._order_[t],n=r.indexOf(e);if(n>-1){r.splice(n,1),r.length||o._order_.splice(t,1);break}}})):i=o._order_&&o._order_.length?o._order_.pop():i,i.length){for(var s=0;s<i.length;s++){var l,c=i[s];"update"==(l=o[c].pop())._type?l.hasOwnProperty("val")?store.$.setData(t,c,l.val,void 0,a):l.hasOwnProperty("records")&&store.$.setData(t,c,l.records,void 0,a):1==e&&"propAdd"==l._type?"undefined"!=typeof Lyte?(a[c]={_type:"propDelete",val:t.record[c]},l.hasOwnProperty("val")&&store.$.setData(t,c,l.val,void 0,{}),Lyte.objectUtils?Lyte.objectUtils(t.record,"delete",c):delete t.record[c]):delete t.record[c]:2==e&&"propDelete"==l._type?(a[c]={_type:"propAdd"},store.$.setData(t,c,l.val,void 0,a)):"added"==l._type?t.record.$.get(c).remove(l.records,void 0,a):"removed"==l._type&&(store.$.rllBckRecArr([l],t.record,t.model,t.model.fieldList[c]),l._type="added",a[c]=l)}var d=Object.keys(a);for(s=0;s<d.length;s++)n[c=d[s]]=n[c]||[],n[c].push(a[c]);d.length&&n._order_.push(d)}},unregisterModel:function(e,t){var r=store.modelFor(e);if(r){r.data.length&&store.unloadAll(e,void 0,t);var o=r.extendedBy;if(o&&Object.keys(o).length)for(var n in o)store.unregisterModel(n,t);var i=r.extend;i&&delete store.modelFor(i).extendedBy[e],delete store.model[e],store.__mdlPrx&&delete store.__mdlPrx[e]}else Lyte.warn("LD02","Model ",e)},getDsrzEmpData:function(e,t){if(e.hasOwnProperty("deserializeEmptyData"))return e.deserializeEmptyData;var r=store.$.getFromCB("serializer",t,"deserializeEmptyData");return void 0!==r&&r},updateFieldValidation:function(e,t,r,o){var n=e.data,i=e.fieldList;n.forEach((function(n){var a=i[t];if(r){var s=store.$.getDsrzEmpData(a,e._name),l=!s&&n[t];if(n.hasOwnProperty(t)&&(l||s)&&Lyte.Transform.hasOwnProperty(a.type)){var c={data:n[t],key:t,model:e._name,pkVal:store.$.getpKVal(n,e)};Lyte.TransformHierarchy(a.type,c,"deserialize",new Map),n[t]=c.data}}if(!o){var d=!!(n.$.error&&n.$.error.hasOwnProperty(t)&&n.$.error[t].hasOwnProperty("value")),p=d?n.$.error[t].value:void 0;store.$.clrRecErr(n.$,t),d?store.$.validateField(n,t,a,void 0,{old:!0,value:p}):store.$.validateField(n,t,a,void 0)}d&&n.$.error&&0===Object.keys(n.$.error)&&n.$.set(t,p)}))},validateRelatedRecord:function(e,t,r){var o=store.model[r.relatedTo].fieldList;if(r&&r.opts&&e&&e.hasOwnProperty(t)&&r.opts&&"record"==r.opts.serialize){if("belongsTo"==r.relType&&Lyte.isRecord(e[t]))return this.validateRecord(e[t],o);if("hasMany"==r.relType&&Array.isArray(e[t])){var n=!0,i=this;return e[t].forEach((function(e,t){Lyte.isRecord(e)&&!1===i.validateRecord(e,o)&&(n=!1)})),n}}},validateRecord:function(e,t,r){var o,n=!0,i={};for(var a in t)o=this.validateField(e,a,t[a],void 0,void 0,r,i),!0===n&&!1===o&&(n=!1);if(r){var s=r.apply(e.$,[i]);if(s&&"object"==_typeof(s))for(var l in s)store.$.setRecErr(e.$,l,s[l]);else if(1==s)return!0}return!(!1===n||!0===e.$.isError&&e.$.error&&Object.keys(e.$.error).length)},validateField:function(e,t,r,o,n,i,a){var s,l,c=n&&n.old?n.value:e[t],d=e.$;if(i&&d.error[t]&&(c=n=d.error[t].value,l={skipValidation:!0}),"relation"==r.type){if(!1===this.validateRelatedRecord(e,t,r))return!1}else if(r.mandatory&&!e.$.error.hasOwnProperty(t)&&(void 0===c||""===c||Array.isArray(c)&&0===c.length))i?a[t]={code:"ERR02",message:Lyte.errorCodes.ERR02,value:c}:store.$.setRecErr(d,t,{code:"ERR02",message:Lyte.errorCodes.ERR02,value:c});else if(s=!0,n||e.hasOwnProperty(t)&&!e.$.error.hasOwnProperty(t)){var p=r;p.any&&Array.isArray(p)||(p=[p]);for(var u=p.length,f=!0,h=0;h<u;h++){var m=p[h];for(var v in m){var y=Lyte.checkProperty(v,c,t,m[v],m,e,void 0,Lyte.isRecord(e)?e.$.model._name:void 0);if(!0!==y){!0===f&&("object"==_typeof(y)&&(y.value=c),f=y);break}}}!0!==f&&(i?a[t]=f:store.$.setRecErr(d,t,f),s=!1),n&&s&&store.$.setData(e.$,t,c,l),s&&store.$.clrRecErr(d,t)}},partialData:function(e,t,r,o,n,i){var a=e[t];if(!a||!Array.isArray(a))return!0;a.partial||store.$.defPar(a);var s=a.partial=a.partial||new Map;s.get(r)||s.set(r,{});var l=!1;switch(s.get(r).type){case"added":"removed"==o&&(s.delete(r),l=!0);break;case"removed":if("added"==o){if(e[t]._recMap)var c=e[t]._recMap.get(r);!c||Lyte.isRecord(c)&&!c.$.isDirty()?(s.delete(r),l=!0):s.get(r).type="modified"}break;case"modified":case"updated":if("added"==o)break;default:if(i)s.delete(r),l=!0;else{var d={type:o};n&&(d.polymorphicType=n),s.set(r,d)}}return l&&!s.size?(s.size||store.$.deleteDeepNest(e,t,r),!0):void 0},removeParentNesting:function(e,t,r){var o=e.$.model,n=e.$.pK,i=o.relations;for(var a in i)i[a].forEach((function(i){var a,s,l,c,d=store.model[i.relatedTo];d&&((a=store.$.getBackwardRel(o,i,d))&&a.opts&&(s=a.opts.deepNest,l=a.opts.hasOwnProperty("serialize"),c=i.relKey&&i!=a?e[i.relKey]:store.$.getRelatedRecord(e,i.relatedTo,i.dummy?i.dummy:i.relKey)),l&&!r&&(c&&!Array.isArray(c)&&(c=[c]),Array.isArray(c)&&c.forEach((function(e){if(a.relKey)if("belongsTo"==a.relType&&e&&e.$)e.$.partial&&e.$.partial[a.relKey]&&e.$.partial[a.relKey].has(n)&&(e.$.partial[a.relKey].delete(n),e.$.partial[a.relKey].size||delete e.$.partial[a.relKey]),s&&store.$.deleteDeepNest(e,a.relKey,n);else if("hasMany"==a.relType){var r=e[a.relKey];if(Array.isArray(r)){if(r.partial&&r.partial.has(n)){var o=r.partial.get(n).type;"modified"==t?/^(modified|updated)$/.test(o)&&r.partial.delete(n):r.partial.delete(n)}s&&store.$.deleteDeepNest(e,a.relKey,n)}}}))))}))},deleteDeepNest:function(e,t,r){var o=e.$.dN;o&&(o[t]&&void 0===r?delete o[t]:o[t]&&o[t].get(r)&&(o[t].delete(r),o[t].size||delete o[t]),Object.keys(o).length||(delete e.$.dN,e.$.isModified||e.$.isNew||store.$.removeParentNesting(e),store.$.changePersist(e,!0)))},updateJSON:function(e,t,r){var o={},n=t._arrPk,i=e.$._attributes;for(var a in i)o[a]=e[a];var s=r;1==r&&(s=store.$.isDirty(e,t.relations)||[]);for(var l=0;l<s.length;l++)o[s[l]]=e[s[l]];return n.forEach((function(t){o[t]=e[t]})),o},removeDeepNest:function(e){if(Lyte.isRecord(e)&&e.$.dN&&Object.keys(e.$.dN).length){e.$.dN={};var t=e.$.model.relations;for(var r in t)t[r].forEach((function(t){var r=t.opts;if(r&&(r.deepNest||"partial"==r.serialize)){var o=e[t.relKey];Array.isArray(o)?o.forEach((function(e){Lyte.isRecord(e)&&(store.$.removeDeepNest(e),e.$.isNew||e.$.isModified||e.$.dN&&(!e.$.dN||0!=Object.keys(e.$.dN).length)||store.$.removeParentNesting(e))})):Lyte.isRecord(o)&&(store.$.removeDeepNest(o),o.$.isNew||o.$.isModified||o.$.dN&&(!o.$.dN||0!=Object.keys(o.$.dN).length)||store.$.removeParentNesting(o))}}))}},addDeepNest:function(e,t,r,o,n,i){n=n||new Map;var a,s=t?store.model[e.$.model.extend]:e.$.model,l=e.$.pK,c=(r=r||"updated",s.relations);for(var d in c)c[d].forEach((function(t){var c,d,p,u,f=store.model[t.relatedTo];if(f&&(c=store.$.getBackwardRel(s,t,f),a=t.relKey&&c!==t?e[t.relKey]:store.$.getRelatedRecord(e,t.relatedTo,t.dummy?t.dummy:t.relKey))){var h,m=!1;if(!n.get(c)){var v=n.set(c,new Map);m=!0}if(v=n.get(c),(m||!v.get(a))&&(v.set(a,!0),c&&c.opts&&(d=c.opts.deepNest,p="partial"==c.opts.serialize,u=!!c.opts.serialize&&c.opts.serialize),"updated"==r&&"id"==u&&(h=!0),(!i||i&&p)&&!h&&(d&&store.$.makeDirty("dirty",a,r,c,l,n),u&&e&&a&&(!o||!o||o.model!==t.relatedTo||c.relKey!==o.relKey)))){var y=a;"hasMany"==c.relType?Array.isArray(y)?y.forEach((function(e){store.$.partialData(e,c.relKey,l,/^(added|removed)$/.test(r)?r:"modified")})):Lyte.isRecord(y)&&store.$.partialData(y,c.relKey,l,/^(added|removed)$/.test(r)?r:"modified"):Array.isArray(y)?y.forEach((function(e){"added"==r&&e&&e.$&&e.$.partial&&e.$.partial[c.relKey]&&e.$.partial[c.relKey].has(l)&&delete e.$.partial})):Lyte.isRecord(y)&&"added"==r&&y&&y.$&&y.$.partial&&y.$.partial[c.relKey]&&y.$.partial[c.relKey].has(l)&&delete y.$.partial}}}));s.extend&&this.addDeepNest(e,!0)},getRelatedRecord:function(e,t,r){if(e){var o=e.$._relationships;if(o[t]&&o[t][r])return o[t][r]}},makeDirty:function(e,t,r,o,n,i){if("id"!=o.opts.serialize||"updated"!=r){var a=o.relKey;Array.isArray(t)?t.forEach((function(e){store.$.setDeepNest(e,a,n,r,i)})):Lyte.isRecord(t)&&store.$.setDeepNest(t,a,n,r,i)}},setDeepNest:function(e,t,r,o,n){var i=e.$.dN=e.$.dN||{},a=i[t]=i[t]||new Map;a.has(r)||a.set(r,{});var s=a.get(r);switch(s.type){case"added":"removed"==o&&store.$.deleteDeepNest(e,t,r);break;case"removed":"added"==o&&store.$.deleteDeepNest(e,t,r),"modified"==o&&(s.type="updated");break;default:s.type=o,store.$.changePersist(e,!1),store.$.addDeepNest(e,void 0,void 0,void 0,n)}},isDirty:function(e,t,r,o){var n=[];for(var i in t)for(var a=t[i],s=0;s<a.length;s++)if((i=a[s]).opts&&i.opts.serialize){var l=i.relKey,c=i.relType,d=e[l],p=store.model[i.relatedTo];if(r&&p&&r==store.$.getBackwardRel(o,i,store.model[i.relatedTo])&&o._name!=i.relatedTo)continue;if("record"==i.opts.serialize){if(store.$.isRelDirty(i,d,i)){n.push(l);continue}}else if("partial"==i.opts.serialize)if("hasMany"==c){if(d&&d.partial&&d.partial.size){n.push(l);continue}}else if(Lyte.isRecord(d)&&d.$.isModified||e&&e.$&&e.$.partial&&e.$.partial.hasOwnProperty(l)){n.push(l);continue}i.opts.deepNest&&e.$.dN&&e.$.dN[l]&&n.push(l)}return n},isRelDirty:function(e,t,r){var o=e.relType,n=store.model[e.relatedTo],i=n.relations;if(!store.$.isEmpty(t))if("hasMany"==o&&Array.isArray(t)&&t.length){for(var a=t.length,s=0;s<a;s++)if(1==t[s].$.isModified)return!0;for(var l=0;l<a;l++){var c=t[l];if(this.isDirty(c,i,r,n).length)return!0}}else if("belongsTo"==o&&Lyte.isRecord(t)){if(1==t.$.isModified)return!0;if(this.isDirty(t,i,r,n).length)return!0}return!1},handleCachedResponse:function(e,t){var r=store.$.cachedBatch=store.$.cachedBatch||{},o=r[e]||[],n=0;return o.forEach((function(e,r){t.splice(e.ind+n++,0,e.data)})),delete r[e],t},addToCachedBatch:function(e){var t=store.$.currentBatch,r=store.$.cachedBatch=store.$.cachedBatch||{},o=r[t]=r[t]||[],n=(store.$.batch[t]||[]).length;o.push({ind:n,data:e})},establishToRelated:function(e,t){var r=e.$.model,o={};t.forEach((function(t){var n=store.$.peekRecord(t.model,t.pkVal);if(n){var i=n.$.model;store.$.getRelations(i,t.key,r,o),store.$.establishLink(o.forward,o.backward,n,e,void 0,!0)}}))},checkObjAndAddToArr:function(e,t,r){for(var o=Object.keys(r).length,n=-1,i=e.length,a=0;a<i;a++){var s=e[a],l=0;for(var c in r)s[c]==t[c]&&l++;if(l==o)return n=a,void e.splice(a,1,t)}return-1==n&&e.push(t),n},addToRelate:function(e,t,r,o){var n=r.forward.relatedTo,i=store.$.toRelate[n]=store.$.toRelate[n]||new Map;i.has(o)||i.set(o,[]);var a=i.get(o),s={model:e,pkVal:t.$.pK,key:r.forward.relKey};a.push(s)},addOnSave:function(e,t,r,o,n,i){store.$.onSave=store.$.onSave||{};var a=store.$.onSave[e]=store.$.onSave[e]||{},s=a[t[n]]=a[t[n]]||{},l=t[r]||[];"belongsTo"==o.relType&&(l=Array.isArray(t[r])?t[r]:[t[r]]),l.forEach((function(e){var t=s[o.relKey]=s[o.relKey]||[];store.$.checkAndAddToArray(t,e[i])}))},addToIDBonSave:function(e,t){var r=store.model[e].fieldList,o=store.$.onSave?store.$.onSave[e]:void 0;if(o){var n=store.model[e]._pK,i=t&&n?o[t[n]]:void 0;if(i){for(var a in i){var s=i[a],l=r[a].relatedTo;s.forEach((function(e){var t=store.$.peekRecord(l,e);if(t){var r=t.$.parent;if(Lyte.isRecord(r)){var o=r.$.model,n=o._name,i=o._pK;store.$.checkAndAddToIDBQ(n,"updateRecord",store.$.peekRecord(n,r[i]).$.toJSON(!0))}else store.$.checkAndAddToIDBQ(l,"updateRecord",store.$.peekRecord(l,e).$.toJSON(!0))}}))}store.$.removeOnSave(e,t[n])}}},removeOnSave:function(e,t){var r=store.$.onSave?store.$.onSave[e]:void 0;r&&r[t]&&delete r[t]},checkAndAddToIDBQ:function(e,t,r){var o={model:e,type:t,data:r};(store.$.idbQ2[e]=store.$.idbQ2[e]||[]).push(o)},checkAndRemoveKey:function(e,t,r){for(var o in e){var n=t[o];n&&"relation"==n.type&&(r&&!this.checkPresenceInArray(r,o)?delete e[o]:this.removeNotNeededKeys(n.relatedTo,e[o]))}},removeNotNeededKeys:function(e,t,r){var o=store.model[e],n=o.fieldList,i=r?r.deserializeKeys:void 0;if(o){var a=this;Array.isArray(t)?t.forEach((function(e){a.checkAndRemoveKey(e,n,i)})):this.checkAndRemoveKey(t,n,i)}return t},getIDBObj:function(e,t,r,o,n,i){if(e&&e.hasOwnProperty("idb"))return"function"==typeof e.idb?e.idb.apply(e,[{model:i||e._name,type:r,queryParams:t,key:o,customData:n}]):e.idb},idbQ2Push:function(e,t,r,o,n,i,a){try{var s=store.model[e],l=store.$.getIDBObj(s,r,o,n,a);if(l){var c={model:e,type:o,customData:a};c.queryCache=l.queryCache,s._pK;var d=store.$.idbQ2[e]=store.$.idbQ2[e]||[];switch(o){case"action":return void delete d[o];case"update":case"create":c.data=[],t.forEach((function(e){c.data.push(Lyte.isRecord(e)?e.$.toJSON(void 0,!0):e)}));break;case"updateRecord":case"createRecord":case"delete":c.data=t;break;case"destroyRecord":case"deleteRecord":c.id=t;break;case"findRecord":c.key=n;var p=t[0].$.toJSON("idb");(u={})[e]=p,i&&(u.meta=i),!0===l.queryCache&&(c.queryParams=r),c.data=u;break;case"findAll":var u;p=[],t.forEach((function(e){p.push(e.$.toJSON("idb"))})),(u={})[e]=p,i&&(u.meta=i),!0===l.queryCache&&(c.queryParams=r),c.data=u;break;case"pushPayload":Lyte.isRecord(t)&&(t=t.$.toJSON("idb")),c.data=t}d.push(c)}}catch(e){Lyte.error("Error while adding to IDBQueue ",e)}},isEmpty:function(e){return null==e||""===e||null==e},isEmptyObj:function(e){return null!==e&&"object"==_typeof(e)&&0==Object.keys(e).length},isEmptyArray:function(e){return!(!Array.isArray(e)||0!=e.length)},registerField:function(e,t,r,o){var n=e.fieldList[t]?Object.assign({},e.fieldList[t]):void 0;if("observer"==r.type)o.push(r);else if("callBack"==r.type){r.observes&&o.push(r.observes);for(var i=r.properties,a=0;a<i.length;a++)"didLoad"===i[a]||"init"===i[a]?(e.didLoad||(e.didLoad=[]),e.didLoad.push(r.value)):"add"!==i[a]&&"change"!==i[a]||e.on(i[a],r.value);"didLoad"==t&&(e.didLoad||(e.didLoad=[]),e.didLoad.push(r.value))}else if("didLoad"==t)e.didLoad||(e.didLoad=[]),e.didLoad.push(r);else if(Object.keys(r).length){if(r.primaryKey&&(e.fieldList.id&&0==e.fieldList.id.defined&&delete e.fieldList.id,r.hasOwnProperty("default")&&(Lyte.warn("LD23",e._name,t),delete r.default),null!=e._pK?(e._pK=e._pK+","+t,e.isComposite=!0):e._pK=t,r.baseKey)){if(e.bK)return void Lyte.warn("LD26");e.bK=t}if(e.fieldList.hasOwnProperty(t),e.fieldList[t]=r,n&&e._fldGrps&&(n.hasOwnProperty("default")&&delete e._fldGrps.default[t],n.hasOwnProperty("watch")&&delete e._fldGrps.watch[t],n.opts&&n.opts.hasOwnProperty("inherit")&&delete e._fldGrps.inherit[t]),r.hasOwnProperty("default")&&(e._fldGrps.default[t]=r),r&&r.opts&&r.opts.hasOwnProperty("inherit")&&(e._fldGrps.inherit[t]=r),r.hasOwnProperty("watch")&&(1==r.watch||Array.isArray(r.watch))&&/^(array|object)$/.test(r.type)&&(e._fldGrps.watch[t]=r),Lyte.Transform[r.type]){var s=Lyte.Transform[r.type];(/^(array|object)$/.test(s.extends)&&s.hasOwnProperty("properties")||s.hasOwnProperty("items"))&&(e._fldGrps.nested_prop[t]=r)}}if("relation"===r.type){r.relKey=t;var l=r.relatedTo,c=e.fieldList[t];e.relations[l]||(e.relations[l]=[]);var d={};d.relKey=c.relKey,store.$.checkObjAndAddToArr(e.relations[r.relatedTo],c,d),"hasMany"==r.relType&&(e._fldGrps.hasMany[t]=r),r.hasOwnProperty("opts")&&r.opts.hasOwnProperty("inverse")&&(e._fldGrps.inverse[l]=r)}},setError:function(e,t,r){e.$.hasOwnProperty("error")?Array.isArray(t)?t.forEach((function(t){store.$.cmpSet(e.$.error,t,r)})):store.$.cmpSet(e.$.error,t,r):Lyte.error("LD03",e,t)},unRegCb:function(e,t){var r=store[e][t];if(r){var o=r.__extendedBy;if(o.length){if(store[e].__toAddSuper=store[e].__toAddSuper||{},store[e].__toAddSuper[t]?o.forEach((function(r){store[e].__toAddSuper[t].push(r)})):store[e].__toAddSuper[t]=o.slice(),o.forEach((function(t){store[e][t].$super=void 0})),store[e].application&&"application"!=t){var n=store[e].application;o.forEach((function(t){store[e][t].$super=n,store[e].application.__extendedBy.push(t)}))}store[e].application||(store[e].__toAddSuper.application?o.forEach((function(t){store[e].__toAddSuper.application.push(t)})):store[e].__toAddSuper.application=o.slice())}r.$super&&r.$super.__extendedBy.splice(r.$super.__extendedBy.indexOf(t),1),delete store[e][t]}else Lyte.error("LD02",e,t)},eventListeners:{add:function(e,t,r){return e.events=e.events||{},e.events[t]=e.events[t]||[],e.events[t].push({f:r}),t+"-"+(e.events[t].length-1)},remove:function(e,t){var r;if(t)if(/^(add|remove|change)$/.test(t))r=t,e.events&&e.events[r]&&delete e.events[r];else{var o=t?t.split("-"):void 0;if(o){var n=e.events[o[0]];n&&o[1]&&(n[o[1]]=null)}}else{var i=e.events;for(var a in i)i&&i[a]&&delete i[a]}},emit:function(e,t,r){for(var o=e.events&&e.events[t]?e.events[t]:[],n=0;n<o.length;n++)o[n]&&o[n].f.apply(null,r)}},extendCallback:function(e,t,r){var o,n,i=e[t];if(r&&"string"==typeof r&&((n=i[r])||(i.__toAddSuper=i.__toAddSuper||{},i.__toAddSuper.hasOwnProperty(r)||(i.__toAddSuper[r]=[]),i.__toAddSuper[r].push(this.__name))),n&&n.is==t&&(!this.$super||"application"==this.$super.__name)){if(this.$super=n,n.__extendedBy.push(this.__name),i.application){var a=i.application.__extendedBy.indexOf(this.__name);a>-1&&i.application.__extendedBy.splice(a,1)}if((o=i.__toAddSuper)&&o.application){var s=o.application.indexOf(this.__name);s>-1&&i.__toAddSuper.application.splice(s,1)}}return this},super:function(){var e=this.$super,t=arguments[0][0][arguments[0][0].length-1],r=[],o=arguments[0][0],n=e[t];if("function"==typeof n){for(var i in delete o[o.length-1],o)o.hasOwnProperty(i)&&r.push(o[i]);return n.apply(e,r)}if(n)return n},extendModel:function(e,t){var r=t||this;if(e&&store.model[e]){var o=Object.assign({},store.model[e].fieldList);for(var n in o)"relation"==o[n].type&&delete o[n];var i={},a="id"==r._pK&&0==r.fieldList.id.defined;for(var n in o){var s=o[n];if(a&&s.primaryKey&&s.defined,r.fieldList.hasOwnProperty(n)&&r._fldGrps){var l=r.fieldList[n];l.hasOwnProperty("default")&&delete r._fldGrps.default[n],l.hasOwnProperty("watch")&&delete r._fldGrps.watch[n]}s.hasOwnProperty("default")&&(r._fldGrps.default[n]=s),s.hasOwnProperty("watch")&&1==s.watch&&/^(array|object)$/.test(s.type)&&(r._fldGrps.watch[n]=s),s.primaryKey?i[n]=s:r.fieldList[n]=s}var c=Object.keys(i),d=c.length;if(a&&d){for(var n in delete r.fieldList.id,i)r.fieldList[n]=i[n];1==d?(r._pK=c[0],r._arrPk=Array.from(c)):(r.isComp=!0,r._arrPk=Array.from(c),r._pK=r._arrPk.toString())}var p=r._name;if(store.model[p].extend=e,store.model[e].extendedBy=store.model[e].extendedBy||{},store.model[e].extendedBy[p]=!0,store.model[e].actions){var u=r.actions=r.actions||{};for(var n in store.model[e].actions)u.hasOwnProperty(n)||(u[n]=store.model[e].actions[n])}}},demoLishObserverBindings:function(e,t,r){for(key in r||(r=e),t){if(e[key]instanceof Object){if(r&&e[key]._setterScope){var o=e[key]._setterScope.indexOf(r);-1!=o&&e[key]._setterScope.splice(o,1)}Object.keys(t[key]).length&&this.demoLishObserverBindings(e[key],t[key],e)}if(e._setterScope&&e!=r){var n=e._setterScope.indexOf(r);-1!=n&&e._setterScope.splice(n,1)}}},establishObserverBindings:function(e,t,r){for(key in r||(r=e),t)e[key]instanceof Object&&(e[key]._bindings||store.$.defProp(e[key],"_bindings",new Set,!1,!0),r&&!e[key]._setterScope&&store.$.defProp(e[key],"_setterScope",[]),-1==e[key]._setterScope.indexOf(r)&&e[key]._setterScope.push(r),e[key]._bindings.add(t[key]),Object.keys(t[key]).length&&this.establishObserverBindings(e[key],t[key],e)),e._setterScope||(store.$.defProp(e,"_setterScope",[]),e._setterScope.push(e))},setData:function(e,t,r,o,n,i,a,s,l){var c,d={emit:!1,attr:[],oldRec:{}},p=e.model,u=!1,f=e.record;if(a&&t){var h=e.model._fldGrps.inherit;for(var m in h)if(e.record[h[m].relKey]&&t[h[m].relKey])if("belongsTo"==h[m].relType)e.model._arrPk.forEach((function(e){delete t[h[m].relKey][e]})),this.setData(e.record[h[m].relKey].$,t[h[m].relKey],void 0,void 0,void 0,i,!0,void 0,l),t[h[m].relKey]=e.record[h[m].relKey].$.pK;else for(var v=t[h[m].relKey].length-1;v>=0;v--)e.model._arrPk.forEach((function(e){delete t[h[m].relKey][v][e]})),this.setData(e.record[h[m].relKey][v].$,t[h[m].relKey][v],void 0,void 0,void 0,i,!0,void 0,l),t[h[m].relKey][v]=e.record[h[m].relKey][v].$.pK}if(t&&"object"===_typeof(t))for(var y in c=[],o=r,t)c.push(y),this.setValue(e,y,t[y],o,d,i,void 0,s,l),p&&p._properties&&p._properties.hasOwnProperty(y)&&(u=!0);else c=t,this.setValue(e,t,r,o,d,i,void 0,s,l),p&&p._properties&&p._properties.hasOwnProperty(t)&&(u=!0);return e.emit("set",[e.record,c]),e.model.emit("set",[p._name,e.record,c]),store.emit("set",[p._name,e.record,c]),u&&store.$.establishObserverBindings(f,p._properties),!i&&d.emit&&store.$.changeCallbck(f,d,n),f},changeCallbck:function(e,t,r){var o=[e,t.attr],n=e.$;if(n.emit("change",o),n.model.emit("change",o),store.emit("change",[n.model._name,n.record,t.attr]),r)for(var i in t.oldRec)r[i]=t.oldRec[i];else{for(var a=0;a<t.attr.length;a++)i=t.attr[a],n.undoStack[i]=n.undoStack[i]||[],n.undoStack[i].push(t.oldRec[i]);n.undoStack._order_.push(t.attr)}},setValue:function(e,t,r,o,n,i,a,s,l){var c=e.model,d=c._pK,p=e.record;if(t!=c._pK){var u=c.fieldList[t],f=u&&u.opts?1==u.opts.watch:void 0;if(i&&i.ignoreSet)return void(l&&e&&e._relationState&&e._relationState.has(l)&&e._relationState.delete(l));if(p.hasOwnProperty(t),p[t],!u)return void store.$.cmpSet(p,t,r,void 0,!0);if(!u.mandatory||null!=r&&null!=r&&""!==r){if(u.relType){var h,m,v=u.relType,y={},_=store.modelFor(u.relatedTo),g=_._pK,b=_._pK,A=_.isComp||_.fieldList[g].type,E=_.isComp,C=(g=_._pK,A=E?"object":_.fieldList[g].type,u&&u.opts?u.opts.polymorphic:void 0);if(this.getRelations(c,u.relKey,_,y),p[t]&&"hasMany"==v){if(h=[],p[t].forEach((function(e){h.push(e.$.pK)})),p[t]===r)return;if(Array.isArray(r)&&r.length===p[t].length){for(var L,$=r.length,P=0,w=0;w<$&&(L=r[w],Lyte.isRecord(L)?m=L:L&&_typeof(L)==A?m=store.$.peekRecord(L._type?L._type:u.relatedTo,L):L&&(E||C&&L._type)&&(m=store.$.peekRecord(L._type?L._type:u.relatedTo,store.$.getpKVal(L,store.modelFor(L._type?L._type:u.relatedTo)))),Lyte.isRecord(m)&&m.$.record===p[t][w]);w++)P++,s&&s[t]&&(null==p.$.dN&&(p.$.dN={}),s[t].get(m.$.pK)&&!p.$.dN[t]&&(p.$.dN[t]=p.$.dN[t]||new Map,p.$.dN[t].set(m.$.pK,s[t].get(m.$.pK)))),l&&m.$._relationState&&m.$._relationState.has(l)&&m.$._relationState.delete(l);if(P&&P==$)return;if(i&&i.ignoreSet)return}store.$.addOnSave(c._name,p,t,u,d,b),Array.from(p[t]).forEach((function(e){store.$.demolishLink(e,b,p,y.forward.relKey,void 0,void 0,i,!0,void 0,void 0,void 0,!0),null!==y.backward&&store.$.demolishLink(p,c._pK,e,y.backward.relKey,y.forward,void 0,i,void 0,void 0,void 0,void 0,!0)}))}else if(p[t]&&Lyte.isRecord(p[t])&&"belongsTo"==v){if(h=p[t].$.pK,Lyte.isRecord(r)?m=r:r&&_typeof(r)==A?m=store.$.peekRecord(r._type?r._type:u.relatedTo,r):r&&(E||C&&r._type)&&(m=store.$.peekRecord(r._type?r._type:u.relatedTo,store.$.getpKVal(r,store.modelFor(r._type?r._type:u.relatedTo)))),Lyte.isRecord(m)&&m.$.record===p[t])return s&&s[t]&&(null==p.$.dN&&(p.$.dN={}),p.$.dN[t]=s[t]),void(l&&m.$._relationState&&m.$._relationState.has(l)&&m.$._relationState.delete(l));if(i&&i.ignoreSet)return;store.$.addOnSave(c._name,p,t,u,d,b);var R=p[t];store.$.demolishLink(R,b,p,y.forward.relKey,void 0,void 0,void 0,!0,void 0,void 0,void 0,!0),null!==y.backward&&store.$.demolishLink(p,c._pK,R,y.backward.relKey,y.forward,void 0,void 0,void 0,void 0,void 0,void 0,!0),store.$.cmpSet(p,t,{},o,!0)}if("hasMany"==v&&store.$.isEmpty(r)){var N=p[t]&&p[t].partial?p[t].partial:void 0;store.$.cmpSet(p,t,[],o,!0),N&&store.$.defProp(p[t],"partial",N),store.$.establishObserverBindings(p,p.$.model._properties),store.$.defArrUtls(p[t]),store.$.defPolyUtls(p[t]),store.$.defUtls(p[t],_,p,t)}if(Array.isArray(r)){if("belongsTo"==v)return this.revertToOldVal(p,t,h,y),void store.$.setRecErr(e,t,"ERR21",r)}else r=[r];var O=[];for(w=0;w<r.length;w++)if(!(this.isEmpty(r[w])||"belongsTo"==v&&this.isEmptyObj(r[w])||"hasMany"==v&&this.isEmptyArray(r[w]))){var T=r[w],k=r[w]&&r[w]._type?r[w]._type:u.relatedTo;if(!E&&r[w]&&_typeof(r[w])===A){if(null==(T=store.$.peekRecord(r[w]._type?r[w]._type:u.relatedTo,r[w])))this.addToRelate(c._name,p,y,r[w]);else if(T.$&&T.$.isError){O.push({code:"ERR15",message:Lyte.errorCodes.ERR15,error:Object.assign({},T)});continue}}else if(r[w]&&"object"==_typeof(r[w])){if(T.$&&T.$.isError){O.push({code:"ERR15",message:Lyte.errorCodes.ERR15,error:Object.assign({},T)});continue}if(Lyte.isRecord(T))T=T.$.record;else if(C&&r[w]&&r[w]._type?T=store.$.peekRecord(r[w]._type,store.$.getpKVal(r[w],store.modelFor(r[w]._type))):E&&(T=store.$.peekRecord(r[w]._type?r[w]._type:u.relatedTo,r[w]))||(T=this.newRecord(k,r[w],o?o.skipValidation:void 0)),T.$.isError){O.push({code:"ERR15",data:r[w],message:Lyte.errorCodes.ERR15,error:Object.assign({},T)});continue}}1!=(j=this.establishLink(y.forward,y.backward,p,T,void 0,1==i||void 0))?O.push({code:j,data:r[w],message:Lyte.errorCodes[j]}):store.$.addOnSave(c._name,p,t,u,d,b)}if(O.length&&O.length==r.length)return this.revertToOldVal(p,t,h,y),void("belongsTo"==u.relType?store.$.setRecErr(e,t,O[0]):store.$.setRecErr(e,t,O));if(O.length>1?store.$.setRecErr(e,t,O):store.$.clrRecErr(e,t),!i){var x=p.$._attributes;x.hasOwnProperty(t)||(x[t]=[]),x[t].push({_type:"changed",records:h}),n.emit=!0,n.attr.push(t);var S={};S.records=h,S._type="update",n.oldRec[t]=S;var D=p.$.getInitialValues(t),j=!0;if(D&&Array.isArray(p[t])&&D.length==p[t].length)for(j=!1,w=0;w<D.length;w++)if(!store.$.comparePk(p[t][w],D[w])){j=!0;break}j||delete x[t]}}else if(r!==p[t]){if(!o||o&&!0!==o.skipValidation){(U=u).any&&Array.isArray(U)||(U=[U]);var I=U.length,M=!0;for(w=0;w<I;w++){var B=U[w];for(var F in B)!0!==(q=Lyte.checkProperty(F,r,t,B[F],B,p,void 0,c._name))&&!0===M&&("object"==_typeof(q)&&(q.value=r),M=q)}if(!0!==M)return void store.$.setRecErr(e,t,M)}if(i){var H=!1;if(Lyte.Transform[u.type]){var K=Lyte.Transform[u.type];(K.hasOwnProperty("properties")||K.hasOwnProperty("items"))&&(H=!0)}(f&&/^(array|object)$/.test(u.type)||H)&&Lyte.establishObjectBinding(p,t,!0),store.$.cmpSet(p,t,r,o,!0)}else store.$.estAttrs(p,t,r,n,a,o)}else if(r===p[t]&&p.$.isError&&p.$.error[t]){var U,V=!0;for((U=u).any&&Array.isArray(U)||(U=[U]),I=U.length,M=!0,w=0;w<I;w++)for(var F in B=U[w]){var q;!0!==(q=Lyte.checkProperty(F,r,t,B[F],B,p,void 0,c._name))&&(M=!1)}!0!==M&&(V=!1),V&&store.$.clrRecErr(e,t)}}else store.$.setRecErr(e,t,{code:"ERR02",message:Lyte.errorCodes.ERR02,value:r});store.$.checkAttrs(p,l)}else p[t]!==r&&store.$.setRecErr(e,t,"ERR01",r)},estAttrs:function(e,t,r,o,n,i){var a=e.$._attributes,s=e.$.model,l=a[t],c=a.hasOwnProperty(t);c?(n&&Lyte.cmpData(c?l:n.data,e[t])||r&&"object"==_typeof(r)&&!n&&store.adapter.$.compareObjects(l,r)||l==r)&&delete a[t]:a[t]=n?n.data:this.createCopy(e[t]);var d=e.hasOwnProperty(t),p=n?n.data:e[t];if(!n){var u={};s._properties&&s._properties.hasOwnProperty(t)&&(u[t]=s._properties[t],store.$.demoLishObserverBindings(e,u)),store.$.cmpSet(e,t,r,i,!0)}store.$.clrRecErr(e.$,t),e.$.srtObs&&store.$.changeRelPkMaps(e,void 0,void 0,"sort",t);var f={_type:"update"};f.val=p,d||(f._type="propAdd"),o.emit=!0,o.attr.push(t),o.oldRec[t]=f},checkAttrs:function(e,t){var r=e.$.model;Object.keys(e.$._attributes).length?(store.$.cmpSet(e.$,"isModified",!0),store.$.changePersist(e,!1),store.$.addDeepNest(e),this.checkAndAddToArray(r.dirty,e.$.pK)):(store.$.cmpSet(e.$,"isModified",!1),store.$.changePersist(e,!0,t),e.$.isNew||e.$.hasOwnProperty("dN")&&(!e.$.dN||Object.keys(e.$.dN).length)||store.$.removeParentNesting(e),e.$.isNew||this.deleteFromArray(r.dirty,e.$.pK))},checkForCorrectRelation:function(e,t){var r=e.relatedTo;return!!(Lyte.isRecord(t)&&(e.opts&&e.opts.polymorphic?t.$.model.extend&&e.relatedTo===t.$.model.extend:e&&t&&r===t.$.model._name))},removeKeys:function(e,t){for(var r in t)if(e.hasOwnProperty(r)){var o=e[r];("belongsTo"===o.type||"hasMany"===o.type&&t[r])&&this.removeNotDefinedKeys(o.relatedTo,t[r],!(!o.opts||!o.opts.polymorphic)||void 0)}else delete t[r]},removeNotDefinedKeys:function(e,t,r){var o=e.fieldList;if(Array.isArray(t))for(var n=0;n<t.length;n++){var i=t[n];this.removeKeys(r&&Lyte.isRecord(i)?i.$.model.fieldList:o,i)}else this.removeKeys(r&&Lyte.isRecord(t)?t.$.model.fieldList:o,t)},add:function(e,t,r,o){var n,i=this.record.$.record,a=i.$.model,s=this.key,l=a.fieldList[s],c={};store.$.getRelations(a,l.relKey,store.modelFor(l.relatedTo),c),Array.isArray(e)||(e=[e]);var d=store.modelFor(c.forward.relatedTo),p=d._pK,u=[],f=[],h=d.isComp;i.$._attributes.hasOwnProperty(s)&&i.$._attributes[s].length&&(n=i.$.getInitialValues(s));for(var m=0;m<e.length;m++){var v=e[m];if(h&&"object"==_typeof(v)&&Object.keys(v).length===d._arrPk.length){if(this.polymorphic&&!t){u.push({code:"ERR22",data:e[m],message:Lyte.errorCodes.ERR22});continue}v=store.$.peekRecord(t||c.forward.relatedTo,v)}if(!h&&d.fieldList[p].type.toLowerCase()==_typeof(v)||h&&"object"==_typeof(v)&&Object.keys(v).length===d._arrPk.length){if(this.polymorphic&&!t){u.push({code:"ERR22",data:e[m],message:Lyte.errorCodes.ERR22});continue}v=store.$.peekRecord(t||c.forward.relatedTo,v)}else"object"!=_typeof(v)||Lyte.isRecord(v)||(v=store.$.newRecord(v._type?v._type:t||l.relatedTo,v,r?r.skipValidation:void 0));var y=this.polymorphic&&t?t:v&&v._type?v._type:void 0;if(null==v)u.push({code:"ERR13",data:e[m],message:Lyte.errorCodes.ERR13});else if(v.$&&v.$.isError)u.push({code:"ERR15",data:e[m],message:Lyte.errorCodes.ERR15,error:v});else if(Lyte.isRecord(v)&&!store.$.hasDuplicateRelation(v,i[s],p,y,d)){v=v.$.record;var _=store.$.establishLink(c.forward,c.backward,i,v);1!=_?u.push({code:_,data:e[m],message:Lyte.errorCodes[_]}):f.push(v)}}if(f.length){var g=i.$._attributes;g[s]?store.$.hasRecordsArrayChanged(i,s,n)?g[s].push({_type:"added",records:f}):(delete i.$._attributes[s],Object.keys(i.$._attributes).length||(store.$.cmpSet(i.$,"isModified",!1),store.$.changePersist(i,!0),delete g[s],i.$.isNew||(store.$.deleteFromArray(a.dirty,i.$.pK),(!i.$.dN||i.$.dN&&!Object.keys(i.$.dN).length)&&store.$.removeParentNesting(i)))):(g[s]=[{_type:"added",records:f}],store.$.cmpSet(i.$,"isModified",!0),store.$.changePersist(i,!1),store.$.checkAndAddToArray(a.dirty,i[a._pK])),store.$.emit("change",i,[s]);var b={_type:"added",records:f};o?o[s]=b:(i.$.undoStack[s]=i.$.undoStack[s]||[],i.$.undoStack[s].push(b),i.$.undoStack._order_.push([s]))}return u.length>0?store.$.setRecErr(i.$,s,u):store.$.clrRecErr(i.$,s),i},remove:function(e,t,r){var o,n=this.record.$.record,i=n.$.model,a=this.key,s=i.fieldList[a],l={};store.$.getRelations(i,s.relKey,store.modelFor(s.relatedTo),l),Array.isArray(e)||(e=[e]);var c,d=store.modelFor(l.forward.relatedTo),p=d._pK,u=d.isComp,f=[],h=[],m=[];n.$._attributes.hasOwnProperty(a)&&n.$._attributes[a].length&&(o=n.$.getInitialValues(a));for(var v=0;v<e.length;v++){var y,_=e[v];if(!u&&d.fieldList[p].type.toLowerCase()==_typeof(e[v])||u&&"object"==_typeof(_)&&Object.keys(_).length===d._arrPk.length){if(1==this.polymorphic&&!t){f.push({code:"ERR22",data:e[v],message:Lyte.errorCodes.ERR22});continue}c=store.$.peekRecord(t||l.forward.relatedTo,e[v]),y=t}else Lyte.isRecord(e[v])&&(c=e[v].$.record,y=t||(c&&c._type?c._type:void 0));if(c){var g=store.$.getIndex(n[a],p,c.$.get(p),y);store.$.demolishLink(c,p,store.$.peekRecord(i._name,n.$.pK),l.forward.relKey,void 0,void 0,void 0,!0),null!=l.backward&&store.$.demolishLink(n,i._pK,store.$.peekRecord(y||l.forward.relatedTo,c.$.pK),l.backward.relKey,l.forward),h.push(c),m.push(g)}}if(h.length){var b=n.$._attributes;b[a]?store.$.hasRecordsArrayChanged(n,a,o)?b[a].push({_type:"removed",records:h,_indices:m}):(delete n.$._attributes[a],Object.keys(n.$._attributes).length||(store.$.cmpSet(n.$,"isModified",!1),store.$.changePersist(n,!0),delete b[a],n.$.isNew||(store.$.deleteFromArray(i.dirty,n.$.pK),(!n.$.dN||n.$.dN&&!Object.keys(n.$.dN).length)&&store.$.removeParentNesting(n)))):(b[a]=[{_type:"removed",records:h,_indices:m}],store.$.cmpSet(n.$,"isModified",!0),store.$.changePersist(n,!1),store.$.checkAndAddToArray(i.dirty,n[i._pK])),store.$.emit("change",n,[a]);var A={_type:"removed",records:h,_indices:m};r?r[a]=A:(n.$.undoStack[a]=n.$.undoStack[a]||[],n.$.undoStack[a].push(A),n.$.undoStack._order_.push([a]))}f.length>0?store.$.setRecErr(n.$,a,f):store.$.clrRecErr(n.$,a)},filter:function(e,t,r){var o=0;for(var n in t)e[n]===t[n]&&o++;if(o===r)return!0},filterBy:function(e){for(var t=Object.keys(e).length,r=[],o=0;o<this.length;o++)store.$.filter(this[o],e,t)&&r.push(this[o]);return r.filterBy||(store.$.defArrUtls(r),store.$.defUtls(r,this.model)),r},idbSerialize:function(e,t,r,o,n,i){var a=t.forward.relatedTo,s=r._pK,l=o._pK;Array.isArray(e)?e.forEach((function(r,c){Lyte.isRecord(r)&&r.$.inIDB||store.$.checkPresenceInArray(store.$.recStack[a],r[l])?e[c]=r[l]:(store.$.removeBackwardRel(r,t,s,n,!0),store.$.removeSelfCircularReference(o._name,r,i))})):e&&Lyte.isRecord(e)&&(Lyte.isRecord(e)&&e.$.inIDB||this.checkPresenceInArray(store.$.recStack[a],e[l])?e[t.relKey]=e[l]:(this.removeBackwardRel(e,t,s,n,!0),this.removeSelfCircularReference(o._name,e,i)))},idSerialize:function(e,t,r,o,n,i){var a=t.forward.opts?t.forward.opts.polymorphic:void 0,s=t.forward.relKey,l=e[s],c=store.model[t.backward.relatedTo],d=store.model[t.forward.relatedTo],p=store.$.getpKVal(e,c);if(Array.isArray(l))if(a)e[s]=this.polymorphicToJSON(t.forward,l);else{var u=[];if(o)var f=o[s]=o[s]||[];l.forEach((function(e){if(e.$&&e.$.isNew&&1!=r&&"state"!=r)store.$.rSerialize(e,t,d,c._pK,p,r,f,n),u.push(e);else{var o=t.forward.relatedTo;if(f){var a={},s="related";e.$.isDeleted&&(s="removed"),store.$.defProp(a,"$",{});var l=a.$;Object.defineProperties(l,{pkVal:{value:e.$.pK},type:{value:s},model:{value:o},record:{value:store.$.peekRecord(o,e.$.pK)}}),e.$.isDeleted&&(a.$.onlyDetach=!0),f.push(a)}if(e.$&&!e.$.isDeleted){if(i){var h=store.$.peekRecord(o,e.$.pK);store.$.UpdateParentSate(h,i)}u.push(e.$.pK&&"object"==_typeof(e.$.pK)?Object.assign({},e.$.pK):e.$.pK)}}})),e[s]=u}else if(l&&Lyte.isRecord(l))if(l.$.isNew&&1!=r&&"state"!=r)o&&(f=o[s]=o[s]||{}),f=store.$.rSerialize(l,t,d,c._pK,p,r,f,n),o[s]=f;else if(a?e[s]=this.polymorphicToJSON(t.forward,l):l.$.isDeleted||(e[s]=l.$.pK&&"object"==_typeof(l.$.pK)?Object.assign({},l.$.pK):l.$.pK),i){var h=store.$.peekRecord(t.forward.relatedTo,l.$.pK);store.$.UpdateParentSate(h,i)}},recordSerialize:function(e,t,r,o,n,i,a,s,l,c){var d=n._pK;if(Array.isArray(r)){if(0==r.length)return delete e[t],0;r=Array.from(r);var p=l[t]=l[t]||[];if(r.length){for(var u=[],f=0;f<r.length;f++)r[f]&&Lyte.isRecord(r[f])&&(this.rSerialize(r[f],o,i,d,a,s,p,c),r[f].$.isDeleted&&(p[f]&&p[f].$&&(p[f].$.onlyDetach=!0),r.splice(f,1),f--));if(u.length)for(var h=0;h<u.length;h++)r.splice(h,1)}}else r&&Lyte.isRecord(r)&&(p=l[t]=l[t]||{},p=this.rSerialize(r,o,i,d,a,s,p,c),l[t]=p)},rSerialize:function(e,t,r,o,n,i,a,s){var l=t.forward.relatedTo,c=(store.model[t.backward.relatedTo],t.forward.opts?t.forward.opts.polymorphic:void 0);if(this.removeBackwardRel(e,t,o,n),a){var d,p={},u=e.$.isNew?"added":e.$.isModified?"modified":e.$.isDeleted?"removed":"related";c&&(d=e.$.model._name,e.$.polymorphicType=d,r=store.model[d]),store.$.defProp(p,"$",{});var f=p.$,h=c?d:l;Object.defineProperties(f,{pkVal:{value:e.$.pK},type:{value:u},model:{value:h},record:{value:store.$.peekRecord(h,e.$.pK)}}),Array.isArray(a)&&a.push(p)}return this.removeSelfCircularReference(r._name,e,i,void 0,p,s),p},partialSerialize:function(e,t,r,o,n,i,a,s,l,c){var d=o.forward,p=n._pK,u=o.forward.relatedTo,f=o.forward.opts?o.forward.opts.polymorphic:void 0;if("hasMany"==d.relType)if(r&&r.partial){var h=r.partial,m=i._pK;if(l&&(C=l[t]=l[t]||[],store.$.defProp(C,"partial",!0)),h){var v,y,_=[],g=this;h.forEach((function(e,t){if(y=t,/^(added|modified)$/.test((v=e).type)){var n="related",l=store.$.getIndex(r,m,y,void 0,store.model[u]);if(-1!=l){var d,h,b,A=r[l];A&&A.$&&(h=Object.assign({},A.$),A=Object.assign({},A),store.$.defProp(A,"$",h)),d=A,f&&A&&(b=A._type?A._type:A.$.model._name,i=store.model[b]);var E=store.$.peekRecord(i._name,y);if(g.removeBackwardRel(A,o,p,a),A.$.isNew)n="added";else if(A.$.isModified){n="modified";var L=store.$.isDirty(E,i.relations);d=store.$.updateJSON(A,i,L)}else L=store.$.isDirty(E,i.relations),d=store.$.updateJSON(A,i,L);if(C){var $={};store.$.defProp($,"$",{});var P=$.$,w=f?b:u;Object.defineProperties(P,{pkVal:{value:y},type:{value:n},model:{value:f?b:u},record:{value:store.$.peekRecord(w,y)}}),C.push($)}g.removeSelfCircularReference(i._name,d,s,void 0,$,c),Lyte.isRecord(d)?d.$.partialType=v.type:(store.$.defProp(d,"$",{}),store.$.defProp(d.$,"partialType",v.type),d.$.hasOwnProperty("pK")||store.$.defProp(d.$,"pK",y)),f&&(d.$.polymorphicType=b),_.push(d)}}else if("removed"==v.type){var R={};if(y&&"object"==_typeof(y)?Object.assign(R,Object.assign({},y)):R[m]=y,E=store.$.peekRecord(i._name,y)||store.$.peekRecord(i._name,y,!0),C){if($={},store.$.defProp($,"$",{}),P=$.$,Object.defineProperties(P,{pkVal:{value:y},type:{value:"removed"},model:{value:f&&v.polymorphicType?v.polymorphicType:u},record:{value:E}}),c){var N="rec"+ ++c.size;R[c.refKey]=N,c.set(N,$)}C.push($)}store.$.defProp(R,"$",{}),R.$.partialType="removed",f&&v.polymorphicType&&(R.$.polymorphicType=v.polymorphicType),R.$.hasOwnProperty("pK")||(R.$.pK=y),_.push(R)}})),_.length?r=e[t]=_:delete e[t]}}else delete e[t];else if("belongsTo"==d.relType&&r&&Lyte.isRecord(r)){var b;f&&r&&(b=r._type?r._type:r.$.model._name,i=store.model[b]),this.removeBackwardRel(r,o,p,a);var A,E=r;if(r.$.isNew?this.removeBackwardRel(r,o,p,a):(A=store.$.isDirty(r,i.relations),E=store.$.updateJSON(r,i,A)),l){var C=l[t]=l[t]||{},L=r.$.isNew?"added":r.$.isModified?"modified":"related";store.$.defProp(C,"$",{});var $=C.$,P=f?b:u;Object.defineProperties($,{pkVal:{value:r.$.pK},type:{value:L},model:{value:P},record:{value:store.$.peekRecord(P,r.$.pK)}})}f&&(E.$||store.$.defProp(E,"$",{}),E.$.polymorphicType=b),this.removeSelfCircularReference(i._name,E,s,void 0,C,c),r=e[t]=E}},removeSelfCircularReference:function(e,t,r,o,n,i,a,s,l){var c=store.model[e],d=c.fieldList,p=(c.extend,store.$.getpKVal(t,c));store.$.recStack[e]=store.$.recStack[e]||[],store.$.checkAndAddToArray(store.$.recStack[e],p);var u,f=store.$.peekRecord(e,p),h=Lyte.isRecord(f)?f.$.partial:void 0,m=t&&t.$?t.$.polymorphicType:void 0,v=new Map;if(v.set(f,p),i){u="rec"+ ++i.size;var y={};store.$.defProp(y,"$",{pkVal:f.$.pK,model:f.$.model._name}),i.set(u,y)}var _=store.$.getFromCB("serializer",e,"serializeEmptyRelation");for(var g in t){var b,A,E,C,L,$=d[g],P=!1;if(("create"==o||Lyte.isRecord(t)&&t.$.isNew)&&c._pK==g&&1!=r)delete t[g];else if($)if($&&"relation"!=$.type&&!r&&Lyte.Transform[$.type]&&Lyte.Transform[$.type].serialize&&t.hasOwnProperty(g)){var w={data:t[g],key:g,model:e,pkVal:p,record:f};Lyte.TransformHierarchy($.type,w,"serialize",new Map),t[g]=w.data}else{if(h&&h.hasOwnProperty(g)){var R={},N=store.model[$.relatedTo]._pK,O=!1;if(h[g].forEach((function(e,r){if((!0===_||Array.isArray(_)&&_.indexOf($.relKey))&&$.opts&&/^(id|record)$/.test($.opts.serialize)?(t[g]=null,O=!0):"partial"==$.opts.serialize&&(R[N]=r,store.$.defProp(R,"$",{}),store.$.defProp(R.$,"partialType","removed"),store.$.defProp(R.$,"pK",r),t[g]=R,O=!0),n){var o=n[g]=n[g]||{};store.$.defProp(o,"$",{});var i=o.$;Object.defineProperties(i,{pkVal:{value:r},type:{value:"removed"},model:{value:$.relatedTo},parent:{value:f},record:{value:store.$.peekRecord($.relatedTo,r)}}),$&&$.opts&&/^(id|record)$/.test($.opts.serialize)&&Object.defineProperties(i,{onlyDetach:{value:!0},relKey:{value:g}})}})),O)continue}if(1!=r&&"state"!=r&&"isClone"!=r||!t[g]||"object"!=_typeof(t[g])||!$||"relation"==$.type){if(r&&"isClone"==r.type&&t[g]&&$&&"relation"==$.type&&((L=!(!$.opts||!$.opts.inherit))||delete t[g]),t[g]&&$&&"relation"==$.type){if(A=$.relatedTo,C=$.relType,L=!(!$.opts||!$.opts.inherit),null==(E=store.modelFor(A)))continue;var T=$.relKey,k={};P?this.getRelations(b,$.relKey,E,k):this.getRelations(c,T,E,k);var x=$.opts,S=x?x.serialize:void 0,D=t[T];if("idb"==r)store.$.idbSerialize(D,k,c,E,p,r);else if(a&&L)store.$.toChildJSON(A,C,t[g],g,e,v,s,r,l),"belongsTo"==C&&(t[g]=Object.assign({},t[g]));else if(r&&!a||a&&!L||"id"==S)store.$.idSerialize(t,k,r,n,i,l);else if("record"===S){if(0==store.$.recordSerialize(t,g,D,k,c,E,p,r,n,i)&&"hasMany"===C&&(!0===_||Array.isArray(_)&&_.indexOf($.relKey))&&Array.isArray(f[g])&&f[g].partial&&f[g].partial.size){var j=!0;if(f[g].partial.forEach((function(e){"removed"!==e.type&&(j=!1)})),j){t[g]=[];continue}}}else{if("partial"!==S){delete t[T];continue}store.$.partialSerialize(t,g,D,k,c,E,p,r,n,i)}((D=t?t[T]:void 0)&&"hasMany"==C&&Array.isArray(D)&&0==D.length||"belongsTo"==C&&"object"==_typeof(D)&&0==Object.keys(D).length)&&((!0===_||Array.isArray(_)&&_.indexOf($.relKey))&&"hasMany"==C&&$.opts&&/^(id|record)$/.test($.opts.serialize)||r&&"isClone"==r.type?t[T]=[]:delete t[T])}}else t[g]=Lyte.deepCopyObject(t[g])}else m&&(b=store.modelFor(m),$=b.fieldList[g],P=!0),s?t[g]&&"object"==_typeof(t[g])&&(t[g]=Lyte.deepCopyObject(t[g])):delete t[g]}if("state"==r){var I=f.$.model.fieldList;for(var g in I)f.hasOwnProperty(g)||("relation"==I[g].type&&"hasMany"==I[g].relType?t[g]=[]:t[g]=void 0)}if(i){var M=i.refKey;t[M]=u}},removeBackwardRel:function(e,t,r,o,n){if(n)delete e[t.backward.relKey];else if(null!=t.backward){var i=e[t.backward.relKey];if(Array.isArray(i)){for(var a=0;a<i.length;a++)if(this.comparePk(i[a],o))return i.splice(a,1),void(0==i.length&&delete e[t.backward.relKey])}else i&&Lyte.isRecord(i)&&this.comparePk(i,o)&&delete e[t.backward.relKey]}},polymorphicToJSON:function(e,t){var r=e.opts;if(r&&r.polymorphic){if(Array.isArray(t)){var o=[];return t.forEach((function(e){o.push(store.$.polyToJSON(e))})),o}return store.$.polyToJSON(t)}},polyToJSON:function(e){var t=e.$.model;!t.hasOwnProperty("fieldList")&&t._name&&(t=store.model[t._name]);var r=t?t._pK:void 0,o={},n=e.$.pK;return"object"==_typeof(n)?o=Object.assign({},n):o[r]=n,o._type=e._type?e._type:e.$.model._name,o},toChildJSON:function(e,t,r,o,n,i,a,s,l){var c,d=store.modelFor(e),p=d.fieldList,u={};Array.isArray(r)||(r=[r]);for(var f=0;f<r.length;f++){c=store.$.getpKVal(r[f],d);var h=store.$.peekRecord(e,c);if(i.get(h)||i.set(h,c),"state"==s&&l&&store.$.UpdateParentSate(h,l),!a)for(var m in r[f])p.hasOwnProperty(m)||delete r[f][m];for(var v in d.relations)for(var y=0;y<d.relations[v].length;y++){var _=d.relations[v][y].relKey?d.relations[v][y].relKey:void 0;if(_&&p[_]&&"relation"==p[_].type&&r[f][p[_].relKey])if(r[f][p[_].relKey]&&p[_].opts&&p[_].opts.inherit){if("hasMany"==p[_].relType&&r[f][p[_].relKey])for(var g=0;g<r[f][p[_].relKey].length;g++){c=store.$.getpKVal(r[f][p[_].relKey][g],store.modelFor(p[_].relatedTo));var b=store.$.peekRecord(p[_].relatedTo,c);if(i.get(b)){if(Lyte.isRecord(r[f][p[_].relKey][g])&&i.get(b)){if("object"==_typeof(c))r[f][p[_].relKey][g]=c;else{var A={};A[store.modelFor(p[_].relatedTo)._pK]=c,r[f][p[_].relKey][g]=A}(E={})[store.modelFor(p[_].relatedTo)._pK]=c,r[f][p[_].relKey][g]="object"==_typeof(c)?c:E}}else i.set(b,c),store.$.toChildJSON(p[_].relatedTo,p[_].relType,r[f][p[_].relKey][g],p[_].relKey,p[_].relatedTo,i,a,s,l),"object"==_typeof(r[f][p[_].relKey][g])&&(r[f][p[_].relKey][g]=Object.assign({},r[f][p[_].relKey][g]))}else if("belongsTo"==p[_].relType&&r[f][p[_].relKey]){var E;c=store.$.getpKVal(r[f][p[_].relKey],store.modelFor(p[_].relatedTo)),b=store.$.peekRecord(p[_].relatedTo,c),i.get(b)?((E={})[store.modelFor(p[_].relatedTo)._pK]=c,r[f][p[_].relKey]="object"==_typeof(c)?c:E):(i.set(b,c),store.$.toChildJSON(p[_].relatedTo,p[_].relType,r[f][p[_].relKey],p[_].relKey,p[_].relatedTo,i,a,s,l),r[f][p[_].relKey]=Object.assign({},r[f][p[_].relKey]))}(!s||s&&"isClone"!=s.type&&0==Object.keys(r[f][p[_].relKey]).length)&&delete r[f][p[_].relKey]}else(Lyte.isRecord(r[f][p[_].relKey])||"hasMany"==p[_].relType&&Lyte.isRecord(r[f][p[_].relKey][0]))&&(!s||s&&"isClone"!=s.type?(this.getRelations(d,p[_].relKey,store.modelFor(p[_].relatedTo),u),store.$.idSerialize(r[f],u,!0,void 0,void 0,l)):delete r[f][p[_].relKey])}Lyte.isRecord(r[f])&&(r[f]=Object.assign({},r[f]))}},toJSONObj:function(e,t,r,o,n,i,a,s){var l,c,d=e._name,p=(e._pK,e._fldGrps.inherit&&Object.keys(e._fldGrps.inherit).length);if(l=1!=r&&"state"!=r||i&&(!i||p)?Lyte.deepCopyObject(t):Object.assign({},t),Lyte.isRecord(l))c=l.$.pK;else{if(!store.$.getpKVal(l,e))return;if(!store.$.peekRecord(d,store.$.getpKVal(l,e)))return;c=store.$.peekRecord(d,store.$.getpKVal(l,e)).$.pK}var u,f=n?n.obj:void 0;return f&&!f.has(c)&&(f.set(c,{}),u=f.get(c)),this.removeSelfCircularReference(d,l,r,o,u,n&&n.ref?n.ref:void 0,i,a,s),"idb"==r&&this.removeNotNeededKeys(d,l,e.idb),l},toJSON:function(e,t,r,o,n,i,a,s){var l,c=store.model[e];if(store.$.recStack={},Array.isArray(t)){for(var d=[],p=0;p<t.length;p++)l=this.toJSONObj(c,t[p],r,o,n,i,a),d.push(l);return d}return t&&("object"===_typeof(t)||Lyte.isRecord(t))&&(l=this.toJSONObj(c,t,r,o,n,i,a,s)),store.$.recStack={},l},createCopy:function(e){if(Array.isArray(e)){if(e.save){for(var t=[],r=0;r<e.length;r++){var o=Lyte.deepCopyObject(e[r]);t.push(o)}return t}}else if(e&&(Lyte.isRecord(e)||"object"==_typeof(e)))return Lyte.deepCopyObject(e);return e},compareRecords:function(e,t,r,o,n){if(r=n._arrPk,Lyte.isRecord(e)&&Lyte.isRecord(t)&&r.length){if(o&&e._type&&o!==e._type)return!1;for(var i=r.length,a=0;a<i;a++){var s=r[a];if(e[s]&&t[s]&&e[s]!==t[s])return!1}return!0}return!1},hasRecordInArray:function(e,t,r,o,n){if(Lyte.isRecord(t)&&r)for(var i=e.length,a=0;a<i;a++){var s=e[a];if(!o||s._type===o)if(n){if(this.compareRecords(s,t,r,void 0,t.$.model))return!0}else if(o&&s._type&&o===t._type&&s[r]===t[r]||s[r]===t[r])return!0}return!1},hasDuplicateRelation:function(e,t,r,o,n){var i=n.isComp;return Array.isArray(t)?i||t.isPolymorphic||!t._recMap?this.hasRecordInArray(t,e,r,o,i):t._recMap.get(e[r]):!(!t||!Lyte.isRecord(t))&&this.compareRecords(e,t,r,o,n)},checkPresenceInArray:function(e,t){return e&&e.some((function(e){return e===t}))},checkAndAddToArray:function(e,t){if(this.checkPresenceInArray(e,t))return-1;e.push(t)},deleteFromArray:function(e,t){var r=e.indexOf(t);-1!=r&&e.splice(r,1)},genPk:function(e,t,r){var o;e.forEach((function(e){o=r[e].type;var n=t[e]=Math.floor(1e5*Math.random()+1);"string"==o&&(t[e]=n.toString())}))},generateRandomPk:function(e,t,r,o){for(this.genPk(r,t,o);this.isDuplicateRecord(e,t,r.toString());)this.genPk(r,t,o)},pkPresence:function(e,t){var r=!0;return t.forEach((function(t){e.hasOwnProperty(t)&&e[t]||(r=!1)})),r},newRecord:function(e,t,r){var o=store.modelFor(e);if(void 0===o)return Lyte.warn("LD02","Model",e),new error1(void 0,void 0,Lyte.getErrorMessage("LD02","Model",e));if(void 0===t&&(t={}),t&&"object"!==_typeof(t))return Lyte.warn("LD25",t),new error1(void 0,void 0,Lyte.getErrorMessage("LD25",t));var n=o.fieldList,i={},a=new error1,s=o._arrPk;for(var l in this.pkPresence(t,s)?this.isDuplicateRecord(o,t,s)&&store.$.setError(a,s,{code:"ERR16",message:Lyte.errorCodes.ERR16}):this.generateRandomPk(o,t,s,n),n){"hasMany"==($=n[l]).relType&&(i[l]=[]);var c=t[l];if("relation"!=$.type&&(void 0!==c&&""!==c||$.hasOwnProperty("default")&&(c=i[l]=store.$.getDefaultVal(i,$.default)),!r)){var d=$;d.any&&Array.isArray(d)||(d=[d]);for(var p=d.length,u=!0,f=0;f<p;f++){var h=d[f];for(var m in h)1!=(L=Lyte.checkProperty(m,c,l,h[m],h,t,i,e))&&!0===u&&("object"==_typeof(L)&&(L.value=c),u=L)}!0!==u&&store.$.setError(a,l,u)}}for(var v in t)i[v]=t[v];i=new Record(e,i),store.$.cmpSet(i.$,"isNew",!0),store.$.changePersist(i,!1);var y=o.relations;for(var _ in y){var g=y[_];for(f=0;f<g.length;f++){var b=g[f],A=b.relKey,E=b.opts?b.opts.polymorphic:void 0;if(i&&i[A]){var C=t[A];i[A]=void 0;var L,$=g[f],P={};if(1!=(L=this.getRelations(o,$.relKey,store.modelFor($.relatedTo),P))){store.$.setError(a,$.relKey,{code:L,data:g,message:Lyte.errorCodes[L]});continue}var w=store.modelFor($.relatedTo),R=w._pK,N=w.isComp,O=N?void 0:w.fieldList[w._pK].type;if(Array.isArray(C)){if("belongsTo"==g[f].relType){store.$.setError(a,$.relKey,{code:"ERR21",data:C,message:Lyte.errorCodes.ERR21});continue}}else C=[C];a[$.relKey]=[];for(var T=0;T<C.length;T++){var k=void 0,x=$.relatedTo;if(C[T]&&Lyte.isRecord(C[T]))k=C[T].$.record;else if(N&&"object"==_typeof(C[T])){var S;if(-1!=(S=store.$.getIndex(w.data,R,store.$.getpKVal(C[T],w))))k=w.data[S];else{if(E){if(!C[T]||!C[T].hasOwnProperty("_type")){store.$.setError(a,$.relKey,{code:"ERR22",data:C[T],message:Lyte.errorCodes.ERR22});continue}x=C[T]._type}k=this.newRecord(x,C[T])}}else if(C[T]&&_typeof(C[T])==O.toLowerCase())k=store.$.peekRecord(x,C[T]);else if(C[T]&&"object"==_typeof(C[T])){if(E){if(!C[T]||!C[T].hasOwnProperty("_type")){store.$.setError(a,$.relKey,{code:"ERR22",data:C[T],message:Lyte.errorCodes.ERR22});continue}x=C[T]._type}k=this.newRecord(x,C[T])}k&&k.$&&k.$.isError?store.$.setError(a,$.relKey,{code:"ERR15",data:C[T],message:Lyte.errorCodes.ERR15,error:Object.assign({},k)}):k&&k.$&&!k.$.isError&&1!=(L=this.establishLink(P.forward,P.backward,i,k,void 0,!1))&&store.$.setError(a,$.relKey,{code:L,data:C[T],message:Lyte.errorCodes[L]})}if(0==a[$.relKey].length&&delete a[$.relKey],"hasMany"==g[f].relType){var D=A;null==i[D]&&(i[D]=[]),i[D].add||(E&&store.$.defProp(i[D],"polymorphic",!0),store.$.defArrUtls(i[D]),store.$.defUtls(i[D],store.modelFor(g[f].relatedTo),i,D),store.$.defPolyUtls(i[D]))}}}}if(a&&a.$&&Object.keys(a.$.error).length>0)return a;var j=store.$.toRelate[o._name],I=i.$.pK;if(j&&j.has(I)&&(store.$.establishToRelated(i,j.get(I)),j.delete(I)),o.didLoad){var M=o.didLoad;for(f=0;f<M.length;f++)M[f].apply(i)}return this.handleArrOp(o.data,"push",i),this.checkAndAddToArray(o.dirty,i.$.pK),o.emit("add",[i]),store.emit("add",[o._name,i]),r&&(i.$.validatedOnCreate=!1),i},toInsertData:function(e,t,r,o){var n=store.model[e],i=this.insertIntoStore(e,t[e],r,!0,void 0,void 0,void 0,void 0,o);return n&&delete n.rel,i},insertIntoStore:function(e,t,r,o,n,i,a,s,l,c){if(Array.isArray(t)){A=[];for(var d=0;d<t.length;d++)A[d]=this.insertIntoStore(e,t[d],r,o,n),A[d]&&A[d].$&&A[d].$.isError&&(A.$=A.$||store.$.defProp(A,"$",{}),store.$.cmpSet(A.$,"isError",!0))}else if(t&&"object"==_typeof(t)&&Object.keys(t).length){var p=store.modelFor(e);if(t._type&&p.extendedBy&&(p=p.extendedBy[t._type]?store.modelFor(t._type):void 0),!p){var u=store.modelless,f=u[e]=u[e]||{};if(l){if("string"==!_typeof(l)&&Lyte.error("Index should be a string"),f._pK&&f._pK!==l)return void Lyte.error("");f._pK=l,f._arrPk=[l]}else f._pK=l="id",f._arrPk=[l];f.data=f.data||[],f.data.modelless||(store.$.defProp(f.data,"modelless",!0),store.$.defProp(f.data,"pK",f._pK));var h=store.$.getInd(f.data,l,t[l]);return-1==h?store.$.handleArrOp(f.data,"push",t):store.$.handleArrOp(f.data,"replaceAt",t,h),t}if(Lyte.isRecord(t)&&!s)return;if(a&&t&&p){var m=p.relations;for(var v in m)m[v].forEach((function(e){var r=e.relKey,o=e.relType;if("hasMany"==o&&t.hasOwnProperty(r)&&Array.isArray(t[r])&&t[r].length){var n=t[r],i=[];n.forEach((function(e){Lyte.isRecord(e)?i.push(e.$.pK):i.push(e)})),t[r]=i}else"belongsTo"==o&&t.hasOwnProperty(r)&&Lyte.isRecord(t[r])&&(t[r]=t[r].$.pK)}))}if(s){var y=s._RefMap.get(p._name),_=store.$.getpKVal(t,p),g=store.$.peekRecord(p._name,_);if(y&&y.get(g))E=y.get(g);else if(E=new Record(p._name,t,p._pK,s),s._RefMap.get(p._name))s._RefMap.get(p._name).set(g,E);else{var b=new Map;b.set(g,E),s._RefMap.set(p._name,b)}var A=this.validateAndPush(p,E,void 0,s)}else if(this.isDuplicateRecord(p,t,p._pK))(A=this.validateAndMerge(p,t,n,void 0,c))&&A.data?A=A.data:A&&A.type&&Lyte[A.type].apply(Lyte,A.args||[]);else{var E=new Record(p._name,t);p.data.push(E);var C=store.$.toRelate[p._name],L=E.$.pK;r&&(store.$.saveParent=E),A=this.validateAndPush(p,E,n,void 0,c),C&&C.has(L)&&(store.$.establishToRelated(E,C.get(L)),C.delete(L))}r&&(store.$.saveParent=void 0),o&&(store.$.recStack={})}return A},removeFromStore:function(e,t,r,o,n,i,a,s){var l=e.data,c=e._name;if(0!=l.length){Array.isArray(t)||(t=[t]);for(var d=e._pK,p=0;p<t.length;p++){var u=this.getIndex(l,d,t[p]);if(-1!=u){var f,h=l[u],m=h.$.pK,v=e.relations;if(h.$.isNew&&(i=n=void 0,r=!0),Object.keys(v).length&&this.toDemolishRelation(e,u,o,i,n,a),!0!==n&&!1!==i&&(f=this.handleArrOp(l,"removeAt",void 0,u,1),e._properties&&store.$.demoLishObserverBindings(h,e._properties)),!0===r){if(store.$.cmpSet(h.$,"isUnloaded",!0),h.$._savedState&&0!=Object.keys(h.$._savedState).length)for(var y in h.$._savedState)store.$.UpdateParentSate(h.$._savedState[y],void 0,{Unloaded:h});h.$._relationState&&0!=h.$._relationState.size&&store.$.UpdateParentSate(h,void 0,!0);var _=h.$.__scpObj;for(var g in _){var b=_[g].split("_"),A=Lyte.nestScp[b[0]];A&&Lyte.removeNestScp(A._data,b[0],b[1],void 0,h,void 0,void 0,{model:c,pK:h.$.pK,attr:g})}if((C=store.model.cachedQueries)&&(L=C[c])&&L.length)for(var E=L.length-1;E>=0;E--)(P=L[E]).hasDeletedRecords&&P.data&&-1!==(w=P.data[c].indexOf(h))&&L.splice(E,1);s&&!h.$.isNew&&h.$.persist()}if(1!=i){var C,L,$=f?f[0]:h;if(!r&&(store.$.cmpSet($.$,"isDeleted",!0),store.$.changePersist($,!0),!0!==n&&!1!==i&&($.$.isNew||$.$.isModified)&&store.$.deleteFromArray(e.dirty,$.$.pK),$.$.isNew||store.$.addTo_Del(e,$,u),C=store.model.cachedQueries))if((L=C[c])&&L.length)for(E=L.length-1;E>=0;E--){var P,w;(P=L[E])&&P.data&&-1!=(w=P.data[c].indexOf(h))&&(P.hasDeletedRecords=!0)}Array.isArray(e.dirty)&&-1!=(w=e.dirty.indexOf(m))&&e.dirty.splice(w,1),!0!==n&&!1!==i&&(e.emit("remove",[f[0]]),store.emit("remove",[e._name,f[0]]))}else e.emit("remove",[f[0]]),store.emit("remove",[e._name,f[0]])}}}},getIndex:function(e,t,r,o,n){return(n?n.isComp:t.split(",").length>1)?this.getCompInd(e,r,o,n):this.getInd(e,t,r,o)},getCompInd:function(e,t,r,o){for(var n=0;e&&n<e.length;n++){var i=e[n];if((!r||e[n]._type===r)&&store.adapter.$.compareObjects(store.$.getpKVal(i,o),t))return n}return-1},getInd:function(e,t,r,o){for(var n=0;e&&n<e.length;n++){var i=e[n];if(!o||i._type===o){if(i[t]==r)return n;if(t&&"string"==typeof t&&-1!=t.search(/[.]/g)&&i&&i.$&&i.$.record&&i.$.get(t)==r)return n}}return-1},isDuplicateRecord:function(e,t){var r=e.data,o=e._pK,n=e.isComposite;if(r.length){if(!n&&e.data._recMap){var i=t[o];return void 0!==i&&void 0!==e.data._recMap.get(i.toString())}return r.some((function(r){if(store.adapter.$.compareObjects(store.$.getpKVal(t,e),store.$.getpKVal(r)))return!0}))}return!1},validateAndPush:function(e,t,r,o,n){e.rel||(e.rel={});for(var i=e._arrPk,a=i.length,s=0;s<a;s++){var l=i[s];if(!t.hasOwnProperty(l))return d=e.data.indexOf(t),e.data.splice(d,1),new error1(l,{code:"ERR23",data:t,message:Lyte.errorCodes.ERR23});if(null==t[l]||null==t[l])return d=e.data.indexOf(t),e.data.splice(d,1),new error1(l,{code:"ERR26",data:t,message:Lyte.errorCodes.ERR26})}if(o)return this.validateJSON(e,t,void 0,void 0,void 0,o);var c=null==t.$.pK||"object"==_typeof(t.$.pK)?t.$.pK:t.$.pK.toString();e.data._recMap.set(c,t),t=this.validateJSON(e,t,void 0,void 0,r,void 0,n);var d=e.data.indexOf(t);if(e.data.splice(d,1),this.handleArrOp(e.data,"push",t),e.didLoad){var p=e.didLoad;for(s=0;s<p.length;s++)p[s].apply(t)}return e.emit("add",[t]),store.emit("add",[e._name,t]),t},validateAndMerge:function(e,t,r,o,n){if(e.rel||(e.rel={}),void 0===store.$.getpKVal(t,e))return{type:"error",args:["LD28",e._name,Lyte.isRecord(t)?t:JSON.stringify(t)]};var i=store.$.peekRecord(e._name,store.$.getpKVal(t,e));if(!i||!Lyte.isRecord(i))return{type:"error",args:["LD04",Lyte.isRecord(t)?t:JSON.stringify(t)]};if(this.mergeData(i,t,r,o,n),e.didLoad)for(var a=e.didLoad,s=0;s<a.length;s++)a[s].apply(i);return{data:i}},mergeData:function(e,t,r,o,n){if(e&&t){var i,a=e.$.model,s=!1,l=0!=n||n;for(var c in o&&store.adapter.$.mergeError(a,e,t),t)if(i=a.fieldList[c]){if("relation"!=i.type){var d=store.$.getDsrzEmpData(i,a._name),p=!d&&t[c];if(t.hasOwnProperty(c)&&(p||d)&&Lyte.Transform.hasOwnProperty(i.type)&&l){var u={data:t[c],key:c,model:a._name,pkVal:store.$.getpKVal(t,a)};Lyte.TransformHierarchy(i.type,u,"deserialize",new Map),t[c]=u.data}var f={};a._properties&&a._properties.hasOwnProperty(c)&&(f[c]=a._properties[c],store.$.demoLishObserverBindings(e,f)),store.$.cmpSet(e,c,t[c],void 0,!0),a._properties&&a._properties.hasOwnProperty(c)&&(s=!0)}else if(i&&"relation"==i.type){var h={},m={};store.$.getRelations(e.$.model,c,store.modelFor(i.relatedTo),m);var v=store.model[m.forward.relatedTo];if("hasMany"==i.relType&&r&&r[c]&&r[c].replace){var y=e[c]._recMap,_=[];y.forEach((function(e,t){_.push(t)})),_.forEach((function(t){store.$.peekRecord(i.relatedTo,t).$.isNew?store.$.removeFromStore(store.modelFor(i.relatedTo),t,!0):(store.$.demolishLink(store.$.peekRecord(i.relatedTo,t),store.$.peekRecord(i.relatedTo,t).$.model._pK,e,m.forward.relKey,void 0,void 0,!0,!0),null!=m.backward&&store.$.demolishLink(e,a._pK,store.$.peekRecord(i.relatedTo,t),m.backward.relKey,m.forward,void 0,!0,!0))})),delete r[c]}var g=this.compareRelations(e,t,c,i,r?r[c]:void 0,h,o);this.mergeRecords(h,g,a,v,e,c,t,m,r,o)}}else"$"!=c&&store.$.cmpSet(e,c,t[c],void 0,!0);s&&store.$.establishObserverBindings(e,a._properties)}},mergeRecords:function(e,t,r,o,n,i,a,s,l,c){s||(s={},store.$.getRelations(r,i,o,s));var d=r._pK;if(("hasMany"==s.forward.relType&&store.$.isEmptyArray(a[i])&&Array.isArray(e.remove)&&n&&n[i]&&e.remove.length!=n[i].length||n&&!n[i]&&Array.isArray(a[i]))&&(store.$.cmpSet(n,i,[],void 0,!0),store.$.establishObserverBindings(n,n.$.model._properties),store.$.defArrUtls(n[i]),store.$.defPolyUtls(n[i]),store.$.defUtls(n[i],o,n,i)),Array.isArray(e.add)&&e.add.forEach((function(e){store.$.createAndRelate(r,o,n,i,e,s,l)})),Array.isArray(e.remove)&&e.remove.forEach((function(e){var t=e.pK,r=e.model;store.$.demolishLink(n,d,store.$.peekRecord(r,t),s.backward.relKey,s.forward,s.backward,!0),store.$.demolishLink(store.$.peekRecord(r,t),store.modelFor(r)._pK,n,s.forward.relKey,s.backward,s.forward,!0)})),n&&n.hasOwnProperty(i)&&(store.$.deleteDeepNest(n,i),Array.isArray(n[i])&&n[i].hasOwnProperty("partial"))){var p=n[i].partial,u=[];p.forEach((function(e,t){u.push(t),n[i].partial.delete(t)}))}switch(t){case 0:Lyte.isRecord(n[i])&&(store.$.demolishLink(n,d,n[i],s.backward.relKey,s.forward,s.backward,!0),store.$.demolishLink(n[i],o._pK,n,s.forward.relKey,s.backward,s.forward,!0)),"belongsTo"==s.forward.relType&&null===a[i]&&store.$.cmpSet(n,i,null,void 0,!0),store.$.createAndRelate(r,o,n,i,a[i],s,l);break;case 1:default:break;case 2:this.mergeData(n[i],a[i],void 0,c)}},compareRelations:function(e,t,r,o,n,i,a){var s=store.modelFor(o.relatedTo),l=s._pK;if("belongsTo"==o.relType)return n&&"removed"===n.$.type&&(!t||t&&store.$.comparePk(e,store.$.getpKVal(t,s)))?1:this.compareRecordWithObj(e[r],t[r],l,n,a);var c=!1;if(n&&n.partial&&(c=!0),!c&&(!e.hasOwnProperty(r)||e&&e.hasOwnProperty(r)&&(store.$.isEmpty(e[r])||store.$.isEmptyArray(e[r]))))return i?void(t[r]||[]).forEach((function(e){(i.add=i.add||[]).push(e)})):0;for(var d=t[r]?t[r].length:0,p=[],u=0;u<d;u++){var f=t[r][u];if(!n||!n[u]||"removed"!=n[u].$.type){var h=this.getIndex(e[r],l,"object"==_typeof(f)?store.$.getpKVal(f,s):f);if(-1!=h){p.push(e[r][h].$.pK);var m=this.compareRecordWithObj(e[r][h],f,l,n?n[u]:void 0,a);2==m&&this.mergeData(e[r][h],f,n?n[u]:void 0,a)}else i&&(i.add=i.add||[]).push(f)}}i&&!c&&(e[r]||[]).forEach((function(e){var t=e.$.pK;-1==p.indexOf(t)&&(i.remove=i.remove||[]).push({pK:t,model:e.$.model._name})}))},compareRecordWithObj:function(e,t,r,o,n){if(!e||!Lyte.isRecord(e))return 0;var i=e.$.model,a=(i._pK,i.isComp),s=i.fieldList;if(!a){var l=i.fieldList[r];if(_typeof(t)==l.type)return e[r]==t?1:0}if(t&&"object"==_typeof(t)){if(!store.$.comparePk(e,store.$.getpKVal(t,i)))return 0;if(Lyte.isRecord(t)&&t===e)return 1;for(var c in t)if(l=s[c]){if("relation"==l.type){var d={},p=this.compareRelations(e,t,c,l,o?o[c]:void 0,d,n);this.mergeRecords(d,p,i,store.modelFor(l.relatedTo),e,c,t,void 0,o)}else if(e[c]!=t[c])return 2}else if(e[c]!=t[c])return 2;return 1}return 0},validateJSON:function(e,t,r,o,n,i,a){var s=o?o.toValidate:void 0,l=0!=a||a,c=s&&Object.keys(s).length?s:e.fieldList,d=!!e.extend;for(var p in t)if(!r||-1!=r.indexOf(p)){var u=c[p];if(u){if("relation"==u.type&&t[p]){var f=o&&o.toPartialAdd?o.toPartialAdd[p]:void 0;if(1!=(b=this.handleRelation(p,e,u,t,f,n,i)))return new error1(p,{code:b,data:t,message:Lyte.errorCodes[b]});"hasMany"!=u.relType||t[p].add||(store.$.defArrUtls(t[p]),store.$.defPolyUtls(t[p]),store.$.defUtls(t[p],store.model[u.relatedTo],t,p))}else if(u.type){var h=u;void 0===t[p]&&h.default&&(t[p]=store.$.getDefaultVal(t,h.default));var m=store.$.getDsrzEmpData(u,e._name),v=!m&&t[p];if(t.hasOwnProperty(p)&&(v||m)&&Lyte.Transform.hasOwnProperty(h.type)&&l){var y={data:t[p],key:p,model:e._name,pkVal:store.$.getpKVal(t,e)};Lyte.TransformHierarchy(h.type,y,"deserialize",new Map),t[p]=y.data}}}else if(d){var _=store.modelFor(e.extend),g=_.fieldList[p];if(g&&"relation"==g.type){var b;if(f=o&&o.toPartialAdd?o.toPartialAdd[p]:void 0,1!=(b=this.handleRelation(p,_,g,t,f)))return new error1(p,{code:b,data:t,message:Lyte.errorCodes[b]});"hasMany"!=g.relType||t[p].add||(store.$.defArrUtls(t[p]),store.$.defPolyUtls(t[p]),store.$.defUtls(t[p],_,t,p))}}}return t},handleRelation:function(e,t,r,o,n,i,a){var s={};if(t.rel.hasOwnProperty(e))s=t.rel[e];else{var l=this.getRelations(t,e,store.modelFor(r.relatedTo),s);if(!0!==l)return l;t.rel[e]=s}return this.solveRelation(s,t,store.modelFor(r.relatedTo),e,o,n,i,a)},getRelations:function(e,t,r,o){if(null==r)return Lyte.error("LD05",e.fieldList[t].relatedTo,t,e._name),"ERR11";if(o.forward=e.fieldList[t],o.backward=this.getBackwardRel(e,o.forward,r),void 0===o.backward){var n={type:"relation",relatedTo:e._name,dummy:o.forward.relKey,relKey:void 0};r.relations[e._name]=r.relations[e._name]||[],r.relations[e._name].push(n),o.backward=n}return!0},getBackwardRel:function(e,t,r){var o,n,i;if(t.opts){if(o=t.opts.inverse,n=t.opts.polymorphic,null===o)return;if(n){var a=r.extendedBy;if(a)for(var s in a){var l=store.modelFor(s);if(l.relations[e._name]){r=l;break}}}}if(o&&""!=o)i=o;else{var c,d=r.relations[e._name],p=store.modelFor(e.extend);!d&&p&&r.relations[p._name]&&(d=r.relations[p._name],c=!0),i=!d||1!=d.length||d[0].opts&&d[0].opts.inverse&&d[0].opts.inverse!==t.relKey||c&&!(c&&d[0].opts&&d[0].opts.polymorphic)?void 0:d[0].relKey}if(!i){var u=r.relations[e._name],f=store.modelFor(e.extend);if(!u&&f&&r.relations[f._name]&&r.relations[f._name].opts&&r.relations[f._name].opts.polymorphic&&(u=r.relations[f._name]),t.dummy&&u){for(var h=0;h<u.length;h++)if(u[h]&&u[h].relKey&&u[h].relKey==t.dummy){i=u[h].relKey;break}}else if(u)for(h=0;h<u.length;h++){if(u[h]&&u[h].opts&&u[h].opts.inverse&&u[h].opts.inverse===t.relKey){i=u[h].relKey;break}if(u[h]&&u[h].dummy&&u[h].dummy==t.relKey){i=u[h];break}}}return i&&i.dummy?i:i&&e._fldGrps.inverse.hasOwnProperty(t.relatedTo)&&!t.dummy&&i&&e.relations[t.relatedTo]&&e.relations[t.relatedTo].length>1&&!o&&(!r.fieldList[i].opts||r.fieldList[i].opts&&!r.fieldList[i].opts.inverse)?void 0:i&&r?r.fieldList[i]:void 0},solveRelation:function(e,t,r,o,n,i,a,s){e.backward;var l=e.forward,c=a?a[o]:void 0,d=c&&c.partial,p=(t._pK,[]);if(i)p=i;else if(d)Array.isArray(n[o])&&(p=n[o].splice(0,n[o].length));else{if(n[o]&&(n[o].add||Lyte.isRecord(n[o])))return!0;if(Array.isArray(n[o])){if("belongsTo"==l.relType)return"ERR21"}else n[o]=[n[o]];p=n[o].splice(0,n[o].length),"belongsTo"==l.relType&&(n[o]=void 0)}for(var u=0;u<p.length;u++){var f;if(1!=(f=this.createAndRelate(t,r,n,o,p[u],e,c,s)))return f}return!0},createAndRelate:function(e,t,r,o,n,i,a,s){if(!i.backward&&(i.forward.relatedTo===e._name&&(i.backward=i.forward),void 0===i.backward))return"ERR12";var l,c=e._pK,d=t.isComp,p=i.forward&&i.forward.opts?i.forward.opts.polymorphic:void 0,u=a&&a.hasOwnProperty(n[c])?a[n[c]]:a;if(d||_typeof(n)!=t.fieldList[t._pK].type||s?"object"!=_typeof(n)||Lyte.isRecord(n)||(l=this.insertIntoStore(t._name,n,void 0,void 0,u,void 0,void 0,s)):l=store.$.peekRecord(t._name,n),l&&l.$&&l.$.isError){store.$.cmpSet(r.$,"isError",!0);var f={code:"ERR24",message:Lyte.errorCodes.ERR24,data:r,error:l.$.error};store.$.cmpSet(r.$.error,o,f)}else l?this.hasDuplicateRelation(l,r[o],t._pK,p?n._type:void 0,t)||this.establishLink(i.forward,i.backward,r,l,void 0,!0,!1):this.addToRelate(e._name,r,i,n);return!0},singleEstablishLink:function(e,t,r){var o=r.$._relationships,n=t.$.model._name,i=e.relKey;o[n]=o[n]||{},o[n][i]=o[n][i]||[],this.hasDuplicateRelation(t,o[n][i],t.$.model._pK,void 0,t.$.model)||o[n][i].push(t)},establishLink:function(e,t,r,o,n,i,a,s){if(!o)return"ERR13";if(!this.checkForCorrectRelation(e,o))return"ERR14";var l=e.relKey,c=e.opts&&e.opts.polymorphic,d=c?o._type:void 0,p={},u=!1;if("belongsTo"==e.relType)r[l]!==o&&(store.$.cmpSet(r,l,o,void 0,!0),r.$.partial&&Object.keys(r.$.partial).length&&r.$.partial[l]&&delete r.$.partial[l],u=!0);else if("hasMany"===e.relType){if(r[l]||store.$.cmpSet(r,l,[],void 0,!0),!r[l].model){var f=o.$.model;c&&d&&(store.$.defProp(r[l],"polymorphic",!0),f=store.modelFor(f.extend)),store.$.establishObserverBindings(r,r.$.model._properties),store.$.defArrUtls(r[l]),store.$.defPolyUtls(r[l]),store.$.defUtls(r[l],f,r,l)}var h,m=e?store.modelFor(e.relatedTo):void 0;0!=a&&this.hasDuplicateRelation(o,r[l],e?m._pK:void 0,d,m)||(null!=n?this.handleArrOp(r[l],"insertAt",o,n):this.handleArrOp(r[l],"push",o),(!i||s)&&e.opts&&e.opts.serialize&&(h=store.$.partialData(r,l,o.$.pK,"added",void 0,s),p.relKey=l,p.model=r.$.model._name),u=!0)}var v=!1;if(i||1!=u||(v=!h),null===t)return o.hasOwnProperty(y)&&delete o[y],!0;if(t.dummy||e==t)this.singleEstablishLink(e,r,o);else{var y=t.relKey,_=o.$.model;if(!this.checkForCorrectRelation(t,r))return"ERR14";if("belongsTo"==t.relType)null!=o[y]&&o[t.relKey]!==r&&this.toDemolishLink(_,o,t,i),o[y]!==r&&(store.$.cmpSet(o,y,r,void 0,!0),o.$.partial&&Object.keys(o.$.partial).length&&o.$.partial[y]&&delete o.$.partial[y]);else if("hasMany"===t.relType){o[y]||store.$.cmpSet(o,y,[],void 0,!0),o[y].model||(store.$.defArrUtls(o[y]),store.$.defPolyUtls(o[y]),store.$.defUtls(o[y],r.$.model,o,y));var g,b,A=t?store.modelFor(t.relatedTo):void 0;this.hasDuplicateRelation(r,o[y],t?A._pK:void 0,d,A)||(this.handleArrOp(o[y],"push",r),(!i||s)&&t.opts&&t.opts.serialize&&(g=store.$.partialData(o,y,r.$.pK,"added",void 0,s)),i||(b=!g))}}return v&&(e.opts&&e.opts&&e.opts.deepNest&&(d="added",r[e.relKey].partial&&r[e.relKey].partial.get(o.$.pK)&&(d=r[e.relKey].partial.get(o.$.pK).type),store.$.setDeepNest(r,e.relKey,o.$.pK,d),b=!1),b&&t&&t.opts&&t.opts.deepNest&&store.$.setDeepNest(o,t.relKey,r.$.pK,"added")),!0},toDemolishRelation:function(e,t,r,o,n,i){var a=e.data[t],s=e.relations;for(var l in s)for(var c=s[l],d=0;d<c.length;d++){var p=c[d],u=store.modelFor(p.relatedTo);if(u){var f=store.$.getBackwardRel(e,p,u);if(!a[p.relKey]&&!p.dummy&&p!==f)continue;this.toDemolishLink(e,a,p,r,o,n,i)}}},toDemolishLink:function(e,t,r,o,n,i,a){var s=t[r.relKey],l=e._pK,c=store.modelFor(r.relatedTo);if(c){var d=c._pK,p=r.relatedTo,u=this.getBackwardRel(e,r,c);if(r.opts&&r.opts.serialize,(!u||r===u)&&s)if(Array.isArray(s))for(var f=0;f<s.length;f++)store.$.demolishSingleRelation(s[f],p,r.relKey,t,d,n,i);else Lyte.isRecord(s)&&store.$.demolishSingleRelation(s,p,r.relKey,t,d,n,i);if((r.dummy||r===u)&&(s=this.getRelatedRecord(t,r.relatedTo,r.dummy?r.dummy:r.relKey)),u)if(Array.isArray(s))for(f=0;f<s.length;f++)this.demolishLink(t,l,s[f],u.relKey,r,u,o,void 0,n,i,a);else Lyte.isRecord(s)&&this.demolishLink(t,l,s,u.relKey,r,u,o,void 0,n,i,a)}},demolishSingleRelation:function(e,t,r,o,n,i,a){var s,l;Lyte.isRecord(e)&&(s=e.$._relationships)&&s[t]&&s[t][r]&&!1!==i&&!0!==a&&(s=s[t][r],(l=this.getIndex(s,n,o[n]))>-1&&s.splice(l,1))},demolishLink:function(e,t,r,o,n,i,a,s,l,c,d,p){var u,f=r[o],h=r.$.model,m=e.$.pK,v=f?f.polymorphic:void 0;if(Array.isArray(f)){var y=this.getIndex(f,t,m,v?e._type:void 0),_=r.$._attributes,g=_.hasOwnProperty(o)&&_[o]&&_[o].length?r.$.getInitialValues(o):void 0,b=!(!f.partial||!f.partial.has(m)||"added"!=f.partial.get(m).type);-1!=y&&(b||!1!==l&&!0!==c)&&(v&&(u=f[y].$.model._name),this.handleArrOp(r[o],"removeAt",void 0,y,1)),!s&&g&&(store.$.hasRecordsArrayChanged(r,o,g)||(delete r.$._attributes[o],Object.keys(r.$._attributes).length||(store.$.cmpSet(r.$,"isModified",!1),store.$.changePersist(r,!0,p),r.$.isNew||(store.$.deleteFromArray(h.dirty,r[h._pK]),(!r.$.dN||r.$.dN&&!Object.keys(r.$.dN).length)&&store.$.removeParentNesting(r)))))}else f&&("object"==_typeof(f)||Lyte.isRecord(f))&&!1!==l&&!0!==c?null!=Lyte&&null!=Lyte.objectUtils?Lyte.objectUtils(r,"delete",o,void 0,void 0,!0):delete r[o]:this.demolishSingleRelation(r,e.$.model._name,n.relKey,e,t,l,c);if(i||(i=h.fieldList[o]),(!a||d)&&!0!==l){var A,E;if(i){i.opts&&(i.opts.serialize,E=!!i.opts.serialize,A=i.opts.deepNest);var C=i?i.relType:void 0}if("belongsTo"==C&&E&&!e.$.isNew){var L=r.$.partial=r.$.partial||{};d?(L&&L.hasOwnProperty(o)&&L[o].has(m)&&L[o].delete(m),A&&store.$.deleteDeepNest(r,o,m),A=!1):((L=L[o]=L[o]||new Map).has(m)||L.set(m,{}),(L=L.get(m)).type="removed")}i&&i.opts&&i.opts.serialize&&(A=(!store.$.partialData(r,o,m,"removed",u,d)||"hasMany"!=C)&&A),A&&(store.$.makeDirty("dirty",r,"removed",i,m),store.$.addDeepNest(r))}},rllBckRecArr:function(e,t,r,o){var n={},i=r._pK,a=store.modelFor(o.relatedTo)._pK;store.$.getRelations(r,o.relKey,store.modelFor(o.relatedTo),n);for(var s=e.length-1;s>=0;s--){var l=e[s].records;if("added"==e[s]._type)for(var c=0;c<l.length;c++)(f=l[c])&&f.$&&f.$.hasOwnProperty("pK")&&(this.demolishLink(f,a,t,n.forward.relKey),null!=n.backward&&this.demolishLink(t,i,f,n.backward.relKey,n.forward));else if("removed"==e[s]._type)for(c=l.length-1;c>=0;c--)(f=l[c])&&f.$&&f.$.hasOwnProperty("pK")&&this.establishLink(n.forward,n.backward,t,f,e[s]._indices[c]);else if("changed"==e[s]._type){var d=t[o.relKey];Array.isArray(d)||(d=[d]);for(var p=d.length,u=0;u<p;u++)(f=d[0])&&f.$&&f.$.hasOwnProperty("pK")&&(this.demolishLink(f,a,t,n.forward.relKey),null!=n.backward&&this.demolishLink(t,i,f,n.backward.relKey,n.forward));for(Array.isArray(l)||(l=[l]),c=0;c<l.length;c++){var f;"string"==typeof(f=l[c])&&(f=store.$.peekRecord(n.forward.relatedTo,f)),f&&f.$&&f.$.hasOwnProperty("pK")&&this.establishLink(n.forward,n.backward,t,f,void 0)}}}},sortBy:function(e,t){var r=store.$.mapBy.call(this,e),o=this.model.fieldList[e];o&&"string"==o.type?(r.sort(),"desc"==t&&r.reverse()):(r.sort((function(e,t){return e-t})),"desc"==t&&r.sort((function(e,t){return t-e})));for(var n=this.slice(0),i=[],a=0;a<r.length;a++)if(null!=r[a]){var s=store.$.getIndex(n,e,r[a]);i.push(n[s]),n.splice(s,1)}return n.length>0&&(i="desc"==t?i.concat(n):n.concat(i)),store.$.defArrUtls(i),store.$.defUtls(i,this.model),i},mapBy:function(e){return this.map((function(t){return t.$.get(e)}))},revertToOldVal:function(e,t,r,o){if(null!=r&&0!=r.length){Array.isArray(r)||(r=[r]);for(var n=0;n<r.length;n++){var i=o.forward.relatedTo,a=store.$.peekRecord(i,r[n]);this.establishLink(o.forward,o.backward,e,a,void 0)}}},removePartial:function(e,t){var r=e.$.partial;r&&r[t]&&delete r[t]},findCurrentInd:function(e,t){var r,o,n=e._deleted,i=!1;return n.forEach((function(e,n){i&&e.index<r&&o--,n==t&&(i=!0,o=r=e.index)})),o},modifyDelInd:function(e,t){var r,o=e._deleted,n=!1;o.forEach((function(e,o){n&&e.index>=r&&(e.index=e.index+1),o==t&&(n=!0,r=e.index)}))},rollBackDelete:function(e,t,r,o){var n=[],i=e._name;if(t){var a=e._deleted.get(t),s=e._pK;n=[a]}else e._deleted.forEach((function(e){n.push(e)}));for(var l=this,c=n.length-1;c>=0;c--){var d=(a=n[c]).data,p=e.data._recMap?e.data._recMap.get(d.$.pK):-1!==e.data.indexOf(d);if(Lyte.isRecord(d)){store.$.cmpSet(d.$,"isDeleted",!1),store.$.changePersist(d,!0);var u=store.$.isDuplicateRecord(e,d);if(p)store.$.addDeepNest(d,void 0,"added");else{r?l.handleArrOp(e.data,"insertAt",d,a.index):l.handleArrOp(e.data,"push",d),e.emit("add",[d]),store.emit("add",[e._name,d]);var f=e.relations;if(f)for(var h in f)(f[h]||[]).forEach((function(t){var r,o,n;t.relKey,o=store.modelFor(t.relatedTo),r=l.getBackwardRel(e,t,o),n=t.relKey&&t!=r?d[t.relKey]:store.$.getRelatedRecord(d,t.relatedTo,t.dummy?t.dummy:t.relKey),Array.isArray(n)?n.forEach((function(e,o){t==r?l.establishLink(r,t,e,d,void 0,!1):l.establishLink(t,r,d,e,void 0,!1)})):t==r?l.establishLink(r,t,n,d,void 0,!1):l.establishLink(t,r,d,n,void 0,!1)}))}var m=store.model.cachedQueries;if(m){var v=m[i];if(v&&v.length)for(var y=v.length-1;y>=0;y--)(a=v[y])&&a.hasDeletedRecords&&-1!=a.data[i].indexOf(d)&&delete a.hasDeletedRecords}(d.$.isNew||d.$.isModified)&&this.checkAndAddToArray(e.dirty,d[e._pK]),store.$.clrRecErr(d.$,s,"ERR17"),u||e.data._recMap.set("object"==_typeof(d.$.pK)?d.$.pK:d.$.pK.toString(),d),e._deleted.delete(d.$.pK)}}},rollBackNew:function(e,t,r,o){store.$.removeFromStore(e,t.$.pK,!0,o)},emit:function(e,t,r,o){t.$.emit(e,[t,r,o]),t.$.model.emit(e,[t,r,o]),store.emit(e,[t.$.model._name,t,r,o])},hasRecordsArrayChanged:function(e,t,r){var o=r||e.$.getInitialValues(t),n=!0;if(e.$.model._pK,o&&o.length==e[t].length){n=!1;for(var i=0;i<o.length;i++)if(-1==e[t].indexOf(o[i]))return!0}return n},setRecErr:function(e,t,r,o){store.$.cmpSet(e,"isError",!0);var n=r;"object"==_typeof(n)?store.$.cmpSet(e.error,t,n):("string"==typeof r&&(n=Lyte.errorCodes[r]?{code:r,message:Lyte.errorCodes[r]}:r),store.$.cmpSet(e.error,t,n),o&&store.$.cmpSet(e.error[t],"value",o)),store.$.emit("error",e.record,t,n)},clrRecErr:function(e,t,r){var o=Lyte.objectUtils,n=e.error;if(r)e.error.code==r&&(void 0!==o?o(n,"delete",t):delete n[t]);else if(t)void 0!==o?o(n,"delete",t):delete n[t];else if(void 0!==o)for(var i in n)o(n,"delete",i);else e.error={};0==Object.keys(e.error).length&&store.$.cmpSet(e,"isError",!1)},cacheQuery:function(e,t,r,o){var n=store.model.cachedQueries;(n=(n=store.model.cachedQueries=n||{})[e]=n[e]||[]).push({cacheQuery:t,data:r,status:o})},cacheRecordQuery:function(e,t,r,o,n){var i=store.model.cachedRecordQueries;(i=(i=(i=store.model.cachedRecordQueries=i||{})[e]=i[e]||{})[t]=i[t]||[]).push({cacheQuery:r,data:o,status:n})},isModelDataArray:function(e){if(Array.isArray(e)&&(e.modelless||e.model&&e.model instanceof Model&&!e.polymorphic))return!0},handleArrOp:function(e,t,r,o,n){n=null!=n?n:0;var i,a,s=void 0!==Lyte.arrayUtils;if(e.key&&e.record){var l=e.record.$.model.fieldList[e.key],c=!1;l&&l.opts&&l.opts.sort&&(l.opts.sort.sortFn?(a=l.opts.sort.sortFn,l.opts.sort.observes&&(c=!0)):a={sortBy:l.opts.sort.sortBy||"$.created_Time",sortOrder:l.opts.sort.sortOrder})}else e.model&&e.model.sort&&(a=e.model.sort.sortBy?{sortBy:e.model.sort.sortBy,sortOrder:e.model.sort.sortOrder}:{sortBy:"$.created_Time",sortOrder:e.model.sort.sortOrder,defaultSort:!0});switch(t){case"push":this.isModelDataArray(e)&&(null==e._recMap&&store.$.defProp(e,"_recMap",new Map),e.modelless?e._recMap.set(r[e.pK],r):e._recMap.set("object"==_typeof(r.$.pK)?r.$.pK:r.$.pK.toString(),r)),i=a?s?Lyte.arrayUtils(e,"sort",a,[r]):e.push(r):s?Lyte.arrayUtils(e,t,r):e.push(r),c&&r&&r.$&&(r.$.hasOwnProperty("srtObs")||store.$.defProp(r.$,"srtObs",!0,!1,!0));break;case"removeAt":if(this.isModelDataArray(e))for(var d=n,p=0;p<d;p++){var u=void 0;if(e.modelless)u=e[o+p][e.pK];else{var f=e[o+p]?e[o+p].$.pK:void 0;u=f="object"==_typeof(f)?f:f.toString()}void 0!==u&&e._recMap&&e._recMap.delete(u)}var h=e[o];c&&h&&h.$&&!store.$.changeRelPkMaps(h,void 0,void 0,"srtObsChk",e.key)&&h.$.hasOwnProperty("srtObs")&&(h.$.srtObs=!1),i=s?Lyte.arrayUtils(e,t,o,n):e.splice(o,n);break;case"insertAt":this.isModelDataArray(e)&&(null==e._recMap&&store.$.defProp(e,"_recMap",new Map),e.modelless?e._recMap.set(r[e.pK],r):e._recMap.set("object"==_typeof(r.$.pK)?r.$.pK:r.$.pK.toString(),r)),i=a?s?Lyte.arrayUtils(e,"sort",a,[r]):e.splice(o,n,r):s?Lyte.arrayUtils(e,t,o,r):e.splice(o,n,r),c&&r&&r.$&&(r.$.hasOwnProperty("srtObs")||store.$.defProp(r.$,"srtObs",!0,!1,!0));break;case"replaceAt":i=a?s?Lyte.arrayUtils(e,"sort",a,[r]):e.splice(o,n,r):s?Lyte.arrayUtils(e,t,o,r):e.splice(o,n,r),c&&r&&r.$&&(r.$.hasOwnProperty("srtObs")||store.$.defProp(r.$,"srtObs",!0,!1,!0));break;case"sort":i=Lyte.arrayUtils(e,"sort",a);break;default:Lyte.error("LD07",t)}return i},defpayObjUtls:function(e){Object.defineProperties(e,{set:{value:store.$.payloadSet},remove:{value:store.$.payloadRemove}})},defPayArrUtls:function(e){Object.defineProperties(e,{add:{value:store.$.payloadAdd},remove:{value:store.$.payloadRemove}})},defArrUtls:function(e){Object.defineProperties(e,{filterBy:{value:store.$.filterBy},sortBy:{value:store.$.sortBy},mapBy:{value:store.$.mapBy}})},defPolyUtls:function(e){Object.defineProperties(e,{add:{value:store.$.add},remove:{value:store.$.remove}})},defUtls:function(e,t,r,o){t&&store.$.defProp(e,"model",t),r&&store.$.defProp(e,"record",r,!1,!0),o&&store.$.defProp(e,"key",o)},defPar:function(e){store.$.defProp(e,"partial",new Map)},cmpSet:function(e,t,r,o,n){void 0!==Lyte.Component?Lyte.Component.set(e,t,r,o,n):e[t]=r},defProp:function(e,t,r,o,n){o=!!o,n=!!n,Object.defineProperty(e,t,{value:r,enumerable:o,writable:n})},removeChildRecords:function(e,t,r,o){if(!r.get(t)&&e){r.set(t,!0);var n=t?t.$.pK:void 0,i=[],a=e._fldGrps.inherit;for(var s in a){var l=a[s].relKey?a[s].relKey:void 0;if(t&&l)if("belongsTo"==e.fieldList[l].relType&&t[e.fieldList[l].relKey])this.removeChildRecords(store.modelFor(e.fieldList[l].relatedTo),t[e.fieldList[l].relKey],r);else if("hasMany"==e.fieldList[l].relType&&t[e.fieldList[l].relKey])for(var c=t[e.fieldList[l].relKey].length-1;c>=0;c--)this.removeChildRecords(store.modelFor(e.fieldList[l].relatedTo),t[e.fieldList[l].relKey][c],r)}i.push(n),this.removeFromStore(e,i,!0,!0,void 0,void 0,o)}},rBinherit:function(e,t){var r=e.record,o=e.model._fldGrps.inherit;for(var n in o)if(o[n].opts&&o[n].opts.inherit&&r[o[n].relKey])if("belongsTo"===o[n].relType)(s=r[o[n].relKey])&&!t.get(s)&&(t.set(s,!0),this.rollBackRecord(s.$,{inherit:!0}),store.$.rBinherit(s.$,t));else if("hasMany"===o[n].relType){var i=r[o[n].relKey].length;if(0!=i)for(var a=i-1;a>=0;a--){var s;(s=r[o[n].relKey][a])&&!t.get(s)&&(t.set(s,!0),this.rollBackRecord(s.$,{inherit:!0}),store.$.rBinherit(s.$,t))}}},rollBackRecord:function(e,t){var r=e.model,o=r._pK;if(e.isModified&&(e.rollBackAttributes(e.getDirtyAttributes(),t),e._savedState&&0!=Object.keys(e._savedState).length))for(var n in e._savedState){var i=e._savedState[n];store.$.UpdateParentSate(i,void 0,!0),delete e._savedState[n]}e.isDeleted?store.$.rollBackDelete(r,e.get(o),void 0,t):e.isNew?store.$.rollBackNew(r,e.record,o,t):e.isError&&store.$.clrRecErr(e),store.$.removeOnSave(e.model._name,e.record.$.pK)},buildVariables:function(e,t,r,o){for(var n in e=e||{},t){if(-1!=t[n].search(/!/g)&&!e[n]&&!r)return{LdEr:"LD30",LyteError:"ERR30",key:n};-1!=t[n].search(/!/g)&&(t[n]=t[n].replace(/!/g,"")),r&&-1==t[n].search(/\./g)&&("ID"!=t[n]&&"ID!"!=t[n]||(e[n]=r));var i={LdEr:"LD31",LyteError:"ERR30",key:n};if(e&&e[n])switch(t[n]){case"Int":case"Float":if("number"!=typeof e[n])return i;break;case"String":if("string"!=typeof e[n])return i;break;case"Boolean":if("boolean"!=typeof e[n])return i;break;case"Object":if("object"!=_typeof(e[n]))return i}}for(var a in e)"string"!=typeof e[a]&&"object"!=_typeof(e[a])||(e[a]=store.$.LyteStringfy(e[a],""));return e},buildQuery:function(e,t,r,o,n,i,a,s,l,c){var d="",p=!1;for(var u in r)if("object"==_typeof(r[u])){if(d+=Object.keys(r)[0]+" ",a){for(var f in d+="( ",a)if(-1==f.search(/[.]/g)&&""==n)d+=f+":"+a[f]+" ";else if(""!=n&&-1!=f.search(/[.]/g)&&n==f.match(/.*(?=\..*$)/g)[0]){var h=f.split(".");d+=h[h.length-1]+":"+a[f]+" "}d=(d+=") ").replace(/\([ ]*\)/g,"")}d+="{ ";for(var m=0;m<r[u].length;m++){var v=r[u][m];p=!1,l&&(p=!("string"!=typeof v||!l.includes(v)||""!=n)||!("object"!=_typeof(v)||!l.includes(Object.keys(v)[0])||""!=n)),p||("string"==typeof v?d=d+v+" ":(n=(n?n+".":"")+Object.keys(v)[0],d+=store.$.buildQuery(e,t,v,o,n,i,a,s,l,c),n=u==i?"":u))}d+=" } "}return d},QueryCallback:function(e,t,r,o,n,i,a,s,l){var c;if("object"==_typeof(o)){for(var d=Object.keys(o)[0],p=0;p<o[d].length;p++){var u=o[d][p];"object"==_typeof(u)&&store.modelFor(e).fieldList[Object.keys(u)[0]]&&store.modelFor(e).fieldList[Object.keys(u)[0]].relatedTo&&(c=store.modelFor(e).fieldList[Object.keys(u)[0]].relatedTo,store.$.QueryCallback(c,t,r,u,n,i,a,s,l))}var f=store.$.initCB("serializer",e,"serializeSelfQuery",{args:[e,t,l,o,n,i]},l.__reqId__);if(f){var h=f.data[Object.keys(o)[0]];o[Object.keys(o)[0]]=h}}},buildFields:function(e,t,r,o,n,i){var a=store.modelFor(e),s=a.fieldList,l=a.gql&&a.gql.localAttrs?a.gql.localAttrs:[];i?s=i:n.set(e,!0);var c={},d=[];for(var p in s)if(!l.includes(p)){if("relation"==s[p].type){if(store.modelFor(s[p].relatedTo)&&s[p].relatedTo!=o&&s[p].relatedTo!=e){var u=store.$.getBackwardRel(store.modelFor(e),s[p],store.modelFor(s[p].relatedTo));if(u&&u.relatedTo==t&&null==u.dummy)continue;n.has(s[p].relatedTo)||d.push(store.$.buildFields(s[p].relatedTo,s[p].relatedTo,p,o,n))}continue}"object"==s[p].type&&s[p].properties?d.push(store.$.buildFields(e,t,p,o,n,s[p].properties)):d.push(p)}return c[r]=d,n.delete(e),c},parseQuery:function(e,t,r,o,n,i,a,s,l,c,d){var p,u,f,h,m,v={},y={};"object"==_typeof(i)&&("variables"!=(m=Object.keys(i.query))[0]?m[0]:m[1],u=Object.assign({},i.query.variables),y["variables"!=m[0]?m[0]:m[1]]=Object.assign(i.query["variables"!=m[0]?m[0]:m[1]]),"object"==_typeof(y)&&(h=y));if("string"==typeof i&&-1!=i.search(/[ ]/g)){var _=i,g={};_=(_=(_=(_=(_=(_=(_=(_=(_=(_=(_=(_=(_=(_=(_=_.replace(new RegExp("\n","g")," ")).replace(/ *[ ]*\(/g,":{variables:[")).replace(/ *\) *{/g,"],attrs:[")).replace(/\w+/g,'"$&"')).replace(/"!/g,'!"')).replace(/" +"/g,'", "')).replace(/\S+{"variables"/g,"{$&")).replace(/} *"/g,'}, "')).replace(/" *{/g,'" :{"attrs" :[')).replace(/\} *\}/g,"]}}")).replace(/" *}/g,'"]} }')).replace(/]}}/g,"]}}]}}")).replace(/]}}]}} *}/g,"]}}]}}]}}")).replace(/} *{/g,"},{")).replace(/\S+ *:{"attrs"/g,"{$&"),_=JSON.parse(_),h=store.$.buildQueryFields(_,g,"",Object.keys(_)[0]),u=g}if("object"==_typeof(h)){store.$.QueryCallback(e,r,e,h,a,h,u,o,s),n.query=h,a&&(n.variables=a);var b=Object.keys(u)[0];"Mutation"!=n.type||1!=Object.keys(u).length||"Object"!=u[b]&&"Object!"!=u[b]?n.variables:n.variables[b]=c;var A=store.$.initCB("serializer",e,"serializeGqlQuery",{args:[e,r,t,n,s,c,d]},s.__reqId__);if(A&&(h=A.data.query,A.data.variables&&(a=A.data.variables)),(f=store.$.buildVariables(a,u,t,s.type))&&f.LdEr)return f;s.gqlObj=n,p="{ "+(p=store.$.buildQuery(e,r,h,u,"",Object.keys(h)[0],0!=Object.keys(f).length?f:void 0,t,l,e))+" }"}return"Query"==n.type?v.query=p:v.query="mutation "+p,v},graphQlconfig:function(e,t,r,o,n,i,a,s,l){var c,d,p={},u=store.modelFor(e),f={},h=new Map,m=u.gql&&u.gql.localAttrs?u.gql.localAttrs:[];if("findAll"==r||"findRecord"==r){if(f.type="Query",void 0===(d=u.gql&&u.gql.query&&u.gql.query[n]?u.gql.query[n]:n)){var v=store.$.buildFields(e,null,e,e,h);(c={}).query=v,f.queryType="default"}else if("string"==typeof n&&-1!=n.search(/[ ]/g))c=n,f.queryType="query";else if("object"==_typeof(n))c=n;else if("object"==_typeof(d))c=d;else{if("string"!=typeof d||-1==d.search(/[ ]/g))return{LdEr:"LD32",LyteError:"ERR31",key:n};c=d,f.queryType="namedQuery",f.queryName=n}i=i?Object.assign({},i):void 0}else if(f.type="Mutation",d=u.gql&&u.gql.mutation&&u.gql.mutation[n]?u.gql.mutation[n]:n,"string"==typeof n&&-1!=n.search(/[ ]/g))c=n,f.mutationType="customMutation";else{if("string"!=typeof d||-1==d.search(/[ ]/g))return{LdEr:"LD32",LyteError:"ERR31",key:n};c=d,f.mutationType="namedMutation",f.MutationName=n}var y=store.$.parseQuery(e,t,r,o,f,c,i,a,m,s,l);return y.LdEr?y:(p.data=JSON.stringify(y),p.data)},setQuery:function(e,t,r,o){var n=e;n.gql?(n.gql[r]=n.gql[r]?n.gql[r]:{},n.gql[r][t]=n.gql[r][t]?n.gql[r][t]:{}):(n.gql={},n.gql[r]={},n.gql[r][t]={}),n.gql[r][t]=o},buildQueryFields:function(e,t,r,o){var n=Object.keys(e)[0],i=[],a={};if(e[n].variables)for(var s=0;s<e[n].variables.length;s+=2)t[(r?r+".":"")+e[n].variables[s]]=e[n].variables[s+1];for(var l=0;l<e[n].attrs.length;l++)"object"==_typeof(e[n].attrs[l])?(r=(r?r+".":"")+Object.keys(e[n].attrs[l])[0],i.push(this.buildQueryFields(e[n].attrs[l],t,r,o)),r=n!=o?n:""):i.push(e[n].attrs[l]);return a[n]=i,a},LyteStringfy:function(e,t,r){if("string"==typeof e)return'"'+e+'" ';if(Array.isArray(e)){t+="[";var o=0,n=e.length;e.forEach((function(r){o++,"string"==typeof r?t=t+'"'+r+'" ':"object"==_typeof(r)?t=store.$.LyteStringfy(r,t):"number"==typeof r&&(t+=e.toString()),t=o!=n?t+",":t})),t+="]"}else{if(!e||Array.isArray(e)||"object"!=_typeof(e))return e.toString();t+="{";var i=0;for(var o in e)i++,"string"==typeof e[o]?t=t+o+' : "'+e[o]+'" ':"object"==_typeof(e[o])?(t=t+o+" : ",t=store.$.LyteStringfy(e[o],t)):t=t+o+" : "+e[o].toString(),Object.keys(e).length!=i&&(t+=", ");t+="}"}return t},cpdGql:function(e,t,r,o,n,i){o.gql&&("object"==_typeof(o.gql)?mutName=o.gql.mutation:1==o.gql&&(mutName=void 0),o.data=store.$.graphQlconfig(e,void 0,t,r,mutName,[],o,n,i))},payloadAdd:function(e,t){Array.isArray(e)||(e=[e]);for(var r=this._model,o=this._partialObj,n=this._payloadObj,i={opts:{serialize:this._serialize}},a={},s={},l=0;l<e.length;l++){if(o._removedRecords&&o._removedRecords.hasOwnProperty(e[l]))a=o._removedRecords[e[l]]._payload,s=o._removedRecords[e[l]]._partial,delete o._removedRecords[e[l]];else{var c=store.$.peekRecord(r,e[l]),d=store.$.PayloadSerialize(i,a,c,void 0,store.modelFor(r),s);a=d.payload,s=d.partial}this.partRecMap.get(e[l])||(null!=t&&"number"==typeof t?(Lyte.arrayUtils(o,"insertAt",t,s),Lyte.arrayUtils(n,"insertAt",t,_pK),t=t++):(Lyte.arrayUtils(o,"push",s),Lyte.arrayUtils(n,"push",a)),this.partRecMap.set(e[l],!0))}},payloadRemove:function(e){this._model;var t=this._partialObj,r=this._payloadObj;Array.isArray(e)||(e=[e]);for(var o=0;o<e.length;o++)if(Array.isArray(r)){var n=r.length;if(this._serialize&&"id"==this._serialize){if(r.includes(e[o])){var i=r.indexOf(e[o]);r.splice(i,1)}}else for(var a=0;a<n;a++)if(t[a]&&t[a].$.pkVal==e[o]){if(t.hasOwnProperty("_removedRecords"))t._removedRecords[t[a].$.pkVal]={_partial:t[a],_payload:r[a]};else{var s={};s[t[a].$.pkVal]={_partial:t[a],_payload:r[a]},Object.defineProperties(t,{_removedRecords:{value:s}})}
//!partObj.hasOwnProperty("_removedRecords") ? Object.defineProperties(partObj,{ _removedRecords :{ value : { [partObj[i].$.pkVal] :{ _partial:partObj[i] , _payload : payload[i]} } } } ):partObj._removedRecords[partObj[i].$.pkVal] = { _partial:partObj[i] , _payload : payload[i]};
Lyte.arrayUtils(t,"removeAt",a,1),Lyte.arrayUtils(r,"removeAt",a,1),this.partRecMap.delete(e[o])}}else r[e[o]]&&(t.hasOwnProperty("_removedAttr")&&!t._removedAttr.hasOwnProperty(e[o])?t._removedAttr[e[o]]={_partial:t[e[o]],_payload:r[e[o]]}:t.hasOwnProperty("_removedAttr")||Object.defineProperties(t,{_removedAttr:{value:{_partial:t[e[o]],_payload:r[e[o]]}}}),t[e[o]]&&(t._removedAttr[e[o]]._partial=t[e[o]],Lyte.objectUtils(t,"delete",e[o])),Lyte.objectUtils(r,"delete",e[o]))},payloadSet:function(e){Array.isArray(e)||(e=[e]);for(var t=this._model,r=this._pkVal,o=store.modelFor(t),n=this._payloadObj,a=store.$.peekRecord(t,r),s=this._partialObj,l=0;l<e.length;l++){var c=e[l];if(!this._payloadObj[c]){if(s.hasOwnProperty("_removedAttr")&&s._removedAttr.hasOwnProperty(c)&&1!=s._removedAttr[c])return n[c]=s._removedAttr[c]._payload,s._removedAttr[c]._partial&&(s[c]=s._removedAttr[c]._partial),void Lyte.objectUtils(s._removedAttr,"delete",c);var d=o.fieldList[c];if(a[c]&&"relation"==d.type)if("hasMany"==d.relType){if(s[c]=[],n[c]=[],d.opts&&"id"==d.opts.serialize&&store.$.payLoadIdSerialize(n,c,a,o,d,s),store.$.defProp(n[c],"$",{}),store.$.defPayArrUtls(n[c].$),Object.defineProperties(n[c].$,{_key:{value:d.relKey},_partialObj:{value:s[c]},_model:{value:d.relatedTo},_payloadObj:{value:n[c]},replace:{value:store.$.replaceCheck,writable:!0},partRecMap:{value:new Map}}),d.opts&&d.opts.serialize&&!n[c].$.serialize&&Object.defineProperty(n[c].$,"_serialize",{value:d.opts.serialize}),d.opts&&"id"!=d.opts.serialize||!d.opts){if("record"==d.opts.serialize)for(i=0;i<a[c].length;i++)n[c].$.add(a[c][i].$.pK);"partial"==d.opts.serialize&&a[c].partial.forEach((function(e,t){n[c].$.add(t)}))}}else{s[c]={},n[c]={};var p=store.$.PayloadSerialize(d,n[c],a[c],c,store.modelFor(d.relatedTo),s[c]);n[c]=p.payload,s[c]=p.partial}else n[c]=a[c],s[c]=a[c]}}},payLoadIdSerialize:function(e,t,r,o,n,i){var a={};e[t]=Lyte.deepCopyObject(r[t]),store.$.getRelations(o,t,store.modelFor(n.relatedTo),a),store.$.idSerialize(e,a,void 0,i)},PayloadSerialize:function(e,t,r,o,n,i){var a={};a[r.$.model._pK]=r.$.pK;var s,l="object"==_typeof(r.$.pK)?r.$.pK:a,c=n,d=!1;if(e.opts&&e.opts.serialize){if(s=store.adapter.$.initPartialObj(n._name),"record"==e.opts.serialize&&(l=store.$.toJSON(n._name,r,void 0,void 0,s)),"partial"==e.opts.serialize){var p=store.$.isDirty(r,c.relations),u=r;u.$.isModified||p&&p.length?(f=store.$.updateJSON(u,c,p),l=store.$.toJSON(n._name,f,void 0,void 0,s),d=!0):s.obj.set(r.$.pK,i)}i=s.obj.get(r.$.pK)||i;var f,h={pkVal:{value:r.$.pK},type:{value:"related"},model:{value:c._name},record:{value:r[o]||r}};if(1==d&&(h.type.value="modified"),l&&(t=store.adapter.$.serializeRecords(n._name,l,r,void 0,"serializeRecord",void 0,s.obj)),e.opts&&"id"==e.opts.serialize&&(l=r.$.pK),"object"==_typeof(t)){i&&!i.$&&store.$.defProp(i,"$",{});var m=i.$;Object.defineProperties(m,h),e.opts&&e.opts.serialize&&t.$&&!t.$._serialize&&"belongsTo"==e.relType&&Object.defineProperty(t.$,"_serialize",{value:e.opts.serialize})}return{payload:t,partial:i}}},replaceCheck:function(e){store.$.defProp(this._partialObj,"replace",e)},savingDonorRecord:function(e){var t=e.donor,r=e.getDirtyAttributes();if(store.$.isDirty(e.record,e.model.relations).length||r.length){var o=e.toJSON({_type:"state"});store.$.setData(t.$,o,void 0,void 0,void 0,void 0,!0),e.persist()}return t.$},peekRecord:function(e,t,r,o){var n,i=store.modelFor(e),a=store.$.getFromCB("adapter",e,"modelless");if(i=a?e:i){if(1==a&&i){if(!(i=store.modelless[i]))return;n=!0}if(!0===r){var s=i._deleted.get(t);if(s&&s.data)return s.data&&Lyte.getConfig("mutable")?Lyte.mut(s.data):s.data}else{var l=i.isComp;if(t=null==t?"":t,!l&&i.data._recMap){var c=i.data._recMap.get(t.toString());return o&&Lyte.getConfig("mutable")?Lyte.mut(c):c}var d,p=i.data;if((d=1!=n?p.filter((function(e){if(store.$.comparePk(e,t))return o&&Lyte.getConfig("mutable")?Lyte.mut(e):e})):p.filter((function(e){if(e[i._pK]===t)return e})))[0])return o&&Lyte.getConfig("mutable")?Lyte.mut(d[0]):d[0]}}else Lyte.warn("LD02","Model ",e)},getCreatedTime:function(e){var t,r=(new Date).getTime().toString(),o=1;switch(e.get(r)?(o=e.get(r),o+=1,e.set(r,o)):(e.clear(),e.set(r,o)),o.toString().length){case 1:t="000"+o;break;case 2:t="00"+o;break;case 3:t="0"+o;break;case 4:t=""+o;break;default:t="9999"}return r+t},UpdateParentSate:function(e,t,r){if(!r&&t)e.$._relationState||store.$.defProp(e.$,"_relationState",new Set),e.$._relationState.add(t);else{var o;o=e.$.__state__?[e.$.__state__]:e.$._relationState.toArrayLyte();for(var n=0;n<o.length;n++){var i=o[n],a=i.modelName,s=store.peekRecord(a,i.pK)||r&&r.Unloaded;if(s&&s.$&&s.$._savedState&&s.$._savedState[i._stateId_]){var l=0!=Object.keys(store.model[a]._fldGrps.inherit).length;store.$.setData(s.$,s.$._savedState[i._stateId_],void 0,void 0,void 0,{ignoreSet:!0},l,void 0,i),delete s.$._savedState[i._stateId_]}}}},requestIdGenerator:function(e,t){var r=Math.floor(9e7*Math.random()).toString();return Lyte.log("["+r+"] "+t+" of "+e,"Store","Cyan"),r},PerfomanceLog:function(e,t,r,o){e&&(Lyte.performance?Lyte.time("["+e+"]"+t+" of "+r):Lyte.debug&&o&&Lyte.log("["+e+"]"+t+" of "+r))},cloneWithForwrdRelation:function(e){var t=new Map;if(Lyte.isRecord(e)){var r=e.$.model._name,o=e.$.pK;return store.$.cloneWithForwrdRel(r,o,t)}},cloneWithForwrdRel:function(e,t,r){var o=store.modelFor(e),n=store.$.peekRecord(e,t);r.set(n,!0);var i=n.$.toJSON({inherit:!1});if(i)for(var a in o.relations)for(var s=0;s<o.relations[a].length;s++)i[(l=o.relations[a][s]).relKey]&&delete i[l.relKey];if(i=new Record(e,i),n)for(var a in o.relations)for(s=0;s<o.relations[a].length;s++){var l;if("hasMany"==(l=o.relations[a][s]).relType){if(n[l.relKey]&&0!=n[l.relKey].length){i[l.relKey]=[],store.$.defArrUtls(i[l.relKey]),store.$.defPolyUtls(i[l.relKey]),store.$.defUtls(i[l.relKey],store.model[l.relatedTo],i,l.relKey);for(var c=0;c<n[l.relKey].length;c++){var d=n[l.relKey][c];r.get(d)||store.$.handleArrOp(i[l.relKey],"push",store.$.cloneWithForwrdRel(d.$.model._name,d.$.pK,r))}}}else"belongsTo"==l.relType&&n[l.relKey]&&(r.get(n[l.relKey])||(i[l.relKey]=store.$.cloneWithForwrdRel(l.relatedTo,n[l.relKey].$.pK,r)))}return i}}};function Adapter(e,t,r){Object.defineProperty(this,"$lg",{value:Lyte.__gl}),store.$.newCB("adapter",this,r,e,t)}function Serializer(e,t,r){Object.defineProperty(this,"$lg",{value:Lyte.__gl}),store.$.newCB("serializer",this,r,e,t)}store.$.cbDef(Adapter,"adapter"),store.adapter={$:{buildURL:function(e,t,r,o,n,i,a,s,l,c,d){var p=store.$.getAdapter({name:r}),u=store.$.getFromCB("adapter",r,"host"),f=(l=l||"",store.$.makeBatch),h=store.modelFor(r),m={method:t};if(!(l=l||""))if(f||void 0!==u&&(l+=u,"/"!=u[u.length-1]&&(l+="/")),c){m.method="POST",m.gql=c,t=m.method,l+=store.$.getFromCB("adapter",r,"gqlNamespace")||""}else{var v=store.$.getFromCB("adapter",r,"namespace");if(""!==v&&"/"!=v[v.length-1]?l+=v+"/":l+=v,"batch"!=e)l+=(h?h.endPoint:void 0)||r,o&&"object"!=_typeof(o)&&(l+="/"+o);if("action"==e){l+="/"+store.$.getFromCB("adapter",r,"actionNamespace");var y=store.modelFor(r).actions;l+="/"+(y[a].endPoint?y[a].endPoint:a)}else"batch"==e&&(l+=store.$.getFromCB("adapter","application","batchNamespace"));m.method=t||""}if(d&&store.$.defProp(m,"__reqId__",d),i||(i={}),(b=store.$.initCB("adapter",r,"headersForRequest",{args:[e,i,s,a,o]},d))&&(m.headers=b.data),(b=store.$.initCB("adapter",r,"buildURL",{args:[r,e,i,n,l,a,s,o]},d))&&(l=b.data),(b=store.$.initCB("adapter",r,"methodForRequest",{args:[t,e,i,s,a,o]},d))&&(m.method=b.data),!f&&i&&Object.keys(i).length){l+="?";var _=0;for(var g in i){var b;0!==_&&(l+="&"),(b=i[g])&&"object"==_typeof(b)&&(b=JSON.stringify(b)),l+=g+"="+encodeURIComponent(b),_++}}return p&&1==p.withCredentials&&(m.withCredentials=!0),m.url=l,m.qP=i,m},get:function(e,t,r,o,n,i,a,s,l){var c;(Lyte.perfomance||Lyte.debug)&&(c=store.$.requestIdGenerator(t,e),store.$.PerfomanceLog(c,e,t));var d,p=store.modelFor(t),u=store.$.makeBatch,f=l||s?{}:void 0,h=store.$.getFromCB("adapter",t,"modelless");if(h&&"string"==typeof t){var m=store.modelless,v=t;def=m[v]=m[v]||{},def._name=v}if(p||t&&h){i=null==i?store.$.getFromCB("adapter",t,"customData"):i,s&&(f.query=s),l&&(f.variables=l),d=store.$.initCB("adapter",t,"gql",{args:[t,e,o,r,f,i]},c);var y=this.buildURL(e,"GET",t,r,void 0,o,void 0,i,void 0,d?d.data:void 0,c),_=this;if(o=y.qP,toCheckParams=n&&"boolean"!=typeof n?n:o&&"object"==_typeof(o)?o:void 0,y.gql&&("object"==_typeof(y.gql)?(s=y.gql.query,l=y.gql.variables):!0===y.gql&&(s=l=void 0),y.data=store.$.graphQlconfig(t,r,e,o,s,l,y),y.data.LdEr))return Lyte.warn(y.data.LdEr,y.data.key,t),Promise.reject({code:y.data.LyteError,message:Lyte.errorCodes[y.data.LyteError],data:y.data.key});if("findAll"==e&&toCheckParams&&store.model.cachedQueries&&store.model.cachedQueries[t]){for(var g=store.model.cachedQueries[t],b=0;b<g.length;b++){var A=g[b];if(!A.hasDeletedRecords){var E=A.cacheQuery;if(this.compareData(E,toCheckParams,!0)){C=[A.data,"cache",void 0,A.status];break}}}if(C)return new Promise((function(e){u&&store.$.addToCachedBatch(Array.isArray(C)?C[0][t]:C),e(C)}))}else if("findRecord"==e&&toCheckParams&&store.model.cachedRecordQueries&&store.model.cachedRecordQueries[t]&&store.model.cachedRecordQueries[t][r]){var C;for(g=store.model.cachedRecordQueries[t][r],b=0;b<g.length;b++)if(E=g[b].cacheQuery,this.compareData(E,toCheckParams,!0)){C=[g[b].data,"cache",void 0,g[b].status];break}if(C)return new Promise((function(e){u&&store.$.addToCachedBatch(Array.isArray(C)?C[0][t]:C),e(C)}))}else{var L=store.$.cbScp(t,"findRecord"==e?"reloadRecord":"reloadAll","adapter");if(L){var $,P=!1;if("findRecord"==e?($=store.$.peekRecord(t,r),P=!!Lyte.isRecord($)):"findAll"==e&&(P=!(!($=store.peekAll(t))||!$.length)),P&&!store.$.cB(L,[$,o,i,t])){var w={};return w[t]=$,new Promise((function(e){u&&store.$.addToCachedBatch(w[t]),e([w,"cache"],"success",void 0,!0)}))}}}if("POST"==y.method){var R=store.$.initCB("serializer",t,"serialize",{args:[e,y?y.data:void 0,void 0,i,t,o,void 0,y?y.gqlObj:void 0]},y.__reqId__);R&&(y.data=R.data,!y.data||"object"!=_typeof(y.data)&&!Lyte.isRecord(y.data)&&!Array.isArray(y.data)||y.data instanceof FormData||(y.data=JSON.stringify(y.data)))}return new Promise((function(s,l){var c,d=store.modelFor(t),p=store.$.getIDBObj(d,o,e,r,i),f=store.$.getFromCB("adapter",t,"processRequest"),h=!0,m=!1,v=[t,e,r,y,s,l,"get",void 0,i],g={cacheQuery:n,cacheData:a,customD:i};if(f){h=!1;var b=_.callGeneric(e,t,void 0,void 0,i,o,r,y.url,void 0,y.method,y.headers,y);b instanceof Promise?(m=!0,b.then((function(o){o=""==o?JSON.parse("{}"):JSON.parse(o),c=_.getResponse(o,t,e,r,y,void 0,i,g),s([c])}),(function(e){l(e)}))):h=!0}u&&!m?store.adapter.$.constructBatch.apply(store.adapter.$,v).then((function(o){var n=o.content;store.adapter.$.getSuccess(t,e,r,y,void 0,s,l,n,o,void 0,g)}),(function(o){store.adapter.$.getFailure(t,e,r,y,void 0,s,l,g,o.content,o.code,o)})):p?store.adapter.$.getFromIDB(p,t,e,o,r,y,i).then((function(n){var i=store.$.initCB("serializer",t,"idbResponse",{args:[t,e,o,r,n]},y.__reqId__);i&&(n=i.data),0==n?store.adapter.$.sendXHR.apply(store.adapter.$,v).then((function(o){store.adapter.$.getSuccess(t,e,r,y,o,s,l,void 0,void 0,void 0,g)}),(function(o){store.adapter.$.getFailure(t,e,r,y,o,s,l,g)})):store.adapter.$.getSuccess(t,e,r,y,void 0,s,l,n,void 0,"idb",g)}),(function(o){store.adapter.$.sendXHR.apply(store.adapter.$,v).then((function(o){store.adapter.$.getSuccess(t,e,r,y,o,s,l,void 0,void 0,void 0,g)}),(function(o){store.adapter.$.getFailure(t,e,r,y,o,s,l,g)}))})):h&&store.adapter.$.sendXHR.apply(store.adapter.$,v).then((function(o){store.adapter.$.getSuccess(t,e,r,y,o,s,l,void 0,void 0,void 0,g)}),(function(o){store.adapter.$.getFailure(t,e,r,y,o,s,l,g)}))}))}return Lyte.warn("LD02","Model",t),Promise.reject({code:"ERR19",message:Lyte.errorCodes.ERR19,data:t})},constructBatch:function(e,t,r,o){return new Promise((function(e,t){var r=store.$.currentBatch,n=store.$.batch[r]=store.$.batch[r]||[],i=store.$.batchPromise[r]=store.$.batchPromise[r]||[],a={};a.method=o.method,a.uri="/"+o.url,a.parameters=o.qP,a.content="string"==typeof o.data?JSON.parse(o.data):void 0,n.push(a),i.push({resolve:e,reject:t})}))},getFromIDB:function(e,t,r,o,n,i,a){return new Promise((function(s,l){var c=e.queryCache?"getCachedData":"findAll"==r?"getAll":"get",d={resolve:s,reject:l,type:c,model:t,req:r,key:n};"getCachedData"==c&&(d.queryParams=o),i.__reqId__&&store.$.defProp(d,"__reqId__",i.__reqId__),d.queryCache=e.queryCache,d.customData=a,LyteIDB.postMessage(d)}))},sendXHR:function(e,t,r,o,n,i,a,s,l){var c=new XMLHttpRequest,d=new Promise((function(n,i){for(var a in c.open(o.method,o.url,!0),o.headers)c.setRequestHeader(a,o.headers[a]);c.withCredentials=!!o.withCredentials,store.$.initCB("adapter",e,"parseRequest",{args:[t,e,c,o?o.qP:void 0,r,l,o.method,o.headers,o.url,!!o.withCredentials,o.data]},o.__reqId__),store.emit("beforeRequest",[c,e,t,r,o.qP,o.method,o.headers,o.url,!!o.withCredentials,l,o.data]),c.send(o.data),c.onreadystatechange=function(){if(4==c.readyState)return store.emit("afterRequest",[c,e,t,r,o.qP,o.method,o.headers,o.url,!!o.withCredentials,l,o.data]),"2"==c.status.toString()[0]||"3"==c.status.toString()[0]?n(c):i(c)}}));return d.xhr=c,d},getSuccess:function(e,t,r,o,n,i,a,s,l,c,d){var p,u,f=s,h=n,m=d.customD;if(n&&n.status,"idb"!=c){if(h&&(f=(f=h.responseText)&&0!=f.length?JSON.parse(f):JSON.parse("{}")),l&&(p=l.index,u=l.batch,h=l.resp),h){var v=store.$.initCB("adapter",e,"parseResponse",{args:[t,e,h,f,o?o.qP:void 0,r,m,d]},o?o.__reqId__:void 0);if(v&&(f=v.data),f instanceof Promise)return this.handleParseResponsePromise(f,e,t,r,o,n,void 0,p,u,i,a,d)}return this.findParseRequestPromise(f,e,t,r,o,n,p,u,i,d)}i(n?[f,n.statusText,n]:null!=p?[f,"batch",{index:p,batch:u}]:c?[f,"idb"]:[f])},getFailure:function(e,t,r,o,n,i,a,s,l,c,d){var p=s.customD;if(n){var u,f=n.responseText;if(f)try{f=""==f?JSON.parse("{}"):JSON.parse(f)}catch(e){Lyte.warn("LD24",e)}u=f;var h=store.$.initCB("adapter",e,"parseResponse",{args:[t,e,n,f,o?o.qP:void 0,r,p,s]},o?o.__reqId__:void 0);if(h&&(u=h.data),u instanceof Promise)return this.handleParseResponsePromise(u,e,t,r,o,n,void 0,void 0,void 0,i,a,s)}else if(l){var m,v;d&&(v=d.index,m=d.batch),store.$.batchResponse[m][v]={code:c,status:"requestFailure",data:l},a({code:c,status:"requestFailure",data:l})}a(n)},getResponse:function(e,t,r,o,n,i,a,s){if(!0===(void 0===s.cacheData||null===s.cacheData||"object"!=_typeof(s.cacheData)||!s.cacheData.hasOwnProperty("normalize")||s.cacheData.normalize)){var l,c,d,p,u=e=store.serializer.$.normalizeResponse(t,r,e,o,i?i.status:i,n,a,s),f=n?n.qP:void 0,h=n?n.__reqId__:void 0;"object"!=_typeof(u)&&(u=JSON.parse(u)),(d=store.$.initCB("serializer",t,"extractMeta",{args:[u,t,r,f,a,s]},h))&&(p=d.data,store.$.isEmpty(p)||(u.meta=p));var m=Object.keys(u),v=m.length;if(v){var y;if((d=store.$.initCB("serializer",t,"payloadKey",{args:[t,r,o,f,a,s]},h))&&(y=d.data)&&y!=t){var _=u[y];u[t]=_,delete u[y]}if(l=store.$.cbScp(t,"deserializeKey","serializer")){Lyte.warn("LD08","deserializeKey","callback","Please use payloadKey callback instead"),v>2&&Lyte.error("LD09");var g=0;2==v&&"meta"==m[0]&&(g=1),c=[t,r];var b=store.$.cB(l,c),A=u[m[g]];delete u[m[g]],u[b]=A}store.serializer.$.normalize(t,r,u,o,i?i.status:i,n.headers,a,s,n)}return u}return"object"!=_typeof(e)&&(e=JSON.parse(e)),(d=store.$.initCB("serializer",t,"extractMeta",{args:[e,t,r,f,a,s]},h))&&(p=d.data,store.$.isEmpty(p)||(e.meta=p)),e},initPartialObj:function(e,t,r,o,n,i){return{obj:new Map}},create:function(e,t,r,o,n,i,a){var s=r?"createRecord":"create",l=i?{mutation:i}:void 0,c=store.$.initCB("adapter",e,"gql",{args:[e,s,n,void 0,l,o]},a);o=null==o?store.$.getFromCB("adapter",e,"customData"):o;var d=this.buildURL(s,"POST",e,void 0,t,n,void 0,o,void 0,c?c.data:void 0,a);n=d.qP;var p=this.initPartialObj(e,s,n,void 0,d.url,o),u=store.$.toJSON(e,t,void 0,"create",p);return this.sendingData(e,u,d,s,o,t,p.obj),d.gql&&store.$.cpdGql(e,s,n,d,u,o),this.handleRequest(d,e,t,s,u,o,p.obj,void 0,void 0,p.ref)},put:function(e,t,r,o,n,i,a,s){var l=store.model[e],c=l.bK,d=l.isComp,p=a?{mutation:a}:void 0,u=o?"updateRecord":"update",f=(new Map,o?d&&c?r[c]:r.$.pK:void 0),h=store.$.initCB("adapter",e,"gql",{args:[e,u,i,void 0,p,n]},s);n=null==n?store.$.getFromCB("adapter",e,"customData"):n;var m=this.buildURL(u,"PATCH",e,f,t,i,void 0,n,void 0,h?h.data:void 0,s);i=m.qP;var v=this.initPartialObj(e,u,i,f,m.url,n),y=store.$.toJSON(e,t,void 0,void 0,v);return this.sendingData(e,y,m,u,n,r,v.obj),m.gql&&store.$.cpdGql(e,u,i,m,y,n),this.handleRequest(m,e,r,u,y,n,v.obj,f,void 0,v.ref)},del:function(e,t,r,o,n,i,a,s){var l=store.model[e],c=l.bK,d=l.isComp,p=a?{mutation:a}:void 0,u=o||"deleteRecord",f=r?d&&c?t[c]:t.$.pK:void 0;n=null==n?store.$.getFromCB("adapter",e,"customData"):n;var h=store.$.initCB("adapter",e,"gql",{args:[e,u,i,void 0,p,n]},s),m=this.buildURL(u,"DELETE",e,f,t,i,void 0,n,void 0,h?h.data:void 0,s);i=m.qP,this.initPartialObj(e,u,i,f,m.url,n);var v=[];r||(v=t.map((function(e){return e.$.pK})));var y=r?t?t.$.pK:void 0:v;return this.sendingData(e,y,m,u,n,t),m.gql&&store.$.cpdGql(e,u,i,m,y,n),this.handleRequest(m,e,t,u,y,n,void 0,f)},sendingData:function(e,t,r,o,n,i,a){var s,l=e,c={},d=r?r.qP:void 0,p={};for(var u in r)p[u]=r[u];p.type=o,p.model=e,(s=store.$.initCB("serializer",e,"serializeKey",{args:[e,o,n,d]},r?r.__reqId__:void 0))&&(l=s.data),t=this.serializeRecords(e,t,i,p,"serializeRecord",n,a),l?(Array.isArray(t)||"object"==_typeof(t)||Lyte.isRecord(t))&&(c[l]=t):c=t,(s=store.$.initCB("serializer",e,"serialize",{args:[o,c,i,n,e,d,r?r.gqlObj:void 0]},r?r.__reqId__:void 0))&&(c=s.data),r.data=c},serializeRecords:function(e,t,r,o,n,i,a){store.$.getFromCB("adapter",e,"modelless");var s=store.modelFor(e);if(!s)return t;var l,c=s.relations;if(r||"normalizeRecord"==n||(r=store.$.peekRecord(s._name,t.$.pK)),Array.isArray(t)){l=[];for(var d=0;d<t.length;d++){var p=t[d];p&&"object"===_typeof(p)?l.push(this.serializeSingleRecord(s._name,p,r?r[d]:void 0,o,c,n,i,a)):l.push(p)}}else t&&(l=t,"object"===_typeof(t)&&(l=this.serializeSingleRecord(s._name,t,r,o,c,n,i,a)));return l},serializeSingleRecord:function(e,t,r,o,n,i,a,s){var l;if("serializeRecord"==i&&"object"==_typeof(t)&&null==t.$&&store.$.defProp(t,"$",{}),"normalizeRecord"==i&&Lyte.isRecord(t))return t;if("object"==_typeof(s)&&r&&r.$&&r.$.pK){var c;l=s.get?s.get(r.$.pK):s,t.$&&t.$._partialObj&&(c=Object.assign({},t.$),t=Object.assign({},t),store.$.defProp(t,"$",c));var d=store.$.isDirty(r,r.$.model.relations);if(r.$.isModified||Array.isArray(d)&&0!=d.length){var p=r.$.getDirtyAttributes();Array.isArray(d)&&p.concat(d);var u=Object.keys(t);l.hasOwnProperty("_removedAttr")||Object.defineProperties(l,{_removedAttr:{value:{}}}),p.forEach((function(e){u.includes(e)||r.$.model._arrPk.includes(e)||(l._removedAttr[e]=!0)}))}Object.defineProperties(t.$,{_partialObj:{value:l},_pkVal:{value:r.$.pK},_model:{value:e},_payloadObj:{value:t}})}"serializeRecord"==i&&store.$.defpayObjUtls(t.$);var f,h=store.$.cbScp(e,i,"serializer");for(var m in h&&(f="serializeRecord"==i?[o,t,r,e,a]:[o,t,e,a],t=store.$.cB(h,f)),n)for(var v=n[m],y=v.length,_=0;_<y;_++){var g,b,A,E,C=v[_],L=t[C.relKey];if("relation"==C.type&&L&&("normalizeRecord"==i||"serializeRecord"==i&&C.opts&&C.opts.serialize&&"id"!=C.opts.serialize))if(g=r?r[C.relKey]:void 0,b=C.relatedTo,A=C.opts?C.opts.serialize:void 0,E=C.opts?C.opts.polymorphic:void 0,"hasMany"===C.relType){Array.isArray(L)||(L=[L]);var $=L.length,P=[];"serializeRecord"==i&&(store.$.defProp(P,"$",{}),store.$.defPayArrUtls(P.$),l&&l[C.relKey]&&(Object.defineProperties(P.$,{_key:{value:C.relKey},_partialObj:{value:l[C.relKey]},_model:{value:b},_payloadObj:{value:P},replace:{value:store.$.replaceCheck,writable:!0},partRecMap:{value:new Map}}),C.opts&&C.opts.serialize&&Object.defineProperty(P.$,"_serialize",{value:C.opts.serialize})));for(var w=0;w<$;w++){var R=b;if(E&&("normalizeRecord"==i?R=L[w]&&L[w]._type?L[w]._type:b:"serializeRecord"==i&&("record"==A?R=g&&Lyte.isRecord(g[w])?g[w].$.model._name:b:"partial"==A&&(R=L[w]&&L[w].$?L[w].$.polymorphicType:b))),"serializeRecord"==i){var N=store.modelFor(b)._pK;P.$.partRecMap.set(L[w][N],!0)}P.push(this.serializeRecords(R,L[w],void 0,o,i,a,l?l[C.relKey][w]:void 0))}t[C.relKey]=P}else R=b,E&&("normalizeRecord"==i?R=t[C.relKey]&&t[C.relKey]._type?t[C.relKey]._type:b:"serializeRecord"==i&&(R=Lyte.isRecord(r[C.relKey])?r[C.relKey].$.model._name:b)),L&&"object"==_typeof(L)&&!L.$&&C.opts&&C.opts.serialize&&(store.$.defProp(L,"$",{}),Object.defineProperty(L.$,"_serialize",{value:C.opts.serialize})),t[C.relKey]=this.serializeRecords(R,t[C.relKey],r?r[C.relKey]:void 0,o,i,a,l?l[C.relKey]:void 0);else"serializeRecord"==i&&C.opts&&C.opts.serialize&&"id"==C.opts.serialize&&"relation"==C.type&&"hsaMany"==C.relType&&(store.$.defProp(t[C.relKey],"$",{}),store.$.defPayArrUtls(t[C.relKey].$),l&&l[C.relKey]&&(Object.defineProperties(t[C.relKey].$,{_key:{value:C.relKey},_partialObj:{value:l[C.relKey]},_model:{value:b},_payloadObj:{value:t[C.relKey]},replace:{value:store.$.replaceCheck,writable:!0}}),C.opts&&C.opts.serialize&&Object.defineProperty(P.$,"_serialize",{value:C.opts.serialize})))}return t},handleAjax:function(e){if(e.url&&!e.model)return Lyte.error("Please pass model param to ajax call"),Promise.reject("Please pass model param to ajax call");var t=store.adapter.$.buildURL("ajax",e.type,e.model,e.index,void 0,e.queryParams,void 0,e.customData,e.url);t.data=e.data;var r=t.qP;return store.$.initCB("serializer",e.model,"serialize",{args:["ajax",t.data,void 0,e.customData,e.model,r,void 0]},t.__reqId__),store.adapter.$.handleRequest(t,e.model,void 0,"ajax",void 0,e.customData,void 0,void 0,void 0,void 0)},handleAction:function(e,t,r,o,n,i,a,s){var l;r&&Lyte.isRecord(r)&&(l=r.$.get(t._pK));var c=t._name,d="action";o=null==o?store.$.getFromCB("adapter",t._name,"customData"):o;var p=this.buildURL(d,i||"POST",t._name,l,r,n,e,o,void 0,void 0,s);p.data=a,n=p.qP;var u=store.$.initCB("serializer",t._name,"serialize",{args:["action",a,r,o,c,n,e]},s);return u&&(p.data=u.data),this.handleRequest(p,t._name,void 0,d,void 0,o,void 0,void 0,e)},handleRequest:function(e,t,r,o,n,i,a,s,l,c){if(e.data&&e.data.LdEr)return Lyte.warn(e.data.LdEr,e.data.key,t),Promise.reject({code:e.data.LyteError,message:Lyte.errorCodes[e.data.LyteError],data:e.data.key});!e.data||"object"!=_typeof(e.data)&&!Lyte.isRecord(e.data)&&!Array.isArray(e.data)||e.data instanceof FormData||(e.data=JSON.stringify(e.data));var d,p=this;return new Promise((function(n,u){var f=store.$.getFromCB("adapter",t,"processRequest"),h=!0,m=store.$.makeBatch,v=!1;if(f){h=!1;var y,_=p.callGeneric(o,t,e.data,r,i,e?e.qP:void 0,s,e.url,l,e.method,e.headers,e);_ instanceof Promise?(v=!0,_.then((function(s){if("action"==o||"ajax"==o)try{s=JSON.parse(s)}catch(e){}else s=JSON.parse(s);y=p.genericResponse(s,t,o,r,e,void 0,a,i),n(y)}),(function(e){u(e)}))):h=!0}if(m&&!v)store.adapter.$.constructBatch(t,o,s,e).then((function(a){var p=a.content;store.adapter.$.handleSuccess(t,o,d,r,e,n,p,a,void 0,u,s,i,l,c)}),(function(a){store.adapter.$.handleFailure(t,o,d,r,e,n,a.content,void 0,u,s,i,a.code,l,a)}));else if(h){var g=[t,o,s,e,n,u,"other",r,i];store.adapter.$.sendXHR.apply(store.adapter.$,g).then((function(d){store.adapter.$.handleSuccess(t,o,d,r,e,n,void 0,void 0,a,u,s,i,l,c)}),(function(c){store.adapter.$.handleFailure(t,o,c,r,e,n,void 0,a,u,s,i,void 0,l)}))}}))},handleSuccess:function(e,t,r,o,n,i,a,s,l,c,d,p,u,f){var h,m,v,y;if(r){var _=r.getResponseHeader("content-type");h=/(application\/json|text\/plain)/.test(_)?r.responseText:r.response}if(r&&r.status,a)h=a;else if(h&&0!=h.length)if("action"==t)try{a=JSON.parse(h)}catch(e){a=h}else a=JSON.parse(h);else a=JSON.parse("{}");r&&(m=r),s&&(v=s.index,y=s.batch,m=s.resp);var g={customD:p};if(m){var b=store.$.initCB("adapter",e,"parseResponse",{args:[t,e,m,a,n?n.qP:void 0,d,p,void 0,u]},n?n.__reqId__:void 0);if(b&&(a=b.data)instanceof Promise)return this.handleParseResponsePromise(a,e,t,o,n,r,l,v,y,i,c,g)}return this.otherParseRequestPromise(a,e,t,o,n,r,l,v,y,i,c,p,f,d)},handleFailure:function(e,t,r,o,n,i,a,s,l,c,d,p,u,f){if(r){store.$.cbScp(e,"parseResponse","adapter");var h,m=r.responseText;if(m)try{m=""==m?JSON.parse("{}"):JSON.parse(m)}catch(e){Lyte.warn("LD24",e)}var v=store.$.initCB("adapter",e,"parseResponse",{args:[t,e,r,m,n?n.qP:void 0,c,d,void 0,u]},n?n.__reqId__:void 0);if(v&&(h=v.data)instanceof Promise)return this.handleParseResponsePromise(h,e,t,o,n,r,s,void 0,void 0,i,l,d)}else if(a){var y,_;f&&(_=f.index,y=f.batch),store.$.batchResponse[y][_]={code:p,status:"requestFailure",data:a},l({code:p,status:"requestFailure",data:a})}l(r)},updateIDB:function(e,t,r,o,n,i){r&&!Array.isArray(r)&&(r=[r]);var a=store.model[e],s=store.$.getIDBObj(a,n&&n.qP?n.qP:void 0,t,i,o);if(a&&s&&(!s||s.hasOwnProperty("queryCache"))){var l=store.$.idbQ2[e]=store.$.idbQ2[e]||[],c=s.queryCache;if(r)switch(t){case"update":case"updateRecord":r.forEach((function(t,r){if(t&&Lyte.isRecord(t)){var n=store.model[e].relations;t.$.inIDB&&t.$.inIDB.self&&l.push({type:"updateRecord",model:e,data:t.$.toJSON("idb"),queryCache:c,customData:o}),store.adapter.$.updateRelationsIDB(t,n,o),store.$.addToIDBonSave(e,t)}}));break;case"delete":case"deleteRecord":case"destroyRecord":var d=store.modelFor(e)._arrPk;r.forEach((function(t,r){if(t&&Lyte.isRecord(t)){var n=store.model[e].relations;t.$.parent;for(var i={},a=0;a<d.length;a++)i[d[a]]=t[d[a]];t.$.inIDB&&t.$.inIDB.self&&l.push({type:"deleteRecord",model:e,key:i,queryCache:c,customData:o}),store.adapter.$.updateRelationsIDB(t,n,o),store.$.removeOnSave(e,t.$.pK)}}));break;case"create":case"createRecord":r.forEach((function(t,r){if(t&&Lyte.isRecord(t)){var n=store.model[e].relations;l.push({type:"createRecord",model:e,data:t.$.toJSON("idb"),queryCache:c,customData:o}),store.adapter.$.updateRelationsIDB(t,n,o,"create"),store.$.addToIDBonSave(e,t)}}))}}else r.forEach((function(r,n){r&&Lyte.isRecord(r)&&store.adapter.$.updateRelationsIDB(r,store.model[e].relations,o,t)}))},updateRelationsIDB:function(e,t,r,o){switch(o){case"create":case"createRecord":for(var n in t)t[n].forEach((function(t){var o,n=t.relKey,i=t.relatedTo;store.$.idbQ2[i]=store.$.idbQ2[i]||[],e.$.inIDB,(o=t.dummy?store.$.getRelatedRecord(e,t.relatedTo,t.dummy):e[n])&&!Array.isArray(o)&&(o=[o]),o&&o.forEach((function(e){var t=e.$.model,o=store.$.idbQ2[t._name]=store.$.idbQ2[t._name]||[];for(var n in e.$.inIDB.self&&o.push({type:"updateRecord",model:t._name,data:e.$.toJSON("idb"),customData:r}),e.$.inIDB){var i=e.$.inIDB[n],a=store.$.idbQ2[n]=store.$.idbQ2[n]||[];i.forEach((function(e,t){a.push({type:"updateRecord",model:n,data:store.$.peekRecord(n,t).$.toJSON("idb"),customData:r})}))}}))}));break;default:var i=e.$.inIDB;if(i)for(mKey in i)i[mKey].forEach((function(e,t){var o=store.$.peekRecord(mKey,t);(store.$.idbQ2[mKey]=store.$.idbQ2[mKey]||[]).push({type:"updateRecord",model:mKey,data:o.$.toJSON("idb"),customData:r})}))}},callGeneric:function(e,t,r,o,n,i,a,s,l,c,d,p){var u=store.$.initCB("adapter",t,"processRequest",{args:[e,t,r,o,n,i,a,s,l,c,d]},p?p.__reqId__:void 0);return u?u.data:void 0},genericResponse:function(e,t,r,o,n,i,a,s,l){var c,d,p=e,u=(i&&i.status,n?n.qP:void 0);if(c=store.$.cbScp(t,"extractMeta","serializer"))if(p){var f=store.$.cB(c,[p,t,r,u,s]);store.$.isEmpty(f)||(p.meta=f),d=!0}else d=!1;if(p&&"action"!=r&&"ajax"!=r){p=store.serializer.$.buildJSON(t,r,p,Lyte.isRecord(o)?o[store.modelFor(t)._pK]:void 0,i?i.status:void 0,n,s,u),0==d&&c&&p&&(f=store.$.cB(c,[p,t,r,u,s]),store.$.isEmpty(f)||(p.meta=f));var h=Object.keys(p),m=h.length;if(c=store.$.cbScp(t,"deserializeKey","serializer")){Lyte.warn("LD08","deserializeKey","callback","Please use payloadKey callback instead"),m>2&&Lyte.error("LD09");var v=0;"meta"==h[0]&&(v=1);var y=store.$.cB(c,[t,r]),_=p[h[v]];delete p[h[v]],p[y]=_}this.handleResponse(o,p,store.modelFor(t),r,a,void 0,l)}return p},removePartialKeys:function(e,t,r){var o=t.relations,n=e.$.pK;for(var i in o)o[i].forEach((function(r){var o;if(bMod=store.model[r.relatedTo],bMod&&(o=store.$.getBackwardRel(t,r,bMod))&&"hasMany"==o.relType&&o.opts&&o.opts.serialize){var i=r.relKey,a=o.relKey,s=e[i];if(s)if(Array.isArray(s))s.forEach((function(e){var t=e[a];t&&t.partial&&t.partial.get(n)&&t.partial.delete(n)}));else if(s[a]){var l=s[a];l&&l.partial&&l.partial.get(n)&&l.partial.delete(n)}}}))},mergeError:function(e,t,r){if(r&&r.$&&r.$.isError){if(r.$.error){var o=r.$.error;for(var n in o)e.fieldList.hasOwnProperty(n)&&store.$.setRecErr(t.$,n,o[n])}return delete r.$.error,delete r.$.isError,!0}},mergeResponse:function(e,t,r,o,n,i){if(this.removePartialKeys(e,t,o),n&&Object.keys(n).length&&this.mergeNewDataKeys(n,e,r,i),!this.mergeError(t,e,r)){var a=store.$.peekRecord(e.$.model._name,e.$.pK),s=!1;e.$.isDeleted&&this.mergeDeletedRec(n,e,i),e.$.isNew&&a&&(s=this.mergeNewRecord(n,e,r,!0,i)),e.$.isModified&&a&&this.mergeModifiedRec(n,e,r,!0,s,i),t.dirty.length&&store.$.deleteFromArray(t.dirty,void 0),n&&Object.keys(n).length&&r&&!s&&r&&(a?(result=store.$.validateAndMerge(t,r,n,!0),result&&result.data?result=result.data:result&&result.type&&Lyte[result.type].apply(Lyte,result.args||[])):result=store.$.insertIntoStore(t._name,r,void 0,void 0,n)),store.adapter.$.removeDirtyStack(e,n)}},removeDirtyStack:function(e,t){if(t&&t._removedAttr&&0!=Object.keys(t._removedAttr).length)for(var r in e.$._attributes)t._removedAttr.hasOwnProperty(r)||delete e.$._attributes[r];else e.$._attributes={};e.$.undoStack=store.$.genUnRedoStack(),e.$.redoStack=store.$.genUnRedoStack(),delete e.$._savedState,store.$.clrRecErr(e.$)},removeBackwardRelDirty:function(e,t){var r=e.$.model,o=r.relations;for(var n in o)o[n].forEach((function(o){var n;e.hasOwnProperty(o.relKey)&&(store.modelFor(o.relatedTo)&&(n=store.$.getBackwardRel(r,o,store.modelFor(o.relatedTo))),n&&n.opts&&n.opts.serialize&&("hasMany"==n.relType||"belongsTo"==n.relType)&&store.adapter.$.removeRelPartial(e[o.relKey],n,t))}))},removeRelPartial:function(e,t,r){if(Array.isArray(e))e.forEach((function(e){var o=e[t.relKey];o&&("hasMany"==t.relType?o.partial&&(o.partial.delete(r),o.partial.size||store.$.deleteDeepNest(e,t.relKey,r)):store.$.deleteDeepNest(e,t.relKey,r))}));else if(Lyte.isRecord(e)){var o=e[t.relKey];o&&("hasMany"==t.relType?o.partial&&(o.partial.delete(r),o.partial.size||store.$.deleteDeepNest(e,t.relKey,r)):store.$.deleteDeepNest(e,t.relKey,r))}},mergeNewRecord:function(e,t,r,o,n){var i,a=e.$?e.$.model:t.$.model._name,s=store.model[a],l=s._arrPk,c=t.$.pK,d=store.$.peekRecord(a,c),p=e.$?e.$.record:void 0;if(!Lyte.isRecord(p)||p===d){if(d){var u="object"==_typeof(c)?c:c.toString(),f=!1;if(!0!==n){l.forEach((function(e){r&&r.hasOwnProperty(e)?(store.$.cmpSet(t,e,r[e],void 0,!0),f=!0):Lyte.error("LD16",a,Lyte.isRecord(t)?"object"==_typeof(t.$.pK)?JSON.stringify(t.$.pK):t.$.pK:void 0)}));var h=store.$.getpKVal(t);store.$.cmpSet(t.$,"pK",store.$.getpKVal(t));var m="object"==_typeof(h)?h:h.toString();s.data._recMap&&(s.data._recMap.delete(u),s.data._recMap.set(m,t)),store.$.changeRelPkMaps(t,u,m),store.$.updateNestScp(t,c)}if(f&&e&&e.$&&(e.$.processed=!0),o&&!0!==n&&((i=store.$.validateAndMerge(s,r,e,!0))&&i.data?i=i.data:i&&i.type&&Lyte[i.type].apply(Lyte,i.args||[])),store.$.cmpSet(t.$,"isNew",!1),e.hasOwnProperty("_removedAttr")&&0!=Object.keys(e._removedAttr).length)return i;store.$.cmpSet(t.$,"isModified",!1),store.$.changePersist(t,!0),store.$.deleteFromArray(s.dirty,c),store.adapter.$.removeBackwardRelDirty(t,c),(!t.$.dN||t.$.dN&&0==Object.keys(t.$.dN).length)&&store.$.removeParentNesting(t)}return i}},mergeModifiedRec:function(e,t,r,o,n,i){var a,s=s||t.$.pK;return t.$.isDeleted||!r||n||!0===i||(r&&o&&((a=store.$.validateAndMerge(t.$.model,r,e,!0))&&a.data?a=a.data:a&&a.type&&Lyte[a.type].apply(Lyte,a.args||[])),n=!0),e&&e.hasOwnProperty("_removedAttr")&&Object.keys(e._removedAttr).length||(store.$.cmpSet(t.$,"isModified",!1),store.$.changePersist(t,!0),store.$.deleteFromArray(t.$.model.dirty,t.$.pK),store.adapter.$.removeBackwardRelDirty(t,t.$.pK),(!t.$.dN||t.$.dN&&0==Object.keys(t.$.dN).length)&&store.$.removeParentNesting(t)),a},mergeDeletedRec:function(e,t){var r,o,n;e?(r=e.$.model,o=e.$.pkVal):t&&(r=t.$.model._name,o=t.$.pK);var i=(h=(n=store.model[r])._deleted.get(o))?h.data:void 0,a=store.$.peekRecord(r,o);if(i){store.$.cmpSet(i.$,"isDeleted",!1),store.$.cmpSet(i.$,"isUnloaded",!0),store.$.cmpSet(i.$,"isPersisted",!0);var s=i.$.__scpObj;for(var l in s){var c=s[l].split("_"),d=Lyte.nestScp[c[0]];d&&Lyte.removeNestScp(d._data,c[0],c[1],void 0,i,void 0,void 0,{model:r,pK:o,attr:l})}n._deleted.delete(o),store.$.removeParentNesting(i)}if(a)store.$.removeFromStore(n,o,!0,void 0,void 0,!0),store.$.removeParentNesting(a);else{var p=store.model.cachedQueries;if(p){var u=p[r];if(u&&u.length)for(var f=u.length-1;f>=0;f--){var h;(h=u[f]).hasDeletedRecords&&h.data&&-1!==h.data[r].indexOf(i)&&u.splice(f,1)}}}e&&e.$&&e.$.parent&&(e.$.parent.$.partial={}),e&&e.$&&(e.$.processed=!0)},mergePartialObj:function(e,t,r,o,n){var i,a=store.$.peekRecord(e.$.model,e.$.pkVal),s=(t=t||a,!!a);if(!(e&&e.$&&e.$.processed||this.mergeError(store.model[e.$.model],t,r)))if("removed"!=e.$.type){if(("added"==e.$.type||t&&t.$&&1==t.$.isNew)&&s?i=this.mergeNewRecord(e,t,r,o,n):("modified"==e.$.type||"related"==e.$.type||t&&t.$&&1==t.$.isModified)&&s&&this.mergeModifiedRec(e,t,r,o,i,n),s){if("removed"!=e.$.type)for(var l in e){var c=e[l];this.mergeNewDataKeys(c,t[l],r?r[l]:void 0,n)}t.$.partial&&Object.keys(t.$.partial)&&(t.$.partial=new Map),store.adapter.$.removeDirtyStack(t,e)}}else this.mergeDeletedRec(e,t,n)},mergeNewDataKeys:function(e,t,r,o){if(e&&(t&&t.partial&&t.partial.size||1==e.partial)){var n=this;if(Array.isArray(e)){var i=!!e.replace&&e.replace;if(e.forEach((function(e,a){if(e.$){var s=store.model[e.$.model]._pK,l=store.$.getIndex(t,s,e.$.pkVal);!0===e.$.onlyDetach?(t.record&&t.key&&store.$.deleteDeepNest(t.record,t.key,e.$.pkVal),store.$.handleArrOp(t,"removeAt",void 0,l,1)):(i&&e.$.record&&e.$.record.$.isNew?i=!0:n.mergeNewDataKeys(e,-1!=l?t[l]:void 0,r?r[a]:void 0,o),t.partial&&t.partial.delete(e.$.pkVal)),(!e._removedAttr||e._removedAttr&&Object.keys(e._removedAttr).length)&&t.partial&&t.partial.delete(e.$.pkVal)}})),Array.isArray(t)&&t.partial&&t.partial.size&&t.record&&t.key&&t.record.$.model){var a=t.record.$.model.fieldList[t.key],s=[];a.opts&&/^(id|record)$/.test(a.opts.serialize)&&(t.partial.forEach((function(e,t){"removed"==e.type&&s.push(t)})),s.forEach((function(e){var r=store.$.peekRecord(t.model._name,e)||store.$.peekRecord(t.model._name,e,!0);t.partial.delete(e),r&&store.$.removeParentNesting(r)})))}}}else if(e&&e.$&&e.$.type)if(e.$.onlyDetach){var l=e.$.parent;if(l&&l.$.partial&&l.$.partial[e.$.relKey]&&l.$.partial[e.$.relKey].has(e.$.pkVal)&&"removed"==l.$.partial[e.$.relKey].get(e.$.pkVal).type){var c=store.$.peekRecord(e.$.model,e.$.pkVal)||store.$.peekRecord(e.$.model,e.$.pkVal,!0);l.$.partial[e.$.relKey].delete(e.$.pkVal),l.$.partial[e.$.relKey].size||(delete l.$.partial[e.$.relKey],Object.keys(l.$.partial).length||delete l.$.partial),c&&store.$.removeParentNesting(c)}}else this.mergePartialObj(e,t,r,void 0,o);else if(Array.isArray(e))n=this,e.forEach((function(e,i){n.mergeNewDataKeys(e,t[i],r?r[i]:void 0,o)}));else if("object"==_typeof(e))for(var d in e)e[d],this.mergeNewDataKeys(e[d],t[d],r?r[d]:void 0,o)},handleResponse:function(e,t,r,o,n,i,a){var s,l,c,d=r._pK;if(t=t[r._name],Array.isArray(e))for(var p=0;p<e.length;p++)c=(l=e[p]).$.pK,s=n&&l&&c?n.get(c):void 0,this.mergeResponse(e[p],r,Array.isArray(t)?t[p]:t,d,s);else c=e.$.pK,s=n&&e&&c?n.get(c):void 0,this.mergeResponse(e,r,t,d,s)},compareData:function(e,t,r){if(!store.$.isEmpty(e)&&!store.$.isEmpty(t)){var o=_typeof(e);if(o!==_typeof(t))return!1;switch(o){case"string":case"number":case"boolean":if(e===t)return!0;break;case"object":return this.compareObjects(e,t,r)}}return!1},compareObjects:function(e,t,r){if(!(e instanceof Object&&t instanceof Object))return!1;if(Object.keys(e).length!=Object.keys(t).length)return!1;for(var o in e){var n=e[o],i=t[o];if(r&&Array.isArray(n)&&Array.isArray(i)){if(n.length!=i.length)return!1;for(var a=n.length,s=0;s<a;s++)if(!store.adapter.$.compareData(n[s],i[s],r))return!1}else if(void 0===i||!store.adapter.$.compareData(n,i,r))return!1}return!0},handleBatchPromise:function(e){var t=e.response,r=e.batch,o=e.fail,n=e.customData;if(o)store.$.batchPromise[r].forEach((function(e,t){e.reject({content:{},index:t,batch:r,code:"400",resp:{}})}));else{var i=store.$.initCB("serializer","application","normalizeResponse",{args:[void 0,"batch",e.response,void 0,void 0,void 0,void 0,n]});i&&(t=i.data),t.batch_requests.forEach((function(e,t){var o=store.$.batchPromise[r][t],n=e.status.toString(),i=n[0];"2"==i?o.resolve({content:e.content,index:t,batch:r,resp:e}):"4"!=i&&"5"!=i||(store.$.batchResponse[r][t]=void 0,o.reject({content:e.content,index:t,batch:r,resp:e,code:n}))}))}delete store.$.batch[r],delete store.$.batchPromise[r]},handleParseResponsePromise:function(e,t,r,o,n,i,a,s,l,c,d,p){e.then((function(e){"findRecord"==r||"findAll"==r?store.adapter.$.findParseRequestPromise(e,t,r,o,n,i,s,l,c,p):store.adapter.$.otherParseRequestPromise(e,t,r,o,n,i,a,s,l,c,d,p?p.customD:void 0,void 0,o)}),(function(e){d(i)}))},findParseRequestPromise:function(e,t,r,o,n,i,a,s,l,c){var d=Object.assign({},c);delete d.customD;var p=this.getResponse(e,t,r,o,n,i,c?c.customD:void 0,d);l(i?[p,i.statusText,i]:null!=a?[p,"batch",{index:a,batch:s}]:[p])},otherParseRequestPromise:function(e,t,r,o,n,i,a,s,l,c,d,p,u,f){var h=this.genericResponse(e,t,r,o,n,i,a,p,u);null!=s&&(store.$.batchResponse[l][s]=h),"action"!=r&&"ajax"!=r&&this.updateIDB(t,r,o,p,n,f),c(h)}}},store.$.defProp(store.adapter,"extends",(function(e,t,r){return store.$.scExtd("adapter",e,t,r)}),!1),Lyte.$.requiredMixins.serializer=Lyte.$.requiredMixins.adapter=function(e,t,r){Object.keys(e).length&&t.forEach((function(t,o){var n=t.scope,i=t.name,a=n[r][i];if(a)for(var s in e)a[s]=e[s]}))},Lyte.$.injectServices&&(Lyte.$.injectServices.adapter=Lyte.$.injectServices.serializer=function(e,t,r,o,n,i){var a=store[r],s={};for(var l in s.as=e,s.service=t,a){var c=a[l];store.$.extendService([s],r,l,c,store,!0,i)}}),store.$.cbDef(Serializer,"serializer"),store.serializer={$:{buildJSON:function(e,t,r,o,n,i,a,s){var l=i?i.headers:void 0,c=r,d=i?i.__reqId__:void 0,p=store.$.initCB("serializer",e,"normalizeResponse",{args:[e,t,c,o,n,l,i?i.qP:void 0,a,void 0,i?i.gqlObj:void 0]},d);p&&(c=p.data);var u,f=/^(findRecord|findAll)$/.test(t);if(!f&&c&&"object"==_typeof(c)&&(p=store.$.initCB("serializer",e,"payloadKey",{args:[e,t,void 0,s,a]},d))){var h=p.data;if(h&&h!=e){var m=c[h];c[e]=m,delete c[h]}}if(f||c&&c[e]){if(u=c[e],scope=store.$.cbScp(e,"normalize","serializer"),scope)if(Array.isArray(u)){store.$.PerfomanceLog(d,"normalize["+u.length+"]",e,!0);for(var v=0;v<u.length;v++)u[v]=store.$.cB(scope,[e,t,u[v],a]);store.$.PerfomanceLog(d,"normalize["+u.length+"]",e)}else u=store.$.cB(scope,[e,t,u,a],"normalize",e,d);var y="pushPayload"!=t?{url:i.url,method:i.method,headers:i.headers,type:t,qP:i.qP,withCredentials:i.withCredentials,model:e}:void 0;u=store.adapter.$.serializeRecords(e,u,void 0,y,"normalizeRecord",a),c[e]=u}return c},normalizeResponse:function(e,t,r,o,n,i,a,s){var l=i?i.headers:void 0,c=r,d=store.$.initCB("serializer",e,"normalizeResponse",{args:[e,t,c,o,n,l,i?i.qP:void 0,a,s,i?i.gqlObj:void 0]},i?i.__reqId__:void 0);return d&&(c=d.data),c},normalize:function(e,t,r,o,n,i,a,s,l){var c=r,d=!1,p=l?l.__reqId__:void 0;(/^(findRecord|findAll)$/.test(t)||c[e])&&(c=c[e],d=!0);var u=store.$.cbScp(e,"normalize","serializer");if(u&&c)if(Array.isArray(c)){store.$.PerfomanceLog(p,"normalize["+c.length+"]",e,!0);for(var f=0;f<c.length;f++)c[f]=store.$.cB(u,[e,t,c[f],a,s]);store.$.PerfomanceLog(p,"normalize["+c.length+"]",e)}else c=store.$.cB(u,[e,t,c,a,s],"normalize",e,p);d&&c&&(c=store.adapter.$.serializeRecords(e,c,void 0,{url:l.url,method:l.method,headers:l.headers,type:t,qP:l.qP,withCredentials:l.withCredentials,model:e},"normalizeRecord",a),r[e]=c)}}},store.$.defProp(store.serializer,"extends",(function(e,t,r){return store.$.scExtd("serializer",e,t,r)})),Object.defineProperties(store,{modelless:{value:{}},registerModel:{get:function(){return Lyte._preRegister(),store.$.registerModel}},ajax:{value:function(e){if(!e.model)return Promise.reject("Model name is mandatory for ajax method");if(1!=store.$.getFromCB("adapter",e.model,"modelless"))return Promise.reject("Modelless behaviour is not enabled. Please enable it to make ajax call for models that are not defined");if(!e.type)return Promise.reject(e.type+" is not a valid HTTP method");var t="string"==typeof e.model?this.model[e.model]:void 0;return t&&t.fieldList?Promise.reject(e.model+" is a defined model. ajax is supported only for a model which is not defined"):store.adapter.$.handleAjax(e)}},triggerUpdate:{value:function(e,t,r,o,n,i){var a;(Lyte.perfomance||Lyte.debug)&&(a=store.$.requestIdGenerator(e,"triggerUpdate"),store.$.PerfomanceLog(a,"triggerUpdate",e));var s,l=[],c=[];if(null==(u=store.modelFor(e)))return Lyte.warn("LD02","Model",e),Promise.reject({code:"ERR19",message:Lyte.errorCodes.ERR19,data:e});s=Array.isArray(t)?t:[t];for(var d=0;d<s.length;d++){var p=store.$.peekRecord(e,s[d]);if(!p)return Promise.reject("No such record found");var u,f={},h=(u=p.$.model)._arrPk;(r||Object.keys(u.fieldList)).forEach((function(e){f[e]=p[e]})),h.forEach((function(e){f[e]=p[e]})),l.push(f),c.push(p)}var m=!1;return Array.isArray(t)||(l=l[0],c=c[0],m=!0),store.adapter.$.put(e,l,c,m,n,o,i,a)}},batch:{value:function(e){return new Promise((function(t,r){store.$.makeBatch=!0,store.$.batch=store.$.batch||{},store.$.batchPromise=store.$.batchPromise||{};var o,n,i=void 0===store.$.currentBatch?Object.keys(store.$.batch).length:store.$.currentBatch+1,a=store.$.currentBatch=i;e&&"function"==typeof e?o=e:e&&"object"==_typeof(e)&&(o=e.method,n=e.customData);try{o()}catch(e){throw store.$.makeBatch=!1,e}store.$.makeBatch=!1;var s={batch:store.$.batch[a]},l=store.adapter.$.buildURL("batch","POST","application",void 0,s,void 0,void 0,n),c=s.batch;if(store.$.isEmpty(c)){if(store.$.cachedBatch&&store.$.cachedBatch[a]&&store.$.cachedBatch[a].length){var d=store.$.handleCachedResponse(a,[]);return t(d)}return t()}var p=store.$.initCB("serializer","application","serialize",{args:["batch",s,void 0,n]});p&&(s=p.data);var u=new XMLHttpRequest;for(var f in u.open("POST",l.url,!0),l.headers)u.setRequestHeader(f,l.headers[f]);u.withCredentials=!!l.withCredentials,u.send(JSON.stringify(s)),u.onreadystatechange=function(){if(4==u.readyState)if("2"==u.status.toString()[0]||"3"==u.status.toString()[0]){var e=JSON.parse(u.responseText);store.$.batchResponse=store.$.batchResponse||{},store.$.batchResponse[a]=[],store.adapter.$.handleBatchPromise({response:e,batch:a,resolve:t,customData:n}),setTimeout((function(){var e=store.$.handleCachedResponse(a,store.$.batchResponse[a]);t(e),store.$.batchResponse[a]=[]}),0)}else store.$.batchResponse[a]=[],store.adapter.$.handleBatchPromise({batch:a,resolve:t,fail:!0,customData:n}),setTimeout((function(){var e=store.$.handleCachedResponse(a,store.$.batchResponse[a]);r(e)}),0)}}))}},pushPayload:{value:function(e,t,r,o,n){var i=store.modelFor(e);if(i=store.$.getFromCB("adapter",e,"modelless")?e:i){var a,s=t;if(r){t=store.serializer.$.buildJSON(e,"pushPayload",t);var l=store.$.cbScp(e,"deserializeKey","serializer");if(a=t?Object.keys(t).length:void 0,l){Lyte.warn("LD08","deserializeKey","callback","Please use payloadKey callback instead"),a>2&&Lyte.error("LD09");var c=Object.keys(t),d=0;2==c.length&&"meta"==c[0]&&(d=1);var p=store.$.cB(l,[e,"pushPayload"]),u=t[c[d]];delete t[c[d]],t[p]=u}s=t[e]}var f=(t=store.$.insertIntoStore(e,s,!0,void 0,void 0,d,!0,void 0,o,n))||[];Array.isArray(f)||(f=[f]);var h=i&&i.hasOwnProperty("idb");return window.LyteIDB&&f.forEach((function(t){Lyte.isRecord(t)&&(h&&store.$.idbQ2Push(e,t,void 0,"pushPayload"),t.$.isError||t.$.inIDB&&Object.keys(t.$.inIDB).length&&store.adapter.$.updateRelationsIDB(t,t.$.model.relations))})),i&&delete i.rel,t&&Lyte.getConfig("mutable")?Lyte.mut(t):t}Lyte.warn("LD02","Model",e)}},unregisterModel:{value:function(e,t){t=!1!==t,Array.isArray(e)?e.forEach((function(e){store.$.unregisterModel(e,t)})):store.$.unregisterModel(e,t)}},unregisterAdapter:{value:function(e){Array.isArray(e)?e.forEach((function(e){store.$.unRegCb("adapter",e)})):store.$.unRegCb("adapter",e)}},unregisterSerializer:{value:function(e){Array.isArray(e)?e.forEach((function(e){store.$.unRegCb("serializer",e)})):store.$.unRegCb("serializer",e)}},addField:{value:function(e,t,r,o,n,i){var a,s=store.modelFor(e),l=[];if(s.fieldList.hasOwnProperty(t)&&"relation"==s.fieldList[t].type){var c=s.fieldList[t],d=s.relations[c.relatedTo];if(Array.isArray(d)){var p=d.indexOf(c);d.splice(p,1)}"hasMany"==c.relType&&delete s._fldGrps.hasMany[t]}if(r&&"object"==_typeof(r))store.$.registerField(s,t,r,l),a="relation"==r.type?"relation":"attr",i=arguments[4],n=void 0===n?arguments[3]:n;else{var u=Lyte.attr(r,o);store.$.registerField(s,t,u,l)}"relation"!=a&&(n&&!i||store.$.updateFieldValidation(s,t,i,n))}},modelFor:{value:function(e){return store.model[e]}},createRecord:{value:function(e,t,r){var o=this.$.newRecord(e,t,r);return o&&Lyte.getConfig("mutable")?Lyte.mut(o):o}},deleteRecord:{value:function(e,t){this.$.removeFromStore(store.modelFor(e),t,void 0)}},findAll:{value:function(e,t,r,o,n,i,a,s){return store.adapter.$.get("findAll",e,void 0,t,r,n,o,i,a).then((function(){var i,a,l,c=arguments,d=c[0][0],p=c[0][2],u=p?p.status:c[0][3],f="cache"==c[0][1],h="batch"==c[0][1]?c[0][2]:void 0,m="idb"==c[0][1],v=store.$.getFromCB("adapter",e,"modelless");if(i=store.model[e],a=r&&!0!==r?r:!0===r&&t&&"object"==_typeof(t)&&Object.keys(t).length?t:void 0,i||null!=o?v&&!i&&1==o&&(l=!0):o=!1,void 0!==o&&"object"==_typeof(o)&&null!==o&&(o=!o.hasOwnProperty("cache")||o.cache),!1===o)return!f&&a&&store.$.cacheQuery(e,a,d,u),null!=h&&(store.$.batchResponse[h.batch][h.index]=d),d;if(d&&!d.save){if(!f){if(!d||!d.hasOwnProperty(e))return void Lyte.error("LD13","findAll",e,t&&"object"==_typeof(t)?",queryParams-"+JSON.stringify(t):"");var y=d[e];if(null==y||store.$.isEmptyArray(y))d[e]=[];else{Array.isArray(y)||Lyte.warn("LD19");var _=l&&null!=s?s:l?"id":void 0,g=store.$.toInsertData(e,d,!0,_),b=g;g&&!Array.isArray(g)&&(b=[g]),window.LyteIDB&&!m&&(b&&!b.$||g&&g.$&&!g.$.isError)&&(i&&i.hasOwnProperty("idb")&&store.$.idbQ2Push(e,b,t,"findAll",void 0,void 0,n),b.forEach((function(e){e&&e.$&&e.$.inIDB&&Object.keys(e.$.inIDB).length&&store.adapter.$.updateRelationsIDB(e,e.$.model.relations)}))),window.LyteIDB&&m&&b&&Array.isArray(b)&&b.forEach((function(e){LyteIDB.changeIDBState(e)})),d[e]=g}d.hasOwnProperty("meta")&&(d[e].$||store.$.defProp(d[e],"$",{}),d[e].$.meta=d.meta),a&&store.$.cacheQuery(e,a,d)}return null!=h&&(store.$.batchResponse[h.batch][h.index]=d[e]),Lyte.getConfig("mutable")?Lyte.mut(d[e]):d[e]}return arguments}),(function(e){return Promise.reject(e)}))}},findRecord:{value:function(e,t,r,o,n,i,a,s,l){return null==t?Promise.reject({code:"ERR20",message:Lyte.errorCodes.ERR20}):store.adapter.$.get("findRecord",e,t,r,o,i,n,a,s).then((function(){var a,s=arguments[0][0],c="cache"==arguments[0][1],d=arguments[0][2],p=d?d.status:arguments[0][3],u="batch"==arguments[0][1]?arguments[0][2]:void 0,f="idb"==arguments[0][1],h=store.model[e],m=o&&!0!==o?o:!0===o&&r&&"object"==_typeof(r)&&Object.keys(r).length?r:void 0,v=store.$.getFromCB("adapter",e,"modelless");if(h||null!=n?v&&!h&&1==n&&(a=!0):n=!1,void 0!==n&&"object"==_typeof(n)&&null!==n&&(n=!n.hasOwnProperty("cache")||n.cache),!1===n)return!c&&m&&store.$.cacheRecordQuery(e,t,m,s,p),null!=u&&(store.$.batchResponse[u.batch][u.index]=s),s;if(s){if(!c){var y;if(!s||!s.hasOwnProperty(e))return void Lyte.error("LD13","findRecord",e,",key-"+("object"==_typeof(t)?JSON.stringify(t):t)+(r&&"object"==_typeof(r)?", queryParams-"+JSON.stringify(r):""));if(!Lyte.isRecord(s)){var _=s[e];if((store.$.isEmpty(_)||store.$.isEmptyObj(_))&&(s[e]={},y=!0),("object"!=_typeof(_)||Array.isArray(_))&&Lyte.warn("LD11"),!y){var g,b=a&&null!=l?l:a?"id":void 0,A=store.$.insertIntoStore(e,_,!0,!0,void 0,void 0,void 0,void 0,b);window.LyteIDB&&!f&&Lyte.isRecord(A)&&!A.$.isError&&(Array.isArray(A)||(g=[A]),h&&h.hasOwnProperty("idb")&&store.$.idbQ2Push(e,g,r,"findRecord",t,s&&s.meta?s.meta:void 0,i),g.forEach((function(e){e&&e.$&&e.$.inIDB&&Object.keys(e.$.inIDB).length&&store.adapter.$.updateRelationsIDB(e,e.$.model.relations)}))),window.LyteIDB&&f&&g&&Array.isArray(g)&&g.forEach((function(e){LyteIDB.changeIDBState(e)})),s[e]=A}s.hasOwnProperty("meta")&&(Lyte.isRecord(A)?A.$.meta=s.meta:((_=s[e]).$||store.$.defProp(_,"$",{}),_.$.meta=s.meta))}!c&&m&&store.$.cacheRecordQuery(e,t,m,s)}return null!=u&&(store.$.batchResponse[u.batch][u.index]=s[e]),Lyte.getConfig("mutable")?Lyte.mut(s[e]):s[e]}return arguments}),(function(e){return Promise.reject(e)}))}},peekRecord:{value:function(e,t,r){return store.$.peekRecord(e,t,r,!0)}},peekAll:{value:function(e){var t=this.modelFor(e),r=store.$.getFromCB("adapter",e,"modelless");if(t=r?e:t){if(1!=r||!t||(t=store.modelless[t]))return arr=t.data,r?arr:Lyte.getConfig("mutable")?Lyte.mut(arr):arr}else Lyte.warn("LD02","Model ",e)}},deleteMany:{value:function(e,t){this.$.removeFromStore(store.modelFor(e),t,void 0)}},unloadRecord:{value:function(e,t,r,o){var n,i=this.modelFor(e),a=store.$.getFromCB("adapter",e,"modelless");if(i=a?e:i){if(1==a&&i){if(!(i=store.modelless[i]))return;n=!0}null==t&&Lyte.warn("LD18","key");var s,l=store.$.peekRecord(e,t);if(1==n)-1!=(m=store.$.getInd(i.data,i._pK,t))&&store.$.handleArrOp(i.data,"removeAt",void 0,m,1);else if(l){var c=i._fldGrps.inherit&&Object.keys(i._fldGrps.inherit).length;if(r=!1!==r,s=l.$.pK,r&&c){var d=new Map;store.$.removeChildRecords(i,l,d,!0)}else this.$.removeFromStore(i,s,!0,!0,void 0,void 0,!0,o);i._deleted.delete(t);var p=this.model.cachedRecordQueries;p&&p[e]&&p[e][t]&&(p[e][t]=[]);var u=store.model.cachedQueries;if(u){var f=u[e];if(f&&f.length)for(var h=f.length-1;h>=0;h--){var m,v=f[h];v&&v.data&&-1!=(m=v.data[e].indexOf(l))&&f.splice(h,1)}}}}else Lyte.warn("LD02","Model ",e)}},unloadAll:{value:function(e,t,r,o){var n,i=this.modelFor(e),a=store.$.getFromCB("adapter",e,"modelless");if(i=a?e:i){if(1==a&&i){if(!(i=store.modelless[i]))return;n=!0}var s=[],l=t||store.peekAll(e);if(1==n)store.$.handleArrOp(i.data,"removeAt",void 0,0,i.data.length);else{if(l)for(var c=0;c<l.length;c++)s.push(l[c].$.pK);var d=i._fldGrps.inherit&&Object.keys(i._fldGrps.inherit).length;if((r=!1!==r)&&d)for(c=s.length-1;c>=0;c--){var p=l[c],u=new Map;store.$.removeChildRecords(i,p,u,!0)}else this.$.removeFromStore(i,s,!0,!0,void 0,void 0,!0,o);this.model[e].dirty=[],this.model[e]._deleted=new Map;var f=store.model.cachedQueries;f&&f[e]&&(f[e]=[]);var h=this.model.cachedRecordQueries;h&&h[e]&&(h[e]=[])}}else Lyte.warn("LD02","Model ",e)}},triggerAction:{value:function(e,t,r,o,n,i){var a;(Lyte.perfomance||Lyte.debug)&&(a=store.$.requestIdGenerator(e,"triggerAction"),store.$.PerfomanceLog(a,"triggerAction",e));var s=store.modelFor(e);return null==s?(Lyte.warn("LD02","Model",e),Promise.reject({code:"ERR19",message:Lyte.errorCodes.ERR19,data:e})):(s.actions?s.actions[t]:void 0)?store.adapter.$.handleAction(t,s,store.peekAll(e),r,o,n,i,a).then((function(e){return e}),(function(e){return Promise.reject(e)})):Promise.reject({code:"ERR18",message:Lyte.errorCodes.ERR18})}},rollBack:{value:function(e){var t=this.modelFor(e);if(t.relations,null!=t){for(var r=t._pK,o=Array.from(t.dirty),n=o.length,i=0;i<n;i++){var a=this.peekRecord(e,o[i]);a&&a.$.isDeleted||(a&&a.$.isNew?this.$.rollBackNew(t,a,r):a&&a.$.isModified&&a.$.rollBackAttributes(a.$.getDirtyAttributes()))}this.$.rollBackDelete(t,void 0,!0)}else Lyte.warn("LD02","Model",e)}},create:{value:function(e,t,r,o,n,i){var a;(Lyte.perfomance||Lyte.debug)&&(a=store.$.requestIdGenerator(e,"create"),store.$.PerfomanceLog(a,"create",e));var s=store.modelFor(e);if(null==s)return Lyte.warn("LD02","Model",e),Promise.reject({code:"ERR19",message:Lyte.errorCodes.ERR19,data:e});if(Array.isArray(t)){var l=this;t.forEach((function(t){var r=l.$.newRecord(e,t);if(r.$.isError)return Promise.reject(r)}))}else if(t&&"object"==_typeof(t)){var c=this.$.newRecord(e,t);if(c.$.isError)return Promise.reject(c)}for(var d,p=s.dirty,u=p.length,f=[],h=0;h<u;h++){var m=store.peekRecord(e,p[h]);if(m&&m.$.isNew){if(n&&-1==n.indexOf(m))continue;if(d=new error1,store.$.validateRecord(m,s.fieldList),m.$.isError&&Object.keys(m.$.error).length>0)return Promise.reject(d);f.push(m.$.record)}}return f.length?store.adapter.$.create(e,f,!1,r,o,i,a):Promise.resolve()}},update:{value:function(e,t,r,o,n){var i;if((Lyte.perfomance||Lyte.debug)&&(i=store.$.requestIdGenerator(e,"update"),store.$.PerfomanceLog(i,"update",e)),null==this.modelFor(e))return Lyte.warn("LD02","Model",e),Promise.reject({code:"ERR19",message:Lyte.errorCodes.ERR19,data:e});var a,s=[],l=[],c=o||store.peekAll(e),d=(a=store.model[e]).relations;return c.forEach((function(t){if(Lyte.isRecord(t)&&t.$.model._name==e){var r=t,o=store.$.isDirty(r,d);if(r&&!r.$.isNew&&!r.$.isDeleted&&(r.$.isModified||o&&o.length)){var n=store.$.updateJSON(r,a,o);s.push(n),l.push(r.$.record)}}})),s.length?store.adapter.$.put(e,s,l,!1,t,r,n,i):Promise.resolve()}},delete:{value:function(e,t,r,o,n,i){var a;(Lyte.perfomance||Lyte.debug)&&(a=store.$.requestIdGenerator(e,"create"),store.$.PerfomanceLog(a,"create",e));var s=store.modelFor(e);if(null==s)return Lyte.warn("LD02","Model",e),Promise.reject({code:"ERR19",message:Lyte.errorCodes.ERR19,data:e});t&&this.deleteRecord(e,t);var l=[];if(s._deleted.forEach((function(e,t){l.push(e.data)})),n){var c=[];n.forEach((function(e){-1!=l.indexOf(e.$.record)&&c.push(e.$.record)})),l=c}return l.length?store.adapter.$.del(e,l,void 0,"delete",r,o,i,a).then((function(e){return e}),(function(e){return Promise.reject(e)})):Promise.resolve()}},registerAdapter:{value:store.adapter.extends},registerSerializer:{value:store.serializer.extends},clearCachedQuery:{value:function(e,t,r){var o,n;e&&"object"==_typeof(e)?(e=(n=e).modelName,t=n.key,o=r=n.cacheQuery):t&&"object"==_typeof(t)?(o=t,t=void 0):r&&"object"==_typeof(r)&&(o=r);var i=[];if(o){if(o){null==t?(s=this.model.cachedQueries)&&s[e]&&(i=s[e]):(l=this.model.cachedRecordQueries)&&l[e]&&l[e][t]&&(i=l[e][t]);for(var a=0;a<i.length;a++)if(this.adapter.$.compareData(i[a].cacheQuery,o,!0)){i.splice(a,1);break}}}else if(e){var s=this.model.cachedQueries,l=this.model.cachedRecordQueries;s&&s.hasOwnProperty(e)&&delete s[e],l&&l.hasOwnProperty(e)&&(t?delete l[e][t]:delete l[e])}else this.model.cachedQueries=[],this.model.cachedRecordQueries={}}},getErrorMessage:{value:function(e){return Lyte.errorCodes[e]}},setErrorMessages:{value:function(e){Object.assign(Lyte.errorCodes,e)}},addEventListener:{value:function(e,t){return store.$.eventListeners.add(store,e,t)}},removeEventListener:{value:function(e){store.$.eventListeners.remove(store,e)}},emit:{value:function(e,t){store.$.eventListeners.emit(store,e,t)}},getPrimaryKey:{value:function(e){var t=store.model[e];if(t)return t._pK;Lyte.warn("LD02","Model ",e)}},getDirtyRecords:{value:function(e,t,r){var o=store.modelFor(e);if(o){for(var n=o.dirty,i=[],a={isNew:[],isModified:[],isDeleted:[]},s=0;s<n.length;s++){var l=store.$.peekRecord(e,n[s]);l&&(l.$.isNew?a.isNew.push(l):a.isModified.push(l))}return o._deleted.size&&o._deleted.forEach((function(e){a.isDeleted.push(e.data)})),(o.dirty||o._deleted.size)&&(null!=t&&1!=t||(i=i.concat(a.isNew,a.isModified,a.isDeleted)),Array.isArray(t)&&t.forEach((function(e){i=i.concat(a[e])})),"string"==typeof t&&(i=a[t])),r&&store.peekAll(e).forEach((function(e){!e||e.$.isNew||e.$.isDeleted||!e.$.isDirty()||i.includes(e)||i.push(e)})),i}Lyte.warn("LD02","Model ",e)}}});var error1=function(e,t,r){Object.defineProperties(this,{$:{value:{isError:!0,error:r||{}}}}),e&&store.$.setError(this,e,t)};!function(e){var t=[],r=t.slice,o=t.push,n=t.indexOf,i=t.concat,a={},s=a.toString,l=a.hasOwnProperty,c=l.toString,d=c.call(Object),p=e.document;function u(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?a[s.call(e)]||"object":typeof e}function f(e){var t=!!e&&"length"in e&&e.length,r=u(e);return!y.isFunction(e)&&!y.isWindow(e)&&("array"===r||0===t||"number"==typeof t&&0<t&&t-1 in e)}function h(e){return-1!==e.indexOf(":visible")}function m(e,t,r){var n,i,a;if(h(e))if(1<(n=e.split(",")).length)for(i=0;i<n.length;i++)m(n[i],t,r);else o.apply(r,function(e,t){for(var r=e.indexOf(":visible"),o=(r=e.substring(0,r),0),n=[],i=t.querySelectorAll(r||"*");o<i.length;o++)v(i[o])&&n.push(i[o]);return n}(n[0],t));else a=e,e=r,a=t.querySelectorAll(a),o.apply(e,a)}function v(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)}var y=function(e,t){return new E(e,t)};y.isFunction=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType};var _=/^(?:\s*(<[\w\W]+>)|#([\w-]+))$/,g=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i,b=/<|&#?\w+;/,A=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,E=function(t,r){var o,n,i,a=W;if(!t)return this;if("string"!=typeof t)return t.nodeType?(this[0]=t,this.length=1,this.singular=!0,this):(i=y.makeArray(t,this),t===e&&(i.singular=!0),i);if(!(o="<"===t[0]&&">"===t[t.length-1]&&3<t.length?[null,t,null]:_.exec(t))||!o[1]&&r)return(!r||r instanceof E?r||a:this.constructor(r)).find(t);if(o[1]){if(r=r instanceof E?r[0]:r,y.merge(this,y.parseHTML(o[1],r&&r.nodeType?r.ownerDocument:document)),g.test(o[1])&&y.isPlainObject(r))for(n in r)y.isFunction(this[n])?this[n](r[n]):this.attr(n,r[n]);return this}return o=document.getElementById(o[2]),(i=this.pushStack(o?[o]:[])).isId=!0,i};function C(e,t,r,o){if("number"==typeof r)r=r.toString();else if("string"!=typeof r&&"any"!=e&&"empty"!=e)return;var n;switch(n=r,!1===o.caseSensitive&&(n=n.toLowerCase()),r=n=o.trim?n.trim():n,e){case"any":return 1;case"empty":return!r;case"equals":return t===r;case"notEquals":return t!=r;default:return!!t&&T[e](t,r)}}E.prototype={splice:t.splice,constructor:y,length:0,push:t.push,sort:t.sort,indexOf:t.indexOf},y.prototype=E.prototype,y.extend=E.prototype.extend=function(){var e,t,r,o,n,i=1,a=!1,s=arguments.length,l=arguments[0]||{};for("boolean"==typeof l&&(a=l,l=arguments[i]||{},i++),s==i&&(l=this,i--),y.isFunction(l)||"object"==typeof l||(l={});i<arguments.length;i++)for(e in o=arguments[i])(t=o[e])!==(r=l[e])&&"__proto__"!==e&&(t&&a?Array.isArray(t)?(n=r&&Array.isArray(r)?r:[],l[e]=y.extend(a,n,t)):y.isPlainObject(t)?(n=y.isPlainObject(r)?r:{},l[e]=y.extend(a,n,t)):void 0!==t&&(l[e]=t):l[e]=o[e]);return l};var L,$,P,w,R,N,O,T={startsWith:function(e,t){return 0===t.indexOf(e)},endsWith:function(e,t){return t.indexOf(e)===t.length-e.length},includes:function(e,t){return-1!==t.indexOf(e)}};function k(e){var t,r=!1,o=[],n=0,i=0,a=e.slice(0);if(e.sort((function(e,t){var o;return e===t?(r=!0,0):1&(o=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1)?e===document||e.ownerDocument===p&&p.contains(e)?-1:t===document||t.ownerDocument===p&&p.contains(t)?1:a?a.indexOf(e)-a.indexOf(t):0:4&o?-1:1})),r){for(;t=e[n++];)t===e[n]&&(i=o.push(n));for(;i--;)e.splice(o[i],1)}return e}function x(e){return Math.round(parseFloat(e))}function S(){var t,r;N&&(r=document.documentElement,O.style.cssText="position: absolute; left: 0px;width:300px;height:5px;",N.style.cssText="position:relative;width:200px;margin: auto; top: 1%;box-sizing:border-box;padding: 20px;",r.appendChild(O).appendChild(N),t=e.getComputedStyle(N),P=50===x(t.marginLeft),w="1%"!==t.top,R=200===x(t.width),r.removeChild(O),N=null)}function D(){this.expando=y.expando+y.dataid++}y.extend({userAgent:($=navigator.userAgent,t=$.match(/(opera|CriOS|FxiOS|EdgiOS|OPT|chrome|safari|firefox|msie|trident(?=\/))\/?\s*([\d.]+)/i)||[],/trident/i.test(t[1])?{browser:"IE",version:((L=/\brv[ :]+([\d.]+)/g.exec($)||[])[1]||"").split(".")[0],detailedVersion:["IE",L[1]]}:"Chrome"===t[1]&&null!=(L=$.match(/\b(OPR|Edge|UCBrowser|SamsungBrowser|YaBrowser|Edg|Falkon)\/([\d.]+)/))?("Edg"!==L[1]&&"EdgA"!==L[1]||(L[1]="Edge"),{browser:L[1],version:(L[2]||"").split(".")[0],detailedVersion:[L[1],L[2],t[1],t[2]]}):(t=t[2]?[t[1],t[2]]:[navigator.appName,navigator.appVersion],null==(L=$.match(/version\/([\d.]+)/i))||/android/i.test($)||t.splice(1,1,L[1]),"CriOS"!==t[0]&&"FxiOS"!==t[0]&&"EdgiOS"!==t[0]&&"OPT"!==t[0]||(t[2]="Safari"),"MSIE"===t[0]&&(t[0]="IE"),{browser:t[0],version:(t[1]||"").split(".")[0],detailedVersion:t})),regex:{rnothtmlwhite:/[^\x20\t\r\n\f]+/g},_meta:{support:{}},_processInput:function(e,t,r,o,n,i,a){var s,l=e.length,c=0,d=null==t;if("object"===u(t))for(s in n=!0,t)y._processInput(e,s,t[s],o,!0);else if(void 0!==r&&(n=!0,y.isFunction(r)||(a=!0),o=d?a?(o.call(e,r),null):(d=o,function(e,t,r){return d.call(y(e),r)}):o))for(;c<l;c++)o(e[c],t,a?r:r.call(e[c],c,o(e[c],t)));return n?e:d?o.call(e):l?o(e[0],t):i},_camelCase:function(e){return e.replace(B,"ms-").replace(F,H)},_removeDupes:function(e,t,r){if(1<e.length){var o=k(e);return r.pushStack(t?o.reverse():o)}return r.pushStack(e)},_checkMatch:function(e,t){return!(t&&!y._matches(e,t))},_matches:function(e,t){var r,o,n,i=e.matches||e.matchesSelector||e.msMatchesSelector||e.webkitMatchesSelector||e.mozMatchesSelector;if(!h(t))return i.call(e,t);if(!(1<(r=t.split(",")).length))return n=(t=r[0]).indexOf(":visible"),n=t.substring(0,n),i.call(e,n||"*")&&v(e);for(o=0;o<r.length;o++)if(y._matches(e,r[o]))return!0},expando:"lytedom"+Math.random().toString().replace(/\D/g,""),isWindow:function(e){return null!=e&&e===e.window},map:function(e,t){var r,o,n=e.length,a=[];if(f(e))for(r=0;r<n;r++)null!=(o=t(e[r],r))&&a.push(o);else for(r in e)null!=(o=t(e[r],r))&&a.push(o);return i.apply([],a)},grep:function(t,r,o){for(var n=0,i=!o,a=(t||[]).length,s=[];n<a;n++)!!r.call(e,t[n],n)==i&&s.push(t[n]);return s},each:function(e,t){var r,o;if(f(e))for(o=e.length,r=0;r<o&&!1!==t.call(e[r],r,e[r]);r++);else for(r in e)if(!1===t.call(e[r],r,e[r]))break;return e},merge:function(e,t){for(var r=t.length||0,o=e.length||0,n=0;n<r;n++)e[o+n]=t[n];return e.length=r+o,e},isEmptyObject:function(e){for(var t in e)return!1;return!0},makeArray:function(e,t){return t=t||[],null!=e&&(f(Object(e))?y.merge(t,"string"==typeof e?[e]:e):o.call(t,e)),t},inArray:function(e,t,r){return null==t?-1:n.call(t,e,r)},isPlainObject:function(e){return!(!e||"[object Object]"!==s.call(e)||(e=Object.getPrototypeOf(e))&&("function"!=typeof(e=l.call(e,"constructor")&&e.constructor)||c.call(e)!==d))},parseXML:function(e){var t,r=new DOMParser;try{t=r.parseFromString(e,"text/xml")}catch(e){t=void 0}if(!t||t.getElementsByTagName("parsererror").length)throw new Error("Unable to parse"+e);return t},Evaluate:function(e){var t=document.createElement("script");t.text=e,document.head.appendChild(t).parentNode.removeChild(t)},removeLeaks:function(e){for(var t,r,o=0;o<e.length;o++){if(t=e[o][y._dataPriv.expando]){if(t.events)for(r in t.events)y.ev.removeEvents(e[o],r,t.handle);t=void 0}t=t&&void 0}},search:function(e,t,r,o,n,i){var a,s,l=[],c=!1;e.constructor!=Array&&"object"==typeof e&&(e=[e],s="object"),n?(c=n.recursive||!1,!1===n.caseSensitive&&(r=r.toLowerCase()),n.trim&&(r=r.trim())):n={},t&&"string"==typeof t&&(t=t.split(".")),o?"equals"!==o&&"number"==typeof r&&(r=r.toString()):o="includes",t&&(a=t[0]);for(var d=0;d<e.length;d++){var p=e[d];if(a){if(p instanceof Object&&a in p){if(1===t.length&&C(o,r,p[a],n))l.push(p);else if(p[a]instanceof Array||p[a]instanceof Object){var u=this.search(p[a],t.slice(1),r,o,n,!0);if(c&&u)return u;u&&l.push(p)}}else if(p instanceof Array){if(u=this.search(p,t,r,o,n,!0),c&&u)return c;u&&l.push(p)}}else if(C(o,r,p,n))l.push(p);else if(p instanceof Array){u=this.search(p,a,r,o,n,!0);if(c&&u)return u;u&&l.push(p)}c&&p[n.children]&&(u=this.search(p[n.children],t,r,o,n,!0))&&(l=l.length?l.concat(u):u)}return i?!!l.length&&(c||"object"!==s?l:l[0]):l}}),y.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),(function(e,t){a["[object "+t+"]"]=t.toLowerCase()})),"undefined"!=typeof document&&(M=document.createElement("input"),I=document.createElement("select").appendChild(document.createElement("option")),M.type="checkbox",y._meta.support.checkOn=""!==M.value,y._meta.support.optSelected=I.selected,(M=document.createElement("input")).value="t",M.type="radio",y._meta.support.radioValue="t"===M.value,N=document.createElement("div"),O=document.createElement("div"),y.extend(y._meta.support,{reliableMarginLeft:function(){return S(),P},reliablePixelPosition:function(){return S(),w},reliableBoxSizing:function(){return S(),R}})),y.needsContext=/^[\x20\t\r\n\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\([\x20\t\r\n\f]*((?:-\d)?\d*)[\x20\t\r\n\f]*\)|)(?=[^-]|$)/i,y.dataid=0,y.extend(D.prototype,{cache:function(e){var t=e[this.expando];return t||(t={},e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0})),t},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][y._camelCase(t)]},hasData:function(e){return void 0!==(e=e[this.expando])&&!y.isEmptyObject(e)},access:function(e,t,r){return void 0===t||t&&"string"==typeof t&&void 0===r?this.get(e,t):(this.set(e,t,r),void 0!==r?r:t)},set:function(e,t,r){var o,n=this.cache(e);if("string"==typeof t)n[y._camelCase(t)]=r;else for(o in t)n[y._camelCase(o)]=t[o];return n},remove:function(e,t){var r,o=e[this.expando];if(void 0!==o){if(void 0!==t){r=(t=Array.isArray(t)?t.map(y._camelCase):(t=y._camelCase(t))in o?[t]:t.match(y.regex.rnothtmlwhite)||[]).length;for(;r--;)delete o[t[r]]}void 0!==t&&!y.isEmptyObject(o)||(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}}}),y._dataPriv=new D;var j=new D;E.prototype.extend({toArray:function(){return r.call(this)},add:function(e,t){return this.pushStack(k(y.merge(this.get(),y(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))},slice:function(){return this.pushStack(r.apply(this,arguments))},has:function(e){var t=y(e,this),r=t.length;return this.filter((function(){for(var e=0;e<r;e++)if(this!==t[e]&&this.contains(t[e]))return!0}))},is:function(e){return 0<K(this,"string"==typeof e&&y.needsContext.test(e)?y(e):e||[],!1).length},not:function(e){return this.pushStack(K(this,e||[],!0))}}),E.prototype.extend({eq:function(e){var t=this.length;return e=e<0?t+e:e,this.pushStack(e<0||t-1<e?[]:[this[e]])},last:function(){return this.eq(-1)},first:function(){return this.eq(0)},end:function(){return this.prevObject||this.constructor()},map:function(e){return this.pushStack(y.map(this,(function(t,r){return e.call(t,r,t)})))},filter:function(e){return this.pushStack(K(this,e||[],!1))},find:function(e){var t,r,o=this,n=this.length;if("string"!=typeof e)return this.pushStack(y(e).filter((function(){for(r=0;r<n;r++)if(o[r]!==this&&o[r].contains(this))return!0})));for(t=this.pushStack([]),r=0;r<n;r++)m(e,this[r],t);return 1<t.length?k(t):t},pushStack:function(e){return(e=y.merge(this.constructor(),e)).prevObject=this,e},each:function(e){return y.each(this,e)},get:function(e){return null==e?r.call(this):e<0?this[e+this.length]:this[e]},empty:function(){return this.each((function(e,t){1===t.nodeType&&(y.removeLeaks(t.getElementsByTagName("*")),t.textContent="")})),this},text:function(e){return y._processInput(this,null,e,(function(e){return void 0===e?function e(t){var r,o,n=0,i="",a=t.nodeType;if(a){if(1===a||9===a||11===a){if("string"==typeof t.textContent)return t.textContent;for(o=t.firstChild;o;o=o.nextSibling)i+=e(o)}else if(3===a||4===a)return t.nodeValue}else for(;r=t[n++];)i+=e(r);return i}(this):this.empty().each((function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)}))}),arguments.length)},clone:function(e,t){return e=!0===e,t=null==t?e:t,this.map((function(){return y.clone(this,e,t)}))}});var I,M,B=/^-ms-/,F=/-([a-z])/g;function H(e,t){return t.toUpperCase()}function K(e,t,r){return"string"==typeof t?function(e,t){for(var r=[],o=0,n=t.length;o<n;o++)y._matches(t[o],e)&&r.push(t[o]);return r}(t=r?":not("+t+")":t,y.grep(e,(function(e){return 1===e.nodeType}))):y.isFunction(t)?y.grep(e,(function(e,o){return!!t.call(e,o,e)!==r})):1===t.nodeType?y.grep(e,(function(e){return e===t!==r})):y.grep(e,(function(e){return-1<n.call(t,e)!==r}))}"undefined"!=typeof document&&(I=document.createDocumentFragment().appendChild(document.createElement("div")),(M=document.createElement("input")).setAttribute("type","radio"),M.setAttribute("checked","checked"),M.setAttribute("name","t"),I.appendChild(M),y._meta.support.checkClone=I.cloneNode(!0).cloneNode(!0).lastChild.checked,I.innerHTML="<textarea>x</textarea>",y._meta.support.noCloneChecked=!!I.cloneNode(!0).lastChild.defaultValue);var U={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};U.tbody=U.tfoot=U.colgroup=U.caption=U.thead,U.th=U.td,y.extend({parseHTML:function(e,t){var r=g.exec(e);return r?[t.createElement(r[1])]:function(e){var t,r,o,n=document.createDocumentFragment(),i=[];if(b.test(e)){for(o=n.appendChild(document.createElement("div")),t=(A.exec(e)[1]||"").toLowerCase(),t=U[t]||U._default,o.innerHTML=t[1]+e+t[2],r=t[0];r--;)o=o.lastChild;y.merge(i,o.childNodes),(o=n.firstChild).textContent=""}return i}(e)}}),y.extend({hasData:function(e){return j.hasData(e)||y._dataPriv.hasData(e)},data:function(e,t,r){return j.access(e,t,r)},removeData:function(e,t){j.remove(e,t)},_data:function(e,t,r){return y._dataPriv.access(e,t,r)},_removeData:function(e,t){y._dataPriv.remove(e,t)}}),E.prototype.extend({data:function(e,t){var r,o,n,i=this[0],a=i&&i.attributes;if(void 0!==e)return"object"==typeof e?this.each((function(){j.set(this,e)})):y._processInput(this,null,t,(function(t){var r;return i&&void 0===t?void 0!==(r=j.get(i,e))||void 0!==(r=z(i,e))?r:void 0:void this.each((function(){j.set(this,e,t)}))}),1<arguments.length,null,!0);if(this.length&&(n=j.get(i),1===i.nodeType&&!y._dataPriv.get(i,"hasDataAttrs"))){for(r=a.length;r--;)a[r]&&0===(o=a[r].name).indexOf("data-")&&(o=y._camelCase(o.slice(5)),z(i,o,n[o]));y._dataPriv.set(i,"hasDataAttrs",!0)}return n},removeData:function(e){return this.each((function(){j.remove(this,e)}))}});var V=/[A-Z]/g,q=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/;function z(e,t,r){var o,n;if(void 0===r&&1===e.nodeType)if(o="data-"+t.replace(V,"-$&").toLowerCase(),"string"==typeof(r=e.getAttribute(o))){try{r="true"===(n=r)||"false"!==n&&("null"===n?null:n===+n+""?+n:q.test(n)?JSON.parse(n):n)}catch(e){}j.set(e,t,r)}else r=void 0;return r}var W="undefined"!=typeof document?y(document):{};y.parse=JSON.parse,e.$L=y,e.lyteDomObj=E}("undefined"==typeof window?this:window),function(e){function t(){this.readOps=[],this.writeOps=[]}var r=e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.msRequestAnimationFrame||function(e){return setTimeout(e,25)};t.prototype={constructor:t,scheduled:!1,measure:function(e,t){return e=t?e.bind(t):e,this.readOps.push(e),this.stagingFn(),e},mutate:function(e,t){return e=t?e.bind(t):e,this.writeOps.push(e),this.stagingFn(),e},stagingFn:function(){this.scheduled||(this.scheduled=!0,r(this.executeTasks.bind(this)))},executeTasks:function(){var e;try{this.execute(this.readOps),this.execute(this.writeOps)}catch(t){e=t}if(this.scheduled=!1,(this.readOps.length||this.writeOps.length)&&this.stagingFn(),e){if(!this.catch)throw e;this.catch(e)}},execute:function(e){for(var t;t=e.shift();)t()},clear:function(e){return this.remove(this.readOps,e)||this.remove(this.writeOps,e)},remove:function(e,t){return-1!==(t=e.indexOf(t))&&!!e.splice(t,1)},catch:null},e.$L.fastdom=new t}("undefined"!=typeof window?window:this),function(e){var t=/\r/g,r=["Top","Right","Bottom","Left"],o=/^(?:input|select|textarea|button)$/i,n=/^(?:a|area)$/i,i=/^--/,a=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,s=new RegExp("^(?:([+-])=|)("+a+")([a-z%]*)$","i"),l=/^(none|table(?!-c[ea]).+)/,c=new RegExp("^("+a+")(?!px)[a-z%]+$","i"),d={letterSpacing:"0",fontWeight:"400"},p=/^(?:checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)$/i,u={set:function(e,t,r){return!1===r?$L.removeAttr(e,t):e.setAttribute(t,t),t}};function f(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}function h(e){return Array.isArray(e)?e:(e&&e.match&&e.match($L.regex.rnothtmlwhite)||[]).join(" ").match($L.regex.rnothtmlwhite)||[]}function m(e){return e.getAttribute&&e.getAttribute("class")||""}function v(t){var r=t.ownerDocument.defaultView;return(r=r&&r.opener?r:e).getComputedStyle(t)}function y(e,t,r){var o;return void 0!==(o=(r=r||v(e))?r.getPropertyValue(t)||r[t]:o)?o+"":o}function _(e,t,o,n,i,a){var s="width"===t?1:0,l=0,c=0;if(o===(n?"border":"content"))return 0;for(;s<4;s+=2)"margin"===o&&(c+=$L.css(e,"margin"+r[s],!0,i)),n?("content"===o&&(c-=$L.css(e,"padding"+r[s],!0,i)),"margin"!==o&&(c-=$L.css(e,"border"+r[s]+"Width",!0,i))):(c+=$L.css(e,"padding"+r[s],!0,i),"padding"!==o?c+=$L.css(e,"border"+r[s]+"Width",!0,i):l+=$L.css(e,"border"+r[s]+"Width",!0,i));return!n&&0<=a&&(c+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-a-c-l-.5))),c}function g(e,t,r){var o=v(e),n=y(e,t,o),i="border-box"===$L.css(e,"boxSizing",!1,o),a=i;if(c.test(n)){if(!r)return n;n="auto"}return a=a&&($L._meta.support.reliableBoxSizing()||n===e.style[t]),"auto"!==n&&(parseFloat(n)||"inline"!==$L.css(e,"display",!1,o))||(n=e["offset"+t[0].toUpperCase()+t.slice(1)],a=!0),(n=parseFloat(n)||0)+_(e,t,r||(i?"border":"content"),a,o,n)+"px"}function b(e,t,r){var o,n={};for(o in t)n[o]=e.style[o],e.style[o]=t[o];for(o in r=r.call(e),t)e.style[o]=n[o];return r}$L.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},(function(e,t){var r="pageYOffset"===t;lyteDomObj.prototype[e]=function(o){return $L._processInput(this,e,o,(function(e,o,n){var i;return $L.isWindow(e)?i=e:9===e.nodeType&&(i=e.defaultView),null==n?i?i[t]:e[o]:void(i?i.scrollTo(r?i.pageXOffset:n,r?n:i.pageYOffset):e[o]=n)}))}})),$L.each({Height:"height",Width:"width"},(function(e,t){$L.each({padding:"inner"+e,content:t,"":"outer"+e},(function(r,o){lyteDomObj.prototype[o]=function(n,i){var a=r||(!0===n||!0===i?"margin":"border");return $L._processInput(this,t,"boolean"!=typeof n?n:void 0,(function(t,r,n){var i;return $L.isWindow(t)?0===o.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(i=t.documentElement,Math.max(t.body["scroll"+e],i["scroll"+e],t.body["offset"+e],i["offset"+e],i["client"+e])):void 0===n?$L.css(t,r,a):$L.style(t,r,n,a)}))}}))})),$L.texthighlighter=function(e,t,r,o,n){var i=new RegExp(t,"gi"),a=document.createDocumentFragment();if(r=r||"span",0<t.length){var s=e.match(i),l=0;for(l=0;s&&l<s.length;l++){var c,d=e.indexOf(s[l]),p=s[l];(c=e.slice(0,d)).length&&a.appendChild(document.createTextNode(c));var u=document.createElement(r);u.innerText=p,a.appendChild(u),e=e.slice(d+s[l].length)}}return e.length&&(c=e.slice(0,e.length))&&a.appendChild(document.createTextNode(c)),a},lyteDomObj.prototype.extend({path:function(){for(var e,t,r=this[0],o=[];r&&1===r.nodeType&&"BODY"!==r.tagName;){if(e=1,t="",t+=r.nodeName.toLowerCase(),r.id)t+="#"+r.id;else{for(;r.previousElementSibling;)r=r.previousElementSibling,e++;t+=":nth-child("+e+")"}o.unshift(t),r=r.parentNode}return o.join(" > ")},closest:function(e,t){var r=0,o=this.length,n=[];if(!$L.needsContext.test(e))for(;r<o;r++){var i=this[r];do{if(1===i.nodeType&&$L(i).is(e)){n.push(i);break}}while((i=i.parentNode)&&i!==t)}return $L._removeDupes(n,!1,this)},css:function(e,t){return $L._processInput(this,e,t,(function(e,t,r){var o=0,n={};if(Array.isArray(t)){for(;o<t.length;o++)n[t[o]]=$L.css(e,t[o]);return n}return null!=r?$L.style(e,t,r):$L.css(e,t)}))},removeProp:function(e){return $L.each(this,(function(){delete this[$L.propNames[e]||e]}))},removeAttr:function(e){return $L.each(this,(function(t,r){$L.removeAttr(r,e)}))},attr:function(e,t){return $L._processInput(this,e,t,$L.attr)},prop:function(e,t){return $L._processInput(this,e,t,$L.prop)},siblings:function(e){var t=$L.map(this,(function(t,r){for(var o=[],n=t.parentElement.children,i=0;i<n.length;i++)t!==n[i]&&1===n[i].nodeType&&$L._checkMatch(n[i],e)&&o.push(n[i]);return o}));return $L._removeDupes(t,!1,this)},children:function(e){var t=$L.map(this,(function(t,r){for(var o=[],n=t.children,i=n.length,a=0;a<i;a++)1===n[a].nodeType&&$L._checkMatch(n[a],e)&&o.push(n[a]);return o}));return this.pushStack(t)},prevUntil:function(e,t,r){var o=$L.map(this,(function(o,n){var i=[];for(r&&$L._checkMatch(o,t)&&i.push(o);o=o.previousSibling;){if(1===o.nodeType&&$L(o).is(e)){r&&$L._checkMatch(o,t)&&i.push(o);break}1===o.nodeType&&$L._checkMatch(o,t)&&i.push(o)}return i}));return $L._removeDupes(o,!0,this)},nextUntil:function(e,t,r){var o=$L.map(this,(function(o,n){var i=[];for(r&&$L._checkMatch(o,t)&&i.push(o);o=o.nextSibling;){if(1===o.nodeType&&$L(o).is(e)){r&&$L._checkMatch(o,t)&&i.push(o);break}1===o.nodeType&&$L._checkMatch(o,t)&&i.push(o)}return i}));return $L._removeDupes(o,!1,this)},parentsUntil:function(e,t){var r=$L.map(this,(function(r,o){for(var n=[];(r=r.parentNode)&&(1!==r.nodeType||!$L(r).is(e));)1===r.nodeType&&$L._checkMatch(r,t)&&n.push(r);return n}));return $L._removeDupes(r,!0,this)},parents:function(e){var t=$L.map(this,(function(t,r){for(var o=[];(t=t.parentNode)&&9!==t.nodeType;)1===t.nodeType&&$L._checkMatch(t,e)&&o.push(t);return o}));return $L._removeDupes(t,!0,this)},parent:function(e){var t=$L.map(this,(function(t,r){return(t=t.parentNode)&&11!==t.nodeType&&$L._checkMatch(t,e)?t:null}));return $L._removeDupes(t,!1,this)},offsetParent:function(){return this.map((function(e,t){for(var r=t.offsetParent;r&&"static"===$L.css(r,"position");)r=r.offsetParent;return r||document.documentElement}))},offset:function(e){if(arguments.length)return void 0===e?this:this.each((function(t,r){$L.offset.setOffset(r,e,t)}));var t,r=this[0];return r?r.getClientRects().length?(t=r.getBoundingClientRect(),r=r.ownerDocument.defaultView,{top:t.top+r.pageYOffset,left:t.left+r.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,r,o=this[0],n={top:0,left:0};if("fixed"===$L.css(o,"position"))t=o.getBoundingClientRect();else{for(t=this.offset(),r=o.ownerDocument,e=o.offsetParent||r.documentElement;e&&(e===r.body||e===r.documentElement)&&"static"===$L.css(e,"position");)e=e.parentNode;e&&e!==o&&1===e.nodeType&&((n=$L(e).offset()).top+=parseFloat($L.css(e,"borderTopWidth",!0)),n.left+=parseFloat($L.css(e,"borderLeftWidth",!0)))}return{top:t.top-n.top-parseFloat($L.css(o,"marginTop",!0)),left:t.left-n.left-parseFloat($L.css(o,"marginLeft",!0))}}},next:function(e){var t=$L.map(this,(function(t,r){for(;(t=t.nextSibling)&&1!=t.nodeType;);return t&&1===t.nodeType&&$L._checkMatch(t,e)?t:null}));return this.pushStack(t)},nextAll:function(e){var t=$L.map(this,(function(t,r){for(var o=[];(t=t.nextSibling)&&1===t.nodeType&&$L._checkMatch(t,e)&&o.push(t),t;);return o}));return $L._removeDupes(t,!1,this)},prev:function(e){var t=$L.map(this,(function(t,r){for(;(t=t.previousSibling)&&1!=t.nodeType;);return t&&1===t.nodeType&&$L._checkMatch(t,e)?t:null}));return this.pushStack(t)},prevAll:function(e){var t=$L.map(this,(function(t,r){for(var o=[];(t=t.previousSibling)&&1===t.nodeType&&$L._checkMatch(t,e)&&o.push(t),t;);return o}));return $L._removeDupes(t,!0,this)},contents:function(){var e=$L.map(this,(function(e){return e.nodeName&&"iframe"===e.nodeName.toLowerCase()?e.contentDocument:(e.nodeName&&"template"===e.nodeName.toLowerCase()&&(e=e.content||e),$L.merge([],e.childNodes))}));return this.pushStack(e)},toggleClass:function(e,t){var r,o,n,i;return $L.isFunction(e)?this.each((function(r,o){$L(o).toggleClass(e.call(o,r,m(o),t),t)})):"boolean"==typeof t?(t?this.addClass(e):this.removeClass(e),this):"string"==typeof t?(i=[].slice.call(arguments),this.toggleClass(i)):$L.each(this,(function(t,i){if(1===i.nodeType)if("string"==typeof e||Array.isArray(e)){var a=h(e);if(a.length)for(r=0;r<a.length;r++)(o=$L(i)).hasClass(a[r])?o.removeClass(a[r]):o.addClass(a[r])}else(n=m(i))&&$L._dataPriv.set(i,"__classname__",n),n||!1===e?i.setAttribute("class",""):i.setAttribute("class",$L._dataPriv.get(i,"__classname__"))}))},addClass:function(e){var t,r,o,n,i=this,a=this.length;if($L.isFunction(e))return i.each((function(t,r){$L(r).addClass(e.call(r,t,m(r)))}));if(1<arguments.length)return n=[].slice.call(arguments),this.addClass(n);for(o=h(e),t=0;t<a;t++)if(1===i[t].nodeType)for(r=0;r<o.length;r++)"string"==typeof o[r]&&o[r]&&(i[t].classList?i[t].classList.add(o[r]):i[t].className+=" "+o[r]);return this},removeClass:function(e){var t,r,o,n=this,i=this.length,a=0,s=0,l=!1;if($L.isFunction(e))return n.each((function(t,r){$L(r).removeClass(e.call(r,t,m(r)))}));if(!arguments.length)return this.attr("class","");if(1<arguments.length)return t=[].slice.call(arguments),this.removeClass(t);for(r=h(e),a=0;a<i;a++)if(1===n[a].nodeType){for(o=" "+(o=m(n[a]))+" ",s=0;s<r.length;s++)"string"==typeof r[s]&&r[s]&&(n[a].classList?n[a].classList.remove(r[s]):(l=!0,o.replace(" "+r[s]+" "," ")));l&&(n[a].setAttribute("class",o),l=!1)}return this},hasClass:function(e){var t,r=this.length;for(e=" "+e+" ",t=0;t<r;t++)if(1===this[t].nodeType&&-1!==(" "+m(this[t])+" ").indexOf(e))return!0;return!1},val:function(e){var r,o,n,i=this[0];if(void 0!==e)return o=$L.isFunction(e),this.each((function(t,r){null==(t=o?e.call(r,t,$L(r).val()):e)?t="":"number"==typeof t?t+="":Array.isArray(t)&&(t=$L.map(t,(function(e){return null==e?"":e+""}))),(r=$L.valHooks[this.type]||$L.valHooks[this.tagName.toLowerCase()])&&"set"in r&&void 0!==r.set(this,t,"value")||(this.value=t)}));if(i){if((n=$L.valHooks[i.type]||$L.valHooks[i.nodeName.toLowerCase()])&&"get"in n&&void 0!==(r=n.get(i,"value")))return r;r=i.value}return"string"==typeof r?r.replace(t,""):null==r?"":r}}),$L.cssHooks={borderWidth:{set:E},padding:{set:E},marginLeft:{get:function(e,t){if(t&&!$L._meta.support.reliableMarginLeft())return e.getBoundingClientRect().left-b(e,{marginLeft:0},(function(){return e.getBoundingClientRect().left}))+"px"}},opacity:{get:function(e,t){if(t)return""===(e=y(e,"opacity"))?"1":e}}};var A={position:"absolute",visibility:"hidden",display:"block"};function E(e,t,r){var o=s.exec(t);return o?Math.max(0,o[2]-(r||0))+(o[3]||"px"):t}$L.each(["top","left"],(function(e,t){$L.cssHooks[t]={get:function(e,r){if(r&&!$L._meta.support.reliablePixelPosition())return r=y(e,t),c.test(r)?$L(e).position()[t]+"px":r}}})),$L.each(["width","height"],(function(e,t){$L.cssHooks[t]={get:function(e,r,o){if(r)return!l.test($L.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?g(e,t,o):b(e,A,(function(){return g(e,t,o)}))},set:function(e,r,o){var n,i=o&&v(e),a=o&&"border-box"===$L.css(e,"boxSizing",!1,i);return(i=o&&_(e,t,o,a,i))&&(n=s.exec(r))&&"px"!==(n[3]||"px")&&(e.style[t]=r,r=$L.css(e,t)),E(0,r,i)}}})),$L.offset={setOffset:function(e,t,r){var o,n,i,a,s=$L.css(e,"position"),l=$L(e),c={};return"static"===s&&l.css("position","relative"),i=l.offset(),o=$L.css(e,"top"),a=$L.css(e,"left"),a=("absolute"===s||"fixed"===s)&&-1<(o+a).indexOf("auto")?(n=(s=l.position()).top,s.left):(n=parseFloat(o)||0,parseFloat(a)||0),null!=(t=$L.isFunction(t)?t.call(e,r,$L.extend({},i)):t).top&&(c.top=t.top-i.top+n),null!=t.left&&(c.left=t.left-i.left+a),l.css("top",c.top),l.css("left",c.left),l}},$L.extend({cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},propNames:{cellpadding:"cellPadding",cellspacing:"cellSpacing",class:"className",colspan:"colSpan",contenteditable:"contentEditable",for:"htmlFor",frameborder:"frameBorder",maxlength:"maxLength",readonly:"readOnly",rowspan:"rowSpan",tabindex:"tabIndex",usemap:"useMap"},attrHooks:{type:{set:function(e,t){if(!$L._meta.support.radioValue&&f(e,"input")&&"radio"===t){var r=e.value;return e.setAttribute(type,t),r&&(e.value=r),t}}}},removeAttr:function(e,t){var r,o=0;for(t=t&&t.match($L.regex.rnothtmlwhite)||[];r=t[o++];)e.removeAttribute(r)},style:function(e,t,r,o){var n,a,l=i.test(t),c=typeof r;e&&1===e.nodeType&&(n=e.style,a=$L.cssHooks[t]||$L.cssHooks[r],"string"===c&&(ret=s.exec(r))&&ret[1]&&(r=function(e,t,r){var o,n;return e=parseFloat((n=e,e=t,$L.css(n,e))),r&&r[3]||$L.cssNumber[t],r&&(o=e||0,o=r[1]?o+(r[1]+1)*r[2]:+r[2]),o}(e,t,ret),c="number"),"number"===c&&(r+=$L.cssNumber[t]?"":"px"),r=a&&"set"in a?a.set(e,r,o):r,l?n.setProperty(e,r):n[t]=r)},css:function(e,t,r,o){var n,i=$L._camelCase(t);return"normal"===(n=void 0===(n=(i=$L.cssHooks[t]||$L.cssHooks[i])&&"get"in i?i.get(e,!0,r):n)?y(e,t,o):n)&&t in d&&(n=d[t]),r?parseFloat(n)||0:n},attr:function(e,t,r){var o,n;return t=t.toLowerCase(),o=$L.attrHooks[t]||p.test(t)&&u,void 0!==r?null===r?void $L.removeAttr(e,t):o&&"set"in o&&void 0!==(n=o.set(e,t,r))?n:(e.setAttribute(t,r+""),r):o&&"get"in o&&null!==(n=o.get(e,t))||null!=(n=e.getAttribute(t))?n:void 0},prop:function(e,t,r){var o,n;return t=$L.propNames[t]||t,o=$L.propHooks[t],void 0===r?o&&"get"in o&&void 0!==(n=o.get(e,t))?n:e[t]:o&&"set"in o&&void 0!==(n=o.set(e,r,t))?n:e[t]=r},valHooks:{checkbox:{set:function(e,t){Array.isArray(t)&&(e.checked=-1<$L.inArray($L(e).val(),t))},get:function(e){null===e.getAttribute("value")||e.value}},radio:{set:function(e,t){if(Array.isArray(t))return e.checked=-1<$L.inArray($L(e).val(),t)},get:function(e){return null===e.getAttribute("value")?"on":e.value}},select:{get:function(e){for(var t,r=e.options,o=e.selectedIndex,n="select-one"===e.type,i=n?null:[],a=n?o+1:r.length,s=o<0?a:n?o:0;s<a;s++)if(((t=r[s]).selected||s===o)&&!t.disabled&&(!t.parentNode.disabled||!f(t.parentNode,"optgroup"))){if(t=$L(t).val(),n)return t;i.push(t)}return i},set:function(e,t){for(var r,o,n=e.options,i=$L.makeArray(t),a=n.length;a--;)((o=n[a]).selected=-1<$L.inArray($L.valHooks.option.get(o),i))&&(r=!0);return r||(e.selectedIndex=-1),i}},option:{get:function(e){var t=$L.attr(e,"value");return null!=t?t:($L(e).text().match($L.regex.rnothtmlwhite)||[]).join(" ")}}}}),$L.propHooks={tabIndex:{get:function(e){var t=e.getAttribute("tabindex");return t?parseInt(t,10):o.test(e.nodeName)||n.test(e.nodeName)&&e.href?0:-1}}}}(null==window?this:window),function(e){var t=[],r="initial",o=/^key/,n=/^(?:mouse|pointer|contextmenu|drag|drop)|click/;function i(){for(var e;e=t.shift();)e.call()}function a(e,t,r,o,n,i){var a;return"function"!=typeof(r="boolean"==typeof r?d:r)?e:(a=r,(r=i?function(e){for(var t=e.delegateTarget,o=$L._dataPriv.get(t),n=e.type,i=o.events[n],s=0;s<i.length;s++)if(i[s].handler===r){i.splice(s,1);break}!function(e){for(var t in e)if(0<e[t].length)return;return 1}(o.events)||t.removeEventListener(n,o.handle),a.apply(this,arguments)}:r).unId||(r.unId=$L.ev.unId++),$L.each(e,(function(e,i){var a,s,l=$L._dataPriv.get(i);l.events||(l.events={});var c,d=(c=t.match($L.regex.rnothtmlwhite)).length;for((s=l.handle)||(l.handle=s=function(e){$L.ev.triggered!==e.type&&$L.ev.dispatch.apply(i,arguments)});d--;)a=c[d],l.events[a]||(l.events[a]=[]),l.events[a].push({handler:r,type:a,selectors:o,data:n}),i.addEventListener(a,s)})))}function s(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType}function l(e){e.stopPropagation()}function c(){return!0}$L.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],(function(e,t){lyteDomObj.prototype[t]=function(e){return this.on(t,e)}})),lyteDomObj.prototype.ready=function(e){return t.push(e),"initial"===r&&"ready"!==document.readyState&&"complete"!==document.readyState?(r="registered",document.addEventListener("DOMContentLoaded",(function(){i()}))):"ready"!==document.readyState&&"complete"!==document.readyState||i(),this},$L.each(["blur","focus","focusin","focusout","resize","bindScroll","click","dblclick","mousedown","mouseup","mousemove","mouseover","mouseout","mouseenter","mouseleave","change","select","submit","keydown","keypress","keyup","contextmenu"],(function(e,t){lyteDomObj.prototype[t]=function(e,r){var o="bindScroll"===t?"scroll":t;return 0<arguments.length?this.on(o,null,e,r):this.trigger(o)}})),$L.debounce=function(e,t,r){function o(){function o(){i=e.apply(s,a)}var i,a=arguments,s=this;return!t&&r?o():(n&&clearTimeout(n),n=setTimeout(o,t)),i}var n;return o.cancel=function(){clearTimeout(n),n=null},o},lyteDomObj.prototype.extend({on:function(e,t,r,o){return $L.ev.add(this,e,t,r,o)},one:function(e,t,r,o){return $L.ev.add(this,e,t,r,o,!0)},off:function(e,t,r){var o,n;if(e.preventDefault&&e.handleObj)return n=e.handleObj,$L(e.delegateTarget).off(e.type,n.selector,n.handler),this;if("object"!=typeof e)return!1!==t&&"function"!=typeof t||(r=t,t=void 0),!1===r&&(r=d),$L.each(this,(function(){$L.ev.removeEvents(this,e,t,r)}));for(o in e)this.off(o,t,e[o]);return this},trigger:function(e,t){return this.each((function(r,o){$L.ev.trigger(e,t,o)}))},triggerHandler:function(e,t){var r=this[0];if(r)return $L.ev.trigger(e,t,r,!0)}}),$L.ev={unId:1,removeEvents:function(e,t,r,o){var n,i,a,s,l,c,d,p=$L._dataPriv.hasData(e)&&$L._dataPriv.get(e),u=(p||{}).events,f=0;if(u){for(a=(n=(t||"").match($L.regex.rnothtmlwhite)||[]).length;f<a;f++){for(l=u[s=n[f]]||[],i=0;i<l.length;i++)d=(c=l[i]).handler,r&&r!==c.selector&&("**"!==r||!c.selector)||o&&d.unId!==o.unId||(l.splice(i,1),i--);l.length||(e.removeEventListener(s,p.handle),delete u[s])}$L.isEmptyObject(u)&&$L._dataPriv.remove(e,"events handle")}},add:function(e,t,r,o,n,i){if("object"!=typeof t)return null==o&&null==n?a(e,t,r,void 0,void 0,i):null==n?"string"==typeof r?a(e,t,o,r,void 0,i):a(e,t,o,void 0,r,i):a(e,t,n,r,o,i);if("string"==typeof r)for(var s in t)$L.ev.add(e,s,r,o,t[s],i);else for(s in t)$L.ev.add(e,s,void 0,r,t[s],i);return e},trigger:function(t,r,o,n){var i,a,c,d,p=[o||document],u=0,f="string"==typeof t?t:t.type,h=(r=void 0===r?[]:r,c=o=o||document),m=o.parentNode,v="on"+(f=(t=t[$L.expando]?t:new $L.Event(f,"object"==typeof t&&t)).type);if(t.target||(t.target=o),i=$L.merge([t],r),d=$L.ev.special[f]||{},n||!d.trigger||!1!==d.trigger.apply(o,r)){if(!n&&!d.noBubble&&!$L.isWindow(o)){for(;m;m=m.parentNode)p.push(m),h=m;h===(o.ownerDocument||document)&&p.push(h.defaultView||h.parentWindow||e)}for(;(m=p[u++])&&!t.isPropagationStopped();)c=m,(a=($L._dataPriv.get(m,"events")||{})[f]&&$L._dataPriv.get(m,"handle"))&&a.apply(m,i),(a=v&&m[v])&&a.apply&&s(m)&&(t.result=a.apply(m,i),!1===t.result&&t.preventDefault());return n||t.isDefaultPrevented()||d._default&&!1!==d._default.apply(p.pop(),i)||!s(o)||v&&$L.isFunction(o[f])&&!$L.isWindow(o)&&((h=o[v])&&(o[v]=null),$L.ev.triggered=f,t.isPropagationStopped()&&c.addEventListener(f,l),o[f](),t.isPropagationStopped()&&c.removeEventListener(f,l),$L.ev.triggered=void 0,h&&(o[v]=h)),t.result}},addProp:function(e,t){Object.defineProperty($L.Event.prototype,e,{enumerable:!0,configurable:!0,get:$L.isFunction(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},dispatch:function(e){var t,r,o,n,i,a,s,l,c=e.expando?e:new $L.Event(e),d=$L._dataPriv.get(this).events[c.type],p=[],u=[],f={context:this,handler:[]};for(c.delegateTarget=this,p[0]=c,t=1;t<arguments.length;t++)p[t]=arguments[t];for(t=0;t<d.length;t++)if(o=(r=d[t]).handler,n=r.selectors,l=r.data,!n||"click"===c.type&&1<=c.button)"click"===c.type&&1<=c.button||f.handler.push(r);else for(i=e.target;i!==this;i=i.parentNode)1!==i.nodeType||"click"===e.type&&!0===i.disabled||$L._matches(i,n)&&(c.currentTarget=i,u.push({context:i,handler:[r]}));for(u.push(f),t=0;t<u.length&&!c.isPropagationStopped();t++)for(o=u[t].handler,a=u[t].context,c.currentTarget=a,i=0;i<o.length&&!c.isImmediatePropagationStopped();i++)s=o[i].handler,l=o[i].data,c.data=l,c.handleObj=o[i],s=s.apply(a,p),!1===(c.result=s)&&(c.preventDefault(),c.stopPropagation());return c.result},triggered:void 0,special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==document.activeElement&&this.focus)return this.focus(),!1}},blur:{trigger:function(){if(this!==document.activeElement&&this.blur)return this.blur(),!1}},click:{trigger:function(){if("input"===this.nodeName.toLowerCase()&&"checkbox"===this.type&&this.click)return this.click(),!1}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}};var d=function(){return!1};$L.Event=function(e,t){if(this===$L)return new $L.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented?c:d,this.target=e.target):this.type=e,t&&$L.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[$L.expando]=!0},$L.Event.prototype={constructor:$L.event,isDefaultPrevented:d,isPropagationStopped:d,isImmediatePropagationStopped:d,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=c,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=c,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=c,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},$L.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var t=e.button;return null==e.which&&o.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&void 0!==t&&n.test(e.type)?1&t?1:2&t?3:4&t?2:0:e.which}},$L.ev.addProp)}(null==window?this:window),function(e){var t,r=/^(HEAD|GET)$/,o=/\?/,n=new Date,i=/(.*?):\s*(.*?)[\r\n]/g,a=/#.*$/,s=/([?&])_=[^&]*/;function l(e){var t=[];return $L.each(e,(function(){var e,r;e=this.name,r=this.value,r=$L.isFunction(r)?r():r,t[t.length]=encodeURIComponent(e)+"="+encodeURIComponent(r)})),t.join("&")}function c(e){return"string"==typeof e?e:(Array.isArray(e)?l:function(e){var t,r=[];for(t in e)r[r.length]=encodeURIComponent(t)+"="+encodeURIComponent(null==e[t]?"":e[t]);return r.join("&")})(e)}function d(e){return"text"!==(e.responseType||"text")||"string"!=typeof e.responseType}function p(e,t,r){for(var o;o=e.shift();)o.apply(t,r)}"undefined"!=typeof document&&((t=document.createElement("a")).href=e.location.href),$L.extend({active:0,ajaxSettings:{contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/,script:/\b(?:java|ecma)script\b/},converters:{"* text":String,"text text":function(e){return e},"text html":function(e){return e},"text json":JSON.parse,"text xml":$L.parseXML,"text javascript":$L.Evaluate},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},accepts:{"*":"*/*",text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript",script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"}},ajaxSetup:function(e){for(var t in e)$L.ajaxSettings[t]=e[t]},ajax:function(e,l){"object"==typeof e&&(e=(l=e).url),function(e){var t,r=["accepts","converters","contents","headers"],o=$L.ajaxSettings;for(t in o)~r.indexOf(t)?function(e,t){for(var r in t)r=r.toLowerCase(),e.hasOwnProperty(r)||(e[r]=t[r])}(e[t]||(e[t]={}),o[t]):e[t]=(null==e[t]?o:e)[t]}(l=l||{}),l.url||(l.url=e);var u,f,h,m,v,y,_,g,b,A,E,C,L=[],$=[],P=[],w=l.xhr,R=(l.type||"GET").toUpperCase(),N=r.test(R),O=l.context||l,T=l.context&&(l.context instanceof lyteDomObj||l.nodeType)?$L(l.context):$L.ev,k=l.beforeSend,x="cancelled",S={},D={readyState:0,setRequestHeader:function(e,t){return null==_&&t&&(S[e]=t),this},overrideMimeType:function(e){return null==_&&(l.mimeType=e),this},getAllResponseHeaders:function(){return _?m:null},getResponseHeader:function(e){var t;if(_){if(!v)for(v={};t=i.exec(m);)v[t[1].toLowerCase()]=t[2];return(t=v[e.toLowerCase()])||null}},abort:function(e){return e=e||x,j&&j.abort(),I(0,e),this},then:function(e,t){return L.push(e),$.push(t),l.async||(A?p(L,O,[E,this.statusText,this]):p($,O,[this,this.statusText,C])),this},fail:function(e){return $.push(e),l.async||A||p($,O,[this,this.statusText,C]),this},always:function(e){return P.push(e),l.async||p(P,O,[this,this.statusText]),this},done:function(e){return L.push(e),!l.async&&A&&p(L,O,[E,this.statusText,this]),this}};if(l.dataTypes=(l.dataType||"*").toLowerCase().match($L.regex.rnothtmlwhite),u=l.async="boolean"!=typeof l.async||l.async,f=l.global="boolean"!=typeof l.global||l.global,y=l.processData="boolean"!=typeof l.processData||l.processData,t&&null==l.crossDomain){b=document.createElement("a");try{b.href=l.url,b.href=b.href,l.crossDomain=b.protocol+"//"+b.host!=t.protocol+"//"+t.host}catch(e){l.crossDomain=!0}}for(h in e=l.url.replace(a,""),y&&(N?(y=l.url.slice(e.length),l.data&&(e=function(e,t){return t=c(t),e+(o.test(e)?"&":"?")+t}(e,l.data)),!1===l.cache&&(e=e.replace(s,"$1"),y=(o.test(e)?"&":"?")+"_="+n+++y),l.url=e+y):l.data&&(l.data=c(l.data))),$L.ev&&f&&0==$L.active++&&$L.ev.trigger("ajaxStart"),(l.data&&!N&&!1!==l.contentType||l.contentType)&&D.setRequestHeader("Content-Type",l.contentType||"application/x-www-form-urlencoded; charset=UTF-8"),l.headers)D.setRequestHeader(h,l.headers[h]);if(D.setRequestHeader("Accept",l.dataTypes[0]&&l.accepts[l.dataTypes[0]]?l.accepts[l.dataTypes[0]]+("*"!==l.dataTypes[0]?",*/*; q=0.01":""):l.accepts["*"]),k&&(!1===k.call(O,D,l)||_))return D.abort();if(x="abort",l.success&&L.push(l.success),l.error&&$.push(l.error),l.complete&&P.push(l.complete),D.readyState=1,T&&T.trigger&&f&&T.trigger("ajaxSend",[D,l]),_)return D;var j=w||new XMLHttpRequest;for(g in j.open(R,l.url,u),l.xhrFields)j[g]=l.xhrFields[g];for(h in l.mimeType&&D.overrideMimeType(l.mimeType),l.crossDomain||S["X-Requested-With"]||(S["X-Requested-With"]="XMLHttpRequest"),S)j.setRequestHeader(h,S[h]);function I(e,t,r,o,n){var i=t;_||(_=!0,m=o||"",D.readyState=0<e?4:0,(A=200<=e&&e<300||304===e)?(r=function(e,t,r,o){var n,i,a=t.dataTypes,s=t.contents;if("*"===a[0]&&(n=t.mimeType||r.getResponseHeader("content-type")),n)for(i in s)if(s[i].test(n)){a[0]=i;break}return"*"===a[0]&&(a[0]=o),function(e,t,r,o,n){var i,a,s,l;if(e===t)return{data:r,state:"success"};if("HEAD"!==n.type){for(l in a=e+" "+t,n.converters)if(l.toLowerCase()===a){s=n.converters[l];break}o.responseText=r;try{i=s?s(r):""}catch(e){return{data:void 0,state:"parseerror",error:e}}return $L.ajaxSettings.responseFields[t]&&(o[$L.ajaxSettings.responseFields[t]]=i),{data:i,state:"success"}}}(o,a[0],e,r,t)}(r,l,D,n),304==e?i="notmodified":204==e||"HEAD"==l.type?i="nocontent":(i=r.state,E=r.data,C=r.error,A=!C)):(D.responseText=r,!e&&i||(i="error",e=e<0?0:e),C=i),D.status=e,D.statusText=(i||t)+"",A?0<L.length&&p(L,O,[E,i,D]):0<$.length&&p($,O,[D,i,C]),T&&T.trigger&&f&&T.trigger(A?"ajaxSuccess":"ajaxError",[D,l,A?E:C]),0<P.length&&p(P,O,[D,i]),T&&T.trigger&&f&&(T.trigger("ajaxComplete",[D,l]),$L.ev&&!--$L.active&&$L.ev.trigger("ajaxStop")))}return N=!N&&l.data||null,j.onload=function(){var e=d(j);I(j.status,j.statusText,e?j.response:j.responseText,j.getAllResponseHeaders(),e?"binary":"text")},j.onerror=j.onabort=function(){var e=d(j);I(j.status,j.statusText,e?j.response:j.responseText,j.getAllResponseHeaders(),e?"binary":"text")},l.async&&(j.timeout=l.timeout||0,j.ontimeout=function(){I(0,"timeout")}),j.send(N),D},getScript:function(e,t,r){return $L.get(e,t,r)},getJSON:function(e,t){return $L.get(e,void 0,t)}}),$L.each(["get","post"],(function(e,t){$L[t]=function(e,r,o,n){return $L.isFunction(r)&&(n=n||o,o=r,r=void 0),$L.ajax($L.extend({type:t,url:e,data:r,dataType:n,success:o},$L.isPlainObject(e)&&e))}}))}("undefined"==typeof window?this:window),function(){function e(){var e="reverse",t=document.createElement("div");return t.innerHTML="<div style='position: absolute; left: 0; top: 0; overflow: hidden; width: 10px;height: 1px;'><div style='width: 20px; height: 1px;'></div></div>",t=t.children[0],document.body.appendChild(t),0<t.scrollLeft?e="default":(t.scrollLeft=-5,t.scrollLeft<0&&(e="negative")),document.body.removeChild(t),e}"undefined"!=typeof document&&("ready"!==document.readyState&&"complete"!==document.readyState?document.addEventListener("DOMContentLoaded",(function(){$L.rtlScrollType=e()})):"ready"!==document.readyState&&"complete"!==document.readyState||($L.rtlScrollType=e()))}();var _lyteUiComponentsLocale={"lyte.calendar.previous.month":"Previous Month","lyte.calendar.previous.year":"Previous Year","lyte.calendar.next.month":"Next Month","lyte.calendar.next.year":"Next Year","lyte.calendar.choose.month":"Choose Month","lyte.calendar.choose.year":"Choose Year","lyte.calendar.monthview.drilldown.button":"Open a list of navigatable months","lyte.calendar.decadeview.drilldown.button":"Open a list of navigatable years",January:"January",February:"February",March:"March",April:"April",May:"May",June:"June",July:"July",August:"August",September:"September",October:"October",November:"November",December:"December",Jan:"Jan",Feb:"Feb",Mar:"Mar",Apr:"Apr","short.may":"May",Jun:"Jun",Jul:"Jul",Aug:"Aug",Sep:"Sep",Oct:"Oct",Nov:"Nov",Dec:"Dec",Mon:"Mon",Tue:"Tue",Wed:"Wed",Thu:"Thu",Fri:"Fri",Sat:"Sat",Sun:"Sun",today:"Today",PM:"PM",AM:"AM",hour:"hrs",min:"mins","no.results.found":"No Results Found","Recently.Used.Colors":"Recently Used Colours","Theme.Colors":"Theme Colours","Standard.Colors":"Standard Colours","Advanced.Colors":"Advanced Colours","Back.to.Basic.Colors":"Back to Basic Colours",Close:"Close",Available:"Available",Selected:"Selected","No.Fill":"No Fill","Choose.Color":"Choose Colour","Copy.Color.value.to.Clipboard":"Copy the colour value to the clipboard",yesterday:"Yesterday",thisWeek:"This week",thisMonth:"This month",last7days:"Last 7 days",last30days:"Last 30 days",specificDate:"Specific date",customRange:"Custom Range",Select:"Select","lyte.fileupload.Drag file here or browse to upload":"Drag file here or browse to upload","lyte.fileupload.Attachment failed":"Attachment failed","lyte.fileupload.Retry":"Retry",HEX:"HEX",RGB:"RGB",HSV:"HSV",CMYK:"CMYK",Alpha:"Alpha","Color.value.copied":"Colour value copied","lyte.nav.more.options":"More Options","lyte.avatar.navigator.previous.nav.button":"Previous Navigation","lyte.avatar.navigator.next.nav.button":"Next Navigation","lyte.avatar.navigator.previous.nav.description":"Press this to navigate to previous set of images","lyte.avatar.navigator.next.nav.description":"Press this to navigate to next set of images","lyte.avatar.navigator.description":"This has a set of images with navigatable buttons","lyte.avatar.navigator.images.shown":"Images $0 to $1 shown","lyte.dual.listbox.no.results.found":"No Results Found"};if(window._lyteUiUtils=window._lyteUiUtils||{version:"3.62.1"},window._lyteUiUtils.cboxId=0,window._lyteUiUtils.rbuttonId=0,window._lyteUiUtils.calId=0,function(){var e={};_lyteUiUtils.resolveDefaultValue=function(r,o,n){var i=e[r]||{};return o in i?t(i[o]):n},_lyteUiUtils.registerDefaultValues=function(t){for(var r in t){var o=t[r];e[r]=o}},_lyteUiUtils.getDefault=function(t){return e[t]||{}};var t=function(e){var t={};if("object"!==typeof e)return e;for(var r in e)t[r]=e[r];return t}}(),_lyteUiUtils.getVisibleDropdowns=function(){for(var e,t=document.querySelectorAll("lyte-drop-box:not(.lyteDropdownHidden)"),r=[],o=0;o<t.length;o++)(e=t[o].origindd)&&r.push(e);return r},_lyteUiUtils.closeDropdowns=function(){for(var e=_lyteUiUtils.getVisibleDropdowns()||[],t=0;t<e.length;t++)e[t].close()},_lyteUiUtils.i18n=function(e,t){var r=t?"lyte."+t+"."+e:e,o=_lyteUiComponentsLocale[r||""];return o||e},_lyteUiUtils.getRTL=function(){return null!=this.Rtl&&null!=this.Rtl?this.Rtl:this.Rtl="rtl"==window.getComputedStyle(document.body).getPropertyValue("direction")},_lyteUiUtils.isIos=/ip(hone|ad|od)/i.test(navigator.userAgent)||/macintosh/i.test(navigator.userAgent)&&"ontouchend"in document,_lyteUiUtils.isAndroid=/android/i.test(navigator.userAgent),_lyteUiUtils.isMobile=_lyteUiUtils.isIos||_lyteUiUtils.isAndroid,_lyteUiUtils.escape=function(e){return(e||"").replace(/(\\|\'|\"|\?)/g,"\\$1")},_lyteUiUtils.appendChild=function(e,t){return Lyte.Component&&Lyte.Component.appendChild?Lyte.Component.appendChild(e,t):LyteComponent.appendChild(e,t)},_lyteUiUtils.insertBefore=function(e,t){return Lyte.Component&&Lyte.Component.insertBefore?Lyte.Component.insertBefore(e,t):LyteComponent.insertBefore(e,t)},_lyteUiUtils.dispatchEvent=function(e,t,r){var o={bubbles:!0};o.detail=r||{};var n=new CustomEvent(e,o);return t.dispatchEvent(n)},_lyteUiUtils.insertAfter=function(e,t){return Lyte.Component&&Lyte.Component.insertAfter?Lyte.Component.insertAfter(e,t):LyteComponent.insertAfter(e,t)},_lyteUiUtils.getScrollBarWidth=function(){if(null!=this._scrollwidth)return this._scrollwidth;var e=document.createElement("p");e.style.width="100%",e.style.height="200px";var t=document.createElement("div");t.style.position="absolute",t.style.top="0px",t.style.left="0px",t.style.visibility="hidden",t.style.width="200px",t.style.height="150px",t.style.overflow="hidden",t.appendChild(e),document.body.appendChild(t);var r=e.offsetWidth;t.style.overflow="scroll";var o=e.offsetWidth;return r==o&&(o=t.clientWidth),document.body.removeChild(t),this._scrollwidth=r-o,this._scrollwidth},_lyteUiUtils.replaceWith=function(e,t){return Lyte.Component&&Lyte.Component.replaceWith?Lyte.Component.replaceWith(e,t):LyteComponent.replaceWith(e,t)},_lyteUiUtils.registeredCustomElements=_lyteUiUtils.registeredCustomElements||{},_lyteUiUtils.mergeObjects=function(e,t){var r={};for(var o in t)r[o]=t[o];for(var o in e)o in t||(r[o]=!1);return r},_lyteUiUtils.setAttribute=function(e,t,r){var o=_lyteUiUtils.mergeObjects(r,t);for(var n in o)!1===o[n]?e.removeAttribute(n):e.setAttribute(n,o[n])},_lyteUiUtils.updateAria=function(e,t,r,o){var n=e.tagName.toLowerCase().replace(/^lyte\-/,""),i={"radiobutton-group":"updateAriaArray"}[n];if(i)e[i](t,r);else if(e.ltProp){var a={breadcrumb:"ariaValue",step:"ariaValue"}[n];if(a)return e.ltProp(a,t);Lyte.objectUtils(e.ltProp(o||{}[n]||"ariaAttributes")||{},null!=r?"add":"delete",t,r)}else $L(e).attr(t,r)},_lyteUiUtils.trapFocus=function(e,t){var r,o=t||LytePopup.components[LytePopup.components.length-1].actualModalDiv;if(0!=(r=$L(o.querySelectorAll('a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, [tabindex]:not([tabindex="-1"]), *[contenteditable]')).filter((function(e,t){return $L(t).is(":visible")&&-1!=t.tabIndex&&!t.disabled}))).length)if(t)r.length>1&&(r[0].classList.contains("lyteModalClose")||r[0].classList.contains("lytePopoverClose"))?r[1].focus():r[0].focus();else{var n=document.activeElement;if(o.contains(n)){var i,a=r.length;for(l=0;l<r.length;l++)if(r[l]==n){i=l;break}e.shiftKey?0==i&&(r.get(a-1).focus(),e.preventDefault()):i==a-1&&(r.get(0).focus(),e.preventDefault())}else if(o.classList.contains("lyteModal")||o.classList.contains("lytePopover"))_lyteUiUtils.trapFocus(null,o);else if(o.classList.contains("alertPopup"))for(var s=o._callee.ltProp("buttons"),l=0;l<s.length;l++)if("accept"==s[l].type){o.querySelectorAll("button")[l].focus();break}}},_lyteUiUtils.getBrowser=function(){return navigator.userAgent.search("rv:11")>=0?"ie":navigator.userAgent.search("Edge")>=0?"edge":navigator.userAgent.search("Chrome")>=0?"chrome":navigator.userAgent.search("Firefox")>=0?"firefox":navigator.userAgent.search("Safari")>=0&&navigator.userAgent.search("Chrome")<0?"safari":void 0},_lyteUiUtils.isNegativeScroll=function(){if(null!=this._negativeScrollChrome)return this._negativeScrollChrome;var e,t=document.body.appendChild($L("<div style='position: absolute; left: 0; top: 0; overflow: hidden; width: 10px;height: 1px;'><div style='width: 20px; height: 1px;'></div></div>").get(0));return t.scrollLeft=-5,e=t.scrollLeft<0,document.body.removeChild(t),this._negativeScrollChrome=e,e},_lyteUiUtils.getCorrectNumberCode=function(e){return e>=96&&e<=105?e-48:e},_lyteUiUtils.capitalize=function(e){return(e||"").replace(/^./,(function(e){return e.toUpperCase()}))},Lyte.Component.registerHelper("lyteUiReturnOnlyKey",(function(e){var t=Object.keys(e);return!!t&&t[0]})),Lyte.Component.registerHelper("lyteUiReturnOnlyValue",(function(e){return e[Object.keys(e)[0]]})),Lyte.Component.registerHelper("lyteUiGetLinearIndex",(function(e,t,r){return e[4*t+r]})),Lyte.Component.registerHelper("lyteUiSetURL",(function(e,t){return t?e:""})),Lyte.Component.registerHelper("lyteUiCheckEmpty",(function(e){return e&&e[0].emptyBlock&&e[6].emptyBlock})),Lyte.Component.registerHelper("lyteUiDisableCalendarNav",(function(e,t){var r,o,n=e.getFullYear(),i=e.getMonth(),a=this.component.isYYFormat(),s=this.component.isHavingTimezone,l=s?Number($L.moment().format("YYYY")):(new Date).getFullYear();if(o=a?{minYear:l-(r=s?$L.moment():{uL:19,lL:80}).lL,maxYear:l+r.uL}:{minYear:1900,maxYear:2100},"previous"===t&&n===o.minYear&&0===i||"next"===t&&n===o.maxYear&&11===i)return"lyteCalDisableNav"})),Lyte.Component.registerHelper("lyteUiI18n",(function(e,t){return _lyteUiUtils.i18n(e,t)})),Lyte.Component.registerHelper("lyteUiI18nWithArgs",(function(){var e,t,r=arguments[0]||"",o=Array.from(arguments);return o.shift(),t=o,e=_lyteUiComponentsLocale[r]||"",t.forEach((function(t,r){var o="$"+r;e=e.replace(o,t)})),e})),Lyte.Component.registerHelper("lyteUiOptGroupCheck",(function(e){if(e.constructor==Object&&1==Object.keys(e).length){var t=e[Object.keys(e)[0]];if(t.constructor==Object||t.constructor==Array)return!0}return!1})),Lyte.Component.registerHelper("lyteUiCheckForType",(function(e,t,r,o){if(o){var n=0,i=0;for(var a in e)i++,a==t&&n++,a==r&&n++;return 2!=n&&1==i}return"object"==typeof e})),Lyte.Component.registerHelper("lyteListBoxIndex",(function(e,t){return t||0===t?t+" "+e:e})),Lyte.Component.registerHelper("lyteListBoxParentIndex",(function(e,t,r){return t[r]?t[r]:""})),Lyte.Component.registerHelper("lyteListBoxChildIndexId",(function(e){return"lyteLBLeftChildWrap_"+e})),Lyte.Component.registerHelper("lyteUiChildPadding",(function(e){return"Arrow"===e?"padding-left:20px;":"Plus"===e?"padding-left:25px;":"padding-left:27px;"})),Lyte.Component.registerHelper("lyteUiHaveChildren",(function(e,t){return!!(e[t]&&e[t].length>0)})),Lyte.Component.registerHelper("lyteUiIsObject",(function(e){return"[object Object]"===Object.prototype.toString.call(e)})),Lyte.Component.registerHelper("lyteUiIsArray",(function(e){return"[object Array]"===Object.prototype.toString.call(e)})),Lyte.Component.registerHelper("lyteUiGiveProper",(function(e,t){for(var r=[],o=0;o<e.length;o++)e[o].menu==t&&r.push(e[o]);return r})),Lyte.Component.registerHelper("lyteUiAddClassModal",(function(e,t,r){var o=e;return r&&(o+=" draggable"),t&&(o+=" "+e+"Show"),o})),Lyte.Component.registerHelper("lyteUiAddShowClass",(function(e,t,r){return!0===e?t+" "+r:t})),Lyte.Component.registerHelper("lyteUiCatwise",(function(e,t){return e==t[this.get("ltPropCategory")]})),Lyte.Component.registerHelper("lyteUiCheckClassForDate",(function(e){return!!e&&-1!=e.indexOf("lyteCalGray")})),Lyte.Component.registerHelper("lyteUiConcat",(function(){for(var e="",t=arguments.length,r=0;r<t;r++)null!=arguments[r]&&(e+=arguments[r]);return e})),Lyte.Component.registerHelper("lyteUiConcatTypeClass",(function(e,t,r){return""!==e?e+t+" "+r:r})),Lyte.Component.registerHelper("lyteUiGetContainerClass",(function(e,t){return t||(t=""),1==e?"lyteDropdownContainer tick-selection "+t:"lyteDropdownContainer "+t})),Lyte.Component.registerHelper("lyteUiGetDropdownClass",(function(e){return e&&"true"==e.toString().toLowerCase()?"lyteDropdownElement1 lyteDropdown-disabled":"lyteDropdownElement1"})),Lyte.Component.registerHelper("lyteUiIfEquals",(function(e,t){return e===t})),Lyte.Component.registerHelper("lyteUiLabelCheck",(function(e,t){return e==t})),Lyte.Component.registerHelper("lyteUiObjectCheck",(function(e){return"string"==typeof e})),Lyte.Component.registerHelper("lyteUiReturnValueBy",(function(e,t){return t||0==t?e[t]:e})),Lyte.Component.registerHelper("lyteUiSetWH",(function(e){return 2*parseInt(e)})),Lyte.Component.registerHelper("lyteUiSetRadius",(function(e,t){return parseInt(e)-parseInt(t)/2})),Lyte.Component.registerHelper("lyteUiSetDashArray",(function(e,t){return 6.28318*(parseInt(e)-parseInt(t)/2)})),Lyte.Component.registerHelper("lyteUiSetOffset",(function(e,t,r){return 6.28318*(parseInt(e)-parseInt(t)/2)*(1-parseInt(r)/100)})),Lyte.Component.registerHelper("lyteUiTextTransform",(function(e){return"translate(0,-"+2*parseInt(e)+"px)"})),Lyte.Component.registerHelper("lyteUiMakeSortable",(function(e){return console.log(e),document.getElementById(e).classList.add("sortable"),!0})),Lyte.Component.registerHelper("lyteUiCheckTabPosition",(function(e){return"bottom"!==e.pos})),Lyte.Component.registerHelper("lyteUiGetValue",(function(e,t){return e[t]})),Lyte.Component.registerHelper("lyteUiIsEmptyArray",(function(e){return 0==e.length})),Lyte.Component.registerHelper("lyteUiRgbToHex",(function(e){var t="#";if(/rgba/.test(e)){for(var r=e.substring(5,e.length-1).split(","),o=0;o<3;o++){(n=parseInt(r[o]).toString(16).toUpperCase()).length<2&&(n="0"+n),t+=n}t+=(Math.round(255*parseFloat(r[3]))+65536).toString(16).substr(-2).toUpperCase()}else if(/rgb/.test(e))for(r=e.substring(4,e.length-1).split(","),o=0;o<3;o++){var n;(n=parseInt(r[o]).toString(16).toUpperCase()).length<2&&(n="0"+n),t+=n}return t})),Lyte.Component.registerHelper("lyteUiCPInsertBreak",(function(e){return(e+1)%10==0})),Lyte.Component.registerHelper("lyteUiCheckInRange",(function(e,t,r,o){var n=this.component;if(t=t||"",""===(e=e||"")&&""===t)return!0;if(""!==e&&""===t){var i=n.stringToDate(e,o);if((s=n.stringToDate(r,o))>=i)return!0}else if(""!==e&&""!==t){i=n.stringToDate(e,o);var a=n.stringToDate(t,o);if((s=n.stringToDate(r,o))>=i&&s<=a)return!0}else{var s;a=n.stringToDate(t,o);if((s=n.stringToDate(r,o))<=a)return!0}return!1})),Lyte.Component.registerHelper("lyteUiIsEmptyObject",(function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0})),Lyte.Component.registerHelper("lyteUiCheckDisabled",(function(e,t){for(var r=0;r<e.length;r++)if(t===e[r])return"true";return"false"})),Lyte.Component.registerHelper("lyteUiTreeLevelHelp",(function(e,t){return""!==e?(e+" "+t++).split(" ").length-1:0})),Lyte.Component.registerHelper("lyteUiTreeMaxLevelHelp",(function(e,t,r){return(e+" "+t++).split(" ").length<=r})),Lyte.Component.registerHelper("lyteUiTreeClassHelp",(function(e,t,r,o){return"open"!==e&&t?o:r})),Lyte.Component.registerHelper("lyteTreeMaxChild",(function(e,t,r){return(e+" "+t++).split(" ").length-1>=r?"lyteTreeMaxedChild":""})),Lyte.Component.registerHelper("lyteUiTreeIndexHelp",(function(e,t){return(e+" "+t++).trim()})),Lyte.Component.registerHelper("lyteTreeAriaTabIndexHelp",(function(e,t){var r=(e+" "+t++).trim();return 1===r.length&&"0"===r?0:-1})),Lyte.Component.registerHelper("lyteUiTreeHasChildHelp",(function(e,t){var r=e.collapsed;return(!e[t]||e[t].length<1)&&(r=!0),e.hasChild&&r?"lyteTreeHasChild":""})),Lyte.Component.registerHelper("lyteTreeAriaTabIndexHelp",(function(e,t){var r=(e+" "+t++).trim();return 1===r.length&&"0"===r?"0":"-1"})),Lyte.Component.registerHelper("lyteUiTreeChildHelp",(function(e,t,r){return void 0!==e[r]&&0!==e[r].length||e.hasChild?"":t+" lyteTreeLastChild"})),Lyte.Component.registerHelper("lyteTreeAriaRole",(function(e,t){return void 0!==e[t]&&0!==e[t].length||e.hasChild?"group":"treeitem"})),Lyte.Component.registerHelper("lyteTreeDataType",(function(e){return"object"==typeof e&&Array.isArray(e)?"array":typeof e})),Lyte.Component.registerHelper("lyteTreeGetArrayLength",(function(e){return e.length})),Lyte.Component.registerHelper("lyteHTreeTopVline",(function(e,t){return 0===e?"lyteHTreeVerticalConnectorHidden":""})),Lyte.Component.registerHelper("lyteHTreeBottomVline",(function(e,t){return e===t.length-1?"lyteHTreeVerticalConnectorHidden":""})),Lyte.Component.registerHelper("stringify",(function(e){return JSON.stringify(e)})),Lyte.Component.registerHelper("lyteUiConcatAlertClass",(function(e,t){return("center"==e?"lyteAlertCenterContent":"")+" "+t})),Lyte.Component.registerHelper("lyteUiSetIndexString",(function(e,t){return e+1+" of "+t})),Lyte.Component.registerHelper("lyteUiRTL",(function(){return _lyteUiUtils.getRTL()})),Lyte.Component.registerHelper("lyteIsIos",(function(){return _lyteUiUtils.isIos})),Lyte.Component.registerHelper("lyteIsAndroid",(function(){return _lyteUiUtils.isAndroid})),Lyte.Component.registerHelper("lyteUiGetMonthOrYear",(function(e,t){return e=e||"","M"==t?e.split(" ")[0]:e.split(" ")[1]})),Lyte.Component.registerHelper("lyteUiDisplayOrHide",(function(e){return"rgba(0, 0, 0, 0)"==e?"lyteColorPicker__colorpan lyteColorPicker__hide":"lyteColorPicker__colorpan"})),Lyte.Component.registerHelper("lyteUiMsgBoxConcatClass",(function(e,t,r,o){return""!==t?e+" "+t+r+" "+o:e+" "+o})),Lyte.Component.registerHelper("lyteUiFileSize",(function(e,t,r){var o=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],n=0;return 0==(n=t?Math.max(n,o.indexOf(t)):Math.floor(Math.log(e)/Math.log(1e3)))&&1==e?"1 Byte":parseInt(e/Math.pow(1e3,n)*Math.pow(10,r))/Math.pow(10,r)+" "+o[n]})),Lyte.Component.registerHelper("lyteUiAddClassRating",(function(e,t,r){var o="";return"{{dummy}}"!=e.className&&(o=e.className),t&&(o+=" "+t),r?-1==o.indexOf("lyteRatingReadOnly")&&(o+=" lyteRatingReadOnly"):-1!=o.indexOf("lyteRatingReadOnly")&&(o=o.replace("lyteRatingReadOnly","")),o})),Lyte.Component.registerHelper("lyteUiGetArrayValueByIndex",(function(e,t){return e[t%e.length]})),Lyte.Component.registerHelper("lyteUiIfEqualsAny",(function(){var e=arguments[0];for(i=1;i<arguments.length;i++)if(e==arguments[i])return!0;return!1})),Lyte.Component.registerHelper("lyteUiGetNextArrayValueByIndex",(function(e,t){return e[t+1]})),Lyte.Component.registerHelper("lyteUiArrayLastIndex",(function(e){return e.length-1})),Lyte.Component.registerHelper("lyteUiGetViewBox",(function(e){return"heart"===e?"1.5 0.5 20 20":"star"===e?"5.5 2.5 23 23":"0 0 21 21"})),Lyte.Component.registerHelper("lyteUiGetFillOrStroke",(function(e,t,r){return"heart"===e||"star"===e?"; fill:"+t+";":"lineStar"===e||"lineHeart"===e?"; fill:transparent;; stroke:"+(r||t)+";":"; stroke:"+(r||t)+";"})),Lyte.Component.registerHelper("lyteUiCheckHalfRatingSvg",(function(e,t){return!!(e&&t>0&&t<1)})),Lyte.Component.registerHelper("lyteUiProgressbarLabel",(function(e,t,r){return e||t+(r?"%":"")})),Lyte.Component.registerHelper("lyteUiGetStackValue",(function(e,t,r){return t<e.length&&e[t][r]})),Lyte.Component.registerHelper("lyteUiAttribute",(function(e,t){return t&&e||!1})),Lyte.Component.registerHelper("lyteUiAddPE",(function(e){return"noColor"===e?"lyteColorPicker__pe":""})),Lyte.Component.registerHelper("lyteUiClockPairNumber",(function(e){return 1==e.length&&(e=0+e),e})),Lyte.Component.registerHelper("lyteUiDateRPHeaderClass",(function(e){return"dropdown"!=e?"lyteDateRPMonthHeader lyteDateRPStringHeader":"lyteDateRPMonthHeader"})),Lyte.Component.registerHelper("lyteUiSetAlphaLabel",(function(e){return e||_lyteUiUtils.i18n("Alpha")})),Lyte.Component.registerHelper("lyteUiRowLength",(function(e){var t=this.getData("sum");return e=parseInt(e,10),this.setData("sum",t+e),e&&e<12&&e>0&&t<=12})),Lyte.Component.registerHelper("lyteUiImageFile",(function(e){return!(!e.src||"image"!==e.fileType)})),Lyte.Component.registerHelper("lyteUiIsInArray",(function(e,t,r){t=t||[];for(var o=0;o<t.length;o++)if(t[o][r]===e[r])return!0;return!1})),Lyte.Component.registerHelper("lyteUiCapitalizeName",(function(e){return _lyteUiUtils.capitalize(e)})),!LytePopup){var LytePopup={components:[],bodywrapperCount:0,onEscape:function(e){e=e||window.event;var t=!1,r=!1,o=!1,n=document.activeElement;"key"in e?(t="Escape"==e.key||"Esc"==e.key,r="Tab"==e.key,o="Enter"==e.key):(t=27==e.keyCode,r=9==e.keyCode,o=13==e.keyCode),t&&LytePopup.closePopup(void 0,!0,e),r&&LytePopup.components.length>0&&LytePopup.trapFocus(e),o&&n&&(n.classList.contains("alertClose")||n.classList.contains("lyteModalClose")||n.classList.contains("lytePopoverClose"))&&n.click()},bindDocumentKeydown:function(){document.addEventListener("keydown",LytePopup.onEscape,!0)},checkAndRemoveWrapper:function(){var e=Array.from(document.querySelectorAll(".lyteAlertOpened")).concat(Array.from(document.querySelectorAll(".lyteModalOpened")),Array.from(document.querySelectorAll(".lytePopoverOpened")));if(0==e.length)document.body.classList.remove("bodyWrapper");else{for(var t=0;t<e.length;t++)if(e[t].ltProp("freeze"))return;document.body.classList.remove("bodyWrapper")}},hideOrShowFreeze:function(e,t,r){var o,n="",i="",a="",s="";if("open"==e&&LytePopup.components.length>1){for(var l=LytePopup.components.length-2;l>=0;l--)if(n="LYTE-MODAL"==LytePopup.components[l].$node.tagName?"lyte-modal-freeze":"LYTE-POPOVER"==LytePopup.components[l].$node.tagName?"lyte-popover-freeze":".alertFreezeLayer",i="LYTE-MODAL"==t.$node.tagName?"lyte-modal-freeze":"LYTE-POPOVER"==t.$node.tagName?"lyte-popover-freeze":".alertFreezeLayer",a=LytePopup.components[l].childComp.querySelector(n),s=t.childComp.querySelector(i),o=t.getData("ltPropDimmer")&&t.getData("ltPropDimmer").opacity?t.getData("ltPropDimmer").opacity:"",a&&s){a.style.transition="none",s.style.transition="none",a.style.zIndex=15,a.style.opacity=0,s.style.visibility="visible",s.style.opacity=o,setTimeout(LytePopup.removeTransition,100,s,a),a.style.zIndex="",t.addedFreezeDetails=!0;break}}else if("close"==e&&LytePopup.components.length>1&&LytePopup.components[LytePopup.components.length-1]===t)for(l=LytePopup.components.length-2;l>=0;l--){if(n="LYTE-MODAL"==LytePopup.components[l].$node.tagName?"lyte-modal-freeze":"LYTE-POPOVER"==LytePopup.components[l].$node.tagName?"lyte-popover-freeze":".alertFreezeLayer",i="LYTE-MODAL"==t.$node.tagName?"lyte-modal-freeze":"LYTE-POPOVER"==t.$node.tagName?"lyte-popover-freeze":".alertFreezeLayer",a=LytePopup.components[l].childComp.querySelector(n),s=t.childComp.querySelector(i),o=LytePopup.components[l].getData("ltPropDimmer")&&LytePopup.components[l].getData("ltPropDimmer").opacity?LytePopup.components[l].getData("ltPropDimmer").opacity:"",a&&s){s.style.transition="none",a.style.transition="none",a.style.zIndex=15,s.style.opacity=0,a.style.visibility="visible",a.style.opacity=o,setTimeout(LytePopup.removeTransition,100,s,a),a.style.zIndex="",s.style.visibility="";break}if(a&&r){a.style.transition="none",a.style.zIndex=15,a.style.visibility="visible",a.style.opacity=o,setTimeout(LytePopup.removeTransition,100,s,a),a.style.zIndex="";break}}},removeTransition:function(e,t){e&&(e.style.transition=""),t&&(t.style.transition="")},addPopup:function(e){LytePopup.closePopup();var t=LytePopup.components.length;if(t>0){var r,o="",n="";o="LYTE-MODAL"==LytePopup.components[t-1].$node.tagName?".modalWrapper":"LYTE-POPOVER"==LytePopup.components[t-1].$node.tagName?".popoverWrapper":".alertWrapper",n="LYTE-MODAL"==e.$node.tagName?".modalWrapper":"LYTE-POPOVER"==e.$node.tagName?".popoverWrapper":".alertWrapper";var i=e.childComp.querySelector(n);(r=Number(document.defaultView.getComputedStyle(LytePopup.components[LytePopup.components.length-1].childComp.querySelector(o),null).getPropertyValue("z-index")))+2>Number(document.defaultView.getComputedStyle(i,null).getPropertyValue("z-index"))&&(i.style.zIndex=r+2)}LytePopup.components[t]=e,(e.getData("ltPropFreeze")||"LYTE-ALERT"==e.$node.tagName)&&LytePopup.hideOrShowFreeze("open",e)},closePopup:function(e,t,r){if(t){var o=LytePopup.components[LytePopup.components.length-1];o&&o.$node.ltProp("closeOnEscape")&&(o.$node.setData("escClicked",r),o.$node.ltProp("show",!1))}else if(e){var n=LytePopup.components.indexOf(e);n>-1&&LytePopup.components.splice(n,1)}else for(var i=LytePopup.components.length-1;i>=0;i--){if(LytePopup.components[i].$node&&!LytePopup.components[i].$node.ltProp("allowMultiple"))LytePopup.components[i].$node.ltProp("show",!1)}},getScrollParent:function(e){var t=e instanceof HTMLElement&&window.getComputedStyle(e).overflowY,r="visible"!==t&&"hidden"!==t,o=e&&r?e.scrollHeight:0,n=e&&r?e.clientHeight:0;return e?r&&o>n?e:LytePopup.getScrollParent(e.parentNode)||document.body:null},trapFocus:function(e,t){var r,o=t||LytePopup.components[LytePopup.components.length-1].actualModalDiv;if(0!=(r=$L(o.querySelectorAll('a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, [tabindex]:not([tabindex="-1"]), *[contenteditable]')).filter((function(e,t){return $L(t).is(":visible")&&-1!=t.tabIndex&&!t.disabled}))).length)if(t)r.length>1&&(r[0].classList.contains("lyteModalClose")||r[0].classList.contains("lytePopoverClose"))?r[1].focus():r[0].focus();else{var n,i=document.activeElement;if(!o.contains(i)&&((n=$L(i).closest("lyte-drop-box")[0])&&(n=n.origindd),!o.contains(n)))return LytePopup.initializeFocus(o),void(e&&e.preventDefault());for(var a,s=r.length,l=0;l<r.length;l++)if(r[l]==i){a=l;break}e.shiftKey?0==a&&(r.get(s-1).focus(),e.preventDefault()):a==s-1&&(r.get(0).focus(),e.preventDefault())}},initializeFocus:function(e){if(e.classList.contains("lyteModal")||e.classList.contains("lytePopover"))LytePopup.trapFocus(null,e);else if(e.classList.contains("alertPopup"))for(var t=e._callee.ltProp("buttons"),r=0;r<t.length;r++)if("accept"==t[r].type){e.querySelectorAll("button")[r].focus();break}},transitionEnd:function(e){if(e.target==this&&LytePopup.components.length>0){var t=LytePopup.components[LytePopup.components.length-1],r=t.actualModalDiv;!t.getData("ltPropPreventFocus")&&LytePopup.initializeFocus(r),this.removeEventListener("transitionend",LytePopup.transitionEnd)}},bindTransitionEnd:function(e){e&&e.addEventListener("transitionend",LytePopup.transitionEnd)}};LytePopup.bindDocumentKeydown()}var ratingNum=0;_lyteUiUtils.convert_diacritics=function(e){return[{value:"A",regex:/[\u0041\u24B6\uFF21\u00C0\u00C1\u00C2\u1EA6\u1EA4\u1EAA\u1EA8\u00C3\u0100\u0102\u1EB0\u1EAE\u1EB4\u1EB2\u0226\u01E0\u00C4\u01DE\u1EA2\u00C5\u01FA\u01CD\u0200\u0202\u1EA0\u1EAC\u1EB6\u1E00\u0104\u023A\u2C6F]/g},{value:"AA",regex:/[\uA732]/g},{value:"AE",regex:/[\u00C6\u01FC\u01E2]/g},{value:"AO",regex:/[\uA734]/g},{value:"AU",regex:/[\uA736]/g},{value:"AV",regex:/[\uA738\uA73A]/g},{value:"AY",regex:/[\uA73C]/g},{value:"B",regex:/[\u0042\u24B7\uFF22\u1E02\u1E04\u1E06\u0243\u0182\u0181]/g},{value:"C",regex:/[\u0043\u24B8\uFF23\u0106\u0108\u010A\u010C\u00C7\u1E08\u0187\u023B\uA73E]/g},{value:"D",regex:/[\u0044\u24B9\uFF24\u1E0A\u010E\u1E0C\u1E10\u1E12\u1E0E\u0110\u018B\u018A\u0189\uA779]/g},{value:"DZ",regex:/[\u01F1\u01C4]/g},{value:"Dz",regex:/[\u01F2\u01C5]/g},{value:"E",regex:/[\u0045\u24BA\uFF25\u00C8\u00C9\u00CA\u1EC0\u1EBE\u1EC4\u1EC2\u1EBC\u0112\u1E14\u1E16\u0114\u0116\u00CB\u1EBA\u011A\u0204\u0206\u1EB8\u1EC6\u0228\u1E1C\u0118\u1E18\u1E1A\u0190\u018E]/g},{value:"F",regex:/[\u0046\u24BB\uFF26\u1E1E\u0191\uA77B]/g},{value:"G",regex:/[\u0047\u24BC\uFF27\u01F4\u011C\u1E20\u011E\u0120\u01E6\u0122\u01E4\u0193\uA7A0\uA77D\uA77E]/g},{value:"H",regex:/[\u0048\u24BD\uFF28\u0124\u1E22\u1E26\u021E\u1E24\u1E28\u1E2A\u0126\u2C67\u2C75\uA78D]/g},{value:"I",regex:/[\u0049\u24BE\uFF29\u00CC\u00CD\u00CE\u0128\u012A\u012C\u0130\u00CF\u1E2E\u1EC8\u01CF\u0208\u020A\u1ECA\u012E\u1E2C\u0197]/g},{value:"J",regex:/[\u004A\u24BF\uFF2A\u0134\u0248]/g},{value:"K",regex:/[\u004B\u24C0\uFF2B\u1E30\u01E8\u1E32\u0136\u1E34\u0198\u2C69\uA740\uA742\uA744\uA7A2]/g},{value:"L",regex:/[\u004C\u24C1\uFF2C\u013F\u0139\u013D\u1E36\u1E38\u013B\u1E3C\u1E3A\u0141\u023D\u2C62\u2C60\uA748\uA746\uA780]/g},{value:"LJ",regex:/[\u01C7]/g},{value:"Lj",regex:/[\u01C8]/g},{value:"M",regex:/[\u004D\u24C2\uFF2D\u1E3E\u1E40\u1E42\u2C6E\u019C]/g},{value:"N",regex:/[\u004E\u24C3\uFF2E\u01F8\u0143\u00D1\u1E44\u0147\u1E46\u0145\u1E4A\u1E48\u0220\u019D\uA790\uA7A4]/g},{value:"NJ",regex:/[\u01CA]/g},{value:"Nj",regex:/[\u01CB]/g},{value:"O",regex:/[\u004F\u24C4\uFF2F\u00D2\u00D3\u00D4\u1ED2\u1ED0\u1ED6\u1ED4\u00D5\u1E4C\u022C\u1E4E\u014C\u1E50\u1E52\u014E\u022E\u0230\u00D6\u022A\u1ECE\u0150\u01D1\u020C\u020E\u01A0\u1EDC\u1EDA\u1EE0\u1EDE\u1EE2\u1ECC\u1ED8\u01EA\u01EC\u00D8\u01FE\u0186\u019F\uA74A\uA74C]/g},{value:"OI",regex:/[\u01A2]/g},{value:"OO",regex:/[\uA74E]/g},{value:"OU",regex:/[\u0222]/g},{value:"P",regex:/[\u0050\u24C5\uFF30\u1E54\u1E56\u01A4\u2C63\uA750\uA752\uA754]/g},{value:"Q",regex:/[\u0051\u24C6\uFF31\uA756\uA758\u024A]/g},{value:"R",regex:/[\u0052\u24C7\uFF32\u0154\u1E58\u0158\u0210\u0212\u1E5A\u1E5C\u0156\u1E5E\u024C\u2C64\uA75A\uA7A6\uA782]/g},{value:"S",regex:/[\u0053\u24C8\uFF33\u1E9E\u015A\u1E64\u015C\u1E60\u0160\u1E66\u1E62\u1E68\u0218\u015E\u2C7E\uA7A8\uA784]/g},{value:"T",regex:/[\u0054\u24C9\uFF34\u1E6A\u0164\u1E6C\u021A\u0162\u1E70\u1E6E\u0166\u01AC\u01AE\u023E\uA786]/g},{value:"TZ",regex:/[\uA728]/g},{value:"U",regex:/[\u0055\u24CA\uFF35\u00D9\u00DA\u00DB\u0168\u1E78\u016A\u1E7A\u016C\u00DC\u01DB\u01D7\u01D5\u01D9\u1EE6\u016E\u0170\u01D3\u0214\u0216\u01AF\u1EEA\u1EE8\u1EEE\u1EEC\u1EF0\u1EE4\u1E72\u0172\u1E76\u1E74\u0244]/g},{value:"V",regex:/[\u0056\u24CB\uFF36\u1E7C\u1E7E\u01B2\uA75E\u0245]/g},{value:"VY",regex:/[\uA760]/g},{value:"W",regex:/[\u0057\u24CC\uFF37\u1E80\u1E82\u0174\u1E86\u1E84\u1E88\u2C72]/g},{value:"X",regex:/[\u0058\u24CD\uFF38\u1E8A\u1E8C]/g},{value:"Y",regex:/[\u0059\u24CE\uFF39\u1EF2\u00DD\u0176\u1EF8\u0232\u1E8E\u0178\u1EF6\u1EF4\u01B3\u024E\u1EFE]/g},{value:"Z",regex:/[\u005A\u24CF\uFF3A\u0179\u1E90\u017B\u017D\u1E92\u1E94\u01B5\u0224\u2C7F\u2C6B\uA762]/g},{value:"a",regex:/[\u0061\u24D0\uFF41\u1E9A\u00E0\u00E1\u00E2\u1EA7\u1EA5\u1EAB\u1EA9\u00E3\u0101\u0103\u1EB1\u1EAF\u1EB5\u1EB3\u0227\u01E1\u00E4\u01DF\u1EA3\u00E5\u01FB\u01CE\u0201\u0203\u1EA1\u1EAD\u1EB7\u1E01\u0105\u2C65\u0250]/g},{value:"aa",regex:/[\uA733]/g},{value:"ae",regex:/[\u00E6\u01FD\u01E3]/g},{value:"ao",regex:/[\uA735]/g},{value:"au",regex:/[\uA737]/g},{value:"av",regex:/[\uA739\uA73B]/g},{value:"ay",regex:/[\uA73D]/g},{value:"b",regex:/[\u0062\u24D1\uFF42\u1E03\u1E05\u1E07\u0180\u0183\u0253]/g},{value:"c",regex:/[\u0063\u24D2\uFF43\u0107\u0109\u010B\u010D\u00E7\u1E09\u0188\u023C\uA73F\u2184]/g},{value:"d",regex:/[\u0064\u24D3\uFF44\u1E0B\u010F\u1E0D\u1E11\u1E13\u1E0F\u0111\u018C\u0256\u0257\uA77A]/g},{value:"dz",regex:/[\u01F3\u01C6]/g},{value:"e",regex:/[\u0065\u24D4\uFF45\u00E8\u00E9\u00EA\u1EC1\u1EBF\u1EC5\u1EC3\u1EBD\u0113\u1E15\u1E17\u0115\u0117\u00EB\u1EBB\u011B\u0205\u0207\u1EB9\u1EC7\u0229\u1E1D\u0119\u1E19\u1E1B\u0247\u025B\u01DD]/g},{value:"f",regex:/[\u0066\u24D5\uFF46\u1E1F\u0192\uA77C]/g},{value:"g",regex:/[\u0067\u24D6\uFF47\u01F5\u011D\u1E21\u011F\u0121\u01E7\u0123\u01E5\u0260\uA7A1\u1D79\uA77F]/g},{value:"h",regex:/[\u0068\u24D7\uFF48\u0125\u1E23\u1E27\u021F\u1E25\u1E29\u1E2B\u1E96\u0127\u2C68\u2C76\u0265]/g},{value:"hv",regex:/[\u0195]/g},{value:"i",regex:/[\u0069\u24D8\uFF49\u00EC\u00ED\u00EE\u0129\u012B\u012D\u00EF\u1E2F\u1EC9\u01D0\u0209\u020B\u1ECB\u012F\u1E2D\u0268\u0131]/g},{value:"j",regex:/[\u006A\u24D9\uFF4A\u0135\u01F0\u0249]/g},{value:"k",regex:/[\u006B\u24DA\uFF4B\u1E31\u01E9\u1E33\u0137\u1E35\u0199\u2C6A\uA741\uA743\uA745\uA7A3]/g},{value:"l",regex:/[\u006C\u24DB\uFF4C\u0140\u013A\u013E\u1E37\u1E39\u013C\u1E3D\u1E3B\u017F\u0142\u019A\u026B\u2C61\uA749\uA781\uA747]/g},{value:"lj",regex:/[\u01C9]/g},{value:"m",regex:/[\u006D\u24DC\uFF4D\u1E3F\u1E41\u1E43\u0271\u026F]/g},{value:"n",regex:/[\u006E\u24DD\uFF4E\u01F9\u0144\u00F1\u1E45\u0148\u1E47\u0146\u1E4B\u1E49\u019E\u0272\u0149\uA791\uA7A5]/g},{value:"nj",regex:/[\u01CC]/g},{value:"o",regex:/[\u006F\u24DE\uFF4F\u00F2\u00F3\u00F4\u1ED3\u1ED1\u1ED7\u1ED5\u00F5\u1E4D\u022D\u1E4F\u014D\u1E51\u1E53\u014F\u022F\u0231\u00F6\u022B\u1ECF\u0151\u01D2\u020D\u020F\u01A1\u1EDD\u1EDB\u1EE1\u1EDF\u1EE3\u1ECD\u1ED9\u01EB\u01ED\u00F8\u01FF\u0254\uA74B\uA74D\u0275]/g},{value:"oi",regex:/[\u01A3]/g},{value:"ou",regex:/[\u0223]/g},{value:"oo",regex:/[\uA74F]/g},{value:"p",regex:/[\u0070\u24DF\uFF50\u1E55\u1E57\u01A5\u1D7D\uA751\uA753\uA755]/g},{value:"q",regex:/[\u0071\u24E0\uFF51\u024B\uA757\uA759]/g},{value:"r",regex:/[\u0072\u24E1\uFF52\u0155\u1E59\u0159\u0211\u0213\u1E5B\u1E5D\u0157\u1E5F\u024D\u027D\uA75B\uA7A7\uA783]/g},{value:"s",regex:/[\u0073\u24E2\uFF53\u00DF\u015B\u1E65\u015D\u1E61\u0161\u1E67\u1E63\u1E69\u0219\u015F\u023F\uA7A9\uA785\u1E9B]/g},{value:"t",regex:/[\u0074\u24E3\uFF54\u1E6B\u1E97\u0165\u1E6D\u021B\u0163\u1E71\u1E6F\u0167\u01AD\u0288\u2C66\uA787]/g},{value:"tz",regex:/[\uA729]/g},{value:"u",regex:/[\u0075\u24E4\uFF55\u00F9\u00FA\u00FB\u0169\u1E79\u016B\u1E7B\u016D\u00FC\u01DC\u01D8\u01D6\u01DA\u1EE7\u016F\u0171\u01D4\u0215\u0217\u01B0\u1EEB\u1EE9\u1EEF\u1EED\u1EF1\u1EE5\u1E73\u0173\u1E77\u1E75\u0289]/g},{value:"v",regex:/[\u0076\u24E5\uFF56\u1E7D\u1E7F\u028B\uA75F\u028C]/g},{value:"vy",regex:/[\uA761]/g},{value:"w",regex:/[\u0077\u24E6\uFF57\u1E81\u1E83\u0175\u1E87\u1E85\u1E98\u1E89\u2C73]/g},{value:"x",regex:/[\u0078\u24E7\uFF58\u1E8B\u1E8D]/g},{value:"y",regex:/[\u0079\u24E8\uFF59\u1EF3\u00FD\u0177\u1EF9\u0233\u1E8F\u00FF\u1EF7\u1E99\u1EF5\u01B4\u024F\u1EFF]/g}].forEach((function(t){e=e.replace(t.regex,t.value)})),e};var context="/";Lyte.setConfig("stateHandling",!0);var pplclienturl=pplclienturl||"/people5/pplclient/";Lyte.Router.configureDefaults({baseURL:"",history:"hash",slashAfterHash:!1,execRouteRequirementsOnDemand:!1,deferInit:!0}),Lyte.Router.configureRoutes((function(){this.route("people",{path:"/"}),this.route("legacy",{path:"/*wildcard"})})),Lyte.Router.beforeRouteTransition=function(e,t,r){void 0===e&&(this.isRefresh=!0),this.isRefresh&&"people"==t.info.route&&(location.hash="#"+Layout.HashUtil.LANDING_HASH)},Lyte.Router.afterRouteTransition=function(e){this.isRefresh&&(this.isRefresh=!1)},Lyte.addEventListener("onBeforeInject",(function(e){if(e.tag.src){var t=e.tag.src.replace(pplclienturl,""),r=ZPLyte.getDigestForResource(t);r&&(e.tag.setAttribute("integrity","sha384-"+r),e.tag.setAttribute("crossorigin","anonymous"))}}));var ZPLyte={loadedResources:{},fingerprintDigestMap:{},container:void 0,wrapperID:"lite_pageWrapper",topMenuObj:{},zpURLObj:{zpurl:!0,skipmodel:!0},sendPostRequest:function(e,t,r,o,n){return t[csrfParamName]=csrfToken,$L.post("/"+portalName+"/"+e,t,(function(e){null!=r&&r(e,t,o)})).fail((function(e){null!=n&&n(e,t,o)}))},getResource:function(e){var t=[];for(let o of e)if(Layout.PageUtil.isFileNotLoaded(o))if(-1==o.indexOf("/")){var r=ZPLyte.getResourcePath(o);t.push(r),Layout.PageUtil.addLoadedFile(o)}else t.push(getResourceURL(o)),Layout.PageUtil.addLoadedFile(o);return t},getResourcePath:function(e){var t=e.split("."),r=t[t.length-1],o="";return"js"==r?o="compressed/js/":"css"==r?o="compressed/css/":"png"!=r&&"jpg"!=r||(o="images/"),o+=e,CDNUtil.isCompressionEnabled?(o="people5/"+o,"js"==r&&ZPLyte.mapDigestToFingerprint(o,e)):o="/people5/dist/"+o,getResourceURL(o)},mapDigestToFingerprint:function(e,t){ZPLyte.fingerprintDigestMap[t]=getResourceChecksum(e)},getDigestForResource:function(e){return ZPLyte.fingerprintDigestMap[e]}};Lyte.Component.registerHelper("i18n",(function(e,t){return ZPI18N.getString(e,t)})),Lyte.Router.registerRoute("legacy",{model:function(e){return Lyte.Router.isRefresh?ZPeople.initZP():Layout.Page.getPage()},actions:{}}),Lyte.Router.registerRoute("people",{getResources:function(e){return ZPLyte.getResource(["lyte_dependencies_min.css"])},getDependencies:function(e){return ZPLyte.getResource(["lyte_components.js","helpers_min.js"])},model:function(e){return Lyte.Router.isRefresh?ZPeople.initZP():Layout.Page.getPage()},afterModel:function(e,t){},actions:{onBeforeLoad:function(e){}}}),store.registerModel("application",{response:Lyte.attr("object",{primaryKey:!0})}),store.registerAdapter("application",{namespace:"lite",headersForRequest:function(e,t,r,o,n){return{"X-ZCSRF-TOKEN":csrfParamName+"="+csrfToken}},buildURL:function(e,t,r,o,n,i,a){return a&&a.zpurl&&(n=n.replace(this.namespace,portalName),n+=".zp"),n},methodForRequest:function(e,t,r,o,n,i){return e},parseResponse:function(e,t,r,o,n,i,a,s,l){return o}}),store.registerSerializer("application",{normalizeResponse:function(e,t,r,o,n,i,a,s,l){return s&&s.skipmodel?{res:{response:r}}:r},payloadKey:function(e,t,r,o,n,i){return n&&n.skipmodel?"res":e}});