var ZPUserProfile={};ZPUserProfile.Page={userPage:{},actionPermission:{},URLBUCKET:[],pageConfiguration:{profile:{callback:()=>ZPUserProfile.ProfileView.show,param:{},initLoading:!0,wcagDesc:ZPI18N.getString("zp.wcag.profiletabpage"),loadFile:["profileview.min.js","framework.operations.employee.min.js"]},reportees:{callback:()=>ZPeople.Team.init,param:"userprofile",firescrollcallback:()=>ZPeople.Team.profileFirescroll,isTriggered:!0},department:{callback:()=>ZPUserProfile.Team.init,initLoading:!0},peers:{callback:()=>ZPeople.Team.init,param:"peerView",firescrollcallback:()=>ZPeople.Team.profileFirescroll,isTriggered:!0},relatedtabs:{callback:()=>ZPUserProfile.RelatedTab.show,initLoading:!0,loadFile:["relatedtabs.min.js"]},feedback:{callback:()=>FeedBack.Search.init,initLoading:!0,loadFile:["pms.util.min.js","pms.feedback.min.js"]},usertimelogs:{callback:()=>Timetracker.UserSpace.Timelogs.init,initLoading:!0,loadFile:["timely.1.min.js","timetracker5_0.3.min.js"]},usertimesheets:{callback:()=>Timetracker.UserSpace.Timesheets.init,initLoading:!0,loadFile:["timely.1.min.js","timetracker5_0.3.min.js"]},userjobs:{callback:()=>Timetracker.UserSpace.Jobs.init,initLoading:!0,loadFile:["timely.1.min.js","timetracker5_0.3.min.js"]},actionlist:{callback:()=>ActionList.Card.init,firescrollcallback:()=>ActionList.Card.getMoreCard,firescrollparam:{mode:"ACTIONLIST"},initLoading:!0,wcagDesc:ZPI18N.getString("zp.wcag.activitiespage"),loadFile:["compensation.common.min.js","empShiftMapping.min.js","actionlist.min.js","timely.1.min.js","timetracker5_0.3.min.js"]},approval:{callback:()=>ApprovalList.approvalAction,firescrollcallback:()=>ApprovalList.approvalFireScrollAction},goals:{callback:()=>goalWidget.init,firescrollcallback:()=>goalWidget.fireScroll,firescrollparam:{mode:"PA_USERSPACE_GOALS"},loadFile:["pms.util.min.js","pms.formHandler.min.js","pms.myspace.min.js"]},appraisal:{callback:()=>paPendingActyWidget.getPendingActy},favorites:{callback:()=>ele=>{ZPUsers.initUsersPage(ele),ZPUsers.getUsersList(void 0,void 0,ele)}},feeds:{callback:()=>ZPFeeds.get,firescrollcallback:()=>ZPFeeds.getMoreFeeds,initCallback:()=>ZPFeeds.initPageComponents,blockParam:!0,wcagDesc:ZPI18N.getString("zp.wcag.feedspage"),loadFile:ZPFeeds.LoadFiles},career:{callback:()=>EmployeeReports.CareerHistory.CardHandling.init,param:{cardMode:0},loadFile:["reports.min.js"]},carriarH:{callback:()=>EmployeeReports.CareerHistory.CardHandling.init,param:{cardMode:1},loadFile:["reports.min.js"]},timesheets:{callback:()=>Timetracker.UserSpace.Timesheets.init,firescrollcallback:()=>Timetracker.UserSpace.Timesheets.loadMoreData,firescrollparam:{mode:"TT_USERSPACE_TIMESHEETS"},loadFile:["timely.1.min.js","timetracker5_0.3.min.js"]},jobs:{callback:()=>Timetracker.UserSpace.Jobs.init,firescrollcallback:()=>Timetracker.UserSpace.Jobs.loadMoreData,firescrollparam:{mode:"TT_USERSPACE_JOBS"},loadFile:["timely.1.min.js","timetracker5_0.3.min.js"]},timelogs:{callback:()=>Timetracker.UserSpace.Timelogs.init,firescrollcallback:()=>Timetracker.UserSpace.Timelogs.loadMoreData,firescrollparam:{mode:"TT_USERSPACE_TIMELOGS"},loadFile:["timely.1.min.js","timetracker5_0.3.min.js"]},leave:{callback:()=>LVUtil.Tab.isGlobalSearchUserPage()?LVUtil.Tab.initPage:TAMSUtil.UserSpace.Leave.init,loadFile:["timely.1.min.js"]},payslips:{callback:_=>MySpace.PageView.Payslips.init},cases:{callback:()=>ele=>{void 0==casesObj.casesMySpaceObj&&(casesObj.casesMySpaceObj=new CasesMySpace,casesObj.casesMySpaceObj.init())}},attendance:{callback:()=>Attendance.Entry.init,loadFile:["timely.1.min.js","attendance.3.min.js","regularization.min.js","attendanceEntry5.min.js","onduty.min.js","permission.min.js"]},myshift:{callback:()=>MySpaceShift.init,loadFile:["timely.1.min.js","empShiftMapping.min.js","regularization.min.js","onduty.min.js","permission.min.js"]},files:{callback:()=>FilesHome.FilesTab.loadFiles,loadFile:["fileshome.min.js"]},myfeedback:{callback:()=>ZPFeeds.PMS.Feedback.init,firescrollcallback:()=>ZPFeeds.getMoreFeeds,loadFile:["pms.util.min.js","pms.feedback.min.js"]},transfer:{loadFile:["transfer_myspace_actionlist.min.js","transfer.configuration.min.js","transfer_initiateProcess.min.js"],callback:()=>transferActionsListCallBack}},id:()=>{var isMyspace=ZPUserProfile.Page.isMyspace(),userErecno=ZPUserProfile.info.getUserId(),pageId=userErecno;return isMyspace&&(userErecno=erecno,pageId="home_Myspace_contwrap"),pageId},goBack:()=>{0!=ZPUserProfile.Page.URLBUCKET.length&&-1==ZPUserProfile.Page.URLBUCKET[0].indexOf("selfservice")?(window.location.hash=ZPUserProfile.Page.URLBUCKET.pop(),(0!=ZPUserProfile.Page.URLBUCKET.length||0==ZPUserProfile.Page.URLBUCKET.length&&-1!=window.location.hash.indexOf("home/user"))&&(ZPUserProfile.isBackout=!0)):window.location.hash="home/myspace/overview-actionlist"},validation:userErec=>{let userId=ZPUserProfile.info.getUserId();if(!ZPUtil.Validation.isEmpty(userErec)&&userId!=userErec){let href=window.location.href;return href=href.replace(userId,userErec),window.history.replaceState(null,null,href),ZPUserProfile.info.setUserId(userErec),!0}return!1},isNeedToBack:()=>!ZPUserProfile.Page.isMyspace()&&!ZPUserProfile.isBackout&&Layout.HashUtil.getPreviousHashConfig()&&(-1==Layout.HashUtil.getPreviousHashConfig().fullHash.indexOf("home/user")||Layout.HashUtil.getPreviousHashConfig().dynParam.id!=ZPUserProfile.info.getUserId())&&-1!=window.location.hash.indexOf("home/user/profile")&&(!ZPUserProfile.RelatedTab||!ZPUserProfile.RelatedTab.isClicked),hashChangeCallback:()=>{ZPNavBar.instances.home_Myspace_contwrap&&ZPNavBar.instances.home_Myspace_contwrap.hashChangeCallback(),"home/myspace/overview-profile"==Layout.HashUtil.getPreviousHashConfig().fullHash&&ZP5Form.closeCallback(),"home/myspace/overview-relatedtabs"==Layout.HashUtil.getPreviousHashConfig().fullHash&&ZPUserProfile.RelatedTab.hashChangeCallback(),ZP5ProfilePicture.destroy()},init:()=>{let isMyspace=ZPUserProfile.Page.isMyspace();ZPUserProfile.Page.isNeedToBack()&&(-1==Layout.HashUtil.getPreviousHashConfig().fullHash.indexOf("home/user")&&(ZPUserProfile.Page.URLBUCKET=[]),ZPUserProfile.Page.URLBUCKET.push(Layout.HashUtil.getPreviousHashConfig().fullHash)),ZPUserProfile.isBackout=!1;var userErecno=ZPUserProfile.info.getUserId(),pageId=userErecno;isMyspace&&(pageId="home_Myspace_contwrap",(needToShowIntroPopUp||needToShowTour)&&ZPeople5Tour.constructNewVersionPopup());var pageObj=ZPUserProfile.Page.userPage[pageId];if(pageObj)ZPUserProfile.Page.handleTabs(pageObj);else{let container=$(ZPUserProfile.Component.wrap(pageId));Layout.Page.container.append(container),ZPUserProfile.Page.userPage[pageId]={},(pageObj=ZPUserProfile.Page.userPage[pageId]).page=container,pageObj.pageId=pageId;let param={},url="/userprofile/ssAction";param.userId=ZPUserProfile.info.getUserId(),ZPUserProfile.Page.isMyspace()?(container.addClass("ovh"),param.tltab='{"submode":"home-overview"}',param.mode="INIT_SPACE",url="/myspaceAction.zp"):param.MODE="PROFILE-BASICINFO",container.append(ZPUserProfile.Component.loading()),ZPeople.Request.send(url,param,function(response,param,details){let pageId=details.pageId,pageObject=ZPUserProfile.Page.userPage[pageId];if(!details.isMyspace&&ZPUserProfile.Page.validation(response.userErecno)){if(ZPUserProfile.Page.userPage[response.userErecno]){let existObj=ZPUserProfile.Page.userPage[response.userErecno];return delete ZPUserProfile.Page.userPage[pageId],existObj.isQuickRefresh=!0,existObj.page.removeClass("DN").siblings(".zpl_container.prof_wrap").addClass("DN"),ZPUserProfile.Page.handleTabs(existObj),ZPUserProfile.status.refresh(response.userErecno,{isMyspace:isMyspace,pageObject:existObj,page:existObj.page.find(".zpl_mspace_wrap"),statusCallback:()=>ZPUserProfile.status.updateUserStatus}),void pageObject.page.remove()}ZPUserProfile.Page.userPage[response.userErecno]=ZPUserProfile.Page.userPage[pageId],delete ZPUserProfile.Page.userPage[pageId],pageId=response.userErecno,pageObject.page.attr("pageid",pageId),pageObject.pageId=pageId,param.userId=pageId}if(response.userNotFound)return void pageObject.page.html(ZPUserProfile.Component.invalidPage());pageObject.tabArray=response.tltabs,ZPUserProfile.Page.actionPermission[param.userId]={view:response.isViewAllowed,edit:response.isEditAllowed},ZPUserProfile.Page.constructUserInfo(response,pageObject.page,details.isMyspace,param);let tabParams=ZPTabs.getThirdLevelTabParams(),resizeId="thirdLvl_"+(void 0!==tabParams.serviceName?tabParams.serviceName:tabParams.submode);details.isMyspace||(resizeId+="_"+pageId),pageObj.moreTabsOptions={id:resizeId,parentEle:$(pageObject.page).find(".nav_container"),activeClass:"zpl_act",gap:100},ZPUserProfile.Page.handleTabs(pageObj),ZPUserProfile.status.refresh(response.userErecno,{isMyspace:details.isMyspace,pageObject:pageObject,page:pageObject.page.find(".zpl_mspace_wrap"),statusCallback:()=>ZPUserProfile.status.updateUserStatus}),ZPUserProfile.Page.isMyspace()&&ApprovalHome.getPendingCount()},{pageId:pageId,isMyspace:isMyspace})}pageObj.page.removeClass("DN").siblings(".zpl_container.prof_wrap").addClass("DN"),ZPUserProfile.status.isNeedRefresh()&&(pageObj.isQuickRefresh=!0),pageObj&&ZPUserProfile.status.refresh(userErecno,{isMyspace:isMyspace,pageObject:pageObj,page:pageObj.page.find(".zpl_mspace_wrap"),statusCallback:()=>ZPUserProfile.status.updateUserStatus}),isMyspace&&settingsUrlProps&&settingsUrlProps.urlParamsArr&&settingsUrlProps.urlParamsArr.hasOwnProperty("photoapprovalid")&&ProfilePictureTransfer.photoTransferModel(settingsUrlProps.urlParamsArr.photoapprovalid,!0)},constructUserInfo:(userData,wrap,isMyspace,params)=>{let userId=params.userId,userObj=ZPeople.getUserDetailsById(userId),pageId=wrap.attr("pageid"),pageContainer=ZPUserProfile.Component.container(pageId,isMyspace),header=pageContainer.find("#"+pageId+"_usercon .zpl_myprofhd-acts"),userInfo=pageContainer.find("#user_detailsBand"),userCard=ZPUserProfile.Component.userInfo(userObj,isMyspace,!0),mentorDts={},tamsDts=userData.tamsDtls,basicInfoCont=pageContainer.find(".zpl_myprof-bsinfo"),toLoadPayslip=!0;if(ZPUserProfile.Page.userPage[pageId].tamsDts=tamsDts,isMyspace||pageContainer.prepend(ZPUserProfile.Component.back()),userData.CoverImg.isPredefinedCoverImg=userData.CoverImg.isPredefinedCoverImg,ZPUserProfile.Page.setCoverImage(pageContainer,userId,userData.CoverImg),userInfo.append(userCard),ZPUtil.Validation.isEmpty(userObj.reportingTo)||(mentorDts=ZPeople.getUserDetailsById(userObj.reportingTo)),isMyspace)pageContainer.addClass("zpl_mspace-fulwid"),$.isEmptyObject(mentorDts)||1==mentorDts.notFound||basicInfoCont.append(ZPUserProfile.Component.managerInfo(mentorDts,!0,void 0)),userInfo.append(ZPUserProfile.Component.timerCard(tamsDts)),pageContainer.find("section .zpl_myprofcnt").prepend(ZPUserProfile.Component.tab(pageId,isMyspace&&ZPeople.isTabCustomizationAllowed)),$.each(MySpace.Widgets.Configuration,function(i,confObj){var card=$('<div class="zpl_msplst DNI"></div>');basicInfoCont.append(card),confObj.callback()(card)});else{$.isEmptyObject(mentorDts)||1==mentorDts.notFound||userInfo.append(ZPUserProfile.Component.managerInfo(mentorDts,!1,userId));let tab=ZPUserProfile.Component.tab(pageId,isMyspace&&ZPeople.isTabCustomizationAllowed);tab.insertAfter(basicInfoCont),void 0!==userData.xoxoIntegDtls&&userData.xoxoIntegDtls.isLocAndEmpTypeMatched&&userData.xoxoIntegDtls.isAllowedToAssign&&tab[0].querySelector(".mspace_actband .nav_container").insertAdjacentHTML("beforeend",ZPUserProfile.info.getUserId()!==erecno?'<div class="mspace_multiact"><div class="d-flexC d-flexclmcap8" onclick="ZPUserProfile.Component.XoxodayIntegration.ProfileView.constructPopup()"><span class="icn"><i class="PI_store"></i></span><span class="zpl_link">'+ZPI18N.getString("zp.xoxoday.rewardpoints")+"</span></div></div>":"")}wrap.html(pageContainer);let actionMenu={menuId:pageId+"_menu",forElementId:pageId+"_more",callback:()=>ZPUserProfile.Page.viewMore,parentId:pageId,option:[],contentType:"icon-text"};userData.isViewAllowed&&(actionMenu.option.push({label:ZPI18N.getString("zp.viewprofile"),fieldType:"VIEW",id:"prof_View_"+pageId,iconClass:"PI_eye",callback:ZPUserProfile.info.loadForm,callbackparam:!0}),userCard.find("[name=userName]").addClass("zpl_link").off("click").on("click",()=>{ZPUserProfile.info.loadForm(!0)})),userId==erecno&&isMyspace&&actionMenu.option.push({label:ZPI18N.getString("zp.ps.personalpreferences"),fieldType:"PERSONALSETTINGS",id:"personalsettings_"+pageId,iconClass:"PI_tool",callback:PersonalSettings.Page.show}),userData.zp_offboarding&&header.append(ZPUserProfile.Component.accOffBoardingRecord(userData.zp_offboarding)),userData.isFHPLEnabled&&header.append(ZPUserProfile.Component.accFHPL()),userData.isFHPLEnabled&&userData.isPayRoll&&(actionMenu.option.push({label:ZPI18N.getString("zp.gtlogintopayroll"),fieldType:"PAYSLIP",id:"viewpayslips_"+pageId,iconClass:"PI_redirect",callback:_=>{ZPeople.Request.send("/integrations/payroll/LoginToPayroll",{typeOfUser:"ey"},function(data){null!=data&&window.open(data.url,"_blank")})}}),toLoadPayslip=!1),userData.isPayRoll&&toLoadPayslip&&header.append(ZPUserProfile.Component.accPayslips()),params.userId!=erecno&&(void 0!==userData.isFav&&header.append(ZPUserProfile.Component.favicn(params.userId,userData.isFav)),"true"==ZPeople.ISCHAT&&(header.append(ZPUserProfile.Component.cliqIcn(userData.zuid)),header.append(ZPUserProfile.Component.audioClIcn(userData.zuid)),header.append(ZPUserProfile.Component.videoClIcn(userData.zuid)))),0!=actionMenu.option.length&&(header.append(ZPUserProfile.Component.more(pageId)),ZPUserProfile.Component.dropDownMenu(actionMenu))},handleTabs:function(pageObj){ZPNavBar.getInstance(pageObj.pageId).handleTabs(pageObj.tabArray,pageObj.pageId+"_usertabcontainer",pageObj.pageId+"_contentWrap",ZPUserProfile.Page.handleTabChange,{toggleClass:"zpl_act"},pageObj.moreTabsOptions)},changeLayout:container=>{container?(Layout.Page.container=container,settingsPage.container=container):(Layout.Page.container=$(Layout.Page.container).parents(".main-wrp"),settingsPage.container=$(Layout.Page.container).parents(".main-wrp"))},viewMore:(event,data)=>{var callbackfun=data.callback;callbackfun&&callbackfun(data.callbackparam)},refresh:(resultData,params,skipFormConstruct)=>{let pageId=ZPUserProfile.info.getUserId(),myPageObj=ZPUserProfile.Page.userPage.home_Myspace_contwrap,pageObject=ZPUserProfile.Page.userPage[pageId],container=myPageObj&&myPageObj.page.is(":visible")?myPageObj.page.find('[page-id="profile"]'):pageObject.page.find('[page-id="profile"]');setTimeout(function(){ZPUserProfile.ProfileView&&ZPUserProfile.ProfileView.show(container,{erecno:pageId},function(result,param,details){if(pageObject&&0!=pageObject.length&&(ZPUserProfile.Page.updateUserProfile(pageObject.page),pageObject.isQuickRefresh=!0,ZPUserProfile.status.refresh(pageId,{pageObject:pageObject,page:pageObject.page.find(".zpl_mspace_wrap"),statusCallback:()=>ZPUserProfile.status.updateUserStatus})),pageId==erecno&&myPageObj&&0!=myPageObj.length){let container=myPageObj.page;ZPUserProfile.Page.updateUserProfile(container,!0),myPageObj.isQuickRefresh=!0,ZPUserProfile.status.refresh(pageId,{isMyspace:!0,pageObject:myPageObj,page:container.find(".zpl_mspace_wrap"),statusCallback:()=>ZPUserProfile.status.updateUserStatus})}ZPUserProfile.ProfileView.construct(result,param,details,skipFormConstruct)},!0)},1e3)},updateUserProfile:(container,isMyspace)=>{let userObj=ZPUserProfile.info.getUserInfo(),pageId=isMyspace?"home_Myspace_contwrap":userObj.usererec,tamsDts=ZPUserProfile.Page.userPage[pageId].tamsDts,userInfo=container.find("#user_detailsBand");userInfo.empty();let userCard=ZPUserProfile.Component.userInfo(userObj,isMyspace,!0);userInfo.append(userCard);var mentorDts={};ZPUtil.Validation.isEmpty(userObj.reportingTo)||(mentorDts=ZPeople.getUserDetailsById(userObj.reportingTo));let mentor="";$.isEmptyObject(mentorDts)||1==mentorDts.notFound||(mentor=ZPUserProfile.Component.managerInfo(mentorDts,isMyspace,userObj.usererec)),isMyspace?(userInfo.append(ZPUserProfile.Component.timerCard(tamsDts)),container.find('[managerInfocard="true"]').replaceWith(mentor)):userInfo.append(mentor),ZPUserProfile.Page.actionPermission[userObj.usererec].view&&userCard.find("[name=userName]").addClass("zpl_link").off("click").on("click",()=>{ZPUserProfile.info.loadForm(!0)})},setCoverImage:(pageContainer,userId,coverImg)=>{let bg;if(pageContainer)bg=pageContainer.find(".zpl_myprofhd"),ZPUserProfile.Page.updateCoverImage(bg,userId,coverImg);else{let myPageObj=ZPUserProfile.Page.userPage.home_Myspace_contwrap,pageObject=ZPUserProfile.Page.userPage[erecno];myPageObj&&ZPUserProfile.Page.updateCoverImage(myPageObj.page.find(".zpl_myprofhd"),erecno,coverImg),pageObject&&ZPUserProfile.Page.updateCoverImage(pageObject.page.find(".zpl_myprofhd"),erecno,coverImg)}},updateCoverImage:(bg,userid,coverImg)=>{let coverImgkey=coverImg.CoverImgkey?coverImg.CoverImgkey:"";if(bg&&0!=bg.length){bg.removeClass("zpl_mypro_cvr0 zpl_mypro_cvr1 zpl_mypro_cvr2 zpl_mypro_cvr3 zpl_mypro_cvr4 zpl_mypro_cvr5 zpl_mypro_cvr6 zpl_mypro_cvr7 zpl_mypro_cvr8 zpl_mypro_cvr9 zpl_mypro_cvr10"),bg.css("background-image","");var coverImgId=0,isCurrentUser=userid==erecno,isPredefined=1==coverImg.isPredefinedCoverImg;ZPeople.CURR_USER.userCoverImgId=void 0!=coverImg.PredefinedImg?coverImg.PredefinedImg:1,coverImgId=isCurrentUser?ZPeople.CURR_USER.userCoverImgId?ZPeople.CURR_USER.userCoverImgId:1:coverImg.PredefinedImg;const safeCoverImgKey=encodeURIComponent(coverImgkey);""!==coverImgkey?isPredefined?bg.addClass("zpl_mypro_cvr"+coverImgId):bg.css("background-image","url("+CompanySetup.NewSetting.defaultPhotoUrl+safeCoverImgKey+")"):bg.addClass("zpl_mypro_cvr"+coverImgId)}},isMyspace:()=>-1!=window.location.hash.indexOf("myspace"),handleTabChange:function(tabObj,isInit){Layout.Page.parentContainer.find(".zpl_mopen").removeClass("zpl_mopen");var pageId=ZPUserProfile.info.getUserId();let isMyspace=ZPUserProfile.Page.isMyspace(),isHaveLoading=!1;isMyspace&&(pageId="home_Myspace_contwrap");var pageObject=ZPUserProfile.Page.userPage[pageId].page,tabId=tabObj._tabId,pageContainerId=tabObj.contentDivId,page=$("#"+pageContainerId);if($.isEmptyObject(tabObj)||0==tabObj.length)return void page.html(ZPUserProfile.Component.invalidUrl);ZPUserProfile.Page.changeLayout(page);var conf=ZPUserProfile.Page.pageConfiguration[tabObj.tabId],param={},fsParam={};let fileArr=conf.loadFile;conf&&conf.param&&"object"==typeof conf.param&&(param=JSON.parse(JSON.stringify(conf.param))),conf&&conf.firescrollparam&&"object"==typeof conf.firescrollparam?fsParam=JSON.parse(JSON.stringify(conf.firescrollparam)):conf&&conf.fsparamcallback&&(fsParam=conf.fsparamcallback()()),fsParam.scrollDiv=pageObject,fsParam.pageContainerId=pageContainerId,fsParam.erecno=ZPUserProfile.info.getUserId(),isMyspace&&(fsParam.scrollDiv=pageObject.find('[scroll="enabled"]')),param.erecno=ZPUserProfile.info.getUserId(),ZPeople.FireScroll.getFireScrollPropertie().triggered=!0,page.attr("page-id",tabObj.tabId),conf&&conf.initLoading&&!page.data()[tabId+"loaded"]&&(page.html(ZPUserProfile.Component.loading(!0)),isHaveLoading=!0),conf&&conf.wcagDesc&&page.attr({tabindex:"0","aria-label":conf.wcagDesc}),isInit&&fileArr&&fileArr.length>0?(isHaveLoading||page.html(ZPUserProfile.Component.loading(!0)),Layout.PageUtil.loadFiles(fileArr,function(){isHaveLoading||page.empty(),ZPUserProfile.Page.initCallback(page,tabId,conf,tabObj,param,fsParam,isInit)})):ZPUserProfile.Page.initCallback(page,tabId,conf,tabObj,param,fsParam,isInit),page.data(tabId+"loaded",!0)},initCallback:(page,tabId,conf,tabObj,param,fsParam,isInit)=>{if(isInit&&conf&&conf.initCallback&&conf.initCallback()(page,conf.initParam),conf&&conf.callback){var pagecallback=conf.callback();if(ZPUtil.Validation.isFunction(pagecallback)){"reportees"==tabObj.tabId||"peers"==tabObj.tabId?(ZPeople.Team.initObj&&!page.data()[tabId+"loaded"]&&(ZPeople.Team.initObj[conf.param]=!1,page.data(tabId+"loaded",!0)),pagecallback(conf.param,ZPUserProfile.info.getUserInfo()),page.find(".zpl_container").removeClass("zpl_container")):conf.blockParam?pagecallback():pagecallback(page,param);var scrollcalback=conf.firescrollcallback?conf.firescrollcallback():conf.firescrollcallback;scrollcalback&&(ZPeople.FireScroll.init(scrollcalback,tabId,fsParam,!0),ZPeople.FireScroll.getFireScrollPropertie(fsParam.mode).triggered=!!conf.isTriggered&&conf.isTriggered)}}},addMoreOption:menuOption=>{var comp=ZPeopleComponents.menu($("#home_Myspace_contwrap_menu"));comp&&(menuOption.id=menuOption.id+"_menuFld",comp.addMenuItem(menuOption))},removeMoreOption:fieldId=>{var comp=ZPeopleComponents.menu($("#home_Myspace_contwrap_menu"));comp&&comp.removeMenuItem("#"+fieldId+"_menuFld")}},ZPUserProfile.status={isNeedRefresh:()=>{if(Layout.HashUtil.getPreviousHashConfig()){var previous=Layout.HashUtil.getPreviousHashConfig().fullHash.split("/"),present=window.location.hash.slice(1).split("/");if(Layout.previosHash=window.location.hash,previous[0]!=present[0])return!0;if(previous[1]!=present[1])return!0;let prevUserhash=Layout.HashUtil.getPreviousHashConfig().fullHash.split("-id:"),curuserHas=window.location.hash.split("-id:");if(prevUserhash[1]!=curuserHas[1])return!0;if(ZPUserProfile.Page.isMyspace()&&previous[2].split("-")[0]!=present[2].split("-")[0])return!0}return!1},refresh:(usererecno,pageData,isTimer,isEvent)=>{var Pagecontainer=pageData.page;if(!$(Pagecontainer).is(":visible"))return void delete pageData.pageObject.timer;if(pageData.pageObject.refreshStatusEnabled&&!pageData.pageObject.isQuickRefresh)return;if(isTimer&&!isEvent&&("hidden"==document.visibilityState||!document.hasFocus()))return void window.addEventListener("visible"==document.visibilityState?"mouseover":"focus",ZPUserProfile.status.refreshEvent);pageData.pageObject.refreshStatusEnabled&&!isTimer&&clearTimeout(pageData.pageObject.timer);var param={mode:"USERSTATUS"};let erecArr=ZPUserProfile.status.getUserList(pageData.page);if(param.includeAttInfo=!1,pageData.isMyspace){let pageId="home_Myspace_contwrap",tamsDts=ZPUserProfile.Page.userPage?ZPUserProfile.Page.userPage[pageId].tamsDts:void 0;tamsDts&&!tamsDts.isAttAllowed||TAMSUtil.Attendance.getCurrDayStatus(Pagecontainer,isTimer,function(){0!=erecArr.length&&(param.userIds=JSON.stringify(erecArr),ZPeople.Request.send("/commonAction.zp",param,function(response){ZPUserProfile.status.updateUserStatus(response,Pagecontainer)})),ZPUserProfile.status.setTimer(pageData,usererecno)})}else param.userIds=JSON.stringify(erecArr),"home/user/profile"==Layout.Page.currentmode&&(param.includeAttInfo=!0),ZPeople.Request.send("/commonAction.zp",param,function(response){if(pageData&&pageData.statusCallback){var statusCallback=pageData.statusCallback();ZPUtil.Validation.isFunction(statusCallback)&&statusCallback(response,Pagecontainer)}ZPUserProfile.status.setTimer(pageData,usererecno)},{pageData:pageData})},setTimer:(pageData,userId)=>{pageData.pageObject.isQuickRefresh&&delete pageData.pageObject.isQuickRefresh;let statusTimeout=setTimeout(function(){pageData.pageObject.refreshStatusEnabled=!1,ZPUserProfile.status.refresh(userId,pageData,!0)},12e4);pageData.pageObject.timer=statusTimeout,pageData.pageObject.refreshStatusEnabled=!0},refreshEvent:function(){let pageData={},usererecno=ZPUserProfile.info.getUserId(),myPageObj=ZPUserProfile.Page.userPage.home_Myspace_contwrap;if(myPageObj&&myPageObj.page.is(":visible"))pageData.isMyspace=!0,pageData.pageObject=myPageObj;else{let pageObject=ZPUserProfile.Page.userPage[usererecno];pageData.pageObject=pageObject}pageData.page=pageData.pageObject.page.find(".zpl_mspace_wrap"),pageData.statusCallback=(()=>ZPUserProfile.status.updateUserStatus),pageData.pageObject.refreshStatusEnabled=!1,ZPUserProfile.status.refresh(usererecno,pageData,!0,!0),window.removeEventListener("mouseover",ZPUserProfile.status.refreshEvent),window.removeEventListener("focus",ZPUserProfile.status.refreshEvent)},update:(result,container,userId,isbulkUpdate)=>{if(!result)return;let pageObj,statusId=isbulkUpdate?'[uid="'+userId+'"][autorefresh="true"]':"#att_status",isMyspace=ZPUserProfile.Page.isMyspace(),pageId=ZPUserProfile.info.getUserId();isMyspace&&(pageId="home_Myspace_contwrap"),(pageObj=ZPUserProfile.Page.userPage[pageId])&&!container&&(container=pageObj.page);var html=result.shiftName+'<em class="zpl_dots sm"></em><span>'+daysFull[curday-1]+" - "+curdate+'</span><span id="myspaceMyTime"></span></em>';if(container.find("#myspaceShiftName").html(html),TAMSUtil.Attendance.setMyTime(),void 0!=result.leaveAttStat){var leaveAttStat=ZSEC.Encoder.encodeForHTML(result.leaveAttStatUnEncoded),colourClass=Attendance.setClassToShowStatus(result.colourCode);if(Attendance.isLeaveAvail(result.colourCode)&&(leaveAttStat=result.leaveAttStat),isMyspace){var statusPrntDiv=container.find(statusId).parent();void 0!=result.checkInBuilding&&""!=result.checkInBuilding?!statusPrntDiv.hasClass("zpl_w-100")&&statusPrntDiv.hasClass("zpl_flex-center")&&statusPrntDiv.addClass("zpl_w-100"):statusPrntDiv.hasClass("zpl_w-100")&&statusPrntDiv.removeClass("zpl_w-100"),statusPrntDiv.html(TAMSUtil.UserSpace.Attendance.buildingInfoHTMl(leaveAttStat,result.checkInBuilding,userId,colourClass,isbulkUpdate))}else{(statusPrntDiv=container.find(statusId).parent()).html(TAMSUtil.Attendance.attStatusProfileViewHtml(userId,colourClass,leaveAttStat,result));let attInfoHtml=TAMSUtil.Attendance.attInfoProfileViewHtml(leaveAttStat,result);""!=attInfoHtml&&container.find("#profile_att_div").html(attInfoHtml)}}else if(void 0!==result.attStatus){colourClass=result.attStatus.isLeave?"org":result.attStatus.allowtoCheckin?"red":"grn";var attStatus=result.attStatus.isLeave?ZPI18N.getString("zp.leave"):result.attStatus.allowtoCheckin?ZPI18N.getString("zp.out"):ZPI18N.getString("zp.in");container.find(statusId).attr("class",colourClass).html(isMyspace?attStatus:'<em class="zpl_dots sm"></em>'+attStatus)}},updateUserStatus:(result,container)=>{$.each(result.attStatus,function(userId,value){ZPUserProfile.status.update(value,container,userId,!0)})},getUserList:pageObject=>{let userList=[],listMailnatiner={};return $.each(pageObject.find('[autorefresh="true"]'),function(i,userObj){let userId=$(userObj).attr("uid");ZPUtil.Validation.isEmpty(userId)||listMailnatiner[userId]||(userList.push(userId),listMailnatiner[userId]=!0)}),userList}},ZPUserProfile.info={responseRuleObj:{},SINGLE_RECORD_DTL:{},FormComponent:{},formDetails:{},orgStructureVales:{},getUserId:function(){return void 0!==Layout.Page.urlparam.id?Layout.Page.urlparam.id:void 0!==Layout.Page.urlparam.zuid?ZPeople.getUserDetailsById(Layout.Page.urlparam.zuid,!1,!0).usererec:void 0!==Layout.Page.urlparam.userId?Layout.Page.urlparam.userId:erecno},setUserId:userId=>{void 0!==Layout.Page.urlparam.id?Layout.Page.urlparam.id=userId:void 0!==Layout.Page.urlparam.userId&&(Layout.Page.urlparam.userId=userId)},getUserInfo:function(){return Layout.Page.urlparam.zuid?ZPeople.getUserDetailsById(Layout.Page.urlparam.zuid,void 0,!0):ZPeople.getUserDetailsById(ZPUserProfile.info.getUserId())},getDepId:()=>{var userInfo=ZPUserProfile.info.getUserInfo();if(void 0!==userInfo&&!ZPUtil.Validation.isEmpty(userInfo.deptId))return userInfo.deptId},loadForm:function(view){var params={formId:ZPeople.EMP_FORMID,recordId:ZPUserProfile.info.getUserId(),disableUrlTrack:!0,isFromSService:!0};params.formMode=1==view?"VIEW":"EDIT";let form=ZP5Form._toForm(params);form.setFormContainer(Layout.Page.parentContainer),form.init()},resetProfileImage:()=>{var userObj=ZPUserProfile.info.getUserInfo(),isMyspace=ZPUserProfile.Page.isMyspace(),userId=ZPUserProfile.info.getUserId(),pageId=userId;isMyspace&&(pageId="home_Myspace_contwrap"),ZPUserProfile.Page.userPage[pageId].page.find("#userprofimg").attr("src",userObj.avatar),userId==erecno&&MySpace.Page.setUserProfile()},isViewAllowed:function(basicInfoPerms,colName){if(void 0!==basicInfoPerms){if(void 0!==basicInfoPerms.isAdmin)return basicInfoPerms.isAdmin;if(void 0!==basicInfoPerms[colName])return basicInfoPerms[colName].view}return!1},isEditAllowed:function(basicInfoPerms,colName,erecno){if(!ZPUserProfile.Page.actionPermission[erecno].edit)return!1;if(void 0!==basicInfoPerms){if(void 0!==basicInfoPerms.isAdmin)return basicInfoPerms.isAdmin;if(void 0!==basicInfoPerms[colName])return basicInfoPerms[colName].edit}return!1}},ZPUserProfile.Team={List:{},init:function(container,obj){var deptId=ZPUserProfile.info.getDepId();if(ZPUtil.Validation.isEmpty(deptId)){var errorMsg=ZPI18N.getString("ZP.departmentNotAssigned");container.html('<div class="zpl_Emptydata"> <div> <div class="zpl_emptimg zp_nd_deprtmnt"></div> <h4>'+errorMsg+"</h4> <p></p> </div> </div>")}else ZPeople.Team_Department.init(deptId,obj.erecno)},setClickCallBack:pagecontainer=>{pagecontainer.find('[click="user"]').off("click").on("click",function(){var id=$(this).attr("id");void 0!=id&&ZPeople.getUserPage(id)})}},ZPUserProfile.Component={loading:isInner=>isInner?'<div id="pageloader" class=""><div class="grybg" style="height: 300px;"><div class="ctable" id="zp_page_loading"><div class="ctcell"><div class="loader-inner line-scale"><div></div><div></div><div></div><div></div><div></div></div></div></div></div></div>':'<div class="ctable" id="zp_page_loading"><div class="ctcell"><div class="loader-inner line-scale"><div></div><div></div><div></div><div></div><div></div></div></div></div>',container:(pageId,isMyspace)=>$('<div class="zpl_mspace_out" tabindex="0" aria-label="'+ZPI18N.getString("zp.wcag.myspacepage")+'"> <div id="'+pageId+'_usercon" class="zpl_myprofhd" tabindex="0"><div class="zpl_myprofhd-acts"></div></div> <div class="zpl_mspace_wrap"><div id="userprofContainer" class="zpl_myprof-bsinfo" tabindex="0"><div id="user_detailsBand"></div></div><section class="mspace_cntwrap">'+(isMyspace?'<div class="zpl_myprofcnt"><div id="'+pageId+'_contentWrap" class="zpl_tabcnt" scroll="enabled"></div></div>':'<div id="'+pageId+'_contentWrap" class="zpl_tabcnt"></div>')+"</section></div></div>"),wrap:pageId=>$('<div pageId="'+pageId+'"  scroll="enabled" class="zpl_container prof_wrap"></div>'),back:()=>{return $('<a title="'+ZPI18N.getString("zp.assessment.goback")+'" data-title-position="right" class="zpl_ibg zpl_myprof-back"><i class="PI_back"></i></a>').on("click",function(){ZPUserProfile.Page.goBack()})},more:pageId=>{var more=$('<a id="'+pageId+'_more" data-title-position="bottom" title="'+ZPI18N.getString("zp.automation.moreoptions")+'" class="zpl_ibg PI_more zpl_drpdwn-js" data-menu-id="MyProfileMore"></a>');return more.eq(0).on("click",function(){pageId&&ZPeopleComponents.menu($("#"+pageId+"_menu")).show()}),more},userInfo:(userObj,isMyspace,alloweToViewEditProf)=>{var card="";if(isMyspace)card=$('<figure><div class="Activity '+(alloweToViewEditProf?"":"CPD")+'"><img id="userprofimg" imgtype="normal" elem="profilePhoto" empid="'+userObj.usererec+'" src="'+userObj.avatar+'" alt=""><span cstus="true" uid="'+userObj.id+'"></span></div><figcaption><div class="zpl_em"><div class="zpl_emdts"><div class="zpl_ellipsis" title="'+userObj.name+'"><em>'+userObj.empid+' - </em><b name="userName">'+userObj.name+'</b></div><div title="'+(userObj.designation?userObj.designation:"")+'"><em>'+(userObj.designation?userObj.designation:"")+"</em></div></div></div></figcaption></figure>");else{var cardHtml='<figure><div class="Activity '+(alloweToViewEditProf?"":"CPD")+'"><img id="userprofimg" imgtype="normal" elem="profilePhoto" empid="'+userObj.usererec+'" src="'+userObj.avatar+'" alt=""><span cstus="true" uid="'+userObj.id+'"></span></div>';cardHtml+='<figcaption><div class="zpl_em"><div class="zpl_emdts"><div>',cardHtml+="<em>"+userObj.empid+'- </em><b class="zpl_dib zpl_ellipsis200 zpl_va-top" title="'+userObj.name+'">'+userObj.name+"</b>",cardHtml+='<span class="zpl_pl2" id="attInfoProfileSpan"><span id="attStatus_Profile" autorefresh="true" uid="'+userObj.usererec+'" class="grn zpl_dib zpl_ellipsis100 zpl_va-top"></span></span>',cardHtml+="</div>",cardHtml+='<div><div class="zpl_chknprdict zpl_justify-start" id="profile_att_div">',cardHtml+="</div></div>",cardHtml+="<div><em>"+(userObj.designation?userObj.designation:"")+"</em></div>",cardHtml+="</div></div></figcaption></figure>",card=$(cardHtml)}return alloweToViewEditProf&&card.find("#userprofimg").on("click",function(){ZP5ProfilePicture.init(null,userObj.usererec,"userprofile"),ZPUserProfile.updatePhoto=!0}),card},timerCard:tamsDts=>{var html="";return tamsDts.isAttAllowed&&(html+='<div class="zpl_mspchkinout">',html+='<div class="zpl_flex-center" id="selfAttInfo"><span id="att_status" class="zpl_msp-status"></div>',html+='<div class="zpl_mstimer-count" id="totalInTime" style="display:none" ><span>00</span><span>00</span><span>00</span></div>',tamsDts.isWebPunchAllowed&&(html+='<div class="zpl_mspbreakpop" id="myspaceAttDet">',html+='<button class="zlabel zlabel--green zlabel--outline zlabel--medium zpl_btnloading zbutton zbutton--medium zbutton--normal zbutton--loading zh-transition" id="ZPAtt_check_in_out" tabindex="0" aria-label="'+ZPI18N.getString("zp.checkin")+'" role="button" type="button" onclick="TAMSUtil.Attendance.punch()"><i class="zbutton__icon zbutton--loader" style="display:none" id="zpl_loading_icon"><svg class="zbutton__svg zbutton__loader zeffects--rotate" width="100%" height="100%"> <circle class="circle__track" cx="8px" cy="8px" r="8px"></circle> <circle class="circle__load" cx="8px" cy="8px" r="8px"></circle> </svg></i><div><p>'+ZPI18N.getString("zp.checkin")+"</p></div></button>",html+='<div id="breakSelDiv" style="display:none">',html+='<div class="zpl_brkrunbtn" style="display:none" id="breakRunningDiv" onclick="TAMSUtil.Attendance.punch()">',html+='<i class="PI_brktime" id="runnerBreakImg"></i><div class="d-flex flex-dirC"><em>'+ZPI18N.getString("zp.resumework")+' </em><b id="breakRemTime"></b></div>',html+="</div>",html+='<span class="PI_brktime icn lv_bgclr7 zpl_popovr-js" style="display:none" id="myspaceBrkIcon" onclick="Attendance.Entry.toggleBreakPopup();"></span></div>',html+="</div>"),html+="</div>"),$(html)},managerInfo:(mentorDts,isMyspace,subErec)=>{var card=$('<div class="zpl_myprof-rptto"><div class="zpl_em"></div></div>');let infocont=card.find(".zpl_em");if(isMyspace){infocont.addClass("zpl_mspproimg zpl_qkcall-hvr"),infocont.append('<div class="zpl_emimg CP"><img alt="" src="'+mentorDts.avatar+'"><span cstus="true" uid="'+mentorDts.id+'"></span></div>');let attnstatus="<div class='zpl_flex-a-c' id='managerAttInfo' ><span autorefresh='true' uid='"+mentorDts.usererec+"' id='att_status_"+mentorDts.usererec+"' class='zpl_ondutyclr'></span></div>";infocont.append('<div class="zpl_emdts" tabindex="0" aria-label="'+ZPI18N.getString("zp.leave.operations.reportingto")+" "+mentorDts.name+'"><div><em>'+ZPI18N.getString("zp.reportingto")+'</em></div><div class="CP zpl_link" title="'+mentorDts.name+'"><em>'+mentorDts.empid+" - </em><b>"+mentorDts.name+"</b></div>"+attnstatus+"</div>"+("true"==ZPeople.ISCHAT?'<div hvr="true" class="zpl_hvr"><i class="PI_pharw" uid="'+mentorDts.id+'" chat_comm="true"></i></div>':""));let cardwrap=$('<div managerInfocard="true" class="zpl_msplst"></div>');cardwrap.append(card),card=cardwrap}else infocont.append('<div class="zpl_emdts zpl_ellipsis"><em>'+ZPI18N.getString("zp.reportingto")+'</em><div class="CP d-flex d-flexC d-flexclmcap10"><span class="zpl_dpthiery tooltip-js" ><span class="icn PI_Hierarchy vieworghierarchy" data-title-position="bottom" title="'+ZPI18N.getString("zp.vieworghierarchy")+'"></span></span><div class="zpl_link zpl_dib zpl_ellipsis250"><em>'+mentorDts.empid+" - </em><b>"+mentorDts.name+"</b></div></div></div>"),infocont.append('<div class="zpl_emimg CP"><img alt="" src="'+mentorDts.avatar+'"></div>'),card.addClass("text-right"),infocont.find(".vieworghierarchy").on("click",function(){window.location.hash="#home/organization/employeetree-id:"+subErec});return card.find(".zpl_emimg,.zpl_link").on("click",function(){ZPeople.getUserPage(mentorDts.usererec)}),card},tab:(pageId,isNeedCustomIcn)=>{let tabElement=$('<div class="mspace_actband zpl_mspace-sticky"><div id="'+pageId+'_usertabcontainer" class="nav_container"><ul id="tlvlTab" class="zpl_tabpane"></ul></div></div>');return isNeedCustomIcn&&tabElement.find("#"+pageId+"_usertabcontainer").append($('<i class="PI_widgt_custm mspace_multiact" title="'+ZPI18N.getString("zp.customizetabs")+'" id="myspaceCustButton" data-popup-open="MyCustab"></i>').on("click",MySpace.ModelView.TabCustomization.show)),tabElement},pageContainer:pageId=>$('<div class="prf_cntr" id="'+pageId+'" ></div>'),invalidUrl:'<div class="zpl_Emptydata"> <div> <div class="zpl_emptimg zp_nd_404"></div> <h4>'+ZPI18N.getString("zp.invalidurl")+"</h4> <p></p> </div> </div>",infoCard:(header,content,headerRightElm)=>{if(!content||0==content.length)return"";let headerRight=$("<div></div>");headerRight.html(headerRightElm);let container=$('<div class="zpl_crd" tabindex="0">'+(ZPUtil.Validation.isEmpty(header)?"":'<div class="zpl_crdhdr zpl_ctrbrd"><div><h4><span>'+header+"</span></h4></div></div>")+'<div class="zpl_crdcnt" tabindex="0"></div></div>');return container.find(".zpl_crdcnt").html(content),container.find(".zpl_crdhdr.zpl_ctrbrd").append(headerRight),container},favicn:(erecno,isFav)=>{return $("<a "+(isFav?'title="'+ZPI18N.getString("zp.unmarkfromfavorites")+'"':'title="'+ZPI18N.getString("zp.markasfavorite")+'"')+' data-title-position="bottom" class="PI_star_line '+(isFav?"org":"")+' zpl_ibg"></a>').on("click",function(){UserWidget.Actions.favouriteAction($(this),erecno,isFav)})},cliqIcn:zuid=>{return $('<a title="'+ZPI18N.getString("zp.chatsettings.chat")+'" data-title-position="bottom" class="zpl_ibg PI_cliq"></a>').on("click",function(){ZPeople.initUserChat(event,zuid)})},audioClIcn:zuid=>{return $('<a title="'+ZPI18N.getString("zp.chatsettings.audiocall")+'" data-title-position="bottom" class="zpl_ibg PI_frm_phone"></a>').on("click",function(){ZPeople.initUserAudioCall(event,zuid)})},videoClIcn:zuid=>{return $('<a title="'+ZPI18N.getString("zp.chatsettings.videocall")+'" data-title-position="bottom" class="zpl_ibg PI_video1"></a>').on("click",function(){ZPeople.initUserVideoCall(event,zuid)})},myProfDtsCard:(lable,value,icn,isDualpath)=>'<div class="zpl_em" tabindex="0"><div class="zpl_emimg"><span class="zpl_pichr '+icn+'">'+(isDualpath?'<span class="path1"></span><span class="path2"></span>':"")+'</span></div><div class="zpl_emdts zpl_ellipsis"><div><em>'+lable+"</em></div><div>"+value+"</div></div></div>",dropDownMenu:function(menuObect){(comp=ZPeopleComponents.menu($("#"+menuObect.menuId)))&&(comp.destroy(),$("#"+menuObect.menuId).remove());let menu=$('<div id="'+menuObect.menuId+'"></div>');var comp;(comp=ZPeopleComponents.menu($("#"+menuObect.menuId)))&&comp.destroy(),$("body").append(menu);var menuList=ZPeopleComponents.menu($("#"+menuObect.menuId),{forElement:$("#"+menuObect.forElementId),contentType:"icon-text",className:"zpl_drpdwn",itemclick:menuObect.callback(),appendTo:"[pageid="+menuObect.parentId+"]"});menuObect.option.forEach(function(menuOption,indx){menuList.addMenuItem(menuOption)})},basicInfoCard:(userObj,result)=>{let card=$('<div class="zpl_msplst"><div><div class="zpl_myprofdets"></div></div></div>'),infocontainer=card.find(".zpl_myprofdets");return ZPUtil.Validation.isEmpty(userObj.locName)||infocontainer.append(ZPUserProfile.Component.myProfDtsCard(ZPI18N.getString("zp.officelocation"),userObj.locName,"PI_work_loca",!0)),ZPUtil.Validation.isEmpty(result.shiftName)||infocontainer.append(ZPUserProfile.Component.myProfDtsCard(ZPI18N.getString("zp.shiftsig"),result.shiftName,"PI_shift",!0)),ZPUtil.Validation.isEmpty(userObj.workPhone)||infocontainer.append(ZPUserProfile.Component.myProfDtsCard(ZPI18N.getString("zp.local.Workphonenum"),userObj.workPhone,"PI_work_mob",!0)),0!=infocontainer.children().length?card:""},XoxodayIntegration:{ProfileView:{popupTemplate:`<div class="alert_contain">\n\t\t\t\t\t\t\t\t\t\t<i class="blubg PI_whatnew"></i>\n\t\t\t\t\t\t\t\t\t\t<div class="cont">\n\t\t\t\t\t\t\t\t\t\t\t<h3>\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="MB10"><img src="${ZPeople.getResourceURL(imageUrl+"l_xoxoday.png")}" alt="xoxoday" width="100"></div>\n\t\t\t\t\t\t\t\t\t\t\t\t${ZPI18N.getString("zp.xoxoday.gift")}\n\t\t\t\t\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t\t\t\t\t\t<div id="xoxoday-gift-points" class="zpl_giftredmfrm">\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="zpl_secn">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<label>${ZPI18N.getString("zp.xoxoday.availablepoints")}</label>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input type="text" id="available-points" class="ztextbox disabled">\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="zpl_secn">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<label>${ZPI18N.getString("zp.xoxoday.currentpoints")}</label>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input type="text" id="total-points" class="ztextbox disabled">\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="zpl_secn">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<label>${ZPI18N.getString("zp.xoxoday.pointstobewareded")}</label>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input type="text" id="assinging-points" class="ztextbox">\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="zpl_secn">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<label>${ZPI18N.getString("zp.xoxoday.citation")}</label>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input type="text" id="citation" class="ztextbox">\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>`,constructPopup:_=>{if(0==$(settingsPage.mainWrapId).find("#tabxoxoday-assign-popup").length){var popupTab=new Tab("xoxoday-assign-popup",ZPUserProfile.Component.XoxodayIntegration.ProfileView.assignPopupHTML,ZPUserProfile.Component.XoxodayIntegration.ProfileView.assignPoints);ZPUserProfile.Component.XoxodayIntegration.ProfileView.AssignPopup=new popupModal("",popupTab),ZPUserProfile.Component.XoxodayIntegration.ProfileView.AssignPopup.setContainerAsBody(!0),ZPUserProfile.Component.XoxodayIntegration.ProfileView.AssignPopup.save=ZPI18N.getString("zp.xoxoday.assign"),ZPUserProfile.Component.XoxodayIntegration.ProfileView.AssignPopup.cancel=ZPI18N.getString("zp.cancel"),ZPUserProfile.Component.XoxodayIntegration.ProfileView.AssignPopup.setCloseCallback(()=>ZPUserProfile.Component.XoxodayIntegration.ProfileView.clearPopupFields())}ZPUserProfile.Component.XoxodayIntegration.ProfileView.AssignPopup.construct(),document.querySelector("#tabxoxoday-assign-popup").classList.add("zpl_malrtmsg"),document.querySelector("#tabxoxoday-assign-popup #modalFooter").classList.add("DNI"),ZPUserProfile.Component.XoxodayIntegration.ProfileView.loader=new LoadingClass($("#cardxoxoday-assign-popup")),ZPUserProfile.Component.XoxodayIntegration.ProfileView.loader.add(),ZPeople.Request.send("/integrations/xoxoday/getAdminPoints",{requestedZUID:ZPUserProfile.info.getUserInfo().id},function(response){if(void 0!=response&&1===response[0]){let availablePoints=response[1].adminPoints,userTotalPoints=void 0!==response[1].userTotalPoints?response[1].userTotalPoints:"-";document.querySelector("#xoxoday-gift-points #available-points").value=availablePoints,document.querySelector("#xoxoday-gift-points #total-points").value=userTotalPoints}else ZAlertBanner.show({message:response[1].msg,type:"error",hideDelay:3e3,closeButton:!0,icon:!0});document.querySelector("#tabxoxoday-assign-popup #modalFooter").classList.remove("DNI"),ZPUserProfile.Component.XoxodayIntegration.ProfileView.loader.remove()})},assignPopupHTML:_=>{var cardId="cardxoxoday-assign-popup";""==$("#modal_Container").find("#"+cardId).html().trim()&&$("#modal_Container").find("#"+cardId).html(ZPUserProfile.Component.XoxodayIntegration.ProfileView.popupTemplate)},assignPoints:_=>{document.querySelector("#tabxoxoday-assign-popup #sliderSbt").classList.add("disabled");let erecno=ZPUserProfile.info.getUserId(),points=document.querySelector("#xoxoday-gift-points #assinging-points").value,citation=document.querySelector("#xoxoday-gift-points #citation").value;Number.isInteger(+points)?ZPeople.Request.send("/integrations/xoxoday/sendPoints",{erecNo:erecno,amount:points,citation:citation},function(result,params){result[1].isSuccess?(ZPUserProfile.Component.XoxodayIntegration.ProfileView.AssignPopup.close(),ZAlertBanner.show({message:pts+" "+ZPI18N.getString("zp.pointssent"),type:"success",hideDelay:3e3,closeButton:!0,icon:!0})):ZAlertBanner.show({message:ZPI18N.getString("zp.xoxoday.assignerror"),type:"error",hideDelay:3e3,closeButton:!0,icon:!0}),document.querySelector("#tabxoxoday-assign-popup #sliderSbt").classList.remove("disabled")}):ZAlertBanner.show({message:ZPI18N.getString("zp.sendfailure"),type:"error",hideDelay:3e3,closeButton:!0,icon:!0})},clearPopupFields:_=>{document.querySelector("#xoxoday-gift-points #assinging-points").value="",document.querySelector("#xoxoday-gift-points #citation").value=""}}},invalidPage:()=>{let page=$('<div class="zpl_mspace_out"><div class="zpl_mspace_wrap"><div class="zpl_Emptydata"> <div> <div class="zpl_emptimg zp_nd_404"></div> <h4>'+ZPI18N.getString("zp.message.usernotfound")+"</h4> <p></p> </div> </div></div></div>");return page.prepend(ZPUserProfile.Component.back()),page},inputModel:(title,info,submitTxt,submitcallback,type,iconclass,option,conf)=>{let model=$('<div id="addTagMdl" data-modal-box="alrttxtarea" class="zpl_mdl zpl_malrtmsg zpl_mopen"><div class="zpl_minr"><a class="_cls PI_cls"></a><div class="zpl_mcnt"><div class="alert_contain MB10"><i class="ico '+iconclass+'"></i><div class="cont"><h3>'+title+"</h3>"+(info?"<p>"+info+"</p>":"")+'</div><div class="zpl_secn"><div id="input_fld"></div></div></div><div class="maxhgt300 moredtls_cont text-left zpl_crdcnt '+(conf&&conf.containerClass?conf.containerClass:"")+'"></div></div><div class="zpl_mfoter"><button field="submit" type="button" class="zlabel zlabel--blue zlabel--medium submit">'+submitTxt+'</button><button type="button" class="zlabel zlabel--outline zlabel--medium cancel">'+ZPI18N.getString("zp.cancel")+"</button></div></div></div>"),id=conf&&conf.inputId?conf.inputId:"model_input_fld",fieldwrap=model.find("#input_fld"),defVal=conf&&conf.defVal?conf.defVal:"";if("input"==type)fieldwrap.append('<input id="'+id+'" type="text" placeholder="type..." class="ztextbox">');else if("txtarea"==type)fieldwrap.append('<textarea id="'+id+'" class="ztextbox" data-zbp-bound="true"></textarea>');else if("select"==type){fieldwrap.append('<select id="'+id+'" class="ztextbox" data-zbp-bound="true"></select>'),option.unshift({[conf.lable]:ZPI18N.getString("zp.select"),[conf.value]:"-1"});let comOption={dataMapping:{label:conf.lable,text:conf.lable,value:conf.value},dropdownList:{width:"fit-content"}};conf.callback&&(comOption.change=conf.callback),ZPeopleComponents.select(fieldwrap.find("#"+id),comOption);var selectComponent=ZPeopleComponents.select(fieldwrap.find("#"+id));option&&option.length>0&&selectComponent.addOption(option)}"select"!=type&&fieldwrap.find("#"+id).val(ZPeople.decodeTxt(defVal)),model.find("._cls.PI_cls,button.cancel").on("click",function(){if("select"==type){var selectComponent=ZPeopleComponents.select(fieldwrap.find("#"+id));selectComponent&&selectComponent.destroy()}Layout.Page.parentContainer.find("#addTagMdl").remove()});var closeInputModalOnescape=function(event){"Escape"===event.key&&(model.find("._cls.PI_cls,button.cancel").click(),$(document).off("keydown",closeInputModalOnescape))};$(document).on("keydown",closeInputModalOnescape),model.find("button.submit").on("click",function(event){submitcallback(model)}),Layout.Page.parentContainer.append(model),model.find("#"+id).focus()},accFHPL:()=>$('<a class="d-flexclmcap8 zpl_ph2 zpl_w-auto zpl_ibg"><i class="PI_redirect"></i>'+ZPI18N.getString("zp.accessmyfhpl")+"</a>").on("click",function(){ZPeople.Request.send("/integrations/fhpl/getSSOConstructedUrl",{},function(response){200==response.code&&void 0!==response.redirectURL?window.open(response.redirectURL,"_blank"):ZPeople.Message.showFailureMsg(response.msg)})}),accOffBoardingRecord:offboardingData=>$('<button class="zlabel zlabel-primary zlabel--medium zpl_servntce zpl_servcicn"><i class="PI_s_offboarding"></i><span>Serving Notice</span></button>').on("click",function(){offboardingData.canView&&Layout.PageUtil.loadFiles(["offboarding_common.min.js","offboarding_operations.min.js","offboarding_feedback.min.js"],()=>{Offboarding.View.load(offboardingData.recordId)})}),accPayslips:()=>$('<a class="d-flexclmcap8 zpl_ph2 zpl_w-auto zpl_ibg"><i class="PI_redirect"></i>'+ZPI18N.getString("zp.gtlogintopayroll")+"</a>").on("click",function(){ZPeople.Request.send("/integrations/payroll/LoginToPayroll",{typeOfUser:"ey"},function(response){null!=response&&window.open(response.url,"_blank")})}),nodata:(className,message)=>'<div id="nodataImg" class="zpl_crd zpl_nodata"> <div class="zpl_crdcnt"> <div class="zpl_Emptydata"><div><div class="zpl_emptimg '+className+'"></div><h4>'+(message||"")+"</h4></div></div></div></div>",ADD_ICN:(type,message,callback)=>{let addOption=$('<div type="'+type+'" class="qb_lst qb_lstcrt"><i class="PI_plus"></i><h6>'+message+"</h6></div>");return addOption.find(".PI_plus").on("click",function(){callback()}),addOption}};var PersonalSettings={};PersonalSettings.Page={show:()=>{if(PersonalSettings.isLoaded)PersonalSettings.Layout.addClass("zpl_mopen");else{let layout=PersonalSettings.Components.layout();Layout.Page.parentContainer.append(layout),$(PersonalSettings.Layout).remove(),PersonalSettings.Layout=layout;let container=layout.find(".zpl_act.container");container.html('<div class="lodngH100 zpl_Empdatafxd">'+ZPeople.LOADING_HTML+"</div>"),PersonalSettings.Page.constructField(container)}},close:()=>{if(PersonalSettings.isLoaded&&PersonalSettings.isEdited){var alertInfo=new InfoAlertMessage(ZPI18N.getString("zp.zpalert"),ZPI18N.getString("zp.unsavedchangesalert"));alertInfo.yesButtonText=ZPI18N.getString("zp.confirm"),alertInfo.setCallback(function(){void 0==PersonalSettings.Components.previousUploadedCovImg&&void 0!=PersonalSettings.Components.COVERIMG&&PersonalSettings.Components.deleteCoverImg(PersonalSettings.Layout.find("[upload-box]")),void 0!=PersonalSettings.Components.previousUploadedCovImg&&ZPeople.Request.send("/users/deletePersonalCoverImage",{},function(){PersonalSettings.Layout.find("[upload-box]").empty(),PersonalSettings.Layout.find("[upload-box]").attr("upload-box","false"),PersonalSettings.Layout.find("[upload-box]").append($(PersonalSettings.Components.changebtnuploaded(PersonalSettings.Components.previousUploadedCovImg,PersonalSettings.Components.previousUploadedCovImgName)))}),PersonalSettings.Components.isUploadImgDel=!1,PersonalSettings.Page.resetSettings(),PersonalSettings.isEdited=!1,PersonalSettings.Page.close()}),alertInfo.show()}else PersonalSettings.Layout.find("button.submit").addClass("disabled"),PersonalSettings.Layout.removeClass("zpl_mopen")},constructSubTabs:container=>{container.append('<section class="mspace_cntwrap"><div class="zpl_tabcnt"><div id="ps_general"></div></section>')},constructField:container=>{var psparams={conreqcsr:csrfToken,method:"getPersonalSettingDetails"};ZPeople.Request.send("/getPersonalSetting.zp",psparams,function(response,param,details){PersonalSettings.Datas={user_theme:!$("body").hasClass("ZPDark"),user_birthdy:!response.emloyeeWishOptions.isBdayUserAllowed,user_wding:!response.emloyeeWishOptions.isWedAnUserAllowed,user_workAniv:!response.emloyeeWishOptions.isWorkAnUserAllowed,user_mobilePerm:response.emloyeeWishOptions.isPhoneNumberShowEnabled,user_applock:response.emloyeeWishOptions.isApplockShowEnabled,userTimeZone:response.accTimeZone,userCountry:response.accCountry.toUpperCase(),userLanguage:response.accLanguage,feed_depNtfy:response.feed_depNtfy,feed_groupNtfy:response.feed_groupNtfy,feed_mentionNtfy:response.feed_mentionNtfy,languageList:response.languageList},container.empty();let permissionStng={list:[],callback:()=>PersonalSettings.Page.enableSubmit};ZPI18N.getString("zp.menucolor"),$("body").hasClass("ZPDark");$.each(response.timeZoneList,function(index,entry){entry.options=entry.list,delete entry.list});let localSettings={language:{option:response.languageList,lable:"name",value:"code",isGroupList:!0,fieldDisName:ZPI18N.getString("zp.ps.language"),fieldId:"pst_language",changeCallback:PersonalSettings.Page.language.optionChangeCallback,selected:response.accLanguage,isInfoEleNeeded:!0},country:{option:response.countryList,lable:"name",value:"code",fieldDisName:ZPI18N.getString("zp.country"),fieldId:"pst_contry",selected:response.accCountry.toUpperCase(),changeCallback:PersonalSettings.Page.enableSubmit},timezone:{option:response.timeZoneList,lable:"name",value:"code",isGroupList:!0,isInformativeTextNeeded:!0,optgroupLabel:"disp",options:"options",fieldDisName:ZPI18N.getString("zp.ps.timezone"),fieldId:"pst_timezone",selected:response.accTimeZone,changeCallback:PersonalSettings.Page.enableSubmit}},feedsSettings={list:[{lable:ZPI18N.getString("zp.notifymentionmessage"),attr:{fieldName:"feed_mentionNtfy"},id:"f_mention",isEnabled:!response.feed_mentionNtfy},{lable:ZPI18N.getString("zp.notifydeptgrpmessage",[ZPI18N.getString("zp.sdepartment")]),attr:{fieldName:"feed_depNtfy"},id:"f_department",isEnabled:!response.feed_depNtfy},{attr:{fieldName:"feed_groupNtfy"},id:"f_group",lable:ZPI18N.getString("zp.notifydeptgrpmessage",[ZPI18N.getString("zp.sgroup")]),isEnabled:!response.feed_groupNtfy}],callback:()=>PersonalSettings.Page.enableSubmit};response.emloyeeWishOptions.orgBdayBuddiesAllowed&&response.emloyeeWishOptions.isBirthdayHideAllowed&&permissionStng.list.push({lable:ZPI18N.getString("zp.ps.hidebirthday"),isEnabled:response.emloyeeWishOptions.isBdayUserAllowed,attr:{fieldName:"USER_BDAY_ALLOWED"},id:"pst_hidebrtdy"}),response.emloyeeWishOptions.orgWeddingAnnivAllowed&&response.emloyeeWishOptions.isWedAnnHideAllowed&&permissionStng.list.push({lable:ZPI18N.getString("zp.ps.hideweddinganniversary"),isEnabled:response.emloyeeWishOptions.isWedAnUserAllowed,attr:{fieldName:"USER_WEDDINGDAY_ALLOWED"},id:"pst_hidewdingansry"}),response.emloyeeWishOptions.orgWorkAnnivAllowed&&response.emloyeeWishOptions.isWorkAnnHideAllowed&&permissionStng.list.push({lable:ZPI18N.getString("zp.ps.hideworkanniversary"),isEnabled:response.emloyeeWishOptions.isWorkAnUserAllowed,attr:{fieldName:"USER_WORKANNIVERSARY_ALLOWED"},id:"pst_hidewrkansry"}),response.emloyeeWishOptions.isMobileHideAllowed&&permissionStng.list.push({lable:ZPI18N.getString("zp.ps.hidephonenumber"),attr:{fieldName:"USER_PHONE_NUMBER_ALLOWED"},isEnabled:!response.emloyeeWishOptions.isPhoneNumberShowEnabled,id:"pst_hidemn"}),PersonalSettings.Components.showPredefinedImgs=response.showPredefinedImgs,PersonalSettings.Components.showUploadCoverImgs=response.showUploadCovImgs,PersonalSettings.Components.isPersonalCoverImageUpdated=response.isPersonalCoverImageUpdated,PersonalSettings.Components.previousUploadedCovImg=response.CoverImg.CoverImgkey,PersonalSettings.Components.previousUploadedCovImgName=response.CoverImg.filename,PersonalSettings.Components.COVERIMG=response.CoverImg.CoverImgkey,PersonalSettings.Components.COVERIMGNAME=response.CoverImg.filename,PersonalSettings.Components.usePredefinedImg=response.CoverImg.isPredefinedCoverImg,container.append(PersonalSettings.Components.header(response.CoverImg.PredefinedImg,PersonalSettings.Components.COVERIMG)),PersonalSettings.Page.constructSubTabs(container),PersonalSettings.Components.setTabSwitch(container),(container=container.find("#ps_general")).append(PersonalSettings.Components.coverImage(response.emloyeeWishOptions.userCoverImgId,PersonalSettings.Components.COVERIMG,PersonalSettings.Components.COVERIMGNAME,response.UseOrgImage)),PersonalSettings.Page.permissionCheckCoverImg(),container.append(PersonalSettings.Components.localSettings(localSettings)),container.append(PersonalSettings.Components.permissionsSettings(permissionStng)),container.append(PersonalSettings.Components.feedsNotification(feedsSettings)),PersonalSettings.isLoaded=!0},void 0,()=>{PersonalSettings.isLoaded=!1})},permissionCheckCoverImg:()=>{PersonalSettings.Components.showPredefinedImgs||PersonalSettings.Components.showUploadCoverImgs||Layout.Page.pageContWrapper.find("#ps_general>.zpl_crd").first().addClass("DNI"),!PersonalSettings.Components.showPredefinedImgs&&PersonalSettings.Components.showUploadCoverImgs&&(Layout.Page.pageContWrapper.find("#ps_general>.zpl_crd").first().find(".zpl_crdcnt").children().find("#chng_coverimg").addClass("DNI"),Layout.Page.pageContWrapper.find("#ps_general>.zpl_crd").first().find(".zpl_crdcnt").children().find(".zpl_secn").first().addClass("DNI")),PersonalSettings.Components.showPredefinedImgs&&!PersonalSettings.Components.showUploadCoverImgs&&(Layout.Page.pageContWrapper.find("#ps_general>.zpl_crd").first().find(".zpl_crdcnt").children().find(".zpl_secn").first().addClass("DNI"),Layout.Page.pageContWrapper.find("#ps_general>.zpl_crd").first().find(".zpl_crdcnt").children().find("#uploadCovImg").addClass("DNI"))},changeCoverImg:event=>{let selectedElm=$(event.currentTarget),coverId=selectedElm.attr("img");coverImgPersonal=PersonalSettings.Layout.find(".zpl_mspace_wrap.BGT"),coverImgPersonal.find(".zpl_myprofhd").length>0&&(coverImgPersonal.find(".zpl_myprofhd").remove(),coverImgPersonal.prepend('<div class="zpl_myprofhd zpl_mypro_cvr"></div>')),PersonalSettings.Components.usePredefinedImg=!0,selectedElm.addClass("zpl_act").siblings().removeClass("zpl_act"),PersonalSettings.Layout.find(".zpl_mspace_wrap.BGT .zpl_myprofhd").removeClass("zpl_mypro_cvr0 zpl_mypro_cvr1 zpl_mypro_cvr2 zpl_mypro_cvr3 zpl_mypro_cvr4 zpl_mypro_cvr5 zpl_mypro_cvr6 zpl_mypro_cvr7 zpl_mypro_cvr8 zpl_mypro_cvr9 zpl_mypro_cvr10").addClass("zpl_mypro_cvr"+coverId),PersonalSettings.Components.isUploadImgDel=!1,PersonalSettings.Page.enableSubmit()},updatePesonalSettings:event=>{let params={};PersonalSettings.Layout.find("button.submit").addClass("disabled"),PersonalSettings.Components.fldId.forEach(function(fldObj){if(fldObj.isSelect){let zcomp=ZPeopleComponents.select($("#"+fldObj.id));zcomp&&(params[fldObj.fieldName]=zcomp.getValue())}else if(fldObj.isToggle){let zcomp=ZPeopleComponents.toggleswitch($("#"+fldObj.id));zcomp&&("user_theme"==fldObj.fieldName?params[fldObj.fieldName]=zcomp.checked?0:1:params[fldObj.fieldName]=zcomp.checked?1:0)}}),params.isPredefinedCoverImg=PersonalSettings.Components.usePredefinedImg,params.userCoverImg=PersonalSettings.Layout.find("#chng_coverimg").children(".zpl_act").attr("img"),params.isUploadCovImgDel=PersonalSettings.Components.isUploadImgDel,ZPeople.Request.send("/users/updatePersonalSettings",{personalSettingParams:JSON.stringify(params)},function(response){if(response.success){response=response.userSutObj,PersonalSettings.Components.previousCovImg=parseInt(ZPeople.CURR_USER.userCoverImgId),PersonalSettings.Components.previousUploadedCovImg=response.PROFILE_COVER_IMG.CoverImgkey,PersonalSettings.Components.previousUploadedCovImgName=response.PROFILE_COVER_IMG.filename,PersonalSettings.Datas.user_theme="1"!=response.USER_MAIN_THEME,PersonalSettings.Datas.user_birthdy="1"==response.USER_BDAY_ALLOWED,PersonalSettings.Datas.user_wding="1"==response.USER_WEDDINGDAY_ALLOWED,PersonalSettings.Datas.user_workAniv="1"==response.USER_WORKANNIVERSARY_ALLOWED,PersonalSettings.Datas.user_mobilePerm="1"==response.USER_PHONE_NUMBER_ALLOWED,PersonalSettings.Datas.user_applock="1"==response.USER_APPLOCK_ALLOWED,PersonalSettings.Datas.userTimeZone=response.accTimeZone,PersonalSettings.Datas.userCountry=response.accCountry.toUpperCase(),ZPeople.CURR_USER.userCoverImgId=response.USER_COVER_IMAGE,PersonalSettings.Components.COVERIMG=response.PROFILE_COVER_IMG.CoverImgkey,PersonalSettings.Components.COVERIMGNAME=response.PROFILE_COVER_IMG.filename,PersonalSettings.Components.usePredefinedImg=response.PROFILE_COVER_IMG.isPredefinedCoverImg,PersonalSettings.Datas.feed_depNtfy=response.feed_depNtfy,PersonalSettings.Datas.feed_groupNtfy=response.feed_groupNtfy,PersonalSettings.Datas.feed_mentionNtfy=response.feed_mentionNtfy;let isLangChanged=PersonalSettings.Datas.userLanguage!=response.accLanguage;PersonalSettings.Datas.userLanguage=response.accLanguage,PersonalSettings.Components.usePredefinedImg&&(PersonalSettings.Layout.find("#uploadCovImg").find("[upload-box]").empty(),PersonalSettings.Layout.find("#uploadCovImg").find("[upload-box]").attr("upload-box",!0),PersonalSettings.Layout.find("#uploadCovImg").find("[upload-box]").append($(`<h5> ${ZPI18N.getString("zp.lms.uploadfrom")} <a class="zpl_lnk"><i class="PI_desktop"></i>Desktop</a> </h5>`))),PersonalSettings.Datas.user_theme?$("body").removeClass("ZPDark").addClass("ZPLight"):$("body").removeClass("ZPLight").addClass("ZPDark"),ZPUserProfile.Page.setCoverImage(null,null,response.PROFILE_COVER_IMG),ZPeople.Message.showSuccessMsg(ZPI18N.getString("zp.updatedsuccessfully")),PersonalSettings.isEdited=!1,PersonalSettings.Page.close(),isLangChanged&&setTimeout(function(){window.location.reload()},1e3)}else ZPeople.Message.showFailureMsg(ZPI18N.getString("zp.sorryservererror")),PersonalSettings.Layout.find("button.submit").removeClass("disabled")},void 0,function(){PersonalSettings.Layout.find("button.submit").removeClass("disabled"),ZPeople.Message.showFailureMsg(ZPI18N.getString("zp.sorryservererror"))})},resetSettings:ifDesable=>{if(PersonalSettings.Components.fldId.forEach(function(fldObj){let value=PersonalSettings.Datas[fldObj.fieldName];if(fldObj.isSelect){let zcomp=ZPeopleComponents.select($("#"+fldObj.id));zcomp&&(zcomp.setValue(value),ifDesable&&zcomp.setAttributes({disabled:!0}))}else if(fldObj.isToggle){let zcomp=ZPeopleComponents.toggleswitch($("#"+fldObj.id));zcomp&&(value?zcomp.switchOn():zcomp.switchOff(),ifDesable&&zcomp.setAttributes({disabled:!0}))}}),void 0==PersonalSettings.Components.previousUploadedCovImg){1==PersonalSettings.Layout.find(".zpl_mspace_wrap").length&&(PersonalSettings.Layout.find(".zpl_mspace_wrap").find(".zpl_myprofhd").remove(),PersonalSettings.Layout.find(".zpl_mspace_wrap").prepend($('<div class="zpl_myprofhd zpl_mypro_cvr'+(ZPeople.CURR_USER.userCoverImgId?ZPeople.CURR_USER.userCoverImgId:0)+'"></div>')),PersonalSettings.Layout.find("#chng_coverimg").children(".zpl_act").removeClass("zpl_act"))}else{const safeCoverImgKey=encodeURIComponent(PersonalSettings.Components.previousUploadedCovImg);PersonalSettings.Layout.find(".zpl_mspace_wrap").find(".zpl_myprofhd").removeClass("zpl_mypro_cvr0 zpl_mypro_cvr1 zpl_mypro_cvr2 zpl_mypro_cvr3 zpl_mypro_cvr4 zpl_mypro_cvr5 zpl_mypro_cvr6 zpl_mypro_cvr7 zpl_mypro_cvr8 zpl_mypro_cvr9 zpl_mypro_cvr10"),PersonalSettings.Layout.find(".zpl_mspace_wrap").find(".zpl_myprofhd").css("background-image",""),PersonalSettings.Layout.find(".zpl_mspace_wrap").find(".zpl_myprofhd").css("background-image","url("+CompanySetup.NewSetting.defaultPhotoUrl+safeCoverImgKey+")")}PersonalSettings.Components.usePredefinedImg=void 0==PersonalSettings.Components.previousUploadedCovImg,PersonalSettings.Components.usePredefinedImg?(PersonalSettings.Layout.find(".zpl_mspace_wrap.BGT .zpl_myprofhd").removeClass("zpl_mypro_cvr0 zpl_mypro_cvr1 zpl_mypro_cvr2 zpl_mypro_cvr3 zpl_mypro_cvr4 zpl_mypro_cvr5 zpl_mypro_cvr6 zpl_mypro_cvr7 zpl_mypro_cvr8 zpl_mypro_cvr9 zpl_mypro_cvr10").addClass("zpl_mypro_cvr"+ZPeople.CURR_USER.userCoverImgId),PersonalSettings.Layout.find('#chng_coverimg [img="'+ZPeople.CURR_USER.userCoverImgId+'"]').addClass("zpl_act").siblings().removeClass("zpl_act"),PersonalSettings.Layout.find(".zpl_mspace_wrap").find(".zpl_myprofhd").removeClass("zpl_mypro_cvr0 zpl_mypro_cvr1 zpl_mypro_cvr2 zpl_mypro_cvr3 zpl_mypro_cvr4 zpl_mypro_cvr5 zpl_mypro_cvr6 zpl_mypro_cvr7 zpl_mypro_cvr8 zpl_mypro_cvr9 zpl_mypro_cvr10").addClass("zpl_mypro_cvr"+ZPeople.CURR_USER.userCoverImgId)):(PersonalSettings.Layout.find('#chng_coverimg [img="'+ZPeople.CURR_USER.userCoverImgId+'"]').removeClass("zpl_act"),PersonalSettings.isEdited=!1,PersonalSettings.Layout.find("button.submit").addClass("disabled"))},language:{optionChangeCallback:()=>{PersonalSettings.Page.language.setInfoText(),PersonalSettings.Page.enableSubmit()},setInfoText:function(container){container||(container=$("#user_personalsettings")),PersonalSettings.Page.language.isUnSupportedLang(container)?container.find("#pst_language-info").text(ZPI18N.getString("zp.ps.defaultlang")):container.find("#pst_language-info").text("")},isUnSupportedLang:container=>{let value="",isUnSupported=!1;ZPeopleComponents.select(container.find("#pst_language"))&&(value=ZPeopleComponents.select(container.find("#pst_language")).getValue());let lang=PersonalSettings.Datas.languageList.find(langObj=>langObj.code===value);return lang&&"unSupported"==lang.type&&(isUnSupported=!0),isUnSupported}},enableSubmit:()=>{PersonalSettings.isEdited=!0,PersonalSettings.Layout.find("button.submit").removeClass("disabled")}},PersonalSettings.Components={showPredefinedImgs:!1,showUploadCoverImgs:!1,COVERIMG:null,COVERIMGNAME:null,previousCovImg:0,previousUploadedCovImg:void 0,previousUploadedCovImgName:null,usePredefinedImg:!0,isPersonalCoverImageUpdated:!1,isUploadImgDel:!1,ImgUrls:[],fldId:[{id:"pst_dark",fieldName:"user_theme",isToggle:!0},{id:"pst_hidebrtdy",fieldName:"user_birthdy",isToggle:!0},{id:"pst_hidewdingansry",fieldName:"user_wding",isToggle:!0},{id:"pst_hidewrkansry",fieldName:"user_workAniv",isToggle:!0},{id:"pst_hidemn",fieldName:"user_mobilePerm",isToggle:!0},{id:"pst_hideapplock",fieldName:"user_applock",isToggle:!0},{id:"f_mention",fieldName:"feed_mentionNtfy",isToggle:!0},{id:"f_department",fieldName:"feed_depNtfy",isToggle:!0},{id:"f_group",fieldName:"feed_groupNtfy",isToggle:!0},{id:"pst_language",fieldName:"userLanguage",isSelect:!0},{id:"pst_contry",fieldName:"userCountry",isSelect:!0},{id:"pst_timezone",fieldName:"userTimeZone",isSelect:!0}],menuCards:(header,description,body)=>{let card=$('<div class="zpl_crd"><div class="zpl_crdhdr zpl_rgt"><div><h4>'+header+"</h4>"+(description?"<p>"+description+"</p>":"")+'</div></div><div class="zpl_crdcnt"></div></div>');return card.find(".zpl_crdcnt").append(body),card},header:(selBg,coverImg)=>{const safeCoverImgKey=encodeURIComponent(coverImg);let header=$('<div class="zpl_crd zpl_mspace_wrap BGT b0I"><div class="zpl_myprof-bsinfo"><div class="pg_cont"></div></div></div>');return void 0!=coverImg&&""!=coverImg?header.prepend($('<div class="zpl_myprofhd"></div>').css("background-image","url("+CompanySetup.NewSetting.defaultPhotoUrl+safeCoverImgKey+")")):header.prepend($('<div class="zpl_myprofhd zpl_mypro_cvr'+selBg+'"></div>')),header.find(".pg_cont").append(ZPUserProfile.Component.userInfo(ZPeople.CURR_USER,!1,!0)),PersonalSettings.Components.getSubTabs().insertAfter(header.find(".pg_cont")),header},getSubTabs:()=>{return $('<div class="mspace_actband"><div><ul class="zpl_tabpane"><li tab-nav="ps_general" class="zpl_act"><a>'+ZPI18N.getString("zp.general")+"</a></li></ul></div></div>")},setTabSwitch:container=>{$(container).find("div.mspace_actband ul li").off("click").on("click",function(){$(this).addClass("zpl_act").siblings().removeClass("zpl_act"),$(container).find("[id="+$(this).attr("tab-nav")+"]").addClass("zpl_act").removeClass("zpl_DNI").siblings().removeClass("zpl_act").addClass("zpl_DNI")})},localSettings:data=>{let container=$("<div></div>"),flevel=$('<div class="zpl_secn zpl_twoclum"></div>'),slevel=$('<div class="zpl_secn zpl_twoclum"></div>');return container.append(flevel,slevel),PersonalSettings.Components.dropdown(data.language,flevel),PersonalSettings.Page.language.setInfoText(container),PersonalSettings.Components.dropdown(data.country,flevel),PersonalSettings.Components.dropdown(data.timezone,slevel),PersonalSettings.Components.menuCards(ZPI18N.getString("zp.ps.localesettings"),"",container)},permissionsSettings:optionList=>{if(optionList.list.length>0){let container=$("<div></div>");return PersonalSettings.Components.createOptions(container,optionList),PersonalSettings.Components.menuCards(ZPI18N.getString("zp.ps.permissions"),ZPI18N.getString("zp.ps.permissionsectiondescription"),container)}},feedsNotification:optionList=>{if(optionList.list.length>0){let container=$("<div></div>");return PersonalSettings.Components.createOptions(container,optionList),PersonalSettings.Components.menuCards(ZPI18N.getString("zp.ps.feedsnotification"),"",container)}},themeSettings:optionList=>{if(optionList.list.length>0){let container=$("<div></div>");return PersonalSettings.Components.createOptions(container,optionList),PersonalSettings.Components.menuCards(ZPI18N.getString("zp.ps.themesettings"),ZPI18N.getString("zp.ps.themesettingdescription"),container)}},changebtnuploaded:(coverimg,coverimgname)=>`<div class="zpl_atchd"><div><div class="zpl_atchimg">\n\t\t\t\t\t<img src="viewPhoto?filename=${coverimg}" alt="">\n\t\t\t\t</div>\n\t\t\t\t<div class="zpl_atchdtl"> \n\t\t\t\t\t<h4 ${ComponentsCommon.getTooltipHtml(coverimgname,{position:"top"},!0)}>${coverimgname}</h4>\n\t\t\t\t</div>\n\t\t\t\t<div class="zpl_atchicn">\n\t\t\t\t\t<i class="PI_delete"></i>\n\t\t\t\t</div></div></div>`,updateCoverImgOverAll:(uploadbtn,coverkey)=>{let personalSettingcoverImg=PersonalSettings.Layout.find(".zpl_mspace_wrap");const safeCoverImgKey=encodeURIComponent(coverkey);1==personalSettingcoverImg.length&&(PersonalSettings.Layout.find(".zpl_mspace_wrap").find(".zpl_myprofhd").removeClass("zpl_mypro_cvr0 zpl_mypro_cvr1 zpl_mypro_cvr2 zpl_mypro_cvr3 zpl_mypro_cvr4 zpl_mypro_cvr5 zpl_mypro_cvr6 zpl_mypro_cvr7 zpl_mypro_cvr8 zpl_mypro_cvr9 zpl_mypro_cvr10"),PersonalSettings.Layout.find(".zpl_mspace_wrap").find(".zpl_myprofhd").css("background-image",""),PersonalSettings.Layout.find(".zpl_mspace_wrap").find(".zpl_myprofhd").css("background-image","url("+CompanySetup.NewSetting.defaultPhotoUrl+safeCoverImgKey+")")),"false"===uploadbtn.attr("upload-box")&&(uploadbtn.find("h5").remove(),uploadbtn.append($(PersonalSettings.Components.changebtnuploaded(PersonalSettings.Components.COVERIMG,PersonalSettings.Components.COVERIMGNAME))),$(this).off("click")),PersonalSettings.Layout.find("#chng_coverimg").children(".zpl_act").removeClass("zpl_act"),PersonalSettings.Page.enableSubmit()},uploadCoverPhoto:uploadbtn=>{let popup=new imgUpload;popup.serverURL="/users/updateCoverPhoto",popup.aspectratio=9,popup.limit=5,popup.successcallback=(response=>{if(200==response.code)uploadbtn.attr("upload-box","false"),popup.destroy(),PersonalSettings.Components.usePredefinedImg=!1,PersonalSettings.Components.isUploadImgDel=!1;else if(response.msg)return void ZPeople.Message.showFailureMsg(response.msg);PersonalSettings.Components.COVERIMG=response.fileId,PersonalSettings.Components.COVERIMGNAME=response.filename,PersonalSettings.Components.updateCoverImgOverAll(uploadbtn,PersonalSettings.Components.COVERIMG)}),popup.show()},deleteCoverImg:uploadbtn=>{ZPeople.Request.send("/users/deletePersonalCoverImage",{},function(){if(uploadbtn.attr("upload-box","true"),"true"==uploadbtn.attr("upload-box")){uploadbtn.empty(),uploadbtn.append($(`<h5> ${ZPI18N.getString("zp.lms.uploadfrom")} <a class="zpl_lnk"><i class="PI_desktop"></i>Desktop</a> </h5>`)),1==PersonalSettings.Layout.find(".zpl_mspace_wrap").length&&(PersonalSettings.Layout.find(".zpl_mspace_wrap").find(".zpl_myprofhd").remove(),PersonalSettings.Layout.find(".zpl_mspace_wrap").prepend($('<div class="zpl_myprofhd zpl_mypro_cvr'+(ZPeople.CURR_USER.userCoverImgId?ZPeople.CURR_USER.userCoverImgId:0)+'"></div>')),PersonalSettings.Layout.find("#chng_coverimg").children(".zpl_act").removeClass("zpl_act")),PersonalSettings.Components.usePredefinedImg=!0,PersonalSettings.Layout.find("#chng_coverimg").children("[img="+ZPeople.CURR_USER.userCoverImgId+"]").addClass("zpl_act"),$(this).off("click")}})},coverImage:(selectedImg,coverimg,coverimgname,useOrgImg)=>{let bgWrap=$('<div><div id="chng_coverimg" class="zpl_mspacecover"></div></div>');bgWrap.append($(`<div class="zpl_secn"><em>${ZPI18N.getString("zp.welcomepageortxt")}</em></div>`)),bgWrap.append($(`<div class="zpl_secn" id="uploadCovImg">\n\t\t\t\t\t\t\t<div class="zpl_upld"> \n\t\t\t\t\t\t\t\t<div class="zpl_fldrp" upload-box="true">\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<p>\n                                    <span> ${ZPI18N.getString("zp.uploadedimageisgreater")}</span>\n                                </p>\n                                \n                            </div>\n                        </div>`));let bgContWrap=bgWrap.find(".zpl_mspacecover"),uploadbtn=bgWrap.find("[upload-box]");void 0==coverimg||""==coverimg||useOrgImg?uploadbtn.append($(`<h5> ${ZPI18N.getString("zp.lms.uploadfrom")} <a class="zpl_lnk"><i class="PI_desktop"></i>${ZPI18N.getString("zp.desktop")}</a> </h5>`)):(uploadbtn.attr("upload-box","false"),uploadbtn.append($(PersonalSettings.Components.changebtnuploaded(coverimg,coverimgname)))),uploadbtn.off("click").on("click",function(event){let target=$(event.target);if(target.closest(".zpl_lnk").length)"true"==uploadbtn.attr("upload-box")&&PersonalSettings.Components.uploadCoverPhoto(uploadbtn);else if(target.closest(".zpl_atchicn").length){if(target.closest(".zpl_atchicn").length){1==PersonalSettings.Layout.find(".zpl_mspace_wrap").length&&(PersonalSettings.Layout.find(".zpl_mspace_wrap").find(".zpl_myprofhd").remove(),PersonalSettings.Layout.find(".zpl_mspace_wrap").prepend($('<div class="zpl_myprofhd zpl_mypro_cvr'+(ZPeople.CURR_USER.userCoverImgId?ZPeople.CURR_USER.userCoverImgId:0)+'"></div>')),PersonalSettings.Layout.find("#chng_coverimg").children(".zpl_act").removeClass("zpl_act")),PersonalSettings.Layout.find("#uploadCovImg").find("[upload-box]").empty(),PersonalSettings.Layout.find("#uploadCovImg").find("[upload-box]").attr("upload-box",!0),PersonalSettings.Layout.find("#uploadCovImg").find("[upload-box]").append($(`<h5> ${ZPI18N.getString("zp.lms.uploadfrom")} <a class="zpl_lnk"><i class="PI_desktop"></i>Desktop</a> </h5>`)),PersonalSettings.Page.enableSubmit(),PersonalSettings.Components.isUploadImgDel=!0,PersonalSettings.Components.usePredefinedImg=!0,bgContWrap.find("[img="+(ZPeople.CURR_USER.userCoverImgId?ZPeople.CURR_USER.userCoverImgId:0)+"]").addClass("zpl_act")}}else{if(1==PersonalSettings.Layout.find(".zpl_mspace_wrap").find(".zpl_myprofhd").length&&"false"==uploadbtn.attr("upload-box")){PersonalSettings.Components.usePredefinedImg=!1;const safeCoverImgKey=encodeURIComponent(PersonalSettings.Components.COVERIMG);PersonalSettings.Layout.find(".zpl_mspace_wrap").find(".zpl_myprofhd").removeClass("zpl_mypro_cvr0 zpl_mypro_cvr1 zpl_mypro_cvr2 zpl_mypro_cvr3 zpl_mypro_cvr4 zpl_mypro_cvr5 zpl_mypro_cvr6 zpl_mypro_cvr7 zpl_mypro_cvr8 zpl_mypro_cvr9 zpl_mypro_cvr10"),PersonalSettings.Layout.find(".zpl_mspace_wrap").find(".zpl_myprofhd").css("background-image",""),PersonalSettings.Layout.find(".zpl_mspace_wrap").find(".zpl_myprofhd").css("background-image","url("+CompanySetup.NewSetting.defaultPhotoUrl+safeCoverImgKey+")"),PersonalSettings.Layout.find("#chng_coverimg").children(".zpl_act").removeClass("zpl_act"),PersonalSettings.Page.enableSubmit()}}});for(let i=0;i<10;i++)bgContWrap.append($('<div img="'+i+'" class="zpl_ms-thumb'+i+'"></div>').on("click",PersonalSettings.Page.changeCoverImg));return PersonalSettings.Components.usePredefinedImg&&PersonalSettings.Components.isPersonalCoverImageUpdated&&bgContWrap.find("[img="+selectedImg+"]").addClass("zpl_act"),PersonalSettings.Components.menuCards(ZPI18N.getString("zp.ps.changecoverimg"),"",bgWrap)},createOptions:(container,SettingsObj)=>{$.each(SettingsObj.list,function(index,value){var togggleSwitch="",isEnabled=!1;1==value.isEnabled?(togggleSwitch=PersonalSettings.Components.creatToggle(value.id,1),isEnabled=!1):(togggleSwitch=PersonalSettings.Components.creatToggle(value.id,0),isEnabled=!0),container.append('<div class="zpl_secn"><div><div class="zpl_tgsprt"><div class="zpl_tgl">'+togggleSwitch+" "+value.lable+"</div></div></div></div>");let options={};value.attr&&(options=value.attr),options.on=isEnabled,SettingsObj.callback&&(options.change=SettingsObj.callback()),ZPeopleComponents.toggleswitch($(container).find("#"+value.id),options)})},dropdown:(fieldData,container)=>{let lable=fieldData.fieldDisName,fieldId=fieldData.fieldId;var fieldHtml=$(`\n\t\t<div><label>${lable}</label>\n\t\t<div><select id="${fieldId}"></select>${fieldData.isInfoEleNeeded?"<span id='"+fieldData.fieldId+"-info' class='ztextbox--info__label'></span>":""}</div></div>\n\t\t`);container.append(fieldHtml);let filesDatas={contentType:"text-desc",informativeText:fieldData.value,dataMapping:{label:fieldData.lable,text:fieldData.lable,value:fieldData.value},dropdownList:{width:"fit-content"},showSearchField:!0,search:{delay:200},options:fieldData.option,selectedValue:fieldData.selected};fieldData.isGroupList&&(filesDatas.dataMapping.optgroupLabel="disp"),fieldData.isInformativeTextNeeded&&(filesDatas.dataMapping.informativeText=fieldData.value),fieldData.changeCallback&&(filesDatas.change=fieldData.changeCallback),ZPeopleComponents.select(fieldHtml.find("#"+fieldId),filesDatas)},creatToggle:(id,status)=>`<label class="btnactive MB0" ><div class="zpl_tgl"><input class="togbuttondis-js" id="${id}" changeStatus="`+status+'" /></div></label>',layout:()=>{let model=$('<div id="user_personalsettings" class="zpl_mdl zpl_mdlcrdctr zpl_myprosetbg zpl_mfull zpl_mopen"><div class="zpl_minr"><div class="zpl_mhder"><div><h4>'+ZPI18N.getString("zp.ps.personalsettings")+'</h4></div><a class="_cls PI_cls close_model"></a></div><div class="zpl_mcnt"><div class="zpl_mmnu"><div class="zpl_mmnurgt"><div class="zpl_act"><div class="zpl_iwrpr"><div class="zpl_iwrprrgt P0I"><section class="zpl_act container"></section></div></div></div></div></div></div><div class="zpl_mfoter zpl_btnsplt"><div><button type="button" class="disabled submit zlabel zlabel--blue zlabel--medium">'+ZPI18N.getString("zp.submit")+'</button><button type="button" class="cancel zlabel zlabel--outline zlabel--medium">'+ZPI18N.getString("zp.cancel")+"</button></div></div></div>");return model.find(".close_model,button.cancel").on("click",function(){PersonalSettings.Page.close()}),model.find("button.submit").on("click",function(){PersonalSettings.Page.updatePesonalSettings()}),model}};