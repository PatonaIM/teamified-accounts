"use strict";function zc0tO295(){var t=tTL(['<span class="zprogress__label zprogress__text--center">',"</span>"]);return zc0tO295=function(){return t},t}function zc0tO294(){var t=tTL(['<span class="zprogress__label">',"</span>"]);return zc0tO294=function(){return t},t}function zc0tO293(){var t=tTL([" ",' <div class="zprogress--circle zprogress"> ',' <svg class="zprogress__loader ','" style="width:',"px;height:",'px;"> <circle class="circle__track ','" cx="','" cy="','" r="','" stroke-dasharray="','" stroke-dashoffset="0" stroke-width="','" style="','"> <title>','</title> </circle> <circle class="circle__load ','" cx="','" cy="','" r="','" stroke-dasharray="','" stroke-dashoffset="','" stroke-width="','" style="','"> <title>',"</title> </circle> </svg> </div>"]);return zc0tO293=function(){return t},t}function zc0tO292(){var t=tTL(['<div class="ztooltip" ?style="','"> <div class="ztooltip__content"> <div class="ztooltip__text">','</div> </div> <div class="ztooltip__pointer ','" ?style="','" ></div> </div>']);return zc0tO292=function(){return t},t}function zc0tO291(){var t=tTL(['<span class="zprogress__text zprogress__text--inline ','" style="width:','" >',"</span>"]);return zc0tO291=function(){return t},t}function zc0tO290(){var t=tTL(['<span class="zprogress__text zprogress__text--inline zh-reversecolor ','">',"</span>"]);return zc0tO290=function(){return t},t}function zc0tO289(){var t=tTL(['<span class="zprogress__label">',"</span>"]);return zc0tO289=function(){return t},t}function zc0tO288(){var t=tTL([" ",' <div class="zprogress ','" ?style="','" > ',' <div class="zprogress__bar '," ",'" ?style="','" > '," </div> </div> "," \t"]);return zc0tO288=function(){return t},t}function zc0tO287(){var t=tTL(['<span class="zcolorselect__preview zh-transparentbg"><canvas style="background-color: ',';"></canvas></span>']);return zc0tO287=function(){return t},t}function zc0tO286(){var t=tTL(['<span class="zcolorselect__preview" style="','">',"</span>"]);return zc0tO286=function(){return t},t}function zc0tO285(){var t=tTL(['<span class="zcolorbutton__preview zh-nofill"></span>']);return zc0tO285=function(){return t},t}function zc0tO284(){var t=tTL(['<div class="zselectbox__selected"> '," </div> ",""]);return zc0tO284=function(){return t},t}function zc0tO283(){var t=tTL(["",""]);return zc0tO283=function(){return t},t}function zc0tO282(){var t=tTL(["<div>","</div>"]);return zc0tO282=function(){return t},t}function zc0tO281(){var t=tTL(['<div class="ztooltip__pointer"></div>']);return zc0tO281=function(){return t},t}function zc0tO280(){var t=tTL(['<div class="ztooltip__content">',"</div> ",""]);return zc0tO280=function(){return t},t}function zc0tO279(){var t=tTL(["<div class=\"ztooltip\" style='display:none;'>","</div>"]);return zc0tO279=function(){return t},t}function zc0tO278(){var t=tTL(['<i class="','">',"</i>"]);return zc0tO278=function(){return t},t}function zc0tO277(){var t=tTL(['<span class="zswitch__label">',"</span>"]);return zc0tO277=function(){return t},t}function zc0tO276(){var t=tTL(['<span class="zswitch__label">',"</span>"]);return zc0tO276=function(){return t},t}function zc0tO275(){var t=tTL(['<div class="zswitch__thumb ','">','</div><div class="zswitch__wrapper"><div class="zswitch__statescontainer ','" zc="container"><div class="zswitch__onstate" zc="on">',"",'</div><div class="zswitch__offstate" zc="off">',"","</div></div></div>"]);return zc0tO275=function(){return t},t}function zc0tO274(){var t=tTL(['<div type="input" tabindex="0" ?aria-label="','" ?id="','" ?role="','" class="zswitch ','" ?checked="','">',"</div>"]);return zc0tO274=function(){return t},t}function zc0tO273(){var t=tTL(['<div class="','">',"</div>"]);return zc0tO273=function(){return t},t}function zc0tO272(){var t=tTL(["",""]);return zc0tO272=function(){return t},t}function zc0tO271(){var t=tTL(['<div class="zinputfield__spinbuttonpane"> '," "," </div>"]);return zc0tO271=function(){return t},t}function zc0tO270(){var t=tTL(["<input class='zinputfield__textbox' tabindex=\"",'" ?aria-valuemin='," ?aria-valuemax="," ?readonly="," ?aria-readonly="," ?disabled="," ?aria-disabled="," ?maxlength=",">"]);return zc0tO270=function(){return t},t}function zc0tO269(){var t=tTL([""," "," "," "," "," ",""]);return zc0tO269=function(){return t},t}function zc0tO268(){var t=tTL(['<div class="zinputfield ','" ?title=',' tabindex="-1" role="spinbutton" style="width:','" ?id='," >","</div>"]);return zc0tO268=function(){return t},t}function zc0tO267(){var t=tTL(['<span class="zcolorbutton__preview zh-transparentbg"><canvas style="background-color: ',';"></canvas></span>']);return zc0tO267=function(){return t},t}function zc0tO266(){var t=tTL(['<span class="zcolorbutton__preview" style="','">',"</span>"]);return zc0tO266=function(){return t},t}function zc0tO265(){var t=tTL(['<span class="zcolorbutton__preview zh-nofill"></span>']);return zc0tO265=function(){return t},t}function zc0tO264(){var t=tTL(["",""]);return zc0tO264=function(){return t},t}function zc0tO263(){var t=tTL(['<button type="button">']);return zc0tO263=function(){return t},t}function zc0tO262(){var t=tTL([""," ",""]);return zc0tO262=function(){return t},t}function zc0tO261(){var t=tTL(['<div ?aria-label="','" id="','" role="splitbutton" class="zbutton--split ','">',"</div>"]);return zc0tO261=function(){return t},t}function zc0tO260(){var t=tTL(['<span class="zbutton__text">',"</span>"]);return zc0tO260=function(){return t},t}function zc0tO259(){var t=tTL(['<i class="zbutton__icon ',' "> '," </i>"]);return zc0tO259=function(){return t},t}function zc0tO258(){var t=tTL([""," "," ",""]);return zc0tO258=function(){return t},t}function zc0tO257(){var t=tTL(['<button ?aria-label="','" id="','" role="','" ?type="','" class="zbutton ','">',"</button>"]);return zc0tO257=function(){return t},t}function zc0tO256(){var t=tTL(["",""]);return zc0tO256=function(){return t},t}function zc0tO255(){var t=tTL(['<div ?aria-label="','" ?id="','" ?role="','" ?type="','" class="zbutton ','">',"</div>"]);return zc0tO255=function(){return t},t}function zc0tO254(){var t=tTL(['<div class="zcolorpicker__opacitycontainer"> '," "," </div>"]);return zc0tO254=function(){return t},t}function zc0tO253(){var t=tTL(["<button id=",' aria-label="','" role="button" type="button" class="zbutton zcolorpicker__navigatable zcolorpicker__actionbutton zbutton zcolorpicker__nocolorbutton"> ',' <span class="zbutton__text zcolorpicker__text">',"</span> </button>"]);return zc0tO253=function(){return t},t}function zc0tO252(){var t=tTL(["<button id=",' aria-label="','" role="button" type="button" class="zcolorpicker__navigatable zcolorpicker__actionbutton zbutton zcolorpicker__defaultcolorbutton"> <span class="zcolorpicker__icon" style="background-color: ',';"></span> <span class="zbutton__text zcolorpicker__text">',"</span> </button>"]);return zc0tO252=function(){return t},t}function zc0tO251(){var t=tTL(['<span class="zcolorpicker__colorfieldpreview zcolorpicker__transparentbg"> <div class="zcolorpicker__dynamiccolor" style="background-color: ',';"></div> </span>']);return zc0tO251=function(){return t},t}function zc0tO250(){var t=tTL(['<div class="zcolorpicker__colorfield"> '," <input id="," ?readonly=",' aria-label="','" class="zcolorpicker__textbox zcolorpicker__navigatable ','"> </div>']);return zc0tO250=function(){return t},t}function zc0tO249(){var t=tTL(['<div class= "zcolorpicker__colorfieldcontainer"> '," "," </div>"]);return zc0tO249=function(){return t},t}function zc0tO248(){var t=tTL(["<button id=",' aria-label="','" role="button" type="button" class="zcolorpicker__navigatable zcolorpicker__actionbutton zbutton zcolorpicker__morecolorbutton zbutton--menu"> ',' <span class="zbutton__text zcolorpicker__text">',"</span> "," </button>"]);return zc0tO248=function(){return t},t}function zc0tO247(){var t=tTL(['<div class="zcolorpicker__pointer"></div>']);return zc0tO247=function(){return t},t}function zc0tO246(){var t=tTL([""," ",' <div class="zcolorpicker__showhidecontainer"> <div class="zcolorpicker__default"> '," "," "," "," "," "," "," "," </div> "," </div> "]);return zc0tO246=function(){return t},t}function zc0tO245(){var t=tTL(['<div tabindex="-1" class="zcolorpicker__colormodefield zcolorpicker__hexcolorfield" > <div tabindex="-1" class="zinputfield"> <input id=',' data-zprop="hex" maxlength="7" class="zinputfield__textbox" aria-label=','> </div> <label class="zcolorpicker__hexcolorfieldlabel">',"</label> </div>"]);return zc0tO245=function(){return t},t}function zc0tO244(){var t=tTL(['<div class="zcolorpicker__commandbaractionsright"> '," </div>"]);return zc0tO244=function(){return t},t}function zc0tO243(){var t=tTL(['<div class="zcolorpicker__commandbaractionscenter"> '," </div>"]);return zc0tO243=function(){return t},t}function zc0tO242(){var t=tTL(['<div class="zcolorpicker__commandbaractionsleft"> '," </div>"]);return zc0tO242=function(){return t},t}function zc0tO241(){var t=tTL(['<div class="zcolorpicker__commandbar zcolorpicker__footer"> '," "," "," </div>"]);return zc0tO241=function(){return t},t}function zc0tO240(){var t=tTL(["<div id=",' class="zcolorpicker__transparentbg zcolorpicker__currentcolorpreview"> <span class="zcolorpicker__dynamiccolor" style="background-color: ',';"> </span> </div>']);return zc0tO240=function(){return t},t}function zc0tO239(){var t=tTL(['<div class="zcolorpicker__previewbox"> <div class="zcolorpicker__transparentbg zcolorpicker__newcolorpreview"> <span class="zcolorpicker__dynamiccolor" style="background-color: ',';"> </span> </div> '," </div>"]);return zc0tO239=function(){return t},t}function zc0tO238(){var t=tTL([' <div class="zcolorpicker__colormodefield"> ',' <label class="zcolorpicker__othercolormodefieldlabel">',"</label> </div> \t"]);return zc0tO238=function(){return t},t}function zc0tO237(){var t=tTL(['<div class="zcolorpicker__colorfieldcontainer '," ",'"> <div class="zcolorpicker__colormodes"> ',' </div> <div class="zcolorpicker__colorfields zcolorpicker--','mode"> '," "," </div> </div>"]);return zc0tO237=function(){return t},t}function zc0tO236(){var t=tTL([' <span class="zcolorpicker__mapmarker" style="left: ',"%; top: ",'%;"> </span>']);return zc0tO236=function(){return t},t}function zc0tO235(){var t=tTL(['<div class="zcolorpicker__pointer"></div>']);return zc0tO235=function(){return t},t}function zc0tO234(){var t=tTL([""," ",' <div class="zcolorpicker__maparea" ?id=',"> "," ",' </div> <div class="zcolorpicker__colormodecontainer"> '," ",' <div class="zcolorpicker__slidercontainer"> '," "," </div> </div> "," "," "," "," "]);return zc0tO234=function(){return t},t}function zc0tO233(){var t=tTL([""," <input class='zinputfield__textbox' tabindex=\"",'" ?aria-valuemin='," ?aria-valuemax="," ?readonly="," ?aria-readonly="," ?disabled="," ?aria-disabled="," ?maxlength=","> "," "," \t"]);return zc0tO233=function(){return t},t}function zc0tO232(){var t=tTL(['<div class="zinputfield ','" ?title=',' tabindex="-1" role="spinbutton" ?style="width:','" ?id='," >","</div>"]);return zc0tO232=function(){return t},t}function zc0tO231(){var t=tTL(['<div class="zcolorpicker__actiongroup zcolorpicker__action"> '," </div>"]);return zc0tO231=function(){return t},t}function zc0tO230(){var t=tTL(['<div class="zcolorpicker__header zcolorpicker__titlebar"> <span class="zcolorpicker__title zcolorpicker__text">',"</span> "," </div>"]);return zc0tO230=function(){return t},t}function zc0tO229(){var t=tTL(["<div ?id=",' class="zslider ','"> <div class="zslider__track ','"> ',' </div> <div role="slider" class="zslider__thumb ','" style="left:','%;"> '," </div> </div>"]);return zc0tO229=function(){return t},t}function zc0tO228(){var t=tTL(['<li ?data-shade="','" data-palette-name="','" class="zcolorpicker__colorpan ','" tabindex=',' ?data-tone-type="','" ?data-theme="','" ?data-tone-percent="','" ?data-zcolor="','" ?data-base-color="','" style="background-color:',';" ?aria-hidden="','" ?aria-selected="','" title="','"></li>']);return zc0tO228=function(){return t},t}function zc0tO227(){var t=tTL(['<li class="zcolorpicker__addcolor">',"</li>"]);return zc0tO227=function(){return t},t}function zc0tO226(){var t=tTL(["<ul> "," </ul>"]);return zc0tO226=function(){return t},t}function zc0tO225(){var t=tTL(['<ul class="zcolorpicker__shades"> '," "," </ul> "]);return zc0tO225=function(){return t},t}function zc0tO224(){var t=tTL(['<div class="zcolorpicker__navigatable"> '," </div>"]);return zc0tO224=function(){return t},t}function zc0tO223(){var t=tTL(['<span class="zcolorpicker__paletteheading"> '," </span>"]);return zc0tO223=function(){return t},t}function zc0tO222(){var t=tTL(["<div ?id=",' data-custom="','" class="zcolorpicker__palettecontainer ','" data-palettename="','"> ',' <div class="zcolorpicker__palette"> '," </div> </div> "]);return zc0tO222=function(){return t},t}function zc0tO221(){var t=tTL(['<canvas class="','"></canvas>']);return zc0tO221=function(){return t},t}function zc0tO220(){var t=tTL([""," "," ",""]);return zc0tO220=function(){return t},t}function zc0tO219(){var t=tTL([""," "," "," ",""]);return zc0tO219=function(){return t},t}function zc0tO218(){var t=tTL([""," ",""]);return zc0tO218=function(){return t},t}function zc0tO217(){var t=tTL(["<div class='zdatetimepicker--multipleselectbox'> "," </div >"]);return zc0tO217=function(){return t},t}function zc0tO216(){var t=tTL(["<span class='zdatetimepicker__timelabel'>","</span>"]);return zc0tO216=function(){return t},t}function zc0tO215(){var t=tTL([""," ",""]);return zc0tO215=function(){return t},t}function zc0tO214(){var t=tTL([""," "," "]);return zc0tO214=function(){return t},t}function zc0tO213(){var t=tTL(['<div class="zinputfield__spinbuttonpane"> '," "," </div>"]);return zc0tO213=function(){return t},t}function zc0tO212(){var t=tTL(["<input class='zinputfield__textbox' ?name=",' tabindex="','" ?aria-valuemin='," ?aria-valuemax="," ?readonly="," ?aria-readonly="," ?disabled="," ?aria-disabled="," ?maxlength=","> "," ",""]);return zc0tO212=function(){return t},t}function zc0tO211(){var t=tTL(['<div class="zinputfield ','" ?title=',' tabindex="-1" role="spinbutton" ?style="','" ?id='," >","</div>"]);return zc0tO211=function(){return t},t}function zc0tO210(){var t=tTL(['<div class="zalertbanner__action" title=','><button type="button" class="zalertbanner__close">',"</button></div>"]);return zc0tO210=function(){return t},t}function zc0tO209(){var t=tTL([" ",""]);return zc0tO209=function(){return t},t}function zc0tO208(){var t=tTL(['<span class="zalertbanner__text">'," ","</span>"]);return zc0tO208=function(){return t},t}function zc0tO207(){var t=tTL(['<div class="zalertbanner__table"></div>']);return zc0tO207=function(){return t},t}function zc0tO206(){var t=tTL([" "," "," "," "," "," "]);return zc0tO206=function(){return t},t}function zc0tO205(){var t=tTL(['<div class="zalertbanner ','">',"</div>"]);return zc0tO205=function(){return t},t}function zc0tO204(){var t=tTL(['<div class="zdialog__helpbuttoncontainer">',"</div>"]);return zc0tO204=function(){return t},t}function zc0tO203(){var t=tTL(['<div class="zalertdialog__commandbar zalertdialog__footer ','"> '," "," </div>"]);return zc0tO203=function(){return t},t}function zc0tO202(){var t=tTL(['<div class="zdialog__suppression"> <div class="zcheckbox"><input id="zalert__suppression--box" type="checkbox" class="zcheckbox__helper"><label for="zalert__suppression--box" class="zcheckbox__label">',"</label></div> </div>"]);return zc0tO202=function(){return t},t}function zc0tO201(){var t=tTL(['<div class="zdialog__secondarytext">',"</div>"]);return zc0tO201=function(){return t},t}function zc0tO200(){var t=tTL(['<div class="zdialog__primarytext">',"</div>"]);return zc0tO200=function(){return t},t}function zc0tO199(){var t=tTL(['<div class="zdialog__alerticon">',"</div>"]);return zc0tO199=function(){return t},t}function zc0tO198(){var t=tTL(['<div class="zdialog__actiongroup">',"</div>"]);return zc0tO198=function(){return t},t}function zc0tO197(){var t=tTL(['<span class="zdialog__title">',"</span>"]);return zc0tO197=function(){return t},t}function zc0tO196(){var t=tTL(['<div class="zdialog__header zdraggable"> '," "," </div>"]);return zc0tO196=function(){return t},t}function zc0tO195(){var t=tTL([" ",' <div class="zdialog__content"> ',' <div class="zdialog__description"> '," "," "," </div> </div> ",""]);return zc0tO195=function(){return t},t}function zc0tO194(){var t=tTL(['<div class="zdialog zdialog--alert" tabindex="-1" role="alertdialog" aria-modal="true" aria-expanded="true">',"</div>"]);return zc0tO194=function(){return t},t}function zc0tO193(){var t=tTL(["<input class='ztokenfield__requiredinput' name='","' value=\"",'" required='," aria-required="," />"]);return zc0tO193=function(){return t},t}function zc0tO192(){var t=tTL(["<span class='ztokenfield__text' ?title='","'> "," </span>"]);return zc0tO192=function(){return t},t}function zc0tO191(){var t=tTL(["<span class='ztokenfield__avatar'> "," </span>"]);return zc0tO191=function(){return t},t}function zc0tO190(){var t=tTL(["<img src='","' class='ztokenfield__image' />"]);return zc0tO190=function(){return t},t}function zc0tO189(){var t=tTL(["<i class='ztokenfield__image ","'></i>"]);return zc0tO189=function(){return t},t}function zc0tO188(){var t=tTL([""," "," "," ",""]);return zc0tO188=function(){return t},t}function zc0tO187(){var t=tTL(["",""]);return zc0tO187=function(){return t},t}function zc0tO186(){var t=tTL(["<div class='ztokenfield__token "," ","' tabindex='-1' id='","' .actualData='","' ?style='","'> "," </div>"]);return zc0tO186=function(){return t},t}function zc0tO185(){var t=tTL(["<input type='text' id='","-edit-input' autocomplete=off class='ztokenfield__textbox ztokenfield__editinput' tabindex='0'/>"]);return zc0tO185=function(){return t},t}function zc0tO184(){var t=tTL([" ",""]);return zc0tO184=function(){return t},t}function zc0tO183(){var t=tTL([""," "," <input type='text' aria-haspopup='true' autocomplete=off role='textbox' aria-expanded='false' aria-owns='","-menu' id='","-input' autocomplete='off' tabindex='","' class='ztokenfield__textbox' ?disabled='","' ?readonly='","' ?aria-readonly='","'/> <input type='text' style='","' autocomplete=off tabindex='-1' id='","-copy-helper' />"]);return zc0tO183=function(){return t},t}function zc0tO182(){var t=tTL(["<div>","</div>"]);return zc0tO182=function(){return t},t}function zc0tO181(){var t=tTL(['<input type=text class="'," ",'">']);return zc0tO181=function(){return t},t}function zc0tO180(){var t=tTL(["<span class='zdropdownlist__title'>","</span>"]);return zc0tO180=function(){return t},t}function zc0tO179(){var t=tTL(["<div class='zdropdownlist__titlebar' role='heading'> "," "," </div>"]);return zc0tO179=function(){return t},t}function zc0tO178(){var t=tTL(["<button class='zdropdownlist__closeiconcontainer'> "," </button>"]);return zc0tO178=function(){return t},t}function zc0tO177(){var t=tTL(["<div class='zdropdownlist__commandbar'> "," </div>"]);return zc0tO177=function(){return t},t}function zc0tO176(){var t=tTL(["<div class='zdropdownlist__pointer'></div>"]);return zc0tO176=function(){return t},t}function zc0tO175(){var t=tTL([""," "," "," ",""]);return zc0tO175=function(){return t},t}function zc0tO174(){var t=tTL(['<li class="','" data-ignore-focus=true data-zplaceholder="true" style=\'height:',"px;'></li>"]);return zc0tO174=function(){return t},t}function zc0tO173(){var t=tTL(['<button class="','" ?title="','" tabindex=-1 id="','" on-click=',"> "," </button>"]);return zc0tO173=function(){return t},t}function zc0tO172(){var t=tTL(['<div class="','"> ',' </div> <input id="','" ?disabled=',' autocomplete="off" type="text" class="','" autocomplete="off"> '," "]);return zc0tO172=function(){return t},t}function zc0tO171(){var t=tTL(["<div class='"," ","'> "," </div> "]);return zc0tO171=function(){return t},t}function zc0tO170(){var t=tTL(['<span class="','">',"</span>"]);return zc0tO170=function(){return t},t}function zc0tO169(){var t=tTL(["<div style='display:none;' id=",' class="','"> '," </div>"]);return zc0tO169=function(){return t},t}function zc0tO168(){var t=tTL(['<i class="',' zh-loading"> <svg class="zeffects--rotate" viewBox="0 0 20 20"> <circle class="circle__track" cx="10" cy="10" r="9" /> <circle class="circle__load" cx="10" cy="10" r="9" /> </svg> </i>']);return zc0tO168=function(){return t},t}function zc0tO167(){var t=tTL(["",""]);return zc0tO167=function(){return t},t}function zc0tO166(){var t=tTL(["<li id=",' class="','"> '," </li>"]);return zc0tO166=function(){return t},t}function zc0tO165(){var t=tTL(['<span class="','">',"</span>"]);return zc0tO165=function(){return t},t}function zc0tO164(){var t=tTL(['<img src="','" />']);return zc0tO164=function(){return t},t}function zc0tO163(){var t=tTL(["",""]);return zc0tO163=function(){return t},t}function zc0tO162(){var t=tTL(["<ul class='","'> "," "," </ul>"]);return zc0tO162=function(){return t},t}function zc0tO161(){var t=tTL(["<ul class='","'> "," </ul>"]);return zc0tO161=function(){return t},t}function zc0tO160(){var t=tTL(['<span class="','" >',"</span>"]);return zc0tO160=function(){return t},t}function zc0tO159(){var t=tTL(["<li ?id=",' class="'," "," ",'" data-ignore-focus=true role="group" .itemData="','"> '," </li>"]);return zc0tO159=function(){return t},t}function zc0tO158(){var t=tTL(["<div class='","'>","</div>"]);return zc0tO158=function(){return t},t}function zc0tO157(){var t=tTL(["<div class='"," zcheckbox'><input id=",' ?disabled="','" type="checkbox" class=\'zcheckbox__helper ',"' tabindex=-1 /><label for=",' class="zcheckbox__label '," ",'"></label></div>']);return zc0tO157=function(){return t},t}function zc0tO156(){var t=tTL(["<button tabindex=-1 ?title="," ?disabled=",' class="'," "," ",'">',"</button>"]);return zc0tO156=function(){return t},t}function zc0tO155(){var t=tTL(['<div class="','"> '," </div>"]);return zc0tO155=function(){return t},t}function zc0tO154(){var t=tTL(["<span class='","'>","</span>"]);return zc0tO154=function(){return t},t}function zc0tO153(){var t=tTL(["<span class='","'>","</span>"]);return zc0tO153=function(){return t},t}function zc0tO152(){var t=tTL(["<div class='"," ","'>","</div>"]);return zc0tO152=function(){return t},t}function zc0tO151(){var t=tTL(["",' <div class="','"> '," "," </div>"]);return zc0tO151=function(){return t},t}function zc0tO150(){var t=tTL(["",""]);return zc0tO150=function(){return t},t}function zc0tO149(){var t=tTL(["<li ?id=",' class="'," ",'" role="separator" data-ignore-focus=true .itemData="','"></li>']);return zc0tO149=function(){return t},t}function zc0tO148(){var t=tTL(['<div class="'," ",'"> '," </div>"]);return zc0tO148=function(){return t},t}function zc0tO147(){var t=tTL(["<li ?id=",' class="'," "," "," ",'" role="option" ?title="','" ?aria-disabled="','" ?disabled="','" aria-label="','" aria-value="','" ?name='," ?data-selectable="," ?data-clickable="," ?data-ignore-focus=",' .itemData="','"> '," "," "," "," "," </li>"]);return zc0tO147=function(){return t},t}function zc0tO146(){var t=tTL(["<ul style='display:none;' tabindex=-1 class='"," zh-scroll_y'> "," "," "," "," </ul>"]);return zc0tO146=function(){return t},t}function zc0tO145(){var t=tTL([" "," "," "," "," "," "]);return zc0tO145=function(){return t},t}function zc0tO144(){var t=tTL(["<div>","</div>"]);return zc0tO144=function(){return t},t}function zc0tO143(){var t=tTL(["",""]);return zc0tO143=function(){return t},t}function zc0tO142(){var t=tTL([""," ",""]);return zc0tO142=function(){return t},t}function zc0tO141(){var t=tTL(["<ul class='","' data-footer=true > "," </ul>"]);return zc0tO141=function(){return t},t}function zc0tO140(){var t=tTL(["",""]);return zc0tO140=function(){return t},t}function zc0tO139(){var t=tTL(["<ul class='","' data-body=true > "," </ul>"]);return zc0tO139=function(){return t},t}function zc0tO138(){var t=tTL(["",""]);return zc0tO138=function(){return t},t}function zc0tO137(){var t=tTL(["<ul class='","' data-header=true > "," </ul>"]);return zc0tO137=function(){return t},t}function zc0tO136(){var t=tTL(["",""]);return zc0tO136=function(){return t},t}function zc0tO135(){var t=tTL(["",""]);return zc0tO135=function(){return t},t}function zc0tO134(){var t=tTL([""," "," "," "," "," "]);return zc0tO134=function(){return t},t}function zc0tO133(){var t=tTL(['<div class="','" ?id=',">","</div>"]);return zc0tO133=function(){return t},t}function zc0tO132(){var t=tTL(["<div class='","'>","</div>"]);return zc0tO132=function(){return t},t}function zc0tO131(){var t=tTL([""," "," "," "]);return zc0tO131=function(){return t},t}function zc0tO130(){var t=tTL(['<div class="zmenu__pointer" ></div>']);return zc0tO130=function(){return t},t}function zc0tO129(){var t=tTL(['<span class="zmenu__description" >',"</span>"]);return zc0tO129=function(){return t},t}function zc0tO128(){var t=tTL(['<span class="zmenu__shortcut" >',"</span>"]);return zc0tO128=function(){return t},t}function zc0tO127(){var t=tTL(['<span class="zmenu__text" >',"</span>"]);return zc0tO127=function(){return t},t}function zc0tO126(){var t=tTL([" "," "," "," "]);return zc0tO126=function(){return t},t}function zc0tO125(){var t=tTL(['<div class="zmenu__iconcontainer" >',"</div>"]);return zc0tO125=function(){return t},t}function zc0tO124(){var t=tTL([""," "," "," "," "]);return zc0tO124=function(){return t},t}function zc0tO123(){var t=tTL(["",""]);return zc0tO123=function(){return t},t}function zc0tO122(){var t=tTL(['<a class="zmenu__link" href='," target="," rel='","' >","</a>"]);return zc0tO122=function(){return t},t}function zc0tO121(){var t=tTL(["<li ?id="," ?data-item-type=",' class="','" role="','" data-unique-key="','" .itemData="','"></li>']);return zc0tO121=function(){return t},t}function zc0tO120(){var t=tTL(['<span class="zmenu__text" >',"</span>"]);return zc0tO120=function(){return t},t}function zc0tO119(){var t=tTL(["<li ?id="," ?data-item-type=",' class="','" role="','" ?name=',' data-unique-key="','" .itemData="','"> '," </li>"]);return zc0tO119=function(){return t},t}function zc0tO118(){var t=tTL(["<li ?id="," ?data-item-type=",' class="','" role="','" ?name=',' ?data-menu-id="','" data-unique-key="',"\" ?data-label='","' ?checked=\"",'" .itemData="','"> '," </li>"]);return zc0tO118=function(){return t},t}function zc0tO117(){var t=tTL([" "," "]);return zc0tO117=function(){return t},t}function zc0tO116(){var t=tTL(["",""]);return zc0tO116=function(){return t},t}function zc0tO115(){var t=tTL(["",""]);return zc0tO115=function(){return t},t}function zc0tO114(){var t=tTL([" "," "]);return zc0tO114=function(){return t},t}function zc0tO113(){var t=tTL(['<ul class="','" ?id=',">","</ul>"]);return zc0tO113=function(){return t},t}function zc0tO112(){var t=tTL(["",""]);return zc0tO112=function(){return t},t}function zc0tO111(){var t=tTL(["",""]);return zc0tO111=function(){return t},t}function zc0tO110(){var t=tTL(['<div class="zcollapsiblepanel__content">',"</div>"]);return zc0tO110=function(){return t},t}function zc0tO109(){var t=tTL(['<div class="zcollapsiblepanel__heading">',"</div>"]);return zc0tO109=function(){return t},t}function zc0tO108(){var t=tTL(['<div class="zcollapsiblepanel__header"> '," "," </div> ",""]);return zc0tO108=function(){return t},t}function zc0tO107(){var t=tTL(['<span class="ztabpanel__text">',"</span>"]);return zc0tO107=function(){return t},t}function zc0tO106(){var t=tTL([" "," "," "," ",""]);return zc0tO106=function(){return t},t}function zc0tO105(){var t=tTL(['<a tabindex="-1" href=#'," > "," </a>"]);return zc0tO105=function(){return t},t}function zc0tO104(){var t=tTL(['<li data-zd-created=true role="tab" ?title=',' tabindex=-1 ?id="','" class="','" ?style="','" data-panel-id=',' ?aria-disabled="','" ?data-disabled='," ?aria-hidden="," ?data-hidden=",">"," </li>"]);return zc0tO104=function(){return t},t}function zc0tO103(){var t=tTL(['<ul role=tablist class="','"> '," </ul>"]);return zc0tO103=function(){return t},t}function zc0tO102(){var t=tTL(['<div class="','"> </div>']);return zc0tO102=function(){return t},t}function zc0tO101(){var t=tTL([" "," "," "," "]);return zc0tO101=function(){return t},t}function zc0tO100(){var t=tTL(['<div class="zpopover__pointer"></div>']);return zc0tO100=function(){return t},t}function zc0tO99(){var t=tTL(['<div class="zpopover__loading" id="zpopover--loader"> <i class="zpopover__icon zh-loading"> <svg class="zpopover__svg zpopover__loader zeffects--rotate"> <circle class="circle__track"></circle> <circle class="circle__load"></circle> </svg> </i> </div>']);return zc0tO99=function(){return t},t}function zc0tO98(){var t=tTL(['<div class="zpopover__content"> '," </div>"]);return zc0tO98=function(){return t},t}function zc0tO97(){var t=tTL(['<div class="zpopover__action">',"</div>"]);return zc0tO97=function(){return t},t}function zc0tO96(){var t=tTL(['<div role="heading" class="zpopover__text">',"</div>"]);return zc0tO96=function(){return t},t}function zc0tO95(){var t=tTL(['<div id="zpopover__title" class="zpopover__title ','"> '," "," </div>"]);return zc0tO95=function(){return t},t}function zc0tO94(){var t=tTL([""," "," ",""]);return zc0tO94=function(){return t},t}function zc0tO93(){var t=tTL(['<div class="',"__commandbaractionsright ",'">',"</div>"]);return zc0tO93=function(){return t},t}function zc0tO92(){var t=tTL(['<div class="',"__commandbaractionscenter ",'"> ',"</div>"]);return zc0tO92=function(){return t},t}function zc0tO91(){var t=tTL(['<div class="',"__commandbaractionsleft ",'">',"</div>"]);return zc0tO91=function(){return t},t}function zc0tO90(){var t=tTL([" "," "," "," \t"]);return zc0tO90=function(){return t},t}function zc0tO89(){var t=tTL(['<div class="zdialog__footnote">',"</div>"]);return zc0tO89=function(){return t},t}function zc0tO88(){var t=tTL(['<div class="zdialog__commandbar zdialog__footer ','"> '," </div>"]);return zc0tO88=function(){return t},t}function zc0tO87(){var t=tTL(['<div class="zdialog__content"> '," </div>"]);return zc0tO87=function(){return t},t}function zc0tO86(){var t=tTL(['<div class="zdialog__actiongroup zdialog__action">',"</div>"]);return zc0tO86=function(){return t},t}function zc0tO85(){var t=tTL(['<div role="heading" class="zdialog__title zdialog__text">',"</div>"]);return zc0tO85=function(){return t},t}function zc0tO84(){var t=tTL([' <div class="zdialog__header zdialog__titlebar zdraggable"> '," "," </div> "," "," ",""]);return zc0tO84=function(){return t},t}function zc0tO83(){var t=tTL(['<div ?aria-label="','" ?id="','" ?role="','" class="zdialog ','">',"</div>"]);return zc0tO83=function(){return t},t}function zc0tO82(){var t=tTL(['<div class="','"> <div class="zdatetimeselectbox__datetimecontainer"> </div> </div>']);return zc0tO82=function(){return t},t}function zc0tO81(){var t=tTL(['<li ?class="','" ?valueType="','" id="','" ?style="','">',"</li>"]);return zc0tO81=function(){return t},t}function zc0tO80(){var t=tTL(['<div ?class="','"> ',' <ul class="zdatetimeselectbox__listbox"> '," </ul> "," </div>"]);return zc0tO80=function(){return t},t}function zc0tO79(){var t=tTL(["",' <div class="zselectbox__selected"> <span class="zdatetimeselectbox__label zselectbox__text" aria-placeholder="','"></span> </div> '," "," "," ",""]);return zc0tO79=function(){return t},t}function zc0tO78(){var t=tTL(["<div>","</div>"]);return zc0tO78=function(){return t},t}function zc0tO77(){var t=tTL(["<li class='zdatetimepicker__list'> <div class='zdatetimepicker__fromtolabel'> "," </div> <div class='zdatetimepicker zdatetimepicker--calendarsplit'> "," "," </div> </li>"]);return zc0tO77=function(){return t},t}function zc0tO76(){var t=tTL(["<ul class='zdatetimepicker__container'> "," "," </ul>"]);return zc0tO76=function(){return t},t}function zc0tO75(){var t=tTL(["<div class='zdatetimepicker__pointer'></div>"]);return zc0tO75=function(){return t},t}function zc0tO74(){var t=tTL([""," "," "," ",""]);return zc0tO74=function(){return t},t}function zc0tO73(){var t=tTL(['<tr role="row"><td role="gridcell" class="zdatetimepicker__weeknumber">',"</td></tr>"]);return zc0tO73=function(){return t},t}function zc0tO72(){var t=tTL(["<table role='grid' class='zdatetimepicker__weeknumbers'> <thead> <tr role=\"row\"> <th class=\"zdatetimepicker__weeknumber\">","</th> </tr> </thead> <tbody> "," </tbody> </table>"]);return zc0tO72=function(){return t},t}function zc0tO71(){var t=tTL(["<div class='zdatetimepicker__titlebar' role='heading'> <span class='zdatetimepicker__title'>","</span> "," </div>"]);return zc0tO71=function(){return t},t}function zc0tO70(){var t=tTL(["",""]);return zc0tO70=function(){return t},t}function zc0tO69(){var t=tTL(["<td role='gridcell' class='","' data-value=\"",'">',"</td>"]);return zc0tO69=function(){return t},t}function zc0tO68(){var t=tTL(["<tr role='row'>"]);return zc0tO68=function(){return t},t}function zc0tO67(){var t=tTL(['<div class="zdatetimepicker__drilldownview"> <table role="grid" class="zdatetimepicker__drilldowncell"> <tbody> '," </tbody> </table> </div> </div>"]);return zc0tO67=function(){return t},t}function zc0tO66(){var t=tTL(["<div class='zdatetimepicker__","drilldown zdatetimepicker__monthcontainer' ?style='","'> "," ",""]);return zc0tO66=function(){return t},t}function zc0tO65(){var t=tTL(['<div class="zdatetimepicker__rightnav"> '," "," "," "," </div>"]);return zc0tO65=function(){return t},t}function zc0tO64(){var t=tTL(["<span class='zdatetimepicker__yearnav'> "," </span>"]);return zc0tO64=function(){return t},t}function zc0tO63(){var t=tTL(["<span class='zdatetimepicker__monthnav'> "," </span>"]);return zc0tO63=function(){return t},t}function zc0tO62(){var t=tTL(['<div class="zdatetimepicker__monthyearnav ','"> '," "," </div>"]);return zc0tO62=function(){return t},t}function zc0tO61(){var t=tTL(['<div class="zdatetimepicker__leftnav"> '," "," </div>"]);return zc0tO61=function(){return t},t}function zc0tO60(){var t=tTL(['<div class="zdatetimepicker__navbar ','"> '," "," "," "," "," </div > "]);return zc0tO60=function(){return t},t}function zc0tO59(){var t=tTL(["<span class='zdatetimepicker__secondaryinfo'>","</span>"]);return zc0tO59=function(){return t},t}function zc0tO58(){var t=tTL(["<td role='gridcell' ?class='","' ?data-time='","' ?title='","'> <span class='zdatetimepicker__text'>"," </span> "," </td>"]);return zc0tO58=function(){return t},t}function zc0tO57(){var t=tTL(["<tr> ",""]);return zc0tO57=function(){return t},t}function zc0tO56(){var t=tTL(["<th class=",">","</th>"]);return zc0tO56=function(){return t},t}function zc0tO55(){var t=tTL(['<div class="zdatetimepicker__monthcontainer zdatetimepicker__days" ?style=\'',"'> ",' <div class="zdatetimepicker__calendar"> ',' <table role="grid" class=',"> <thead> <tr role='row' class='zdatetimepicker__week'> "," </tr> </thead> <tbody> "," </tbody> </table> </div> </div>"]);return zc0tO55=function(){return t},t}function zc0tO54(){var t=tTL([""," "," "," "]);return zc0tO54=function(){return t},t}function zc0tO53(){var t=tTL([""," "," "]);return zc0tO53=function(){return t},t}function zc0tO52(){var t=tTL(["<li class='zdatetimepicker__list'> <div class='zdatetimepicker'> "," "," </div> </li>"]);return zc0tO52=function(){return t},t}function zc0tO51(){var t=tTL(["<ul class='zdatetimepicker__container'> "," </ul>"]);return zc0tO51=function(){return t},t}function zc0tO50(){var t=tTL(["<div class='zdatetimepicker__pointer'></div>"]);return zc0tO50=function(){return t},t}function zc0tO49(){var t=tTL([""," "," "," ",""]);return zc0tO49=function(){return t},t}function _slicedToArray(t,a){return _arrayWithHoles(t)||_iterableToArrayLimit(t,a)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(t,a){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)){var o=[],n=!0,l=!1,i=void 0;try{for(var r,s=t[Symbol.iterator]();!(n=(r=s.next()).done)&&(o.push(r.value),!a||o.length!==a);n=!0);}catch(t){l=!0,i=t}finally{try{n||null==s.return||s.return()}finally{if(l)throw i}}return o}}function _arrayWithHoles(t){if(Array.isArray(t))return t}function zc0tO48(){var t=tTL(["<input class='zselectbox__requiredinput' name='","' value=\"",'" required='," aria-required="," />"]);return zc0tO48=function(){return t},t}function zc0tO47(){var t=tTL(["<input ?disabled="," ?tabindex=",' class="zselectbox__textbox" ?value='," ?placeholder=",' autocomplete="off" ?readonly='," ?aria-readonly="," />"]);return zc0tO47=function(){return t},t}function zc0tO46(){var t=tTL([""," ",""]);return zc0tO46=function(){return t},t}function zc0tO45(){var t=tTL(["",' <div class="zselectbox__selected"> '," </div> "," ",""]);return zc0tO45=function(){return t},t}function zc0tO44(){var t=tTL(["<div>"]);return zc0tO44=function(){return t},t}function zc0tO43(){var t=tTL(["<input class='zselectbox__requiredinput' name='","' value=\"",'" required='," aria-required=","></input>"]);return zc0tO43=function(){return t},t}function zc0tO42(){var t=tTL(['<span class="zselectbox__text">',"</span>"]);return zc0tO42=function(){return t},t}function zc0tO41(){var t=tTL(['<span class="zselectbox__avatartext">',"</span>"]);return zc0tO41=function(){return t},t}function zc0tO40(){var t=tTL(["<div class='zselectbox__image'><img src=\"",'" /></div>']);return zc0tO40=function(){return t},t}function zc0tO39(){var t=tTL([""," "," ",""]);return zc0tO39=function(){return t},t}function zc0tO38(){var t=tTL(['<span class="zselectbox__text zselectbox__placeholder">',"</span>"]);return zc0tO38=function(){return t},t}function zc0tO37(){var t=tTL(["",'<div class="zselectbox__selected"> '," </div> "," ",""]);return zc0tO37=function(){return t},t}function zc0tO36(){var t=tTL(["<div>","</div>"]);return zc0tO36=function(){return t},t}function zc0tO35(){var t=tTL(['<span class="zbutton__bgprogress zbutton__bgprogress--','" style="width:','%;" ></span>']);return zc0tO35=function(){return t},t}function zc0tO34(){var t=tTL(['<span class="zbutton__','line" style="width:','%;" ></span>']);return zc0tO34=function(){return t},t}function zc0tO33(){var t=tTL([" "," "," ",""]);return zc0tO33=function(){return t},t}function zc0tO32(){var t=tTL(["",""]);return zc0tO32=function(){return t},t}function zc0tO31(){var t=tTL(["<span class='zbutton__text'>","</span>"]);return zc0tO31=function(){return t},t}function zc0tO30(){var t=tTL(["",""]);return zc0tO30=function(){return t},t}function zc0tO29(){var t=tTL(["",""]);return zc0tO29=function(){return t},t}function zc0tO28(){var t=tTL([" "," "," ",""]);return zc0tO28=function(){return t},t}function zc0tO27(){var t=tTL(["",""]);return zc0tO27=function(){return t},t}function zc0tO26(){var t=tTL([" "," "]);return zc0tO26=function(){return t},t}function zc0tO25(){var t=tTL(["",""]);return zc0tO25=function(){return t},t}function zc0tO24(){var t=tTL(['<button ?aria-label="','" ?id="','" ?role="','" ?type="','" tabindex="','" ?title="','" class="','" ?data-action-name='," >","","</button>"]);return zc0tO24=function(){return t},t}function zc0tO23(){var t=tTL(["",""]);return zc0tO23=function(){return t},t}function zc0tO22(){var t=tTL(['<div class="ztooltip__pointer ','"></div>']);return zc0tO22=function(){return t},t}function zc0tO21(){var t=tTL(["<div class='ztooltip ","'> <div class='ztooltip__content'></div> "," </div>"]);return zc0tO21=function(){return t},t}function zc0tO20(){var t=tTL(['<div class="zslider__label" data-val="','">',"</div>"]);return zc0tO20=function(){return t},t}function zc0tO19(){var t=tTL(['<div class="zslider__tickcontainer"> <div class="zslider__tick" data-val="','"></div> '," </div>"]);return zc0tO19=function(){return t},t}function zc0tO18(){var t=tTL(['<div class="zslider__ticks ','"> '," </div>"]);return zc0tO18=function(){return t},t}function zc0tO17(){var t=tTL(['<div class="zslider__rangelabel"> <span class="zslider__textcontainer"><span class="zslider__text">',"</span></span> </div>"]);return zc0tO17=function(){return t},t}function zc0tO16(){var t=tTL(['<div class="zslider__rangelabels ','"> '," </div>"]);return zc0tO16=function(){return t},t}function zc0tO15(){var t=tTL([' <div role="slider" class="zslider__thumb ','" ?aria-disabled="','" aria-orientation="','" aria-valuemin="','" aria-valuemax="','" tabindex="','" data-val="','" aria-valuenow="','" aria-valuetext="','"> '," </div>"]);return zc0tO15=function(){return t},t}function zc0tO14(){var t=tTL(['<div class="zslider__notallowedrange zslider__notallowedrange','"></div>']);return zc0tO14=function(){return t},t}function zc0tO13(){var t=tTL(['<div class="zslider__selected"></div>']);return zc0tO13=function(){return t},t}function zc0tO12(){var t=tTL(['<div class="zslider__rangegroup ','" style="','">',"</div>"]);return zc0tO12=function(){return t},t}function zc0tO11(){var t=tTL([' <div class="zslider__shadowtrack" style="','"></div> ',' <div class="zslider__track ','"> ',' <div class="zslider__selection" style="','"></div> '," "," </div> "," "," "," "]);return zc0tO11=function(){return t},t}function zc0tO10(){var t=tTL(['<div class="zslider" >',"</div>"]);return zc0tO10=function(){return t},t}function _get(t,a,o){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,a,o){var n=_superPropBase(t,a);if(n){var l=Object.getOwnPropertyDescriptor(n,a);return l.get?l.get.call(o):l.value}})(t,a,o||t)}function _superPropBase(t,a){for(;!Object.prototype.hasOwnProperty.call(t,a)&&null!==(t=_getPrototypeOf(t)););return t}function zc0tO9(){var t=tTL(["<a ?class="," tabindex="," aria-label=",">","</a>"]);return zc0tO9=function(){return t},t}function zc0tO8(){var t=tTL(["",""]);return zc0tO8=function(){return t},t}function zc0tO7(){var t=tTL(["<div class=",">","</div>"]);return zc0tO7=function(){return t},t}function zc0tO6(){var t=tTL(["<div class=","> ","</div>"]);return zc0tO6=function(){return t},t}function zc0tO5(){var t=tTL(["<div class=",">","</div>"]);return zc0tO5=function(){return t},t}function zc0tO4(){var t=tTL([""," "," ",""]);return zc0tO4=function(){return t},t}function zc0tO3(){var t=tTL(['<div class="zdatetimepicker__column"> '," </div>"]);return zc0tO3=function(){return t},t}function zc0tO2(){var t=tTL(['<div class="zdatetimepicker__commandbar ','"> '," </div>"]);return zc0tO2=function(){return t},t}function zc0tO(){var t=tTL(['<i class="','"> '," </i>"]);return zc0tO=function(){return t},t}function tTL(t,a){return a||(a=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(a)}}))}function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t)){for(var a=0,o=Array(t.length);a<t.length;a++)o[a]=t[a];return o}}function ownKeys(t,a){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);a&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),o.push.apply(o,n)}return o}function _objectSpread(t){for(var o,a=1;a<arguments.length;a++)o=null==arguments[a]?{}:arguments[a],a%2?ownKeys(o,!0).forEach(function(a){_defineProperty(t,a,o[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):ownKeys(o).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(o,a))});return t}function _defineProperties(t,a){for(var n,o=0;o<a.length;o++)(n=a[o]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}function _createClass(t,a,o){return a&&_defineProperties(t.prototype,a),o&&_defineProperties(t,o),t}function _classCallCheck(t,a){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,a){return!a||"object"!==_typeof(a)&&"function"!=typeof a?_assertThisInitialized(t):a}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _inherits(t,a){if("function"!=typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(a&&a.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),a&&_setPrototypeOf(t,a)}function _setPrototypeOf(t,a){return(_setPrototypeOf=Object.setPrototypeOf||function(t,a){return t.__proto__=a,t})(t,a)}function _defineProperty(t,a,o){return a in t?Object.defineProperty(t,a,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[a]=o,t}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}(function(t){var a=Math.max,o=Math.round,n=navigator.userAgent.toLowerCase(),l=document.createElement("div"),i=document.createElement("textarea"),s=document.createTextNode(" "),r=["_CLASSES","_EVENTS","_SELECTORS","_attrs","_props"];l.appendChild(s);var d=window.ZComponentsConfig||{},c=d.useWebComponentsSelector,_={textarea:i,namespace:"ZPeopleComponents",pluginPrefix:"z",baseFontSize:d.baseFontSize,listenPageVisibilityEvent:!1,changeSet:"5.3.22",buildID:"11123824",isRTL:!1,selector:"data-ctype",version:"5.3.22",environment:"production",userAgent:n,webComponents:[],webComponentsToInit:[],SVG:{},Templates:{},createdComponentsList:{},registeredComponentsList:[],webComponentsSupport:!1,registerCE:!0,useWebComponentsSelector:void 0!==c&&c,_animationEnd:"webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend transitionend",_transitionEnd:"webkitTransitionEnd, otransitionend, oTransitionEnd, msTransitionEnd, transitionend",locale:"en-US",timeZone:null,zIndex:1e3,$window:t(window),$document:t(document),DOMUtil:t,DOMUtilInstance:window.$ZCDOMUtil||t,keys:{},minimizeArray:[],keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38,ALT:18},isEmpty:function(t){return!(t&&Object.keys(t).length)},isInDOM:function(a,o){var t=(o||document.body).contains(a),n=!t&&this.getRootNode(a);return a&&(t||"#document-fragment"===n.nodeName&&"ShadowRoot"===n.constructor.name)},getRootNode:function(t){return(t=t instanceof u.DOMUtil?t[0]:t).getRootNode?t.getRootNode():this.getShadowRoot(t)},getShadowRoot:function(t){for(;t&&null!=t.parentNode;)t=t.parentNode;return t},iterateData:function(t,a){return Array(t).join(0).split(0).map(a)},getKebabCaseKey:function(t){return t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()},getID:function(t,a,n,l){return t=t||"",a instanceof this.DOMUtilInstance&&(a=a[0]),a&&a.id||t+"-"+(n?n+"-":"")+o(1e8*Math.random())+(l?"-"+l:"")},getName:function(t,a){return a.name||t[0].id+"-name"},_getScrollParent:function(a){var o=/(auto|scroll)/;return(a=t(a)).parents().filter(function(a,n){var l=t(n);return o.test(l.css("overflow")+l.css("overflow-y")+l.css("overflow-x"))})},_getIconInfo:function(t,a,o,n,l){var i,s;if(l=l||{},a=t||a?a:o){var r=a.split(" ");a=r[0],i=r[1]?r.slice(1).join(" "):void 0,t=void 0,s=!0}return l.icon=s||n||t,l.iconClassName=((n||"")+" "+(t||"")).trim(),l.SVGIconClassName=i||l.SVGIconClassName||"",a&&(l.SVGIconId=(0>a.indexOf("#")?"#":"")+a),l},createElement:function(a,o,n){a=a||{};var l="z"+o,i=Object.create(a),s=u.tagNames[l],r=a.tagName,d=r||s[0],c=r||s[1],_=i.appendTo,p=i.mainElement||document.getElementById(i.id);if(p){var g,h,m=t(p).data(l);if(m)return m.container&&(g=m.container[0]),h=m.element[0],i.isCE?h:g?[h,g]:[h]}var v=(i.isCE?c:d)||"div",f=i.id&&document.getElementById(i.id)||document.createElement(v),k=t(f),b=i.customAttributes,C=-1<v.indexOf("-");if(i.id&&((b=b||{}).id=i.id),b&&k.attr(b),C&&i&&(f._zinitdata=i),i.templateRender||(_=t(_||"body",i.shadowRoot)[0],i.insertBefore?_.parentNode.insertBefore(f,_):_.appendChild(f)),!C&&!n){var D=u[o](k,i);return a.templateRender?D.container&&D.container[0]!==D.element[0]?[D.element[0],D.container[0]]:[D.element[0]]:D.element}return C||t.data(f,"ZCOpts",i),f},OS:{isLinux:function(){return-1<navigator.appVersion.indexOf("Linux")||-1<n.indexOf("Linux")||-1<navigator.platform.indexOf("Linux")},isMac:function(){return/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform)},isWindows:function(){return-1<navigator.platform.indexOf("Win")}},_getEvents:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];return(1<arguments.length&&void 0!==arguments[1]?arguments[1]:[]).concat(t).filter(function(t,a,o){return o.indexOf(t)===a})},isComponent:function(a,o){return a=t(a),!(!(o=o||a.data("componentName"))||!a.data(o))},registerComponent:function(a,o,n){var l;n?l=!0:(n=o,o=this.CoreComponent);var g,s=r.length,c=a.toLowerCase().replace(/^z/,""),p="z"+c,m=o.prototype;l&&"object"===_typeof(n)&&(n=this._objectTypeFallback(n,p,o,m));var h=u.tagNames[p],v=h&&h[1]&&this.webComponentsSupport,y=this.useWebComponentsSelector;v&&y&&(n.prototype.isCE=!0);var f=d.registerCE;u.registerCE=void 0===f?u.registerCE:f;for(var C,k=n.prototype,b=0;b<s;b++)C=(g=r[b]).replace("_",""),"_EVENTS"===g?(k[g]=this._getEvents(k[C],m[C]),k[g]=this._getEvents(k[g],m[g]),k[g].push("beforedestroy")):k[g]=t.extend(!0,"_attrs"===g?{rtl:!1,templateData:null,templateFunc:null,zclassName:null,templateRender:null}:{},m[C]||{},m[g]||{},k[C]||{});if(k._DEFAULTS=t.extend(!0,{},k._attrs,k._props),(this.webComponentsSupport||m.propType||k.propType)&&(k._propType=t.extend(!0,this._getDataInfo(k._DEFAULTS),m.propType||{},m._propType||{},k.propType||{})),v&&(y?n.prototype.isCE=!1:this.register(h[1],n,o,a)),this[a]=n,!this[p]){var D={};if(l){var S=this[m.name];S&&t.extend(D,S.Templates)}this[p]={DEFAULTS:{},Templates:D};var T="create"+a.substr(1);u[T]||(u[T]=function(t){return u.createElement(t,c)})}this[c]=function(o,l){if(1<(o=t(o)).length){for(var i=[],s=0;s<o.length;s++)i[s]=ZPeopleComponents._createComponent(o[s],l,a,n);return i}return _._createComponent(o,l,a,n)};var w=this.pluginPrefix+c;t.prototype[w]=function(o){var l=this,i=this.length;if(o&&"object"!==_typeof(o)){if(!("string"==typeof o&&0>o.indexOf("_")))return!1;for(var c,r=Array.prototype.slice.call(arguments,1),d=0;d<i;d++)(c=t(this[d]).data(p))&&(l=c[o].apply(c,r))}else{o=o||{};for(var s=0;s<i;s++)_._createComponent(this[s],o,a,n,!0)}return l}},_getDataInfo:function(t){var a={};for(var o in t){var n=t[o];void 0!==n&&null!==n&&(a[o]=Array.isArray(n)?"array":_typeof(n))}return a},_defineGetProp:function(t,a,o){Object.defineProperty(t,a,{get:function(){return o}})},_extend:function(a,o){t.each(a.prototype,function(t,n){"function"==typeof n&&(a.prototype[t]=function(){var a=function(){return o.prototype[t].apply(this,arguments)};return function(){return this._super=a,n.apply(this,arguments)}}())})},_createComponent:function(a,o,n,l,i){a=t(a);var s=n.toLowerCase();if(a[0]&&(a[0]===window||a[0].nodeType)){var r;if(a.data(s))return i?a:a.data(s);var d=this._getInitOpts(a,s,o,l),c=new _[n](a,d,o);return"development"===u.environment&&u.handleExceptions&&(c=u.handleExceptions(c)),u.isInDOM(a[0])||(a=c.element),a.data((_defineProperty(r={},s,c),_defineProperty(r,"componentName",s),r)),c}},_getInitOpts:function(a,o,n,l){var i=u._getOpts(a,l);if(i.override){var s={};for(var r in i)if(0===r.indexOf(o)){var d=r.replace(o,"");s[d[0].toLowerCase()+d.substring(1)]=i[r]}i=s}return t.extend(!0,{},u[o]?u[o].DEFAULTS:{},i,n)},_getOpts:function(a,o){if(a=a instanceof u.DOMUtilInstance?a[0]:a){var l,n=a.tagName||"";if(this.webComponentsSupport&&window.customElements?customElements.get(n.toLowerCase()):void 0)a.$c||this._triggerConnectedCallback(a),a.$c&&(l=a.$c[a.$c.parentElement?"_subOpts":"_opts"]);else if(!(l=t.data(a,"ZCOpts"))&&a.attributes){var i=a.getAttribute("data");i&&(l=_._getObject(i,a,o)),l=this[a.dataset&&!u.Browser.isIE?"_getDataSet":"_getDataAttributes"](a,l||{},o),t.data(a,"ZCOpts",l)}return l||{}}},getOpts:function(){return u._getOpts.apply(u,arguments)},_getObject:function(t,a,o,n){if("object"===_typeof(t))return t;t=0>(t=t||a.getAttribute("data")).indexOf("{")&&"false"!==t?"{ ".concat(t," }"):t;try{t=JSON.parse(t.replace(/'/g,'"'))}catch(a){t=!n||o&&-1<Object.keys(o.prototype._props).indexOf(n)?{}:t}return t},_getDataSet:function(t,a,o){var l,n=t.dataset;for(var s in n)l=n[s],a[s=this._getCorrectedKey(s)]=this._normalizeValue(s,l,o&&o.prototype,o);return a},_getCorrectedKey:function(t){return t.replace(/(Html|Svg|svg|Hsv|Hsl|Rgb|Ui)/g,function(t){return t.toUpperCase()}).replace(/^(OKButton)/i,"OKButton")},_normalizeValue:function(t,a,o,n){if(a){var l=o&&o._propType;if(l&&l[t]){var i=l[t];try{"boolean"===i?a="true"===a||a===t:"array"===i?a=JSON.parse(a):"object"===i?a=_._getObject(a,void 0,n,t):"number"===i&&(a=parseFloat(a))}catch(t){return a}}else a="true"===a||"false"===a?"true"===a:"string"!=typeof a||0>a.indexOf("{")?a:_._getObject(a,void 0,n,t)}return a},_getDataAttributes:function(t,a,o){for(var n=t.attributes,l=n.length,s=0;s<l;s++){var r=n[s].nodeName,d=""===n[s].nodeValue?"true":n[s].nodeValue;"data"!==r&&r.match(/^data-/)&&(a[r=u._getCamelCaseStr(r.replace(/^data-/,""))]=this._normalizeValue(s,d,o&&o.prototype,o))}return a},_getCamelCaseStr:function(t){return t.replace(/(-html|-svg|svg|-hsv|-hsl|-rgb|-ui)|(-\w)/gi,function(t){return t.replace("-","").toUpperCase()})},_init:function(){_.webComponentsSupport&&_._initDeferredCE(),_.$body=t("body"),_.setProperties()},setProperties:function(){var t=document.documentElement||{},o=document.body||{};_.documentObject={height:a(t.clientHeight,t.scrollHeight,t.offsetHeight,o.offsetHeight,o.scrollHeight),width:a(t.clientWidth,t.scrollHeight,t.offsetHeight,o.offsetWidth,o.scrollWidth)},_.windowObject={height:window.innerHeight,width:window.innerWidth},_._bindFontSizeChange&&_._bindFontSizeChange(document)},_render:function(a,o,n,l,i,s){var r=s.isCE,d=s.skipParent,c=s.container,_=s.refElement,p=!1,m=u[o].Templates;if(a.zElement=!1,n=n||"children",n=r?"WC"+(n[0].toUpperCase()+n.substr(1)):n,d||c)l=l||d&&c||_;else{var g=m[r?"WCContainer":"container"];g&&(l=ZT.DOM(g(a)),i?t(l).appendTo(i):_&&t(l).insertAfter(_),p=!0)}var h=m[n];return h&&ZT.renderView(h(a),l),p&&(a.zElement=!0,!a.differentAppend&&t(_).hide()),l},_handleFocus:function(a,o){a=t(a);var _,n=u.keyCode,l=".fs."+o,i="",s=!1,r="blur"+l,d="focus"+l,c="mousedown"+l+" keydown"+l+" keyup"+l;a.off(c+" "+r+" "+d).on(c,function(t){a.hasClass("is-disabled")||(t.originalEvent&&"keyup"!==t.type&&(s=document.activeElement!==a[0]),_=t.keyCode,i="mousedown"===t.type?"has-mfocus":"has-kfocus","keydown"===t.type&&_!==n.ENTER&&_!==n.SPACE||"keyup"===t.type&&_!==n.TAB||a.addClass("has-focus "+i))}).on(r,function(){return a.removeClass("has-focus has-mfocus has-kfocus")}).on(d,function(){a.hasClass("is-disabled")||(!s&&a.addClass("has-focus has-kfocus"),s=!1)})},encodeHTML:function(t){return t&&"string"==typeof t?(s.nodeValue=t,l.innerHTML.replaceAll("\n","<br>")):t},decodeHTML:function(t){return u.textarea.innerHTML=t,u.textarea.value},setI18NKeys:function(a,o,n){if("object"===_typeof(a))for(var l in a)this.keys[l]=t.extend({},this.keys[l],a[l]);else this.keys[a]=n?o:t.extend({},this.keys[a],o)},_triggerFunction:function(t,a,o){var n=u._getContext(t);return n&&n.apply(a,o)},_getContext:function(t){if("string"==typeof t){for(var a=window,o=t.split("."),n=0;n<o.length&&a;n++)a=a[o[n]];return a}return t},getI18NText:function(t,a,o){var n;4===arguments.length&&(n=o,o=arguments[3]);var s=(_.keys[t]||{})[a]||"";if(""===s&&n&&(s=n[a]),o)for(var r=0;r<o.length;r++)s=s.replace("{"+r+"}",o[r]);return s},create:function(t){var a=t.ctype.replace(t.ctype.charAt(0),"");return this["create"+a.charAt(0).toUpperCase()+a.substring(1)](t)},getRTLBasedDir:function(t,a){return a?t.replace(/(left|right)/,function(t){return"left"===t?"right":"left"}):t},display:function(a,o){if(!u._display){var n=l.cloneNode(),i=["-webkit-box","-moz-box","-ms-flexbox","-webkit-flex","flex"].map(function(t){return"display:"+t}).join(";");document.body.appendChild(n).setAttribute("style",i),u._display=window.getComputedStyle(n).display,n.parentElement.removeChild(n)}return t(o).css("display",a?"none":u._display),o},Browser:{isMobile:/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i.test(n),isIE:-1<n.indexOf("msie")||-1<n.indexOf(".net"),isEdge:-1<n.indexOf("edge"),isSafari:-1<n.indexOf("safari")&&0>n.indexOf("chrome"),isChrome:-1<n.indexOf("chrome")&&-1<navigator.vendor.indexOf("Google Inc")&&-1===n.indexOf("opr"),isFirefox:-1<n.indexOf("firefox"),getIEVersion:function(){var t=-1;if(u.Browser.isIE){var a=n.match(/MSIE (\d*)/i);a||(a=n.match(/Trident.*rv:(\d*)/i)),a&&(t=parseInt(a[1]))}return t},getFirefoxVersion:function(){var t=-1;return u.Browser.isFirefox&&(t=parseInt(n.match(/Firefox\/(\d*)/i)[1])),t}},_objectTypeFallback:function(a,o,n,l){var i=["name","attrs","props","CLASSES","EVENTS","SELECTORS"];a.name=o;var s=function(t){function a(){return _classCallCheck(this,a),_possibleConstructorReturn(this,_getPrototypeOf(a).apply(this,arguments))}return _inherits(a,n),a}(),r=s.prototype;for(var d in a)if(a.hasOwnProperty(d)){var c=a[d],_=r[d],u=void 0,p="function"==typeof c,m=void 0;if(!p){for(var g=l;g&&!(m=g.hasOwnProperty(d));)g=Object.getPrototypeOf(g);m&&(u=Object.getOwnPropertyDescriptor(g,d))}if(p||!m||u.writable)r[d]=c;else{if(m)if("object"===_typeof(c))-1!==i.indexOf(d)&&(c=Array.isArray(c)?_.concat(c):t.extend(!0,{},_,c));else if(c===_)continue;this._defineGetProp(r,d,c)}}return this._extend(s,n),a=s}};window.ZPeopleComponents=_;var u=_;u.Templates.Utilities={},document.addEventListener("DOMContentLoaded",u._init),window.addEventListener("resize",u.setProperties);var p=function(){function a(o){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};_classCallCheck(this,a),this.element=o,this._I18N={messages:n.messages,labels:n.labels},this._opts=t.extend(!0,{},this._DEFAULTS,n),this._create(o,this._opts),o&&this._defineGetterSetter()}return _createClass(a,[{key:"name",get:function(){return"corecomponent"}}]),_createClass(a,[{key:"_getID",value:function(t,a,o){return u.getID(this.name,t,a,o)}},{key:"_getScrollParent",value:function(t){return u._getScrollParent(t)}},{key:"_bindScrollEvent",value:function(a,o,n){for(var l=this,s=a||this._getScrollParent(o),r=0;r<s.length;r++)t(s[r]).on("scroll."+this.name,function(){n(l)})}},{key:"_unbindScrollEvent",value:function(a,o){for(var n=a||this._getScrollParent(o),l=0;l<n.length;l++)t(n[l]).off("scroll."+this.name)}},{key:"_alterBorderRadius",value:function(t,a){return u.alterBorderRadius&&u.alterBorderRadius(_objectSpread({},t,{element:t.element||this.getElement(),forElement:t.forElement||this._opts.forElement}),a)}},{key:"_isValid",value:function(t,a){return-1<this._ALLOWEDVALUES[t].indexOf(a)}},{key:"_addEvents",value:function(t){var a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.getElement();for(var o in t){var n=this._suffixCName(t[o]);n&&a.off(n).on(n,this["_"+o+"Handler"].bind(this))}}},{key:"_suffixCName",value:function(t){var a=this;return t?t.split(" ").reduce(function(t,o){return t+o+"."+a.name+" "},""):"."+this.name}},{key:"_removeEvents",value:function(t){(1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.getElement()).off(this._suffixCName(t))}},{key:"_setParentClass",value:function(t){var o=this._data.parentClass;if(o!==t){var n=this._useParent||!this.container?this.element:this.container;n&&(o&&n.removeClass(o),n.addClass(t)),this._data.parentClass=t}}},{key:"_commonPropSetters",value:function(){this._data={};var a=this._opts,n=this.element[0].dir||document.body.dir;a.rtl="rtl"===n||a.rtl,a.templateData&&"object"===_typeof(a.templateData)&&t.extend(!0,this._data,a.templateData),this._data.isCE=a.isCE}},{key:"_create",value:function(t,a){this._commonPropSetters(),this.isCE=this.isCE||a.isCE,this._useParent=this.isCE,this._init.apply(this,arguments),this._useParent&&(this.container=t);var o=this._opts,n=this;this._data.parentClass=(o.zclassName||o.className||"")+(o.rtl?" zh-rtl":""),Object.defineProperty(this._data,"className",{set:function(t){n._setParentClass(t||n._data.parentClass)},get:function(){return n._data.parentClass}}),this._initialRender(),this._construct.apply(this,arguments),this._data.rendered=!0,this._bindEvents()}},{key:"_initialRender",value:function(){this._render()}},{key:"_appendEle",value:function(a){if(a&&(a=t(a)[0])){var o=this.getElement()[0];a.lastElementChild!==o&&a.appendChild(o)}}},{key:"_init",value:function(){}},{key:"_buildData",value:function(){}},{key:"_postRender",value:function(){}},{key:"_postEachRender",value:function(){}},{key:"_setPosition",value:function(){}},{key:"_setSize",value:function(){}},{key:"_updatePopupList",value:function(){}},{key:"_preRender",value:function(t){return t}},{key:"_construct",value:function(){}},{key:"_bindEvents",value:function(){}},{key:"_handleFocus",value:function(t,a){u._handleFocus(t||this.container,this.name,a)}},{key:"_defineGetterSetter",value:function(){var o,n,t=Object.keys(this._DEFAULTS),a=t.length;for(n=0;n<a;n++)this[o=t[n]]||this._defineProperty(o)}},{key:"_defineProperty",value:function(t){Object.defineProperty(this,t,{set:function(a){this.setAttribute(t,a)},get:function(){return this.getAttribute(t)}})}},{key:"_display",value:function(t){var a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.element;return u.display(t,a)}},{key:"_checkPxToRem",value:function(t){return t+(/(px)$/.test(t)?"":"px")}},{key:"hide",value:function(t){(this.container||this.element)[(t?"add":"remove")+"Class"]("zh-dnone")}},{key:"_dispatchEvent",value:function(a,o,n,l,i){var d,s=a,r=this.eventPrefix||this.name;this.isCE&&(s="z"+s);var c=s||a;l=l||this.element;var p,m,_=this._opts[c];if((n=n||{}).fromUI=n.fromUI||i,n.element=l,n.container=this.getElement(),n.options=this._opts,n.componentName=r,o=t.Event(o),n.isTrusted=!!o.originalEvent,o.type=(r&&!this.isCE?r+c:c).toLowerCase(),o.originalTarget=o.target,o.target=l,m=o.originalEvent)for(p in m)p in o||(o[p]=m[p]);return this.isCE?o=this._dispatchCEEvent(s,n,l,o.originalEvent):(o.detail=n,l.trigger(o,n)),this["on"+c]&&this["on"+c](o,n),l[0]["onlyte"+c]&&l[0]["onlyte"+c](o,n),n=[o].concat(n),this.isCE||(d=_&&"string"==typeof _?u._triggerFunction(_,l[0],n):"function"==typeof _?_.apply(l,n):void 0),"boolean"==typeof d?d:!o.isDefaultPrevented()}},{key:"_getRTLBasedDir",value:function(t){return u.getRTLBasedDir(t,this._opts.rtl)}},{key:"_getI18NText",value:function(t,a,o){var n=(this._I18N.labels||this._I18N.messages||{})[t];if(!n){var l=this._opts.labels||this._opts.messages,s=this._opts[o]||{},r=u.keys[this.I18NModule||this.name]||{};n=s[t]||r[t]||l[t]}if(a)for(var d=0;d<a.length;d++)n=n.replace("{".concat(d,"}"),a[d]);return n}},{key:"listen",value:function(t,a){this["on"+(t[0].toUpperCase()+t.substr(1)).replace(this.name,"")]=a}},{key:"getElement",value:function(){return this.container||this.element}},{key:"getAttribute",value:function(t){return this._opts[t]}},{key:"getAttributes",value:function(){return t.extend(!0,{},this._opts)}},{key:"setAttributes",value:function(t){1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.element;var o=this._data||{};for(var n in t)o.modifiedAttr&&"string"!=typeof o.modifiedAttr||(o.modifiedAttr=[]),o.modifiedAttr.push(n),this.setAttribute(n,t[n],!0);this._renderAttrChange()}},{key:"_getStyle",value:function(t){if(t&&"object"===_typeof(t)){var a="";for(var o in t)t[o]&&(a+="".concat(o,":").concat(t[o],";"));return a}return t}},{key:"_setAttribute",value:function(){}},{key:"_getOptVal",value:function(a,o){return a&&"object"===_typeof(a)&&"object"===_typeof(o)?a instanceof Array||o instanceof Array||a instanceof Date||a instanceof RegExp||a instanceof t||a instanceof Element||a===window||a.nodeName?a:t.extend(!0,{},o,a):a}},{key:"_isNotNull",value:function(t){return!this._isNull(t)}},{key:"_isNull",value:function(t){return void 0===t||null===t}},{key:"_isInDOM",value:function(t){return u.isInDOM(t)}},{key:"_render",value:function(a){var o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this._opts.templateFunc,n=2<arguments.length?arguments[2]:void 0,l=3<arguments.length&&void 0!==arguments[3]?arguments[3]:this._skipParent;a=a||Object.assign({},this._opts,this._data),a=this._preRender(a);var i=this._opts.templateName||this.name,s=!!u[i].Templates[a.isCE?"WCContainer":"container"];l="boolean"==typeof l?l:!s||a.rendered;var r={isCE:this._data.isCE,skipParent:l,container:this.container?this.container[0]:void 0,refElement:this.element&&!a.differentAppend?this.element[0]:void 0},d=u._render(a,i,o,n,a.differentAppend,r);d&&a.zElement&&(this.container=t(d));var c=this.getElement();return a.attrs&&((n=a.alwaysSetAttrs?c:n?t(n):this._useParent||!this.container?this.element:void 0)&&n.attr(a.attrs)),this._data.rendered||this._postRender(c,this._opts),this._postEachRender(c,a),d}},{key:"setAttribute",value:function(a,o,n){var d,l=this,i=this._opts,s=i[a],r=this.getElement();if(void 0===o&&(o=this._DEFAULTS[a]),"object"===_typeof(s)&&null!==s||s!==o){if(o=this._getOptVal(o,s),this.isCE&&this.element[0]._initialized||!this.isCE||u.useWebComponentsSelector){var c=this._data;c&&!c.modifiedAttr&&(c.modifiedAttr=a),this._setAttribute(a,o,n)}(d=r&&!this._stopAttrUpdate)&&("rtl"===a?(r[o?"addClass":"removeClass"]("zh-rtl"),this._updateClass("zh-rtl",!o||null)):"className"===a||"zclassName"===a?this._updateClass(o,s):"disabled"===a?this._disable(o):"labels"===a||"messages"===a?this._I18N[a]=o:"appendTo"===a?this._appendEle(o||"body"):"templateFunc"===a?this._domChanged=!0:"templateData"===a?o?(t.extend(!0,this._data,o),this._domChanged=!0):s&&(Object.keys(s).forEach(function(t){return l._data[t]=null}),this._domChanged=!0):d=!1),this._stopAttrUpdate=!1,d&&(i[a]=o),n||this._renderAttrChange()}}},{key:"refresh",value:function(){this._reInit=!0,this._renderAttrChange()}},{key:"_renderAttrChange",value:function(){this._reInit&&(this._domChanged=!0,this._buildData()),this._domChanged&&this._render(),this._domChanged=this._reInit=!1,this._data&&(this._data.modifiedAttr=void 0)}},{key:"_setBtnValue",value:function(t,a){var o=a&&a.mainElement;o?u.button(o).setAttributes(t):this._domChanged=!0}},{key:"_setUndefined",value:function(t,a){for(var o=0,n=t.length;o<n;o++)this["_"+t[o]+a]=void 0}},{key:"_disable",value:function(t,a,o){var n=!a;a=a||this.getElement(),o||(n?this._updateClass(t?"is-disabled":"",!t&&"is-disabled"):a[t?"addClass":"removeClass"]("is-disabled")),this._addedByComponent=!0,t?a.attr({"aria-disabled":!0,disabled:!0}):a.removeAttr("aria-disabled disabled"),this._addedByComponent=!1}},{key:"_emptyElement",value:function(t,a){for(;a;){var o=a.nextSibling;t.removeChild(a),a=o}}},{key:"_updateClass",value:function(t,a,o){if(o)o[a?"removeClass":"addClass"](t);else if(this._data){var n=this._data,l=n.className;a?("boolean"==typeof a&&(a=t,t=""),l=l.replace(new RegExp("(?:^|( +)?)"+a+"(?:$|( +)?)","g")," "+t+" ")):l+=" "+t,n.className=l}}},{key:"_destroy",value:function(){}},{key:"destroy",value:function(){var t=!!(0<arguments.length&&void 0!==arguments[0])&&arguments[0];if(this.container||this.element){this._dispatchEvent("beforedestroy");var a=this.element,o=this.container,n=o||a;n.off("."+this.name),this._destroy(t),o||this._useParent||a.empty(),this._keepTemplateData||ZT.removeCacheData(n[0]),a&&a.removeData(this.name).removeData("ZCOpts"),this._data&&this._setParentClass(" "),!this._useParent&&o&&(o.remove(),a[0].style.display=""),this.isCE&&!this._eleRemoval&&this._destroyCE(!0),t&&a.remove(),this.container=this.element=void 0}}},{key:"_translateEToA",value:function(t){var a=this._opts.locale||"";return"ar"===a||0===a.indexOf("ar-")?(t+"").replace(/[0-9]/g,function(t){return String.fromCharCode(t.charCodeAt(0)+1584)}):t}},{key:"_translateAToE",value:function(t){var a=this._opts.locale||"";return"ar"===a||0===a.indexOf("ar-")?(t+"").replace(/[\u0660-\u0669]/g,function(t){return t.charCodeAt(0)-1632}):t}},{key:"disable",value:function(){var t=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];this._opts.disabled=t,this._disable(t),this._renderAttrChange()}},{key:"enable",value:function(){this.disable(!1)}},{key:"_removeSpecialChars",value:function(t){return t.replace(/[^a-zA-Z0-9_-]/g,"")}},{key:"_setProp",value:function(t,a,o){var l=this._getMapping()[a];if(l){var i=l.split("."),s=i.pop();i.forEach(function(a){t=t[a]=t[a]||{}}),t[s]=o}}},{key:"_getById",value:function(a){return this.container?this.container.find('[id="'+a+'"]'):t()}},{key:"_encodeContent",value:function(t,a){return(a=this._isNotNull(a)?a:!this._isEncoded())?u.encodeHTML(t):t}},{key:"_isEncoded",value:function(){return this._opts.isLabelHTMLEncoded}},{key:"_cloneObject",value:function(t){if(t){if(t.nodeType)return t;var o,a=Array.isArray(t)?[]:{};for(var n in t)o=t[n],a[n]="object"===_typeof(o)?this._cloneObject(o):o;return a}}},{key:"_isAlphaNumericKey",value:function(t){var a=t.keyCode;return!(t.metaKey||t.ctrlKey)&&(186<=a&&192>=a||219<=a&&222>=a||48<=a&&57>=a||65<=a&&90>=a||97<=a&&122>=a||a===u.keyCode.SPACE||a===u.keyCode.DELETE||a===u.keyCode.BACKSPACE)}},{key:"_getItemId",value:function(t,a){var l,n=t.zitemid;if(!n){var i=l=this._getUniqueValue(t);i&&(l!==(i=this._removeSpecialChars(i+""))&&!1!==this._opts.randomDataID&&(i=i+"-"+o(1e8*Math.random()))),n=i?a+"-"+i:u.getID(this.name,null,a)}return n}},{key:"_escapeQuery",value:function(t){return t.replace(/([',",(,),+,?,>,<,.,|,*,\\,\[,\]])/g,"\\$1")}},{key:"_getCustomContent",value:function(t,a,o){var n=this,l=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"label",i=4<arguments.length?arguments[4]:void 0;if(!a){var s=this._getMapping(),r=this._encodeContent(this._getProp(t,l),i);return o&&(r=this._highlight(r,s[l])),r}return"string"==typeof a?a.replace(/(#?#[^#\n"']+#?#)/g,function(a){var l=a.replace(/#/g,""),s=t[l];return n._isNotNull(s)?(s=n._encodeContent(s,i),o&&(s=n._highlight(s,l)),s):a}):"function"==typeof a?a(t):void 0}},{key:"_mapJSONToData",value:function(t,a,o){if(this._isNotNull(a)&&this._isNotNull(t)){a=a.trim().split(".");for(var n=0;n<a.length;n++)t=t[a[n]];return t&&o?this._encodeContent(t):t}}},{key:"_toArr",value:function(a,o){var l,n=this;return a instanceof t&&(l=a.toArray()),(l=Array.isArray(a)?a:[a]).filter(function(t,a){if(n._isNotNull(t)&&(!o||l.indexOf(t)===a))return!0})}},{key:"_isAjaxSource",value:function(t){return t&&(t.URL||t.search)}},{key:"_removeNulls",value:function(t){var a=this;return t.filter(function(t){return a._isNotNull(t)})}},{key:"_getProp",value:function(t,a,o){var l=this._getMapping()[a];return this._mapJSONToData(t,l,o)}},{key:"_getMapping",value:function(){return this._dataMapping||this._opts.dataMapping}},{key:"_getUniqueValue",value:function(t){var a;if(this._isNotNull(t))return"object"===_typeof(t)?(a=this._getProp(t,"value"),this._isNotNull(a)?a+"":(a=this._getProp(t,"text"),this._isNotNull(a)?a+"":a)):t+""}},{key:"_getMatchingRegex",value:function(t,a){var o=a.criteria||"contains",n=a.caseSensitive;return t=this._escapeQuery(t),new RegExp({contains:"("+t+")",startswith:"(^"+t+")",endswith:"("+t+"$)",equals:"(^"+t+"$)"}[o.toLowerCase()],"g"+(n?"":"i"))}},{key:"_getSearchBy",value:function(t){t?"string"==typeof t&&(t=t.split(",")):t=[this._getMapping().text];return t.map(function(t){return t.trim()})}},{key:"_isFunc",value:function(t){return"function"==typeof t}}]),a}();u.CoreComponent=p,u.tagNames={zslider:["div","z-slider"],zdateselect:["select","z-dateselect"],zdatepicker:["div","z-datepicker"],zbutton:["button","z-button"],zdaterangepicker:["div","z-daterangepicker"],zdialog:["div","z-dialog"],zpopover:["div","z-popover"],ztabpanel:["div","z-tabpanel"],zpanel:["div","z-panel"],zcollapsiblepanel:["div","z-collapsiblepanel"],zcollapsiblepanels:["div","z-collapsiblepanels"],zmenu:["div","z-menu"],zlistbox:["div","z-listbox"],ztokenfield:["input","z-tokenfield"],zsuggestfield:["input","z-suggestfield"],zdropdownlist:["div","z-dropdownlist"],zselect:["select","z-select"],zalertdialog:["div","z-alertdialog"],zalertbanner:["div","z-alertbanner"],zcombobox:["select","z-combobox"],zdatetimepicker:["div","z-datetimepicker"],ztimeinput:["div","z-timeinput"],ztimefield:["input","z-timefield"],zcolorpicker:["div","z-colorpicker"],znumberfield:["input","z-numberfield"],zadvancedcolorpicker:["div","z-advancedcolorpicker"],zradiobutton:["div","z-radiobutton"],zcheckboxbutton:["div","z-checkboxbutton"],zmenubutton:["button","z-menubutton"],zsplitbutton:["button","z-splitbutton"],zcolorbutton:["div","z-colorbutton"],zdatefield:["input","z-datefield"],ztoggleswitch:["div","z-toggleswitch"],zcolorselect:["div","z-colorselect"],zprogressbar:["div","z-progressbar"],zprogresswheel:["div","z-progresswheel"],zdatetimefield:["input","z-datetimefield"]},u.localeInfo={"en-US":{daysAbbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsAbbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],firstDayOfWeek:0,dateFormat:{short:"M/d/yyyy",medium:"MMM d, yyyy",long:"MMMM d, yyyy",full:"dddd, MMMM d, yyyy"},timeFormat:{short:"h:mm tt",medium:"h:mm:ss tt",long:"hh:mm:ss tt"},dateTimeFormat:{short:"MMM d, yyyy, hh:mm:ss tt",medium:"MMM d, yyyy, hh:mm:ss tt",long:"dddd, MMMM d, yyyy 'at' h:mm tt",full:"dddd, MMMM d, yyyy 'at' h:mm tt"},numberFormat:{thousandSeparator:",",decimalSeparator:"."},currency:{code:"USD",name:"United States Dollar",symbol:"$"}}},u.alterBorderRadius=function(t,a){var o=t.element,n=t.forElement;if(o.add(n).removeClass("zh-radiusbottomleft zh-radiustopleft zh-radiusbottomright zh-radiustopright zh-radiustop zh-radiusbottom zh-radiusright zh-radiusleft"),!a){var l={right:"left",left:"right",top:"bottom",bottom:"top"},i=t.direction,s=t.offset;if(t.hasSideAlignment&&0>["right-top","right-bottom","left-top","left-bottom"].indexOf(i))o.addClass(i.replace(/([a-z]+)-([a-z]+)/g,function(t,a,o){return"zh-radius"+l[o]+l[a]})),s.left+=0===i.indexOf("left")?1:-1;else{var p,m,r=parseInt,d=0,c=0,_=0,u=0;if(n.length&&(d=r(n.css("border-top-left-radius")),c=r(n.css("border-top-right-radius")),_=r(n.css("border-bottom-left-radius")),u=r(n.css("border-bottom-right-radius"))),5>=d&&5>=c&&5>=_&&5>=u)0===i.indexOf("top")||0===i.indexOf("bottom")?(i.replace(/(\w+)-(\w+)/g,function(t,a,i){var s=n.outerWidth(),r=o.outerWidth(),d=s<r;s===r?(p=l[a],m=a):(p=l[a]+(d?i:""),m=a+(d?"":i))}),s.top+=0===i.indexOf("top")?1:-1):(/^right(-)?(\w)*$/.test(i)||/^left(-)?(\w)*$/.test(i))&&(i.replace(/^right|left(-)?(\w)*$/g,function(t){p=l[t.split("-")[0]]}),m=l[p]),o.addClass("zh-radius"+p),n.addClass("zh-radius"+m);else s.top+=2}return s}},u.AJAX={transport:function(a,o,n,l){return t.ajax({url:a.sourceURL,data:a.data,type:a.type,dataType:a.dataType,headers:a.headers||{},success:function(t){o&&o(t)},fail:function(t,a){n&&n(t,a)},error:function(t,a){n&&n(t,a)},always:function(){l&&l()}})}},u.getPrototype=function(t,a){if(t instanceof Function){for(var n,o=t;o&&(n=Object.getPrototypeOf(o),o=this._mergePrototypes(a.prototype,o.prototype),n&&n!==Object&&n.name);)o=n;return o}},u._mergePrototypes=function(a,o){for(var r,d,n=Object.getOwnPropertyNames(o),l=0,s=n.length;l<s;l++){r=!1;for(var c=0,_=(d=Object.getOwnPropertyNames(a)).length;c<_;c++)if(n[l]===d[c]&&("object"!==_typeof(o[d[c]])||o[d[c]]instanceof Array)){r=!0;break}if(!r&&"SELECTORS"!==n[l]){var u=o[n[l]];a[(o.isCE?"_":"")+n[l]]="object"!==_typeof(u)||u instanceof Array?u:t.extend(!0,{},u,a[n[l]])}}return a.constructor}})(jQuery),function(t){"object"===("undefined"==typeof module?"undefined":_typeof(module))&&"object"===_typeof(module.exports)&&(module.exports=t)}(ZPeopleComponents);var ZEventNameSpacing=function(){function t(){_classCallCheck(this,t),this.functionMaps={}}return _createClass(t,[{key:"addEventListener",value:function(t,a,o){this.functionMaps[a]=o,o&&t.addEventListener(a.split(".")[0],o)}},{key:"removeEventListener",value:function(t,a){this.functionMaps[a]&&(t.removeEventListener(a.split(".")[0],this.functionMaps[a]),delete this.functionMaps[a])}}]),t}(),ZPolyfill={};try{ZPolyfill.WeakMap=WeakMap}catch(t){ZPolyfill.WeakMap=function(t,a){function o(a){i(this,"_",{value:"_@ungap/weakmap"+t++}),a&&a.forEach(n,this)}function n(t){this.set(t[0],t[1])}var l=this,i=a.defineProperty,s=a.hasOwnProperty,r=o.prototype;return r.delete=function(t){return l.has(t)&&delete t[l._]},r.get=function(t){return l.has(t)?t[l._]:void 0},r.has=function(t){return s.call(t,l._)},r.set=function(t,a){return i(t,l._,{configurable:!0,value:a}),l},o}(Math.random(),Object)}var ZWeakMap=ZPolyfill.WeakMap,ZCTemplates={nodeRef:new ZWeakMap,templateCache:{},uniqueId:"{zt-".concat((Math.random()+"").slice(2),"}"),attrSuffix:"$zta$",attrRegEx:/([ \x09\x0a\x0c\x0d])([^\0-\x1F\x7F-\x9F \x09\x0a\x0c\x0d"'>=/]+)([ \x09\x0a\x0c\x0d]*=[ \x09\x0a\x0c\x0d]*(?:[^ \x09\x0a\x0c\x0d"'`<>=]*|"[^"]*|'[^']*))$/,Event:new ZEventNameSpacing,renderView:function(t,a){var o=new ZNodeProcessor,n=this.nodeRef,l=n.get(a);l||(o._emptyElement(a,a.firstChild),n.set(a,l=o),l._addPlaceholders(a)),l._setResult(t),l.update()},removeCacheData:function(t){this.nodeRef.get(t)&&this.nodeRef.set(t,null)},DOM:function(t){var a=new ZNodeProcessor;if(t instanceof ZCompTemplates)return a._processHTML(t,!0).childNodes[0]},functionList:new ZWeakMap,prevValues:new ZWeakMap,_specialFunc:function(t){return function(){var a=t.apply(void 0,arguments);return ZT.functionList.set(a,!0),a}},_isSpecialFunc:function(t){return"function"==typeof t&&this.functionList.has(t)},html:function(t){for(var a=arguments.length,o=Array(1<a?a-1:0),n=1;n<a;n++)o[n-1]=arguments[n];return new ZCompTemplates(t,o,"html")},_updateTemplateCache:function(t){var a=this.templateCache,o=a[t.type];o||(o={strings:new ZWeakMap,keys:{}},a[t.type]=o);var n=o.strings.get(t.strings);if(n)return n;var l=t.strings.join(this.uniqueId);return(n=o.keys[l])||(n=new ZNodeTraverser(t,t.getTemplate()),o.keys[l]=n),o.strings.set(t.strings,n),n},_processAttr:function(t,a,o){var n=a[0],l=a.slice(1);return"?"===n?[new ZConditionalAttributePart(t,l)]:"."===n?new ZPropertyPart(t,l,o)._parts:-1<a.indexOf("on-")?[new ZEventPart(t,a.slice(3))]:new ZAttributeUpdater(t,a,o)._parts},_processTextValue:function(){return new ZNodeProcessor},_isPlainText:function(t){return null===t||"object"!==_typeof(t)&&"function"!=typeof t},_getTemplate:function(){var t=function(){return document.createElement("template")};return"content"in t()?function(a){var o=t();return o.innerHTML=a,o}:function(t){var a=document.createDocumentFragment(),o=document.createElement("div"),n=function(){return o.innerHTML="<table>"+t+"</table>",o.firstChild.firstChild};/^(<td|<th|<tr)/.test(t)?o=/^<tr/.test(t)?n():n().firstChild:o.innerHTML=t;for(var l=o.childNodes;l[0];)a.appendChild(l[0]);return a.content=a,a}}()},ZT=ZCTemplates;ZT.placeholder="\x3c!--".concat(ZT.uniqueId,"--\x3e"),ZT.customHTML=ZT._specialFunc(function(t){return function(a){if(ZT.prevValues.get(a)!==t||!ZT._isPlainText(t)){var n=ZT._getTemplate(t);a._setResult(document.importNode(n.content,!0)),ZT.prevValues.set(a,t)}}});var ZCompTemplates=function(){function t(a,o,n){_classCallCheck(this,t),this.strings=a,this.values=o,this.type=n}return _createClass(t,[{key:"_getHTML",value:function(){for(var t=this.strings.length-1,a="",o=0;o<t;o++){var l=!1;a+=this.strings[o].replace(ZT.attrRegEx,function(t,a,o,n){return l=!0,a+o+ZT.attrSuffix+n+ZT.uniqueId}),l||(a+=ZT.placeholder)}return a+this.strings[t]}},{key:"getTemplate",value:function(){return ZT._getTemplate(this._getHTML())}}]),t}(),ZTemplateUpdater=function(){function t(a){_classCallCheck(this,t),this.template=a,this._parts=[],this._partIndex=this._nodeIndex=0}return _createClass(t,[{key:"_updateNodes",value:function(){var t=document.importNode(this.template._template.content,!0);return this._traverseDOM(t),t}},{key:"_traverseDOM",value:function(t){var a=this.template._parts;for(t=t.firstChild;t&&this._partIndex<a.length;){var o=a[this._partIndex];if(this._nodeIndex===o.index){if("node"===o.type){var n=ZT._processTextValue();n._setRefNodes(t),this._parts.push(n)}else{var l;(l=this._parts).push.apply(l,_toConsumableArray(ZT._processAttr(t,o.name,o.strings)))}this._partIndex++}else this._nodeIndex++,this._traverseDOM(t),t=t.nextSibling}}},{key:"updateValues",value:function(t){for(var n,a=0,o=this._parts.length;a<o;a++)(n=this._parts[a])&&(n._setResult(t[a]),n.update())}}]),t}(),ZAttributeUpdater=function(){function t(a,o,n){_classCallCheck(this,t),this.node=a,this.attrName=o,this.strings=n,this._parts=[];for(var l=0;l<n.length-1;l++)this._parts[l]=this._createPart()}return _createClass(t,[{key:"_createPart",value:function(){return new ZAttributePart(this)}},{key:"_getValue",value:function(){for(var t=this.strings,a="",o=t.length-1,n=0;n<o;n++){a+=t[n];var l=this._parts[n];if(l){var s=l.value;(l.value||0===l.value)&&(a+="string"==typeof s?s:s+"")}}return a+=t[o]}},{key:"update",value:function(){this.node.setAttribute(this.attrName,this._getValue())}}]),t}(),ZAttributePart=function(){function t(a){_classCallCheck(this,t),this._attrPart=a,this._changed=!1}return _createClass(t,[{key:"_setResult",value:function(t){t!==this.value&&(this.value=t,this._changed=!0)}},{key:"update",value:function(){this._changed&&this._attrPart.update(),this._changed=!1}}]),t}(),ZNodeTraverser=function(){function t(a,o){_classCallCheck(this,t),this._template=o,this._placeholderRegEx=new RegExp("".concat(ZT.uniqueId,"|").concat(ZT.placeholder)),this._index=-1,this._parts=[],this._partIndex=0,this._nodesToBeRemoved=[],this._storeDynamicParts(o,a);for(var l,n=0;n<this._nodesToBeRemoved.length;n++)(l=this._nodesToBeRemoved[n]).parentNode&&l.parentNode.removeChild(l)}return _createClass(t,[{key:"_storeDynamicParts",value:function(t,a){this._traverseDOM(t.content,a)}},{key:"_traverseDOM",value:function(t,a){var o;for(t=t.firstChild;t;){switch(this._index++,o=t,t.nodeType){case 1:if(t.hasAttributes()){for(var n=t.attributes,l=0,s=0;s<n.length;s++)0<=n[s].value.indexOf(ZT.uniqueId)&&l++;for(var r=l;0<r;r--){var d=a.strings[this._partIndex],c=ZT.attrRegEx.exec(d);c&&(c=c[2]);var _=c.toLowerCase()+ZT.attrSuffix,p=t.getAttribute(_).split(this._placeholderRegEx);this._parts.push({type:"attr",index:this._index,name:c,strings:p}),t.removeAttribute(_),this._partIndex+=p.length-1}}break;case 8:if(t.nodeValue===ZT.uniqueId){var m=t.parentNode,g=t.previousSibling;m&&!g||g!==o||3!==g.nodeType?m.insertBefore(document.createComment(""),t):this._index--,this._parts.push({type:"node",index:this._index++}),this._nodesToBeRemoved.push(t),!t.nextSibling&&m?m.insertBefore(document.createComment(""),t):this._index--,t=o,this._partIndex++}}this._traverseDOM(t,a),t=t.nextSibling}}}]),t}(),ZEventPart=function(){function t(a,o){_classCallCheck(this,t),this.element=a,this.eventName=o}return _createClass(t,[{key:"_setResult",value:function(t){this.currentVal=t}},{key:"update",value:function(){var t=this.currentVal?this.currentVal.handler:null,a=this.value?this.value.handler:null;if(!t&&a&&ZT.Event.removeEventListener(this.element,this.eventName+"."+this.value.namespace,this._handleEvent.bind(this)),t&&!a){var o=this.currentVal.eventNames;o||(o=[this.eventName]);for(var n=0;n<o.length;n++)ZT.Event.addEventListener(this.element,o[n]+"."+this.currentVal.namespace,this._handleEvent.bind(this))}this.value=this.currentVal,this.currentVal={}}},{key:"_handleEvent",value:function(t){this.value&&"function"==typeof this.value.handler&&this.value.handler.call(this.element,t)}}]),t}(),ZPropertyPart=function(t){function a(){return _classCallCheck(this,a),_possibleConstructorReturn(this,_getPrototypeOf(a).apply(this,arguments))}return _inherits(a,ZAttributeUpdater),_createClass(a,[{key:"_getValue",value:function(){return this._parts[0].value}},{key:"update",value:function(){this.node[this.attrName]=this._getValue()}}]),a}(),ZConditionalAttributePart=function(){function t(a,o,n){_classCallCheck(this,t),this.node=a,this.attrName=o,this.strings=n}return _createClass(t,[{key:"_setResult",value:function(t){this.currentVal=t}},{key:"update",value:function(){var t=this.currentVal,a=this.node;this.value!==t&&(t?(t="boolean"==typeof t?"":t,a.setAttribute(this.attrName,t)):a.removeAttribute(this.attrName)),this.value=t}}]),t}(),ZNodeProcessor=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"_emptyElement",value:function(t,a,o){for(var l,n=a;n&&n!==o;)l=n.nextSibling,t.removeChild(n),n=l}},{key:"_setResult",value:function(t){this.currentVal=t}},{key:"_addPlaceholders",value:function(t){this.start=t.appendChild(document.createComment("")),this.end=t.appendChild(document.createComment(""))}},{key:"_setRefNodes",value:function(t){this.start=t,this.end=t.nextSibling}},{key:"update",value:function(){for(;ZT._isSpecialFunc(this.currentVal);){var t=this.currentVal;this.currentVal={},t(this)}var a=this.currentVal;ZT._isPlainText(a)?a!==this.value&&this._updateNode(a):a instanceof ZCompTemplates?this._processHTML(a):a.nodeType?this._insertNode(a):a instanceof Array&&this._processValues(a)}},{key:"_processValues",value:function(a){this.value instanceof Array||(this.value=[],this.remove());var l,s,o=this.value,n=a.length;for(s=0;s<n;s++)(l=o[s])||(l=new t,o.push(l),0===s?l._appendNodePart(this):l._insertAfterPart(o[s-1])),l._setResult(a[s]),l.update();s<o.length&&(o.length=s,this.remove(l&&l.end))}},{key:"_appendNodePart",value:function(t){t._insert(this.start=document.createComment("")),t._insert(this.end=document.createComment(""))}},{key:"_insertAfterPart",value:function(t){t._insert(this.start=document.createComment("")),this.end=t.end,t.end=this.start}},{key:"remove",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.start;this._emptyElement(this.start.parentNode,t.nextSibling,this.end)}},{key:"_insert",value:function(t){this.end.parentNode.insertBefore(t,this.end)}},{key:"_insertNode",value:function(t){this.value===t||(this.remove(),this._insert(t),this.value=t)}},{key:"_updateNode",value:function(t){var a=this.start.nextSibling;t=t||"",a===this.end.previousSibling&&3===a.nodeType?a.textContent=t:this._insertNode(document.createTextNode("string"==typeof t?t:t+"")),this.value=t}},{key:"_processHTML",value:function(t,a){var n,o=ZT._updateTemplateCache(t);if(this.value&&this.value.template===o)this.value.updateValues(t.values);else{var l=new ZTemplateUpdater(o);n=l._updateNodes(),l.updateValues(t.values),a||this._insertNode(n),this.value=l}return n}}]),t}();(function(t){"object"===("undefined"==typeof module?"undefined":_typeof(module))&&"object"===_typeof(module.exports)&&(module.exports=t)})(ZCTemplates),function(t){var a=Math.min,o=Math.pow,i=Math.max,n=Math.round,l=t.DOMUtil;t.ColorUtil={darken:function(t,o){var n=[{mode:"MODIFY",value:1-(o=this.limit(o,0,1))}];return this.hsl(t,{luminance:n})},lighten:function(t,o){var n=[{mode:"MODIFY",value:1-(o=this.limit(o,0,1))},{mode:"OFFSET",value:o}];return this.hsl(t,{luminance:n})},shade:function(t,o){var n=[{mode:"MODIFY",value:1-(o=this.limit(o,0,1))}];return this.rgb(t,{red:n,green:n,blue:n})},tint:function(t,o){var n=[{mode:"MODIFY",value:1-(o=this.limit(o,0,1))},{mode:"OFFSET",value:o}];return this.rgb(t,{red:n,green:n,blue:n})},rgb:function(t,a){return this.modify(t,a,"linearRGB")},tolinearRGB:function(t){return t.map(function(t){return 0>(t/=255)?0:.0405>=t?t/12.92:1>=t?o((t+.055)/1.055,2.4):1})},linearRGBtoRGB:function(t){return t.map(function(t){return 0>t?t=0:.0031308>=t?t*=12.92:t=1>=t?1.055*o(t,1/2.4)-.055:1,n(t*=255)})},modify:function(t,a,o){var n=this,l=this["to".concat(o)](t),i={red:0,green:1,blue:2,luminance:2},s=function(t){var o=i[t];a[t].forEach(function(t){l[o]=n.modifyValue(l[o],t)})};for(var r in a)s(r);return this["".concat(o,"toRGB")](l)},modifyValue:function(t,a){return"MODIFY"===a.mode?t*=parseFloat(a.value):"OFFSET"===a.mode&&(t+=parseFloat(a.value)),t},hsl:function(t,a){return this.modify(t,a,"HSL")},toHSL:function(t){var o=t[0],r=t[1],d=t[2],c=i.apply(Math,_toConsumableArray(t)),_=a.apply(Math,_toConsumableArray(t)),u=0;c===_?u=0:c===o?u=(60*((r-d)/(c-_))+360)%360:c===r?u=60*((d-o)/(c-_))+120:u=60*((o-r)/(c-_))+240,u/=360;var m=(c+_)/510,l=0;return l=c===_?0:.5>=m?(c-_)/(2*m):(c-_)/(2-2*m),[u,l/=255,m]},HSLtoRGB:function(t){var l,a=this,o=t[0],i=t[1],s=t[2],r=2*s-(l=.5>s?s*(1+i):s+i-s*i);return[o+1/3,o,o-1/3].map(function(t){return 0>t?t+=1:1<t&&(t-=1),t=(t%=1)<1/6?r+6*(l-r)*t:t>=1/6&&.5>t?l:.5<=t&&t<2/3?r+6*(l-r)*(2/3-t):r,n(255*a.limit(t,0,1))})},cmykToRGB:function(t){return[255*(1-t[0])*(1-t[3]),255*(1-t[1])*(1-t[3]),255*(1-t[2])*(1-t[3])]},rgbToCMYK:function(t){var o=1-t[0]/255,n=1-t[1]/255,l=1-t[2]/255,i=a(o,n,l);return o=(o-i)/(1-i),n=(n-i)/(1-i),l=(l-i)/(1-i),[o=isNaN(o)?0:o,n=isNaN(n)?0:n,l=isNaN(l)?0:l,i]},isDark:function(t){return this.brightness(t)<127.5},rgbToHex:function(a){var o="#";return a.forEach(function(a){o+=t.ColorUtil.numToHex(a)}),o},rgbToHSV:function(t){var o=t[0]/255,l=t[1]/255,r=t[2]/255,d=a(o,l,r),c=i(o,l,r),_=100*c,u=0,p=0,m=c-d;if(0===c)return p=u=0,[u,p,_];p=m/c*100;var g=0;m&&(g=o===c?(l-r)/m:l===c?2+(r-o)/m:4+(o-l)/m),0>(u=60*g)&&(u+=360);var y=n;return[u=y(100*u)/100,p=y(100*p)/100,_=y(100*_)/100]},hsvToRGB:function(a){var c,_,u,o=a[0],s=a[1]/100,d=a[2]/100;c=_=u=0;var m=function(t,a,o){var l=n;c=l(255*t),_=l(255*a),u=l(255*o)};if(0===s)return m(d,d,d),[c,_,u];360===o&&(o=0);var v=o/60,y=Math.floor(v),f=v-y,k=d*(1-s),p=d*(1-s*f),C=d*(1-s*(1-f));return 0===y?m(d,C,k):1===y?m(p,d,k):2===y?m(k,d,C):3===y?m(k,p,d):4===y?m(C,k,d):m(d,k,p),[c,_,u]},numToHex:function(t){var a=parseInt(t).toString(16);return 1===a.length?"0".concat(a):a},hexToNum:function(t){return parseInt(t,16)},brightness:function(t){return.299*t[0]+.587*t[1]+.114*t[2]},limit:function(t,o,n){return i(a(t,n),o)},getColorInstance:function(a){return new t.Color(a)},REGEX:{colorMode:/^(rgb|rgba|hsl|hsla|hsv|hsva|hex|hex8|cmyk)$/}},t.Color=function(t){return this.init(t),this},t.Color.prototype={init:function(t){this.initialColor=t,(t=c(t))?(this._r=t.r,this._g=t.g,this._b=t.b,this._a=t.a,this.format=t.format,this.colorInFormat=t.colorInFormat,this._valid=!0):this._valid=!1},isValid:function(){return this._valid},colorCodeMapping:{hue:"decimal",saturation:"percent",brightness:"percent",lightness:"percent",rgb:"decimal",cmyk:"percent",opacity:"decimal"},getObject:function(a,o){o=o?l.extend({},this.colorCodeMapping,o):this.colorCodeMapping;var i=[this._r,this._g,this._b],s=n,r=function(t){return s(100*t)/100},d=function(t,a){return"percent"===t?r(100*a)+"%":s(360*a)},c=function(t,a){return"percent"===t?r(100*a)+"%":s(255*a)},_=function(t,a){return"decimal"===t?r(a):s(100*a)+"%"};if(/(hsv)/.test(a)){var u=[];return/(hsv)/.test(this.format)?(u[0]=this.colorInFormat.h,u[1]=this.colorInFormat.s,u[2]=this.colorInFormat.v):(u=t.ColorUtil.rgbToHSV(i),/(hsl)/.test(this.format)&&(u[0]=360*this.colorInFormat.h)),{h:d(o.hue,u[0]/360),s:_(o.saturation,u[1]/100),v:_(o.brightness,u[2]/100),a:_(o.opacity,this._a)}}if(/(hsl)/.test(a)){var p=[];return/(hsl)/.test(this.format)?(p[0]=this.colorInFormat.h,p[1]=this.colorInFormat.s,p[2]=this.colorInFormat.l):(p=t.ColorUtil.toHSL(i),/(hsv)/.test(this.format)&&(p[0]=this.colorInFormat.h/360)),{h:d(o.hue,p[0]),s:_(o.saturation,p[1]),l:_(o.lightness,p[2]),a:_(o.opacity,this._a)}}if(/(cmyk)/.test(a)){var m=[];return/(cmyk)/.test(this.format)?(m[0]=this.colorInFormat.c,m[1]=this.colorInFormat.m,m[2]=this.colorInFormat.y,m[3]=this.colorInFormat.k):m=t.ColorUtil.rgbToCMYK(i),{c:_(o.cmyk,m[0]),m:_(o.cmyk,m[1]),y:_(o.cmyk,m[2]),k:_(o.cmyk,m[3])}}return/(hex)/.test(a)?{hex:t.ColorUtil.rgbToHex(i).replace(/#/,""),a:_(o.opacity,this._a)}:{r:c(o.rgb,i[0]/255),g:c(o.rgb,i[1]/255),b:c(o.rgb,i[2]/255),a:_(o.opacity,this._a)}},getPercentageObject:function(t){var a=this.getObject(t);return/(hsv|hsl)/.test(t)?(a.h=a.h/360*100+"%",a.a=100*a.a+"%"):/(rgb)/.test(t)&&(a.r=a.r/255*100+"%",a.g=a.g/255*100+"%",a.b=a.b/255*100+"%",a.a=100*a.a+"%"),a},getColor:function(a,o,n){var l=this.getObject(a,o);if(l){var i=1!==this._a;return n=void 0===n||n,/^(hsv)/.test(a)?/^(hsva)/.test(a=n?i?"hsva":"hsv":a)?"hsva("+l.h+", "+l.s+", "+l.v+", "+l.a+")":"hsv("+l.h+", "+l.s+", "+l.v+")":/^(hsl)/.test(a)?/^(hsla)/.test(a=n?i?"hsla":"hsl":a)?"hsla("+l.h+", "+l.s+", "+l.l+", "+l.a+")":"hsl("+l.h+", "+l.s+", "+l.l+")":/^(cmyk)$/.test(a)?"cmyk("+l.c+","+l.m+","+l.y+","+l.k+")":/^(hex)/.test(a)?/^(hex8)/.test(a=n?i?"hex8":"hex":a)?"#"+l.hex+t.ColorUtil.numToHex(255*this._a):"#"+l.hex:(a=n||!/(rgb)/.test(a)?i?"rgba":"rgb":a,/^(rgba)/.test(a)?"rgba("+l.r+", "+l.g+", "+l.b+", "+l.a+")":"rgb("+l.r+", "+l.g+", "+l.b+")")}},setAlpha:function(t){this._a=d("a",t)},getAlpha:function(){return this._a},setColor:function(t){this.init(t)}};var s={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},r=function(){var t="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)",a="[\\s|\\(]+("+t+")[,|\\s]+("+t+")[,|\\s]+("+t+")\\s*\\)?",o="[\\s|\\(]+("+t+")[,|\\s]+("+t+")[,|\\s]+("+t+")[,|\\s]+("+t+")\\s*\\)?";return{value:new RegExp(t),rgb:new RegExp("rgb"+a),rgba:new RegExp("rgba"+o),hsl:new RegExp("hsl"+a),hsla:new RegExp("hsla"+o),hsv:new RegExp("hsv"+a),hsva:new RegExp("hsva"+o),cmyk:new RegExp("cmyk"+o),hex3:/^#?([0-9a-f]{1})([0-9a-f]{1})([0-9a-f]{1})$/,hex6:/^#?([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})$/,hex8:/^#?([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})$/}}(),d=function(a,o){var l=/%/.test(o);return o=l?parseFloat(o)/100:parseFloat(o),"h"===a?n(t.ColorUtil.limit(l?360*o:o,0,360)):/(s|v|l)/.test(a)?n(t.ColorUtil.limit(100*o,0,100)):/(c|m|y|k)/.test(a)?n(100*t.ColorUtil.limit(o,0,1))/100:/(r|g|b)/.test(a)?n(t.ColorUtil.limit(l?255*o:o,0,255)):"a"===a?void 0===o||isNaN(o)||0>o||1<o?1:o:void 0},c=function(a){if("object"===_typeof(a=_(a))){var n,o=a.format;if(a.hasOwnProperty("h")&&a.hasOwnProperty("s")&&a.hasOwnProperty("v"))o=o||"hsva",a.h=d("h",a.h),a.s=d("s",a.s),a.v=d("v",a.v),n=t.ColorUtil.hsvToRGB([a.h,a.s,a.v]);else if(a.hasOwnProperty("h")&&a.hasOwnProperty("s")&&a.hasOwnProperty("l"))o=o||"hsla",a.h=d("h",a.h)/360,a.s=d("s",a.s)/100,a.l=d("l",a.l)/100,n=t.ColorUtil.HSLtoRGB([a.h,a.s,a.l]);else if(a.hasOwnProperty("r")&&a.hasOwnProperty("g")&&a.hasOwnProperty("b"))o=o||"rgba",a.r=d("r",a.r),a.g=d("g",a.g),a.b=d("b",a.b),n=[a.r,a.g,a.b];else if(a.hasOwnProperty("c")&&a.hasOwnProperty("m")&&a.hasOwnProperty("y")&&a.hasOwnProperty("k"))o=o||"cmyk",a.c=d("c",a.c),a.m=d("m",a.m),a.y=d("y",a.y),a.k=d("k",a.k),n=t.ColorUtil.cmykToRGB([a.c,a.m,a.y,a.k]);else if(a.hasOwnProperty("hex")){if(o=o||"hex",!(n=_(a.hex)))return;n=[n.r,n.g,n.b]}if(n)return{r:n[0],g:n[1],b:n[2],a:d("a",a.a),format:o,colorInFormat:a}}},_=function(a){if("string"!=typeof a&&"number"!=typeof a)return Array.isArray(a)?{r:a[0],g:a[1],b:a[2],a:a[3],format:"rgba"}:Object.assign({},a);a=a.trim().toLowerCase();var o=!1;if(s[a])a=s[a],o=!0;else if("transparent"===a)return{r:0,g:0,b:0,a:0};var l=r.rgb.exec(a);return l?{r:l[1],g:l[2],b:l[3],format:"rgb"}:(l=r.rgba.exec(a))?{r:l[1],g:l[2],b:l[3],a:l[4],format:"rgba"}:(l=r.hsl.exec(a))?{h:l[1],s:l[2],l:l[3],format:"hsl"}:(l=r.hsla.exec(a))?{h:l[1],s:l[2],l:l[3],a:l[4],format:"hsla"}:(l=r.hsv.exec(a))?{h:l[1],s:l[2],v:l[3],format:"hsv"}:(l=r.hsva.exec(a))?{h:l[1],s:l[2],v:l[3],a:l[4],format:"hsva"}:(l=r.cmyk.exec(a))?{c:l[1],m:l[2],y:l[3],k:l[4],format:"cmyk"}:(l=r.hex8.exec(a))?{r:t.ColorUtil.hexToNum(l[1]),g:t.ColorUtil.hexToNum(l[2]),b:t.ColorUtil.hexToNum(l[3]),a:n(t.ColorUtil.hexToNum(l[4])/255*100)/100,format:"hex8"}:(l=r.hex6.exec(a))?{r:t.ColorUtil.hexToNum(l[1]),g:t.ColorUtil.hexToNum(l[2]),b:t.ColorUtil.hexToNum(l[3]),format:o?"rgba":"hex"}:(l=r.hex3.exec(a))?{r:t.ColorUtil.hexToNum(l[1]+l[1]),g:t.ColorUtil.hexToNum(l[2]+l[2]),b:t.ColorUtil.hexToNum(l[3]+l[3]),format:"hex"}:void 0}}(ZPeopleComponents),ZPeopleComponents.ShortCut=function(t){function a(t,a){if(C&&s(t)){var n=t.keyCode,l="";t.ctrlKey&&(l="ctrl+"),m.isMac()&&t.metaKey&&(l+="cmd+"),t.shiftKey&&(l+="shift+"),t.altKey&&(l+="alt+");var r=String.fromCharCode(n);65<=n&&90>=n&&(n=r.charCodeAt());var d=l,c=f[l+=n];if(!c)for(var _ in S)if(S[_]===n.toString()&&(l=d+_.toLowerCase(),c=f[l]))break;if(c){var i=c.keyInfo||{},u=c.element||"",g=c.handleOn,h=c.isDirectInit;if(u=p(u),h&&!0!==i.disabled||u&&(a&&"keyup"!==g||!a&&"keyup"===g)){if(h){var v=i.elementIds;v=v&&v[0],u=p("#"+v)}var y=u&&-1!==T.indexOf(u[0].tagName);if(h&&!u.length||!u.is(":disabled")&&y||!y&&!u.is("[disabled]")){var k={ele:u,shortcutKey:c.shortcutKey,fromShortCut:!0};h?o(i.action,u,t,i.params):u.is(":checkbox")&&"click"===c.event?u.each(function(){k.ele=p(this),p(this).triggerHandler(c.event,k)}):u.trigger(c.event,k)}t.stopPropagation(),t.preventDefault()}}}}function o(t,a,o,l){var i;t&&"string"==typeof t?i=function(t){if(t){var l,a=t.split("."),o=window,n="";return p(a).each(function(t,i){l=i.indexOf("()"),o=0<l?o[i.substring(0,l)]():o[i],t==a.length-2&&(n=o)}),{fn:o,base:n,callable:function(){o&&o.call(n,arguments[0])}}}}(t).callable(l):i="function"==typeof t?t.apply(a,l):void 0;return void 0===i?!o.isDefaultPrevented():i}function l(a,o){var n=(o=o||t._getOpts(a)).shortcutkey||o.shortcutKey||o.key;if(n){for(var r,l="object"===_typeof(n)&&n instanceof Array?n:[n],s=0;s<l.length;s++){if(r=l[s],"object"===_typeof(l[s])&&(r=h&&l[s].macKey?l[s].macKey:l[s].key,!l[s].key&&!h))return!1;r&&!r.macKey&&h&&(r=r.replace(/ctrl/i,o.skipShortcutFormat?"Cmd":"cmd")),o.skipShortcutFormat||(r=r.toString().toLowerCase()),l[s]=r}return l}}function s(a){if(t.ShortCut.discardInputElement){var o=p(a.srcElement);if(0===o.length&&(o=p(a.target)),o.is("input")||o.is("textarea"))return!1}return!0}function i(t){var n,a=t.split("+"),o="";t="";for(var l=0;l<g.length;l++)for(var s=0;s<a.length;s++)n=a[s].trim(),g[l]===n?o+=n+"+":-1===p.inArray(n,g)&&(t=n),""===n&&(t="+");return S[t.toUpperCase()]||(t=t.toUpperCase().charCodeAt(0)),o+t}function r(t,a,o,n,l,s){var r=i(a);if(r){var d={element:t,event:o,handleOn:n};l&&(d.isDirectInit=!0,d.keyInfo=s),f[r]=d}}function d(t){for(var a=t.split("+"),o="",l=0;l<a.length;l++)a[l]=a[l].charAt(0)==a[l].charAt(0).toUpperCase()?a[l].toUpperCase():a[l].charAt(0).toUpperCase()+a[l].substring(1,a[l].length),a.length-1!=l&&(a[l]+="+"),o+=a[l];return o}function c(){D=!0,t.$document.on("keyup.shortcut",function(t){a(t,!1)})}function _(t){var a=i(t);a&&delete f[a]}function u(t,a,o){var n=t.eventName||"click",s=t.handleOn,_=l(null,t);if(y||D||"keyup"!==s||c(),_)for(var u=t.skipshortcutregister||t.skipRegistration,p=0;p<_.length;p++)u||r(a,_[p],n,s,o,t),t.skipShortcutFormat||(_[p]=d(_[p]));return!!_&&_}var p=t.DOMUtil,m=t.OS,g=["ctrl","cmd","shift","alt"],h=m.isMac(),y=m.isWindows(),f={},k={},b=!1,C=!0,D=!1,S={"<F1>":"112","<F2>":"113","<F3>":"114","<F4>":"115","<F5>":"116","<F6>":"117","<F7>":"118","<F8>":"119","<F9>":"120","<F10>":"121","<F11>":"122","<F12>":"123",PRINTSCREEN:"44",NUMLOCK:"144",PAUSE:"19",INSERT:"45",HOME:"36",PAGEUP:"33",PAGEDOWN:"34",DELETE:"46",END:"35",TAB:"9",CAPSLOCK:"20",WINDOWS:"91",ARROW_UP:"38",ARROW_DOWN:"40",ARROW_LEFT:"37",ARROW_RIGHT:"39",ENTER:"13",BACKSPACE:"8",SPACE:"32",ESCAPE:"27",DOT:"190",".":"190","":"226",91:"219",92:"220",93:"221",61:"187",45:"189",96:"192",44:"188",47:"191",39:"222",59:"186",123:"219",124:"220",125:"221",43:"187",95:"189",126:"192",60:"188",62:"190",63:"191",34:"222",58:"186",33:"49",64:"50",35:"51",36:"52",37:"53",94:"54",38:"55",42:"56",40:"57",41:"48"},T=["BUTTON","INPUT","TEXTAREA","OPTION","SELECT","TEXTAREA","OPTGROUP","FIELDSET"];return t.$document.on("keydown.shortcut",function(t){a(t,!0)}),{init:function(a){!1!==(a=a||{}).handleAction||t.$document.off("keydown.shortcut")},discardInputElement:!0,disableAction:function(t){var a=k[t];a&&(a.disabled=!0)},enableAction:function(t){var a=k[t];a&&(a.disabled=!1)},addShortcuts:function(t){t=t instanceof Array?t:[t];for(var o,a=0;a<t.length;a++){var n=u(o=t[a],o.elements,!0);k[o.actionName]=o,k[o.actionName].shortcutKey=n[0],b=!0}},register:function(a){var o=t._getOpts(a),n=o.shortcutkey||o.shortcutKey;return o.eventName=n&&n.event?n.event:"click",u(o,a)},getShortcutKey:function(t){var a=l(t);if(a){for(var o=0;o<a.length;o++)a[o]=d(a[o]);return a}return!1},getInfo:function(t,a,o){if(t&&b){var n=k[t]||{};return n.shortcutKey||n.key||""}return!1!==o&&a?this.register(a):a?this.getShortcutKey(a):void 0},enable:function(){C=!0},disable:function(){C=!1},deregister:function(t){for(var a=l(t),o=0;o<a.length;o++)_(a[o])}}}(ZPeopleComponents),function(t){var a=t.DOMUtil;t.Helpers={open:function(a,o){return t.ShowHideHandler.show(a,o)},close:function(a){var o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:a.data("zshowhide")||{};return t.ShowHideHandler.hide(a,o)},fixHeight:function(o,n){return t.ShowHideHandler.fixHeight(o,a.extend(!0,{},o.data("zshowhide"),n||{}))},fixGridWidth:function(o,n){return t.ShowHideHandler.fixGridWidth(o,a.extend(!0,{},o.data("zshowhide"),n||{}))},removeScrollClass:function(a){return t.ShowHideHandler.removeScrollCls(a)}},t.ShowHideHandler=function(t,a){return{_DEFAULTS:{forElement:void 0,appendTo:void 0,width:void 0,height:void 0,withinPadding:8,isGrid:!1,renderInPlace:!1,position:null,fitForElement:!1,direction:"auto",offset:null,mustBeShown:!1,viewport:null,minWidth:200,displayType:"box",arrowCallback:void 0,alterBorderRadius:!0,scroll:"default",toggle:!0,isSubList:!1,arrowElement:void 0,closeOnBodyClick:!0,bodyItemVisibleCount:void 0,cname:"",hideMethodName:"hide",hideEventName:"hide",bodyCls:"zmenu__body",headerCls:"zmenu__header",footerCls:"zmenu__footer",gridCls:"zmenu--thumbnail",mainCls:"zmenu",widthCls:"zmenu__width"},show:function(o,n){o=a(o);var l=a.extend(!0,{},this._DEFAULTS,n),i=o.is(":visible"),s=o.data("forElement")||"",r=a(l.forElement),d=l.isSubList,c=r&&r[0]===s[0],_=l.mustBeShown,u=i&&_,p=l.renderInPlace,m=a(l.appendTo),g=l.onShow;if(!c||!i||_){if(_&&this._fetchScrollVal(o),(!p||d)&&!_){var h=(m&&m.length?m:a("body"))[0],v=o[0];t.isInDOM(v,h)&&-1!==Array.prototype.slice.call(h.childNodes).indexOf(v)||h.appendChild(v)}var y=l.viewport||(m.length?m:void 0);y&&(y="window"===y?t.$window:"document"===y?t.$document:a(y),l.within=y);var f={};if(p)o.addClass("zmenu--inline"),t.display(void 0,o),g&&g(o,l);else if(!(f=this._calcDimensions(o,l,r,u,d)))return;return d&&(f.parent=r),f.direction=f.pos&&f.pos.direction,o.data(f),l.isSubList||this._setFocus(o,l),t.isEmpty(l.animation)||!l.animation.open?(!u&&t.display(void 0,o),l.arrowElement&&l.arrowElement.show(),g&&g(o,l,f)):l.onShowWithAnimation&&l.onShowWithAnimation(o,l,f),o.data("zshowhide",l),o.data("zscrEle")&&o.data("zscrEle").scrollTop(o.data("zscrVal")),f}l.toggle&&!d&&l.onToggle&&l.onToggle(o)},_calcDimensions:function(a,o,n,l,i){var s=o.direction,r=o.position,d=o.isRightClick||"at-cursor"===s;o.closeOnBodyClick&&t.bindDocumentEvents&&t.bindDocumentEvents({isCE:o.isCE,element:o.originalElement||a,container:a,forElement:!d&&n,ctype:o.cname,closeMethodName:o.hideMethodName,closeEvent:o.hideEventName});var c=o.event||{};if(!1!==(o.beforeShow&&o.beforeShow(a,c,{currentTarget:d?c.target:n}))){l||t.display(void 0,a).css("opacity","0");var u=this.fixWidth(a,o,n);a.removeClass(o.widthCls),o.isGrid&&this.fixGridWidth(a,o),a.css("height","auto");var p=a.find("."+o.bodyCls),m=!1,g=o.height,h=(o.height+"").replace(/px/g,"");h=isNaN(h)?h:parseFloat(h),p.length&&p.css("height","auto"),g&&("number"!=typeof h||h<=a.outerHeight())&&(a.outerHeight(h),m=!0);var f,v=(a.attr("class")||"").replace(/zposition--(?:[a-z-])+/g,"").trim(),y={};if(r||(f=v+" zposition--"+((y=this.calcPosition(a,o,d,i,c,n)).actualDirection||s).replace(/-/,""),r=y.elementPosition),f&&a.attr("class",f),this.fixHeight(a,o),this._checkForScroll(a,m,r,u,y.actualDirection||s,o.scroll),o.alterBorderRadius&&!o.arrowElement&&t.alterBorderRadius({element:a,forElement:n,hasSideAlignment:i,offset:r,direction:y.actualDirection||s}),r){if(d){var k=o.rtl;r.top+=k?-2:2,r.left+=k?-2:2}a.css(r)}return l||(t.display(!0,a),a.css("opacity","")),y}},_checkForScroll:function(a,o,n,l,i,s){o=(o||a.hasClass("zh-scroll_y")||a.find(".zh-scroll_y").length)&&"slider"!==s;var r=l.actualWidth,d=l.minWidth;if(o){t.setFontSize||(r=parseInt(l.actualWidth),d=parseInt(d));var c=0,_=this.scrollWidth||this.getScrollWidth();d&&r?d-r<_+1&&(c=r+_+1-d):c=_,n&&("bottom-right"===i||"top-right"===i)&&(n.left-=c),t.setFontSize?a.css("width","calc("+l.width+" - "+c+"px)"):(r=r<d?d:r,a.width(r+c))}},getScrollWidth:function(){var t=document.createElement("div"),a=document.querySelector("body");return a.appendChild(t),t.style.cssText="width:50px;height:50px;overflow:scroll;",this._scrollWidth=t.offsetWidth-t.scrollWidth,a.removeChild(t),this._scrollWidth},_setFocus:function(t,a){clearTimeout(t._focusTimer);var o=a.beforeFocus;(void 0===o||o(t))&&(t._focusTimer=setTimeout(function(){return t.focus()},100))},_fetchScrollVal:function(t){var a=t.find(".zh-scroll_y"),o=(a=a.length?a:t).scrollTop();t.data("zscrEle",a),t.data("zscrVal",o)},fixGridWidth:function(o,n){var l=parseInt(n.columns),s="."+n.gridCls,r="."+n.bodyCls,d="."+n.mainCls,c=o.find(s),_=o;if(c.length)for(var m,u=0,p=0;p<c.length;p++)(m=t._getOpts(c[p]).columns)&&m>u&&(u=m,_=a(c[p]));if(!l||-1===l){var h=o.closest(d),v=t._getOpts(h);if(!(l=h.data("isExternalSubmenu")?v.columns:l)||-1===l)return}_[0]!==o[0]||o.hasClass(n.gridCls)?_.find(r).length&&(_=o.find(r)):_=o.find(s);for(var b,y=n.getAllMenuItems(_,!1,!1,!0),f=0,k=0;k<l&&k<y.length;k++)b=window.getComputedStyle(y[k]),f+=parseFloat(b.width)+parseFloat(b.marginLeft)+parseFloat(b.marginRight),t.Browser.isIE&&11>=t.Browser.getIEVersion()&&(f+=parseFloat(b.paddingLeft)+parseFloat(b.paddingRight)+parseFloat(b.borderRightWidth)+parseFloat(b.borderLeftWidth));o.width(f.toFixed(5)),o.data("width",f)},fixHeight:function(o,n){var l="auto",i=o.find("."+n.bodyCls),s=i.length?i:void 0,r="at-cursor"===n.direction,d=o[0].style.height,c=o.outerHeight(),_=n.bodyItemVisibleCount,u=n.isRightClick||r;o.height(l),s&&s.height(l);var p="auto"===n.direction||r,m=o.outerHeight(),g=parseInt(1*o.css("top").split("px")[0]-a(window).scrollTop())||0,h=t.windowObject?t.windowObject.height:a(window).height(),v=n.actualDirection||n.direction,y=n.availableHeight,f=!v||0!==v.indexOf("bottom")&&0!==v.indexOf("top")?h:u?h:y,k=f-m;u&&(g+=2),(g+m>=f&&0>k||!p)&&(l=u?h-g:y);var b=n.height&&!isNaN((n.height+"").replace(/px/g,""))?n.height:void 0,C=b&&parseInt(b);n.height?l=(C||c)>=y&&!u?y:C||c:0<k&&p&&(l=m);var D="slider"===n.scroll&&s,S=D?"zh-overflowhidden":"zh-scroll_y",T=!1;if(m>l||_)if(T=!0,s){var w=o.find("."+n.headerCls),I=o.find("."+n.footerCls),x=w.length?parseInt(w.outerHeight(!0)):0,E=I.length?parseInt(I.outerHeight(!0)):0,z=parseInt(o.css("padding-top"))+parseInt(o.css("padding-bottom")),P=parseInt(o.css("border-top-width"))+parseInt(o.css("border-bottom-width"))+x+z+(parseInt(s.css("margin-top"))+parseInt(s.css("margin-bottom")))+(1<I.length?I.length*E:E),A=l-P;if(_){var B=s.find("li").outerHeight(!0);A=Math.min(A,_*B,m-P)}s.innerHeight(A)}else m<c||(o[0].style.height=d);D&&n.displayScrollers&&n.displayScrollers(T,o),(s||o)[T?"addClass":"removeClass"](S)},getWidth:function(t){return t&&(t+=t==parseInt(t)?"px":""),t},fixWidth:function(t,o){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:o.forElement,l=o.fitForElement?a(n).outerWidth():o.width;l||(t.addClass(o.widthCls),t.css("min-width",""),l=Math.ceil(t.outerWidth()),t.removeClass(o.widthCls));var i=this.getWidth(o.minWidth),s=this.getWidth(o.maxWidth);return i&&t.css("min-width",i),s&&t.css("max-width",s),l&&t.css("width",l),{minWidth:o.minWidth,width:this.getWidth(l),actualWidth:l}},calcPosition:function(o,n,l,i,s,r){var u,d=n.offset,c=n.arrowElement,_=t.Position.get(l&&!i?s:r,o,a.extend(!0,{},{arrow:{element:i?null:c,callback:n.arrowCallback}},n),c||void 0);if(n.availableHeight=_.availableHeight,d&&(n.availableHeight-=parseInt(d.top)||0),u=_.elementPosition,n.actualDirection=u.direction=_.actualDirection,_.pos=u,c&&!i){var p=_.arrowPosition;if(d){var m=_.arrowDirection;if("top"===m||"bottom"===m){var g=n.rtl?"right":"left",h=n.rtl?1:-1;void 0!==d.left&&"auto"!==p[g]&&(p[g]+=d.left*h)}else void 0!==d.top&&"auto"!==p.top&&(p.top-=d.top)}c.css(p)}return d&&(_.pos.top+=parseInt(d.top)||0,_.pos.left+=parseInt(d.left)||0),_},hide:function(a,o){if(a.is(":visible")&&!o.renderInPlace&&!1!==(o.beforeHide&&o.beforeHide())){var l=a.data("zshowhide")||{};if(l.alterBorderRadius&&t.alterBorderRadius({element:a,forElement:l.forElement},!0),this._fetchScrollVal(a),t.isEmpty(o.animation)||!o.animation.close){t.display(!0,a),this.removeScrollCls(a);var i=o.onHide;i&&i(a,o)}else{var s=o.onHideWithAnimation;s&&s(a,o)}}},removeScrollCls:function(t){t.removeClass("zh-scroll_y zh-overflowhidden"),t.find(".zh-scroll_y, .zh-overflowhidden").removeClass("zh-scroll_y zh-overflowhidden")}}}(t,a)}(ZPeopleComponents),function(t){function a(a,n){!function(l){var c,_,u,p,r=n.componentName,d=a.data(r);if(d){if(!(c=n.forElement||s(d._opts.forElement))||!c.length)return;u="zmenu"===r?"show":"open",p="zmenu"===r?"hide":"close",_=d.element,d.openHandler?d.openHandler.forElement.push(c):d.openHandler={forElement:[c],closeMethod:p,openMethod:u};var m=d.isCE?"z":r;a.on(m+"beforedestroy."+r,function(){return t.removeOpenListener(r.slice(1),a)}).on(m+"close."+r,function(){return l.splice(l.indexOf(d),1)}),c.off("."+r).data(r,{});var g=c.data(r);if(g.componentName=r,g.openMethod=u,g.element=a,"click"===n.popOn)c.off("mousedown."+r).on("mousedown."+r,function(t){o(s(t.currentTarget)),_.is(":visible")&&i===t.currentTarget?d[p]():(i=t.currentTarget,d[u](n),l.push(d))});else{var h=n.popOn;if(!/focus|mouseover/.test(h))return;var v="mouseover"===h?"mouseenter.":"focusin.",y="mouseover"===h?"mouseleave.":"focusout.";c.off(v+r+" "+y+r).on(v+r,function(t){g._mouseEntered=!0,o(s(t.currentTarget)),_.is(":visible")||(d[u](n),l.push(d)),clearTimeout(g._mouseLeaveTimeout)}).on(y+r,function(){g._mouseEntered=!1,g._mouseLeaveTimeout=setTimeout(function(){d[p]()},void 0===n.mouseLeaveTime?1500:n.mouseLeaveTime)}),_.off(v+r+" "+y+r).on(v+r,function(){clearTimeout(g._mouseLeaveTimeout)}).on(y+r,function(){setTimeout(function(){g._mouseEntered||d[p]()},100)})}}}(l)}function o(t){for(var o,a=0;a<l.length;a++)(o=l[a])&&o.element.is(":visible")&&!t.closest(o.element).length&&n(t,o.openHandler)&&(o[o.openHandler.closeMethod](),l.splice(a,1),a--)}function n(t,a){for(var l,o=!1,n=0;n<a.forElement.length;n++)if(l=a.forElement[n],t[0]===l[0]){o=!0;break}return!o}var i,l=[],s=t.DOMUtil;t.removeOpenListener=function(t,a){t="z"+t;for(var o=0;o<a.length;o++){var n=s(a[o]),l=n.data(t)&&n.data(t).openHandler;if(l)for(var d,r=0;r<l.forElement.length;r++)(d=l.forElement[r]).off("."+t),d.removeData(t)}},t.addOpenListener=function(t,o){t="z"+t;for(var n=0;n<o.length;n++)o[n].options.componentName=t,a(o[n].element,o[n].options)}}(ZPeopleComponents),ZPeopleComponents.FocusHandler=function(t){var a=t.DOMUtil;return{init:function(t,a){var o={};"object"===_typeof(a)&&(a=(o=a).excludeFocus,o.focusableItems),!1===o.focusElementOnOpen?!1!==o.focusOnOpen&&t.focus():this._focusElement(t,a),this._bindEvents(t,a)},_focusElement:function(o){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",l=o.find('input[autofocus],input[tabindex]:not([tabindex="-1"]):not([disabled]):not('+n+'),textarea[autofocus],textarea[tabindex]:not([tabindex="-1"]):not([disabled]):not('+n+'),button[tabindex]:not([tabindex="-1"]):not([disabled]):not('+n+'),z-button[tabindex]:not([tabindex="-1"]):not([disabled]):not('+n+'),.zselectbox[autofocus],.zselectbox[tabindex]:not([tabindex="-1"]):not([tabindex="0"]):not('+n+'),li[tabindex]:not([tabindex="-1"]):not([disabled]):not('+n+'),a[tabindex]:not([tabindex="-1"]):not([disabled]):not('+n+")").filter(":visible");if(l.length||(l=o.find('input:not([tabindex="-1"]):not([disabled]):not('+n+'),label[tabindex]:not([tabindex="-1"]):not([disabled]):not('+n+'),textarea:not([tabindex="-1"]):not([disabled]):not('+n+'),button:not([tabindex="-1"]):not([disabled]):not('+n+'),z-button:not([tabindex="-1"]):not([disabled]):not('+n+'),li[tabindex]:not([tabindex="-1"]):not([disabled]):not('+n+'),.zselectbox:not([tabindex="-1"]):not([disabled]):not('+n+'),a:not([tabindex="-1"]):not([disabled]):not('+n+")").filter(":visible")).length){var i=a(l.get(l.length-1)),s=i.prop("tabindex");l.toArray().forEach(function(t){(a(t).prop("tabindex")<s||a(t).attr("autofocus"))&&(i=a(t),s=a(t).prop("tabindex"))}),i.hasClass("zselectbox")||i.hasClass("zselectbox__textbox")?(i=i.closest(".zselectbox")).hasClass("zcombobox")?t.combobox(i.prev()).setFocus():t.select(i.prev()).setFocus():i.focus()}else o.focus()},_bindEvents:function(o){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",l=this,i=o.find('input:not([tabindex="-1"]):not('+n+'),label[tabindex]:not([tabindex="-1"]):not('+n+'),textarea:not([tabindex="-1"]):not('+n+'),li[tabindex]:not([tabindex="-1"]):not('+n+'),button:not([tabindex="-1"]):not('+n+'),z-button:not([tabindex="-1"]):not('+n+'),.zselectbox:not([tabindex="-1"]):not('+n+'),a:not([tabindex="-1"]):not('+n+'),div[tabindex]:not([tabindex="-1"]):not('+n+'),div[contenteditable]:not([tabindex="-1"]):not('+n+")").filter(":visible");o.off("keydown.zfocushandler").on("keydown.zfocushandler",function(o){if(o.which===t.keyCode.TAB){var n=i.length,s=i.index(o.target);(s+=o.shiftKey?-1:1)===n?s=0:-1===s&&(s=n-1);var r=a(i[s]);(0===s||s===n-1||r[0].disabled)&&(r[0].disabled&&(r=l._findNextActiveElement(s,i,o.shiftKey)),r.focus(),o.preventDefault(),o.stopPropagation())}})},_findNextActiveElement:function(t,o,n){var l=o.length;n||t!==o.length-1||(t=-1),n&&0===t&&(t=l);for(var s=t+(n?-1:1),r=t+(n?1:-1);n?s>=r||0<=s:s<=r||s<l;){if(!o[s].disabled)return a(o[s]);s=0===s&&n?l-1:s!==l-1||n?n?s-1:s+1:0}},destroy:function(t){t.off("keydown.zfocushandler")},refresh:function(t,a,o){this._bindEvents(t,a),o&&this._focusElement(t,a)}}}(ZPeopleComponents),function(t){t.animationHandler=function(a){var d,c,o=a.action,n=a.element,l=a.callback,i=a.animation||a.default,s={slide:{show:"slideDown",open:"slideDown",panelexpand:"slideDown",expand:"slideDown",close:"slideUp",hide:"slideUp",panelcollapse:"slideUp",collapse:"slideUp"},fade:{show:"fadeIn",open:"fadeIn",panelexpand:"fadeIn",expand:"fadeIn",close:"fadeOut",hide:"fadeOut",panelcollapse:"fadeOut",collapse:"fadeOut"}},r="string"==typeof i;if(i&&("object"===_typeof(i)||r)){r&&(i={name:i});var _=i[o];if(c=_&&_.duration?_.duration:i.duration,_&&(i=_),"string"==typeof i||i.name?s[d=i.name||i]&&(d=s[d][o]):d=i.className,n.finish?n.finish():n.stop(!0,!0),d)return void("object"===_typeof(d)?n.animate(d,c,l):/^(fadeIn|fadeOut|slideDown|slideUp)$/.test(d)?n[d](c,l):(n.removeClass(n.data("zanimationclass")).data("zanimationclass",d),t.display(!1,n),n.addClass(d).off(t._animationEnd).on(t._animationEnd,function(){n.removeClass(d),l&&l(),n.off(t._animationEnd)})))}l&&l()},t.clearAnimationData=function(a){a.removeClass(a.data("zanimationclass")),a.removeData("zanimationclass"),a.off(t._animationEnd)}}(ZPeopleComponents),function(t){t.SVGIconsHTML='<symbol viewBox="0 0 16 16" width="100%" height="100%" id="zc__svg--add"> <polygon points="13,7.3 8.7,7.3 8.7,3 7.3,3 7.3,7.3 3,7.3 3,8.7 7.3,8.7 7.3,13 8.7,13 8.7,8.7 13,8.7 "></polygon> </symbol><symbol viewBox="0 0 16 16" width="100%" height="100%" id="zc__svg--arrow"> <polygon points="6.5,12.5 5.5,11.5 9,8 5.5,4.5 6.5,3.5 11,8"></polygon> </symbol><symbol id="zc__svg--backward" viewBox="0 0 12 12" width="100%" height="100%"><polygon points="6.6,10.3 2.9,6.5 6.6,2.7 7.4,3.4 4.3,6.5 7.4,9.6"></polygon></symbol><symbol viewBox="0 0 14 14" width="100%" height="100%" id="zc__svg--calendaricon"> <rect x="-22.5" y="3.5" width="13" height="10"></rect> <path d="M-10,4v9h-12V4H-10 M-9,3h-14v11h14V3L-9,3z"></path> <rect x="-20.6" y="1.4" width="1.2" height="3.2"></rect> <path d="M-19.8,1.8v2.5h-0.5V1.8H-19.8 M-19,1h-2v4h2V1L-19,1z"></path> <rect x="-20.6" y="7.4" width="1.2" height="1.2"></rect> <path d="M-19.8,7.8v0.5h-0.5V7.8H-19.8 M-19,7h-2v2h2V7L-19,7z"></path> <rect x="-16.6" y="1.4" width="1.2" height="3.2"></rect> <path d="M-15.8,1.8v2.5h-0.5V1.8H-15.8 M-15,1h-2v4h2V1L-15,1z"></path> <rect x="-12.6" y="1.4" width="1.2" height="3.2"></rect> <path d="M-11.8,1.8v2.5h-0.5V1.8H-11.8 M-11,1h-2v4h2V1L-11,1z"></path> <rect x="-16.6" y="7.4" width="1.2" height="1.2"></rect> <path d="M-15.8,7.8v0.5h-0.5V7.8H-15.8 M-15,7h-2v2h2V7L-15,7z"></path> <rect x="-12.6" y="7.4" width="1.2" height="1.2"></rect> <path d="M-11.8,7.8v0.5h-0.5V7.8H-11.8 M-11,7h-2v2h2V7L-11,7z"></path> <rect x="-20.6" y="10.4" width="1.2" height="1.2"></rect> <path d="M-19.8,10.8v0.5h-0.5v-0.5H-19.8 M-19,10h-2v2h2V10L-19,10z"></path> <rect x="-16.6" y="10.4" width="1.2" height="1.2"></rect> <path d="M-15.8,10.8v0.5h-0.5v-0.5H-15.8 M-15,10h-2v2h2V10L-15,10z"></path> <rect x="-12.6" y="10.4" width="1.2" height="1.2"></rect> <path d="M-11.8,10.8v0.5h-0.5v-0.5H-11.8 M-11,10h-2v2h2V10L-11,10z"></path> <path d="M4,3c0.6,0,1-0.4,1-1V1H3v1C3,2.6,3.4,3,4,3z"></path> <rect x="2" y="7" width="2" height="2"></rect> <rect x="2" y="10" width="2" height="2"></rect> <rect x="6" y="7" width="2" height="2"></rect> <rect x="6" y="10" width="2" height="2"></rect> <rect x="10" y="7" width="2" height="2"></rect> <rect x="10" y="10" width="2" height="2"></rect> <path d="M12.8,2c0,1-0.8,1.8-1.8,1.8S9.2,3,9.2,2H5.8C5.8,3,5,3.8,4,3.8S2.2,3,2.2,2H0v3v9h14V5V2H12.8z M13,13H1V6h12V13z"></path> <path d="M11,3c0.6,0,1-0.4,1-1V1h-2v1C10,2.6,10.4,3,11,3z"></path> </symbol><symbol viewBox="0 0 21.9 21.9" width="100%" height="100%" id="zc__svg--clear"> <path d="M14.1,11.3c-0.2-0.2-0.2-0.5,0-0.7l7.5-7.5c0.2-0.2,0.3-0.5,0.3-0.7s-0.1-0.5-0.3-0.7l-1.4-1.4C20,0.1,19.7,0,19.5,0 c-0.3,0-0.5,0.1-0.7,0.3l-7.5,7.5c-0.2,0.2-0.5,0.2-0.7,0L3.1,0.3C2.9,0.1,2.6,0,2.4,0S1.9,0.1,1.7,0.3L0.3,1.7C0.1,1.9,0,2.2,0,2.4 s0.1,0.5,0.3,0.7l7.5,7.5c0.2,0.2,0.2,0.5,0,0.7l-7.5,7.5C0.1,19,0,19.3,0,19.5s0.1,0.5,0.3,0.7l1.4,1.4c0.2,0.2,0.5,0.3,0.7,0.3 s0.5-0.1,0.7-0.3l7.5-7.5c0.2-0.2,0.5-0.2,0.7,0l7.5,7.5c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3l1.4-1.4c0.2-0.2,0.3-0.5,0.3-0.7 s-0.1-0.5-0.3-0.7L14.1,11.3z"></path> </symbol><symbol viewBox="0 0 16 16" width="100%" height="100%" id="zc__svg--close"> <rect x="1.5" y="7.4" transform="matrix(0.7071 -0.7071 0.7071 0.7071 -3.3137 8)" class="st0" width="13" height="1.1"></rect> <rect x="1.5" y="7.4" transform="matrix(0.7071 0.7071 -0.7071 0.7071 8 -3.3137)" class="st0" width="13" height="1.1"></rect> </symbol><symbol viewBox="0 0 600 598" width="100%" height="100%" id="zc__svg--zcolorpicker-advancedpicker"> <path d="M299.7-0.2C128.3-0.2-7,134,0.2,305.2C7.4,476.9,138,577.3,259.7,595.9c88.2,13.4,107.8-45.1,87.3-67.3 c-35.5-38.3-22.6-68.6-7.3-82.5c17.4-15.7,50.3-17.3,77.3-13.8c65.5,8.5,175-40,182.2-144.8C611,116.5,471.1-0.2,299.7-0.2z M118.1,299.7c-27.7,0-50.1-22.4-50.1-50.1c0-27.7,22.4-50.1,50.1-50.1c27.7,0,50.1,22.4,50.1,50.1 C168.2,277.3,145.8,299.7,118.1,299.7z M217.6,166.6c-27.7,0-50.1-22.4-50.1-50.1c0-27.7,22.4-50.1,50.1-50.1 c27.7,0,50.1,22.4,50.1,50.1C267.7,144.1,245.2,166.6,217.6,166.6z M384.9,166.9c-27.7,0-50.1-22.4-50.1-50.1 c0-27.7,22.4-50.1,50.1-50.1c27.7,0,50.1,22.4,50.1,50.1C435,144.4,412.6,166.9,384.9,166.9z M485.2,299.9 c-27.7,0-50.1-22.4-50.1-50.1c0-27.7,22.4-50.1,50.1-50.1c27.7,0,50.1,22.4,50.1,50.1C535.2,277.5,512.8,299.9,485.2,299.9z"> </path> </symbol><symbol viewBox="0 0 16 16" width="100%" height="100%" id="zc__svg--zcolorpicker-nocolor"> <path d="M8,0C3.6,0,0,3.6,0,8s3.6,8,8,8s8-3.6,8-8S12.4,0,8,0z M8,1c1.8,0,3.3,0.7,4.6,1.7l-9.9,9.9C1.7,11.3,1,9.8,1,8 C1,4.1,4.1,1,8,1z M8,15c-1.8,0-3.3-0.7-4.6-1.7l9.9-9.9C14.3,4.7,15,6.2,15,8C15,11.9,11.9,15,8,15z"></path> </symbol><symbol viewBox="0 0 48 48" width="100%" height="100%" id="zc__svg--confirm"> <g> <path d="M24,0C10.7,0,0,10.7,0,24s10.7,24,24,24s24-10.7,24-24C48,10.8,37.3,0,24,0z M24,44.1c-11,0-20-9-20-20s9-20,20-20s20,9,20,20C44,35.2,35,44.1,24,44.1z"></path> <g> <path d="M22.8,31.9c-1.7,0-2.6,0.9-2.6,2.7c0,0.9,0.2,1.5,0.7,2c0.4,0.5,1.1,0.7,1.9,0.7c0.8,0,1.5-0.2,1.9-0.7c0.5-0.5,0.7-1.1,0.7-2c0-0.8-0.2-1.5-0.7-2C24.3,32.2,23.6,31.9,22.8,31.9z"></path> <path d="M29.3,12.4c-1.3-1.1-3.2-1.7-5.5-1.7s-4.4,0.5-6.5,1.4c-1.1,0.5-0.6,1.7-0.6,1.7l0.5,1c0,0,0.5,0.9,1.7,0.5l0,0c0.5-0.2,1-0.4,1.5-0.6c0.9-0.3,2-0.5,3.1-0.5c1.2,0,2.2,0.3,2.8,0.8c0.7,0.5,1,1.3,1,2.3c0,0.8-0.2,1.6-0.6,2.2c-0.4,0.6-1.3,1.5-2.7,2.6c-1.2,0.9-2,1.8-2.5,2.7c-0.5,0.9-0.7,1.9-0.7,3.2c0,0.9,1.1,1.1,1.1,1.1h0.7c0,0,1.4,0,1.6-1.2l0,0c0-0.8,0.2-1.4,0.5-1.8c0.4-0.6,1.1-1.3,2.2-2.1c1.3-1,2.2-1.8,2.7-2.4s0.9-1.3,1.2-2s0.4-1.5,0.4-2.3C31.4,15.1,30.7,13.5,29.3,12.4z"></path> </g> </g> </symbol><symbol viewBox="0 0 48 48" width="100%" height="100%" id="zc__svg--decrement"> <path class="cls-1" d="M11.76,13L24,26.521,37.147,13,41,16.9,24,35,7,16.9Z"></path> </symbol><symbol viewBox="0 0 16 16" width="100%" height="100%" id="zc__svg--downarrow"> <polygon points="3.5,6.5 4.5,5.5 8,9 11.5,5.5 12.5,6.5 8,11"></polygon> </symbol><symbol viewBox="-3 -3 22 22" width="100%" height="100%" id="zc__svg--downscroller"> <path d="M16,4l-8,8L0,4H16z"></path> </symbol><symbol viewBox="0 0 48 48" width="100%" height="100%" id="zc__svg--error"> <path d="M41.2,7.2C31.9-2.2,16.7-2.5,7.3,6.9c-9.5,9.3-9.7,24.5-0.4,33.9c9.3,9.5,24.5,9.7,33.9,0.4C50.3,31.9,50.4,16.8,41.2,7.2z M37.9,38.2C30,46,17.4,45.9,9.7,38S2.1,17.5,10,9.8S30.5,2.1,38.2,10C45.9,17.9,45.8,30.5,37.9,38.2z"></path> <path d="M31.7,17.5l-1.1-1.1c-0.8-0.8-1.7-0.1-2,0.1L24,21l-4.6-4.7c-0.3-0.3-1.1-0.8-1.9,0l-1.1,1.1c-0.8,0.8-0.1,1.7,0.1,2L21,24l-4.7,4.6c-0.9,0.9-0.3,1.6-0.1,1.8l1.3,1.3c0.2,0.2,0.9,0.8,1.8-0.1L24,27l4.6,4.7c0.9,0.9,1.6,0.3,1.8,0.1l1.3-1.3c0.2-0.2,0.8-0.9-0.1-1.8L27,24l4.7-4.6C32,19.1,32.5,18.4,31.7,17.5z"></path> </symbol><symbol viewBox="0 0 12 12" id="zc__svg--fastbackward" width="100%" height="100%"><polygon points="5.6,10.3 1.9,6.5 5.6,2.6 6.3,3.4 3.3,6.5 6.4,9.6"></polygon><polygon points="9.6,10.3 5.9,6.5 9.6,2.6 10.3,3.4 7.3,6.5 10.4,9.6"></polygon></symbol><symbol viewBox="1 0 12 12" id="zc__svg--fastforward" width="100%" height="100%"><polygon points="7.4,10.3 6.7,9.6 9.7,6.5 6.6,3.4 7.4,2.7 11.1,6.5"></polygon><polygon points="3.4,10.3 2.7,9.6 5.7,6.5 2.6,3.4 3.4,2.7 7.1,6.5"></polygon></symbol><symbol viewBox="1 0 12 12" id="zc__svg--forward" width="100%" height="100%"><polygon points="4.4,10.3 3.7,9.6 6.7,6.5 3.6,3.4 4.4,2.7 8.1,6.5"></polygon></symbol><symbol viewBox="0 0 5 10" width="100%" height="100%" id="zc__svg--grippy"> <rect width="2" height="2"></rect><rect x="3" width="2" height="2"></rect> <rect y="4" width="2" height="2"></rect><rect x="3" y="4" width="2" height="2"></rect> <rect x="3" y="8" width="2" height="2"></rect><rect y="8" width="2" height="2"></rect> </symbol><symbol viewBox="0 0 48 48" width="100%" height="100%" id="zc__svg--help"><g><path d="M24,0C10.7,0,0,10.7,0,24s10.7,24,24,24s24-10.7,24-24C48,10.8,37.3,0,24,0z M24,44.1c-11,0-20-9-20-20s9-20,20-20s20,9,20,20C44,35.2,35,44.1,24,44.1z"></path><g><path d="M22.8,31.9c-1.7,0-2.6,0.9-2.6,2.7c0,0.9,0.2,1.5,0.7,2c0.4,0.5,1.1,0.7,1.9,0.7c0.8,0,1.5-0.2,1.9-0.7c0.5-0.5,0.7-1.1,0.7-2c0-0.8-0.2-1.5-0.7-2C24.3,32.2,23.6,31.9,22.8,31.9z"></path><path d="M29.3,12.4c-1.3-1.1-3.2-1.7-5.5-1.7s-4.4,0.5-6.5,1.4c-1.1,0.5-0.6,1.7-0.6,1.7l0.5,1c0,0,0.5,0.9,1.7,0.5l0,0c0.5-0.2,1-0.4,1.5-0.6c0.9-0.3,2-0.5,3.1-0.5c1.2,0,2.2,0.3,2.8,0.8c0.7,0.5,1,1.3,1,2.3c0,0.8-0.2,1.6-0.6,2.2c-0.4,0.6-1.3,1.5-2.7,2.6c-1.2,0.9-2,1.8-2.5,2.7c-0.5,0.9-0.7,1.9-0.7,3.2c0,0.9,1.1,1.1,1.1,1.1h0.7c0,0,1.4,0,1.6-1.2l0,0c0-0.8,0.2-1.4,0.5-1.8c0.4-0.6,1.1-1.3,2.2-2.1c1.3-1,2.2-1.8,2.7-2.4s0.9-1.3,1.2-2s0.4-1.5,0.4-2.3C31.4,15.1,30.7,13.5,29.3,12.4z"></path></g></g></symbol><symbol viewBox="1 2 9 9" width="100%" height="100%" id="zc__svg--horizontaldecrement"> <polygon points="6.6,10.3 2.9,6.5 6.6,2.7 7.4,3.4 4.3,6.5 7.4,9.6"></polygon> </symbol><symbol viewBox="1 2 9 9" width="100%" height="100%" id="zc__svg--horizontalincrement"> <polygon points="4.4,10.3 3.7,9.6 6.7,6.5 3.6,3.4 4.4,2.7 8.1,6.5"></polygon> </symbol><symbol viewBox="0 0 48 48" width="100%" height="100%" id="zc__svg--increment"> <path class="cls-1" d="M6,32l5,4L24,22,38,36l4-4L24,13Z"></path> </symbol><symbol viewBox="0 0 48 48" width="100%" height="100%" id="zc__svg--info"> <g> <g> <path d="M23.9,17.4c1.5,0,2.5-1.1,2.4-2.3c0-1.3-0.9-2.4-2.3-2.4s-2.4,1.1-2.4,2.4C21.6,16.3,22.6,17.4,23.9,17.4z"></path> <path d="M26.2,35.5V21.8c0-1.2-1.4-1.3-1.8-1.3h-0.7c0,0-1.7,0-1.7,1.1v14.3c0,0.3,0.2,0.9,1.3,0.9h1.6C25.3,36.7,26.2,36.5,26.2,35.5z"></path> </g> <path d="M24,0C10.7,0,0,10.7,0,24s10.7,24,24,24s24-10.7,24-24S37.3,0,24,0z M24,44C13,44,4,35,4,24S13,4,24,4s20,9,20,20S35,44,24,44z"></path> </g> </symbol><symbol id="zc__svg--lines" viewBox="0 0 12 12" width="100%" height="100%"> <line x1="11" y1="1" x2="1" y2="11"></line> <line x1="11" y1="5" x2="5" y2="11"></line> <line x1="11" y1="9" x2="9" y2="11"></line> </symbol><symbol viewBox="0 0 16 16" width="100%" height="100%" id="zc__svg--maximize"> <g transform="translate(0,-1036.3622)"> <g> <path d="M13,1040.4v8H3v-8H13 M14,1039.4H2v10h12V1039.4L14,1039.4z"></path> </g> </g> </symbol><symbol viewBox="0 0 16 16" width="100%" height="100%" id="zc__svg--minimize"> <rect x="2" y="12" width="12" height="1"></rect> </symbol><symbol viewBox="0 0 12 10" width="100%" height="100%" id="zc__svg--minus"> <rect x="2" y="5" width="9" height="1"></rect> </symbol><symbol viewBox="0 0 12 12" width="100%" height="100%" id="zc__svg--plus"> <polygon points="11,6 7,6 7,2 6,2 6,6 2,6 2,7 6,7 6,11 7,11 7,7 11,7 "></polygon> </symbol><symbol viewBox="0 0 16 16" width="100%" height="100%" id="zc__svg--restore"> <g transform="translate(0,-1036.3622)"> <path d="M2,1041.4v8h10v-8H2z M11,1048.4H3v-6h8V1048.4z"></path> </g> <g transform="translate(0,-1036.3622)"> <path d="M4,1039.4v3h1v-2h8v6h-2v1h3v-8H4z"></path> </g> </symbol><symbol viewBox="0 0 5 12" id="zc__svg--rightarrow"> <polygon points="4.4,10.3 3.7,9.6 6.7,6.5 3.6,3.4 4.4,2.7 8.1,6.5"></polygon> </symbol><symbol viewBox="-7 -7 64 64" width="100%" height="100%" id="zc__svg--round"> <circle cx="24.5" cy="24.5" r="15.5"></circle> </symbol><symbol viewBox="0 0 15 15" width="100%" height="100%" id="zc__svg--search"> <g id="Ellipse_50" data-name="Ellipse 50" fill="none" stroke="gray" stroke-width="1.5"> <circle cx="6" cy="6" r="6" stroke="none"></circle> <circle cx="6" cy="6" r="5.25" fill="none"></circle> </g> <path id="Rectangle_270" data-name="Rectangle 270" d="M0,0H5A1,1,0,0,1,6,1V1A1,1,0,0,1,5,2H0A0,0,0,0,1,0,2V0A0,0,0,0,1,0,0Z" transform="translate(10.757 9.343) rotate(45)" fill="gray"></path> </symbol><symbol viewBox="0 0 48 48" width="100%" height="100%" id="zc__svg--success"> <g> <path d="M41.2,7.2C31.9-2.3,16.7-2.5,7.3,6.8c-9.5,9.3-9.7,24.5-0.4,33.9c9.3,9.5,24.5,9.7,33.9,0.4C50.3,31.9,50.4,16.7,41.2,7.2z M37.9,38.2c-7.9,7.7-20.5,7.6-28.2-0.3S2.1,17.4,10,9.7S30.5,2.1,38.2,10C45.9,17.8,45.8,30.5,37.9,38.2z"></path> <path d="M36,19.3L23.1,32.2c-1.1,1.1-2.9,1.1-4,0l-1-1l-4.5-4.6c-0.2-0.2-1-1.1-0.1-2l1.1-1.1c0.8-0.8,1.6-0.3,1.9,0l4.6,4.7l12-11.8c0.2-0.2,1.1-1,2-0.1l1.1,1.1C36.8,18.2,36.3,18.9,36,19.3z"></path> </g> </symbol><symbol viewBox="-2 -2 20 20" width="100%" height="100%" id="zc__svg--tick"> <polygon points="14.6,2.4 4.9,12.1 1.2,8.5 0.4,9.3 4.9,13.8 15.4,3.2 "></polygon> </symbol><symbol viewBox="-3 -3 22 22" width="100%" height="100%" id="zc__svg--upscroller"> <path d="M0,12l8-8l8,8H0z"></path> </symbol><symbol viewBox="0 0 48 48" width="100%" height="100%" id="zc__svg--warning"> <g> <path d="M47.3,36.6L27.7,2.5c-0.9-1.4-2.4-2.2-3.9-2.1c-1.6,0-2.9,0.9-3.7,2.2L0.7,36.5c-0.9,1.3-1,3-0.2,4.4c0.8,1.5,2.3,2.4,4,2.4h39c1.6,0,3.1-0.8,3.9-2.2C48.2,39.7,48.2,38,47.3,36.6z M43.9,39.2c-0.1,0.1-0.2,0.2-0.4,0.2h-39c-0.3,0-0.4-0.2-0.5-0.3c-0.1-0.2,0-0.3,0-0.4L23.5,4.6c0,0,0.1-0.2,0.3-0.2c0,0,0,0,0,0c0.1,0,0.3,0,0.4,0.2l19.6,34C44,38.8,44,39,43.9,39.2z"></path> </g> <path d="M24.1,28.4L24.1,28.4c-0.8,0-1.3-0.4-1.4-1l-1-10c-0.1-1.1,1-2,2.4-2l0,0c1.4,0,2.5,0.9,2.4,2l-1,10C25.4,27.9,24.9,28.4,24.1,28.4z"></path> <circle cx="24" cy="33.4" r="2"></circle> </symbol>',t.loadSVGIcons=function(){var a=document.getElementById("zohocomponents__svg");if(a||((a=document.createElementNS("http://www.w3.org/2000/svg","svg")).setAttribute("id","zohocomponents__svg"),a.setAttribute("class","zh-dnone")),"innerHTML"in a)a.innerHTML=t.SVGIconsHTML;else{var o=document.createElement("div");o.innerHTML="<svg>"+t.SVGIconsHTML+"</svg>";for(var n=o.childNodes[0].childNodes;n[0];)a.appendChild(n[0])}document.body.appendChild(a)},"loading"===document.readyState?document.addEventListener("DOMContentLoaded",t.loadSVGIcons):t.loadSVGIcons()}(ZPeopleComponents),function(t){var a=t.Templates.Utilities;a.icon=function(t){return ZT.html(zc0tO(),t.iconClassName,ZT.customHTML(t.SVGIconId?"<svg class='".concat(t.SVGIconClassName,"' focusable=false > <use xlink:href='").concat(t.SVGIconId,"'></use></svg> </svg>"):""))},a.commandBar=function(t){return ZT.html(zc0tO2(),t.colClass?t.colClass:"",t.cols&&t.cols.length?t.cols.map(function(t){return ZT.html(zc0tO3(),a.commandBarCol(t))}):a.commandBarCol(t))},a.commandBarCol=function(t){return ZT.html(zc0tO4(),t.left&&t.left.length?ZT.html(zc0tO5(),t.leftClass||"zdatetimepicker__commandbaractionsleft",t.left.map(function(t){return a.button(t)})):"",t.center&&t.center.length?ZT.html(zc0tO6(),t.centerClass||"zdatetimepicker__commandbaractionscenter",t.center.map(function(t){return a.button(t)})):"",t.right&&t.right.length?ZT.html(zc0tO7(),t.rightClass||"zdatetimepicker__commandbaractionsright",t.right.map(function(t){return a.button(t)})):"")},a.button=function(a){return ZT.html(zc0tO8(),a.isLink?ZT.html(zc0tO9(),a.className,a.tabindex,a.text,a.text):a.initBtnComp?t.createButton(a):t.zbutton.Templates.container(a))}}(ZPeopleComponents),ZPeopleComponents.Position=function(t){function a(){}var o=t.DOMUtil,n=t.$window;t.getScrollWidth=function(){if(!t.scrollBarWidth){var a=document.createElement("div");a.setAttribute("style","width:100px;height:100px;overflow:scroll;");var o=document.querySelector("body");o.appendChild(a),t.scrollBarWidth=a.offsetWidth-a.scrollWidth,o.removeChild(a)}return t.scrollBarWidth},a.resetWinDim=function(){a.winDim=void 0},a.setWinDim=function(){a.winDim={scrollLeft:n.scrollLeft(),scrollTop:n.scrollTop(),height:document.documentElement.clientHeight,width:document.documentElement.clientWidth,docWidth:document.documentElement.scrollWidth,docHeight:document.documentElement.scrollHeight}},a.getWinDim=function(){return a.winDim||a.setWinDim(),a.winDim},a.DEFAULTS={direction:"bottom-left",resetPosition:!0,showWithinTarget:!1,within:n,computeElementDim:!0,computeTargetDim:!0,computeWithinDim:!0,arrow:{minSpace:0,margin:{left:0,top:0},callback:void 0},callbacks:{beforeComputingDir:{dimensionModifier:o.noop,directionModifier:o.noop},beforeComputingPos:{dimensionModifier:o.noop,directionModifier:o.noop}},withinPadding:8,customDimensions:!1,positionAlterable:"flipallfit"},a.calloutPositions={"top-right":"bottom-right","top-left":"bottom-left","bottom-right":"top-right","bottom-left":"top-left",top:"bottom",bottom:"top",left:"right",right:"left","left-top":"right-bottom","left-bottom":"right-top","right-top":"left-bottom","right-bottom":"left-top"},a.regex={relDirections:/^(top|top-right|top-left|bottom|bottom-right|bottom-left|left|left-top|left-bottom|right|right-top|right-bottom|top-left-corner|top-right-corner|bottom-left-corner|bottom-right-corner)$/,withinDirections:/^(top|bottom|left|right|top-left|top-right|bottom-left|bottom-right|center)$/,fit:/^(fit|flipfit|flipallfit|flipsidefit|flipsideallfit|true)$/,flip:/^(flip|flipfit|flipall|flipallfit|flipside|flipsidefit|flipsideall|flipsideallfit|true)$/,flipside:/^(flipside|flipsidefit|flipsideall|flipsideallfit|flipsideonlyfit|true)$/,flipall:/^(flipall|flipallfit|flipsideall|flipsideallfit|true)$/},a.prototype={_getCorrectionOffset:function(t){if(!this.correctionOffset&&(this.correctionOffset={left:0,top:0},/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent))){var a=o("body"),n=o("<span>").css({position:"absolute",height:"20px",width:"20px",top:"0px",left:"0px"}).appendTo(a);this.correctionOffset=this._calcOffset(n,t),this.correctionOffset.left=this.correctionOffset.left-parseFloat(a.css("margin-left"))-parseFloat(a.css("border-left-width")),this.correctionOffset.top=this.correctionOffset.top-parseFloat(a.css("margin-top"))-parseFloat(a.css("border-top-width")),n.remove()}return this.correctionOffset},_getDimensions:function(t){return t.preventDefault?{width:0,height:0,isEvent:!0,offset:{left:t.pageX,top:t.pageY}}:9===(t=o(t))[0].nodeType?{width:t.width(),height:t.height(),offset:{left:0,top:0}}:t[0]===window?{width:t.width(),height:t.height(),offset:{left:t.scrollLeft(),top:t.scrollTop()}}:{width:this._getDimension(t[0],"outerWidth"),height:this._getDimension(t[0],"outerHeight"),offset:this._getOffset(t)}},_getOffset:function(a){var o=t.Browser.isSafari&&a[0]instanceof SVGElement,n=this._calcOffset(a,o),l=this._getCorrectionOffset(o);return n.left-=l.left,n.top-=l.top,n},_calcOffset:function(t,a){if(a){var o=t[0].getBoundingClientRect();return{top:o.top+window.pageYOffset,left:o.left+window.pageXOffset}}return t.offset()},_fixDirection:function(t){var n,l,i,s,o=t.split("-");return(/^(top|bottom)$/.test(o[0])||/^corner$/.test(o[2]))&&(this.callout&&this.callout.callback.call(this,this.callout.element,a.calloutPositions[o[0]]),n=this.floatingElemDim.width+(this.callout?this.callout.width?this.callout.width:this.callout.element.outerWidth():0),l=this.floatingElemDim.height+(this.callout?this.callout.height?this.callout.height:this.callout.element.outerHeight():0),t=(i=this._flip.top.call(this,t,l)).direction,0<i.overTop&&a.regex.flipall.test(this.options.positionAlterable)&&(0>=(s=this._flip.left.call(this,"right",n)).overLeft&&(t=s.direction))),o=t.split("-"),(/^(left|right)$/.test(o[0])||/^corner$/.test(o[2]))&&(this.callout&&this.callout.callback.call(this,this.callout.element,a.calloutPositions[o[0]]),n=this.floatingElemDim.width+(this.callout?this.callout.width?this.callout.width:this.callout.element.outerWidth():0),l=this.floatingElemDim.height+(this.callout?this.callout.height?this.callout.height:this.callout.element.outerHeight():0),t=(i=this._flip.left.call(this,t,n)).direction,0<i.overLeft&&a.regex.flipall.test(this.options.positionAlterable)&&(t=(s=this._flip.top.call(this,"bottom",l)).direction)),t},_fixAlternateDirection:function(t){var l,i,a=t.split("-"),o=0,n=0;return this.targetDim.isEvent&&this.callout&&(o=2*this.callout.width+this.callout.width/2,n=2*this.callout.height+this.callout.height/2),/^(left|right)$/.test(a[1])?(i="left"===a[1]?"right":"left",l=this._flip.left.call(this,i,this.floatingElemDim.width-("corner"===a[0]?0:this.targetDim.width)-n),t=t.replace(a[1],"left"===l.direction?"right":"left")):/^(top|bottom)$/.test(a[1])&&(l=this._flip.top.call(this,a[1],this.floatingElemDim.height-this.targetDim.height-o),t=t.replace(a[1],l.direction)),t},_initCallout:function(t){if(this.options.arrow&&this.options.arrow.element){var n={},l=this.options.arrow.element;if(("string"==typeof l||l instanceof o||l.nodeType)&&((l=o(l)).length&&(n.element=l)),n.element&&"static"!==n.element.css("position"))return n.centeredToTarget=/^(center|undefined)$/.test(this.options.arrow.direction)&&!this.targetDim.isEvent,n.callback="function"==typeof this.options.arrow.callback?this.options.arrow.callback:"function"==typeof this.options.arrowCallback?this.options.arrowCallback:o.noop,n.direction=a.calloutPositions[t],n.callback.call(this,n.element,n.direction.split("-")[0]),n.height="number"==typeof this.options.arrow.height?this.options.arrow.height:0,n.width="number"==typeof this.options.arrow.height?this.options.arrow.width:0,n.minSpace=this.options.arrow.minSpace,n.margin=this.options.arrow.margin||{left:0,top:0},n;this.options.arrow=void 0}},_getElementHeight:function(){var t=this.options.direction;return this.floatingElemDim.height>this._getAvailableHeight(t)?this._getAvailableHeight(t):this.floatingElemDim.height},_getElementWidth:function(){var t=this.options.direction;return this.floatingElemDim.width>this._getAvailableWidth(t)?this._getAvailableWidth(t):this.floatingElemDim.width},_fitCalloutPosition:function(t,a){var r,o=t.direction.split("-"),n=o[1],i=this._getElementWidth(),s=this._getElementHeight();/^(left|right)$/.test(o[1])?r=i-t.width:/^(top|bottom)$/.test(o[1])?r=s-t.height:/^(top|bottom)$/.test(o[0])?(r=i-t.width,n="left"):/^(left|right)$/.test(o[0])&&(r=s-t.height,n="top"),a[n]>r&&(a[n]=r),a[n]<0&&(a[n]=0)},_getCalloutPosition:function(t,a){var l,o={},n=t.direction.split("-");/^(top|bottom)$/.test(n[0])?(o[n[0]]=-t.height,!n[1]&&(o.left=this.floatingElemDim.width/2-t.width/2-a.left)):/^(left|right)$/.test(n[0])&&(o[n[0]]=-t.width,!n[1]&&(o.top=this.floatingElemDim.height/2-t.height/2-a.top)),/^(left|right)$/.test(n[1])?(l=a.left,"left"===n[1]?(l=-l,o.right="auto"):o.left="auto",this.targetDim.width&&this.floatingElemDim.width>this.targetDim.width?o[n[1]]=this.targetDim.width/2-t.width/2+l:o.left=this.floatingElemDim.width/2-t.width/2):/^(top|bottom)$/.test(n[1])&&(l=a.top,"top"===n[1]?(l=-l,o.bottom="auto"):o.top="auto",this.targetDim.height&&this.floatingElemDim.height>this.targetDim.height?o[n[1]]=this.targetDim.height/2-t.height/2+l:o.top=this.floatingElemDim.height/2-t.height/2);var i="none"!==this.floatingElement.css("box-shadow");return"top"===n[0]?o.top+=parseFloat(this.floatingElement.css("border-top-width"))||i?1:0:"bottom"===n[0]?o.bottom+=parseFloat(this.floatingElement.css("border-bottom-width"))||i?1:0:"right"===n[0]?o.right+=parseFloat(this.floatingElement.css("border-right-width"))||i?1:0:"left"===n[0]&&(o.left+=parseFloat(this.floatingElement.css("border-left-width"))||i?1:0),/^(bottom|top)/.test(t.direction)?o.top=o.bottom="":o.left=o.right="",o},_flip:{top:function(t,a){var o=t.split("-")[0],n={direction:t},l=this._getAvailableHeight(t);if(n.overTop=a-l,0<n.overTop){var i="top"===o?"bottom":"top",s=this._getAvailableHeight(t.replace(o,i));s>l&&(n.direction=t.replace(o,i),n.overTop=a-s)}return n},left:function(t,a){var i,s,o=t.split("-"),n={direction:t},l=this._getAvailableWidth(t);if(n.overLeft=a-l,0<n.overLeft){i=o[0],"corner"===o[2]&&(i=o[1]),s="left"===i?"right":"left";var r=this._getAvailableWidth(t.replace(i,s));r>l&&(n.direction=t.replace(i,s),n.overLeft=a-r)}return n}},_fitPosition:function(t,a){var n=o.extend({},t),l=a.split("-");if(l[1]=void 0===l[1]?/^(top|bottom)$/.test(l[0])?"left":"top":l[1],/^(top|bottom)$/.test(l[1])||this.targetDim.isEvent){var i=this.within.scrollTop-n.top;0<i&&(n.top+=i);var s=n.top+this.floatingElemDim.height-(this.within.scrollTop+this._getAvailableHeight().complete);0<s&&(n.top-=s)}if(/^(left|right)$/.test(l[1])||this.targetDim.isEvent){var r=this.within.scrollLeft-n.left;0<r&&(n.left+=r);var d=n.left+this.floatingElemDim.width-(this.within.scrollLeft+this._getAvailableWidth().complete)+1;0<d&&(n.left-=d)}return n},_calculatePosition:function(t){var n,l,i;if(t&&(i=!0,this.options.direction=t),this.options.callbacks.beforeComputingDir.dimensionModifier(this.targetDim,this.floatingElemDim,this.within,this.options),/corner/.test(this.options.direction)||(this.callout=this._initCallout(this.options.direction)),a.regex.flip.test(this.options.positionAlterable)&&!i&&(this.options.direction=this._fixDirection(this.options.direction)),this.callout&&(this.callout.direction=a.calloutPositions[this.options.direction],this.callout.callback.call(this,this.callout.element,this.callout.direction.split("-")[0]),!this.callout.height&&(this.callout.height=this.callout.element.outerHeight()),!this.callout.width&&(this.callout.width=this.callout.element.outerWidth())),a.regex.flipside.test(this.options.positionAlterable)&&(this.options.direction=this._fixAlternateDirection(this.options.direction)),this.options.callbacks.beforeComputingPos.dimensionModifier(this.targetDim,this.floatingElemDim,this.within,this.options),l=this._fixPosition(this.options.direction),n=o.extend({},l),a.regex.fit.test(this.options.positionAlterable)&&(n=this._fitPosition(l,this.options.direction)),n.top<this.within.scrollTop&&(n.top=this.within.scrollTop),n.left<this.within.scrollLeft&&(n.left=this.within.scrollLeft),this.callout&&a.regex.flipall.test(this.options.positionAlterable)&&!i&&!this.targetDim.isEvent&&void 0!==this.callout.minSpace){var c,_,u,p,m,s=this.options.direction.split("-"),r=this._getElementWidth(),d=this._getElementHeight();if(c=this.targetDim.offset.left-r+this.callout.width,_=this.targetDim.offset.top-d+this.callout.height,u=this.targetDim.offset.left+this.targetDim.width-this.callout.width,p=this.targetDim.offset.top+this.targetDim.height-this.callout.height,/^(top|bottom)$/.test(s[0])?(n.left<c&&(m="left"),n.left>u&&(m="right")):/^(left|right)$/.test(s[0])&&(n.top<_&&(m="top"),n.top>p&&(m="bottom")),m)return this._calculatePosition(m)}var g={left:n.left-this.finalCorrectionOffset.left,top:n.top-this.finalCorrectionOffset.top};if(this.callout){this.callout.direction=a.calloutPositions[this.options.direction];var h={left:n.left-l.left,top:n.top-l.top};this.callout.position=this._getCalloutPosition(this.callout,h),this._fitCalloutPosition(this.callout,this.callout.position)}return g},_getAvailableHeight:function(t){if(!this.availableHeight)if(this.within.isWindow||this.within.isDocument)this.availableHeight={top:this.targetDim.offset.top-this.within.scrollTop,bottom:this.within.height-(this.targetDim.offset.top+this.targetDim.height-this.within.scrollTop),complete:this.within.height};else{this.availableHeight={},this.availableHeight.top=this.within.offset.top<this.win.scrollTop?this.targetDim.offset.top-this.win.scrollTop:this.targetDim.offset.top-this.within.scrollTop,this.availableHeight.bottom=this.within.offset.top+this.within.height-(this.targetDim.offset.top+this.targetDim.height);var a=this.win.height+this.win.scrollTop-(this.within.offset.top+this.within.height);0>a&&(this.availableHeight.bottom+=a),this.availableHeight.complete=this.availableHeight.top+this.availableHeight.bottom+this.targetDim.height}return t?"top"===(t=t.split("-")[0])?this.availableHeight.top:"bottom"===t?this.availableHeight.bottom:this.availableHeight.complete:this.availableHeight},_getAvailableWidth:function(t){if(!this.availableWidth)if(this.within.isWindow||this.within.isDocument)this.availableWidth={left:this.targetDim.offset.left-this.within.scrollLeft,right:this.within.width-(this.targetDim.offset.left+this.targetDim.width-this.within.scrollLeft),complete:this.within.width};else{this.availableWidth={},this.availableWidth.left=this.within.offset.left<this.win.scrollLeft?this.targetDim.offset.left-this.win.scrollLeft:this.targetDim.offset.left-this.within.scrollLeft,this.availableWidth.right=this.within.offset.left+this.within.width-(this.targetDim.offset.left+this.targetDim.width);var a=this.win.width+this.win.scrollLeft-(this.within.offset.left+this.within.width);0>a&&(this.availableWidth.right+=a),this.availableWidth.complete=this.availableWidth.left+this.availableWidth.right+this.targetDim.width}if(!t)return this.availableWidth;var o=t.split("-"),n="corner"===o[2]?o[1]:o[0];return"left"===n?this.availableWidth.left:"right"===n?this.availableWidth.right:this.availableWidth.complete},_fixPosition:function(t){var a=t.split("-"),n=o.extend({},this.targetDim.offset);return"top"===a[0]?n.top-=this.floatingElemDim.height+(this.callout?this.callout.height:0):"bottom"===a[0]?n.top+=this.targetDim.height+(this.callout?this.callout.height:0):"left"===a[0]?n.left-=this.floatingElemDim.width+(this.callout?this.callout.width:0):"right"===a[0]&&(n.left+=this.targetDim.width+(this.callout?this.callout.width:0)),void 0===a[1]?a[0].match(/^left|right$/)?n.top=n.top-this.floatingElemDim.height/2+this.targetDim.height/2:n.left=n.left-this.floatingElemDim.width/2+this.targetDim.width/2:"top"===a[1]?n.top=n.top+this.targetDim.height-this.floatingElemDim.height:"right"===a[1]?n.left=n.left-this.floatingElemDim.width+("corner"===a[2]?0:this.targetDim.width):"left"===a[1]&&"corner"===a[2]&&(n.left+=this.targetDim.width),n},_showHiddenParent:function(t){if((t=o(t)).is(":hidden"))for(var a=1,n=t;a&&n&&!n.is("body");)"none"===n.css("display")&&(this.hiddenParents.push(n),this.prevStylesOfHiddenParents.push(n.attr("style")||""),n.css({display:"block",position:"absolute",opacity:1,visibility:"hidden"}),a=n.is(":hidden")),n=n.parent()},_resetParent:function(){this.hiddenParents&&this.hiddenParents.length&&(this.hiddenParents.forEach(function(t,a){t.attr("style",this.prevStylesOfHiddenParents[a])}),this.hiddenParents=[],this.prevStylesOfHiddenParents=[])},_getCorrection:function(t){var a=t.css("position"),n=t.parent()[0],l=o("<span>").css({position:a,height:"20px",width:"20px",top:"0px",left:"0px",transform:"none",margin:"0px",display:"",visibility:"hidden"});n.appendChild(l[0]);var i=l.offset();return n.removeChild(l[0]),i},_appendScrollBar:function(){var t=document.createElement("div");return t.setAttribute("style","width:100px;height:100px;overflow:scroll;"),document.querySelector("body").appendChild(t),t.style.cssText="width:100px;height:100px;overflow:scroll;",t},_getWithinDimensions:function(a){var d,c,_,o=(a=a.length?a:n)[0]===window,l=!!a[0]&&9===a[0].nodeType,i=o||l?{left:0,top:0}:this._getOffset(a)||{left:0,top:0},s=o||l?this.win.scrollLeft:i.left<this.win.scrollLeft?this.win.scrollLeft:i.left,r=o||l?this.win.scrollTop:i.top<this.win.scrollTop?this.win.scrollTop:i.top;if(o?(d=this.win.width,c=this.win.height):l?(d=this.win.docWidth,c=this.win.docHeight):(d=a.outerWidth(),c=a.outerHeight(),_=a),_){var h,u=_.css("overflow-x"),p=_.css("overflow-y"),m="scroll"===u||("auto"===u||_.is("body")&&"visible"===u)&&d<_[0].scrollWidth;("scroll"===p||("auto"===p||_.is("body")&&"visible"===p)&&c<_[0].scrollHeight)&&(d-=h=t.getScrollWidth()),m&&(c-=void 0===h?t.getScrollWidth():h)}return{element:a,isWindow:o,isDocument:l,offset:i,scrollLeft:s,scrollTop:r,width:d,height:c}},_getDimension:function(t,a){var l,i,n=window.getComputedStyle(t).transform;if(t instanceof SVGElement&&(i=!0),i||!n||"none"===n){var s=t.getBoundingClientRect();s&&("outerWidth"===a?l=s.width:"outerHeight"===a&&(l=s.height))}return(isNaN(l)||!l)&&(l=o(t)[a]()),l},_getPosition:function(n,l,i){var s=(i=this.options=o.extend(!0,{},a.DEFAULTS,i)).direction;a.regex.relDirections.test(i.direction)||(i.direction="bottom-left");var r=i.direction;i.direction=t.getRTLBasedDir(i.direction,i.rtl);var d={prevDirection:s,elementPosition:{left:0,right:0},actualDirection:i.direction,direction:r,arrowPosition:{left:0,right:0}};if(!t.isInDOM(l))return d;if(!i.customDimensions&&!n.preventDefault&&!t.isInDOM(n))return d;this.floatingElement=o(l),i.considerHiddenElements&&(this.hiddenparents=[],this.prevStylesOfHiddenParents=[],!n.preventDefault&&this._showHiddenParent(o(n)),this._showHiddenParent(this.floatingElement));var c=this.floatingElement.attr("style");i.resetPosition&&this.floatingElement.css({top:"-99999px",left:"-99999px",overflow:"hidden"}),this.floatingElemDim=i.computeElementDim?this._getDimensions(this.floatingElement):{};var _=a.getWinDim();this.win={scrollLeft:_.scrollLeft+i.withinPadding,scrollTop:_.scrollTop+i.withinPadding,height:_.height-2*i.withinPadding,width:_.width-2*i.withinPadding},this.targetDim=i.customDimensions?n:i.computeTargetDim?this._getDimensions(n):{},this.within=i.computeWithinDim?this._getWithinDimensions(o(i.within)):{},this.finalCorrectionOffset=this._getCorrection(this.floatingElement),i.resetPosition&&this.floatingElement.attr("style",c);var u=this._calculatePosition();i.considerHiddenElements&&this._resetParent(),d.elementPosition=u||d.elementPosition,d.arrowPosition=this.callout?this.callout.position:d.arrowPosition,d.arrowDirection=a.calloutPositions[i.direction]&&a.calloutPositions[i.direction].split("-")[0],d.actualDirection=i.direction,d.direction=t.getRTLBasedDir(i.direction,i.rtl);var p=i.direction.split("-");return/^(top|bottom)$/.test(p[0])?(d.availableHeight=this._getAvailableHeight(p[0])-(this.callout?this.callout.height:0),d.availableWidth=this._getAvailableWidth(p[0])):/^(left|right)$/.test(p[0])&&(d.availableHeight=this._getAvailableHeight(p[0]),d.availableWidth=this._getAvailableWidth(p[0])-(this.callout?this.callout.width:0)),d}},t.debounce=function(t,a,o){var n;return function(){var l=this,i=arguments,s=o&&!n;clearTimeout(n),n=setTimeout(function(){n=null,o||t.apply(l,i)},a),s&&t.apply(l,i)}};var l=t.debounce(a.resetWinDim,250);return window.addEventListener("resize",l),window.addEventListener("scroll",l),{get:function(t,n,l){if(t&&o(n).length){t instanceof o&&(t=t[0]),n instanceof o&&(n=n[0]),l=l||{};var i=new a,s=i._getPosition(t,n,l);return i.options=void 0,s}}}}(ZPeopleComponents),function(t){var a=t.DOMUtil,o=[],n=[],l=function(t){return n[o.indexOf(t)]},i=function a(o,n){var s=l(n);if(!s||!t.isInDOM(n))return t.unBindDocumentEvents(n),!1;if(o.closest(s.container.add(s.forElement)).length)return!1;for(var r=s.componentsInContext,d=0;d<r.length;d++)if(!a(o,r[d]))return!1;return!0},s=".zclosehandler",r=t.$window,d=function(t){var a=t.target;if(t.touches&&0<t.touches.length){var o=t.touches[0]||t.changedTouches[0];a=document.elementFromPoint(o.clientX,o.clientY)||a}if(t.composedPath){var n=t.composedPath()[0];n!==a&&(a=n)}return a};t.bindDocumentEvents=function(_){var u=s+"-"+Math.floor(1e6*Math.random()),p=_.ctype,m=a(_.element),g=_.container&&a(_.container)||m,h=a(_.forElement),v=_.closeMethodName,f=_.isCE||m.data(p).isCE?"z":p,k=f+(_.closeEvent||v)+s,b=l(m[0]);if(!b||!h.is(b.forElement)){t.unBindDocumentEvents(m),o.forEach(function(t){var a=l(t),o=a.componentsInContext.indexOf(m[0]);h.closest(a.container).length?0>o&&a.componentsInContext.push(m[0]):-1<o&&a.componentsInContext.splice(o,1)}),o.push(m[0]);var C={_eventSuffix:u,forElement:h,container:g,ctype:p,closeFn:v,componentsInContext:[]};n.push(C),m.on(k+" "+f+"beforedestroy"+s,function(){t.unBindDocumentEvents(m)}),C.timer=setTimeout(function(){function o(t){var o=d(t);p=i(a(o),m[0])}function n(t){var o=d(t);p=i(a(o),m[0])}var p,s=t.Browser.isMobile,_="ontouchstart"in window||0<navigator.maxTouchPoints;_&&(r[0].addEventListener("touchstart",o,!0),r[0].addEventListener("touchend",o,!0)),r[0].addEventListener("mousedown",o,!0),r[0].addEventListener("contextmenu",o,!0),r[0].addEventListener("resize",n,!0),C.mousedownHandler=o,C.resizeHandler=n,C.isMob=s,C.hasTouch=_;var g="mousedown"+u+" contextmenu"+u;_&&(g+=" touchstart"+u+" touchend"+u),r.on(g,function(o){if(p){var n=a.Event("zclosehandlerbeforehide",{originalEvent:o});if(m.trigger(n),!n.isDefaultPrevented()){var l=m[0].querySelector("#zdropdownlist__search input"),i=l&&document.activeElement===l,s=!!window.visualViewport&&150<window.innerHeight-window.visualViewport.height;i&&s?t.unBindDocumentEvents(m,!1,o):t.unBindDocumentEvents(m,!0,o)}}})},10)}},t.unBindDocumentEvents=function(d,c,_){var u=o.indexOf(d[0]);if(-1!==u){var p=n[u];clearTimeout(p.timer),d.off(s),p.mousedownHandler&&(p.hasTouch&&(r[0].removeEventListener("touchstart",p.mousedownHandler,!0),r[0].removeEventListener("touchend",p.mousedownHandler,!0)),r[0].removeEventListener("mousedown",p.mousedownHandler,!0),r[0].removeEventListener("contextmenu",p.mousedownHandler,!0),r[0].removeEventListener("resize",p.resizeHandler,!0)),r.off(p._eventSuffix),o.splice(u,1),n.splice(u,1);for(var m=p.componentsInContext,g=0;g<m.length;g++)t.unBindDocumentEvents(a(m[g]),!0,_);if(o.forEach(function(t){var a=l(t);if(a.componentsInContext.length){var o=a.componentsInContext,n=o.indexOf(d[0]);-1<n&&o.splice(n,1)}}),c)t[p.ctype.replace("z","")](d)[p.closeFn](_)}}}(ZPeopleComponents),ZPeopleComponents.Date=function(t){var a=Math.min;t.DOMUtil;return{monthsAbbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],daysAbbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],invalidInput:"Invalid date/time provided. Please provide correct input",century:21,AM:"AM",PM:"PM",timeZone:null,alternateTZNames:{"US/Samoa":"Pacific/Pago_Pago","US/Hawaii":"Pacific/Honolulu","US/Aleutian":"America/Anchorage","US/Alaska":"America/Anchorage","Mexico/BajaNorte":"America/Tijuana","US/Arizona":"America/Phoenix","US/Pacific":"America/Los_Angeles",MST:"America/Phoenix",PST:"America/Los_Angeles","Mexico/BajaSur":"America/Mazatlan",CST6CDT:"America/Chicago","US/Central":"America/Chicago","US/Indiana-Starke":"America/Indiana/Knox","US/East-Indiana":"America/Indiana/Indianapolis","US/Eastern":"America/New_York","US/Michigan":"America/Detroit","America/Argentina/ComodRivadavia":"America/Argentina/Catamarca","America/Nuuk":"America/Godthab",MET:"Europe/Paris",EET:"Europe/Sofia",IST:"Asia/Kolkata","Australia/ACT":"Australia/Sydney","Antarctica/McMurdo":"Pacific/Auckland",AST:"America/Blanc-Sablon",EAT:"Africa/Nairobi",NST:"Pacific/Auckland",PRT:"America/Blanc-Sablon","SystemV/AST4ADT":"America/Blanc-Sablon"},_getNewDate:function(){return this.timeZone?this.changeTZOfDate(new Date,this.timeZone):new Date},_setMonth:function(t,a){var o=t.getDate();if(isNaN(t))return t;for(a-=1,a%=12,t.setMonth(a);0<a&&t.getMonth()!==a;)t.setDate(--o);return t},_parseDateValue:function(t,a,o){if(t){var i,n=!1,l=[];if(t instanceof Date)return{date:t,isValid:!0};o.length&&(l=o.slice()),l.unshift(a);for(var s=t,r=t.match(/[^ -/:-@\u5e74\u6708\u65e5[-`{-~\t\n\r]+/g)||[],d=0;d<l.length;d++)if(t=s,(i=this.parseDate(t,l[d]))&&i.isValid){n=!0;break}return n||(i=this.getDateFromOffset(s,i?i.date:void 0,l[0],r)),i}},_getFormattedDate:function(t,a){var n,l,o=["yyyy","yy","M","MM","MMM","MMMM","d","dd","ddd","dddd","H","HH","h","hh","m","mm","s","ss"];if(a){for(var s=0;s<o.length;s++)if((l=o[s])in t&&!isNaN(t[l])){switch(n=new Date(a),l){case"M":case"MM":case"MMM":case"MMMM":n=this._setMonth(n,t[l]);break;case"yyyy":9999<t[l]?n.setFullYear(9999):n.setFullYear(t[l]);break;case"yy":var d=(this.century-1).toString()+t[l];n.setFullYear(parseInt(d));break;case"d":case"dd":case"ddd":case"dddd":n.setDate(t[l]);break;case"H":case"HH":n.setHours(t[l]);break;case"h":case"hh":n.setHours(t[l]);break;case"m":case"mm":n.setMinutes(t[l]);break;case"s":case"ss":n.setSeconds(t[l])}isNaN(n)||(a=n)}return n}},_getDateByIntelligence:function(t,a,o){var s,n=new Date(t),l=t.match(/[-/. ?]/g)||[];if(!isNaN(n))return 1===l.length&&2001===n.getFullYear()&&n.setFullYear(this._getNewDate().getFullYear()),n;var c,r=o,d=t.match(/:/g);if(d){var u,p,m,_=!1;c=d.length;var h,g=["AM","PM","am","pm"];r&&(r[0]&&(r[0]=parseInt(r[0])),r[1]&&(r[1]=parseInt(r[1])),r[2]&&!isNaN(r[2])&&(r[2]=parseInt(r[2])));for(var v=0;v<g.length;v++)if(-1<r.indexOf(g[v])){h=r.indexOf(g[v]);break}if(0===c)_=!0;else if(1===c)if(h&&-1<h){var y=r[h].toUpperCase();if(1<=r[0]&&12>=r[0]&&0<=r[1]&&59>=r[1]){var f=r[0]%12;"AM"===y&&(u=0===f?0:r[0]),"PM"===y&&(u=0===f?12:r[0]+12),p=r[1]}else _=!0}else 0<=r[0]&&23>=r[0]&&0<=r[1]&&59>=r[1]?(u=r[0],p=r[1]):_=!0;else if(2!==c)_=!0;else if(h&&-1<h){y=r[h].toUpperCase();if(1<=r[0]&&12>=r[0]&&0<=r[1]&&59>=r[1]&&0<=r[2]&&59>=r[2]){f=r[0]%12;"AM"===y&&(u=0===f?0:r[0]),"PM"===y&&(u=0===f?12:r[0]+12),p=r[1],m=r[2]}}else 0<=r[0]&&23>=r[0]&&0<=r[1]&&59>=r[1]&&0<=r[2]&&59>=r[1]?(u=r[0],p=r[1],m=r[2]):_=!0;_?s=!0:(t=this._getNewDate(),void 0!==u&&t.setHours(u),void 0!==p&&t.setMinutes(p),void 0===m?t.setSeconds(0):t.setSeconds(m))}else if(l.length){var b,C,k=t.split(l[0]);4===k[0].length?(C=parseInt(k[0]),b=parseInt(k[1])):4===k[1].length&&(b=parseInt(k[0]),C=parseInt(k[1])),void 0!==b&&void 0!==C?((t=this._getNewDate()).setFullYear(C),t.setDate(1),t.setMonth(b)):s=!0}else s=!0;if(s)throw new Error(this.invalidInput);return t},_getDate:function(t,a,o,n,l,i){return new Date(t,a,o,n,l,i)},_appendZerosToValue:function(t,a,o){return t=t.toString(),(o=(a=a||2)-t.length)?["","0","00","000","0000"][a].substring(0,o)+t:t},_replaceMatchedText:function(t){var a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],o=2<arguments.length?arguments[2]:void 0;if(t){var l;switch(o){case"d":l=t.getDate();break;case"dd":l=(10>(t=t.getDate())?"0":"")+t;break;case"ddd":l=(a.daysAbbreviated||this.daysAbbreviated)[t.getDay()];break;case"dddd":l=(a.days||this.days)[t.getDay()];break;case"M":l=t.getMonth()+1;break;case"MM":var i=t.getMonth()+1;l=(10>i?"0":"")+i;break;case"MMM":l=(a.monthsAbbreviated||this.monthsAbbreviated)[t.getMonth()];break;case"MMMM":l=(a.months||this.months)[t.getMonth()];break;case"yy":l=this._appendZerosToValue(t.getFullYear()%100);break;case"yyyy":l=this._appendZerosToValue(t.getFullYear(),4);break;case"h":l=t.getHours()%12||12;break;case"hh":l=(10>(s=t.getHours()%12||12)?"0":"")+s;break;case"H":l=t.getHours();break;case"HH":var s;l=(10>(s=t.getHours())?"0":"")+s;break;case"m":l=t.getMinutes();break;case"mm":var n;l=(10>(n=t.getMinutes())?"0":"")+n;break;case"s":l=t.getSeconds();break;case"ss":var r=t.getSeconds();l=(10>r?"0":"")+r;break;case"tt":l=12>t.getHours()?"AM":"PM";break;case"z":case"zz":case"zzz":l=t.toString().split(" ")[5]}return void 0===l?o.slice(1,o.length-1):l}},formatDate:function(t,a,o){return t&&t instanceof Date?a.replace(/dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|HH|H|hh|h|mm|m|fff|ff|f|tt|ss|s|zzz|zz|z|"[^"]*"|'[^']*'/g,this._replaceMatchedText.bind(this,t,o)):t},parsePattern:function(t){var a=/d(?:d{1,3})?|M(?:M{1,3})?|yy(?:yy)?|h(?:h)?|H(?:H)?|m(?:m)?|s(?:s)|t{2}|z(?:z{1,3})?/g,o=(t=t.replace(/(["'])(?:(?=(\\?))\2.)*?\1/g,"")).replace(a,"\0").split("\0"),n=t.match(a);return!!(o&&o.length&&n&&n.length)&&{dateSeperator:o,dateParts:n}},parseDate:function(t,a){var n,l,o={};if(t){if(t instanceof Date)return"string"==typeof a&&0>a.indexOf("s")&&t.setSeconds(0,0),{date:t,isValid:!0};if("string"==typeof t&&("string"!=typeof t||t.length)){var d,s=function(t){var a=t.slice(0,_[m].length),o=_[m].slice(0,a.length);return a.toLowerCase()===o.toLowerCase()};if(t=t,"string"==typeof a){var c=a.match(/(["'])(?:(?=(\\?))\2.)*?\1/g);c&&(d=c.map(function(t){return t.replace(/'/g,"")})),a=this.parsePattern(a)}var u,_=t.match(/[^ -/:-@\u5e74\u6708\u65e5[-`{-~\t\n\r]+/g)||[];d&&(_=_.filter(function(t){return-1===d.indexOf(t)}));var p=a.dateParts.slice();if(t=new Date,_.length===p.length)for(var m=0;m<p.length;m++)if(n=parseInt(_[m],10),u=p[m],isNaN(n)){if("MMM"===u||"MMMM"===u)("MMM"===u||"MMMM"===u)&&(l=this.monthsAbbreviated.filter(s),n=this.monthsAbbreviated.indexOf(l[0])+1),o[u]=n;else if("dddd"===u||"ddd"===u)n=_[-1<p.indexOf("d")?p.indexOf("d"):-1<p.indexOf("dd")],o[u]=n;else if("tt"===u&&("AM"===_[m]||"PM"===_[m])){var g=-1===p.indexOf("hh")?"h":"hh",h=_[p.indexOf(g)],v=parseInt(h),y="PM"===_[m]?12:0;o[g]=0==v%12?y:v+y,o[u]=h}}else{if(("yyyy"===u||"yy"===u)&&9999<n&&(_[m]="9999"),-1<u.indexOf("d")&&31<n||-1<u.indexOf("M")&&12<n||-1<u.indexOf("y")&&u.length!==_[m].length)break;o[u]=n}return Object.keys(o).length&&_.length===Object.keys(o).length?(t=this._getFormattedDate(o,t),-1===a.dateParts.indexOf("s")&&-1===a.dateParts.indexOf("ss")&&t.setSeconds(0,0),t={date:t,isValid:!0}):t={date:t,isValid:!1},t}}},getDateFromOffset:function(t,o,n,l){if(o){var i;if(0===t.indexOf("TODAY")){if(!(i=t.substring(5)))return{date:o,isValid:!0}}else{if(0!==t.indexOf("FROM_VALUE"))return{date:void 0,isValid:!1};i=t.substring(10)}var s=/([+-][0-9]+)(DAYS|MONTHS|YEARS|WEEKS)/g,r=s.exec(i),d=o.getDate(),c=o.getMonth(),_=o.getFullYear(),u=o.getHours(),p=o.getMinutes(),m=o.getSeconds();if(!r)try{return{date:this._getDateByIntelligence(t,n,l),isValid:!0}}catch(t){return{date:void 0,isValid:!1}}for(;r;){switch(r[2]||"DAYS"){case"DAYS":d+=parseInt(r[1],10);break;case"WEEKS":d+=7*parseInt(r[1],10);break;case"MONTHS":c+=parseInt(r[1],10),d=a(d,new Date(_,c+1,0).getDate());break;case"YEARS":_+=parseInt(r[1],10),d=a(d,new Date(_,c+1,0).getDate());break;case"HOURS":u+=parseInt(r[1],10);break;case"MINUTES":p+=parseInt(r[1],10);break;case"SECONDS":m+=parseInt(r[1],10)}r=s.exec(i)}return{date:o=this._getDate(_,c,d,u,p,m),isValid:!0}}},convertOffsetToValue:function(t){var o=/([+-]{1}([0-9])+$)/g.exec(t);return o?parseInt(o[0]):0},getUTCDate:function(){return new Date(Date.UTC.apply(Date,arguments))},areDatesEqual:function(t,a){if(t&&a)return t.getFullYear()===a.getFullYear()&&t.getMonth()===a.getMonth()&&t.getDate()===a.getDate()},areTimesEqual:function(t,a){if(t&&a)return t.getHours()===a.getHours()&&t.getMinutes()===a.getMinutes()&&t.getSeconds()===a.getSeconds()},isTimeGreater:function(t,a){return(t=new Date(+t)).setFullYear(a.getFullYear()),t.setMonth(a.getMonth()),t.setDate(a.getDate()),+t>+a},isGreater:function(t,a){if(t&&a)return!(t.getTime()<a.getTime())},changeTZOfDate:function(t,a){var n;return a=this.alternateTZNames[a]||a,t=new Intl.DateTimeFormat("en-US",{timeZone:a,year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric",hour12:!1}).format(t).replace(", 24:",", 00:"),(n=this.parseDate(t,"M/d/yyyy hh:mm:ss")).isValid?n.date:void 0}}}(ZPeopleComponents),function(t,n){var a=Math.abs,o=Math.ceil,l=Math.floor,i=Math.min,s=Math.pow,r=String.fromCharCode,d=Math.max,c=Math.round,_=function(o){function l(){return _classCallCheck(this,l),_possibleConstructorReturn(this,_getPrototypeOf(l).apply(this,arguments))}return _inherits(l,t.CoreComponent),_createClass(l,[{key:"_init",value:function(t,a){this._frominit=!0,["min","max","step","value","title","tabIndex"].forEach(function(o){var n=t[0][o];(n||0===n)&&(a[o]=n)}),t[0].disabled&&(a.disabled=!0),this._cacheMeasurements(),this._buildData()}},{key:"_buildData",value:function(){var a=this._opts,o=this._data;o.rangeLabels=void 0,this.vertical="vertical"===a.orientation;var n="fixed"===a.valuesType;this._tip="never"!==a.showTooltip&&!n,this._isRange="range"===a.valuesType,this._hasRangeGroups=this._isRange&&a.rangeGroups.groups.length,a.locale=a.locale||t.locale,this._ticks=a.showTicks||n,o.ticksList=[],o.labels=[],this._isFixed=n,n&&this._setFixedValues(),this._validateProperty(),this.isCE||(this.element.addClass("zh-dnone"),o.style=this.element.attr("style"),o.title=this._opts.title),o.thumbs=[this._setThumb()],this._ticks&&this._handleTicks(),this._hasRangeGroups&&this._setRangeLabels(),this._tip&&this._setTooltip(),this._setSelectedLimit()}},{key:"_getFromLocale",value:function(a,o){var n=t.localeInfo;if(n)return(n=n[this._opts.locale||t.locale][o?"currency":"numberFormat"])[a]||""}},{key:"_postEachRender",value:function(){this._reStoreRef||(this._setDim(this.vertical?"height":"width"),this._showParent(),this._storeRef.apply(this,arguments),this._hideParent())}},{key:"_setDim",value:function(t){var a=this._opts[t]||!this._useParent&&this.element[0].style[t];a&&(this.container[0].style[t]=isNaN(a)?a:a+"px")}},{key:"_storeRef",value:function(t){t=this.container,this._shadowTrack=t.find(".zslider__shadowtrack"),this._innerSlider=t.find(".zslider__track"),this._range=this._innerSlider.find(".zslider__selection"),this._setClassName(),this._setDimensions(),this.container.find(".zslider__thumb").removeAttr("style"),this._opts.disabled&&this._disable(!0,!1),this._tip&&this._handleTip(),this._setHandlePosition(),this._ticks&&this._setTicksPosition(),this._hasRangeGroups&&this._setRangeLabelsPosition(),this._setCurrentValues(),this._handleSelectedLimit()}},{key:"_setClassName",value:function(){var t=this._opts,a="zslider "+(t.className||t.zclassName||"");t.rtl&&(a+=" zh-rtl"),t.disabled&&(a+=" is-disabled"),this.vertical&&(a+=" zslider--vertical"),this.container.attr("class",a)}},{key:"_setThumb",value:function(){var i,a=this._opts,o="",n="",l=a.thumbIconClassName;if(a.disabled?n=" is-disabled":i=a.tabIndex||0,a.thumbSVGIconId)t._getIconInfo(l,a.thumbSVGIconId);else if(l)n+=l;else if("pointer"===a.thumbIconStyle){n+=" zslider__pointerthumb ";var s=this._getRTLBasedDir(this._getCorrectDir(a.ticks.position));(this._opts.rtl?/^(right|top)$/:/^(left|top)$/).test(s)&&(n+=" zh-inverted");var r=21,d=32;/^(right|left)$/.test(s)&&(r=32,d=21),o='<svg class="zslider__pointerthumbsvg" viewBox="0 0 '+r+" "+d+'" width="'+r+'" height="'+d+'">'+this["_pointer"+s[0].toUpperCase()+s.substr(1)]()+"</svg>"}else n+=" zslider__circlethumb";return{iconClass:n,tabIndex:i,iconHTML:o}}},{key:"_getCorrectDir",value:function(t){return t="left"===t||"top"===t?this.vertical?"left":"top":this.vertical?"right":"bottom"}},{key:"_setDimensions",value:function(){this._handles=this.container.find(".zslider__thumb").toArray();var t="width",a="outerWidth",o=this._getRTLBasedDir("left"),l="outerHeight",i="top";this.vertical&&(t="height",a="outerHeight",o="bottom",l="outerWidth",i="left"),this.innerDim=t,this.outerDim=a,this.marginDir=o,this.oppOuterDim=l,this.oppMargin=i;var s=n(this._handles[0]),r=this._innerSlider;this.sliderDim={height:r.height(),width:r.width(),outerHeight:r.outerHeight(),outerWidth:r.outerWidth()},this.handleDim={outerHeight:s.outerHeight(),outerWidth:s.outerWidth()}}},{key:"_setHandlePosition",value:function(){var t=this._innerSlider.position(),a=parseInt(t[this.oppMargin]),o=this.sliderDim[this.oppOuterDim]/2,l=this.handleDim[this.oppOuterDim]/2,i=this._shadowTrack[this.oppOuterDim]()/2,s=-this.handleDim[this.outerDim]/2;n(this._handles).css(this.oppMargin,this._checkPxToRem(a-(l-o))).css("margin-"+this.marginDir,this._checkPxToRem(s)),this._shadowTrack.css(this.oppMargin,this._checkPxToRem(a-(i-o))),this._tip&&this._updateTip()}},{key:"_setCurrentValues",value:function(){this._setValueByFindingInner(this._opts.value),this._updateLayout()}},{key:"_setSelectedLimit",value:function(){var t=this._opts,a=[];this._data.selectedTrack=!1,t.minValueAllowed!==t.min&&(this._data.selectedTrack=!0),t.maxValueAllowed!==t.max&&a.push("1"),this._data.notAllowedRanges=a}},{key:"_handleSelectedLimit",value:function(){var t=this._opts;this.container.find(".zslider__tickcontainer .is-disabled, .zslider__scale .is-disabled").removeClass("is-disabled"),this._data.selectedTrack&&this._setLimitPosition(t.min,t.minValueAllowed,"zslider__selected"),t.maxValueAllowed!==t.max&&this._setLimitPosition(t.maxValueAllowed,t.max,"zslider__notallowedrange")}},{key:"_setLimitPosition",value:function(t,a,o){var l=this._opts,s=parseFloat(t)===l.min?0:this._getPercent(t),r=parseFloat(a)===l.max?100:this._getPercent(a),d=n(".zslider__track ."+o,this.container),c=d.attr("style")+";";d.attr("style",c+this.marginDir+":"+s+"%;"+this.innerDim+":"+(r-s)+"%");for(var _=this.container.find(".zslider__tick, .zslider__label"),u=0;u<_.length;u++){var p=_[u],m=+p.getAttribute("data-val");m<t||m>a||m===t&&t!==l.min||m===a&&a!==l.max||n(p).addClass("is-disabled")}}},{key:"_bindEvents",value:function(){var t="."+this.name;this.container.on("mousedown"+t+" touchstart"+t,".zslider__shadowtrack,.zslider__track,.zslider__ticks,.zslider__thumb",this._onMouseDown.bind(this)).on("keydown"+t,".zslider__thumb",this._onSlide.bind(this)).on("keyup"+t,".zslider__thumb",this._onSlideEnd.bind(this)).on("mouseup"+t,this._onSlideEnd.bind(this)).on("mouseenter"+t,".zslider__thumb",this._onThumbEnter.bind(this)).on("mouseleave"+t,".zslider__thumb",this._onThumbLeave.bind(this)).on("focusin"+t,this._onFocus.bind(this)).on("focusout"+t,this._onFocusout.bind(this)),this._setCurrentValues(),this._frominit=!1,this._trigger("init")}},{key:"_onFocus",value:function(t){this.container.addClass("has-focus"+(this._mouseActive?"":" on-tabfocus")),this._trigger("focus",t)}},{key:"_onFocusout",value:function(t){var a=this;clearTimeout(this.blurtimer),this.blurtimer=setTimeout(function(){n(a._handles).is(":focus")||n(document.activeElement).closest(".zslider").length||(a.container.removeClass("is-active has-focus on-tabfocus"),a._activeHandle&&a._activeHandle.removeClass("is-active"),a._mouseActive=a._animate=!1,a._trigger("blur",t))},1)}},{key:"_onThumbEnter",value:function(t){this._opts.disabled&&(n(t.target).closest(".zslider__thumb").addClass("on-mouseover"),this._tip&&this._showTip(t))}},{key:"_onThumbLeave",value:function(t){this._opts.disabled&&(n(t.target).closest(".zslider__thumb").removeClass("on-mouseover"),!this._tip||this._dragStarted||this._dragSelectionStarted||this._hideTip())}},{key:"_keyPress",value:function(a){var o=a.keyCode,n=t.keyCode,l=this._opts,i=l.value,s=this._opts.rtl&&!this.vertical;if(-1<[n.RIGHT,n.UP,n.PAGE_UP].indexOf(o))i=this._increase(!s);else if(-1<[n.LEFT,n.DOWN,n.PAGE_DOWN].indexOf(o))i=this._increase(s);else if(o===n.HOME)i=l.minValueAllowed;else{if(o!==n.END)return;i=l.maxValueAllowed}return this._tip&&this._showTip(a),a.preventDefault(),i}},{key:"_getActiveHandle",value:function(){return this._handles[0]}},{key:"_onMouseDown",value:function(t){if(t.type="mousedown",!t.button&&!this._opts.disabled){this._mouseActive=!0,this.container.removeClass("on-tabfocus").addClass("is-active");var a=this._activeHandle;a&&a.removeClass("is-active"),(a=n(this._getActiveHandle(t))).addClass("is-active"),a.length&&a[0][this._opts.blurOnMouseRelease?"blur":"focus"](),this._activeHandle=a,this.container.addClass("is-active"),n(t.target).closest(".zslider__thumb").length||this._dragSelectionStarted||this._onSlide(t),this._bindDocumentEvent(t)}}},{key:"_bindDocumentEvent",value:function(a){var o=this,n="."+this.name;t.$document.off(n).on("mousemove"+n+" touchmove"+n,function(t){var a="touchmove"===t.type;t.type="mousemove",o._onSlide(t,a)}).on("mouseup"+n+" touchend"+n+" touchcancel"+n,function(t){t.type="mouseup",o._onSlideEnd(t)}),a.preventDefault()}},{key:"_onSlide",value:function(t,a){if(!this._opts.disabled){var o=this._getValueFromEvent(t);"keydown"!==t.type&&this._tip&&this._showTip(t),this._isNotNull(o)&&(this._animate="mousemove"!==t.type,!this._dragStarted&&(this._storeInitialValue(),this._dragStarted=!0,this._trigger("slidestart",t)),this._setValue(o,t),this._trigger("slide",t),!a&&t.preventDefault())}}},{key:"_onSlideEnd",value:function(a){this._opts.disabled||(t.$document.off("."+this.name),this._dragStarted&&(this._trigger("slideend",a),this._isValueChanged()&&(this._animate=!0,this._updateLayout(a))),this._tip&&(!this._activeHandle||!this._activeHandle.hasClass("on-mouseover"))&&this._hideTip(),this.container.removeClass("is-active"),this._animate=this._mouseActive=this._dragStarted=!1)}},{key:"_storeInitialValue",value:function(){this._startValue=this.getValue()}},{key:"_isValueChanged",value:function(){return this._startValue!==this.getValue()}},{key:"_getTipText",value:function(){var t=this._opts;return this._getLabel(t.tooltip.text,t.value,t.tooltip.isHTMLEncoded)}},{key:"_getLabel",value:function(a,o,n){return this._isRange&&this._formatLabel&&(o=this._formatLabel(o)),"string"==typeof a&&""!==a.trim()&&(o=a.replace(/#value#/gi,o)),n?o:t.encodeHTML(o)}},{key:"_getValueFromEvent",value:function(t){var a=n(t.target);if("mousedown"===t.type&&a.hasClass("zslider__label"))return a.hasClass("is-disabled")?void 0:this._getInnerVal(a.attr("data-val"));if("keydown"===t.type)return this._keyPress(t);var d,c,_,o=this.sliderDim[this.innerDim],l=this.handleDim[this.outerDim],i=o-l,s=this._innerSlider.offset(),r=this._opts;"function"==typeof r.getCustomValue&&(_=r.getCustomValue,l=0);var p=(t.changedTouches||t.originalEvent.changedTouches||[])[0]||t;if(this.vertical?c=1-(d=p.pageY-(s.top+l/2))/i:(c=(d=p.pageX-(s.left+l/2))/i,r.rtl&&(c=1-c)),0>c?c=0:1<c&&(c=1),_)return _(100*c,r.min,r.max,this._handles.indexOf(this._activeHandle[0]));var m=this._trimDecimal(r.min,r.step,r.min+c*(r.max-r.min));return r.snapToTicks&&this._dragStarted&&this._ticksLayout&&(m=this._trimForSnap(m,d+l/2)),m}},{key:"_trimValue",value:function(t){var n=this._opts,o=n.step;if(!this._skipTrimValue){var l=(parseFloat(t)-n.min)%o;if(0!=l){var i=parseFloat(t)-l;2*a(l)>o&&(i+=0<l?o:-o),t=i}}return this._trimDecimal(n.min,o,t)}},{key:"_trimDecimal",value:function(t,a,o){var n=(t+"").split(".")[1]||"",l=(a+"").split(".")[1]||"";return+(+o).toFixed(d(n.length,l.length))}},{key:"_setValue",value:function(t,a){var o=this._opts;o.value=this._getActualVal(this._getCorrectedValue(t,o.minValueAllowed,o.maxValueAllowed)),this._prevValue!==o.value&&this._updateLayout(a),this._prevValue=o.value}},{key:"_getCorrectedValue",value:function(t,a,n){t=+t;var l=this._opts;if("fixed"===l.valuesType?(a=l.min,n=l.max):(a<l.min&&(a=l.min),n>l.max&&(n=l.max)),"default"===l.stepBehavior&&(t<=a||t>=n||isNaN(t)))t<a||isNaN(t)?t=a:t>n&&(t=n);else{if((t=this._trimValue(t))<a||isNaN(t)){var o=(a-l.min)%l.step||l.step;t=a+l.step-o}else t>n&&(t=n-(n-l.min)%l.step);t=this._trimDecimal(l.min,l.step,t)}return t}},{key:"_getInnerVal",value:function(t){return this._isFixed?this._values.indexOf(t+""):t}},{key:"_getActualVal",value:function(t){return this._isFixed?this._values[t]:t}},{key:"_updateLayout",value:function(t){var a=this,l={},i=this._opts,o=this._getPercent(i.value);l[this.marginDir]=o+"%";var s={},r=0,d=o,c=i.selectionStartValue,_=parseFloat(c);!isNaN(_)&&_>i.min&&_<=i.max&&(r=_===i.max?100:this._getPercent(c),c>=i.value&&(d=r)),s[this.marginDir]=r+"%",s[this.innerDim]=d-r+"%";var u=this._getInnerVal(i.value);this._handleAnimation(n(this._handles[0]),l,u,i.value),this._handleAnimation(this._range,s,!1,!1,function(){a._animate=!1,a._frominit||t&&/(keydown|mousedown|mousemove)/.test(t.type)||a._trigger("change",t)}),this._tip&&this._updateTip(l)}},{key:"_handleAnimation",value:function(t,a,o,n,l){!1!==o&&t.attr({"data-val":o,"aria-valuenow":o,"aria-valuetext":n}),this.container[this._animate?"addClass":"removeClass"]("zslider--transition"),t.css(a),l&&l()}},{key:"_getPercent",value:function(t){var a=this._opts,o=a.getCustomPosition;if(t=this._getInnerVal(t),o)return o(t,a.min,a.max);var n=(parseFloat(t)-a.min)/(a.max-a.min),l=this.sliderDim[this.innerDim],i=this.handleDim[this.outerDim];return n=100*(n*(1-i/l)+.5*i/l)}},{key:"_increase",value:function(){var t=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],a=1<arguments.length?arguments[1]:void 0,o=2<arguments.length?arguments[2]:void 0,n=this._opts,l=(o=o||n.step)-((a=this._getInnerVal(a||n.value))-n.min)%o;return t?a+l:a-l}},{key:"_trigger",value:function(t,a,o){return(o=o||{}).slider=this.getElement(),o.value=this.getValue(),this._dispatchEvent(t,a,o,void 0,!!a)}},{key:"_restoreMeasurements",value:function(){var t=this;this._MEASUREMENTS.forEach(function(a){t._opts[a]=t.actualProps[a]})}},{key:"_parseArray",value:function(t){if("string"==typeof t)try{t=JSON.parse(t)}catch(t){}return t}},{key:"increase",value:function(t){this._setValue(this._increase(),t)}},{key:"decrease",value:function(t){this._setValue(this._increase(!1),t)}},{key:"_setValueByFindingInner",value:function(t,a){this._isNotNull(t)&&this._setValue(this._getInnerVal(t),a)}},{key:"setValue",value:function(){this._skipTrimValue=!0,this._setValueByFindingInner.apply(this,arguments),this._skipTrimValue=!1}},{key:"getValue",value:function(){return this._opts.value}},{key:"_validateProperty",value:function(){var t=this._opts,a=t.step,o=t.min,n=t.max,l=t.minValueAllowed,i=t.maxValueAllowed,s=t.value;"fixed"===t.valuesType?(a=1,o=l=0,n=i=t.values.length-1,0>this._getInnerVal(s)&&(s=this._getInnerVal(0))):(a=parseFloat(a),o=parseFloat(o),n=parseFloat(n),s=parseFloat(s),l=parseFloat(l),i=parseFloat(i),(isNaN(a)||0>=a)&&(a=1),o=isNaN(o)?0:o,(n=isNaN(n)?100:n)<=o&&(n=o+a),n-o<a&&(a=n-o),(isNaN(l)||l<o||n-l<a)&&(l=o),(isNaN(i)||i>n||i<l||i-l<a)&&(i=n),isNaN(s)||s<l?s=l:s>i&&(s=i)),t.step=a,t.min=o,t.max=n,t.minValueAllowed=l,t.maxValueAllowed=i,t.value=s}},{key:"_cacheMeasurements",value:function(){var t=this;this.actualProps={},this._MEASUREMENTS.forEach(function(a){t.actualProps[a]=t._opts[a]})}},{key:"_showParent",value:function(){if(this._isInDOM(this.container[0])&&this.container.is(":hidden")){var t=1;this._hiddenParents=[];for(var a=this.container;t&&a&&!(a[0]instanceof DocumentFragment||a.is("body"));)"none"===a.css("display")&&(this._hiddenParents.push(a),a.addClass("zslider__parent"),t=a.is(":hidden")),a=a.parent()}}},{key:"_hideParent",value:function(){this._hiddenParents&&(this._hiddenParents.forEach(function(t){t.removeClass("zslider__parent")}),this._hiddenParents=[])}},{key:"refresh",value:function(){this._reInit=!0,this._renderAttrChange()}},{key:"_setRangeLabels",value:function(){var n,t=this._opts,a=[],o=[];if(Array.isArray(n=this._parseArray(t.rangeGroups.groups))&&n.length){n.forEach(function(t){a.push({label:t.label,className:t.className||"",CSSStyle:t.background?"background:"+t.background:""}),o.push({label:t.label})}),this.vertical&&(a=a.reverse(),o=o.reverse());var l=this._getCorrectDir(t.rangeGroups.labelPosition);this._data.showRangeLabelsInBottom=/^(bottom|right)$/.test(l)}this._data.rangeLabels=o,this._data.ranges=a}},{key:"_setRangeLabelsPosition",value:function(){var t=this,a=0,l=this._opts;if(this._data.ranges.length){var o=this.container.find(".zslider__rangegroup"),s=this.container.find(".zslider__rangelabel"),r=function(a){if(a||0===a){if(/%$/.test(a)&&(a=l.min+(l.max-l.min)*parseFloat(a)/100),isNaN(a)||a<l.min||a>l.max)return 0;if(+a!==l.max)return t._getPercent(+a)}};l.rangeGroups.groups.forEach(function(d,c){var i=parseFloat(d.from),_=parseFloat(d.to),u=0;i!==l.min&&(u=r(i)),isNaN(u)||(a=u);var p=100;if(_!==l.max&&(p=r(_)),!isNaN(p)){var m=/(margin-left|margin-bottom|bottom|width|height|left)[.%:\w\d\s]+;/gi,g=o[c].getAttribute("style")||0;g&&(g=g.replace(m,""));var h=t.marginDir+":"+a+"%;"+t.innerDim+":"+(p-a)+"%;";o[c].setAttribute("style",g+";"+h);var v=s[c];if((g=v.getAttribute("style")||0)&&(g=g.replace(m,"")),v.setAttribute("style",g+";"+h),t.vertical){var y=n(v).find(".zslider__text");(g=y.attr("style")||"").replace(m,""),y.attr("style",g+";max-"+t.innerDim+":"+t.sliderDim[t.outerDim]*(p-a)/100+"px")}a=p}})}}},{key:"_pointerLeft",value:function(){return'<path class="pointerthumb__border" d="M12.8,16.5l-7-6.5l7-6.5l10.2,0c0.9,0,1.6,0.7,1.6,1.6l0,9.9c0,0.8-0.7,1.5-1.6,1.5L12.8,16.5z"></path> <path class="pointerthumb__innerborder" d="M13.6,15.5l-6-5.5l6-5.5l8.7,0c0.7,0,1.3,0.6,1.3,1.3l0,8.3c0,0.8-0.6,1.4-1.3,1.4L13.6,15.5z"></path> <path class="pointerthumb" d="M14.1,14.5L9.2,10l4.9-4.5l7.4,0c0.6,0,1.1,0.5,1.1,1.1l0,6.8c0,0.6-0.5,1.1-1.1,1.1L14.1,14.5z"></path>'}},{key:"_pointerRight",value:function(){return'<path class="pointerthumb__border" d="M15.2,3.5l7,6.5l-7,6.5L5,16.5c-0.9,0-1.6-0.7-1.6-1.6V5c0-0.8,0.7-1.5,1.6-1.5L15.2,3.5z"></path> <path class="pointerthumb__innerborder" d="M14.4,4.5l6,5.5l-6,5.5H5.7c-0.7,0-1.3-0.6-1.3-1.3l0-8.3c0-0.8,0.6-1.4,1.3-1.4H14.4z"></path> <path class="pointerthumb" d="M13.9,5.5l4.9,4.5l-4.9,4.5H6.5c-0.6,0-1.1-0.5-1.1-1.1l0-6.8c0-0.6,0.5-1.1,1.1-1.1H13.9z"></path>'}},{key:"_pointerBottom",value:function(){return'<path class="pointerthumb__border" d="M16.5,15.2l-6.5,7l-6.5-7V5c0-0.9,0.7-1.6,1.6-1.6H15c0.8,0,1.5,0.7,1.5,1.6V15.2z"></path> <path class="pointerthumb__innerborder" d="M15.5,14.4l-5.5,6l-5.5-6V5.7c0-0.7,0.6-1.3,1.3-1.3h8.3c0.8,0,1.4,0.6,1.4,1.3V14.4z"></path> <path class="pointerthumb" d="M14.5,13.9L10,18.8l-4.5-4.9V6.5c0-0.6,0.5-1.1,1.1-1.1h6.8c0.6,0,1.1,0.5,1.1,1.1V13.9z"></path>'}},{key:"_pointerTop",value:function(){return'<path class="pointerthumb__border" d="M3.5,12.8l6.5-7l6.5,7V23c0,0.9-0.7,1.6-1.6,1.6H5c-0.8,0-1.5-0.7-1.5-1.6V12.8z"></path> <path class="pointerthumb__innerborder" d="M4.5,13.6l5.5-6l5.5,6v8.7c0,0.7-0.6,1.3-1.3,1.3H5.9c-0.8,0-1.4-0.6-1.4-1.3V13.6z"></path> <path class="pointerthumb" d="M5.5,14.1L10,9.2l4.5,4.9v7.4c0,0.6-0.5,1.1-1.1,1.1H6.6c-0.6,0-1.1-0.5-1.1-1.1V14.1z"></path>'}},{key:"_handleTicks",value:function(){var t=this._opts;this._data.labels=this._data.ticksList=[],this._setTicks(),t.ticks.showLabels&&(this._setLabels(),this._ticksLabel=!0);var a=this._getCorrectDir(t.ticks.position);this._data.showTicksInTop=/^(left|top)$/.test(a)}},{key:"_setTicks",value:function(){var d,t=this._opts,a=[],o=t.ticks.splitBy,n=t.ticks.step,l=t.min,s=t.max,r=[];if("fixed"===t.valuesType&&(n=1,o="step"),"step"===o&&0<n){n=parseFloat(n);for(var c=l;c<=s;c+=n)r.push({value:this._getActualVal(this._trimDecimal(l,n,c))});t.ticks.step=n}else if("random"===o&&Array.isArray(d=this._parseArray(t.ticks.randomValues)))d.forEach(function(t){t=parseFloat(t),!isNaN(t)&&t>=l&&t<=s&&-1===a.indexOf(t)&&a.push(t)}),(a=a.sort(function(t,a){return+t-+a})).forEach(function(t){r.push({value:t})});else{var _=parseInt(t.ticks.count);t.ticks.count=_,n=(s-l)/((_=1<_?_:4)-1),r.push({value:l});for(var u=1;u<_-1;u++)r.push({value:this._trimDecimal(l,n,u*n+l)});r.push({value:s})}this._data.ticksList=r}},{key:"_setTicksPosition",value:function(){var t=this,a=this.container.find(".zslider__tickcontainer"),o=this.vertical?"offsetHeight":"offsetWidth";this._data.ticksList&&this._data.ticksList.forEach(function(l,s){n(a[s]).css(t.marginDir,"calc(".concat(t._getPercent(l.value)+"%"," - ").concat(t._checkPxToRem(n(a[s])[0][o]/2),")"))}),this._ticksLayout=a}},{key:"_trimForSnap",value:function(t,o){var s,r,d,n=this._data.ticksList||[],l=n.length;if(l){t=parseFloat(t);var c=n[0].value,_=a(c-t);for(d=1;d<l;d++)s=n[d].value,(r=a(s-t))<_&&(c=s,_=r);if(0==c%this._opts.step&&c!==t){var p=this._ticksLayout.find('[data-val="'+c+'"]').position()[this.vertical?"top":"left"];7>a(p-o)&&(t=this._getActualVal(c))}}return t}},{key:"_setFixedValues",value:function(){var t=this;this._values=[],this._labels=[],this._opts.values.forEach(function(a){var o=a,n=a;"object"===_typeof(a)&&(o=a.value,n=a.label||o),(o||0===o)&&(t._values.push(o+""),t._labels.push(n))})}},{key:"_formatLabel",value:function(t){var a=this;if(t||0===t){var o=this._opts.valueDisplayFormat,n=parseInt(o.decimalPlaces),l=this._getFromLocale("decimalSeparator");t=t.toString(),0<=n&&20>=n&&!isNaN(n)&&(t=(+t).toFixed(n));var i=t.split(".");if(o.thousandSeparator){var s=this._getFromLocale("thousandSeparator");i[0]=i[0].replace(/(\d{1,3}(?=(?:\d\d\d)+(?!\d)))/g,"$1"+(s||","))}var r=t=i.join(l||".");o.prefix?r=o.prefix+r:"currency"===o.type&&(r="#symbol#"+r),(r+=o.suffix||"")!==t&&(t=r.replace(/#value#/gi,t),"currency"===o.type&&["code","symbol","name"].forEach(function(o){var n=new RegExp("#"+o+"#","gi");if(n.test(r)){var l=a._getFromLocale(o,!0);l&&(t=t.replace(n,l))}}))}return t}},{key:"_setLabelsPosition",value:function(){var t=this._data.labels||"",o=this._ticksLayout.children();if(t.length&&o.length){var l=this.container.find(".zslider__tickcontainer .zslider__label"),s=l.length;if(this.vertical)for(var r=0;r<s;r++)l[r].style.bottom="calc(".concat(o[r].style.bottom," - ").concat(l[r].offsetHeight/2,"px)");else{l.removeAttr("style");for(var c=this.sliderDim[this.innerDim],_=parseInt(n(o[0]).css(this.marginDir))+60,u=0;u<s;u++){var p=n(o[u]),m=n(o[u+1]),g=a((m.length?parseInt(m.css(this.marginDir)):c+60)-parseInt(p.css(this.marginDir))),h=n(l[u])[this.outerDim]()+1,v=n(l[u+1])[this.outerDim]()+1;m.length&&v<g&&(g=a(g+(g-v)));var y=i(_,g,h);if(y){_=g+(g-y);var f=this._getPercent(p.attr("data-val"))+"%";f="calc(".concat(f," - ").concat(this._checkPxToRem(y/2),")"),l[u].style[this.innerDim]=this._checkPxToRem(y),l[u].style[this.marginDir]=f}}}for(var C,k=this._ticksLayout.find(".zslider__tickcontainer .zslider__label"),b=0;b<k.length;b++)(C=k[b]).offsetWidth<C.scrollWidth&&C.setAttribute("title",C.textContent)}}},{key:"_setLabels",value:function(){var a=this,n=this._opts,o=this._data.ticksList;if(o&&o.length){var l="fixed"===n.valuesType?this._labels:this._parseArray(n.ticks.customLabels),s=[],r=this._parseArray(n.ticks.showLabelsFor),d=!Array.isArray(r)||!r.length,c=0,_=o.length;if(Array.isArray(l)&&l.length){for(var m,u=l.length,p=0;p<_&&c!==u;p++)if(m=o[p].value,d||-1<r.indexOf(m)){var g=l[c++];s.push({value:m,label:n.ticks.isLabelHTMLEncoded?g:t.encodeHTML(g)})}}else o.forEach(function(t){var o=t.value;(d||-1<r.indexOf(o))&&s.push({value:o,label:a._getLabel(n.ticks.labelPattern,a._translateEToA(o),n.ticks.isLabelHTMLEncoded)})});this._data.labels=s}}},{key:"_getTipPosition",value:function(t){var a={},o=this._tipDir,n=/^(top|left)$/.test(o)?-1:1,l="outerHeight",i="outerWidth",s="top";"vertical"===this._opts.orientation&&(l="outerWidth",i="outerHeight",s="left");var r=this.sliderDim[l],d=this._tooltip.find(".ztooltip__pointer"),c=d.length?d[l]():0,_=this.handleDim[l],u=(r>_?0:(_-r)/2)+c+0;return u+=o===s?this._tooltip[l]():r,a[s]=this._checkPxToRem(this._innerSlider.position()[s]+u*n),"at-cursor"!==o&&(a["margin-"+this.marginDir]=this._checkPxToRem(-this._tooltip[i]()/2),a[this.marginDir]=t?t[this.marginDir]:this._handles[0].style[this.marginDir]),a}},{key:"_setTooltip",value:function(){var t=this._opts;if("fixed"!==t.valuesType&&"never"!==t.showTooltip){var a=t.tooltip.position,o="at-cursor"!==a;"at-cursor"===a&&"onslide"===t.showTooltip?(t.tooltip.displayType="box",o=!1):a=this._getRTLBasedDir(this._getCorrectDir(a)),this._data.tooltip={callout:o,class:{left:"ztooltip--left",right:"ztooltip--right",top:"ztooltip--top",bottom:"ztooltip--bottom","at-cursor":"ztooltip--bottom"}[a]||"",pointerClass:{left:"zh-right",right:"zh-left",top:"zh-bottom",bottom:"zh-top","at-cursor":"zh-top"}[a]||""},this._tipDir=a}else this._data.tooltip=this._tooltip=void 0}},{key:"_handleTip",value:function(){if(this._tip){if(this._tooltip=this.container.find(".ztooltip"),"callout"===this._opts.tooltip.displayType){var t=this._tooltip.find(".ztooltip__pointer"),a={};a[this.marginDir]="calc(50% - "+this._checkPxToRem(t[this.outerDim]()/2),this.vertical&&(a.top="auto"),t.css(a)}"always"===this._opts.showTooltip?this._updateTip():this._hideTip()}}},{key:"_showTip",value:function(t){this._tip&&(this._tooltip[0].style.display="","at-cursor"===this._tipDir&&t&&this._setTipAtCursor(t))}},{key:"_hideTip",value:function(){this._tip&&"always"!==this._opts.showTooltip&&this._tooltip.hide()}},{key:"_updateTip",value:function(t){!this._opts.disabled&&this._tip&&(this._tooltip.find(".ztooltip__content").text(this._getTipText()),this._handleAnimation(this._tooltip,this._getTipPosition(t)))}},{key:"_resetTip",value:function(){this._setTooltip(),this._reStoreRef=!1,this._render(),this._tooltip&&this._tooltip.removeAttr("style"),this._reStoreRef=!0,this._tip&&(this._handleTip(),this._updateTip())}},{key:"_setTipAtCursor",value:function(t){var a="left",o="pageX",n="outerWidth";this.vertical&&(a="top",o="pageY",n="outerHeight");var l=d(i(t[o]-this.container.offset()[a],this.sliderDim[n]),0);this._tooltip[0].style[a]=this._checkPxToRem(l)}},{key:"_disable",value:function(){var t=this,a=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],o=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];this._opts.disabled=a,this._handles.forEach(function(o){_get(_getPrototypeOf(l.prototype),"_disable",t).call(t,a,n(o))}),_get(_getPrototypeOf(l.prototype),"_disable",this).call(this,a);var i=a?null:this._opts.tabIndex||0;this._tip&&!a&&o&&this._resetTip(),n(this._handles).attr("tabIndex",i)}},{key:"_setAttribute",value:function(t,a){var l=this._opts,o=!1;"min"===t||"max"===t||"minValueAllowed"===t||"maxValueAllowed"===t||"step"===t?(this._restoreMeasurements(),l[t]=a,this._cacheMeasurements(),this._validateProperty(),o=!0):"selectionStartValue"===t?(l[t]=a,this._updateLayout()):"value"===t?this.setValue(a):"valuesType"===t?(l[t]=a,"range"===a?l.ticksStep=this.actualProps.ticksStep:this.actualProps.ticksStep=l.ticksStep,o=!0):"values"===t?Array.isArray(a)&&(l[t]=a,o=!0):"showTooltip"===t?(l[t]=a,this._tip="never"!==a,this._resetTip()):"tooltip"===t?this._handleObjUpdate(t,a)&&this._resetTip():"rangeGroups"===t||"ticks"===t||"valueDisplayFormat"===t?(this._reStoreRef=!1,o=this._handleObjUpdate(t,a)):"animation"===t?l[t]=a:("rtl"===t||"orientation"===t||"showTicks"===t||"locale"===t||"thumbIconStyle"===t||"thumbSVGIconId"===t||"thumbIconClassName"===t)&&(this._reStoreRef=!1,l[t]=a,"width"===t?this.container.width(a):"orientation"==t&&(l[t]=a,n(".ztooltip, .ztooltip__pointer, .zslider__tickcontainer .zslider__label, .zslider__selected, .zslider__notallowedrange, .zslider__tickcontainer",this.container).removeAttr("style"),this._range.removeAttr("style"),n(this._handles).removeAttr("style"),this._shadowTrack.css({left:"auto",top:"auto"})),o=!0),o&&this._reRender()}},{key:"_reRender",value:function(){this._values=this._labels=void 0,this._reInit=!0}},{key:"_handleObjUpdate",value:function(t,a){var n,o=this;return Object.keys(a).forEach(function(l){o._opts[t][l]=a[l],n=!0}),n}},{key:"name",get:function(){return"zslider"}},{key:"attrs",get:function(){return{orientation:"horizontal",locale:null,thumbIconStyle:"circle",thumbIconClass:null,thumbSVGIconId:null,min:0,max:100,step:1,valuesType:"range",value:0,minValueAllowed:null,maxValueAllowed:null,values:[],showTooltip:"never",showTicks:!1,snapToTicks:!0,stepBehavior:"w3",selectionStartValue:null,blurOnMouseRelease:!1,disabled:!1}}},{key:"props",get:function(){return{thumbIconClassName:null,tooltip:{position:"top",displayType:"callout",text:"#value#",isHTMLEncoded:!1},ticks:{splitBy:"count",count:4,step:null,randomValues:null,position:"bottom",showLabels:!0,showLabelsFor:null,labelPattern:"#value#",customLabels:null,isLabelHTMLEncoded:!1},valueDisplayFormat:{type:"number",currencyCode:null,prefix:null,suffix:null,decimalPlaces:null,thousandSeparator:!1},rangeGroups:{groups:[],isLabelHTMLEncoded:!1,labelPosition:"top"}}}},{key:"EVENTS",get:function(){return["init","focus","blur","change","slidestart","slide","slideend"]}},{key:"_MEASUREMENTS",get:function(){return["minValueAllowed","maxValueAllowed"]}}]),l}();t.registerComponent("ZSlider",_),function(t){var a=ZPeopleComponents.zslider.Templates;a.container=function(t){return ZT.html(zc0tO10(),t.children&&a.children(t))},a.children=function(t){return ZT.html(zc0tO11(),t.shadowCSSStyle,t.rangeLabels&&a.rangeLabels(t),t.showTicksInTop?"zslider__track--bottom":"",t.ranges&&t.ranges.map(function(t){return ZT.html(zc0tO12(),t.className,t.CSSStyle,t.text)}),t.selectionPosition,t.selectedTrack&&ZT.html(zc0tO13()),t.notAllowedRanges.map(function(t){return ZT.html(zc0tO14(),t)}),t.ticksList&&a.ticks(t),t.thumbs.map(function(a){return ZT.html(zc0tO15(),a.iconClass,t.disabled,t.orientation,t.min,t.min,a.tabIndex,t.min,t.min,t.min,ZT.customHTML(a.iconHTML))}),t.tooltip&&a.tooltip(t.tooltip))},a.rangeLabels=function(t){return ZT.html(zc0tO16(),t.showRangeLabelsInBottom?"zslider__rangelabels--bottom":"",t.rangeLabels.map(function(t){return ZT.html(zc0tO17(),t.label)}))},a.ticks=function(t){return ZT.html(zc0tO18(),t.showTicksInTop?"zslider__ticks--top":"",t.ticksList.map(function(a,o){return ZT.html(zc0tO19(),a.value,t.labels.length&&ZT.html(zc0tO20(),t.labels[o].value,t.labels[o].label))}))},a.tooltip=function(t){return ZT.html(zc0tO21(),t.class,t.callout&&ZT.html(zc0tO22(),t.pointerClass))}}();var u=function(o){function l(){return _classCallCheck(this,l),_possibleConstructorReturn(this,_getPrototypeOf(l).apply(this,arguments))}return _inherits(l,t.CoreComponent),_createClass(l,[{key:"_create",value:function(t,a){t.addClass("zh-draggable"),this._handle=a.handle?t.find(a.handle):t,this._handle.addClass("zdraggable "+(a.disabled?"is-disabled":"")),this._bindEvents(),this._prevCursor=this._handle.css("cursor"),this._setCursor(),a.disabled&&this._disable()}},{key:"_setCursor",value:function(t){this._handle.css("cursor",t?this._prevCursor:this._opts.cursor)}},{key:"_bindEvents",value:function(){this._addEvents({mouseDown:"mousedown",docMouseUp:"mouseup contextmenu"},this._handle)}},{key:"_mouseDownHandler",value:function(a){var o=this,l=this._opts;if(!n(a.target).closest(l.ignoreAsHandle).length&&!l.disabled){var i=a.pageX,s=a.pageY;this._delay=window.setTimeout(function(){i===a.pageX&&s===a.pageY&&(o._md=!0,o._mx=a.pageX,o._my=a.pageY,o._scrollPar=o._getScrollPar(o.element),o._scrollOff=o._scrollPar[0]===document?void 0:o._scrollPar.offset(),o._prevPos=o.element["parent"===l.region?"position":"offset"](),o._addEvents({drag:"mousemove",docKeydown:"keydown",docMouseUp:"mouseup contextmenu"},t.$document)),clearTimeout(o._delay),o._delay=void 0},l.dragStartDelay)}}},{key:"_dragHandler",value:function(o){var l=this._dragEle||this.element,i=this._opts;if(this._md&&!i.disabled){if(!this._stDispatched){if(i.showGhostOnDrag&&!this._dragEle){var s=l,r=s[0].parentNode;this._dragEle=l=n(l[0].cloneNode(!0)),r.appendChild(l[0]),l.css("position","absolute");var c=s["parent"===i.region?"position":"offset"]();l.css({top:c.top,left:c.left})}l.addClass(i.classNameOnDrag),n("body").addClass("zh-userselectnone"),this._dispatchEvent("start",o),this._stDispatched=!0}var _=this._scrollPar[0],u=o.pageX,p=o.pageY,m=l.outerHeight(),g=l.outerWidth();if(i.autoScrollRegion&&"viewport"!==this._opts.region){var h=t.$document;if(_!==h[0]&&"HTML"!==_.tagName)this._checkScroll("Top",p,m,l),this._checkScroll("Left",u,g,l);else{var v=t.$window,y=i.scrollSensitivity,f=this._prevX?d(a(this._prevY-p),a(this._prevX-u)):i.scrollSpeed,k=h.scrollTop(),b=h.scrollLeft(),C=p-k<y?k-f:v.height()-(p-k)<y?k+f:void 0,D=u-b<y?b-f:v.width()-(u-b)<y?b+f:void 0;void 0!==C&&h.scrollTop(C),void 0!==D&&h.scrollLeft(D),this._prevX=u,this._prevY=p}}var T,S=l.offset();if(i.region)if("string"!=typeof i.region)"object"===_typeof(i.region)?(T=i.region,S=l.position()):T=i.region;else if("viewport"===i.region)T=[0,0,n(window).width(),n(window).height()];else if("page"===i.region)T=t.$document;else if("parent"===i.region){var w=l.parent().is("body");T=w?t.$document:l.parent(),w||(S=l.position())}var O,M,I=!(0<=p-this._my),x=0<=u-this._mx,E=S.top+(_.scrollTop||0)+p+i.cursorOffset.top-this._my,z=S.left+(_.scrollLeft||0)+u+i.cursorOffset.left-this._mx;E=0>E?0:E,z=0>z?0:z,T&&T instanceof Array?(E=E<T[1]?T[1]:E,z=z<T[0]?T[0]:z,O=T[2],M=T[3]):(O=T&&T[0].scrollWidth||t.$document.width(),M=T&&T[0].scrollHeight||t.$document.height()),E+m>M&&(E=M-m),z+g>O&&(z=O-g);var P={};"y"!==i.axis&&0<=u&&(P.left=z),"x"!==i.axis&&0<=p&&(P.top=E),l["parent"===i.region?"css":"offset"](P),l.css({right:"",bottom:""}),this._dispatchEvent("drag",o,{isUp:I,isRight:x}),this._mx=u+i.cursorOffset.left,this._my=p+i.cursorOffset.top,o.preventDefault()}}},{key:"_checkScroll",value:function(t,a,o,n){var m,l=this._scrollPar[0],i=this._scrollOff[t.toLowerCase()],s=l["scroll"+t],r="Top"===t?"Height":"Width",d=l["scroll"+r],c=l["offset"+r],_=this._opts.scrollSensitivity,u=this._opts.scrollSpeed,p=!1;i+c-a<_?(m=s+u,p=!0):a-i<_&&(m=s-u);var g=o+(void 0===m?0:m);void 0!==m&&0<=m&&(p?g<=d:0<=g)&&this._updateProp(t,m,o,d,n,p,u)}},{key:"_updateProp",value:function(t,a,o,n,l,i,s){this._scrollPar[0]["scroll"+t]=a;var r=l[0]["offset"+t],d=i?r+s:r-s;(i?d+o<=n:0<=d+o)&&l.css(_defineProperty({},t.toLowerCase(),d))}},{key:"_getScrollPar",value:function(t,a){var o=t.css("position"),l="parent"===this._opts.region,i=a?/(auto|scroll|hidden)/:/(auto|scroll)/,s=t.parents().filter(function(){var a=n(this);return!(!l&&"absolute"===o&&"static"===a.css("position")||l&&a[0]!==t[0].parentNode)&&i.test(a.css("overflow")+a.css("overflow-y")+a.css("overflow-x"))}).eq(0);return"fixed"!==o&&s.length?s:n(t[0].ownerDocument||document)}},{key:"_docMouseUpHandler",value:function(t){this._md&&!this._opts.disabled&&this._resetValues(t),clearTimeout(this._delay),this._delay=void 0}},{key:"_docKeydownHandler",value:function(a){this._md&&this._opts.cancelOnEscKey&&a.keyCode===t.keyCode.ESCAPE&&(this._revertPos(),this._dispatchEvent("cancel",a))}},{key:"_resetValues",value:function(a,o){this._md=this._stDispatched=!1;var l=this._opts;l.classNameOnDrag&&(this._dragEle||this.element).removeClass(l.classNameOnDrag),a&&this._dispatchEvent("end",a),l.showGhostOnDrag&&this._removeGhost(o),n("body").removeClass("zh-userselectnone"),this._removeEvents("mousemove mouseup contextmenu keydown",t.$document)}},{key:"_removeGhost",value:function(t){if(this._dragEle){if(!t){var a="parent"===this._opts.region,o=this._dragEle[a?"position":"offset"]();this.element[a?"css":"offset"]({top:o.top,left:o.left})}this._dragEle[0].parentNode.removeChild(this._dragEle[0]),this._dragEle=void 0}}},{key:"_revertPos",value:function(){this.element.css({left:this._prevPos.left,top:this._prevPos.top}),this._resetValues(void 0,!0)}},{key:"_dispatchEvent",value:function(t,a){var o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},n=this.element;o.offset=n.offset(),o.position=n.position(),_get(_getPrototypeOf(l.prototype),"_dispatchEvent",this).call(this,t,a,o)}},{key:"destroy",value:function(){var t=this.name;this._md=this._stDispatched=this._mx=this._my=void 0,this._handle.off("."+t).removeClass("zdraggable"),this.element.removeClass("zh-draggable"),this.element.removeData(t),this._setCursor(!0)}},{key:"_disable",value:function(t){_get(_getPrototypeOf(l.prototype),"_disable",this).call(this,t,this._handle),this._handle[t?"removeClass":"addClass"]("zdraggable"),this.element[t?"removeClass":"addClass"]("zh-draggable"),this._setCursor(t)}},{key:"_setAttribute",value:function(t,a){"handle"===t&&(this._handle.off("."+this.name).removeClass("zdraggable"),this._setCursor(!0),this._resetValues(),this._handle=a?this.element.find(a):this.element,this._handle.addClass("zdraggable"),this._setCursor(),this._bindEvents()),this._opts[t]=a}},{key:"name",get:function(){return"zdraggable"}},{key:"props",get:function(){return{cursor:"move",handle:null,ignoreAsHandle:"input,textarea,button,select,option",axis:"both",region:!1,showGhostOnDrag:!1,cursorOffset:{top:0,left:0},classNameOnDrag:"",disabled:!1,dragStartDelay:0,autoScrollRegion:!0,cancelOnEscKey:!0,scrollSpeed:5,scrollSensitivity:20}}},{key:"EVENTS",get:function(){return["start","drag","end","cancel"]}}]),l}();t.registerComponent("ZDraggable",u);var p=function(a){function o(){return _classCallCheck(this,o),_possibleConstructorReturn(this,_getPrototypeOf(o).apply(this,arguments))}return _inherits(o,t.CoreComponent),_createClass(o,[{key:"_init",value:function(t,a){a.isCE=this.isCE,a.disabled=a.disabled||t[0].disabled,this._data=o.getBtnProps(a,t),this._prevTabIndex=this._data._prevTabIndex,this._skipParent=!this._data.hasInput}},{key:"_initialRender",value:function(){var t=this.element;"custom"!==this._opts.contentType||this._data.innerHTML?this._render():(this.container=t,this._postRender(t,this._opts),this._postEachRender(t,this._data))}},{key:"_postRender",value:function(t){var a=this._data;a.className+=" "+this._opts.cls,this._container=a.hasInput?this.container:t,this._container[0].type=a.type}},{key:"_postEachRender",value:function(){var t=this._data,a=t.icon&&!t.text;this._updateClass(a?"zbutton--icononly":"",a?null:"zbutton--icononly")}},{key:"_handleStates",value:function(){var t=this._opts.disabled,a=this._data;a.attrs.disabled=t,this._disable(t),this.isCE||this._disable(t,this.element),a.hasInput&&(t&&(this._currentTab=this.container.attr("tabindex")),this.container.attr("tabindex",t?-1:this._currentTab),a.attrs.tabIndex=t?-1:this._currentTab),this._dispatchEvent("statechange",{},{button:this.element,disabled:t,fromUI:!1})}},{key:"_bindEvents",value:function(){var a=this,o=this.name,n=this.getElement();this._handleFocus(this._container),n.on("click."+o+" keydown."+o,function(o){var l="keydown"===o.type;n.hasClass("is-disabled")||l&&o.keyCode!==t.keyCode.ENTER&&o.keyCode!==t.keyCode.SPACE||(a._opts.actionInProgress&&a.showProgressIndicator&&a.showProgressIndicator(),a._dispatchEvent("click",o,{button:a.element,fromUI:!0}),l&&o.preventDefault())}).on("mousedown."+o,function(t){if(n.hasClass("is-disabled"))return t.stopImmediatePropagation(),!1}),t.ShortCut&&t.ShortCut.register(this.element)}},{key:"_setAttribute",value:function(t,a){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:this.getElement(),l=this._opts,i=this._data,s=l[t];if(l[t]=a,"appearance"===t||"size"===t)this._updateClass("zbutton--"+a,"zbutton--"+s),"size"===t&&l.actionInProgress&&(a=""===a.trim()||"default"===a?"medium":a,n.find(".zbutton__loader circle").attr({cx:this._CIRCLEX[a],cy:this._CIRCLEY[a],r:this._CIRCLER[a]}));else if("disabled"===t)this._handleStates();else if("text"===t)this._domChanged=!0,i[t]=a;else if(-1<["iconClassName","iconClass","SVGIconId","defaultSVGIconId"].indexOf(t))l.actionInProgress||o.getIconInfo(l,!0,i),this._domChanged=!0;else if("actionInProgress"===t||"progressIndicator"===t)this._setProgressAttribute(t,a);else if("title"===t){var r=i.attrs||{};r.title=a,i.attrs=r,this._domChanged=!0}this._domChanged&&i.hasInput&&(this._render(i,void 0,this.container[0],this._skipParent),this._domChanged=!1)}},{key:"destroy",value:function(){var t=this.getElement(),a=this._data;a.className=" ",_get(_getPrototypeOf(o.prototype),"destroy",this).call(this),t.text(a.text)}},{key:"setProgressValue",value:function(t,a){100<t&&(t=100),this._data.progressInfo.value=this._opts.progressIndicator.value=t,a||this._render()}},{key:"getProgressValue",value:function(){return this._opts.progressIndicator.value}},{key:"showProgressIndicator",value:function(t){t=t||{};var a=this._opts.progressIndicator,o=t.loadingText||a.loadingText,n=this._data;n.showProgress=!0,""!==o&&(this._prevText=n.text,n.text=o),n.progressInfo||(this._setProgressData(t,!0),this._opts.actionInProgress=!0),this._updateClass("is-disabled zbutton--loading zh-transition"),this._render()}},{key:"_setProgressData",value:function(a,o){var n=this._opts.progressIndicator,l=a.position||n.position,i=a.direction||n.direction,s=a.type||n.type,r=a.SVGIconId||n.SVGIconId,d=a.value||n.value,c=a.iconClassName||n.iconClassName,_=this._opts.size,u=this._CIRCLEY,p=this._CIRCLEX,m={trackCX:u[_],trackCY:u[_],trackRadius:u[_],progressCX:p[_],progressCY:p[_],progressRadius:p[_]};(r||c)&&(m.progressIcon=t._getIconInfo(c,r,null,"zbutton__icon zbutton--loader")),"circular"===s?m["circular"+l[0].toUpperCase()+l.slice(1)]=!0:(m["linear-bar"===s?"linearBar":"linearFill"]=!0,m.direction="right-to-left"===i?"fromright":"fromleft"),m.position="linear-bar"===s?"top"===l||"bottom"===l?l:"bottom":"left"===l||"right"===l?l:"left",m.className=m.circularRight&&!this._container.is(".zbutton--icononly")?"zh-floatright ":"",this._data.progressInfo=m,"circular"!==s&&this.setProgressValue(d,!0),o||this._render()}},{key:"hideProgressIndicator",value:function(){var t=this._data;t.showProgress=this._opts.actionInProgress=!1,t.text=this._prevText||t.text,this._updateClass("","zbutton--loading zh-transition"),this._opts.disabled||(this._container.removeAttr(this.compoundAttrs.disabled),this._updateClass("","is-disabled")),this._render()}},{key:"_setProgressAttribute",value:function(t,a){var o=this._opts;"actionInProgress"===t?this[(a?"show":"hide")+"ProgressIndicator"]():"progressIndicator"==t&&(a=n.extend({},o[t],a),this._setProgressData(a)),o[t]=a}},{key:"name",get:function(){return"zbutton"}},{key:"attrs",get:function(){return{type:"button",appearance:"normal",action:null,actionInProgress:!1,size:"medium",text:null,iconClass:null,SVGIconId:null,disabled:!1,isCustomHTMLEncoded:!0,contentType:"",defaultIconClassName:"",defaultSVGIconId:null}}},{key:"props",get:function(){return{iconClassName:null,progressIndicator:{type:"circular",position:"left",direction:"left-to-right",loadingText:"",value:5}}}},{key:"EVENTS",get:function(){return["click","change","statechange"]}},{key:"compoundAttrs",get:function(){return{disabled:"disabled aria-disabled"}}},{key:"_CIRCLEX",get:function(){return{medium:"8px",large:"10.5px",small:"7.5px",mini:"7px"}}},{key:"_CIRCLEY",get:function(){return{medium:"8px",large:"10.5px",small:"7.5px",mini:"7px"}}},{key:"_CIRCLER",get:function(){return{medium:"6.5",large:"9px",small:"6px",mini:"5.5px"}}}],[{key:"getBtnProps",value:function(a,n,l){var c,i=Object.create(a),s=void 0!==n,r=s&&n[0],d=i.customAttributes||{};(c=i.text||i.label||"")||l||!s||(c=r.innerText.trim()),c&&(d["aria-label"]=a.text=i.text=c),s&&"INPUT"===r.tagName&&(d.for=r.id,i.title=i.title||r.title,i.type=r.type,n.addClass("zh-dnone"),i.hasInput=!0,i.alwaysSetAttrs=!0),d.tabIndex=void 0===d.tabindex?s&&r.tabIndex||0:d.tabindex,a.isCE&&s&&!r.getAttribute("tabindex")&&(d.tabIndex=0),i=o.getIconInfo(i);var u=a.innerHTML;"custom"===a.contentType&&u&&(i.innerHTML=a.isCustomHTMLEncoded?u:t.encodeHTML(u));var p="zbutton  ".concat(i.size?" zbutton--".concat(i.size," "):"zbutton--medium").concat(i.appearance?" zbutton--".concat(i.appearance):" zbutton--normal"," ").concat(i.templateRender?(i.className||"")+(i.icon&&!i.text?" zbutton--icononly":""):"");return i.title&&(d.title=i.title),i._prevTabIndex=d.tabIndex,i.disabled&&(p+=" is-disabled",i.hasInput&&(d.tabIndex=-1)),d.class&&(p+=" "+d.class,delete d.class),d.disabled=i.disabled||!1,t.Browser.isFirefox&&52>=t.Browser.getFirefoxVersion()&&(p+=" zbutton--ffsupport"),a.cls=p,i.className=p,d.role=i.role||"button",i.name&&s&&r.name&&(d.name=i.name),i.type=i.type||"button",i.attrs=d,i}},{key:"getIconInfo",value:function(a,o,n){var s="";(a.iconClassName||a.iconClass||a.SVGIconId||a.defaultSVGIconId)&&(s=a.defaultIconClassName+" zbutton__icon"),a.defaultIconClassName=s;var r=t._getIconInfo(a.iconClassName||a.iconClass,a.SVGIconId,a.defaultSVGIconId,a.defaultIconClassName,!o&&a);if(!o)return r;for(var u,d=["icon","iconClass","SVGIconId","iconClassName","SVGIconClassName"],c=d.length,_=0;_<c;_++)n[u=d[_]]=r[u]}}]),o}();t.registerComponent("ZButton",p),function(t){var a=t.zbutton.Templates,o=t.Templates.Utilities;a.container=function(t){return ZT.html(zc0tO23(),t.mainElement||ZT.html(zc0tO24(),t.text,t.id,t.role,t.type,t.attrs&&t.attrs.tabIndex||t.tabIndex||0,t.title,t.className,t.attrs&&t.attrs.actionName,t.templateRender?ZT.html(zc0tO25(),a.children(t)):"",t.children&&a.children(t)))},a.children=function(t){return ZT.html(zc0tO26(),t.innerHTML?ZT.html(zc0tO27(),ZT.customHTML(t.innerHTML)):a.defaultChild(t))},a.defaultChild=function(t){return ZT.html(zc0tO28(),t.showProgress&&t.progressInfo.circularLeft?ZT.html(zc0tO29(),a.loader(t.progressInfo)):t.icon&&ZT.html(zc0tO30(),o.icon(t)),t.text&&ZT.html(zc0tO31(),t.text),t.showProgress&&!t.progressInfo.circularLeft&&ZT.html(zc0tO32(),a.loader(t.progressInfo)))},a.loader=function(t){return ZT.html(zc0tO33(),t.linearBar&&ZT.html(zc0tO34(),t.position,t.value),t.linearFill&&ZT.html(zc0tO35(),t.direction,t.value),(t.circularLeft||t.circularRight)&&(t.progressIcon?icon(t.progressIcon):ZT.customHTML('<i class="zbutton__icon zbutton--loader '.concat(t.className,'"><svg class="zbutton__svg zbutton__loader zeffects--rotate" width="100%" height="100%"> <circle class="circle__track" cx="').concat(t.trackCX,'" cy="').concat(t.trackCY,'" r="').concat(t.trackRadius,'"></circle> <circle class="circle__load" cx="').concat(t.progressCX,'" cy="').concat(t.progressCY,'" r="').concat(t.progressRadius,'"></circle> </svg></i>'))))}}(ZPeopleComponents);var m=t.keyCode,g=[m.HOME,m.PAGE_UP],h=[m.END,m.PAGE_DOWN],v=function(a){function o(){return _classCallCheck(this,o),_possibleConstructorReturn(this,_getPrototypeOf(o).apply(this,arguments))}return _inherits(o,t.CoreComponent),_createClass(o,[{key:"_create",value:function(t){this._prevSKey="",this._bindEvents(t)}},{key:"_bindEvents",value:function(t){var a=this;this._addEvents({keyDown:"keydown",blur:"focusout",itemFocus:"click"},t);var o=this._opts,n=this.name,l=o.hoverClassName;o.handleHover&&t.on("mouseenter."+n,o.items,function(n){o.focusItemOnItemMouseover&&(a._mouseEntered=!0),a._mouseHoverHandler(n,!0),a._dispatchEvent("mouseenter",n,{item:l&&t.find("."+l)})}).on("mouseleave."+n,o.items,function(n){o.focusItemOnItemMouseover&&(a._mouseEntered=!1),a._dispatchEvent("mouseleave",n,{item:l&&t.find("."+l)}),a._mouseHoverHandler(n)})}},{key:"moveFocus",value:function(a){if(a.keyCode===t.keyCode.ENTER||a.keyCode===t.keyCode.SPACE||this._opts.keyNavigation)return this._keyDownHandler(a)}},{key:"_mouseHoverHandler",value:function(t,a,o){var l=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{},i=n(t.target),s="keydown"===t.type,r=this._opts,d=this._opts.items;if((i=i.is(d)?i:i.closest(d)).length){var c=this.element,_=s||r.focusItemOnItemMouseover,u=r.hoverClassName,p=r.focusClassName,m=s?this._getCurrItem(c,r):c.find("."+u);if(!m||!a||m[0]!==i[0]){a&&m&&!s&&m.removeClass(u);var g=!0;if(_&&(g=this["_"+(a?"":"un")+"focus"](i,r,t,l)),!1!==g&&a&&m&&m.removeClass((r.focusItemOnItemMouseover?u+" ":"")+(_?p:"")),(!s||!1!==g&&r.focusItemOnItemMouseover)&&i[(a?"add":"remove")+"Class"](u),this.element.data("prevHover",m),o){var h="onMouse"+(a?"Enter":"Leave");r[h]&&r[h](t,i)}}return!0}}},{key:"_itemFocusHandler",value:function(t){var a=this._opts,o=n(t.target),l=a.items,i=o.is(l)?o:o.closest(l);if(i&&i.length){var s=this.element.find("."+a.focusClassName);s.length&&this._unfocus(s,a,t),this._focus(i,a,t)}}},{key:"_keyDownHandler",value:function(a){var o=(a=a instanceof Event?t.DOMUtilInstance.event.fix(a):a).keyCode,l=this._opts,i=this.element,s={},r=n(a.target),d=r.closest(this._opts.inputSelectors).length,c=d&&r.is("input"),_=!0;if(!d||c){var z,u=i.find(l.items),p=l.keyNavigation,v=u.length,y=l.direction,f=(Object.keys(m).find(function(t){return m[t]===o})||"").replace("_","").toLowerCase(),k="down"===f,b="up"===f,C="right"===f,D="left"===f,S="horizontal"===y,T="vertical"===y,w=this._getCurrItem(i,l),I=!1,x=T?k:S&&w.length?C:k||C,E=T?b:S&&w.length?D:b||D;if(1<w.length&&(w=n(w[x?w.length-1:0])),!c||-1!==["up","down","enter"].indexOf(f)){l.focusItemOnItemMouseover&&this._mouseEntered&&this._bindMouseMove(),(l.selectOnEnterKey&&"enter"===f||l.selectOnSpaceKey&&"space"===f)&&(this._enterKeyHandler&&this._enterKeyHandler(a,w),s.isEnterKey="enter"===f,s.isSpaceKey="space"===f,l.preventDefaultOnEnterKey&&a.preventDefault(),_=!1),s.key=f;var O=b||k||C||D;O&&(s["is"+f[0].toUpperCase()+f.slice(1)+"Key"]=!0);var M=a.metaKey||a.ctrlKey;if(!M&&(x||E)&&p)if(w&&w.length)if("both"===y){var P=u.index(w),A=w[E?"prevAll":"nextAll"](l.items);z=this._gridNavigation&&this._gridNavigation(a,w,f,A,P,b,k,D,C)}else{var B=u.index(w);(0>(B+=x?1:-1)||B===v)&&(l.wrapAround?B=x?0:v-1:B+=x?-1:1),z=u[B]}else z=n(u[x?0:u.length-1]);else if("escape"===f)s.isEscapeKey=!0;else if(p&&(0<=g.indexOf(o)||M&&E))z=u[0],I=!0;else if(p&&(0<=h.indexOf(o)||M&&x))z=u[v-1],I=!0;else{if("tab"===f)return this._blurHandler(a);p&&l.characterKeyFocus&&this._callSearch&&"enter"!==f&&"space"!==f&&(z=this._callSearch(a.key,a,w))}return(z=n(z)).length&&(l.scrollToView&&this._scrollToView(z,i,M&&E,M&&x),a.target=z,_=this._mouseHoverHandler(a,!0,!0)),s.item=w,s.nextItem=z,this._dispatchEvent("keydown",a,s),O&&this._dispatchEvent("arrowkeydown",a,s),!(p&&!c&&(this._isNonModKey(a)||I))&&_}}}},{key:"_bindMouseMove",value:function(){var t=this.element,a="."+this.name,o=this._opts;t.on("mousemove"+a,function(l){var i=n(l.target).closest(o.items);i&&i.length&&i.trigger("mouseenter"),t.off("mousemove"+a)})}},{key:"_focus",value:function(t){var a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this._opts,o=2<arguments.length?arguments[2]:void 0,n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{},l=a.focusClassName;if(l&&!t.hasClass(l))return n.item=t,!1!==this._dispatchEvent("beforefocusmove",o,n)&&(t.addClass(l+(!o&&a.focusItemOnItemMouseover?" "+a.hoverClassName:"")),this._dispatchEvent("focusmove",o,n),!0)}},{key:"_unfocus",value:function(t){var o=(1<arguments.length&&void 0!==arguments[1]?arguments[1]:this._opts).focusClassName;o&&t.hasClass(o)&&t.removeClass(o)}},{key:"focusAdjacentItem",value:function(t,a){var o=!(2<arguments.length&&void 0!==arguments[2])||arguments[2],l=this._opts,s=this.element.find(l.items),r=s.index(n(t)[0]),d=n(s[r+1]);d.length||(d=n(s[r-1])),d.length&&this.focusItem(d,a,o)}},{key:"focusItem",value:function(t,a){(!(2<arguments.length&&void 0!==arguments[2])||arguments[2])&&this._opts.scrollToView&&this._scrollToView(t,this.element),this._focus(t,this._opts,a)}},{key:"_getCurrItem",value:function(t,a){var o=t.find(a.items),n=a.focusItemOnItemMouseover,l=n?"hover":"focus",i=o.filter("."+a[l+"ClassName"]);return!i.length&&n&&a.focusClassName&&(i=o.filter("."+a.focusClassName)),i}},{key:"_isNonModKey",value:function(a){return!(a.ctrlKey||a.metaKey||a.shiftKey||a.altKey||a.keyCode===t.keyCode.ESCAPE)}},{key:"_blurHandler",value:function(t){if(document.activeElement!==this.element[0]&&this._dispatchEvent("beforeblur",t)){var a=this.element,o=this._opts,l=o.hoverClassName,i=o.focusClassName,s=t&&t.relatedTarget;s&&n(s).closest(this.element).length||a.find((l?"."+l:"")+(l?",":"")+"."+i).removeClass(l+" "+i),this._dispatchEvent("blur",t)}}},{key:"_scrollToView",value:function(t,a,o,n){var l=this._opts.scrollableEle||(a.find(".zh-scroll_y").length?a.find(".zh-scroll_y"):a.find(".zh-overflowhidden").length?a.find(".zh-overflowhidden"):a),i=!t[0].previousElementSibling,s=!i&&!t[0].nextElementSibling;if(o=o||i,this.element.is(":visible")&&l[0].contains(t[0])){n=n||s;var r=o?0:n?l[0].scrollHeight:0;if(!o&&!n){var c=t.offset().top-l.offset().top,_=l[0].scrollTop;r=0>c?_+c:d(_,c+_+t.outerHeight(!0)-l.outerHeight())}l.scrollTop(r)}}},{key:"setAttribute",value:function(t,a){this._opts[t]=a}},{key:"destroy",value:function(){var t=this.name;this.element.off("."+t).removeData(t),this.element.removeData("prevHover"),this.element=void 0}},{key:"_callSearch",value:function(t,a,o){var n=!1,l=+new Date;return t=t.toLowerCase(),this._prevKTime&&700<l-this._prevKTime?(n=this._prevSKey===t,this._prevSKey=t):this._prevSKey+=t,this._prevKTime=l,this._itemSearch(n,a,o)}},{key:"_itemSearch",value:function(t,a,o){var l=this._opts,i=this.element.find(l.items);if((i=i.filter("[data-"+l.keyMatchAttribute+'^="'+this._prevSKey+'"]')).length){if(t){var s=i.toArray().indexOf(o[0]);return(s+=1)>=i.length&&(s=0),n(i[s])}return n(i[0])}}},{key:"_gridNavigation",value:function(t,a,o,l,i,s,r,d,c){var _=a.position(),u=this._getNextGridMenuItem(_,l,s,d||c);if(!u||!u.length){var S,T,p=-1,m=this._opts,g=m.wrapAround,h=s||d,v=m.items,y="."+m.headerClassName,f="."+m.footerClassName,k=m.ctype,b=a.closest(y).length?"header":a.closest(f).length?"footer":"body",C="header"==b,D="body"==b;if(S=C?"footer":D?"header":"body",T=C?"body":D?"footer":"header",!h){var w=S;S=T,T=w}v=this.element.find(".".concat(k,"__").concat(S)).length?".".concat(k,"__").concat(S," ").concat(v):this.element.find(".".concat(k,"__").concat(T)).length?".".concat(k,"__").concat(T," ").concat(v):this.element.find(".".concat(k,"__body")).length?".".concat(k,"__body ").concat(v):v,l=this.element.find(v),"footer"==b?p=h?d?l.length-1:this._getLRFItem(n(l[l.length-1]).position(),l):0:((s||r)&&(s="up"===(o=s?"down":r?"up":o),u=this._getNextGridMenuItem(_,s?l.toArray().splice(0,i):l.toArray().splice(i+1).reverse(),s,d||c)),(!u||!u.length)&&(!(d||c)||g)&&(p=h?l.length-1:0)),u=u&&u.length?u:-1!==p&&l[p]}return u}},{key:"_getNextGridMenuItem",value:function(t,a,o,l){for(var c,_,s=l?"top":"left",r=a.length,d=0;d<r;d++){if((_=n(a[d])).position()[s]===t[s]||"top"===s){c=_;break}}return c}},{key:"_getLRFItem",value:function(t,a){for(var s,l=a.length-1;0<=l&&n(a[l]).position().top===t.top;l--)s=a[l];return a.index(s)}},{key:"name",get:function(){return"zkeyboardnavigation"}},{key:"props",get:function(){return{direction:"vertical",hoverClassName:"on-hover",focusClassName:"has-focus",items:"",wrapAround:!1,scrollToView:!0,handleHover:!0,selectOnEnterKey:!0,selectOnSpaceKey:!0,preventDefaultOnEnterKey:!1,characterKeyFocus:!0,keyMatchAttribute:"label",focusItemOnItemMouseover:!0,keyNavigation:!0,inputSelectors:"input, textarea, div[contentEditable]"}}},{key:"EVENTS",get:function(){return["beforefocusmove","focusmove","mouseenter","mouseleave","keydown","arrowkeydown","blur"]}}]),o}();t.registerComponent("ZKeyboardNavigation",v);var y=function(a){function o(){return _classCallCheck(this,o),_possibleConstructorReturn(this,_getPrototypeOf(o).apply(this,arguments))}return _inherits(o,t.ZKeyboardNavigation),_createClass(o,[{key:"_create",value:function(t,a){this._opts=n.extend(!0,{},this._opts,a.keyNavigationOptions||{}),_get(_getPrototypeOf(o.prototype),"_create",this).call(this,t,a)}},{key:"_bindEvents",value:function(t){_get(_getPrototypeOf(o.prototype),"_bindEvents",this).call(this,t),this._addEvents({mouseDown:"mousedown",mouseUp:"mouseup",keyUp:"keyup"},t)}},{key:"_keyUpHandler",value:function(t){t.shiftKey||this.element.removeClass("zh-userselectnone")}},{key:"_keyDownHandler",value:function(t){var a=t.keyCode,l=this.element,i=this._opts,s=this._getCurrItem(l,i),r=t.shiftKey,c=n(t.target).closest(this._opts.inputSelectors).length;if(!c)if(!this._shiftPressed&&r&&16===a){var _=l.find("."+i.selectedClassName),u=_.length;this._shiftPressed=u&&1===u?_:i.focusItemOnItemMouseover?this._lastSelItem:s;var p=window.getSelection();(!p.containsNode||p.containsNode(l[0],!0))&&p.removeAllRanges(),l.addClass("zh-userselectnone")}else r||(this._shiftPressed=void 0);return!c&&i.multiple&&(t.metaKey||t.ctrlKey)&&65===a?(t.preventDefault(),void this.selectAllItems(!0)):_get(_getPrototypeOf(o.prototype),"_keyDownHandler",this).call(this,t)}},{key:"_enterKeyHandler",value:function(t,a){if(a.hasClass(this._opts.hoverClassName)||a.hasClass(this._opts.focusClassName))return t.target=a,this._handleSelection(a,void 0,t),!1}},{key:"_mouseDownHandler",value:function(t){this._dispatchEvent("beforemousedown",t)&&(this._md=!0,this._mdy=t.pageY,this._mdx=t.pageX,this._mdEle=n(t.target).closest(this._opts.items),!t.shiftKey&&(this._shiftPressed=void 0),this.element.addClass("zh-userselectnone"),this._bindMouseDrag&&this._bindMouseDrag())}},{key:"_mouseMoveHandler",value:function(t){if(this._md){var a=n(t.target),o=this._opts,l=o.focusClassName,i=o.selectedClassName,s=a.closest(o.items);if(s.length)s[(s.hasClass(i)?"toggle":"add")+"Class"](i+" "+l);t.preventDefault()}}},{key:"_mouseUpHandler",value:function(a){if(this._dispatchEvent("beforemouseup",a)){this.element.off("mousemove."+this.name),this._md=!1,3===a.which&&this._dispatchEvent("contextmenu",a);var o=n(a.target),l=this._opts,i=o.closest(l.items);if(!i.length)return;if(this._mdEle&&i[0]===this._mdEle[0]&&(this._mdEle=void 0),this._handleSelection(i,l,a),this._scrollToView(i,this.element),this._mdEle=this._mdy=this._mdx=void 0,!this._shiftPressed){this.element.removeClass("zh-userselectnone");var s=window.getSelection();if(t.Browser.isIE){var r=document.activeElement;n(r).closest(l.inputSelectors).length||s.removeAllRanges()}else(!s.containsNode||s.containsNode(this.element[0],!0))&&s.removeAllRanges()}}}},{key:"_handleSelection",value:function(a){var o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this._opts,l=2<arguments.length?arguments[2]:void 0,i=3<arguments.length?arguments[3]:void 0,s=4<arguments.length?arguments[4]:void 0,r=5<arguments.length?arguments[5]:void 0,d=6<arguments.length?arguments[6]:void 0,c=o.selSelector;if(!c||n(l.target).closest(c).length){var _=this.element,u=o.focusClassName,p=o.selectedClassName;if(o.multiple&&o.selectOnFocus&&"keydown"!==l.type&&!(l.metaKey||l.ctrlKey||l.shiftKey)&&this._clearAll(l,a,!0),o.multiple&&"keydown"!==l.type)if(o.allowDragToSelect&&this._mdEle||o.allowShiftSelection&&this._shiftPressed&&this._shiftPressed.hasClass(p))return this._selectMultipleItems(l,o,a,s);var g=_.find("."+p).toArray();o.multiple||i||!g.length||g[0]===a[0]||this._deselect(n(g[0]),o,l,a);var h=l.keyCode===t.keyCode.DOWN,v="keydown"===l.type&&(s||h)?a.data("selectOnUp"):void 0,y=a.hasClass(p)&&(void 0===v||(s?!v:v)),f=(o.toggle||l.ctrlKey||l.metaKey||l.shiftKey)&&y&&!d&&(!this._shiftPressed||a[0]!==this._shiftPressed[0]);!1!==this._focus(r||a,o,l,{ahead:f?"deselect":"select"})&&u&&_.find("."+u).not(r||a).removeClass(u+(o.focusItemOnItemMouseover?" "+o.hoverClassName:"")),f?this._deselect(a,o,l,a):!a.hasClass("is-selected")&&(l.shiftKey&&(!this._shiftPressed||!this._shiftPressed.hasClass(p))&&(this._shiftPressed=a),this._select(a,o,s,l)),this._dispatchEvent("change",l,{item:a})}}},{key:"_select",value:function(a){var o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this._opts,n=2<arguments.length?arguments[2]:void 0,l=3<arguments.length?arguments[3]:void 0,i=4<arguments.length?arguments[4]:void 0,s=o.selectedClassName;if(!a.hasClass(s)){var r={item:a};this._dispatchEvent("beforeselect",l,r)&&(o.selectOnFocus&&!i&&this._focus(a,o,l),a.addClass(s),this._lastSelItem=a,(n||!n&&(!l||"keydown"!==l.type||!l.shiftKey&&l.keyCode===t.keyCode.DOWN))&&a.data("selectOnUp",n),this._dispatchEvent("select",l,r))}}},{key:"_deselect",value:function(t){var a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this._opts,o=2<arguments.length?arguments[2]:void 0,n=3<arguments.length?arguments[3]:void 0,l=a.selectedClassName;if(t.hasClass(l)){var i={item:t,relatedItem:n};this._dispatchEvent("beforedeselect",o,i)&&(t.removeClass(l),t.removeData("selectOnUp"),this._lastSelItem&&this._lastSelItem[0]===t[0]&&(this._lastSelItem=void 0),this._dispatchEvent("deselect",o,i))}}},{key:"selectItem",value:function(t,a){var o=!(2<arguments.length&&void 0!==arguments[2])||arguments[2],n=3<arguments.length?arguments[3]:void 0;o&&this._opts.scrollToView&&this._scrollToView(t,this.element),this._select(t,this._opts,void 0,a,n)}},{key:"deSelectItem",value:function(t,a){this._deselect(t,void 0,a)}},{key:"selectAllItems",value:function(t){this._changeAll(!1,!0);var a=this._opts,o=a.focusClassName;if(t&&o){var l=this.element.find(a.items);this.element.find("."+o).removeClass(o+(a.focusItemOnItemMouseover?" "+a.hoverClassName:"")),this._focus(n(l[l.length-1]),a)}}},{key:"deselectAllItems",value:function(){this._changeAll(!0)}},{key:"_changeAll",value:function(t,a){for(var o=this.element.find(this._opts.items),l=o.length,s=0;s<l;s++)this["_"+(t?"de":"")+"select"](n(o[s]),void 0,void 0,void 0,a)}},{key:"_mouseHoverHandler",value:function(t,a,l){var i=this._opts,s="keydown"===t.type&&i.selectOnFocus;if(_get(_getPrototypeOf(o.prototype),"_mouseHoverHandler",this).call(this,t,a,l,{ahead:s?n(t.target).hasClass(i.selectedClassName)?"deselect":"select":void 0}),s)return this._selectOnKeyNav(t,i)}},{key:"_getCurrItem",value:function(t,a){var o=t.find(a.items),n=a.focusItemOnItemMouseover,l={};return n&&(l=o.filter("."+a.hoverClassName)),l.length||!(l=a.focusClassName&&o.filter("."+a.focusClassName)).length&&!n&&(l=o.filter("."+a.selectedClassName)),l}},{key:"setAttribute",value:function(t,a){if("keyNavigationOptions"===t)for(var s,o=["direction","wrapAround","characterKeyFocus"],n=o.length,l=0;l<n;l++)void 0!==a[s=o[l]]&&(this._opts[s]=a[s]);this._opts[t]=a}},{key:"destroy",value:function(){this.element.removeClass("zh-userselectnone"),_get(_getPrototypeOf(o.prototype),"destroy",this).call(this)}},{key:"_selectOnKeyNav",value:function(a,o){var l=o.selectedClassName,i=n(a.target),s=o.items;i=i.is(s)?i:i.closest(s);var r=o.multiple&&(a.shiftKey||a.ctrlKey||a.metaKey),c=a.keyCode===t.keyCode.UP,_=!1;r||(this._clearAll(a,i),_=!0),!this._shiftPressed&&r&&(this._shiftPressed=i[c?"next":"prev"](o.items));var y,u=i.hasClass(l),p=this.element.data("prevHover"),m=p&&p.hasClass(l),g=m&&p.data("selectOnUp"),h=!u&&m&&g&&!c,v=!u&&m&&!g&&c;if(r&&(u&&m||h||v)){if(g){if(c)return!r;y=i,i=p}else{if(!c)return!r;y=i,i=p}(h||v)&&(this._handleSelection(i,o,a,r,c,y,_),i=y)}return this._handleSelection(i,o,a,r,c,y,_),!r}},{key:"_clearAll",value:function(t,a,o){var l=this._opts,s=this.element.find("."+l.selectedClassName).toArray(),r=s.indexOf(a[0]);!o&&-1<r&&s.splice(r,1);var d=s?s.length:0,c={list:s,item:a};if(this._dispatchEvent("beforereset",t,c)){for(var u,_=0;_<d;_++)u=n(s[_]),this._deselect(u,l,t,a);this._dispatchEvent("reset",t,c)}}},{key:"_selectMultipleItems",value:function(t,a,o,l){var _,u,s=this.element.find(a.items).toArray(),r=this._mdEle||this._shiftPressed,d=a.selectedClass,c=this.element.find("."+a.focusClassName);if(this._prevEle&&this._prevEle[0]===r[0]){var p=s.indexOf(r[0]),m=s.indexOf(this._lastFocused[0]),g=s.indexOf(o[0]),h=m<p&&g>p||m>p&&g<p,v=m>p&&g>p&&g<m;if(h||m<p&&g<p&&g>m||v){for(var f=h?m<p?p:m+1:v?m+1:g,k=h?m<p?m:p+1:v?g:m;k<f;k++)this._deselect(n(s[k]),a,t,o);_=p,u=g}else if(p===g)for(var C=m<p?p:m+1,D=m<p?m:p+1;D<C;D++)this._deselect(n(s[D]),a,t,o);else _=s.indexOf(r[0]),u=s.indexOf(o[0])}else _=s.indexOf(r[0]),u=s.indexOf(o[0]);var S=!1;if(_<u)s=s.splice(_,u-_+1),S=!0;else{var T=_;_=u,u=T,s=s.splice(_,u-_+1)}var w=s.filter(function(t){if(!n(t).hasClass(d))return t}),I=w.length;(this._mdEle&&this._movingUp||this._shiftPressed&&!S)&&(w=w.reverse());for(var x=0;x<I;x++)this._select(n(w[x]),a,l,t,!0);var E=n((I?w:s)[I?I-1:s.length-1]);E.length&&(c&&c.length&&this._unfocus(c,a,t),this._focus(E,a,t),this._lastFocused=E),I&&this._dispatchEvent("rangeselect",t,{selList:n(w)}),this._prevEle=r,this._dispatchEvent("change",t,{item:o})}},{key:"_bindMouseDrag",value:function(){var s,r,t=this.element,a=this._opts,o=this,l=a.keyNavigationOptions.direction,i="."+this.name;t.on("mousemove"+i,function(d){s=n(d.target),(r=s.closest(a.items)).length&&o._mdEle&&r[0]===o._mdEle[0]||(o._movingUp="vertical"===l&&d.pageY<=o._mdy||"horizontal"===l&&d.pageX<=o._mdx,t.off("mousemove"+i))})}},{key:"name",get:function(){return"zselectable"}},{key:"props",get:function(){return{multiple:!1,selectedClassName:"is-selected",selectOnFocus:!1,selectOnEnterKey:!0,preventDefaultOnEnterKey:!1,selectOnSpaceKey:!0,allowDragToSelect:!0,allowShiftSelection:!0,keyNavigation:!0,keyNavigationOptions:{direction:"vertical",wrapAround:!1,characterKeyFocus:!0}}}},{key:"EVENTS",get:function(){return["beforeselect","select","beforedeselect","deselect","contextmenu","reset","beforereset","change"]}}]),o}();t.registerComponent("ZSelectable",t.ZKeyboardNavigation,y);var f=function(a){function o(){return _classCallCheck(this,o),_possibleConstructorReturn(this,_getPrototypeOf(o).apply(this,arguments))}return _inherits(o,t.CoreComponent),_createClass(o,[{key:"_init",value:function(a,o){this._fromInit=!0,this._useParent=!1,this._elementId=a[0].id||this._getID(),o.required&&(this._data.required=o.required,this._data.hiddenInputName=t.getName(a,o)),this._listID=o.menuId||o.dropdownListId||(o.randomDropdownListId?this._getID():this._elementId)+"-listbox",this._selected=[],["disabled","multiple","placeholder"].forEach(function(t){o[t]=o[t]||a[0][t]}),o.multiple&&this._initMultiple(),this._opts.value&&(this._initialValue=!0),this._initDS(),this._setInitial(),this._savePrev()}},{key:"_savePrev",value:function(){this._lastValues=this._opts.value}},{key:"_getPrev",value:function(){return this._lastValues}},{key:"_createListBox",value:function(){var i,a=this._opts.dropdownListId,o=this._opts.depCompClassNames.dropdownlist,l=o.toLowerCase();if(a)i=n("#"+a);else{if(this._opts.removeExistingDropdown){var s=n("#"+this._listID);s.length&&t.isComponent(s)&&t[l](s).destroy(!0)}var r=this._getListSettings();i=t["create"+o](r)}var d=this.listInstance=t[l](i);d&&(this.ajaxSource=d.ajaxSource,this.staticData=d.staticData,this._listbox=d.getElement()),this._bindListEvents()}},{key:"_setListBoxAttrs",value:function(t){var a=this._DDInstance();t=t||this._getListSettings(),a.setAttributes(t),this.ajaxSource=a.ajaxSource,this.staticData=a.staticData}},{key:"_preRender",value:function(){var t=this._opts,a=this._data;return(!this._data.rendered||this._domChanged)&&this._onAttrChange(a,t),a.attrs["aria-expanded"]=this._opened,this._setValueData(t,a),this._data}},{key:"_onAttrChange",value:function(a,o){var n=this.element;a.alwaysSetAttrs=!0,a.clearButton=o.clearButton,a.disabled=o.disabled,a.multiple=o.multiple,a.placeholder=o.placeholder||this._getI18NText("placeholder"),a.isCustom="custom"===o.contentType,a.hasText=a.hasIcon=!1,a.isCustom||(a.hasText=-1<o.contentType.indexOf("text"),a.hasIcon=-1<o.contentType.indexOf("image")),a.width=this._getWidth(o.width),a.tabindex=a.disabled?null:o.tabindex||n.attr("tabindex")||0,a.attrs={style:a.width?"width:"+a.width:void 0,title:n.attr("title"),"aria-disabled":o.disabled,"aria-haspopup":"listbox","aria-owns":this._listID,"aria-required":!1,id:this._elementId+"-container",role:this.ARIA_ROLES.CONTAINER,tabindex:a.tabindex},this._opts.multiple&&(a.attrs["aria-multiselectable"]=this._opts.multiple),t._getIconInfo(o.arrowIconClassName||o.arrowIconClass,o.arrowSVGIconId,"#zc__svg--downarrow zselectbox__arrow","zselectbox__icon zselectbox__arrowicon",a.arrow={})}},{key:"_setValueData",value:function(t,a){var o=this._selected;a.label=a.icon=a.noSelection=a.innerHTML=null,a.clearButton&&this._setClrBtnData(t,a),o.length?this._setContentData(o,t,a):a.noSelection=!0}},{key:"_setContentData",value:function(t,a,o){if(a.multiple)o.label=this._getLabelForMultiple(t);else{var n=this._getData(t[0]);o.isCustom?o.innerHTML=this._getCustomContent(n,a.template||n.zinnerHTML||n.innerHTML):this._setIconTextData(n,o),o.attrs["aria-activedescendant"]=n.zitemid}}},{key:"_setIconTextData",value:function(t,a){a.textIcon=t.avatarText,a.hasText&&(a.label=this._getRenderText(t)),a.hasIcon&&(a.newImage?a.image=a.newImage:a.image=this._getProp(t,"image"))}},{key:"_getRenderText",value:function(t){return this._getLabel(t)}},{key:"_getLabel",value:function(t,a){return 0!=a&&(a=a||!this._opts.isLabelHTMLEncoded),this._getProp(t,"label",a)}},{key:"_DDInstance",value:function(){return this.listInstance||this._createListBox(),this.listInstance}},{key:"_postRender",value:function(){this._storeRef(),this._opts.dropdownListLazyLoading||this._createListBox(),this._imgErrHandlerRef=this._imageFailHandler.bind(this),this.container[0].addEventListener("error",this._imgErrHandlerRef,!0),this._fromInit=!1,this._trigger("init")}},{key:"_storeRef",value:function(){this._data.clearButton&&this._storeClrBtn()}},{key:"_postEachRender",value:function(){this._domChanged&&this._storeRef(),this._setTitle(),this._setClassName()}},{key:"_setClassName",value:function(){var t=this._opts,a=this._CLASSES,o=a.CONTAINER+" "+(this.element.attr("class")||"")+" "+(t.className||t.zclassName||"");if("image"===t.contentType?o+=" "+a.ICONONLY:"image-text"===t.contentType&&(o+=" "+a.ICONTEXT),t.rtl&&(o+=" zh-rtl"),t.disabled)o+=" "+a.DISABLED;else if(t.readonly)o+=" is-readonly";else if(this._isFocussed()&&(o+=" "+a.FOCUS,this._opened||this._active)){var n=this._listbox&&this._listbox.data("direction");o+=" "+a.ACTIVE+" "+(n&&(0===n.indexOf("top")?a.DROPUP:a.DROPDOWN))}this._data.clearButton&&(o+=" zselectbox--withclear",this._hideClrBtn()),this._data.className=o}},{key:"_isFocussed",value:function(){var t=document.activeElement;if(t)return(t=n(t))[0]===this.container[0]||this._opened&&this._DDInstance().isFocussed()||this.container.find(t).length}},{key:"_isDecoded",value:function(t){return!/&[a-zA-Z]+;/g.test(t)}},{key:"_setTitle",value:function(){var a=this,o=this._data,n=this._opts,l="",i=this._opts.selectedValue;if(!o.noSelection&&!o.isCustom){var s=this.container[0].querySelector("."+this._CLASSES.TEXT);("image"===n.contentType||s&&s.clientWidth<s.scrollWidth)&&(this._opts.multiple?this._opts.isTitleHTMLEncoded?i.forEach(function(o){0<i.indexOf(o)&&(l+=", "),l+=a._isDecoded(o)?o:t.decodeHTML(o)}):i.forEach(function(t){0<i.indexOf(t)&&(l+=", "),l+=a._getLabel(a._getData(a._selected[i.indexOf(t)]),!1)}):l=this._opts.isTitleHTMLEncoded?this._isDecoded(this._selected[0].optData.label)?this._getData(this._selected[0]).label:t.decodeHTML(this._getData(this._selected[0]).label):this._getLabel(this._getData(this._selected[0]),!1))}this.container[0].title=l}},{key:"_isNotNull",value:function(t){return _get(_getPrototypeOf(o.prototype),"_isNotNull",this).call(this,t)&&(!!this._opts.considerEmptySpacedValue||!/^\s*$/.test(t))}},{key:"_getWidth",value:function(t){if(t=t||this.element[0].style.width)return isNaN(t)?t:t+"px"}},{key:"_getListSettings",value:function(){var t=this._opts,a=t.search,o=t.dropdownList,l=o.checkedIcon;this._isCheckBoxType=l=l||t.multiple&&!this._isNotNull(t.checkedIcon);var i=_objectSpread({},t.dataMapping),s={id:this._listID,multiple:t.multiple,selectionLimit:t.selectionLimit,closeOnSelect:t.closeOnSelect,forElement:this.container,rtl:t.rtl,search:a,dataMapping:i,moreResultsAction:a.moreResultsAction,showNoResultsMessage:a.showNoResultsMessage,searchFieldOptions:o.searchFieldOptions||{}};return n.extend(s,o),void 0===s.focusSelectedItemOnOpen&&(s.focusSelectedItemOnOpen=!t.multiple),"contains"===a.criteria&&(s.criteriaPrecedence=t.criteriaPrecedence.length?t.criteriaPrecedence:["startswith","wordstartswith","contains"]),s.className=(s.className||"")+" "+this._CLASSES.MENU.CLASSNAME,s.contentType=s.contentType||t.contentType,s.checkedIcon=l,s.template=s.template||t.template,s.position=s.position||s.direction,s.positionAlterable=s.positionAlterable||"auto"===s.position&&"flipsidefit",(this._fromInit||this._resetValue||!this._dsInited)&&(s.value=this._getReselectValue()),["showSearchField","filterByCSSSelector","lazyLoading","viewPerPage","sort","sortBy","sortOrder","customSorter","cacheData","isResponseFiltered","serverSearch","customSearch","messages","footerSelectable","headerSelectable"].forEach(function(a){return s[a]=t[a]}),this._updateListEvents(s),i.text=i.label,i.groupLabel=i.optgroupLabel,i.label=i.optgroupLabel=null,this.ajaxSource||(i.value="zitemid"),s.focusFirstItemOnOpen=s.search.focusFirstResult,this._dsInited||(n.extend(!0,s,this._listDSAPI),this._dsInited=!0),s}},{key:"_updateListEvents",value:function(t){var a=this;["itemClick","itemHover","itemFocus","beforeUpdate","update","noResults","beforeSearch","searcherror","searchsuccess","change","select","deselect","beforeSelect","beforeDeselect","input"].forEach(function(o){return t[o.toLowerCase()]=a["_"+o+"Handler"].bind(a)}),["BeforeOpen","BeforeClose","ImageError","Open","Close","BeforeKeyDown"].forEach(function(o){return t[o.toLowerCase()]=a["_list"+o+"Handler"].bind(a)}),t.beforefocus=function(){a._opts.showSearchField||a.container.focus()}}},{key:"_inputHandler",value:function(t,a){t=t.originalEvent,this._trigger("input",t,a)}},{key:"_searcherrorHandler",value:function(t,a){t=t.originalEvent,this._trigger("searcherror",t,a)}},{key:"_searchsuccessHandler",value:function(t,a){t=t.originalEvent,this.staticData&&(this._dataFetched=!0,this._updateData(a.results,!0)),this._trigger("searchsuccess",t,a)}},{key:"_beforeSearchHandler",value:function(t,a){return t=t.originalEvent,this._trigger("beforesearch",t,a)}},{key:"_noResultsHandler",value:function(t,a){return t=t.originalEvent,this._trigger("noresults",t,a)}},{key:"_beforeUpdateHandler",value:function(t,a){t=t.originalEvent,this._trigger("beforedropdownlistupdate",t,a)}},{key:"_updateHandler",value:function(t,a){t=t.originalEvent,this._trigger("dropdownlistupdate",t,a)}},{key:"_bindListEvents",value:function(){this._addEvents({listBlur:"focusout"},this._listbox)}},{key:"_listBlurHandler",value:function(){this._blurHandler()}},{key:"_imageFailHandler",value:function(t){var a=t.target;if("IMG"===a.tagName){var o=a.src,n={optionData:{image:o,imageElement:a}};this._trigger("imageerror",t,n);var l=n.optionData,i=l.avatarText,s=l.image!==o;(s||i)&&(s?this._data.newImage=image:i&&(this._data.avatarText=i),this._updateView(),this._data.newImage=null,this._data.avatarText=null)}}},{key:"_listImageErrorHandler",value:function(){return this._trigger.apply(this,["optionimageerror"].concat(Array.prototype.slice.call(arguments)))}},{key:"_listBeforeCloseHandler",value:function(t){return t=t.originalEvent,this._isFocussed()&&this._setFocus(!1,!0),this._trigger("beforedropdownlistclose",t)}},{key:"_listBeforeOpenHandler",value:function(t){if(t=t.originalEvent,this._DDInstance().setAttribute("minWidth",this._opts.dropdownList.minWidth||this.container[0].offsetWidth),!this._opened)return this._trigger("beforedropdownlistopen",t)}},{key:"_listBeforeKeyDownHandler",value:function(a){var o=a.originalEvent;o&&o.keyCode===t.keyCode.TAB&&o.preventDefault()}},{key:"search",value:function(t,a){if(a.searchQuery=t,this._opts.dropdownListId){a.forElement=this.container;var o={};this._updateListEvents(o),this._DDInstance().setAttributes(o)}this._DDInstance().open(a)}},{key:"_listCloseHandler",value:function(t){t=t.originalEvent,this._opened=!1,this._setClassName(),this._setExpandAttr(),this._trigger("dropdownlistclose",t)}},{key:"_focusList",value:function(){var t=this;clearTimeout(this._focusListTimer),this._focusListTimer=setTimeout(function(){t._DDInstance().setFocus()},100)}},{key:"_listOpenHandler",value:function(t){t=t.originalEvent;var a=this._opened;this._opened=!0,this._setClassName(),this._focusList(),this._setExpandAttr(),a||this._trigger("dropdownlistopen",t)}},{key:"_setExpandAttr",value:function(){this._opened?this.container.attr("aria-expanded",this._opened):this.container.removeAttr("aria-expanded")}},{key:"_getSelectionFromDS",value:function(){var t=this._dataSource.options,o=function(t){return t.selected};return this._opts.multiple?t.filter(o):t.find(o)}},{key:"_isOptionSelectable",value:function(t){return(this._opts.allowDisabledOptionsForSelection||!t.disabled)&&(this._opts.allowHiddenOptionsForSelection||!t.hidden)&&!t.separator}},{key:"_setInitial",value:function(){var t=this,a=this._opts,o=this._isNotNull(a.value)?a.value:a.selectedValue;if(this._isNull(o)){var n=this._dataSource.options;if(n.length){var l=a.selectedIndex;null===l?(o=this._getSelectionFromDS(),!a.multiple&&!o&&(o=n.find(function(a){return t._isOptionSelectable(a)}))):-1<parseInt(l)&&(o=this._getDataAt(l))}}this.isCE||(this.element[0].selectedIndex=-1),(o=this._toArr(o)).length&&(a.multiple?a.selectionLimit&&(o=o.splice(-1*a.selectionLimit)):o=[o[0]]),this._allowTagCreation=!0,o.map(function(a){(a=t._getSelectableOption(a))&&(t._selected.push(a),t._addedByComponent=!0,a.selected=!0,t._addedByComponent=!1)}),this._allowTagCreation=!1,this._updateValues()}},{key:"_getDataAt",value:function(t){var a=this;return this._toArr(t).map(function(t){return a._dataSource.options[t]})}},{key:"_initDS",value:function(){if(this.ajaxSource=void 0,!this._dsInited){var t=this._opts,a=this._initialDS=this._getDataSource(),o=t.dataSource,n=t.options;this._dataFetched=!0,this.ajaxSource=this._isAjaxSource(t.dataSource),Array.isArray(n)&&(n=this._cloneObject(n),a=a.concat(n)),o&&(o.URL||o.search)&&(this._dataFetched=!1),this._updateData(a)}}},{key:"_updateData",value:function(t,a){this._isGrouped=!1;var o=this._dataSource=this._splitDS(t),n=o.header,l=o.footer;a&&(n=this._listDSAPI.headerItems,l=this._listDSAPI.footerItems),this._listDSAPI={items:o.body,headerItems:n,footerItems:l,dataSource:this._opts.dataSource},this._updateLocalDS()}},{key:"_getListType",value:function(){return this._opts.dropdownList.contentType||this._opts.contentType}},{key:"_getDatas",value:function(t){var a=this;return t.map(function(t){return a._getData(t)})}},{key:"_getData",value:function(t){var a=t.getAttribute("data-zitemid");if(t.optData||(t.optData=this._dataSource.options.find(function(t){return t.zitemid===a})),t.optData[this._opts.dataMapping.image]&&-1<this._opts.contentType.indexOf("image")){var o=this.listInstance&&this.listInstance._data.items.find(function(t){return t.normalisedData.zitemid===a});if(o&&t.optData[this._opts.dataMapping.image]!=o.image)return o}return t.optData}},{key:"_genTagData",value:function(a,o){var l=this;return a.map(function(a){var s,r,d,i=t._getOpts(a);(i.id=a.id,i.separator||(a.tagName.toLowerCase()===l._SELECTORS.OPTGROUP?(s=!0,r=a.label):(r=a.textContent.trim()||a.label||"",i.selected=i.selected||a.selected),i.disabled=i.disabled||a.disabled,i.label=l._isNotNull(i.label)?i.label:r),l._setProp(i,"label",i.label),l._setProp(i,"value",a.value),s&&l._setProp(i,"optgroupLabel",i.label),i.className=i.className||a.className,i.hidden=a.hasAttribute("hidden"),i.title=a.getAttribute("title"),i.style=a.getAttribute("style"),i.zitemid)||(d=i.id?l.name+"-"+l._listID+"-option-"+i.id:l._getID(null,l._listID+"-option"),i.zitemid=d);if(l._mapReqData(i,s,o),s){var c=l._getValidSubOptions(n(a));(!l.isCE||c[0]._initialized)&&(i.options=l._genTagData(c,i))}return i.zpopulated=!0,l._addedByComponent=!0,l._updateOptionAttrs(a,i),l._addedByComponent=!1,l.isCE&&!l._opts.isLyteComponent&&a.saveParentIns(l.element),a.optData=i,i})}},{key:"_getItemId",value:function(t){return _get(_getPrototypeOf(o.prototype),"_getItemId",this).call(this,t,this._listID)}},{key:"_bindEvents",value:function(){this._addEvents({focus:"focusin",containerBlur:"focusout",keyDown:"keydown",click:"click"}),this._addEvents({mouseDown:"mousedown"},this._arrowTarget),this._handleFocus(this.container)}},{key:"_clickHandler",value:function(){this._opened&&this._focusList()}},{key:"_focusHandler",value:function(t){this._setClassName(),this._trigger("focus",t)}},{key:"_keyDownHandler",value:function(a){var o=this._opts;if(!o.disabled&&!o.readonly){if(this._opened)return this._DDInstance().handleKeyCode(a);var n=t.keyCode,l=a.keyCode;switch(l){case n.SPACE:return this._open(a),void a.preventDefault();case n.ENTER:return void this._open(a);case n.DOWN:case n.UP:return this._open(),void a.preventDefault();default:this._isAlphaNumericKey(a)&&(o.showSearchField?l!==n.DELETE&&l!==n.BACKSPACE&&this.search(r(l),{event:a,updateField:!1}):o.selectOnCharPress&&this._selectItemOnKeydown(a))}}}},{key:"_mouseDownHandler",value:function(t){this._opts.disabled||this._opts.readonly||t.button||(this[this._opened?"_close":"_open"](t,!0),t.preventDefault())}},{key:"_containerBlurHandler",value:function(t){this._blurHandler(t)}},{key:"_blurHandler",value:function(t){clearTimeout(this._focusoutTimer),this._focusoutTimer=setTimeout(this._afterBlur.bind(this,t))}},{key:"_afterBlur",value:function(t){this.container&&!this._isFocussed()&&(this._close(t),this._setClassName(),this._trigger("blur",t))}},{key:"_itemClickHandler",value:function(t){var a=t.detail;t=t.originalEvent;var o=a.item||a.menuitem,n=a.itemData||{};a={menuitem:o,optionData:n},(n.isHeader||n.isFooter)&&this.isCE&&this._trigger("addoptionclick",t,a),this._trigger("optionclick",t,a)}},{key:"_beforeSelectHandler",value:function(t,a){var o=t.detail;t=t.originalEvent;var n=o.itemData,l=a?"select":"deselect";return o={optionData:n,menuitem:o.item},this._trigger("before"+l,t,o)}},{key:"_beforeDeselectHandler",value:function(t){return this._beforeSelectHandler(t,!1)}},{key:"_selectHandler",value:function(t,a){var o=t.detail;t=t.originalEvent;var n=o.itemData,l=a?"select":"deselect";return o={optionData:n,menuitem:o.item},this._setValueFromHandler(n,t,a),this._trigger(l,t,o)}},{key:"_changeHandler",value:function(t){var a=t.detail;return t=t.originalEvent,this._updateView(),a={optionData:a.itemData,menuitem:a.item,previousValue:this._getPrev()},this._savePrev(),this._trigger("change",t,a)}},{key:"_deselectHandler",value:function(t){return this._selectHandler(t,!1)}},{key:"_setValueFromHandler",value:function(t,a,o){return this[o?"_selectOption":"_deselectOption"](t,a)}},{key:"_itemHoverHandler",value:function(t){var a=t.detail;t=t.originalEvent;var o=a.itemData;return this._trigger("optionhover",t,{item:a.item,optionData:o})}},{key:"_itemFocusHandler",value:function(){}},{key:"_getOptionForData",value:function(t,a){var o=!0;if(this._initialValue||this._dataFetched){var n=this._getMatchData(t);n?t=n:o=!1,this._opts.dataSource.search&&(this._initialValue=!1)}var l=this._getItemId(t),i=this._getOptionByZItemId(l);if(!i&&this._allowTagCreation)if(o){if(!this._dataFetched&&this.listInstance){var s=this._DDInstance().getElement().find("#"+l);s&&s.length&&(t=s[0].itemData.normalisedData)}i=this._addOptionTag(t)}else this._opts.acceptNewValues&&(i=this._acceptNewValues(t,a));return i}},{key:"_getOptionByZItemId",value:function(t){return this.element.find('[data-zitemid="'+t+'"]')[0]}},{key:"_getMatchData",value:function(t){var a=this,o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this._dataSource.options,n="value";if("object"===_typeof(t))for(var l=["zitemid","id"],s=0;s<l.length;s++){var r=l[s],d=this._getProp(t,r);if(this._isNotNull(d)){n=r,t=d;break}}else t+="";return o.find(function(o){return a._getProp(o,n)+""===t})}},{key:"_getValidSubOptions",value:function(t,a){var o=this._SELECTORS,n=[o.OPTION];return a&&n.push(o.OPTGROUP),this.isCE&&(n.push.apply(n,[o.OPTIONSEPARATOR,o.ADDOPTION]),t.is(this.element)&&n.push.apply(n,[o.OPTIONSHEADER,o.OPTIONSFOOTER,o.OPTIONSBODY])),t.children(n.join(",")).toArray()}},{key:"_getDataSource",value:function(){var t=this,a=this._getValidSubOptions(this.element,!0);if(this.isCE){var o=this._SELECTORS,l=[],i=new RegExp("(".concat(o.OPTIONSHEADER,"|").concat(o.OPTIONSFOOTER,"|").concat(o.OPTIONSBODY,")"),"i");if(a.forEach(function(a){i.test(a.tagName)?l.push.apply(l,_toConsumableArray(t._getValidSubOptions(n(a),!0))):l.push(a)}),!l.length||!l[0]._initialized)return[];a=l}return this._genTagData(a.filter(function(t){return!t.getAttribute("data-ztemp")}))}},{key:"_splitDS",value:function(t){var a=this,o={body:[],header:[],footer:[]};return t.forEach(function(t){(t=a._getCompleteData(t)).isFooter?o.footer.push(t):t.isHeader?o.header.push(t):(o.body.push(t),t.options&&(a._isGrouped=!0))}),o}},{key:"_dataModifyHandler",value:function(){this._updateLocalDS(),this._setListBoxAttrs(_objectSpread({},this._listDSAPI,{},{value:this._getValueToSet(this._selected)})),this._render()}},{key:"_getReselectValue",value:function(){return this._getValueToSet(this.getValue(!0))}},{key:"_updateLocalDS",value:function(){var t=this,a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this._dataSource,o=a.options=[],n=function(a,o,n){a.forEach(function(a){a.options?(o.push.apply(o,_toConsumableArray(a.options)),n&&(t._isGrouped=!0)):o.push(a)})};n(a.body,o,!0),this._opts.footerSelectable&&n(a.footer,o,!1),this._opts.headerSelectable&&n(a.header,o,!1),this._dataSource=a,this._listDSAPI.dataStructure=this._isGrouped?"nested":"flat"}},{key:"_selectOption",value:function(t,a){this._allowTagCreation=!0;var o=this._getSelectableOption(t,a);this._allowTagCreation=!1;var n=this._opts;this._addedByComponent=!0,n.multiple||(this._selected=[]),o.selected=!0,this._fromUI=!this.listInstance._UI,this.listInstance._UI=!1,this._selected.push(o),this._addedByComponent=!1,this._updateValues()}},{key:"_deselectOption",value:function(t){var a=this._getMatchedOptions(t)[0];if(this._selected.length){if(!a){var o=this._getItemId(t);a=this._selected.find(function(t){return t.getAttribute("data-zitemid")===o})}if(a){var n=this._selected.indexOf(a);this._addedByComponent=!0,a.selected=!1,this._addedByComponent=!1,-1!==n&&this._selected.splice(n,1)}}this._updateValues()}},{key:"_updateValues",value:function(){var t=this,a=this._opts;if(this._selected.length){a.selectedValue=a.value=[],a.selectedIndex=[];var o=this._getDatas(this._selected);this._optDatas=o,this._selected.forEach(function(n,l){var i=t._getProp(o[l],"value");a.value.push(i),a.selectedIndex.push(t._dataSource.options.indexOf(o[l]))}),a.multiple||(a.value=a.selectedValue=a.value[0],a.selectedIndex=a.selectedIndex[0])}else a.value=a.selectedValue=a.multiple?[]:"",this._addedByComponent=!0,a.selectedIndex=this.element[0].selectedIndex=-1,this._addedByComponent=!1;this._updateView(!0)}},{key:"_updateView",value:function(t){clearTimeout(this._renderTimer),!this._data.rendered||this._skipRender||this._domChanged||(t?this._renderTimer=setTimeout(this._render.bind(this)):this._render())}},{key:"_trigger",value:function(t,a,o){if(!this._fromInit){(o=o||{}).selectedOptions=this._selected,o.dropdownList=this.getDropdownList(),o.selectedOptionsData=this._getDatas(this._selected),o.selectedValue=o.value=this._opts.value||"",o.selectedIndex=this._opts.selectedIndex;var n=o.optionData;return n&&(o.optionData=n=_objectSpread({},n),n.element=this._getOptionByZItemId(n.zitemid)),this._dispatchEvent(t,a,o,void 0,!!a)}return!0}},{key:"_getMatchedOptions",value:function(t){var a=this,o=this._toArr(t,!0).map(function(t){return a._getMatchedOption(t)});return this._removeNulls(o)}},{key:"_getValidVal",value:function(t){return t instanceof n&&(t=t[0]),t}},{key:"_getMatchedOption",value:function(t,a){if(t=this._getValidVal(t),this._isNotNull(t))return t.nodeType?this._contains(t)&&t:this._getOptionForData(t,a)}},{key:"_getMatchDataForUpdate",value:function(t,a,o){if(t=this._getValidVal(t),this._isNotNull(t))return t.nodeType?t.optData:this._getMatchData(t,o||this._dataSource[a?"body":"options"])}},{key:"_contains",value:function(t){return this.element[0].contains(t)}},{key:"_isSelected",value:function(t){return-1!==this._selected.indexOf(t)}},{key:"_setValue",value:function(t,a){a=a||{};var o=this._getValueToSet(t,a.event);this._DDInstance().setValue(o,a),0==a.triggerEvent&&this._savePrev(),o&&a.fromCharKeyPress&&(a.event.detail={itemData:o[0]},this._itemClickHandler(a.event))}},{key:"_getValueToSet",value:function(t,a){var o=this,n=[];return(t=this._toArr(t)).forEach(function(t){o._allowTagCreation=!0;var l=o._getSelectableOption(t,a);o._allowTagCreation=!1,l&&n.push(l.optData)}),n}},{key:"_desetValue",value:function(t,a){t=this._toArr(t);for(var l,o=[],n=0;n<t.length;n++)(l=this._getSelectableOption(t[n],a))&&this._isSelected(l)&&o.push(l.optData);this._DDInstance().deselect(o,a)}},{key:"_getSelectableOption",value:function(t,a){var o=this._getMatchedOption(t,a);if(o){var n=o.optData;return n.selectable&&this._isOptionSelectable(n)&&o}}},{key:"_addOptionTag",value:function(t){t=this._getCompleteData(t);var a=n("<"+this._SELECTORS.OPTION+"/>").attr({selected:t.selected,id:t.id,value:this._getProp(t,"value")})[0];return this._updateOptionAttrs(a,t,!0),a.optData=t,this.isCE?this._appendTag(a):this.element.append(a),a}},{key:"_updateOptionAttrs",value:function(t,a,o){this._addedByComponent=!0;var l={"data-zitemid":a.zitemid};o&&(l["data-ztemp"]=!0),a.isHeader&&(l["data-is-header"]=!0),a.isFooter&&(l["data-is-footer"]=!0),n(t).attr(l),this._addedByComponent=!1}},{key:"_getCompleteData",value:function(t,a,o){var n=this;if(t.nodeType)return this._genTagData([t],o)[0];if(/(number|string)/.test(_typeof(t))){var l={};this._setProp(l,"label",t),t=l}return this._mapReqData(t,a,o),t.options&&(t.options=t.options.map(function(a){return n._getCompleteData(a,!1,t)})),t}},{key:"_mapReqData",value:function(t,a,o){var n=t,l=this._getListType();n.zitemid=this._getItemId(t);var i=this._getProp(t,"label");i=this._isNotNull(i)?i+"":"";var s=this._getProp(t,"value");return s=this._isNotNull(s)?s+"":i,this._setProp(t,"label",i),this._setProp(t,"value",s),-1===Object.keys(t).indexOf("label")&&(t.label=i),n.selectable=!1,(n.isHeader||n.isFooter)&&(n.selectable=n.isHeader&&this._opts.headerSelectable||n.isFooter&&this._opts.footerSelectable,n.custom=!0),o?(n.groupName=this._getProp(o,"value"),n.hidden=o.hidden||t.hidden,n.disabled=o.disabled||t.disabled):(n.options||a)&&(n.options=n.options||[]),n.isOptGroup||n.separator||n.isHeader||n.isFooter||(n.title=this._mapJSONToData(t,this._opts.dataMapping.title)||t.title,void 0===n.title&&(n.title="image"===l?n.label:void 0),n.selectable=!0,n.selected=t.selected),n}},{key:"_close",value:function(t){this._DDInstance().close(t)}},{key:"_open",value:function(t){this.search("",{event:t,updateField:!1})}},{key:"_setFocusFn",value:function(t){!t&&this._opened?this._focusList():this.container.focus()}},{key:"_setFocus",value:function(t,a){this._trigger("beforefocus")&&(this._setFocusFn(a),t&&(this.container.addClass(this._CLASSES.FOCUS),this.container.addClass("has-kfocus")))}},{key:"_selectItemOnKeydown",value:function(t){var a=this,o=this._opts;if(this.staticData&&!o.multiple){var n=o.selectedIndex;o.sortOptions?this._DDInstance().DSInstance.fetch(function(o){if(-1<n){var l=a._dataSource.options[n].zitemid;o.find(function(t,a){if(t.zitemid===l)return n=a,!0})}a._selectNextMatchingItem(t,o,n)}):this._selectNextMatchingItem(t,this._dataSource.options,n)}}},{key:"_selectNextMatchingItem",value:function(t,a,o){var n=this;if(a.length){var l=o+1,i=t.key,s=(new Date).getTime();if(this._prevKey)300>s-this._prevTimeStamp&&this._prevKey!==i&&(i=this._prevKey+i,l--);if(this._prevTimeStamp=s,this._prevKey=i,0<=l){var c=this._getMatchingRegex(i,{criteria:"startswith",caseSensitive:!1}),_=function t(o,l){for(var s,i=o;i<l;i++)if(!(s=a[i]).hidden&&!s.disabled&&n._getProp(s,"label").match(c))return s;return o&&t(0,o)}(l,a.length);_&&this._setValue(_,{event:t,fromCharKeyPress:!0})}}}},{key:"_setAttribute",value:function(t,a){this._addedByComponent=!0,"selectedIndex"===t?this._setAttribute("value",this._getDataAt(a)):"value"===t||"selectedValue"===t?(this._domChanged=!0,this.setValue(a,{clearOtherValues:!0})):this._setAdvAttribute.apply(this,arguments),this._addedByComponent=!1}},{key:"setFocus",value:function(){this._opts.disabled||this._opts.readonly||this._setFocus(!0)}},{key:"close",value:function(){this._close()}},{key:"open",value:function(){this._opts.disabled||this._opts.readonly||(this.setFocus(),this._open())}},{key:"setValue",value:function(t,a){this._setValue(t,a)}},{key:"deselectAllOptions",value:function(t){this._DDInstance().deselectAll(t)}},{key:"selectAllOptions",value:function(t){this._DDInstance().selectAll(t)}},{key:"deselectOption",value:function(){this._desetValue.apply(this,arguments)}},{key:"getData",value:function(t){return this._getDatas(t)}},{key:"getValue",value:function(t){return t?this.getData(this._selected):this._opts.value}},{key:"getOptionData",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.selectedValue;return 0==this._selected.length?t:this._optDatas}},{key:"getOptions",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"body",a=this._dataSource;return"header"===t?a.header:"footer"===t?a.footer:"body"===t?a.body:a.header.concat(a.body).concat(a.footer)}},{key:"refresh",value:function(){this._dsInited=!1,this._buildData()}},{key:"_buildData",value:function(){var t=this;this._initDS();var a=this._getSelectionFromDS();this._allowTagCreation=!0,a=this._getSelectableOption(a),this._allowTagCreation=!1,!this._fromUI&&a&&this._selected.length&&(this._selected=[],this._selected.push(a)),this._fromUI=!1,this._updateValues();var o=!this._dsInited;if(this._setListBoxAttrs(),o){var n=[];this._selected.forEach(function(a){var o=t._getOptionByZItemId(a.getAttribute("data-zitemid"));o&&n.push(o)}),this._selected=n}this._render(),this._domChanged=this._resetValue=!1}},{key:"clearCache",value:function(){this._DDInstance().clearCache()}},{key:"getDropdownList",value:function(){return this._listbox&&this._listbox[0]}},{key:"_destroy",value:function(){clearTimeout(this._renderTimer),clearTimeout(this._focusoutTimer),clearTimeout(this._focusListTimer),this.listInstance&&this._DDInstance().destroy(!0),this.container[0].removeEventListener("error",this._imgErrHandlerRef),this.element.find("[data-ztemp]").remove(),this._removeEvents("",this._arrowTarget)}},{key:"_initMultiple",value:function(){var t=this._opts;this.element[0].multiple=!0;var a=t.selectedIndex;isNaN(parseInt(a))||(t.selectedIndex=(a+"").split(","));var o=this._isNotNull(t.value)?t.value:t.selectedValue;"string"==typeof o&&(t.value=o.split(t.delimiter)),this._data.hasText=!0}},{key:"_getLabelForMultiple",value:function(t){var a=this;if(!this.ajaxSource&&this._dataSource.options.filter(function(t){return!t.separator}).every(function(t){a._skipTagCreation=!0;var o=a._getOptionForData(t);return a._skipTagCreation=!1,o&&o.selected}))return this._getI18NText("allOptionsSelected");return t.map(function(t){return a._getLabel(a._getData(t))}).join(", ")}},{key:"getValues",value:function(t){return t?this.getValue():_toConsumableArray(this._opts.value)}},{key:"setValues",value:function(t,a){return a?void this.setAttribute("value",t):this.setValue(t)}},{key:"_setClrBtnData",value:function(t,a){if(!a.rendered||this._domChanged){var o=t.clearButtonIconClassName||t.clearButtonIconClass;a.clearButton={iconClassName:o,SVGIconId:t.clearButtonSVGIconId||!o&&"zc__svg--clear",className:this._CLASSES.CLEARBUTTON,disabled:t.disabled,templateRender:!0,rtl:this.rtl,isCE:this.isCE,title:this._getI18NText("clear"),customAttributes:{tabindex:-1}}}}},{key:"_storeClrBtn",value:function(){var t=this._data.clearButton.mainElement=n(this.container[0].querySelector(".".concat(this._CLASSES.CLEARBUTTON)));this._bindClrBtn(t)}},{key:"_bindClrBtn",value:function(t){this._addEvents({clrBtnMouseDown:"mousedown"},t)}},{key:"_clrBtnMouseDownHandler",value:function(t){t.button||(this.deselectAllOptions(t),t.stopPropagation(),t.preventDefault(),this._setFocus())}},{key:"_hideClrBtn",value:function(){var t=this._data;t.clearButton.mainElement[0].style.display=t.noSelection||t.disabled?"none":""}},{key:"_addOption",value:function(a,o,l,i){var s=this;a=this._toArr(a);var r=this.isCE?"Z-OPTGROUP":"OPTGROUP",d=n(l)[0]||{},c=(a=a.map(function(a){var n,o=a.parentElement;return i||(!a.nodeType&&(o=d.tagName===r?d:null),o&&o.tagName===r&&(n=t._getOpts(o))),s._getCompleteData(a,i,n)}))[0].isHeader?"header":a[0].isFooter?"footer":"body";this.ajaxSource&&"body"===c||this[!i&&this._isGrouped&&"body"===c?"_addOptionToGroup":"_addOptionDirectly"](a,o,l,c)}},{key:"_addOptionDirectly",value:function(t,a,o,n){var i,l=this._dataSource[n];"number"==typeof a?i=a:o&&(i=l.indexOf(this._getMatchDataForUpdate(o,null,l)),"after"===a&&i++),this._addDatasAt(t,l,i)}},{key:"_addDatasAt",value:function(t,a,o){void 0===o||-1===o?a.push.apply(a,_toConsumableArray(t)):a.splice.apply(a,[o,0].concat(_toConsumableArray(t)))}},{key:"_getOptionType",value:function(t){return/(header|footer)/.test(t)?t:"body"}},{key:"_removeOptionsAt",value:function(t,a,o){var n=this;if(!this.ajaxSource||"header"===o||"footer"===o){(t=t.filter(function(a,o){return-1<a&&t.indexOf(a)===o})).sort(function(t,a){return a-t}),o=this._getOptionType(o);var l=this._dataSource[o];t.forEach(function(t){if(n._isGrouped&&!a&&"body"===o){var i=n._dataSource.options[t];if(t=void 0,i){var s=n._getGroupAndIndex(i);t=s.index,l=s.items}}n._removeDataAt(t,l)})}}},{key:"_removeDataAt",value:function(t,a){if(void 0!==t&&-1<t&&!this._opts.acceptNewValues){var o=this._getOptionByZItemId(a[t].zitemid),l=a[t];l.selected&&this.deselectOption(l),o&&n(o).remove(),a.splice(t,1)}}},{key:"_removeOption",value:function(t,a,o){var n=this;o=this._getOptionType(o);var l=a?this._dataSource.body:"body"===o?this._dataSource.options:this._dataSource[o],i=(t=this._toArr(t)).map(function(t){return l.indexOf(n._getMatchDataForUpdate(t,a,l))});this._removeOptionsAt(i,a,o)}},{key:"removeAllOptions",value:function(t){var a=this._dataSource;"header"===t||"footer"===t?this.removeOption(a[t]):!this.ajaxSource&&(this.deselectAllOptions(),this.element.empty(),this._opts.options=[],this._dsInited=!1,this._buildData())}},{key:"addOption",value:function(t,a,o){this._addOption(t,a,o),this._dataModifyHandler()}},{key:"addOptionAt",value:function(t,a,o){this._addOption(t,a,o),this._dataModifyHandler()}},{key:"removeOption",value:function(t,a){this._isNotNull(t)?(this._removeOption(t,void 0,a),this._dataModifyHandler()):this.removeAllOptions(a)}},{key:"removeOptionAt",value:function(t,a){this._removeOptionsAt(this._toArr(t),null,a),this._dataModifyHandler()}},{key:"_addOptionToGroup",value:function(t,a,o){var n,l;if("number"==typeof a)if(o)n=a,l=this._getMatchDataForUpdate(o,!0).options;else{var i=this._dataSource.options[a];if(i){var s=this._getGroupAndIndex(i);n=s.index,l=s.items}}else if(o)if("append"===a)l=this._getMatchDataForUpdate(o,!0).options;else{var r=this._getMatchDataForUpdate(o);if(r){var d=this._getGroupAndIndex(r);n=d.index,l=d.items,"after"===a&&n++}}this._addDatasAt(t,l,n)}},{key:"removeOptGroup",value:function(t){this._removeOption(t,!0),this._dataModifyHandler()}},{key:"addOptGroup",value:function(t,a){this._addOption(t,"before",a,!0),this._dataModifyHandler()}},{key:"_getGroupAndIndex",value:function(t){var a=this._getMatchDataForUpdate(t.groupName,!0);return{items:a.options,index:a.options.indexOf(t)}}},{key:"_acceptNewValues",value:function(t,a){var o={newOptionData:t},n=this._opts.newValuePattern;return n&&!n.test("string"==typeof t?t:this._mapJSONToData(t,this._opts.dataMapping.label))||!this._trigger("newvalueadd",a,o)?void this._setPrevValue(a):this._addOptionTag(o.newOptionData)}},{key:"disableOptions",value:function(t){this.setOptionAttributes(t,"disabled",!0)}},{key:"enableOptions",value:function(t){this.setOptionAttributes(t,"disabled",!1)}},{key:"_disable",value:function(t){t&&this.close(),this.element[0].disabled=!!t,this._domChanged=!0}},{key:"_setOptionAttribute",value:function(t,a,o){var n=this;if(t){var l=!1;if("options"===a)t.options=o,this._getCompleteData(t);else if("value"===a||"label"===a)t[a]=o,l=!0;else if("disabled"===a||"hidden"===a)t[a]=o,l=!0,t.options&&t.options.forEach(function(t){return n._setOptionAttribute(t,a,o)});else{if("selected"===a)return void(o?this._setValue(t):this.deselectOption(t));t[a]=o}var i=this._getOptionForData(t);i&&l&&(i[a]=o),this._updateDataVar=!0}}},{key:"setOptionAttributes",value:function(t,a,o){var l=this;this._addedByComponent=!0,this._updateDataVar=!1,this._ajaxSource||(this._toArr(t).forEach(function(t){var i=l._getMatchDataForUpdate(t,null,l._isGrouped?l._dataSource.body.concat(l._dataSource.options):null);if("object"!==_typeof(a)||n.isEmptyObject(a))l._setOptionAttribute(i,a,o);else for(var s in a)l._setOptionAttribute(i,s,a[s])}),this._updateDataVar&&this._dataModifyHandler()),this._addedByComponent=!1}},{key:"_setAdvAttribute",value:function(t,a){var o=this._opts;switch(t){case"acceptNewValues":case"newValuePattern":case"selectOnCharPress":o[t]=a;break;case"messages":o[t]=n.extend({},o.messages,a),this._setListBoxAttrs({messages:o[t]});break;case"arrowIconClassName":case"arrowSVGIconId":case"clearButton":case"placeholder":case"width":o[t]=a,this._domChanged=!0;break;case"multiple":this.element[0].multiple=a,o[t]=a,this._reInit=this._resetValue=!0;break;case"selectionLimit":o[t]=a,this._reInit=this._resetValue=!0;break;case"options":case"dataSource":this.element.find("[data-zitemid]:not([data-is-header]):not([data-is-footer])").remove(),o[t]=a,this._reInit=!0,this._dsInited=!1;break;case"dataMapping":o[t]=a,this._reInit=!0,this._dsInited=!1;break;case"isResponseFiltered":case"serverSearch":case"cacheData":case"viewPerPage":case"lazyLoading":case"filterByCSSSelector":case"sort":case"sortBy":case"sortOrder":case"customSorter":case"customSearch":case"contentType":case"dropdownList":case"showSearchField":case"search":case"rtl":case"template":case"criteriaPrecedence":o[t]=a,this._reInit=!0;break;default:o[t]=a}}},{key:"_updateMenuAttribute",value:function(t,a){this._menu&&this._menuInstance.setAttribute(t,a)}},{key:"name",get:function(){return"zselect"}},{key:"attrs",get:function(){return{closeOnSelect:!0,multiple:!1,selectionLimit:0,selectedIndex:null,selectedValue:null,value:null,placeholder:null,disabled:!1,contentType:"text",template:null,arrowIconClass:"",arrowSVGIconId:"",selectOnCharPress:!0,sort:!1,sortBy:null,sortOrder:"asc",width:null,isLabelHTMLEncoded:!1,cacheData:!0,isResponseFiltered:!0,serverSearch:!1,acceptNewValues:!1,newValuePattern:!1,showSearchField:!1,clearButton:!1,clearButtonSVGIconId:"",clearButtonIconClass:"",lazyLoading:!1,filterByCSSSelector:!1,viewPerPage:10,dataStructure:"flat",delimiter:void 0,considerEmptySpacedValue:!1,allowHiddenOptionsForSelection:!1,allowDisabledOptionsForSelection:!1,headerSelectable:!1,footerSelectable:!1}}},{key:"props",get:function(){return{customSorter:null,customSearch:null,arrowIconClassName:"",clearButtonIconClassName:"",options:[],dataSource:{},dropdownList:{focusFirstItemOnOpen:!0,focusSelectedItemOnOpen:void 0,focusItemOnItemMouseover:!0,selectOnKeyNavigation:!1,hideCheckbox:!0,characterKeyFocus:!0,selectOnTabPress:!0,contentType:void 0,template:void 0,height:void 0,width:void 0,appendTo:void 0,direction:"auto",viewport:void 0,checkedIcon:void 0,checkedIconClassName:void 0,checkedSVGIconId:void 0,loaderIconClassName:void 0,loaderSVGIconId:void 0,positionAlterable:!1,virtualization:!1,fitForElement:!1},search:{delay:150,criteria:"contains",caseSensitive:!1,minKeywordLength:0,by:"label",focusFirstResult:!0,highlightKeyword:!1,maxKeywordLength:0,showNoResultsMessage:!0,searchIncrementsInCache:!1},messages:{allOptionsSelected:"All Selected",noResults:"No results found",serverError:"Server request failed. Please try again later.",clear:"Clear",moreAction:"See more results",placeholder:"Select"},dataMapping:{id:"id",label:"label",value:"value",informativeText:"informativeText",iconClassName:"iconClassName",SVGIconId:"SVGIconId",options:"options",optgroupLabel:null,zitemid:"zitemid"},depCompClassNames:{dropdownlist:"DropdownList"},criteriaPrecedence:[]}}},{key:"propType",get:function(){return{selectedIndex:"number"}}},{key:"ARIA_ROLES",get:function(){return{CONTAINER:"listbox"}}},{key:"SELECTORS",get:function(){var t=this.isCE;return{OPTION:t?"z-option":"option",OPTGROUP:t?"z-optgroup":"optgroup",OPTIONSBODY:"z-selectbody",OPTIONSHEADER:"z-selectheader",OPTIONSFOOTER:"z-selectfooter",OPTIONSEPARATOR:"z-optionseparator",ADDOPTION:"z-addoption"}}},{key:"CLASSES",get:function(){return{CONTAINER:"zselectbox",ICON:"zselectbox__icon",ICONTEXT:"zselectbox--icontext",ICONONLY:"zselectbox--icononly",AVATARTEXT:"zselectbox__avatartext",TEXT:"zselectbox__text",DROPUP:"zselectbox--top",DROPDOWN:"zselectbox--bottom",ACTIVE:"is-active",FOCUS:"has-focus",DISABLED:"is-disabled",CLEARBUTTON:"zselectbox__clearbutton",MENU:{CLASSNAME:"zmenu--selectmenu",ITEM:"zmenu__item",BODY:"zmenu__body"}}}},{key:"EVENTS",get:function(){return["init","beforedropdownlistopen","dropdownlistopen","beforedropdownlistclose","dropdownlistclose","beforechange","change","select","deselect","beforeselect","beforedeselect","itemclick","optionclick","optionhover","addoptionclick","blur","beforefocus","focus","noresults","beforedropdownlistupdate","dropdownlistupdate","newvalueadd","beforesearch","searcherror","searchsuccess"]}}]),o}();t.registerComponent("ZSelect",f),function(t){var a=t.zselect.Templates,o=t.Templates.Utilities;a.container=function(t){return ZT.html(zc0tO36(),t.children&&a.children(t))},a.children=function(n){return ZT.html(zc0tO37(),n.required&&a.hiddenInput(n),n.noSelection?ZT.html(zc0tO38(),n.placeholder):ZT.html(zc0tO39(),ZT.customHTML(n.innerHTML||""),n.image?ZT.html(zc0tO40(),n.image):n.icon?o.icon(n.icon):n.textIcon?ZT.html(zc0tO41(),n.textIcon):"",n.label&&ZT.html(zc0tO42(),ZT.customHTML(n.label))),n.clearButton&&t.createButton(n.clearButton),o.icon(n.arrow))},a.hiddenInput=function(t){return ZT.html(zc0tO43(),t.hiddenInputName,t.label,t.required,t.required)}}(ZPeopleComponents);var k=function(a){function o(){return _classCallCheck(this,o),_possibleConstructorReturn(this,_getPrototypeOf(o).apply(this,arguments))}return _inherits(o,t.ZSelect),_createClass(o,[{key:"_init",value:function(t,a){a.showSearchField=a.multiple=!1,_get(_getPrototypeOf(o.prototype),"_init",this).call(this,t,a)}},{key:"_storeRef",value:function(){_get(_getPrototypeOf(o.prototype),"_storeRef",this).call(this),this._arrowTarget=this.container.find("i.zselectbox__arrowicon"),this._inputField=this.container.find(".zselectbox__textbox")}},{key:"_postRender",value:function(){_get(_getPrototypeOf(o.prototype),"_postRender",this).call(this),this._inputField[0].id=this._DDInstance()._getID("searchbox"),this._addEvents({inputMouseUp:"mouseup"},this._inputField)}},{key:"_inputMouseUpHandler",value:function(t){this._skipHighlightingOnMouseUp||(this._highlightContent(),this._skipHighlightingOnMouseUp=!0),t.preventDefault()}},{key:"_preRender",value:function(){if(this._skipDataSetting)return this._data;var t=_get(_getPrototypeOf(o.prototype),"_preRender",this).apply(this,arguments);return t.rendered&&-1!==this._opts.selectedIndex&&this._iconShow(""),t}},{key:"_getListSettings",value:function(){var t=this,a=_get(_getPrototypeOf(o.prototype),"_getListSettings",this).call(this),n=a.searchFieldOptions;return n.showSearchField=n.multiple=!1,n.listAllItemsOnDOWNPress=!0,a.autoCommit=!0,a.searchField=this._inputField,this._autoComplete=this._opts.autoComplete&&this._opts.dropdownList.selectOnKeyNavigation,this._autoComplete&&(a.search.focusFirstResult=!0,a.search.criteria="startswith"),a.beforefocus=function(){t._setFocus()},a.focusFirstItemOnOpen=a.search.focusFirstResult,a}},{key:"_itemFocusHandler",value:function(t){var a=t.originalEvent;return a&&"input"===a.type&&this._autoComplete&&(this._skipRender=!0,this._setValue(t.detail.itemData,{event:t,commit:!1}),this._skipRender=!1),_get(_getPrototypeOf(o.prototype),"_itemFocusHandler",this).apply(this,arguments)}},{key:"_changeHandler",value:function(t){var a=t.originalEvent;return a&&"input"===a.type?void(this._active=!0):_get(_getPrototypeOf(o.prototype),"_changeHandler",this).apply(this,arguments)}},{key:"_beforeSearchHandler",value:function(a){var i,n=a.detail,l=a.originalEvent;l&&("keydown"===l.type?i=l.keyCode===t.keyCode.DOWN||l.keyCode===t.keyCode.UP:"mousedown"===l.type&&(i=this._arrowTarget[0]===l.target||this._arrowTarget.find(l.target).length)),(i||!l)&&(n.searchOptions.minKeywordLength=0,n.params.query=""),_get(_getPrototypeOf(o.prototype),"_beforeSearchHandler",this).apply(this,arguments)}},{key:"_noResultsHandler",value:function(){return this._noResults=!0,this._skipRender=!0,this._setValue([],{clearOtherValues:!0,commit:!1}),this._skipRender=!1,_get(_getPrototypeOf(o.prototype),"_noResultsHandler",this).apply(this,arguments)}},{key:"_updateHandler",value:function(t,a){this._noResults="noresults"===a.status,_get(_getPrototypeOf(o.prototype),"_updateHandler",this).apply(this,arguments)}},{key:"_onAttrChange",value:function(t){_get(_getPrototypeOf(o.prototype),"_onAttrChange",this).apply(this,arguments),t.isCustom&&(t.isCustom=!1,t.hasText=!0),t.attrs.tabindex=t.disabled?null:-1,t.attrs["aria-autocomplete"]="list"}},{key:"_acceptNewValues",value:function(t,a){_get(_getPrototypeOf(o.prototype),"_acceptNewValues",this).call(this,t,a)||this._setPrevValue(a)}},{key:"_newValueHandler",value:function(t){this._altered&&this._opts.acceptNewValues?this._setValue(this._inputField[0].value,{event:t}):this._setPrevValue(t),this._opened&&this._close(t)}},{key:"_setPrevValue",value:function(t){this._skipRender=!0,this._setValue(this._getPrev(),{event:t}),this._skipRender=!1,this._updateView()}},{key:"_onESCPress",value:function(t){this._setPrevValue(t),t.preventDefault()}},{key:"_keyDownHandler",value:function(a){if(!this._keydownEventHandled&&(a=a.originalEvent,this._lastKeydownEvent=a,!this._opts.disabled)){var n=t.keyCode;switch(a.keyCode){case n.ESCAPE:this._onESCPress(a);break;case n.ENTER:this._noResults&&this._newValueHandler(a)}}this._keydownEventHandled=!1}},{key:"_listBeforeKeyDownHandler",value:function(t){this._keyDownHandler(t),_get(_getPrototypeOf(o.prototype),"_listBeforeKeyDownHandler",this).call(this,t),this._keydownEventHandled=!0}},{key:"_keyPressHandler",value:function(){}},{key:"_inputHandler",value:function(t,a){clearTimeout(this._renderTimer),_get(_getPrototypeOf(o.prototype),"_inputHandler",this).call(this,t,a),t=t.originalEvent,this._altered=this._active=!0;var n=this._inputField[0].value,l=this._opts.search.minKeywordLength;this._autoComplete&&n||this._iconShow("none"),this._autoComplete&&(!l||n.length>=l)&&this._autoCompleteFn(t),this._updateClrBtn()}},{key:"_updateClrBtn",value:function(){var t=this._data;t.clearButton&&(t.clearButton.mainElement[0].style.display=this._inputField[0].value&&!t.disabled?"":"none")}},{key:"_iconShow",value:function(t){this._data.hasIcon&&(this.container[0].querySelector(".zselectbox__icon").style.display=t)}},{key:"_afterBlur",value:function(t){this._isFocussed()||(_get(_getPrototypeOf(o.prototype),"_afterBlur",this).apply(this,arguments),this._newValueHandler(t),this._altered=this._focussed=this._active=!1,this._skipHighlightingOnMouseUp=!1,this.container.removeClass("has-focus has-mfocus has-kfocus"))}},{key:"_updateView",value:function(t,a){var n=this._data;a&&(this._skipDataSetting=!0,this._setIconTextData(a,n)),_get(_getPrototypeOf(o.prototype),"_updateView",this).apply(this,arguments),this._skipDataSetting=!1}},{key:"_beforeSelectHandler",value:function(){return _get(_getPrototypeOf(o.prototype),"_beforeSelectHandler",this).apply(this,arguments)}},{key:"_postEachRender",value:function(){var t=this._data;_get(_getPrototypeOf(o.prototype),"_postEachRender",this).apply(this,arguments),this._inputField[0].value=t.label,this._updateClrBtn(),this._highlightContent(),this._active=!1}},{key:"_getRenderText",value:function(t){return this._getLabel(t,!1)}},{key:"_focusHandler",value:function(){document.activeElement===this._inputField[0]||this._manualFocus||(this._manualFocus=!0,this._inputField.focus()),this._manualFocus=!1,this._focussed||(this._highlightContent(!0),this._skipHighlightingOnMouseUp=!1,this._focussed=!0),_get(_getPrototypeOf(o.prototype),"_focusHandler",this).call(this)}},{key:"_clrBtnMouseDownHandler",value:function(t){_get(_getPrototypeOf(o.prototype),"_clrBtnMouseDownHandler",this).apply(this,arguments),this._inputField.val(""),this._opened&&this._DDInstance().searchWithDelay("",{event:t})}},{key:"_highlightContent",value:function(t){var a=this;clearTimeout(this._highlightTimer),this._skipHighlighting||(this._highlightTimer=setTimeout(function(){(t||a._isFocussed())&&(a._inputField.select(),a._skipHighlightingOnMouseUp=!0)}))}},{key:"_setFocusFn",value:function(){this._inputField.focus().focusin()}},{key:"_setAttribute",value:function(t,a){if("autoComplete"===t)this._opts[t]=a,this._reInit=!0;else if(/^(multiple|selectionLimit|showSearchField)$/.test(t))return;_get(_getPrototypeOf(o.prototype),"_setAttribute",this).call(this,t,a)}},{key:"_destroy",value:function(){_get(_getPrototypeOf(o.prototype),"_destroy",this).apply(this,arguments),clearTimeout(this._highlightTimer)}},{key:"name",get:function(){return"zcombobox"}},{key:"attrs",get:function(){return{autoComplete:!1}}},{key:"props",get:function(){return{dropdownList:{selectOnKeyNavigation:!0}}}},{key:"CLASSES",get:function(){return{CONTAINER:"zselectbox zcombobox"}}},{key:"SELECTORS",get:function(){return{OPTIONSBODY:"z-comboboxbody",OPTIONSHEADER:"z-comboboxheader",OPTIONSFOOTER:"z-comboboxfooter"}}},{key:"ARIA_ROLES",get:function(){return{CONTAINER:"combobox"}}}]),o}();t.registerComponent("ZComboBox",t.ZSelect,k),function(t){var a=t.zcombobox.Templates,o=t.Templates.Utilities;a.container=function(){return ZT.html(zc0tO44())},a.children=function(n){return ZT.html(zc0tO45(),n.required&&a.hiddenInput(n),ZT.html(zc0tO46(),n.icon&&o.icon(n.icon),ZT.html(zc0tO47(),n.disabled,n.tabindex,n.label,n.placeholder,n.readonly,n.readonly)),n.clearButton&&t.createButton(n.clearButton),o.icon(n.arrow))},a.hiddenInput=function(t){return ZT.html(zc0tO48(),t.hiddenInputName,t.label,t.required,t.required)}}(ZPeopleComponents);var b=function(a){function o(){return _classCallCheck(this,o),_possibleConstructorReturn(this,_getPrototypeOf(o).apply(this,arguments))}return _inherits(o,t.CoreComponent),_createClass(o,[{key:"_setTimeZone",value:function(){this._timeZone=t.Date.timeZone=this._opts.timeZone||t.timeZone}},{key:"_getNewDate",value:function(){return this._timeZone?t.Date.changeTZOfDate(new Date,this._timeZone):new Date}},{key:"_setFormat",value:function(){this._dateFormat=this._opts.format}},{key:"_isBtnsExist",value:function(){return this._checkIfButtonsExist()||this._isColumnExists()}},{key:"_setOKCancelBtns",value:function(){var t=this._opts;t.OKButton=!t.immediateCommit,t.cancelButton=!t.immediateCommit&&!t.hideCancelButton}},{key:"_init",value:function(a,o,l){this._setTimeZone(),this._todayDate=this._getNewDate(),this._userOptions=n.extend({},o);var s=o.selectionLimit;o.selectionLimit="string"==typeof s?+s:s;var r=o.navigationBar,d=o.forElement,c=o.value,_=["minDate","maxDate","value"];if(this._validateFormat(),!this._invalidFormat){this._setFormat(),o.locale=o.locale||t.locale,r&&(this._yearNavigation=r.yearNavigationButtons),o.position&&(this._isPositionModified=o.position),this._setSwitcherType(r),void 0===this._yearNavigation&&/^(drilldown|none)$/.test(r.monthYearSwitcherType)&&(this._yearNavigation=!0),this._setOKCancelBtns(),(this._isBtns=this._isBtnsExist())&&this._setBtnProps(),this._getLocaleValues(),d&&(this._forElement=n(d)),this.element[0].setAttribute("tabindex",0),this._monthsPerView="date"==o.pickerType?o.monthsPerView:1,this._selectedDates=[],(o.disabledDates.length||o.specialDates.length||o.disabledTimeList&&o.disabledTimeList.length)&&this._convertStringToObject({disabledDates:o.disabledDates,specialDates:o.specialDates,disabledTimeList:o.disabledTimeList});for(var u=0,p=_.length;u<p;u++){var m=_[u],g=o[m],h=void 0;g&&(this._parseValue(m,g),o[m]instanceof Date&&!this._checkTime&&o[m].setHours(0,0,0,0),"value"===m&&(this._isNotNull(o.value)&&this._dateWithInRange(o.value)&&!this._getUniqueClass(o.value)&&"multiple"!==this._opts.selectionType?(this._currentSelected=new Date(+o.value),!this._viewDate&&(h=this._viewDate=this._currentSelected,this._changeMonth(!1,h,1)),this._valueUpdate=!0):o[m]=void 0)),"value"===m?!this._viewDate&&this._setHours():this["_"+m]=o[m]}this._validateOpts(),(o.minDate||o.maxDate)&&this._processLimits(),!c&&0===o.values.length&&(o.monthToBeShownOnOpen||o.yearToBeShownOnOpen)&&this._setViewOnOpen(),"multiple"===o.selectionType&&this._setValues(),o.value&&(this._currentSelected=new Date(+o.value)),this._data.month||(this._data.month=[]),this._elementId=this._getID(this.element),this._pickerTypeOpts(),this._buildData(l);var v=this.element[0];return o.width&&(v.style.width=o.width+"px"),o.height&&(v.style.height=o.height+"px"),!0}}},{key:"_pickerTypeOpts",value:function(){var t=this._opts,a=this._data;this._monthType=!1,this._yearType=!1,this._dateType=!1,a.dateType=!1,this["_"+t.pickerType+"Type"]=!0,"date"==t.pickerType?(this._monthsPerView=this._opts.monthsPerView,a.monthsPerView=this._opts.monthsPerView,a.dateType=!0):(this._monthsPerView=1,a.monthsPerView=1)}},{key:"_setSwitcherType",value:function(t){var a=t.monthYearSwitcherType;this._isDrilldown="drilldown"===a,this._isDropdown="dropdown"===a}},{key:"_getLocaleValues",value:function(){var a=this._opts,o=a.labels,n=t.localeInfo[a.locale];if(n)for(var l=["days","daysAbbreviated","monthsAbbreviated","months"],s=0,r=l.length;s<r;s++)o[l[s]]=n[l[s]]||o[l[s]]}},{key:"_getWeekStartDay",value:function(){var a=this._opts,o=t.localeInfo[a.locale];return a.firstDayOfWeek||o&&o.firstDayOfWeek||0}},{key:"_invokeOtherActions",value:function(){var t=this._opts,a=t.title;"inline"===t.type?(this._display(),this._isShown=!0):a&&a.length&&t.draggable&&this._initDraggable()}},{key:"_validateOpts",value:function(){var t=this._opts,a=t.position,o=t.navigationBar,n=t.displatype,l=this._yearNavigation;t.drilldownLevelOnOpen=t.drilldownLevelOnOpen||"dates",t.format=t.format||"dd/MM/yyyy",a=t.position="auto"===a?"callout"===n?"bottom":"bottom-left":a,(t.minDate||t.maxDate)&&this._checkLimits(),o.monthYearSwitcherType=-1<["dropdown","drilldown","none"].indexOf(o.monthYearSwitcherType)?o.monthYearSwitcherType:"none",-1===["top","bottom","right","left","top-left","top-right","bottom-left","bottom-right"].indexOf(a)&&(t.position="bottom"),o.monthSwitcher||o.yearSwitcher||(t.monthYearSwitcherType="none"),n=t.displayType,n=-1<["box","callout"].indexOf(n)?n:"box",this._data&&(this._data.displayType=n),o.yearNavigationButtons=void 0===l?!this._isDropdown:l,o.monthYearHeadingFormat=-1<["MMM yyyy","MMMM yyyy","yyyy MMM","yyyy MMMM"].indexOf(o.monthYearHeadingFormat)?o.monthYearHeadingFormat:"MMMM yyyy"}},{key:"_constructData",value:function(){var t=this._data,a=this._opts,o=a.navigationBar;a.title&&!t.title&&(t.title=this._getTitleData()),void 0===this._viewMode&&(this._viewMode=this._isDrilldown?this._getViewMode():0),t.dropdownCls=this._isDropdown&&o.monthNavigationButtons&&o.yearNavigationButtons,this._maxDate&&1<this._monthsPerView&&this._checkViewDateWithMax(this._viewDate);for(var n=0;n<this._monthsPerView;n++){var l=t.month[n]=t.month[n]||{},s=new Date(+this._viewDate);if(l.className="",l.weekTitle=a.weekHeading||this._getI18NText("weekHeading"),s=this._moveMonth(this._viewDate,n),l.monthsPerView="date"===a.pickerType?a.monthsPerView:1,l.displayWeekNumbers=a.displayWeekNumbers,this._constructNavBar(l,n,s),"date"==a.pickerType)this._fillDayOfWeek(l),this._fillDates(l,s,1<a.monthsPerView?n:void 0);else{var r=a.pickerType;this["_fill"+(r=r.charAt(0).toUpperCase()+r.slice(1))+"s"](!0)}(0==n||n===this._monthsPerView-1)&&(l.viewDate=s)}var d="zdatetimepicker__month ";a.allowSelectionOfAdjacentMonthDates||(d+="zdatetimepicker--adjacentmonthdatereadonly"),this._setMonthVal("className",d),!this._data.rendered&&this._isBtns&&this._createButtons()}},{key:"_isColumnExists",value:function(){var t=this._opts.commandBar;if(t){for(var a=["leftColumn","centerColumn","rightColumn"],o=0;o<a.length;o++)if(t[a[o]]){for(var n=t[a[o]].commands,l=0;l<n.length;l++)this._opts[n[l]+"Button"]=!0;return!0}return!1}}},{key:"_buildData",value:function(t){0===this._viewMode&&this.element.find(".zdatetimepicker--disabledcalendar").removeClass("zdatetimepicker--disabledcalendar"),this._constructData(),this._data._isRenderedAgain=!0,t&&this._render()}},{key:"_postRender",value:function(t,a){this._invokeOtherActions(),this._data.className+=" zdatetimepicker"+(1===a.monthsPerView?"":"--group ")+(a.dropdownCls?" zdatetimepicker--dropdownyearbutton ":""),a.appendTo&&this._appendEle(a.appendTo),t[0].setAttribute("id",this._elementId)}},{key:"_adjustCustomHTMLPos",value:function(t){var a=this._opts;(a.customHTMLAboveCalendar||a.customHTMLAboveNavigationBar||a.customHTMLBelowCalendar)&&this._handleCustomHTML(t)}},{key:"_preRender",value:function(t){return this._adjustCustomHTMLPos(!1),t}},{key:"_postEachRender",value:function(t){var a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this._data,o=!this._data.rendered,n=o||a._isRenderedAgain,l=a.modifiedAttr,s=this._opts,r=this._isDropdown,d=s.navigationBar.monthNavigationButtons||s.navigationBar.yearNavigationButtons,c=this._opts.selectionLimit;if(this._opts.selectionLimit="string"==typeof c?+c:c,n||l){if(o||-1<["navBar","monthsPerView","pickerType"].indexOf(l))if(r){this._assignHeaders();var _=this._bindHeaderEvents.bind(this);_("year","select"),_("month","combobox"),this._checkOptions()}else this._isDrilldown&&(this._bindDrillDownClickEvent(),this._monthEventBinded=this._yearEventBinded=this._decadeEventBinded=void 0);if(o||-1<["navBar","monthsPerView","type","pickerType"].indexOf(l)){var u=this._data.className,p=" zdatetimepicker"+(1===this._monthsPerView?"":" zdatetimepicker--group")+(a.dropdownCls?" zdatetimepicker--dropdownyearbutton":"")+("inline"===s.type?" zdatetimepicker--inline":"");if(p!==u&&(this._data.className=u?u+p:p),d){this._bindArrowEvents();for(var m=0;m<this._monthsPerView;m++)this._setArrowMainElement(a.month[m].navigationBar)}}if((o||-1<["commandBar","monthsPerView"].indexOf(l))&&this._isBtns&&this._updateCommandBar(t),n||"monthsPerView"===l||r){var g=t.find(".zdatetimepicker__month");"multiple"===s.selectionType?g.attr("aria-multiselectable",!0):g.removeAttr("aria-multiselectable")}(o||"displayType"===l)&&(this._pointer="callout"===this._opts.displayType?t.find(".zdatetimepicker__pointer"):void 0),s.title&&(o||"title"===l)&&(this._enableDrag&&this._initDraggable(),this._setCloseEle(),this._enableDrag=void 0)}if(this._adjustCustomHTMLPos(),this._doesExist(this._clear)&&this._setClearBtnCls(void 0,void 0,!0),this._updateView&&this._isShown&&this._setPosition(),d)for(var h=0;h<this._monthsPerView;h++)this._updateArrowState(a.month[h].viewDate,h);var v=this._viewMode;this._isDrilldown&&v&&(s.navigationBar.monthSwitcher||s.navigationBar.yearSwitcher)&&this._updateYearArrowState(v,3>v?2>v?this._viewDate.getFullYear():this._yearStart:this._decadeStart),this._data.modifiedAttr=this._data._isRenderedAgain=this._updateView=void 0}},{key:"_hasClosest",value:function(t,a,o){var l=o?t.currentTarget:t.target;return n(l).closest(a).length}},{key:"_clearValues",value:function(t,a){var o=this._opts,n=o.immediateCommit,l=["zdatetimepicker__calendar","zdatetimepicker__drilldowncell"];n&&(this._valueUpdate=!1,o.value=void 0,o.values=[]),this._setHours(!0);for(var r,s=0;2>s;s++)r=this.element.find("."+l[s]).find(this._getSelector()),this._select(!1,r,!0),r.removeAttr("aria-disabled");this._setDateClass("is-disabled",!1,this.element.find(".zdatetimepicker__calendar").find(this._getSelector()),!0),this._selectedDates=[],this._queryString="",this._currentSelected=void 0,this._render(),(a||n&&!1!==a)&&this._dispatchEvent("change",t,this._getSelectedValue(),void 0,!(!t||!t.originalEvent))}},{key:"_cancelClickHandler",value:function(t){this._clearClickHandler?this._clearClickHandler(t,!0):this._clearValues(t),this._closePicker(t),this._dispatchEvent("cancel",t,this._getSelectedValue()),this._removeFocus(this._cancel)}},{key:"_bindEvents",value:function(){"dates"!==this._opts.drilldownLevelOnOpen&&this._isDrilldown&&this._generateContent(this.element),this._addEvents({mousedown:"mouseup",mouseover:"mouseover",keydown:"keydown"})}},{key:"_keydownHandler",value:function(a){a.keyCode===t.keyCode.ESCAPE&&this._closePicker(a)}},{key:"_mouseoverHandler",value:function(t){var s,a=["date","adjacentmonthdate"],o=n(t.target);s=!n(t.relatedTarget).hasClass("".concat("zdatetimepicker__","text"))&&!o.hasClass("".concat("zdatetimepicker__","text"));for(var r=0;r<a.length;r++)if(s&&this._hasClosest(t,".".concat("zdatetimepicker__")+a[r])){this._dispatchEvent("datemouseover",t,{cell:o,date:new Date(+o.attr("data-time"))});break}}},{key:"_validateFormat",value:function(){this._checkFormat(/h|H|m|t/g)}},{key:"_checkFormat",value:function(t){this._invalidFormat=t.test(this._opts.format)}},{key:"getElement",value:function(){return this.element}},{key:"_reInitPicker",value:function(){this._opts=n.extend(!0,{},this._DEFAULTS,this._userOptions),this._init(this.element,this._opts,!0)}},{key:"open",value:function(a){var o=this._opts;!this._isShown&&("inline"===o.type||o.forElement||o.offset)&&(!t.Date.areDatesEqual(this._todayDate,this._getNewDate())&&this._reInitPicker(),a&&this._setAttribute("forElement",a),this._showPicker())}},{key:"close",value:function(t){this._manualClose=!0,this._closePicker(t),this._manualClose=!1}},{key:"_getBtnsArr",value:function(){return["today","clear","cancel","OK"]}},{key:"_resetTime",value:function(t){if(t instanceof Date){var a=new Date(+t);return a.setHours(0,0,0,0),a}}},{key:"_triggerMonYrDecChange",value:function(t,a,o){return this._dispatchEvent(a+"change",t,{viewDate:this._viewDate,value:this._opts.value,selectedValue:void 0===o?this._viewDate.getFullYear():o})}},{key:"_arrowEventHandler",value:function(t){var a=t.currentTarget.id;if(-1<a.indexOf("month")){var o=parseInt(a.slice(-1));this["_handle"+(0===o?"MonthArrow":1===o?"Year":"DecadeArrow")+"Click"](t)}else this._opts.navigationBar.yearNavigationButtons&&this._handleYearArrowClick(t)}},{key:"_checkIfButtonsExist",value:function(){var t=this._opts;return t.OKButton||t.todayButton||t.cancelButton||t.clearButton}},{key:"_isBig",value:function(a,o){var n=t.Date.isGreater(this["_"+a+"Date"],o);return"max"===a?!n:n}},{key:"_moveMonth",value:function(t,a){if(!t||isNaN(+t)||!a)return a?this._viewDate:t;var s,r,d,o=new Date(t.valueOf()),n=o.getDate(),l=o.getMonth(),i=0>a;for((i||1<=a)&&(s=l+a,o.setMonth(s),s=(s+12)%12),r=o.getMonth(),d=t.getFullYear()===o.getFullYear();i?r===l&&d:r!==s;)d=!0,o.setDate(--n),o.setMonth(s),r=o.getMonth();return o}},{key:"_showPicker",value:function(){var a=this.element,o=this._opts;if(this._dragEnd=!1,this._decadeStart=void 0,this._dispatchEvent("beforeopen",void 0,this._getObj())){"inline"!==o.type&&t.bindDocumentEvents&&o.closeOnBodyClick&&t.bindDocumentEvents({element:a,forElement:this._forElement,ctype:this.name,closeMethodName:"close",closeEvent:"close"}),a.finish?a.finish():a.stop(!0,!0);var n=!!Object.keys(o.animation).length&&o.animation.open;n&&this._setAnimation("open"),n&&n.name||this._display(),this._setPosition(),n||this._openHandler(),this._updatePopupList(!0)}}},{key:"_openHandler",value:function(){this._isShown=!0;var t=this.element,a=this._dispatchEvent.bind(this);t.attr({"aria-hidden":!1,"aria-expanded":!0}),a("beforefocus",{},t)&&(clearTimeout(this._focusTimeout),this._focusTimeout=setTimeout(function(){return t.focus()},100)),a("open",void 0,this._getObj())}},{key:"_setPosition",value:function(){var a=this.element,o=a[0],n=this._opts,l=n.offset;if(a.width(n.width||""),"popup"===n.type)if(3===this._monthsPerView&&"flex"===t._display&&(a.css({top:0,left:0}),a.css("flex-direction","column"),a.width(a.width()),a.css("flex-direction","")),l)a.css(l);else if(n.forElement){var r,i=this._getPosition(),s=this._pointer?this._pointer[0]:null;if(i){r=i.direction,this._direction=r,"callout"!==n.displayType&&a.addClass("zdatetimepicker--"+r.replace("-","")),n.margin&&(i.elementPosition=this._retrieveMarginValues(i.elementPosition));var d=i.elementPosition;if(o.style.top=d.top+"px",o.style.left=d.left+"px",s){var c=i.arrowPosition;s.style.top="number"==typeof c.top?c.top+"px":"",s.style.left="number"==typeof c.left?c.left+"px":""}}}}},{key:"_retrieveMarginValues",value:function(t){for(var l,a=this._opts.margin,o=["top","left"],n=0;2>n;n++)l=t[o[n]],l+="number"==typeof a?a:a[o[n]]||0,t[o[n]]=0>l?t[o[n]]:l;return t}},{key:"_arrowCallback",value:function(t,a){var o=this.element;o.removeClass("zdatetimepicker--top zdatetimepicker--bottom zdatetimepicker--left zdatetimepicker--right zdatetimepicker--topleft zdatetimepicker--topright zdatetimepicker--bottomleft zdatetimepicker--bottomright"),o.addClass("zdatetimepicker--"+a),this._calloutDirection=a}},{key:"_getPosition",value:function(){var a=this._opts,o=t.Position,n=a.positionAlterable;if(o&&!this._dragEnd){return o.get(this._forElement,this.element,{direction:this._direction||a.position,bufferSpace:6,rtl:a.rtl,positionAlterable:n,arrow:{element:this._pointer,callback:this._arrowCallback.bind(this),margin:{left:-1,top:-1}}})}}},{key:"_getSelector",value:function(){return".is-selected,.is-disabled:not(.zdisabled)"}},{key:"_isGreater",value:function(a,o){return t.Date.isGreater(a,o)&&!t.Date.areDatesEqual(a,o)}},{key:"_setHours",value:function(t){t||(this._viewDate=this._getNewDate()),this._viewDate.setHours(0,0,0,0)}},{key:"_updateValues",value:function(){if(this._valueUpdate){var t=this._opts,a=t.value,o=t.values,n=this._minTime,l=this._getNewDate();"multiple"===t.selectionType&&this._handleMultipleSelectOnClose();var i=this._selectedDates,s=i.length;l.setHours(n?n.getHours():0,n?n.getMinutes():0,0,0),this._viewDate=a?new Date(+a):o&&o.length&&s?new Date(+i[s-1]):l,(t.minDate||t.maxDate)&&this._checkLimits()}else this._resetValues()}},{key:"_resetValues",value:function(){var t=this._opts;this._valueUpdate=!1,t.value=this._currentSelected=this._selectedTime=void 0,t.values=this._selectedDates=[],this._setDateClass(["is-disabled","is-selected"],!1,this.element.find(".zdatetimepicker__calendar").find(this._getSelector()),!0),this.element.find(".zdatetimepicker__drilldowncell").find(this._getSelector()).removeClass("is-disabled","is-selected"),this._queryString="",this._setHours(),this._doesExist(this._clear)&&this._traverseBtns("clearButton","is-disabled",!0),this._render(),(this._minDate||this._maxDate)&&this._checkViewDate(new Date(+this._viewDate)),(t.monthToBeShownOnOpen||t.yearToBeShownOnOpen)&&this._setViewOnOpen()}},{key:"_getObj",value:function(){return{viewMode:this._viewMode,element:this.element}}},{key:"_closePickerHandler",value:function(t){if(this._dispatchEvent("beforeclose",t,this._getObj())){var a=this._opts.animation;!!Object.keys(a).length&&a.close?this._setAnimation("close",t):this._closeHandler(),this._updatePopupList()}}},{key:"_closeHandler",value:function(t){this._display(!0),this._isShown=!1,this.element.attr({"aria-hidden":!0,"aria-expanded":!1}),this._dispatchEvent("close",t,this._getObj())}},{key:"_changeMonth",value:function(t,a,o){var n=this._opts,l=n.selectedDateMonthViewIndex;1<this._monthsPerView&&l>=(o||0)&&(this._viewDate=this._moveMonth(a||n.value,-l),void 0===t&&(t=!0)),t&&this._buildData(!0)}},{key:"_refreshPicker",value:function(){var n,t=this._isDrilldown,a=this._viewDate,o=this._oldDate.getFullYear()===this._viewDate.getFullYear();((n=t&&this._getViewMode())!==this._viewMode||this._oldDate.getMonth()!==a.getMonth()&&o||!o)&&(t&&this._setViewMode(n,!0),this._doNotBuildTime=!0,this._buildData(!0),t&&this._addDisabledCls()),t&&this._removeEffects()}},{key:"_closePicker",value:function(a){if(this._isShown){var o=this._viewDate,n=this._opts,l="multiple"===n.selectionType,i=n.value,s=this._closePickerHandler.bind(this);if(o){l&&0===n.values.length&&n.immediateCommit&&(this._valueUpdate=!1);var r=this._currentSelected;r&&!l&&i&&!t.Date.areDatesEqual(r,i)&&this._select(!1,this._currentSelectedEle,!0,!0),this._oldDate=new Date(+o),this._currentSelected=i?new Date(+i):void 0,this._currentSelected||l?this._updateValues():this._resetValues(),("inline"!==n.type||this._manualClose)&&s(a),this._refreshPicker(),void 0!==n.selectedDateMonthViewIndex&&n.value&&this._changeMonth(),n.value&&this._viewDate&&(this._doesExist(this._clear)&&this._traverseBtns("clearButton","is-disabled",!1),this._select(!0,this.element.find('[data-time="'+ +this._resetTime(n.value)+'"]'),!1,!0))}else s(a)}}},{key:"_getBoolVal",value:function(a,o){var n=this["_"+a+"Date"];if(n){n=new Date(+n),this._checkTime||n.setHours(0,0,0);var l=t.Date.areDatesEqual(o,n);return("min"===a?+o>+n:+o<+n)||l}return!0}},{key:"_dateWithInRange",value:function(t){return this._checkTime||t.setHours(0,0,0),this._getBoolVal("min",t)&&this._getBoolVal("max",t)}},{key:"_getDateElem",value:function(t){return(1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.element).find("[data-time='"+ +t+"']")}},{key:"_getFirstDate",value:function(){var a,t=this._data.month[0].dates[0];for(a=0;a<t.length&&!(""!==t[a].text&&-1<t[a].class.indexOf("zdatetimepicker__date"));a++);return t[a].time}},{key:"_mousedownHandler",value:function(t){var c,_,u,p,m,g,h,v,a=n(t.target),o=this._opts,l=this._viewMode,s=[".zdatetimepicker__date",".zdatetimepicker__adjacentmonthdate"],r=!1,d=o.allowSelectionOfAdjacentMonthDates;if(a.is(".zdatetimepicker__text, .zdatetimepicker__secondaryinfo")&&(v=!a.closest(".zdatetimepicker__date, .zdatetimepicker__adjacentmonthdate").hasClass("is-disabled")),a.is(".zdatetimepicker__date:not(.".concat("is-disabled","), .zdatetimepicker__adjacentmonthdate:not(.").concat("is-disabled","), .zdatetimepicker__monthview:not(.").concat("is-disabled","), .zdatetimepicker__year:not(.").concat("is-disabled","), .zdatetimepicker__decade:not(.").concat("is-disabled",")"))||v){t.preventDefault();for(var y=0;2>y;y++)if(this._hasClosest(t,s[y])){a=a.closest(s[y]);break}_=this._translateAToE(a.text()),m=a.hasClass("zdatetimepicker__year"),p=a.hasClass("zdatetimepicker__monthview"),(u=a.attr("data-time"))&&(g=new Date(parseInt(u))),p&&this._monthType?((g=this._viewDate).setMonth(parseInt(a.attr("data-value"))),g.setDate(1),r=!0):m&&this._yearType&&((g=this._viewDate).setFullYear(parseInt(a.attr("data-value"))),g.setMonth(0),g.setDate(1),r=!0),(a.hasClass("zdatetimepicker__date")||r)&&g?this._setDate(t,a,g):d&&a.hasClass("zdatetimepicker__adjacentmonthdate")&&g?(this._setDate(t,a,g),this._viewDate=new Date(+g),this._changeMonth(!0,g),-1<["single","multiple"].indexOf(o.selectionType)&&!a.hasClass("is-selected")&&this._select(!0,this._getDateElem(g),!0,!0)):p&&!this._monthType||m&&!this._yearType?((h=this._triggerMonYrDecChange(t,"before"+(p?"month":"year"),parseInt(p?a.attr("data-value"):_)))&&(c=this._handleMousedownOnDrillDown(t,p,m,_)),this._renderDates=!1!==h):a.hasClass("zdatetimepicker__decade")&&(this._handleDecadeMousedown(t,l,_),c="decade"),h&&c&&this._triggerMonYrDecChange(t,c,parseInt(p?a.attr("data-value"):_))}}},{key:"_select",value:function(t,a,o,l){for(var s=t?"add":"remove",r=0,d=a.length;r<d;r++){var c=n(a[r]),_=c.is(".zdatetimepicker__monthview"),u=c.is(".zdatetimepicker__year"),p=_&&this._monthType||u&&this._yearType;this._doesExist(c)&&(t?c.attr("aria-selected",!0):c.removeAttr("aria-selected"),c.hasClass("zdatetimepicker__date")||c.hasClass("zdatetimepicker__adjacentmonthdate")?this._setDateClass("is-selected",t,c,o):p?c[s+"Class"]("is-selected"):_||u?this._setDrilldownClass(c):l=!0,l&&c[s+"Class"]("is-selected"))}}},{key:"_getDateData",value:function(t){var n,a=this._data.month,o=this._getDateEleIndex(t);return a[o[0]]&&a[o[0]].dates[o[1]]&&(n=a[o[0]].dates[o[1]][o[2]]),n&&n.time===+t.attr("data-time")?n:void 0}},{key:"_getDateEleIndex",value:function(t){return[1===this._monthsPerView?0:t.closest(".zdatetimepicker__list").index(),t.closest("tr").index(),t.index()]}},{key:"_setDateClass",value:function(t,a,o,l){"object"!==_typeof(t)&&(t=[t]);for(var s=0,r=o.length;s<r;s++){var d=n(o[s]),c=this._getDateData(d);if(c){var _=c.class+" ";_=a?_+t.join(" "):_.replace(new RegExp(t.join("|"),"g"),""),c.class=_.trim()}}l||this._render()}},{key:"_setDate",value:function(a,o,n){var r,l=this._opts,i=l.immediateCommit,s=+n;i&&(this._valueUpdate=!1),this._limitReached=!1,this._doesExist(this._clear)&&(this._traverseBtns("clearButton","is-disabled",!1),this._disable(!1,this._clear)),"single"===l.selectionType?(this._select(!1,this.element.find(".is-selected")),this._currentSelected=new Date(s),this._viewDate=new Date(s),this._currentSelectedEle=o,!o.closest(".zdatetimepicker__adjacentmonthdate").length&&this._select(!0,o),i&&(l.value=new Date(s),this._OKClickHandler(a,!0)),r={valueString:t.Date.formatDate(l.value,l.format),value:l.value,selectedDate:this._viewDate}):r=this._setMultipleDate.apply(this,arguments),r&&this._dispatchEvent("dateselect",a,r)}},{key:"_fillDates",value:function(a,o,n){a.dates=[],a.weekNumbers=[];var v,l=this._opts,s=this.element,r=new Date(o||this._viewDate),d=r.getFullYear(),c=r.getMonth(),_=new Date(d,c),u=_.getDate(),p=_.getDay(),m=l.displayAdjacentMonthDates,g=this._getWeekStartDay(),h=this._monthsPerView;100>d&&_.setFullYear(d),_.setDate(u-(_.getDay()-g+7)%7);var y=s.closest("li.zdatetimepicker__list");if(n="number"==typeof n?n:void 0===n?y.length?y.index():-1:n,v=new Date(_),-1<[-1,1,2].indexOf(n)||0===n&&!m)v.setDate(v.getDate()+42);else if(1<h&&m&&0===n){var f=new Date(d,_.getMonth()+1,0).getDate(),k=new Date(d,c+1,0).getDate();v.setDate((p===g?0:f)+k+1)}v.setHours(0,0,0,0),_.setHours(0,0,0,0),v=v.valueOf();for(var i,b=[],C=_;C.valueOf()<v;C.setDate(C.getDate()+1)){var D=C.getDay(),S=C.getFullYear(),T=C.getMonth();C.setHours(0,0,0,0);var E,w=m&&(-1<[-1,0,2].indexOf(n)||1===n&&2===h)||T<=c&&S===d||S<d,I=new Date(S,T+1,0).getDate(),x=new Date(v);if(x.setDate(x.getDate()-1),E=T===c&&C.getDate()===I&&(!m||m&&1===n&&3===h)||t.Date.areDatesEqual(C,x)&&m,D===g&&w){var z=new Date(+C+(g-D-7)%7*864e5),O=new Date(+z+(11-z.getDay())%7*864e5),M=(O-(i=new Date(+(i=new Date(O.getFullYear(),0,1))+(11-i.getDay())%7*864e5)))/864e5/7+1;a.weekNumbers.push(this._translateEToA(M)),b.length&&this._pushDateArr(a,b),b=[]}if(!m||1===n&&n!==h-1||n===h-1){if(T<c&&S===d||S<d){b.push({class:"",text:""});continue}if((T>c&&S===d||S>d)&&(-1===n||m&&(0===n||1===n&&n!==h-1)||!m))break}var P=this._getClasses(C,r),A={class:(P.class||P).trim(),time:+C,text:this._translateEToA(C.getDate()),title:P.title||null,infoText:P.infoText||null};this._dispatchEvent("beforedatecellrender",void 0,A),b.push(A),E&&this._pushDateArr(a,b)}}},{key:"_pushDateArr",value:function(t,a){t.dates.push(a)}},{key:"_setMonthVal",value:function(t,a,o){for(var l,n=0;n<this._monthsPerView;n++)(l=this._data.month[n])[t]=void 0===o?a:o?l[t]+a:l[t].replace(/zdatetimepicker--adjacentmonthdatereadonly/g,"")}},{key:"_constructNavBar",value:function(t,a,o){var l=this._opts.navigationBar,i=this._isDrilldown,s=l.monthNavigationButtons||l.yearNavigationButtons;t.navigationBar=n.extend(!0,{},t.navigationBar||l),s&&this._getNavBtnProps(t,a,t.navigationBar);var r=t.navigationBar;s||(r.class=""),r.cursorCls=0===a&&i&&(l.monthSwitcher||l.yearSwitcher)?"zh-cursorpointer":"",this._isDropdown&&0===a&&this._constructDropdown(r);var d=l.monthSwitcher,c=l.yearSwitcher,_=t.navigationBar,u=this._isDropdown,p=u&&0!==a;if(u&&!p&&(0!==a||d)||(_.month=this._translateEToA(this._getI18NText("months"+(-1<l.monthYearHeadingFormat.split(" ").indexOf("MMMM")?"":"Abbreviated"))[o.getMonth()])),u&&!p&&(0!==a||c)||(_.year=this._translateEToA(o.getFullYear())),"y"===l.monthYearHeadingFormat[0]&&(u&&0===a&&(_.yrFirst=_.monthSelect&&_.yearSelect),_.month&&_.year)){var m=_.month;_.month=_.year,_.year=m}this._setConditions(_)}},{key:"_setConditions",value:function(t){return t.isLMonthYear=t.lMonth||t.lYear,t.isRMonthYear=t.rMonth||t.rYear,t.isMonthYearNav=t.month||t.year,t}},{key:"_OKClickHandler",value:function(t,a,o){var u,n=this._opts,l=0===this._viewMode||this._monthType&&1===this._viewMode||this._yearType&&2===this._viewMode,i=this._currentSelected,s=this._OK,r="single"===n.selectionType,d=n.selectionLimit,c=this._selectedDates.length,_=this._selectedTime;if(this._valueUpdate=!(!i&&!c),r){var p=this._getNewDate();i&&(p=new Date(+i)),this._checkTime&&_&&p.setHours(_.getHours(),_.getMinutes(),_.getSeconds(),0),n.value=i?p:void 0}else u=d&&d===c&&l||this._hasClosest(t,".OKButton-"+this.name),this._handleOkOnMultiple(n);this._dispatchEvent("change",t,this._getSelectedValue(),void 0,!(!t||!t.originalEvent)),(u=r?a&&n.closeOnDateSelect&&l&&!o||!a:u)&&this._closePicker(t),this._valueUpdate=n.value||n.values.length,s&&this._removeFocus(s)}},{key:"_getSelectedValue",value:function(t){var a="single"===this._opts.selectionType?this._getSingleValue(this._opts.value):this._getMultipleValues();return a.fromSetValue=t,a}},{key:"_removeFocus",value:function(t){t.removeClass("has-focus has-mfocus")}},{key:"_isWeekend",value:function(t){return-1<(this._opts.weekendDays?this._opts.weekendDays.split(","):[]).indexOf(t.getDay().toString())}},{key:"_getClasses",value:function(a,o){var p,m,g,h,n=this._opts,l=t.Date.areDatesEqual.bind(t),s=this._selectedDates,r=s.length,d=this._currentSelected,c=a.getFullYear(),_=a.getMonth(),u="";o&&(p=o.getFullYear(),m=o.getMonth(),g=c===p,h=c>p),u+=o&&!h&&!g||g&&_<m||g&&_>m||h?" zdatetimepicker__adjacentmonthdate":" zdatetimepicker__date",l(a,this._getNewDate())&&(u+=" zdatetimepicker--today");var v=d&&l(a,d);if((v||n.value&&l(a,n.value)&&v)&&(u+=" is-selected"),r&&"multiple"===n.selectionType){for(var y=!1,f=0;f<r;f++)s[f]&&l(a,s[f])&&(u+=" is-selected",y=!0);y||n.selectionLimit!==r||(u+=" is-disabled")}return this._isWeekend(a)&&(u+=" zdatetimepicker--weekend"),this._dateWithInRange(a)||(u+=" is-disabled zdisabled"),this._getUniqueClass(a,u,!0)||u}},{key:"_getUniqueClass",value:function(t,a,o){var n=this,l=["disabledDaysOfWeek","disabledDates","disabledMonths","disabledYears"];return a&&(l=[].concat(_toConsumableArray(l),["specialDates","specialDaysOfWeek"])),-1<(l=l.map(function(t){return!!n._opts[t].length})).indexOf(!0)?this._addUniqueClasses(t,a,!o):void 0}},{key:"_parseDateValue",value:function(a,o){return t.Date._parseDateValue(a,o,this._opts.otherInputFormats)||{}}},{key:"_fillDayOfWeek",value:function(t){t.days=[];for(var a=this._getWeekStartDay(),o="",n=this._getI18NText("daysAbbreviated"),l=this._opts.weekendDays.split(","),s=a;s<a+7;s++)o="",(s%7===parseInt(l[0])||s%7===parseInt(l[1]))&&(o+=" zdatetimepicker--weekend"),t.days.push({value:this._translateEToA(n[s%7]),class:" zdatetimepicker__day "+o})}},{key:"_doesExist",value:function(t){return t&&t.length}},{key:"_parseValue",value:function(t,a,o){var i,s,n=this._opts,l=this._parseDateValue.bind(this);return o=o||n.format,"string"==typeof a?(-1<["TODAY","NOW"].indexOf(a)?(this["_"+t+"HasTime"]="NOW"===a&&"value"!==t,n[t]=this._getNewDate()):(s=l(a,o).date||void 0)?(n[t]=s,this["_"+t+"HasTime"]=!0):(s=l(a,this._dateFormat).date||void 0,n[t]=s||void 0),i=!0):a instanceof Date?(n[t]=a,this["_"+t+"HasTime"]=!0,i=!0):(this._oldValueOption&&(i=!0),n[t]=void 0),(s=n[t])&&!this._checkTime&&s.setHours(0,0,0,0),i}},{key:"_setValue",value:function(t,a){var o=this._opts,n=!0;return""!==t&&t?t&&(this._parseValue("value",t,o.format)&&o.value&&!this._checkTime&&o.value.setHours(0,0,0,0),this._isNotNull(o.value)&&this._dateWithInRange(o.value)&&!this._getUniqueClass(o.value)?(this._currentSelected=new Date(+o.value),this._viewDate=new Date(+o.value),this._valueUpdate=!0):(n=!1,o.value=this._oldValueOption)):(this._setHours(),(this._minDate||this._maxDate)&&this._checkViewDate(new Date(+this._viewDate)),this._clearValues(void 0,!1)),n&&(a&&this._buildData(!0),this._dispatchEvent("change",void 0,this._getSelectedValue(!0))),n}},{key:"_checkViewDateWithMax",value:function(t){var a=new Date(+this._maxDate);for(t=new Date(+t),a.setMonth(a.getMonth()-(this._monthsPerView-1)),t.setDate(1),a.setDate(1);+t>+a;)t.setMonth(t.getMonth()-1);this._viewDate=t}},{key:"getValue",value:function(){return this._getSingleValue(this._opts.value)}},{key:"_getSingleValue",value:function(a){var o=this._opts;return{value:a,valueString:t.Date.formatDate(a,o.format),translatedValue:this._translateEToA(t.Date.formatDate(a,o.format,o.labels))}}},{key:"setValue",value:function(t){"single"===this._opts.selectionType&&this._setValue(t,!0)}},{key:"_removePrevList",value:function(){var i,t=this._prevViewMode,a=this.element,o=this._getClass(t),l=n(a.find(".zdatetimepicker__calendar")[0]);(i=0===t?n(l[0]).find("table"):a.find(".zdatetimepicker__"+o).find(".zdatetimepicker__drilldowncell")).removeClass("zeffects--zoomin"),i.addClass("zeffects--zoomout"),t=this._viewMode;var s=this._getClass(t),r=1===this._monthsPerView?a.children("div:not(.zdatetimepicker__commandbar):not(.zdatetimepicker__titlebar):not(.zdatetimepicker__pointer):not(.zdatetimepicker__timebar):not(.zdatetimepicker--custom)"):n(this.element.find(".zdatetimepicker__container").find(".zdatetimepicker__list")[0]).find(".zdatetimepicker").children();a=this._display(!0,r).filter(".zdatetimepicker__"+s)}},{key:"_setAttribute",value:function(t,a,o){var l=this,s=this._opts,r=!0,d=this._data,c=this.element;if(this._oldValue=s[t],this._oldValueOption=s.value,s[t]instanceof Array&&(this._oldOpts={},this._oldOpts[t]=s[t].slice()),s[t]=a,this._userOptions[t]=a,"format"===t)this._validateFormat(),this._invalidFormat?r=!1:(this._setFormat(),s.value&&this._setDate(void 0,this._getDateElem(+this._resetTime(s.value),o),s.value));else if("forElement"===t)this._forElement=a?n(a):void 0;else if(-1<["monthsPerView","locale","navigationBar","drilldownLevelOnOpen","value","weekendDays"].indexOf(t)){var _=!0;if("value"===t&&"single"===s.selectionType&&(_=this._setValue(s.value)),"monthsPerView"===t&&(d.modifiedAttr="monthsPerView",this._getBtnsArr().forEach(function(t){l["_"+t]=null}),0<a&&3>=a?(this._monthsPerView=a,this._isBtns&&this._createButtons()):_=!1,this._data.monthsPerView=a),"drilldownLevelOnOpen"===t&&(this._viewMode=this._isDrilldown?this._getViewMode():0,this._data.modifiedAttr="drilldownLevel","dates"===a)){var u=this._oldValue.slice(0,-1);c.find(".zdatetimepicker__"+u+"drilldown")[0].style.display="none",c.find(".zdatetimepicker__days")[0].style.display="flex"}if("navigationBar"===t&&(this._isDrilldown?n(c.find(".zdatetimepicker__monthyearnav")[0]).off("click."+this.name):this._isDropdown&&this._destroyDropdown(),this._setSwitcherType(a),this._data.modifiedAttr="navBar",this._data.month.length))for(var p=0;p<this._monthsPerView;p++)this._data.month[p].navigationBar=null;this._reInit=_,r=_}else"position"===t?(this._isPositionModified=!0,this._validateOpts()):"pickerType"===t?("date"==a&&(this._viewMode=0,this._removePrevList()),this._pickerTypeOpts(),this._reInit=!0):r=this._setAttrs.apply(this,arguments);return this._updateView||(this._updateView=-1<["monthsPerView","pickerType","forElement","position","minDate","maxDate","displayType","customHTML","displayWeekNumbers","yearToBeShownOnOpen","monthToBeShownOnOpen","width","height","rtl"].indexOf(t)||-1<["commandBar","title"].indexOf(d.modifiedAttr)),this._domChanged=r,r}},{key:"clearSelection",value:function(){var t=this._getSelectedValue();Object.entries(t).forEach(function(a){var o=_slicedToArray(a,2),n=o[0],l=o[1];/^(element|options)$/.test(n)||(t["previous"+n.charAt(0).toUpperCase()+n.slice(1)]=l,t[n]=void 0)}),this._clearClickHandler(void 0,!0,!0),this._dispatchEvent("change",void 0,t)}},{key:"_destroy",value:function(){var a=this._setUndefined.bind(this),o=this._opts;Object.keys(o.animation).length&&t.clearAnimationData(this.element),clearTimeout(this._focusTimeout),this._isDropdown&&this._destroyDropdown(),this._data.customHTML&&this._handleCustomHTML(!0),o.draggable&&this.element.data("zdraggable")&&t.draggable(this.element).destroy(),this.isCE&&this.element.removeClass(this._data.className).empty(),a(["focusTimeout","forElement"],""),a(["view","min","max"],"Date"),a(["","month","year","dec ade"],"navBar"),a(["month","year","decade"],"DrillDownElement"),a(["month","year"],"Header"),a(this._getBtnsArr(),""),a(["monthsPerView","currentSelected","monthYearNav","leftNav","rightNav","closeButton","footer"],"")}},{key:"_getViewMode",value:function(){var t=this._opts,a=this._valueUpdate,o=["dates","months","years","decades"].indexOf(t.drilldownLevelOnOpen);return a&&this.element.find(".zdatetimepicker--disabledcalendar").removeClass("zdatetimepicker--disabledcalendar"),a?0:-1<o?o:void 0}},{key:"_generateContent",value:function(t){if(this._isDrilldown){var a=["Months","Years","Decades"][this._viewMode-1];a&&this["_fill"+a](!0,t)}}},{key:"_drilldownClickHandler",value:function(t){var a=n(t.currentTarget),o=!1,l=this.element.find(".zdatetimepicker__days").length;if(this._hasClosest(t,".zdatetimepicker__monthcontainer",!0)){var i=a.closest(".zdatetimepicker__monthcontainer");a.hasClass("zdatetimepicker__monthyearnav")&&(i.hasClass("zdatetimepicker__monthdrilldown")&&this._opts.navigationBar.yearSwitcher?(this._fillYears(t),o=!0):i.hasClass("zdatetimepicker__yeardrilldown")&&(this._fillDecades(t),o=!0))}o||1!==this._monthsPerView&&(0!==a.closest("li.zdatetimepicker__list").index()||3!==l&&2!==l)||this._monthYearNavClickHandler(t),this._adjustCustomHTMLPos()}},{key:"_monthYearNavClickHandler",value:function(t,a){for(var o=["month","Months","year","Years"],n=this._opts.navigationBar,l=0;4>l;l+=2)if(this._viewMode===("month"===o[l]?0:n.monthSwitcher?1:0)&&n[o[l]+"Switcher"]){t.stopPropagation(),this["_fill"+o[l+1]](t,a);break}}},{key:"_getDrilldownData",value:function(t,a){this._viewMode=a;var o=t.view,n=this._data.month[0],l=t.fn,i="dates"===this._opts.drilldownLevelOnOpen?this._width||this.element.find(".zdatetimepicker__calendar").outerWidth():null,s={view:o,cells:this["_"+l[0]](l[1],l[2],l[3]),style:"display:none;width:".concat(i,"px"),navigationBar:this._getDrilldownNavBar(t,a,o)};return n[o+"Drilldown"]=s,n[o+"Drilldown"]}},{key:"_setMainEle",value:function(t){var a=t.lMonthIcon,o=t.rMonthIcon;a.mainElement=n("#"+a.id).length?n("#"+a.id):null,o.mainElement=n("#"+o.id).length?n("#"+o.id):null}},{key:"_buildDrilldownView",value:function(t,a){var o=t.view,n=this._getDrilldownData.apply(this,arguments),l=this["_"+o+"EventBinded"],i=n.navigationBar;l||this._setMainEle(i),this._render(),l||(this["_"+o+"EventBinded"]=!0,"decade"!==o&&this._bindDrillDownClickEvent(o),this._bindDrilldownNavBarEvent(a),this._setMainEle(i),this["_"+o+"DrillDownElement"]=this.element.find(".zdatetimepicker__"+o+"drilldown"))}},{key:"_bindDrilldownNavBarEvent",value:function(t){for(var a=["-left-month-","-right-month-"],o=0;2>o;o++)this._addEvents({arrowEvent:"click"},n("#"+this._elementId+a[o]+t))}},{key:"_bindDrillDownClickEvent",value:function(t){var a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.element;a=t?a.find(".zdatetimepicker__"+t+"drilldown"):a,this._addEvents({drilldownClick:"click"},n(a.find(".zdatetimepicker__monthyearnav")[0]))}},{key:"_getDrilldownNavBar",value:function(t,a,o){var _,l=this._data.month[0][o+"Drilldown"]?this._data.month[0][o+"Drilldown"].navigationBar:null,i=this._opts.navigationBar,s=l?l.lMonthIcon:this._lMonthIcon,r=l?l.rMonthIcon:this._rMonthIcon,d="split"===this._opts.navigationBar.navigationButtonsDisplayPattern,c=["month","Year","Decade","Century"];return s&&r||(l=this._getMonthNavBtnProps(null,i)),s=n.extend(!0,{},s||l.lMonthIcon),r=n.extend(!0,{},r||l.rMonthIcon),_=this._getI18NText("prev"+c[a]),s=_objectSpread({},s,{id:this._elementId+"-left-month-"+a,customAttributes:{"aria-label":_,title:_}}),_=this._getI18NText("next"+c[a]),r=_objectSpread({},r,{id:this._elementId+"-right-month-"+a,customAttributes:{"aria-label":_,title:_}}),this._setConditions({year:this._translateEToA(t.year||this._viewDate.getFullYear()),monthYearSwitcherType:"drilldown",isSplit:d,lMonth:!0,rMonth:!0,cursorCls:"decade"!==o&&i.yearSwitcher?"zh-cursorpointer":"",class:d?"":" zdatetimepicker__navbaractionsonright",navBtnCls:"zdatetimepicker__navbutton",lMonthIcon:s,rMonthIcon:r})}},{key:"_updateYearArrowState",value:function(t,a){a="number"==typeof a?a:this._viewDate.getFullYear();var i,o=this._elementId;t&&(i=s(10,t-1));var r=this._maxDate&&a+i>l(this._maxDate.getFullYear()/i)*i||!1;n("#"+o+"-right-month-"+t).toggleClass("is-disabled",r);var d=1>=a||this._minDate&&a-i<l(this._minDate.getFullYear()/i)*i||!1;n("#"+o+"-left-month-"+t).toggleClass("is-disabled",d)}},{key:"_buildYearDecadeBody",value:function(t,a,o){for(var n=1,l=[],s=t;s<a;s+=o,n++)l.push({class:this["_get"+(10===o?"Decade":"Year")+"Classes"](s,n),value:1<=s?this._translateEToA(s):"",attr:1<=s?s:""}),12!==n&&0==n%4&&l.push({isTr:!0});return l}},{key:"_setViewMode",value:function(t,a,o){var r,l=this._prevViewMode,i=this.element,s=this._getClass(l),d=n((o=o||i).find(".zdatetimepicker__calendar")[0]);0===l&&this._isShown&&d.is(":visible")&&(this._width=d.outerWidth()),(r=0===l?n(d[0]).find("table"):o.find(".zdatetimepicker__"+s).find(".zdatetimepicker__drilldowncell")).removeClass("zeffects--zoomin"),a||r.addClass("zeffects--zoomout"),this._viewMode=t,1<this._monthsPerView&&i.find(".zdatetimepicker__list").nextAll().find(".zdatetimepicker__month,.zdatetimepicker__weeknumbers,.zdatetimepicker__navbar").addClass("zdatetimepicker--disabledcalendar"),clearTimeout(this._animationTimeout),a?this._animationHandler(o,a):this._animationTimeout=setTimeout(this._animationHandler.bind(this,o,a),300)}},{key:"_updateMonthClasses",value:function(){for(var t=this._data.month[0].monthDrilldown.cells,a=0,o=0,n=t.length;a<n;a++)t[a].class&&-1<t[a].class.indexOf("zdatetimepicker__monthview")&&(t[a].class=this._getMonthClasses(o),o++);this._render(),this._updateYearArrowState(1)}},{key:"_updateMonthDDNav",value:function(){this._data.month[0].monthDrilldown.navigationBar.year=this._translateEToA(this._viewDate.getFullYear())}},{key:"_getClass",value:function(t){var a;return 4>=t&&(a=["days","month","year","decade"][t]),a+(0===t?"":"drilldown")}},{key:"_animationHandler",value:function(t,a){var s,o=this._viewMode,l=this._getClass(o),i=1===this._monthsPerView?t.children("div:not(.zdatetimepicker__commandbar):not(.zdatetimepicker__titlebar):not(.zdatetimepicker__pointer):not(.zdatetimepicker__timebar):not(.zdatetimepicker--custom)"):n(this.element.find(".zdatetimepicker__container").find(".zdatetimepicker__list")[0]).find(".zdatetimepicker").children();t=this._display(!0,i).filter(".zdatetimepicker__"+l),(s=0===o?n(t.find(".zdatetimepicker__calendar")[0]).find("table"):t.find(".zdatetimepicker__drilldowncell")).removeClass("zeffects--zoomout"),a||s.addClass("zeffects--zoomin"),this._display(void 0,t),this._setPosition(),this._fireDrilldownEv(void 0,void 0,void 0,!0)}},{key:"_addDisabledCls",value:function(){"dates"!==this._opts.drilldownLevelOnOpen&&0!==this._viewMode&&this.element.find(".zdatetimepicker__list").nextAll().find(".zdatetimepicker__month,.zdatetimepicker__weeknumbers,.zdatetimepicker__navbar").addClass("zdatetimepicker--disabledcalendar")}},{key:"_removeEffects",value:function(){this.element.find(".zeffects--zoomin").removeClass("zeffects--zoomin"),this.element.find(".zeffects--zoomout").removeClass("zeffects--zoomout")}},{key:"_handleMousedownOnDrillDown",value:function(t,a,o,l){var i=this._opts,s=i.navigationBar,r=this._viewDate,d=n(t.target),c=this._viewMode;if(a&&r.setMonth(parseInt(d.attr("data-value"))),o&&r.setFullYear(parseInt(l)),s.updateDateOnMonthYearSwitch&&i.immediateCommit&&this._OKClickHandler(t,!0),0!==c){var _=c-1;o&&!s.monthSwitcher&&(_=0),this._prevViewMode=this._viewMode,this._setViewMode(_),c=this._viewMode,this._doNotBuildTime=!0,0===c&&this._buildData(!0),1===c&&(this._updateMonthDDNav(),this._updateMonthClasses())}return a?"month":"year"}},{key:"_fireDrilldownEv",value:function(t,a,o,n){this._prevViewMode=this._viewMode;var l=this._getObj();this._dispatchEvent((t?"before":n?"after":"")+"drilldown",a,_objectSpread({},l,{viewElement:o}))}},{key:"_setDrilldownClass",value:function(t){var n=this._data.month[0][(t.is(".zdatetimepicker__year")?"year":"month")+"Drilldown"].cells[t.index()];n.class=n.class.replace(/is-selected/g,"")}},{key:"_fillMonths",value:function(t){var o,a=this.element;t&&void 0!==t.type&&(o=t),this._fireDrilldownEv(!0,o),this._buildDrilldownView({view:"month",fn:["buildMonthNavBarBody"]},1,o),this._setViewMode(1,"boolean"==typeof t,a),this._fireDrilldownEv(!1,o,this._monthDrillDownElement)}},{key:"_buildMonthNavBarBody",value:function(){for(var t=[],a=-1<this._opts.navigationBar.monthFormatInSwitcher.indexOf("MMMM")?this._getI18NText("months"):this._getI18NText("monthsAbbreviated"),o=0;12>o;o++)t.push({class:this._getMonthClasses(o),value:this._translateEToA(a[o]),isTr:!1,attr:o+""}),12!=o+1&&0==(o+1)%4&&t.push({isTr:!0});return t}},{key:"_getMonthClasses",value:function(t){var a=this._checkDisabled.bind(this),o="zdatetimepicker__monthview zdatetimepicker__monthyeargrid",n=this._getNewDate(),i=this._viewDate.getFullYear(),s=this._minDate,r=this._currentSelected,d=this._maxDate,c=r&&r.getMonth()===t&&r.getFullYear()===i,_=this._opts,u=_.value;return(u&&u.getMonth()===t&&u.getFullYear()===i&&c||c)&&(o+=" is-selected"),"multiple"===_.selectionType&&(o+=this._addSelectClass("Month",t,i)),n.getMonth()===t&&n.getFullYear()===i&&(o+=" zdatetimepicker--currentcell"),(s&&(i===s.getFullYear()&&t<s.getMonth()||i<s.getFullYear())||d&&(i===d.getFullYear()&&t>d.getMonth()||i>d.getFullYear())||a("Years",i)||a("Months",t))&&(o+=" is-disabled zdisabled"),o}},{key:"_checkDisabled",value:function(t,a){var o=this._opts["disabled"+t];return o instanceof Array&&-1<o.indexOf(a)}},{key:"_handleYearClick",value:function(t,a,o){var l=n(t.target),i=this._elementId,s=this._opts.navigationBar.yearNavigationStep,r=t.currentTarget.getAttribute("id");if(!l.closest(".zdatetimepicker__navbutton").hasClass("is-disabled")){var d=s*(-1<r.indexOf(i+"-right-year")||-1<r.indexOf(i+"-right-month")&&0<this._viewMode?1:-1);(o=o||this._viewDate).setFullYear(o.getFullYear()+d),this._viewDate=new Date(+o),this._updateMonthDDNav(),this._updateMonthClasses(a||this.element),this._triggerMonYrDecChange(t,"year",this._viewDate.getFullYear())}}},{key:"_fillYears",value:function(t){var n,a=this.element,o=this._viewMode;t&&void 0!==t.type&&(t.stopPropagation(),t.preventDefault(),n=t),this._monthDrillDownElement&&1===o||this._fillMonths(n),this._fireDrilldownEv(!0,n);var i=10*l(this._viewDate.getFullYear()/10),s=i+9;this._yearStart=i,this._monthDrillDownElement&&this._buildDrilldownView({view:"year",year:this._translateEToA(i+" - "+s),fn:["buildYearDecadeBody",i-1,s+2,1]},2,n),this._setViewMode(2,"boolean"==typeof t,a),this._fireDrilldownEv(!1,n,this._yearDrillDownElement)}},{key:"_getYearClasses",value:function(t,a){var o=this._opts,n=o.disabledYears,l=" zdatetimepicker__year  zdatetimepicker"+(1===a||12===a?"__drilldownnearlevelcell":"__monthyeargrid"),i=this._minDate,s=this._maxDate,r=this._currentSelected&&this._currentSelected.getFullYear()===t,d=o.value;return(d&&d.getFullYear()===t&&r||r)&&(l+=" is-selected"),"multiple"===o.selectionType&&(o.values.length||this._selectedDates.length)&&(l+=this._addSelectClass("FullYear",t)),this._getNewDate().getFullYear()===t&&(l+=" zdatetimepicker--currentcell"),(1>t||i&&t<i.getFullYear()||s&&t>s.getFullYear()||n&&-1<n.indexOf(t))&&(l+=" is-disabled zdisabled"),l}},{key:"_handleDecadeArrowClick",value:function(t){t.stopPropagation();var a=n(t.target),o=this._viewDate,i=t.currentTarget.getAttribute("id"),s=this._viewMode,r=2===s;if(!a.closest(".zdatetimepicker__navbutton").hasClass("is-disabled")){var _,u,p,m,g,d=r?"year":"decade",c=r?1:10;_=(-1<i.indexOf(this._elementId+"-right-month")?1:-1)*c;var h=(u="number"==typeof(u=r?this._yearStart:this._decadeStart)?u:o.getFullYear())+10*_;p="number"==typeof h?h:this._viewDate.getFullYear(),this._data.month[0][d+"Drilldown"].cells=null,g=(m=l(p/(10*c))*(10*c))+9*c,this._buildDrilldownView({view:d,year:this._translateEToA(m+" - "+g),fn:["buildYearDecadeBody",m-c,g+2*c,c],placeholder:r?"month":"year"},s,t),this._display(void 0,this["_"+d+"DrillDownElement"]),this["_"+(r?"year":"decade")+"Start"]=m,this._updateYearArrowState(s,m)}this._dispatchEvent((r?"decade":"century")+"change",t,{viewDate:this._viewDate,value:this._opts.value})}},{key:"_fillDecades",value:function(t){var n,a=this.element,o=this._yearDrillDownElement;void 0!==t.type&&(t.stopPropagation(),t.preventDefault(),n=t),o||this._fillYears(n),this._fireDrilldownEv(!0,n);var i=100*l(this._viewDate.getFullYear()/100),s=i+90;this._yearDrillDownElement&&this._buildDrilldownView({view:"decade",year:this._translateEToA(i+" - "+s),fn:["buildYearDecadeBody",i-10,s+20,10]},3,n),this._setViewMode(3,"boolean"==typeof t,a),this._decadeStart=i,this._fireDrilldownEv(!1,n,this._decadeDrillDownElement)}},{key:"_getDecadeClasses",value:function(t,a){var o=" zdatetimepicker__"+(1===a||12===a?"drilldownnearlevelcell":"monthyeargrid")+" zdatetimepicker__decade ",n=this._minDate,i=this._maxDate;return(10>t||n&&t<10*l(n.getFullYear()/10)||i&&t>10*l(i.getFullYear()/10))&&(o+=" is-disabled zdisabled"),o}},{key:"_handleDecadeMousedown",value:function(t,a,o){this._viewDate.setFullYear(parseInt(o)),0!==a&&(this._setViewMode(a-1),2===(a=this._viewMode)&&this._fillYears(t))}},{key:"_bindArrowEvents",value:function(){for(var s,t=this._elementId,a=("#"+t+"-left-year,#"+t+"-right-year,#"+t+"-left-month-0,#"+t+"-right-month-0").split(","),o=0,l=a.length;o<l;o++)(s=n(a[o])).length&&this._addEvents({arrowEvent:"click"},s)}},{key:"_getIconProps",value:function(a,o,n,l,i){return i=this._getI18NText(i),t.ZButton.getBtnProps({className:"zdatetimepicker__navbutton",isCE:this.isCE,customAttributes:{"aria-label":i,title:i},defaultIconClassName:"zdatetimepicker__icon",SVGIconId:a[n+"ButtonSVGIconId"],defaultSVGIconId:"#zc__svg--"+o+" zh-arrowicon",iconClassName:a[n+"ButtonIconClassName"],templateRender:!0,id:this._elementId+l})}},{key:"_getNavBtnProps",value:function(t,a,o){var n=this._opts.navigationBar,l=a===this._monthsPerView-1,i=n.monthNavigationButtons,s=n.yearNavigationButtons;o.isSplit="split"===n.navigationButtonsDisplayPattern,o.class=o.isSplit?"":" zdatetimepicker__navbaractionsonright",i&&this._getMonthNavBtnProps(o,n),s&&this._getYrNavBtnProps(o,n),o.isSplit?t.navigationBar=_objectSpread({},o,{lMonth:i&&!a,lYear:s&&!a,rMonth:i&&l,rYear:s&&l}):(o.lMonth=o.rMonth=i&&l,o.lYear=o.rYear=s&&l)}},{key:"_setArrowMainElement",value:function(t){var a=[];t.monthNavigationButtons&&(a=["-left-month-0","lMonthIcon","-right-month-0","rMonthIcon"]),t.yearNavigationButtons&&(a=[].concat(_toConsumableArray(a),["-left-year","lYearIcon","-right-year","rYearIcon"]));for(var s,o=0,l=a.length;o<l;o+=2)if((s=n("#"+this._elementId+a[o])).length){var r=t[a[o+1]];r.mainElement=s[0],s.attr(r.attrs)}}},{key:"_arrowClickHandler",value:function(t,a,o){var r,d,n=this._monthsPerView,l=this._opts.navigationBar,s=this._viewDate;d=new Date(+s);for(var u,c=this.element,_=1;_<=n;_++){if(u=1==_,a&&(r=1<t?this._moveMonth(d,u?t:1):this._moveMonth(s,u?t:_-1)),o&&(1<n?r=new Date(this._getFirstDate()):!r&&(r=new Date(s)),r.setFullYear(r.getFullYear()+t)),1<l.monthNavigationStep||1<l.yearNavigationStep)for(var p=["min","max"],m=void 0,g=0;2>g;g++)m=this._isBig(p[g],r),this["_"+p[g]+"Date"]&&m&&(r=new Date(+this["_"+p[g]+"Date"]));u&&r&&(s=this._viewDate=new Date(+r))}this._doNotBuildTime=!0,this._updateView=!0,this._buildData(!0),this._isDropdown?(this._checkOptions(),this._buildDropdownNavElement(s.getMonth(),s.getFullYear())):o&&1===this._viewMode&&this._updateMonthClasses(c)}},{key:"_updateArrowState",value:function(t,a){var o=1<this._monthsPerView,l=this._disable.bind(this);t=t||this._viewDate;var _,u,p,m,g,h,v,y,f,i=this._elementId,s=this._minDate,r=this._maxDate,d=t.getFullYear(),c=t.getMonth();s&&(u=s.getFullYear(),_=s.getMonth()),r&&(m=r.getFullYear(),p=r.getMonth());var k=1===d;g=k||_||u||p||m,h=k&&0===c||d<u||d===u&&c-1<_,v=d>m||d===m&&c+1>p,y=1===d||d-1<u||d-1===u&&c<_,f=d+1>m||d+1===m&&c>p;var b=g&&!o;(b||o&&0===a)&&(l(h,n("#"+i+"-left-month-0")),l(y,n("#"+i+"-left-year"))),(b||o&&a===this._monthsPerView-1)&&(l(v,n("#"+i+"-right-month-0")),l(f,n("#"+i+"-right-year"))),g||h&&k&&0===c||n("#"+i+"-left-month-0,#"+i+"-left-year,#"+i+"-right-month-0,#"+i+"-right-year").removeClass("is-disabled").removeAttr("aria-disabled disabled")}},{key:"_getYrNavBtnProps",value:function(t,a){t.lYearIcon||(t.lYearIcon=this._getIconProps(a,"fastbackward","previousYear","-left-year","prevYear")),t.rYearIcon||(t.rYearIcon=this._getIconProps(a,"fastforward","nextYear","-right-year","nextYear"))}},{key:"_handleYearArrowClick",value:function(t){var s,a=this._opts,o=n(t.target),l=t.currentTarget.getAttribute("id"),i=a.navigationBar.yearNavigationStep;o.closest(".zdatetimepicker__navbutton").hasClass("is-disabled")||(s=this._elementId+"-right-",this._arrowClickHandler(-1<l.indexOf(s+"year")||-1<l.indexOf(s+"month")&&0<this._viewMode?i:-i,void 0,!0)),this._triggerMonYrDecChange(t,"year",this._viewDate.getFullYear())}},{key:"_getMonthNavBtnProps",value:function(t,a){var o=this._getIconProps(a,"backward","previousMonth","-left-month-0","prevMonth"),n=this._getIconProps(a,"forward","nextMonth","-right-month-0","nextMonth");return t?(!t.lMonthIcon&&(this._lMonthIcon=t.lMonthIcon=o),void(!t.rMonthIcon&&(this._rMonthIcon=t.rMonthIcon=n))):{lMonthIcon:o,rMonthIcon:n}}},{key:"_handleMonthArrowClick",value:function(t){var a=n(t.target),o=this._opts,l=t.currentTarget.getAttribute("id"),i=o.navigationBar.monthNavigationStep;a.closest(".zdatetimepicker__navbutton").hasClass("is-disabled")||(1<this._monthsPerView&&this._currentSelected&&(this._viewDate=new Date(+this._getFirstDate())),this._arrowClickHandler(i*(-1<l.indexOf(this._elementId+"-right-month")?1:-1),!0)),this._triggerMonYrDecChange(t,"month",this._viewDate.getMonth())}},{key:"_setAttrs",value:function(a,o,n){var u,l=this,s=this._data,r=this._opts,d=r.navigationBar,c=!0,_=this._isDropdown;if(n=n||this.element,-1>["minDate","maxDate"].indexOf(a)&&(r[a]=o,this._userOptions[a]=o),void 0===this._yearNavigation&&(this._yearNavigation=d.yearNavigationButtons=!_),"values"===a){var p=r.values;!p||p instanceof Array&&0===p.length?this.clearAll():this.setValues(p),c=!1}else if(-1<["minDate","maxDate"].indexOf(a)){this["_"+a+"HasTime"]=!1,this._parseValue(a,o),o?(this._userOptions[a]=r[a],this["_"+a]=new Date(r[a].getTime())):(this["_"+a]=null,this["_"+a+"HasTime"]=!1);var m=!r.value&&0===r.values.length;m&&this._setHours(),this._processLimits(),this._checkLimits(),m&&(r.monthToBeShownOnOpen&&this._setView("month",!0),r.yearToBeShownOnOpen&&this._setView("year")),this._isDropdown&&(s.modifiedAttr="minOrMax",this._checkOptions()),u=!0}else if(-1<["closeButton","closeSVGIconId","closeIconClassName","title"].indexOf(a))this._closeButton=void 0,s.title=this._getTitleData(),"title"===a&&(r.title?this._enableDrag=r.draggable:r.draggable&&this.element.data("zdraggable")&&t.draggable(this.element).destroy()),s.modifiedAttr="title";else if("displayType"===a)this._validateOpts(),"box"===o&&this._pointer&&!this._isPositionModified&&(r.position="bottom-left"),s.modifiedAttr="displayType";else if(-1<a.indexOf("customHTML"))this._handleCustomHTML(),c=!1;else if("displayWeekNumbers"===a)this._setMonthVal(a,o);else if("weekHeading"===a&&r.displayWeekNumbers)this._setMonthVal("weekTitle",o);else if("type"===a)s.modifiedAttr="type","popup"===r.type?(s.title.closeButton=r.closeButton,(r.forElement||r.offset)&&this._showPicker()):this._closeButton&&(s.title.closeButton=!1),"inline"===r.type&&(this._display(),this._isShown=!0);else if("selectionType"===a)this._resetValues(),u=!0;else if(-1<["todayButton","clearButton","hideCancelButton","immediateCommit","commandBar"].indexOf(a))this._setOKCancelBtns(),this._isBtns=this._isBtnsExist(),this._isBtns?(this._setBtnProps(),this._createButtons()):this._data.cBar=null,this._getBtnsArr().forEach(function(t){r[t+"Button"]||(l["_"+t]=null)}),s.modifiedAttr="commandBar";else if(-1<["todayButtonLabel","cancelButtonLabel","clearButtonLabel","OKButtonLabel"].indexOf(a)){var g=a.replace("Label",""),h=this._traverseBtns(g,void 0,void 0,!0),v=this["_"+g.replace("Button","")];h.text=h.customAttributes["aria-label"]=o,h.mainElement=v&&v.length?v[0]:void 0,"todayButton"===g?this._domChanged=!0:this._setBtnValue({text:o},h),this["_"+a]=o||this._getI18NText(a)}else if("draggable"===a)r.title&&r.draggable?(this._enableDrag=!0,s.modifiedAttr="title"):this.element.data("zdraggable")&&t.draggable(this.element).destroy();else if("monthToBeShownOnOpen"===a||"yearToBeShownOnOpen"===a){var y=-1<a.indexOf("month");this._setView(y?"month":"year",y),(this._minDate||this._maxDate)&&this._checkViewDate(this._viewDate),u=!0}else if(-1<["disabledDaysOfWeek","specialDaysOfWeek","specialDates","disabledDates"].indexOf(a)){-1<["disabledDates","specialDates"].indexOf(a)&&this._convertStringToObject(_defineProperty({},a,r[a]));var f=-1<a.indexOf("special");this._refreshClassNames(f?"zdatetimepicker--special":"is-disabled zdisabled",f?["specialDaysOfWeek","specialDates"]:["disabledDaysOfWeek","disabledDates"])}else if("disabledMonths"===a)if(-1<r.disabledMonths.indexOf(this._viewDate.getMonth()))n.find("td").addClass("is-disabled zdisabled").attr("aria-disabled",!0);else if(_){if(this._monthHeader){var k=t.select(this._monthHeader);k.setOptionAttributes(this._oldValue,"disabled",!1),k.setOptionAttributes(r.disabledMonths,"disabled",!0)}}else this._monthDrillDownElement&&this._monthDrillDownElement.find("td").addClass("is-disabled").attr("aria-disabled",!0);else if("selectionLimit"===a&&"multiple"===r.selectionType){var b=this._selectedDates,C=this._opts.values,D=b.length;if(o===D||D>o){this._limitReached=!0,C.splice(o,C.length);for(var S=b.splice(o,b.length),T=0,w=S.length;T<w;T++)this._setDateClass("is-selected",!1,this._getDateElem(S[T]),!0);b.length?(this._queryString=":not(",this._getQueryString(),this._setDateClass("is-disabled",!0,this.element.find(".zdatetimepicker__date,.zdatetimepicker__adjacentmonthdate").filter(this._queryString),!0)):(this._queryString="",u=!0),this._dispatchEvent("change",void 0,this._getSelectedValue())}else u=!0}else if("disabledYears"===a)if(-1<r.disabledYears.indexOf(this._viewDate.getFullYear()))u=!0;else if(_){if(this._yearHeader){var I=t.combobox(this._yearHeader);I.setOptionAttributes(this._oldValue,"disabled",!1),I.setOptionAttributes(r.disabledYears,"disabled",!0)}}else this._yearDrillDownElement&&this._yearDrillDownElement.find("td").addClass("is-disabled").attr("aria-disabled",!0);else if("displayAdjacentMonthDates"===a)u=!0,s.modifiedAttr="adjacentMonthDates";else if("selectedDateMonthViewIndex"===a&&r.value)this._viewDate=new Date(r.value.getTime()),this._changeMonth(!1),u=!0;else if("allowSelectionOfAdjacentMonthDates"===a)this._setMonthVal("className"," zdatetimepicker--adjacentmonthdatereadonly",!o),this._domChanged=!0,s.modifiedAttr="adjacentMonthDates";else if("width"===a)o&&this.element.width(o);else if("height"===a)o&&this.element.height(o);else if("className"===a)this.element.removeClass(this._oldValue),o&&this.element.addClass(o);else if("offset"===a)this.element.css(o),c=!1;else if("margin"===a&&this._isShown){var x={left:parseInt(this.element.css("left")),top:parseInt(this.element.css("top"))};x=this._retrieveMarginValues(x),this.element.css(x)}else if("zclassName"===a&&this.isCE)this._oldValue&&this.element.removeClass(this._oldValue),this.element.addClass(o);else if("rtl"===a&&(this._monthHeader||this._yearHeader)){var E={rtl:o};this._monthHeader&&t.select(this._monthHeader).setAttributes(E),this._yearHeader&&t.combobox(this._yearHeader).setAttributes(E)}else"timeZone"===a&&(this._setTimeZone(),u=!0);return this._reInit||(this._reInit=u),c}},{key:"_refreshClassNames",value:function(t,a){for(var _,n=-1<t.indexOf("disabled"),s=this._opts,r=t.split(" "),c=0;c<this._monthsPerView;c++)for(var m,u=0,p=(_=this._data.month[c].dates).length;u<p;u++)for(var g=0,h=(m=_[u]).length;g<h;g++){var l=m[g],v=l.class;l.class=v.replace(r[0],"").replace(r[1],""),l.title=l.infoText="";var y=void 0,f=new Date(parseInt(l.time)),k=!!n&&!this._dateWithInRange(f);l.text&&(k||(y=this._shouldAddClass(f,a))||this._shouldAddClass(f,a,"multiple"===s.selectionType&&this._limitReached))&&("object"===_typeof(y)&&(l.class+=y.className?" "+y.className:"",l.title=y.title||null,l.infoText=y.informativeText||s.specialDatesInformativeText||s.disabledDateInformativeText||null),l.class+=" "+t,!y&&!k&&(l.class=l.class.replace("zdisabled",""),-1<l.class.indexOf("is-selected")&&(l.class=l.class.replace("is-disabled",""))))}}},{key:"_setBtnProps",value:function(){for(var l,a=this._getBtnsArr(),o=this._opts,n=0;n<a.length;n++)this["_"+(l=a[n]+"ButtonLabel")]=o[l]||this._getI18NText(l);o.buttonsAlignment=t.buttonsAlignment||"right"}},{key:"_setBtnVal",value:function(){for(var t=this._getBtnsArr(),a=this._footer,o=0;o<t.length;o++){var n="_"+t[o],l=t[o]+"Click",s=a.find("."+t[o]+"Button-"+this.name);s.length&&(this[n]=s,this._handleFocus(this[n]),this._addEvents(_defineProperty({},l,"click"+("_today"===n?" keydown":"")),s))}this._OK&&(this._OKButton=!!this._OK.length)}},{key:"_createButtons",value:function(){this._data.cBar={},this._isColumnExists()?this._generateCustomCols():this._autoGenSingleColBtns();var t=this._traverseBtns("clearButton",void 0,void 0,!0);this._opts.clearButton&&t&&this._setClearBtnCls(t)}},{key:"_updateCommandBar",value:function(t){this._footer&&this._footer.length||(this._footer=t.find(".zdatetimepicker__commandbar")),this._isBtns&&this._setBtnVal(),this._traverseBtns()}},{key:"_traverseBtns",value:function(t,a,o,n){var s=1<this._monthsPerView,r=this._data.cBar;for(var d in r){var c=r[d];if(Array.isArray(c))for(var _=0,u=c.length;_<u;_++){var l=c[_],p=s&&(l.left||l.right||l.center)||l;if(p)if(s&&p instanceof Array)for(var h,m=0,g=p.length;m<g;m++){if(h=p[m],n&&h.name&&h.name===t)return h;n||this._setBtnMainElement(t,a,o,h)}else{if(n&&p.name&&p.name===t)return p;n||this._setBtnMainElement(t,a,o,p)}}}}},{key:"_setBtnMainElement",value:function(t,a,o,n){var l=n.name?n.name.replace("Button",""):void 0;if(l){var i=this["_"+l];if(void 0!==o&&t===n.name){var s=n.className+" ",r=new RegExp(a,"g");n.className=o?s+a:s.replace(r,"")}else this._doesExist(i)&&(n.mainElement=this["_"+l][0])}}},{key:"_autoGenSingleColBtns",value:function(){var d,c,t=this._getCommandBarData.bind(this),a=this._opts,o=0,n=a.buttonsAlignment,l=a.todayButton,s=a.OKButton,r=this._getIndex.bind(this);if(3>this._monthsPerView){d=this._getBtnsArr().map(function(t){return t+"Button"});for(var _=0;_<d.length;_++)o+=+a[d[_]];if(1===o){var u=d[c=r(0)];t("todayButton"===u?"center":"right",u)}else if(2===o){var p=d[c=r(1)];l?(t("left","todayButton"),t("right",p)):s&&3!==c?a.clearButton?(t("left",p),t("right","OKButton")):t("right",[p,"OKButton"]):(t("left","clearButton"),t("right","cancelButton"))}else 3===o?(c=r(2,d=["today","OK","clear","cancel"]),s&&(t("right","OKButton"),l&&t("right",d[c]+"Button",0)),l?t("left","todayButton"):(t("left","clearButton"),this._data.cBar.right.length&&t("right","cancelButton",0))):4===o&&(t("left","clearButton"),t("center","todayButton"),t("right",["cancelButton","OKButton"]))}else d=["clear","today","cancel","OK"],"right"!==n&&(d=d.reverse()),r(0,d,n)}},{key:"_getIndex",value:function(t,a,o){for(var n=(a=a||this._getBtnsArr()).map(function(t){return t+"Button"}),l=t;l<n.length;l++)if(this._opts[n[l]]){if(!o)return l;this._getCommandBarData(o,n[l])}}},{key:"_getCommandBarData",value:function(t,a,o,n){var d,l=this,i=this._data.cBar,r=i&&i.cols&&0!==i.cols.length?n:i;"number"==typeof o?r[t].splice(o,0,this._getbtnAttr(a)):(a instanceof Array||(a=[a]),a=a.map(function(t){return l._getbtnAttr(t)}),r[t]||(r[t]=[]),(d=r[t]).push.apply(d,_toConsumableArray(a)))}},{key:"_getbtnAttr",value:function(a){var o=a.replace("Button",""),n=this["_"+a+"Label"];return t.ZButton.getBtnProps({customAttributes:{name:a,"aria-label":n},name:a,isLink:"today"===o,className:("today"===o?"zdatetimepicker__todaylink ":" ")+a+"-"+this.name,text:n,appearance:"OKButton"===a?"primary":"normal",size:"small",isCE:this.isCE,tabindex:0,templateRender:!0})}},{key:"_clearClickHandler",value:function(t,a){var o=this._clear,l=this._doesExist(o);(!t||n(t.target).closest(o).hasClass("is-disabled"))&&t||(l&&this._removeFocus(o),this._clearValues(t,!0!==a&&a),!a&&l&&this._dispatchEvent("clear",t,{valuesObject:[],values:[]}))}},{key:"_setClearBtnCls",value:function(t,a,o){t=t||this._traverseBtns("clearButton",void 0,void 0,!0),a=void 0===a?"single"===this._opts.selectionType?!this._currentSelected:this._selectedDates&&0===this._selectedDates.length:a;var n=this._clear;this._doesExist(n)&&(a?-1===t.className.indexOf("is-disabled")&&(t.className+=" is-disabled"):t.className.replace(/is-disabled/g,""),o&&this._disable(!!a,n))}},{key:"_shouldAddClass",value:function(a,o,n){for(var d,l=t.Date.areDatesEqual.bind(t),s=0,r=o.length;s<r;s++)if(d=n?this._oldOpts[o[s]]:this._opts[o[s]]){if(-1<d.indexOf(a.getDay()))return!0;for(var c=0,_=d.length;c<_;c++){var u=d[c],p=u.date;if("object"===_typeof(u)){if(p instanceof Date&&l(p,a))return!0;if(p){var m=new Date(+p.date);if(this._setYearAndMonth(m,a,u),l(m,a))return u}else if(u.startDate&&u.endDate){for(var g=["startDate","endDate"],h=0;2>h;h++)g[h]=new Date(+u[g[h]].date),this._setYearAndMonth(g[h],a,u);if((t.Date.isGreater(a,g[0])||l(g[0],a))&&t.Date.isGreater(g[1],a))return u}}}}}},{key:"_setYearAndMonth",value:function(t,a,o){o.repeatEveryYear&&t.setFullYear(a.getFullYear()),o.repeatEveryMonth&&t.setMonth(a.getMonth())}},{key:"_convertStringToObject",value:function(t){var a=this,o=function(o){var n=t[o],l=a._opts,i=a._dateFormat;a._isNotNull(n)&&("string"==typeof n?t[o]=l[o]=a._parseDateValue(n,i):n instanceof Array&&(t[o]=l[o]=n.map(function(t){if("object"===_typeof(t)&&!(t instanceof Date)){var n=t.date,l=a._checkDate.bind(a),s=a._parseVal.bind(a);return l(n,t)||l(n)||l(t.startDate)||l(t.endDate)?t:(n?t.date=s(n):t.startDate&&t.endDate&&(t.startDate=s(t.startDate),t.endDate=s(t.endDate)),t)}var r="disabledTimeList"===o,d=a._parseDateValue(t,r?a._timeFormat:i);return r?d.date.setSeconds(0,0):d.date.setHours(0,0,0,0),d})))};for(var n in t)o(n)}},{key:"_checkDate",value:function(t,a){return t=a?t:t?t.date:void 0,a=a||t,t&&t instanceof Date&&a.hasOwnProperty("isValid")}},{key:"_parseVal",value:function(t){return(t=this._parseDateValue(t&&t.hasOwnProperty("isValid")&&t.isValid&&t.date||t,this._dateFormat)).date.setHours(0,0,0,0),t}},{key:"_addUniqueClasses",value:function(t,a,o){var d,n=this._opts,l=a?a+" ":"",i=n.disabledMonths,s=n.disabledYears,r=!0;return(d=this._shouldAddClass(t,["disabledDaysOfWeek","disabledDates"]))||i&&-1<i.indexOf(t.getMonth())||s&&-1<s.indexOf(t.getFullYear())?l+="is-disabled zdisabled":d||o?r=!1:(d=this._shouldAddClass(t,["specialDaysOfWeek","specialDates"]))&&(l+="zdatetimepicker--special"),(r=d||r)&&this._getCustomProps(r,l)}},{key:"_getCustomProps",value:function(t,a){var n,i,o=a+" ";if("object"===_typeof(t)){o+=t.className?" "+t.className:"",i=t.title||null;var s=this._opts.disabledDateInformativeText,r=this._opts.specialDatesInformativeText;(t&&t.informativeText||"boolean"==typeof t&&s||r)&&(-1<a.indexOf("is-disabled")&&s?n=s:-1<a.indexOf("zdatetimepicker--special")&&r?n=r:t&&t.informativeText&&(n=t.informativeText),n=n||void 0)}return{class:o,infoText:n,title:i}}},{key:"_generateDropdown",value:function(a,o){var n=o?["month","Month"]:["year","Year"],l=this._data.month[0].navigationBar,i=l[n[0]+"Select"];this._opts.navigationBar[n[0]+"Switcher"]&&(i.mainElement?"number"==typeof a&&t[o?"select":"combobox"](this["_"+n[0]+"Header"]).setAttributes({selectedValue:o?i.options[a].value:a}):this["_generate"+n[1]+"Dropdown"](l))}},{key:"_constructDropdown",value:function(t){t.yearSwitcher&&!t.yearSelect&&this._generateYearDropdown(t),t.monthSwitcher&&!t.monthSelect&&this._generateMonthDropdown(t),this._checkOptions()}},{key:"_stopSelectEvents",value:function(a){for(var o=t.ZSelect.prototype._EVENTS,n=0;n<o.length;n++)a.on("z"+o[n],function(t){return t.stopPropagation()})}},{key:"_assignHeaders",value:function(){this._assignElement("month"),this._assignElement("year")}},{key:"_assignElement",value:function(t){if(this._opts.navigationBar[t+"Switcher"]){var a=this["_"+t+"Header"];if(!a||a&&!a.length){var o=n("#"+this._elementId+"-"+t+"-header");(o=o?o[0]:null)&&(this["_"+t+"Header"]=n(o)),this._data.month[0].navigationBar[t+"Select"].mainElement=o}}}},{key:"_buildDropdownNavElement",value:function(t,a){(this._opts.disabledMonths||this._opts.disabledYears)&&this._validateDisabledMonthYear(),this._generateDropdown(t,!0),this._generateDropdown(a)}},{key:"_validateDisabledMonthYear",value:function(){for(var n,a=["months","month","Years","year"],o=0;o<a.length;o+=2){n=this._opts["disabled"+a[o]];var l=this["_"+a[o+1]+"Header"],s=this._viewDate["months"===a[o]?"getMonth":"getFullYear"]();if(l&&n)for(var d,r=0;r<n.length;r++)d="months"===a[o]?"select":"combobox",s!==n[r]&&t[d](l).setOptionAttributes(n[r],"disabled",!0)}}},{key:"_setDropdownVal",value:function(){var n,l,s,r,t=this._maxDate,a=this._minDate,o=this._data.month[0].navigationBar;t&&(s=t.getFullYear(),r=t.getMonth()),a&&(l=a.getMonth(),n=a.getFullYear());for(var _,d=["month","year"],c=0;2>c;c++)_="year"===d[c],this._opts.navigationBar[_?"yearSwitcher":"monthSwitcher"]&&this[_?"_setYearDropdownVal":"_setMonthDropdownVal"](n,l,s,r,o)}},{key:"_checkOptions",value:function(){(this._monthHeader||this._yearHeader)&&this._setDropdownVal()}},{key:"_bindHeaderEvents",value:function(t){(t=n("#"+this._elementId+"-"+t+"-header")).length&&this.isCE&&this._stopSelectEvents(t)}},{key:"_destroyDropdown",value:function(){this._monthHeader&&t.select(this._monthHeader).destroy(),this._yearHeader&&t.combobox(this._yearHeader).destroy(),this._monthHeader=this._yearHeader=void 0}},{key:"_selectClickHandler",value:function(t,a,o){a=!a&&t?t.detail:a;var s,l=this._viewDate,i=l.getFullYear();if(a.fromUI){var r=a.selectedValue;l.setDate(1),a.dropdownList&&((s=-1<n(a.dropdownList).attr("id").indexOf("month-header"))?l.setMonth(this._getMonthVal(r)):l.setFullYear(+r||i)),(this._minDate||this._maxDate)&&this._checkLimitOnDropDown(),this._buildData(!0),this._checkOptions(r,o),(this._opts.disabledMonths||this._opts.disabledYears)&&this._validateDisabledMonthYear(),void 0!==s&&this._triggerMonYrDecChange(t,s?"month":"year",this._viewDate[s?"getMonth":"getFullYear"]())}}},{key:"_checkLimitOnDropDown",value:function(){for(var r,a=["min","max"],o=this._viewDate,n=this._minDate,l=this._yearHeader,s=0;2>s;s++)if((r=this["_"+a[s]+"Date"])&&this._isBig(a[s],o)){if(o.setFullYear(r.getFullYear()),"min"===a[s])for(;this._isGreater(n,o);)o.getMonth()===n.getMonth()&&o.getFullYear()===n.getFullYear()?o.setDate(n.getDate()):o.setFullYear(o.getFullYear()+1);else for(;this._isGreater(o,this._maxDate);)o.setFullYear(o.getFullYear()-1);l&&t.combobox(l).setAttributes({selectedValue:o.getFullYear()})}}},{key:"_generateMonthDropdown",value:function(t){var _,u,p,a=this._opts,o=this._viewDate.getFullYear(),n=this._viewDate.getMonth(),l=a.minDate,s=a.maxDate,r=a.disabledMonths,d=[],c=this._getMonthVal();l&&(u=l.getFullYear()===o),s&&(p=s.getFullYear()===o);for(var m=0;m<c.length;m++)n===m&&(_=c[m]),d[m]={value:c[m],selected:n===m,disabled:u&&l&&m<l.getMonth()||p&&s&&m>s.getMonth()||r&&-1<r.indexOf(m)&&n!==m,label:c[m]};var g=this._monthHeader;t.monthSelect={id:this._elementId+"-month-header",dropdownList:{height:330,className:"zdatetimepicker--menu"},mainElement:g?g[0]:null,isCE:this.isCE,selectedValue:_,rtl:a.rtl,templateRender:!0,options:d,allowDisabledOptionsForSelection:!0,optionclick:this._selectClickHandler.bind(this)}}},{key:"_getMonthVal",value:function(t){var a="months"+(-1<this._opts.navigationBar.monthYearHeadingFormat.split(" ").indexOf("MMMM")?"":"Abbreviated"),o=this._getI18NText(a);return t?o.indexOf(t):o}},{key:"_setMonthDropdownVal",value:function(a,o,n,l,s){var r=t.select(this._monthHeader),d=this._opts.disabledMonths,c=this._viewDate.getFullYear(),_=this._viewDate.getMonth();if(a||o||n||l||"minOrMax"===this._data.modifiedAttr){for(var u=[],p=[],m=s.monthSelect.options,g=0;12>g;g++)(a===c&&g<o||n===c&&g>l||d&&-1<d.indexOf(g)&&_!==g?u:p).push(m[g].value);r.setOptionAttributes(u,"disabled",!0),r.setOptionAttributes(p,"disabled",!1)}r.setAttributes({selectedValue:s.monthSelect.options[_].value})}},{key:"_generateYearDropdown",value:function(t){var a=this._yearDropdown,o=this._getYearDropdownOpts();t.yearSelect={id:this._elementId+"-year-header",acceptNewValues:!0,templateRender:!0,isCE:this.isCE,dropdownList:{height:330,className:"zdatetimepicker--menu"},selectedValue:o.selectedValue,mainElement:a?a[0]:null,options:o.yearJSON,rtl:this._opts.rtl,change:this._selectClickHandler.bind(this),allowDisabledOptionsForSelection:!0,search:{showNoResultsMessage:!1}}}},{key:"_getYearDropdownOpts",value:function(){var v,y,f,a=this._opts,o=a.navigationBar,n=this._DEFAULTS.navigationBar,l=this._viewDate,s=this._getNewDate().getFullYear(),r=l.getFullYear(),d=this._minDate,c=this._maxDate,_=a.value,u=o.dropdownStartYear,p=o.dropdownEndYear,m=a.disabledYears,g=t.Date.convertOffsetToValue.bind(t),h=_?_.getFullYear():void 0;if(y=u,f=p,u=g((+u?n.dropdownStartYear:u).substring(9)),y=+y||s+u,p=g((+p?n.dropdownEndYear:p).substring(9)),(f=+f||s+p)<y){var k=y;y=f,f=k}if(_&&(f=h+p,y=h+u),d){var b=y,C=d.getFullYear();C>b&&(y=C,f<C&&(f=C+p))}else _&&y>h&&(y=h,f=h+p);c&&(y=(f=c.getFullYear())<=y?(d||c).getFullYear():y);for(var D=[],S=y;S<=f;S++)r===S&&(v=S),D.push({value:S,selected:r===S,disabled:c&&c.getFullYear()===S&&l.getMonth()>c.getMonth()||r!==S&&m&&-1<m.indexOf(S),label:S});return{selectedValue:v,yearJSON:D}}},{key:"_setYearDropdownVal",value:function(a,o,n,l){var i=t.combobox(this._yearHeader),s=this._viewDate;if("minOrMax"===this._data.modifiedAttr){var r=this._getYearDropdownOpts().yearJSON;i.setAttribute("options",r)}n&&i.setOptionAttributes(n,"disabled",s.getMonth()>l),a&&i.setOptionAttributes(a,"disabled",s.getMonth()<o),i.setAttributes({selectedValue:s.getFullYear()})}},{key:"_todayClickHandler",value:function(a,o){var n=t.keyCode;if("click"===a.type||"keydown"===a.type&&-1<[n.ENTER,n.SPACE].indexOf(a.keyCode)){this._today.removeClass("has-focus has-kfocus");var r,d,l=new Date(+this._viewDate),i=this._opts,s=0===this._viewMode;if(d=this._getNewDate(),this._setHours(),r=this._viewDate,d.setHours(0,0,0,0),(!s||t.Date.areDatesEqual(r,l))&&s||(this._isDrilldown&&this._setViewMode(0,!0),this._buildData(!0)),o||this._dispatchEvent("todaybuttonclick",a,this._getSingleValue(r)),"navigate-and-select"===i.todayButtonAction){var c=this._getDateElem(d);c.hasClass("is-disabled")||(this._setDate(a,c,d),s&&i.closeOnDateSelect&&i.immediateCommit&&"single"===i.selectionType&&this._closePicker())}}}},{key:"_getTitleData",value:function(a){var o=this._opts,n=o.title,l=o.closeButton&&"inline"!==o.type,i={value:n&&o.isTitleHTMLEncoded?n:t.encodeHTML(n),closeButton:l,modifiedAttr:a?"title":null};return l?this._getCloseProps(i):i}},{key:"_initDraggable",value:function(){var a=this._dragHandler.bind(this);"inline"!==this._opts.type&&t.draggable(this.element,{handle:".zdatetimepicker__titlebar",ignore:".zdatetimepicker__close",container:"window",cursor:"default",start:a.bind(this,"start"),drag:a.bind(this,""),end:a.bind(this,"end")})}},{key:"_dragHandler",value:function(t,a,o){this._dispatchEvent("drag"+t,a,o),"end"===t&&(this._dragEnd=!0)}},{key:"_processLimits",value:function(){for(var n,t=["_min","_max"],a=0,o=t.length;a<o;a++)this[(n=t[a])+"DateHasTime"]&&(this[n+"Time"]=new Date(+this._opts[n.slice(1)+"Date"])),n+="Date",!this._checkTime&&this[n]&&this[n].setHours(0,0,0,0)}},{key:"_checkMax",value:function(t,a){var o=this["_"+a+"Date"];return"min"===a?this._isGreater(o,t):this._isGreater(t,o)}},{key:"_checkLimits",value:function(){var r,a=this._minDate,o=this._maxDate,n=this._opts,l=n.value,s=this._getNewDate();s.setHours(0,0,0,0),a&&o&&t.Date.isGreater(a,o)&&!t.Date.areDatesEqual(a,o)&&(n.maxDate=this._maxDate=void 0);for(var d=["min","max"],c=0;2>c;c++){var _=d[c],u=this["_"+_+"Date"];if(u){var p=new Date(+a);p.setHours(0,0,0,0),l?this._checkMax(l,_)&&(this._currentSelected=n.value=void 0,r=!0):"multiple"===n.selectionType&&this._selectedDates.length&&(r=this._checkDates(_,p)),r&&this._dispatchEvent("change",void 0,this._getSelectedValue()),this._checkMax(this._viewDate,_)?this._viewDate=new Date(this._isBig(_,s)?+u:+s):"min"===_&&this._setViewDateIfNoVal(_)}}}},{key:"_checkViewDate",value:function(t){var n,a=this._maxDate,o=this._minDate;a&&this._isGreater(this._viewDate,a)&&(n="max"),o&&this._isGreater(o,this._viewDate)&&(n="min"),void 0===n?this._setViewDateIfNoVal():this._viewDate=new Date(this._isBig(n,t)?o?+o:"max"===n?+a:+t:+t)}},{key:"_setViewDateIfNoVal",value:function(){var t=this._opts,a=this._minDate,o=this._maxDate;!t.value&&!t.values.length&&a&&(!o||this._isGreater(o,a))&&this._isGreater(a,this._getNewDate())&&(this._viewDate=new Date(+a))}},{key:"_setAnimation",value:function(a){t.animationHandler({action:a,animation:this._opts.animation,element:this.element,ctype:this.name,callback:"close"===a?this._closeHandler.bind(this):this._openHandler.bind(this)})}},{key:"_getCloseProps",value:function(a){return a.closeSVGProps=t.ZButton.getBtnProps({className:"zdatetimepicker__close",defaultIconClassName:"zdatetimepicker__icon",iconClassName:this._opts.closeIconClassName,SVGIconId:this._opts.closeSVGIconId,defaultSVGIconId:"zc__svg--close",mainElement:this._closeButton?this._closeButton[0]:null,templateRender:!0}),a}},{key:"_setCloseEle",value:function(){var t=this.element,a=this._opts;!a.closeButton||"inline"===a.type||this._closeButton&&this._closeButton.length||(this._closeButton=t.find(".zdatetimepicker__close"),this._data.title.closeSVGProps.mainElement=this._closeButton[0],this._closeButton&&this._addEvents({closeClick:"click"},this._closeButton))}},{key:"_closeClickHandler",value:function(t){this._closePicker(t),this._removeFocus(this._closeButton)}},{key:"_insertHTML",value:function(t,a){var o=this._opts[t],l=n(o);if(this["_"+a]=l.parent(),l.length){try{o=document.querySelector(o)}catch(a){this.element.find(".zdatetimepicker--"+t).remove()}l.show(),l.addClass("zdatetimepicker--custom zdatetimepicker--"+t)}return l}},{key:"_insertHTMLAboveCalendar",value:function(){var t=this._insertHTML("customHTMLAboveCalendar","aboveCalendarParent");t.length&&t.insertBefore(this.element.find(".zdatetimepicker__month"))}},{key:"_insertHTMLAboveNavigationBar",value:function(){var t=this._insertHTML("customHTMLAboveNavigationBar","aboveNavbarParent");t.length&&(this._opts.title?t.insertAfter(this.element.find(".zdatetimepicker__titlebar")):t.prependTo(this.element))}},{key:"_insertHTMLBelowCalendar",value:function(){var t=this._insertHTML("customHTMLBelowCalendar","belowCalendarParent");t.length&&t.insertAfter(1===this._monthsPerView?this.element.find(".zdatetimepicker__monthcontainer").last():this.element.find(".zdatetimepicker__container"))}},{key:"_handleCustomHTML",value:function(t){for(var l,a=["BelowCalendar","AboveCalendar","AboveNavigationBar"],o=0;3>o;o++)if(l=this._opts["customHTML"+a[o]])if(void 0===t)this["_insertHTML"+a[o]]();else{var s=!1;try{HTMLContent=document.querySelector(HTMLContent),s=!0}catch(t){}s&&((l=n(l)).appendTo(n("body")),l.hide())}}},{key:"_generateCustomCols",value:function(){var t=this._data.cBar,a=this._opts,o=1<this._monthsPerView,n=a.commandBar,l=0,s=["left","center","right"];this._itemsList=[],o&&(t.colClass="zdatetimepicker--threecolumn",t.cols=[]);for(var d,r=0;3>r;r++)if(d=n[s[r]+"Column"],o&&(t.cols[r]={}),d){var c=d.commands;o&&(t.cols[r].className=d.className);for(var _=0;_<c.length;_++){var u=c[_],p=!0;("OK"===u||"cancel"===u)&&((p=!a.immediateCommit)&&(this._OKButton=!0)),p&&-1===this._itemsList.indexOf(u)&&(this._getCommandBarData(d.halign,u+"Button",void 0,o?t.cols[r]:void 0),this._itemsList[l++]=u)}}}},{key:"_setViewdate",value:function(t,a,o){var n=this._viewDate;t?this._viewDate=this._moveMonth(n,a):o&&this._viewDate.setFullYear(n.getFullYear()+a)}},{key:"_setView",value:function(a,o){var n=this._opts[a+"ToBeShownOnOpen"];if(!o||this._isNotNull(n))if("number"==typeof n&&(o&&0<=n&&11>=n||!o))this._viewDate["set"+(o?"Month":"FullYear")](n);else if("string"==typeof n){var s,l=["LAST","THIS","NEXT"];for(s=0;3>s;s++)if(-1<n.indexOf(l[s]+"_")){var r="THIS"===l[s],d=r?t.Date.convertOffsetToValue(n.substring(+o+9)):s-1;this._setViewdate(o,d,!!r||9===n.length)}}}},{key:"_setViewOnOpen",value:function(){var t=this._opts,a=this._setView.bind(this),o=t.monthToBeShownOnOpen,n=t.yearToBeShownOnOpen;o&&a("month",!0),n&&a("year"),(o||n)&&this._checkViewDate(new Date(+this._viewDate))}},{key:"_handleMultipleSelectOnClose",value:function(){var d,t=this._opts,a=t.values,o=this._selectedDates,n=a.length,l=o.length,s=[],r=t.selectionLimit;if(l!==n){if(l>n)s=this._selectedDates.splice(n),this._selectedDates.length=n,this._setSelectClass(!1,s);else{this._selectedDates=[];for(var c=0;c<n;c++)this._selectedDates[c]=this._parseDateValue(a[c],t.format).date;this._setSelectClass(!0,this._selectedDates)}r!==n&&this._limitReached?(this._limitReached=!1,d=!1,this._queryString=""):r===n&&(this._queryString=":not(",this._getQueryString(),d=!0)}o=this._selectedDates;var _=this._clear;o&&o.length&&this._doesExist(_)&&(this._traverseBtns("clearButton","is-disabled",!1),this._disable(!1,_)),void 0!==d&&this._setDateClass("is-disabled",d,this.element.find(".zdatetimepicker__date,.zdatetimepicker__adjacentmonthdate").filter(this._queryString))}},{key:"_setSelectClass",value:function(t,a){for(var o=0;o<a.length;o++)this._select(t,this._getDateElem(this._resetTime(a[o])))}},{key:"_setValues",value:function(){for(var t=this._opts,a=t.values,o=a.length,n=0;n<o;n++){var l=void 0,s=a[n];if("string"==typeof s?l="TODAY"===s?this._getNewDate():this._parseDateValue(a[n],t.format).date:s instanceof Date?l=s:a.splice(n,1),!((!t.selectionLimit||t.selectionLimit>n)&&this._dateWithInRange(l))){t.values.splice(n,o);break}this._valueUpdate=!0,l&&this._dateWithInRange(l)&&(l.setHours(0,0,0,0),this._selectedDates.push(l),n===o-1&&(this._viewDate=new Date(+l)))}}},{key:"_handleOkOnMultiple",value:function(a){a.values=[];for(var s,o=this._selectedDates,n=o.length,l=0;l<n;l++)s=new Date(o[l]),this._checkTime&&s.setHours(this._selectedTime.getHours(),this._selectedTime.getMinutes(),0,0),a.values.push(t.Date.formatDate(s,a.format))}},{key:"_getMultipleValues",value:function(){return{values:this._opts.values,valuesObject:this._selectedDates,translatedValues:this._getTranslatedValues()}}},{key:"_getTranslatedValues",value:function(){for(var a=[],o=this._opts,n=this._selectedDates,l=0;l<n.length;l++)a.push(this._translateEToA(t.Date.formatDate(n[l],o.format,o.labels)));return a}},{key:"_getQueryString",value:function(){for(var t=this._selectedDates,a=0,o=t.length;a<o;a++)this._queryString+="[data-time='"+ +this._resetTime(t[a])+"']",this._queryString+=","+(a==o-1?" .zdisabled)":"")}},{key:"_addSelectClass",value:function(t,a,o){var s,r,n=this._selectedDates,l="";for(s=0,r=n.length;s<r;s++){("Month"!==t||o===n[s].getFullYear())&&n[s]["get"+t]()===a&&(l+=" is-selected")}return l}},{key:"_setMultipleDate",value:function(t,a,o){var l=this._opts,i=this._clear,s=this._selectedDates,r=l.immediateCommit,d=s.length,c=this.element;if(a.hasClass("is-selected")){if(!t||t&&0===n(t.target).closest(".zdatetimepicker__todaylink").length){this._select(!1,a);var _=this._getDateIndex(o);-1!==_&&(d===l.selectionLimit&&(this._limitReached=!0,this._queryString=":not(",this._getQueryString(),this._queryString&&this._setDateClass("is-disabled",!1,c.find(".zdatetimepicker__date,.zdatetimepicker__adjacentmonthdate").filter(this._queryString)),this._disable(!1,c.find(".is-selected"))),s.splice(_,1),r&&l.values.splice(_,1)),0<d&&r&&(this._valueUpdate=!0,this._OKClickHandler(t,!0))}}else this._select(!0,a),this._selectedTime&&o.setHours(this._selectedTime.getHours(),this._selectedTime.getMinutes(),0,0),s.push(new Date(+o)),d=s.length,"inline"!==l.type&&r&&(this._valueUpdate=!0,this._OKClickHandler(t,!0)),this._queryString="",d===l.selectionLimit&&(!this._queryString&&(this._queryString=":not(",this._getQueryString()),this._setDateClass("is-disabled",!0,c.find(".zdatetimepicker__date,.zdatetimepicker__adjacentmonthdate").filter(this._queryString)),this._limitReached=!0);return this._doesExist(i)&&this._traverseBtns("clearButton","is-disabled",!s.length),this._disable(!s.length,i),{values:l.values,valuesObject:s}}},{key:"_getDateIndex",value:function(a){for(var o=this._selectedDates,n=0,l=o.length;n<l;n++)if(t.Date.areDatesEqual(a,o[n]))return n;return-1}},{key:"_checkDates",value:function(t,a){for(var s,o=this._selectedDates,n=this._opts,l=0;l<o.length;l++)("max"===t?this._checkMax(o[l],t):this._isGreater(a,o[l]))&&(s=!0,n.values.splice(l,1),this._selectedDates.splice(l,1),l--);return s}},{key:"getValues",value:function(){for(var a=[],o=this._opts,n=o.values,l=0,s=n.length;l<s;l++)a[l]=t.Date.formatDate(n[l],o.format);return{values:n,valuesString:a}}},{key:"setValues",value:function(a){var o=this._opts,n=this._oldDate;"multiple"===o.selectionType&&(o.values=a,this._setValues(),this._validateOpts(),(n&&!t.Date.areDatesEqual(n,this._viewDate)||!n)&&this._buildData(!0),this._dispatchEvent("change",void 0,this._getSelectedValue()))}},{key:"clearAll",value:function(){var t=this._opts;"multiple"===t.selectionType&&(t.values.length||this._selectedDates.length)&&(this._clearValues(void 0,!0),t.values=[],this._selectedDates=[])}},{key:"clear",value:function(a){var o=this._opts;if("multiple"===o.selectionType&&a){var i,s,n=this._selectedDates,l=o.values;if("string"==typeof a?s=!0:a instanceof Date&&(a.setHours(0,0,0,0),a=t.Date.formatDate(a,o.format),s=!0),s&&(i=l.indexOf(a)),-1<i){var r=this._getDateElem(this._resetTime(n[i]));r.removeClass("is-selected").removeAttr("aria-selected"),this._select(!1,r,!0),l.splice(i,1),n.splice(i,1),0===l.length&&(this._setHours(),this._doesExist(this._clear)&&this._traverseBtns("clearButton","is-disabled",!0)),this._buildData(!0),this._dispatchEvent("change",void 0,this._getSelectedValue())}}}},{key:"_getQueryString",value:function(){for(var t=this._selectedDates,a=0,o=t.length;a<o;a++)this._queryString+="[data-time='"+ +this._resetTime(t[a])+"']",this._queryString+=","+(a==o-1?" .zdisabled)":"")}},{key:"name",get:function(){return"zdatepicker"}},{key:"attrs",get:function(){return{forElement:null,offset:null,title:null,position:"auto",format:"dd/MM/yyyy",displayType:"box",type:"popup",minDate:null,maxDate:null,displayWeekNumbers:!1,weekHeading:null,selectionType:"single",todayButtonLabel:null,clearButtonLabel:null,OKButtonLabel:null,closeSVGIconId:null,closeIconClass:null,cancelButtonLabel:null,selectionLimit:null,monthToBeShownOnOpen:null,yearToBeShownOnOpen:null,drilldownLevelOnOpen:null,isTitleHTMLEncoded:!1,selectedDateMonthViewIndex:null,todayButtonAction:"navigate-only",displayAdjacentMonthDates:!1,allowSelectionOfAdjacentMonthDates:!0,hideCancelButton:!1,monthsPerView:1,immediateCommit:!0,value:null,draggable:!1,height:null,width:null,firstDayOfWeek:null,weekendDays:"0,6",closeButton:!1,closeOnDateSelect:!0,closeOnBodyClick:!0,todayButton:!1,clearButton:!1,locale:null,positionAlterable:!0,timeZone:null,pickerType:"date",appendTo:null}}},{key:"props",get:function(){return{closeIconClassName:null,commandBar:{},margin:{},animation:{},customHTMLAboveNavigationBar:null,customHTMLAboveCalendar:null,customHTMLBelowCalendar:null,navigationBar:{monthSwitcher:!0,yearSwitcher:!0,monthYearHeadingFormat:"MMM yyyy",monthYearSwitcherType:"drilldown",monthFormatInSwitcher:"MMM",navigationButtonsDisplayPattern:"split",togetherTypeNavigationButtonsPosition:"right",monthNavigationStep:1,yearNavigationStep:1,yearNavigationButtons:!0,monthNavigationButtons:!0,previousMonthButtonSVGIconId:null,dropdownStartYear:"THIS_YEAR-10",dropdownEndYear:"THIS_YEAR+10"},otherInputFormats:[],fixedTimeOptions:[],specialDates:[],disabledDates:[],disabledMonths:[],disabledYears:[],specialDaysOfWeek:[],disabledDaysOfWeek:[],disabledDateInformativeText:null,values:[],labels:{weekHeading:"Week",OKButtonLabel:"OK",cancelButtonLabel:"Cancel",todayButtonLabel:"Today",clearButtonLabel:"Clear",days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysAbbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsAbbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],close:"Close",nextMonth:"Next Month",nextYear:"Next Year",prevMonth:"Previous Month",prevYear:"Previous Year",nextDecade:"Next Decade",prevDecade:"Previous Decade",nextCentury:"Next Century",prevCentury:"Previous Century"}}}},{key:"EVENTS",get:function(){return["beforefocus","beforeopen","open","beforeclose","close","dateselect","todaybuttonclick","change","cancel","clear","beforedrilldown","drilldown","afterdrilldown","datemouseover","monthchange","yearchange","decadechange","beforedatecellrender","dragstart","drag","dragend"]}},{key:"SELECTORS",get:function(){var t=this.isCE;return{option:t?"z-":"option",select:"".concat(t?"z-combobox":"select")}}}]),o}();t.registerComponent("ZDatePicker",b),function(t){var a=t.zdatepicker.Templates,o=t.Templates.Utilities;a.children=function(n){return ZT.html(zc0tO49(),"callout"===n.displayType&&ZT.html(zc0tO50()),n.title&&a.title(n.title),1<n.monthsPerView?ZT.html(zc0tO51(),t.iterateData(n.monthsPerView,function(t,o){return ZT.html(zc0tO52(),n.dateType&&a.month(n.month[o]),a.drilldownView(n.month[o]))})):ZT.html(zc0tO53(),n.dateType&&a.month(n.month[0]),a.drilldownView(n.month[0])),n.cBar&&!n.isCBar&&o.commandBar(n.cBar))},a.drilldownView=function(t){return ZT.html(zc0tO54(),t.monthDrilldown&&a.drilldown(t.monthDrilldown),t.yearDrilldown&&a.drilldown(t.yearDrilldown),t.decadeDrilldown&&a.drilldown(t.decadeDrilldown))},a.month=function(t){return ZT.html(zc0tO55(),t.style,a.navBar(t.navigationBar),t.displayWeekNumbers&&a.weekNumbers(t),t.className,t.days.map(function(t){return ZT.html(zc0tO56(),t.class,t.value)}),t.dates.map(function(t){return ZT.html(zc0tO57(),t.map(function(t){return ZT.html(zc0tO58(),t.class,t.time,t.title,t.text,t.infoText&&ZT.html(zc0tO59(),t.infoText))}))}))};var n=t.zbutton.Templates.container;a.navBar=function(a){return ZT.html(zc0tO60(),a.class,a.isLMonthYear&&a.isSplit?ZT.html(zc0tO61(),a.lYear&&n(a.lYearIcon),a.lMonth&&n(a.lMonthIcon)):"",a.monthSelect&&!a.month&&(a.yrFirst?t.createComboBox(a.yearSelect):t.createSelect(a.monthSelect)),a.isMonthYearNav&&ZT.html(zc0tO62(),a.cursorCls,a.month&&ZT.html(zc0tO63(),a.month),a.year&&ZT.html(zc0tO64(),a.year)),a.yearSelect&&!a.year&&(a.yrFirst?t.createSelect(a.monthSelect):t.createComboBox(a.yearSelect)),a.isRMonthYear?ZT.html(zc0tO65(),!a.isSplit&&a.lYear&&n(a.lYearIcon),!a.isSplit&&a.lMonth&&n(a.lMonthIcon),a.rMonth&&n(a.rMonthIcon),a.rYear&&n(a.rYearIcon)):"")},a.drilldown=function(t){return ZT.html(zc0tO66(),t.view,t.style,a.navBar(t.navigationBar),t.cells&&ZT.html(zc0tO67(),t.cells.map(function(t){return t.isTr?ZT.html(zc0tO68()):ZT.html(zc0tO69(),t.class,t.attr,t.value)})))},a.title=function(a){return ZT.html(zc0tO70(),a.value&&ZT.html(zc0tO71(),ZT.customHTML(a.value),a.closeButton&&t.zbutton.Templates.container(a.closeSVGProps)))},a.weekNumbers=function(t){return ZT.html(zc0tO72(),t.weekTitle,t.weekNumbers.map(function(t){return ZT.html(zc0tO73(),t)}))}}(ZPeopleComponents);var C=function(a){function o(){return _classCallCheck(this,o),_possibleConstructorReturn(this,_getPrototypeOf(o).apply(this,arguments))}return _inherits(o,t.ZDatePicker),_createClass(o,[{key:"_init",value:function(t,a){this._userOptions=n.extend({},a),this._isSeparate="separate"===this._opts.selectionType,this._assignValues(),this._setTemplate(),_get(_getPrototypeOf(o.prototype),"_init",this).apply(this,arguments)}},{key:"_assignValues",value:function(){var t=this,a=this._opts;["from","to"].forEach(function(o){if(o+="Value",t._parseValue(o,a[o]),t._opts.excludeWeekend&&a[o]&&t._isWeekend(a[o])&&(a[o]=null),a[o]){var n="fromValue"===o;if(t["_"+o]=t[n?"_lastFrom":"_lastTo"]=new Date(+a[o]),t["_"+o].setHours(0,0,0,0),n){var l=t._fromValue;t._viewDate=new Date(+l),t._isSeparate||(t._opts.value=new Date(+l),t._currentSelected=new Date(+l))}}else t["_"+o]=null}),a.fromValue||this._isSeparate||(this._opts.value=void 0,this._currentSelected=void 0)}},{key:"_setTemplate",value:function(){this._opts.templateName="zdate"+(this._isSeparate?"range":"")+"picker"}},{key:"_bindEvents",value:function(){_get(_getPrototypeOf(o.prototype),"_bindEvents",this).call(this),this._addOtherEvents()}},{key:"_addOtherEvents",value:function(){var t=this;this._isSeparate||["enter","leave"].forEach(function(a){return t.element.on("mouse"+a+"."+t.name,t.delegateList,t["_mouse"+("enter"===a?"over":a)+"Handler"].bind(t))})}},{key:"_postRender",value:function(t,a){_get(_getPrototypeOf(o.prototype),"_postRender",this).apply(this,arguments),a.excludeWeekend&&(this._data.className+=" zdatetimepicker__excludeweekend")}},{key:"_resetDates",value:function(){this._lastFrom=null,this._lastTo=null,this._unsetDates(!0),this._setUndefined(["fromValue","toValue"],""),this._setHours(),(this._minDate||this._maxDate)&&this._checkViewDate(this._viewDate),this._OK&&this._OK.removeClass("is-disabled")}},{key:"_assignViewDate",value:function(){(this._minDate||this._maxDate)&&this._checkViewDate(this._getNewDate()),this._isSeparate&&this._setSeparateDates()}},{key:"_checkValueValidity",value:function(){var t=this._opts.fromValue,a=this._opts.toValue;if(t&&!this._dateWithInRange(t)||a&&!this._dateWithInRange(a)||this._isGreater(t,a))return this._resetDates(),!0}},{key:"_validateOpts",value:function(t){var a=this._opts,n=a.fromValue,l=a.toValue;if(this._validateMinMaxDays&&this._validateMinMaxDays(),this._checkValueValidity(),t||_get(_getPrototypeOf(o.prototype),"_validateOpts",this).call(this),a.todayButtonAction="navigate-only",n=a.fromValue,l=a.toValue,n&&l){var s=(+l-+n)/864e5+1;-1<s&&(a.minDaysToSelect&&s<a.minDaysToSelect||a.maxDaysToSelect&&s>a.maxDaysToSelect)&&this._resetDates()}(!this._isNotSet&&(n&&!l||!n&&l)||this._isDisabledDate(n)||this._isDisabledDate(l))&&this._resetDates()}},{key:"_isDisabledDate",value:function(t){if(t){var a=this._getUniqueClass(t,"");return a&&-1<a.class.indexOf("is-disabled")}return!1}},{key:"_unsetDates",value:function(t){var a=this._opts;t?(a.fromValue=this._lastFrom,a.toValue=this._lastTo):(a.fromValue=this._fromValue?new Date(+this._fromValue):null,a.toValue=this._toValue?new Date(+this._toValue):null),a.fromValue||(this._opts.value=void 0,this._currentSelected=void 0),this._lastFrom=a.fromValue,this._lastTo=a.toValue}},{key:"_updateOKClass",value:function(t){var n,a=this._fromValue,o=this._toValue;!this._OK||this._opts.immediateCommit&&!t||(a&&o||!a&&!o?n=!1:(!o||!a)&&(n=!0),this._disable(n,this._OK))}},{key:"_isMinOrMaxDaysPresent",value:function(){var t=this._opts;return"number"==typeof t.minDaysToSelect&&"number"==typeof t.maxDaysToSelect}},{key:"_mousedownHandler",value:function(t){var a=n(t.target),l=this._opts;if(!(!a.closest(this.delegateList).length||l.excludeWeekend&&a.closest(".zdatetimepicker--weekend").length)){var c,i="weeks"===l.rangeType,s=this._isSeparate,r=this._isDrilldown,d=!1;if(s&&(c=this._setData(t),this._setPartMode(c)),this._dateSelect=!0,0===this._viewMode&&r||!r){this._doesExist(this._clear)&&this._traverseBtns("clearButton","is-disabled",!1),(a=a.closest(".zdatetimepicker__date")).length||(a=n(t.target).closest(".zdatetimepicker__adjacentmonthdate"),d=!0);var _=this._getDateVal(a),u=+_,p=!1,m=new Date(u);if(!s&&(!l.minDaysToSelect||1<parseInt(l.minDaysToSelect))&&!l.singleDateSelect&&this._fromValue&&m.getTime()===this._fromValue.getTime())return;if(d&&(this._viewDate=new Date(+_),this._buildData(!0),a=this._getDateElem(_,s?this._getPartEle():void 0)),!s&&this._fromValue&&this._toValue&&(this._setUndefined(["fromValue","toValue","weekStart","weekEnd","lastHovered","currentSelected"],""),l.immediateCommit&&this._unsetDates(!0),this._clearDateClass(),i&&this._setWeekDates(this._getDateData(a).time)),this._lastHovered=a,s)return this._separateMousedown(t,c,a,_),void this._dispatchEvent(c+"valueselect",t,this._getValueObj(_,c));i?this._weekStart&&this._weekEnd&&(this._fromValue=this._weekStart,this._toValue=this._weekEnd):this._fromValue?u>this._fromValue?this._toValue=m:(p=!0,this._toValue=new Date(+this._fromValue),this._fromValue=m):this._fromValue=_,l.value=new Date(+this._fromValue),this._updateOKClass();var g="both"!==l.selectionDirection||this._isMinOrMaxDaysPresent();i||g?this._updateObjects(void 0,g):this._setDateClass(this._toValue?" is-selected "+(p?" is-start "+(a.next().hasClass("is-disabled")?" zh-disabledahead":""):" is-end"+(1===this._getDateData(a).text||this._isEndFirst(this._toValue)?" is-end-first":"")):" is-selected",!0,a),a.is(".zdatetimepicker--today")&&this._setDateClass("zdatetimepicker--todayinrange",!1,a);var h=this._toValue&&!p||"backward"===l.selectionDirection&&!this._toValue?"to":"from";this._dispatchEvent(h+"valueselect",t,this._getEventData(h)),l.immediateCommit&&this._fromValue&&this._toValue&&this._OKClickHandler(t)}else _get(_getPrototypeOf(o.prototype),"_mousedownHandler",this).call(this,t);this._dateSelect=!1}}},{key:"_getEventData",value:function(t){return this._getValueObj(this["_"+t+"Value"],t)}},{key:"_getInRangeCls",value:function(t){var a=this._getNewDate(),o=new Date(+t);return a.setHours(0,0,0,0),o.setHours(0,0,0,0)," zdatetimepicker--dateinrange"+(+a==+o&&this._todayHovered?" zdatetimepicker--todayinrange":"")}},{key:"_restoreValues",value:function(t){var a=this._opts.fromValue,o=this._opts.toValue;this._fromValue=new Date(+a),this._toValue=new Date(+o),t&&(this._opts.value=new Date(+a)),this._valueUpdate=!0,this._doesExist(this._clear)&&this._traverseBtns("clearButton","is-disabled",!1),this._removeOkDisabled()}},{key:"_removeOkDisabled",value:function(){this._OK&&this._OK.removeClass("is-disabled")}},{key:"_refreshPicker",value:function(t){if(this._isSeparate){this._part=t;var a=this["_"+("from"===t?"start":"end")+"Date"],n=new Date(+(this["_"+t+"Value"]?+this["_"+t+"Value"]:+a));this._oldDate=new Date(+a),this._viewDate=n,this._updateViewMode()}else this._oldDate=new Date(+this._oldViewDate);_get(_getPrototypeOf(o.prototype),"_refreshPicker",this).call(this),this._isSeparate&&(this._valueRemoval||this._oldDate.getFullYear()===this._viewDate.getFullYear()&&this._oldDate.getMonth()===this._viewDate.getMonth())&&this._buildData(void 0,t),this._valueRemoval=!1}},{key:"_closePicker",value:function(t){var a=this._fromValue,n=this._toValue,l=this._opts,i=l.fromValue,s=l.toValue,r=this._valueUpdate,d=this._setUndefined.bind(this);return this._isSeparate?(this._valueUpdate=!1,void this._separateCloseHandler(t)):(this._oldViewDate=new Date(+this._viewDate),this._viewDate=new Date(+this._fromValue),i&&s?this._restoreValues(!0):a&&!n?(this._valueUpdate=!1,d(["fromValue"],""),this._removeOkDisabled()):!r&&(this._opts.value=null,this._resetDates(),this._assignViewDate()),this._updateObjects(),_get(_getPrototypeOf(o.prototype),"_closePicker",this).call(this,t),void(this._valueUpdate=!1))}},{key:"_isEndFirst",value:function(t){var a,o;return this._opts.excludeWeekend&&((a=new Date(+t)).setDate(a.getDate()-1),o=this._isWeekend(a)),o}},{key:"_checkWeekend",value:function(t){return this._opts.excludeWeekend&&!this._isWeekend(t)||!this._opts.excludeWeekend}},{key:"_isNotAdjacent",value:function(t){return this._prevClass&&0>this._prevClass.indexOf("zdatetimepicker__adjacentmonthdate")&&0>t.indexOf("zdatetimepicker__adjacentmonthdate")}},{key:"_getClasses",value:function(t,a,l){var h,v,i=+t,s=_get(_getPrototypeOf(o.prototype),"_getClasses",this).call(this,t,a),r=this._opts,d=this._fromValue,c=this._toValue,_=!1,u=this._checkWeekend(t),p=this._lastHovered,m="object"===_typeof(s)?s.class:s,g=d&&!c||"weeks"===r.rangeType&&this._update;return v=p&&+n(p).attr("data-time"),"weeks"===r.rangeType&&this._update&&((h=v)&&(this._setWeekDates(h),i>=+this._weekStart&&i<=+this._weekEnd&&u&&(_=!0,m+=" zdatetimepicker--weekselection"),i===+this._weekEnd&&(m+=" zh-lastselection"))),this._isSeparate?m+=this._addSeparateClasses(t,m):(d&&c||g)&&(m=this._setContinuousClasses(t,m,h,_,l,v)),"object"===_typeof(s)?s.class=m:s=m,this._prevClass=s.class||s,this._prevClass}},{key:"_OKClickHandler",value:function(t){this._unsetDates(),this._valueUpdate=!0;var a=this._opts.immediateCommit;(this._opts.closeOnDateSelect&&a||!a)&&this._closePicker(t),this._dispatchEvent("change",t,this._getSelectedValue(),void 0,!(!t||!t.originalEvent)),this._OK&&this._removeFocus(this._OK)}},{key:"_dispatchEvent",value:function(t){if(t!==this._event)return this._event=t,_get(_getPrototypeOf(o.prototype),"_dispatchEvent",this).apply(this,arguments)}},{key:"_getSelectedValue",value:function(){return n.extend(!0,{},this.getFromValue(),this.getToValue())}},{key:"_getDateVal",value:function(t){return t&&t.length?new Date(+t.attr("data-time")):void 0}},{key:"_setFromToValue",value:function(){this._assignValues(),this._validateOpts(),this._assignViewDate(),this._isSeparate&&(this._viewDate=new Date(+this["_"+("to"===this._part?"end":"start")+"Date"])),this._buildData(!0,void 0,!0),this._dispatchEvent("change",void 0,this._getSelectedValue())}},{key:"_getValueObj",value:function(a,o){var i,n=this._opts,l=t.Date.formatDate(a,n.format);return _defineProperty(i={},o+"Value",new Date(+a)),_defineProperty(i,"options",n),_defineProperty(i,o+"ValueString",l),_defineProperty(i,"element",this.element),_defineProperty(i,"translated"+o[0].toUpperCase()+o.slice(1)+"Value",this._translateEToA(t.Date.formatDate(a,n.format,n.labels))),i}},{key:"getFromValue",value:function(){var t=this._opts.fromValue||this._fromValue;if(t)return this._getValueObj(t,"from")}},{key:"getToValue",value:function(){var t=this._opts.toValue||this._toValue;if(t)return this._getValueObj(t,"to")}},{key:"setFromValue",value:function(t){this._opts.fromValue=t,t&&this._opts.toValue&&this._setFromToValue()}},{key:"setToValue",value:function(t){this._opts.toValue=t,this._opts.fromValue&&t&&this._setFromToValue()}},{key:"_destroy",value:function(){this._isSeparate&&this._isDropdown&&(this._destroyDropdown(),this._destroyedDD=!0),this._isSeparate=!1,this._prevClass=void 0,this._setUndefined(["fromValue","toValue"],""),_get(_getPrototypeOf(o.prototype),"_destroy",this).call(this)}},{key:"_getMonthClasses",value:function(t){var a=this._fromValue,n=this._toValue,l=this._viewDate,i=this._isSeparate,s=_get(_getPrototypeOf(o.prototype),"_getMonthClasses",this).call(this,t);return(!i&&a&&n||i)&&(this._checkPart("from")&&a.getMonth()===t&&a.getFullYear()===l.getFullYear()||this._checkPart("to")&&n.getMonth()===t&&l.getFullYear()===n.getFullYear())&&(s+=" is-selected"),this._isSeparate||"both"===this._opts.selectionDirection||(s=this._updateDirectionCls(s,t,"month")),s}},{key:"_getDrilldownData",value:function(t,a,n){if(this._isSeparate){this._setData(n);var l=t.view;this["_"+l+"EventBinded"]=this._data[this._part][l+"EventBinded"];var i=_get(_getPrototypeOf(o.prototype),"_getDrilldownData",this).apply(this,arguments);return this._data[this._part][l+"Drilldown"]=this._data.month[l+"Drilldown"],this._setPartMode(),i}return _get(_getPrototypeOf(o.prototype),"_getDrilldownData",this).apply(this,arguments)}},{key:"_setDrilldownClass",value:function(t){if(this._isSeparate){var a=this._data[this._part].month[0],n=t.is("zdatetimepicker__year")?"year":"month";a[n+"Drilldown"]&&a[n+"Drilldown"].cells[t.index()].class.replace(/is-selected/g,"")}else _get(_getPrototypeOf(o.prototype),"_setDrilldownClass",this).apply(this,arguments)}},{key:"_buildDrilldownView",value:function(t){if(_get(_getPrototypeOf(o.prototype),"_buildDrilldownView",this).apply(this,arguments),this._isSeparate){this._updateDrilldownEle();var a=t.view+"EventBinded";this._data[this._part][a]||(this._data[this._part][a]=!0)}}},{key:"_drilldownClickHandler",value:function(t){this._isSeparate&&(this._viewMode=this._toggleViewMode(t)),_get(_getPrototypeOf(o.prototype),"_drilldownClickHandler",this).call(this,t)}},{key:"_updateDrilldownEle",value:function(){if(0!==this._viewMode)for(var l,t=["month","year","decade"],a=this._getPartEle(),o=0,n=t.length;o<n;o++)(l=a.find(".zdatetimepicker__"+t[o]+"drilldown")).length&&(this["_"+t[o]+"DrillDownElement"]=l)}},{key:"_setPartMode",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this._part;this._isSeparate&&(this._data[t].viewMode=this._viewMode)}},{key:"_toggleViewMode",value:function(t){return n(t.target).closest(".zdatetimepicker__monthcontainer").index()}},{key:"_bindDrillDownClickEvent",value:function(t,a){this._isSeparate&&(a=this._getPartEle().find(".zdatetimepicker")),_get(_getPrototypeOf(o.prototype),"_bindDrillDownClickEvent",this).call(this,t,a)}},{key:"_setViewMode",value:function(t,a,n){this._isSeparate&&(n=this._getPartEle().find(".zdatetimepicker")),_get(_getPrototypeOf(o.prototype),"_setViewMode",this).call(this,t,a,n),this._setPartMode()}},{key:"_checkPart",value:function(t){var a=this._isSeparate;return(a&&this._part===t||!a)&&this["_"+t+"Value"]}},{key:"_getYearClasses",value:function(t){var a=this._fromValue,n=this._toValue,l=this._isSeparate,i=_get(_getPrototypeOf(o.prototype),"_getYearClasses",this).apply(this,arguments);return(!l&&a&&n||l)&&(this._checkPart("from")&&a.getFullYear()===t||this._checkPart("to")&&n&&n.getFullYear()===t)&&(i+=" is-selected"),l||"both"===this._opts.selectionDirection||(i=this._updateDirectionCls(i,t,"year")),i}},{key:"_handleDecadeMousedown",value:function(t,a,n){if(this._isSeparate){var i="_"+(0===this._getPartIndex(t)?"start":"end")+"Date";this[i]=this[i].setFullYear(n)}_get(_getPrototypeOf(o.prototype),"_handleDecadeMousedown",this).apply(this,arguments)}},{key:"_clearDateClass",value:function(){for(var o,t=this._data.month,a=0;a<this._monthsPerView;a++){o=t[a].dates,this._index=a;for(var l,n=0;n<o.length;n++)for(var s=0,r=(l=o[n]).length;s<r;s++)l[s].class=l[s].class.replace(/zdatetimepicker--dateinrange|zdatetimepicker--todayinrange|is-selected|zdatetimepicker--weekselection|is-disabled zspecial|zdatetimepicker--disabledreplica|is-start|is-start-last|zh-lastrange|is-end-first|is-end/g,"")}}},{key:"_addEndClass",value:function(t,a,o){return t+=(o?" ":this._getInRangeCls(a))+" is-end",!o&&(1===a.getDate()&&this._isNotAdjacent(t)||this._isEndFirst(a))&&(t+=" is-end-first"),t}},{key:"_updateObjects",value:function(t,a){var o=this;this._update=!0;var n=this._opts,l=this._data.month,s=n.selectionDirection,r=this._fromValue,d=this._toValue;"days"===n.rangeType&&("both"!==s&&r&&this._setLimits(function(){return o["_"+("backward"===n.selectionDirection?"max":"min")+"Date"]=new Date(+r)}),"number"==typeof n.maxDaysToSelect&&(this._setLimits(function(){o._getInvalidRange(n.maxDaysToSelect,+o._viewDate),o._setLimitValues()}),this._isDropdown&&(this._data.modifiedAttr=a?"minOrMax":void 0,this._checkOptions(),this._data.modifiedAttr=void 0)));for(var _,c=0;c<this._monthsPerView;c++){_=l[c].dates,this._index=c;for(var p,u=0;u<_.length;u++)for(var h,m=0,g=(p=_[u]).length;m<g;m++)""!==(h=p[m]).text&&(h.class=this._getClasses(new Date(h.time),new Date(+this._data.month[c].dates[1][0].time),h),(r&&d||!r&&!d)&&("both"!==s||"number"==typeof n.maxDaysToSelect)&&(h.class=this._clearSpecialCls(h.class)))}t||this._render(),this._update=!1}},{key:"_setContinuousClasses",value:function(t,a,o,n,l,i){var s=this._isNotAdjacent(a),r=+t,d=this._opts,c=this._fromValue,_=this._toValue,u=+c,p=+_,m=u!=p,g=this._checkWeekend(t),h=this._lastHovered,v=r>u,y=c&&!_||"weeks"===d.rangeType&&this._update,f=this._getWeekStartDay()+6;if(o=_||i,y){var k=d.selectionDirection,b=0>a.indexOf("is-disabled");b&&("forward"===k&&r<u||"backward"===k&&v)&&(a+=" is-disabled zspecial"),i&&("number"==typeof d.minDaysToSelect&&this._getInvalidRange(d.minDaysToSelect,r,!0)&&(a+=" zdatetimepicker--disabledreplica"),b&&"number"==typeof d.maxDaysToSelect&&this._getInvalidRange(d.maxDaysToSelect,r)&&(a+=" is-disabled zspecial"))}if(0>a.indexOf("zdatetimepicker__adjacentmonthdate"))if(a=this._updateDisabledCls(r,n,a),r===u||r===p)if(a+=" is-selected",r===u){var C=!1;if(m&&(h&&+this._getDateVal(h)!==u||_)?a+=this._getInRangeCls(t):C=!0,o&&r>o||"backward"===d.selectionDirection&&!_)a=this._addEndClass(a,t,C);else{a+=" is-start";var D=new Date(r);D.setDate(D.getDate()+1),(t.getDay()===f||d.excludeWeekend&&this._isWeekend(D)||new Date(t.getFullYear(),t.getMonth()+1,0).getDate()===t.getDate()&&s)&&(a+=" is-start-last")}}else a=this._addEndClass(a,t);else if(m&&(v&&r<p||o&&!_&&(r>=u&&r<=o||r<=u&&r>=o))){g&&0>a.indexOf("is-disabled")&&(a+=this._getInRangeCls(t));var S=new Date(r),T=new Date(r);S.setDate(S.getDate()+1),T.setDate(T.getDate()-1),(+new Date(t.getFullYear(),t.getMonth()+1,0)===r||o&&r===+o&&v||t.getDay()===f||d.excludeWeekend&&s&&(this._isWeekend(S)&&+S!==p||this._isWeekend(T)&&S.getMonth()!==t.getMonth())||1===t.getDate()&&t.getDay()===f&&s)&&(a+=" zh-lastrange")}else a=this._updateDisabledCls(r,n,a,!0);return a}},{key:"_mouseoverHandler",value:function(t){if(!this._isSeparate&&0===this._viewMode){var a=n(t.target),l="weeks"===this._opts.rangeType,i=this._fromValue,s=this._toValue;if(!(a=a.closest(".zdatetimepicker__date:not(.is-disabled):not(.zdatetimepicker--disabledreplica),.zdatetimepicker__adjacentmonthdate:not(.is-disabled):not(.zdatetimepicker--disabledreplica)")).length||!l&&(!i||i&&s))return;if(a.closest(".zdatetimepicker--today").length&&(this._todayHovered=!0),l||i&&!s){var r=this._getDateData(a).time;if(l){if(i&&s&&r>=+i&&r<=+s)return;this._lastHovered=a}clearTimeout(this._timeout),this._timeout=setTimeout(this._updateObjects(),0)}this._lastHovered=a}}},{key:"_mouseleaveHandler",value:function(t){n(t.relatedTarget).is(".zdatetimepicker__date")||(this._lastHovered=null);var o=n(t.target).closest(".zdatetimepicker--todayinrange");o.length&&(this._todayHovered=!1,o.removeClass("zdatetimepicker--todayinrange")),"weeks"===this._opts.rangeType&&this._clearWeekSelection()}},{key:"_setLimitValues",value:function(){var t=this._tempSDate,a=this._oldMinDate,o=this._tempEDate,n=this._oldMaxDate,l=!a||t&&+t>+a?t:a,i=!n||o&&+o<+n?o:n;this._minDate=l?new Date(+l):l,this._maxDate=i?new Date(+i):i}},{key:"_reassignLimits",value:function(){this._preserved&&(this._minDate=this._oldMinDate,this._maxDate=this._oldMaxDate,this._preserved=!1)}},{key:"_setLimits",value:function(t){var a=this._fromValue,o=this._toValue;this._isSeparate||a&&!o?(!this._preserved&&(this._preserved=!0,this._oldMaxDate=this._maxDate?new Date(+this._maxDate):null,this._oldMinDate=this._minDate?new Date(+this._minDate):null),t()):this._reassignLimits()}},{key:"_updateDisabledCls",value:function(t,a,o,n){var l=this;if(-1<["disabledDaysOfWeek","disabledDates","disabledMonths","disabledYears"].map(function(t){return!!l._opts[t].length}).indexOf(!0)&&(this._fromValue||a)){var s=new Date(t);s.setDate(s.getDate()+1),this._isDisabledDate(s)&&(t===+this._fromValue?o+=" zh-disabledahead":"weeks"===this._opts.rangeType&&n?o+=" zh-lastselection":0>o.indexOf("zh-lastrange")&&(o+=" zh-lastrange"))}return o}},{key:"_clearSpecialCls",value:function(t){return-1<t.indexOf("zspecial")&&(t=t.replace(/is-disabled|zspecial/g,"")),t}},{key:"_setAttribute",value:function(t,a){var n=this._opts;n[t]=a;var l=!1,i=!1;if(this._isNotSet=!1,-1<["selectionDirection","rangeType","excludeWeekend","minDaysToSelect","maxDaysToSelect","fromLabel","toLabel","selectionType","fromValue","toValue"].indexOf(t))if("fromValue"===t||"toValue"===t)this._isNotSet=!n.toValue||!n.fromValue,this._setFromToValue();else if(!this._isSeparate||"fromLabel"!==t&&"toLabel"!==t)if("selectionType"===t){var r=this._isSeparate="separate"===a;this._emptyValues(),this._monthsPerView=r?1:this._opts.monthsPerView,this["_"+(r?"remove":"add")+"OtherEvents"](),r&&(n.value=null),this._data.modifiedAttr="navBar",this._setTemplate(),this._reInit=!0}else"excludeWeekend"===t?this._updateClass("zdatetimepicker__excludeweekend",!a):("minDaysToSelect"===t||"maxDaysToSelect"===t)&&this._validateMinMaxDays();else{var s=-1<t.indexOf("from")?"from":"to";this._data[s].month[0].label=a,l=!0}else!this._isSeparate&&-1<["disabledDaysOfWeek","specialDaysOfWeek","specialDates","disabledDates"].indexOf(t)?(_get(_getPrototypeOf(o.prototype),"_setAttribute",this).apply(this,arguments),this._updateObjects()):"navigationBar"===t?(this._id&&(this._elementId=this._id),this._emptyValues(!0),i=!0):"todayButtonAction"===t?n.todayButtonAction="navigate-only":i=!0;(i&&_get(_getPrototypeOf(o.prototype),"_setAttribute",this).apply(this,arguments),-1<["minDate","maxDate"].indexOf(t))&&(this._checkValueValidity()&&this._dispatchEvent("change",void 0,this._getSelectedValue()));this._domChanged=this._domChanged||l}},{key:"_emptyValues",value:function(t){this._data.from=this._data.to=this._currentSelected=null,this._data.month=[],t||(this._monthHeader=this._yearHeader=void 0)}},{key:"_removeOtherEvents",value:function(){var t=this;["enter","leave"].forEach(function(a){return t.element.off("mouse"+a+"."+t.name,t.delegateList)})}},{key:"_separateMousedown",value:function(t,a,o,n){this._opts;var i="_"+a+"Value";this._part=a,this[i]&&this._select(!1,this._getDateElem(this[i],this._getPartEle(a)),!0),"to"===a&&o.hasClass("is-selected")?this._toValue=null:(this[i]=n,this._viewDate=new Date(+n)),this._buildData(!0,a,o),this._commitValues(t),this._dateSelect=!1}},{key:"_commitValues",value:function(t){this._fromValue&&this._toValue&&this._opts.immediateCommit&&this._OKClickHandler(t),this._updateOKClass()}},{key:"_constructData",value:function(){var t=this._isSeparate,a=this._data.rendered;t?a&&!this._reInit?this._constructPart(this._part):(!this._id&&(this._id=this._elementId),this._monthsPerView=1,this._constructPart("from"),this._constructPart("to"),this._elementId=this._id):_get(_getPrototypeOf(o.prototype),"_constructData",this).call(this)}},{key:"_constructPart",value:function(t){this._setData(t),this._part=t;var a=this._data[t];a?this._data.month=a.month:this._data.month[0]=null,this._updateViewMode(t),"number"==typeof this._viewMode&&0!==this._viewMode?this._generateContent():_get(_getPrototypeOf(o.prototype),"_constructData",this).call(this),this._storeData()}},{key:"_arrowEventHandler",value:function(t){this._setData(t),_get(_getPrototypeOf(o.prototype),"_arrowEventHandler",this).call(this,t)}},{key:"_bindArrowEvents",value:function(){var t;this._isSeparate&&(t=this._id,this._elementId=t+"zfrom",_get(_getPrototypeOf(o.prototype),"_bindArrowEvents",this).call(this),this._elementId=t+"zto"),_get(_getPrototypeOf(o.prototype),"_bindArrowEvents",this).call(this),t&&(this._elementId=t)}},{key:"_buildData",value:function(t,a,n){if(this._isSeparate&&this._data.rendered&&!this._reInit){var s,l="from"===(a=a||this._part)?"to":"from",i="boolean"==typeof n;if(i||(s=n),this[this._getSegment()]=new Date(+this._viewDate),s){var r=this._getDateEleIndex(s),d=this._data[a].month[0].dates[r[1]][r[2]];this["_"+a+"Value"]?d.class+=" is-selected":s.hasClass("is-selected")&&(d.class=d.class.replace(/is-selected/g,""))}n&&this._constructPart(l),(!n||this._fromValue&&this._toValue||i&&n)&&this._constructPart(a),this._reInit||this._render()}else this._isSeparate&&this._assignViewDate(),_get(_getPrototypeOf(o.prototype),"_buildData",this).apply(this,arguments)}},{key:"_setSeparateDates",value:function(){this._startDate=new Date(+(this._fromValue||this._viewDate)),this._endDate=new Date(+(this._toValue||this._viewDate)),this._startDate.setHours(0,0,0,0),this._endDate.setHours(0,0,0,0)}},{key:"_updateLimits",value:function(t){var a=this,o=this._fromValue,n=this._toValue,l=this._opts.maxDaysToSelect;t&&o?this._setLimits(function(){var n=a._getSeparateRange(o,t);a._tempSDate=n[0],a._tempEDate=l?n[1]:null,a._setLimitValues()}):!t&&n?this._setLimits(function(){var o=a._getSeparateRange(n,t);a._tempSDate=l?o[1]:null,a._tempEDate=o[0],a._setLimitValues()}):this._reassignLimits()}},{key:"_addSeparateClasses",value:function(t,a){var o=+t,n="",l=this._fromValue,i=this._toValue,s="to"===this._part;return 0>a.indexOf("zdatetimepicker__adjacentmonthdate")&&(l&&!i?!s&&o===+l&&(n+=" is-selected"):l&&i&&(s?o===+i&&(n+=" is-selected"):o===+l&&(n+=" is-selected"))),n}},{key:"_setArrowLimits",value:function(t){this._updateLimits("to"===t),this._elementId=this._id+"z"+t,this._updateArrowState(this._data[t].viewDate)}},{key:"_updateArrows",value:function(t){this._setArrowLimits(t),this._setArrowLimits("to"===t?"from":"to")}},{key:"_setPart",value:function(t){if(this._isSeparate)return t.type&&"string"==typeof t.type&&(t=this._getPartIndex(t)),"number"==typeof t&&(t=0===t?"from":"to"),this._part=t,this._elementId=this._id+"z"+t,t}},{key:"_updateDropdownEle",value:function(t,a){var o=this._data.month[0],l=n("#"+this._elementId+"-"+t+"-header"),i=o&&o.navigationBar;l.length&&(o||a)&&(this["_"+t+"Header"]=l,i&&(o.navigationBar[t+"Select"].mainElement=l))}},{key:"_setData",value:function(t){if(this._isSeparate&&t&&"boolean"!=typeof t){var a="from"===(t=this._setPart(t));return this._data.month=this._data[t]?this._data[t].month:[],this._updateLimits(!a),!this._skipReset&&this._fromValue&&!a&&+this._endDate<+this._fromValue&&(this._endDate=new Date(+this._minDate)),this._viewDate=new Date(+(a?this._startDate:this._endDate)),this._isDrilldown?this._updateDrilldownEle():(this._updateDropdownEle("month"),this._updateDropdownEle("year")),t}}},{key:"_fillDates",value:function(t,a,n){this._isSeparate&&(n=-1),_get(_getPrototypeOf(o.prototype),"_fillDates",this).call(this,t,a,n)}},{key:"_getDateData",value:function(){var t=this._data[this._part];return this._isSeparate&&t&&(this._data.month=t.month),_get(_getPrototypeOf(o.prototype),"_getDateData",this).apply(this,arguments)}},{key:"_getPartEle",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this._part;return n(this.element.find(".zdatetimepicker__list")["from"===t?0:1])}},{key:"_updateViewMode",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this._part;if(this._isSeparate){var a=this._data[t];this._viewMode=a&&"number"==typeof a.viewMode?a.viewMode:this._getViewMode()}}},{key:"_getPartIndex",value:function(t){return this._viewMode=this._toggleViewMode(t),n(t.target).closest(".zdatetimepicker__list").index()}},{key:"_setArrowMainElement",value:function(){this._isSeparate&&(this._elementId=this._id+"z"+this._part),_get(_getPrototypeOf(o.prototype),"_setArrowMainElement",this).apply(this,arguments)}},{key:"_getSegment",value:function(){return"_"+("from"===(0<arguments.length&&void 0!==arguments[0]?arguments[0]:this._part)?"start":"end")+"Date"}},{key:"_updateRange",value:function(){this._isSeparate&&(this[this._getSegment()]=new Date(+this._viewDate))}},{key:"_callRender",value:function(t,a,n){this._setData(n),_get(_getPrototypeOf(o.prototype),"_postEachRender",this).call(this,t)}},{key:"_postEachRender",value:function(t,a){if(this._isSeparate){"selectionType"!==a.modifiedAttr&&a.rendered||(this._data.className+=" zdatetimepicker--group"),this._updateRange();var n=this._part,l=this._data.modifiedAttr;this._callRender(t,a,"from"===n?"to":"from"),this._data.modifiedAttr=l,this._callRender(t,a,n)}else _get(_getPrototypeOf(o.prototype),"_postEachRender",this).call(this,t,a)}},{key:"_storeData",value:function(){if(!this._data.rendered||this._reInit){var a=this._part;this[this._getSegment()]=new Date(+this._viewDate);var o=n.extend(!0,{},this._data.month[0]);o.label=t.encodeHTML(this._opts[a+"Label"]||this._getI18NText(a+"Label")),this._data[a]={month:[o]}}}},{key:"_resetSeparateType",value:function(){this._reassignLimits(),this._resetDates(),this._assignViewDate()}},{key:"_separateCloseHandler",value:function(t){this._opts.fromValue&&this._opts.toValue&&this._restoreValues();var a=this._fromValue,o=this._toValue;(!a||o)&&(a||!o)&&this._valueUpdate||(this._valueRemoval=!0,this._select(!1,this._getDateElem(a||o,this._getPartEle(a?"from":"to")),!0),this.element.find(".is-selected").removeClass("is-selected")),(!(a||o)||this._valueRemoval)&&this._resetSeparateType(),this._refreshPicker("from"),this._refreshPicker("to"),("inline"!==this._opts.type||this._manualClose)&&this._closePickerHandler(t)}},{key:"_getInvalidRange",value:function(t,a,o){--t;var s,n=+this._fromValue,l=this._getValidDate(-1,new Date(n),t),i=this._getValidDate(1,new Date(n),t);return o?s=a<=n&&a>+l||a>=n&&a<+i:(this._tempEDate=i,this._tempSDate=l,a&&(s=a<+l||a>+i)),s}},{key:"_validateMinMaxDays",value:function(){var t=this._opts;this._isMinOrMaxDaysPresent()&&t.minDaysToSelect>t.maxDaysToSelect&&(t.maxDaysToSelect=null)}},{key:"_getSeparateRange",value:function(t,a){for(var o=a?1:-1,n=["min","max"],l=[],s=0;s<n.length;s++){var r=this._opts[n[s]+"DaysToSelect"],d=new Date(+t);"number"==typeof r&&(--r,d=this._getValidDate(o,d,r,a)),l.push(d)}return l}},{key:"_getValidDate",value:function(t,a,o){var n=0;for(a=new Date(a.getTime());n!==o;)a.setDate(a.getDate()+t),this._checkWeekend(a)&&!this._getUniqueClass(a)&&n++;return a}},{key:"_updateDirectionCls",value:function(t,a,o){var i,n=this._fromValue,l="forward"===this._opts.selectionDirection;return n&&!this._toValue&&0>t.indexOf("is-disabled")?("month"===o?i=this._viewDate.getFullYear()===n.getFullYear()&&(l&&a<n.getMonth()||!l&&a>n.getMonth()):"year"==o&&(i=l&&a<n.getFullYear()||!l&&a>n.getFullYear()),i&&(t+=" is-disabled zspecial")):t=this._clearSpecialCls(t),t}},{key:"_setWeekDates",value:function(t){var a=new Date(t);a.setDate(a.getDate()-a.getDay()),this._weekStart=this._resetDateLimit(new Date(+a),1),this._weekEnd=this._resetDateLimit(new Date(a.getFullYear(),a.getMonth(),a.getDate()+6),-1)}},{key:"_resetDateLimit",value:function(t,a){for(var o=this._opts,n=this._opts.excludeWeekend,l=this._getDateElem(t);l.hasClass("is-disabled")||n&&this._isWeekend(t);)t.setDate(t.getDate()+a),l=this._getDateElem(t);return o.minDate&&this._isGreater(o.minDate,t)?t=new Date(+o.minDate):o.maxDate&&this._isGreater(t,o.maxDate)&&(t=new Date(+o.maxDate)),t}},{key:"_clearWeekSelection",value:function(){var t=this._fromValue,a=this._toValue;(t&&a||!t&&!a)&&this.element.find(".zdatetimepicker--weekselection").length&&(this._setUndefined(["weekStart","weekEnd"],""),this._updateObjects())}},{key:"_setClearBtnCls",value:function(t){_get(_getPrototypeOf(o.prototype),"_setClearBtnCls",this).call(this,t,!this._fromValue&&!this._toValue,!0)}},{key:"_clearClickHandler",value:function(t,a,n){var l=this._opts;if(this._isSeparate){for(var c,s=["from","to"],r=this._part,d=0;d<s.length;d++)c=this["_"+s[d]+"Value"],this._part=s[d],c&&this._select(!1,this._getDateElem(c,this._getPartEle(s[d])),!0);this._part=r,this._setData(this._part)}else this._clearDateClass();(l.immediateCommit||n)&&(this._lastFrom=null,this._lastTo=null,this._unsetDates(!0)),this._setUndefined(["fromValue","toValue"],""),n&&(this._viewDate=this._getNewDate(),this._checkViewDate(this._viewDate),this._buildData()),_get(_getPrototypeOf(o.prototype),"_clearClickHandler",this).apply(this,arguments),(this._isSeparate||"days"===l.rangeType&&"both"!==l.selectionDirection||this._isMinOrMaxDaysPresent())&&(this._reassignLimits(),this._buildData(!this._isSeparate,void 0,!0)),this._updateOKClass(!0)}},{key:"_selectClickHandler",value:function(t){this._setData(t),_get(_getPrototypeOf(o.prototype),"_selectClickHandler",this).apply(this,arguments)}},{key:"_destroyDropdown",value:function(){this._isSeparate&&!this._destroyedDD?(this._removeDropdown("from"),this._removeDropdown("to")):!this._destroyedDD&&_get(_getPrototypeOf(o.prototype),"_destroyDropdown",this).apply(this,arguments)}},{key:"_removeDropdown",value:function(t){t&&(this._setData(t),this._updateDropdownEle("month",!0),this._updateDropdownEle("year",!0)),_get(_getPrototypeOf(o.prototype),"_destroyDropdown",this).apply(this,arguments)}},{key:"_setmonthDropdownVal",value:function(a,n,l,i,s){if(_get(_getPrototypeOf(o.prototype),"_setmonthDropdownVal",this).apply(this,arguments),!(n||a||l||i)){var r=[];s.monthSelect.options.forEach(function(t){return r.push(t.value)}),r.length&&t.select(this._monthHeader).setOptionAttributes(r,"disabled",!1)}}},{key:"_setyearDropdownVal",value:function(a,o,n,l,i){var s=i.yearSelect.options,r=this._viewDate,d=[],c=[];s.forEach(function(t){t.disabled=a&&t.value<a||"number"==typeof o&&t.value===a&&r.getMonth()<o||n&&t.value>n||"number"==typeof l&&t.value===n&&r.getMonth()>l,(t.disabled?d:c).push(t.value)});var _=t.combobox(this._yearHeader);this._yearHeader&&(d.length&&_.setOptionAttributes(d,"disabled",!0),c.length&&_.setOptionAttributes(c,"disabled",!1),_.setAttribute("selectedValue",this._viewDate.getFullYear()))}},{key:"_todayClickHandler",value:function(t){this._isSeparate&&(this._setData("from"),_get(_getPrototypeOf(o.prototype),"_todayClickHandler",this).call(this,t),this._skipReset=!0,this._setData("to")),_get(_getPrototypeOf(o.prototype),"_todayClickHandler",this).call(this,t,this._isSeparate),this._skipReset=!1}},{key:"name",get:function(){return"zdaterangepicker"}},{key:"attrs",get:function(){return{fromValue:null,toValue:null,monthsPerView:2,selectionDirection:"both",excludeWeekend:!1,selectionType:"continuous",rangeType:"days",minDaysToSelect:null,maxDaysToSelect:null,fromLabel:null,toLabel:null,singleDateSelect:!1}}},{key:"props",get:function(){return{labels:{fromLabel:"From",toLabel:"To"}}}},{key:"EVENTS",get:function(){return["fromvalueselect","tovalueselect"]}},{key:"delegateList",get:function(){return".zdatetimepicker__date:not(.is-disabled):not(.zdatetimepicker--disabledreplica), .zdatetimepicker__adjacentmonthdate:not(.is-disabled):not(.zdatetimepicker--disabledreplica), .zdatetimepicker__monthview:not(.is-disabled), .zdatetimepicker__year:not(.is-disabled), .zdatetimepicker__decade:not(.is-disabled)"}}]),o}();t.registerComponent("ZDateRangePicker",t.ZDatePicker,C),function(t){var a=t.zdaterangepicker.Templates,o=t.zdatepicker.Templates,n=t.Templates.Utilities;a.children=function(t){return ZT.html(zc0tO74(),"callout"===t.displayType&&ZT.html(zc0tO75()),t.title&&o.title(t.title),ZT.html(zc0tO76(),a.dateLayout(t.from.month[0]),a.dateLayout(t.to.month[0])),t.cBar&&!t.isCBar&&n.commandBar(t.cBar))},a.dateLayout=function(t){return ZT.html(zc0tO77(),t.label,o.month(t),o.drilldownView(t))}}(ZPeopleComponents),t.$document.on("keydown.zdateselect",function(a){var o=t.openedDateSelect;o&&a.keyCode===t.keyCode.ESCAPE&&o._dtsMenu.is(":visible")&&(o._restorePreviousSelection(),o.close())});var D=function(a){function o(){return _classCallCheck(this,o),_possibleConstructorReturn(this,_getPrototypeOf(o).apply(this,arguments))}return _inherits(o,t.CoreComponent),_createClass(o,[{key:"_getConstValues",value:function(){return["YESTERDAY","TODAY","TOMORROW","LAST_MONTH","THIS_MONTH","NEXT_MONTH","LAST_YEAR","THIS_YEAR","NEXT_YEAR","LAST_7_DAYS","LAST_30_DAYS","LAST_15_DAYS","NEXT_7_DAYS","NEXT_30_DAYS","NEXT_15_DAYS","THIS_WEEK","NEXT_WEEK","LAST_WEEK","WEEK_TO_TODAY","MONTH_TO_TODAY","YEAR_TO_TODAY"]}},{key:"_setTimeZone",value:function(){this._timeZone=t.Date.timeZone=this._opts.timeZone||t.timeZone}},{key:"_getNewDate",value:function(){return this._timeZone?t.Date.changeTZOfDate(new Date,this._timeZone):new Date}},{key:"_init",value:function(a,o){var n=o.selectedIndex;null!=n&&(a[0].selectedIndex=n),this._setTimeZone(),this._useParent=!1;var l=this._data,i=this._opts,s=l.attrs={},r=i["date"+(this._checkTime?"Time":"")+"PickerOptions"],d=i["date"+(this._checkTime?"Time":"")+"RangePickerOptions"];this._isText="text"===i.selectedValueDisplayType;var c=i.labels,_=t.localeInfo[i.locale];_&&["days","daysAbbreviated","monthsAbbreviated","months"].forEach(function(t){c[t]=_[t]||c[t]}),this._validateFormat(),this._invalidFormat||("function"==typeof this._setFormat&&this._setFormat(),this._setOkCancelBtns(),this._checkValues(i),this._checkValues(r),this._checkValues(d),this._isMinMaxGiven=i.minDate||i.maxDate||r.minDate||r.maxDate||d.minDate||d.maxDate,l.alwaysSetAttrs=!0,s.tabindex=a.attr("tabindex")||0,s.id=this._elementId=a.attr("id")?a.attr("id")+"-container":this._getID(a),s["aria-haspopup"]=!0,s.role="select",i.placeholder=o.placeholder||this._getI18NText("placeholder"),i.calendarIcon&&this._getCalendarIconProps(l,i),i.arrowIcon&&this._getArrowIconProps(i),i.clearButton&&this._getClrBtnProps(l,i),this._setPlaceholder(),this._buildData(),this._setSelectedData())}},{key:"_checkValues",value:function(t){var a=this;["fromValue","toValue","minDate","maxDate"].forEach(function(o){var l,s,n=t[o];n&&(l=a._parseDate(n),s=["YESTERDAY","TODAY","TOMORROW"].indexOf(n),!(l=l.isValid?l.date:void 0)&&(-1<s||-1<n.indexOf("NOW"))&&(l=a._getNewDate(),-1<s&&l.setDate(l.getDate()+s-1),!a._checkTime&&l.setHours(0,0,0,0)),t[o]=l||void 0)})}},{key:"_setOkCancelBtns",value:function(){var t=this._opts;t.immediateCommit||(t.OKButton=!0,t.cancelButton=!t.hideCancelButton)}},{key:"_validateFormat",value:function(){this._checkFormat(/h|H|m|t/g)}},{key:"_checkFormat",value:function(t){this._invalidFormat=t.test(this._opts.format)}},{key:"_buildData",value:function(){this._getMenuProps()}},{key:"_disable",value:function(t){_get(_getPrototypeOf(o.prototype),"_disable",this).call(this,t),this.element.attr("disabled",t)}},{key:"_postRender",value:function(t,a){this.isCE&&this.element.hide(),a.clearButton&&(this._clear=n("#"+this._elementId+"--clear"),this._bindClrBtnEv()),this._data.className+=" zselectbox zdatetimeselectbox--container";var o=this._dtsMenu=t.find(".zdatetimeselectbox");this._placeholderElem=t.find(".zdatetimeselectbox__label"),this._setPlaceholder(!1),o.appendTo(n(a.dropdownList.appendTo||"body")),a.disabled&&this._disable(a.disabled),this._pickerContainer=o.find(".zdatetimeselectbox__datetimecontainer"),a.width&&(t[0].style.width=a.width+"px"),a.height&&(t[0].style.height=a.height+"px"),this._valueId||(a.value?this.setValue(a.value):a.fromValue&&a.toValue&&this._setFromToValue())}},{key:"_setPickerVal",value:function(t){var a=this._getOptionObj(t,"valueType");a?this._setValue(n("#"+a.id)):(this._setSelectedData(),this._setPlaceholder())}},{key:"_getOptionObj",value:function(t,a){var o=["range","date"];return this._data.menu.optData.find(function(n){return a?n[a]===t:n.isPicker||n.type&&-1<o.indexOf(n.type)||n.valueType&&-1<o.indexOf(n.valueType)})}},{key:"_postEachRender",value:function(t,a){var o=!a.rendered,l=a.modifiedAttr,i=this._dtsMenu;if(this._listContainer&&this._listContainer.length||(this._listContainer=i.find(".zdatetimeselectbox__listboxdetails"),!this._pickerOpened&&this._display(!0,this._listContainer)),this._pickerContainer&&this._pickerContainer.length||(this._pickerContainer=i.find(".zdatetimeselectbox__datetimecontainer")),o||l){var s=this._data.className;a.calendarIcon?(s+=" zselectbox--icontext","right"===a.calendarIconAlignment?s+=" zselectbox--dateandtime zdatetimeselectbox--calendariconright":s=s.replace(/zselectbox--dateandtime|zdatetimeselectbox--calendariconright/g,"")):s=s.replace(/zselectbox--icontext/g,""),this._data.className=s,this._updateClass("zdatetimeselect--withcalendaricon|zdatetimeselect--withclrbtn|zdatetimeselect--witharrow",!0),this._data.className+=(a.calendarIcon?" zdatetimeselect--withcalendaricon":"")+(a.clearButton?" zdatetimeselect--withclrbtn":"")+(this._data.arrowIconProps?" zdatetimeselect--witharrow":""),"rtl"===l&&i.is(":visible")&&this._getPosition()}!this._valueId||a.disabled||a.readonly||(this._setValue(n("#"+this._valueId)),this._valueId=void 0)}},{key:"_setSelectedData",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},a=this._opts,o=a.value,n=a.fromValue,l=a.toValue,i=this._selectedData={label:t.label||this._data.placeholder,value:o,fromValue:n,toValue:l},s=this._getStringVal.bind(this);i.valueString=o?s(o):n&&l?s(n,l):void 0,i.fromValueString=n&&s(n),i.toValueString=l&&s(l);var r=i.valueString;return i.translatedValue=this._translateEToA(s(o||n,o?void 0:l,void 0,!0)),i.text=t.label||r,i.selectedValue=r,r}},{key:"_setPlaceholder",value:function(t){var a=this._data,o=this._opts,n=o.value,l=o.placeholder,i=this._placeholderElem;t?n=t:n&&n instanceof Date?n=this._getStringVal(n,void 0,void 0,!0):o.fromValue&&o.toValue?n=this._getStringVal(o.fromValue,o.toValue,void 0,!0):!1===t&&(t=l),a.placeholder=l,n=n?this._translateEToA(n):l,i&&(i.attr("title",n).text(n),i[this._currentSelected?"removeClass":"addClass"]("zselectbox__placeholder"))}},{key:"_dispatchEvent",value:function(t,a,n){return _get(_getPrototypeOf(o.prototype),"_dispatchEvent",this).call(this,t,a,_objectSpread({menu:this._dtsMenu},n||{}))}},{key:"_getMenuProps",value:function(){var t=this._opts,a=this._data.menu={},o=this._SELECTORS.option,n=this.element.find(o),l=t.options,i=t.dropdownList.className;a.className="zdatetimeselectbox zdatetimepicker--group"+(i?" "+i:"")+(t.rtl?" zh-rtl":""),a.optData=[],a.prepend=a.append=!1,(t.selectedValue||t.value)&&0===this.element.find(o+"[selected]").length&&(this.element[0].selectedIndex=-1),n.length?this._getOptionData(n):l&&this._getOptData(l),this._setIsPickerVar(),a.containerClass="zdatetimeselectbox__listboxdetails",a[-1<["left","bottom-right","top-right"].indexOf(t.position)?"prepend":"append"]=!0,a.containerClass+=a.prepend?" zh-rightlist":""}},{key:"_getOptData",value:function(t,a,o){for(var s,n=[],l=0;l<t.length;l++)(s=t[l]).selected=s.selected||this._isSelected(s),s=this._setData(s,o),n.push(this._setOptData(s,a));return n}},{key:"_setOptData",value:function(t,a){var o=t.type||t.valueType;return t.class=(t.class?t.class+" ":"")+"zdatetimeselectbox__option"+(t.selected?" is-selected":"")+(t.disabled?" is-disabled":""),t.valueType&&-1<["date","range"].indexOf(o)&&(t.class+="date"===o?" zdatetimeselectbox--customdate":" zdatetimeselectbox--customrange",t.label+="..."),t.hidden?t.style=(t.style||"")+"display:none":!t.disabled&&t.selected&&(this._valueId=t.id),a||this._data.menu.optData.push(t),t}},{key:"_getPosition",value:function(){var a=this._opts,o=a.rtl,n=this._dtsMenu;n.css("right","");var l=t.Position.get(this.container,this._dtsMenu,{direction:a.position,rtl:o,positionAlterable:a.positionAlterable}).elementPosition,i=-1<["left","bottom-right","top-right"].indexOf(a.position)||o;n.css({left:"",right:"",top:l.top}),n.css(i?"right":"left",i?t.$window[0].innerWidth-(l.left+n.outerWidth(!0)):l.left)}},{key:"_setIsPickerVar",value:function(){this._isPicker||(this._isPicker=!!this._getOptionObj())}},{key:"_isSelected",value:function(t,a){var o=this._opts,n=o.value,l=t.value;return a=a||t,!this._valueId&&!!(n&&(l===n||"date"===a.valueType)||o.fromValue&&"range"===a.valueType||l&&l===o.selectedValue)}},{key:"_setData",value:function(a,o){var s,r,l=this._SELECTORS.option;if(!a.zdatapopulated){o?s=o.getAttribute(this._SELECTORS.itemId):(o=n("<"+l+"/>")[0],r=!0),s=(s||this._getID(o))+"-item";var d=a.label=a.label||o.textContent.trim(),c=a.type||a.valueType;-1<["date","range"].indexOf(c)&&!d?d=this._getI18NText("date"===c?"specificDate":"customRange"):a.value=a.value||o.value||d;for(var _=["label","hidden","disabled","selected"],u=0;4>u;u++)a[_[u]]=a[_[u]]||o[_[u]];a.style=o.getAttribute("style"),this._addedByComponent=this.isCE,o=n(o),this.isCE&&!this._opts.isLyteComponent&&t.option(o).saveParentIns(this.element),o.attr(a),o.removeAttr("valuetype"),a.valueType&&o.attr(this.isCE?"value-type":"data-value-type",a.valueType),o.text(d),o.attr("id",s.replace("-item","")),a.class=(o[0].getAttribute("class")||"")+(a.class||a.className||""),this._addedByComponent=!1,r&&o.appendTo(this.element),a.zdatapopulated=!0,a.id=s}return a}},{key:"_bindEvents",value:function(){this._addEvents({click:"mousedown",focus:"focusin focusout"}),this._addEvents({menuClick:"mousedown",menuBlur:"focusout"},this._dtsMenu),this._opts.clearButton&&this._addEvents({mouseEnter:"mouseenter"})}},{key:"_menuBlurHandler",value:function(t){this._focusHandler(t)}},{key:"_focusHandler",value:function(t){if(!this._opts.disabled){var a=!0;"focusout"===t.type&&(a=this._dtsMenu.is(":visible")),a&&this._dispatchEvent("focusout"===t.type?"blur":"focus",t,{})}}},{key:"_display",value:function(a,n){t.Browser.isIE&&9===t.Browser.getIEVersion()?n[0].style.display=a?"none":"inline-block":_get(_getPrototypeOf(o.prototype),"_display",this).apply(this,arguments)}},{key:"_setMenuAttr",value:function(t){this._display(t,this._dtsMenu),this.container.attr("aria-expanded",!t),this._updateClass("is-active",t||void 0)}},{key:"_clickHandler",value:function(t){this._opts.readonly||this._opts.disabled||(this._dtsMenu.is(":visible")?this.close(void 0,t):this._showMenu(t))}},{key:"_showMenu",value:function(a){this._dispatchEvent("beforedropdownlistopen",a,{})&&!this._opts.disabled&&(t.openedDateSelect=this,t.bindDocumentEvents({element:this.element,container:this._dtsMenu,forElement:this.container,ctype:this.name,closeMethodName:"_closeHandlerClose",closeEvent:"dropdownlistclose"}),this._setMenuAttr(!1),this._opts.slideAnimate&&this._animateMenu(!!this._lastSelected),this._pickerOpened&&this._isPicker&&this._openPicker(null,null,!0),void 0===this._scrollHt&&this._curLi&&(this._scrollHt=this._curLi[0].offsetTop),this._setDimensions(),this._dispatchEvent("dropdownlistopen",a,{}),this._getPosition(),this._opts.slideAnimate&&this._pickerOpened&&this._setWidth(this["_"+this._pickerOpened+"Picker"]))}},{key:"_closeHandlerClose",value:function(t){this._restorePreviousSelection(),this.close(void 0,t)}},{key:"_restorePreviousSelection",value:function(){this._updateSelectClass(this._curLi,!1);var t=this._updateSelectClass(this._prevLi,!0);this._setPlaceholder(this._getPlaceHolder(t)),this._setSelectedData(t&&t.valueType?void 0:t),this._curLi=this._prevLi}},{key:"_animateMenu",value:function(t,a){this._listContainer[t?"addClass":"removeClass"]("zdts-transition").width("number"==typeof a?a:"")}},{key:"_setDimensions",value:function(){var s,t=this._opts.dropdownList,a=this._pickerOpened&&this["_"+this._pickerOpened+"Picker"],o=this._dtsMenu.find(".zdatetimeselectbox__listbox"),l=o.find(".zdatetimeselectbox__option:visible"),i=l.length;o.css("height","auto"),this._pickerContainer.children().length&&a&&a.is(":visible")&&(s=a.outerHeight(!0)),t.height&&s&&(s=t.height<s?s:t.height),s=s||t.height||(10>i?i*n(l[0]).outerHeight(!0):300),o.css("height",this._checkPxToRem(s)),void 0!==this._scrollHt&&(o[0].scrollTop=this._scrollHt),t.width&&o.css("width",t.width)}},{key:"_menuClickHandler",value:function(t){if(!this._opts.readonly&&!this._opts.disabled){var a=n(t.target).closest(".zdatetimeselectbox__option");if(a.length&&!a.hasClass("is-disabled")){this._scrollHt=a[0].offsetTop;var o=this._setValue(a);this._checkForClose(t,o),this._dispatchEvent("optionselect",t,{item:a,option:this._currentSelected}),this._setDimensions()}}}},{key:"_checkForClose",value:function(t,a){var o=a.type||a.valueType,n=o&&-1<["range","date"].indexOf(o)||a.isPicker;(!n||a.type&&this._isComit(o))&&this._triggerChange(t),n||this.close(void 0,t)}},{key:"_isComit",value:function(t){return this["_"+t+"PickerInstance"]._opts.immediateCommit}},{key:"_triggerChange",value:function(t,a){var o=this._getOptForItem(this._curLi[0].id),n=this._lastSelected;o[0].selected=!0,(!n||o.attr("id")!==n.attr("id")||a)&&this._dispatchEvent("change",t,_objectSpread({oldValue:n,newValue:o},this._selectedData))}},{key:"_getOptForItem",value:function(t){return this.element.find("[id="+t.replace("-item","")+"]")}},{key:"_setValue",value:function(t,a){var o=this._prevLi=this._curLi;this._lastSelected=o&&o.length&&this._getOptForItem(o.attr("id")),this._selectOpt("last",!1),this._updateSelectClass(o,!1),this._curLi=t,this._currentSelected=t&&t.length&&this._getOptForItem(t.attr("id")),this._selectOpt("current",!0);var n=this._updateSelectClass(t,!0);return a||(this._setPlaceholder(this._getPlaceHolder(n)),this._setSelectedData(n&&n.valueType?void 0:n)),n}},{key:"_selectOpt",value:function(t,a){this._addedByComponent=this.isCE,(t=this["_"+t+"Selected"])&&t.attr("selected",a),this._addedByComponent=!1}},{key:"_updateSelectClass",value:function(t,a){if(t){t[(a?"add":"remove")+"Class"]("is-selected");var o=this._data.menu.optData[t.index()],n=o.class;return o.class=a?n+(0>o.class.indexOf("is-selected")?" is-selected":""):n.replace("is-selected",""),o}}},{key:"_parseDate",value:function(a,o){return t.Date._parseDateValue(a,o||this._opts.format,this._opts.otherInputFormats)||{date:void 0}}},{key:"_getPlaceHolder",value:function(a){var o=this._pickerOpened;if(a){var k,b,C,n=a.value,i=this._getNewDate(),s=this._getNewDate(),r=this._getNewDate(),d=!1,c=this._parseDate(n),_=!0,u=a.type||a.valueType,p=i.getDate(),m=["YESTERDAY","TODAY","TOMORROW"].indexOf(n),g=["LAST_MONTH","THIS_MONTH","NEXT_MONTH"].indexOf(n),h=["LAST_YEAR","THIS_YEAR","NEXT_YEAR"].indexOf(n),v=["LAST_QUARTER","THIS_QUARTER","NEXT_QUARTER"].indexOf(n),y=-1<["range","date"].indexOf(u);if(o&&(!y||a.valueType!==o)&&(this._pickerOpenOrClose(!0),this._lastOpened=this._pickerOpened,this._pickerOpened=void 0),a.type&&"custom"===a.type)return this._updateValues(a.value,null,"custom"),this._isText?a.label:a.value;if(-1<m?(i.setDate(p+m-1),s=new Date(+i),a.isPicker?a.type=u=u||"date":_=!1):"THIS_WEEK"===n?(i.setDate(i.getDate()-i.getDay()),s=this._getDate(i,6)):"NEXT_WEEK"===n?(i.setDate(i.getDate()+(7-i.getDay())),s=this._getDate(i,6)):"LAST_WEEK"===n?(s.setDate(s.getDate()-s.getDay()-1),i=this._getDate(s,-6)):-1<g?(i.setDate(1),(s=new Date(i.setMonth(i.getMonth()+g-1))).setMonth(i.getMonth()+1),s.setDate(0)):-1<h?(i=new Date(i.getFullYear()+h-1,0,1),s=new Date(i.getFullYear(),12,0)):-1<v?(b=l(i.getMonth()/3+v-1),i=new Date(r.getFullYear(),3*b,1),s=new Date(r.getFullYear(),3*b+3,0)):-1<n.indexOf("NEXT")?(k=parseInt(n.split("_")[1])-1,s.setDate(p+k)):-1<n.indexOf("LAST")?(k=parseInt(n.split("_")[1])-1,i.setDate(p-k)):-1<["WEEK_TO_TODAY","MONTH_TO_TODAY","YEAR_TO_TODAY"].indexOf(n)?(i.setDate(-1<n.indexOf("WEEK")?i.getDate()-i.getDay():1),-1<n.indexOf("YEAR")&&i.setMonth(0)):"range"===a.valueType||"date"===a.valueType?C=!0:"string"==typeof a.value&&c.isValid||c.isValid?(C=!0,u=u||"date",a.isPicker&&(a.type=u||"date")):a.fromValue&&a.toValue&&(C=!0),!a.valueType&&a.isPicker&&(a.type=u=u||"range"),_=u?"range"===u:_,C){var D=this._handlePickerOptionClick(a,_);i=D.date1,s=D.date2,a.valueGiven=i||s}if(this._checkTime&&C||(s&&s.setHours(0,0,0,0),i&&i.setHours(0,0,0,0)),_&&this._isMinMaxGiven){var S=this._isValidDate(i,"Range",!(y||a.isPicker)),f=this._isValidDate(s,"Range",!(y||a.isPicker));S&&f||this._getValidRangeVal(i,s)}var t=i||s,T=[i,_?s||i:null];if(y||a.isPicker){var w=this._valueSet||this._valueId;if(t&&(!this["_"+u+"Picker"]&&!a.valueType||w||C)&&this._updateValues.apply(this,T.concat([_?"range":"date",a])),this._openPicker(a,u),a.valueType)return!!(w||C&&this._isComit(u)&&(i||s))&&void 0;u&&!this._isComit(u)&&this._valueId!==a.id&&(d=!0)}else this._prevWidth=0;var I=t?this._updateValues.apply(this,T.concat([_?"range":"date",a,d])):void 0;return void 0===I?!d&&(this._isText?a.label:this._getStringVal.apply(this,T.concat([void 0,!0]))):I}this._pickerOpenOrClose(!0),this._lastOpened=this._pickerOpened,this._pickerOpened=void 0}},{key:"_getDate",value:function(t,a){var o=new Date(+t);return o.setDate(o.getDate()+a),o}},{key:"_getStringVal",value:function(a,o,n,l){n=n||this._opts.format;var i=t.Date.formatDate.bind(t.Date),s=l&&this._opts.labels;return a&&i(a,n,s)+(o?" - "+i(o,n,s):"")}},{key:"_updateValues",value:function(t,a,o,n,l){var i=this._opts,s=a&&t,r="custom"===o;l||(i.value=s?void 0:r?t:t&&new Date(+t),i.fromValue=t&&!r?new Date(+t):void 0,i.toValue=s?a&&new Date(+a):t&&!r?new Date(+t):void 0),this._curFrom=t&&new Date(+t),this._curTo=s?new Date(+a):void 0,this._isPicker&&this._setPickerValues.apply(this,arguments)}},{key:"_resetValues",value:function(){this._opts.value=void 0,this._opts.fromValue=void 0,this._opts.toValue=void 0,this._setPlaceholder(this._opts.placeholder)}},{key:"open",value:function(){this._opts.disabled||this._opts.readonly||this._showMenu()}},{key:"close",value:function(a,o){this._dispatchEvent("beforedropdownlistclose",o,{})&&(this._setMenuAttr(!0),this._pickerOpened&&this._pickerOpenOrClose(!0),this._dispatchEvent("dropdownlistclose",o,{}),t.openedDateSelect=void 0)}},{key:"getValue",value:function(t){t=this._parseDate(t||this._opts.value).date;var a=this._getStringVal(t);if(t)return{value:t,valueString:a,translatedValue:this._translateEToA(a)}}},{key:"setValue",value:function(t){var a=this._opts,o=this._getOptionObj(t,"value");t&&(t=this._parseDate(t).date,this._valueSet=!0,a.value=t,a.fromValue=null,a.toValue=null,o?this._setValue(n("#"+o.id)):this._setPickerVal("date")),this._valueSet=!1}},{key:"getFromValue",value:function(){var t=this.getValue(this._opts.fromValue);return t&&{fromValue:t.value,fromValueString:t.valueString,translatedFromValue:t.translatedValue}}},{key:"getToValue",value:function(){var t=this.getValue(this._opts.toValue);return t&&{toValue:t.value,toValueString:t.valueString,translatedToValue:t.translatedValue}}},{key:"getSelectedOption",value:function(){return _objectSpread({item:this._curLi,option:this._currentSelected},this.getValue(),{},this.getFromValue(),{},this.getToValue(),{selectedValue:this._selectedData.selectedValue})}},{key:"clearSelection",value:function(){var t=this.getSelectedOption();Object.entries(t).forEach(function(a){var o=_slicedToArray(a,2),n=o[0],l=o[1];/^(item|options)$/.test(n)||(t["previous"+n.charAt(0).toUpperCase()+n.slice(1)]=l,t[n]=void 0)}),this._clearClickHandler(void 0),this._dispatchEvent("change",void 0,t)}},{key:"_destroy",value:function(){this._isPicker&&this._destroyPicker(),this._dtsMenu.remove(),this._setUndefined(["dtsMenu","placeholderElem","pickerContainer","lastSelected","currentSelected","selectedData"],"")}},{key:"_getArrowIconProps",value:function(a){(!a.calendarIcon||a.calendarIcon&&"right"!==a.calendarIconAlignment)&&(this._data.arrowIconProps=t._getIconInfo(a.arrowIconClassName,a.arrowSVGIconId,"zc__svg--downarrow zselectbox__arrow","zselectbox__icon arrowicon",{templateRender:!0,isCE:this.isCE}))}},{key:"_getCalendarIconProps",value:function(a,o){a.calendarIconProps=t._getIconInfo(o.calendarIconClassName,o.calendarSVGIconId,"zc__svg--calendaricon zbutton__svg","zselectbox__icon calendaricon",{templateRender:!0,isCE:this.isCE}),a.isRight=a.isLeft=!1,"right"===o.calendarIconAlignment?(a.arrowIconProps=null,a.isRight=!0):a.isLeft=!0}},{key:"_getOptionData",value:function(a){for(var o=0;o<a.length;o++){var n=a[o],l=t._getOpts(n);n._created=!0,l.selected=l.selected||n.selected||this._isSelected(n,l),l=this._setData(l,n),this._setOptData(l)}}},{key:"_openPicker",value:function(t,a,o){this._prevWidth||this._saveWidth(),t&&!this["_"+a+"Picker"]&&this._initPicker(a),a&&this._pickerOpened!==a&&(this._pickerOpened=a,a!==this._lastOpened&&this._opts.slideAnimate&&this._animateMenu()),this._setDimensions();var n=this._pickerOpened;n&&(this._pickerOpenOrClose(null,!0),this._getPosition(),this._setWidth(this["_"+n+"Picker"],o))}},{key:"_pickerOpenOrClose",value:function(t,a){a||this._saveWidth(),this._listContainer&&this._display(t,this._listContainer),this._pickerOpened&&this["_"+this._pickerOpened+"PickerInstance"][t?"close":"open"](),this._setDimensions()}},{key:"_saveWidth",value:function(){this._prevWidth=this._listContainer.innerWidth()}},{key:"_setWidth",value:function(t,a){var o=this;if(!a&&this._opts.slideAnimate){var n=this._listContainer.innerWidth();a||this._animateMenu(!0,this._prevWidth),setTimeout(function(){o._listContainer.css({width:n})},30),this._prevWidth=null}}},{key:"_getPickerOpts",value:function(t,a){var o={};return["rtl","format","hideCancelButton","immediateCommit","locale","fromValue","toValue","minDate","maxDate","fromLabel","toLabel","timeZone"].forEach(function(a){o[a]=t[a]}),_objectSpread({},o,{isCE:this.isCE,OKButtonLabel:t.OKButtonLabel||this._getI18NText("OKButtonLabel"),cancelButtonLabel:t.cancelButtonLabel||this._getI18NText("cancelButtonLabel"),position:"right",type:"inline",value:a?t.value:void 0,cancel:this._cancelHandler.bind(this),className:a?"zdts-customdate":"zdts-customrange",appendTo:this._pickerContainer,change:this._changeHandler.bind(this)},this._bindPickerEvents(),{clear:this._clearHandler.bind(this),afterdrilldown:this._setDimensions.bind(this)})}},{key:"_initPicker",value:function(a){var s,o=this._opts,l="date"===a,i=this._getPickerOpts(o,l);i=n.extend(!0,{},i,o[(l?"date":"dateRange")+"PickerOptions"]),this["_"+(l?"date":"range")+"Picker"]=s=n(t["createDate"+(l?"":"Range")+"Picker"](i)),s.removeClass("zdatetimepicker zdatetimepicker--group"),this["_"+(l?"date":"range")+"PickerInstance"]=t["date"+(l?"":"range")+"picker"](s)}},{key:"_bindPickerEvents",value:function(){for(var t=this,a=["beforeopen","open","beforeclose","close"],o=this,n=["beforedatecellrender","beforefocus","open","beforeopen","beforeclose","close","dateselect","todaybuttonclick","drilldown","beforedrilldown","afterdrilldown","datemouseover","monthchange","yearchange","decadechange","fromvalueselect","tovalueselect","clear"],l={},s=function(s){l[n[s]]=function(l,i){t.isCE&&l.stopPropagation(),-1<a.indexOf(n[s])?t._dispatchEvent("picker"+n[s],l,i):(-1<["yearchange","monthchange"].indexOf(n[s])&&o._setDimensions(),t._dispatchEvent(n[s],l,i))}},r=0;r<n.length;r++)s(r);return l}},{key:"_clearHandler",value:function(t){this._isComit(-1<t.type.indexOf("rangepicker")?"range":"date")&&(this._shouldClose=!1),this._dispatchEvent("clear",t,{})}},{key:"_setPickerValues",value:function(t,a,o){if(this._datePicker){var n=this._datePickerInstance;("date"!==o||!this._isSameDate({value:n.getAttribute("value")}))&&n.setAttribute("value","date"===o?t:void 0)}if(this._rangePicker){var i=this._rangePickerInstance;("range"!==o||!this._isSameDate({fromValue:i.getAttribute("fromValue"),toValue:i.getAttribute("toValue")}))&&(i.setAttribute("toValue",null),i.setAttributes({fromValue:t,toValue:"range"===o?a:t}))}}},{key:"_changeHandler",value:function(t,a,o,l){if(t.originalEvent){if(void 0===this._shouldClose&&(this._shouldClose=!0),!l){var i;this.isCE?(t.stopPropagation(),i=-1<(a=t.detail).container[0].tagName.indexOf("RANGE")?"range":"date"):i=-1<t.type.indexOf("range")?"range":"date";var s=a.fromValue,r=a.value,d=this._curLi&&this._getOptionObj(this._curLi.attr("id"),"id"),c=a.toValue,_=this._getOptionObj(i,"valueType"),u=this._isSameDate(a);if(this._updateValues(s||r,c,i,d),r||s&&c||this._resetValues(),u&&!this._isComit(i)&&d&&-1<this._getConstValues().indexOf(d.value))this._setSelectedData(d),this._setPlaceholder(this._isText?d.label:this._selectedData.valueString);else{var p=this._setSelectedData();this._setPlaceholder(p),this._selectedData.label=p,_&&this._curLi&&this._curLi.attr("id")!==_.id&&this._setValue(n("#"+_.id))}this._triggerChange(t,!0)}o||!this._shouldClose&&n(a.container).is(":visible")||this.close(),this._shouldClose=!0}}},{key:"_isSameDate",value:function(a){var o=t.Date.areDatesEqual.bind(this);return this._checkTime?a.value?+a.value==+this._curFrom:+a.fromValue==+this._curFrom&&+a.toValue==+this._curTo:a.value?o(a.value,this._curFrom):o(a.fromValue,this._curFrom)&&o(a.toValue,this._curTo)}},{key:"setFromValue",value:function(t){this._setFromToValue(t)}},{key:"setToValue",value:function(t){this._setFromToValue(null,t)}},{key:"_setFromToValue",value:function(a,o){var n=this._opts,l=!!a;a=this._parseDate(a||n.fromValue).date,o=this._parseDate(o||n.toValue).date,a&&o&&t.Date.isGreater(o,a)&&(this._valueSet=!0,n[(l?"from":"to")+"Value"]=l?a:o,n.value=null,this._setPickerVal("range"),this._valueSet=!1)}},{key:"_cancelHandler",value:function(t){this._restorePreviousSelection(),this.close(),this._dispatchEvent("cancel",t,{})}},{key:"_getPickerLabel",value:function(t,a){var o=this._opts;return o.value||o.fromValue||o.toValue?!!a&&null:t.label.replace("...","")}},{key:"_handlePickerOptionClick",value:function(a,o){var _,u,n=this._parseDate.bind(this),l=this._opts,i=l.value,s=l.fromValue,r=l.toValue,d=n(a.value),c=s&&r&&(this._checkTime?+s==+r:t.Date.areDatesEqual(s,r));if(o)if(a.fromValue&&a.toValue){var p=a.fromValue,m=a.toValue;_="string"==typeof p?n(p).date:p,u="string"==typeof m?n(m).date:m}else d.isValid?_=d.date:(_=n(s).date,u=n(r).date);else d.isValid?_=d.date:c?(_=s,u=void 0):_=i&&(-1<["TODAY","NOW"].indexOf(i)?this._getNewDate():n(l.value).date);return{date1:_,date2:u}}},{key:"_destroyPicker",value:function(){this._datePicker&&this._datePickerInstance.destroy(),this._rangePicker&&this._rangePickerInstance.destroy(),this._datePicker=this._datePicker=this._datePickerInstance=this._rangePickerInstance=void 0}},{key:"deselectOption",value:function(){this._currentSelected&&(this._resetValues(),this._setValue(null),this._setPickerValues())}},{key:"addOption",value:function(t,a,o,l){var i=this._data.menu.optData.length;o="append"===a?0:o?n(o).index():i,a=("before"===a?0:"after"===a?+!o||1:i)+o,this.addOptionAt(t,a,l)}},{key:"_getItems",value:function(t){return t instanceof Array?t:[t]}},{key:"addOptionAt",value:function(t,a,o){if(!this._data.rendered)return!1;var n={},l=0,s=this._data.menu.optData;n=o?this._getOptData(this._getItems(o),!0,t):this._getOptionData(this._getItems(t),!0);var r=function(){var t=s[l],a=n.filter(function(a){return a.id===t.id});a.length&&(n=n.filter(function(t){return t.id!==a[0].id}),s.splice(l,1,a[0]))};for(l=0;l<s.length;l++)r();var d=s.splice.apply(s,[0,a].concat(_toConsumableArray(n)));d.length&&(this._data.menu.optData=[].concat(_toConsumableArray(d),_toConsumableArray(s))),this._render(),this._setIsPickerVar()}},{key:"removeOption",value:function(t){for(var l,a=0,o=(t=this._getItems(t)).length;a<o;a++)0>(l=t[a]).indexOf("#")&&(l="#"+this._getOptionObj(l,"value").id),this.removeOptionAt(n(l).index())}},{key:"removeOptionAt",value:function(t){this._data.menu.optData.splice(t,1),this.element.find(this._SELECTORS.option)[t].remove(),this._render(),this._setDimensions(),this._setIsPickerVar()}},{key:"setOptionAttributes",value:function(t,a,o){if(t=this._getItems(t),"object"===_typeof(a)&&Object.keys(a).length)for(var n in a)this.setOptionAttributes(t,n,a[n]);else a&&this._setOptionAttribute(t,a,o);this._setIsPickerVar()}},{key:"_setOptionAttribute",value:function(t,a,o){for(var l=this,s=function(s){var u,i=t[s],r=l._data.menu.optData,d=n(i)[0].nodeType?r[n(i).index()]:r.find(function(t){return-1<t.label.indexOf(i.label)}),c=l._getOptForItem(d.id),_=d[a];i=n("#"+d.id),d[a]=o,"selected"===a?!o||d.disabled||d.hidden?u=!0:l._setValue(i):"hidden"===a?(l._display(o,i),u=i.hasClass("is-selected")):"disabled"===a?(o?0>d.class.indexOf(" is-disabled")&&(d.class+=" is-disabled"):d.class=d.class.replace(" is-disabled",""),i[o?"addClass":"removeClass"](" is-disabled"),o&&i.hasClass("is-selected")&&(u=!0)):"label"===a?(c[0].innerText=o,i[0].innerText=o):"className"===a?(d.class=o,i.removeClass(_).addClass(o)):"valueType"===a&&(d.selected=l._isSelected(c,d),d.selected&&l._setValue(i)),u&&(l.deselectOption(),l._clear&&l._clear.addClass("zh-dnone"))},r=0;r<t.length;r++)s(r)}},{key:"_getClrBtnProps",value:function(t,a){var o=this._getI18NText("clear");t.clearButton={id:this._elementId+"--clear",iconClassName:a.clearButtonIconClassName,SVGIconId:a.clearButtonSVGIconId||"zc__svg--clear",className:"zselectbox__clearbutton",templateRender:!0,rtl:this.rtl,isCE:this.isCE,customAttributes:{tabindex:-1,"aria-label":o,title:o}}}},{key:"_bindClrBtnEv",value:function(){this._clear&&this._addEvents({clearClick:"mousedown"},this._clear)}},{key:"_clearClickHandler",value:function(t){this.deselectOption(),t&&t.stopPropagation(),this._mouseEnterHandler(),this._scrollHt=0,this._dispatchEvent("clear",t,{}),this.close()}},{key:"_mouseEnterHandler",value:function(){var t=this._opts;this._clear&&this._clear[(!(t.value||t.fromValue||t.toValue)||t.disabled||t.readonly?"add":"remove")+"Class"]("zh-dnone")}},{key:"_isValidDate",value:function(a,o,n){var l=this._opts,i=!n&&l["date"+(this._checkTime?"Time":"")+(o||"")+"PickerOptions"],s=this._parseDate(i.minDate||l.minDate).date,r=this._parseDate(i.maxDate||l.maxDate).date;return s=!s||t.Date.isGreater(a,s),r=!r||t.Date.isGreater(r,a),s&&r?a:null}},{key:"_getValidRangeVal",value:function(t,a){for(var o=this._isValidDate(t,"Range"),n=this._isValidDate(a,"Range");(!o||!n)&&+t<=+a;)o||(t.setDate(t.getDate()+1),o=this._isValidDate(t,"Range")),n||(a.setDate(a.getDate()-1),n=this._isValidDate(a,"Range"));this._curFrom=+t<=+a?new Date(+t):void 0,this._curTo=+t<=+a?new Date(+a):void 0}},{key:"_setAttribute",value:function(a,o){var m,g,l=this._opts,s=this._data,r=l[a],d=this._selectedData,c=this._datePickerInstance,_=this._rangePickerInstance,u=this._dtsMenu,p=d.value||d.fromValue||d.toValue;if(l[a]=o,-1<["arrowSVGIconId","arrowIcon","arrowIconClassName"].indexOf(a))o?this._getArrowIconProps(l):s.arrowIconProps=null,s.modifiedAttr="arrowIcon",this._domChanged=!0;else if(-1<["calendarIcon","calendarIconAlignment","calendarIconClassName","calendarSVGIconId"].indexOf(a)){var h=!0;o&&l.calendarIcon?(this._getCalendarIconProps(s,l),"right"===l.calendarIconAlignment&&(s.arrowIconProps=null,h=!1)):s.calendarIconProps=s.isRight=s.isLeft=null,s.modifiedAttr="calendarIcon",h&&l.arrowIcon&&!s.arrowIconProps&&this._getArrowIconProps(l),this._domChanged=!0}else if("placeholder"!==a||this._curLi)if("format"===a){if(this._validateFormat(),!this._invalidFormat){for(var f,v=["value","fromValue","toValue"],y=0;y<v.length;y++)(f=l[v[y]])&&("string"==typeof f&&(f=this._parseDate(f,r),f=t.Date.formatDate(f,o),l[v[y]]=f),d[v[y]+"String"]=t.Date.formatDate(f,o));d.valueString=d.value?d.valueString:d.fromValueString+" - "+d.toValueString,d.translatedValue=this._translateEToA(d.valueString),m=!0}}else if("selectedValueDisplayType"===a)this._isText="text"===o,m=!0;else if("width"===a)this.container.width(o);else if("height"===a)this.container.height(o);else if("disabled"===a)this._disable(o);else if("datePickerOptions"===a&&c)c.setAttributes(o),this._isMinMaxGiven=l.minDate||l.maxDate||o.minDate||o.maxDate||_&&(_.getAttribute("minDate")||_.getAttribute("maxDate")),this._datePicker.removeClass("zdatetimepicker zdatetimepicker--group");else if("dateRangePickerOptions"===a&&_)_.setAttributes(o),this._isMinMaxGiven=l.minDate||l.maxDate||c&&(c.getAttribute("minDate")||c.getAttribute("maxDate"))||o.minDate||o.maxDate,this._rangePicker.removeClass("zdatetimepicker zdatetimepicker--group");else if("value"===a)this.setValue(o);else if(-1<["fromValue","toValue"].indexOf(a))this["set"+("fromValue"===a?"FromValue":"ToValue")](o);else if("dropdownList"===a)for(var k in o){var b=o[k];"className"==k?(r.className&&u.removeClass(r.className),u.addClass(b)):"appendTo"===k?u.appendTo(n(b)):["height","width"].indexOf(k)&&this._setDimensions()}else if(-1<["immediateCommit","hideCancelButton","OKButtonLabel","cancelButtonLabel"].indexOf(a))"immediateCommit"===a&&this._setOkCancelBtns(),this._domChanged=!0,g=!0;else if("options"===a)this._reInit=!0;else if("rtl"===a){var C=s.menu.className;s.menu.className=o?C+" zh-rtl":C.replace("zh-rtl",""),s.modifiedAttr="rtl",this._domChanged=g=!0}else"timeZone"===a&&(this._setTimeZone(),this._reInit=g=!0);else s.placeholder=o,this._setPlaceholder(!1);return g&&(c&&c.setAttribute(a,o),_&&_.setAttribute(a,o)),p&&m&&this._curLi&&(d.label=d.valueString||s.placeholder,this._setPlaceholder(this._isText&&!this._checkTime?d.text:d.label)),this._domChanged}},{key:"name",get:function(){return"zdateselect"}},{key:"attrs",get:function(){return{calendarIcon:!1,clearButton:!1,disabled:!1,clearButtonIconClassName:null,clearButtonSVGIconId:null,calendarSVGIconId:null,calendarIconClass:null,immediateCommit:!0,calendarIconAlignment:"left",placeholder:"",locale:"en-US",arrowIcon:!1,value:null,fromValue:null,toValue:null,format:"dd/MM/yyyy",arrowIconClass:null,slideAnimate:!0,arrowSVGIconId:null,position:"bottom-left",selectedValueDisplayType:"value",hideCancelButton:!1,OKButtonLabel:null,cancelButtonLabel:null,timeZone:null,selectedIndex:null}}},{key:"props",get:function(){return{options:[],dropdownList:{},calendarIconClassName:null,arrowIconClassName:null,otherInputFormats:[],datePickerOptions:{monthsPerView:1},dateRangePickerOptions:{monthsPerView:2},labels:{OKButtonLabel:"OK",cancelButtonLabel:"Cancel",specificDate:"Specific date",customRange:"Custom range",placeholder:"Choose Date",clear:"Clear"}}}},{key:"EVENTS",get:function(){return["change","optionselect","beforedropdownlistopen","dropdownlistopen","beforedropdownlistclose","dropdownlistclose","pickerbeforeopen","pickeropen","pickerbeforeclose","pickerclose","pickerdateselect","todaybuttonclick","pickerchange","cancel","clear","beforedrilldown","drilldown","datemouseover","monthchange","yearchange","decadechange","beforedatecellrender"]}},{key:"SELECTORS",get:function(){var t=this.isCE;return{itemId:t?"zitemid":"data-zitemid",option:t?"z-option":"option",valueType:t?"value-type":"data-value-type"}}}]),o}();t.registerComponent("ZDateSelect",D),function(t){var a=t.zdateselect.Templates,o=t.Templates.Utilities;a.container=function(t){return ZT.html(zc0tO78(),t.children&&a.children(t))},a.children=function(n){return ZT.html(zc0tO79(),n.isLeft&&o.icon(n.calendarIconProps),n.placeholder,n.clearButton&&t.createButton(n.clearButton),n.isRight&&o.icon(n.calendarIconProps),n.arrowIconProps&&o.icon(n.arrowIconProps),n.menu&&a.menu(n.menu))},a.menu=function(t){return ZT.html(zc0tO80(),t.className,t.prepend&&a.pickerContainer(t),t.optData.map(function(t){return ZT.html(zc0tO81(),t.class,t.valueType,t.id,t.style,t.label)}),t.append&&a.pickerContainer(t))},a.pickerContainer=function(t){return ZT.html(zc0tO82(),t.containerClass)}}(ZPeopleComponents);var S=function(o){function l(){return _classCallCheck(this,l),_possibleConstructorReturn(this,_getPrototypeOf(l).apply(this,arguments))}return _inherits(l,t.CoreComponent),_createClass(l,[{key:"_init",value:function(t){var a=this._data,o=this._opts,n=o.content||"",l=this.isCE;this._isComponentInited=!1;var i=a.excludeFocus;if(a.excludeFocus=(i?i+",":"")+" .zbutton--action",l){var s=t.find("z-dialogtitle").addClass("zdialog__title zdialog__text");s.length&&(a.titleEle=s[0]),a.contentEle=t.find("z-dialogcontent").addClass("zdialog__content")[0],a.actionBar=t.find("z-dialogactionbar").addClass("zdialog__commandbar zdialog__footer")[0]}else n&&"object"===_typeof(n)?this._fetchAjaxCon(n):this._setContent();o.id=this._getID(t),this._setTitleBarBtns&&this._setTitleBarBtns(),o.buttons&&this._createButtonPanel(),this._setFootnote&&this._setFootnote(),this._skipParent=!0}},{key:"_render",value:function(){this._opts.constructDialog?_get(_getPrototypeOf(l.prototype),"_render",this).apply(this,arguments):(!this._data.rendered&&this._postRender(this.element,this._opts),this._postEachRender(this.element,this._data))}},{key:"_setContent",value:function(){var a=this._data,o=this._opts,n=o.content;n?a.content=o.isContentHTMLEncoded?n:t.encodeHTML(n):(n=_toConsumableArray(this.element[0].childNodes)).length&&(a.content=n)}},{key:"_postRender",value:function(){this._data.className+=" zdialog",this.element.attr({"aria-modal":"modal"===this._opts.type,tabIndex:-1,role:"dialog"});var t=n(this._opts.appendTo||"body");this.element[0].parentNode!==t[0]&&t.append(this.element)}},{key:"_postEachRender",value:function(a,o){var l=this.element,i=this._opts,s=this._data.rendered;this._content=l.find(".zdialog__content"),this._titleBar=l.find(".zdialog__titlebar"),this._footer=l.find(".zdialog__footnote"),this._actionGroup=l.find(".zdialog__actiongroup");var r=i.resizable;this._minimizeButton=n("#"+i.id+"minimize"),this._maximizeButton=n("#"+i.id+"maximize"),r&&t.resizable&&(i.resizable="object"===_typeof(r)?r:{},this._initResize());var d=o.modifiedAttr;s&&d&&(-1!==d.indexOf("title")||-1!==d.indexOf("minimizable")||-1!==d.indexOf("maximizable")||-1!==d.indexOf("closeButton"))&&this._data.titleBarButtons.length&&this._handleTBarActions(),this._canDrag()&&this._initDrag(),(i.buttons||i.isCE||!i.constructDialog)&&(!s||d&&-1!==d.indexOf("buttons"))&&this._setBtnProps(),(i.minimizable||i.maximizable)&&this._titleBar.off("dblclick.zdialog").on("dblclick.zdialog",this._titleBarClickHandler.bind(this)),!s&&i.autoOpen&&this.open(),this._data.modifiedAttr=void 0}},{key:"_findPosition",value:function(){var t=this.element;this.actualPosition=t.position(),this.bottomRightPosition={bottom:t[0].style.bottom,right:t[0].style.right}}},{key:"_findHeightWidth",value:function(){this.actualWidth=parseFloat(this.element.css("width")),this.actualHeight=this._content.height()}},{key:"_canDrag",value:function(){return this._opts.draggable&&this._opts.zdraggable&&t.draggable}},{key:"open",value:function(t){this._open(t)}},{key:"close",value:function(t){this._closeDialog({},t,void 0)}},{key:"isMinimized",value:function(){return this.element.is(".zdialog--minimized")}},{key:"isMaximized",value:function(){return this.element.is(".zdialog--maximized")}},{key:"refreshContent",value:function(a){if(this._opts.handleFocusNavigation)return t.FocusHandler.refresh(this.element,this._opts.excludeFocus,a)}},{key:"_triggerEvent",value:function(t,a){var o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return o.dialog=this.element,this._dispatchEvent(t,a,o)}},{key:"_open",value:function(a){(this.isMinimized()||this.isMaximized())&&this._toggleRestore();var o=this.element,n=o.attr("style");if((!n||n&&-1===n.indexOf("width"))&&o.css({width:this._opts.width||"auto"}),this._triggerEvent("beforeopen")){var i=o.css("opacity");o.css("opacity",0),this._display(!1),!this._isComponentInited&&t.init&&(this._isComponentInited=!0,t.init(o)),o.css("opacity",i),this._display(!0),"modal"===this._opts.type?this._overlay?(this._hideDocumentScroll(!0),this._overlay.show()):(this._createOverlay(),this._positionDialog(a)):this._positionDialog(a),a=a||{};var s=this._opts.animation||a.animation,r=this;s?this._animateAction(s,"open",function(){r._handleDialogOpen()},!0):this._handleDialogOpen()}}},{key:"_handleDialogOpen",value:function(){var a=this;this._display();var o=this._opts,n=o.zIndex,l=this.element,i=this.name;this._overlay&&this._overlay.css({zIndex:t.zIndex+=1}),t.zIndex=n?t.zIndex:t.zIndex+1,l.css({zIndex:n?parseInt(n):t.zIndex}),o.handleFocusNavigation?t.FocusHandler.init(l,{focusElementOnOpen:o.focusElementOnOpen,focusOnOpen:o.focusOnOpen,setIntialFocus:o.setIntialFocus,excludeFocus:o.excludeFocus}):this.element.focus(),this._findPosition(),this._findHeightWidth(),l.attr("aria-expanded",!0),this._triggerEvent("open",{},{position:this.actualPosition}),t.activeDialog=l;var s=!!(t.Browser.isIE&&10>=t.Browser.getIEVersion());t.$window.off("resize."+i).on("resize."+i,function(t){a._posModified||("center"===a._opts.position&&"resize"===t.originalEvent.type&&!a.isMinimized()&&!a.isMaximized()&&a._positionDialog(),a.isMaximized()&&s&&a._adjustContentSize())})}},{key:"_closeDialog",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},a=1<arguments.length?arguments[1]:void 0,o=2<arguments.length?arguments[2]:void 0;if(t=t||{},!!o||this._triggerEvent("beforeclose",t,a))if(!this._opts.animation||a&&void 0!==a.animation&&!1===a.animation)this._handleDlgClose(t,a,o);else{var l=this;this._animateAction(this._opts.animation,"close",function(){l._handleDlgClose(t,a,o)})}}},{key:"_handleDlgClose",value:function(a,o,n){this._display(!0);var l=this.element;l.attr("aria-expanded",!1),l.find(".zdialog__commandbar .has-focus").removeClass("has-focus"),this.restore(!1),"modal"===this._opts.type&&this._overlay?this._closeModalDlg(a,o,n):!n&&this._triggerEvent("close",a,o),t.zIndex=1e3<t.zIndex?t.zIndex-1:1e3,t.activeDialog&&l&&t.activeDialog[0]===l[0]&&(t.activeDialog=void 0),t.$window.off("resize.".concat(this.name))}},{key:"_bindEvents",value:function(){this._addEvents({keydown:"keydown",focus:"focus"}),this._data.titleBarButtons.length&&this._handleTBarActions(),this._addEvents({touchStart:"touchstart",touchEnd:"touchend"},this._titleBar)}},{key:"_touchStartHandler",value:function(t){var a=t.originalEvent.changedTouches[0];this._touchInfo={startTime:(new Date).getTime(),startX:a.pageX,startY:a.pageY}}},{key:"_touchEndHandler",value:function(t){var a=this._touchInfo,o=t.originalEvent.changedTouches[0],l=(o.pageX,o.pageY);2e3>(new Date).getTime()-a.startTime&&(50<l-a.startY&&this._closeDialog(t))}},{key:"_keydownHandler",value:function(a){var o=t.activeDialog,l=this.element;if(o&&o[0]!==l[0]&&(t.activeDialog=l),a.keyCode===t.keyCode.ESCAPE&&this._opts.closeOnEscKey&&!this._resizing){var i=l.find(".zdialog__footer .zbutton");(i=i.filter(function(t,a){if(n(a).data("handleClose"))return n(a)})).length?(i.focus(),i.trigger("click")):this._closeDialog(a),a.stopPropagation()}else if(a.keyCode===t.keyCode.ENTER&&this._opts.submitOnEnter&&l.find("form").length){var s=n(a.target);if(s.closest(".zbutton:not(.zbutton--menu),input:not(.ztokenfield__textbox):not(.zsuggestfield-element)").length&&!s.closest(".zdialog__commandbar").length){var r=l.find(".zdialog__footer").find(this._opts.defaultActionButton)[0];if(r&&s.closest("button")[0]!==r)return n(r).focus().trigger("click"),!1}}}},{key:"_focusHandler",value:function(){var a=t.activeDialog;a&&a[0]!==this.element[0]&&(t.activeDialog=this.element)}},{key:"_positionDialog",value:function(a){var o=0,l=0,i=this.element,s=this._opts,r=i.find(".zdialog__content"),d=i.is(":visible");if(d||this._display(),!this._dimModified&&s.height){i.height(s.height);var c=i.outerHeight(!0),_=parseInt(r.height()),u=parseInt(r.css("padding-top").split("px")[0]),p=parseInt(r.css("padding-bottom").split("px")[0]),m=void 0===this._titleBar?0:parseInt(this._titleBar.outerHeight(!0)),g=i.find(".zdialog__footer"),h=g.length?g.outerHeight(!0):0,v=i.find(".zdialog__footnote");_=c-(u+p+m+h+(v.length?v.outerHeight(!0):0)+parseInt(i.css("border-top-width"))+parseInt(i.css("border-bottom-width"))+parseInt(r.css("margin-top"))+parseInt(r.css("margin-bottom"))),r.height(_),i.css("height","auto")}a=a||{};var f=i.outerWidth(!0),k=i.outerHeight(!0),b=t.windowObject.width,C=t.windowObject.height,D=s.position,S=!1;s.position=D=a.position||D,o=C/2-k/2+("modeless"===s.type?window.pageYOffset:0),l=b/2-f/2+("modeless"===s.type?window.pageXOffset:0);var T=a.target;if(T){var w=n(T).offset();o=w.top+n(T).outerHeight(!0),l=w.left}else if("golden-mean"===D){var I=C/2;o=I-I/1.618-parseFloat(k/2)+window.pageYOffset,l=b/2+window.pageXOffset-parseFloat(f/2)}else if("string"==typeof D&&"center"!==D){var x=D.split(",");o=x[1]?x[1]:o,l=x[0]?x[0]:l}if("object"===_typeof(D))D.right||D.bottom?S=!0:(o=D.top||o,l=D.left||l);else{var E=t.documentObject;0>o?o=0:o>=E.height&&(o=E.height-k),0>l?l=0:l>E.width&&(l=E.width-f)}d||this._display(!0),this._hasBottom=S;var z=S?D:{top:o,left:l};i.css(z)}},{key:"_setTitleBarBtns",value:function(){var a=this._opts,o=[],n=a.title,l=this._updateBtnInfo.bind(this);n&&(this._data.title=a.isTitleHTMLEncoded?n:t.encodeHTML(n)),a.minimizable&&"modal"!==a.type&&o.push(l("minimize")),a.maximizable&&o.push(l("maximize")),a.closeButton&&o.push(l("close")),this._data.titleBarButtons=o}},{key:"disableButton",value:function(t){this._toggleButton(t,!0)}},{key:"enableButton",value:function(t){this._toggleButton(t,!1)}},{key:"_toggleButton",value:function(t,a){var o=this["_"+(t||"close")+"Button"];o&&this._disable(a,o)}},{key:"_updateBtnInfo",value:function(a,o){var l=this._opts,i=n("#"+l.id+a),s={id:l.id+a,title:l[a+"ButtonLabel"]||this._getI18NText(a),className:"zbutton--action zdialog__"+a,SVGIconId:l[a+"SVGIconId"],SVGIconClassName:"zbutton__svg",iconClassName:l[a+"IconClassName"]||l[a+"IconClass"],defaultSVGIconId:"zc__svg--"+a+" zbutton__svg",templateRender:!0,mainElement:o||(i.length?i[0]:null),customAttributes:{"data-zdaction":a,tabindex:-1}};return t.ZButton.getBtnProps(s)}},{key:"_handleTBarActions",value:function(){for(var _,u,a=this,o="."+this.name,l=this.element.find(".zdialog__actiongroup"),s=l.find(".zbutton"),r=this._data.titleBarButtons,d=r.length,c=0;c<d;c++)(u=r[c].attrs)&&n(s[c]).attr(u);l.off("click"+o+" keydown"+o).on("click"+o+" keydown"+o,function(o){if(_=o.keyCode,"click"===o.type||_===t.keyCode.ENTER||_===t.keyCode.SPACE){var l=n(o.target).closest(".zbutton--action:not(.is-disabled)"),i=l.attr("data-zdaction");if(-1<["maximize","minimize","restore"].indexOf(i))return a._minMaxClick(i,o,l);if("close"===i)return a._closeClickHandler(o)}}).off("mousedown"+o).on("mousedown"+o,function(){a._activeElement=a._activeElement||n(document.activeElement)})}},{key:"_createCommandBar",value:function(){this._data.cols={},this._data.commands=[];var r,d,t=this._opts,a=[],o=t.commandBar,n=t.buttons,l={},s=0;o.leftColumn&&(a.push("left"),l.left={}),o.centerColumn&&(a.push("center"),l.center={}),o.rightColumn&&(a.push("right"),l.right={});var _,u,c="";l.cname="zdialog";for(var p=0;p<a.length;p++)if(c=a[p],_=o["".concat(c,"Column")],d=_.commands,_.className&&(l[c].className=_.className),n)for(l[c].buttons=[],s=0;s<d.length;s++)"object"===_typeof(r=n.find(function(t){if(t.name===d[s])return t}))&&(u=this._createButton(r),this._data.commands.push(u),u.columnName=c,l[c].buttons.push(u));this._data.cols=l}},{key:"_animateAction",value:function(a,o,n,l){var i=this;if(a[o]){var r,d,s=a[o].className;"object"===_typeof(a[o])&&(r=a[o].name,d=a[o].duration),s?(l&&this._display(),this.element.addClass(s).off(t._animationEnd).on(t._animationEnd,function(){i.element.removeClass(s),n&&n(),n=void 0})):"object"===_typeof(r)?(l&&this._display(),this.element.animate(r,d,n)):this.element[r](d,n)}else n&&n()}},{key:"_initDrag",value:function(){var a=this;t.draggable(this.element,n.extend(!0,{},{ignoreAsHandle:".zdialog__actiongroup,.zresizable__handle",handle:".zdialog__header",region:"viewport",cursor:"default",start:function(t,o){a._posModified=!0,a._triggerEvent("dragstart",t,o)},end:function(t,o){a._triggerEvent("dragend",t,o)},drag:function(t,o){a._triggerEvent("drag",t,o)}},this._opts.draggableOptions))}},{key:"_initResize",value:function(){var a=this,o=this.resizableDefaults;o.boundary="modal"===this._opts.type?"parent":o.boundary,t.resizable(this.element,n.extend(!0,{},o,{relatedElements:this._content,rtl:this._opts.rtl,cues:["ne","nw","se","sw"],cueIcons:{southEastSVGIconId:"zc__svg--lines zresizable__svg",northEastSVGIconId:"zc__svg--lines zresizable__svg",southWestSVGIconId:"zc__svg--lines zresizable__svg",northWestSVGIconId:"zc__svg--lines zresizable__svg"},start:function(t,o){-1!==t.detail.resizedDirection.indexOf("n")&&(a._posModified=!0),a._dimModified=!0,a._resizing=!0,a._triggerEvent("resizestart",t,o)},end:function(t,o){a._resizing=!1,a.actualWidth=a.element.width(),a._triggerEvent("resizeend",t,o),a._content.css("width","auto")},cancel:function(){a._resizing=!1},resize:function(t,o){a.element.css("height","auto"),a._triggerEvent("resize",t,o)}},this._opts.resizable))}},{key:"_setAttribute",value:function(a,o){var l=this._opts,i=this._data,s=l.isCE;"title"===a?o?(i.title=i.isTitleHTMLEncoded?o:t.encodeHTML(o),s&&this._titleBar.find(".zdialog__title").text(i.title)):i.title=i.titleEle=null:"content"===a?(l[a]=o,o?("object"===_typeof(o)&&n.ajax(o).success(function(t){o=t}),i.content=i.isContentHTMLEncoded?o:t.encodeHTML(o),s&&this._content.html(i.content)):i.content=i.contentEle=null):"closeOnEscKey"===a?o?this._bindEvents():this.element.off(".".concat(this.name)):"closeButton"===a||"closeSVGIconId"===a||"closeIconClassName"===a||"closeIconClass"===a||l.closeButton&&("minimizable"===a||"maximizable"===a)?(l[a]=o,this._setTitleBarBtns()):"className"===a?this._updateClass(o,l.className):"width"===a?(this.element.css({width:o}),this.actualWidth=parseInt(o)):"height"===a?(this._content.css("height",o),this.actualHeight=parseInt(o)):"type"===a&&this.element.is(":visible")?("modal"===o?this._createOverlay():(n(this._opts.appendTo||"body").append(this.element),this._overlay.remove(),this._overlay=void 0,this.element.off("click.zdialog"),this._setTitleBarBtns()),this.element.attr("aria-modal","modal"===o)):"overlayClassName"===a&&this._overlay?this._overlay.removeClass(l.overlayClassName).addClass(o):"resizable"===a&&t.resizable?(l.resizable=o,this.element.data("zresizable")&&o&&"object"===_typeof(o)?Object.keys(o).length&&t.resizable(this.element).setAttributes(o):o?this._initResize():t.resizable(this.element).destroy()):"draggable"===a||"zdraggable"===a?o?this._initDrag():t.draggable(this.element).destroy():"buttons"===a||"commandBar"===a?(l[a]=o,this._createButtonPanel()):"position"===a?(l.position=o,this._positionDialog()):"footer"===a?this._setFootnote(o):"buttonsAlignment"===a?this.element.find(".zdialog__footer").removeClass(this._ALIGNMENTS[l.buttonsAlignment]).addClass(this._ALIGNMENTS[o]):"rtl"==a&&l.resizable&&this.element.zresizable("setAttribute","rtl",o),"className"!==a&&(l[a]=i[a]=o),0>["closeOnEscKey","className","closeOnOverlayClick","width","height","resizable","draggable","position","animation"].indexOf(a)&&(this._domChanged=!0)}},{key:"setButtonAttributes",value:function(t,a,o){var n=0,l="string"!=typeof t,s="object"===_typeof(a);if(l||s){var d,r=s?a:t;for(var c in r)d=r[c],this.setButtonAttributes(s?t:d.id,s?c:d,d)}var u,_=(t=t.split(",")).length;for(n=0;n<_;n++)u=t[n],this._changeBtnValues(u,a,o);_&&(this._data.modifiedAttr="buttons",this._render()),this.refreshContent()}},{key:"_changeBtnValues",value:function(a,o,n){var l=this.element.find(a);if(l.length){var s=l[0].zbtndata;s[o]=n,s.className=s.className&&s.className.replace(/zbutton--primary|zbutton--normal|zbutton--small|zbutton--medium|zbutton--large|zbutton--mini|is-disabled|zbutton/g,""),s=t.ZButton.getBtnProps(s),l[0].zbtndata=s;for(var r=this._data.commands,d=r&&r.length,c=a.slice(1),_=0;_<d;_++)if(r[_].id&&r[_].id===c){var u=s.columnName;if(u)for(var p=this._data.cols[u].buttons,m=0;m<p.length;m++)p[m].id===c&&(this._data.cols[u].buttons[m]=s);this._data.commands[_]=s;break}"customAttributes"===o&&l.attr(n)}}},{key:"_createOverlay",value:function(){t.zIndex+=1;var a=this._opts,o=n("<div class='zdialog--overlay ".concat(a.overlayClassName,"' ></div>")).css("zIndex",t.zIndex);this._addedByComponent=!0,n(this._opts.appendTo||"body").append(o),o.append(this.element),this._addedByComponent=!1,this._hideDocumentScroll(!0),o.attr("tabindex",1),this._overlay=o,this._bindOverlayEvents()}},{key:"_bindOverlayEvents",value:function(){this._addEvents({overlayKey:"keydown",overlayEveStop:"click mousedown"},this._overlay)}},{key:"_overlayKeyHandler",value:function(a){a.keyCode===t.keyCode.ESCAPE&&this._opts.closeOnEscKey&&this._closeDialog(a,{overlay:!0})}},{key:"_overlayEveStopHandler",value:function(t){n(t.target).closest(".zdialog").length||(t.stopPropagation(),"click"===t.type&&this._opts.closeOnOverlayClick&&this._closeDialog(t,{overlay:!0}))}},{key:"_unbindOverlayEvents",value:function(){this._removeEvents("keydown click mousedown",this._overlay)}},{key:"_hideDocumentScroll",value:function(t){n("body")[t?"addClass":"removeClass"]("zh-overflowhidden")}},{key:"_closeModalDlg",value:function(t,a,o){var n=this._overlay,l=!!n&&n.is(":visible");if(!l||a&&void 0!==a.animation&&!1===a.animation)l&&n.hide(),this._triggerCloseEvent(t,a,o);else{n.fadeOut(50,this._triggerCloseEvent.bind(this,t,a,o))}}},{key:"_triggerCloseEvent",value:function(t,a,o){n("body").find(".zdialog--overlay:visible").length||this._hideDocumentScroll(!1),o||this._triggerEvent("close",t,a)}},{key:"_destroy",value:function(){var a=this.element,o=this._opts,l=this._content;this._closeModalDlg(null,void 0,!0),o.handleFocusNavigation&&t.FocusHandler.destroy(a),this.isCE||n(o.appendTo||"body").append(a.removeClass("zdialog zdialog--minimized zdialog--maximized"));var i=this._overlay;i&&i.length&&(i.remove(),this._overlay=void 0),o.title&&a.attr("title",o.title);var s="."+this.name;a.off(s).css({width:"auto",right:""}),o.resizable&&t.resizable(a).destroy(),this._canDrag()&&t.draggable(a).destroy(),this.isCE?(a.off(s),a.find(".zdialog__title").removeClass("zdialog__title"),a.find(".zdialog__content, .zdialog__commandbar, .zdialog__footer, .zdialog__footnote").removeClass("zdialog__content zdialog__commandbar zdialog__footer zdialog__footnote"),a.find(".zdialog__actiongroup, .zresizable__handle").remove(),a.find(".zbutton").off(s+" .zbutton").removeClass("zbutton zbutton--primary is-disabled")):(a.removeAttr("role aria-modal aria-expanded"),a[0].innerHTML=l[0].innerHTML),this._footer=this._titleBar=this._content=void 0,this._useParent=!0,t.$window.off("resize"+s)}},{key:"_createButtonPanel",value:function(){if(t.isEmpty(this._opts.commandBar)){for(var s,a=this._opts.buttons||[],o=[],n=a.length,l=0;l<n;l++)"object"===_typeof(s=a[l])&&o.push(this._createButton(s));this._data.commands=o}else this._createCommandBar();var r=this._opts.buttonsAlignment;this._data.alignClassName="right"===r?"":this._getAlignCls(r)}},{key:"_createButton",value:function(a){var o=a.id=a.id||this._getID(a,"dlgbutton"),l=o&&n("#"+o);l.length||(l=void 0),a.templateRender=!0;var i=a.action,s="function"==typeof i;if(a.click=s?i:this._clickHandler.bind(this),a=t.ZButton.getBtnProps(a,l),!s){var r=a.attrs||{};r["data-action"]=i,a.attrs=r}return a}},{key:"_clickHandler",value:function(a){var o=n(a.target).closest(".zbutton");if(!o.hasClass("is-disabled")||o.find(".zbutton__loader").length){var l=o.attr("data-action")||o[0].zbtndata&&o[0].zbtndata.action;l&&("CANCEL"===l||"CLOSE"===l?this._closeDialog(a,{button:o}):t._triggerFunction(l,o,[a,{button:o,options:t._getOpts(o)}])),this._triggerEvent("actionbuttonclick",a,{button:o})}}},{key:"_setBtnProps",value:function(){for(var d,c,_,u,a=this._data.commands,o=this.element.find(".zdialog__footer"),l=o.find(".zbutton"),s=l.length,r=0;r<s;r++)(c="Z-BUTTON"===(d=l[r]).tagName?d.getAttributes():a?a[r]:t._getOpts(d))&&(c.click||(_="function"==typeof c.action,c.click=_?c.action:this._clickHandler.bind(this)),d.zbtndata=c,u=n(d),c.attrs&&(delete c.attrs.class,u.attr(c.attrs)),this._handleFocus(u));o.off("click.zbutton keydown.zbutton").on("click.zbutton keydown.zbutton",function(a){var o="keydown"===a.type;if(!o||a.keyCode===t.keyCode.ENTER||a.keyCode===t.keyCode.SPACE){var l=n(a.target).closest(".zbutton"),i=l.length&&!l.hasClass("is-disabled")&&l[0].zbtndata;o&&a.preventDefault(),i&&i.click(a)}})}},{key:"_setFootnote",value:function(a){var o=this._opts;if(a=a||o.footer,this.isCE){var n=this.element.find("z-dialogfootnote").addClass("zdialog__footnote");n.length&&(this._data.footerEle=n[0])}else a&&""!==a.trim()&&(this._data.footer=o.isFooterHTMLEncoded?a:t.encodeHTML(a))}},{key:"_fetchAjaxCon",value:function(t){var a=this;n.ajax(t).success(function(t){a._data.content=t,a._render()})}},{key:"_getAlignCls",value:function(t){return this._ALIGNMENTS[t]}},{key:"_closeClickHandler",value:function(t){return this._resetPosition(this.element,!0),this._closeDialog(t,{closeButton:!0}),"keydown"!==t.type}},{key:"restore",value:function(t){this._performMinMax("Minimize",!0,t),this._performMinMax("Maximize",!0,t)}},{key:"_performMinMax",value:function(t,a,o){var n=this["is"+t+"d"](),l=t.toLowerCase(),i=l.replace("e","able"),s=-1;n||a||!this._opts[i]?n&&a&&(s=o):s=!1,-1!==s&&this["_toggle"+t]({},this["_"+l+"Button"],s)}},{key:"_toggleReverse",value:function(a,o,l,i,s,r){var d=o+"Restore",c=this._content,_=this;a||(this._findPosition(),this._findHeightWidth());var u={top:"",left:"",right:""};"maximize"===o&&(u.width="",u.height=""),this.element.css(u),this._buttonAnimateHandler(a,o,function(){"minimize"===o&&(!a&&(_.actualWidth=parseFloat(_.element.css("width")),_.actualHeight=_.element.height()),_._footer[a?"removeClass":"addClass"]("zh-dnone"),c[a?"removeClass":"addClass"]("zh-dnone")),_._updateClass(l,a),_._canDrag()&&t.draggable(_.element).setAttribute("disabled",!a);var u=_._opts[a?o+"ButtonLabel":o+"RestoreButtonLabel"]||_._getI18NText(a?o:d,_._opts.labels);if(_._changeIcon(u,a?o:d),a?(_.element.css(_._hasBottom?_.bottomRightPosition:_.actualPosition).css({width:_.actualWidth}),"maximize"===o?(c.height(_.actualHeight),c.css("width","")):"minimize"==o&&_.enableButton("maximize")):"maximize"===o?_._adjustContentSize():"minimize"==o&&(_.element.css({width:""}),_.disableButton("maximize")),"minimize"===o){_._overlay&&_._overlay[a?"addClass":"removeClass"]("zh-dnone");var p=_._overlay?_._overlay:n(_._opts.appendTo||"body");_._overlay&&a&&(t.zIndex+=1,p.css("zIndex",t.zIndex),_.element.appendTo(p)),_.element[a?"removeClass":"addClass"]("zdialog--minimized"),a||_._resetPosition(_.element),_._overlay&&_._hideDocumentScroll(!!a),a&&_._triggerActiveElement()}i&&_._triggerEvent(a?"restore":o,r,{from:o}),"maximize"===o&&_._triggerActiveElement(),s&&s()})}},{key:"_adjustContentSize",value:function(){var o=this._content,n=this.element,l=n.find(".zdialog__header"),i=n.find(".zdialog__footer"),s=l.length?l.outerHeight(!0):0,r=i.length?i.outerHeight(!0):0,d=this._footer.length?this._footer.outerHeight(!0):0,c=a(t.windowObject.height-(s+r+d+parseInt(o.css("padding-top"))+parseInt(o.css("padding-bottom"))+parseInt(n.css("border-top-width"))+parseInt(n.css("border-bottom-width")))),_=t.windowObject.width-parseInt(o.css("padding-left"))-parseInt(o.css("padding-right"))-parseInt(o.css("margin-right"))-parseInt(o.css("margin-left"))-parseInt(n.css("border-left-width"))-parseInt(n.css("border-right-width"));o.width(_),o.height(c)}},{key:"_triggerActiveElement",value:function(){var t=this._activeElement||"";t.length||(t=this.element.find(".zdialog__header")),t.trigger("focus"),this._activeElement=void 0}},{key:"_toggleRestore",value:function(t,a,o,n){var l=this.isMaximized(),i=this.isMinimized();l||"maximize"===n?this._toggleReverse(l,"maximize","zdialog--maximized",o,void 0,t):(i||"minimize"===n)&&this._toggleReverse(i,"minimize","zdialog--minimized",o,void 0,t),a&&a.length&&a[0].id===this._opts.id+"minimize"&&l&&this._toggleReverse(i,"minimize","zdialog--minimized",o,void 0,t)}},{key:"_changeIcon",value:function(t,a){var o=this._data.titleBarButtons,l="restore",s="minimize"===a||"maximize"===a?a:"restore",r=this;"minimizeRestore"===a?l="minimize":"maximizeRestore"==a&&(l="maximize"),l=this._opts.id+l;var c,_,d=0;o.forEach(function(a){o[d].mainElement=r._actionGroup.find("#"+a.id),a.id===l&&(_=r._actionGroup.find("#"+l),o[d]=r._updateBtnInfo(s,_.length&&_),o[d].mainElement=void 0,(c=o[d]).title=t,c.actionName=s,c.zdaction="restore"===s?"maximize":s),d++}),this._render(),c.mainElement&&n(c.mainElement).attr("data-zdaction",c.actionName)}},{key:"_buttonAnimateHandler",value:function(t,a,o){var n=this._opts.animation;n[a]?this._animateAction(n,t?a+"Restore":a,o):o()}},{key:"_minMaxClick",value:function(t,a,o){return this["_toggle"+t[0].toUpperCase()+t.substring(1)](a,o,!0),"restore"===t&&this._resetPosition(this.element,!0),!1}},{key:"_resetPosition",value:function(a,o){t._minArr=t._minArr||[];var l=t._minArr.indexOf(a);o?-1<l&&t._minArr.splice(l,1):t._minArr.push(a);for(var c,_,u,s=t._minArr.length,r=this._opts.rtl?"left":"right",d=s-1;0<d;d--)_=n(t._minArr[d]),u=n(t._minArr[d-1]),c=parseFloat(u.css(r))+u.outerWidth(),_.css(r,c);n(t._minArr[0]).css(r,0)}},{key:"_titleBarClickHandler",value:function(t){if(!n(t.target).closest(".zdialog__actiongroup").length){var a=this.isMaximized()||this.isMinimized()?"restore":this._opts.maximizable?"maximize":this._opts.minimizable?"minimize":void 0;a&&this._toggleRestore(t,void 0,!0,a),"restore"===a&&this._resetPosition(this.element,!0)}}},{key:"minimize",value:function(){this._performMinMax("Minimize")}},{key:"_toggleMinimize",value:function(t,a,o){this._toggleRestore(t,a,o,"minimize")}},{key:"maximize",value:function(){this._performMinMax("Maximize")}},{key:"_toggleMaximize",value:function(t,a,o){this._toggleRestore(t,a,o,"maximize")}},{key:"name",get:function(){return"zdialog"}},{key:"attrs",get:function(){return{constructDialog:!0,buttonsAlignment:"right",closeButton:!0,closeOnEscKey:!0,closeSVGIconId:null,closeButtonLabel:null,closeOnOverlayClick:!1,content:null,draggable:!0,zdraggable:!0,height:null,isContentHTMLEncoded:!1,isFooterHTMLEncoded:!1,isTitleHTMLEncoded:!1,overlayClassName:"",maximizable:!1,maximizeIconClass:null,maximizeButtonLabel:null,maximizeRestoreIconClass:null,maximizeRestoreButtonLabel:null,maximizeRestoreSVGIconId:null,maximizeSVGIconId:null,minimizable:!1,minimizeIconClass:null,minimizeButtonLabel:null,minimizeRestoreIconClass:null,minimizeRestoreButtonLabel:null,minimizeRestoreSVGIconId:null,minimizeSVGIconId:null,position:"center",restoreIconClass:null,restoreSVGIconId:null,title:null,type:"modal",autoOpen:!1,width:null,defaultActionButton:".zbutton--primary",excludeFocus:null,handleFocusNavigation:!0,submitOnEnter:!1}}},{key:"props",get:function(){return{closeIconClassName:null,maximizeIconClassName:null,minimizeIconClassName:null,minimizeRestoreIconClassName:null,maximizeRestoreIconClassName:null,restoreIconClassName:null,animation:!1,buttons:null,footer:"",resizable:{},labels:{minimize:"Minimize",maximize:"Maximize",minimizeRestore:"Restore",maximizeRestore:"Restore",close:"Close"},commandBar:{}}}},{key:"_ALIGNMENTS",get:function(){return{left:"zdialogfooter--invert",right:"",center:"zh-center"}}},{key:"EVENTS",get:function(){return["drag","dragstart","dragend","resize","resizestart","resizeend","minimize","maximize","close","open","beforeclose","beforeopen","restore","actionbuttonclick"]}},{key:"resizableDefaults",get:function(){return{minHeight:300,minWidth:300,maxHeight:!1,maxWidth:!1,boundary:"viewport",directions:"s,e,se"}}}]),l}();t.registerComponent("ZDialog",S),function(t){var a=t.zdialog.Templates,o=t.zbutton.Templates.container;a.container=function(t){return ZT.html(zc0tO83(),t.text,t.id,t.role,t.className,t.children&&a.children(t))},a.children=function(t){return ZT.html(zc0tO84(),t.titleEle||t.title&&ZT.html(zc0tO85(),ZT.customHTML(t.title)),t.titleBarButtons&&ZT.html(zc0tO86(),t.titleBarButtons.map(function(t){return o(t)})),t.contentEle||ZT.html(zc0tO87(),t.content),t.actionBar||t.buttons&&ZT.html(zc0tO88(),t.alignClassName,t.cols?a.commandBarCol(t.cols):t.commands&&t.commands.map(function(t){return o(t)})),t.footerEle||t.footer&&ZT.html(zc0tO89(),ZT.customHTML(t.footer)))},a.commandBarCol=function(t){return ZT.html(zc0tO90(),t.left&&ZT.html(zc0tO91(),t.cname,t.left.className||"",t.left.buttons.map(function(t){return o(t)})),t.center&&ZT.html(zc0tO92(),t.cname,t.center.className||"",t.center.buttons.map(function(t){return o(t)})),t.right&&ZT.html(zc0tO93(),t.cname,t.right.className||"",t.right.buttons.map(function(t){return o(t)})))}}(ZPeopleComponents),t.$document.on("scroll.zpopover",function(a){t.openedPopover&&t.openedPopover._opts.closeOnScroll&&t.openedPopover.element.is(":visible")&&t.openedPopover.close(a)});var T=function(a){function o(){return _classCallCheck(this,o),_possibleConstructorReturn(this,_getPrototypeOf(o).apply(this,arguments))}return _inherits(o,t.CoreComponent),_createClass(o,[{key:"_init",value:function(t,a){var o=a.content||"",l="callout"===a.displayType;this._forElement=n(a.forElement),t.attr({"aria-haspopup":"true","aria-expanded":"false",tabindex:t.attr("tabindex")||0}),/^(top|bottom|right|left|top-left|top-right|bottom-left|bottom-right|auto|right-bottom|right-top|left-bottom|left-top|at-cursor)$/.test(a.position)||(a.position="bottom"),this._correctPosition();var i=this._data;i.closeButton=a.closeButton||"modal"===a.type,(a.title||this.isCE||i.closeButton||a.detachable)&&this._setTitleBar(),this._data.callout=l,this._isAjaxContent=a.progressIndicator=o.URL,i.closeButton&&this._handleClose(),this._setContent(o);var s=n(a.appendTo);s.length&&t.appendTo(s)}},{key:"_setContent",value:function(a,o){var n=this._opts,l=this._data,i=this.element;if(!this._isAjaxContent&&a&&(n.content=n.isContentHTMLEncoded?a:t.encodeHTML(a)),!o){var s=this.isCE?i.find("z-pocontent").addClass("zpopover__content"):i[0].childNodes;s.length&&(this.isCE?l.contentEle=s[0]:l.content=_toConsumableArray(s))}(l.content||l.contentEle)&&!o||(l.content=n.content),l.isContentString="string"==typeof l.content}},{key:"_postRender",value:function(t,a){a.detachable&&this._handleDrag(!0);var o=t.find.bind(t);this._titleBar=o(".zpopover__title"),this._contentEle=o(".zpopover__content"),this._data.className+=" zpopover","modal"===a.type&&this._createOverlay(),this._data.closeButton&&this._handleClose(null,!0)}},{key:"_bindEvents",value:function(){this._opts.closeOnEsc&&this._addEvents({keydown:"keydown"})}},{key:"_keydownHandler",value:function(a){a.keyCode===t.keyCode.ESCAPE?(this.close(a),a.stopPropagation()):this._opts.wrapAroundKeyboardNavigation&&a.keyCode===t.keyCode.TAB&&a.stopPropagation()}},{key:"open",value:function(a){var o=this,l=this._opts,i=this.element,s=this._data;if(a=a||{},l.toggle&&"true"===i.attr("aria-expanded"))this.close();else{var r=a.forElement||this._opts.forElement;if(r&&(this._forElement=n(r)),t.openedPopover=this,l.detachable&&(s.closeButton=l.closeButton||"modal"===l.type,s.callout="callout"===l.displayType,this._setTitleBar(!0)),"modal"!==l.type&&t.bindDocumentEvents&&l.closeOnBodyClick&&this._bindDocEvents(i),this._dispatchEvent("beforeopen",{},{forElement:this._forElement})){var d=l.delay;d?(void 0!==d.openAfter&&(clearTimeout(this._openTimer),this._openTimer=setTimeout(function(){o._preprocessEle(a),o._openHandler()},d.openAfter)),void 0!==d.closeAfter&&this._autoCloseEle()):(this._preprocessEle(a),t.animationHandler({action:"open",animation:l.animation,callback:this._openHandler.bind(this),element:i,ctype:this.name}))}this._isAjaxContent&&this._makeRequest()}}},{key:"_bindDocEvents",value:function(a){t.bindDocumentEvents({element:a,forElement:this._forElement,ctype:this.name,closeMethodName:"close",closeEvent:"close"})}},{key:"_autoCloseEle",value:function(){var t=this,a=this._opts.delay,o=a.openAfter?a.openAfter+a.closeAfter:a.closeAfter;clearTimeout(this._closeTimer),this._closeTimer=setTimeout(function(){return t.close()},o)}},{key:"_preprocessEle",value:function(t){this._overlay&&(this._overlay.show(),this._forElement.addClass("zpopover--target")),this._display().attr("aria-expanded",!0),this._fixDimensions(),this._positionEle(t)}},{key:"_openHandler",value:function(){var a=this;this._opts.animation||this._display().attr("aria-expanded","true"),this._opts.focusOnOpen&&(this._opts.wrapAroundKeyboardNavigation&&t.FocusHandler?t.FocusHandler.init(this.element,".zpopover__close"):this._dispatchEvent("beforefocus",{},this.element)&&(clearTimeout(this._openTimeout),this._openTimeout=setTimeout(function(){return a.element.focus()},100))),this._updatePopupList(!0),this._dispatchEvent("open",{},{forElement:this._forElement})}},{key:"_fixDimensions",value:function(){var t=this._opts;t.width&&this.element.css("width",t.width+"px");var l,a=this._contentEle,o=this.element,n=o.find(".zpopover__title");return t.height&&a&&(l=t.height-(n.length?n.outerHeight(!0):0)-(parseInt(a.css("padding-top"))+parseInt(a.css("padding-bottom")))-(parseInt(o.css("border-top-width"))+parseInt(o.css("border-bottom-width"))),a.height(l)),l}},{key:"close",value:function(a){clearTimeout(this._openTimer),this.element.is(":visible")&&this._dispatchEvent("beforeclose",a)&&(this._opts.delay?this._closeHandler():t.animationHandler({action:"close",callback:this._closeHandler.bind(this),element:this.element,animation:this._opts.animation,ctype:this.name}))}},{key:"_closeHandler",value:function(){t.openedPopover=void 0,this._display(!0).attr("aria-expanded","false"),this._overlay&&(this._overlay.hide(),this._forElement.removeClass("zpopover--target")),this._updatePopupList(),this._dispatchEvent("close")}},{key:"_arrowCallback",value:function(t,a){this.element.removeClass("zpopover--top zpopover--bottom zpopover--left zpopover--right").addClass("zpopover--"+a)}},{key:"_positionEle",value:function(){var t=this._opts;t.offset?this.element.css(t.offset):"page-center"!==t.position&&this._setPosition.apply(this,arguments)}},{key:"_correctPosition",value:function(){var t=this._opts.displayType,a=this._opts.position;this._position="box"===t?-1<a.indexOf("-")?a:"top"===a||"bottom"===a?a+"-left":"auto"===a?"bottom-left":a:"auto"===a?"bottom":a}},{key:"repositionPopover",value:function(){var t=this.element;t&&(!t.is(":visible")&&this._display(),this._positionEle())}},{key:"_destroy",value:function(){clearTimeout(this._openTimeout),clearTimeout(this._openTimer),clearTimeout(this._closeTimer),this._titleBar=this._forElement=this._contentEle=null,this._overlay&&this._overlay.remove(),this._overlay=void 0}},{key:"_getPosition",value:function(a){var r,l=this._opts,i=a.offsetToParent||l.offsetToParent,s=this.element.find(".zpopover__pointer");if(r=!!s.length&&s,t.Position){var d=a&&(a.event||a.forElement)||this._forElement;return t.Position.get(d,this.element,{rtl:l.rtl,direction:this._position,within:i?n(d[0].offsetParent):null,positionAlterable:l.positionAlterable,arrow:{element:r,callback:this._arrowCallback.bind(this),margin:{left:-1,top:-1}}})}}},{key:"_setPosition",value:function(t){var a=this._opts,o=this.element.find(".zpopover__pointer"),n=this._getPosition(t),l=a.margin;n&&(l&&(n.elementPosition=this._getCorrectedPosition(n.elementPosition),o.length&&(n.arrowPosition=this._getCorrectedPosition(n.arrowPosition,!0))),this.element.css(n.elementPosition),o.length&&o.css(n.arrowPosition))}},{key:"_getCorrectedPosition",value:function(t,a){var l,i,o=this._opts.margin,n=a?-1:1;if("number"==typeof o)l=t.top+n*o,i=t.left+n*o;else{var s=o.left;i=s?t.left+n*s*(this._opts.rtl?-1:1):t.left,l=o.top?t.top+n*o.top:t.top}return t.top=0>l?t.top:l,t.left=0>i?t.left:i,t}},{key:"_createOverlay",value:function(){this._overlay=void 0,n("body").find(".zpopover--overley").remove(),"modal"===this._opts.type&&(this._overlay=n("<div class='zpopover--overley' tabindex='1'></div>").appendTo("body").hide(),this._addEvents({keydown:"overlay"}))}},{key:"_overlayHandler",value:function(a){a.keyCode===t.keyCode.TAB&&a.preventDefault()}},{key:"_setTitleBar",value:function(a){var o=this._opts,l=this._data;l.closeButton&&this._handleClose();var i=o.title||"";if(this.isCE){var s=this.element.find("z-potitle");l.titleEle=s.length?s.addClass("zpopover__text")[0]:void 0}l.titleEle||(i=i instanceof n||"#"===i[0]||"."===i[0]?n(i)[0]:this._opts.isTitleHTMLEncoded?i:t.encodeHTML(i)),"string"==typeof i?l.title=i:l.titleEle=i;var r=!!l.titleEle||!!i,d="";r||l.closeButton||!o.detachable||(r=!1,d="zpopover__draggablearea"),l.titleBar=r||l.closeButton||o.detachable,l.headingClassName=d,a&&(this._render(),this._titleBar=this.element.find(".zpopover__title"),this._handleDrag&&this._handleDrag(o.detachable),l.closeButton&&this._handleClose(!0,!0))}},{key:"_handleClose",value:function(){var t=this,a=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],o=1<arguments.length?arguments[1]:void 0,n=this.element.find(".zpopover__close");if(a){var l=this._opts;this._data.closeButton={title:l.closeButtonLabel||this._getI18NText("close"),className:"zpopover__close",defaultIconClassName:"zpopover__icon",iconClassName:l.closeIconClassName,SVGIconId:l.closeSVGIconId,templateRender:!0,mainElement:n[0],defaultSVGIconId:"zc__svg--close zbutton__svg",customAttributes:{tabindex:-1}}}o&&n.on("click."+this.name,function(a){t.close(a)})}},{key:"_handleDrag",value:function(a){var o=this.element,n=this._opts,l=this.element.find(".zpopover__title");a?!o.data("zdraggable")&&t.draggable(o,{handle:l,container:"window",cursor:"default",start:this._onDragStart.bind(this),drag:this._onDrag.bind(this),end:this._onDragEnd.bind(this)}):(t.draggable(o).destroy(),l.removeClass(this._data.headingClassName),this._dragged=this._dragStart=this._dragEnd=!1),this._data.closeButton=this._dragEnd||n.closeButton||"modal"===n.type,this._data.callout="callout"===n.displayType}},{key:"_onDragEnd",value:function(){this._dragEnd=!0,this._dragStart&&this._dragged&&(this._data.headingClassName="",this._setTitleBar(this._data.closeButton=!0),t.unBindDocumentEvents(this.element)),this._fixDimensions(),this._dragged&&(this._dragged=void 0,this._dispatchEvent("dragend"))}},{key:"_onDrag",value:function(){this._dragged=!0,this._dispatchEvent("drag")}},{key:"_onDragStart",value:function(){this._data.closeButton=!(!this._opts.closeButton&&"modal"!==this._opts.type&&!this._dragEnd||this._data.headingClassName)&&this._data.closeButton,this._dragEnd=!1,this._data.callout=!1,this._render(),this._dragStart=!0,this._dispatchEvent("dragstart")}},{key:"_makeRequest",value:function(){var a=this._opts.content||{},o=this,l=this._tmpOpts;l.progressIndicator=t._getIconInfo({defaultIconClassName:"zpopover__icon h-loading",iconClassName:l.progressIndicatorIconClassName,SVGIconId:l.progressIndicatorSVGIconId,defaultSVGIconId:"zc__svg--loader zpopover__svg zpopover__loader zeffects--rotate"}),this._updData("zpopover--loader","container"),n.ajax({dataType:a.dataType,type:a.type,URL:a.URL,success:function(t){o._ajaxComplete(!0,t),o._dispatchEvent("contentload")},error:function(){o._ajaxComplete(!1)}})}},{key:"_ajaxComplete",value:function(a,o){var l=this._opts.content,i=a?"success":"fail";this._content="function"==typeof l[i]?l[i](o):o,this._contentEle.append(this._opts.isContentHTMLEncoded?this._content:t.encodeHTML(this._content)),n("#zpopover--loader").remove(),this._fixDimensions(),this._positionEle()}},{key:"_setAttribute",value:function(a,o){var l=this.element,i=this._opts,s=this._data;if(i[a]=o,"height"===a)l.height(i.height),this._fixDimensions();else if("width"===a)l.width(i.width);else if("position"===a)this._correctPosition(),l.is(":visible")&&this._positionEle();else if("closeSVGIconId"===a||"closeIconClassName"===a)this._handleClose(),this._setBtnValue(this._data.closeButton,this._data.closeButton);else if("content"===a){if(this._setContent(o,!0),this.isCE&&l.find("z-pocontent").length)return void l.find("z-pocontent").html(this._data.content);this._isAjaxContent="object"===_typeof(o)&&!(o instanceof n),this._domChanged=!0}else if(-1<["title","closeButton","type","detachable","isTitleHTMLEncoded"].indexOf(a)){if("title"===a&&this.isCE){var r=l.find("z-potitle");if(r.length)return void r[this._opts.isTitleHTMLEncoded?"html":"text"](o)}("closeButton"===a||"type"===a)&&(this._data.closeButton=i.closeButton||"modal"===o,"type"===a&&this._createOverlay()),"detachable"===a&&this._handleDrag(o),this._setTitleBar(!0)}else if("displayType"===a)this._correctPosition(),s.callout="callout"===o,this._domChanged=!0;else if("margin"===a&&l.is(":visible")){var d=l[0],c=this._getCorrectedPosition({left:+d.offsetLeft,top:+d.offsetTop});l.css(c);var _=this.element.find(".zpopover__pointer");_.length&&(c=this._getCorrectedPosition({left:+_[0].offsetLeft,top:+_[0].offsetTop},!0),_.css(c))}else"closeOnEsc"===a?o?this._bindEvents():l.off("keydown."+this.name):"forElement"===a?this._forElement=n(o):"closeOnBodyClick"===a?o&&"modal"!==i.type?this._bindDocEvents(l):t.unBindDocumentEvents(l):"offset"===a&&this.element.css(o)}},{key:"name",get:function(){return"zpopover"}},{key:"attrs",get:function(){return{type:"modeless",title:"",displayType:"callout",position:"auto",closeButton:!1,closeOnBodyClick:!0,closeOnEsc:!0,closeOnScroll:!1,toggle:!1,positionAlterable:!0,removeOnClose:!1,detachable:!1,height:null,width:null,closeSVGIconId:null,closeIconClass:null,progressIndicatorIconClass:null,progressIndicatorSVGIconId:null,wrapAroundKeyboardNavigation:!1,forElement:null,content:null,appendTo:null,focusOnOpen:!0,isContentHTMLEncoded:!1,isTitleHTMLEncoded:!1}}},{key:"props",get:function(){return{closeIconClassName:null,progressIndicatorIconClassName:null,innerHTML:null,margin:null,offset:null,delay:null,animation:null,messages:{close:"Close"}}}},{key:"EVENTS",get:function(){return["beforeopen","open","beforeclose","close","dragstart","drag","dragend","beforefocus","contentload"]}}]),o}();t.registerComponent("ZPopover",T),function(t){t.zpopover.Templates.children=function(a){return ZT.html(zc0tO94(),a.titleBar&&ZT.html(zc0tO95(),a.headingClassName,a.titleEle||a.title&&ZT.html(zc0tO96(),ZT.customHTML(a.title)),a.closeButton&&ZT.html(zc0tO97(),t.createButton(a.closeButton))),a.contentEle||ZT.html(zc0tO98(),a.progressIndicator?ZT.html(zc0tO99()):a.isContentString?ZT.customHTML(a.content):a.content),a.callout&&ZT.html(zc0tO100()))}}(ZPeopleComponents);var w=function(a){function o(){return _classCallCheck(this,o),_possibleConstructorReturn(this,_getPrototypeOf(o).apply(this,arguments))}return _inherits(o,t.CoreComponent),_createClass(o,[{key:"_init",value:function(t,a){this._fromInit=!0,this._useParent=!0;var o=this._data;this._id=t[0].id||this._getID();var l=o.tabHeadDOM=this._getTabHead(),i=o.tabBodyDOM=this._getTabBody(),s=o.tabHeadClass="ztab__head",r=o.tabBodyClass="ztab__body";if(l&&n(l).addClass(s).attr("role","tablist"),i){var d=n(i).addClass(r).children(this._SELECTORS.TABCONTENT);d.hide(),this._addAttrsToTabContent(d)}this._setContentType(o,a),this._initTabs(o,a),o.widgetRender=!0}},{key:"_addAttrsToTabContent",value:function(t){return t.addClass("ztab__content").attr("role","panel"),t}},{key:"_preRender",value:function(t){return this._addedByComponent=!0,this._data.widgetRender&&((t=this._data).widgetRender=!0,this._setRenderData(t,this._opts)),t}},{key:"_bindEvents",value:function(){this._keydownHandler&&this._addEvents({keydown:"keydown"},this.element)}},{key:"_bindTabHead",value:function(){var a=n(this._data.tabHeadDOM).children();this._removeEvents("",a),this._addEvents({switch:"hover"===this._opts.openOn?"mouseenter":"click"},a)}},{key:"_switchHandler",value:function(t){var a=n(t.currentTarget);t.preventDefault(),this._selectTab(a,t)}},{key:"_deselectTab",value:function(t){var a=this._getTabData(t||this._activeTab);if(a){var o=a.actualData;this._activeTab===a.element&&(this._activeTab=!1,this._opts.activeTab="none"),this._updateSelection(o,!1),this._display(this._getPanel(o),!1)}}},{key:"_getPanel",value:function(t){return n("#"+t.panelId,this.element)[0]}},{key:"_updateSelection",value:function(t){var a=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],o=n(t.element);a=a||null,t.active=a,o[a?"addClass":"removeClass"]("is-selected"),o.attr({"aria-selected":a,"data-selected":a})}},{key:"_selectTab",value:function(t,a,o){if("none"===t)return this._deselectTab();var l,n=this._getTabData(t);if(n){var i=n.actualData;if(!i.active&&this._trigger("beforeswitch",n,a)&&!i.hidden&&!i.disabled){this._deselectTab(null,a),o||this._focusTab(i.element),this._opts.activeTab=this._activeTab=i.element,this._updateSelection(i,!0);var s=this._loadPane(n);this._display(s,!0),this._trigger("switch",n,a),l=!0}return this._trigger("tabclick",n,a),l}}},{key:"_focusTab",value:function(t){t.querySelector("a").focus()}},{key:"_toArr",value:function(t){return Array.isArray(t)?t:[t]}},{key:"_trigger",value:function(t,a,o,l){return!!this._fromInit||((l=l||{}).activeTab=this._opts.activeTab,a&&(l.tab=a.element,l.tabData=n.extend(!0,{},a.actualData),l.tabData.element=null),this._dispatchEvent(t,o,l,void 0,!!o))}},{key:"_animate",value:function(a,o,l,i){var s=this,r=function(){s._display(a[0],"hide"!==l),i&&i()};if(o&&t.animationHandler&&!n.isEmptyObject(o)){var d={element:a,action:l,animation:o,callback:r,ctype:this.name};t.animationHandler(d)}else r()}},{key:"_setRenderData",value:function(t,a){t.alwaysSetAttrs=!0;var o=t.position=a.tabPosition;t.isVertical=/^(left|right)$/.test(o),t.isBottom=/^(right|bottom)$/.test(o);var n=a.tabAlignment;t.isVertical?!/^(top|bottom|middle)$/.test(n)&&(n="top"):!/^(left|right|center)$/.test(n)&&(n="left"),t.alignment=n,this._setWdHt(t,a)}},{key:"_renderTabs",value:function(){var t=this._data;this._addedByComponent=!0,t.tabHeadDOM&&(t.tabs.forEach(function(t){t.actualData.userEle||(t.element=null)}),this._render(t.tabs,"tabs",t.tabHeadDOM,!0)),this._addedByComponent=!1,this._setTabEle(t.tabs),this._bindTabHead()}},{key:"_setTabEle",value:function(t){t.forEach(function(t){var a=t.element,o=t.actualData;if(!a){a=n("#"+t.id);var l=t.customAttrs;l&&a.attr(l),t.element=o.element=a[0]}})}},{key:"_setInitial",value:function(){var t=this._opts.activeTab;"none"!==t&&((t=t||this._initialTab||this._data.tabs.find(function(t){return!t.hidden&&!t.disabled}))?this._selectTab(t,null,this._fromInit):this._opts.activeTab="none")}},{key:"_postEachRender",value:function(){var t=this._data;t.widgetRender&&(t.widgetRender=!1,t.tabHeadDOM=this._getTabHead(),t.tabBodyDOM=this._getTabBody(),this._renderTabs(),this._setClassName(t,this._opts),this._setPanelListHt(),this._fromInit&&(this._setInitial(),this._fromInit=!1,this._trigger("init"))),this._addedByComponent=!1}},{key:"_getTabHead",value:function(){return this._data.tabHeadDOM||this.element[0].querySelector(this._SELECTORS.TABHEAD)}},{key:"_getTabBody",value:function(){return this._data.tabBodyDOM||this.element[0].querySelector(this._SELECTORS.TABBODY)}},{key:"_setPanelListHt",value:function(){var t=this._getTabBody();t.style.height="",this._data.isVertical||(t.style.height="calc(100% - "+n(this._getTabHead()).outerHeight(!0)+"px")}},{key:"_setWdHt",value:function(t,a){var o=this.element,n=this._getValidSize(a.height),l=this._getValidSize(a.width),i=o.attr("style"),r={};i&&i.split(";").forEach(function(t){t=t.replace(/;/g,"").split(":"),r[t[0]]=t[1]}),n&&(r.height=n),l&&(r.width=l),t.attrs={style:this._getStyle(r)}}},{key:"_setClassName",value:function(t,a){var o={top:"ztabhead--top",bottom:"ztabhead--bottom",middle:"ztabhead--middle",right:"ztabhead--right",left:"ztabhead--left",center:"ztabhead--center"};t.className=this._getClassName(t,a);var l=n(this._getTabHead()),i=t.alignment,s=this._oldAlignment;s&&l.removeClass(o[s]),l.addClass(o[i]),this._oldAlignment=i}},{key:"_getClassName",value:function(t,a){var o={top:"ztabpanel--top",bottom:"ztabpanel--bottom",right:"ztabpanel--right",left:"ztabpanel--left",icon:"ztabpanel--icononly"};return"ztabpanel "+(a.className||a.zclassName||"")+(a.rtl?" zh-rtl":"")+(o[a.tabLabelType]||"")+(t.isVertical?" ztabpanel--vertical":"")+" "+(o[t.position]||"")+" ztabpanel--"+t.position+t.alignment}},{key:"_setContentType",value:function(t,a){var o=a.tabLabelType;t.hasIcon=t.hasText=!1,t.isCustom="custom"===a.tabLabelType,t.isCustom||(-1<o.indexOf("icon")&&(t.hasIcon=!0),(!t.hasIcon||-1<o.indexOf("text"))&&(t.hasText=!0))}},{key:"_initTabs",value:function(t,a,o){var n=this,l=[],i=this._SELECTORS;t.tabHeadDOM&&!o&&(l=_toConsumableArray(t.tabHeadDOM.querySelectorAll(i.TABITEM+":not([data-custom=true]):not([data-zadded-by-template=true])")).map(function(o){return n._getTabEleData(o,t,a)}));var d,r=a.tabs;r&&r.length&&(r=JSON.parse(JSON.stringify(r)),(d=l).push.apply(d,_toConsumableArray(r.map(function(t){return n._setTabData(t)}))));a.lazyLoadContent||l.forEach(function(t){return n._loadPane(t)}),t.tabs=l}},{key:"_getValidSize",value:function(t){return t&&t+(isNaN(t)?"":"px")}},{key:"_setTabData",value:function(t,a){var r,d,c,o=this._data,n=this._opts,l=(t=this._getCompleteTabData(t)).element,i=t.hidden||null,s=t.disabled||null;!t.active||i||s||(this._initialTab=t),this._fromInit&&(t.active=!1),o.isCustom?c=t.zinnerHTML||t.innerHTML||t.labelHTML||t.label:(o.hasText&&(r=this._encodeLabel(t.label||t.labelHTML||"")),o.hasIcon&&this._setIconData(t,d={}));var _=t.style||"";i&&(_+=";display:none");var u=this._getValidSize(t.width);u&&(_+=";width:"+u);var p={id:t.id,role:"tab",tabindex:-1,className:"ztab "+(s?" is-disabled ":"")+(t.active?"is-selected ":"")+(t.zclassName||t.className||"")+" "+(t.origClass||""),label:r,icon:d,customContent:c,panelId:t.panelId,hidden:i||null,disabled:s||null,active:t.active||null,customAttrs:t.customAttributes,element:l,linkTag:t.linkTag,style:_,actualData:t,title:"icon"===n.tabLabelType?t.label:null};return a?Object.assign(a,p):a=p,this._updateTabEleAttrs(a),a}},{key:"_encodeLabel",value:function(a){return a&&(this._opts.isTabLabelHTMLEncoded?a:t.encodeHTML(a))}},{key:"_getCompleteTabData",value:function(t){if(!t.zdone){"string"==typeof t&&(t={label:t});var a=t.id;a||(a=this._getID(null,this._id+"-tab")),t.id=a;var o=t.panelId;o||(o=this._getID(null,this._id+"-tabcontent")),o=t.panelId=o.replace(/^#/,"")}return t.zdone=!0,t}},{key:"_getTabEleData",value:function(a){var o=t._getOpts(a),n=a.querySelector("a"),l=o.label,i=o.innerHTML||n&&n.innerHTML||a.innerHTML;return n&&(n.textContent="",o.panelId=o.panelId||n.getAttribute("href")),this._setTabData(Object.assign(o,{id:a.id,element:a,label:l,hidden:o.hidden||"none"===a.style.display,labelHTML:!l&&i,innerHTML:i,linkTag:n,userEle:!0,origClass:a.getAttribute("class")}))}},{key:"_display",value:function(t){var a=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];t.style.display=a?"":"none"}},{key:"_updateTabEleAttrs",value:function(t){this._addedByComponent=!0;var a=t.element;if(a){var o=t.hidden,l=t.disabled,i={};Object.assign(i,{title:t.title,id:t.id,role:"tab",tabindex:-1,class:t.className,"data-panel-id":t.panelId,"data-hidden":o,"aria-hidden":o,"data-disabled":l,"aria-disabled":l,style:t.style}),n(a).attr(Object.assign(i,t.customAttrs||{})),this._updateTabContent(t)}this._addedByComponent=!1}},{key:"_updateTabContent",value:function(t){var a=t.linkTag;a&&this._render(t,"anchorContent",a,!0),this._render(t,"tabContent",t.element,!0)}},{key:"_getTabData",value:function(t){if(this._isNotNull(t)){var o,a=_typeof(t);if("string"===a||"number"===a){if(!isNaN(t))return o=this._data.tabs[t];t=n(t,this.element)}if(t instanceof n&&(t=t[0]),t){if(t.nodeType)o=this._data.tabs.find(function(a){return t.id===a.id});else if("object"===_typeof(t))return t;return o}}}},{key:"_navNextPrevTab",value:function(t,a,o){var n=this._data.tabs;if(n.length){var i,l=t?-1:1;void 0===a?a=(i=this._getTabData(this._activeTab))?n.indexOf(i):-1:a-=1*l;var d,s=n.length-1,r=a;do{0>(r+=1*l)&&(r=s),r>s&&(r=0),d=(i=n[r]).actualData}while(r!==a&&(d.disabled||d.hidden));r!==a&&this._selectTab(i,o)}}},{key:"_getNextPreviousTab",value:function(t){var a=this._getTabs(),o=a.index(this._opts.activeTab),l=n(a[o])[t?"prevAll":"nextAll"]("".concat(this._SELECTORS.TABITEM,":not(.").concat(this._CLASSES.DISABLED,"):visible:first"));return(l=l.length?l:a.filter(":not(."+this._CLASSES.DISABLED+"):visible")).filter(t?":last":":first")}},{key:"_loadPane",value:function(a){if(a){var o=a.actualData,l=this._getPanel(o),i=!1;l||(l=n(document.createElement(this._SELECTORS.TABCONTENT)),this._addAttrsToTabContent(l),(l=l[0]).id=o.panelId,i=!0);var s=o.panelContent;return s&&(!o.contentLoaded||!this._opts.cacheContent&&s.URL)&&(o.contentLoaded=!0,s instanceof n&&(s=s[0]),s&&(s.nodeType?l.innerHTML=s.outerHTML:"string"==typeof s?l.innerHTML=o.isPanelContentHTMLEncoded?s:t.encodeHTML(s):s.URL&&this._initAjaxLoad(o,s.URL,s.queryParam,l,s.success,s.errorMessage,s.fail))),i&&this._data.tabBodyDOM.appendChild(l),l}}},{key:"_setAttribute",value:function(t,a){"activeTab"===t?this._selectTab(a):this._setAdvAttribute(t,a)}},{key:"openTab",value:function(t){return this._selectTab(t),this.getActiveTab()}},{key:"openNextTab",value:function(){return this._navNextPrevTab(),this.getActiveTab()}},{key:"openPreviousTab",value:function(){return this._navNextPrevTab(!0),this.getActiveTab()}},{key:"getActiveTab",value:function(){return this._opts.activeTab}},{key:"deselectAllTabs",value:function(){this._deselectTab()}},{key:"_setIconData",value:function(a,o){t._getIconInfo(a.iconClassName||a.iconClass,a.SVGIconId,null,"ztabpanel__icon",o)}},{key:"_initAjaxLoad",value:function(t,a,o,l,i,s,r){var d=this,c=arguments;n.ajax({url:a,data:o,success:function(a){"function"==typeof i&&(a=i.call(t.element,a)),l.innerHTML=a},error:function(){var a;"function"==typeof r&&(a=r.call(c)),t.contentLoaded=!1,l.innerHTML=a||s||d._getI18NText("serverError")}})}},{key:"_destroy",value:function(){var t=this,a=this._data,o=n(a.tabHeadDOM),l=n(a.tabBodyDOM).removeAttr("style");this._removeEvents("",o),l.children().show().removeClass("ztab__content");var i=o.children();this._removeEvents("",i),i.toArray().forEach(function(a){var o=t._getTabData(a).actualData,l=n(a);l.attr("data-zd-created")?l.remove():l.show().attr("class",o.origClass||"").find("i.ztabpanel__icon").remove()}),this.element.removeClass("ztabpanel")}},{key:"_hideTab",value:function(t){var l,a=this,o=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];o=void 0===o?null:o,this._toArr(t).forEach(function(t){var r,i=a._getTabData(t);if(i){var d=i.actualData;if(d.hidden=o,"none"===(r=n(d.element))[0].style.display!==o){if(o&&d.active){var u=a._data.tabs.indexOf(i);l=u,a._deselectTab(i)}d.hidden=o,a._animate(r,a._opts.tabAnimation,o?"hide":"show",function(){a._addedByComponent=!0,r.attr({"aria-hidden":o,"data-hidden":o}),a._trigger(o?"tabhide":"tabshow",i),a._addedByComponent=!1})}}}),void 0!==l&&this._navNextPrevTab(!1,l)}},{key:"showTab",value:function(t){this.setTabAttributes(t,"hidden",!1)}},{key:"hideTab",value:function(t){this.setTabAttributes(t,"hidden",!0)}},{key:"_setTabAttribute",value:function(t,a,o){if(t){var n=t.actualData,l=n.element;if("disabled"===a)return this._disableTab(t,o);if("hidden"===a)return this._hideTab(t,o);if("active"===a)return o?this._selectTab(t):this._deselectTab(t);if(("panelId"===a||"panelContent"===a)&&(n.contentLoaded=!1,this._activeTab===l)){"panelId"===a&&this._display(this._getPanel(n),!1),n[a]=o;var i=this._loadPane(t);this._display(i,!0)}n[a]=o,this._resetTabData=!0}}},{key:"setTabAttributes",value:function(t,a,o){var l=this;this._addedByComponent=!0,t&&this._toArr(t).forEach(function(t){l._resetTabData=!1;var i=l._getTabData(t);if(i){if("object"!==_typeof(a)||n.isEmptyObject(a))l._setTabAttribute(i,a,o);else for(var s in a)l._setTabAttribute(i,s,a[s]);l._resetTabData&&l._setTabData(i.actualData,i)}}),this._addedByComponent=!1}},{key:"_disableTab",value:function(t){var a=this,o=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];this._toArr(t).forEach(function(t){var l=a._getTabData(t);if(l){var i=l.actualData,s=n(i.element);o&&i.active&&(a._navNextPrevTab(),a._deselectTab(l)),i.disabled=o=o||null,s[o?"addClass":"removeClass"]("is-disabled"),s.attr({"aria-disabled":o,"data-disabled":o})}})}},{key:"disableTab",value:function(t){this.setTabAttributes(t,"disabled",!0)}},{key:"enableTab",value:function(t){this.setTabAttributes(t,"disabled",!1)}},{key:"_addTabs",value:function(t,a,o){var l=this,i=[],s=this._data,r=s.tabs,d=r.length;if(this._toArr(t).forEach(function(t){var a;(t instanceof n&&(t=t[0]),t)&&(t.nodeType?a=l._getTabEleData(t):("string"==typeof t&&(t={label:t}),"object"===_typeof(t)&&(a=l._setTabData(t))),a&&i.push(a))}),o&&/^(after|before)$/.test(a)&&(o=n(o,s.tabHeadDOM)).hasClass("ztab")){var c=this._getTabData(o[0]);d=r.indexOf(c),"after"===a&&d++}return i.length?(r.splice.apply(r,[d,0].concat(i)),this._renderTabs(),i.map(function(t){return l._trigger("tabadd",t),t.element})):void 0}},{key:"_deleteTab",value:function(t,a,o){var l=this;if(this._isNotNull(t)){var s,i=[];this._toArr(t).forEach(function(t){var a=l._getTabData(t);if(a){i.push(a);var o=l._data.tabs,n=o.indexOf(a);o.splice(n,1),a.actualData.active&&(s=n,l._deselectTab(a))}}),o||this._renderTabs(),i.forEach(function(t){a&&n(l._getPanel(t.actualData)).remove(),l._trigger("tabremove",t)}),void 0!==s&&this._navNextPrevTab(!1,s)}}},{key:"addTab",value:function(){return this._addTabs.apply(this,arguments)}},{key:"removeTab",value:function(t,a){return this._deleteTab(t,a)}},{key:"_keydownHandler",value:function(a){if(a.shiftKey&&!a.metaKey&&!a.ctrlKey&&16!==a.keyCode&&document.activeElement.parentElement.parentElement===this._getTabHead()){var o=a.keyCode||a.charCode,n=this._data.isVertical,l=t.keyCode[n?"DOWN":"RIGHT"],i=t.keyCode[n?"UP":"LEFT"];switch(o){case l:this._navNextPrevTab(!1,void 0,a),a.preventDefault();break;case i:this._navNextPrevTab(!0,void 0,a),a.preventDefault();break;case t.keyCode.HOME:this._navNextPrevTab(!1,this._data.tabs.length,a),a.preventDefault();break;case t.keyCode.END:this._navNextPrevTab(!0,0,a),a.preventDefault()}}}},{key:"_setAdvAttribute",value:function(t,a){var o=this,n=this._data,l=this._opts;this._addedByComponent=!0,"openOn"===t?(l[t]=a,this._bindTabHead()):"tabPosition"===t?(l[t]=a,this._domChanged=n.widgetRender=!0):"tabAlignment"===t?(l[t]=a,this._setRenderData(n,l),this._setClassName(n,l)):"tabLabelType"===t?(l[t]=a,this._setContentType(n,l),n.tabs.forEach(function(t){return o._setTabData(t.actualData,t)}),this._setClassName(n,l)):"tabs"===t?(l[t]=a,this._initTabs(n,l,!0),this._domChanged=n.widgetRender=!0):"width"===t||"height"===t||"className"===t||"zclassName"===t?(l[t]=a,this._domChanged=n.widgetRender=!0):"cacheData"===t||"lazyLoadContent"===t||"tabAnimation"===t?l[t]=a:"isTabLabelHTMLEncoded"===t&&(l[t]=a,this._data.tabs.forEach(function(t){o._setTabData(t.actualData,t)})),this._addedByComponent=!1}},{key:"name",get:function(){return"ztabpanel"}},{key:"attrs",get:function(){return{tabAlignment:"left",tabPosition:"top",tabLabelType:"text",openOn:"click",activeTab:null,lazyLoadContent:!0,cacheContent:!0,isTabLabelHTMLEncoded:!1}}},{key:"props",get:function(){return{tabAnimation:{},tabs:null,messages:{serverError:"Server request failed. Please try again later."}}}},{key:"EVENTS",get:function(){return["tabadd","tabremove","beforeswitch","switch","tabshow","tabhide","tabclick","init"]}},{key:"SELECTORS",get:function(){return{TABPANEL:this.isCE?"z-tabpanel":"div",TABHEAD:this.isCE?"z-tabhead":"ul",TABITEM:this.isCE?"z-tab":"li",TABBODY:this.isCE?"z-tabbody":"div",TABCONTENT:this.isCE?"z-tabcontent":"div"}}}]),o}();t.registerComponent("ZTabPanel",w),function(t){var a=t.ztabpanel.Templates,o=t.Templates.Utilities;a.children=function(t){return ZT.html(zc0tO101(),!t.isBottom&&a.tabHead(t),t.tabBodyDOM||ZT.html(zc0tO102(),t.tabBodyClass),t.isBottom&&a.tabHead(t))},a.tabHead=function(t){return t.tabHeadDOM||ZT.html(zc0tO103(),t.tabHeadClass,a.tabs(t.tabs))},a.tabs=function(t){return t.map(function(t){return a.tab(t)})},a.tab=function(t){return t.element||ZT.html(zc0tO104(),t.title,t.id,t.className,t.style,t.panelId,t.disabled?"true":"",t.disabled?"true":"",t.hidden?"true":"",t.hidden?"true":"",a.tabContent(t))},a.tabContent=function(t){return t.linkTag||ZT.html(zc0tO105(),t.panelId,a.anchorContent(t))},a.anchorContent=function(t){return ZT.html(zc0tO106(),ZT.customHTML(""),t.customContent&&ZT.customHTML(t.customContent),t.icon&&o.icon(t.icon),t.label&&ZT.html(zc0tO107(),ZT.customHTML(t.label)))}}(ZPeopleComponents);var I=function(a){function o(){return _classCallCheck(this,o),_possibleConstructorReturn(this,_getPrototypeOf(o).apply(this,arguments))}return _inherits(o,t.CoreComponent),_createClass(o,[{key:"_init",value:function(a,o){o.toggleButton||(o.toggleOnHeaderClick=!0);var n=a[0].tagName;if("Z-ACCITEM"===n||"Z-COLLAPSIBLEPANEL"===n){var l=a.parent(),s=t._getOpts(l);if(!s.length&&o.isCE)for(var c,r=l[0].attributes,d=0;d<r.length;d++)c=r[d],s[t._getCamelCaseStr(c.name)]=c.value;for(var _ in o)s[_]&&(o[_]=s[_])}this._buildPanel(a,o)}},{key:"_postRender",value:function(t,a){var o=this._CLASSES,n="",l=o.panel;"right"===a.iconPosition&&(n+=" "+o.buttonPosition),a.showToggleButtonOnHover&&(n+=" "+o.toggleButtonOnHover),!a.isActive||a.disabled||this._parent||(l+=" is-selected"),""!==n&&this._getHeader().addClass(n),this._data.className+=" "+l;var i=a.contentHeight;i&&(this._getContent()[0].style.height=i+("string"==typeof i?"":"px"))}},{key:"_postEachRender",value:function(t,a){("heading"==a.modifiedAttr||"content"==a.modifiedAttr)&&(this._handleEvents(this._opts.expandOn),a.modifiedAttr=void 0)}},{key:"_bindEvents",value:function(){this._handleEvents(this._opts.expandOn),this._opts.disabled?this._disable(void 0,void 0,!0):!this._opts.isActive&&this.collapsePanel({},!1,void 0,!0)}},{key:"_buildPanel",value:function(t,a){this._createContent(t,a),this._createHeader(t,a),"none"===a.display&&this._display(!0,t),a.sortable&&this._setSortable()}},{key:"_createHeader",value:function(a,o,l){var i=a.children(this._SELECTORS.header);if(l||!i.length||o.isCE&&!i[0].tagName.indexOf("HEADING")){var s=o.heading||"";o.heading=o.isHeadingHTMLEncoded?s:t.encodeHTML(s)}else o.headingDOM=i[0],n(i[0]).addClass(this._CLASSES.heading),this._hasHeadingDOM=!0}},{key:"_getHeader",value:function(){return this.element.children("."+this._CLASSES.header)}},{key:"_getContent",value:function(){return this.element.children("."+this._CLASSES.content)}},{key:"_getToggleBtn",value:function(){return this._getHeader().children("."+this._CLASSES.togglebutton)}},{key:"_createContent",value:function(a,o,l){var i=a.children(this._SELECTORS.content);if(o.isCE||(i=1<i.length?n(i[1]):i),!l&&i&&i.length)i.addClass(this._CLASSES.content),o.contentDOM=i[0];else{var s=o.content||"";"object"===_typeof(s)?this._remoteContent():(i=0===s.indexOf("#")?n(s).html():s,o.content=o.isContentHTMLEncoded?i:t.encodeHTML(i))}}},{key:"_disable",value:function(t,a,n){var l=this.element,i=this._opts.disabled;i&&this.collapsePanel({},!n,void 0,n),_get(_getPrototypeOf(o.prototype),"_disable",this).call(this,i,l),this._handleIcon&&this._handleIcon(!0)}},{key:"_openHandler",value:function(t,a,o,n){var l="expand"===a;this._updateClass(this._opts.activeClass,!l),this._opts.isActive=l,this._handleIcon&&this._handleIcon(!0),t.attr("aria-expanded","expand"===a),this._opts.contentHeight&&this._setHeight(),n||this._dispatchEvent(a,o,{panel:t})}},{key:"expandPanel",value:function(t,a,o){this._open("expand",t,a,o)}},{key:"collapsePanel",value:function(t,a,o,n){this._open("collapse",t,a,o,n)}},{key:"_open",value:function(a,o,n,l,i){var s=this,r=this.element,d=this._opts,c=r.hasClass(d.activeClass),_=c||"collapse"===a?"expand":"collapse";if(null===a&&(a=c?"collapse":"expand"),(n||_!==a)&&(n||this._dispatchEvent("before"+a,o,{panel:r}))){var u=r.children("."+this._CLASSES.content);u.finish?u.finish():u.stop(!0,!0),c="expand"===a,t.animationHandler&&d.animation?this._animationHandler(u,c,r,a,o):i&&!c?(u.hide(),this._openHandler(r,a,o)):u[c?"slideDown":"slideUp"](300,function(){s.element&&s._openHandler(r,a,o)})}}},{key:"_handleEvents",value:function(a){var o=this,n="."+this.name,l=this.element,i="is-disabled",s=this._getHeader(),r=this._opts.toggleOnHeaderClick,d=this._getToggleBtn(null,s);this._updateClass(this._CLASSES.toggleableheader,!r,s),s.attr("tabindex",r?0:-1),d.attr("tabindex",r?-1:0),d.off(n),s.off(n);var c=r?s:d;"mouseover"===a?c.on("mouseover"+n,function(t){l.hasClass(i)||(window.clearTimeout(o._timer),o._timer=window.setTimeout(function(){window.clearTimeout(o._timer),o._open(null,t)},o._opts.mouseOverDelay))}).on("mouseleave"+n,function(){!l.hasClass(i)&&o._timer&&window.clearTimeout(o._timer)}):c.on("click"+n+" keydown"+n,function(a){var n=t.keyCode,s=a.keyCode,r=s===n.UP,d=s===n.DOWN,c=s===n.ENTER||s===n.SPACE,_="";"click"===a.type||c?_=null:s===n.RIGHT||r?_="expand":(s===n.LEFT||d)&&(_="collapse"),""===_||l.hasClass(i)||(o._isGroup&&o._goto?o._goto(_,a):o._open(_,a)),c&&(a.stopPropagation(),a.preventDefault())}),this._handleFocus(c)}},{key:"_setAttribute",value:function(t,a){this._handleAttribute(this.element,t,a),this._opts[t]=a}},{key:"_handleAttribute",value:function(t,a,o){var n=this._CLASSES,l=this._opts;return l[a]=o,0<=["collapseIconClassName","collapseIconClass","expandIconClassName","expandIconClass","collapseSVGIconId","expandSVGIconId","expandText","collapseText","toggleButton"].indexOf(a)?(this._handleIcon(!0),l.expandText&&l.collapseText&&this._setAttribute("iconPosition","right"),"toggleButton"===a&&!0!==o&&this._setAttribute("toggleOnHeaderClick",!0)):("iconPosition"===a?(l.toggleButtonPosition=o,this._updateClass(n.buttonPosition,"left"===o,this._getHeader())):"showToggleButtonOnHover"===a?(this._setAttribute("iconPosition",o?"right":l.toggleButtonPosition),this._updateClass(n.toggleButtonOnHover,!o,this._getHeader())):"toggleOnHeaderClick"===a||"expandOn"===a?this._handleEvents(o):"contentHeight"===a?this._setHeight():"sortable"===a?this._setSortable(!0):"display"===a?this._display("none"===o,t):"isActive"===a?o?this.expandPanel():this.collapsePanel():"heading"===a?(this._hasHeadingDOM=!1,l.headingDOM=void 0,this._createHeader(t,l,!0)):"content"===a&&(l.contentDOM=void 0,this._createContent(t,l,!0)),("heading"==a||"content"==a)&&(l.modifiedAttr=a,this._domChanged=!0)),l}},{key:"_animationHandler",value:function(a,o,n,l,i){t.animationHandler({default:"slide",action:o?"panelexpand":"panelcollapse",animation:this._opts.animation,callback:this._openHandler.bind(this,n,l,i),element:a,ctype:this.name})}},{key:"_remoteContent",value:function(){if(!options.lazyLoadContent){contentObj.cache=contentObj.cache?contentObj.cache:this._opts.cacheContent,contentObj.sourceURL=contentObj.url;var a=this;t.AJAX.transport(contentObj,function(t){options.content=t,a._render()})}}},{key:"_destroy",value:function(){var t=this.element,a=this._CLASSES,o=this._getContent(),n=this._getHeader(),l=n.children("."+a.heading),i=n.children("."+a.togglebutton);o.finish?o.finish():o.stop(!0,!0),t.removeClass(a.panel+" is-selected is-disabled").removeAttr("aria-expanded aria-disabled"),n.removeClass(a.header+" "+a.toggleableheader+" "+a.buttonPosition).removeAttr("tabindex"),o.removeClass(a.content).show(),l.removeClass(a.heading),(this._opts.toggleOnHeaderClick?n:i).off("."+this.name),this._hasHeadingDOM?i.remove():(n[0].innerHTML=l[0].innerHTML,this._hasHeadingDOM=!1),this._useParent=!0}},{key:"name",get:function(){return"zpanel"}},{key:"attrs",get:function(){return{heading:null,content:null,collapseIconClass:null,collapseSVGIconId:null,collapseText:null,expandIconClass:null,expandSVGIconId:null,expandText:null,isHeadingHTMLEncoded:!1,isContentHTMLEncoded:!1,zclassName:"",iconPosition:"left",sortable:!1,activeClass:"is-selected",isActive:!1,disabled:!1,expandIconLabel:null,collapseIconLabel:null,display:"block"}}},{key:"props",get:function(){return{collapseIconClassName:null,expandIconClassName:null,collapsedPanelsIndex:[],animation:null,customAttributes:{},labels:{expandIcon:"Collapse",collapseIcon:"Expand"}}}},{key:"EVENTS",get:function(){return["beforeexpand","beforecollapse","expand","collapse"]}}]),o}();t.registerComponent("ZPanel",I);var x=function(a){function o(){return _classCallCheck(this,o),_possibleConstructorReturn(this,_getPrototypeOf(o).apply(this,arguments))}return _inherits(o,t.ZPanel),_createClass(o,[{key:"_buildPanel",value:function(t,a){a.expandOn=a.toggleOn,a.iconPosition=a.toggleButtonPosition,(a.showToggleButtonOnHover||a.collapseText&&a.expandText)&&(a.iconPosition="right"),_get(_getPrototypeOf(o.prototype),"_buildPanel",this).call(this,t,a),a.toggleButton&&this._handleIcon()}},{key:"_dispatchEvent",value:function(t,a,n){return t="panel"+t,_get(_getPrototypeOf(o.prototype),"_dispatchEvent",this).call(this,t.replace("panelbefore","beforepanel"),a,n)}},{key:"_setAttribute",value:function(t,a){var o=t;"toggleOn"===t&&(o="expandOn"),"toggleButtonPosition"===t&&(o="iconPosition"),this._handleAttribute(this.element,o,a),this._opts[t]=a}},{key:"_handleIcon",value:function(a){var s,o=this._opts,n="",l=this._getToggleBtn(),i=o.toggleOnHeaderClick?-1:0;if(!1!==o.toggleButton&&"false"!==o.toggleButton){var r=this._CLASSES,d=null,c=r.togglebutton,_=o.collapseText,u=o.expandText,p=o.isActive,m=p?"expand":"collapse";n=o[m+"IconLabel"]||this._getI18NText(m+"Icon"),s={templateRender:!0,disabled:o.disabled,isCE:o.isCE,defaultIconClassName:r.toggleicon,iconClassName:o[m+"IconClass"]||o[m+"IconClassName"],defaultSVGIconId:"zc__svg--arrow "+r.togglesvg,SVGIconId:o[m+"SVGIconId"],customAttributes:{tabindex:i}},u&&_?(c+=" zcollapsiblepanel__textbutton",d=p?u:_,s.defaultIconClassName=null,s.iconClassName=null,s.SVGIconId=null,s.defaultSVGIconId=null):s.title=n,s.text=d,s.className=c}this._data.toggleButton=s,a&&(s&&l.length?(t.button(l[0]).setAttributes(s),l.attr("title",n),l.attr("tabindex",i)):this._render())}},{key:"name",get:function(){return"zcollapsiblepanel"}},{key:"attrs",get:function(){return{toggleButton:!0,toggleButtonPosition:"left",toggleOn:"click",isActive:!0,toggleOnHeaderClick:!1,showToggleButtonOnHover:!1,mouseOverDelay:200}}},{key:"EVENTS",get:function(){return["beforepanelexpand","beforepanelcollapse","panelexpand","panelcollapse"]}},{key:"CLASSES",get:function(){return{panel:"zcollapsiblepanel",header:"zcollapsiblepanel__header",toggleableheader:"zcollapsiblepanel--toggleableheader",heading:"zcollapsiblepanel__heading",content:"zcollapsiblepanel__content",togglebutton:"zcollapsiblepanel__togglebutton",toggleicon:"zcollapsiblepanel__icon",toggleButtonOnHover:"zcollapsiblepanel__togglebutton--onhover",togglesvg:"zcollapsiblepanel__toggleicon",grippy:"zcollapsiblepanel__grippy",buttonPosition:"zcollapsiblepanel--buttonright"}}},{key:"SELECTORS",get:function(){return{header:this.isCE?"z-cpheading":"div",content:this.isCE?"z-cpcontent":"div"}}}]),o}();t.registerComponent("ZCollapsiblePanel",t.ZPanel,x),function(t){t.zcollapsiblepanel.Templates.children=function(a){return ZT.html(zc0tO108(),a.toggleButton&&t.createButton(a.toggleButton),a.headingDOM||ZT.html(zc0tO109(),ZT.customHTML(a.heading)),a.contentDOM||ZT.html(zc0tO110(),ZT.customHTML(a.content)))}}(ZPeopleComponents);var E=function(a){function o(){return _classCallCheck(this,o),_possibleConstructorReturn(this,_getPrototypeOf(o).apply(this,arguments))}return _inherits(o,t.CoreComponent),_createClass(o,[{key:"_init",value:function(t,a){a.toggleButton||(a.toggleOnHeaderClick=!0),a.showToggleButtonOnHover&&(a.toggleButtonPosition="right")}},{key:"_render",value:function(){var a=this._opts,o=this.element.children(this._SELECTORS.panel),l=a.collapsedPanelsId||[],s=a.collapsedPanelsIndex||[];if(!a.isCE)for(var r=0;r<o.length;r++){var d=n(o[r]),c=n.extend({},a,t._getOpts(d)),_=!c.disabled&&(void 0===c.isActive||c.isActive);(0<l.indexOf("#"+d.attr("id"))||0<s.indexOf(n(d).index()))&&(_=!1),c.isActive=_,t.collapsiblepanel(d,c)}this.element.attr("aria-multiselectable",!0),this._panels=o}},{key:"_postRender",value:function(t,a){this._data.className+=" zcollapsiblepanel--group ",a.disabled&&this._disable(a.disabled)}},{key:"_handleOpen",value:function(a,o,n){var l=n?"expand":"collapse";if(a="string"==typeof a?[a]:a)for(var s=0;s<a.length;s++)t.collapsiblepanel(a[s])[l+"Panel"](o)}},{key:"expandPanel",value:function(t,a){this._handleOpen(this._getPanel(t),a,!0)}},{key:"collapsePanel",value:function(t,a){this._handleOpen(this._getPanel(t),a)}},{key:"collapseAllPanels",value:function(t){this._handleOpen(this._panels,t)}},{key:"expandAllPanels",value:function(t){this._handleOpen(this._panels,t,!0)}},{key:"_getByIndex",value:function(t){var a=this._getPanels(t);return a=a.map(function(t,a){return n(a).index()})}},{key:"getCollapsedPanels",value:function(){return this._getPanels()}},{key:"getCollapsedPanelsIndex",value:function(){return this._getByIndex()}},{key:"getExpandedPanels",value:function(){return this._getPanels(!0)}},{key:"getExpandedPanelsIndex",value:function(){return this._getByIndex(!0)}},{key:"_getPanels",value:function(t){var a=this._CLASSES,o="."+a.panel,n="."+a.activeClass;return o+=t?"."+n:":not(."+n+")",this._getPanel(o)}},{key:"_getPanel",value:function(t){var a=t;return"number"==typeof t&&(a=this._SELECTORS.panel+":eq("+t+")"),this.element.children(a)}},{key:"_handlePanel",value:function(a,o,l){(a=n(a)).length&&t.collapsiblepanel(a).setAttribute(o,l)}},{key:"_setAttribute",value:function(t,a){var s,o=this._panels,n=o.length,l=this._opts;if("expandedPanelsIndex"===t||"expandedPanelsId"===t||"collapsedPanelsIndex"===t||"collapsedPanelsId"===t)this[-1===t.indexOf("collapsed")?"expandPanel":"collapsePanel"](this._getPanels(a));else if("rtl"===t)this._updateClass("zh-rtl",!a,this._panels);else if("zclassName"!==t)for(s=0;s<n;s++)this._handlePanel(o[s],t,a);l[t]=a,"toggleButton"!==t||a?("expandText"===t||"collapseText"===t)&&(l.iconPosition="right"):l.toggleOnHeaderClick=!0}},{key:"setPanelAttributes",value:function(t,a,o){this._handlePanel(this._getPanel(t),a,o)}},{key:"setPanelAttribute",value:function(t,a,o){this._handlePanel(this._getPanel(t),a,o)}},{key:"enablePanel",value:function(t){this._disablePanel(t,!1)}},{key:"_disablePanel",value:function(a,o){t.collapsiblepanel(this._getPanel(a)).disable(o)}},{key:"disablePanel",value:function(t){this._disablePanel(t,!0)}},{key:"_destroy",value:function(){var a=this._panels,o=a.length;if(!this.isCE)for(var l=0;l<o;l++)t.collapsiblepanel(n(a[l])).destroy();this._panels=void 0,this.element.removeAttr("aria-multiselectable").removeClass("zcollapsiblepanel--group"),this._useParent=!0}},{key:"addPanel",value:function(t,a){if(t instanceof Array)for(var o=t.length,n=0;n<o;n++)this._addPanel(t[n],a);else this._addPanel(t,a);this._panels=this.element.children(this._CLASSES.panel)}},{key:"_addPanel",value:function(a,o){var l;if(a instanceof n||1===a.nodeType)t.collapsiblepanel(a),l=a;else{var i=this.element,s=this._panels.length,r=parseInt(a.index);s&&(0===r||r<s)&&(a.insertBefore=!0,i=n(this._panels[r+1])),a.appendTo=i,l=t.createCollapsiblePanel(a,o)}return o&&o(l,a),l}},{key:"removePanel",value:function(t){if(t instanceof Array)for(var a=t.length,o=0;o<a;o++)this._removePanel(t[o]);else this._removePanel(t);this._panels=this.element.children(this._CLASSES.panel)}},{key:"_removePanel",value:function(a){"number"==typeof a?a=this._panels[a-1]:"string"==typeof a&&(a=this.element.children("#"+a.replace("#",""))),t.collapsiblepanel(a).destroy(),a.remove()}},{key:"name",get:function(){return"zcollapsiblepanels"}},{key:"attrs",get:function(){return{toggleButton:!0,toggleButtonPosition:"left",toggleOn:"click",toggleOnHeaderClick:!1,showToggleButtonOnHover:!1,collapseIconClass:null,collapseSVGIconId:null,collapseText:null,expandIconClass:null,expandSVGIconId:null,expandText:null,zclassName:"",sortable:!1,activeClass:"is-selected",disabled:!1,mouseOverDelay:200,expandIconLabel:null,collapseIconLabel:null,display:"block",collapsedPanelsId:null,collapsedPanelsIndex:null}}},{key:"props",get:function(){return{collapseIconClassName:null,expandIconClassName:null,collapsedPanelsIndex:[],animation:"slide",customAttributes:{},labels:{expandIcon:"Collapse",collapseIcon:"Expand"},panels:[]}}},{key:"SELECTORS",get:function(){return{panel:this.isCE?"z-collapsiblepanel":"div"}}}]),o}();t.registerComponent("ZCollapsiblePanels",E),function(t){t.zcollapsiblepanels.Templates.children=function(a){return ZT.html(zc0tO111(),a.panels&&a.panels.map(function(a){return ZT.html(zc0tO112(),t.createCollapsiblePanel(a))}))}}(ZPeopleComponents),t.createMenu=function(a,o){var l=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};a&&"object"===_typeof(a)&&(o=a.items,l=a,a=a.id);var i=n("#"+a);return i.data("zmenu")?i:(l.id=a||t.getID("menu"),l.usingJSON=!0,o.body||o.header||o.footer?(n.extend(!0,l,o),l.items=o.body,delete l.body):l.items=o,l.allowReplace=!0,t.createElement(l,"menu"))};var z=function(o){function l(){return _classCallCheck(this,l),_possibleConstructorReturn(this,_getPrototypeOf(l).apply(this,arguments))}return _inherits(l,t.CoreComponent),_createClass(l,[{key:"_getItemDetails",value:function(o,i,s,r){var d=o.itemType||"default",_=o.itemType=i.isCE&&s?"Z-MENUSEPARATOR"===s.tagName?"separator":"Z-MENUITEMHEADING"===s.tagName?"itemgroup":d:d,u=!(o.menuId||o.menuItems)&&o.contentType||i.contentType||"text",p=!1,m=l._ITEM_TYPES["radio"===_||"checkbox"===_?"default":_],g=new RegExp((r?m:m+"|on-hover")+"|is-disabled|zh-dnone|zmenu--submenu","g");if(o.className=(o.className?o.className.replace(g,"")+" ":"")+m,!i.allowReplace&&s&&(o.element=s),"separator"===_)o.isSeparator=!0,o.contentType="text",s&&(s=n(s));else{var h=function(a){i.isLabelHTMLEncoded||o.custom?o.decodedLabel=t.decodeHTML(a):o.encodedLabel=t.encodeHTML(a),o.encodedLabel===a&&(o.decodedLabel=t.decodeHTML(a))};if(!r&&o.label&&h(o.label),!r&&!o.label&&s){var v=n(s)[o.custom?"html":"text"]();h(v),o.label=v}if(o.encodedLabel=o.encodedLabel||o.label,o.decodedLabel=o.decodedLabel||o.label,"itemgroup"===_)u="text";else{if("custom"===_||o.custom)this._getCustItemInfo(o,s);else{var f,y=o.action;o.disabled||"string"!=typeof y||-1===y.indexOf("URL:")||(o.target=o.target||"_blank",o.className+=" zmenu--withlink",o.url=y.replace("URL:",""),"_blank"===o.target&&(o.rel="noopener noreferrer")),o.ellipsis&&(o.label+="..."),f=t.ShortCut&&s?t.ShortCut.getInfo(y,s,!0):o.shortcutKey,o.shortcutKey=f&&("string"==typeof f?f:f[0]),this._data.hasShortcut=!!f}if(o.menuItems){var b=o.id+"submenu";o.menuId=b,t.createMenu(b,o.menuItems,_defineProperty({type:o.type,isCE:i.isCE,contentType:o.contentType,appendTo:o.appendTo},i.isCE?"zclassName":"className",o.submenuClassName))}}o.hasSubmenu=o.menuId||"splitmenu"===_||"submenu"===_,o.hasSubmenu&&(o.className+="splitmenu"===_||o.splitmenu?"":" zmenu--submenu",o.arrowIcon=t._getIconInfo(i.arrowIconClassName||i.arrowIconClass,i.arrowSVGIconId,"zc__svg--arrow zmenu__arrow zh-arrowicon","zmenu__icon zh-alignright"),o.customType&&(o.iconAsSuffix=!0),this._hasSMenu=!0);var C="".concat("grid"===i.type?"zmenu__image":"zmenu__icon");o.iconClassName=(o.iconClassName||"").replace(new RegExp(o.iconClass+"|"+C,"g"),""),o.SVGIconId&&(o.SVGIconId+=" zmenu__svg"),(o=t._getIconInfo(o.iconClass||o.iconClassName,o.SVGIconId,void 0,C,o)).contentType=u,("radio"===_||"checkbox"===_)&&(o=this._getIconDetails(o,i,o.checked)),i.isCE&&"itemgroup"===_&&(o.isHeading=!0)}if(s){s=n(s);for(var T,D=["disabled","checked","hidden","name"],S=0;4>S;S++)o[T=D[S]]=o[T]||s.attr(T);if(i.allowReplace){for(var w=s[0].attributes,I={},x=0;x<w.length;x++)"class"===w[x].name?o.className=w[x].value+" "+o.className:I[w[x].name]=w[x].value;o.attrs=I}else p=!0}else o.customAttributes&&(o.attrs=_objectSpread({},o.customAttributes));"separator"!==_&&("radio"===_||"checkbox"===_)&&(o=this._getIconDetails(o,i,o.checked)),o.isSeparator||o.isHeading||(o.isDefault=!0);var E=o.className;return E=o.disabled?E+" is-disabled":0<=E.indexOf("is-disabled")?E.replace(/is-disabled/g,""):E,E=o.hidden?E+" zh-dnone":0<=E.indexOf("zh-dnone")?E.replace(/zh-dnone/g,""):E,o.className=E,o.uniqueKey=o.uniqueKey||(o.id||"mitem")+c(1e8*Math.random()),o.id=s&&s.attr("id")||o.id||o.attrs&&o.attrs.id||o.uniqueKey,o.role=l.ARIA_ROLES[_],o.element&&(o.defaultClass=void 0===o.defaultClass?o.element.className:o.defaultClass,o.attrs=n.extend(!0,{},o.attrs,{id:o.id,class:o.defaultClass+" "+o.className,role:o.role,"data-unique-key":o.uniqueKey})),(o.attrs&&!t.isEmpty(o.attrs)||o.checked)&&this._itemsHavingAttrs.push(o.id),o.layoutName=this._getLayout("".concat(o.customType?"custom":o.url?"anchor":"default","Layout")),o.className=o.className.trim(),p&&(o.element.itemData=o),i.addItemCallback&&i.addItemCallback(s,o,i),o}},{key:"_init",value:function(t,a){var o=this._data;a.headerContentType||(a.headerContentType=a.contentType,this._sameheaderct=!0),a.footerContentType||(a.footerContentType=a.contentType,this._samefooterct=!0),this._itemsHavingAttrs=[],this._labelList=[],this._namespace=".zmenu",this._data.shortcutItems=[],o.callout="callout"===a.displayType,o.usingJSON=a.usingJSON,this._skipParent=o.alwaysSetAttrs=!0,o.attrs=o.attrs||{},o.attrs.role="menu",o.attrs.tabindex=t[0].getAttribute("tabindex")||0,o.items=[];var n=this._SELECTORS;this._isContainer=!(t[0].tagName.toLowerCase()!==n.container||this.isCE&&t.children(n.item).length),this._lastOverlayedMenu=t,a.constructMenu&&(this[this._isContainer?"_storeAllPortionItems":"_storeMenuItemDetails"](),o.simple=!this._isContainer),this._isContainer||(a.scroll="default"),this.isCE&&a.allowReplace&&(this._addedByComponent=!0),this._useParent=!a.usingJSON,this._NAV_OPTS=_objectSpread({},this.NAV_OPTS,{ctype:this.name,headerClassName:"zmenu__header",footerClassName:"zmenu__footer",items:this._SELECTORS.visibleItems,keydown:this._keydownHandler.bind(this),arrowkeydown:this._arrowKeydownHandler.bind(this),focusmove:this._focusMoveHandler.bind(this),beforeblur:this._beforeBlurHandler.bind(this)})}},{key:"_storeMenuItemDetails",value:function(a){for(var o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.element,n=this._SELECTORS,l=this._data,s=o[0]!==this.element[0],r=[],d=this._opts,c=a?a+"Items":"items",_=d[a]||d[c]||o[0].querySelectorAll("".concat(n.item,", ").concat(n.separator,", ").concat(n.group)),u=_.length,p={},m=0;m<u;m++)d.usingJSON||(p=t._getOpts(_[m])),p.contentType=s&&t._getOpts(o).contentType||d[a+"ContentType"]||void 0,r.push(this._getItemDetails(d.usingJSON?_[m]:p,d,!d.usingJSON&&_[m]));r.length&&(l[c]=r)}},{key:"_postRender",value:function(t){var a=this._opts,o=this._data;o.className+=" ".concat(t?t[0].className:""," zmenu ").concat(a.contentType?l._CONTENT_TYPES[a.contentType]:""," ").concat(!1===this._isContainer&&"grid"===a.type?"zmenu--thumbnail":""," ").concat(a.menuClass||""),a.allowReplace||(o.rendered=!0,o.isInitial=!0,this["_setCustomAttrsForItem"+(this._isContainer?"s":"")](o,!0)),a.renderInPlace&&this._resetLabels(t),this.isCE&&a.allowReplace&&(this._addedByComponent=!1),t.attr("aria-hidden",!0),t.data("usingJSON",a.usingJSON)}},{key:"_postEachRender",value:function(){var t=this._data;!t.itemRender&&(t.rendered&&!t.isInitial&&this._itemsHavingAttrs.length||this._opts.allowReplace&&(!t.rendered||this._itemsHavingAttrs.length))&&this["_setCustomAttrsForItem"+(this._isContainer?"s":"")](t,t.itemAttrChange),this._pointerElement=t.callout&&this.element.find(".zmenu__pointer"),this._addedByComponent=!1}},{key:"_setCustomAttrsForItem",value:function(t,a,o){this.isCE&&(this._addedByComponent=!0);var s,r,d,c,l=[],i=t[o||"items"];if(i&&i.length)for(s=0;s<i.length;s++)r=(c=i[s]).attrs,d=n("#"+c.id,this.element)[0],this._opts.allowReplace||(d=c.element||d,a&&(this._data.itemRender=!0,this._render(c,c.layoutName,d,!0),this._data.itemRender=!1),c.className&&n(c.element).attr("class",c.className)),(d=n("#"+c.id,this.element)).length&&(-1!==this._itemsHavingAttrs.indexOf(c.id)&&(r&&(r.class&&d.attr("class",r.class),delete r.class,d.attr(r)),d.prop("checked",c.checked)),l.push(d));return this.isCE&&(this._addedByComponent=!1),l}},{key:"_bindEvents",value:function(){var t=this;this._data.isInitial=!1;var a=this.element,o=this._namespace;this._addEvents({mouseup:"mouseup"}),a.on("mouseenter"+o,".zmenu__item",function(a,o){return t._mouseenterHandler(a,o)}).on("mouseleave"+o,".zmenu__item",function(a){return t._mouseleaveHandler(a)})}},{key:"_focusMoveHandler",value:function(t){var o=this._lastOverlayedMenuItem;if(o&&o.length&&this._lastOverlayedMenuItem.trigger("mouseleave"),t.target=t.detail.item,t.type=t.originalEvent&&t.originalEvent.type,this._mouseenterHandler(t),"slider"===this._opts.scroll&&this._data.scroller){var c,n=this.element,l=this._lastOverlayedMenuItem,i=l.offset().top+l.outerHeight(),s=this.element.find(".zmenu--scrollerdown"),r=this.element.find(".zmenu--scrollerup"),d=n.find(".zmenu__body");s.is(":visible")?c=(c=i>s.position().top)?d.scrollTop()+a(s.position().top-i):void 0:r.is(":visible")&&(c=(c=0>l.offset().top)?l.offset().top:void 0),void 0!==c&&d.scrollTop(c),this._showScrollEle(d)}}},{key:"_beforeBlurHandler",value:function(t){var a=this._lastOverlayedMenuItem||this.element.find(".on-hover"),o=t.relatedTarget;return!(o&&a&&a.length&&(a[0].itemData.hasSubmenu&&this._isMenuOfMenuItemShown(a)||n(o)[0].contains(a[0])))}},{key:"_bindRuntimeEvents",value:function(){var a=this._lastOverlayedMenu||this.element;t.keyboardnavigation(a,_objectSpread({},this._NAV_OPTS,{direction:this._isGridMenu(a)?"both":"vertical"}))}},{key:"_mouseenterHandler",value:function(t,a){this[this._hasSMenu?"_checkSubmenuEnter":"_handleMouseEnterOnMenuItems"](t,!t.originalEvent,a)}},{key:"_handleMouseEnterOnMenuItems",value:function(a){var o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!a.originalEvent,l=2<arguments.length?arguments[2]:void 0,i=n(a.target).closest(".zmenu__item");if(i.length){var s=this._getData(i),r=i.closest(".zmenu"),d=r.find(".zmenu__body").length&&r.find(".zmenu__body"),c=this._hideOpenedSubmenu.bind(this);if(d&&d.stop(),s.disabled||"itemgroup"===s.itemType){c(r);var _=this._lastOverlayedMenuItem;return void(_&&this._updateHoverState(_,!1))}var u=this._setLastOverlayedMenuItem.bind(this);if(s.hasSubmenu&&i.hasClass("on-hover")&&this._isMenuOfMenuItemShown(i))return void u(i);var p=r.data("parent");if(p&&(p=p.closest(".zmenu"),clearTimeout(t._getOpts(p).mouseOverTimeout)),l&&(a=l),this._triggerEvent("itemhover",a,this._lastOverlayedMenu,i,s)&&(!1!==o&&this._scrollToView(i,d||r),c(r),u(i),this._updateHoverState(i,!0,s),s.hasSubmenu)){var m=s.submenu||n("#"+s.menuId);t.keyboardnavigation(r).setAttribute("activeEleOnRight",m),t.keyboardnavigation(m,_objectSpread({},t.menu(m)._NAV_OPTS,{direction:this._isGridMenu(m)?"both":"vertical"})),t.keyboardnavigation(m).setAttribute("activeEleOnLeft",r),this._handleMouseEnterOnSubmenuItem(i,a,s)}}}},{key:"_setLastOverlayedMenuItem",value:function(a){var o=this._lastOverlayedMenuItem,n=a&&a.length;if(!o||!n||o[0]!==a[0]){var i,l=this._lastOverlayedMenu;if(o&&n&&!l[0].contains(a[0]).length){var r=this._getData(a).submenu;r&&r[0]===l[0]||(i=l.data("parent"))&&i.parent().has(a[0]).length&&a.trigger("mouseleave")}if(o&&o.trigger("mouseleave",a),this._lastOverlayedMenuItem=a,n){var d=a.closest(".zmenu"),c=this.element,_=c.data("parent");for(this.setLastOverlayedMenu(d);_;)_=(c=c.data("parent").closest(".zmenu")).data("parent");t.menu(c)._lastOverlayedMenuItem=a}}}},{key:"_hideOpenedSubmenu",value:function(t,a,o){this._hasSMenu&&this._hideAllSubmenus&&this._hideAllSubmenus(t,a,o)}},{key:"_hideParentMenu",value:function(a,o,n){(a=this._findMain(a))[0]===this.element[0]?this._hideOpenedSubmenu(a,o,n):t.menu(a).hide(void 0,o)}},{key:"_scrollToView",value:function(a,o){var r,n=a.offset().top-o.offset().top,l=o[0].scrollTop,i=t.menu(o.closest(".zmenu")).getData().scroller,s=0<=n?"downEle":"upEle";if(i&&i[s].is(":visible")){var c=i[s].outerHeight(!0);n+="upEle"===s?-c:c}r=0>n?l+n:d(l,n+l+a.outerHeight(!0)-o.outerHeight()),o.scrollTop(r),i&&l!==r&&this._showScrollEle(o)}},{key:"_mouseleaveHandler",value:function(t){this[this._hasSMenu?"_checkSubmenuLeave":"_handleMouseLeaveOnMenuItems"](t)}},{key:"_handleMouseLeaveOnMenuItems",value:function(t){var a=n(t.target).closest(".zmenu__item"),o=this._getData(a);if(a.length&&(!o.hasSubmenu||this._handleMouseLeaveOnSubmenuItem(a,t))){var l=this._lastOverlayedMenuItem;!a.hasClass("on-hover")&&l&&l[0]!==a[0]&&(a=l,o=this._getData(a)),this._updateHoverState(a,!1,o),this._lastOverlayedMenuItem=void 0}}},{key:"_mouseupHandler",value:function(a){if(3!==a.which||n(a.target).closest(".zmenu--withlink").length){var o=n(a.target).closest(".zmenu__item");if(o.length){var l=this._getData(o),i=l.itemType;if(!l.disabled&&"itemgroup"!==i&&"separator"!==i){var s=this._triggerEvent.bind(this),r=o.closest(".zmenu");if(s("before"+(r.data("parent")?"submenu":"")+"itemclick",a,r,o,l)){var d=l.action;if(d){var c=[o,a,{menuitem:o,options:l}];"string"==typeof d&&-1===d.indexOf("URL:")?t._triggerFunction(d,c[0],c.splice(1)):"function"==typeof d&&d.call(c[0],c[1],c[2])}("radio"===i||"checkbox"===i)&&s("beforeitemchecked",a,void 0,o,l)&&this._checkMenuItem(o,"checkbox"!==i||!l.checked,l),s((r.data("parent")?"submenu":"")+"itemclick",a,r,o,l)&&(!l.hasSubmenu||"splitmenu"===l.itemType)&&this.hide(void 0,a)}}}}}},{key:"_enterKeyHandler",value:function(a){a.target=n(this._lastOverlayedMenuItem);var o=this._lastOverlayedMenuItem;o&&o.data("menuId")&&!o.hasClass("zmenu--split")?(a.keyCode=t.keyCode.RIGHT,this.handleKeyCode(a)):this._mouseupHandler(a)}},{key:"_escKeyHandler",value:function(t){this._lastOverlayedMenu.data("parent")?(this._hideLastShownMenu(),this._lastOverlayedMenu&&this._lastOverlayedMenu[0].focus()):this.hide(),t.stopPropagation(),t.preventDefault()}},{key:"_onLtRtKey",value:function(t,a){return this._openCloseSubmenu(a,t)}},{key:"handleKeyCode",value:function(a,o){this._lastOverlayedMenu=this._lastOverlayedMenu||this.element,o||t.keyboardnavigation(this._lastOverlayedMenu).moveFocus(a);var n=a.keyCode,l=this._lastOverlayedMenuItem;this._labelList.length&&this._opts.handleAccessKeyNavigation&&this._callMenuitemSearch(r(n),+new Date);var i=this._lastOverlayedMenu.find(".on-hover"),s=!1;if(i.length&&(!l||l&&l[0]!==i[0])){var d=this._getData(i).submenu;!(s=d&&d.length)&&l&&(s=this._lastOverlayedMenu.data("parent")&&this._lastOverlayedMenu.data("forElement")[0]===l[0])}a&&"keydown"===a.type&&!s&&this._triggerEvent("KEYDOWN",a,this.element)}},{key:"_keydownHandler",value:function(t){var a=t.detail;a.isEnterKey||a.isSpaceKey?this._enterKeyHandler(t):a.isEscapeKey&&this._escKeyHandler(t)}},{key:"_arrowKeydownHandler",value:function(t){var a=t.detail,o=this._lastOverlayedMenuItem,n=this._opts.rtl,l=(n?a.isLeftKey:a.isRightKey)&&o&&(o.hasClass("zmenu--submenu")||o.hasClass("zmenu--split")),i=a["is"+(n?"Right":"Left")+"Key"];(l||i)&&this._onLtRtKey(t,a.key)}},{key:"_isNonModifier",value:function(t){return!(t.ctrlKey||t.metaKey||t.shiftKey||t.altKey)}},{key:"getData",value:function(){return this._data}},{key:"_getData",value:function(a,o){if(!a.length)return{};for(var n=a.attr("data-unique-key"),l=a.parent(),i=!l.length||l.hasClass("zmenu__body")||l.hasClass("zmenu")?"items":l.hasClass("zmenu__footer")?"footerItems":"headerItems",s=l.closest(".zmenu"),r=s.length?s:this.element,d=t.menu(r).getData()[i],c=d.length,_=0;_<=c-1;_++)if(d[_].uniqueKey===n){if(!o)return d[_];delete d[_],d.splice(_,1),--c}}},{key:"_removeData",value:function(t){this._getData(t,!0)}},{key:"_fixMenuUI",value:function(a){a.is(":visible")&&t.Helpers.fixHeight(a)}},{key:"_resetLabels",value:function(t){this._opts.handleAccessKeyNavigation&&this._refreshLabelArray(t)}},{key:"setLastOverlayedMenu",value:function(t,a){this._lastOverlayedMenu=t,a||t[0]===this.element[0]||this._setLastOverlayedSubMenu(t)}},{key:"_findMain",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.element;return(t.data("parent")?this._findParentMenu(t):t).closest(".zmenu")}},{key:"show",value:function(a,o){var l=this;a=a?Object.create(a):{};var i=this._opts,s=a.event||{},r=n(a.appendTo||i.appendTo),d=n(a.forElement||i.forElement),c=a.isSubMenu=!!o,_=this._DIRECTIONS,u=a.direction,p=i.direction,m=i.isRightClick||"at-cursor"===(u||p),g=m?"callout"===i.displayType?_.pointer:_.menu:u||p;if((o=o||this.element).data("forElement",d),!1===this._triggerEvent(c?"beforesubmenushow":"beforeshow",s,o,void 0,{currentTarget:m?s.target:d}))return a;this._updatePopupList(!0);var v=c?t.menu(o).getAttributes():this._opts,y=this._isGridMenu(o),f=a.offset||(c?v.offset:i.offset)||void 0;c||this._bindRuntimeEvents(),this.setLastOverlayedMenu(o),(i.pointer||"callout"===i.displayType)&&!c&&(a=this._getCalloutDetails(a)),a.direction=u?"auto"===u?g:u:c?_.submenu:"auto"===p?g:p,a.positionAlterable="at-cursor"!==p&&!m||c?a.positionAlterable||i.positionAlterable||(c?"flipfit":"auto"===p||"at-cursor"===p):"fit",o.css("min-width",""),this._showOptions=n.extend(!0,{},{forElement:d,isSubList:c,isGrid:y,renderInPlace:i.renderInPlace,position:i.position,minWidth:"icon"===v.contentType?null:v.minWidth,maxWidth:v.maxWidth,width:v.width,height:v.height,offset:f,contentType:v.contentType,appendTo:r,within:a.within,viewport:i.viewport,event:a.event,animation:v.animation,isContextual:m,direction:a.direction,positionAlterable:a.positionAlterable,rtl:v.rtl,columns:v.columns,alterBorderRadius:!(i.position||a.position),isRightClick:i.isRightClick,hideMethodName:"_hide",hideEventName:"hide",cname:"zmenu",arrowElement:this._pointerElement,arrowCallback:a.arrowCallback,scroll:i.scroll,isCE:v.isCE,getAllMenuItems:function(t,a,o,n){return l._getAllMenuItems(t,a,o,n)},onShow:function(t,n,i){l._handleMenuOpen(o,c,a,i)},onShowWithAnimation:function(t,n,i){l._openWithAnimation(o,a,i)},onToggle:function(){l.hide(o,i)},displayScrollers:function(t){var a=(t?"_":"_un")+"initSliders";(t||l[a])&&l[a](o,void 0,!0)},beforeFocus:function(){return l._triggerEvent(c?"beforesubmenufocus":"beforefocus",{})}},a),c||(this._posOptions=this._showOptions,this._posOptions.menuElement=o);var k=t.Helpers.open(o,this._showOptions);return k?(o.data("positionOpts",Object.create(a)),a.position=k.pos,a):a}},{key:"_handleMenuOpen",value:function(t,a,o){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};this._resetLabels(t),t.attr("aria-hidden",!1),this._triggerEvent((a?"submenu":"")+"show",o.event,t,void 0,n)}},{key:"selectHoveredMenuItem",value:function(){var t=this._lastOverlayedMenuItem;return t&&n(t).trigger("mouseup"),t}},{key:"hoverMenuItem",value:function(t){return(t=n(t)).length?void this._mouseenterHandler({target:t[0]}):((t=this._lastOverlayedMenuItem)&&this._updateHoverState(t,!1),void(this._lastOverlayedMenuItem=void 0))}},{key:"_updateHoverState",value:function(t,a){var o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:this._getData(t),n="on-hover";t[(a?"add":"remove")+"Class"](n),a||t.removeClass("has-focus"),o.className=a?o.className+" "+n:o.className.replace(/on-hover/g,"")}},{key:"_isGridMenu",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.element,o=(1<arguments.length?arguments[1]:void 0)?t.closest(".zmenu"):t;if(o.length)return"grid"===this.getMenuType(o)||o.hasClass("zmenu--thumbnail")||o.find(".zmenu--thumbnail").length}},{key:"getMenuType",value:function(a){return a&&a.data("isExternalSubmenu")?t.menu(a).getMenuType():this._opts.type}},{key:"getMenuItemAt",value:function(t){var a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.element,o=2<arguments.length?arguments[2]:void 0,n=a.find(".zmenu__item:eq(".concat(t,")"));return o?this._getData(n):n}},{key:"_setFocus",value:function(){var t=this;clearTimeout(this._focusTimer),this._triggerEvent("beforefocus",{})&&(this._focusTimer=setTimeout(function(){return t.element.focus()},100))}},{key:"callRender",value:function(t){this._data.itemAttrChange=t,this._render(),this._data.itemAttrChange=!1}},{key:"_hide",value:function(t){this.hide(void 0,t)}},{key:"hide",value:function(){var a=this,o=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.element,l=1<arguments.length?arguments[1]:void 0,s=this.element,i=this._opts;if(s&&o){var r=o.data("parent"),d=!!(o[0]!==s[0]||r&&r.is(".zmenu__item")&&!l);t.Helpers.close(o,{renderInPlace:i.renderInPlace,animation:i.animation,beforeHide:function(){var t=a._triggerEvent((d?"beforesubmenu":"before")+"hide",l,o);if(!1!==t){d||a._hideParentMenu(o,l&&l.originalEvent?l.originalEvent:l,!0);for(var p,c="on-hover",_=n("".concat(a._SELECTORS.item,".").concat(c),o),u=0;u<_.length;u++)(p=n(_[u])).is(".zmenu--split")&&p.find(".zmenu__icon.zh-alignright").removeClass(c),a._updateHoverState(p,!1),p.removeClass("has-focus");if(o[0]===s[0])a._lastOverlayedMenuItem=void 0;else{var m=r.parent();m.is(".zmenu__body, .zmenu__header, .zmenu__footer")&&(m=m.parent()),a.setLastOverlayedMenu(m)}a._isToBeDelayed=!1}return t},onHide:function(){a._handleMenuClose(o,d,l)},onHideWithAnimation:function(){a._closeWithAnimation(o,d,l)}})}}},{key:"_handleMenuClose",value:function(t,a,o){!a&&this._isContainer&&"slider"===this._opts.scroll&&this._uninitSliders&&this._uninitSliders(t),t.removeClass("zh-scroll_y").find(".zh-scroll_y").removeClass("zh-scroll_y"),t.find(".has-focus, .on-hover").removeClass("has-focus on-hover"),this._resetLabels(t),t.attr("aria-hidden",!0),this._triggerEvent((a?"submenu":"")+"hide",o,t)}},{key:"_triggerEvent",value:function(t){var a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:this.element,l=3<arguments.length?arguments[3]:void 0,i=4<arguments.length?arguments[4]:void 0,s=(l=l||n(a.target).closest(".zmenu__item")).length,r=o[0]===this.element[0],d={originalEvent:a,forElement:o.data("forElement"),target:o.data("forElement"),offset:this._offset||o.offset(),menu:o,isBaseMenu:r,menuitem:l,data:s?i:void 0,itemValue:s&&i&&i.itemValue};return i&&(d=n.extend(!0,{},i,d)),-1!==t.indexOf("submenu")&&"beforesubmenufocus"!==t?this._triggerEventToSubmenu(t,a,d,o):this._dispatchEvent(t,a,d,o)}},{key:"triggerEvent",value:function(){return this._dispatchEvent.apply(this,arguments)}},{key:"_getLayout",value:function(t){return this.isCE?"WC"+t.replace(/./,function(t){return t.toUpperCase()}):t}},{key:"_closeWithAnimation",value:function(a,o,n){var l=this,i=this._opts.animation;if(o&&(i=a.data("zmenu")._opts.animation),i.close){var s=(i=i.close||i.hide).className,r=i.name,d=i.duration?i.duration:0,c=function(){l._handleMenuClose(a,o,n),t.Helpers.removeScrollClass(a)};s?a.addClass(s).on(t._animationEnd,function(){a.removeClass(s),l._display(!0,a),c&&c(),c=void 0,a.off(t._animationEnd)}):"object"===_typeof(r)?a.animate(r,d,c):this._opts.EFFECTS[r]&&(!d&&(d=400),a[this._opts.EFFECTS[r].close](d,c)),o&&a.data("parent").closest(".zmenu").data("waitingTime",d)}else 0<a.data("waitingTime")?window.setTimeout(function(){l._display(!0,a),l._handleMenuClose(a,o,n),a.data("waitingTime",0)},a.data("waitingTime")):(this._display(!0,a),this._handleMenuClose(a,o,n))}},{key:"_openWithAnimation",value:function(a,o,n){var l=this,i=this._opts.animation,s=o.isSubMenu;if(s&&(i=a.data("zmenu")._opts.animation),i.open){var r=(i=i?i.open||i.show:o.animation.open||o.animation.show).className,d=i.name,c=i.duration?i.duration:0,_=function(){l._handleMenuOpen(a,s,o,n)};r?(this._pointerElement&&this._pointerElement.show().addClass(r),this._display(void 0,a),a.addClass(r).on(t._animationEnd,function(){a.removeClass(r),_&&_(),_=void 0,a.off(t._animationEnd)})):"object"===_typeof(d)?(this._pointerElement&&this._pointerElement.show().animate(d,c,_),this._display(void 0,a),a.animate(d,c,_)):this._opts.EFFECTS[d]&&(!c&&(c=400),this._pointerElement&&this._pointerElement[this._opts.EFFECTS[d].open](c,_),a[this._opts.EFFECTS[d].open](c,_))}else s&&(this._display(void 0,a),this._pointerElement&&this._pointerElement.show(),this._handleMenuOpen(a,s,o,n))}},{key:"_storeAllPortionItems",value:function(){var l,s,r,t=this._SELECTORS,a=["header","menu","footer"],o=this._data,n=this._opts;o.headerItems=[],o.footerItems=[];for(var d=0;3>d;d++)l=a[d],s=this.element.find(t[l]),((r=1==d)||s.length||n[l])&&(l=r?"body":l,this._storeMenuItemDetails(r?"":l,s.length?s:void 0));this._updateSectionCls("grid"===n.type,o,!0)}},{key:"_setCustomAttrsForItems",value:function(t,a){for(var o=[],n=["headerItems","items","footerItems"],l=0;3>l;l++)o=o.concat(this._setCustomAttrsForItem(t,a,n[l]));return o}},{key:"_updateSectionCls",value:function(a,o,n){for(var c,_,u,p,l=this.parts,s=this._opts||{},r=this._SELECTORS,d=0;3>d;d++)p="zmenu__"+(c=l[d])+((u=(_=this.element.find(n?r[c]:".zmenu__"+c)).length&&t._getOpts(_).type||s[c+"Type"]||s.type)&&"list"===u||!a?"":" zmenu--thumbnail"),n&&!s.allowReplace&&_&&_[0]!==this.element[0]&&(o[c+"Element"]=_[0],_.addClass(p)),o[c+"ClassName"]=p}},{key:"_changeArrowIcon",value:function(){for(var a=this._opts,o=this.element.find(".zmenu--submenu,.zmenu--split"),l=0;l<o.length;l++)this._getData(n(o[l])).arrowIcon=t._getIconInfo(a.arrowIconClassName||a.arrowIconClass,a.arrowSVGIconId,"zc__svg--arrow zmenu__arrow zh-arrowicon","zmenu__icon zh-alignright")}},{key:"_hideAllSubmenus",value:function(t,a,o){for(var l=t.find(this._SELECTORS.item),s=0;s<l.length;s++){var r=n(l[s]),c=this._getData(r).submenu;c&&c.is(":visible")&&(this._hideAllSubmenus(c,a,o),!o&&r.trigger("mouseleave"))}this._isToBeDelayed=!1}},{key:"_findParentMenu",value:function(t){for(var o,a=t.data("parent");a;)(o=a.closest(".zmenu")).is(":visible")?a=(t=o).data("parent"):a=!1;return t}},{key:"_setLastOverlayedSubMenu",value:function(a){t.menu(this._findMain()).setLastOverlayedMenu(a,!0)}},{key:"_getSubmenu",value:function(a){var o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this._getData(a);if(o.submenu)return o.submenu;var l=o.menuId,i=l?n("#".concat(l)):a.children("".concat(this._SELECTORS.container,":not(.zmenu__iconcontainer):first"));if(i.length){var s=t._getOpts(i);return l||n(s.appendTo?s.appendTo:"body")[0].appendChild(i[0]),s.rtl=this._opts.rtl,i.data("zmenu")||t.menu(i),o.submenu=i,i.data({isExternalSubmenu:!0,parent:a}),i}}},{key:"_openCloseSubmenu",value:function(t,a){var o=!1;if(this._opts.rtl?"left"===t:"right"===t){var l=this._lastOverlayedMenu.find(".on-hover"),i=this._getSubmenu(l);if(!i||!i.length)return;this.show({forElement:this._lastOverlayedMenuItem,event:a},i),this._lastOverlayedMenuItem=void 0,i.find("".concat(this._SELECTORS.visibleItems,":first")).trigger("mouseenter"),this._lastOverlayedMenu=i,o=!0}else this._isMenuMainMenu(this._lastOverlayedMenu)||this._hideLastShownMenu();!1!==this._triggerEvent(o?"beforesubmenufocus":"beforefocus",{},o?void 0:this._lastOverlayedMenu)&&this._lastOverlayedMenu&&this._lastOverlayedMenu[0].focus()}},{key:"_handleMouseEnterOnSubmenuItem",value:function(t,a,o){clearTimeout(this._menuTimeout),"splitmenu"===o.itemType?this._mouseEnterOnSplit(t,a,o):"keydown"!==a.type&&this._showSubmenu(t,a,o)}},{key:"_handleMouseLeaveOnSubmenuItem",value:function(t,a){if(!!a.originalEvent){if(!t.parent().has(a.relatedTarget).length){if(t.data("submenu")&&this._isMenuOfMenuItemShown(t))return!1;this._setLastOverlayedMenuItem(void 0)}return!1}var l=this._getData(t),i=l.submenu;if(this._isMenuOfMenuItemShown(t)&&(!a||n(a.relatedTarget).closest(".zmenu")[0]===i[0]))return!1;("splitmenu"===l.itemType&&this._mouseLeaveOnSplit(t),clearTimeout(this._menuTimeout),n(i).data("parent")&&n(i).data("parent")[0]===t[0])&&(this.hide(i),!1!==this._triggerEvent("beforefocus",{})&&this.element[0].focus(),this.element.off("mousemove"+this._namespace));return!0}},{key:"_isMenuOfMenuItemShown",value:function(t){var a=this._getData(t);return a.submenu&&a.submenu.is(":visible")}},{key:"_isElementInMenu",value:function(t){return(1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.element)[0].contains(n(t)[0])}},{key:"_removeAllSubmenus",value:function(a){for(var s,o=a.find(".zmenu--submenu,.zmenu--split"),l=0;l<o.length;l++)(s=this._getData(n(o[l]),void 0,a))&&s.usingJSON&&this._removeAllSubmenus(s);t.menu(a).destroy(),a.remove()}},{key:"_showSubmenu",value:function(t,a,o,n){var l=this,i=!!a&&"keydown"!==a.type&&!!a.originalEvent,s=o.submenu||this._getSubmenu(t,o);if(t.data("submenu")||t.data("submenu",s),s&&i){s.data("parent",t),this._hideAllSubmenus(t.closest(".zmenu"));this._menuTimeout=setTimeout(function(){if(t.is(":visible")){var o={forElement:t,direction:s.data("zmenu")._opts.submenuDirection?s.data("zmenu")._opts.submenuDirection:l._DIRECTIONS.submenu};o=l.show(o,s),l._clearMouseHoverTimeout(),l._mousex=a.clientX,l._prevmousex=a.pageX,l._bindMousemoveEvent(s,o.position&&o.position.direction||o.direction),!1!==l._triggerEvent("beforesubmenufocus",{})&&s&&s[0].focus()}},n?0:100)}}},{key:"_bindMousemoveEvent",value:function(t,a){var o=this,n=t.data("elementPosition"),l=t.data("parent").closest(".zmenu").data("elementPosition"),i=0!==a.indexOf("left");this.element.on("mousemove"+this._namespace,function(t){o._isToBeDelayed=o._prevmousex&&(i?o._prevmousex<=t.pageX:o._prevmousex>=t.pageX)&&(i?t.pageX<=n.left:t.pageX>=l.left),o._prevmousex=t.pageX})}},{key:"_isMenuMainMenu",value:function(t){var a=t.data("forElement");return!(a&&(a.hasClass("zmenu--submenu")||a.hasClass("zmenu--split")))&&n(t)[0]===this.element[0]}},{key:"_hideLastShownMenu",value:function(){var a=this._lastOverlayedMenu.data("parent");this._lastOverlayedMenuItem=a,this.hide(this._lastOverlayedMenu);var o=a.closest(".zmenu");this.setLastOverlayedMenu(o);var n=t.menu(o);n._lastOverlayedMenuItem=a,n._lastOverlayedMenu=o}},{key:"_clearMouseHoverTimeout",value:function(){var a=t._getOpts(this.element);if(clearTimeout(a.mouseOverTimeout),clearTimeout(a.mouseOutTimeout),void 0!==this.element.data("parent")){var o=t._getOpts(this.element.data("parent").closest(".zmenu"));clearTimeout(o.mouseOverTimeout),clearTimeout(o.mouseOutTimeout)}}},{key:"_checkSubmenuEnter",value:function(a){var o=!!a.originalEvent,l=function(){this._handleMouseEnterOnMenuItems(a,!a.originalEvent)};if(this._clearMouseHoverTimeout(),o){var i=n(this.element.data("forElement"));i.is(".zmenu__item")&&(i.closest(".zmenu").data("zmenu")._isToBeDelayed=!1),this._isToBeDelayed?t._getOpts(this.element).mouseOverTimeout=setTimeout(l.bind(this),this._opts.submenuHideDelay):(l.bind(this)(),clearTimeout(this._mouseoutTimer))}else l.bind(this)(),clearTimeout(this._mouseoutTimer)}},{key:"_checkSubmenuLeave",value:function(a){var o=!!a.originalEvent,l=n(a.target).closest(".zmenu__item"),i=function t(){o&&this._isToBeDelayed?this._mouseoutTimer=setTimeout(t.bind(this),20):this._handleMouseLeaveOnMenuItems(a),clearTimeout(this._mouseoutTimer)};o&&(l.data("submenu")||t._getOpts(this.element).mouseOverTimeout)?t._getOpts(this.element).mouseOutTimeout=setTimeout(i.bind(this),10):i.bind(this)()}},{key:"_triggerEventToSubmenu",value:function(a,o,n,l){var i=l.data("parent").closest(".zmenu");return t.menu(l).triggerEvent(a.replace("submenu",""),o,n),t.menu(i).triggerEvent(a,o,n,i)}},{key:"_mouseEnterOnSplit",value:function(t,a,o){var n=this;clearTimeout(this._splitDelay),this._splitDelay=window.setTimeout(function(){n._hoverSplit(t,!0),"keydown"!==a.type&&n._showSubmenu(t,a,o)},150)}},{key:"_mouseLeaveOnSplit",value:function(t){this._hoverSplit(t)}},{key:"_hoverSplit",value:function(t,a){t.find(".zmenu__icon.zh-alignright")[a?"addClass":"removeClass"]("on-hover"),clearTimeout(this._splitDelay)}},{key:"_refreshLabelArray",value:function(t){this._labelList=[],this._prevSKey=this._prevKTime=this._prevSIndex="";for(var s,a=t.find(".zmenu__item:not(.zmenu__title):not(.is-disabled):not(.zmenu__separator):visible"),o=a.length,l=0;l<o;l++)s=a[l],this._labelList.push({text:s.getAttribute("data-label")||n(s).find(".zmenu__text").text()||"",itemId:s.id})}},{key:"_callMenuitemSearch",value:function(t,a){var o=!1;this._prevKTime&&700<a-this._prevKTime?(o=this._prevSKey===t,this._prevSKey=t):this._prevSKey+=t,this._prevKTime=a,this._menuitemSearch(o)}},{key:"_menuitemSearch",value:function(t){for(var a=this._labelList,o=a.length,n=new RegExp("^"+this._prevSKey.replace(/[|()[{.+*?$\\]/g,"\\$0"),"i"),l=t&&this._prevSIndex<o?this._prevSIndex+1:0,i=l=0<l&&l<o?l:0;i<o;i++)if(n.test(a[i].text)){for(var s=-1,r=i+1;r<o;r++)if(n.test(a[r].text)){s=i;break}return this._prevSIndex=s,void this._handleMouseEnterOnMenuItems({target:"#"+a[i].itemId},!0)}}},{key:"addMenuItems",value:function(t,a,o){return this._fetchAndRender(t,a,!0,o)}},{key:"replaceMenuItems",value:function(t,a,o){var n=this._data;this._removeCustomAttrs(t),n.headerItems=n.footerItems=n.items=[];var l=this._lastOverlayedMenuItem;return l&&l.length&&l.removeClass("on-hover"),this._lastOverlayedMenuItem=null,this._itemsHavingAttrs=[],this._fetchAndRender(t,a,void 0,o)}},{key:"_fetchAndRender",value:function(t,a,o,n){var l=this._fetchItemDetails(t,o);return this._invokeRender(a,l,void 0,void 0,n)}},{key:"_removeCustomAttrs",value:function(t){for(var n,l,i,a=this.parts,o=0;3>o;o++)n=a[o],l=this._data[1==o?"items":n+"Items"],(i=t[n])&&l&&l.length&&this._removeCustomAttrsOf(l,i)}},{key:"_removeCustomAttrsOf",value:function(t,a){if(t&&t.length){for(var l,s,o=0;o<t.length&&o<a.length;o++)l=t[o],-1!==this._itemsHavingAttrs.indexOf(l.id)&&((s=l.customAttributes)&&(Object.keys(s).forEach(function(t){s[t]=null}),a[o].customAttributes=n.extend(!0,{},s,a[o].customAttributes)));this._itemsHavingAttrs=[]}}},{key:"_invokeRender",value:function(t,a,o,l,s){var r=this.element,d=this.isCE;if(d&&(this._addedByComponent=!0),this._isContainer&&this._updateSectionCls("grid"===this._opts.type,this._data),this._opts.allowReplace||l)this._render();else for(var u,p,m,c=this.parts,_=0;3>_;_++)u=1==_?"items":c[_]+"Items",this._data[u]&&(p=this._data[u],(m=(m=this.element.find(".zmenu__"+c[_])).length||1!==_?m:this.element).length?this._render(p,"items",this.element.find(".zmenu__"+c[_])[0]):this._render());d&&(this._addedByComponent=!1);var g=[];return a&&(g=o?n("#"+a.id):this[this._isContainer?"_setCustomAttrsForItems":"_setCustomAttrsForItem"](a)),t&&t(g,a),s||this._fixMenuUI(r,r.data("positionOpts")),this._resetLabels(r),g}},{key:"_fetchItemDetails",value:function(t,a){var c,_,u,p,o={items:[],headerItems:[],footerItems:[]},l=this._data,s=t instanceof n?t:Object.create(t),r=s.length,d=this._opts;if(s instanceof Array)for(u=0;u<r;u++)_=(c=this._getItemDetails(s[u],d)).index,o[p=c.isHeader?"headerItems":c.isFooter?"footerItems":"items"].push(c),a&&this._updateItemList(c,p,_);else{var g,h,v,m=this.parts;for(u=0;3>u;u++)if(g=s[m[u]]){for(v=1===u?"items":m[u]+"Items",h=0;h<g.length;h++)_=(c=this._getItemDetails(g[h],d)).index,o[v].push(c);a&&this._updateItemList(c,p,_)}}return a||(l.headerItems=o.headerItems,l.footerItems=o.footerItems,l.items=o.items),o}},{key:"_updateItemList",value:function(t,a,o){var n=this._data;this._isNotNull(o)?n[a].splice(o,0,t):n[a].push(t)}},{key:"addCustomMenuItem",value:function(t,a){t[0]._constructed||"true"===t.attr("_constructed")||this.addMenuItem(t,a)}},{key:"removeMenuItems",value:function(t){if(t)for(var a=0;a<t.length;a++)this.removeMenuItem(t[a],!0);else{var o=this._data;o.headerItems=[],o.footerItems=[],o.items=[],o.headerElement=o.bodyElement=o.footerElement=this._lastOverlayedMenuItem=null}this._invokeRender(void 0,void 0,void 0,!0)}},{key:"removeMenuItem",value:function(t,a){var o=this.element;if((t=n(t,o)).length&&this._data.rendered&&t.attr("role")){var l=t.attr("name");this._removeData(t);var i=l?n("#"+l+".zmenu__title"):void 0;if(i&&i.length)o.find(".zmenu__item[name="+l+']:not(.zmenu__title):not([data-unique-key="'+t.attr("data-unique-key")+'"])').length||this._removeData(i);a||this._invokeRender()}}},{key:"addMenuItem",value:function(a,o){if(!this._addedByComponent){var l=a instanceof n||1===a.nodeType?n(a):void 0;"object"===_typeof(a)&&(a=Object.create(l?t._getOpts(l):a));var r,s=a.customAttributes||{};for(var d in this._propNames)a[r=this._propNames[d]]&&(s[r]=a[r]);a.isHeader&&(a.contentType=this._opts.headerContentType),a.isFooter&&(a.contentType=this._opts.footerContentType);var i=(a=this._getItemDetails(a,this._opts,l&&l[0])).index,c=a.isHeader?"headerItems":a.isFooter?"footerItems":"items";this._updateItemList(a,c,i);var _=a.menuItems;return _&&"object"===_&&(o=void 0),l&&l[0].parentNode.removeChild(l[0]),this._invokeRender(o,a,!0)}}},{key:"_getAllMenuItems",value:function(t,a,o,n,l){return t&&t.length||(t=this.element),t.find(".zmenu__item:not(.zmenu__title".concat(l?",.zmenu__separator":"").concat(a?",.zmenu--thumbnail":"").concat(o?",li ul[mtype=submenu] li":"",")").concat(n?":visible":""))}},{key:"_getCalloutDetails",value:function(t){var a=this;return this._changeCalloutData(!0),t.arrowCallback=function(t,o){a._arrowDirection=o,t.removeClass("zh-top zh-bottom zh-right zh-left").addClass("zh-".concat(o))},t}},{key:"_changeCalloutData",value:function(t){return t&&this._pointerElement&&this._pointerElement.length?this._pointerElement.removeClass("zh-top zh-bottom zh-left zh-right"):(this._data.callout=!!t,void this._render())}},{key:"_getIconDetails",value:function(t,a,o,n){var l=t.itemType,i=n?"zmenu__image":"zmenu__icon",s=l[0].toUpperCase()+l.slice(1),r=a["checked".concat(s,"ItemIconClass")]||a["checked".concat(s,"ItemIconClassName")]||"",d=a["checked".concat(s,"ItemSVGIconId")],c=d&&d.split(" ")[0],_=d?d.split(" ").slice(1).join(" "):"",u="#zc__svg--".concat("radio"===l?"round":"tick");if(n||t.iconClass||t.iconClassName&&t.iconClassName.trim()!==i&&t.iconClassName.trim()!==(i+" "+r).trim()||t.SVGIconId&&t.SVGIconId!==u&&t.SVGIconId.slice(1)!==c){var p=t.className.replace(/is-selected/g," ");o&&(p+=" is-selected"),t.className=p}else o?(t.iconClassName=i+" "+r,t.SVGIconId=!r&&(c||u),t.SVGIconId&&-1===t.SVGIconId.indexOf("#")&&(t.SVGIconId="#"+t.SVGIconId),t.SVGIconClassName=("radio"===l?"zmenu__radio":"zmenu__tick")+" "+_):(t.iconClassName===i+" "+r&&(t.iconClassName=i),t.SVGIconId&&(t.SVGIconId===u||t.SVGIconId.slice(1)===c)&&(t.SVGIconId=void 0));return t.iconAsPrefix=t.customType,t}},{key:"_checkMenuItem",value:function(t,a,o){this["radio"===(o=this._getData(t)).itemType?"_handleRadioItem":"_addCheckedStateIcon"](t,a,o)}},{key:"_addCheckedStateIcon",value:function(a,o,n,l){var i=this._isGridMenu(a,!0);if(a.find("i:first").length){var r=this._getData(a),d=(r=this._getIconDetails(r,t.menu(this._lastOverlayedMenu)._opts,o,i)).attrs||{};d.checked=d["aria-checked"]=r.checked=o,r.attrs=d,this._itemsHavingAttrs.push(r.id),l||t.menu(a.closest(".zmenu")).callRender(!this._opts.allowReplace)}a.prop("checked",o)}},{key:"_handleRadioItem",value:function(t,a,o,l){if(a)for(var u,s=n(t).attr("name"),r=this._SELECTORS,d=t.closest(r.menu),c=(d=d.length?d:t.closest(r.container)).find("".concat(r.item,"[role=menuitemradio][name=").concat(s,"]")),_=0;_<c.length;_++)((u=n(c[_])).prop("checked")||u.attr("checked"))&&this._addCheckedStateIcon(u,!1,this._getData(u),l);this._addCheckedStateIcon(t,a,o,l)}},{key:"_changeCheckedIcons",value:function(){for(var l,t=this._opts,a=this.element.find('[role="menuitemradio"],[role="menuitemcheckbox"]'),o=0;o<a.length;o++)(l=this._getData(n(a[o]))).iconClass=void 0,l.iconClassName=l.SVGIconId="",l=this._getIconDetails(l,t,l.checked)}},{key:"_clearRadioCheckboxData",value:function(t){var a=t.itemType,o=a[0].toUpperCase()+a.slice(1),n=this._opts,l=n["checked".concat(o,"ItemIconClass")]||n["checked".concat(o,"ItemIconClassName")]||"",i=n["checked".concat(o,"ItemSVGIconId")],s="#zc__svg--".concat("radio"===a?"round":"tick");(t.iconClassName===l||t.SVGIconId===s||t.SVGIconId&&0<=t.SVGIconId.indexOf(i))&&(t.SVGIconId=t.iconClassName=null)}},{key:"_setAttribute",value:function(a,o){this._addedByComponent=this.isCE;var n=this.element,i=this._data,s=n.is(":visible"),r=this._opts,d=!1;if("headerContentType"===a)this._sameheaderct=!1;else if("footerContentType"===a)this._samefooterct=!1;else if("height"===a||"width"===a){var c=parseInt(o);r[a]=c,n.data(a,c),s&&("height"===a?t.Helpers.fixHeight(n,{height:c}):n.width(c))}else if("pointer"===a||"displayType"===a)this._changeCalloutData(o&&"box"!==o);else if("renderInPlace"!==a||o)if("handleAccessKeyNavigation"===a)t.keyboardnavigation(n).setAttribute("characterKeyFocus",o);else if("contentType"===a){var _=l._CONTENT_TYPES;this._updateClass(_[o],_[r.contentType]);var u=r.contentType;r.contentType=o,this._sameheaderct&&(r.headerContentType=o),this._samefooterct&&(r.footerContentType=o),this._changeOpt("contentType",o,u)}else if("type"===a){r.type=o;var p="grid"===o;this._isContainer?this._updateSectionCls(p,i):this._updateClass(p?"zmenu--thumbnail":"",p?"":"zmenu--thumbnail"),"text"!==r.contentType&&this._changeOpt("type",p)}else("header"===a||"footer"===a||"body"===a||"items"===a)&&this.addMenuItems("items"===a?o:_defineProperty({},a,o));else n.removeClass("zmenu--inline");r[a]=o,"columns"===a&&s?t.Helpers.fixGridWidth(n,{columns:o}):-1!==["scrollDownArrowIconClass","scrollDownArrowIconClassName","scrollDownArrowSVGIconId","scrollUpArrowIconClass","scrollUpArrowIconClassName","scrollUpArrowSVGIconId"].indexOf(a)&&i.scroller?this._changeScrollerIcons(-1===a.indexOf("Down")?"Up":"Down",i):"arrowIconClassName"===a||"arrowIconClass"===a||"arrowSVGIconId"===a?this._changeArrowIcon():("checkedCheckboxItemSVGIconId"===a||"checkedCheckboxItemIconClassName"===a||"checkedCheckboxItemIconClass"===a||"checkedRadioItemSVGIconId"===a||"checkedRadioItemIconClassName"===a||"checkedRadioItemIconClass"===a)&&this._changeCheckedIcons(a,o),(-1!==a.indexOf("Icon")||"contentType"===a||"type"===a)&&(d=!0),this._domChanged||(this._domChanged=d),this._addedByComponent=!1}},{key:"_changeOpt",value:function(t,a,o){for(var s,n=["headerItems","items","footerItems"],l=0;3>l;l++)(s=this._data[n[l]])&&s.length&&("contentType"===t?(1===l||this._opts[(0===l?"header":"footer")+"ContentType"]===a)&&this._changeItemData(s,a,t,o):this._changeItemData(s,a,t,o))}},{key:"_changeItemData",value:function(t,a,o,n){var l=this,i="zmenu__icon",s="zmenu__image",r=a?s:i;t.forEach(function(t){"contentType"===o?t.contentType="itemgroup"===t.itemType?"text":n===t.contentType?a:t.contentType:"text"!==l._opts.contentType&&(t.iconClassName=t.iconClassName?t.iconClassName.replace(a?i:s,r):r)})}},{key:"setMenuItemsAttribute",value:function(a,o,s,r){this._addedByComponent=!0;for(var u,p,d=["itemValue","action","disabled","checked","hidden","className","menuId","description","label","SVGIconId","iconClassName"],c=this._opts,_=0;_<a.length;_++)if((p=n(a[_],this.element)).length){if("itemgroup"===(u=this._getData(p)).itemType&&"itemgroup"!==o){var m=n("[name=".concat(p.attr("name"),"]:not(.zmenu__title)"),this.element);m.length&&this.setMenuItemsAttribute(m,o,s)}if(-1!==d.indexOf(o)&&("checked"===o&&u.checked&&""===s&&(s="checked"),"label"===o&&(u.encodedLabel=s,!c.isLabelHTMLEncoded&&(u.encodedLabel=t.encodeHTML(s))),u[o]=s),"customAttributes"===o)u.customAttributes=n.extend(!0,{},u.attrs||{},s);else if("innerHTML"!==o&&"zinnerHTML"!==o||"custom"!==u.itemType&&!u.custom)if("shortcutKey"===o)s=t.ShortCut?t.ShortCut.getInfo(u.action,p,!0):s,u[o]=s;else if("itemType"===o){var g=u.itemType;u.className=u.className.replace(l._ITEM_TYPES["radio"===g||"checkbox"===g?"default":g],""),("radio"===g||"checkbox"===g)&&this._clearRadioCheckboxData(u),u[o]=s}else"checked"===o?this._handleRadioItem(p,u.checked,u,!0):"menuId"===o&&u.submenu&&(u.submenu=null);else u.innerHTML=c.isCustomHTMLEncoded?s:t.encodeHTML(s);u=this._getItemDetails(u,c,void 0,!0),"itemValue"===o&&"action"===o||r||(this._addedByComponent=this.isCE,this._data.itemAttrChange=!c.allowReplace,this._render(),this._data.itemAttrChange=!1)}this._addedByComponent=!1}},{key:"_initSliders",value:function(a){var o=t.menu(a).getData(),n=a.find(".zmenu__body").length?a.find(".zmenu__body"):a;o.scroller||(this._getScrollInfo(o),this._getScrollInfo(o,!0),t.menu(a).callRender(),this._bindSliderEvents(n,o)),this._positionSliders(n,o)}},{key:"_positionSliders",value:function(t,a){var r,d,c,_,o=t.closest(".zmenu"),n=a.scroller,l=n.upEle,i=n.downEle,s=t.position();if(o.length){var u=t.parent();_=s.top+t.height()-i.outerHeight(!0),a.footerItems.length||(_+=parseInt(u.css("padding-bottom"))),r=d="0px",c=s.top-(a.headerItems.length?0:parseInt(u.css("padding-top")))}else c=s.top+1,r=d=s.left+1,_=s.top+(t.outerHeight()-i.outerHeight(!0)-1);i.show(),l.css({left:r,top:c}),i.css({left:d,top:_})}},{key:"_bindSliderEvents",value:function(a,o){var l=this,i=a.closest(".zmenu"),s=i.find(".zmenu--scrollerup"),r=i.find(".zmenu--scrollerdown");o.scroller.upEle=s,o.scroller.downEle=r;var d=this._namespace;s.add(r).off("mouseenter mouseleave").on("mouseenter",function(t){l._startScroll(a,n(t.target).closest(".zmenu--scroller").hasClass("zmenu--scrollerup"))}).on("mouseleave",function(){l._stopScroll(a)}).hide();var _="click"+d;s.add(r).off(_).on(_,function(t){var o=n(t.target).hasClass(".zmenu--scrollerup"),i=c(a.scrollTop());return l._stopScroll(a),a.scrollTop(i+(o?-1:1)),l._startScroll(a,o),!1});var u="mousewheel"+d;t.Browser.isFirefox&&(u+=" wheel"+d),a.off(u).on(u,function(t){t.preventDefault(),t.stopPropagation(),a.stop(),a.scrollTop(c(a.scrollTop())+(0<t.originalEvent.wheelDelta?-6:6)),l._showScrollEle(a)})}},{key:"_getScrollInfo",value:function(t,a){var o=a?"up":"down";t[o]||(t.scroller=t.scroller||{},t.scroller[o]={className:"zmenu--scroller zmenu--scroller"+o},this._changeScrollerIcons(o[0].toUpperCase()+o.slice(1),t))}},{key:"_showScrollEle",value:function(a){var o=t.menu(a.closest(".zmenu")).getData().scroller,n=c(a.scrollTop());o.upEle[0===n?"hide":"show"](),o.downEle[a[0].scrollHeight-n<=a.outerHeight()?"hide":"show"]()}},{key:"_startScroll",value:function(t,o){var n=this,l=o?0:t[0].scrollHeight-t.innerHeight(),i=c(t.scrollTop())-l,s=a(1e3*i/50);t.animate({scrollTop:l},{duration:s,easing:"linear",complete:function(){n._showScrollEle(t)}})}},{key:"_stopScroll",value:function(t){t.stop(),this._showScrollEle(t)}},{key:"_uninitSliders",value:function(a,o,n){var l=t.menu(a).getData(),i=l.scroller||{};a=a.find(".zmenu__body").length?a.find(".zmenu__body"):a,Object.keys(i).length&&n&&this._positionSliders(a,l),i.upEle&&i.upEle[o?"remove":"hide"](),i.downEle&&i.downEle[o?"remove":"hide"](),o&&(i=null)}},{key:"_changeScrollerIcons",value:function(t,a){var o=t.toLowerCase(),n=this._opts,l=n["scroll"+t+"ArrowIconClass"]||n["scroll"+t+"ArrowIconClassName"]||"";a.scroller[o].icon={iconClassName:"zmenu__icon "+l,SVGIconId:"#"+(n["scroll"+t+"ArrowSVGIconId"]||!l&&"zc__svg--"+o+"scroller"),SVGIconClassName:"zmenu__"+o+"scroller"}}},{key:"_destroy",value:function(a){var o=this.element;if(clearTimeout(this._focusTimer),o.removeData("positionOpts forElement parent isRightClick direction actualDirection arrowDirection arrowPosition availableHeight availableWidth elementPosition oldDirection pos zshowhide zscrEle"),t.keyboardnavigation(o).destroy(),o.off("."+this.name),!this.isCE){var l=this._opts;if(o.removeClass("zh-scroll_y"),l.usingJSON||a)for(var d,c,s=o[0].querySelectorAll(".zmenu--submenu,.zmenu--split"),r=0;r<s.length;r++)((c=(d=n(s[r])[0].itemData.hasSubmenu)&&n("#"+d)).data("usingJSON")||a)&&c.length&&this._removeAllSubmenus(c);if(!l.usingJSON){var u=this._data;u.callout=u.scroller=!1,u.headerClassName=u.bodyClassName=u.footerClassName="",this._pointerElement=void 0;for(var h,p=["headerItems","items","footerItems"],m=/zmenu__item|zmenu__title|zmenu__custom|zmenu__separator|is-disabled|is-fixed|is-selected|zh-dnone/g,g=0;3>g;g++)u[h=p[g]]&&this._changeDataForDes(u[h],m);this._render()}}}},{key:"_changeDataForDes",value:function(t,a){for(var n,o=0;o<t.length;o++)(n=t[o]).iconClassName=n.iconClass=n.SVGIconId=n.role=n.itemType=n.shortcutKey=n.description=n.hasSubmenu=n.menuId=n.checked=n.iconAsSuffix=n.iconAsPrefix=void 0,n.className=n.className.replace(a,""),n.layoutName=this._getLayout("destroyLayout")}},{key:"disableMenuItems",value:function(t){this._toggleDisState(t,!0)}},{key:"enableMenuItems",value:function(t){this._toggleDisState(t,!1)}},{key:"_toggleDisState",value:function(t,a){var o=this._SELECTORS;t||(t=a?this.element.find(o.item).filter(function(){return"none"!==n(this).css("display")}):this.element.find(".is-disabled")),this.setMenuItemsAttribute(t,"disabled",a)}},{key:"hideMenuItems",value:function(t){this._toggleMenuItems(t,!0)}},{key:"showMenuItems",value:function(t){this._toggleMenuItems(t,!1)}},{key:"_toggleMenuItems",value:function(t,a){var o=this._SELECTORS;t||(t=a?this.element.find(o.item+", "+o.separator).filter(function(){return"none"!==n(this).css("display")}):this.element.find(o.item+":not("+o.item+"[data-hidden=true])")),this.setMenuItemsAttribute(t,"hidden",a)}},{key:"_getCustItemInfo",value:function(a,o){var l,n=a.innerHTML||a.zinnerHTML;if(n){var s=n.replaceArray;if(l=n.content||n,s)for(var r=0;r<s.length;r++)l=l.replace("{"+r+"}",t.encodeHTML(s[r]))}if("object"==_typeof(l=o?o.innerHTML:l)){var d="";if(l.nodeType)d=l.outerHTML;else if(l instanceof Array)for(var c=0;c<l.length;c++)d+=l[c].outerHTML;l=d}a.innerHTML=this._opts.isCustomHTMLEncoded?l:t.encodeHTML(l),a.customType=!0}},{key:"name",get:function(){return"zmenu"}},{key:"attrs",get:function(){return{allowReplace:!0,constructMenu:!0,appendTo:null,arrowIconClass:null,arrowSVGIconId:null,checkedCheckboxItemIconClass:null,checkedCheckboxItemSVGIconId:null,checkedRadioItemIconClass:null,checkedRadioItemSVGIconId:null,columns:3,headerContentType:void 0,footerContentType:void 0,contentType:"text",direction:"auto",displayType:"box",forElement:null,menuClass:"",zclassName:"",height:null,usingJSON:!1,isCustomHTMLEncoded:!0,isLabelHTMLEncoded:!1,offset:null,pointer:!1,renderInPlace:!1,scroll:"slider",scrollDownArrowIconClass:null,scrollDownArrowSVGIconId:null,scrollUpArrowIconClass:null,scrollUpArrowSVGIconId:null,type:"list",toggle:!0,width:null,EFFECTS:{slide:{open:"slideDown",close:"slideUp"},fade:{open:"fadeIn",close:"fadeOut"}},maxWidth:null,minWidth:200,handleAccessKeyNavigation:!0,itemTagName:"li",groupTagName:"ul",viewport:null,menuItems:null,submenuHideDelay:300}}},{key:"props",get:function(){return{items:null,header:null,footer:null,body:null,arrowIconClassName:null,checkedCheckboxItemIconClassName:null,checkedRadioItemIconClassName:null,scrollDownArrowIconClassName:null,scrollUpArrowIconClassName:null,animation:{}}}},{key:"parts",get:function(){return["header","body","footer"]}},{key:"_DIRECTIONS",get:function(){return{menu:"bottom-left",submenu:"right-bottom",pointer:"bottom"}}},{key:"EVENTS",get:function(){return["beforeshow","beforehide","show","hide","beforesubmenushow","submenushow","beforesubmenuhide","submenuhide","itemhover","itemclick","beforefocus","keydown","submenuitemclick","beforesubmenufocus"]}},{key:"SELECTORS",get:function(){var t=this.isCE;return{container:t?"z-menu":"div",menu:t?"z-menubody":"ul:not([data-header]):not([data-footer])",body:t?"z-menubody":"ul:not([data-header]):not([data-footer])",header:t?"z-menuheader":"ul[data-header=true]",footer:t?"z-menufooter":"ul[data-footer=true]",group:t?"z-menuitemheading":"li[data-item-type=itemgroup]",item:t?"z-menuitem":"li",separator:t?"z-menuseparator":"li[data-item-type=separator]",visibleItems:".zmenu__item:not(.is-disabled):visible"}}},{key:"NAV_OPTS",get:function(){return{wrapAround:!0,handleHover:!1}}}],[{key:"_CONTENT_TYPES",get:function(){return{text:"",icon:"zmenu--icononly","icon-text":"zmenu--iconwithtext"}}},{key:"_ITEM_TYPES",get:function(){return{default:"zmenu__item",separator:"zmenu__separator",splitmenu:"zmenu__item zmenu--split",itemgroup:"zmenu__title",custom:"zmenu__item zmenu__custom"}}},{key:"ARIA_ROLES",get:function(){return{default:"menuitem",splitmenu:"menuitem",custom:"menuitem",radio:"menuitemradio",checkbox:"menuitemcheckbox",itemgroup:"group",separator:"separator"}}}]),l}();t.registerComponent("ZMenu",z),function(t){var a=t.zmenu.Templates,o=t.Templates.Utilities;a.container=function(t){return ZT.html(zc0tO113(),t.className,t.id,t.children&&a.children(t))},a.children=function(t){return ZT.html(zc0tO114(),t.simple?ZT.html(zc0tO115(),t.items&&t.items.map(function(t){return a.item(t)})):a.advancedChildren(t))},a.item=function(t){return ZT.html(zc0tO116(),t.element||ZT.html(zc0tO117(),t.isDefault?a.defaultItem(t):t.isSeparator?a.separator(t):t.isHeading?a.heading(t):""))},a.defaultItem=function(t){return ZT.html(zc0tO118(),t.id,t.itemType,t.className,t.role,t.name,t.menuId,t.uniqueKey,t.label,t.checked,t,a[t.layoutName](t))},a.heading=function(t){return ZT.html(zc0tO119(),t.id,t.itemType,t.className,t.role,t.name,t.uniqueKey,t,t.encodedLabel&&ZT.html(zc0tO120(),ZT.customHTML(t.encodedLabel)))},a.separator=function(t){return ZT.html(zc0tO121(),t.id,t.itemType,t.className,t.role,t.uniqueKey,t)},a.anchorLayout=function(t){return ZT.html(zc0tO122(),t.url,t.target,t.rel,a.defaultLayout(t))},a.destroyLayout=function(t){return ZT.html(zc0tO123(),t.encodedLabel)},a.defaultLayout=function(t){return ZT.html(zc0tO124(),ZT.customHTML(""),"text"!==t.contentType&&ZT.html(zc0tO125(),t.iconText||o.icon(t)),"icon"!==t.contentType&&!t.customType&&ZT.html(zc0tO126(),t.encodedLabel&&ZT.html(zc0tO127(),ZT.customHTML(t.encodedLabel||"")),t.shortcutKey&&ZT.html(zc0tO128(),t.shortcutKey),t.description?ZT.html(zc0tO129(),t.description):""),t.hasSubmenu&&o.icon(t.arrowIcon))},a.callout=function(){return ZT.html(zc0tO130())},a.customLayout=function(t){return ZT.html(zc0tO131(),t.iconAsPrefix&&a.defaultLayout(t),ZT.customHTML(t.innerHTML||""),t.iconAsSuffix&&a.defaultLayout(t))},a.scroller=function(t){return ZT.html(zc0tO132(),t.className,o.icon(t.icon))},a.container=function(t){return ZT.html(zc0tO133(),t.className,t.id,t.children&&a.children(t))},a.advancedChildren=function(t){return ZT.html(zc0tO134(),t.callout&&ZT.html(zc0tO135(),a.callout(t)),t.headerItems.length&&ZT.html(zc0tO136(),t.headerElement||ZT.html(zc0tO137(),t.headerClassName,a.items(t.headerItems))),t.items&&ZT.html(zc0tO138(),t.bodyElement||ZT.html(zc0tO139(),t.bodyClassName,a.items(t.items))),t.footerItems.length&&ZT.html(zc0tO140(),t.footerElement||ZT.html(zc0tO141(),t.footerClassName,a.items(t.footerItems))),t.scroller&&ZT.html(zc0tO142(),a.scroller(t.scroller.up),a.scroller(t.scroller.down)))},a.items=function(t){return ZT.html(zc0tO143(),t.map(function(t){return a.item(t)}))}}(ZPeopleComponents);var O=function(a){function o(){return _classCallCheck(this,o),_possibleConstructorReturn(this,_getPrototypeOf(o).apply(this,arguments))}return _inherits(o,t.CoreComponent),_createClass(o,[{key:"_init",value:function(t,a){this._data.classes=this._CLASSES,this._id=t[0].id=this._getID(t),this._namespace="."+this.name,"DIV"===t[0].tagName?(this._skipParent=!0,this._useParent=!0):(t[0].style.display="none",this._useParent=!1),this._fromInit=!0,this._DOMChanges={},this.params={},this._wheelEvents="onwheel"in document||9<=document.documentMode?"wheel":"mousewheel",this._imgErrHandlerRef=this._imgErrHandler.bind(this),this._selectedItems=[],this.isCE||"SELECT"!==this.element[0].tagName||(["disabled","multiple"].forEach(function(o){a[o]=a[o]||t[0][o]}),t[0].multiple=a.multiple),this._opts.selectionLimit=a.multiple?parseInt(this._opts.selectionLimit):0,this._docMouseUpHandler=this._onDocMouseUp&&this._onDocMouseUp.bind(this),this._setNoResultsData(),this._initVars(),this._parseHTML(),this._initDS(),this._setInitValues(),this._savePrev(),this._afterPropInit()}},{key:"_afterPropInit",value:function(){this._reorderble=this._grippyIconData=!1;var a=this._opts;!a.reorderable||a.multiple&&!this._checkboxPattern&&a.allowDragToSelect||!this.staticData||this.params.query||this._lazyLoadData||this.inputField||(this._reorderble=!0,a.grippyIcon&&t._getIconInfo(a.grippyIconClassName,a.grippySVGIconId,"#zc__svg--grippy",this._CLASSES.itemicon,this._grippyIconData={}))}},{key:"_parseHTML",value:function(){this._htmlTagData=!1,this._htmlHeaderItems=[],this._htmlFooterItems=[],!this._useParent&&this._parseHTMLInput&&this._parseHTMLInput()}},{key:"_setInitValues",value:function(){var t=this._opts,a=t.value;this._isNotNull(a)||(a=[],t.items&&!this.ajaxSource&&t.items.forEach(function(t){t.selected&&a.push(t)})),t.value=[],this._setValues(a)}},{key:"_initVars",value:function(){var a=this._opts;if(this._freshRequest=!0,this._actionBtns=!1,this.inputField=void 0,this._highlightData=void 0,this._searchable=void 0,this._showSearchField=a.showSearchField,this._showSearchField)this._setSearchFieldData(),this._searchable=!0;else if(this._data.searchBox=void 0,a.searchField){var o=n(a.searchField);o.length&&(this.inputField=o,this._searchable=!0)}this._showCheckedIcon=a.checkedIcon,this._checkboxPattern=a.multiple&&"checkbox"===a.multiSelectInterfacePattern,this._showCheckBox=this._checkboxPattern&&!a.hideCheckbox,this._selectOnFocus=!(this._checkboxPattern&&a.hideCheckbox)&&(a.multiple&&!this._checkboxPattern||(void 0===a.selectOnKeyNavigation?!a.multiple&&!this._searchable:a.selectOnKeyNavigation)),this._toggleOnItemClick=!this._checkboxPattern||a.hideCheckbox||!this._selectOnFocus,this._focusOnHover=a.focusItemOnItemMouseover,this._htmlTagData||this._assignDM(),this._isGrouped=!!this._dataMapping.groupLabel,this._checkedIconData={},this._setContentProps(a.contentType);var l=a.actionButtons.actions;l&&l.length&&this._setActionBtns(l),t._getIconInfo(a.checkedIconClassName||a.checkedIconClass,a.checkedSVGIconId,"#zc__svg--tick",this._CLASSES.checkedicon,this._checkedIconData)}},{key:"_bindEvents",value:function(){this._addEvents({focusIn:"focusin",blur:"focusout",mousedown:"mousedown",keydown:"keydown",click:"click"}),this.container.on("click."+this.name,"."+this._CLASSES.checkboxWrapper,this._checkboxClickHandler.bind(this))}},{key:"_keydownHandler",value:function(t){if(this._trigger("beforekeydown",t))return this._keydownActions(t)}},{key:"_keydownActions",value:function(t){var a=this._navInstance.moveFocus(t);return this._trigger("keydown",t),a}},{key:"_imgErrHandler",value:function(t){var a=this,o=t.target;if("IMG"===o.tagName){var l=this._getItemEventData(this._getClosestItem(n(o)));l.imageElement=o;var i=l.itemMappedData.image;this._trigger("imageerror",t,l);var s=l.itemMappedData,r=s.avatarText,d=s.image!==i;(d||r)&&(s.ignoreRender=!0,!d&&r?(s.textIcon=r,s.image=null,this._data.items.find(function(t,o){t.id===s.id&&(a._data.items[o]=s)})):s.hasImageURL=!0,this._render(s,"imageLayout",o.parentNode,!0))}}},{key:"_mousedownHandler",value:function(){this._actionBtnClicked||this._focussed||(this._focussed=!0),this._actionBtnClicked=!1}},{key:"_clickHandler",value:function(){this._actionBtnClicked=!1}},{key:"_getClosestItem",value:function(t){var a=t.closest("."+this._CLASSES.item);return a.length?a:void 0}},{key:"_itemSelectHandler",value:function(a){var o=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],l=a.detail.item;if(a=a.originalEvent,!this._dragging){var i=!0;if(a){var s;if("mouseup"===a.type){if(a.isDefaultPrevented())return!1;s=this._getClosestItem(n(a.target))}else if("keydown"===a.type){var r=a.keyCode,d=t.keyCode;this._selectOnFocus||r===d.ENTER||r===d.SPACE?s=this.getFocussed():i=!1}s?s.data("selectable")&&this._isValidClick(a,o,l)&&(i=!1):i=!1}else l.data("selectable")&&(i=!1);if(!i)return this._selectItem(l,o,a)}return!1}},{key:"_isValidClick",value:function(){return!this._opts.multiple||this._isValidMultiSelectClick.apply(this,arguments)}},{key:"_isCheckboxClick",value:function(t){var a=t&&n(t.target),o=this._CLASSES;if(a&&(a.hasClass(o.checkboxlabel)||a.hasClass(o.checkbox)||a.hasClass(o.checkboxWrapper)))return!0}},{key:"_checkboxClickHandler",value:function(t){t.preventDefault()}},{key:"_itemClickHandler",value:function(t,a,o){var n=o.itemMappedData;if(!n.disabled){var l=this._getItemEventData(a);if(!n.selectable){if(n.moreresults){var i=this._opts.moreResultsAction;"function"==typeof i&&i(),this._trigger("moreactionclick",t,l)}this._focusEle(a,t)}this._trigger("itemclick",t,l)}}},{key:"_getItemEventData",value:function(t,a){return a=a||this._getStoredData(t),{item:t.length&&t[0],itemMappedData:a,itemData:a.originalData}}},{key:"_focusInHandler",value:function(t){var a=this._focussed;this._focussed=this._focusCallbackCalled=!0,a||this._blurTimer||this._focusLastFocussed(this._opts.focusFirstItem,t),this._trigger("focus",t)}},{key:"_focusLastFocussed",value:function(t,a){var o=this._opts.focusSelectedItem,l=(this._domChanged||this._considerLastFocussed)&&this.getFocussed();if(l||(t?!this._domChanged&&(l=this.getFirstValidItem()):o&&(l=this._listBody.find("."+this._CLASSES.selected).first()[0])),l)return l=n(l),this._focusEle(l,a),l}},{key:"_blurHandler",value:function(t){var a=this;clearTimeout(this._blurTimer),document.activeElement!==this.container[0]&&(this._focussed=!1,this._blurTimer=setTimeout(function(){a._focussed||a._focusOutHandler(t),a._blurTimer=!1}))}},{key:"_focusOutHandler",value:function(t){this._focussed=this._lastFocussedItem=!1,this._setFocusClass(this.getFocussed(),!1),this._updateFieldClass(),this._removeDocEvent(),this._trigger("blur",t)}},{key:"_updateFieldClass",value:function(){this._showSearchField&&this.inputField[this.inputField[0]===document.activeElement?"addClass":"removeClass"](this._CLASSES.focussed)}},{key:"_focusItemHandler",value:function(t,a){if(this._focussed&&this._isFocussableItem(t)){var o=this._getItemEventData(t);if(this._trigger("beforeitemfocus",a,o)){var n=this._getStoredData(t);if(n.clickable)return this.inputField&&this._autofill(t,n,a),this._lastFocussed!==n.id&&this._unFocusItem(),this._lastFocussed=n.id,this._lastFocussedItem=t,this._considerLastFocussed=!a||"mouseenter"!==a.type,this._setFocusClass(t),this._trigger("itemfocus",a,o),!0}}return this._focussed||(this._unFocusItem(),this.setFocus(a)),!1}},{key:"_unFocusItem",value:function(){var t=this.getFocussed();t&&this._setFocusClass(t,!1),this._lastFocussed=void 0}},{key:"_getStoredData",value:function(t){return t.length&&t[0].itemData}},{key:"_updateData",value:function(t){this._getById(t.id)[0].itemData=t}},{key:"_postRender",value:function(){this._updateRenderedView()}},{key:"_fixHtWd",value:function(){var t=this._opts.height||this.element[0].style.height,a=this._opts.width||this.element[0].style.width;t&&(this.container[0].style.height=this._getCorrectedPx(t)),a&&(this.container[0].style.width=this._getCorrectedPx(a))}},{key:"_getCorrectedPx",value:function(t){return"none"===t?"":"".concat(t).concat(isNaN(t)?"":"px")}},{key:"_updateRenderedView",value:function(){var a=this._data,o=this._opts;this._fromInit&&this.container[0].addEventListener("error",this._imgErrHandlerRef,!0),a.className=this._getClass(),this._fixHtWd(),this._storeRef(),this.inputField&&this._bindInputFieldEvents(),this._showSearchField&&this._updateClearBtn();var n=this._opts.tabindex;o.disabled?this.container.removeAttr("tabindex"):(this.container.attr({tabindex:this._isNotNull(n)?n:this._opts.showSearchField?-1:0}),this._opts.footerSelectable&&this._listFooter.attr({tabindex:-1}),this._opts.headerSelectable&&this._listHeader.attr({tabindex:-1})),this._addEvents({scroll:"scroll"},this._listBody);var l=this._getOptsForSelectableUtil();this._navInstance?this._navInstance.setAttributes(l):(this._navInstance=t.selectable(this.container,l),this.container.off("keydown.zselectable")),this._fromInit=!1}},{key:"_getOptsForSelectableUtil",value:function(){var t=this,a=this._opts,o=this._CLASSES,n={items:".".concat(o.item,'[data-zplaceholder="true"], .').concat(o.item,"[data-clickable=true]:not(.").concat(o.disabled,")"),multiple:a.multiple,toggle:this._checkboxPattern,focusItemOnItemMouseover:this._focusOnHover,selectOnFocus:this._selectOnFocus,preventDefaultOnEnterKey:a.preventDefaultOnEnterKey,selectOnEnterKey:a.selectOnEnterKey,selectOnSpaceKey:a.selectOnSpaceKey,allowDragToSelect:a.allowDragToSelect&&!this._checkboxPattern,keyNavigation:a.keyNavigation,allowShiftSelection:a.allowShiftSelection,keyNavigationOptions:{direction:"vertical",wrapAround:!this._lazyLoadData&&a.wrapAround,characterKeyFocus:a.characterKeyFocus,keyMatchAttribute:"zkeymatchlabel"},select:function(){},beforeselect:function(a){return t._itemSelectHandler(a,!0)},beforedeselect:function(a){return t._itemSelectHandler(a,!1)},deselect:function(){},beforeblur:function(){return!1},beforereset:function(o){var n=o.detail.item;return o=o.originalEvent,!(t._dragging||!n.data("selectable")||a.multiple&&"mouseup"===o.type&&t._checkboxPattern&&(!t._selectOnFocus||t._isCheckboxClick(o)))},change:function(a){t._triggerChange(a,a.detail.item)},reset:function(a){var o=a.detail.item;return a=a.originalEvent,t._clearSelection(a,o[0].itemData)},beforefocusmove:function(a){var o=a.detail.item,n=a.detail.ahead;if((a=a.originalEvent)&&"mouseup"===a.type){if(a.isDefaultPrevented())return!1;t._focussed||(t._focussed=!0,t.setFocus(a))}return("select"!==n||t._canFocusMove(o,a))&&t._focusItemHandler(o,a)},focusmove:function(){},mouseenter:function(a){var o=a.detail.item;t._isFocussableItem(o)&&(t._itemInHover=o,t._trigger("itemhover",a,t._getItemEventData(o)))},mouseleave:function(){t._itemInHover=!1},beforemouseup:function(){return!t._actionBtnClicked},beforemousedown:function(){return!t._actionBtnClicked}};return this._styleBasedFilter&&(n.items+=":visible"),n}},{key:"_isFocussableItem",value:function(t){return t&&t.length&&t.attr("data-clickable")}},{key:"_canFocusMove",value:function(a,o){if(a&&a.length&&o&&this._opts.multiple&&this._selectOnFocus&&!this._checkLimit()&&"keydown"===o.type&&o.shiftKey){var n=t.keyCode,l=o.keyCode;if(l===n.DOWN||l===n.UP)return!1}return!0}},{key:"_postEachRender",value:function(){this._domChanged&&this._updateRenderedView(),this._newAddedItems=this._getDomsForData(this._newAddedJSON),this._setVisibility(this._data.orgEvent),(this._domChanged||!this._data.rendered||this._updateMidHt)&&this._fixMidHt(),this._manageReorderable(),this._bindScrollToLazyLoad(),this._updateCustomAttrs(),this._updateStates(this._data.orgEvent),this._data.orgEvent=void 0}},{key:"_show",value:function(t){var a=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];t&&t[0]&&(t[0].style.display=a?"":"none")}},{key:"_hide",value:function(t){return this._show(t,!1)}},{key:"_setVisibility",value:function(){var t=this._data,a=this._CLASSES;t.className=this._getClass();var o=this._noResultsEle,n=this._loaderEle,l=this._listBody;this.container.removeAttr("data-loading").removeAttr("data-noresults"),this._loading?(n[t.loader.fullloader?"addClass":"removeClass"](a.fullloader),this._show(n),this._show(l),this._hide(o),this.container.attr("data-loading",!0)):(n&&n.removeClass(a.fullloader),this._noResults?(this._hide(l),this._show(o),this.container.attr("data-noresults",!0)):(this._hide(n),this._hide(o),this._show(l))),t.className=this._getClass()}},{key:"_fixMidHt",value:function(){var t=this,a=0,o=this._CLASSES,i=[],s=[];_toConsumableArray(this.container[0].children).forEach(function(t){(t=n(t)).hasClass(o.body)||t.hasClass(o.noresults)||t.hasClass(o.loader)?i.push(t[0]):!t.attr("data-floating")&&s.push(t[0])}),s.forEach(function(t){a+=t.offsetHeight||0}),this._childHt="calc(100% - "+a+"px)",i.forEach(function(a){a.style.height=t._childHt})}},{key:"_updateCustomAttrs",value:function(){var t=this._data.items,a=this._prevItems;if(t.length)for(var o=0;o<t.length;o++){var n=a&&a[o]&&a[o].customAttributes,l=t[o].customAttributes,s={},r=!1;if(n){if(n===l)continue;for(var d in n)s[d]=null;r=!0}l&&(Object.assign(s,l),r=!0),r&&this._getById(t[o].id).attr(s)}this._prevItems=_toConsumableArray(t)}},{key:"_getDomsForData",value:function(t){var a=this;return t&&t.map(function(t){return a._getById(t.id)[0]})}},{key:"_updateStates",value:function(t){var a=this,o=this._newAddedItems||this._getDomsForData(this._data.items),l=this._CLASSES;return this._itemInHover&&!this.container.find(this._itemInHover).length&&(this._itemInHover=void 0),o.forEach(function(t){var o=n(t),s=a._getStoredData(o),r=a._selectedItems;if(s.selectable){for(var c,d=0;d<r.length;d++)r[d].id===s.id&&(r[d]=s,s.selected=c=!0);a._addSelectDataToItem(o,!!c),s.checkbox&&(o.find("."+l.checkbox)[0].checked=c),s.actionButtons&&a._bindActionBtns(o,s)}}),this._setFocusAfterStateUpdate(o,t),o}},{key:"_addSelectDataToItem",value:function(t){var a=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];if(t.attr("data-selectable")){var o=this._CLASSES;a?t.addClass(o.selected):t.removeClass(o.selected),t.attr("aria-selected",a)}else t.removeAttr("aria-selected")}},{key:"_setFocusAfterStateUpdate",value:function(t,a){if((!this._lazyLoaded||this._virtualization)&&t.length&&this._focussed){var n=this.getFocussed(),l=this._lastFocussed&&this._lastFocussedItem;if(this._fromSearch||this._newlyLoadingData){var i=this.params.query,s=this._opts.search.focusFirstResult;this._considerLastFocussed=s&&i&&this._prevQuery===i,n=this._focusLastFocussed(this.inputField?i&&s:void 0,a)}else this._focusEle(n,a);if(l&&(!n||l[0]!==n[0])&&l.removeClass(this._CLASSES.focussed+" "+this._CLASSES.hover),this._itemInHover){var r=this._itemInHover;this._itemInHover=void 0,r.trigger("mouseenter")}}}},{key:"_setFocusClass",value:function(t){var a=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];if(t){var o=this._CLASSES.focussed;this._focusOnHover&&(o+=" "+this._CLASSES.hover),a||t.removeClass(o)}}},{key:"_storeRef",value:function(){var t=this._CLASSES,a=this._data,o=this.container;this._noResultsEle=this._loaderEle=void 0,this._showSearchField&&(this.inputField=this._getById(a.searchBox.id)),this._listBody=o.find("."+t.body),this._listHeader=o.find("."+t.header),this._listFooter=o.find("."+t.footer),a.noResults&&(this._noResultsEle=this._getById(a.noResults.id)),a.loader&&(this._loaderEle=this._getById(a.loader.id));var n=this._opts.searchFieldOptions.placeholder;this.inputField&&n&&this.inputField.attr("placeholder",n)}},{key:"_bindScrollToLazyLoad",value:function(){this._freshRequest&&this._lazyLoadData&&(this.params.totalPages>this.params.pageIndex||this.params.moreServerPages)&&this._bindScroll()}},{key:"_selectItem",value:function(t){var i,a=this,o=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],n=2<arguments.length?arguments[2]:void 0,l=this._CLASSES;o=!!o,t.id&&(i=t,t=this._getById(i.id)),t.length&&(i=this._getStoredData(t));var s=this._isSelectedItem(i);if(i.selectable&&s!==o){!t.length&&this._dsInit&&this.DSInstance.getData(i.originalData,function(t){t&&(i=a.getItemData(t))});var r=o?"select":"deselect";if(!this._trigger("before"+r,n))return!1;if(o){if(!this._addToSelection(i,n))return!1}else this._removeFromSelection(i,n);this._addSelectDataToItem(t,!!o),i.selected=o,this._showCheckBox&&t.length&&(t[0].querySelector("."+l.checkbox).checked=o),o&&this.inputField&&this._setFieldValue(t,i,n),this._trigger(r,n,this._getItemEventData(t,i)),this._changed=!0}return i.selectable}},{key:"_triggerChange",value:function(a,o,n){a=a&&a.originalEvent;var l={};if(o&&o.length&&(l=this._getItemEventData(o)),this._changed){var i=this._selectedItems.map(function(t){return t.id});o||(l=this._getItemEventData("",this._selectedItems[0])),this.container&&this.container.attr("aria-activedescendant",i.join(",")),l.previousValue=this._prevValues,!1!==n&&this._trigger("change",a,l),this._savePrev()}if(a){var s=t.keyCode,r=a.keyCode,d=a.type;a&&l.item&&("mouseup"===d||"keydown"===d&&(r===s.ENTER||r===s.SPACE))&&this._itemClickHandler(a,o,l)}this._changed=!1}},{key:"_savePrev",value:function(){this._prevValues=_toConsumableArray(this._opts.value)}},{key:"values",value:function(){return this._selectedItems}},{key:"_initialRender",value:function(){this._search(),this._data.rendered||this._replaceBodyItems([])}},{key:"_setContentProps",value:function(t){/^(image-text|image-text-desc|text-desc|text|custom|image)$/.test(t)||(t="text"),this._isCustom=-1<t.indexOf("custom"),this._hasImage=this._hasIcon=!1,this._isCustom||(this._hasText=-1<t.indexOf("text"),this._hasDesc=-1<t.indexOf("desc"),-1<t.indexOf("image")&&(this._hasIcon=!(this._hasImage=this._dataMapping.image)))}},{key:"_assignDM",value:function(){this._dataMapping=_objectSpread({},this._opts.dataMapping)}},{key:"_initDS",value:function(){var t=this._opts,a=this._data;this.DSInstance||(a.loader=this._loading=!1),a.items=[],this._datasource=[],this._groupsIncluded=[],this._dataLoaded=!1,this._groupHeads=[],a.headerItems=a.footerItems=a.moreAction=a.virtualHeightBelow=a.virtualHeightAbove=void 0;var o=t.dataSource,n=t.items;this._dsInit=this.staticData=!1,this.ajaxSource=this._isAjaxSource(o),this._dsInit=this.staticData=!0;var l={callbacks:{}};this.ajaxSource?this._bindAjaxEvents(l.callbacks):"nested"===t.dataStructure&&(n=this._flattenData(n)),this._virtualization=!1,!t.filterByCSSSelector||this.ajaxSource||t.search.highlightKeyword||this._isGrouped?(this._lazyLoadData="auto"!==t.height&&t.lazyLoading,t.virtualization&&(this._virtualization=this._lazyLoadData=!0),this._styleBasedFilter=!1,this._filterFn=this._filterByAddRemoval):(this._lazyLoadData=!1,this._styleBasedFilter=!0,this._filterFn=this._filterListViaStyles),l.search=t.search,l.filters=t.filters,["sort","sortBy","sortOrder","customSorter","serverSearch","isResponseFiltered","cacheData","customSearch"].forEach(function(a){l[a]=t[a]}),"contains"===t.search.criteria&&(l.criteriaPrecedence=t.criteriaPrecedence.length?t.criteriaPrecedence:["startswith","wordstartswith","contains"]),this._viewPerPage=this._lazyLoadData?this._isNotNull(t.viewPerPage)?t.viewPerPage:10:0,l.maxResults=this._viewPerPage,l.searchIncrementsInCache=t.search.searchIncrementsInCache,l.dataMapping=this._dataMapping,l.callbacks.update=this._onDSUpdate.bind(this),l.allowDuplicateValues=t.allowDuplicateItems,this.DSInstance?this.DSInstance.setAttributes(l):(this._lastScrollTop=0,l.dataSource=o,l.data=n,this.DSInstance=this._initDSInstance(l)),(this.DSInstance._serverSearch||this.DSInstance._serverPaging)&&(this.staticData=!1),this.ajaxSource&&this._setLoaderData()}},{key:"_preRender",value:function(t){var a=this._data;if(t.ignoreRender)return Object.assign({},this._opts,a,t);var o=this._opts,n=this._DOMChanges,l=a.moreAction;return n&&Object.keys(n).length&&this._replaceMovedItems(),this._DOMChanges={},(!a.rendered||this._domChanged)&&(a.attrs={role:"listbox","aria-multiselectable":!!o.multiple}),o.moreResultsAction?this._noResults?a.moreAction=void 0:this._setMoreResults():(!a.rendered||this._domChanged)&&this._setHeaderFooterItems&&this._setHeaderFooterItems(),this._updateMidHt=!!l!=!!this._data.moreAction,a}},{key:"getItemData",value:function(a,o,n,l){var i=_objectSpread({},this._getBasicItemData(a),{},{name:o,label:a.value,separator:a.separator,heading:n,custom:"custom"===a.contentType,view:{},selectable:!1});if("object"!==_typeof(a)){var s=a;(a={}).separator||this._setProp(a,n?"groupLabel":"text",s)}i.normalisedData=a;var r=i.customAttributes=_objectSpread({},a.customAttributes||{});return n?this._setHeadingData(i):!a.separator&&this._setViewData(i,l),this._updateItemClass(i),a.style&&(r.style=a.style),this._isNotNull(a.title)&&(r.title=a.title),t.isEmpty(r)&&delete i.customAttributes,i}},{key:"_getBasicItemData",value:function(t){return{id:this._getItemId(t),originalData:t,normalisedData:t,zlistitem:!0,selectable:!0}}},{key:"_setKeyValue",value:function(a,o,n){n=!this._isEncoded()&&n;var l=a.normalisedData,i=this._getProp(l,o,n);a[o]=i,n||(l.decodedItemText=i,l.encodedItemText=t.encodeHTML(i)),(n||l.encodedItemText===i)&&(l.encodedItemText=i,l.decodedItemText=t.decodeHTML(i))}},{key:"_isEncoded",value:function(){return this._opts.isTextHTMLEncoded}},{key:"_setHeadingData",value:function(a){this._setKeyValue(a,"groupLabel"),a.disabled=this._opts.disabled,this._opts.groupHeadingTemplate?a.view.innerHTML=this._getCustomContent(a,this._opts.groupHeadingTemplate,!0,"text"):a.view.text=this._highlight(t.encodeHTML(a.groupLabel),this._dataMapping.groupLabel)}},{key:"_updateItemClass",value:function(t){var a=t.originalData.className||"",o=t.customAttrs;o&&o.className&&(function(t){a+=" "+t}(o.className),delete o.className),t.className=a}},{key:"_afterFilter",value:function(t,a){if(this._newlyLoadingData=!1,this._freshRequest){var o;if(this._styleBasedFilter)o=this.getFirstItem();else{var n=a&&a.addedItems;o=n&&n.length}if(!o)return void this._showNoResults(t);this._hideNoResults(void 0,t)}this._opts.search.highlightKeyword&&!this._noResults&&this._styleBasedFilter&&this._highlightInList(),this._itemsRendered&&this._setScrollTop(),this._itemsRendered=!0,this._triggerUpdate(t,a)}},{key:"_hideNoResults",value:function(){var t=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],a=1<arguments.length?arguments[1]:void 0;this._noResults=!1,this._status="ok",t&&this._setVisibility(a)}},{key:"_showNoResults",value:function(t){var a={query:this.params.query};if(this._trigger("noresults",t,a)){var o=this._opts,n=this.DSInstance;!o.serverSearch&&o.showAllOptionsSelectedMessage&&n&&this._selectedItems.length>=n._dataSource.length?this._showWarning("allOptionSelected",t):this._showWarning("noResults",t)}}},{key:"_showWarning",value:function(t,a){var o=t.toLowerCase(),n={params:this.params,status:o};this._noResults=!0,this._status=o;var l=this._getText(t),i="noResults"===t&&this._customNoResultsHTML;return this._customNoResultsHTML&&this._showHideCustomNoResults(i),this._data.noResults.innerHTML=i?null:l,this._styleBasedFilter&&this._data.rendered&&(!this._domChanged||!this._reInit)&&this._renderView(),this._hideAllItems(a),this._noResultsEle.attr("data-warning",o),this._triggerUpdate(a,n)}},{key:"_hideAllItems",value:function(t){return this._styleBasedFilter&&this._data.rendered?this._hideItemsUsingCSS():void this._replaceBodyItems([],void 0,t)}},{key:"_getMsg",value:function(t){return this._getI18NText(t)}},{key:"_getClass",value:function(){var t=this._CLASSES,a=t.container,o=function(t){a+=" "+t};return this._loading&&o(t.listwithloader),this._opts.className&&o(this._opts.className),this._opts.rtl&&o(t.rtl),this._opts.disabled&&o(t.disabled),this._showCheckBox||this._showCheckedIcon?(this._showCheckBox&&(o(t.withcheckbox),"right"===this._opts.checkboxPosition&&o(t.listwithcheckboxRight)),this._showCheckedIcon&&(o(t.withcheckedicon),"right"===this._opts.checkedIconPosition&&o(t.listwithcheckediconRight))):o(t.withoutcheckeditem),this._actionBtns&&"contextual"===this._opts.actionButtons.displayType&&o(t.listwithactionbtnsvisible),this._opts.showSearchField&&o(t.withsearchfield),this._isCustom?o(t.listwithcustom):(this._hasIcon?o(t.withicon):this._hasImage&&o(t.listwithimage),this._hasDesc&&o(t.withhint),"image"===this._opts.contentType&&o(t.listwithicononly)),this._reorderble&&o(t.reorderable),a}},{key:"_getBool",value:function(t){if(!0===t||"true"===t)return!0}},{key:"_setCheckboxData",value:function(t){this._showCheckedIcon&&(t.checkedIconPosition=this._opts.checkedIconPosition,t.checkedIcon=this._checkedIconData),this._showCheckBox&&(t.checkbox=!0,t.checkboxId="zcheckbox-"+t.id,t.checkboxPosition=this._opts.checkboxPosition)}},{key:"_setViewData",value:function(t,a){var o=t.view,n=t.normalisedData,l=t.customAttributes;t.hidden=n.hidden,t.disabled=n.disabled||this._opts.disabled;var i=this._isNotNull(n.selectable)?this._getBool(n.selectable):!a;t.selectable=i,t.disabled||(t.clickable=i||!this._isNotNull(n.clickable)||this._getBool(n.clickable)),i&&(this._setCheckboxData(t),t.actionButtons=this._actionBtns,t.grippyIcon=this._grippyIconData);var s=a&&!i;this._styleBasedFilter&&this._searchable&&!s&&this._getAttrForCSSFilter(n,l);var r=l["data-label"]||this._mapJSONToData(n,this._dataMapping.text,!1);if(o.ariaLabel=r||"",o.ariaValue=this._getProp(n,"value")||o.ariaLabel,n.custom||this._isCustom)o.innerHTML=this._getCustomContent(n,n.zinnerHTML||n.innerHTML||this._opts.template,!0,"text"),t.custom=!0;else{var d=this._setKeyValue.bind(this,t);(this._hasIcon||this._hasImage)&&this._setImageData(t),this._hasText&&(d("text",!0),o.text=s?t.text:this._highlight(t.text,this._dataMapping.text),l["data-label"]=r,this._opts.characterKeyFocus&&(l["data-zkeymatchlabel"]=r&&r.toLowerCase())),this._hasDesc&&(d("informativeText",!0),o.description=s?t.informativeText:this._highlight(t.informativeText,this._dataMapping.informativeText))}}},{key:"_triggerUpdate",value:function(t,a){return this._trigger("listupdate",t,a)}},{key:"_triggerBeforeUpdate",value:function(t,a){return this._trigger("beforelistupdate",t,a)}},{key:"_highlight",value:function(t,a){return t&&this.params.query&&this._opts.search.highlightKeyword&&(t=this._highlightValidKey(t,a)),t}},{key:"getFirstItem",value:function(t){var a=this;return this.container.find(".".concat(this._CLASSES.item,"[data-selectable]")).toArray().find(function(o){var l=n(o);return(!t||l.is(t))&&(!a._styleBasedFilter||"none"!==l.css("display"))})}},{key:"getFirstValidItem",value:function(){return this.getFirstItem(":not(."+this._CLASSES.disabled+")")}},{key:"_scrollHandler",value:function(t){this._considerScrollForLazyLoad?this._scrollHandlerToLoadPage(t):this._lastScrollTop=this._listBody[0].scrollTop}},{key:"_focusInputField",value:function(){this.inputField.focus()}},{key:"getFocussed",value:function(){if(this._lastFocussed){var t=this._getById(this._lastFocussed);return t.length?t:void 0}}},{key:"_trigger",value:function(t,a,o){return!!this._fromInit||((o=o||{}).value=this.getValue(),o.initialized=!this._fromInit,this._dispatchEvent(t,a,o,void 0,!!a))}},{key:"_getItemJSON",value:function(t,a){var o=this;return this._isGrouped&&!a?this._getItemJSONForGroupedData(t):t.map(function(t){return o.getItemData(t)})}},{key:"_addBodyItems",value:function(t){var l,i,a=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],o=2<arguments.length?arguments[2]:void 0,n=t;a&&t.length&&((i=this._datasource).push.apply(i,_toConsumableArray(t)),n=this._getItemJSON(t));(l=this._data.items).push.apply(l,_toConsumableArray(n)),this._lazyLoaded=!0;var s=this._renderView(n,o);return this._lazyLoaded=!1,s}},{key:"_renderView",value:function(t,a){return this._data.orgEvent=a,this._newAddedJSON=t,this._render(),this._data.rendered=!0,this._domChanged=!1,this._newAddedItems}},{key:"_replaceBodyItems",value:function(t){var a=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],o=2<arguments.length?arguments[2]:void 0,n=t;return a&&t.length&&(this._datasource=_toConsumableArray(t),n=this._getItemJSON(t)),this._data.items=n,this._renderView(n,o)}},{key:"_getKeyID",value:function(t){return"z"+this._id+"-"+t}},{key:"_loadDataSource",value:function(t,a){var o=this;this._dsInit?this.fetchData(this.params,function(n){var l=n.results;delete n.results,o.params=_objectSpread({},o.params,{},n);var i={results:l,params:_objectSpread({},o.params)};o._triggerBeforeUpdate(a,i),t(i.results,a)}):t([])}},{key:"_getItemId",value:function(t){return _get(_getPrototypeOf(o.prototype),"_getItemId",this).call(this,t,this._id)}},{key:"_removeStyle",value:function(){this.styletag&&(this._opts.search.highlightKeyword&&this._highlightInList(void 0,!0),this.styletag.remove(),this.styletag=void 0)}},{key:"_manageReorderable",value:function(){this._reorderble&&!this._opts.disabled?this._initSortable():this._destroySortable()}},{key:"_initDSInstance",value:function(a){return new t.ZDatasourceHandler(null,a)}},{key:"_setScrollTop",value:function(){this._listBody[0].scrollTop=this._lastScrollTop}},{key:"_destroySortable",value:function(){this._grippyIconData=!1,this._listBody.data("zsortable")&&t.sortable(this._listBody).destroy()}},{key:"_getText",value:function(a){var o=t.encodeHTML(this._getMsg(a)),n="query",l=this.params.query;return"minKeywordLength"===a&&(n="minKeywordLength",l=this._opts.search.minKeywordLength),o=o.replace(new RegExp("#".concat(n,"#"),"g"),'<b class="zh-bold">'+(l||"")+"</b>")}},{key:"_destroyDSIns",value:function(){this._removeStyle(),this._lazyLoadData&&this._unbindScroll(),this._dsInit=!1,this.DSInstance&&(this.DSInstance.destroy(),this.DSInstance=void 0)}},{key:"_detachInputEv",value:function(){this.inputField&&this._removeEvents("",this.inputField)}},{key:"_reSearch",value:function(){this._skipScrollTopReset=!this._dataReset,this.params.previousQuery=void 0,this._search(this.params.query,{setItemFocus:!1}),this._skipScrollTopReset=!1}},{key:"_isSelectedItem",value:function(t){return!!this._selectedItems.find(function(a){return a.id===t.id})}},{key:"_clearSelection",value:function(t,a){var o=this,n=_toConsumableArray(this._selectedItems);a&&(a=this._toArr(a),n=n.filter(function(t){return!a.find(function(a){return(a.originalData&&a.zlistitem?a.id:o._getItemId(a))===t.id})})),n.forEach(function(a){o._selectItem(a,!1,t)})}},{key:"_addToSelection",value:function(t,a){return this._checkLimit()?(this._isSelectedItem(t)||(this._opts.multiple?(this._selectedItems.push(t),this._selectedItems.length===this._opts.selectionLimit&&this._trigger("selectionlimitreached",a,{valueToBeSelected:t.originalData})):(this._clearSelection(a,t),this._selectedItems=[t]),this._updateValues()),!0):void this._trigger("selectionlimitexceeded",a,{valueToBeSelected:t.originalData})}},{key:"_updateValues",value:function(){this._opts.value=this._selectedItems.map(function(t){return t.originalData})}},{key:"_removeFromSelection",value:function(t){for(var a=this._selectedItems,o=0;o<a.length;o++)if(a[o].id===t.id){a.splice(o,1),this._updateValues();break}}},{key:"_checkLimit",value:function(){var t=this._opts.selectionLimit;if(!t||t>this._selectedItems.length)return!0}},{key:"_setValues",value:function(t,a){var o=this,n=(a=a||{}).clearOtherValues,l=a.event;this._changed=!1,t=this._toArr(t),n&&this._clearSelection(l,t),t.forEach(function(t){t=o._getBasicItemData(t),o._UI=!0,o._selectItem(t,!0,l)}),this._triggerChange(l,null,a.triggerEvent)}},{key:"_removeDocEvent",value:function(){this._docMouseUpHandler&&document.removeEventListener("mouseup",this._docMouseUpHandler,!0)}},{key:"_destroy",value:function(){this.container[0].removeEventListener("error",this._imgErrHandlerRef,!0),clearTimeout(this._searchTimer),clearTimeout(this._focusTimer),clearTimeout(this._blurTimer),this._detachInputEv(),this._removeDocEvent(),this._navInstance&&(this._navInstance.destroy(),this._navInstance=void 0),"SELECT"!==this.element[0].tagName||this.element.attr("multiple")||(this.element[0].multiple=!1),this._destroyDSIns(),this.container.empty()}},{key:"_focusCallback",value:function(t,a,o){if(this._focussed){var n="string"==typeof t?t:t[0].id;(t=this._getById(n))&&t.length&&(t.removeClass(this._CLASSES.focussed),this._focusItemUsingNavInstance(t,a,o))}}},{key:"_focusEle",value:function(t,a,o,n){clearTimeout(this._focusTimer),t&&t.length&&(n?this._focusCallback(t,a,o):this._focusTimer=setTimeout(this._focusCallback.bind(this,t,a,o)))}},{key:"_focusItemUsingNavInstance",value:function(t,a){var o=!!(2<arguments.length&&void 0!==arguments[2])&&arguments[2];this._navInstance.focusItem(t,a,o)}},{key:"_focusItem",value:function(t,a,o,l){t&&(1===t.nodeType?this._focusEle(n(t),a,o,l):this._focusEle(this._getItemId(t),a,o,l))}},{key:"_onDSUpdate",value:function(t){this.params.previousQuery=void 0,this.ajaxSource||(this._opts.items=t.results),this._reSearch()}},{key:"_refresh",value:function(t){this._detachInputEv(),this._destroyDSIns(),this._initVars(),t&&(this._htmlTagData&&(this._opts.items=[]),this._parseHTML()),this._initDS(),this._afterPropInit(),this._reSearch()}},{key:"_getItem",value:function(t){var a=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],o=!(2<arguments.length&&void 0!==arguments[2])||arguments[2];if(this._isNotNull(t)&&this.staticData){if(t.nodeType)return t.hasClass(this._CLASSES.item)?t.itemData.originalData:t.optData;var n=o&&this._getHeaderFooterItem&&this._getHeaderFooterItem(t);return!n&&a&&(n=this.DSInstance.getData(n)),n}}},{key:"focusItem",value:function(t,a,o){this.setFocus(o),this._focusItem(t,o,a)}},{key:"unfocusItem",value:function(){this._unFocusItem()}},{key:"setValue",value:function(t,a){this._setValues(t,a)}},{key:"getValue",value:function(){var t=this._opts.value;return Array.isArray(t)?_toConsumableArray(t):t}},{key:"deselect",value:function(t,a){var o=this;this._changed=!1,(t=this._toArr(t)).forEach(function(t){o._selectItem(o._getBasicItemData(t),!1,a)}),this._triggerChange(a)}},{key:"deselectAll",value:function(t){this._changed=!1,this._clearSelection(t),this._triggerChange(t)}},{key:"refresh",value:function(){this._domChanged=!0,this._refresh(!0),this._domChanged=!1}},{key:"setFocus",value:function(t){this._trigger("beforefocus",t)&&(this._focusCallbackCalled=!1,this.container.focus(),!this._focusCallbackCalled&&this._focusInHandler(t))}},{key:"getItem",value:function(t){this._getItem(t)}},{key:"handleKeyCode",value:function(t){return this._keydownHandler(t)}},{key:"isFocussed",value:function(){return this._focussed}},{key:"fetchData",value:function(){var t;return(t=this.DSInstance).fetch.apply(t,arguments)}},{key:"clearCache",value:function(){this.params.previousQuery=void 0,this._dataLoaded=!1,this._dsInit&&this.DSInstance.clearCache(),this._reSearch()}},{key:"getSearchField",value:function(){return this.inputField}},{key:"_getTextIcon",value:function(t){var a=t.ariaLabel.split(" ");return 1===a.length?a[0][0]+a[0][1]:a[0][0]+a[1][0]}},{key:"_setImageData",value:function(a){var o=this;a.hasImage=!0;var n=a.view;["SVGIconId","iconClassName","image","textIcon","value","avatarText","zitemid"].forEach(function(t){o._setKeyValue(a,t,!1)});var l=a.textIcon;if(a.image||a.textIcon||(a.image="error image"),this._opts.textIcon)return a.textIcon=a.textIcon||this._getTextIcon(n).toUpperCase(),void(n.textIcon=a.textIcon);if(this._hasIcon){var i=a.SVGIconId,s=a.iconClassName;if(s||i||!l)return n.icon={},void t._getIconInfo(s,i,"",this._CLASSES.itemicon,n.icon)}else if(this._hasImage&&a.image)return n.hasImageURL=!0,void(n.image=a.image);n.textIcon=l}},{key:"search",value:function(t){var a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};a.fromSearchMethod=!0,a.delay?this._searchWithDelay(t,a):this._search(t,a)}},{key:"searchWithDelay",value:function(){(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).fromSearchMethod=!0,this._searchWithDelay.apply(this,arguments)}},{key:"_searchWithDelay",value:function(t){var a=this,o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};clearTimeout(this._searchTimer);var n=[t,o];o.delay?this._searchTimer=setTimeout(function(){a._search.apply(a,n)},o.delay):this._search.apply(this,n)}},{key:"_search",value:function(t){var o,a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(this.inputField){if(a.fromSearchMethod&&!1!==a.updateField)this.inputField.val()!==t&&this.inputField.val(t);o=this.inputField[0],this._showSearchField&&this._updateClearBtn()}if(!this._isNotNull(t)&&o&&(t=o.value),t&&a.searchOnCurPos&&o){var i=o.selectionStart;i!==o.selectionEnd&&(i=t.length-1),t=t.substring(0,i)}a=n.extend({},this._opts.search,a),t=t||"",a.trimWhitespace&&(t=t.trim()),this.params.query=this._opts.query=t,this._trigger("beforesearch",a.event,{params:this.params,searchOptions:a})&&this._filterData(a.event,a)}},{key:"_filterData",value:function(t,a){var o=this._opts,n=this.params;this._opts.query=n.query;var l=this._checkQueryLength(n.query,a);return this._fromSearch=!this._isNotNull(a.setItemFocus)||a.setItemFocus,this._prevQuery=n.previousQuery,!a.force&&o.cacheData&&n.query===n.previousQuery?void this._updateStates(t):(this.params.previousQuery=this.params.query,this._hideNoResults(!1),this._freshRequest=!0,!this._skipScrollTopReset&&(this._lastScrollTop=0),this._skipScrollTopReset=!1,this._dsInit&&l?this._filterFn(t):l?this._showNoResults(t):(n.previousQuery=void 0,this._showWarning("minKeywordLength",t)),this._fromSearch=!1,void(this._newlyLoadingData=this._loading))}},{key:"_checkQueryLength",value:function(t,a){var o=a.minKeywordLength;return!o||!this._searchable||t.length>=o}},{key:"_filterByAddRemoval",value:function(t){this.params.pageIndex=1,this._scroll={},this._groupsIncluded=[],this.DSInstance._serverPaging&&(this.params.serverPageIndex=0,this.params.moreServerPages=!0),this._unbindScroll&&this._unbindScroll(),this._virtualization?this._showVirtualData(t):this[this._lazyLoadData?"_loadFirstPage":"_loadDataSource"](this._addDataToMenu.bind(this),t)}},{key:"_addDataToMenu",value:function(t,a){var o={results:t,params:this.params};t=o.results,o.addedItems=this[this._freshRequest?"_replaceBodyItems":"_addBodyItems"](t,!0,a),this._afterFilter(a,o,!this._freshRequest)}},{key:"_setNoResultsData",value:function(){this._setCustomNoResults(),this._data.noResults={id:this._getKeyID("noresults"),noresults:!0}}},{key:"_setCustomNoResults",value:function(){var t=n(this._opts.customNoResultsHTML);t.length&&(this._customNoResultsHTML=t,this._showHideCustomNoResults())}},{key:"_showHideCustomNoResults",value:function(t){var a=this._customNoResultsHTML;a[t?"show":"hide"](),a.appendTo(t?this._noResultsEle:"body")}},{key:"_bindInputFieldEvents",value:function(){if(this._opts.searchFieldOptions.handleEvents){this.inputField.off("."+this.name);var o={fieldFocus:"focus",fieldBlur:"blur",fieldKeydown:"keydown",inputMouseup:"mouseup",inputKeyup:"keyup"};t.Browser.isIE&&(o.paste="paste"),this._addEvents(o,this.inputField),this.inputField.on((t.Browser.isIE?"keyup":"input")+"."+this.name,this._inputHandler.bind(this))}}},{key:"_fieldKeydownHandler",value:function(a){var o=a.keyCode,n=t.keyCode;this._opts.searchFieldOptions.preventUPDOWNKeysDefault&&(o===n.UP||o===n.DOWN)&&a.preventDefault(),o===n.ESCAPE&&a.preventDefault(),this._showSearchField||this._keydownHandler(a)}},{key:"_fieldFocusHandler",value:function(t){this._updateFieldClass(),this._showSearchField||this._focusInHandler(t)}},{key:"_fieldBlurHandler",value:function(t){this._updateFieldClass(),this._showSearchField||this._blurHandler(t)}},{key:"_inputHandler",value:function(a){t.Browser.isIE&&a.target!==document.activeElement||a.target.disabled||"input"!==a.type&&!this._isAlphaNumericKey(a)||this._inputChangeHandler(a)}},{key:"_inputChangeHandler",value:function(t){var a=t.target.value;this._trigger("input",t,{pasteAction:"input"===t.type&&t.originalEvent&&"insertFromPaste"===t.originalEvent.inputType})&&this._searchWithDelay(a,{event:t,delay:this._opts.search.delay})}},{key:"_inputKeyupHandler",value:function(a){if(this._opts.searchFieldOptions.filterBasedOnCurPos){var o=t.keyCode,n=a.keyCode;-1<[o.LEFT,o.RIGHT,o.HOME,o.END].indexOf(n)&&this._searchBasedOnCurPos(a)}}},{key:"_searchBasedOnCurPos",value:function(t,a){t.button||this._searchWithDelay(void 0,{event:t,delay:a||this._opts.search.delay,searchOnCurPos:!0})}},{key:"_inputMouseupHandler",value:function(t){this._opts.searchFieldOptions.filterBasedOnCurPos&&this._searchBasedOnCurPos(t)}},{key:"_pasteHandler",value:function(t){var a=this;clearTimeout(this._searchTimer),t.target.disabled||(this._searchTimer=setTimeout(function(){a._trigger("input",t,{pasteAction:!0})&&a._searchWithDelay(void 0,{event:t,delay:a._opts.search.delay})}))}},{key:"_setFieldValue",value:function(t,a,o,n){if(a.selectable&&(n||this._opts.searchFieldOptions.updateOnSelect)){var l=this._getItemEventData(t,a);n&&(l.autoCompleted=!0),this._trigger("beforesearchfieldupdate",o,l)&&(this.inputField[0].value=this._getProp(a.normalisedData,"text"),this._trigger("searchfieldupdate",o,l))}}},{key:"_autofill",value:function(a,o,n){n&&"keydown"===n.type&&(n.keyCode===t.keyCode.UP||n.keyCode===t.keyCode.DOWN)&&!this._selectOnFocus&&this._opts.searchFieldOptions.autoComplete&&this._setFieldValue(a,o,n,!0)}},{key:"_isValidMultiSelectClick",value:function(t){var a=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],o=2<arguments.length?arguments[2]:void 0,l=t.target,i=this._isCheckboxClick(t),s=this._opts.selectorToIgnoreSelection;if(!i&&s&&n(l).is(s))return!1;if(!this._selectOnFocus)return!(!this._toggleOnItemClick&&!i);if(!a){if(this._toggleOnItemClick||i)return!0;if(o[0]===l||o.find(l).length)return!1}return!0}},{key:"selectAll",value:function(t){var a=this;this._opts.multiple&&this.staticData&&this.fetchData(function(o){a._setValues(o.results,{event:t})})}},{key:"setValues",value:function(){this._opts.multiple&&this.setValue.apply(this,arguments)}},{key:"getValues",value:function(){return this.getValue()}},{key:"_getItemJSONForGroupedData",value:function(t){var a=this,o=[];return t.forEach(function(t){var r,n=a._getProp(t,"groupLabel"),l=n=a._isNotNull(n)?n:"",i=a._groupsIncluded,s=i[i.length-1];s&&s.groupLabel===n?l=s:(a._groupHeads.length&&(l=a._groupHeads.find(function(t){return n===a._getProp(t,"groupLabel")})||""),l=a.getItemData(l,null,!0),n&&o.push(l),a._groupsIncluded.push(l)),r=l.id;var d=a.getItemData(t,r);o.push(d)}),o}},{key:"_showLoader",value:function(){var t={params:this.params,loading:!0};return this._loading=!0,(this._loaderData.fullloader=this._freshRequest)?this._replaceBodyItems([]):this._loaderEle?this._setVisibility():this._renderView([]),this._triggerUpdate({},t)}},{key:"_setLoaderData",value:function(){var a=this._data,o=this._opts,n=o.loaderIconClassName,l=this._loaderData={},i=o.loaderSVGIconId;l.icon=void 0,(n||i)&&(l.icon=t._getIconInfo(n,i,"#zc__svg--loader zeffects--rotate",this._CLASSES.loader+" zh-loading",a.loader={})),l.id=this._getKeyID("loader"),this._data.loader=this._loaderData}},{key:"_removeLoader",value:function(){this._loading=!1}},{key:"_bindAjaxEvents",value:function(t){t.requeststart=this._onReqStart.bind(this),t.requestend=this._onReqEnd.bind(this),t.requesterror=this._onReqErr.bind(this)}},{key:"_onReqStart",value:function(t){this._showLoader(),this._trigger("requeststart",null,t)}},{key:"_onReqEnd",value:function(t){this._removeLoader(),this._trigger("searchsuccess",null,t)}},{key:"_onReqErr",value:function(t){this._removeLoader(),this._showWarning("serverError"),this._trigger("searcherror",null,{response:t})}},{key:"_setMoreResults",value:function(){var t=this._CLASSES;this._data.moreAction={id:this._getKeyID("moreresults"),custom:!0,className:t.moreresults,disabled:this._opts.disabled,moreresults:!0,clickable:!0,view:{innerHTML:this._opts.moreResultsCustomHTML||"<span class="+t.text+">"+this._getText("moreAction")+"</span>"}}}},{key:"_setHeaderFooterItems",value:function(){var t=this,a=(this._opts.headerItems||[]).concat(this._htmlHeaderItems),o=(this._opts.footerItems||[]).concat(this._htmlFooterItems);if(a&&a.length||o&&o.length){var n=[],l=[];a&&(n=a.map(function(a){return t.getItemData(a,null,null,"header")})),o&&(l=o.map(function(a){return t.getItemData(a,null,null,"footer")})),this._data.headerItems=n.length&&n,this._data.footerItems=l.length&&l}else this._data.headerItems=this._data.footerItems=void 0}},{key:"_getHeaderFooterItem",value:function(t){for(var r,a=(this._opts.headerItems||[]).concat(this._htmlHeaderItems),o=(this._opts.footerItems||[]).concat(this._htmlFooterItems),n=a.concat(o),l=this._getUniqueValue(t),s=0;s<n.length;s++)if(r=n[s],l===this._getUniqueValue(r))return r}},{key:"_bindScroll",value:function(){this._addEvents({wheel:this._wheelEvents},this._listBody),this._considerScrollForLazyLoad=!0}},{key:"_unbindScroll",value:function(){this._removeEvents(this._wheelEvents,this._listBody),this._considerScrollForLazyLoad=!1}},{key:"_wheelHandler",value:function(){this._scrolledOnKeyDown=!1}},{key:"_scrollHandlerToLoadPage",value:function(t){var a=this,o=this._listBody[0].scrollTop;if(this._lastScrollTop=o,!this._loading){this._freshRequest=!1;var n=this._lastScrollTop>o,l=this._listBody[0].offsetHeight,i=!n&&o+l+5>this._listBody[0].scrollHeight;this._scroll={isBackwards:n,exceeded:i,menuHt:l},this._virtualization?this._showVirtualData(t):i&&this._getNextPage(function(o){return a._addDataToMenu(o,t)})}}},{key:"_noMorePageHandler",value:function(t){this._virtualization?this._updateVirtualData(t):this._unbindScroll()}},{key:"_getNextPage",value:function(t,a){var o=this,n=this.params;if(!this._firstRequest)if(n.pageIndex<n.totalPages)n.pageIndex++;else{if(!n.moreServerPages){if(this._results){var l=this._results;this._results=void 0,t(l)}return void this._noMorePageHandler(a)}n.pageIndex=1,n.serverPageIndex++}this._firstRequest=!1,this._loadDataSource(function(l){n=o.params,o._results=(o._results||[]).concat(l);var i=o._results.length;if(o._dsInit&&i<o._viewPerPage&&(n.moreServerPages||n.pageIndex<n.totalPages))o._getNextPage(t,o._results);else{var s=o._results;o._results=void 0,t(s,a)}},a)}},{key:"_loadFirstPage",value:function(t,a){this._firstRequest=!0,this._getNextPage(t,a)}},{key:"_calcItemHts",value:function(){this._ht[0]||(this._ht[0]=this._getItemHt(this._listBody[0].querySelector("[data-selectable=true]"))),this._isGrouped&&!this._ht[1]&&(this._ht[1]=this._getItemHt(this._listBody[0].querySelector("[role=group]")))}},{key:"_getItemHt",value:function(t){return t?n(t).outerHeight(!0):0}},{key:"_cacheData",value:function(t){this._cachedData.push({raw:t,processed:this._getItemJSON(t)})}},{key:"_getPagedItems",value:function(t){return this._cachedData[t-1]}},{key:"_calcHt",value:function(t){var a=this;this._calcItemHts();var o=0,n=this._getPagedItems(t);return n&&n.processed.forEach(function(t){o+=a._ht["itemgroup"===t.itemType?1:0]}),o}},{key:"_showVirtualData",value:function(t){var a=this,o={},n=this._updateVirtualData.bind(this,t,o),l=function(l){o.results=l,(l=o.results).length?(a._cacheData(l),n()):a._freshRequest&&a._afterFilter(t,o)};this._freshRequest?(this._cachedData=[],this._startPage=this._endPage=null,this._ht=[0,0],this._loadFirstPage(l,t)):this._scroll.exceeded?this._getNextPage(l):n()}},{key:"_updateVirtualData",value:function(t,a){var o=0,n=0,l=this._opts.maxPage,s=1,r=this._cachedData.length,d=r;if(r>l)for(var c=0,_=this._lastScrollTop+40*(this._scroll.isBackwards?-1:1);s<r;){if(_<(c+=this._calcHt(s))){d=s;for(var u=c;d<r&&!(_+this._scroll.menuHt<u);)u+=this._calcHt(d),d++;break}o=c,s++}if(s<this._startPage||d>this._endPage){for(var m=d+1;m<=r;m++)n+=this._calcHt(m);this._startPage=s,this._endPage=d;var g=[];this._datasource=[],this._data.virtualHeightAbove=o;for(var h=s;h<=d;h++){var y,v=this._getPagedItems(h);g.push.apply(g,_toConsumableArray(v.processed)),(y=this._datasource).push.apply(y,_toConsumableArray(v.raw))}this._data.virtualHeightBelow=n,(a=a||{}).addedItems=this._replaceBodyItems(g,!1,t),this._afterFilter(t,a)}}},{key:"_getHighlightData",value:function(t){var a=this._opts.search;if(!this._highlightData){var n,l,i,o=this._getSearchBy(a.by);if(this.DSInstance._isJSONSource){var s=this._dataMapping,r=s.text,d=s.groupLabel,c=s.informativeText;n=-1<o.indexOf(r),l=-1<o.indexOf(d),i=-1<o.indexOf(c)}this._highlightData={includeText:n,includeTitle:l,includeDesc:i}}return this._highlightData.pattern=this._getMatchingRegex(t,a),this._highlightData}},{key:"_highlightValidKey",value:function(a,o){var n=this._opts.search,l=this.params.query,i=this._getMatchingRegex(t.encodeHTML(l),n),s=n.fieldsToHighlight;return-1===(s=s&&s.length?Array.isArray(s)?s:s.split(","):this._getSearchBy(n.by)).indexOf(o)?a:this._highlightContent(a,i)}},{key:"_highlightContent",value:function(t,a){return t.replace(a,"<b class='zh-bold'>$1</b>")}},{key:"_setInnerAttr",value:function(t,a){var o=this._propResetter;"contentType"===t||"multiSelectInterfacePattern"===t||"hideCheckbox"===t||"checkboxPosition"===t||"checkedIcon"===t||"checkedIconClassName"===t||"checkedSVGIconId"===t||"checkedIconPosition"===t||"toggleOnItemClick"===t||"searchFieldOptions"===t||"actionButtons"===t||"template"===t||"focusItemOnItemMouseover"===t||"selectOnKeyNavigation"===t||"disabled"===t||"reorderable"===t?o.vars=!0:"searchField"===t||"showSearchField"===t?o.vars=o.search=!0:"dataMapping"===t?(o.vars=!0,this._dataMapping.groupLabel!==a.groupLabel&&(o.ds=!0)):"multiple"===t?o.vars=o.values=!0:"isGrouped"===t||"lazyLoading"===t||"virtualization"===t||"maxPage"===t||"viewPerPage"===t||"filterByCSSSelector"===t||"serverSearch"===t||"customSearch"===t||"sort"===t||"sortBy"===t||"sortOrder"===t||"customSorter"===t||"cacheData"===t||"filters"===t?o.ds=!0:"items"===t||"dataSource"===t||"dataStructure"===t?(this._internal||(this._htmlTagData=this._flatted=void 0),this._destroyDSIns(),o.ds=!0):"search"===t||"criteriaPrecedence"===t?o.vars=o.ds=!0:"allowDragToSelect"===t||"keyNavigation"===t||"moreResultsAction"===t||"allowShiftSelection"===t||"height"===t||"width"===t||"headerItems"===t||"footerItems"===t?this._domChanged=!0:"characterKeyFocus"===t?o.rebuildItems=!0:"loaderIconClassName"===t||"loaderSVGIconId"===t?(this._domChanged=!0,this._data.loader&&this._setLoaderData()):"value"===t||"selectionLimit"===t?this._domChanged=o.values=!0:"query"===t?(this.params.query=a,o.search=!0):"customNoResultsHTML"===t&&this._setCustomNoResults()}},{key:"_setAttribute",value:function(t,a){var o=this._propResetter;o||(o=this._propResetter={}),this._opts[t]=a,this._setInnerAttr(t,a),(o.vars||o.ds||o.values||o.rebuildItems||o.search||o.rebuildHeaderFooterItems)&&(this._reInit=!0)}},{key:"_buildData",value:function(){this._dataReset=!this.DSInstance;var t=this._propResetter||{};if(clearTimeout(this._searchTimer),(t.ds||t.search)&&(this.params.previousQuery=void 0),t.vars&&t.ds?this._refresh():t.vars?(this._detachInputEv(),this._initVars(),this._afterPropInit(),t.search?this._reSearch():this._rebuildItems()):t.ds?(this._initDS(),this._afterPropInit(),this._reSearch()):t.search?this._reSearch():t.rebuildItems&&this._rebuildItems(),this._propResetter={},this._dataReset=!1,t.values){var a=this._opts.value;a&&(1<(a=this._toArr(a)).length&&(this._opts.multiple?this._opts.selectionLimit&&a.splice(this._opts.selectionLimit):a.splice(1))),this._setValues(a,{clearOtherValues:!0})}}},{key:"_rebuildItems",value:function(t){this._rebuilt=!0,this._groupsIncluded=[],this._setHeaderFooterItems(),this._data.items=this._getItemJSON(this._datasource),t||this._renderView(),this._rebuilt=!1}},{key:"_setSearchFieldData",value:function(){var a=this,o=this._opts.searchFieldOptions,n=this._CLASSES,l=this._data.searchBox={disabled:this._opts.disabled,id:this._getKeyID("searchbox")};t._getIconInfo(o.iconClassName,o.SVGIconId,"#zc__svg--search",n.searchicon,l.icon={}),o.clearButton&&(l.clearButtonId=this._getKeyID("clearbutton"),t._getIconInfo(o.clearButtonIconClassName||o.clearButtonIconClass,o.clearButtonSVGIconId,"#zc__svg--clear",n.clearbuttonicon,l.clearButton={}),l.clearButtonTitle=this._getMsg("clear"),l.clearFn={handler:function(){a.clearSearch()},namespace:this.name})}},{key:"clearSearch",value:function(){this.inputField.val()&&this.inputField.val("").trigger("input"),this._focusInputField()}},{key:"_updateClearBtn",value:function(){var t=this._data.searchBox.clearButtonId;t&&(this._getById(t)[0].style.display=this.inputField.val()?"":"none")}},{key:"_flattenData",value:function(t){var a=this._dataMapping;return this._isGrouped=!0,this._groupHeads=this._groupHeads||[],a.groupLabel=a.groupLabel||"groupLabel",t=this._restructData(t,null,this._opts.dataMapping.groupLabel||a.text)}},{key:"_restructData",value:function(t,a,o){var n=this,l=[],s=this._dataMapping.options;return t.forEach(function(t){var i=t[s];i?(n._groupHeads.push(t),n._setProp(t,"groupLabel",n._mapJSONToData(t,o)),l=l.concat(n._restructData(i,t))):(a&&(n._setProp(t,"groupLabel",n._getProp(a,"groupLabel")),t.hidden=t.hidden||a.hidden,t.disabled=t.disabled||a.disabled),l.push(t))}),l}},{key:"_setItemAttribute",value:function(t,a,o,n){var l=t;if(t.nodeType&&(l=t.optData,t.tagName===this._SELECTORS.OPTGROUP&&(n=!0)),l){if("selected"===a)return void this[o?"setValue":"deselect"](l);var i=this._getItem(l,!1);if(i)return i[a]=o,void this._rebuildItems();this.DSInstance.setItemAttribute(l,a,o,n)}}},{key:"setItemAttributes",value:function(t,a,o,l){var s,i=this;this.staticData&&this._toArr(t).forEach(function(t){if(i._skipRender=!0,t)if("object"!==_typeof(a)||n.isEmptyObject(a))i._setItemAttribute(t,a,o,l);else for(var r in a)i._setItemAttribute(t,r,a[r],l);s||i._skipRender||(s=!0)}),s&&this._renderView(),this._skipRender=!1}},{key:"_bindActionBtns",value:function(t,a){var o=this,l=this._namespace;t.find("."+this._CLASSES.actionbuttonsWrapper).off(l).on("click".concat(l," mousedown").concat(l," mouseup").concat(l),function(t){o._focussed=!0,"mousedown"===t.type&&o._unFocusItem(),o._actionBtnClicked=!0}).find("."+this._CLASSES.actionbutton).toArray().forEach(function(i,s){i=n(i);var r=o._actionBtns[s],d=r.customAttributes;d&&i.attr(d),i.off(l).on("click"+l,function(n){var l=r.action;l&&l.call(o.element,a.originalData,t[0],n)})})}},{key:"_setActionBtns",value:function(a){var o=this;this._opts.disabled&&"contextual"!==this._opts.actionButtons.displayType||(this._actionBtns=a.map(function(a){var n={};return t._getIconInfo(a.iconClassName,a.SVGIconId,"",o._CLASSES.itemicon,n),n.title=a.title,n.action=a.action,n.className=a.className||"",n.disabled=a.disabled||o._opts.disabled,n}))}},{key:"_parseHTMLInput",value:function(){var t=this,a=this._opts,o=a.dataSource,n=a.items;if(!(this._isAjaxSource(o)||n&&n.length)){var l=this._getDataSource();n=[],l.forEach(function(a){a.isHeader?t._htmlHeaderItems.push(a):a.isFooter?t._htmlFooterItems.push(a):n.push(a)}),this._isGrouped&&(n=this._flattenData(n)),a.items=n,n.length&&(this._htmlTagData=!0)}}},{key:"_getDataSource",value:function(){var a=this,o=this._getValidSubOptions(this.element,!0);if(this.isCE){var l=this._SELECTORS,i=[],s=new RegExp("(".concat(l.OPTIONSHEADER,"|").concat(l.OPTIONSFOOTER,"|").concat(l.OPTIONSBODY,")"),"i");if(o.forEach(function(o){var d,c,r=o.tagName.toLowerCase();s.test(r)?(r===l.OPTIONSHEADER?d=!0:r===l.OPTIONSFOOTER&&(c=!0),a._getValidSubOptions(n(o),!0).forEach(function(a){var o=t._getOpts(a);o.isHeader=d,o.isFooter=c}),i.push.apply(i,_toConsumableArray(a._getValidSubOptions(n(o),!0)))):i.push(o)}),!i.length||!i[0]._initialized)return[];o=i}return this._genDataForTag(o)}},{key:"_getValidSubOptions",value:function(t,a){var o=this._SELECTORS,n=[o.OPTION];return a&&n.push(o.OPTGROUP),this.isCE&&(n.push.apply(n,[o.OPTIONSEPARATOR]),t.is(this.element)&&n.push.apply(n,[o.OPTIONSHEADER,o.OPTIONSFOOTER,o.OPTIONSBODY])),t.children(n.join(",")).toArray()}},{key:"_genDataForTag",value:function(a,o){var l=this;return a.map(function(a){var i=t._getOpts(a);i.id=a.id;var s=a.tagName.toLowerCase();if(l.isCE&&s===l._SELECTORS.OPTIONSEPARATOR&&(i.separator=!0),!i.separator){var r=l._isNotNull(a.label)?a.label:"";if(i.value=l._isNotNull(a.value)?a.value:r,s===l._SELECTORS.OPTGROUP){var d=l._getValidSubOptions(n(a));(!l.isCE||d[0]._initialized)&&(i.options=l._genDataForTag(d,i)),i.isOptGroup=l._isGrouped=!0,i.groupLabel=r}else i.innerHTML=a.innerHTML||a.zinnerHTML,r=r||a.textContent.trim(),i.selected=a.selected||i.selected;i.text=r,i.title=i.title||("image"===l._opts.contentType?i.label:void 0)}return i.disabled=i.disabled||a.disabled,o&&(i.groupName=o.value,i.isHeader=o.isHeader,i.isFooter=o.isFooter,i.disabled=i.disabled||o.disabled),i.hidden=i.hidden||("boolean"==typeof a.hidden?a.hidden:a.hasAttribute("hidden"))||void 0,i.className=a.className||i.className,i.style=i.style||a.getAttribute("style"),a.optData=i,i})}},{key:"_removeItems",value:function(t,a,o){var n=this;t=this._toArr(t);!function(){var l=n.DSInstance;t?l.removeItems(t):a?l.removeItemsAt(a):o&&l.removeGroups(o)}()}},{key:"addItems",value:function(t,a){this.DSInstance.addItems(t,a)}},{key:"addItemsAt",value:function(t,a,o){this.DSInstance.addItemsAt(t,a,o)}},{key:"removeItems",value:function(t,a){this._removeItems(t,null,null,a)}},{key:"removeItemsAt",value:function(t,a){this._removeItems(null,t,null,a)}},{key:"removeGroups",value:function(t){this._removeItems(null,null,t)}},{key:"removeAllItems",value:function(){this._unFocusItem(),this.DSInstance.removeAllItems()}},{key:"_initSortable",value:function(){var a=this._listBody;a.data("zsortable")?t.sortable(a).refresh():t.sortable(a,{region:"parent",items:".".concat(this._CLASSES.item,"[data-selectable=true]:not(.").concat(this._CLASSES.disabled,")"),end:this._onDragEnd.bind(this),drag:this._onDragStart.bind(this)})}},{key:"_onDocMouseUp",value:function(t){this._removeDocEvent(),t.preventDefault()}},{key:"_onDragStart",value:function(t){if(this._dragging)this._trigger("drag",t,{item:this._draggedEle});else{document.addEventListener("mouseup",this._docMouseUpHandler,!0),t=t.originalEvent;var a=this._getClosestItem(n(t.target));if(this._draggedEle=this._prevEleBeforeDrag=void 0,a){this._dragging=!0,this._draggedEle=a;var o=a[0].id;this.focusItem(a[0],t,!1),this._DOMChanges[o]||(this._DOMChanges[o]=a[0].previousSibling),this._trigger("dragstart",t,{item:a})}}}},{key:"_replaceMovedItems",value:function(){var t=this._DOMChanges,a=this._lastScrollTop;for(var o in t)this._getById(o).insertAfter(t[o]);this._listBody[0].scrollTop=a}},{key:"_onDragEnd",value:function(t){var a=this;t=t.originalEvent;var o=this._draggedEle;if(o){for(var n=this._datasource,l=o.prev(),s=0,r=this._data.items,d=0;d<r.length;d++)r[d].index=s,r[d].heading||s++;var u,c=this._getStoredData(o).index,_=-1;if(l.length){var p=this._getStoredData(l);u=p.heading,_=p.index}var m=_+(u?0:1);if(c!==m){var g=n[c];if(this._isGrouped){var h=n[_],v="groupLabel",y=this._getProp(h,v);this._setProp(g,v,y)}if(c<m&&--m,n.splice(c,1),n.splice(m,0,g),this._opts.cacheData){var f=this.DSInstance._opts;f.data=this._datasource,f.dataSource=null,this.DSInstance=this._initDSInstance(f)}else this.DSInstance.setCachedData(n);this._rebuildItems(!0),this._data.items.forEach(function(t){return a._updateData(t)}),this._trigger("dragend",t,{item:o,itemData:g,initialIndex:c,currentIndex:m})}}this._dragging=!1}},{key:"name",get:function(){return"zlistbox"}},{key:"attrs",get:function(){return{contentType:"text",multiple:!1,selectionLimit:0,multiSelectInterfacePattern:"checkbox",hideCheckbox:!1,checkboxPosition:"left",checkedIcon:!1,checkedIconClassName:null,checkedSVGIconId:null,checkedIconPosition:"left",template:null,groupHeadingTemplate:null,selectorToIgnoreSelection:null,showSearchField:!1,searchField:null,loaderIconClassName:void 0,loaderSVGIconId:void 0,lazyLoading:!1,virtualization:!1,viewPerPage:null,serverSearch:!1,customSearch:null,cacheData:!0,sort:!1,sortBy:null,sortOrder:"asc",customSorter:null,reorderable:!1,grippyIcon:!0,grippyIconClassName:null,grippySVGIconId:null,customNoResultsHTML:null,focusItemOnItemMouseover:!1,selectOnKeyNavigation:void 0,selectOnEnterKey:!0,characterKeyFocus:!0,keyNavigation:!0,value:null,wrapAround:!0,height:null,width:null,allowDragToSelect:!0,moreResultsAction:!1,disabled:!1,allowDuplicateItems:!0,randomDataID:!0,filterByCSSSelector:!1,maxPage:3,isGrouped:!1,focusFirstItem:!1,selectOnSpaceKey:!0,focusSelectedItem:!0,allowShiftSelection:!0,query:"",isTextHTMLEncoded:!1,textIcon:!1}}},{key:"props",get:function(){return{appendTo:null,headerItems:[],footerItems:[],items:[],dataSource:{},dataMapping:{text:"text",value:"value",informativeText:"informativeText",iconClassName:"iconClassName",textIcon:"textIcon",SVGIconId:"SVGIconId",options:"options",zitemid:"zitemid"},actionButtons:{actions:[],displayType:"contextual-mouseover",position:"bottom"},callbacks:{},searchFieldOptions:{placeholder:"",iconClassName:void 0,SVGIconId:void 0,clearButton:!1,clearButtonIconClassName:void 0,clearButtonSVGIconId:void 0,handleEvents:!0,filterBasedOnCurPos:!1,preventUPDOWNKeysDefault:!0},search:{by:"text",searchIncrementsInCache:!1,trimWhitespace:!0,highlightKeyword:!1,fieldsToHighlight:null,minKeywordLength:0,focusFirstResult:!0,criteria:"contains"},messages:{allOptionSelected:"All the available options are selected",noResults:"No results found",moreAction:"See more results",serverError:"Server request failed. Please try again later",minKeywordLength:"Please enter #minKeywordLength# or more characters",clear:"Clear"},criteriaPrecedence:[],filters:null}}},{key:"propType",get:function(){return{selectOnFocus:"boolean",filters:"array",viewPerPage:"number"}}},{key:"tagNames",get:function(){return{ITEM:"z-listboxitem",GROUP:"z-listboxgroup",BODY:"z-listboxbody",HEADER:"z-listboxheader",FOOTER:"z-listboxfooter",SEPARATOR:"z-listboxseparator"}}},{key:"SELECTORS",get:function(){var t=this.tagNames;return{OPTION:this.isCE?t.ITEM:"option",OPTGROUP:this.isCE?t.GROUP:"optgroup",OPTIONSBODY:t.BODY,OPTIONSHEADER:t.HEADER,OPTIONSFOOTER:t.FOOTER,OPTIONSEPARATOR:t.SEPARATOR}}},{key:"EVENTS",get:function(){return["focus","beforefocus","blur","beforeselect","select","beforedeselect","deselect","change","itemclick","beforeitemfocus","itemfocus","itemhover","moreactionclick","selectionlimitexceeded","beforesearch","searchsuccess","searcherror","noresults","beforelistupdate","listupdate","imageerror","dragstart","drag","dragend","beforekeydown","keydown","beforesearchfieldupdate","searchfieldupdate"]}},{key:"CLASSES",get:function(){return{container:"zlistbox",icon:"zlistbox--withicon",listwithloader:"zlistbox--loading",withicon:"zlistbox--withicon",withhint:"zlistbox--withdesc",withcheckbox:"zlistbox--withcheckbox",withcheckedicon:"zlistbox--withcheckedindication",withsearchfield:"zlistbox--withsearchfield",icononly:"zlistbox--icononly",icontext:"zlistbox--iconwithtext",listwithcustom:"zlistbox--withcustomitem",listwithcheckboxRight:"zlistbox--checkboxright",listwithcheckediconRight:"zlistbox--checkedindicationright",listwithactionbtnsvisible:"zlistbox--actionbuttonvisible",withoutcheckeditem:"zlistbox--withoutcheckeditem",listwithicononly:"zlistbox--icononly",listwithimage:"zlistbox--withimage",reorderable:"zlistbox--reorderable",text:"zlistbox__text",hint:"zlistbox__description",body:"zlistbox__body",header:"zlistbox__header",footer:"zlistbox__footer",item:"zlistbox__item",itemgroup:"zlistbox__itemgroup",itemgrouplabel:"zlistbox__grouplabel",loader:"zlistbox__loader",loadericon:"zlistbox__loadericon",fullloader:"zlistbox__fullloader",actionbuttonsWrapper:"zlistbox__actions",actionbutton:"zlistbox__action",separator:"zlistbox__separator",checkediconWrapper:"zlistbox__checkedindication",checkedicon:"zlistbox__checkedicon",checkboxWrapper:"zlistbox__checkbox",checkbox:"zlistbox__inputcheckbox",checkboxlabel:"zlistbox__checkboxlabel",avatar:"zlistbox__avatar",icondiv:"zlistbox__image",itemicon:"zlistbox__icon",content:"zlistbox__content",textIconWrapper:"zlistbox__imagetext",moreresults:"zlistbox__moreresults",noresults:"zlistbox__noresults",noresultstext:"zlistbox__noresultstext",search:"zlistbox__search",searchcontainer:"zlistbox__searchiconcontainer",searchicon:"zlistbox__searchicon",searchfield:"zlistbox__searchfield",clearbuttonicon:"zlistbox__clearicon",clearbutton:"zlistbox__clearbutton",grippyicon:"zlistbox__grippy",hoverable:"is-hoverable",disabled:"is-disabled",hover:"on-hover",focussed:"has-focus",selected:"is-selected",rtl:"zh-rtl"}}},{key:"isIE9",get:function(){return 9===t.Browser.getIEVersion()}}]),o}();t.registerComponent("ZListBox",O),function(t){var a=t.zlistbox.Templates,o=t.Templates.Utilities;a.container=function(t){return ZT.html(zc0tO144(),t.children&&a.children(t))},a.children=function(t){var o=t.classes;return ZT.html(zc0tO145(),t.searchBox&&a.searchField(t.searchBox,o,t),t.headerItems&&a.headerLayout(t,o),t.items&&a.constructBody(t,o),t.noResults&&a.noresultsLayout(t.noResults,o),(t.footerItems||t.moreAction)&&a.footerLayout(t,o))},a.constructBody=function(t,o){return ZT.html(zc0tO146(),o.body,t.virtualHeightAbove&&a.virtualHolder(t.virtualHeightAbove,o),t.items.map(function(t){return a.item(t,o)}),t.virtualHeightBelow&&a.virtualHolder(t.virtualHeightBelow,o),t.loader&&a.loader(t.loader,o))},a.item=function(t,o){return t.separator?a.separator(t,o):t.heading?a.heading(t,o):a.defaultItem(t,o)},a.defaultItem=function(t,o){return ZT.html(zc0tO147(),t.id,o.item,t.className,t.disabled?"is-disabled":"",t.clickable?"":"zlistbox__item--nonselectable",t.title,t.disabled?"true":"",t.disabled?"true":"",t.view.ariaLabel,t.view.ariaValue,t.name,t.selectable?"true":"",t.clickable?"true":"",t.clickable?"":"true",t,t.grippyIcon&&a.grippyIcon(t,o),t.checkbox&&a.checkbox(t,o),t.checkedIcon&&a.checkedIcon(t,o),a.content(t,o),t.actionButtons&&a.actionButtons(t.actionButtons,o))},a.grippyIcon=function(t,a){return ZT.html(zc0tO148(),a.icondiv,a.grippyicon,o.icon(t.grippyIcon))},a.separator=function(t,a){return ZT.html(zc0tO149(),t.id,a.separator,t.className,t)},a.content=function(t,o){return t.custom?ZT.html(zc0tO150(),ZT.customHTML(t.view.innerHTML||"")):ZT.html(zc0tO151(),t.hasImage&&ZT.html(zc0tO152(),o.icondiv,t.textIcon?o.textIconWrapper:"",a.imageLayout(t.view,o)),o.content,t.view.text&&ZT.html(zc0tO153(),o.text,ZT.customHTML(t.view.text)),t.view.description&&ZT.html(zc0tO154(),o.hint,ZT.customHTML(t.view.description)))},a.actionButtons=function(t,a){return ZT.html(zc0tO155(),a.actionbuttonsWrapper,t.map(function(t){return ZT.html(zc0tO156(),t.title,t.disabled?"true":"",a.actionbutton,t.className,t.disabled?"is-disabled":"",o.icon(t))}))},a.checkbox=function(t,a){return ZT.html(zc0tO157(),a.checkboxWrapper,t.checkboxId,t.disabled,a.checkbox,t.checkboxId,a.checkboxlabel,t.disabled?"is-disabled ":"")},a.checkedIcon=function(t,a){return ZT.html(zc0tO158(),a.checkediconWrapper,o.icon(t.checkedIcon))},a.heading=function(t,a){return ZT.html(zc0tO159(),t.id,a.itemgroup,t.className,t.disabled?"is-disabled":"",t,t.view.text?ZT.html(zc0tO160(),a.itemgrouplabel,ZT.customHTML(t.view.text)):ZT.customHTML(t.view.innerHTML||""))},a.headerLayout=function(t,o){return ZT.html(zc0tO161(),o.header,t.headerItems.map(function(t){return a.item(t,o)}))},a.footerLayout=function(t,o){return ZT.html(zc0tO162(),o.footer,t.footerItems&&t.footerItems.map(function(t){return a.item(t,o)}),t.moreAction&&a.item(t.moreAction,o))},a.imageLayout=function(t,a){return a=t.classes||a,ZT.html(zc0tO163(),t.hasImageURL&&!t.textIcon?ZT.html(zc0tO164(),t.image||"invalid.jpg"):t.icon&&!t.textIcon?o.icon(t.icon):ZT.html(zc0tO165(),a.icon,t.textIcon))},a.loader=function(t,o){return ZT.html(zc0tO166(),t.id,o.loader,a.loaderIcon(t,o))},a.loaderIcon=function(t,a){return ZT.html(zc0tO167(),t.icon?o.icon(t.icon):ZT.html(zc0tO168(),a.loadericon))},a.noresultsLayout=function(t,a){return ZT.html(zc0tO169(),t.id,a.noresults,t.innerHTML?ZT.html(zc0tO170(),a.noresultstext,ZT.customHTML(t.innerHTML)):"")},a.searchField=function(t,o,n){return ZT.html(zc0tO171(),o.search,t.disabled?o.disabled:"",a.searchFieldContainer(t,o,n))},a.searchFieldContainer=function(t,a){return ZT.html(zc0tO172(),a.searchcontainer,o.icon(t.icon),t.id,t.disabled?"true":"",a.searchfield,t.clearButton&&ZT.html(zc0tO173(),a.clearbutton,t.clearButtonTitle,t.clearButtonId,t.clearFn,o.icon(t.clearButton)))},a.virtualHolder=function(t,a){return ZT.html(zc0tO174(),a.item,t)}}(ZPeopleComponents);var M=function(a){function l(){return _classCallCheck(this,l),_possibleConstructorReturn(this,_getPrototypeOf(l).apply(this,arguments))}return _inherits(l,t.CoreComponent),_createClass(l,[{key:"_create",value:function(){var t=this._opts;this._dataMapping=t.dataMapping,this._maxResults=t.maxResults;var a=t.dataSource;this._promiseObj=void 0,this.params={},this._cachedData={},this._filterFn=this._filterStaticSource,this._staticData=!0,this._isAjaxSource(a)&&this._initAjaxSource(a)}},{key:"_setDataSource",value:function(t){this._sorted=!1,this._dataSource=t,this._orgData=_toConsumableArray(t),t.length&&(this._isJSONSource="object"===_typeof(t[0]),this._opts.inPlaceSorting&&(this._dataSource=this._organizeResults(t)))}},{key:"_organizeResults",value:function(t){if(t&&t.length&&!this._sorted){if(this._sorted=!0,this._opts.sort)return this._sortResults(t);if(this._isGrouped())return this._organizeGroupedData(t)}return t}},{key:"_getTotalPages",value:function(){return this._maxResults?o(this._totalFilteredData.length/this._maxResults):this._totalFilteredData.length?1:0}},{key:"_getFilteredData",value:function(){var t=this,a=this.params.query,o=this._dataSource||[];return o.length?this._isFunc(this._opts.matcher)?o.filter(function(o){return t._opts.matcher(a,o)}):a||this._opts.filters||this._filters?this._filterData(a,o):o.filter(function(t){return!t.hidden}):o}},{key:"_isGrouped",value:function(){return this._dataMapping.groupLabel&&this._isJSONSource}},{key:"_trigger",value:function(t,a){var o=this._opts.callbacks[t];return!o||o(a)}},{key:"_fetch",value:function(){var t=this,a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},o=1<arguments.length?arguments[1]:void 0,n=2<arguments.length?arguments[2]:void 0;"function"==typeof a&&(n=o=a,a={});var l=this.params;return a.query=a.query?a.query:"",l.previousQuery=l.query,l.query=a.query,this._serverPageIndex=a.serverPageIndex||1,this._pageIndex=a.pageIndex,this._filters=a.filters,new Promise(function(a,i){t._resolvePromise=function(n){t._ajaxSource&&(n.serverPageIndex=l.pages,n.moreServerPages=t._moreServerPages),o&&o(n),a(n)},t._rejectPromise=function(t){n&&n(t),i(t)},t._filterFn()}).catch(function(t){if("abort"!==t)throw t})}},{key:"_filterStaticSource",value:function(){this._dataSource||this._setDataSource(this._opts.data),this._totalFilteredData=this._filteredData=this._organizeResults(this._getFilteredData()),this._totalPages=this._getTotalPages(),this._sendDataToUser()}},{key:"_sendDataToUser",value:function(){return this._maxResults?this._resolvePageData():void this._resolvePromise({query:this.params.query,results:this._cloneObject(this._filteredData)})}},{key:"_abortAjaxReq",value:function(){this._ajaxRequest&&(this._ajaxRequest.abort(),this._ajaxRequest=void 0)}},{key:"fetch",value:function(){return this._fetch.apply(this,arguments)}},{key:"destroy",value:function(){this._abortAjaxReq()}},{key:"clearCache",value:function(){this.clearCachedQuery(),this._dataSource=this._orgData=this._sorted=this._filters=void 0,this._abortAjaxReq()}},{key:"_getData",value:function(t){var a=this._dataSource;if(a.length)for(var l,o=this._getUniqueValue(t),n=0;n<a.length;n++)if(l=a[n],o===this._getUniqueValue(l))return l}},{key:"clearCachedQuery",value:function(){this._cachedData={}}},{key:"setCachedData",value:function(t){this._dataSource=t,this._isJSONSource="object"===_typeof(t[0])}},{key:"getData",value:function(t,a,o){var n=this;this._staticData&&(this._dataSource||!this._ajaxSource||o)&&this._fetch(function(){var o=n._getData(t);a(o?"object"===_typeof(o)?_objectSpread({},o):o:null)})}},{key:"_filterData",value:function(t,a){var o=this,n=this._opts,l=n.customSearch;if(this._isFunc(l))return l.apply(void 0,arguments);var i=[],s=n.search,r=this._getMatchingRegex(t,s);if(this._isJSONSource){var d=this._getSearchBy(s.by),c=[];i=a.filter(function(a){if(!a.hidden){var l=o._mapJSONToData(a,o._dataMapping.value);if(n.allowDuplicateValues||-1===c.indexOf(l)){var i=d.map(function(a){return{field:a,value:t,criteria:s.criteria,caseSensitive:s.caseSensitive}}),r=[o._filters||n.filters||[]];if(r.push({logic:"or",filters:i}),o._doesMatchFilters(a,r))return c.push(l),!0}}})}else i=a.filter(function(t){return r.lastIndex=0,r.test(t)});return"contains"===s.criteria&&n.criteriaPrecedence.length?this._precedenceSort(i,t):i}},{key:"_doesMatchFilters",value:function(t){var a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this._opts.filters,o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"and";if(a.logic)return this._doesMatchFilters(t,a.filters,a.logic);for(var n=0;n<a.length;n++){var l=a[n],s=void 0;if(l.logic)s=this._doesMatchFilters(t,l.filters,l.logic);else if(Array.isArray(l))s=this._doesMatchFilters(t,l);else{var r=this._getMatchingRegex(l.value,{criteria:l.criteria,caseSensitive:l.caseSensitive}),d=this._mapJSONToData(t,l.field);r.lastIndex=0,s=r.test(d)}if(s){if("or"===o)return!0}else if("and"===o)return!1}return"and"===o}},{key:"_resolvePageData",value:function(){var t=this._pageIndex;return!t||!this._totalPages||t<=this._totalPages?this._resolvePromise({query:this.params.query,pageIndex:t,results:this._cloneObject(this._getPageData(t,this._totalFilteredData)),totalPages:this._totalPages}):void this._rejectPromise(this._opts.messages.pageIndexExceed)}},{key:"_getPageData",value:function(t,a){var o=this._maxResults;if(t){var n=o*(t-1);return a.slice(n,n+o)}return a}},{key:"_organizeGroupedData",value:function(t){var a=this._getGroupedData(t);this._groupedData=a;var o=[];for(var n in a)o.push.apply(o,_toConsumableArray(a[n]));return o}},{key:"_getGroupedData",value:function(t){var a=this,o={};return t.forEach(function(t){var n=a._mapJSONToData(t,a._dataMapping.groupLabel);o[n=n||""]||(o[n]=[]),o[n].push(t)}),o}},{key:"_sortResults",value:function(t){var a=this._opts;if(t=t.slice(),this._isFunc(a.customSorter))return a.customSorter(t);if(this._offset="desc"===a.sortOrder?-1:1,this._isJSONSource){var o=this._dataMapping;this._sortField=a.sortBy?(a.sortBy+"").split(","):[o.text||o.label];var n=this._isGrouped();n&&-1===this._sortField.indexOf(o.groupLabel)?t=this._sortGroupedData(t):(t.sort(this._sortJSONData.bind(this)),n&&(t=this._organizeGroupedData(t)))}else t.sort(this._sortFn.bind(this));return this._offset=this._sortField=void 0,t}},{key:"_toLC",value:function(t){return"string"==typeof t?t.toLowerCase():t}},{key:"_sortFn",value:function(t,a){var l,o=!this._isNotNull(t),n=!this._isNotNull(a);return o&&n?l=0:o?l=-1:n?l=1:t.localeCompare?l=t.localeCompare(a):l=(t=this._toLC(t))>(a=this._toLC(a))?1:t<a?-1:0,l*this._offset}},{key:"_sortJSONData",value:function(t,a){for(var o=0;o<this._sortField.length;o++){var n=this._sortField[o],l=this._sortFn(this._mapJSONToData(t,n),this._mapJSONToData(a,n));if(l)return l}}},{key:"_sortGroupedData",value:function(t){var a=this._getGroupedData(t);for(var o in t=[],a){var n;(n=t).push.apply(n,_toConsumableArray(a[o].sort(this._sortJSONData.bind(this))))}return t}},{key:"_initAjaxSource",value:function(){this._ajaxSource=!0,this._filterFn=this._filterAjaxSource,this._opts.serverSearch?this._serverSearch=!0:this._opts.isResponseFiltered=!1,this._serverPaging=this._opts.dataSource.paginated,this._staticData=!(this._serverSearch||this._serverPaging)}},{key:"_filterAjaxSource",value:function(){var t=this,a=function(){t._filterCurrentAjaxData(),t._sendDataToUser()},o=this.params;if(this._dataSource&&o.query===o.previousQuery&&o.pages===this._serverPageIndex&&this._opts.cacheData)this._sendDataToUser();else{var l=!this._serverPaging&&this._getDataFromCache(o.query);if(l)this._setDataSource(l);else if(this._serverSearch||this._serverPaging||!this._dataSource||!this._opts.cacheData)return this._initAjaxCall(a,function(a){t._rejectPromise(a)});a()}}},{key:"_filterCurrentAjaxData",value:function(){var t=this._opts,a=!this._serverPaging&&this._getDataFromCache(this.params.query);this._filteredData=this._dataSource,a||(!t.isResponseFiltered&&(this._filteredData=this._getFilteredData(this.params.query)),this._cacheResponse(this._filteredData),this._filteredData=this._organizeResults(this._filteredData)),this._totalFilteredData=this._filteredData,this._totalPages=this._getTotalPages()}},{key:"_initAjaxCall",value:function(a,o){var n=this,l=this._opts.dataSource;this._serverPaging&&(this.params.pages=this._serverPageIndex);var i=this._getParams();this._trigger("requeststart",{params:i});var s=function(t){n._ajaxRequest=void 0,n._onAjaxSucess(t),a&&a(t)},r=function(t,a){n._ajaxRequest=void 0,n._onAjaxFail(t,a),o&&o(a)},d={params:i};if(!l.search){var c=_objectSpread({},l);c.success=c.error=void 0;var _=c.queryParam;c.sourceURL=this._isFunc(c.URL)?c.URL(i):c.URL,c.data=this._isFunc(_)?_(i):_,d.ajaxSettings=c}this._trigger("requeststart",d),this._abortAjaxReq();var u=this._serverPaging&&this._getDataFromCache(i.query);u?l.search?(this._promiseObj=void 0,s(u)):this._setDataSource(u):l.search?this._promiseObj=l.search(d.params):this._promiseObj=this._ajaxRequest=t.AJAX.transport(d.ajaxSettings);var p=this;!function(t){t.then(function(a){p._searchData=l.search&&a,t===p._promiseObj&&s(a)},function(a,o){t===p._promiseObj&&r(a,o)})}(this._promiseObj)}},{key:"_getParams",value:function(){return n.extend({},this.params)}},{key:"_onAjaxSucess",value:function(t){var n,o=this._opts.dataSource;o.success?t=(n=o.success(t,this._getParams())).results||[]:t.results&&(t=(n=t).results||[]),this._moreServerPages=this._serverPaging&&n.more;var l={results:t};this._trigger("requestend",l),this._setDataSource(l.results)}},{key:"_onAjaxFail",value:function(t,a){if("abort"!==t.statusText){var o=this._opts.dataSource.error;o&&o.apply(void 0,arguments),this._trigger("requesterror",{params:this._getParams(),jqXHR:t,exception:a})}}},{key:"_cacheResponse",value:function(t){if(this._opts.cacheData){var a=this.params.query;this._serverPaging?(!this._cachedData[a]&&(this._cachedData[a]={}),this._cachedData[a][this.params.pages]=this._cachedData[a][this.params.pages]||this._searchData||t):this._cachedData[a]=this._cachedData[a]||t}}},{key:"_getDataFromCache",value:function(t){return t in this._cachedData?this._serverPaging?this._cachedData[t][this.params.pages]:this._cachedData[t]:1<t.length&&this._opts.searchIncrementsInCache?this._getDataFromCache(t.slice(0,-1)):void 0}},{key:"_precedenceSort",value:function(t,a){for(var p,m,o=this._opts,n=o.criteriaPrecedence,l=-1<n.indexOf("startswith"),s=-1<n.indexOf("wordstartswith"),r={startswith:[],wordstartswith:[],contains:[]},d=this._escapeQuery(a),c=new RegExp("(?: ("+d+"))",o.search.caseSensitive?"":"i"),_=new RegExp("^"+d,o.search.caseSensitive?"":"i"),u=0;u<t.length;u++)p=(m=t[u])[this._dataMapping.text],(l||s)&&_.test(p)?r.startswith.push(m):s&&c.test(p)?r.wordstartswith.push(m):r.contains.push(m);return!l&&s&&(r.wordstartswith=[].concat(_toConsumableArray(r.startswith),_toConsumableArray(r.wordstartswith)),r.startswith=[]),t=[],n.forEach(function(a){var o;(o=t).push.apply(o,_toConsumableArray(r[a]))}),t}},{key:"_removeItems",value:function(t,a,o,n){var l=this;this._staticData&&this._fetch(function(){var s=l._dataSource;if(s.length)if(t){if(t.length){t=l._toArr(t);for(var r=function(a){var o=l._getUniqueValue(s[a]);t.find(function(t){return l._getUniqueValue(t)===o})&&(s[a]=null)},d=0;d<s.length;d++)r(d);l._reassignData(s)}}else if(a){if(a.length){a=l._toArr(a);for(d=0;d<s.length;d++)-1!==a.indexOf(d)&&(s[d]=null);l._reassignData(s)}}else o?o.length&&((o=l._toArr(o)).forEach(function(t){for(var o,a=0;a<s.length;a++)o=s[a],t===l._getProp(o,"groupLabel")&&(s[a]=void 0)}),l._reassignData(s)):n&&(s=[],l._reassignData(s))})}},{key:"_addItems",value:function(t,a,o){var n=this;this._staticData&&this._fetch(function(){var l=n._dataSource;l&&(t=n._toArr(t),o&&t.forEach(function(t){t[n._dataMapping.groupLabel]=o}),null===a||isNaN(a)||0>a||a>=l.length?l.push.apply(l,_toConsumableArray(t)):l.splice.apply(l,[a,0].concat(_toConsumableArray(t))),n._reassignData(l))})}},{key:"_setItemAttribute",value:function(t,a,o,n){var l=this;this._staticData&&this._fetch(function(){var i=l._dataSource;if(i&&i.length){if(n)i.forEach(function(n){var i=l._getProp(n,"groupLabel");t===i&&(n[a]=o)});else{var s=l._getData(t);s&&(s[a]=o)}l._reassignData(i)}})}},{key:"_reassignData",value:function(t){t=t.filter(function(t){return t}),this.clearCachedQuery(),this._setDataSource(t),this._trigger("update",{results:this._cloneObject(t)})}},{key:"removeItems",value:function(t){this._removeItems(t)}},{key:"removeItemsAt",value:function(t){this._removeItems(null,t)}},{key:"removeGroups",value:function(t){this._removeItems(null,null,t)}},{key:"removeAllItems",value:function(){this._removeItems(null,null,null,!0)}},{key:"addItems",value:function(t,a){this._addItems(t,null,a)}},{key:"addItemsAt",value:function(t,a,o){this._addItems(t,a,o)}},{key:"setGroupAttribute",value:function(t,a,o){this._setItemAttribute(t,a,o,!0)}},{key:"setItemAttribute",value:function(t,a,o){this._setItemAttribute(t,a,o)}},{key:"setAttributes",value:function(t){var a,o;Object.keys(t).forEach(function(t){"data"===t||"dataSource"===t?a=!0:("sort"===t||"sortBy"===t||"sortOrder"===t)&&(o=!0)}),n.extend(!0,this._opts,t),a?(this.clearCache(),this._create()):(this._maxResults=this._opts.maxResults,this.clearCachedQuery(),o&&(this._sorted=!1,this._orgData&&this._setDataSource(this._orgData)))}},{key:"name",get:function(){return"zdatasourcehandler"}},{key:"attrs",get:function(){return{id:null,data:[],dataSource:null,allowDuplicateValues:!0,cacheData:!0,searchIncrementsInCache:!1,isResponseFiltered:!0,maxResults:null,inPlaceSorting:!0,matcher:null,dataMapping:{},sort:!0,sortBy:null,sortOrder:"asc",customSorter:null,callbacks:{},filters:null,search:{criteria:"contains"},messages:{pageIndexExceed:"PageIndex exceeds the total pages."}}}}]),l}();t.registerComponent("ZDatasourceHandler",M);var P=function(a){function o(){return _classCallCheck(this,o),_possibleConstructorReturn(this,_getPrototypeOf(o).apply(this,arguments))}return _inherits(o,t.ZListBox),_createClass(o,[{key:"_init",value:function(t,a){var l=this._opts,i=this._data;i.attrs=i.attrs||{},i.attrs.role="dropdown",this._userOptions=n.extend({},a),this._validateOpts(),this._constructTitleBar(),(l.commandBar||this._defaultCBar)&&this._constructBtns(),_get(_getPrototypeOf(o.prototype),"_init",this).apply(this,arguments),this._setScrollEvent()}},{key:"_constructTitleBar",value:function(){var t=this._opts,a=this._data;a.title=t.title,a.close=t.closeButton?this._getCloseProps():null}},{key:"_validateOpts",value:function(){var t=this._opts,a=this._userOptions,o=a.selectOnKeyNavigation,l=a.focusItemOnItemMouseover,i=this._isSingle=!this._opts.multiple;this._forElement=t.forElement&&n(t.forElement),this._data.isCallout="callout"===t.displayType,t.selectOnKeyNavigation=null===o&&null===l?i:o,t.focusItemOnItemMouseover=null===l&&null===o?!i:l,t.focusFirstItemOnOpen&&(t.search.focusFirstResult=!0),this._defaultCBar=null,!t.commandBar&&(t.doneButton||t.resetButton||t.clearButton)&&this._setDefaultCBar(),t.handleFocusNavigation=null===t.handleFocusNavigation?!(!t.commandBar&&!this._defaultCBar):t.handleFocusNavigation}},{key:"_initialRender",value:function(){this._initialized?this._search():this._renderView([])}},{key:"_postRender",value:function(){_get(_getPrototypeOf(o.prototype),"_postRender",this).apply(this,arguments),this._useParent||this.container.attr("id",this._getID(this.element)+"-"+this.name),this._opts.handleFocusNavigation&&t.FocusHandler&&t.FocusHandler.init(this.container),this._setShowHideOpts(),this._appendEle(this._opts.appendTo),this._listBody.removeClass("zh-scroll_y"),this.container[0].style.display="none"}},{key:"_fixMidHt",value:function(){}},{key:"_postEachRender",value:function(t,a){_get(_getPrototypeOf(o.prototype),"_postEachRender",this).apply(this,arguments);var n=a.attrModified,l=!a.rendered,i=this._opts.value;(l||n)&&((l||-1<["title","closeButton"].indexOf(n))&&a.close&&!a.close.mainElement&&this._updateCloseEle(),a.isCallout&&!this._pointer&&(this._pointer=this.container.find(".zdropdownlist__pointer"),this._setShowHideOpts()),a.attrModified=void 0),(l||this._btnAttrChanged)&&this._isBtns&&(this._btnAttrChanged=void 0,this._updateBtns()),this._isSingle&&i&&this._toArr(i).length&&this._savePrevSelection(this._selectedItems[0].id)}},{key:"_getClass",value:function(){var t=_get(_getPrototypeOf(o.prototype),"_getClass",this).apply(this,arguments),a=this._data;return t+=a.title?" zdropdownlist--withtitle":"",t+=a.close&&!a.title?" zdropdownlist--withclose":""}},{key:"_setVisibility",value:function(a){var n=this.inputField&&!this._showSearchField,l=this._status,i="noresults"===l&&!this._opts.search.showNoResultsMessage;if(n&&("minkeywordlength"===l||i))this.close(a);else if(!n&&i)this._hide(this._listBody);else{var s;(this.container.attr("data-loading")!==this._loading+""||this.container.attr("data-noresults")!==this._noResults+"")&&(s=!0),_get(_getPrototypeOf(o.prototype),"_setVisibility",this).apply(this,arguments),s&&this._isShown&&this._freshRequest&&t.Helpers.fixHeight(this.container,this._showHideProps)}}},{key:"_trigger",value:function(t,a){if("change"===t){var n=a&&a.type,l=this._opts,i=this._btnClicked,s=n&&-1<["keydown","mouseup"].indexOf(n),r=this._doneBtn?!!s&&"done"!==i:!i&&this._isSingle&&l.selectOnKeyNavigation&&s;if(this._internalChange||r)return!1}return _get(_getPrototypeOf(o.prototype),"_trigger",this).apply(this,arguments)}},{key:"_triggerUpdate",value:function(t,a){return(this._freshRequest||this._updateHtAndPos)&&this._isShown&&this._direction&&this._updatePos(null,t),this._trigger("update",t,a)}},{key:"_triggerBeforeUpdate",value:function(t,a){return this._trigger("beforeupdate",t,a)}},{key:"_itemClickHandler",value:function(t,a,n){var l;_get(_getPrototypeOf(o.prototype),"_itemClickHandler",this).apply(this,arguments),n.itemMappedData.moreresults?l=!0:this._isSingle&&!this._doneBtn&&"mouseup"===t.type&&(this._getStoredData(a).selectable&&this._saveCommitedItemData(a),l=!0),l&&this._opts.closeOnSelect&&this.close(t)}},{key:"_saveCommitedItemData",value:function(t){var a=this._curSelectedItem,o=t?t.is("."+this.CLASSES.item):a&&a!==this._prevSelectedItem;!o&&this._opts.focusItemOnItemMouseover&&((t=this.getFocussed())&&(o=!0)),o&&(t&&(a="#"+t.attr("id")),this._curSelectedItemData=this._getItemEventData(n(a)),this._curSelectedItem=a,this._isCommitted=!0)}},{key:"_selectItem",value:function(t){var a=_get(_getPrototypeOf(o.prototype),"_selectItem",this).apply(this,arguments);if(!1!==a){var n=this._selectedItems;if(this._isSingle)if(n.length){this._valCleared=!1;var l=n[0];this._curSelectedItem="#"+l.id,this._curSelectedItemData=this._getItemEventData(t.length?t:this._getById(t.id))}else this._valCleared&&(this._curSelectedItem=this._curSelectedItemData=this._prevSelectedItem=this._prevSelectedItemData=null);this._isBtns&&this._isShown&&this._updateBtnsOnItemSelect()}return a}},{key:"_keydownActions",value:function(a){var l=this._btnClicked,i=!!l||_get(_getPrototypeOf(o.prototype),"_keydownActions",this).apply(this,arguments);if(l)this._resetFocus(l,a);else{var g,s=t.keyCode,r=a.keyCode,d=this._opts,c=s.TAB===r&&!this._isBtns,_=this._isSingle,u=this._getStoredData(n(this.getFocussed())).selectable,p=s.ENTER===r&&d.selectOnEnterKey||s.SPACE===r&&!this.inputField,m=s.ESCAPE===r||c;s.ESCAPE===r&&(a.stopPropagation(),a.preventDefault()),(m||_&&d.keyNavigation&&p)&&(_&&!this._doneBtn&&(p||c&&d.selectOnTabPress)&&u?this._saveCommitedItemData():!m&&(g=!0),!g&&this.close(a))}return i}},{key:"_setAriaAttrs",value:function(t){this.container.attr({"aria-hidden":!!t,"aria-expanded":!t}),this._forElement.attr({"aria-expanded":!t})}},{key:"_setShowHideOpts",value:function(){var t=this,a=this._opts,o=this.CLASSES,n=this._animateOpenOrClose&&this._animateOpenOrClose.bind(this);this._showHideProps={cname:this.name,forElement:this._forElement,isCE:this.isCE,originalElement:this.element,bodyCls:o.body,headerCls:o.header+",."+o.search,footerCls:o.footer,widthCls:"zdropdownlist__width",arrowElement:this._pointer,arrowCallback:this._arrowCallback.bind(this),direction:a.position,offset:a.margin,position:a.offset,hideMethodName:"close",hideEventName:"close",onShowWithAnimation:n,onHideWithAnimation:n,beforeFocus:function(){return!1}},["height","width","minWidth","maxWidth","rtl","fitForElement","appendTo","viewport","displayType","positionAlterable","animation","bodyItemVisibleCount"].forEach(function(o){return t._showHideProps[o]=a[o]})}},{key:"_arrowCallback",value:function(t,a){var o={top:"zh-top",bottom:"zh-bottom",left:"zh-left",right:"zh-right"}[a],l=this._pointer;n(l).length&&!l.hasClass(o)&&(l.removeClass(this._prevArrowCls||""),l.addClass(o),this._prevArrowCls=o),(this.inputField||this._data.title||this._data.close)&&this._updateClass("zdropdownlist--pointerwithbg",0>["top","bottom"].indexOf(a))}},{key:"_setScrollEvent",value:function(){var t=this,a=this._opts;if(a.closeOnScroll||a.moveOnScroll){this._scrollEle=a.scrollElement||this._getScrollParent(a.forElement),this._scrollEle=n(this._scrollEle),this._bindScrollEvent(this._scrollEle,void 0,function(o){t._isShown&&(a.closeOnScroll?t.close(o):a.moveOnScroll&&t._updatePos())})}}},{key:"_focusInHandler",value:function(t){_get(_getPrototypeOf(o.prototype),"_focusInHandler",this).apply(this,arguments);var i,a=this.inputField,l=t&&t.originalEvent;if(this._isBtns&&l&&!this._isItemsNavigation){var s=n(t.target);i=!this._btnClicked&&!s.hasClass("has-mfocus")&&s.is(".clear-zdropdownlist,.done-zdropdownlist,.reset-zdropdownlist")}!i&&a&&this._opts.searchFieldOptions.handleEvents&&document.activeElement!==a[0]&&a[0].focus()}},{key:"_storeForElement",value:function(t){this._opts.forElement=t,this._forElement=n(t),this._setShowHideOpts()}},{key:"_savePrevSelection",value:function(t){t&&(t="#"+t),this._prevSelectedItem=this._curSelectedItem||t,this._prevSelectedItemData=this._curSelectedItemData&&this._curSelectedItemData.itemData||t&&this._selectedItems[0].originalData}},{key:"_updateSelectedItem",value:function(a){var o=this._curSelectedItem,l=this._prevSelectedItemData,i=a&&a.originalEvent,s=this._opts,r=this._getPrevValId();this._isCommitted||this._opts.autoCommit?(this._savePrevSelection(),(s.selectOnKeyNavigation||s.focusItemOnItemMouseover&&i&&"keydown"===i.type&&i.keyCode===t.keyCode.TAB)&&this._dispatchEvent("change",a,_objectSpread({},this._curSelectedItemData,{previousValue:l?[l]:void 0,value:[this._prevSelectedItemData]}))):o&&o!==r&&(this._select(!1,n(o),null,a),this._unFocusItem(),l&&this._select(!0,null,l,a)),this._isCommitted=this._curSelectedItem=this._curSelectedItemData=void 0}},{key:"_getPrevValId",value:function(){var t=this._prevSelectedItemData;return t?"#"+this._getItemId(t):void 0}},{key:"_setScrollPos",value:function(t){var d,c,a=this._opts,o=this._isSingle,l=a.focusFirstItemOnOpen,i=this._prevSelectedItemData,s=a.focusSelectedItemOnOpen,r=n(this._getPrevValId());s&&(o?c=r.length&&r.is(":visible")?r:void 0:(!(c=n(this._listBody.find("."+this.CLASSES.item+".is-selected")[0])).length||!c.is(":visible"))&&(c=void 0)),s&&c?o?this._select(!0,null,i,t,!0):d=c:l&&(d=this.getFirstValidItem()),d&&(d=n(d),this._select(!0,d,null,t,!0)),d&&!l||i||(this._lastScrollTop=0,this._setScrollTop())}},{key:"_focusLastFocussed",value:function(){if(!this._fromOpenMethod||this.params.query)return _get(_getPrototypeOf(o.prototype),"_focusLastFocussed",this).apply(this,arguments)}},{key:"_select",value:function(t,a,o,l,i){this._internalChange=!0,o&&(t=!0,a=n(this._getPrevValId())),i||this._navInstance[t?"selectItem":"deSelectItem"](a,l),t&&this._focusEle(a,l,!0),this._internalChange=!1}},{key:"_destroy",value:function(){var a=this._opts,n=this.container;Object.keys(a.animation).length&&t.clearAnimationData(n),a.handleFocusNavigation&&t.FocusHandler&&t.FocusHandler.destroy(n),this.element.removeData("zshowhide actualDirection arrowDirection arrowPosition availableHeight availableWidth componentName direction elementPosition pos prevDirection"),this.isCE&&this.element.removeClass(this._data.className).empty(),_get(_getPrototypeOf(o.prototype),"_destroy",this).apply(this,arguments)}},{key:"_search",value:function(t,a){this._focussed=!0,this._updateHtAndPos=!0;var n=a.event,l=this.inputField&&!this._showSearchField;if(_get(_getPrototypeOf(o.prototype),"_search",this).apply(this,arguments),!this._isShown&&(a.shouldOpen||l&&n&&n.target===this.inputField[0])){l&&(a.shouldOpen=!1);var i=this._status;(a.shouldOpen||("noresults"===i?this._opts.search.showNoResultsMessage:"minkeywordlength"!==i))&&this.open({fromSearch:!0},n)}this._updateHtAndPos=!1}},{key:"_callOpen",value:function(a){return t.Helpers.open(this.container,a||this._showHideProps)}},{key:"_setValues",value:function(t,a){var n=a&&!1===a.commit;n&&(this._internalChange=!0),_get(_getPrototypeOf(o.prototype),"_setValues",this).apply(this,arguments),this._isSingle&&this._selectedItems.length&&this._savePrevSelection(this._selectedItems[0].id),n&&(this._internalChange=!1)}},{key:"_reSearch",value:function(){this.params.previousQuery=this.params.query=void 0,this._isShown?_get(_getPrototypeOf(o.prototype),"_reSearch",this).call(this):this._shouldReSearch=!0}},{key:"_focusItemUsingNavInstance",value:function(t,a){var o=!(2<arguments.length&&void 0!==arguments[2])||arguments[2];this._navInstance.focusItem(t,a,o)}},{key:"_openHandler",value:function(t){var a=this._dispatchEvent.bind(this);this._isShown=!0,this._setAriaAttrs(),a("beforefocus",t)&&this.setFocus(),a("open",t)}},{key:"_closeHandler",value:function(a){Object.keys(this._opts.animation).length&&this._display(!0,this.container),t.Helpers.removeScrollClass(this.element),this._setAriaAttrs(!0),this._dispatchEvent("close",a),this._isSingle&&this._curSelectedItem?this._updateSelectedItem(a):this._unFocusItem()}},{key:"_focusCallback",value:function(){this._focussed=!0,_get(_getPrototypeOf(o.prototype),"_focusCallback",this).apply(this,arguments)}},{key:"open",value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},o=1<arguments.length?arguments[1]:void 0;if(!this._isShown){var r,n=this._opts,l=!0,i=n.searchField,s=void 0===a.minKeywordLength?n.search.minKeywordLength:a.minKeywordLength;if(void 0===a.searchQuery?i?r=this.inputField.val():this._shouldReSearch&&(r=this.params.query||""):r=a.searchQuery,s&&void 0!==r&&!this._shouldReSearch&&(l=this._opts.search.showNoResultsMessage||r.length>=s),l&&this._dispatchEvent("beforeopen",o)){this._fromOpenMethod=!0,a.forElement&&this._storeForElement(a.forElement),this._initialized||(this._initialized=!0,r=r||""),a.event=o,a.fromSearch||void 0===r||this.search(r,a),n.offset?this._callOpen():this._updatePos(!0,o),this._opts.handleFocusNavigation&&t.FocusHandler&&t.FocusHandler.refresh(this.container),a.fromSearch&&n.search.focusFirstResult||this._setScrollPos(o),this._isBtns&&this._handleBtnsOnOpen();var d=n.animation;(d=Object.keys(d).length?d.open:null)||this._openHandler(o),this._fromOpenMethod=this._shouldReSearch=!1,this._updatePopupList(!0)}}}},{key:"close",value:function(a){var o=this._dispatchEvent.bind(this),n=this.container,l=this.inputField;if(this._isShown&&o("beforeclose",a)){t.Helpers.close(n,_objectSpread({},this._showHideProps,{event:a})),this._maxHt=this._direction=void 0,this._isShown=!1,!this._opts.searchField&&l&&l.val().length&&this.search("",{event:a}),this._doneBtn&&this._valueChanged&&!this._doneClicked&&(this._internalChange=!0,this._resetClickHandler(a,!0)),this._valueChanged=void 0;var i=this._opts.animation;(i=Object.keys(i).length?i.close:null)||this._closeHandler(a),this._updatePopupList()}}},{key:"setFocus",value:function(t){this._trigger("beforefocus",t)&&(this.container.focus(),this._focusInHandler(t))}},{key:"getValue",value:function(){return this._opts.value}},{key:"deselect",value:function(){this._valCleared=this._isSingle,_get(_getPrototypeOf(o.prototype),"deselect",this).apply(this,arguments)}},{key:"deselectAll",value:function(){this._valCleared=this._isSingle,_get(_getPrototypeOf(o.prototype),"deselectAll",this).apply(this,arguments)}},{key:"search",value:function(t){var a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=2<arguments.length?arguments[2]:void 0;n&&(a.shouldOpen=n?!this._forElement||this._forElement.is(":visible"):void 0),_get(_getPrototypeOf(o.prototype),"search",this).call(this,t,a)}},{key:"_updateSearchFldPos",value:function(t){var a;!this.inputField||this._opts.searchField||this._data.title||this._isBtns||(a=-1<t.indexOf("top")),this.container[a?"addClass":"removeClass"]("zdropdownlist--searchbottom")}},{key:"_updatePos",value:function(t,a){var o=this,n=this._opts,l=n.position,i=n.positionAlterable,s=_objectSpread({},this._showHideProps,{event:a,mustBeShown:!t,positionAlterable:i,direction:l});i&&("auto"===l&&(s.direction=l="bottom-left",s.positionAlterable=s.positionAlterable||!0),s.callbacks={beforeComputingDir:{dimensionModifier:function(t,a,n,l){o._maxHt?a.height>=o._maxHt?o._maxHt=a.height:(l.positionAlterable=!1,l.direction=o._direction):o._maxHt=a.height}}});var r=this._callOpen(s).actualDirection;t&&(this._direction=r,this._updateSearchFldPos(r))}},{key:"updatePosition",value:function(){this._updatePos()}},{key:"_setPosition",value:function(){this._updatePos(!0)}},{key:"_fieldKeydownHandler",value:function(a){var n=a.keyCode;if(this._lastKeyCode=n,this._shiftPressed=a.shiftKey,this._isShown||this._showSearchField)return _get(_getPrototypeOf(o.prototype),"_fieldKeydownHandler",this).apply(this,arguments);var l=t.keyCode;if(n===l.UP||n===l.DOWN){a.preventDefault();var s,r,i="search";this._opts.searchFieldOptions.listAllItemsOnDOWNPress?(i="open",s="",r=0):s=this.inputField.val();var d={event:a,minKeywordLength:r,updateField:!1};"open"===i?(d.searchQuery=s,this.open(d)):this.search(s,d,!0)}}},{key:"_inputKeyupHandler",value:function(a){var n=t.keyCode,l=a.keyCode;!this._opts.searchFieldOptions.suggestOnFieldFocus||l!==n.TAB||l===this._lastKeyCode&&this._shiftPressed===a.shiftKey?_get(_getPrototypeOf(o.prototype),"_inputKeyupHandler",this).apply(this,arguments):this.searchWithDelay(void 0,{event:a,delay:1}),this._lastKeyCode=void 0,this._shiftPressed=!1}},{key:"_addSelectDataToItem",value:function(a){var n=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];if(_get(_getPrototypeOf(o.prototype),"_addSelectDataToItem",this).call(this,a,n),this._opts.hideItemOnSelect){var l=this._CLASSES,i=this._listBody;if(n){if(this._isShown&&this._opts.focusAdjacentItemOnSelect&&this._navInstance.focusAdjacentItem(a,{}),a.addClass(l.itemhide),i){var s=i[0];s.clientHeight===s.scrollHeight&&(t.ShowHideHandler.fixHeight(this.container,{}),this._scrollHandlerToLoadPage(),s.clientHeight===s.scrollHeight&&i.height("auto")),i.find("li:not(.".concat(l.itemhide,", .").concat(l.loader,")")).length||this._showNoResults()}}else a.removeClass(l.itemhide)}}},{key:"_getOptsForSelectableUtil",value:function(){!(1<arguments.length&&void 0!==arguments[1])||arguments[1];var a=_get(_getPrototypeOf(o.prototype),"_getOptsForSelectableUtil",this).apply(this,arguments);return this._opts.hideItemOnSelect&&(a.items+=":not(.".concat(this.CLASSES.itemhide,")")),a}},{key:"_setAttribute",value:function(t,a){var i,n=this._opts,l=this._data;this._userOptions[t]=a,n[t]=a,"forElement"===t?this._storeForElement(a):-1<["title","closeButton","closeIconClassName","closeSVGIconId"].indexOf(t)?-1<["title","closeButton"].indexOf(t)?(this._constructTitleBar(),l.attrModified=t,i=!0):n.closeButton&&(t="closeSVGIconId"===t?"SVGIconId":"iconClassName",this._setBtnValue(_defineProperty({},t,a),l.close)):-1<["clearButton","doneButton","resetButton","commandBar","resetButtonLabel","clearButtonLabel","doneButtonLabel"].indexOf(t)?(this._handleBtnAttrs(t,a),i=0>t.indexOf("Label")):"displayType"===t?(l.attrModified="displayType",this._validateOpts(),"box"===a&&(this._pointer=void 0),i=!0):(-1<["selectOnKeyNavigation","focusItemOnItemMouseover","multiple"].indexOf(t)&&("multiple"==t&&a&&(this._prevSelectedItem=this._prevSelectedItemData=this._curSelectedItem=this._curSelectedItemData=null),this._validateOpts()),_get(_getPrototypeOf(o.prototype),"_setAttribute",this).apply(this,arguments),i=this._domChanged,"value"==t&&this._isSingle&&(a?l.attrModified="value":this._valCleared=!0)),-1<["position","positionAlterable","offset","animation","margin","height","width","minWidth","viewport","appendTo","rtl"].indexOf(t)&&this._setShowHideOpts(),this._reInit&&(this._shouldReSearch=!0),this._domChanged=i}},{key:"_bindInputFieldEvents",value:function(){_get(_getPrototypeOf(o.prototype),"_bindInputFieldEvents",this).apply(this,arguments),this._opts.searchFieldOptions.handleEvents&&this._addEvents({inputMousedown:"mousedown"},this.inputField)}},{key:"_checkCurPos",value:function(){var t=this.inputField[0],a=this._opts.searchFieldOptions;return(a.filterBasedOnCurPos||a.suggestOnFieldFocus)&&t.selectionStart===t.selectionEnd}},{key:"_inputMousedownHandler",value:function(t){var a=this._opts.searchFieldOptions;this._filteredOnMouseDown=!1,this._checkCurPos()&&(this._filteredOnMouseDown=!0,a.filterBasedOnCurPos?this._searchBasedOnCurPos(t):this._search(void 0,{event:t}))}},{key:"_inputMouseupHandler",value:function(t){var a=this.inputField[0];this._filteredOnMouseDown||a.selectionStart!==a.selectionEnd||_get(_getPrototypeOf(o.prototype),"_inputMouseupHandler",this).call(this,t)}},{key:"_animateOpenOrClose",value:function(a,o){var n=this._opts.animation;if(!o.mustBeShown){var l=this._isShown;(l?n.close:n.open).name||l||this._display(!1,this.container),t.animationHandler({action:l?"close":"open",animation:n,element:this.container,ctype:this.name,callback:l?this._closeHandler.bind(this):this._openHandler.bind(this)})}}},{key:"_constructBtns",value:function(){var t=this,a=this._data.cBar={},o=this._opts.commandBar||this._defaultCBar;this._isBtns=!!o,this._btnsArr=[],this._emptyBtnData();var n=function(n){var l=o[n],i=n.replace("Column","");a[i]=[],a[i+"Class"]=t.CLASSES[n],l.forEach(function(o,n){t._btnsArr.push(o);var l="_"+o+"Btn";t[l]=!0,t[l+"Data"]=a[i][n]=t._getBtnAttr(o)})};for(var l in o)n(l);this._data.cBar=this._btnsArr.length?a:null}},{key:"_emptyBtnData",value:function(){var t=this;["done","reset","clear"].forEach(function(a){var o="_"+a+"Btn";t[o]=t[o+"Data"]=void 0})}},{key:"_setDefaultCBar",value:function(){var t=null,a=this._opts,o={done:"rightColumn",reset:"rightColumn",clear:"leftColumn"};["clear","reset","done"].forEach(function(n){if(a[n+"Button"]){t||(t={});var l=o[n];t[l]=t[l]||[],t[l].push(n)}}),this._defaultCBar=t}},{key:"_getBtnAttr",value:function(a){var o=a+"ButtonLabel";return o=this._opts[a+"ButtonLabel"]||this._getI18NText(o),t.ZButton.getBtnProps({customAttributes:{name:a,"aria-label":o},name:a,tabindex:0,className:a+"-"+this.name+("reset"===a?" zdropdownlist__textbutton":""),text:o,appearance:"done"===a?"primary":"normal",size:"small",isCE:this.isCE,templateRender:!0})}},{key:"_updateBtns",value:function(){var t=this;(this._btnsArr||[]).forEach(function(a){var o=t["_"+a+"BtnData"];if(o){var l,n=o.mainElement=t.container.find("."+a+"-"+t.name);t._addEvents((_defineProperty(l={},a+"Click","mousedown keydown"),_defineProperty(l,"btnFocusIn","focusin"),l),n),t._handleFocus(n)}})}},{key:"_btnFocusInHandler",value:function(t){n(t.target).hasClass("has-mfocus")&&this._focusInHandler(t)}},{key:"_doneClickHandler",value:function(t){("mousedown"===t.type||this._isKeyDown(t))&&(this._doneClicked=!0,this._btnClicked="done",this._isSingle&&this._savePrevSelection(),this._valueChanged&&this._trigger("change",t),this.close(t),this._doneClicked=!1,this._trigger("done",t),this._btnClicked=void 0)}},{key:"_resetClickHandler",value:function(t,a){var l=this._resetBtnData&&this._resetBtnData.mainElement;l=n(l),(a||t&&l.length&&!n(t.target).closest(l).hasClass("is-disabled")&&("mousedown"===t.type||this._isKeyDown(t)))&&(this._valueChanged&&(this._setInternalChange(),this._setValues(this._prevSelectedItems,{event:t,clearOtherValues:!0}),!this._doneBtn&&_get(_getPrototypeOf(o.prototype),"_trigger",this).call(this,"change",t)),t&&this._trigger("reset",t),l.length&&(this._updateBtnState(!0,"reset"),this._btnClicked="reset"),this._internalChange=!1,t&&"mousedown"===t.type&&(this._btnClicked=void 0))}},{key:"_clearClickHandler",value:function(t){("mousedown"===t.type||this._isKeyDown(t))&&(this._btnClicked="clear",this._setInternalChange(),this._valueChanged=!0,this.deselectAll(t),this._updateBtnState(!0,"clear"),this._trigger("clear",t),this._internalChange=!1,"mousedown"===t.type&&(this._btnClicked=void 0))}},{key:"_setInternalChange",value:function(){this._doneBtn&&(this._internalChange=!0)}},{key:"_isKeyDown",value:function(a){var o=t.keyCode;if("keydown"===a.type)return-1<[o.UP,o.DOWN].indexOf(a.keyCode)&&(this._isItemsNavigation=!0,this.setFocus(a),this._isItemsNavigation=void 0),-1<[o.ENTER,o.SPACE].indexOf(a.keyCode)}},{key:"_disableOrEnableBtns",value:function(t){this._doneBtn&&this._updateBtnState(t,"done"),this._resetBtn&&this._updateBtnState(t,"reset")}},{key:"_updateBtnState",value:function(t,a){var o=this[(a="_"+a+"Btn")+"Data"],n=o.className;n=t?0<n.indexOf(" is-disabled")?n:n+" is-disabled":n.replace(" is-disabled",""),this._disable(t,o.mainElement),o.className=n}},{key:"_handleBtnsOnOpen",value:function(){var t=this._selectedItems;this._clearBtn&&this._updateBtnState(!t.length,"clear");var a=this._selectedItems.slice();this._prevSelectedItems=a.map(function(t){return t.originalData}),this._disableOrEnableBtns(!0)}},{key:"_updateBtnsOnItemSelect",value:function(){this._disableOrEnableBtns(),this._valueChanged=!0,this._clearBtn&&this._updateBtnState(!this._selectedItems.length,"clear")}},{key:"_handleBtnAttrs",value:function(t,a){-1<t.indexOf("Label")?this._setBtnValue({text:a},this["_"+t.replace("ButtonLabel","")+"BtnData"]):(this._btnAttrChanged=!0,this._validateOpts(),this._constructBtns())}},{key:"_resetFocus",value:function(t,a){this["_"+t+"BtnData"].mainElement.removeClass("has-focus has-mfocus has-kfocus"),this.setFocus(a),this._btnClicked=void 0}},{key:"_getCloseProps",value:function(){var a=this._opts;return this._data.close||t._getIconInfo(a.closeIconClassName,a.closeSVGIconId,"#zc__svg--close","zdropdownlist__closeicon")}},{key:"_updateCloseEle",value:function(){var t=this._data.close.mainElement=this.container.find(".zdropdownlist__closeiconcontainer")[0];(t=n(t)).attr({tabindex:0,role:"button",title:this._getI18NText("closeButtonLabel")}),this._addEvents({closeClick:"click"},t)}},{key:"_closeClickHandler",value:function(t){this.close(t)}},{key:"name",get:function(){return"zdropdownlist"}},{key:"attrs",get:function(){return{closeOnSelect:!0,position:"auto",selectOnTabPress:!1,forElement:null,viewport:null,displayType:"box",focusFirstItemOnOpen:!1,focusSelectedItemOnOpen:!0,focusAdjacentItemOnSelect:!0,title:"",closeButton:!1,closeIconClassName:"",closeSVGIconId:"",positionAlterable:!1,doneButton:!1,clearButton:!1,resetButton:!1,doneButtonLabel:null,clearButtonLabel:null,resetButtonLabel:null,handleFocusNavigation:null,selectOnKeyNavigation:null,focusItemOnItemMouseover:null,minWidth:null,scrollElement:null,focusSelectedItem:!1,fitForElement:!1,closeOnScroll:!1,moveOnScroll:!1,hideItemOnSelect:!1,bodyItemVisibleCount:void 0}}},{key:"propType",get:function(){return{selectOnKeyNavigation:"boolean",focusItemOnItemMouseover:"boolean"}}},{key:"props",get:function(){return{appendTo:null,offset:null,animation:{},margin:{},commandBar:null,messages:{doneButtonLabel:"Done",resetButtonLabel:"Reset",clearButtonLabel:"Clear",closeButtonLabel:"Close"},showAllOptionsSelectedMessage:!1,search:{showNoResultsMessage:!0,criteria:"startswith"},searchFieldOptions:{updateOnSelect:!1,autoComplete:!1,listAllItemsOnDOWNPress:!1,suggestOnFieldFocus:!1,filterBasedOnCurPos:!1}}}},{key:"EVENTS",get:function(){return["beforeopen","open","beforefocus","beforeclose","close","update","beforeupdate","done","reset","clear"]}},{key:"CLASSES",get:function(){return{container:"zdropdownlist",icon:"zdropdownlist--withicon",listwithloader:"zdropdownlist--loading",withicon:"zdropdownlist--withicon",withhint:"zdropdownlist--withdesc",withcheckbox:"zdropdownlist--withcheckbox",withcheckedicon:"zdropdownlist--withcheckedindication",withoutcheckeditem:"zdropdownlist--withoutcheckeditem",listwithcustom:"zdropdownlist--withcustomitem",withsearchfield:"zdropdownlist--withsearchfield",icononly:"zdropdownlist--icononly",icontext:"zdropdownlist--iconwithtext",listwithcheckboxRight:"zdropdownlist--checkboxright",listwithcheckediconRight:"zdropdownlist--checkedindicationright",listwithactionbtnsvisible:" zdropdownlist--actionbuttonvisible",listwithimage:"zdropdownlist--withimage",reorderable:"zdropdownlist--reorderable",text:"zdropdownlist__text",title:"zdropdownlist__title",hint:"zdropdownlist__description",body:"zdropdownlist__body",header:"zdropdownlist__header",footer:"zdropdownlist__footer",item:"zdropdownlist__item",itemgroup:"zdropdownlist__itemgroup",itemgrouplabel:"zdropdownlist__grouplabel",loader:"zdropdownlist__loader",fullloader:"zdropdownlist__fullloader",loadericon:"zdropdownlist__loadericon",actionbuttonsWrapper:"zdropdownlist__actions",actionbutton:"zdropdownlist__action",separator:"zdropdownlist__separator",checkediconWrapper:"zdropdownlist__checkedindication",checkedicon:"zdropdownlist__checkedicon",checkboxWrapper:"zdropdownlist__checkbox",checkbox:"zdropdownlist__inputcheckbox",checkboxlabel:"zdropdownlist__checkboxlabel",avatar:"zdropdownlist__avatar",icondiv:"zdropdownlist__image",itemicon:"zdropdownlist__icon",content:"zdropdownlist__content",textIconWrapper:"zdropdownlist__imagetext",moreresults:"zdropdownlist__moreresults",noresults:"zdropdownlist__noresults",noresultstext:"zdropdownlist__noresultstext",search:"zdropdownlist__search",searchcontainer:"zdropdownlist__searchiconcontainer",searchicon:"zdropdownlist__searchicon",searchfield:"zdropdownlist__searchfield",clearbuttonicon:"zdropdownlist__clearicon",clearbutton:"zdropdownlist__clearbutton",listwithicononly:"zdropdownlist--icononly",itemhide:"zdropdownlist__itemhide",hoverable:"is-hoverable",disabled:"is-disabled",hover:"on-hover",focussed:"has-focus",selected:"is-selected",rtl:"zh-rtl",leftColumn:"zdropdownlist__commandbaractionsleft",rightColumn:"zdropdownlist__commandbaractionsright",centerColumn:"zdropdownlist__commandbaractionscenter"}}},{key:"SELECTORS",get:function(){return{OPTION:this.isCE?"z-dropdownlistitem":"option",OPTGROUP:this.isCE?"z-dropdownlistgroup":"optgroup",OPTIONSBODY:"z-dropdownlistbody",OPTIONSHEADER:"z-dropdownlistheader",OPTIONSFOOTER:"z-dropdownlistfooter",OPTIONSEPARATOR:"z-dropdownlistseparator"}}}]),o}();t.registerComponent("ZDropdownList",t.ZListBox,P),function(t){var a=t.zlistbox.Templates,o=t.zdropdownlist.Templates,n=t.Templates.Utilities;o.children=function(t){return ZT.html(zc0tO175(),t.isCallout&&ZT.html(zc0tO176()),(t.title||t.close)&&o.title(t),a.children(t),t.cBar&&ZT.html(zc0tO177(),n.commandBarCol(t.cBar)))},o.close=function(a){return ZT.html(zc0tO178(),t.Templates.Utilities.icon(a))},o.title=function(t){return ZT.html(zc0tO179(),t.title?ZT.html(zc0tO180(),ZT.customHTML(t.title)):"",t.close&&o.close(t.close))}}(ZPeopleComponents);var A=function(a){function o(){return _classCallCheck(this,o),_possibleConstructorReturn(this,_getPrototypeOf(o).apply(this,arguments))}return _inherits(o,t.CoreComponent),_createClass(o,[{key:"_init",value:function(t,a){this._id=this._getID(t),this._menuId=a.menuId||a.dropdownListId||(a.randomDropdownListId?this._getID():this._id)+"-menu",(this.element[0].contenteditable||this.element.is("input, textarea"))&&(this._isRootElementEditable=!0),this.isCE||["disabled","placeholder"].forEach(function(o){a[o]=a[o]||t[0][o]})}},{key:"_render",value:function(){if(!this._skipRender){var t=this.element,a=this._opts,n=this._data;n.disabled=a.disabled,this._beforeRender(a,n)?_get(_getPrototypeOf(o.prototype),"_render",this).apply(this,arguments):(!n._rendered&&this._postRender(t),this._postEachRender(t),n._rendered=!0)}}},{key:"_beforeRender",value:function(t,a){return a.inputClass="zsuggestfield-element "+(t.className||t.zclassName||"")+(t.readonly?" is-readonly":""),!this._isRootElementEditable}},{key:"_initSource",value:function(){if(this._opts.removeExistingDropdown){var a=n("#"+this._menuId);a.length&&t.isComponent(a)&&t.dropdownlist(a).destroy(!0)}var o=this._getListSettings(),l=t.createDropdownList(o);this._menu=l,this._listInstance=l.data("zdropdownlist"),this._listInstance.componentInstance=this}},{key:"_postRender",value:function(t){this._input=this._isRootElementEditable?t:t.find("input"),this._initSource()}},{key:"_postEachRender",value:function(){var a=this._data,o=this._opts;if(this._domChanged||!a.rendered){var i,s,n={disabled:o.disabled||null,role:"search","aria-owns":this._menuId,"aria-haspopup":!0,placeholder:o.placeholder,autocomplete:"off",name:t.getName(this.element,o),required:o.required||null,"aria-required":o.required||null,readonly:o.readonly||null,"aria-readonly":o.readonly||null},l=n.disabled?" is-disabled":"";this._isRootElementEditable?(i=this.element,s=a.inputClass+l):(i=this.element.find("input"),a.className=l),i.attr(n),a.className=s}}},{key:"_bindEvents",value:function(){this._addEvents({blur:"blur"},this._input)}},{key:"_blurHandler",value:function(t){var a=this;clearTimeout(this._blurTimer);var o=this._opts.value;o!==this._oldVal&&(this._blurTimer=setTimeout(function(){a._input[0]!==document.activeElement&&(a._oldVal=o,a._triggerChange(t))}))}},{key:"_getListSettings",value:function(){var t=this._opts,a=t.dropdownList,o=t.search,l=t.autoComplete,i=!l&&o.focusFirstResult,s={id:this._menuId,rtl:t.rtl,search:_objectSpread({},o,{},{focusFirstResult:i}),focusFirstItemOnOpen:i,focusItemOnItemMouseover:!0,isTextHTMLEncoded:t.isTextHTMLEncoded,selectOnEnterKey:!0,moreResultsAction:o.moreResultsAction,messages:t.messages,searchFieldOptions:{autoComplete:l,updateOnSelect:!0,handleEvents:!0,filterBasedOnCurPos:t.filterBasedOnCurPos,suggestOnFieldFocus:t.suggestOnFieldFocus,preventUPDOWNKeysDefault:!0}};return s.searchField=s.forElement=this._input,s=this._getListCallbacks(s),["dataStructure","dataSource","dataMapping","cacheData","isResponseFiltered","lazyLoading","viewPerPage","filterByCSSSelector","sort","sortBy","sortOrder","customSorter","serverSearch","customSearch","headerItems","footerItems","criteriaPrecedence"].forEach(function(a){return s[a]=t[a]}),s.items=t.data,n.extend(s,a),s.position=this._getMenuPos(a.position),s}},{key:"_getListCallbacks",value:function(t){var a=this;return["Select","ItemFocus","BeforeOpen","Open","BeforeClose","Close","BeforeSearch","SearchSuccess","SearchError","MoreActionClick","Input","BeforeUpdate","Update","ImageError","NoResults","BeforeFocus"].forEach(function(o){t[o.toLowerCase()]=a["_on"+o].bind(a)}),t}},{key:"_onBeforeFocus",value:function(){return this._trigger.apply(this,["dropdownlistbeforefocus"].concat(Array.prototype.slice.call(arguments)))}},{key:"_onItemFocus",value:function(t,a){var o=t.originalEvent;if(!o||"mouseenter"!==o.type){var n=this._getEventData(a.itemData);n.listItem=a.listItem,this._trigger("listitemfocus",o,n)}}},{key:"_onSelect",value:function(t){this._oldVal=this._opts.value=this._input.val(),this._input.focus(),this._setValue(t);var a=this._getEventData(t.detail.itemData);a.listItem=t.detail.listItem,this._trigger("listitemselect",t,a),this._triggerChange(t,a)}},{key:"_triggerChange",value:function(t,a){this._trigger("change",t,a||this._getEventData())}},{key:"_onInput",value:function(){this._actualData=void 0,this._opts.value=this._input.val()}},{key:"_getMappedData",value:function(t){var a=this;if("object"===_typeof(t)){var o={};return this._getDataKeys().forEach(function(n){return o[n]=a._mapJSONToData(t,a._opts.dataMapping[n],"text"===n?!a._opts.isTextHTMLEncoded:void 0)}),o}return t}},{key:"_getDataKeys",value:function(){return["image","text","value","groupLabel","iconClassName","informativeText","customValues"]}},{key:"_onBeforeOpen",value:function(t){return this._listInstance.deselectAll(),this._trigger("dropdownlistbeforeopen",t)}},{key:"_onOpen",value:function(t){return this._DDLOpened=!0,this._trigger("dropdownlistopen",t)}},{key:"_onBeforeUpdate",value:function(){return this._trigger.apply(this,["beforedropdownlistupdate"].concat(Array.prototype.slice.call(arguments)))}},{key:"_onImageError",value:function(){return this._trigger.apply(this,["listitemimageerror"].concat(Array.prototype.slice.call(arguments)))}},{key:"_onUpdate",value:function(){return this._trigger.apply(this,["dropdownlistupdate"].concat(Array.prototype.slice.call(arguments)))}},{key:"_onNoResults",value:function(){return this._trigger.apply(this,["noresults"].concat(Array.prototype.slice.call(arguments)))}},{key:"_onClose",value:function(t){return this._DDLOpened=!1,this._trigger("dropdownlistclose",t)}},{key:"_onBeforeClose",value:function(t){return this._trigger("dropdownlistbeforeclose",t)}},{key:"_onBeforeSearch",value:function(t){return this._trigger("beforesearch",t,{params:t.detail.params})}},{key:"_onSearchSuccess",value:function(){return this._trigger.apply(this,["searchsuccess"].concat(Array.prototype.slice.call(arguments)))}},{key:"_onSearchError",value:function(){return this._trigger.apply(this,["searcherror"].concat(Array.prototype.slice.call(arguments)))}},{key:"_onMoreActionClick",value:function(t,a){var o=this._getEventData(a.itemData);return o.listItem=a.listItem,this._trigger("moreactionclick",t,o)}},{key:"_getEventData",value:function(t){return{data:t=t||this._actualData,mappedData:this._getMappedData(t)}}},{key:"_trigger",value:function(t,a,n){return n=this._getTriggerData(n),_get(_getPrototypeOf(o.prototype),"_dispatchEvent",this).call(this,t,a,n)}},{key:"_getTriggerData",value:function(t){return(t=t||{}).value=this._opts.value,t.dropdownList=this._menu&&this._menu[0],t}},{key:"_getMenuPos",value:function(t){return{top:"top-left",bottom:"bottom-left"}[t]||t}},{key:"openDropdownList",value:function(){this._listInstance.open()}},{key:"closeDropdownList",value:function(t){this._listInstance.close(t)}},{key:"getValue",value:function(){return this._actualData}},{key:"_setValue",value:function(t){var a=t.detail;return a&&((a=((a||{}).value||[])[0])&&(this._actualData=a)),this._actualData}},{key:"search",value:function(t){this.element.val(t),this._listInstance.search(t,{},!0)}},{key:"searchList",value:function(t,a){this._opts.disabled||(this._input.val(t),this._listInstance.search(t,a,!0))}},{key:"clearCache",value:function(){this._listInstance.clearCache()}},{key:"_destroy",value:function(){this._input.val("").off("."+this.name).removeClass("zsuggestfield-element"),clearTimeout(this._blurTimer),this._listInstance.destroy(),this._menu.remove()}},{key:"getDropdownList",value:function(){return this._listInstance.getElement()[0]}},{key:"fetchData",value:function(){var t;return(t=this._listInstance).fetchData.apply(t,arguments)}},{key:"_setAttribute",value:function(t,a){var o=this._opts;-1<["placeholder","className","zclassName"].indexOf(t)?(o[t]=a,this._stopAttrUpdate=this._domChanged=!0):"messages"===t?this._listInstance.setAttribute(t,a):-1<["autoComplete","cacheData","dataMapping","data","dataSource","dropdownList","isImageSourceSprited","isResponseFiltered","lazyLoading","viewPerPage","messages","rtl","search","customSearch","suggestOnFieldFocus","filterBasedOnCurPos","filterByCSSSelector","headerItems","footerItems","sort","sortBy","sortOrder","customSorter","serverSearch","criteriaPrecedence"].indexOf(t)?(o[t]=a,this._reInit=!0):"value"===t&&this._input.val(a)}},{key:"_buildData",value:function(){this._listInstance.setAttributes(n.extend(!0,{},this._listInstance._DEFAULTS,this._getListSettings()))}},{key:"_disable",value:function(){var t=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];this._stopAttrUpdate=this._domChanged=!0,t&&this.closeDropdownList()}},{key:"name",get:function(){return"zsuggestfield"}},{key:"attrs",get:function(){return{value:"",autoComplete:!1,isTextHTMLEncoded:!1,suggestOnFieldFocus:!1,lazyLoading:!0,viewPerPage:null,sort:!0,sortBy:null,sortOrder:null,serverSearch:null,filterByCSSSelector:!1,filterBasedOnCurPos:!1,removeExistingDropdown:!1,disabled:!1,placeholder:null,zclassName:null,dataStructure:"flat",cacheData:!0}}},{key:"props",get:function(){return{customSorter:null,customSearch:null,data:[],dataSource:null,dataMapping:{},search:{minKeywordLength:0,maxKeywordLength:50,caseSensitive:!1,criteria:"contains",delay:100,by:null,highlightKeyword:!1,searchIncrementsInCache:!1,showNoResultsMessage:!1,moreResultsAction:!1,focusFirstResult:!0},randomDropdownListId:!1,dropdownList:{contentType:"text",loaderIconClassName:null,loaderSVGIconId:null,virtualization:!1,className:null,position:"auto",positionAlterable:!0,height:250,width:null,appendTo:null},messages:{noResults:"No results found",moreAction:"See more results",serverError:"Server request failed. Please try again later.",minKeywordLength:"Please enter #minKeywordLength# or more characters"},headerItems:[],footerItems:[],criteriaPrecedence:[]}}},{key:"EVENTS",get:function(){return["listitemselect","listitemfocus","dropdownlistbeforefocus","dropdownlistbeforeopen","dropdownlistopen","dropdownlistbeforeclose","dropdownlistclose","change","beforesearch","searchsuccess","searcherror","moreactionclick","beforedropdownlistupdate","dropdownlistimagefail","dropdownlistupdate","noresults"]}}]),o}();t.registerComponent("ZSuggestField",A),ZPeopleComponents.zsuggestfield.Templates.children=function(t){return ZT.html(zc0tO181(),t.inputClass,t.disabled?"is-disabled":"")};var B=function(a){function o(){return _classCallCheck(this,o),_possibleConstructorReturn(this,_getPrototypeOf(o).apply(this,arguments))}return _inherits(o,t.ZSuggestField),_createClass(o,[{key:"_init",value:function(){_get(_getPrototypeOf(o.prototype),"_init",this).apply(this,arguments);var a=this._opts,n=this._data;this._dataMapping=this._opts.dataMapping,this._data.tokens=[],this._skipRender=!1,this._eventQueue=null,this._data.id=this._id,this._data.pasteStyle=t.Browser.isIE?"width:0;height:0;opacity:0":"position:absolute; top: -10000000px",this._prevValues=_toConsumableArray(a.values)||[],this._didOps=[],this._undidOps=[],this._uniqueIndex=0,this._updatePreDatas(),this._setValues(),this._tokensInfo={},n.required=a.required,n.readonly=a.readonly,n.hiddenInputName=t.getName(this.element,a)}},{key:"_updatePreDatas",value:function(){var t="checkbox"===this._opts.dropdownList.itemType;this._isCheckboxType=t,this._ignoreChange=!1,this._closeOnSelect=!t&&this._opts.dropdownList.closeOnSelect,this._storePatternSettings()}},{key:"_storePatternSettings",value:function(){var a="#value#",o="#id#",n=void 0,l=void 0,i=1,s=(this._displayPattern=this._opts.tokens.editModePattern.trim()).replace(/(\?|\*|\+|\$|\^|\.|\||\\|\(|\)|\[|\])/g,function(t){return"\\"+t});s=(s=s.replace(new RegExp("(".concat(a,"|").concat(o,")"),"g"),function(t){return n||t!==a?!l&&t===o&&(l=i++):n=i++,"(#prefix#.*#suffix#)"})).replace(/#prefix#/g,"").replace(/#suffix#/g,""),this._patternOpts={parsePattern:s,idIndex:l,valueIndex:n}}},{key:"_setValues",value:function(){var t=this,a=this._opts.maxAllowedValues,o=this._opts.values;a&&(this._opts.values=o=o.slice(0,a)),o.forEach(function(a){return t._data.tokens.push(t._getTokenData(a))})}},{key:"_getEditInput",value:function(){var t=n("#"+this._id+"-edit-input");return t.length?t:void 0}},{key:"_postEachRender",value:function(t,a){if(!a.ignoreRender){var o=this._opts,l=a.modifiedAttr&&-1!==a.modifiedAttr.indexOf("values"),i=this._tokensInfo.DOM=t.children(".ztokenfield__token");this._fromMethod&&!o.focusOnRerender&&(this._fromMethod=!1,this._focussedOut=!0),this._tokensInfo.DOMArr=i.toArray(),this._mainFocussedToken=this._lastSelectedToken=!1,l||this._resetSelectedTokens(),this._bindEditHandler();var s=this._editField=this._getEditInput(),r=this._domChanged,d=this._getSelected();if(s){s.focus();var c=this._tokenInEditMode;s.val(c.editText),this._CRUDEvent||s.select(),this._resetInputField(),this._listInstance.setAttribute("searchField",s)}else d.length?this._mainFocussedToken=d[d.length-1]:!l&&a.rendered&&(!this._focussedOut||this._CRUDEvent)&&this._focusInput({force:!0,event:this._data.orgEvent});this._showDrop&&(r=!0,void 0===a._queryForList?"after-cursor"===o.dropdownList.position&&this._positionMenu(!0):a._queryForList!==this._getQuery()&&!(this._opts.dataSource&&this._opts.dataSource.search)&&this._search(a._queryForList,this._CRUDEvent)),r||!a.rendered?(this._data.className="ztokenfield "+(o.className||o.zclassName||"")+(o.rtl?" zh-rtl":"")+(o.disabled?" is-disabled":"")+(o.readonly?" is-readonly":"")+(o.tokens.showRemoveButtonOnHover?"":" ztokenfield--closeshown"),a.attrs={"aria-disabled":o.disabled,id:this._id+"-container"},this._adjustHeight(),o.tokens.sortable?this._initSortable():this._destroySortable(),this._fixInput(),a.tokens.forEach(function(t){if(t.tokenId&&t.removable&&!t.removeButton.mainElement){var a=n("#"+t.tokenId);t.removeButton.mainElement=a.find(".ztokenfield__close")[0]}})):(this._CRUDEvent||this._CRUDOper)&&this._fixInput(),this._showDrop=this._CRUDEvent=!1}}},{key:"_destroySortable",value:function(){this._isSortableSet()&&t.sortable(this.container).destroy()}},{key:"_isSortableSet",value:function(){return this.container.data("zsortable")}},{key:"_postRender",value:function(){var t=this.container;this._cpyHelperField=t.find("#"+this._id+"-copy-helper"),this._input=t.find(".ztokenfield__textbox"),this._initSource()}},{key:"_getTriggerData",value:function(t){return(t=t||{}).params=this._listInstance.params,t.dropdownList=this._menu&&this._menu[0],t}},{key:"_getListSettings",value:function(){var t=_get(_getPrototypeOf(o.prototype),"_getListSettings",this).call(this),a=this._opts,n=this._opts.dropdownList,l=n.hideItemOnSelect,i=t.searchFieldOptions;return"checkbox"===n.itemType&&(t.multiSelectInterfacePattern="checkbox",t.checkedIcon=!0,l=!1),t.showAllOptionsSelectedMessage=!a.acceptNewValues&&a.showAllOptionsSelectedMessage,a.allowDuplicateValues&&(l=!1),this._hideItemOnSelect=t.hideItemOnSelect=l,a.autoComplete&&(t.focusSelectedItem=!1,t.selectOnKeyNavigation=!1),t.multiple=t.hideCheckbox=!0,i.updateOnSelect=!1,t.forElement=this["after-cursor"===n.position?"_input":"container"],t.beforesearchfieldupdate=this._onBeforeFieldUpdate.bind(this),t.searchfieldupdate=this._onInputFieldUpdate.bind(this),t}},{key:"_onInputFieldUpdate",value:function(){this._fixInput(),this._listInstance.updatePosition()}},{key:"_onInput",value:function(t,a){if(this._opts.delimiter){var n=this._input.val();if(this._isDelimiter(n[n.length-1]))return void t.preventDefault()}a.pasteAction&&t.preventDefault(),_get(_getPrototypeOf(o.prototype),"_onInput",this).apply(this,arguments)}},{key:"_onBeforeFieldUpdate",value:function(t){if(t.detail.autoCompleted)return this._checkMaxLimit()}},{key:"_updateCheckedState",value:function(t){(this._isCheckboxType||this._hideItemOnSelect)&&(this._ignoreChange=!0,this._listInstance.deselect(t),this._ignoreChange=!1)}},{key:"_closeBtnClick",value:function(t,a){this._opts.disabled||(this._removeToken(n("#"+t),a),a.stopPropagation(),a.preventDefault(),this.closeDropdownList(a))}},{key:"_setRemoveProps",value:function(t){var a=this._opts.tokens;t.removeButton={className:"ztokenfield__close",customAttributes:{tabindex:-1},title:this._getI18NText("remove"),defaultSVGIconId:"zc__svg--close ztokenfield__svg",defaultIconClassName:"ztokenfield__icon",defaultClassName:"ztokenfield__close",templateRender:!0,iconClassName:a.removeSVGIconClassName,SVGIconId:a.removeSVGIconId,click:this._closeBtnClick.bind(this,t.tokenId)}}},{key:"_changeHandler",value:function(t){var a=this,o=this._opts.values,n=o.length,l=this._prevValues,s=l.length,r=this._dataMapping.id,d=n!==s;if(!d)for(var c=function(t){var n=a._mapJSONToData(o[t],r);if(!l.find(function(t){return n===a._mapJSONToData(t,r)}))return d=!0,"break"},_=0;_<n&&"break"!==c(_);_++);d&&(this._trigger("change",t,{prevTokenList:l,currentTokenList:o}),this._prevValues=_toConsumableArray(o))}},{key:"_getObj",value:function(t,a,o){if(t=this._dataMapping[t]){var n=t.split(".");n.forEach(function(t,l){l===n.length-1?void 0!==a&&(o[t]=a):o=o[t]=o[t]||{}})}}},{key:"_getListCallbacks",value:function(t){return(t=_get(_getPrototypeOf(o.prototype),"_getListCallbacks",this).call(this,t)).selectionLimit=this._opts.maxAllowedValues,t.selectionLimit&&(t.selectionlimitreached=this._onSelectionExceed.bind(this)),t.value=this._opts.values,t.deselect=this._onDeselect.bind(this),t.beforeupdate=this._onBeforeUpdate.bind(this),t.update=this._onListUpdate.bind(this),t}},{key:"_onSelectionExceed",value:function(){this.closeDropdownList()}},{key:"_getSelected",value:function(){return this._getTokenDOMs().filter(".is-selected")||n([])}},{key:"_enterKeyHandler",value:function(t){var a=this._opts;if(t.preventDefault(),this._isCpyHelperField(n(t.target))){if(a.tokens.editable){var o=this._getSelected();1===o.length&&this._editHandler(void 0,o[0])}}else this._editField&&this._focusInput({event:t}),this._validateCurrentState(t)}},{key:"_validateCurrentState",value:function(a){var o=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];if(this._focussedOut=this._focussedOut||a.keyCode===t.keyCode.TAB&&"keydown"===a.type,this._focussedOut||!this._isCpyHelperField(n(a.target))){if(this._editField)this._reformToken(a);else{if(!o)return;var l=this._input.val().trim();l&&this._processInputText(a,l,this._data.tokens.length)}this._closeOnSelect&&this.closeDropdownList(a)}}},{key:"_isDelimiter",value:function(t){var a=this._opts.delimiter;if(a)return(a=Array.isArray(a)?a:[a]).find(function(a){return t===a})}},{key:"_getFirstDelimiter",value:function(){var t=this._opts.delimiter;return t=Array.isArray(t)?t[0]:t}},{key:"_getDelimiterRegExp",value:function(){var t=this._opts.delimiter;return Array.isArray(t)&&(t=new RegExp(t.join("|"))),t}},{key:"_processInputText",value:function(t,a,o,n){var l=this,i=a.split(this._getDelimiterRegExp()),s=[];1<i.length&&(n=!1),i.forEach(function(a){if(a){l._opts.trimInputedValue&&(a=a.trim());var o=l._processNewValueToken(t,a,n);o&&s.push(o)}});var r=this._validateAndAddToken(s,t,o);(this._focussedOut||r.length)&&this._resetInputField()}},{key:"_processNewValueToken",value:function(t,a,o){var _,n=this,l=this._opts,i=l.newValuePattern,s=this._parsePattern(a),r={},d=a,c=this._listInstance._ajaxSource;if(s&&(r=_objectSpread({},o),d=s.id,["id","value","text","titleText"].forEach(function(t){return n._getObj(t,"text"===t?s.label:s.id,r)}),this._fromEdit&&(_=this._tokenInEditMode.id===d),_||(_=this._data.tokens.find(function(t){if(t.id===d)return(r=_objectSpread({},t.actualData,{},r)).removable=!0,!0})),_||c||(_=this._opts.data.find(function(t){if(n._mapJSONToData(t,n._dataMapping.id)===d)return(r=_objectSpread({},t,{},r)).removable=!0,!0})),_))return r;var u=!this._fromEdit||"paste"!==t.type||s;if(l.acceptNewValues&&u){var p=i&&i instanceof RegExp;if(p&&(i.lastIndex=0),!i||p&&i.test(d))return s||this._assignValue(a,r,t),r.newToken=!0,this._addToDS(r),r}return l.dataValidation||this._fromEdit?this._getErrTokenData(a,t):void 0}},{key:"_focusOutHandler",value:function(t){this._clearAllSelection(),this._changeHandler(t),this._validateCurrentState(t),this._containerFocussed=this._focussedOut=!1,this._updateFocusClass()}},{key:"_clearAllSelection",value:function(){this._mainFocussedToken=this._lastSelectedToken=!1,this._deselectToken(this._getSelected())}},{key:"_getActiveInput",value:function(){return this._editField||this._input}},{key:"_isCpyHelperField",value:function(t){return t[0]===this._cpyHelperField[0]}},{key:"_getQuery",value:function(){return this._listInstance.params.query}},{key:"_arrowNavigation",value:function(t,a){var o=this._getTokens(),n=o.length;if(n){var i,l=this._lastSelectedToken||this._mainFocussedToken;if(l){if(!(i=o[this._getAjToken(l.id,a)]))return void(a||this._focusInput({event:t}))}else a&&(i=o[n-1]);this._onTokenClick(t,i,!0),t.preventDefault()}}},{key:"_getAjToken",value:function(t,a){var o=this._getTokenIndex(t);return a?o-1:o+1}},{key:"_isMenuShown",value:function(){return this._DDLOpened}},{key:"getValues",value:function(t){var a=this;return t.map(function(t){return a._getValue(t)})}},{key:"getValue",value:function(t){return this._getValue(t)}},{key:"_getValue",value:function(t){var o=(1<arguments.length&&void 0!==arguments[1]?arguments[1]:this._data.tokens).find(function(a){return a.id===t});return o&&o.actualData}},{key:"getAllValues",value:function(){return this._opts.values}},{key:"search",value:function(t){this._input[0].value=t,this._fixInput(),this._search(t)}},{key:"_keydownHandler",value:function(a){var o=this;this._delToken=!1,this._preventInputOnMaxReach(a);var l=t.keyCode,i=this._listInstance,s=n(a.target),r=this._isCpyHelperField(s),d="INPUT"!==s[0].tagName||r?void 0:n(s),c=d&&d.val().trim(),_=a.keyCode,u=this._isMenuShown(),p=this._input,m=p.val().trim(),h=s[0]===p[0]&&0===m.length,v=this._editField,y=_===l.LEFT;if(y||_===l.RIGHT)c?this._search(c,a,null,this._opts.searchOnCurPos):this._arrowNavigation(a,y);else if(_===l.BACKSPACE||_===l.DELETE){if(this._delToken=!c,r)return void a.preventDefault()}else if(_===l.TAB)this._validateCurrentState(a);else if(_===l.ESCAPE)this.closeDropdownList(a),v&&this._validateCurrentState(a);else if(!c&&this._isCtrl(a)){var f=90===_,k=89===_,b=65===_,C=88===_;if(f||k||b||C){if(this.closeDropdownList(a),b)return void((r||h)&&(a.preventDefault(),this._selectToken(this._getTokens())));if(f||k){a.preventDefault();var D=function(t){return"create"===t?function(t){o._removeToken(t,a)}:function(t){o._validateAndAddToken(t.map(function(t){return t.data}),a)}};if(f){this._undoTask=!0;var S=this._didOps.pop();S&&D(S[0].action).call(this,S)}else if(k){this._redoTask=!0;var T=this._undidOps.pop();T&&D(T[0].action).call(this,T)}return void(this._undoTask=this._redoTask=!1)}if(C)return void(this._removeTimer=setTimeout(function(){o._removeToken(o._getSelected(),a)},2))}}if(d)if(u){if(-1<[l.ENTER].indexOf(_)&&!this._menu.attr("data-noresults"))return void(this._closeOnSelect&&this.closeDropdownList(a))}else _===l.DOWN&&(i._ajaxSource||this._search(this._input.val(),a));_===l.ENTER&&this._enterKeyHandler(a)}},{key:"_preventInputOnMaxReach",value:function(t){this._opts.maxAllowedValues&&this._opts.values.length>=this._opts.maxAllowedValues&&("INPUT"===t.target.tagName&&this._isAlphaNumericKey(t)&&t.preventDefault())}},{key:"_isCtrl",value:function(t){return t&&(t.metaKey||t.ctrlKey)}},{key:"_updateLBSelections",value:function(){var t=[];this._data.tokens.forEach(function(a){t.push(a.actualData)}),this._listInstance.setValue(t)}},{key:"_onDelimiterKey",value:function(t){if(this._isMenuShown()&&!this._menu.attr("data-noresults")){var a=this._menu.find(".zdropdownlist__body > .zdropdownlist__item.has-focus");if(a.length)return void this._listInstance.setValue(a[0].itemData.originalData,{event:t})}this._validateCurrentState(t)}},{key:"_resetInputField",value:function(t){(t||this._input).val(""),this._fixInput()}},{key:"_inputHandler",value:function(t){this._isCpyHelperField(n(t.target))||this._fixInput()}},{key:"_keyUpHandler",value:function(a){if(!this._opts.disabled){var s,l=n(a.target),i=this._delToken;if(i||!this._isCtrl(a)&&this._isAlphaNumericKey(a)){var r,d;if(this._isCpyHelperField(l))d=i,s=!0;else{var c=l.val();if(!c.trim()&&-1<this._opts.messages.noResults.indexOf("#query#")&&this.closeDropdownList(a),!i||c&&c.length)r=!0,this._isDelimiter(c[c.length-1])&&this._onDelimiterKey(a,c);else this._selectToken(l.prev(),!0,!0),d=!0,this._removeEditInput(),this.closeDropdownList(a)}if(d){var u=this._getSelected();if(u.length){if(s)if(!u.filter(".is-readonly").length){var m=n(u[0]).prev();m.length&&this._selectToken(m,!0,!0)}this._removeToken(u,a)}this._isCheckboxType||this.closeDropdownList(a)}else r&&9===t.Browser.getIEVersion()&&this._fixInput()}}}},{key:"_mousedownHandler",value:function(t){var o,a=t.target;this._editField&&!o&&(!(o=a===this._editField[0])&&this._validateCurrentState(t)),this._input[0]!==a&&(o||this._getTokenFromEv(t))||this._search(this._input.val(),t),this._focussedOut=!1,t.target===this.container[0]&&t.preventDefault()}},{key:"_onBeforeOpen",value:function(t){this._isCheckboxType||(this._ignoreChange=!0,this._listInstance.deselectAll(),this._ignoreChange=!1);var a=this._input.val();return!!(!this._opts.readonly&&a.length<this._opts.search.maxKeywordLength&&this._checkMaxLimit())&&this._trigger("dropdownlistbeforeopen",t)}},{key:"_rectifyInput",value:function(t){return t=t.replace(/[,]?\n+/gim,",").replace(/\t+/gim,",")}},{key:"_pasteHandler",value:function(t){var a=this;this._checkMaxLimit()?(clearTimeout(this._pasteTimer),this._pasteTimer=setTimeout(function(){var o=t.target,n=a._rectifyInput(o.value),l={inputText:n};a._trigger("paste",t,l),o.value!==l.inputText&&(o.value=n=l.inputText),a._opts.addPastedValueAsToken&&a._validateCurrentState(t),(n=o.value)&&a._search(n,t)},100)):t.preventDefault()}},{key:"_contextMenuHandler",value:function(){}},{key:"_inputFocusHandler",value:function(t){this._clearAllSelection(),this._opts.suggestOnFieldFocus&&0===this._opts.search.minKeywordLength&&this._search("",t)}},{key:"_inputBlurHandler",value:function(){}},{key:"_isSpecialKeys",value:function(t){return t.metaKey||t.ctrlKey||t.shiftKey}},{key:"_isRemovableToken",value:function(t){return!t.hasClass("is-readonly")}},{key:"_getTokenFromEv",value:function(t){return n(t.target).closest(".ztokenfield__token")[0]}},{key:"_isCtrlKey",value:function(a){return t.OS.isMac()?a.metaKey:a.ctrlKey}},{key:"_onTokenClick",value:function(t,a,o){if(a){this._updateScrollTop(a);var l=[a];this._skipCpyFieldUpdate=!0;var i=this._mainFocussedToken,s=this._lastSelectedToken;if(t.shiftKey){var r=this._getTokens();i||(i=a);var d=this._getTokenIndex(a.id),c=this._getTokenIndex(i.id);if(o){var _=this._getSelected();this._deselectToken(_.filter(".ztemp"))}else this._clearAllSelection();if(d!==c){if(d<c){var u=[d,c];c=u[0],d=u[1]}for(var p=c;p<=d;p++)l.push(r[p])}o?this._selectToken(n(l).filter(":not(.is-selected)").addClass("ztemp")):this._selectToken(l),s=a}else!o&&this._isCtrlKey(t)?this._isTokenSelected(a)?this._deselectToken(a):this._selectToken(n(l)):(this._clearAllSelection(),this._selectToken(n(l))),i=a,s=!1,this._getSelected().removeClass("ztemp");this._mainFocussedToken=i,this._lastSelectedToken=s,this._skipCpyFieldUpdate=!1,this._updateValToBeCopied(t),this.closeDropdownList(t)}}},{key:"_clickHandler",value:function(t){var a=this._getTokenFromEv(t);a?this._onTokenClick(t,a):"INPUT"!==t.target.tagName&&this._focusInput({event:t})}},{key:"_updateFocusClass",value:function(){this.container[this._containerFocussed?"addClass":"removeClass"]("has-focus")}},{key:"_bindEvents",value:function(){if(!this._opts.disabled){this._addEvents({keydown:"keydown",keyUp:"keyup",input:"input",mousedown:"mousedown",click:"click",paste:"paste",contextMenu:"contextmenu"});var t=this._tokenImageHandler.bind(this);this._tokenImageHandlerRef=t,this.container[0].addEventListener("error",t,!0),this._addEvents({inputFocus:"focus",inputBlur:"blur"},this._input),this._addEvents({containerBlur:"focusout",containerFocus:"focusin"},this.container)}}},{key:"_containerFocusHandler",value:function(t){var a=!this._containerFocussed;this._focussedOut=!1,this._containerFocussed=!0,this._updateFocusClass(),a&&this._trigger("focus",t)}},{key:"_containerBlurHandler",value:function(t){var a=this;this._focussedOut=!0,clearTimeout(this._blurTimer),document.activeElement!==this.container[0]&&(this._blurTimer=setTimeout(function(){a._focussedOut&&a._focusOutHandler(t)}))}},{key:"_getTokenDOMs",value:function(){return this._tokensInfo.DOM}},{key:"_getTokens",value:function(){return this._tokensInfo.DOMArr}},{key:"_bindEditHandler",value:function(){var t=this._getTokenDOMs();this._removeEvents("dblclick",t),this._opts.tokens.editable&&this._addEvents({edit:"dblclick"},t)}},{key:"_focusInput",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};if((t.force||document.activeElement!==this._input[0])&&this._trigger("beforeinputfocus",t.event)){this._focussed=this._containerFocussed=!0;var o=this.container[0].scrollTop;this._input.focus(),this._CRUDEvent&&(this.container[0].scrollTop=o),this._trigger("inputfocus")}}},{key:"_getToken",value:function(t){var a;if(t){var o=[];return t instanceof n&&t.length?o=t.filter(".ztokenfield__token").toArray():(t=Array.isArray(t)?t:[t]).forEach(function(t){(a="string"==typeof t?n("#"+t):t.tokenId?n("#"+t.tokenId):n(t)).hasClass("ztokenfield__token")&&o.push(a[0])}),o.length&&o}}},{key:"_isTokenSelected",value:function(t){return n(t).hasClass("is-selected")}},{key:"_selectToken",value:function(t){var a=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],o=2<arguments.length?arguments[2]:void 0,l="is-selected";if(t=this._getToken(t)){var i=n(t);a?(i.addClass(l),o&&(this._mainFocussedToken=t.pop())):i.removeClass(l+" ztemp"),this._updateValToBeCopied()}}},{key:"_deselectToken",value:function(t){this._selectToken(t,!1)}},{key:"_getTokenIndex",value:function(t){for(var a=this._data.tokens,o=0;o<a.length;o++)if(a[o].tokenId===t)return o;return-1}},{key:"_search",value:function(t,a,o,n){if(t.length<this._opts.search.maxKeywordLength&&this._checkMaxLimit()){var l=this._opts.search;l.delay="number"==typeof o?o:l.delay,l.event=a,l.searchOnCurPos=n,this._listInstance.search(t,l,!0)}}},{key:"_removeTokens",value:function(t,a,o){this._removeToken(this._getDuplicates(t),a,o)}},{key:"_tokenImageHandler",value:function(t){var a=t.target;if("IMG"===a.tagName){var o=n(this._getTokenFromEv(t)),l=this._getTokenIndex(o[0].id),i=this._data.tokens[l]||{},s=i.actualData,r=(s||{}).image,d={imageElement:a,token:o,tokenData:s};this._trigger("tokenimageerror",t,d);var c=d.tokenData;r!==c.image&&(i.ignoreRender=!0,c.avatarText?(i.avatarText=c.avatarText,i.image=null):i.image=c.image,this._data.tokens[l]=i,this._render())}}},{key:"_onSelect",value:function(t,a){if(a.fromUI){var o=(a=t.detail).itemMappedData,n=a.item;if(o.selectable&&!o.moreresults){var l=a.itemData,i=this._isCheckboxType;if(this._lastSelected=n,this._trigger("listitemselect",t,{listItem:n,listItemData:o.originalData})){var r;if(this._editField)r=this._tokenInEditMode.index,i||this._removeEditInput();this._buildToken(l,t,void 0,r)}this._closeOnSelect||t.preventDefault()}this._closeOnSelect&&this.closeDropdownList(t),this._editField||this._focusInput()}}},{key:"_getDuplicates",value:function(t){var a=this,o=this._data.tokens,l=[];return(t=Array.isArray(t)?t:[t]).forEach(function(t){t="object"===_typeof(t)?a._mapJSONToData(t,a._dataMapping.id):t,o.forEach(function(a){a.invalidToken||a.id!==t||l.push(n("#"+a.tokenId)[0])})}),l.length&&l}},{key:"_beforeRender",value:function(){return!0}},{key:"_onListUpdate",value:function(){this._menu&&(this._menu.attr("tabIndex",-1),this._isCheckboxType&&this._updateCheckedState())}},{key:"_getMatchedData",value:function(t){var a=this,o=this._dataMapping.id,n=this._opts.data;if(n&&n.length){var l=this._mapJSONToData(t,o);return n.find(function(t){return a._mapJSONToData(t,o)===l})}}},{key:"_addToDS",value:function(t){this._opts.dropdownList.acceptNewValues&&this._opts.data instanceof Array&&this._opts.data.push(t)}},{key:"_buildToken",value:function(t,a,o,n){var s,r,d,l=this._opts,i="error"===t.type;i?d=this._getErrTokenData(t.errorValue,a,n):(o&&!i&&((s=this._getMatchedData(t))?t=s:l.acceptNewValues||this._listInstance._ajaxSource?this._addToDS(t):r=this._messages.denyValue),!r&&(this._checkMaxLimit()?(d=t,t.index=n):r=this._messages.limitReach),r?this._trigger("tokenaddfail",a,{failureType:r}):this._validateAndAddToken(d,a))}},{key:"_getDataKeys",value:function(){return _get(_getPrototypeOf(o.prototype),"_getDataKeys",this).call(this).concat(["id","titleText"])}},{key:"_checkMaxLimit",value:function(){var t=this._opts.maxAllowedValues;return!t||this._opts.values.length<t}},{key:"_decodeContent",value:function(a){return t.textarea.innerHTML=a,t.textarea.value}},{key:"_getTokenData",value:function(t){var a=this._opts,o=this._getMappedData(t),n=this._id+"-token-"+this._uniqueIndex++,l=t.invalidToken||"error"===t.type;return o=_objectSpread({},o,{tokenId:n,invalidToken:l,errorValue:t.errorValue,removable:void 0===t.removable||t.removable,hidden:t.hidden,isSprite:!!a.dataMapping.iconClassName}),"custom"===a.tokens.contentType?o.customHTML=this._getCustomContent(t,a.tokens.template,!1,"text",!a.tokens.isDataEncoded):o.hasImage=!l&&"image-text"===a.tokens.contentType&&(!t.newToken||o.image||o.iconClassName),o.actualData=t,o.removable&&this._setRemoveProps(o),o.titleText=o.titleText&&this._decodeContent(o.titleText),o}},{key:"_isValidToken",value:function(t){var o=this._opts.allowDuplicateValues;return"error"===t.type||o||!this._getDuplicates(t)}},{key:"_validateAndAddToken",value:function(t,a,o){var n=this;t=Array.isArray(t)?t:[t],this._taskCollector=[];var l=[];t.forEach(function(t){n._isValidToken(t)?l.push(t):n.removeErrorToken?n._dispatchEvent("tokenaddfail",a,{failureType:n.messages.duplicateValues}):(t=n._getErrTokenData(n._mapJSONToData(t,n._dataMapping.text),a,t.index))&&l.push(t)});var i=0;return l.forEach(function(t){var l=void 0!==o?o+i:t.index;n._createToken(t,a,l)&&i++}),this._updateUndoRedoOp(a),l}},{key:"_createToken",value:function(t,a,o){var l=this._opts;if(this._checkMaxLimit()){var i={tokenData:t,fromEdit:this._fromEdit};t.newToken&&this._trigger("parsenewtoken",a,i)&&(t=i.tokenData);var s=this._getTokenData(t);if(i={tokenData:s,fromEdit:this._fromEdit},this._trigger("beforetokenadd",a,i)){var r=this._data.tokens,d="number"==typeof o&&-1<o&&o<r.length;return d?(r.splice(o,0,s),l.values.splice(o,0,t)):(r.push(s),l.values.push(t)),this._CRUDEvent=a,this._CRUDOper=!0,this._data.orgEvent=a,this._render(),i.token=n("#"+s.tokenId),this._fromEdit||this._updateScrollTop(i.token),this._trigger("tokenadd",a,i),this._addTask(s,d?o:r.length-1),!0}}}},{key:"_onDeselect",value:function(t){this._ignoreChange||this._removeTokens(t.detail.itemData,t)}},{key:"_onBeforeUpdate",value:function(a,n){var l=this,s=this._opts.allowDuplicateValues||this._isCheckboxType;this._data.tokens.forEach(function(o){if(!o.editInput){var i=t.decodeHTML(o.value);i&&(i=i.toString(),n.results=a.detail.results.filter(function(t){var a=l._mapJSONToData(t,l._dataMapping.value);if(a){if(i===a.toString()){var n=!o.removable;return(l._isCheckboxType||!n)&&(t.disabled=n,s)}return!0}}))}}),_get(_getPrototypeOf(o.prototype),"_onBeforeUpdate",this).call(this,a,n)}},{key:"_removeToken",value:function(a,o,l){var i=this;if(a&&((a=this._getToken(a))&&a.length)){this._taskCollector=[];var s=0,r=0;a.forEach(function(a){a=n(a);var d=i._getTokenIndex(a[0].id),c=i._data.tokens,_=c[d],u={isTrusted:!l,token:a[0],tokenData:{actualData:_.actualData,id:_.id,tokenId:_.tokenId,invalidToken:_.invalidToken,text:_.text,removable:_.removable}};i._isRemovableToken(a)&&i._trigger("beforetokenremove",o,u)&&(r++,c.splice(d,1),i._opts.values.splice(d,1),i._skipCpyFieldUpdate=!0,i._updateCheckedState(_.actualData),i._deselectToken(a),i._skipCpyFieldUpdate=!1,i._opts.tokens.animateOnRemove?(a.width(a.width()).addClass("ztokenfield--transition"),setTimeout(function(){a.off(t._transitionEnd).on(t._transitionEnd,function(){a.css({opacity:"",width:""}).removeClass("ztokenfield--transition").off(t._transitionEnd),++s===r&&i._afterTokensRemoval(o),i._trigger("tokenremove",o,u)}).css({opacity:.01,width:0})},15)):(s++,i._trigger("tokenremove",o,u)),i._addTask(_,d,"remove"))}),r===s&&this._afterTokensRemoval(o),this._updateUndoRedoOp(o)}}},{key:"_afterTokensRemoval",value:function(t){this._CRUDEvent=t,this._CRUDOper=!0,this._data.orgEvent=t,this._render(),this._updateValToBeCopied(t),this._updateLBSelections()}},{key:"_preRender",value:function(t){var a=this._editField;if(t._queryForList=void 0,this._CRUDEvent){this._showDrop=!0;var o=this._getActiveInput(),n=this._opts.search.retainKeyword;!1!==(n=(this._opts.search.minKeywordLength&&this._isCheckboxType&&!this._isNotNull(n)||n)&&!this._opts.autoComplete&&this._checkMaxLimit())&&(n=n||this._isCheckboxType),n||this._resetInputField(o);var l=o.val().trim();a&&this._updateEditTokenData(l),!this._closeOnSelect&&this._isMenuShown()?!n&&(t._queryForList=l):this._showDrop=!1}return this._data.rendered&&this._saveSelectedTokens(),t.tokens.forEach(function(a){a.readonly=t.readonly}),t}},{key:"_saveSelectedTokens",value:function(){this._selectedTokenIds=this._getSelected().toArray().map(function(t){return t.id})}},{key:"_resetSelectedTokens",value:function(){var t=this;this._data.rendered&&this._getTokenDOMs().toArray().forEach(function(a){var o=-1!==t._selectedTokenIds.indexOf(a.id);t._selectToken(a,o)})}},{key:"_updateUndoRedoOp",value:function(){this._taskCollector.length&&(this._undoTask?this._undidOps.push(this._taskCollector):!this._redoTask&&this._didOps.push(this._taskCollector)),this._taskCollector=[]}},{key:"_addTask",value:function(t,a,o){var n={data:t.actualData,tokenId:t.tokenId};n.data.index=n.index=a,n.action=o||"create",this._taskCollector.splice(0,0,n)}},{key:"_getPatternedContent",value:function(t,a){return t.invalidToken?!a&&t.errorValue:this._displayPattern.replace(/#value#/g,this._mapJSONToData(t,this._dataMapping.text)).replace(/#id#/g,this._mapJSONToData(t,this._dataMapping.id))}},{key:"_parsePattern",value:function(t){var n,l,a=this._patternOpts,o=t.match(a.parsePattern);if(o)return a.idIndex&&(n=o[a.idIndex]),a.valueIndex&&(l=o[a.valueIndex]),{id:n,label:l}}},{key:"_updateValToBeCopied",value:function(t){var a=this;if(!this._skipCpyFieldUpdate){var l,o=this._getSelected().toArray(),n=[];o.length?(this._selected=[],o.forEach(function(t){a._selected.push(t.id);var o=t.actualData;n.push(a._getPatternedContent(o))}),this._lastSelectedToken&&-1<o.indexOf(this._lastSelectedToken)&&(l=this._lastSelectedToken),this._cpyHelperField.val(n.join(this._getFirstDelimiter())).select()):!this._editField&&!this._focussedOut&&this._focusInput({event:t}),this._lastSelectedToken=l}}},{key:"_adjustHeight",value:function(){var t=this.container.css("height");this._prevHeight&&t!==this._prevHeight&&this._isMenuShown()&&this._listInstance.updatePosition(),this._prevHeight=t}},{key:"_onBeforeSearch",value:function(t,a){return a.params.previousQuery=void 0,this._repositioned=!0,_get(_getPrototypeOf(o.prototype),"_onBeforeSearch",this).apply(this,arguments)}},{key:"_fixInput",value:function(){var t=this._data.tokens.length,a="inherit",o=t?"":this._opts.placeholder;this._input[0].placeholder=o||"";var l=this._getActiveInput();if(t){var i=l===this._input?this._input.val()||o:l.val(),s=this.container.is(":hidden"),r=this._input,d=n("<span>").attr({class:"ztokenfield__textbox",style:"position:absolute; visibility:hidden; width:auto;"}).text(i),c=d;s&&!this.isCE&&(r=(c=this.container.clone().width("auto").appendTo("body")).find("input")),d.insertAfter(r),a=d.width()+30+"px",c.remove()}l[0].style.width=a}},{key:"_updateScrollTop",value:function(t){if((t=n(t))&&t.length){var a=t.position().top,o=this.container[0].scrollTop;if(0>a)this.container.scrollTop(o+a);else{var i=t.outerHeight()+a+o,s=this.container.innerHeight()+o;i>s&&this.container.scrollTop(o+(i-s))}}}},{key:"_destroy",value:function(){this._opts.tokens.sortable&&this._destroySortable(),this.container[0].removeEventListener("error",this._tokenImageHandlerRef,!0),_get(_getPrototypeOf(o.prototype),"_destroy",this).call(this),clearTimeout(this._pasteTimer),clearTimeout(this._removeTimer),this._listInstance=this._input=this._cpyHelperField=void 0}},{key:"_duplicateElement",value:function(t){var a=n("<div>").css({position:"absolute",left:-9999,top:0,zIndex:-2e4});return["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopStyle","borderRightStyle","borderBottomStyle","borderLeftStyle","borderTopWidth","boxSizing","fontFamily","fontSize","fontWeight","height","letterSpacing","lineHeight","marginBottom","marginLeft","marginRight","marginTop","outlineWidth","overflow","overflowX","overflowY","paddingBottom","paddingLeft","paddingRight","paddingTop","textAlign","textOverflow","textTransform","whiteSpace","wordBreak","wordWrap","height"].forEach(function(o){return a[0].style[o]=window.getComputedStyle(t[0])[o]}),a}},{key:"_positionMenu",value:function(t){if(this._menu&&this._menu.is(":visible")){if(t&&(this._listInstance.positionList(),this._repositioned=!0),this._repositioned){var a=this._input,o=this._positionInput(a);if(o){var n=this._menu[0].style,l=n.top,i=n.left,s=this._menu.data("direction");/^(top)/.test(s)?l=parseInt(l)+o.top:/^(bottom)/.test(s)&&(l=parseInt(l)-a.outerHeight()+o.top+o.height),i=parseInt(i)+o.left,this._menu.css({top:l,left:i})}}this._repositioned=!1}}},{key:"_positionInput",value:function(t){var o,n,l,i,s,a=t[0].value.slice(0,t[0].selectionStart);return o='<span style="position: relative; display: inline-block;vertical-align:middle;">'+this._removeSpecialChar(a)+"</span>",o+="<span id='caret' style='position: relative; display: inline-block;vertical-align:middle;'>|</span>",o+="<span style='position: relative; display: inline-block;vertical-align:middle;height:100%'></span>",i={left:(n=(l=(s=this._duplicateElement(t)).html(o).insertAfter(t).find("#caret")).position()).left,top:n.top,height:l.height()},s.remove(),i}},{key:"_removeSpecialChar",value:function(a){return a=a.replace(/<|>|`|"|&/g,"?").replace(/\r\n|\r|\n/g,"<br/>"),t.Browser.isFirefox&&(a=a.replace(/\s/g,"&nbsp;")),a}},{key:"_getErrTokenData",value:function(t,a,o){if(t=t.trim()){var n={invalidToken:!0,newToken:!0,errorValue:t,type:"error",index:o};return this._assignValue(t,n,a,o),this._input.val(""),n}}},{key:"_assignValue",value:function(t,a){var o=this;["id","text","titleText"].forEach(function(n){return o._getObj(n,t,a)})}},{key:"hasInvalidTokens",value:function(){var t=this._opts.values;if(this._opts.dataValidation)for(var a=0;a<t.length;a++)if("error"===t[a].type)return!0}},{key:"_editHandler",value:function(t,a){var o=this._opts.tokens;if(a=a||t.currentTarget,!this._opts.disabled&&o.editable&&this._isRemovableToken(n(a))){var d,l=this._data,i=this._getTokenIndex(a.id),s=a.actualData,r=this._tokenInEditMode=this._data.tokens[i];d=this._getPatternedContent(s),r.index=i,r.editText=d,this._opts.values.splice(i,1),l.tokens.splice(i,1,{editInput:!0}),this._render()}}},{key:"_updateEditTokenData",value:function(t){for(var a=this._data.tokens,o=this._tokenInEditMode,n=0;n<a.length;n++)if(a[n].editInput){o.index=n,o.editText=t;break}}},{key:"_reformToken",value:function(a){var o=this._editField;if(o){var n=a&&a.keyCode===t.keyCode.ESCAPE,l=o.val().trim(),i=this._tokenInEditMode,s=i.actualData,r=i.index;if(this._removeEditInput(),n||i.editText===l)return this._validateAndAddToken(s,a,r);if(!l)return;delete s.invalidToken,delete s.type;var d={textboxValue:l,itemData:s};this._dispatchEvent("tokenedit",a,d),this._fromEdit=!0,this._tokenInEditMode=i,this._processInputText(a,d.textboxValue,r,s),this._fromEdit=this._tokenInEditMode=!1}}},{key:"_removeEditInput",value:function(){this._listInstance.setAttribute("searchField",this._input),this._tokenInEditMode=this._editField=!1;for(var t=this._data.tokens,a=0;a<t.length;a++)if(t[a].editInput){t.splice(a,1),this._render();break}}},{key:"_getEditInputIndex",value:function(){for(var t=this._data.tokens,a=0;a<t;a++)if(t[a].editInput)return a;return-1}},{key:"removeTokens",value:function(t,a){this._fromMethod=!0,this._removeTokens(t,a,!0)}},{key:"removeToken",value:function(t,a){this._fromMethod=!0,this._removeTokens(t,a,!0)}},{key:"removeAllTokens",value:function(t){this._fromMethod=!0,this._removeToken(this._getTokens(),t,!0)}},{key:"addTokens",value:function(t){this._updateValues(t)}},{key:"addItems",value:function(t,a){this._listInstance.addItems(t,a)}},{key:"removeItems",value:function(t){this._listInstance.removeItems(t)}},{key:"setValues",value:function(t){this._updateValues(t)}},{key:"setValuesById",value:function(t){var a=this,o=this._dataMapping.itemIdentifier||this._dataMapping.id,n=this._opts.data||[];n.length&&(n.find(function(n){var l=a._mapJSONToData(n,o);-1<t.indexOf(l)&&a._validateAndAddToken(n,void 0)}),this._changeHandler())}},{key:"getSelectedValuesId",value:function(){var t=this._dataMapping.itemIdentifier||this._dataMapping.id,o=[];return(this._opts.values||[]).forEach(function(a){o.push(a[t])}),o}},{key:"_updateValues",value:function(t){var a=this;if(this._changeCall=!0,t&&t instanceof Array){if(!Array.isArray(t))return;this._skipRender=!0;var o=new Set(this._data.tokens.map(function(a){return a.id})),n=[];t.forEach(function(t){var l=a._getTokenData(t);a._isValidToken(l)&&!o.has(l.id)&&(n.push(l),o.add(l.id),a._opts.values.push(l.actualData),a._data.tokens.push(l),a._queueTokenEvent("tokenadd",{token:{tokenId:l.tokenId},tokenData:l.actualData}))}),this._skipRender=!1,this._render(),this._updateLBSelections(),this._fixInput(),this._flushQueuedEvents()}this._changeHandler(),this._changeCall=void 0}},{key:"_queueTokenEvent",value:function(t,a){this._eventQueue=this._eventQueue||[],this._eventQueue.push({eventName:t,data:a})}},{key:"_flushQueuedEvents",value:function(){var t=this;this._eventQueue&&(this._eventQueue.forEach(function(a){var o=a.eventName,n=a.data;t._trigger(o,null,n)}),this._eventQueue=[])}},{key:"addToken",value:function(t){t&&!(t instanceof Array)&&(this._fromMethod=!0,this._buildToken(t,void 0,!0),this._updateLBSelections()),this._changeCall||this._changeHandler()}},{key:"setFocus",value:function(){this._focusInput({from:"method"})}},{key:"selectAll",value:function(){var t=this;this._listInstance.staticData&&this.fetchData(function(a){t.setAttribute("values",a.results)})}},{key:"_beforeItemChecked",value:function(t,a){!a&&t&&(a=t.detail);var o=this._opts,n=o.maxAllowedValues;!a.data.checked&&n&&n===o.values.length&&(t.preventDefault(),this._dispatchEvent("tokenaddfail",t,{failureType:this._messages.limitReach}))}},{key:"_setAttribute",value:function(t,a){var n=!1,l=this._opts;"values"===t?(this._fromMethod=!0,this._data.tokens=[],l[t]=a,this._setValues(),this._updateLBSelections(),this._changeHandler(),this._domChanged=!0):(l[t]=a,"dataMapping"===t||"rtl"===t?(this._dataMapping=l.dataMapping,n=!0):"placeholder"===t?this._fixInput():"tokens"===t?(this._updatePreDatas(),this._reInit=!0):"dropdownList"===t?(this._updatePreDatas(),n=!0):n=!0),n&&_get(_getPrototypeOf(o.prototype),"_setAttribute",this).apply(this,arguments)}},{key:"_disable",value:function(t){var a=this._opts,o=this.container,n="is-disabled";t?(o.off("."+this.name).addClass(n),this._input.off("."+this.name)):(o.removeClass(n),this._bindEvents()),this._input.attr("disabled",t),a.tokens.sortable&&this._initSortable()}},{key:"_initSortable",value:function(){var a=this,o=this;this._opts.tokens.sortable&&!this._opts.disabled?this._isSortableSet()?t.sortable(this.container).refresh():t.sortable(this.container,{ignoreAsHandle:".ztokenfield__close",region:"parent",items:"> .ztokenfield__token",drag:function(){return a.closeDropdownList()},change:function(t){var a=t.detail.draggedElement.attr("id"),l=o._getTokenIndex(a),i=n("#"+a).index();o._opts.values.splice(i,0,o._opts.values.splice(l,1)[0])}}):this._destroySortable()}},{key:"name",get:function(){return"ztokenfield"}},{key:"attrs",get:function(){return{allowDuplicateValues:!1,dataValidation:!1,delimiter:",",acceptNewValues:!1,maxAllowedValues:null,removeErrorToken:!1,trimInputedValue:!0,addPastedValueAsToken:!0,focusOnRerender:!0}}},{key:"props",get:function(){return{newValuePattern:null,dropdownList:{itemType:"none",closeOnSelect:!0,hideItemOnSelect:!1},search:{retainKeyword:null},tokens:{contentType:"text",template:null,isDataEncoded:null,sortable:!1,editable:!1,animateOnRemove:!1,showRemoveButtonOnHover:!1,editModePattern:'"#value#" <#id#>'},values:[],messages:{remove:"Remove",close:"Close"}}}},{key:"_messages",get:function(){return{limitReach:"Limit Exceeded",denyValue:"Deny new value"}}},{key:"EVENTS",get:function(){return["beforetokenadd","beforetokenremove","tokenadd","tokenremove","tokenedit","tokendrag","tokenaddfail","tokenimagefail","focus","beforeinputfocus","inputfocus"]}},{key:"_CONSTANTS",get:function(){return{minKeywordLength:20,maxResults:10}}}]),o}();t.registerComponent("ZTokenfield",t.ZSuggestField,B),function(t){var a=t.ztokenfield.Templates;a.container=function(t){return ZT.html(zc0tO182(),t.children&&a.children(t))},a.children=function(t){return ZT.html(zc0tO183(),t.required&&a.hiddenInput(t),t.tokens.map(function(o){return ZT.html(zc0tO184(),o.editInput?ZT.html(zc0tO185(),t.id):ZT.html(zc0tO186(),o.removable?"":"is-readonly",o.invalidToken?" has-error":"",o.tokenId,o.actualData,o.style,a.tokenContent(o)))}),t.id,t.id,t.tabindex,t.disabled,t.readonly,t.readonly,t.pasteStyle,t.id)},a.tokenContent=function(a){return a.customHTML?ZT.html(zc0tO187(),ZT.customHTML(a.customHTML||"")):ZT.html(zc0tO188(),a.hasImage&&!a.avatarText&&(a.isSprite?ZT.html(zc0tO189(),a.iconClassName):ZT.html(zc0tO190(),a.image)),a.avatarText&&ZT.html(zc0tO191(),a.avatarText),ZT.html(zc0tO192(),a.titleText,ZT.customHTML(a.text)),!a.readonly&&a.removeButton&&t.createButton(a.removeButton))},a.hiddenInput=function(t){return ZT.html(zc0tO193(),t.hiddenInputName,t.tokens.length?t.tokens.length:"",t.required,t.required)}}(ZPeopleComponents);var N=function(a){function o(){return _classCallCheck(this,o),_possibleConstructorReturn(this,_getPrototypeOf(o).apply(this,arguments))}return _inherits(o,t.CoreComponent),_createClass(o,[{key:"name",get:function(){return"zalertdialog"}}],[{key:"open",value:function(t){this._opts=n.extend(!0,{},this.DEFAULTS,t);var a=this;this.close({},{},function(){a._init(t)}),this._updatePopupList(!0)}},{key:"_updatePopupList",value:function(a){t._updatePopupList&&t._updatePopupList(this.container,this.name,a)}},{key:"_getID",value:function(){var t=this._opts;return"zalert-"+(t.name||t.customAttributes&&t.customAttributes.id||"")+"-suppressed"}},{key:"_init",value:function(){var a=this,o=this._opts,n=this._getID(),i=document.cookie.split(";").filter(function(t){if(0===t.trim().indexOf(n+"=true"))return t});return this._dialogId=n,i.length?void(o.suppressed&&o.suppressed()):(this._construct(),this._bindEvents(),this._setPosition(),this._createOverlay(),this._opts.animation&&this._opts.animation.open?this._openAnimate():(this._display(),this._handleOpen()),void t.$window.off("resize.zalertdialog").on("resize.zalertdialog",function(t){var o=a._opts.position;a.container&&a.container.is(":visible")&&(o&&!o.length||"center"===o)&&"resize"===t.originalEvent.type&&a._setPosition()}))}},{key:"_construct",value:function(){var a=this._opts;this._data=a,this._data.className="".concat(a.className," ").concat(a.rtl?"zh-rtl":"");var o=a.title||a.closeButton;o?this._updateTitleInfo():this._data.titleBar=!1;var l=a.isHTMLEncoded||a.isMessageHTMLEncoded;a.primaryMessage&&""!==a.primaryMessage.trim()&&(this._data.primaryMessage=l?a.primaryMessage:t.encodeHTML(a.primaryMessage)),a.secondaryMessage&&""!==a.secondaryMessage.trim()&&(this._data.secondaryMessage=l?a.secondaryMessage:t.encodeHTML(a.secondaryMessage)),a.suppressionDecisionBox&&(this._data.suppressionDecisionBoxLabel=a.suppressionDecisionBoxLabel||this._getString("suppressionMessage")),this._setIcon(),this._createFooter(),this.container=n(t._render(this._data,"zalertdialog",null,null,document.body,{})),this.container[0].id=a.id||this._dialogId,this.container.addClass(this._data.className),a.customAttributes&&this.container.attr(a.customAttributes);var s=this.container.find(".zbutton");s.not(".zbutton--help").on("click.zalertdialog",this._clickHandler.bind(this));for(var r=s.not(".zbutton--action"),d=r.length,c=0;c<d;c++)t._handleFocus(n(r[c]),"zalertdialog");a.suppressionDecisionBox&&this._handleSuppression(),o&&this._handleTitleBar()}},{key:"_clickHandler",value:function(t){for(var d,a=n(t.target).closest(".zbutton"),o=this._data.buttons,l=o.length,s=a.attr("id"),r=0;r<l;r++)o[r].id&&o[r].id===s&&(d=o[r]);var c={button:a,properties:d,buttonOptions:d};"zalertbutton--close"===s&&(c.buttonType="CLOSE",c.closeButton=!0),d&&d.action&&"string"!=typeof d.action?d.action(t,c):this.close(t,c),t.stopPropagation(),t.preventDefault()}},{key:"_createFooter",value:function(){var n,l,a=this._getButtons(),o={};for(var i in a)a.hasOwnProperty(i)&&(n=(o=a[i]).text,o.id=o.id||this._getID()+t.getID(),o.templateRender=!0,o.role=o.type="button",o.contentType=""===n||void 0===n||null===n?"icon":"text",o.tabIndex=o.tabIndex||0,l=o.action,o.className="zbutton zbutton--"+(o.appearance||"normal")+(l&&"string"==typeof l&&"CANCEL"===l?" zh--clickonescape":""));this._data.buttons=a;var s=this._opts.commandBar||{};s.componentName=this.name;var r=this._opts.buttonsAlignment;s.className="zdialog__footer ".concat("right"===r?"":this._getAlignCls(r)),this._data.commandBar=s,this._opts.helpButton&&this._setHelpButton()}},{key:"_getString",value:function(a){return t.getI18NText("zalertdialog",a,this._opts.labels,[])}},{key:"_getButtons",value:function(){var a=this._opts,o={CANCEL:{actionType:"CANCEL",id:"zc-zdialog-cancel",text:a.cancelButtonLabel||this._getString("cancel"),action:"CANCEL",name:"cancel",isCancel:!0},OK:{actionType:"OK",id:"zc-zdialog-ok",text:a.OKButtonLabel||this._getString("ok"),appearance:"primary",name:"ok"},NO:{actionType:"NO",id:"zc-zdialog-no",text:a.noButtonLabel||this._getString("no"),action:"CANCEL",isCancel:!0,name:"no"},YES:{actionType:"YES",id:"zc-zdialog-yes",text:a.yesButtonLabel||this._getString("yes"),appearance:"primary",name:"yes"}},n=a.buttonsOrder||(t.OS.isWindows()?"windows":"mac");o={OK:o.OK,CANCEL:o.CANCEL,YES:o.YES,NO:o.NO},"mac"===n&&(o={CANCEL:o.CANCEL,OK:o.OK,NO:o.NO,YES:o.YES});var l=a.buttons;if(!l)return"custom"===a.type||"confirm"===a.type?[o.CANCEL,o.OK]:[o.OK];if("object"===_typeof(l))return a.buttons;if("string"==typeof l){var s=[],r=0,d=l.split("-");for(var c in o)-1!==d.indexOf(c.toLowerCase())&&(s[r]=o[c],r++);return s}}},{key:"_display",value:function(a){var o=!t.Browser.isIE||11<=t.Browser.getIEVersion();return this.container.css("display",a?"none":o?"flex":"block")}},{key:"_handleOpen",value:function(){var a=this,o=this._opts;o.open&&o.open({dialog:this.container,element:this.container,options:o}),void 0!==o.closeTimeout&&""!==o.closeTimeout&&window.setTimeout(function(){a.close({},{})},parseInt(o.closeTimeout)),this.container.attr("aria-expanded",!0),t.FocusHandler&&t.FocusHandler.init(this.container,o.excludeFocus),this._focusActionButton()}},{key:"_focusActionButton",value:function(){var t=this._opts.defaultActionButton;t?0!==t.indexOf("#")&&0!==t.indexOf(".")&&(t="button[data-text='".concat(t.toLowerCase(),"']")):t=".zbutton--primary";var a=this.container.find(t);a.length||(a=this.container.find("button:last")),a.focus()}},{key:"_createOverlay",value:function(){this._overlay=n("<div class='zdialog--overlay "+this._opts.overlayClassName+"' ></div>").attr("tabindex",1),this._hideBodyScroll(!0),t.zIndex+=2,document.body.insertBefore(this._overlay[0],this.container[0]),this._overlay.css("z-index",t.zIndex-1),this.container.css("z-index",t.zIndex);var a="."+this.name;this._overlay.on("keydown.".concat(a),function(t){t.stopPropagation(),t.preventDefault()}).on("mousedown.".concat(a),function(t){t.stopPropagation()})}},{key:"_hideBodyScroll",value:function(t){n("body")[t?"addClass":"removeClass"]("zh-overflowhidden")}},{key:"close",value:function(t,a,o){var l=this.container;l&&l.is(":visible")?(l.finish?l.finish():l.stop(!0,!0),(a=a||{actionType:"CLOSE",isCancel:!0}).element=l,a.options=this._opts,a.isSuppressed=this._opts.suppressionDecisionBox&&n("#zalert__suppression--box").prop("checked"),this._opts.beforeclose?!1!==this._opts.beforeclose(t,a)&&this._handleClose(t,a,o):this._handleClose(t,a,o)):o&&o.apply(this)}},{key:"_handleClose",value:function(t,a,o){this._opts.animation?this._closeAnimate(t,a,o):(this._display(!0),this._close(t,a,o)),this.container&&this._updatePopupList()}},{key:"_close",value:function(a,o,l){this.container.remove(),this._overlay&&this._overlay.remove(),n("body").find(".zdialog--overlay").length||this._hideBodyScroll(!1),t.zIndex-=2,a=a||{},n.extend(!0,o,{options:this._opts,button:n(a.target),event:a,element:this.container}),this._opts.close&&this._opts.close(a,o),this._overlay=this.container=void 0,l&&l.apply(this)}},{key:"_bindEvents",value:function(){var a=this,o=".".concat(this.name),l=this._opts;this.container.on("keydown".concat(o),function(o){if(o.keyCode===t.keyCode.ESCAPE){var i=a.container.find(".zh--clickonescape:first");i.length?window.setTimeout(function(){return i.trigger("click")},150):l.closeButton?a.container.find(".zdialog__actiongroup #zalertbutton--close").trigger("click"):a.close(o,{ESCAPE_PRESSED:!0})}else if(o.keyCode===t.keyCode.ENTER){var s=a.container.find(l.defaultActionButton||".zbutton--primary");n(o.target).closest(".zbutton:not(.zbutton--menu), input:not(.ztokenfield):not(.zsuggestfield-element):not([type=checkbox]), div.zdialog__header").length&&s.length&&!n(o.target).closest(".zdialog__footer").length&&s.trigger("click")}}).on("click".concat(o),function(t){t.stopPropagation()}),this.container.find(".zdialog__header").length&&this.container.find(".zdialog__header").on("mouseup".concat(o),function(){return a._focusActionButton()});var i=(l.helpButton||{}).action;i&&n("#zalert--helpbutton").on("click",function(){return i()})}},{key:"_setHelpButton",value:function(){var a=this._opts;this._data.helpButton=t.ZButton.getBtnProps({id:"zalert--helpbutton",className:"zbutton--help",title:a.helpButtonLabel||this._getString("help"),iconClassName:"zdialog__icon "+a.helpIconClassName,templateRender:!0,SVGIconId:a.helpSVGIconId||(a.helpIconClassName?"":"zc__svg--help zdialog__svg grayscale"),customAttributes:a.helpButton.customAttributes||{},action:a.helpButton.action})}},{key:"_closeButton",value:function(){var a=this._opts;this._data.closeButton=t.ZButton.getBtnProps({id:"zalertbutton--close",title:a.closeButtonLabel||this._getString("close"),className:"zbutton--action",iconClassName:a.closeIconClassName,templateRender:!0,SVGIconId:a.closeSVGIconId,customAttributes:{tabindex:-1},defaultSVGIconId:"zc__svg--close zbutton__svg"})}},{key:"_setIcon",value:function(){var i,s,r,a=this._opts,o=a.type,n=!0,l="custom"===o?"zdialog__svg":"zc__svg--".concat(o," zdialog__svg ").concat(o,"color");a.iconClassName||a.SVGIconId?(i=a.iconClassName,s=a.SVGIconId):"custom"===o?n=!1:(i=a["".concat(o,"IconClassName")],s=a["".concat(o,"SVGIconId")]),n&&(r=t._getIconInfo(i,s,l,"zdialog__icon"),this._data.iconClassName=r.iconClassName,this._data.SVGIconClassName=r.SVGIconClassName||a.SVGIconClassName,this._data.SVGIconId=r.SVGIconId),this._data.alertIcon=n}},{key:"_closeAnimate",value:function(a,o,n){var l=this,i=this._opts.animation.close,s=i.className,r=i.name,d=i.duration?i.duration:0;s?this.container.addClass(s).on(t._animationEnd,function(){l.container.removeClass(s),l._display(!0),l._close(a,o,n)}):"object"===_typeof(r)?this.container.animate(r,d,function(){return l._close(a,o,n)}):this.container[r](d,function(){return l._close(a,o,n)})}},{key:"_openAnimate",value:function(){var a=this,o=this._opts.animation.open,n=o.className,l=o.name,i=o.duration?o.duration:0;n?this._display().addClass(n).on(t._animationEnd,function(){a.container.removeClass(n).off(t._animationEnd),a._handleOpen()}):"object"===_typeof(l)?this._display().animate(l,i,this._handleOpen):this.container[l](i,this._handleOpen.bind(this))}},{key:"_setPosition",value:function(){var a=this.container,o=this._opts,l=o.position;o.width&&a.outerWidth(o.width),o.height&&a.outerHeight(o.height);var i=a.outerWidth(!0)+parseInt(a.css("border-left-width"))+parseInt(a.css("border-right-width")),s=a.outerHeight(!0)+parseInt(a.css("border-bottom-width"))+parseInt(a.css("border-top-width")),r=this._getGoldenMeanPosition(a);"object"===_typeof(l)&&(l.left||l.top)?((r=n.extend({},r,l)).left=parseInt(r.left)+window.pageXOffset,r.top=parseInt(r.top)+window.pageYOffset):"center"===l&&(r.top=t.windowObject.height/2-s/2+window.pageYOffset,r.left=t.windowObject.width/2-i/2+window.pageXOffset),a.css(r)}},{key:"_getGoldenMeanPosition",value:function(t){var a=document.documentElement.clientHeight,o=document.documentElement.clientWidth,n=a/2,l=n-n/1.618-parseFloat(t.height()/2),i=o/2-parseFloat(t.width()/2);return 0>l&&(l=0),0>i&&(i=0),{top:l+window.pageYOffset,left:i+window.pageXOffset}}},{key:"_handleSuppression",value:function(){var t=this,a=this._opts;this.container.find("#zalert__suppression--box").on("change",function(){if(a.suppressAlert){var o=n("#zalert__suppression--box").prop("checked"),l=t._getID();document.cookie=l+"="+o}})}},{key:"_draggable",value:function(){t.draggable(this.container,{ignore:".zdialog__actiongroup",handle:".zdialog__header",cursor:"default",container:"window"})}},{key:"_updateTitleInfo",value:function(){var a=this._opts;this._data.title=a.isHTMLEncoded||a.isTitleHTMLEncoded?a.title:t.encodeHTML(a.title),this._data.titleBar=!0,a.closeButton&&this._closeButton()}},{key:"_handleTitleBar",value:function(){var a=this;this.container.find("#zalertbutton--close").on("click",function(t){a.close(t,{button:n(t.target),buttonType:"CLOSE",closeButton:!0})}),this._opts.draggable&&t.draggable&&this._draggable()}},{key:"_getAlignCls",value:function(t){return this._ALIGNMENTS[t]}},{key:"DEFAULTS",get:function(){return{rtl:!1,type:"custom",buttonsAlignment:"right",isHTMLEncoded:!1,isTitleHTMLEncoded:!1,isMessageHTMLEncoded:!1,className:"",closeButton:!1,icon:void 0,draggable:!0,labels:{cancel:"Cancel",no:"No",ok:"OK",yes:"Yes",close:"Close",help:"Help",suppressionMessage:"Do not show this message again."},suppressAlert:!0,overlayClassName:"",closeIcon:void 0,helpIcon:void 0,helpIconClassName:"",OKButtonLabel:void 0,cancelButtonLabel:void 0,yesButtonLabel:void 0,noButtonLabel:void 0,closeButtonLabel:void 0,helpButtonLabel:void 0,suppressionDecisionBoxLabel:void 0,excludeFocus:".zbutton--action"}}},{key:"_ALIGNMENTS",get:function(){return{left:"zdialogfooter--invert",right:"",center:"zh-center"}}}]),o}();t.AlertDialog=window.ZAlertDialog=N,t.zalertdialog={Templates:{}},function(t){var a=t.zbutton.Templates.container,o=t.zalertdialog.Templates,n=t.Templates.Utilities;o.container=function(t){return ZT.html(zc0tO194(),t.children&&o.children(t))},o.children=function(t){return ZT.html(zc0tO195(),t.titleBar&&ZT.html(zc0tO196(),t.title&&ZT.html(zc0tO197(),ZT.customHTML(t.title)),t.closeButton&&ZT.html(zc0tO198(),a(t.closeButton))),t.alertIcon&&ZT.html(zc0tO199(),n.icon(t)),t.primaryMessage&&ZT.html(zc0tO200(),ZT.customHTML(t.primaryMessage)),t.secondaryMessage&&ZT.html(zc0tO201(),ZT.customHTML(t.secondaryMessage)),t.suppressionDecisionBoxLabel&&ZT.html(zc0tO202(),t.suppressionDecisionBoxLabel),t.commandBar&&ZT.html(zc0tO203(),t.commandBar.className,t.helpButton&&ZT.html(zc0tO204(),a(t.helpButton)),t.buttons.map(function(t){return a(t)})))}}(ZPeopleComponents),window.ZAlertBanner=t.AlertBanner={show:function(a){"string"==typeof a&&(a={message:a}),a.createdByShowMethod=!0;var o=a.id=a.id||t.getID("zalertbanner"),l=t.createAlertBanner(a);return a.isCE?l[0].show():t.alertbanner(l).show(),n(l).attr("id",o),o},hide:function(a,o){n(a).toArray().forEach(function(a){"Z-ALERTBANNER"===a.tagName?a[0].hide(o):t.alertbanner(a).hide(o)})}};var H=function(a){function o(){return _classCallCheck(this,o),_possibleConstructorReturn(this,_getPrototypeOf(o).apply(this,arguments))}return _inherits(o,t.CoreComponent),_createClass(o,[{key:"_init",value:function(){clearTimeout(this._autoHideTimer);var a=t.Browser.getIEVersion(),o=this.element[0].childNodes;this.isCE&&!this._opts.message&&o.length&&(this._data.messageDOM=_toConsumableArray(o)),this._data.isIE=-1!==a&&10>a,this._validate()}},{key:"_validate",value:function(){var a=this._opts,o=this._data,n=a.margin||{},l="_getIcon",i=a.type,s=a.hideDelay,r=a.closeButton;a.hideOnClick=!r&&a.hideOnClick,a.hideDelay=this._hideDelay=parseInt(/(undefined|null)/.test(s)?r?0:5e3:s);var d="inline"===a.display?0:10;if(("number"==typeof n||"string"==typeof n)&&(d=parseInt(n),d=Number.isNaN(n)?0:n,n={}),["left","right","top","bottom"].forEach(function(t){/(undefined|null)/.test(n[t])&&(n[t]=d)}),a.margin=n,o.closeButton=!1,r&&(o.closeButton=t._getIconInfo(a.closeIconClass||a.closeIconClassName,a.closeSVGIconId,"zc__svg--close zalertbanner__svg","zalertbanner__icon"),o.closeText=this._getI18NText("close")),o.icon=a.icon,o.type=i,o.IconClassName=o.IconClass=o.SVGIconId=o.SVGIconClassName=null,a.icon){"custom"===i&&(l="_customIcon");var c=this[l](a,i);t._getIconInfo(c.iconClass,c.SVGIconId,"zc__svg--"+i+" zalertbanner__svg"," zalertbanner__icon",o)}var _=a.message;_&&(_=a.isMessageHTMLEncoded?_:t.encodeHTML(_),o.messageDOM=""),!_&&o.messageDOM&&(_=null),o.message=_}},{key:"_postRender",value:function(){this.container.attr({id:"".concat(this.element[0].id,"-container"),role:"status"}).hide(),this._opts.createdByShowMethod&&this._handleOpen()}},{key:"_postEachRender",value:function(){var t=this,a=this._opts,o="click."+this.name;a.closeButton&&this.container.find(".zalertbanner__close").off(o).on(o,function(a){return t.hide(!1,a)}),this._data.className="zalertbanner "+("custom"===a.type?"":"zalertbanner--"+a.type)+" "+(a.className||a.zclassName||"")+" "+(a.rtl?"zh-rtl":"")}},{key:"_setStyles",value:function(){var t=this.container[0].style,a=this._opts.width;"none"!==a&&(this.container.css({width:"",display:""}),a?t.width=a:"inline"===this._opts.display&&(t.width=this.container.outerWidth()+1+"px")),"inline"!==this._opts.display&&(t.position=(this._target||this.container.parent()).is("body")?"fixed":"absolute")}},{key:"_bindEvents",value:function(){var t=this._opts,a="click."+this.name;t.hideOnClick&&this.container.off(a).on(a,this.hide.bind(this)),t.pauseOnMouseOver&&t.hideDelay&&this._pauseOnHover()}},{key:"_setHideTimer",value:function(){var t=this._opts.hideDelay;t&&(clearTimeout(this._autoHideTimer),this._startTimer=(new Date).getTime(),this._autoHideTimer=setTimeout(this.hide.bind(this),t))}},{key:"_showHandler",value:function(){this._trigger("show"),this._setHideTimer()}},{key:"_closeHandler",value:function(t){this._trigger("hide",t)}},{key:"_trigger",value:function(t,a){return this._dispatchEvent(t,a)}},{key:"show",value:function(){this._trigger("beforeshow")&&(clearTimeout(this._autoHideTimer),this._setStyles(),this._setPosition(),this.container.hide(),this._showHide(),this._updatePopupList(!0))}},{key:"_showHide",value:function(a,o,n){var l=this,i=a?void 0:this._opts.animation,s=function(){l._display(o,l.container),o?l._closeHandler(n):l._showHandler()};"object"===_typeof(i)&&!t.isEmpty(i)&&t.animationHandler?this._animate(this.container,i,o?"hide":"show",s):s()}},{key:"hide",value:function(t){this._trigger("beforehide")&&(clearTimeout(this._autoHideTimer),this._showHide(t,!0),this._updatePopupList())}},{key:"_destroy",value:function(){this.container.empty(),clearTimeout(this._autoHideTimer),clearTimeout(this._startTimer),this._animate=this._target=this._opts=void 0}},{key:"_pauseOnHover",value:function(){var t="."+this.name;this.container.on("mouseenter"+t,this._pauseTimer.bind(this)).on("mouseleave"+t,this._setHideTimer.bind(this))}},{key:"_pauseTimer",value:function(){this._startTimer&&(clearTimeout(this._autoHideTimer),this._hideDelay-=(new Date).getTime()-this._startTimer,this._startTimer=void 0)}},{key:"_inlinePosition",value:function(){var t=this._opts,a=t.margin,n=(t.position,{});return a.top&&(n["margin-top"]=a.top),a.bottom&&(n["margin-bottom"]=a.bottom),n}},{key:"_getTarget",value:function(t){var o,a=t.displayAfter||t.displayBefore;return a&&(o=t.displayAfter?"insertAfter":"insertBefore"),{target:a||t.displayInside,action:o}}},{key:"_getIcon",value:function(t,a){return{iconClass:t[a+"IconClass"]||t[a+"IconClassName"],SVGIconId:t[a+"SVGIconId"]}}},{key:"_setPosition",value:function(){var t=this._opts,a={left:"",right:"",top:"",bottom:""};this.container.css(a);var o=this._getPosition();for(var n in a)t[n]&&(o[n]=t[n]);this.container.css(o)}},{key:"_getDimension",value:function(t){var a=this.container[t?"outerHeight":"outerWidth"]();return this.container.css({left:"auto",top:"auto"}),a}},{key:"_getPosition",value:function(){var t=this._opts,a=t.margin,o=this._getRTLBasedDir(t.align),n={},l=parseInt(a[this._getRTLBasedDir(o)]);return n=this["_"+t.display+"Position"](o,l),"left"===o?n.left=l:"right"===o?"fixed"===t.display?n.right=l:n.left="calc(100% - ".concat(this._getDimension()+l,"px)"):n.left="calc(50% - ".concat(this._getDimension()/2,"px)"),n}},{key:"_fixedPosition",value:function(t){var a=this._opts,o=a.margin,n=a.position,l={};return/^(top|bottom)$/.test(n)?l[n]=parseInt(o[n]):l.top="calc(50% - "+this._getDimension(!0)/2+"px)",this.container.attr("data-position",n+"-"+t),l}},{key:"_handleOpen",value:function(){var a=this._opts,o={},l="inline"===a.display;l&&(o=this._getTarget(a));var i=o.action||"appendTo",s=n(o.target||a.target);this.container[i](s),this._target=s;var r=s.data("previous-bannerId");if(r){var d=a.animation||{},c=n("#"+r),_=n("#".concat(r,"-container"));_.finish?_.finish():_.stop(!0,!0),_.is(":visible")&&_.length&&(c.is("z-alertbanner")?c[0].hide(!0):t.alertbanner(c).hide(!0),l&&d.show&&(d.show=!1))}s.data("previous-bannerId",this.element[0].id)}},{key:"_closeHandler",value:function(t){var a=this.container,o=this._target;this._opts&&this._opts.createdByShowMethod?(o.data("previous-bannerId")===this.element[0].id&&o.removeData("previous-bannerId"),this._trigger("hide",t),a&&a.remove(),this._destroy(),this.element.remove()):this._trigger("hide",t)}},{key:"_animate",value:function(a,o,n,l){t.animationHandler({element:a,action:"none"===n||"hide"===n?"hide":"show",callback:l,ctype:this.name,animation:o})}},{key:"_setAttribute",value:function(t,a){var o=this.container,l=o.is(":visible"),i=this._opts,s=!0,r=i[t];/(target)$/.test(t)?("target"===t&&n(this._target).removeData("previous-bannerId"),this._target=void 0,i[t]=a,s=!1):/(icon|closeButton|type|closeIconClassName|closeSVGIconId|IconClassName|SVGIconId|message|isMessageHTMLEncoded)$/.test(t)?(i[t]=a,this._validate(r)):/(display)/.test(t)?(i[t]=a,s=!1,o.css("position",""),l&&(this._setStyles(),this._setPosition())):/(margin|left|right|top|bottom)/.test(t)?(i[t]=a,s=!1,this._validate(),l&&this._setPosition()):/(hideDelay|hideOnClick|pauseOnMouseOver)/.test(t)&&r!==a?(i[t]=a,s=!1,this._validate(),o.off("."+this.name),this._bindEvents()):/(className|zclassName)/.test(t)?(this._updateClass(a,r),i[t]=a):"animation"===t&&"object"===_typeof(i.animation)&&"object"===a?n.extend(!0,i.animation,a):i[t]=a,"message"===t&&this._setPosition(),s&&(this._domChanged=!0)}},{key:"name",get:function(){return"zalertbanner"}},{key:"attrs",get:function(){return{type:"info",icon:!1,iconClass:null,SVGIconId:null,errorIconClass:null,errorSVGIconId:null,successIconClass:null,successSVGIconId:null,warningIconClass:null,warningSVGIconId:null,infoIconClass:null,infoSVGIconId:null,message:null,isMessageHTMLEncoded:!1,position:"top",align:"center",hideDelay:null,closeButton:!1,closeSVGIconId:null,closeIconClass:null,display:"fixed",target:"body",displayAfter:null,displayBefore:null,displayInside:null,hideOnClick:!1,left:null,right:null,bottom:null,top:null,width:null,pauseOnMouseOver:!1}}},{key:"props",get:function(){return{margin:null,errorIconClassName:null,successIconClassName:null,warningIconClassName:null,infoIconClassName:null,closeIconClassName:null,iconClassName:null,animation:{},labels:{close:"Close"}}}},{key:"EVENTS",get:function(){return["show","hide","beforeshow","beforehide"]}}]),o}();t.registerComponent("ZAlertBanner",H),function(t){var a=t.zalertbanner.Templates,o=t.Templates.Utilities;a.container=function(t){return ZT.html(zc0tO205(),t.className,t.children&&a.children(t))},a.children=function(t){return ZT.html(zc0tO206(),t.isIE&&ZT.html(zc0tO207()),t.icon&&o.icon(t),t.isIE&&a.closeButton(t),t.type&&ZT.html(zc0tO208(),t.messageDOM,ZT.customHTML(t.message)),!t.isIE&&a.closeButton(t))},a.closeButton=function(t){return ZT.html(zc0tO209(),t.closeButton&&ZT.html(zc0tO210(),t.closeText,o.icon(t.closeButton)))}}(ZPeopleComponents);var V=function(a){function o(){return _classCallCheck(this,o),_possibleConstructorReturn(this,_getPrototypeOf(o).apply(this,arguments))}return _inherits(o,t.CoreComponent),_createClass(o,[{key:"_init",value:function(a,o){var n=this.isCE,l=this._data,i=o.width,s=a.attr("title");if(s&&!n&&(o.title=s),"none"===i)o.width=null;else{if(!(i=parseInt(i)==i?i+"px":i)){var r=a.outerWidth();i=(r=r&&r+"px")||null}l.width=i,i&&(l.style="width:"+i)}l.tabindex=a[0].getAttribute("tabindex")||0,l.attrs={tabindex:-1},l.spinButtons="none"!==o.spinButtons,l.spinButtons&&this._getSpinBtnProps(),l.clearButton="none"!==o.clearButton,l.clearButton&&this._getClearBtnProps(),n||(l.id=this._getID(a)+"-container"),this._addedByComponent=this.isCE,o.required&&(l.required=o.required,l.hiddenInputName=t.getName(a,o))}},{key:"_postRender",value:function(){var t=this._data,a=this._opts,o=a.readonly,n=(o||a.disabled?" is-disabled":"")+(o?" is-readonly":"");t.className+=" zinputfield "+n,this._input=this.container.find(".zinputfield__textbox"),a.placeholder&&this._input.attr("placeholder",a.placeholder),this._addedByComponent=!this.isCE}},{key:"_postEachRender",value:function(){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this._data,a=t.modifiedAttr,o=this._opts,n=t.spinButtons;t.clearButton&&(!a||"clearButton"===a)&&this._updateClearBtn(),(!a||-1<["spinButtons","spinButtonsOrientation"].indexOf(a))&&(n?this._updateSpinButtons():this._data.className+=" zinputfield--spinbtnnone"),a&&"spinButtonsType"===a&&(this._input=this.container.find(".zinputfield__textbox"),this._bindEvents(),this._updateSpinButtons(),this._setValue(this._opts.value)),!n||t.isVertical||a&&0!==a.indexOf("spinButtons")||(this._data.className+=" zinputfield--split"),t.clearButton&&"always"===o.clearButton&&(!a||"clearButton"===a)&&(this._data.className+=" zinputfield--withclrbtn",(!o.value||o.readonly||o.disabled)&&this._toggleBtnDisplay(!0,!0)),(t.spinButtons||t.clearButton)&&this._bindContainerEvents(),t.modifiedAttr=void 0}},{key:"_toggleBtnDisplay",value:function(t,a,o){(o?this._clearButton.add(this._buttonPane):a?this._clearButton:this._buttonPane)[t?"addClass":"removeClass"]("zh-dnone")}},{key:"_bindContainerEvents",value:function(){this._addEvents({containerHover:"mouseenter mouseleave",containerFocusIn:"focusin"})}},{key:"_containerHoverHandler",value:function(t){var a=this._opts,o=this._data;if(!a.readonly&&!a.disabled){var n="mouseenter"===t.type,l=!n&&this.container.hasClass("has-focus"),i=this._opts,s=o.clearButton&&"focus"===i.clearButton&&this._input.val().length,r=o.spinButtons&&"focus"===i.spinButtons;(s||r)&&!l&&(n?this._data.className+=(s?" zinputfield--withclrbtn":"")+(r?" zinputfield--spinbtnonfocus":""):this._updateClass("",(s?"zinputfield--withclrbtn":"")+(r?(s?"|":"")+"zinputfield--spinbtnonfocus":"")),this._toggleBtnDisplay(!n,s,s&&r,t.type))}}},{key:"_containerFocusInHandler",value:function(t){t.stopPropagation()}},{key:"resetWidth",value:function(){this.isCE||this.container.outerWidth(this.element.outerWidth())}},{key:"focus",value:function(){this._input.focus()}},{key:"_getBtnProps",value:function(a,o,n){var l=this._opts,i=this._getI18NText(a);return t.ZButton.getBtnProps({className:n,templateRender:!0,defaultIconClassName:"zinputfield__icon",iconClassName:l[a+"ButtonIconClass"]||l[a+"ButtonIconClassName"],SVGIconId:l[a+"ButtonSVGIconId"],defaultSVGIconId:o+" zbutton__svg zinputfield__svg",customAttributes:{tabindex:-1,"aria-label":i,title:i}})}},{key:"_destroy",value:function(){var a=this.name;this._input.off(".".concat(a)),this._input=this._clearButton=this._buttons=this._buttonPane=void 0,this.isCE&&this.element.removeClass(this._data.className).empty(),t.$document.off(".".concat(a))}},{key:"_setAttribute",value:function(t,a){var o=this.container,n=this._opts,l=this._input;if("title"===t)o[0].setAttribute("title",a);else if("placeholder"===t)l.attr("placeholder",a);else if("width"===t)o.outerWidth(a);else if("maxLength"===t)l[a?"attr":"removeAttr"]("maxlength",a);else if(-1<t.indexOf("clearButton"))this._domChanged=!0,this._handleClearBtn(t,a,n);else if(/incrementButton|decrement|spinButtons/g.test(t))this._domChanged=!0,this._handleSpinBtns(t,a,n);else if("readonly"===t)this._updateClass(a?"is-readonly is-disabled":"",a?"":"(is-readonly"+(n.disabled?"":"|is-disabled")+")"),a?l.attr({readonly:!0,"aria-readonly":!0}):l.removeAttr("readonly aria-readonly");else if("required"===t){this._opts.value||this._setInitialValue()}}},{key:"_disable",value:function(t){_get(_getPrototypeOf(o.prototype),"_disable",this).call(this,t,void 0,!t&&this._opts.readonly);var a=this._input;t?a.attr({disabled:!0,"aria-disabled":!0}):a.removeAttr("disabled aria-disabled")}},{key:"_getClearBtnProps",value:function(){this._data.clearButtonProps=this._getBtnProps("clear","zc__svg--clear","zinputfield__clearbutton",this._clearButton&&this._clearButton[0])}},{key:"_updateClearBtn",value:function(){var t=this._clearButton=this.container.find(".zinputfield__clearbutton"),a=this._data.clearButtonProps;"focus"===this._opts.clearButton&&this._toggleBtnDisplay(!0,!0),a.mainElement=t[0],t.attr(a.attrs),this._bindClearBtnEvents()}},{key:"_bindClearBtnEvents",value:function(){var t=this._clearButton;this._addEvents({cBtnMouse:"mousedown mouseup",cBtnClick:"click"},t)}},{key:"_cBtnMouseHandler",value:function(t){this._mouseDown="mousedown"===t.type}},{key:"_cBtnClickHandler",value:function(){var t=this._opts;t.disabled||t.readonly||(t._lastValue=t.value,this._input.val("").focus(),this._toggleBtnDisplay(!0,!0))}},{key:"_handleClearBtn",value:function(t,a,o){var n=this._data;o[t]=a,n.clearButton="none"!==o.clearButton,n.clearButton?(this._getClearBtnProps(),"clearButton"===t&&(n.modifiedAttr=t)):(this._updateClass("","zinputfield--withclrbtn"),this._clearButton=void 0)}},{key:"_getSpinBtnProps",value:function(){var i,s,t=this._data,a=this._opts,o=a.spinButtonsOrientation||a.spinButtonsType,n=this._getBtnProps.bind(this),l=this._getSpinIconInfo.bind(this);t.isVertical="vertical"===o||"together"===o,t.attrs.role="spinbutton",i=l("increment",t.isVertical),s=l("decrement",t.isVertical),t.incrementProps=n("increment",i[0],i[1],this._buttons&&this._buttons[0]),t.decrementProps=n("decrement",s[0],s[1],this._buttons&&this._buttons[1])}},{key:"_getSpinIconInfo",value:function(t,a){return["zc__svg--"+(a?"":"horizontal")+t+(a?"":" zh-arrowicon"),"zinputfield__spinbutton"+("increment"===t?" zh-up":" zh-down")]}},{key:"_updateSpinButtons",value:function(){var a=this._opts.spinButtons,o=this.container,l=this._data;this._buttonPane=o.find(".zinputfield__spinbuttonpane"),this._buttons=o.find(".zinputfield__spinbutton");var s,i=+l.isVertical;s=l.incrementProps.mainElement=this._buttons[+!i],n(s).attr(l.incrementProps.attrs),s=l.decrementProps.mainElement=this._buttons[i],n(s).attr(l.decrementProps.attrs),this._toggleBtnDisplay("focus"===a&&!0),this._bindSpinButtonEvents()}},{key:"_handleSpinBtns",value:function(t,a,o){var n=this._data;o[t]=a,"spinButtonsType"===t&&"focus"===o.spinButtons&&(o.spinButtons="always"),n.spinButtons=a="none"!==o.spinButtons,this._updateClass("","zinputfield--split|zdatetimefield|zdatetimefield--buttonsonhover|zinputfield--spinbtnonfocus|zinputfield--spinbtnnone"),-1<["spinButtons","spinButtonsType","spinButtonsOrientation"].indexOf(t)&&(n.modifiedAttr=t),a?this._getSpinBtnProps():this._buttons=this._buttonPane=void 0}},{key:"name",get:function(){return"zinputfield"}},{key:"attrs",get:function(){return{min:null,max:null,spinButtons:"always",locale:null,clearButton:"focus",clearButtonSVGIconId:null,clearButtonIconClass:null,width:null,value:null,spinButtonsType:"together",incrementButtonSVGIconId:null,incrementButtonIconClass:null,decrementButtonIconClass:null,decrementButtonSVGIconId:null,spinEventTriggerDelay:0,disabled:!1,readonly:!1}}},{key:"props",get:function(){return{incrementButtonIconClassName:null,decrementButtonIconClassName:null,clearButtonIconClassName:null,labels:{increment:"Increment Value",decrement:"Decrement Value",clear:"Clear"}}}},{key:"EVENTS",get:function(){return["focus","blur","change","spin","spinstart","spinend"]}}]),o}();t.registerComponent("ZInputField",V),function(t){var a=t.zinputfield.Templates,o=t.zbutton.Templates.container;a.container=function(t){return ZT.html(zc0tO211(),t.className,t.title,t.style,t.id,t.children&&a.children(t))},a.children=function(t){return ZT.html(zc0tO212(),t.hiddenInputName,t.tabindex,t.min,t.max,t.readonly,t.readonly,t.disabled,t.disabled,t.maxLength,t.clearButton&&o(t.clearButtonProps),t.spinButtons&&ZT.html(zc0tO213(),t.isVertical?o(t.incrementProps):o(t.decrementProps),t.isVertical?o(t.decrementProps):o(t.incrementProps)))}}(ZPeopleComponents);var L=function(o){function l(){return _classCallCheck(this,l),_possibleConstructorReturn(this,_getPrototypeOf(l).apply(this,arguments))}return _inherits(l,t.ZInputField),_createClass(l,[{key:"_setTimeZone",value:function(){this._timeZone=t.Date.timeZone=this._opts.timeZone||t.timeZone}},{key:"_getNewDate",value:function(){return this._timeZone?t.Date.changeTZOfDate(new Date,this._timeZone):new Date}},{key:"_postRender",value:function(){if(!this._invalidFormat){_get(_getPrototypeOf(l.prototype),"_postRender",this).apply(this,arguments);var a=this._opts,o=a.value,n=["value","min","max"],s=this._input;"ar"===a.locale&&s.addClass("zh-bidioverride"),o&&(this._viewDate=new Date(o.getTime()));for(var d,r=0;r<n.length;r++)a[d=n[r]]&&s.attr("aria-value"+("value"===d?"now":d),t.Date.formatDate(a[d],a.format));this._updateElementValue()}}},{key:"_postEachRender",value:function(t,a){var o=this._data.modifiedAttr;a.isVertical||o&&!(-1<o.indexOf("spinButtons"))||(this._data.className+=" zdatetimefield"),_get(_getPrototypeOf(l.prototype),"_postEachRender",this).call(this),this._data.rendered||this._disableSpinBtns()}},{key:"_changeFormat",value:function(t){if(this._formatChanged=!1,t.match("mmm"))this._formatChanged=!0,t=t.replace("mmm","MMM");else{var o=t.indexOf("mm"),n=t.lastIndexOf("mm"),l=t.match("hh")||t.match("HH");if(o!==n){l=l.index;var i=a(l-o)<a(l-n)?n:o;t=t.substring(0,i)+"MM"+t.substring(i+2),this._formatChanged=!0}else-1<o&&!l&&(t=t.replace("mm","MM"),this._formatChanged=!0)}return t}},{key:"_init",value:function(a,o){this._setTimeZone();var n=this._opts;n.format=this._changeFormat(n.format),this._format=n.format,this._setFormat(),_get(_getPrototypeOf(l.prototype),"_init",this).call(this,a,o),this._performValidations(),this._updateOldVal=!0,this._oldDateValue=new Date(this._viewDate.getTime()),this._isInit=void 0;var s=n.labels,r=t.localeInfo[n.locale];if(r)for(var d=["days","daysAbbreviated","monthsAbbreviated","months"],c=0,_=d.length;c<_;c++)s[d[c]]=r[d[c]]||s[d[c]]}},{key:"_disableSpinBtns",value:function(){var t=this._opts,a=this._buttonPane;"none"!==t.spinButtons&&(a.find(".zh-down")[(t.min&&+t.value==+t.min?"add":"remove")+"Class"]("is-disabled"),a.find(".zh-up")[(t.max&&+t.value==+t.max?"add":"remove")+"Class"]("is-disabled"))}},{key:"_setFormatVal",value:function(a,o,n){var l=this._format,s=this._opts,r=a.test(l),d=s.labels,c=s.locale,_=t.localeInfo[c];if(r){for(var u=["days","daysAbbreviated","months","monthsAbbreviated"],p=0;p<u.length;p++)d[u[p]]=_[u[p]];if(-1<o.indexOf("time"))for(var m=["AM","PM"],g=0;g<m.length;g++)d[m[g]]=_[m[g]]||this._DEFAULTS.labels[m[g]];var h=l.split("-");h[0]===o&&(l=l.replace(o,("datetime"===o?"dateTime":o)+"Format"));var v=_[(h=l.split("-"))[0]];l=v[h[1]],s.format=_&&v&&l?l:n}}},{key:"_performValidations",value:function(t,a){var o=this._opts;this._validateStep(t),this._validateFormat(),this._validateOptions();var n=this._compareDates.bind(this);n(o.max,o.min)&&(o.max=void 0),n(o.max,o.value)&&(o.value=o.max),n(o.value,o.min)&&(o.value=o.min),this._setBoolValue(a,!0,"Modified"),this._checkForModification(o.value)}},{key:"_validateOptions",value:function(){for(var l,s,t=this._opts,a=["min","max","value"],o=0,n=a.length;o<n;o++)(l=t[s=a[o]])&&(t[s]="string"==typeof l?this._getStringValue(l,t):l instanceof Date?l:void 0),"value"===s&&(this._viewDate=t[s]?new Date(t[s].getTime()):this._resetViewDate())}},{key:"_getStringValue",value:function(t,a){var n,o=a.format;if("TODAY"===t||"NOW"===t)n=this._getNewDate();else{var l=this._parseDateValue(t,o);l&&l.isValid&&(n=l.date)}return n&&(0>o.indexOf("h")&&0>o.indexOf("H")?n.setHours(0,0,0,0):0>o.indexOf("s")&&n.setSeconds(0,0)),n}},{key:"_resetViewDate",value:function(){var t=new Date(this._getNewDate().getFullYear(),0,1,0,0,0),a=this._compareDates.bind(this),o=this._opts,n=o.min,l=o.max;return n&&a(t,n)?new Date(+n):l&&a(l,t)?new Date(+l):t}},{key:"_selectText",value:function(t){var a=this._dateFormat;this._oldSegment=this._currentSegment;var o=a.lastIndexOf(t)+1,n=a.indexOf(t);0>n&&(n=0),this._currentSegment=t,"none"!==this._opts.spinButtons&&this._addDisabledClass(t),this._selectCaretPosition(this._input[0],n,o)}},{key:"_compareDates",value:function(t,a){if(t&&a)return t.getTime()<a.getTime()}},{key:"_parseDateValue",value:function(a,o){return t.Date._parseDateValue(a,o,this._opts.otherInputFormats)}},{key:"_selectCaretPosition",value:function(t,a,o){var n=void 0!==a;if(void 0===o&&(o=a),!n||!t.disabled){try{void 0!==t.selectionStart&&(n?(!this._isInit&&!this._bodyClick&&t.focus(),t.setSelectionRange(a,o)):a=[t.selectionStart,t.selectionEnd])}catch(t){throw t}return a}}},{key:"_bindEvents",value:function(){if(!this._invalidFormat){this._bindButtonEvents();var a=t.Browser.isIE&&9===t.Browser.getIEVersion(),o=t.Browser.isFirefox?"click":"mouseup";this._addEvents({containerMouseUp:o},this.container);var i={focus:"focus",mouseup:o,keyUp:a?"keyup":"input",change:"change",keydown:"keydown",spinKeyup:"keyup",focusOut:a?"blur":"focusout",paste:"paste",mouseWheel:"mousewheel DOMMouseScroll MozMousePixelScroll"};this._addEvents(i,this._input),this._input.on("contextmenu."+this.name,function(t){return t.preventDefault()})}}},{key:"_bindButtonEvents",value:function(){("focus"===this._opts.clearButton||"focus"===this._opts.spinButtons)&&this._addEvents({mouseEnter:"mouseenter",mouseLeave:"mouseleave"},this.container)}},{key:"_checkFormat",value:function(t){this._invalidFormat=t.test(this._opts.format)}},{key:"_destroy",value:function(){var a=this._clearButton,o=this.name;t.$window.off("keyup.".concat(o," keydown.").concat(o)),this.container.find(".zh-up,.zh-down").off("mousedown.".concat(o," mouseup.").concat(o)),a&&a.off("mousedown.".concat(o," mouseup.").concat(o)),_get(_getPrototypeOf(l.prototype),"_destroy",this).call(this),this._buttonPane=this._keyUp=this._keyUpTime=this._isFastInput=void 0}},{key:"getValue",value:function(){return{dateObject:this._opts.value,dateString:this._opts.value?this._input[0].value:void 0}}},{key:"_checkForModification",value:function(t){for(var a=this._opts.format,o=0;o<a.length;o++)this._isPartModified(a[o],!!t)}},{key:"setValue",value:function(t){t?(this._validateValue("value",t),this._viewDate=this._checkMinMaxLimit(this._viewDate),this._checkForModification(this._viewDate),this._updateElementValue(),+(t=this._getStringValue(t,this._opts))!=+this._oldDateValue&&this._setOldDate()):(this._clearActionHandler(),this._input[0].setSelectionRange(0,0)),this.container.hasClass("has-focus")||this._dispatchChange()}},{key:"formatDate",value:function(a,o){return t.Date.formatDate(a,o||this._opts.format)}},{key:"parseDate",value:function(t,a){return this._parseDateValue(t,a||this._opts.format)}},{key:"_resetValues",value:function(t,a){!isNaN(a)&&-1<["y","H","m","s"].indexOf(t)&&(this._viewDate["set".concat({y:"FullYear",H:"Hours",h:"Hours",m:"Minutes",s:"Seconds"}[t])](0),"m"===t&&(this._minutesModified=!1),("h"===t||"H"===t)&&(this._hoursModified=!1))}},{key:"_validateValue",value:function(a,o){var n=!0,l=this._opts,i=l.format;return"string"==typeof o?l[a]=this._getStringValue(o,l):o instanceof Date?l[a]=o:(n=!!this._oldValueOption,l[a]=void 0),o=l.value,0>i.indexOf("h")&&0>i.indexOf("H")&&o?o.setHours(0,0,0,0):o&&o.setHours(o.getHours(),o.getMinutes(),0>i.indexOf("s")?0:o.getSeconds(),0),"value"===a&&(o&&(this._viewDate=new Date(o.getTime())),this._hasPicker&&t[this._pickerMethods.instance](this._picker).setValue(o)),n}},{key:"_windowKeyupHandler",value:function(a){(a.keyCode===t.keyCode.TAB&&a.shiftKey||this._reverseShiftKey)&&!this._reverseFocusset?(this._reverseFocusset=this._focusout=!0,this._selectText(this._dateFormat.slice(-1))):(a.keyCode===t.keyCode.TAB||this._tabKey)&&!this._focusset&&(this._focusset=this._focusout=!0,t.OS.isLinux()&&this._input[0].setSelectionRange(0,0),this._mouseupHandler()),t.$window.off("keyup.".concat(this.name," keydown.").concat(this.name))}},{key:"_updateElementValue",value:function(){var t=this._getRegEx(),a=this._opts.format;this._retursFormat=!1;var o=a.replace(t,this._replaceMatchedText.bind(this));this._retursFormat=!0,this._dateFormat=a.replace(t,this._replaceMatchedText.bind(this)),this._oldValue=this._input[0].value=o,this._opts.value=this._getDateValue()?new Date(this._viewDate.getTime()):void 0}},{key:"_windowKeydownHandler",value:function(a){var o=t.keyCode.TAB,n=a.keyCode;this._reverseShiftKey=n===o&&a.shiftKey,this._tabKey=n===o}},{key:"_focusTimeoutHandler",value:function(){this._addEvents({windowKeydown:"keydown",windowKeyup:"keyup"},t.$window)}},{key:"_toggleBtnDisplay",value:function(t,a,o,n){var l=t,i=this._showOrHideBtn.bind(this);a&&((null===l||n)&&(l=this._checkForPartModification()),("mouseleave"===n||!n&&"focus"===this._opts.clearButton)&&!this.container.hasClass("has-focus")&&(l=!0),this._clearBtnShown=!l),l===t?i.apply(void 0,arguments):(a&&i(l,!0),o&&i(t))}},{key:"_showOrHideBtn",value:function(t,a,o){var n=(a?"zinputfield--withclrbtn":"")+(o||!a?(a?t?"|":" ":"")+"zinputfield--spinbtnonfocus":"");t?this._updateClass("",n):this._data.className+=" "+n,_get(_getPrototypeOf(l.prototype),"_toggleBtnDisplay",this).apply(this,arguments)}},{key:"_spinTimeoutHandler",value:function(t){this._dispatchChange(t,"spin")}},{key:"_setBoolValue",value:function(t,a,o){for(var n=t.length;0<=--n;)this["_"+t[n]+(o||"")]=a}},{key:"_focusOutHandler",value:function(a){if(this._hasPicker){var o=n(a.relatedTarget);if(o&&o.is(".zselectbox"))return}var l=this._opts;this._setBoolValue(["focusset","longPress","reverseFocusset","reverseShiftKey","tabKey"],!1),this._focusout=!0,window.getSelection().removeAllRanges(),this._viewDate=this._checkMinMaxLimit(this._viewDate,void 0,void 0,!1),this.container.removeClass("has-focus"),this._disableSpinBtns(),this._updateElementValue(),t.Browser.isIE||t.Browser.isSafari||t.OS.isLinux||(this._input[0].selectionStart=0),this._checkForChange(a,"change"),this._checkButtonsOptn("focus"===l.clearButton,"focus"===l.spinButtons,"hide","add","focusOut"),this._dispatchChange(a,"blur"),this._isCleared=!1}},{key:"_validateStep",value:function(t){for(var a=0,o=t.length;a<o;a++)0>=+this._opts[t[a]]&&(this._opts[t[a]]=1)}},{key:"_focusHandler",value:function(t){var a=this._opts;return!a.disabled&&(this.container.addClass("has-focus"),this._input[0].setSelectionRange(0,0),this._focusTimeout=setTimeout(this._focusTimeoutHandler.bind(this),10),!a.readonly&&this._checkButtonsOptn("focus"===a.clearButton,"none"!==a.spinButtons),this._clearBtnShown=!1,clearTimeout(this._clearButtonTimeout),this._clearButtonTimeout=setTimeout(this._isClearVisible.bind(this),1e3),void this._dispatchChange(t,"focus"))}},{key:"_checkButtonsOptn",value:function(t,a,o,n,l){var i=this._clearButton;n=(n||"remove")+"Class",t&&("focusOut"!==l&&i&&this._toggleBtnDisplay(null,!0,null,l),o&&this._toggleBtnDisplay("hide"===o,!0)),a&&this._buttonPane&&(this._toggleBtnDisplay("hide"===o,!1),this._opts.calendarIcon&&this.container[n]("zdatetimefield--buttonsonhover"),i&&i[n]("zh-right"))}},{key:"_mouseEnterHandler",value:function(){var t=this._opts;document.activeElement===this._input[0]||t.readonly||t.disabled||this._checkButtonsOptn("focus"===t.clearButton,"focus"===t.spinButtons,null,null,"mouseenter")}},{key:"_addEffect",value:function(){this._input.addClass("zeffects--skew"),clearTimeout(this._effectTimeout),this._effectTimeout=setTimeout(this._effectTimeoutHandler.bind(this),1e3)}},{key:"_effectTimeoutHandler",value:function(){this._input.removeClass("zeffects--skew")}},{key:"_getSegment",value:function(){var t=this._input[0],a=t.selectionStart,o=t.selectionEnd,n=this._checkForSegment(a,o-1);this._segment=a==o&&this._currentSegment||n}},{key:"_getPlaceholder",value:function(t){switch(this._opts.placeholderType){case"date-format":return this._formatChanged?/MMM/.test(t)?t.replace("MMM","mmm"):/MM/.test(t)?t.replace("MM","mm"):t:t;case"date-format-in-upper":return t.toUpperCase();case"date-format-in-lower":return t.toLowerCase();case"underscore":return Array(t.length+1).join("_ ");case"custom":return this._getCustomMatch(t)}}},{key:"_addDisabledClass",value:function(t){var a=this._opts,o=["down","up"],n=[-1,1];if(a.value)for(var s,l=0;l<o.length;l++)s=this._modifyPartValue(t,n[l],!0),this._getDisabledValue(a.min,a.max,n[l],s)||this.container.find(".zh-".concat(o[l])).removeClass("is-disabled")}},{key:"_getDisabledValue",value:function(t,a,o,n){var i,l=this._updateDisabledState.bind(this);return(i=t&&-1===o?l(t,n,void 0,o):void 0)||(i=a&&1===o?l(a,n,!0,o,i):void 0),i}},{key:"_checkPart",value:function(t){var a=this["_get"+(-1<this.name.indexOf("date")?"Date":"Time")+"Parts"]();return a[t]&&this["_".concat(a[t],"Modified")]}},{key:"_checkForPartModification",value:function(){for(var t=[],a=0,o=this._opts.format,n=!1,l=0;l<o.length;l++)t[a++]=this._checkPart(o[l]);for(;0<=--a;)if(t[a]){n=!0;break}return this._isClearVisible(),!n}},{key:"_parseValue",value:function(t,a){if(!a)return this._isPartModified(t,!1),!0;var o=new Date(this._viewDate.getTime());return(o=this._parseSegment(t,a,o))&&"boolean"!=typeof o&&(this._viewDate=o),!0}},{key:"_updateDisabledState",value:function(t,a,o,n,l){var r,i=this.container.find(".zh-".concat(1===n?"up":"down")),s=a.getTime();return t&&(!this._checkTime&&t.setHours(0,0,0,0),r=t.getTime()),t&&(o&&t?s>=r:s<=r)?(i.addClass("is-disabled"),!0):l}},{key:"_containerMouseUpHandler",value:function(t){var a=n(t.target);(a.closest(".zdatetimefield__icon").length||a.closest(".zdatetimefield__iconbutton").length)&&(t.preventDefault(),this._currentSegment?this._selectText(this._currentSegment):(this._selectCaretPosition(this._input[0],0,0),this._mouseupHandler()))}},{key:"_mouseLeaveHandler",value:function(){var t=this._opts,a=this._clearButton,o=this._buttonPane;document.activeElement!==this._input[0]&&("focus"===t.spinButtons&&(o&&this._toggleBtnDisplay(!0),a&&a.addClass("zh-right"),t.calendarIcon&&this.container.addClass("zdatetimefield--buttonsonhover")),"focus"===t.clearButton&&a&&this._toggleBtnDisplay(!0,!0,void 0,"mouseleave"))}},{key:"_spinKeyupHandler",value:function(a){this._keyUp=!0;var o=a.keyCode;o!==t.keyCode.LEFT&&o!==t.keyCode.RIGHT&&(this._checkForChange(a,"spinend"),this._checkForChange(a,"input"))}},{key:"_replaceMatchedText",value:function(t){var a=this._replaceText(t);if(a=void 0===a?t.slice(1,t.length-1):a,this._retursFormat){var o="",n=a.length;for(t=this._getMatch(t);n--;)o+=t[0];return o}return a}},{key:"_pasteTimeoutHandler",value:function(t,a){var o=this._parseDateValue(t,this._opts.format);o&&o.isValid&&(this._viewDate=o.date),this._checkForModification(o.isValid),this._updateElementValue(),this._selectCaretPosition(this._input[0],0,0),this._mouseupHandler(a),this._pasteAction=!1}},{key:"_mouseWheelHandler",value:function(t){var a=this._input,o=t.originalEvent;if(document.activeElement===a[0]){var n={preventDefault:function(){},type:"mousewheel"};if(this._keyUp||this._mousewheelTriggered||(this._keyUp=!0),this._mWheelTimer||(this._mWheelSpinStart=this._checkForChange(t,"spinstart")),this._mWheelSpinStart){this._mousewheelTriggered=!0;var l=this;clearTimeout(this._mWheelTimer),this._mWheelTimer=setTimeout(function(){l._checkForChange(t,"spinend"),l._checkForChange(t,"input"),l._mWheelTimer=l._mWheelSpinStart=void 0},250),t.preventDefault(),t.stopPropagation(),n.keyCode=(0===o.detail?0>o.wheelDelta:0<o.detail)?38:40,this._keydownHandler(n)}}}},{key:"_pasteHandler",value:function(t){this._pasteAction=!1;var n,a=t.originalEvent.clipboardData.getData("Text"),o=this._selectCaretPosition(this._input[0]);void 0!==o[0]&&void 0!==o[1]&&(n=o[1]-o[0]),n&&n===this._input[0].value.length?(this._pasteAction=!0,t.stopPropagation(),t.preventDefault(),this._input[0].value=a,clearTimeout(this._pasteTimeout),this._pasteTimeout=setTimeout(this._pasteTimeoutHandler.bind(this,a,t),500)):t.preventDefault()}},{key:"_modifyPartValue",value:function(t,a,o){var n=new Date(this._viewDate.getTime()),l=this._modifyValue(n,t,a,this._getDateValue());return o||(n=this._checkMinMaxLimit(n,l,a),this._isPartModified(t,!0),this._oldDateValue&&this._setOldDate(),this._viewDate=n,!this._oldDateValue&&this._setOldDate()),this._hasPicker&&(this._opts.pickerOptions.disabledDaysOfWeek||this._opts.pickerOptions.disabledDates)&&(this._oldDateValue&&this._setOldDate(),this._viewDate=this._checkForDisabledDates(this._viewDate,a),!this._oldDateValue&&this._setOldDate()),n}},{key:"_setOldDate",value:function(){if(this._updateOldVal){var a=this._oldDateValue,o=!!this._checkTime&&!t.Date.areTimesEqual(a,this._viewDate);a&&t.Date.areDatesEqual(a,this._viewDate)&&!o||(this._oldDateValue=new Date(+this._viewDate))}}},{key:"_mouseupHandler",value:function(t){this._isClearVisible();var a=this._selectCaretPosition(this._input[0]);a[0]===a[1]?this._selectText(this._checkForSegment(a[0],a[0]-1)):t&&"mouseup"===t.type&&window.getSelection().removeAllRanges()}},{key:"_checkForSegment",value:function(t,a){for(var o=this._allowedChars,n=this._dateFormat,l=n.length;t<l||0<=a;t++,a--){if(-1!==o.indexOf(n[t]))return n[t];if(0<=a&&-1!==o.indexOf(n[a]))return n[a]}}},{key:"_getStringDiff",value:function(t,a,o,n){this._isNewValue=!1;var r,l=n+t.length-o.length,s=[];t=t.substring(0,l);var d=(o=o.substring(0,n)).length,c=a[n-1];if(t===o&&0<n)return[[c,o[n-1]]];if(0===t.indexOf(o)&&(0===d||a[d-1]!==a[d])){var _="";for(r=d;r<t.length;r++)t[r]!==_&&0<=this._allowedChars.indexOf(a[r])&&(_=a[r],s.push([_,""])),this._resetToFirst(_);return s}var u=o[d-1];return/[ |/|.|-|;]/.test(u)||u===t[l]?[[a[n-1],u]]:(this._focusout&&(this._resetOnBlur(c),this._focusout=!1),this._isNewValue=!0,[[c,o[n-1]]])}},{key:"_checkForChange",value:function(t,a){var i,s,o=void 0===this._getDateValue(),n=this._viewDate,l=this._oldDateValue;if(o||1!==n.getDate()||0!==n.getMonth()||n.getFullYear()!==this._getNewDate().getFullYear()||0!==n.getHours()||0!==n.getMinutes()||0!==n.getSeconds()||(i=!0),-1<a.indexOf("spin")||"input"==a?"spin"===a?(clearTimeout(this._spinTimeout),this._spinTimeout=setTimeout(this._spinTimeoutHandler.bind(this,t),this._opts.spinEventTriggerDelay)):s=!0:(this._isCleared||!o&&(i||n&&l&&+l!=+n))&&(s=!0),s)return this._fromSetValue&&"change"==a&&(a=void 0),this._fromSetValue=void 0,this._dispatchChange(t,a)}},{key:"_changeHandler",value:function(){}},{key:"_dispatchChange",value:function(t,a){return"change"===(a||t&&t.type)&&this._setOldDate(),this._dispatchEvent(a||"change",t,this._getCurrentValue(a),void 0,!!a)}},{key:"_getCurrentValue",value:function(){return{value:this._opts.value?this._input[0].value:"",dateValue:this._opts.value}}},{key:"_keydownHandler",value:function(a){if(this._opts.disabled||this._opts.readonly)return!1;var c,o=t.keyCode,n=o.TAB,l=a.keyCode,i=a.shiftKey,s=this._selectCaretPosition.bind(this),r=this._input[0],d=this._dateFormat;if(l!==n||0===r.selectionStart&&i||r.selectionEnd===r.value.length&&!i||a.stopImmediatePropagation(),-1<[o.RIGHT,o.LEFT,n].indexOf(l)){l!==n&&a.preventDefault(),c=s(r),this._viewDate=this._checkMinMaxLimit(this._viewDate),this._isModified&&(this._updateElementValue(),s(r,c[0],c[1])),c[0]!==c[1]&&this._mouseupHandler();var _=l===o.LEFT?-1:1;l===n&&i&&(this._focusout=!0,_=-1),c=s(r);for(var u=-1==_?c[0]-1:c[1]+1,p=this._opts.format;0<=u&&u<d.length;){var m=d[u],g=p.lastIndexOf(m);if(0<=this._allowedChars.indexOf(m)){l===n&&(g!==p.length||g+1!==p.length)&&(a.preventDefault(),this._focusout=!0),this._reverseFocusset=-1===_,this._selectText(d[u]);break}u+=_}}if(l===o.UP||l===o.DOWN){a.preventDefault();var h=d[(c=s(r))[0]];0<=this._allowedChars.indexOf(h)&&(this._modifyPartValue(h,l===o.UP?1:-1),this._updateElementValue(),this._clearButton&&this._toggleBtnDisplay(null,!0),this._selectText(h)),this._checkForChange(a,this._keyUp?"spinstart":"spin"),this._keyUp=!1}if(a.metaKey||a.ctrlKey){var y,v=s(r);void 0!==v[0]&&void 0!==v[1]&&(y=v[1]-v[0]),(88===l&&y!==r.value.length||90===l)&&a.preventDefault()}}},{key:"_checkMinMaxLimit",value:function(t,a,o,n){var l=this._opts.min,i=this._opts.max;return n=void 0===n||n,this._isModified=!1,i&&(t=this._validateValues(i,t,a,o,n,!0)),l&&(t=this._validateValues(l,t,a,o,n)),t}},{key:"_validateValues",value:function(t,a,o,n,l,i){if(t){var d,c,_,u,p,s=this._getNewDate().getTime(),r=this._opts;d=t.getTime(),c=a.getTime(),_=i?d<s:d>s,(u=i?c>=d:c<=d)||o&&!this[o]&&_&&!n?(p=r.value?"add":void 0,this._isModified=!0,a=new Date((n&&c!==d?this._viewDate:t).getTime())):p=u?void 0:"remove",p&&l&&"none"!==r.spinButtons&&this.container.find(".zh-".concat(i?"up":"down"))["".concat(p,"Class")]("is-disabled")}return a}},{key:"_keyUpHandler",value:function(a,o){var n=a.keyCode;if("input"===a.type||"keyup"===a.type&&(186<=n&&192>=n||219<=n&&222>=n||48<=n&&57>=n||65<=n&&90>=n||-1<[32,8,46].indexOf(n))){var l=this._getNewDate().getTime(),s=this._dateFormat;if(this._isFastInput=!!(this._keyUpTime&&500>l-this._keyUpTime),this._keyUpTime=l,document.activeElement!==this._input[0])return void(this._pasteAction||this._updateElementValue());var u,r=this._getStringDiff(this._oldValue,s,this._input[0].value,this._selectCaretPosition(this._input[0])[0]),d=r.length,c=d&&/[ |/|.|-|;]/.test(r[0][1]),_=1===d&&c;if(this._isNewValue&&-1<this._allowedChars.indexOf(r[0][0])&&this._currentSegment!==this._oldSegment&&this._resetValues(r[0][0],r[0][1]),_)this._viewDate=this._checkMinMaxLimit(this._viewDate);else for(u=0;u<d;u++){var p=this._translateAToE(r[u][0]),m=this._translateAToE(r[u][1]);this._parseValue(p,m)}if(this._pasteAction||this._updateElementValue(),c=d&&/[ |/|.|-|;]/.test(r[0][0]),d&&!c&&(this._selectText(r[0][0]),this._isNextSegment)){var g=s.lastIndexOf(r[0][0])+1;if(g<s.length){for(;-1===this._allowedChars.indexOf(s[g])&&g<s.length;)g+=1;this._isNextSegment=!1,this._viewDate=this._checkMinMaxLimit(this._viewDate),this._pasteAction||this._updateElementValue(),this._selectText(s[g])}this._isNextSegment=!1}_?this._keydownHandler({keyCode:t.keyCode.RIGHT,preventDefault:function(){}}):!o&&this._checkForChange(a,"spin"),"none"!==this._opts.clearButton&&this._toggleBtnDisplay(null,!0)}}},{key:"_setAttribute",value:function(t,a){var u,p,o=this.name,n=this._opts,i=this._updateElementValue.bind(this),s=this._input,r="format"===t,d="value"===t,c=_get(_getPrototypeOf(l.prototype),"_setAttribute",this).bind(this),_=this._format;if(this._opts[t]=a,this._picker&&(p=this._getPicker()),r||d){if(d&&this._setValue(a),this._setBoolValue(["month","year","minutes","seconds","hours"],!0,"Modified"),r){if(this._format=a,this._setFormat(),this._validateFormat(),this._invalidFormat)return void(this._format=n.format=_);p&&p._setAttribute("format",n.format)}var m=n.value;this._checkForModification(m),this._viewDate=this._checkMinMaxLimit(m?new Date(m.getTime()):this._resetViewDate()),u=!0,i(),d&&!this.container.hasClass("has-focus")&&this._changeHandler(),d&&!a&&(this._isCleared=!0)}else if("min"===t||"max"===t){if(this._validateValue(t,a),this._performValidations(),this._viewDate=this._checkMinMaxLimit(this._viewDate),u=!0,p){var g=n[t],h=t+"Date";p.setAttribute(h,g),n.pickerOptions[h]=g}i()}else/increment|decrement|spinButtons/g.test(t)?("spinButtonsOrientation"===t&&this._updateClass("zinputfield--split","vertical"===a),c(t,a),a&&this._reConstructSpinButtons(a)):"placeholderType"===t?(n.placeholerType=-1===["date-format","underscore","date-format-in-upper","date-format-in-lower","custom"].indexOf(a)?"date-format":a,n.value||i()):"locale"===t?(this._setFormat(),i(),s[("ar"===a?"add":"remove")+"Class"]("zh-bidioverride")):"disabled"===t?(c(t,a),"none"!==n.clearButton&&(a?this._clearButton.off("mouseup.".concat(o," mousedown.").concat(o)):this._bindClearBtnEvents())):"rtl"===t?s[("ar"===n.locale?"add":"remove")+"Class"]("zh-bidioverride"):"timeZone"===t?(p&&p.setAttribute(t,a),this._setTimeZone(),this._reInit=!0):c(t,a);u&&(this._disableSpinBtns(),this._domChanged=!0)}},{key:"_setValue",value:function(a){var o=this._opts,n=this._input,l=this._validateValue("value",a);return a=o.value,this._performValidations(),l&&a&&(this._setOldDate(),this._viewDate=new Date(a.getTime()),n.attr("aria-valuenow",t.Date.formatDate(a,o.format))),a||n.removeAttr("aria-valuenow"),this._clearButton&&this._toggleBtnDisplay(null,!0),l}},{key:"_updateClearBtn",value:function(){_get(_getPrototypeOf(l.prototype),"_updateClearBtn",this).call(this),this._opts.value&&(this._clearBtnShown=!0,"focus"===this._opts.spinButtons&&this._clearButton.addClass("zh-right")),this._toggleBtnDisplay(null,!0)}},{key:"_bindClearBtnEvents",value:function(){this._addEvents({clearButtonClick:"mouseup",clearButtonMousedown:"mousedown"},this._clearButton)}},{key:"_clearButtonMousedownHandler",value:function(t){t.stopPropagation(),t.preventDefault(),clearInterval(this._mouseDownTimer),this._mouseDown=!1,this._getSegment()}},{key:"_clearActionHandler",value:function(){this._opts.value=null,this._isCleared=!0,this._immediateCommit&&(this._lastValue=void 0);var a=this._input;a[0].value="",document.activeElement!==a[0]&&a.focus(),this._keyUpHandler({type:"input",keyCode:t.keyCode.BACKSPACE,preventDefault:function(){}},!0),this._selectText(this._segment),this._mouseupHandler(),this._data.spinButtons&&this._buttonPane.find(".zh-up,.zh-down").removeClass("is-disabled")}},{key:"_isClearVisible",value:function(){this._clearBtnShown="none"!==this._opts.clearButton&&this._clearButton&&this._clearButton.is(":visible")}},{key:"_clearButtonClickHandler",value:function(t){return this._clearBtnShown?(t.preventDefault(),clearInterval(this._mouseDownTimer),this._mouseDown=!1,this._clearActionHandler(),!1):void this._mouseupHandler()}},{key:"clear",value:function(){this._clearActionHandler()}},{key:"_spinButtonsMousedownHandler",value:function(a){if(a.preventDefault(),!(this._opts.disabled||1<a.which||this._opts.readonly||n(a.target).closest(".zinputfield__spinbutton").hasClass("is-disabled"))){this._mouseDown=!0,this.container.addClass("has-focus"),this._checkForChange(a,"spinstart"),this._input[0].selectionStart===this._input[0].value.length&&this._input[0].selectionEnd===this._input[0].value.length&&(this._selectCaretPosition(this._input[0],0,0),this._mouseupHandler(a));var o=this._assignEventProps(a);this._keyUp=!0,this._keydownHandler(o),clearInterval(this._mouseDownTimer),this._mouseDownTimer=setInterval(this._repetitiveMouseDownHandler.bind(this,a),220),t.$document.off("mouseup.".concat(this.name)).on("mouseup.".concat(this.name),this._documentMouseUpHandler.bind(this))}}},{key:"_repetitiveMouseDownHandler",value:function(t){this._mouseDown?this._keydownHandler(this._assignEventProps(t)):clearInterval(this._mouseDownTimer)}},{key:"_assignEventProps",value:function(a){return{keyCode:n(a.target).closest(".zh-up").length?t.keyCode.UP:t.keyCode.DOWN,preventDefault:function(){}}}},{key:"_documentMouseUpHandler",value:function(){clearInterval(this._mouseDownTimer),t.$document.off("mouseup.".concat(this.name)),this._mouseDown=!1}},{key:"_updateSpinButtons",value:function(){var t=this._data;"focus"===this._opts.spinButtons&&(t.className+=" zdatetimefield--buttonsonhover"),_get(_getPrototypeOf(l.prototype),"_updateSpinButtons",this).call(this)}},{key:"_bindSpinButtonEvents",value:function(){this._addEvents({spinButtonsMouseup:"mouseup",spinButtonsMousedown:"mousedown"},this.container.find(".zh-up,.zh-down"))}},{key:"_spinButtonsMouseupHandler",value:function(t){this._mouseUp=!0,this._checkForChange(t,"spinend"),this._checkForChange(t,"input")}},{key:"_reConstructSpinButtons",value:function(t){var a=this._opts,o=this._data;o.spinButtons&&("focus"===t&&this._addEvents({mouseEnter:"mouseenter",mouseLeave:"mouseleave"},this.container),this.container.attr("role","spinbutton"),o.isVertical&&!a.calendarIcon&&this._updateClass(" zdatetimefield",!0),"always"===a.spinButtons&&this._updateClass("zdatetimefield--buttonsonhover",!0))}},{key:"name",get:function(){return"zdateinput"}},{key:"attrs",get:function(){return{placeholderType:"date-format",jumpOnComplete:!0,locale:"en-US",spinButtonsOrientation:"vertical",incrementOnWrapAround:!0,timeZone:null}}},{key:"props",get:function(){return{otherInputFormats:[]}}}]),l}();t.registerComponent("ZDateInput",t.ZInputField,L);var F=function(a){function o(){return _classCallCheck(this,o),_possibleConstructorReturn(this,_getPrototypeOf(o).apply(this,arguments))}return _inherits(o,t.ZDateInput),_createClass(o,[{key:"_validateFormat",value:function(){this._checkFormat(/d|M|y/g)}},{key:"_init",value:function(){this._allowedChars="Hhmstz",_get(_getPrototypeOf(o.prototype),"_init",this).apply(this,arguments),this._opts.templateName="zinputfield",this._opts.incrementOnWrapAround=!1}},{key:"_setFormat",value:function(){this._setFormatVal(/^(time-short|time-long|time-medium)$/,"time","hh:mm tt")}},{key:"_getDateValue",value:function(){return this._hoursModified&&this._minutesModified&&this._secondsModified?new Date(this._viewDate.getTime()):void 0}},{key:"_getMatch",value:function(t){return t}},{key:"_getRegEx",value:function(){return/HH|H|hh|h|mm|m|ss|s|tt|zz{0,2}|"[^"]*"|'[^']*'/g}},{key:"_resetToFirst",value:function(t){this._resetTimeToFirst(t)}},{key:"_resetTimeToFirst",value:function(t){t&&-1<"Hms".indexOf(t)&&this._viewDate["set".concat({H:"Hours",m:"Minutes",s:"Seconds"}[t])](0)}},{key:"_resetOnBlur",value:function(t){this._resetTimeOnBlur(t)}},{key:"_resetTimeOnBlur",value:function(t){"m"===t&&this._viewDate.setMinutes(0)}},{key:"_parseSegment",value:function(t,a,o){return this._parseTime(t,a,o)}},{key:"_replaceTime",value:function(t){var s,a=this._viewDate,o=this._hoursModified,n=this._minutesModified,l=this._secondsModified,i=this._getPlaceholder.bind(this);if(-1<["h","hh","H","HH"].indexOf(t))s=o?a.getHours():i(t),o&&(-1<["h","hh"].indexOf(t)&&(s=s%12||12),s=-1<["h","H"].indexOf(t)?s.toString():(10>s?"0":"")+s);else if(-1<["m","mm","s","ss"].indexOf(t)){var r=-1<t.indexOf("m")?["Minutes",n]:["Seconds",l];s=r[1]?a["get".concat(r[0])]():i(t),r[1]&&(s=1===t.length?s.toString():(10>s?"0":"")+s)}else-1<["tt"].indexOf(t)?(s=o?12>a.getHours()?this._getI18NText("AM"):this._getI18NText("PM"):this._opts.placeholder.period,"underscore"!==this._opts.placeholderType&&(s=i(s))):-1<["z","zz","zzz"].indexOf(t)&&(s=a.toString().split(" ")[5]);return this._translateEToA(s)}},{key:"_replaceText",value:function(t){return this._replaceTime(t)}},{key:"_validateOptions",value:function(){var t=this;_get(_getPrototypeOf(o.prototype),"_validateOptions",this).call(this);var a=this._opts;["value","min","max"].forEach(function(o){a[o]&&(a[o]=t._changeToViewDate(a[o]))})}},{key:"_performValidations",value:function(){_get(_getPrototypeOf(o.prototype),"_performValidations",this).call(this,["hourStep","minuteStep","secondStep"],["hours","minutes","seconds"])}},{key:"_getCustomMatch",value:function(t){return this._getTimeMatch(t)}},{key:"_getTimeMatch",value:function(t){var a=this._getTimeParts()[t[0]];return(a=-1<["h","hh","H","HH","m","mm","s","ss"].indexOf(t)?this._opts.placeholder[a.slice(0,-1)]:"")||!this._hoursModified&&this._opts.placeholder.period||t}},{key:"_getTimeParts",value:function(){return{H:"hours",h:"hours",m:"minutes",s:"seconds"}}},{key:"_modifyValue",value:function(t,a,o,n){return this._modifyTime(t,a,o,n)}},{key:"_modifyTime",value:function(t,a,o,n){var l;if(-1<["h","H"].indexOf(a)){l="_hoursModified",o*=this._opts.hourStep;var i=t.getHours()+o;this._opts.incrementOnWrapAround&&n||(23<i&&(i%=24),0>i&&(i+=24)),(this._hoursModified||0>o)&&t.setHours(i)}else-1<["m","s"].indexOf(a)?l=this._minuteSecondUpdate(a,o,t,n):"t"===a&&t.setHours((t.getHours()+12)%24);return l}},{key:"_disableSpinBtns",value:function(){var t=this._opts,a=t.value,o=t.min,n=t.max,l=this._buttonPane;if("none"!==t.spinButtons&&a){var s,i=new Date(+a);this._modifyTime(i,this._currentSegment||"h",-1),s=o&&+i<+o||n&&+i>+n?"addClass":"removeClass",l.find(".zh-down")[s]("is-disabled"),i=new Date(+a),this._modifyTime(i,this._currentSegment||"h",1),s=o&&+i<+o||n&&+i>+n?"addClass":"removeClass",l.find(".zh-up")[s]("is-disabled")}}},{key:"_getDisabledValue",value:function(t,a,n,l){var i=_get(_getPrototypeOf(o.prototype),"_getDisabledValue",this).apply(this,arguments);return!i&&(t&&+l<+t||a&&+l>+a)&&(i=!0,this.container.find(".zh-".concat(1===n?"up":"down")).addClass("is-disabled")),i}},{key:"_updateDisabledState",value:function(t,a,o){var l,n=this.container.find(".zh-".concat(o?"up":"down"));return a=+a,(t=+t)&&(o?a>t:a<t)&&(n.addClass("is-disabled"),l=!0),l||n.removeClass("is-disabled"),l}},{key:"_parseTime",value:function(t,a,o){var s,r,n=this._opts.jumpOnComplete,l=this._viewDate,i=this._hoursModified;if("h"===t){if(r=(i?o.getHours()%12*10:0)+parseInt(a),isNaN(r))return;if(s=r.toString(),!n&&12<r)r=this._isFastInput?parseInt(s[0]):parseInt(s.slice(-1));else if(n)for(;12<r;)r=parseInt(r.toString().slice(1));r=12<=l.getHours()?r+12:0==r%12?0:r,n&&i&&1<parseInt(s[0])&&(this._isNextSegment=!0),23<r&&(r=12)}else if("H"===t){if(r=(this._isNewValue&&this._oldSegment!==this._currentSegment?0:i?10*o.getHours():0)+parseInt(a),isNaN(r))return;var d=(s=r.toString()).length;n&&(23<=r||2<parseInt(s[0])&&i)&&(this._isNextSegment=!0),!n&&23<r&&this._isFastInput?2===d?r=l.getHours():3<=d&&(23<(r=parseInt(r.toString().slice(1)))&&(r=parseInt(r.toString()[0]))):23<r&&(r=n?parseInt(s[d-1]):parseInt(s.slice(-1)),this._isNextSegment=!1)}else if(-1<["m","s"].indexOf(t))this._parseMinuteSecond(t,a,o);else if("t"===t&&i){for(this._typedPeriodChar+=a.toLowerCase();0<this._typedPeriodChar.length;){var c=this._getI18NText("AM"),_=this._getI18NText("PM"),u=this._typedPeriodChar;if(0===c.toLowerCase().indexOf(u)&&12<=o.getHours()||0===_.toLowerCase().indexOf(u)&&12>o.getHours())return o.setHours((o.getHours()+12)%24),this._oldDateValue=new Date(l.getTime()),this._viewDate=o,!0;this._typedPeriodChar=u.substring(1,u.length)}return this._hoursModified=!0,!0}return-1<["H","h"].indexOf(t)&&o.setHours(r),-1===["m","s"].indexOf(t)&&(this._hoursModified=!0),o}},{key:"_parseMinuteSecond",value:function(t,a,o){var n="m"===t?"Minutes":"Seconds",l="_".concat(this._getTimeParts()[t],"Modified"),i=(this["".concat(l)]?10*o["get".concat(n)]():0)+parseInt(a),s=this._opts.jumpOnComplete;if(!isNaN(i)){var r=i.toString();s&&(59<=i||2===r.length||6<=r[0])&&(this._isNextSegment=!0),!s&&59<i&&this._isFastInput?2===r.length?i=this._viewDate["get".concat(n)]():3<=r.length&&(59<i&&(i=parseInt(i.toString().slice(1))),59<i&&(i=parseInt(i.toString()[0]))):59<i&&(i=s?parseInt(r[r.length-1]):parseInt(r.slice(-1))),o["set".concat(n)](i),this[l]=!0}}},{key:"_minuteSecondUpdate",value:function(t,a,o,n){var l="_".concat(this._getTimeParts()[t],"Modified"),i="".concat(l.slice(1,7),"Step"),s="m"===t?"Minutes":"Seconds",r="m"===t?"Hours":"Minutes";a*=this._opts[i];var d=o["get".concat(s)]()+a;if(!this._opts.incrementOnWrapAround||!n){var c=o["get".concat(r)]();59<d&&(d%=60,o["set".concat(r)](c+1)),0>d&&(d+=60,o["set".concat(r)](c-1))}return(this[l]||0>a)&&o["set".concat(s)](d),l}},{key:"_isPartModified",value:function(t,a){this._isTimeModified(t,a)}},{key:"_isTimeModified",value:function(t,a){var o=this._getTimeParts();this["_".concat(o[t],"Modified")]=a,-1<["h","H"].indexOf(t)&&!a&&(this._typedPeriodChar="")}},{key:"_changeToViewDate",value:function(a){if(a=(a=t.Date.parseDate(a,this._format))&&a.isValid?a.date:void 0){var o=this._viewDate;a.setDate(o.getDate()),a.setMonth(o.getMonth()),a.setFullYear(o.getFullYear())}return a}},{key:"setValue",value:function(t){t=this._changeToViewDate(t),_get(_getPrototypeOf(o.prototype),"setValue",this).call(this,t)}},{key:"_setAttribute",value:function(t,a){-1<["value","min","max"].indexOf(t)&&a&&(a=this._changeToViewDate(a)),_get(_getPrototypeOf(o.prototype),"_setAttribute",this).call(this,t,a)}},{key:"name",get:function(){return"ztimefield"}},{key:"attrs",get:function(){return{format:"hh:mm tt",hourStep:1,minuteStep:1,secondStep:5,placeholder:{hour:"hour",minute:"minute",second:"second",period:"AM/PM"},labels:{period:"AM/PM",AM:"AM",PM:"PM"}}}}]),o}();t.registerComponent("ZTimeField",t.ZDateInput,F);var R=function(a){function l(){return _classCallCheck(this,l),_possibleConstructorReturn(this,_getPrototypeOf(l).apply(this,arguments))}return _inherits(l,t.CoreComponent),_createClass(l,[{key:"_init",value:function(t,a){this._setTimeZone(),this._is12HourFormat=-1<a.format.indexOf("h"),a.viewDate=a.viewDate||this._getNewDate(),a.minDate&&(this._inRange=!0),a.viewDate.setHours(0,0,0,0),a.selectedTime=this._getDateVal(a.selectedTime),this._validateTimeOpts(),this._buildData()}},{key:"_setTimeZone",value:function(){this._timeZone=t.Date.timeZone=this._opts.timeZone||t.timeZone}},{key:"_getNewDate",value:function(){return this._timeZone?t.Date.changeTZOfDate(new Date,this._timeZone):new Date}},{key:"_validateLimits",value:function(a){for(var s,o=this._opts,n=["minTime","maxTime"],l=0;2>l;l++)o[s=n[l]]&&(this["_"+s]=o[s]=this._parseTimeVal(s));var r=o.minTime,d=o.maxTime;r&&d&&t.Date.isGreater(r,d)&&(d=o.maxTime=void 0),d&&a&&t.Date.isGreater(a,d)&&o.selectedTime.setHours(d.getHours(),d.getMinutes(),d.getSeconds(),0),r&&a&&t.Date.isGreater(r,a)&&o.selectedTime.setHours(r.getHours(),r.getMinutes(),r.getSeconds(),0)}},{key:"_checkTime",value:function(t,a,o,n,l){var i=this._opts.minTime,s=this._opts.maxTime;return n?i&&(t<i.getHours()||t===i.getHours()&&a<i.getMinutes())||s&&(t>s.getHours()||t===s.getHours()&&a>s.getMinutes()):i&&(t<i.getHours()||t===i.getHours()&&a<i.getMinutes()||t===i.getHours()&&a===i.getMinutes()&&this._secondEle&&o<i.getSeconds())||s&&(t>s.getHours()||t===s.getHours()&&a>s.getMinutes()||t===s.getHours()&&a===s.getMinutes()&&(l||this._secondEle)&&o>s.getSeconds())}},{key:"_checkPeriod",value:function(a,o,n){var l=a.getHours(),i=!(!(n?12<=l:12>l)||!this._checkHourMinLimit(o,a.getMinutes(),!0));this._opts.disabledTimeList.length&&(i=this._checkIfDisabled(a,a.getMinutes(),i,o)),t.select(this._periodEle).setOptionAttributes(n?"AM":"PM","disabled",i)}},{key:"_disableTime",value:function(t,a,o,n,l){var i=!(n&&this._opts.minTime&&+n!=+this._opts.minTime&&this._opts.maxTime&&+n!=+this._opts.maxTime||!this._checkTime(t.getHours(),l?t.getMinutes():a,l?a:t.getSeconds(),!1,l));return this._opts.disabledTimeList.length&&(i=this._checkIfDisabled(t,a,i)),i}},{key:"_parseTimeVal",value:function(a){return t.Date.parseDate(this._opts[a],this._opts.format).date}},{key:"_validateTimeOpts",value:function(){var n,t=this._opts,a=t.selectedTime,o=this._minTime;a&&(n=this._getNewDate()).setHours(a.getHours(),a.getMinutes(),a.getSeconds(),0),this._opts.selectedTime=n||(o?new Date(o.getTime()):this._opts.selectedTime),(t.minTime||t.maxTime)&&this._validateLimits(n)}},{key:"_postEachRender",value:function(t,a){var o=this._opts,n=a.modifiedAttr;"timeFieldType"!==n&&this._hourEle&&this._input&&this._singleSelect&&this._combinedEle||this._updateTimeInputs(),(this._timeElemRendered||this._valueReset)&&(n&&"multiple-select-box"===o.timeFieldType&&"singleSelect"!==n&&this._checkForTime(),this._updateSelectedTime(o.timeFieldType,this._timeElemRendered))}},{key:"_postRender",value:function(){this._data.className+=" ",this._updateTimeInputs()}},{key:"_updateTimeInputs",value:function(){var t=this._opts,a=this._opts.id,o=this.element,n=t.timeFieldType;"input"===n?this._input=o.find("#"+a+"-type-input"):"multiple-select-box"===n?"hm-t"===t.timeMultipleSelectBoxType?(this._combinedEle=o.find("#"+a+"-time-combined"),this._is12HourFormat&&(this._periodEle=o.find("#"+a+"-combined-period"))):(this._hourEle=o.find("#"+a+"-hour"),this._minuteEle=o.find("#"+a+"-minute"),this._secondEle=o.find("#"+a+"-second"),this._is12HourFormat&&(this._periodEle=o.find("#"+a+"-period"))):this._singleSelect=o.find("#"+a+"-single-time-select")}},{key:"_buildData",value:function(){this.buildTimePicker()}},{key:"_validateOpts",value:function(){for(var n,t=this._opts,a=a=["hourStep","minuteStep","secondStep"],o=0;o<a.length;o++)n=+t[a[o]],t[a[o]]=0>=n?1:n}},{key:"buildTimePicker",value:function(){var t=this._opts,a=t.timeFieldType;"none"!==t.timeLabelType&&this._buildLabel(),"input"===a?this._buildInputElement():"none"!==a&&this._buildSelectElement(t),this._timeElemRendered=!0}},{key:"_buildLabel",value:function(){var t=this._opts,a=t.timeLabelType;"none"!==a&&(this._data.timeLabel={},-1<["icon","icon-text"].indexOf(a)&&this._getTimeIconProps(),-1<["text","icon-text"].indexOf(a)&&(this._data.timeLabel.text=t.timeLabel))}},{key:"_getTimeIconProps",value:function(){var a=this._opts,o={defaultIconClassName:"zdatetimepicker__timeicon",iconClassName:a.timeLabelIconClassName,SVGIconClassName:"zdatetimepicker__time",SVGIconId:a.timeLabelSVGIconId,defaultSVGIconId:"zc__svg--time",isCE:this.isCE};this._data.timeLabel.icon=t._getIconInfo(a.timeLabelIconClassName,a.timeLabelSVGIconId,"#zc__svg--time","zdatetimepicker__timeicon",o)}},{key:"_triggerChange",value:function(t){var a=this.getAttribute("value");this._opts.selectedTime=a,this._dispatchEvent("timechange",t,{selectedTime:a},void 0,!!t)}},{key:"_updateSelectedTime",value:function(a,o){"input"===a?(this._opts.selectedTime=t.timefield(this._input).getValue().dateObject,o&&(this._initialVal=new Date(+this._opts.selectedTime))):this._checkSelectedTime.apply(this,arguments)}},{key:"_getDateVal",value:function(a,o){return t.Date.parseDate(a,o||this._opts.format).date}},{key:"_destroy",value:function(){var a=this._opts.timeFieldType,o=this._input;"input"===a&&o&&o.length?(this.isCE?o.remove():t.timefield(o).destroy(),this._input=void 0):"none"!==a&&this._destorySelectElement(a)}},{key:"update",value:function(){this._checkForTime&&this._checkForTime()}},{key:"setTime",value:function(a){var o=this._opts.timeFieldType,n=this._opts.minTime,l=this._getNewDate();if(a?(a=this._getDateVal(a))&&(l.setHours(a.getHours()),l.setMinutes(a.getMinutes()),l.setSeconds(a.getSeconds())):n?l=new Date(+n):l.setHours(0,0,0,0),this._opts.viewDate=new Date(+l),"input"===o)t.timefield(this._input).setAttribute("value",l||this._initialVal);else if("multiple-select-box"===o)this._opts.selectedTime=new Date(+l),this._buildTime(),this._setAttribute("viewDate",l),this._setTimeOnMultipleSelect(!this._opts.valueUpdate,l,a);else{var i;a&&((i=this._getNewDate()).setHours(a.getHours(),a.getMinutes(),0,0),i=this._sortSingleSelectValues(i)),i&&t.select(this._singleSelect).setAttribute("selectedValue",(+i).toString()||this._getSingleSelectFirstVal())}this._triggerChange()}},{key:"clearTime",value:function(){var a=this._opts.timeFieldType;"input"===a?t.timefield(this._input).setAttribute("value",this._is12HourFormat?"12:00 AM":"00:00"):"multiple-select-box"===a?this._setTimeOnMultipleSelect(!0):t.select(this._singleSelect).setAttribute("selectedValue",this._getSingleSelectFirstVal()),this._triggerChange()}},{key:"refresh",value:function(){this._refresh=!0,this._opts.valueUpdate=!0,this._checkForTime&&this._checkForTime(),this._refresh=!1}},{key:"getAttribute",value:function(a){if("value"===a){var n,i,o=this._opts.timeFieldType;if("input"===o)n=t.timefield(this._input).getValue().dateObject;else if("multiple-select-box"!==o)"single-select-box"===o&&(i=t.select(this._singleSelect).getAttribute("selectedValue"),n=new Date(+i));else if("hm-t"===this._opts.timeMultipleSelectBoxType){i=t.select(this._combinedEle).getAttribute("selectedValue");var s="";this._is12HourFormat&&(s=t.select(this._periodEle).getAttribute("selectedValue")),i=i+" "+s,n=t.Date.parseDate(i,this._opts.format).date}else n=this._setSelectTimeForMultiple();return n}return _get(_getPrototypeOf(l.prototype),"getAttribute",this).apply(this,arguments)}},{key:"_checkTimeOptions",value:function(a,o){this._opts.valueUpdate=!0;var n=this._opts,l=this._data,i=this._getNewDate(),s=t.select(this._hourEle),r=t.select(this._minuteEle),c=(l.hourProps.options,this._minTime),_=this._maxTime,u=n.viewDate&&(t.Date.areDatesEqual(n.viewDate,n.minDate)?n.minDate:t.Date.areDatesEqual(n.viewDate,n.maxDate)?n.maxDate:n.viewDate);o=o||u,i.setHours(o.getHours(),o.getMinutes(),o.getSeconds(),0),i.getHours(),this._is12HourFormat?(this._setHourVal(i,s,r),this._setMinuteVal(i),this._secondEle.length&&this._setSecondVal(i),this.setTime(i)):(this._setHourVal(i,s,r),this._setMinuteVal(i),this._secondEle&&this._setSecondVal(i),c&&s.setOptionAttributes(c.getHours(),"disabled",i.getMinutes()<c.getMinutes()),_&&s.setOptionAttributes(_.getHours(),"disabled",i.getMinutes()>_.getMinutes()))}},{key:"_setHourVal",value:function(t,a,o){for(var n=this,l=[],s=a.getAttribute("selectedValue"),r=parseInt(o.getAttribute("selectedValue")),d=this._is12HourFormat,c=d?1:0,_=d?12:23,u=this._opts,p=this._data.hourProps.options,m=t.getHours(),g=function(a){var i,o=a;d&&(12<=m?(i=!0,o=12===a?a:a+12):o=a%12),v=!!n._checkTime(o,r,void 0,!0),u.disabledTimeList.length&&(v=n._checkIfDisabled(t,t.getMinutes(),v,o)),v=d&&i?23>=o&&v:v,p.find(function(t){return t.value===a}).disabled=v,p.find(function(t){return t.value===a}).selected=!1,v||l.push(a),v&&+s===a&&(s=!1)},h=c;h<=_;h+=u.hourStep){var v;g(h)}a.setAttribute("options",_toConsumableArray(p)),s=!1===s||""===s?l[0]:s,a.setAttribute("selectedValue",s),s&&(0!=m||12!=+s)&&t.setHours(12<m?+s+12:+s)}},{key:"_setMinuteVal",value:function(a,o){for(var n=this,l=this._opts.minuteStep,s=t.select(this._minuteEle),r=this._data.minuteProps.options,d=s.getAttribute("selectedValue"),c=[],_=function(t){var l=n._disableTime(a,t,void 0,o);l||c.push((10>t?"0":"")+t),r.find(function(a){return a.value===t}).disabled=l,+d===t&&l&&(d=!1)},u=0;59>=u;u+=l)_(u);var p={};p.options=_toConsumableArray(r),!1===d&&(p.selectedValue=c.length&&r.find(function(t){return t.label===c[0]}).value),s.setAttributes(p),a.setMinutes(+d)}},{key:"_setSecondVal",value:function(a,o){for(var n=this,l=this._opts.secondStep,s=t.select(this._secondEle),r=this._data.secondProps.options,d=s.getAttribute("selectedValue"),c=[],_=function(t){var l=n._disableTime(a,t,void 0,o,!0);l||c.push((10>t?"0":"")+t),r.find(function(a){return a.value===t}).disabled=l,+d===t&&l&&(d=!1)},u=0;59>=u;u+=l)_(u);var p={};p.options=_toConsumableArray(r),!1===d&&(d=p.selectedValue=c.length&&r.find(function(t){return 12<=a.getHours()?t.label===c[c.length-1]:t.label===c[0]}).value),s.setAttributes(p),a.setSeconds(+d)}},{key:"_checkCombinedTimeOptions",value:function(a,o){var c,_,u,p,m,g,h,n=this._opts,l=t.Date,s=this._is12HourFormat,r=n.disabledTimeList.length,d=t.select(this._combinedEle);s&&(c="PM"===(p=(h=t.select(this._periodEle)).getAttribute("selectedValue")));var f,k,v=this._minTime,y=this._maxTime;if(v&&(f=v.getHours()),y&&(k=y.getHours()),!o||this._isFromUI.apply(this,arguments)){_=this._data.combinedProps.options,u=d.getAttribute("selectedValue");for(var S,b=[],C=0,D=_.length;C<D;C++)S=_[C].value,g=this._getDateVal(S+" "+(p||"")),p&&(m=!!(v&&(c?12<f:12>f)&&l.isTimeGreater(v,g)||y&&(c?12<k:12>k)&&l.isTimeGreater(g,y)),r&&(m=this._checkIfDisabled(g,g.getMinutes(),m))),_[C].disabled=m,m||b.push(S),u===S&&m&&(u=!1);d.setAttribute("options",_toConsumableArray(_)),u=u||b[0],a||d.setAttribute("selectedValue",u),s&&((g=this._getDateVal(u+" "+p)).setHours(g.getHours()+(c?-12:12)),g&&(m=!!(v&&l.isTimeGreater(v,g)||y&&l.isTimeGreater(g,y)),r&&(m=this._checkIfDisabled(g,g.getMinutes(),m,g.getHours())),h.setOptionAttributes(c?"AM":"PM","disabled",m)))}}},{key:"_buildhmT",value:function(){var _,u,t="",a=[],o=this._is12HourFormat,n=this._opts,l=n.selectedTime,s=this._data,r=this._minTime,d=o?this._opts.format.replace("tt",""):this._opts.format,c=this._maxTime;l&&(_=this._getHourVal(l.getHours()),u=l.getMinutes());for(var p=o?1:0,m=o?12:23;p<=m;p+=n.hourStep)for(var g=0;59>g;g+=n.minuteStep){t=(10>p?"0"+p:p)+":"+(10>g?"0"+g:g);var h=this._getDateVal(t,d);12<=p&&h.setHours(p-12),a.push({selected:p===_&&g===u,value:t,disabled:h&&(r&&+h<+r||c&&+h>+c),label:this._translateEToA(t)})}s.combinedProps=this._getElemProps("time-combined",a,"_combinedTime",65,200),o&&(s.combinedPeriodProps=this._getElemProps("combined-period",this._getPeriodProps(),"_combinedPeriod",50))}},{key:"_setCombinedTimeValues",value:function(){var a=t.select(this._combinedEle).getAttribute("selectedValue");if(this._isFromUI.apply(this,arguments)){if(this._is12HourFormat)a=a+" "+t.select(this._periodEle).getAttribute("selectedValue");var n=this._getDateVal(a);this._opts.viewDate.setHours(n.getHours(),n.getMinutes(),0,0),this._opts.selectedTime=new Date(this._opts.viewDate.getTime()),"multiple"===this._opts.selectionType&&this._setTimeForMultiple(n),this._triggerChange.apply(this,arguments)}}},{key:"_combinedTimeClickHandler",value:function(t,a){this._checkCombinedTimeOptions&&this._checkCombinedTimeOptions(t,a),this._setCombinedTimeValues(t,a)}},{key:"_combinedPeriodClickHandler",value:function(){this._isFromUI.apply(this,arguments)&&this._combinedTimeClickHandler.apply(this,arguments)}},{key:"_isFromUI",value:function(t,a){return(a=!a&&t?t.detail:a).fromUI}},{key:"_getPeriodProps",value:function(){var a=this._opts,o=a.viewDate,n=!o||a.minTime&&!t.Date.isGreater(o,a.minTime)?o:a.minTime,l=a.selectedTime,i=l?l.getHours():void 0,s=n?n.getHours():void 0,r=!o||a.maxTime&&!t.Date.isGreater(a.maxTime,o)?o:a.maxTime,d=r?r.getHours():void 0;return[{value:"AM",selected:11>i,label:"AM",disabled:s&&11<s},{value:"PM",selected:11<i,label:"PM",disabled:d&&11>d}]}},{key:"_getElemProps",value:function(t,a,o,n,l){var i=this._opts;return{id:this._opts.id+"-"+t,templateRender:!0,rtl:i.rtl,options:a,isCE:this.isCE,dropdownList:{height:l||330,className:"zdatetimepicker--menu"},allowDisabledOptionsForSelection:!0,width:"auto",optionclick:o?this[o+"ClickHandler"].bind(this):this._timeSelectClickHandler.bind(this)}}},{key:"_checkForTime",value:function(t,a){var o=this._opts;(o.minTime||o.maxTime||o.disabledTimeList.length||this._refresh||a)&&"multiple-select-box"===o.timeFieldType&&("h-m-t"===o.timeMultipleSelectBoxType||"h-m-s-t"===o.timeMultipleSelectBoxType?this._checkTimeOptions(t):"hm-t"===o.timeMultipleSelectBoxType&&this._checkCombinedTimeOptions())}},{key:"_preventSelectEv",value:function(){var t=this;["_singleSelect","_hourEle","_minuteEle","_combinedEle","_periodEle"].forEach(function(a){var o=t[a];o&&o.length&&t._stopSelectEvents(o)})}},{key:"_stopSelectEvents",value:function(a){for(var o=t.ZSelect.prototype._EVENTS,n=0;n<o.length;n++)a.on("z"+o[n],function(t){return t.stopPropagation()})}},{key:"_getHourVal",value:function(t){return this._is12HourFormat&&(t=0===t||11<t&&!(t%12)?12:11<t?t%12:t),t}},{key:"_buildSelectElement",value:function(t){switch(t.timeFieldType){case"multiple-select-box":this._data.multiSelect=!0,"h-m-t"===t.timeMultipleSelectBoxType?this._buildTime():"h-m-s-t"===t.timeMultipleSelectBoxType?this._buildTime():"hm-t"===t.timeMultipleSelectBoxType&&(this._data.isCombined=!0,this._buildhmT());break;case"single-select-box":this._buildSingleSelect()}}},{key:"_destorySelectElement",value:function(a){var o=this._combinedEle,n=this._singleSelect;"multiple-select-box"===a?("h-m-t"===this._opts.timeMultipleSelectBoxType?this._destroyhMT():o&&o.length&&(this.isCE?(o.remove(),this._periodEle&&this._periodEle.remove()):(t.select(o).destroy(),this._periodEle&&t.select(this._periodEle).destroy()),this._combinedEle=void 0),this._periodEle=void 0):"single-select-box"==a&&n&&n.length&&(this.isCE?n.remove():t.select(n).destroy(),this._singleSelect=void 0)}},{key:"_checkSelectedTime",value:function(a){var o;if("multiple-select-box"===a)o=this._setSelectTimeForMultiple.apply(this,arguments);else{var n=new Date(+t.select(this._singleSelect).getAttribute("value"));o=this._opts.selectedTime=new Date(n)}this._valueSet||this._opts.viewDate.setHours(o.getHours(),o.getMinutes())}},{key:"_setAttribute",value:function(a,o){var n=!0,l=this._opts;if(("timeFieldType"===a||"timeMultipleSelectBoxType"===a||"fixedTimeOptions"===a)&&(this._data.modifiedAttr="timeFieldType",n="fixedTimeOptions"!==a),"timeLabelType"===a)l[a]=o,"none"===o?this._data.timeLabel=null:this._buildLabel();else if(-1<["timeLabel","timeLabelIconClassName","timeLabelSVGIconId"].indexOf(a))l[a]=o,this._buildLabel();else if("rtl"===a)if(l[a]=o,"input"===l.timeFieldType)t.timefield(this._input).setAttribute("rtl",o);else for(var d,s=["_hourEle","_minuteEle","_periodEle","_singleSelect","_combinedEle"],r=0;r<s.length;r++)(d=this[s[r]])&&d.length&&t.select(d).setAttribute("rtl",o);else if(-1<["minTime","maxTime","hourStep","minuteStep"].indexOf(a)){if("minTime"===a||"maxTime"===a){if("string"==typeof o){o=this._getDateVal(o);var c=this._getNewDate();c.setHours(o.getHours(),o.getMinutes(),0,0),o=new Date(+c)}if(this["_"+a]=this._opts[a]=o,"input"===l.timeFieldType)t.timefield(this._input).setAttribute(a.replace("Time",""),o);else if("single-select-box"===l.timeFieldType){var _=t.select(this._singleSelect),u=this._buildSingleSelect(!0);_.setAttributes("options",u.options),_.setValue(u.value),l.selectedTime&&"minTime"===a&&+l.selectedTime<+o&&_.setAttribute("value",u.options[0].value),this._reInit=!0}else{var p=l.selectedTime?+l.selectedTime<+o?o:l.selectedTime:o;"minTime"===a&&this._opts.viewDate.setHours(p.getHours(),p.getMinutes(),0,0),l[a]=o,this._checkForTime(void 0,!0)}}else"input"===l.timeFieldType?t.timefield(this._input).setAttribute(a.replace("Time",""),o):(this._destroy(),this._reInit=!0);l[a]=o}else"timeZone"===a?(l.timeZone=o,this._setTimeZone(),this._reInit=!0):"viewDate"===a?(l[a]=o,"multiple-select-box"===l.timeFieldType&&(t.select(this._hourEle).setAttribute("options",this._data.hourProps.options),t.select(this._minuteEle).setAttribute("options",this._data.minuteProps.options),this._secondEle.length&&t.select(this._secondEle).setAttribute("options",this._data.secondProps.options),this._is12HourFormat&&t.select(this._periodEle).setAttribute("options",this._data.periodProps.options))):"viewDate"!==a&&"valueUpdate"!==a&&"selectedTime"!==a||"format"===a?(this._destroy(),this._reInit=!0,l[a]=o,"format"===a&&(l[a]=this._setTimeFormat(o),this._is12HourFormat=-1<l.format.indexOf("h"))):l[a]=o;if(this._reInit){var m=this._data;m.isCombined=m.multiSelect=m.singleSelect=m.inputProps=m.hourProps=m.minuteProps=m.periodProps=m.combinedProps=m.combinedPeriodProps=null}this._domChanged=n}},{key:"_setTimeFormat",value:function(t){return t.match(/\b(h|H|m|t|s){1,}(.(h|H|m|t|s){1,})?(.(h|H|m|t|s){1,})?(.(h|H|m|t|s){1,})?\b/)[0]}},{key:"_buildInputElement",value:function(){var t=this._opts,a=t.selectedTime,o=this._is12HourFormat;this._data.inputProps={rtl:t.rtl,templateRender:!0,locale:t.locale,format:t.format,value:a||(o?"12:00 AM":"00:00"),min:t.minTime,max:t.maxTime,hourStep:t.hourStep,minuteStep:t.minuteStep,secondStep:t.secondStep,id:this._opts.id+"-type-input",clearButton:"none",spinend:this._spinEndHandler.bind(this),isCE:this.isCE,width:"none",change:this._timeFieldChangeHandler.bind(this),mainElement:this._input?this._input[0]:null}}},{key:"_spinEndHandler",value:function(t,a){var o=(a=!a&&t?t.detail:a).dateValue;this._timeModified=!0,this._opts.selectedTime=o,void 0!==o&&this._opts.viewDate&&(this._opts.viewDate.setHours(o.getHours(),o.getMinutes(),o.getSeconds(),0),this._triggerChange(t))}},{key:"_timeFieldChangeHandler",value:function(a,o){o=o||a&&a.detail,this.isCE&&a.stopPropagation(),this._dispatchEvent("timechange",a,{selectedTime:this.getAttribute("value"),value:t.timefield(this._input).getAttribute("value"),valueString:t.Date.formatDate(o.dateValue,this._opts.format)})}},{key:"_buildSingleSelect",value:function(a){var u,o=this._opts,n=o.fixedTimeOptions,l=n.length,s=[],r=o.disabledTimeList,d=this._minTime,c=this._maxTime,_=o.selectedTime;_&&(u=this._getNewDate()).setHours(_.getHours(),_.getMinutes(),0,0);var v,p=this._sortSingleSelectValues(u),m=t.Date,g=m.isTimeGreater.bind(m),h=m.areTimesEqual.bind(m);if(l)for(var y=0;y<l;y++){var k,f=this._getDateVal(n[y]),b=!1;f.setSeconds(0,0),k=(!d||g(f,d)||h(f,d))&&(!c||g(c,f)||h(f,c));for(var C=0;C<r.length;C++)if(+f==+r[C].date){b=!0;break}if(k){var S={selected:h(p,f),disabled:b,value:+f,label:this._translateEToA(n[y])};s.push(S),S.selected&&(v=S)}}return a?{options:s,value:v}:void(this._data.singleSelect=this._getElemProps("single-time-select",s,"_singleSelect",100,200))}},{key:"_sortSingleSelectValues",value:function(a){var o=this,n=this._opts.fixedTimeOptions;n.sort(function(t,n){return(t=o._getDateVal(t))-(n=o._getDateVal(n))});for(var r,l=0,s=n.length;l<s;l++)if(r=this._getDateVal(n[l]),a&&(t.Date.areTimesEqual(r,a)||+r>+a))return r}},{key:"_singleSelectClickHandler",value:function(t,a){a=!a&&t?t.detail:a;var o=this._opts.viewDate;if(a.fromUI){var n=new Date(+a.selectedValue);o.setHours(n.getHours(),n.getMinutes(),0,0),this._opts.selectedTime=new Date(+o),"multiple"===this._opts.selectionType&&this._setTimeForMultiple(o),this._triggerChange(t)}}},{key:"_getSingleSelectFirstVal",value:function(t){for(var l,a=this._data.singleSelect.options,o=0,n=a.length;o<n;o++)if(t&&((l=new Date(a[o].value)).setFullYear(t.getFullYear()),l.setMonth(t.getMonth()),l.setDate(t.getDate())),!a[o].disabled&&(!t||+l==+t||+l>+t))return t?l:a[o].value}},{key:"_buildTime",value:function(){var g,h,v,y,k,b,C,t=this._opts,a=t.selectedTime,o=this._is12HourFormat,n=[],l=t.minTime,s=t.maxTime,r=this._data,d=a.getHours(),c=[],_=[],u=[],p=!1,m=!1;l&&(g=l.getHours(),v=l.getMinutes()),t.minDate&&(g=t.minDate.getHours(),v=t.minDate.getMinutes(),p=t.minDate.toDateString()===t.viewDate.toDateString()),s&&(h=s.getHours()),t.maxDate&&((m=t.maxDate.toDateString()===t.viewDate.toDateString())&&(h=t.maxDate.getHours(),v=t.maxDate.getMinutes())),k=a?this._getHourVal(a.getHours()):g?this._getHourVal(g):o?12:0,b=a?a.getMinutes():v||0;for(var D=o?1:0,S=o?12:23;D<=S;D+=t.hourStep){if(y=D===k,!o&&y&&D,this._inRange)C=!1,(p||m)&&(C=p?!!g&&D<g:!!h&&D>h);else{var T=D,w=void 0;o&&(12<=d?(w=!0,T=12===D?D:D+12):T=D%12),C=!!this._checkTime(T,b,void 0,!0),(C=o&&w?23>=T&&C:C)||n.push(D)}c.push({selected:y,disabled:C,value:D,label:this._translateEToA((10>D?"0":"")+D)})}r.hourProps=this._getElemProps("hour",c),t.viewDate.setHours(a?a.getHours():l?g:0);var I=a?a.getMinutes():l?v:0;t.viewDate.setMinutes(I);for(D=0;59>=D;D+=t.minuteStep)C=this._disableTime(a,D,void 0,void 0),y=D-t.minuteStep<I&&D>=I,_.push({value:D,label:this._translateEToA((10>D?"0":"")+D),disabled:C,selected:y});if(r.minuteProps=this._getElemProps("minute",_),t.format.match(/s/)){var x=a.getSeconds();t.viewDate.setSeconds(x);for(D=0;59>=D;D+=t.secondStep)C=this._disableTime(a,D,void 0,void 0,!0),y=D-t.secondStep<x&&D>=x,u.push({value:D,label:this._translateEToA((10>D?"0":"")+D),disabled:C,selected:y});r.secondProps=this._getElemProps("second",u)}o&&(r.periodProps=this._getElemProps("period",this._getPeriodProps(),"_period",50))}},{key:"_destroyhMT",value:function(){var a=this;["_hourEle","_minuteEle","_secondEle","_periodEle"].forEach(function(o){var n=a[o];if(n&&n.length){var l=t.select(n);a.isCE?n.remove():l.destroy()}a[o]=void 0})}},{key:"_timeSelectClickHandler",value:function(a,o){var i,l=this._opts.viewDate;if((o=!o&&a?a.detail:o).fromUI){var s=+o.selectedValue;-1<n(o.dropdownList).attr("id").indexOf("hour")?(this._is12HourFormat&&(s=this._getHourValue(t.select(this._periodEle).getAttribute("selectedValue"),s)),l.setHours(s),i="hour"):-1<n(o.dropdownList).attr("id").indexOf("minute")?(l.setMinutes(s),i="minute"):(l.setSeconds(s),i="second"),this._triggerEvent(a,o,i),this._checkForTime(!1),this._opts.selectedTime=new Date(+l),"multiple"===this._opts.selectionType&&this._setTimeForMultiple(l),this._triggerChange(a)}}},{key:"_periodClickHandler",value:function(a,o){var n=(o=!o&&a?a.detail:o).selectedValue,l=this._opts.viewDate;if(o.fromUI){var i=+t.select(this._hourEle).getAttribute("selectedValue");i=this._getHourValue(n,i),this._selectedPeriod=n,l.setHours(i),this._triggerEvent(a,o,"period"),this._checkForTime(!1),this._opts.selectedTime=new Date(+l),this._triggerChange(a)}}},{key:"_getHourValue",value:function(t,a){var o="AM"===t;return 0==a%12?o?0:12:o?a:a+12}},{key:"_triggerEvent",value:function(a,o,n){var l=this._opts;this._dispatchEvent(n+"change",a,{value:l.selectedTime,valueString:t.Date.formatDate(l.selectedTime,l.format),selectedValue:parseInt(o.selectedValue)})}},{key:"_setSelectTimeForMultiple",value:function(a,o){var i,s,n=t.select.bind(t),l=this._is12HourFormat?n(this._periodEle).getValue():"";if("hm-t"===this._opts.timeMultipleSelectBoxType)i=n(this._combinedEle).getValue()+" "+l,o&&(this._initialVal=i);else{var r=n(this._hourEle).getValue(),d=n(this._minuteEle).getValue(),c=this._secondEle.length&&n(this._secondEle).getValue();o&&(this._initialHr=r,this._initialMinute=d,this._initialSecond=c),i=(i=this._opts.format).replace(/(h|H){1,}/,r).replace(/(m){1,}/,d).replace(/(s){1,}/,c).replace(/(t){1,}/,l),s=!0}var _=this._getDateVal(i);return this._opts.selectedTime=_,s&&o&&(this._initialVal=new Date(+_)),new Date(_)}},{key:"_setTimeOnMultipleSelect",value:function(a,o,n){var l=this._is12HourFormat,i=this._opts,s=i.minTime,r=o||a,d=this._getHourVal.bind(this);if("h-m-t"===i.timeMultipleSelectBoxType){var p,_=t.select(this._hourEle),u=t.select(this._minuteEle);(this._isEmpty(_.getAttribute("selectedValue"))||!r)&&(p=o&&!a?d(o.getHours()):s?d(s.getHours()):this._is12HourFormat?12:0,this._setSelectedVal("hour",p,_)),(this._isEmpty(u.getAttribute("selectedValue"))||!r)&&(p=o&&!a?o.getMinutes():s?s.getMinutes():0,this._opts.viewDate.setMinutes(p),this._setSelectedVal("minute",p,u),this._setMinuteVal(this._opts.viewDate,n))}else if("h-m-s-t"===i.timeMultipleSelectBoxType){var v,m=t.select(this._hourEle),g=t.select(this._minuteEle),h=t.select(this._secondEle);(this._isEmpty(m.getAttribute("selectedValue"))||!r)&&(v=o&&!a?d(o.getHours()):s?d(s.getHours()):this._is12HourFormat?12:0,this._setSelectedVal("hour",v,m)),(this._isEmpty(g.getAttribute("selectedValue"))||!r)&&(v=o&&!a?o.getMinutes():s?s.getMinutes():0,this._opts.viewDate.setMinutes(v),this._setSelectedVal("minute",v,g),this._setMinuteVal(this._opts.viewDate,n)),(this._isEmpty(h.getAttribute("selectedValue"))||!r)&&(v=o&&!a?o.getSeconds():s?s.getSeconds():0,this._opts.viewDate.setSeconds(v),this._setSelectedVal("second",v,h),this._setSecondVal(this._opts.viewDate,n))}else{var y;if(this._isEmpty(t.select(this._combinedEle).getAttribute("selectedValue"))||!r){var f=s?d(s.getHours())+":"+s.getMinutes():"12:00";y=(o&&!a?t.Date.formatDate(o,this._opts.format):f).split(" ")[0],t.select(this._combinedEle).setAttribute("selectedValue",y)}}var k=o&&!a?o.getHours():s?s.getHours():0;if("number"==typeof k&&(this._opts.viewDate.setHours(k),l)){var b=this._periodEle,C=t.select(b),D=C.getAttribute("selectedValue");(this._isEmpty(D)||r)&&b&&C.setAttribute("selectedValue",12<=k?"PM":"AM")}}},{key:"_setSelectedVal",value:function(t,a,n){var l=this._opts[t+"Step"];a=o(a/l)*l,n.setAttribute("selectedValue",a)}},{key:"_removeDisabled",value:function(t,a){t.setOptionAttributes(a,"disabled",!1)}},{key:"_isEmpty",value:function(t){return null!==t&&void 0!==t&&0===t.length}},{key:"name",get:function(){return"ztimeinput"}},{key:"attrs",get:function(){return{timeFieldType:"input",minTime:null,maxTime:null,id:null,selectedTime:"12:00 AM",valueUpdate:!1,timeLabelType:"icon",timeLabel:"Time",timeMultipleSelectBoxType:"h-m-t",timeLabelIconClass:null,timeLabelSVGIconId:null,format:"hh:mm tt",hourStep:1,minuteStep:5,secondStep:5}}},{key:"props",get:function(){return{fixedTimeOptions:[],disabledTimeList:[]}}},{key:"EVENTS",get:function(){return["hourchange","minutechange","periodchange","timechange"]}}]),l}();t.registerComponent("ZTimeInput",R),function(t){var a=t.Templates.Utilities,o=t.ztimeinput.Templates,n=t.createSelect;o.children=function(o){return ZT.html(zc0tO214(),o.timeLabel&&ZT.html(zc0tO215(),o.timeLabel.icon&&a.icon(o.timeLabel.icon),o.timeLabel.text&&ZT.html(zc0tO216(),o.timeLabel.text)),o.inputProps?t.createTimeField(o.inputProps):o.singleSelect?n(o.singleSelect):o.multiSelect&&ZT.html(zc0tO217(),o.isCombined?ZT.html(zc0tO218(),n(o.combinedProps),o.combinedPeriodProps&&n(o.combinedPeriodProps)):ZT.html(zc0tO219(),o.hourProps&&n(o.hourProps),o.minuteProps&&n(o.minuteProps),o.secondProps&&n(o.secondProps),o.periodProps&&n(o.periodProps))))}}(ZPeopleComponents);var U=function(a){function o(){return _classCallCheck(this,o),_possibleConstructorReturn(this,_getPrototypeOf(o).apply(this,arguments))}return _inherits(o,t.ZDatePicker),_createClass(o,[{key:"_init",value:function(){var t=this._opts;return this._checkTime=!0,t.minDateTime&&(t.minDate=t.minDateTime,t.maxDate=t.maxDateTime),_get(_getPrototypeOf(o.prototype),"_init",this).apply(this,arguments),!0}},{key:"_validateFormat",value:function(){var t=this._opts.format;this._invalidFormat=!(-1<t.indexOf("d")&&(-1<t.indexOf("h")||-1<t.indexOf("H")))}},{key:"_getTimeSettings",value:function(){var t={},a=this._opts;["timeFieldType","timeMultipleSelectBoxType","minTime","maxTime","hourStep","minuteStep","secondStep","timeLabelType","fixedTimeOptions","disabledTimeList","rtl","timeZone"].forEach(function(o){return t[o]=a[o]}),t.timeLabel=a.timeLabel||this._getI18NText("timeLabel"),t.isCE=this.isCE,t.templateRender=!0,t.format=this._timeFormat,t.viewDate=this._viewDate,t.id=this._elementId+"-timeinput",t.timechange=this._changeHandler.bind(this),a.minDateTime||(t.minDate=a.minDate,t.maxDate=a.maxDate);var o=this;["period","hour","minute"].forEach(function(a){t[a+="change"]=function(t){o._dispatchEvent(a,t,t.detail)}}),t.className=" zdatetimepicker__timebar zh-align"+(3===this._monthsPerView&&this._isBtnsExist()?"left"===a.buttonsAlignment?"right":"left":"center");var n=a.value||a.defaultTime;n&&(t.selectedTime=new Date(+n)),this._data.timeProps=t}},{key:"_changeHandler",value:function(a){var o=a.detail,n=o.selectedTime;o.fromUI&&(this._selectedTime=n,"multiple"===this._opts.selectionType&&this._setTimeForMultiple(n),this._triggerChange(a),this._dispatchEvent("timechange",a,_objectSpread({},this._getSelectedValue(),{selectedTime:n,selectedTimeString:t.Date.formatDate(n,this._timeFormat)})))}},{key:"_validateOpts",value:function(){_get(_getPrototypeOf(o.prototype),"_validateOpts",this).call(this);var t=this._opts;if(["hourStep","minuteStep","secondStep"].forEach(function(a){t[a]=0<+t[a]?t[a]:1}),t.minTime||t.value||t.values.length||!t.defaultTime)t.defaultTime=null;else{var a=this._getDateVal(t.defaultTime);t.defaultTime=a,this._viewDate.setHours(a.getHours(),a.getMinutes(),a.getSeconds(),0)}}},{key:"_setTimeFormat",value:function(t){return t.match(/\b(h|H|m|t|s){1,}(.(h|H|m|t|s){1,})?(.(h|H|m|t|s){1,})?(.(h|H|m|t|s){1,})?\b/)[0]}},{key:"_setFormat",value:function(){var n,l,t=this._opts.format,a=d(t.indexOf("h"),t.indexOf("H")),o=i(i(t.indexOf("d"),t.indexOf("M")),t.indexOf("y"));this._is12HourFormat=-1<t.indexOf("h"),a>o?(this._timeFormat=this._setTimeFormat(t),t=t.replace(this._timeFormat,""),n=d(d(t.lastIndexOf("d"),t.lastIndexOf("M")),t.lastIndexOf("y")),l="_date",this._dateFormat=t):(this._dateFormat=t.substring(o),t=t.replace(this._dateFormat,""),n=d(t.lastIndexOf("m"),t.lastIndexOf("t")),l="_time",this._timeFormat=this._setTimeFormat(t)),this[l+"Format"]=this[l+"Format"].substring(0,n+1)}},{key:"_buildData",value:function(t){_get(_getPrototypeOf(o.prototype),"_buildData",this).call(this),this._doNotBuildTime||this._buildTimeElem(),this._data.isCBar=!0,t&&this._render(),this._doNotBuildTime=void 0}},{key:"_buildTimeElem",value:function(){var t,a;(this._minDateHasTime||this._maxDateHasTime)&&(t=this._checkToUnSetVal("_minTime"),a=this._checkToUnSetVal("_maxTime")),this._getTimeSettings(),(t||a)&&this._setMinMaxVal(t,a)}},{key:"_addTripleCls",value:function(){var t=this._data;3===this._monthsPerView&&Object.keys(t.cBar).length?0>t.className.indexOf("zdatetimepicker--triplecalendar")&&(t.className+=" zdatetimepicker--triplecalendar"):t.className=t.className.replace(/zdatetimepicker--triplecalendar/g,"")}},{key:"_postRender",value:function(){_get(_getPrototypeOf(o.prototype),"_postRender",this).apply(this,arguments),this._timeInstance=t.timeinput(n("#"+this._elementId+"-timeinput")),this._selectedTime=this._timeInstance.getAttribute("value")}},{key:"_postEachRender",value:function(t,a){var n=!a.rendered,l=a.modifiedAttr;(n||-1<["commandBar, monthsPerView"].indexOf(l))&&this._isBtnsExist()&&this._addTripleCls(),_get(_getPrototypeOf(o.prototype),"_postEachRender",this).apply(this,arguments)}},{key:"_closePicker",value:function(t){_get(_getPrototypeOf(o.prototype),"_closePicker",this).call(this,t);var a=this._opts.value;a&&(this._timeInstance.setTime(a),this._selectedTime=a)}},{key:"_setSelectedTime",value:function(){var t=this._minTime,a=this._selectedTime=t?new Date(+t):void 0;return this._timeInstance.setAttribute("viewDate",new Date(+a)),a}},{key:"_setValue",value:function(a){var l=_get(_getPrototypeOf(o.prototype),"_setValue",this).call(this,a,!1);this._setTimeValues(void 0,!0),this._doNotBuildTime=!0,"single"===this._opts.selectionType&&(this._selectedTime=t.timeinput(n("#"+this._elementId+"-timeinput")).getAttribute("selectedTime")),l&&this._buildData(!0)}},{key:"_triggerChange",value:function(t){var a=this._opts;a.immediateCommit&&(this._currentSelected||this._selectedDates.length)&&this._OKClickHandler(t,!0,a.closeOnDateSelect)}},{key:"_OKClickHandler",value:function(){if(!this._selectedTime){var t=this._timeInstance.getAttribute("value");t||(t=new Date(this._minTime||this._getNewDate().setHours(0,0,0,0)),this._timeInstance.setTime(t)),this._viewDate.setHours(t.getHours(),t.getMinutes(),0,0),this._selectedTime=new Date(+t)}this._currentSelected||this._selectedDates.length||this._setSelectedTime(),_get(_getPrototypeOf(o.prototype),"_OKClickHandler",this).apply(this,arguments)}},{key:"_updateValues",value:function(){_get(_getPrototypeOf(o.prototype),"_updateValues",this).call(this);var t=this._opts,a=this._setTimeValues.bind(this);this._timeInstance.setAttribute("valueUpdate",this._valueUpdate),this._valueUpdate?this._valueUpdate&&!t.immediateCommit&&a():"multiple-select-box"===t.timeFieldType?(this._timeInstance.update(),a(!0,!0)):a()}},{key:"_clearValues",value:function(t,a){this._timeInstance.clearTime(),this._timeInstance.refresh(),_get(_getPrototypeOf(o.prototype),"_clearValues",this).call(this,t,a)}},{key:"_setDate",value:function(a,l,i){var s=this._opts;"single"===s.selectionType&&(this._viewDate=new Date(+i)),this._selectedTime=t.timeinput(n("#"+this._elementId+"-timeinput")).getAttribute("selectedTime"),(this._minDateHasTime||this._maxDateHasTime)&&this._setBoundaryValuesForTimeInput(),_get(_getPrototypeOf(o.prototype),"_setDate",this).call(this,a,l,"single"===s.selectionType?this._viewDate:i),0===this._selectedDates.length&&"multiple"===s.selectionType&&this._setTimeValues()}},{key:"_resetValues",value:function(){var t,a;this._valueReset=!0,_get(_getPrototypeOf(o.prototype),"_resetValues",this).call(this,!0),(this._minDateHasTime||this._maxDateHasTime)&&(t=this._checkToUnSetVal("_minTime"),a=this._checkToUnSetVal("_maxTime")),this._minTime&&this._viewDate.setHours(this._minTime.getHours(),this._minTime.getMinutes(),0,0),(t||a)&&this._setMinMaxVal(t)}},{key:"_setTimeValues",value:function(t,a,o){var i,s,d,n=this._opts,l=this._viewDate;!o&&(this._minDateHasTime||this._maxDateHasTime)&&(i=this._checkToUnSetVal("_minTime"),s=this._checkToUnSetVal("_maxTime")),(!1===a?void 0:"single"===n.selectionType||n.value?l:n.values.length?this._getDateVal(n.values[0],n.format):void 0)&&!t&&(d=new Date(l.getTime())).setHours(l.getHours(),l.getMinutes(),l.getSeconds(),0),this._timeInstance.setAttribute("valueUpdate",this._valueUpdate),d&&this._timeInstance.setTime(d),(i||s)&&this._setMinMaxVal(i,s)}},{key:"_getDateVal",value:function(a){return t.Date.parseDate(a,this._timeFormat).date}},{key:"_destroy",value:function(){var t=this._input;t&&t.length&&this.isCE&&t.remove(),this._timeInstance.destroy(),_get(_getPrototypeOf(o.prototype),"_destroy",this).call(this),this._timeInstance=void 0,this._footer=this._input=void 0}},{key:"_setAttribute",value:function(t,a){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:this.element,l=a instanceof Date,i=this._opts,s=!0;if(0>["minTime","maxTime","timeFieldType"].indexOf(t)&&(i[t]=a),"defaultTime"===t&&(this._selectedTime=a?l?new Date(+a):this._getDateVal(a):null,this._viewDate.setHours(a.getHours(),a.getMinutes(),a.getSeconds(),0),this._timeInstance.setAttribute("valueUpdate",!0),this._timeInstance.setTime(a),this._buildData(!0)),-1<["timeFieldType","timeLabelType","timeLabel","timeMultipleSelectBoxType","minTime","maxTime","hourStep","minuteStep","secondStep","disabledTimeList","fixedTimeOptions"].indexOf(t)){if(-1<["minTime","maxTime"].indexOf(t)&&(this["_"+t]=a?l?new Date(+a):this._getDateVal(a):null),this._opts[t]=a,this._buildTimeElem(),this.isCE){var r=this._timeInstance._opts[t];this._timeInstance._opts=this._data.timeProps,this._timeInstance._opts[t]=r}this._timeInstance.setAttribute(t,a)}else s=_get(_getPrototypeOf(o.prototype),"_setAttribute",this).call(this,t,a,n);if(-1<["monthsPerView","commandBar","immediateCommit"].indexOf(t))this._isBtnsExist()&&this._addTripleCls();else if("format"!==t)-1<["rtl","timeZone"].indexOf(t)?this._timeInstance.setAttribute(t,a):"viewDate"===t&&this._timeInstance.setAttribute("viewDate",a);else if(this._validateFormat(),!this._invalidFormat){var d=a.indexOf("h")||a.indexOf("H")||a.indexOf("m"),c=a.substring(d);this._timeInstance.setAttribute("format",c)}this._domChanged=s}},{key:"_setBoundaryValuesForTimeInput",value:function(){var t=this._checkToUnSetVal("_minTime"),a=this._checkToUnSetVal("_maxTime"),o=this._checkLimitValues();this._viewDate.setHours(this._selectedTime.getHours(),this._selectedTime.getMinutes(),0,0),this._resetTimeVal(),o.setMin?(this._timeInstance.setAttribute("maxTime",this._maxTime),this._timeInstance.setAttribute("minTime",void 0),this._timeInstance.refresh()):o.setMax?(this._timeInstance.setAttribute("minTime",this._minTime),this._timeInstance.setAttribute("maxTime",void 0),this._timeInstance.refresh()):(this._timeInstance.setAttribute("minTime",this._minTime),this._timeInstance.setAttribute("maxTime",this._maxTime)),(t||a)&&this._setMinMaxVal(t,a)}},{key:"_resetTimeVal",value:function(){var t=this._resetToToday.bind(this),a=t(new Date(+this._viewDate)),o=t(this._minTime?new Date(+this._minTime):void 0),n=t(this._maxTime?new Date(+this._maxTime):void 0);o&&a&&+a<+o&&(a=new Date(+o)),n&&a&&+a>+n&&(a=new Date(+n)),this._viewDate.setHours(a.getHours(),a.getMinutes(),0,0),this._selectedTime=new Date(+this._viewDate),this._timeInstance.setAttribute("viewDate",this._viewDate),this._timeInstance.setAttribute("selectedTime",this._selectedTime)}},{key:"_resetToToday",value:function(t){if(t){var a=this._getNewDate();t.setDate(a.getDate()),t.setMonth(a.getMonth()),t.setFullYear(a.getFullYear())}return t}},{key:"_checkLimitValues",value:function(){var a=new Date(this._viewDate.getTime()),o=this._minDate,n=this._maxDate,l=t.Date.areDatesEqual.bind(t);return a.setHours(0,0,0,0),this._minDateHasTime||this._maxDateHasTime?{setMin:o&&!l(o,a),setMax:n&&!l(n,a)}:{}}},{key:"_checkToUnSetVal",value:function(t){var a=this[t],o="set"+("_minTime"===t?"Min":"Max"),n=a?new Date(a.getTime()):void 0;return this._checkLimitValues()[o]&&a&&(this["_"+o]=!0,this[t]=void 0),n}},{key:"_setMinMaxVal",value:function(t,a){this._setMin&&t&&(this._minTime=new Date(t.getTime())),this._setMax&&a&&(this._maxTime=new Date(a.getTime())),this._setMin=this._setMax=void 0}},{key:"_setTimeForMultiple",value:function(t){var a=this._selectedDates;if("multiple"===this._opts.selectionType)for(var o=0;o<a.length;o++)a[o].setHours(t.getHours(),t.getMinutes(),0,0)}},{key:"_clearClickHandler",value:function(t,a){var o=this._clear,l=this._doesExist(o);(!t||n(t.target).closest(o).hasClass("is-disabled"))&&t||(l&&this._removeFocus(o),this._clearValues(t,!0!==a&&a),!a&&this._dispatchEvent("clear",t,{valuesObject:[],values:[],options:this._opts}))}},{key:"name",get:function(){return"zdatetimepicker"}},{key:"props",get:function(){return{timeLabelIconClassName:null,fixedTimeOptions:[],disabledTimeList:[],labels:{timeLabel:"Time"},closeOnDateSelect:!1}}},{key:"attrs",get:function(){return{timeMultipleSelectBoxType:"h-m-t",timeFieldType:"input",timeLabelType:"icon",timeLabel:null,timeLabelIconClass:null,timeLabelSVGIconId:null,hourStep:1,minTime:null,maxTime:null,format:"dd/MM/yyyy, hh:mm tt",minuteStep:5,secondStep:5,className:"",defaultTime:null}}},{key:"EVENTS",get:function(){return["hourchange","minutechange","periodchange","timechange"]}}]),o}();t.registerComponent("ZDateTimePicker",t.ZDatePicker,U),function(t){var a=t.zdatetimepicker.Templates,o=t.zdatepicker.Templates,n=t.Templates.Utilities;a.children=function(a){return ZT.html(zc0tO220(),o.children(a),t.createTimeInput(a.timeProps),a.cBar&&n.commandBar(a.cBar))}}(ZPeopleComponents);var W=function(a){function o(){return _classCallCheck(this,o),_possibleConstructorReturn(this,_getPrototypeOf(o).apply(this,arguments))}return _inherits(o,t.CoreComponent),_createClass(o,[{key:"_init",value:function(t,a){this._fromInit=!0,this._appendEle(this._opts.appendTo),this._id=this._getID(),this._namespace="."+this.name,this._validate(a),this._setInitial(),this._fromInit=!1,this._changedAttrs=[]}},{key:"_isAttrChanged",value:function(t){var a=this._changedAttrs;return!this._data.rendered||-1<a.indexOf("all")||-1<a.indexOf(t)}},{key:"_setMainEle",value:function(a){var o=this,n=!1;(a=this._toArr(a)).forEach(function(a){if(a&&!a.mainElement){var l=o._getById(a.id);a.mainElement=l[0],(n="button"===a.ctype)||(a.instance=t[a.ctype](l)),a.container=n?l:a.instance.getElement()}})}},{key:"_destroyComp",value:function(a){if(a){var o=n("#"+a.id,this.element);o.length&&(!this.isCE&&t[a.ctype](o).destroy(),o.remove())}}},{key:"_getById",value:function(t){return n("#"+t,this.element)}},{key:"_getID",value:function(t){return(t?t+"-"+this._id:_get(_getPrototypeOf(o.prototype),"_getID",this).call(this)).replace(/\s/g,"")}},{key:"_validateCount",value:function(t){return d(+t||0,0)}},{key:"_getCanvasContext",value:function(t){return t.querySelector("canvas").getContext("2d")}},{key:"_preRender",value:function(){var t=this._data,a=this._opts;return t.rgb=this._currentColor,t._inPreRender=!0,this._setRenderData(t,a,this.element),t._inPreRender=!1,t}},{key:"_setRenderData",value:function(t,a,o){if(t.rtl=a.rtl,t.closeOnSelect=a.closeOnSelect,!t.rendered||this._domChanged){t.id=this._id;var n=o.attr("tabindex");void 0===n&&(n=0),t.attrs={tabindex:n,title:o[0].title}}var l=this._isAttrChanged.bind(this);l("displayType")&&(t.hasCallout="callout"===a.displayType),l("title")&&(a.title||t.title)&&this._setTitleBarData(t,a)}},{key:"_getRTLBasedPercent",value:function(t){return this._opts.rtl?100-t:t}},{key:"_postEachRender",value:function(a,o){this._storeRef(o,this._opts,a),(!o.rendered||this._domChanged)&&(this._setClassName(o),this._setDimension(),this._reopen&&(t.unBindDocumentEvents(this.element),this._reopen=!1,this.open(null,null,!1)),o.dragged&&this._hideCallout())}},{key:"_setDimension",value:function(){this._opened||this._display(),this._updateDim(),!this._opened&&this._floating&&this._display(!1)}},{key:"_setClassName",value:function(t){var a=this._opts.className||this._opts.zclassName;t.className=" "+(a+" "||"")+this._CLASSES.CONTAINER+(this._opts.rtl?" zh-rtl":"")}},{key:"_storeRef",value:function(t,a,o){var l=this._isAttrChanged.bind(this);l("displayType")&&(this._callout=!1,t.hasCallout&&(this._callout=n(this.element[0].querySelector(".zcolorpicker__pointer")))),l("title")&&(this._titleBar=!1,a.title&&this._storeTitleBarRef(t,a,o)),(l("draggable")||l("title"))&&(a.draggable||t.draggableIns)&&this._initDraggable(t,a,o),this._selectedPan=o.find("."+this._CLASSES.COLORBOX+".is-selected")}},{key:"_validate",value:function(t){this._floating="inline"!==t.type;var a=this._getClrInstance(t.value);"none"===t.value||"transparent"===t.value||a.isValid()||(t.value=this._DEFAULTS.value),this._setClrMode(t.value)}},{key:"_bindEvents",value:function(){this._addEvents({keydown:"keydown"}),this._colorPanEventHandler&&this._addEvents({colorPanEvent:"click mouseover mouseout"},this._container||this.container),this._addEvents({focus:"focusin",blur:"focusout"})}},{key:"_focusHandler",value:function(t){clearTimeout(this._blurTimer),this._focussed||this._trigger("focus",t),this._focussed=!0}},{key:"_blurHandler",value:function(t){var a=this;clearTimeout(this._blurTimer),this._blurTimer=setTimeout(function(){a._focussed=!1,a._trigger("blur",t)})}},{key:"_closeClickHandler",value:function(t){this.close(t)}},{key:"_setInitial",value:function(){this._setValue(this._opts.value)}},{key:"_arrowCallback",value:function(t,a){this.element.removeClass("zcolorpicker--top zcolorpicker--bottom zcolorpicker--left zcolorpicker--right").addClass("zcolorpicker--"+a)}},{key:"_getTitle",value:function(t,a){return t.title||a.getColor("hex").toUpperCase()}},{key:"_hideCallout",value:function(){this._data.hasCallout&&this._display(!1,this._callout)}},{key:"_onDragStart",value:function(){this._data.dragged=!0,this._hideCallout()}},{key:"_keydownHandler",value:function(a){var o=a.keyCode,n=document.activeElement,l=n.tagName;"LI"===l?(o===t.keyCode.ENTER||o===t.keyCode.SPACE)&&n.click():o===t.keyCode.ENTER&&"INPUT"===l&&this._onSubmit(a)}},{key:"_toArr",value:function(t){return Array.isArray(t)?t:[t]}},{key:"_getClrInstance",value:function(a){return t.ColorUtil.getColorInstance(a)}},{key:"_getPosition",value:function(a){return t.Position.get(n(this._opts.forElement),this.element,a)}},{key:"_setSize",value:function(){}},{key:"_setPosition",value:function(){var a=this._opts,o=this.element;if(a.offset)o.css(a.offset);else if(t.Position){var l=a.positionAlterable,i=n(a.forElement),s=this._lastPosition||a.position;if(i.length){"auto"===s&&(s="callout"===a.displayType?"bottom":"bottom-left",l=!0),l=l||"fit";var r={rtl:a.rtl,direction:s,within:a.viewport||a.appendTo,positionAlterable:l,arrow:{element:this._callout,callback:this._arrowCallback.bind(this)}},d=this._getPosition(r);if(d&&d.elementPosition){var c=d.elementPosition;if(a.margin){var _=+a.margin.top||0,u=+a.margin.left||0,p=d.direction.split("-");"top"===p[0]?c.top-=_:"bottom"===p[0]?c.top+=_:"right"===p[0]?c.left+=u:"left"===p[0]&&(c.left-=u)}o.css(c),this._callout&&this._callout.css(d.arrowPosition),this._lastPosition=d.direction}}}}},{key:"_setGradientColors",value:function(t,a){a=a.slice(0);for(var o=c(1/(a.length-1)*100)/100,n=0;1<a.length;)t.addColorStop(n,a.shift()),n+=o;t.addColorStop(1,a.shift())}},{key:"_limit",value:function(t,a,o){return d(i(t,o),a)}},{key:"_setClrMode",value:function(t){var a=this._opts;if(this._colorMode=a.valueColorModel,!this._REGEX.colorMode.test(this._colorMode)){var o=this._getClrInstance(t||a.value);this._colorMode=o.format,a.valueColorModel="auto"}}},{key:"_updateUI",value:function(t){!this._data._inPreRender&&(this._mustRender||this._data.rendered&&!this._domChanged)&&(this._render(),t&&this._setDimension())}},{key:"_updateSelectedColor",value:function(){this._selectedInstance=this._getClrInstance(this._colorInstance.getObject()),this._selectedInstance.initialColor=this._colorInstance.initialColor,this._opts.value=this._noFill?"transparent":this._colorInstance.getColor(this._colorMode,void 0,"auto"===this._opts.valueColorModel)}},{key:"_dragStartHandler",value:function(a){a.button||(this._onPickerDragged(a),this._trigger("dragstart",a),this._addEvents({drag:"mousemove touchmove",dragStop:"mouseup touchend"},t.$document))}},{key:"_dragHandler",value:function(t){this._onPickerDragged(t),this._trigger("drag",t),"touchmove"!==t.type&&t.preventDefault()}},{key:"_dragStopHandler",value:function(a){this._onPickerDragged(a),this._removeEvents("mousemove touchmove mouseup touchend",t.$document),this._trigger("dragstop",a)}},{key:"_display",value:function(){var t=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];((1<arguments.length?arguments[1]:void 0)||this.element)[0].style.display=t?"":"none"}},{key:"_animate",value:function(a,o,l,i){var s=this,r=function(){s._display("close"!==l),i&&i()};o&&t.animationHandler&&!n.isEmptyObject(o)?t.animationHandler({element:a,action:l,animation:o,callback:r}):r()}},{key:"setFocus",value:function(t){var a=this;this._trigger("beforefocus",t)&&-1!==this.element.attr("tabindex")&&(clearTimeout(this._focusTimer),this._focusTimer=setTimeout(function(){a.element[0].focus()},100))}},{key:"_onOpen",value:function(t){this._opened=!0,this._opts.closeOnBodyClick&&this._bindBodyClick(),this.setFocus(t),this._addedByComponent=!0,this.element.attr("aria-hidden",!1),this._addedByComponent=!1,this._bindDocEvents(),this._trigger("open",t)}},{key:"open",value:function(t,a){var o=!(2<arguments.length&&void 0!==arguments[2])||arguments[2];if(this._floating&&this._trigger("beforeopen",a)){this._opened=!1;var n=this._opts;t&&this.setAttributes(t),this._setPosition(),this._widthSet||this._setDimension(),this._animate(this.element,!!o&&n.animation,"open",this._onOpen.bind(this,a)),this._updatePopupList(!0)}}},{key:"_bindDocEvents",value:function(){this._addEvents({docKeydown:"keydown"},t.$document)}},{key:"_unBindDocEvents",value:function(){this._removeEvents("",t.$document)}},{key:"_docKeydownHandler",value:function(a){a.keyCode===t.keyCode.ESCAPE&&this.close(a)}},{key:"_onClose",value:function(t){var a=this._data;this._opened=this._lastPosition=!1,this._unBindDocEvents(),clearTimeout(this._focusTimer),a.dragged=!1,a.hasCallout&&this._display(!0,this._callout),a.closeButton&&n(a.closeButton.mainElement).removeClass("has-focus"),this.element.attr("aria-hidden",!0),this._trigger("close",t)}},{key:"_destroy",value:function(){this._removeEvents("",t.$document),this.element.removeClass(this._CLASSES.CONTAINER).removeAttr("style").empty(),clearTimeout(this._fieldChangeTimer),clearTimeout(this._focusTimer),clearTimeout(this._blurTimer)}},{key:"_trigger",value:function(t,a,o){if(!this._fromInit){var l=this._colorMode,i=this._selectedInstance,s=this._colorInstance;a=a&&a.preventDefault?a:void 0,(o=o||{}).value=o.color=this.getValue(),o.rgb=i.getColor(),o.opacity=i.getAlpha(),o.colorData=i.getObject(l),o.currentValue=s.getColor(l),o.currentRGB=s.getColor(),o.currentOpacity=s.getAlpha(),o.currentColorData=s.getObject(l),o.otherData={};var r=this._selectedPan;return r.length&&(o.otherData.colorPan=r,(r=n(r[0])).attr("data-shade")&&(o.otherData.isShade=!0,o.otherData.baseColor=r.attr("data-base-color"),o.otherData.toneType=r.attr("data-tone-type"),o.otherData.tonePercent=r.attr("data-tone-percent")),o.otherData.theme=r.attr("data-theme")),this._dispatchEvent(t,a,o,void 0,!!a)}return!0}},{key:"getValue",value:function(){return this._opts.value}},{key:"setValue",value:function(t,a){this._setValue(t,a,null,!0)}},{key:"close",value:function(t){this._floating&&this._opened&&this._trigger("beforeclose",t)&&(this._animate(this.element,this._opts.animation,"close",this._onClose.bind(this,t)),this._updatePopupList())}},{key:"_setAttribute",value:function(t,a){return"value"===t?(this._domChanged=!0,void this.setValue(a)):this._setAdvAttr(t,a)}},{key:"_addPalettes",value:function(t,a,o){var n=this,l=this._data,i=[],s="customColorLibraries"===(o=o||"palettes");t&&((t=this._toArr(t)).forEach(function(t){t.isCustom=s;var a=n._getPaletteTemplateData(t);a&&i.push(a)}),this._addToObject(l[o],i,a),l.rendered&&this._updatePalettes(o))}},{key:"_colorPanEventHandler",value:function(t){var a=t.target;if(n(a).is(".".concat(this._CLASSES.COLORBOX))){var l=t.type,i="click"===l,s=this._getColorPanData(a);i&&this._setValue(a.style.backgroundColor,t),this._trigger("colorpan"+l,t,s),i&&this._data.closeOnSelect&&this.close(t)}}},{key:"_getPaletteTemplateData",value:function(t){if("object"===_typeof(t)){var a=t.name||t.heading;if(a&&!this._getPalette(a)){var o={heading:t.heading,name:a,className:t.className,id:t.id||this._getID(a),hasTones:t.hasTones,tones:t.tones,maxColorsCount:this._validateCount(t.maxColorsCount),isCustom:t.isCustom,paletteData:t};return o.colors=this._getPaletteColors(o,t.colors),this._spliceColors(o),o}}}},{key:"_getPaletteColors",value:function(t,a){var o=this,n=[];return a&&this._toArr(a).forEach(function(a){var l=a;("string"==typeof a||Array.isArray(a))&&(a={color:a});var i=o._getClrInstance(a.color);i.isValid()&&n.push({orgObject:l,theme:a.theme,rgb:i.getColor(),title:o._getTitle(a,i),paletteId:t.id,paletteName:t.name,tabindex:o._data.attrs.tabindex,tones:t.hasTones?o._getTones(i,a.tones||t.tones,a):void 0})}),n}},{key:"_spliceColors",value:function(t){var a=this._opts.paletteColumns,o=t.colors,n=t.colorChunks=[];if(o.length||t.isCustom){var l=t.maxColorsCount;if(l&&o.length>l){var s=l-o.length;o.splice(s),t.paletteData.colors.splice(s)}if(o=_toConsumableArray(o),t.isCustom){var r=t.addBtn=this._getAddBtnData(t);o.push(r)}if(a)for(var d=0;d<o.length;d+=a)n.push(o.slice(d,d+a));else n.push(o)}}},{key:"_addToObject",value:function(t,a,o){void 0===o?t.push.apply(t,_toConsumableArray(a)):t.splice.apply(t,[o,0].concat(_toConsumableArray(a)))}},{key:"_getPalette",value:function(t){var a=this._data,o=function(a){return a.name===t},n=t;return"string"==typeof t&&(!(n=a.palettes.find(o))&&a.customColorLibraries&&(n=a.customColorLibraries.find(o))),n}},{key:"_getColorPanData",value:function(t){return{colorpan:t,colorpanData:{color:this._getClrInstance(t.getAttribute("data-zcolor")).getColor(this._colorMode)}}}},{key:"_updateClrSelection",value:function(t){var a=this;t.forEach(function(t){t.selected=t.rgb===a._currentColor,t.tones&&a._updateClrSelection(t.tones)})}},{key:"_getTones",value:function(t,a,o){var n=this;return(a=a||this._getDefaultToneFactors(t)).map(function(a){var l=a.color||a;if("string"==typeof l){var i=n._getClrInstance(l);return{rgb:i.getColor(),baseColor:t.initialColor,title:n._getTitle(a,i,o),theme:o.theme,isShade:"true"}}return n._getTone(t,a,o)})}},{key:"_getDefaultToneFactors",value:function(a){var o=a.getObject(),n=[o.r,o.g,o.b],l=t.ColorUtil.brightness(n),i=240<=l&&255>=l?[.05,.15,.25,.35,.5]:0<=l&&15>=l?[.5,.35,.25,.15,.05]:224<=l&&240>l?[.1,.25,.5,.75,.9]:15<l&&31>=l?[.9,.75,.5,.25,.1]:[.8,.6,.4,.25,.5],s=t.ColorUtil.isDark(n);return i.map(function(t,a){return!(210<=l&&255>=l||0<=l&&38>=l)&&(s=2>=a),{function:s?"lighten":"darken",percent:100*t}})}},{key:"_getTone",value:function(a,o,n){var l=o.function,i=o.percent;if(/^(lighten|darken|tint|shade)$/.test(l)){var s=a.getObject(),r=t.ColorUtil[l]([s.r,s.g,s.b],i/100);r.push(s.a);var d=this._getClrInstance(r);return{rgb:d.getColor(),title:this._getTitle(o,d,n),toneType:l,tonePercent:i,tabindex:this._data.attrs.tabindex,baseColor:a.initialColor,theme:n.theme,isShade:"true"}}}},{key:"_setTitleBarData",value:function(a,o){a.closeButton=!1,a.title=o.isTitleHTMLEncoded?o.title:t.encodeHTML(o.title),o.closeButton&&this._setCloseBtnData.apply(this,arguments)}},{key:"_storeTitleBarRef",value:function(t,a,o){this._titleBar=n(o[0].querySelector("."+this._CLASSES.TITLEBAR)),a.closeButton&&(this._setMainEle(t.closeButton),this._addEvents({closeClick:"mousedown"},n(t.closeButton.mainElement)))}},{key:"_setCloseBtnData",value:function(a,o){var l,n=o.closeSVGIconId;n||!(l=o.closeIconClassName||o.closeIconClass)&&(n="zc__svg--close"),a.closeButton=t.ZButton.getBtnProps({isCE:this.isCE,rtl:this._opts.rtl,templateRender:!0,ctype:"button",className:this._CLASSES.CLOSE,id:this._getID("closebutton"),iconClassName:l,SVGIconId:n,defaultIconClassName:"zcolorpicker__icon",title:this._getI18NText("close")})}},{key:"_getBaseObj",value:function(t){return{ctype:t,isCE:this.isCE,rtl:this._opts.rtl,templateRender:!0,locale:this._opts.locale}}},{key:"_updateColors",value:function(t){var a=t.colors;t.paletteData.colors=a.map(function(t){return t.orgObject}),this._spliceColors(t),this._updateUI(!0)}},{key:"_addColors",value:function(t,a,o){var n=this._getPalette(t);if(n){var l=this._getPaletteColors(n,a),i=n.colors;return this._addToObject(i,l,o),this._updateColors(n),n.paletteData.colors}}},{key:"_removeColors",value:function(t,a){var o=this,n=this._getPalette(t);if(n){a=this._toArr(a);var l=n.colors;a.forEach(function(t){var a=o._getClrInstance(t);if(a.isValid()){var n=a.getColor();l=l.filter(function(t){return t.rgb!==n})}}),n.colors=l,this._updateColors(n)}}},{key:"_removeColorsAt",value:function(t,a){var o=this._getPalette(t);o&&(a=this._toArr(a),o.colors=this._removeFromObjAt(o.colors,a),this._updateColors(o))}},{key:"addColor",value:function(t,a){this._addColors(t,a)}},{key:"insertColorAt",value:function(t,a,o){this._addColors(t,a,o)}},{key:"removeColor",value:function(t,a){this._removeColors(t,a)}},{key:"removeColorAt",value:function(t,a){this._removeColorsAt(t,a)}},{key:"_bindBodyClick",value:function(){t.bindDocumentEvents({element:this.element,forElement:this._opts.forElement,ctype:this.name,closeMethodName:"close",closeEvent:"close"})}},{key:"_getThumbData",value:function(a){if(a){var l,o=a.thumbIconClassName,n=a.thumbSVGIconId;return(n||o)&&t._getIconInfo(o,n,"","",l={}),l}}},{key:"_getThumb",value:function(t){return n(t.querySelector("."+this._CLASSES.SLIDERTHUMB))}},{key:"_getBasicNumberFieldOptions",value:function(){return _objectSpread({},this._getBaseObj("numberfield"),{},{min:0,required:!0,width:"none",spinButtons:"none",clearButton:"none",bindedSpinAndChange:!0})}},{key:"_bindTextField",value:function(t){this._addEvents({fieldChange:"input change paste",textFieldFocus:"focus blur"},t)}},{key:"_textFieldFocusHandler",value:function(t){var a=t.target;a.readonly||n(a).parent()["blur"===t.type||a.readOnly?"removeClass":"addClass"]("has-focus")}},{key:"_setAdvAttr",value:function(t,a){var o=this._opts,n=this._changedAttrs;if("valueColorModel"===t)o[t]=a,this._setClrMode(),this._updateSelectedColor(),n.push("colorField"),this._domChanged=!0;else if(-1<["title","isTitleHTMLEncoded","closeButton","closeIconClass","closeIconClassName","closeSVGIconId"].indexOf(t))o[t]=a,n.push("title"),this._domChanged=!0;else if("draggable"===t||"displayType"===t)o[t]=a,this._reopen=this._opened,n.push(t),this._domChanged=!0;else if("type"===t)o[t]=a,this._floating="inline"!==a,this._floating?this.close():this._display();else if("closeOnSelect"===t)o[t]=a,this._domChanged=!0;else if(-1<["closeOnBodyClick","position","forElement","offset","margin","animation"].indexOf(t))o[t]=a,this._reopen=this._opened,this._domChanged=!0;else{if(!(-1<["locale","labels","rtl"].indexOf(t)))return!1;o[t]=a,n.push("all"),this._domChanged=!0}}},{key:"_initDraggable",value:function(a,o,n){a.draggableIns&&a.draggableIns.destroy(),a.draggableIns=void 0,o.draggable&&o.title&&this._floating&&(a.draggableIns=t.draggable(n,{handle:this._titleBar,cursor:"default",start:this._onDragStart.bind(this)}))}},{key:"_removePalettes",value:function(t,a){var o=this,n=this._data;a=a||"palettes",t&&((t=this._toArr(t)).forEach(function(t){var l=o._getPalette(t);l&&(n[a]=n[a].filter(function(t){return t!==l}))}),this._updatePalettes(a))}},{key:"_removePalettesAt",value:function(t,a){var o=this._data;a=a||"palettes",this._removeFromObjAt(o[a],t),this._updatePalettes(a)}},{key:"_removeFromObjAt",value:function(t,a){return a=this._toArr(a),t.filter(function(t,o){return-1===a.indexOf(o)})}},{key:"addPalette",value:function(t){this._addPalettes(t)}},{key:"insertPaletteBefore",value:function(t,a){var n,o=this._getPaletteTemplateData(a);o&&(n=this._data.palettes.indexOf(o)),this._addPalettes(t,n)}},{key:"insertPaletteAt",value:function(t,a){this._addPalettes(t,a)}},{key:"removePalette",value:function(t){this._removePalettes(t)}},{key:"removePaletteAt",value:function(t){this._removePalettesAt(t)}},{key:"getPaletteColors",value:function(t){var a=this._getPalette(t);if(a)return a.paletteData.colors}},{key:"setPaletteColors",value:function(t,a){var o=this._getPalette(t);o&&(o.colors=this._getPaletteColors(o,a),this._updateColors(o))}},{key:"name",get:function(){return"zcolorpickerbase"}},{key:"attrs",get:function(){return{value:"rgba(0,0,0,1)",valueColorModel:"auto",paletteColumns:10,isTitleHTMLEncoded:!1,title:"",closeButton:!1,closeIconClass:null,closeSVGIconId:null,closeOnSelect:!0,closeOnBodyClick:!0,position:"auto",forElement:null,displayType:"box",type:"popup",draggable:!1,appendTo:null,viewport:null,rtl:null,positionAlterable:null,locale:null}}},{key:"props",get:function(){return{offset:null,margin:null,closeIconClassName:null,labels:{close:"Close"},animation:null}}},{key:"CLASSES",get:function(){return{CONTAINER:"zcolorpicker",RTL:"h-rtl",FLIPY:"h-flipY",ICON:"zcolorpicker__icon",TEXT:"zcolorpicker__text",TITLEBAR:"zcolorpicker__titlebar",CLOSE:"zcolorpicker__close",PALETTE:"zcolorpicker__palette",WITHSHADES:"zcolorpicker__shades",COLORBOX:"zcolorpicker__colorpan",ACTIVE:"is-selected",DISABLED:"is-disabled",NUMBERFIELD:"zcolorpicker__numberfield",COLORFIELD:"zcolorpicker__colorfield",SLIDER:"zslider",SLIDERTHUMB:"zslider__thumb"}}},{key:"EVENTS",get:function(){return["change","select","pick","beforeopen","open","beforeclose","close","colorpanmouseover","colorpanmouseout","colorpanclick","beforefocus","focus","blur","dragstart","drag","dragstop"]}},{key:"_REGEX",get:function(){return{position:/^(bottom-right|bottom-left|top-right|top-left|top|bottom|left|right|center|auto|right-bottom|right-top|left-bottom|left-top)$/,colorMode:t.ColorUtil.REGEX.colorMode}}}]),o}();t.registerComponent("ZColorPickerBase",W),function(t){var a=t.zcolorpickerbase.Templates;a.canvas=function(t){return ZT.html(zc0tO221(),t.rtl?"zh-flipY":"")},a.palette=function(o){return o.colorChunks.length&&ZT.html(zc0tO222(),o.id,o.isCustom,o.className||"",o.name,o.heading&&ZT.html(zc0tO223(),o.heading),o.colorChunks.map(function(n){return o.hasTones?ZT.html(zc0tO224(),n.map(function(t){return ZT.html(zc0tO225(),a.colorpan(t),t.tones.map(function(t){return a.colorpan(t)}))})):ZT.html(zc0tO226(),n.map(function(o){return o.addBtn?ZT.html(zc0tO227(),t.zbutton.Templates.container(o)):a.colorpan(o)}))}))},a.colorpan=function(t){return ZT.html(zc0tO228(),t.isShade,t.paletteName,t.selected?"is-selected":"",t.tabindex,t.toneType,t.theme,t.tonePercent,t.rgb,t.baseColor,t.rgb,t.hidden,t.selected,t.title)};var o=t.Templates.Utilities;a.slider=function(t){return ZT.html(zc0tO229(),t.id,t.className||"",t.opacity?"zcolorpicker__transparentbg":"",a.canvas(t),t.thumbIcon?"":"zslider__circlethumb",t.left,t.thumbIcon&&o.icon(t.thumbIcon))},a.title=function(a){return ZT.html(zc0tO230(),ZT.customHTML(a.title),a.closeButton&&ZT.html(zc0tO231(),t.zbutton.Templates.container(a.closeButton)))}}(ZPeopleComponents);var G=function(o){function l(){return _classCallCheck(this,l),_possibleConstructorReturn(this,_getPrototypeOf(l).apply(this,arguments))}return _inherits(l,t.ZInputField),_createClass(l,[{key:"_init",value:function(t,a){_get(_getPrototypeOf(l.prototype),"_init",this).call(this,t,a);for(var s,r,o=["min","max","step","value","disabled","readonly"],n=0;6>n;n++)s=o[n],r=t.attr(s)||a[s],a[s]=3>n?parseFloat(r):r;this._validateOpts(this._opts),(a.decimalPlaces||a.showThousandSeparator)&&(this._setSeparatorValues(),a.value&&(a.value=this._removeSeparators(a.value+""))),a.value=parseFloat(a.value),this._factor="w3"===a.stepBehavior?this._getFactorValue():1,this._hasAffix=(a.prefix||a.suffix||"").trim().length,a.templateName="zinputfield",this._data.spinButtons&&this._validateSBtnOpts(a)}},{key:"_validateOpts",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this._opts,a=t.min,o=t.max,n=t.step,l=t.decimalPlaces,i=t.longStep,s=this._isNotNull.bind(this);if(s(a)||(a=t.allowNegativeValue?void 0:0),(!s(o)||o<a)&&(o=void 0),!n||0>=n?n=1:n>o-a&&(n=o-a),(+a===a&&0!=a%1||+o===o&&0!=o%1||+n===n&&0!=n%1)&&(this._hasFloatingNumber=!0),(0>l||20<l)&&(l=0),!i&&s(o)&&s(a)){var _=2*n;i=_>o?_/(o-a):_}t.min=a,t.max=o,t.step=n,t.decimalPlaces=l,t.longStep=i;for(var m,u=["min","max","readonly","disabled","spinButtonsType","maxLength"],p=0;6>p;p++)m=u[p],this._data[m]=t[m];this._dispatchEvent("optionschanged",{})}},{key:"_getPattern",value:function(){return/[[\]{}()*+?\\^$|#]/g}},{key:"_postEachRender",value:function(t,a){var o=a.modifiedAttr;_get(_getPrototypeOf(l.prototype),"_postEachRender",this).apply(this,arguments),a.spinButtons&&("spinButtonsType"===o||"spinButtons"===o)&&this._toggleSpinBtnStates(),this._data.rendered||this._setInitialValue()}},{key:"_toggleBtnDisplay",value:function(t,a,o){var n=this._clearButton,l="split"===this._opts.spinButtonsType?this._buttons:this._buttonPane;(o?n.add(l):a?n:l)[t?"addClass":"removeClass"]("zh-dnone")}},{key:"_setInitialValue",value:function(){var t=this._opts,a=t.value,o=this._data.spinButtons,n="always"===t.clearButton;return isNaN(a)&&!t.required?(this._input.val(""),o&&this._toggleSpinBtnStates(),void(n&&this._toggleBtnDisplay(!0,!0))):(a&&!a+"".match("[0-9]")&&(a=isNaN(a)?t.min:this._checkMinAndMax(a)),this._setValue(a),o&&this._toggleSpinBtnStates(),n&&this._toggleBtnDisplay(!1,!0),void(t.previousValue=this._changeDisVal=t.value))}},{key:"_checkMinAndMax",value:function(t){var a=this._opts;return!this._isNotNull(t)||isNaN(t)?a._lastValue||0:t=(t=parseFloat(t))<a.min?a.min:t>a.max?a.max:t}},{key:"_bindEvents",value:function(){this._bindSpinEvents(),this._addEvents({inputEleFocus:"focus",inputEleBlur:"blur",inputEleClick:"click",inputEleChange:"change",inputEleKey:t.Browser.isIE&&9===t.Browser.getIEVersion()?"keyup":"input"},this._input),this.isCE&&this._bindCEInputEvents(),t.Browser.isSafari&&this._addEvents({containerBlur:"blur"})}},{key:"_containerBlurHandler",value:function(t){var a=t.originalEvent,o=this.container;a&&n(a.relatedTarget).closest(".zinputfield")[0]!==o[0]&&o.find(".zh-up").trigger("blur")}},{key:"_inputEleFocusHandler",value:function(t){var a=this._opts;if(a.disabled||a.readonly)return!1;this._hasAffix&&this._handleInputFocus(),this.container.addClass("has-focus"),"focus"===a.clearButton&&this._toggleBtnDisplay(!this._input.val().length,!0),this._mouseDown||this._triggerEvent("focus",t),"focus"===a.spinButtons&&this._toggleBtnDisplay()}},{key:"_inputEleBlurHandler",value:function(t){var a=t.relatedTarget&&n(t.relatedTarget),o=a&&a.closest(".zinputfield"),l=this._opts;if(!(this._mouseDown||a&&o.length&&o[0]===this.container[0])){this.container.removeClass("has-focus"),this._setValue(this._input.val()),!1===this._validateFieldValue()?(this._triggerEvent("change",t),this._triggerEvent("blur",t)):((void 0===this._changeDisVal||parseFloat(this._changeDisVal)!==parseFloat(l.value))&&(this._triggerEvent("change",t),this._changeDisVal=l.value),(!l.isWriter||!this._handleInputBlur(t))&&!this._mouseDown&&this._triggerEvent("blur",t)),this._data.spinButtons&&this._toggleSpinBtnStates();var s=l.clearButton,r="focus"===s,d="focus"===l.spinButtons;r||d?this._toggleBtnDisplay(!0,r,r&&d):"always"===s&&this._toggleBtnDisplay(!1,!0),this._clearTimers()}}},{key:"_validateFieldValue",value:function(){var t=this._opts,a=this._input.val();if(""===a&&!t.required)return this._setValue(""),!1;var n=!1;a=this._extractNumericValue(a);var l=parseFloat(a);if(isNaN(l)||!/^[- . 0-9 e]+$/.test(a))n=!0,l=parseFloat(t._lastValue);else{var i=this._checkMinAndMax(a);i!==l&&(n=!0,t._lastValue=l=i)}t.value!==l&&(n=!0),this._setValue(n?l:t.value)}},{key:"_inputEleClickHandler",value:function(){var t=this._opts;t.readonly||t.disabled||!this._hasAffix||this._input.select()}},{key:"_inputEleChangeHandler",value:function(t){t.stopPropagation()}},{key:"_inputEleKeyHandler",value:function(){this._input.val(this._translateEToA(this._input.val()))}},{key:"_bindSpinEvents",value:function(){("none"!==this._opts.spinButtons||this._opts.spinValues)&&this._addEvents({inputEleMouseWheel:"mousewheel DOMMouseScroll MozMousePixelScroll"},this._input),this._addEvents({inputEleKeyDown:"keydown",inputEleKeyUp:"keyup"},this._input)}},{key:"_unbindSpinEvents",value:function(){this._removeEvents("mousewheel DOMMouseScroll MozMousePixelScroll",this._input)}},{key:"_inputEleKeyDownHandler",value:function(a){var o=this._opts;if(o.disabled||o.readonly)return!1;var n=t.keyCode,l=a.keyCode;if(l!==n.ESCAPE){window.clearTimeout(this._mwTimer),this._prevKDTime=this._currKDTime,this._currKDTime=(new Date).getTime();var i=!1;this._prevKDTime&&this._currKDTime&&600>this._currKDTime-this._prevKDTime&&(i=!0);var s=this._data.spinButtons||o.spinValues,r=!0;l===n.UP||l===n.DOWN?(r=!1,s&&(!i&&(!this._currKUTime||!this._prevKUTime||600<this._currKUTime-this._prevKUTime)&&this._triggerEvent("spinstart",a),this._spinValue(l===n.UP,a.shiftKey,void 0,a))):l===n.PAGE_UP||l===n.PAGE_DOWN?s&&this._setValue(o[l===n.PAGE_UP?"max":"min"]):l===n.ENTER&&(clearTimeout(this._sTimer),this._changeDisVal=o.value,this._setValue(this._input.val()),this._triggerEvent("change",a),o.isWriter&&this._handleEnterKey(o,a)),this._shortcutKey=a.ctrlKey||a.metaKey;var d=this._handleKeyDown(a);return r&&(r=d),r}}},{key:"_inputEleKeyUpHandler",value:function(a){var o=this,n=this._opts;if(n.disabled||n.readonly)return!1;var l=t.keyCode,i=a.keyCode,s=i===l.UP||i===l.DOWN;if(s){if(this._prevKUTime=this._currKUTime,this._currKUTime=+new Date,void 0!==this._prevKUTime&&600>this._currKUTime-this._prevKUTime)return window.clearInterval(this._kuTimer),void(this._kuTimer=window.setInterval(function(){o._currKUTime=+new Date,600<o._currKUTime-o._prevKUTime&&((!n.isWriter||o._canTriggerSEnd(n))&&o._triggerSpinEndEvent(a),window.clearInterval(o._kuTimer),o._prevKDTime=o._prevKUTime=o._currKUTime=o._currKDTime=o._kuTimer=void 0)},200))}else this._prevKUTime=this._currKUTime=void 0;return s&&(!n.isWriter||this._canTriggerSEnd(n))&&this._triggerSpinEndEvent(a),this._prevKDTime=this._currKDTime=void 0,this._handleKeyUp(a)}},{key:"_inputEleMouseWheelHandler",value:function(t){var a=this,o=this._opts;if(o.disabled||o.readonly||!this.container.hasClass("has-focus"))return!1;this._mwTimer||this._triggerEvent("spinstart",t);var n=t.originalEvent,l=n.detail;return this._spinValue(0===l?0>n.wheelDelta:0<l,t.shiftKey,void 0,t),clearTimeout(this._mwTimer),this._mwTimer=setTimeout(function(){a._triggerSpinEndEvent(t),clearTimeout(a._mwTimer),a._mwTimer=void 0},600),!1}},{key:"_extractNumericValue",value:function(t,a){t=this._translateAToE(t+"");var o=this._opts;return this._hasAffix&&(t=this._removeAffixes(t)),(o.showThousandSeparator||o.decimalPlaces)&&(t=this._removeSeparators(t,a)),t.trim()}},{key:"_handleKeyDown",value:function(t){var a=this._opts;if(!this._checkPatternKeys(t))return this._handleShortcutKeys(t);var o=this._input,n=o.val(),l=this._extractNumericValue(n),i=o[0].selectionStart,s=o[0].selectionEnd;l=8===t.keyCode?l.substr(0,i-1):l.substr(0,i)+r(t.keyCode)+l.substr(s,n.length),l=parseFloat(l),!isNaN(l)&&l>a.max&&o[0].selectionStart===s?t.preventDefault():l>=a.min&&(a.value=l),this._data.spinButtons&&this._toggleSpinBtnStates()}},{key:"_handleKeyUp",value:function(a){var o=!0,n=t.keyCode;this._checkPatternKeys(a)?this._triggerEvent("input",a):(o=this._handleShortcutKeys(a),!a.ctrlKey&&!a.metaKey&&(this._shortcutKey=!1));var l=this._input,i=l.val();return this._data.clearButton&&this._toggleBtnDisplay(!i.length,!0),a.keyCode===n.SPACE&&""===i.trim()&&l.val(""),o}},{key:"_triggerSpinEndEvent",value:function(t){this._opts.isWriter&&this._handleSpinEnd(),this._triggerEvent("spinend",t)}},{key:"_triggerEvent",value:function(t,a){var o=this._input.val(),n={value:""===o?this._opts.required?this._opts.min||null:"":parseFloat(this._extractNumericValue(o)),translatedValue:this._translateEToA(o),event:a||{},fromUI:!!a};return n[this.name.replace("z","")]=this.container,this._dispatchEvent(t,a||{},n,void 0,n.fromUI)}},{key:"_clearTimers",value:function(){clearTimeout(this._sTimer),this._data.spinButtons&&this._clearMTimer(void 0,!0),clearInterval(this._kuTimer),this._prevMUTime=this._currMUTime=this._prevKUTime=this._prevKDTime=this._currKUTime=this._currKDTime=this._kuTimer=void 0}},{key:"_checkPatternKeys",value:function(a){var i,o=this._opts,n=t.keyCode,l=a.keyCode;if(i=!a.shiftKey&&(48<=l&&57>=l||8===l||96<=l&&105>=l||69===l),l===n.SPACE&&" "!==o.thousandSeparator){var s=this._input;0===s[0].selectionStart&&s[0].selectionEnd===s.val().length?i=!0:(a.preventDefault(),a.stopPropagation())}var r=o.min;return(o.allowNegativeValue&&!r||this._isNotNull(r)&&-1!==r.toString().indexOf("-"))&&(i=i||189===l||173===l),!i&&(o.decimalPlaces||o.showThousandSeparator&&!o.suppressThousandSeparatorKey)&&(i=this._isSeparator(l)),i}},{key:"_handleShortcutKeys",value:function(a){var o=t.keyCode,n=a.keyCode,l=!0;return this._shortcutKey?(89===n?this._mac&&(l=!1):0>[65,67,86,88,90,89,82,o.LEFT,o.RIGHT].indexOf(n)&&(l=!1),(86===n||91===n)&&this._handlePasteOption()):0>[o.DOWN,o.UP,o.DELETE,o.BACKSPACE,o.LEFT,o.RIGHT,o.TAB,o.ENTER].indexOf(n)&&(l=!1),l}},{key:"_handlePasteOption",value:function(){var t=this._extractNumericValue(this._input.val());this._opts.value=this._checkMinAndMax(t)}},{key:"_spinValue",value:function(t,a){var o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:this._opts[a?"longStep":"step"],n=3<arguments.length?arguments[3]:void 0,l=this._opts,i=this._input.val(),s=i,r=l.min,d=l.max,c=this._isNotNull.bind(this);l.previousValue=l.value,i=this._extractNumericValue(i),(isNaN(i)||""===i.trim())&&(i=t?c(r)?r-l.step:0:c(d)?d+l.step:0),i=parseFloat(i);var _=parseFloat(o);if("w3"===l.stepBehavior&&this._checkModuloValue(i,_,r))i=this._getCorrectedVal(i,_,r,t?1:0);else{var u=i+(t?_:-_);i=this._hasFloatingNumber?parseFloat(u).toFixed(12):u}var p=t?d:r;c(p)&&!isNaN(p)&&(i>d||i<r)&&(i=l.wrapAround?(t?r:d)||l.nullValue:parseFloat(parseFloat(i>d?d:r).toFixed(l.decimalPlaces)));var m={value:i,isValueIncreased:t};this._dispatchEvent("beforespin",n,m)&&this._setValue(m.value),this._data.spinButtons&&this._toggleSpinBtnStates(),this._triggerSpinEvent(n),!s&&this._data.clearButton&&this._clearButton.is(":hidden")&&this._toggleBtnDisplay(!1,!0)}},{key:"_triggerSpinEvent",value:function(t){var a=this._opts,o=a._lastValue;(void 0===o||o!==a.value)&&(!a.isWriter||this._canTriggerSpin(t))&&(this._triggerEvent("spin",t),a._lastValue=a.value)}},{key:"_setValue",value:function(t){var a=this._opts,o=""===t;a._lastValue=isNaN(a.value)?t:a.value;var n=o?t:this._checkMinAndMax(t);if(!o&&!isNaN(n)){if(a.value=n,a.decimalPlaces){var l=n.toString();(a.decimalsForWholeNumber||-1!==l.indexOf("."))&&(l=n.toFixed(a.decimalPlaces)),n=l.replace(".",a.decimalSeparator)}else this._hasFloatingNumber||(n=c(n));return a.showThousandSeparator&&(n=this._insertSeparators(n)),(a.prefix||a.suffix)&&!this.container.hasClass("has-focus")&&(n=this._attachAffixes(n)),n=this._translateEToA(n),this._input.val(n).attr("aria-valuenow",parseFloat(this._extractNumericValue(n))),this.isCE||this.element.val(n),n}a.required?this._input.val(a.value):a.required||(a.value="",this._input.val("").attr("aria-valuenow",""))}},{key:"getValue",value:function(){var t=this._opts,a=t.value;return(t.required||""!==a)&&isNaN(parseFloat(a))?"":a}},{key:"setValue",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this._opts.value;if(!this._muTimer&&!this._kuTimer){var a=this._opts;this._setValue(this._extractNumericValue(t)),this._triggerEvent("change"),a.previousValue=this._changeDisVal=a.value,this._data.spinButtons&&this._toggleSpinBtnStates()}}},{key:"increment",value:function(t){this._spinValue(!0,void 0,t)}},{key:"decrement",value:function(t){this._spinValue(!1,void 0,t)}},{key:"_destroy",value:function(){_get(_getPrototypeOf(l.prototype),"_destroy",this).call(this),t.$window.off("."+this.name)}},{key:"_attachAffixes",value:function(t){var a=this._opts;return((a.prefix||"")+" "+t+" "+(a.suffix||"")).trim()}},{key:"_removeAffixes",value:function(t){var a=this._opts;return t=this._remove(t,a.prefix),t=this._remove(t,a.suffix)}},{key:"_remove",value:function(t,a){var o=this.escapeSequence;if(o instanceof RegExp||(o=this._getPattern()),a&&""!==a.trim()){var n=a.replace(o,"");t=t.replace(o,"").replace(new RegExp(n,"g"),"")}return t}},{key:"_handleInputFocus",value:function(){var a=this.name,o=t.keyCode;n(window).on("keyup.".concat(a),function(t){t.keyCode===o.TAB&&(n(t.target).closest(".zinputfield__textbox").select(),n(window).off("keyup.".concat(a)))}),this._input.val(this._translateEToA(this._extractNumericValue(this._input.val(),!0)))}},{key:"_setAttribute",value:function(t,a){var o=this._opts,n=this._data,i=this._toggleSpinBtnStates&&this._toggleSpinBtnStates.bind(this);if(o[t]=a,"spinValues"!==t||n.spinButtons)if("spinButtonsType"===t)o.templateName="together"===a?"zinputfield":"znumberfield",this._domChanged=!0,this._handleSpinBtns(t,a,o);else if("locale"===t||"thousandSeparator"===t||"showThousandSeparator"===t||"decimalPlaces"===t)this._getSeparatorFromLocale("decimalSeparator",o.locale),this._getSeparatorFromLocale("thousandSeparator",o.locale);else if("allowNegativeValue"===t){var s=o.min;s=a?0<=s?void 0:s:!this._isNotNull(s)||0>s?0:s,o.min=s}else"wrapAround"===t?a&&n.spinButtons?this._buttons.removeClass("is-disabled"):n.spinButtons&&i():_get(_getPrototypeOf(l.prototype),"_setAttribute",this).call(this,t,a);else this["_"+(a?"":"un")+"bindSpinEvents"](),a?this._input.attr("role","spinbutton"):this._input.removeAttr("role");-1!==["min","max","step","decimalPlaces"].indexOf(t)&&(o[t]=parseFloat(a),this._validateOpts(o)),-1!==["min","max","value","showThousandSeparator","allowNegativeValue","thousandSeparator","decimalSeparator","decimalPlaces","prefix","suffix","locale"].indexOf(t)&&(this._setValue(o.value),n.spinButtons&&i()),("prefix"===t||"suffix"===t)&&(this._hasAffix=o.prefix&&""!==o.prefix.trim()||o.suffix&&""!==o.suffix.trim()),("min"===t||"max"===t)&&this._input.attr({"aria-valuemax":o.max,"aria-valuemin":o.min})}},{key:"_bindWriterEvents",value:function(){this._addEvents({wInputEleFocus:"focus"},this._input)}},{key:"_wInputEleFocusHandler",value:function(){this._focusedValue=this._opts.value}},{key:"_handleInputBlur",value:function(t){var a=this._opts;if(parseFloat(this._changeDisVal)!==parseFloat(a.value)&&a.triggerBlurOnSpinButtonClick)return this._triggerBlurEvent(t),!0}},{key:"_handleEnterKey",value:function(t,a){t.triggerBlurOnSpinButtonClick&&this._triggerBlurEvent(a)}},{key:"_canTriggerSEnd",value:function(t){return!t.bindedSpinAndChange||parseFloat(this._changeDisVal)!==parseFloat(t.value)}},{key:"_handleSpinEnd",value:function(){this._opts.bindedSpinAndChange&&(this._changeDisVal=this._opts.value)}},{key:"_triggerBlurEvent",value:function(t){var a=this,o=this._opts,n=this._focusedValue;t?(!n||parseFloat(n)!==parseFloat(o.value))&&(this._triggerEvent("blur",t),this._focusedValue=o.value):this._blurEventTimer=setTimeout(function(){a._triggerEvent("blur",t)},o.blurEventDelay)}},{key:"_handleSBtnUp",value:function(t){this._opts.triggerBlurOnSpinButtonClick&&this._triggerBlurEvent(t)}},{key:"_canTriggerSpin",value:function(t){var a=this;clearTimeout(this._sTimer);var o=this._opts.spinEventTriggerDelay;return!(o&&(this._sEndTimer||(this._sStartTimer=(new Date).getTime()),this._sEndTimer=(new Date).getTime()-this._sStartTimer,o=parseInt(o)-this._sEndTimer,o)&&(this._sTimer=setTimeout(function(){a._triggerEvent("spin",t),a._sEndTimer=void 0},o),1))}},{key:"_getSpinIconInfo",value:function(t,a){var o="increment"===t;return["zc__svg--"+(a?t:o?"plus":"minus"),"zinputfield__spinbutton zh-"+(o?"up":"down")]}},{key:"_validateSBtnOpts",value:function(t){if("split"===t.spinButtonsType){var a=t.spinButtons;t.spinButtons="focus"===a?"always":a,t.templateName="znumberfield"}}},{key:"_toggleSpinBtnStates",value:function(){var t=this._opts;if(!t.wrapAround){var a=t.value,o=a>=t.max,n=isNaN(a)||a<=t.min,l="is-disabled",i=this.container;this._buttons.removeClass(l),o&&i.find(".zh-up").addClass(l),n&&i.find(".zh-down").addClass(l)}}},{key:"_bindSpinButtonEvents",value:function(){this._addEvents({spinBtnMouseDown:"mousedown",spinBtnMouseUp:"mouseup",spinBtnKeyDown:"keydown",spinBtnBlur:"blur"},this._buttons)}},{key:"_spinBtnKeyDownHandler",value:function(a){var o=t.keyCode,n=a.keyCode,l=n===o.UP;(l||n===o.DOWN)&&(this._input.focus(),this._spinValue(l,a.shiftKey,void 0,a))}},{key:"_spinBtnMouseDownHandler",value:function(a){var o=this,l=n(a.target).closest(".zinputfield__spinbutton");if(this._handleMousedownOnControls(a,l)){t.currentNumberField=this.container;var i=l.hasClass("zh-up"),s=a.shiftKey;this._prevMUTime&&this._currMUTime&&!(600<this._currMUTime-this._prevMUTime)||this._triggerEvent("spinstart",a),this._spinValue(i,s,void 0,a),this._blurEventTimer&&clearTimeout(this._blurEventTimer),this._mdTimer=setInterval(function(){l.hasClass("is-disabled")&&(o._triggerSpinEndEvent(a),o._clearMTimer()),o._mouseDown?o._spinValue(i,s,void 0,a):o._clearMTimer()},200)}}},{key:"_handleMousedownOnControls",value:function(a,o){var n=this._opts;if(n.disabled||1<a.which||n.readonly||o.hasClass("is-disabled"))return!1;this._mouseDown=!0,this._hasFocus=!!this._input.is(":focus");var l=t.currentNumberField,i=this.container;return l&&l[0]!==i[0]&&l.removeClass("has-focus"),i.addClass("has-focus"),!0}},{key:"_spinBtnMouseUpHandler",value:function(a){this._spinbuttonsMouseUpHandler(a),t.Browser.isFirefox&&n(a.target).closest(".zinputfield__spinbutton").focus(),t.Browser.isSafari&&this._input.focus()}},{key:"_spinBtnBlurHandler",value:function(t){var a=t.relatedTarget,o=a&&n(a).closest(".zinputfield"),l=!1;if(o&&o.length&&(l=o[0]===this.container[0]),!a||!l){this._spinbuttonsMouseUpHandler(t,!0);var i=this._opts;i.triggerBlurOnSpinButtonClick?this._setValue(i.value):this._input.trigger("blur")}}},{key:"_spinbuttonsMouseUpHandler",value:function(t,a){var o=this;this._clearMTimer();var l=this._opts;clearTimeout(this._mwTimer);var i=n(t.target).closest(".zinputfield__spinbutton").hasClass("is-disabled");if(l.disabled||l.readonly||a&&!this._mouseDown&&i)return!1;this._prevMUTime=this._currMUTime||void 0,this._currMUTime=(new Date).getTime(),this._prevMUTime&&600>this._currMUTime-this._prevMUTime&&(this._clearMTimer(!0),this._muTimer=setInterval(function(){o._currMUTime=(new Date).getTime(),600<o._currMUTime-o._prevMUTime&&(o._canTriggerSpinEnd(l)&&o._triggerSpinEndEvent(t),o._clearMTimer(!0),o._prevMUTime=o._currMUTime=o._mouseDown=void 0)},200)),this._canTriggerSpinEnd(l)&&this._mouseDown&&this._triggerSpinEndEvent(t);var s=this._input;l.isWriter&&this._handleSBtnUp(t),a&&!s.is(":focus")?(this.container.removeClass("has-focus"),this._data.clearButton&&"focus"===l.clearButton&&this._toggleBtnDisplay(!0,!0)):this._hasFocus&&s.attr("tabindex",0).focus(),this._mouseDown=!1}},{key:"_canTriggerSpinEnd",value:function(t){var a=this._changeDisVal;return!t.bindedSpinAndChange||void 0===a||parseFloat(a)!==parseFloat(t.value)}},{key:"_clearMTimer",value:function(t,a){a&&(clearInterval(this._mdTimer),this._mdTimer=void 0,t=!0);var o="_m"+(t?"u":"d")+"Timer";clearInterval(this[o]),this[o]=void 0}},{key:"_getFactorValue",value:function(){var t=this._opts,a=t.min,o=t.max,n=s(10,t.decimalPlaces)||1;if(this._isNotNull(a)){var l=(o-a)*n%(t.step*n)/n;t.max=c((o-l)*n)/n}return n}},{key:"_checkModuloValue",value:function(t,o,n){var l=this._factor,i=o*l,s=n*l%i,r=t*l%i,d=0>n?(s+i)%i:c(s),_=c(0>t?(r+i)%i:r);return a(_)!==d}},{key:"_getCorrectedVal",value:function(t,a,o,n){return(parseInt((t-o)/a)+n)*a+o}},{key:"_setSeparatorValues",value:function(){var a=this._opts;a.locale||(a.locale=t.locale||window.navigator.language);var o=this._getSeparatorFromLocale.bind(this);a.showThousandSeparator&&o("thousandSeparator",a.locale),a.decimalPlaces&&o("decimalSeparator",a.locale)}},{key:"_getSeparatorFromLocale",value:function(a,o){var n=t.localeInfo;if(n){var l=this._opts,s=(n[o]&&n[o].numberFormat||{})[a]||l[a];l[a]=s}}},{key:"_insertSeparators",value:function(t){t+="";for(var a=this._opts,o=a.decimalSeparator,n=t.split(o),l=n[0],i=n[1]?o+n[1]:"",s=/(\d+)(\d{3})/,r=[];s.test(l);)r=l.split(s),l=l.replace(s,r[1]+a.thousandSeparator+r[2]);return l+i}},{key:"_removeSeparators",value:function(t,a){var o=this._opts,n=o.decimalSeparator,l=o.thousandSeparator;return!a&&l&&o.showThousandSeparator?t=t.replace(new RegExp("\\".concat(l),"g"),""):!o.showThousandSeparator&&","!==n&&(t=t.replace(/,/g,"")),!a&&o.decimalPlaces&&"."!==n&&(t=t.replace(new RegExp("\\".concat(n),"g"),".")),t}},{key:"_isSeparator",value:function(t){var a=this._opts,o=this._SEPARATORS;return a.decimalPlaces&&0<=o[a.decimalSeparator].indexOf(t)||!a.suppressThousandSeparatorKey&&0<=o[a.thousandSeparator].indexOf(t)}},{key:"name",get:function(){return"znumberfield"}},{key:"attrs",get:function(){return{step:1,placeholder:"",required:!1,spinValues:!0,wrapAround:!1,thousandSeparator:",",allowNegativeValue:!1,showThousandSeparator:!1,decimalPlaces:null,prefix:null,suffix:null,longStep:null,nullValue:0,decimalSeparator:".",stepBehavior:"default",suppressThousandSeparatorKey:!1,decimalsForWholeNumber:!0,innerHTML:null,isWriter:!1,triggerBlurOnSpinButtonClick:!1,spinEventTriggerDelay:0,bindedSpinAndChange:!1,blurEventDelay:500}}},{key:"EVENTS",get:function(){return["focus","blur","change","input","spin","spinstart","spinend","optionschanged"]}},{key:"escapeSequence",get:function(){return/[[\]{}()*+?\\^$|#]/g}},{key:"_mac",get:function(){return t.OS.isMac()}},{key:"_SEPARATORS",get:function(){return{".":[110,190],",":[188]," ":[32],"'":[222]}}}]),l}();t.registerComponent("ZNumberField",t.ZInputField,G),function(t){var a=t.znumberfield.Templates,o=t.zbutton.Templates.container;a.container=function(t){return ZT.html(zc0tO232(),t.className,t.title,t.width,t.id,t.children&&a.children(t))},a.children=function(t){return ZT.html(zc0tO233(),t.spinButtons&&o(t.decrementProps),t.tabindex,t.min,t.max,t.readonly,t.readonly,t.disabled,t.disabled,t.maxLength,t.clearButton&&o(t.clearButtonProps),t.spinButtons&&o(t.incrementProps))}}(ZPeopleComponents);var K=function(a){function o(){return _classCallCheck(this,o),_possibleConstructorReturn(this,_getPrototypeOf(o).apply(this,arguments))}return _inherits(o,t.ZColorPickerBase),_createClass(o,[{key:"_setDimension",value:function(){this._widthSet||_get(_getPrototypeOf(o.prototype),"_setDimension",this).apply(this,arguments)}},{key:"_updateDim",value:function(){var t=this.element[0];if(!t.style.width){var a=this._opts.width;a||(a=this._checkPxToRem(this._swatch[0].offsetWidth)),parseInt(a)&&(t.style.width=a,this._widthSet=!0)}}},{key:"_storeRef",value:function(t,a){var l=this._isAttrChanged.bind(this);_get(_getPrototypeOf(o.prototype),"_storeRef",this).apply(this,arguments),t.rendered||(this._swatch=this._getById(t.swatchId),this._swatchContext=this._getCanvasContext(this._swatch[0]),this._swatchThumb=n(this._swatch[0].querySelector(".zcolorpicker__mapmarker")),this._bar=this._getById(t.swatchBar.id),this._barContext=this._getCanvasContext(this._bar[0]),this._barThumb=this._getThumb(this._bar[0])),l("opacity")&&(this._opacityBar=this._opacityContext=this._opacityThumb=!1,a.opacity&&this._storeOpacityRef(t)),l("colorPreview")&&t.colorPreview&&a.previousColorInPreview&&this._bindPreview(t.colorPreview),l("commandBar")&&t.commandBar&&this._storeCmdBarRef(t.commandBar),(l("palette")||this._paletteChanged)&&(this._paletteChanged=!1,a.palettes&&a.customColorLibraries&&this._storeCustomLibRef(t,a)),a.colorFields&&this._storeClrFieldRef(t.colorFields)}},{key:"_postEachRender",value:function(t,a){_get(_getPrototypeOf(o.prototype),"_postEachRender",this).apply(this,arguments),a.markerIcon&&this._swatch.find(".zcolorpicker__mapmarker").css({left:a.x+"%",top:a.y+"%"}),this._paintPicker(this._axisProps.x,this._axisProps.y,this._axisProps.z),a.opacity&&this._paintOpacity(),a.colorFields&&this._setClrFieldValues(a.colorFields),this._changedAttrs=[]}},{key:"_setRenderData",value:function(a,n){_get(_getPrototypeOf(o.prototype),"_setRenderData",this).apply(this,arguments);var l=this._isAttrChanged.bind(this);if(l("swatchBars")&&(a.swatchId=this._getID("swatch"),a.swatchBar={id:this._getID("swatchbar"),className:"zcolorpicker__slider",rtl:a.rtl},this._vertical="vertical"===n.barOrientation),l("marker")){a.markerIcon=!1;var i=n.mapMarkerIconClass||n.mapMarkerIconClassName,s=n.mapMarkerSVGIconId;(i||s)&&t._getIconInfo(i,s,"","zcolorpicker__mapmarker",a.markerIcon={})}l("opacity")&&(n.opacity||a.opacity)&&this._setOpacityData(a,n),l("commandBar")&&(!n.immediateCommit||a.commandBar)&&this._setCmdBarData(a,n),l("swatch")&&(a.swatchBar.thumbIcon=this._getThumbData(n.slider),this._configurePickerMethods(n)),l("palette")&&(n.palettes||a.palettes||a.customColorLibraries)&&this._setPaletteData(a,n),l("colorField")&&(n.colorFields||a.colorFields)&&this._setClrFieldData(a,n),(n.colorPreview||a.colorPreview)&&this._setPreviewData(a,n),n.palettes&&this._updateSelection(a,n),a.colorFields&&this._saveFieldValues(a.colorFields,n),this._updatePickerPositionInData(a,n)}},{key:"_bindEvents",value:function(){_get(_getPrototypeOf(o.prototype),"_bindEvents",this).apply(this,arguments),this._addEvents({swatchDrag:"mousedown touchstart"},this._swatch),this._addEvents({swatchPickerDrag:"mousedown touchstart"},this._bar)}},{key:"_swatchDragHandler",value:function(t){this._dragStartHandler(t,"swatch")}},{key:"_swatchPickerDragHandler",value:function(t){this._dragStartHandler(t,"swatchbar")}},{key:"_dragStartHandler",value:function(t,a){var n,l;t.button||("swatch"===a?(l=this._swatch,n=this._swatchThumb):"swatchbar"===a?(l=this._bar,n=this._barThumb):(l=this._opacityBar,n=this._opacityThumb),this._activeContainer={picker:n,type:a,offset:l.offset(),height:l.height(),width:l.width()},_get(_getPrototypeOf(o.prototype),"_dragStartHandler",this).call(this,t),this.setFocus())}},{key:"_onPickerDragged",value:function(t){"touchmove"!==t.type&&t.preventDefault();var o,n,l,a=this._activeContainer;if(-1<["touchstart","touchmove","touchend"].indexOf(t.type)){var i=t.originalEvent;l=(t.changedTouches||i.changedTouches)[0]}var s=l||t;o=s.pageX-a.offset.left,n=a.width;var r=100*this._limit(o/n,0,1);o=s.pageY-a.offset.top,n=a.height;var d=100*this._limit(o/n,0,1),c=this._data;"swatch"===a.type?(c.x=r,c.y=d):c["opacity"===a.type?"o":"z"]=this._vertical?d:r;var _=this._getColorFromCoords();this._skipPickerData=!0,this._setValue(_,t),this._skipPickerData=!1}},{key:"_getCoordsFromColor",value:function(t){var a=this._colorInstance.getPercentageObject(t.boxSelectionTypeDefaultColorModel.toLowerCase());return{x:this._getRTLBasedPercent(parseFloat(a[this._axisProps.x[0]])),y:parseFloat(a[this._axisProps.y[0]]),z:this._getRTLBasedPercent(parseFloat(a[this._axisProps.z[0]])),o:this._getRTLBasedPercent(parseFloat(a.a))}}},{key:"_updatePickerPositionInData",value:function(t,a){if(t.vertical=this._vertical,!this._skipPickerData){var o=this._getCoordsFromColor(a);t.x=o.x,t.y=100-o.y,t.z=o.z,t.o=o.o}if(t.swatchBar.left=t.z,a.opacity){var n=t.opacitySlider;n.left=t.o,n.vertical=this._vertical}}},{key:"_configurePickerMethods",value:function(t){"HSL"===t.boxSelectionTypeDefaultColorModel?(this._paintPicker=this._HSLUtils.paintPicker.bind(this),this._axisProps=this._HSLUtils.getXYProps(t.boxSpectrumHSLColorModel)):(this._paintPicker=this._HSVUtils.paintPicker.bind(this),this._axisProps=this._HSVUtils.getXYProps(t.boxSpectrumHSVColorModel))}},{key:"_onSubmit",value:function(t){this._onOkButtonClick(t)}},{key:"_onOkButtonClick",value:function(t){this.setValue(this._currentColor,t,{triggerChange:!0},!0),this._trigger("ok",t),this.close(t)}},{key:"_onCancelButtonClick",value:function(t){this._revertColor(t),this._trigger("cancel",t),this.close(t)}},{key:"_onBackButtonClick",value:function(t){this._trigger("back",t)}},{key:"_revertColor",value:function(t,a){this.setValue(a||this._selectedInstance.getObject(),t)}},{key:"_setHueStops",value:function(t){this._setGradientColors(t,this._hueColors)}},{key:"_fillCanvas",value:function(t,a){t.fillStyle=a,t.fill()}},{key:"_clearCanvas",value:function(){var t=this._swatchContext,a=this._barContext;t.beginPath(),a.beginPath(),t.clearRect(0,0,t.canvas.width,t.canvas.height),a.clearRect(0,0,a.canvas.width,a.canvas.height),t.rect(0,0,t.canvas.width,t.canvas.height),a.rect(0,0,a.canvas.width,a.canvas.height)}},{key:"_createGradient",value:function(t,a){return a?t.createLinearGradient(0,t.canvas.height,0,0):t.createLinearGradient(0,0,t.canvas.width,0)}},{key:"_setValue",value:function(t,a,o,n){var l=this._getClrInstance("none"===t||"transparent"===t?"transparent":t);if(this._opts.opacity||l.setAlpha(1),l.isValid()){l.initialColor=t;var i=this._currentColor;this._colorInstance=l;var r,s=this._currentColor=this._colorInstance.getColor();(this._fromInit||n||this._opts.immediateCommit&&(!a||!/^(mousedown|mousemove|znumberfieldspin|znumberfieldinput)$/.test(a.type)))&&(this._fromInit||s!==this._selectedInstance.getColor())&&(this._updateSelectedColor(),r=!0),(!this._opts.immediateCommit||n||this._fromInit)&&(this._previousInstance=this._selectedInstance),this._updateUI(),i!==s&&this._trigger("select",a),(r||o&&o.triggerChange)&&this._trigger("pick",a),r&&this._trigger("change",a)}}},{key:"_getColorFromCoords",value:function(){var t=this._axisProps,a=this._data,o={},n=this._getRTLBasedPercent.bind(this);return o[t.x[0]]=n(a.x)+"%",o[t.y[0]]=100-a.y+"%",o[t.z[0]]=n(a.z)+"%",o.a=n(a.o)+"%",o}},{key:"_onClose",value:function(t){this._revertColor(t),_get(_getPrototypeOf(o.prototype),"_onClose",this).call(this,t)}},{key:"setDimension",value:function(){this._setDimension()}},{key:"_destroy",value:function(){var t=this._data;t.colorFields&&this._destroyClrFields(),t.commandBar&&this._destroyCmdBar(t.commandBar),this._paintPicker=void 0,_get(_getPrototypeOf(o.prototype),"_destroy",this).apply(this,arguments)}},{key:"_setAttribute",value:function(a,n){if(!1===_get(_getPrototypeOf(o.prototype),"_setAttribute",this).call(this,a,n)){var i={opacity:/^(opacity|opacityFieldType)$/,colorField:/^(colorFields|colorFieldsList|currentColorField)$/,palette:/^(paletteColumns|palettes|palettesList|customColorLibraries|addIconClassName|addIconClass|addSVGIconId)$/,commandBar:/^(immediateCommit|commandBar|OKButtonLabel|OKButtonClassName|OKButtonClass|cancelButtonLabel|cancelButtonClassName|cancelButtonClass|hideCancelButton|backButtonLabel|backButtonClassName|backButtonClass)$/,colorPreview:/^(colorPreview|previousColorInPreview)$/,swatch:/^(boxSelectionTypeDefaultColorModel|boxSpectrumHSLColorModel|boxSpectrumHSVColorModel)$/,marker:/^(mapMarkerIconClass|mapMarkerIconClassName|mapMarkerSVGIconId)$/};if(this._opts[a]=n,"slider"===a)this._changedAttrs.push("opacity","swatch"),this._domChanged=!0;else if("colorFieldSelect"===a){var s=this._data.colorFields;if(s){var r=s.select;r&&t.select(r.mainElement).setAttributes(n)}}else if(i.opacity.test(a))this._changedAttrs.push("opacity","colorField"),this._domChanged=!0,n||this._setValue(this._currentColor);else for(var d in i)i[d].test(a)&&(this._changedAttrs.push(d),this._domChanged=!0)}}},{key:"_storeCmdBarRef",value:function(t){var a=this;for(var o in t){t[o].forEach(function(t){a._setMainEle(t);var o=a._getById(t.id);o.off().on("click."+a.name,t.zhandler),a._handleFocus(o)})}}},{key:"_setCmdBarData",value:function(a,o){var n=this;if(a.commandBar=!1,!o.immediateCommit&&o.commandBar){var l=o.commandBar;a.commandBar={left:[],right:[],center:[]};var i={OK:this._onOkButtonClick,cancel:this._onCancelButtonClick,back:this._onBackButtonClick},s={};["OK","cancel","back"].forEach(function(a){s[a]=t.ZButton.getBtnProps(_objectSpread({},n._getBaseObj("button"),{},{id:n._getID("zactionbutton-"+a),customAttributes:{actionName:a},size:"small",zhandler:i[a].bind(n),zclassName:o[a+"ButtonClassName"]||o[a+"ButtonClass"],appearance:"OK"===a?"primary":"normal",text:o[a+"ButtonLabel"]||n._getI18NText(a+"ButtonLabel")}))}),["left","right","center"].forEach(function(t){var n=l[t+"Column"],i=n&&n.commands;i&&i.forEach(function(n){if("cancel"!==n||!o.hideCancelButton){var l=s[n];l&&(a.commandBar[t].push(l),s[n]=void 0)}})})}}},{key:"_destroyCmdBar",value:function(t){var a=this;if(t)for(var o in t)t[o].forEach(function(t){return a._destroyComp(t)})}},{key:"_setClrFieldData",value:function(t,a){if(this._destroyClrFields(),a.colorFields){var o=a.colorFieldsList||["hex","rgb","hsv","hsl","cmyk"];if((o=o.filter(function(t){return/^(hex|rgb|cmyk|hex|hsv|hsl)$/.test(t)}))&&o.length){var n=t.colorFields={hexFieldId:this._getID("hexfield")},l=a.currentColorField||a.defaultColorField;return l=-1===o.indexOf(l)?o[0]:l,1<o.length&&this._createClrFieldSelect(n,o,l),n.includeHexClass=a.opacity||!a.opacity&&!n.select,void this._onModeChange(l)}}t.colorFields=!1}},{key:"_destroyClrFields",value:function(){var t=this,a=this._data,o=a.colorFields;o&&(this._destroyComp(o.select),o.numberFields.forEach(function(a){return t._destroyComp(a)}),a.colorFields=!1)}},{key:"_storeClrFieldRef",value:function(t){(this._isAttrChanged("colorField")||this._fromModeChange)&&("hex"===t.currentMode&&this._bindTextField(this._getById(t.hexFieldId)),this._setMainEle(t.select),this._setMainEle(t.numberFields))}},{key:"_setClrFieldValues",value:function(t){if(!this._skipFieldUpdate){var a=t.propValues;"hex"===t.currentMode&&this._getById(t.hexFieldId).val(a.hex),t.numberFieldProps.forEach(function(o,n){t.numberFields[n].instance.setAttribute("value",a[o])})}}},{key:"_saveFieldValues",value:function(t,a){if(!this._skipFieldUpdate){var o=t.currentMode,n=this._colorInstance,l=t.propValues={};if("hex"===o){var i=n.getColor("hex",!1,!1);l[o]=i}var s=n.getObject(o);t.numberFieldProps.forEach(function(t){var o;"a"===t?(o=n.getAlpha(),o="decimal"===a.opacityFieldType?o:c(100*o),l.a=parseInt(o)):o=parseInt(s[t]),l[t]=o})}}},{key:"_onModeChange",value:function(t,a){var s,r,o=this,n=this._data.colorFields,l=this._opts,i=n.numberFieldProps=_toConsumableArray(this._MODEPROPS[t]);n.currentMode=l.currentColorField=t;var d=n.hexFieldId;d&&this._getById(d).off(),"cmyk"!==t&&(l.opacity?(i.push("a"),s=!0):n.select&&(r=!0)),n.opacity=s,n.labels=i.map(function(t){return o._getI18NText(o.PROP_EXP[t]+"Field")}),r&&n.labels.push("");var c=n.numberFields=n.numberFields||[];"hex"===t&&i.shift(),(i.length||c.length)&&this._updateNumberFieldSettings(i,c),a&&this._trigger("colorfieldlistchange",a)}},{key:"_fieldChangeHandler",value:function(t){var i,s,a=n(t.target),o=a[0].id,l=this._data.colorFields;o===l.hexFieldId?(s="hex",i=a.val()):(s=l.numberFields.find(function(t){return t.id===o}).colorProperty,i=t.detail.value);var r=l.propValues;for(var d in r[s]=i,r=_objectSpread({},r))/(s|v|l|c|m|y|k)/.test(d)&&(r[d]+="%");"decimal"!==this._opts.opacityFieldType&&(r.a/=100),this._skipFieldUpdate=!0,this._setValue(r,t),this._skipFieldUpdate=!1}},{key:"_createClrFieldSelect",value:function(t,a,o){var l=this;t.select=n.extend(!0,{},this._getBaseObj("select"),{id:this._getID("colorFields"),options:a.map(function(t){return{label:l._getI18NText(t.toUpperCase()),value:t,selected:o===t}}),zclassName:"zcolorpicker__selectbox",change:function(t){l._fromModeChange=!0,l._onModeChange(t.detail.value,t),l._updateUI(),l._fromModeChange=!1},dropdownList:{appendTo:this.element}},this._opts.colorFieldSelect)}},{key:"_paintOpacity",value:function(){var t=this._opacityContext;t.beginPath(),t.clearRect(0,0,t.canvas.width,t.canvas.height),t.rect(0,0,t.canvas.width,t.canvas.height);var a=this._createGradient(t,this._vertical),o=this._colorInstance.getObject();this._setGradientColors(a,["rgba(".concat(o.r,", ").concat(o.g,", ").concat(o.b,", 0)"),"rgb(".concat(o.r," ,").concat(o.g," ,").concat(o.b,")")]),this._fillCanvas(t,a)}},{key:"_storeOpacityRef",value:function(t){var a=this._opacityBar=this._getById(t.opacitySlider.id);this._opacityContext=this._getCanvasContext(a[0]),this._opacityThumb=this._getThumb(a[0]),this._addEvents({opacityBarDrag:"mousedown touchstart"},a)}},{key:"_setOpacityData",value:function(t,a){t.opacitySlider=t.opacity=!1,a.opacity&&(t.opacity=!0,t.opacitySlider={id:this._getID("opacityslider"),className:"zcolorpicker__opacityslider",rtl:t.rtl,opacity:!0,thumbIcon:this._getThumbData(a.slider)})}},{key:"_opacityBarDragHandler",value:function(t){this._dragStartHandler(t,"opacity")}},{key:"_updateNumberFieldSettings",value:function(t,a){var o=this;this.element.find(".zcolorpicker__colormodefield").hide(),t.forEach(function(t,n){var l=o._getFieldSettings(t),i=a[n],s=o._getI18NText(o.PROP_EXP[t]+"Field");if(i){i.instance.setAttributes(l),o._display(!0,i.container.parent()),i.label=s}else{var d=o._getBasicNumberFieldOptions();d.id=o._getID("znumberfield-"+n),["change","spin","input","spinend"].forEach(function(t){d[t]=o._fieldChangeHandler.bind(o)}),(i=_objectSpread({},d,{},l)).label=s,a.push(i)}i.colorProperty=t}),a.slice(0,t.length).forEach(function(t){t.container&&(t.container.next("label")[0].childNodes[1].textContent=t.label)})}},{key:"_getFieldSettings",value:function(t){var a={max:100,step:1,suffix:"",decimalPlaces:0};return"a"===t&&"decimal"===this._opts.opacityFieldType?(a.step=.01,a.decimalPlaces=2,a.max=1):/^(s|l|v|c|m|y|k|a)$/.test(t)?a.suffix="%":/^(r|g|b)$/.test(t)?a.max=255:"h"===t&&(a.max=359),a}},{key:"_getBasicNumberFieldOptions",value:function(){var t=_get(_getPrototypeOf(o.prototype),"_getBasicNumberFieldOptions",this).call(this);return t.className="zcolorpicker__othercolormodefield zcolorpicker__colorfield",t}},{key:"_setPreviewData",value:function(t,a){var o,n;(t.colorPreview=!1,a.colorPreview)&&(a.previousColorInPreview&&(o=this._previousInstance.getColor(),n=this._getID("previouscolor")),t.colorPreview={color:t.rgb,previousColor:o,previousColorId:n})}},{key:"_bindPreview",value:function(t){this._addEvents({prevPreviewClick:"mousedown"},this._getById(t.previousColorId))}},{key:"_prevPreviewClickHandler",value:function(t){this._revertColor(t,this._data.colorPreview.previousColor)}},{key:"_setPaletteData",value:function(t,a){t.palettes=t.customColorLibraries=!1,a.palettes&&(t.palettes=[],t.customColorLibraries=[],this._addPalettes(a.palettesList),this._addPalettes(a.customColorLibraries,null,"customColorLibraries"))}},{key:"_updateSelection",value:function(t){var a=this,o=function(t){return a._updateClrSelection(t.colors)};t.palettes.forEach(o),t.customColorLibraries.forEach(o)}},{key:"_updatePalettes",value:function(t){var a=this._data,o=this._opts,n=function(t){return t.paletteData};"palettes"===t?o.palettesList=a.palettes.map(n):o.customColorLibraries=a.customColorLibraries.map(n),this._paletteChanged=!0,this._updateUI(!0)}},{key:"_storeCustomLibRef",value:function(t){var a=this;t.customColorLibraries.forEach(function(t){var o=t.addBtn;a._setMainEle(o);var l=o.mainElement;l.paletteName=t.name,a._handleFocus(n(l),a.name),a._addEvents({addBtnClick:"mousedown"},n(l)),a._addEvents({delKey:"keydown"},a._getById(t.id))})}},{key:"_addBtnClickHandler",value:function(t){var a=n(t.target).closest(".zbutton")[0];this._skipPickerData=!0,this.addColor(a.paletteName,this._colorInstance.getColor()),t.target=a,this._skipPickerData=!1,t.stopPropagation()}},{key:"_delKeyHandler",value:function(a){if(a.keyCode===t.keyCode.DELETE){var o=a.target;if(n(o).is(".".concat(this._CLASSES.COLORBOX))){var l=this._getColorPanData(o);if(this._trigger("beforecolorpanremove",a,l)){var i=a.currentTarget.getAttribute("data-palettename");this._removeColors(i,o.getAttribute("data-zcolor")),this._trigger("colorpanremove",a,l)}}}}},{key:"_getAddBtnData",value:function(a){var o=a.addBtn;if(o)return o;var n=this._getID(a.name)+"-addicon",l=this._opts,i=l.addSVGIconId,s=l.addIconClassName||l.addIconClass;i||s||(i="zc__svg--add addColorIcon");var r=t.ZButton.getBtnProps(_objectSpread({},this._getBaseObj("button"),{},{id:n,iconClassName:s,SVGIconId:i,defaultIconClassName:"zcolorpicker__addcoloricon",title:this._getI18NText("addcolor"),addBtn:!0}));return this._domChanged&&this._destroyComp(r),r}},{key:"addCustomColorsLibrary",value:function(t){this._addPalettes(t,void 0,"customColorLibraries")}},{key:"insertCustomColorsLibraryBefore",value:function(t,a){var n,o=this._getPaletteTemplateData(a);o&&(n=this._data.customColorLibraries.indexOf(o)),this._addPalettes(t,n,"customColorLibraries")}},{key:"insertCustomColorsLibraryAt",value:function(t,a){this._addPalettes(t,a,"customColorLibraries")}},{key:"removeCustomColorsLibrary",value:function(t){this._removePalettes(t,"customColorLibraries")}},{key:"removeCustomColorsLibraryAt",value:function(t){this._removePalettesAt(t,"customColorLibraries")}},{key:"name",get:function(){return"zadvancedcolorpicker"}},{key:"attrs",get:function(){return{opacity:!0,mapMarkerIconClass:null,mapMarkerSVGIconId:null,colorPreview:!0,previousColorInPreview:!0,colorFields:!0,defaultColorField:"hex",currentColorField:"hex",opacityFieldType:"percent",palettes:!1,paletteColumns:0,addIconClass:null,addSVGIconId:null,immediateCommit:!1,closeOnSelect:!1,OKButtonLabel:null,OKButtonClass:null,cancelButtonLabel:null,cancelButtonClass:null,hideCancelButton:!1,backButton:!0,backButtonLabel:null,backButtonClass:null,boxSelectionTypeDefaultColorModel:"HSV"}}},{key:"props",get:function(){return{slider:null,mapMarkerIconClassName:null,addIconClassName:null,OKButtonClassName:null,cancelButtonClassName:null,backButtonClassName:null,colorFieldsList:null,colorFieldSelect:{width:"none",dropdownList:{viewport:window}},palettesList:null,customColorLibraries:null,commandBar:{leftColumn:null,centerColumn:null,rightColumn:{commands:["cancel","OK"]}},boxSpectrumHSVColorModel:{xAxis:"saturation",yAxis:"value"},boxSpectrumHSLColorModel:{xAxis:"hue",yAxis:"saturation"},labels:{close:"Close",addcolor:"Add Color",HSV:"HSV",RGB:"RGB",HSL:"HSL",CMYK:"CMYK",HEX:"HEX",opacityField:"A",hexField:"HEX",hueField:"H",saturationField:"S",valueField:"V",lightnessField:"L",redField:"R",greenField:"G",blueField:"B",cyanField:"C",magentaField:"M",yellowField:"Y",keyField:"K",OKButtonLabel:"OK",cancelButtonLabel:"Cancel",backButtonLabel:"Back"}}}},{key:"CLASSES",get:function(){return{CONTAINER:"zcolorpicker zcolorpicker--advanced"}}},{key:"EVENTS",get:function(){return["cancel","back","ok","beforecolorpanadd","colorpanadd","beforecolorpanremove","colorpanremove","colorfieldlistchange"]}},{key:"_MODEPROPS",get:function(){return{hsv:["h","s","v"],rgb:["r","g","b"],hex:["hex"],hsl:["h","s","l"],cmyk:["c","m","y","k"]}}},{key:"PROP_EXP",get:function(){return{h:"hue",s:"saturation",v:"value",l:"lightness",r:"red",g:"green",b:"blue",a:"opacity",hex:"hex",c:"cyan",m:"magenta",y:"yellow",k:"key"}}},{key:"_hueColors",get:function(){return["rgba(255, 0, 0, 1)","rgba(255, 255, 0, 1)","rgba(0, 255, 0, 1)","rgba(0, 255, 255, 1)","rgba(0, 0, 255, 1)","rgba(255, 0, 255, 1)","rgba(255, 0, 0, 1)"]}},{key:"_HSVUtils",get:function(){return{fill:function(t,a,o,n){var l=a===o?this._barContext:this._swatchContext,i=a===o&&this._vertical||t===o,s=this._createGradient(l,i);"hue"===o?this._setHueStops(s):"saturation"===o?this._setGradientColors(s,["rgba(255,255,255,1)",n||"rgba(255,255,255,0)"]):"value"===o&&this._setGradientColors(s,["rgba(0,0,0,1)",n||"rgba(0,0,0,0)"]),this._fillCanvas(l,s)},getValueLayer:function(t){return"rgba(0, 0, 0, "+(1-t/100)+")"},paintPicker:function(t,a,o){this._clearCanvas();var n=this._colorInstance.getObject("hsv"),l=this._swatchContext,i=this._barContext,s=this._HSVUtils.fill.bind(this,a,o),r=this._HSVUtils.getValueLayer.bind(this,parseFloat(n.v));"value"===o?(s("hue"),s("saturation"),this._fillCanvas(l,r()),s("value",this._getClrInstance({h:n.h,s:n.s,v:"100%"}).getColor())):"hue"===o?(this._fillCanvas(l,this._getClrInstance({h:n.h,s:"100%",v:"100%"}).getColor()),s("saturation"),s("value"),s("hue")):"saturation"===o&&(s("hue"),this._fillCanvas(l,"rgba(255,255,255,"+(1-parseFloat(n.s)/100)+")"),s("value"),s("saturation",this._getClrInstance({h:n.h,s:"100%",v:"100%"}).getColor()),this._fillCanvas(i,r()))},getXYProps:function(t){var a,o,n;switch(t.xAxis+"-"+t.yAxis){case"hue-saturation":a="hue",o="saturation",n="value";break;case"saturation-hue":a="saturation",o="hue",n="value";break;case"hue-value":a="hue",o="value",n="saturation";break;case"value-hue":a="value",o="hue",n="saturation";break;case"value-saturation":a="value",o="saturation",n="hue";break;default:a="saturation",o="value",n="hue"}return{x:a,y:o,z:n}}}}},{key:"_HSLUtils",get:function(){return{fill:function(t,a,o,n){var l=a===o?this._barContext:this._swatchContext,i=a===o&&this._vertical||t===o,s=this._createGradient(l,i);"hue"===o?this._setHueStops(s):"saturation"===o?this._setGradientColors(s,["rgba(128,128,128,1)",n||"rgba(128,128,128,0)"]):"lightness"===o&&(s.addColorStop(0,"rgb(0,0,0)"),n?s.addColorStop(.5,n):(s.addColorStop(.5,"rgba(0,0,0,0)"),s.addColorStop(.5,"rgba(255,255,255,0)")),s.addColorStop(1,"rgb(255,255,255)")),this._fillCanvas(l,s)},getLightnessLayer:function(t){return 50>t?"rgba(0, 0, 0, ".concat(1-t/50,")"):50<t?"rgba(255, 255, 255, ".concat((t-50)/50):void 0},paintPicker:function(t,a,o){this._clearCanvas();var n=this._colorInstance.getObject("hsl"),l=this._swatchContext,i=this._barContext,s=this._HSLUtils.fill.bind(this,a,o),r=this._HSLUtils.getLightnessLayer.bind(this,parseFloat(n.l));switch(o){case"lightness":s("hue"),s("saturation"),s("lightness",this._getClrInstance({h:n.h,s:n.s,l:"50%"}).getColor());break;case"hue":this._fillCanvas(l,this._getClrInstance({h:n.h,s:"100%",l:"50%"}).getColor()),s("saturation"),s("lightness"),s("hue");break;case"saturation":s("hue"),s("lightness"),s("saturation",this._getClrInstance({h:n.h,s:"100%",l:"50%"}).getColor());var d=r();d&&this._fillCanvas(i,d)}},getXYProps:function(t){var a,o,n;switch(t.xAxis+"-"+t.yAxis){case"saturation-hue":a="saturation",o="hue",n="lightness";break;case"hue-lightness":a="hue",o="lightness",n="saturation";break;case"lightness-hue":a="lightness",o="hue",n="saturation";break;case"lightness-saturation":a="lightness",o="saturation",n="hue";break;case"saturation-lightness":a="saturation",o="lightness",n="hue";break;default:a="hue",o="saturation",n="lightness"}return{x:a,y:o,z:n}}}}}]),o}();t.registerComponent("ZAdvancedColorPicker",t.ZColorPickerBase,K),function(t){var a=t.zadvancedcolorpicker.Templates,o=t.zcolorpickerbase.Templates,n=t.Templates.Utilities;a.children=function(t){return ZT.html(zc0tO234(),t.hasCallout&&ZT.html(zc0tO235()),t.title&&o.title(t),t.swatchId,o.canvas(t),t.markerIcon?n.icon(t.markerIcon):ZT.html(zc0tO236(),t.x,t.y),t.eyeDropper&&o.eyeDropper(t),t.colorPreview&&a.colorPreview(t.colorPreview),o.slider(t.swatchBar),t.opacitySlider&&o.slider(t.opacitySlider),t.colorFields&&a.colorFields(t.colorFields),t.palettes&&t.palettes.map(function(t){return o.palette(t)}),t.customColorLibraries&&t.customColorLibraries.map(function(t){return o.palette(t)}),t.commandBar&&a.commandBar(t.commandBar))},a.colorFields=function(o){return ZT.html(zc0tO237(),o.select?"":"zh-aligncenter",o.opacity?"":"zcolorpicker__withoutopacity",o.select&&t.createSelect(o.select),o.currentMode,"hex"===o.currentMode&&a.hexField(o),o.numberFields&&o.numberFields.map(function(a){return ZT.html(zc0tO238(),t.createNumberField(a),a.label)}))},a.colorPreview=function(t){return ZT.html(zc0tO239(),t.color,t.previousColor&&ZT.html(zc0tO240(),t.previousColorId,t.previousColor))},a.commandBar=function(t){return ZT.html(zc0tO241(),t.left.length&&ZT.html(zc0tO242(),a.colContent(t.left)),t.center.length&&ZT.html(zc0tO243(),a.colContent(t.center)),t.right.length&&ZT.html(zc0tO244(),a.colContent(t.right)))},a.colContent=function(a){return a.map(function(a){return t.zbutton.Templates.container(a)})},a.hexField=function(t){return ZT.html(zc0tO245(),t.hexFieldId,t.labels[0],t.labels[0])}}(ZPeopleComponents);var Y=function(a){function o(){return _classCallCheck(this,o),_possibleConstructorReturn(this,_getPrototypeOf(o).apply(this,arguments))}return _inherits(o,t.ZColorPickerBase),_createClass(o,[{key:"_onSubmit",value:function(t){this.close(t)}},{key:"_setAlpha",value:function(t,a){var o=this._colorInstance.getObject();o.a=t,this._trigger("beforefocus",a)&&this._data.opacityField.container.find("input").focus(),this._setValue(o,a)}},{key:"_setRenderData",value:function(a,n){_get(_getPrototypeOf(o.prototype),"_setRenderData",this).apply(this,arguments),a.closeOnSelect=!n.opacity&&n.closeOnSelect;var l=this._isAttrChanged.bind(this);if(l("noColorButton")&&(a.noColorBtn&&this._getById(a.noColorBtn.id).off(),a.noColorBtn=!1,n.noColorButton&&(a.noColorBtn={id:this._getID("nocolorbtn"),label:n.noColorButtonLabel||this._getI18NText("noColorButtonLabel")},t._getIconInfo(n.noColorIconClassName||n.noColorIconClass,n.noColorSVGIconId,"zc__svg--zcolorpicker-nocolor","zcolorpicker__icon",a.noColorBtn.icon={}))),l("defaultColorButton")&&(a.defaultColor&&this._getById(a.defaultColor.id).off(),a.defaultColor=!1,n.defaultColorButton)){var i=this._getClrInstance(n.defaultValue);a.defaultColor={id:this._getID("defaultcolorbtn"),label:n.defaultColorButtonLabel||this._getI18NText("defaultColorButtonLabel"),rgb:i.isValid()?i.getColor():this._DEFAULTS.defaultValue}}l("advancedPicker")&&(n.advancedPicker||a.advancedPicker)&&this._setMoreClrsData(n,a),l("colorField")&&(n.colorField||a.colorField)&&this._setClrFieldData(a,n),l("opacity")&&(n.opacity||a.opacity)&&this._setOpacityData(a,n),l("palette")&&this._setPaletteData(a,n),n.colorField&&(a.colorField.rgb=a.rgb),a.opacity&&this._setOpacityLeft(a),this._updateSelection(a,n)}},{key:"_setAdvPickerData",value:function(t,a){var o=this,l=t.advancedPickerOptions,i=n.extend(!0,{},this._getBaseObj("advancedcolorpicker"),this._DEFAULTS.advancedPickerOptions,l,{isFromPicker:!0,type:"inline",hideCancelButton:!0,immediateCommit:!1,closeButton:!1,palettes:!1,value:t.value,valueColorModel:t.valueColorModel,colorFieldSelect:{dropdownList:{appendTo:this.element}}});i.id||(i.id=this._getID("advancedpicker")),["Ok","Cancel","Back","Select","ColorfieldListChangeHandler"].forEach(function(t){i[t.toLowerCase()]=o._advPickerCallback.bind(o,o["_advPicker"+t+"Handler"])}),a.advancedPicker?a.advancedPicker.instance.setAttributes(i):a.advancedPicker=i}},{key:"_advPickerCallback",value:function(t,a){var o=a.detail;o.fromUI&&(a=a.originalEvent,t.call(this,a,o))}},{key:"_postEachRender",value:function(t,a){_get(_getPrototypeOf(o.prototype),"_postEachRender",this).apply(this,arguments),a.colorField&&this._updateColorField(),a.opacity&&this._updateOpacityValues(),this._changedAttrs=[]}},{key:"_storeRef",value:function(t,a){_get(_getPrototypeOf(o.prototype),"_storeRef",this).apply(this,arguments);var l=this.element,i=this._isAttrChanged.bind(this);if(t.rendered||(this._showHideContainer=n(this.element[0].querySelector(".zcolorpicker__showhidecontainer")),this._container=this._basicPicker=n(this.element[0].querySelector(".zcolorpicker__default")),this._borderThickness=l.outerHeight()-l.height()||0),i("colorField")&&(this._colorBox=!1,a.colorField&&this._storeClrFieldRef(t.colorField,a)),i("opacity")&&(this._opacityCanvasContext=this._opacitySlider=!1,a.opacity&&this._storeOpacityRef(t,a)),i("advancedPicker")&&(this._advPicker=!1,a.advancedPicker&&this._storeAdvPickerRef(t,a)),i("noColorButton")&&a.noColorButton){var s=this._getById(t.noColorBtn.id);this._addEvents({noClrClick:"click"},s)}if(i("defaultColorButton")&&a.defaultColorButton){var r=this._getById(t.defaultColor.id);this._addEvents({defaultClrClick:"click"},r)}}},{key:"_makeSeen",value:function(t){var a=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];t.css("visibility",a?"visible":"hidden")}},{key:"_makeUnSeen",value:function(t){this._makeSeen(t,!1)}},{key:"_storeOpacityRef",value:function(t){var a=this._opacitySlider=this._getById(t.opacitySlider.id);this._opacityCanvasContext=this._getCanvasContext(a[0]),this._setMainEle(t.opacityField),this._addEvents({dragStart:"mousedown touchstart"},a)}},{key:"_validate",value:function(t){_get(_getPrototypeOf(o.prototype),"_validate",this).apply(this,arguments),t.paletteColumns=this._validateCount(t.paletteColumns),t.otherUsedColorsHasLimit&&(t.otherUsedColorsLimit=this._validateCount(t.otherUsedColorsLimit)),t.defaultValue||(t.defaultValue=t.value)}},{key:"_noClrClickHandler",value:function(t){this._setValue("none",t,{noColorButtonClick:!0}),this._data.closeOnSelect&&this.close(t)}},{key:"_defaultClrClickHandler",value:function(t){this._setValue(this._opts.defaultValue,t,{defaultColorButtonClick:!0}),this._data.closeOnSelect&&this.close(t)}},{key:"_onPickerDragged",value:function(t){"touchmove"!==t.type&&t.preventDefault();var o,a=this._opacitySlider.offset();if(-1<["touchstart","touchmove","touchend"].indexOf(t.type)){var n=t.originalEvent;o=(t.changedTouches||n.changedTouches)[0]}var i=(o||t).pageX-a.left,s=this._opacitySlider.width(),r=100*this._limit(i/s,0,1);r=this._getRTLBasedPercent(r),this._setAlpha(c(r)/100,t)}},{key:"_updateColorField",value:function(){if(this._colorBox&&!this._skipClrFieldUpdate){var t=this._colorInstance.getColor(this._data.colorField.colorMode,void 0,!1);this._colorBox.val(t),this._colorBox.attr("aria-value",t),this._updateColorBoxTitle()}}},{key:"_onOpen",value:function(){_get(_getPrototypeOf(o.prototype),"_onOpen",this).apply(this,arguments),this._updateColorBoxTitle()}},{key:"_updateColorBoxTitle",value:function(){if(this._colorBox&&this._opened){var t=this._colorBox[0];t.title=t.clientWidth<t.scrollWidth?this._colorBox[0].value:""}}},{key:"_fieldChangeHandler",value:function(t){var a=this;clearTimeout(this._fieldChangeTimer),this._fieldChangeTimer=setTimeout(function(){var o=a._colorBox.val();a._updateColorBoxTitle();var n=a._getClrInstance(o);a._skipClrFieldUpdate="input"===t.type,n.isValid()?a._setValue(n.getObject(),t):a._updateColorField(),a._skipClrFieldUpdate=!1})}},{key:"_calcDimension",value:function(){var t=0;this._titleBar&&(t=this._titleBar.outerHeight()),this._showHideContainer[0].style["max-height"]="calc(100% - "+this._checkPxToRem(t)+")";var a=this._basicPicker[0].offsetWidth;this._pickerWd=a?this._checkPxToRem(a):"";var o=this._basicPicker[0].offsetHeight;this._pickerHt=o?this._checkPxToRem(o+t):"",this._advPickerWd=this._advPickerHt=0;var n=this._advPicker;if(n){this._data.advancedPicker.instance.setDimension();var l=n.width(),i=n.height();this._advPickerWd=l?this._checkPxToRem(l):"",this._advPickerHt=i?this._checkPxToRem(i+t):""}}},{key:"_setSize",value:function(){this._updateDim()}},{key:"_updateDim",value:function(){this._widthSet=!1,this.element.is(":visible")&&(this._setPickerDim("",""),this._calcDimension(),this._advPickerVisible?this._setPickerDim(this._advPickerWd,this._advPickerHt):this._setPickerDim(this._pickerWd,this._pickerHt),this._widthSet=!0)}},{key:"_setPaletteData",value:function(t,a){t.palettes=[],t.defaultPalette=[],t.otherUsedColors=t.standardPalette=!1,this._setDefaultPaletteData(),a.standardColors&&this._setStandardPaletteData(),this._addPalettes(a.otherPalettes),a.otherUsedColors&&this._setRecentColorsPalette()}},{key:"_setStandardPaletteData",value:function(){var t=this._opts,a=this._getPresetColors(t.standardColorsPalette);a&&(this._data.standardPalette=this._getPaletteTemplateData({heading:t.standardColorsHeading||this._getI18NText("standardColorsHeading"),name:"standardcolors",colors:a.colors}))}},{key:"_setDefaultPaletteData",value:function(){var t=this._opts,a="custom"===t.defaultPaletteType&&t.customPalette;if(!a){var o=this._getPresetColors("preset");a={colors:o.colors,hasTones:!0,tones:o.tones}}a.heading=a.heading||t.defaultPaletteHeading||this._getI18NText("defaultColorsHeading"),a.name="themecolors",this._data.defaultPalette=this._getPaletteTemplateData(a)}},{key:"_setPickerDim",value:function(t,a){this.element.css({width:t,height:a})}},{key:"_getPresetColors",value:function(t){return this.presetPalettes[t]}},{key:"_updatePalettes",value:function(){this._opts.otherPalettes=this._data.palettes.map(function(t){return t.paletteData}),this._updateUI(!0)}},{key:"_advPickerCancelHandler",value:function(t){this.close(t)}},{key:"_advPickerBackHandler",value:function(t){this._switchToBasic(t)}},{key:"_focusMoreColors",value:function(){this._getById(this._data.moreColorBtn.id).focus()}},{key:"_advPickerOkHandler",value:function(t,a){this._setValue(a.rgb,t,a,!0),this._floating?this.close(t):this._addToRecentColors(t)}},{key:"_advPickerColorfieldListChangeHandler",value:function(t,a){this._trigger("colorfieldlistchange",t,a)}},{key:"_advPickerSelectHandler",value:function(t,a){this._setValue(a.currentRGB,t,a,!1,!0)}},{key:"_addToRecentColors",value:function(t){var a=this._opts;!a.otherUsedColors||this._noFill||this._defaultColor||this._selectedPan.length||!this._trigger("beforeotherusedcoloradd",t)||(a.otherUsedColorsList=this._addColors(this._data.otherUsedColors,this._selectedInstance.getColor(),a.otherUsedColorsHasLimit?0:void 0),this._trigger("otherusedcoloradd",t))}},{key:"_triggerChange",value:function(t,a){this._avoidPickTrigger||((this._fromInit||this._currentColor!==this._selectedInstance.getColor())&&(this._updateSelectedColor(),this._trigger("change",t,a)),this._trigger("pick",t,a))}},{key:"_triggerSelect",value:function(t,a,o){a!==this._currentColor&&this._trigger("select",t,o)}},{key:"_updateSelection",value:function(t){var a=this,o=_toConsumableArray(t.palettes);o.push(t.defaultPalette),t.standardPalette&&o.push(t.standardPalette),t.otherUsedColors&&o.push(t.otherUsedColors),o.forEach(function(t){return a._updateClrSelection(t.colors)})}},{key:"_setAdvancedPickerValue",value:function(t){this._opts.advancedPicker&&(this._data.advancedPicker.instance.setAttributes({value:t}),this._advPicker.removeClass("zcolorpicker"))}},{key:"_setValue",value:function(t,a,o,n,l){var i="none"===t||"transparent"===t,s=this._getClrInstance(i?"rgba(0,0,0,0)":t);if(s.isValid()){s.initialColor=t;var r=this._currentColor;this._colorInstance=s,this._currentColor=s.getColor(),this._noFill=o&&o.noColorButtonClick||i,this._defaultColor=o&&o.defaultColorButtonClick,l||(this._mustRender=!0,this._updateUI(),this._mustRender=!1),this._triggerSelect(a,r,o),l||(this._triggerChange(a,o),this._advPickerVisible&&this._setAdvancedPickerValue(s.getObject()),(n||this._fromInit)&&this._addToRecentColors(a))}}},{key:"_moreClrClickHandler",value:function(){this._advPickerVisible=!0,this._setAdvancedPickerValue(this._currentColor),this._setPickerDim(this._advPickerWd,this._advPickerHt),this._makeSeen(this._advPicker),this._setTransitionMargin("-"+this._pickerWd),this._reposition()}},{key:"_switchToBasic",value:function(){this._advPickerVisible&&(this._advPickerVisible=!1,this._setPickerDim(this._pickerWd,this._pickerHt),this._makeSeen(this._basicPicker),this._setTransitionMargin(0),this._opened?this._reposition():this._makeUnSeen(this._advPicker),this._updateColorBoxTitle())}},{key:"_addTransitionEvents",value:function(){var a=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],o=this._showHideContainer;a?this._addEvents({pickerSwitch:t._transitionEnd},o):this._removeEvents("",o)}},{key:"_setTransitionMargin",value:function(t){this._basicPicker.css(this._opts.rtl?"margin-right":"margin-left",t)}},{key:"_pickerSwitchHandler",value:function(t){this._showHideContainer.is(n(t.currentTarget))&&(this._advPickerVisible?(this._makeUnSeen(this._basicPicker),this._data.advancedPicker.instance.setFocus()):(this._opened&&this._focusMoreColors(),this._setAdvancedPickerValue(this._selectedInstance.getObject()),this._makeUnSeen(this._advPicker),this._avoidPickTrigger=!0,this._setValue(this._selectedInstance.initialColor,t),this._avoidPickTrigger=!1),this._addTransitionEvents(!1),this._addTransitionClass(!1))}},{key:"_updateCurrentColor",value:function(){this._colorInstance=this._selectedInstance,this._currentColor=this._colorInstance.getColor()}},{key:"_addTransitionClass",value:function(){var t=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];this.element[t?"addClass":"removeClass"]("zcolorpicker--transition")}},{key:"_reposition",value:function(){!this._data.dragged&&this._floating&&(this._addTransitionEvents(),this._addTransitionClass(),this._setPosition())}},{key:"_onClose",value:function(t){this._opened=!1,this._avoidPickTrigger=!0,this._switchToBasic(t),this._setValue(this._selectedInstance.initialColor,t,null,!0),this._setAdvancedPickerValue(this._selectedInstance.getObject()),_get(_getPrototypeOf(o.prototype),"_onClose",this).apply(this,arguments),this._avoidPickTrigger=!1}},{key:"_getPosition",value:function(t){var a=this;t.computeElementDim=!1;var n=this._borderThickness,l=parseInt(this._advPickerHt),i=parseInt(this._advPickerWd),s=parseInt(this._pickerHt),r=parseInt(this._pickerWd);return t.callbacks={beforeComputingDir:{dimensionModifier:function(t,o){var c,_;a._advPickerVisible?(c=i,_=l):(c=d(i,r),_=d(l,s)),o.width=c+n,o.height=_+n}},beforeComputingPos:{dimensionModifier:function(t,o){a._advPickerVisible||(o.width=r+n,o.height=s+n)}}},_get(_getPrototypeOf(o.prototype),"_getPosition",this).call(this,t)}},{key:"_destroy",value:function(){this.isCE||(this._destroyPicker(),this._destroyComp(this._data.opacityField)),_get(_getPrototypeOf(o.prototype),"_destroy",this).apply(this,arguments)}},{key:"_destroyPicker",value:function(){this._advPicker&&(this._data.advancedPicker.instance.destroy(),this._advPicker=void 0)}},{key:"_setRecentColorsPalette",value:function(){var t=this._opts;this._data.otherUsedColors=this._getPaletteTemplateData({heading:t.otherUsedColorsHeading||this._getI18NText("otherUsedColorsHeading"),name:"otherusedcolors",colors:t.otherUsedColorsList,maxColorsCount:t.otherUsedColorsHasLimit&&t.otherUsedColorsLimit})}},{key:"_setOpacityLeft",value:function(t){t.opacitySlider.left=this._getRTLBasedPercent(c(100*this._colorInstance.getAlpha()))}},{key:"_setOpacityData",value:function(t,a){if(a.opacity){t.opacity=!0;var i,s,n=100,l="%";"decimal"===a.opacityFieldType&&(n=1,i=.01,l="",s=2);var r=this._opacityChangeHandler.bind(this),d=_objectSpread({},this._getBasicNumberFieldOptions(),{},{id:this._getID("opacityfield"),max:n,suffix:l,step:i,decimalPlaces:s,className:"zcolorpicker__opacityfield",spin:r,change:r,input:r,customAttributes:{"aria-label":this._getI18NText("opacityField")}});t.opacityField?t.opacityField.instance.setAttributes(d):t.opacityField=d,t.opacitySlider={id:this._getID("opacityslider"),rtl:t.rtl,opacity:!0,thumbIcon:this._getThumbData(a.opacitySlider)}}else this._destroyComp(t.opacityField),t.opacitySlider&&this._getById(t.opacitySlider.id).off(),t.opacity=t.opacityField=t.opacitySlider=!1}},{key:"_updateOpacityValues",value:function(){this._setOpacitySliderClr(),this._setOpacityField()}},{key:"_setOpacitySliderClr",value:function(){var t=this._colorInstance.getObject(),a=this._opacityCanvasContext;a.beginPath();var o=this._colorInstance.getColor("rgb",void 0,!1),n=a.canvas;a.rect(0,0,n.width,n.height),a.clearRect(0,0,n.width,n.height);var l=a.createLinearGradient(0,0,n.width,0);this._setGradientColors(l,["rgba(".concat(t.r,", ").concat(t.g,", ").concat(t.b,", 0)"),o]),a.fillStyle=l,a.fill()}},{key:"_setOpacityField",value:function(){if(!this._skipAlphaFieldUpdate){var t=this._colorInstance.getAlpha();this._data.opacityField.instance.setAttribute("value","decimal"===this._opts.opacityFieldType?t:c(100*t))}}},{key:"_opacityChangeHandler",value:function(t){var a=t.detail.value;this._skipAlphaFieldUpdate=!0,this._setAlpha("decimal"===this._opts.opacityFieldType?a:a/100,t),this._skipAlphaFieldUpdate=!1}},{key:"_setClrFieldData",value:function(t,a){if(t.colorField&&this._getById(t.colorField.id).off(),t.colorField=!1,a.colorField){var o=a.colorFieldOptions,n=o.colorMode;t.colorField={colorMode:this._REGEX.colorMode.test(n)?n:this._colorMode,id:this._getID("colorfield"),label:this._getI18NText("colorField"),preview:o.preview,readonly:o.readonly}}}},{key:"_storeClrFieldRef",value:function(t){this._colorBox=this._getById(t.id),this._bindTextField(this._colorBox)}},{key:"_storeAdvPickerRef",value:function(t){var a=t.advancedPicker,o=this._getById(t.moreColorBtn.id);this._addEvents({moreClrClick:"click"},o),this._setMainEle(a);var l=this._advPicker=n(a.mainElement);this._advPickerVisible||this._makeUnSeen(l)}},{key:"_setMoreClrsData",value:function(a,o){if(o.advancedPicker&&this._getById(o.advancedPicker.id).off(),a.advancedPicker){var n=o.moreColorBtn={id:this._getID("morecolors"),label:a.advancedPickerButtonLabel||this._getI18NText("advancedPickerButtonLabel")};t._getIconInfo(a.advancedPickerIconClassName||a.advancedPickerIconClass,a.advancedPickerSVGIconId,"zc__svg--zcolorpicker-advancedpicker","zcolorpicker__icon zbutton__icon",n.icon={}),t._getIconInfo(a.advancedPickerArrowIconClassName||a.advancedPickerArrowIconClass,a.advancedPickerArrowSVGIconId,"zc__svg--rightarrow","zcolorpicker__icon zh-arrowicon zh-alignright",o.rightArrow={}),this._setAdvPickerData(a,o)}else this._destroyPicker(),o.advancedPicker=o.moreColorBtn=!1}},{key:"_setAttribute",value:function(t,a){if("valueColorModel"===a&&(this._changedAttrs.push("advancedPicker"),this._domChanged=!0),!1===_get(_getPrototypeOf(o.prototype),"_setAttribute",this).call(this,t,a)){var l={defaultColorButton:/^(defaultValue|defaultColorButton|defaultColorButtonLabel)$/,noColorButton:/^(noColorButton|noColorButtonLabel|noColorIconClassName|noColorSVGIconId)$/,palette:/^(defaultPaletteHeading|defaultPaletteType|customPalette|standardColors|standardColorsHeading|standardColorsPalette|paletteColumns|otherPalettes|otherUsedColors|otherUsedColorsHeading|otherUsedColorsList|otherUsedColorsHasLimit|otherUsedColorsLimit)$/,colorField:/^(colorField|colorFieldOptions)$/,opacity:/^(opacity|opacitySlider|opacityFieldType)$/,advancedPicker:/^(advancedPicker|advancedPickerIconClassName|advancedPickerArrowIconClassName|advancedPickerSVGIconId|advancedPickerArrowSVGIconId|advancedPickerButtonLabel|advancedPickerOptions)$/};for(var i in this._opts[t]=a,l)l[i].test(t)&&(this._changedAttrs.push(i),this._domChanged=!0,"opacity"!==t||a||this._setValue(this._currentColor))}}},{key:"name",get:function(){return"zcolorpicker"}},{key:"attrs",get:function(){return{defaultValue:"rgba(0,0,0,1)",defaultColorButton:!0,defaultColorButtonLabel:null,noColorButton:!0,noColorButtonLabel:null,noColorIconClass:null,noColorSVGIconId:null,defaultPaletteHeading:null,defaultPaletteType:"preset",standardColors:!0,standardColorsHeading:null,standardColorsPalette:"ms-office",colorField:!1,opacity:!1,opacityFieldType:"percent",advancedPicker:!0,advancedPickerButtonLabel:null,advancedPickerIconClass:null,advancedPickerSVGIconId:null,advancedPickerArrowIconClass:null,advancedPickerArrowSVGIconId:null,otherUsedColors:!0,otherUsedColorsHasLimit:!0,otherUsedColorsLimit:10,otherUsedColorsHeading:null,closeOnSelect:!0}}},{key:"props",get:function(){return{customPalette:null,otherPalettes:[],otherUsedColorsList:[],advancedPickerOptions:{commandBar:{leftColumn:{commands:["back"]},rightColumn:{commands:["cancel","OK"]},middleColumn:!1}},noColorIconClassName:null,advancedPickerIconClassName:null,advancedPickerArrowIconClassName:null,colorFieldOptions:{colorMode:"auto",readonly:!1,preview:!0},opacitySlider:{thumbIconClassName:null,thumbSVGIconId:null},labels:{noColorButtonLabel:"No Fill",defaultColorButtonLabel:"Default Color",defaultColorsHeading:"Preset Colors",standardColorsHeading:"Standard Colors",otherUsedColorsHeading:"Other Used Colors",advancedPickerButtonLabel:"More Colors",colorField:"Color Field",opacityField:"Opacity Field"}}}},{key:"EVENTS",get:function(){return["beforeotherusedcoloradd","otherusedcoloradd","colorfieldlistchange"]}},{key:"presetPalettes",get:function(){return{preset:{colors:[{color:"#ffffff",tones:[{function:"shade",percent:10},{function:"shade",percent:20},{function:"shade",percent:40},{function:"shade",percent:60},{function:"shade",percent:80},{function:"shade",percent:90},{function:"shade",percent:100}]},"#ef1616","#ef8216","#efb116","#5dc35a","#38d7bb","#16d0ef","#398ef3","#c516ef","ef166f"],tones:[{function:"tint",percent:90},{function:"tint",percent:80},{function:"tint",percent:60},{function:"tint",percent:40},{function:"tint",percent:20},{function:"shade",percent:30},{function:"shade",percent:70}]},vga:{colors:[{color:"000000"},{color:"0000aa"},{color:"00aa00"},{color:"00aaaa"},{color:"aa0000"},{color:"aa00aa"},{color:"aa5500"},{color:"aaaaaa"},{color:"555555"},{color:"5555ff"},{color:"55ff55"},{color:"#55ffff"},{color:"#ff5555"},{color:"#ff55ff"},{color:"#ffff55"},{color:"#ffffff"}]},"ms-office":{colors:[[192,0,0],[255,0,0],[255,192,0],[255,255,0],[146,208,80],[0,176,80],[0,176,240],[0,112,192],[0,32,96],[112,48,160]]}}}}]),o}();t.registerComponent("ZColorPicker",t.ZColorPickerBase,Y),function(t){var a=t.zcolorpicker.Templates,o=t.Templates.Utilities,n=t.zcolorpickerbase.Templates;a.children=function(l){return ZT.html(zc0tO246(),l.hasCallout&&ZT.html(zc0tO247()),l.title&&n.title(l),l.noColorBtn&&a.noColorBtn(l),l.defaultColor&&a.defaultColorBtn(l),l.defaultPalette&&n.palette(l.defaultPalette),l.standardPalette&&n.palette(l.standardPalette),l.palettes&&l.palettes.map(function(t){return n.palette(t)}),l.otherUsedColors&&n.palette(l.otherUsedColors),l.advancedPicker&&ZT.html(zc0tO248(),l.moreColorBtn.id,l.moreColorBtn.label,o.icon(l.moreColorBtn.icon),l.moreColorBtn.label,o.icon(l.rightArrow)),(l.colorField||l.opacity)&&ZT.html(zc0tO249(),l.colorField&&a.colorField(l.colorField),l.opacity&&a.opacity(l)),l.advancedPicker&&t.createAdvancedColorPicker(l.advancedPicker))},a.colorField=function(t){return ZT.html(zc0tO250(),t.preview&&ZT.html(zc0tO251(),t.rgb),t.id,t.readonly,t.label,t.readonly?"h-cursor":"")},a.defaultColorBtn=function(t){return ZT.html(zc0tO252(),t.defaultColor.id,t.defaultColor.label,t.defaultColor.rgb,t.defaultColor.label)},a.noColorBtn=function(t){return ZT.html(zc0tO253(),t.noColorBtn.id,t.noColorBtn.label,o.icon(t.noColorBtn.icon),t.noColorBtn.label)},a.opacity=function(a){return ZT.html(zc0tO254(),n.slider(a.opacitySlider),t.createNumberField(a.opacityField))}}(ZPeopleComponents);var j=function(a){function o(){return _classCallCheck(this,o),_possibleConstructorReturn(this,_getPrototypeOf(o).apply(this,arguments))}return _inherits(o,t.ZButton),_createClass(o,[{key:"_init",value:function(t,a,n){a.checked=!(!a.checked&&!this.element[0].checked),a.role=n||"checkbox",_get(_getPrototypeOf(o.prototype),"_init",this).apply(this,arguments)}},{key:"_initialRender",value:function(){var t=this.isCE?this.element:n('div[for="'+this.element.attr("id")+'"]'),a=this._data;t.attr("type",a.type),"custom"===this._opts.contentType&&(this.isCE?!a.innerHTML:t.length)?(t.attr(a.attrs),this.container=t,this._postRender(t,this._opts),this._postEachRender(t,a)):this._render()}},{key:"_applyChange",value:function(t,a){var o=this._opts.role;("checkbox"===o||a)&&this._container[t?"addClass":"removeClass"]("is-selected"),"radio"===o&&(this._container.attr("tabindex",t?this._data._prevTabIndex:-1),this._data.attrs.tabIndex=t?this._data._prevTabIndex:-1),this._addedByComponent=!0,this._container.prop("checked",t).attr("aria-checked",t),this.isCE||this.element.prop("checked",t),this._addedByComponent=!1,this._opts.checked=t}},{key:"_bindEvents",value:function(){this._applyChange(this._opts.checked,!0),this._addEvents({click:"click",keydown:"keydown"}),_get(_getPrototypeOf(o.prototype),"_bindEvents",this).call(this)}},{key:"_clickHandler",value:function(a){var o=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],n=2<arguments.length?arguments[2]:void 0;if(!this._container.hasClass("is-disabled")){var l=o;this._container.prop("checked")&&!n&&(l=!1),this._applyChange(l,!1,a),a&&this._dispatchEvent("change",a,{button:this.element,fromUI:!t.isEmpty(a)})}}},{key:"_keydownHandler",value:function(a){var o=t.keyCode;(a.keyCode===o.ENTER||a.keyCode===o.SPACE)&&(this._container.trigger("click"),a.preventDefault())}},{key:"_setAttribute",value:function(t,a){"checked"===t?this._clickHandler({},a):_get(_getPrototypeOf(o.prototype),"_setAttribute",this).call(this,t,a)}},{key:"_destroy",value:function(){this.element.removeClass("zh-dnone"),this._container.removeAttr("aria-label aria-checked").removeClass("is-selected"),_get(_getPrototypeOf(o.prototype),"_destroy",this).call(this)}},{key:"name",get:function(){return"zcheckboxbutton"}},{key:"attrs",get:function(){return{type:"checkbox",name:null,checked:!1}}}]),o}();t.registerComponent("ZCheckboxButton",t.ZButton,j),function(t){var a=t.zcheckboxbutton.Templates,o=t.zbutton.Templates;a.container=function(t){return ZT.html(zc0tO255(),t.text,t.id,t.role,t.type,t.className,t.children&&a.children(t))},a.children=function(t){return ZT.html(zc0tO256(),o.children(t))}}(ZPeopleComponents);var q=function(a){function o(){return _classCallCheck(this,o),_possibleConstructorReturn(this,_getPrototypeOf(o).apply(this,arguments))}return _inherits(o,t.ZCheckboxButton),_createClass(o,[{key:"_init",value:function(t,a){this._opts.templateName="zcheckboxbutton",_get(_getPrototypeOf(o.prototype),"_init",this).call(this,t,a,"radio")}},{key:"_bindEvents",value:function(){var a=this;this._selector=this._opts.isCE?"z-radiobutton":"input[type='radio']";var l=this.element,i=l[0].name,s=n("".concat(this._selector,"[name=").concat(i,"][checked]:last-child"));s.length&&s[0]!==this.element[0]&&(this._opts.checked=!1),_get(_getPrototypeOf(o.prototype),"_bindEvents",this).call(this);var r=n("".concat(this._selector,"[name=").concat(i,"]")),d=r.filter(function(t,o){var i=n(o).data("zradiobutton"),s=i&&o.checked,r=!i&&o!==l[0],d=!r&&a._opts.checked;if(s||r||d)return o});if((!d||!d.length||r&&1===r.length&&r[0]===l[0])&&((r=r.filter(function(t,a){if(!a.disabled&&"true"!==a.getAttribute("data-disabled"))return a}))&&r.length)){var c=r[0];if(c===l[0])this._container[0].setAttribute("tabindex",this._data._prevTabIndex);else{var _=t.radiobutton(c);_.getElement()[0].setAttribute("tabindex",_.getData()._prevTabIndex)}}var u=l.closest(".zbutton--group");(!u.length||!u.data("zselectable"))&&t.selectable&&this._handleSeparateRadio&&this._handleSeparateRadio()}},{key:"getData",value:function(){return this._data}},{key:"_applyChange",value:function(t,a){a=a||!this.element.closest(".zbutton--group").length,_get(_getPrototypeOf(o.prototype),"_applyChange",this).call(this,t,a)}},{key:"handleSelection",value:function(a,o){a&&o.originalEvent&&this._container.trigger("focus"),this._applyChange(a),o&&o.originalEvent&&"mouseup"!==o.originalEvent.type&&a&&this._dispatchEvent("change",o,{button:this.element,fromUI:!t.isEmpty(o)})}},{key:"_clickHandler",value:function(a,n){var l=this.element;return l.closest(".zbutton--group").length?void(a&&this._dispatchEvent("change",a,{button:l,fromUI:!t.isEmpty(a)})):_get(_getPrototypeOf(o.prototype),"_clickHandler",this).call(this,a,n,!0)}},{key:"_setAttribute",value:function(t,a){"checked"===t&&a?(this._opts.checked=a,this._selectItem()):_get(_getPrototypeOf(o.prototype),"_setAttribute",this).call(this,t,a)}},{key:"_destroy",value:function(){var a=this.element.parent();a.length&&a.data("zselectable")&&t.selectable(a).destroy(),_get(_getPrototypeOf(o.prototype),"_destroy",this).call(this)}},{key:"_handleSeparateRadio",value:function(){var o=this.element.parent(),n=this;o.data("zselectable")||t.selectable(o,{items:'.zbutton[type="radio"]:not(.is-disabled)',selectOnFocus:!0,focusItemOnItemMouseover:!1,keyNavigationOptions:{direction:"horizontal",wrapAround:!0},select:function(t){n._updateSelection(t,!0)},deselect:function(t){n._updateSelection(t,!1)}})}},{key:"_updateSelection",value:function(a,o){var n=a.detail.item;t.radiobutton(this.isCE?n[0]:n.prev("input")).handleSelection(o,a)}},{key:"_selectItem",value:function(){var a=this.element,o=t.selectable(a.parent());o.setAttribute("items",".zbutton[type='radio']"),o.deselectAllItems(),o.setAttribute("items",".zbutton[type='radio']:not(.is-disabled)"),o.selectItem(this._container,{},void 0,!0)}},{key:"name",get:function(){return"zradiobutton"}},{key:"attrs",get:function(){return{type:"radio",name:null,checked:!1}}}]),o}();t.registerComponent("ZRadioButton",t.ZCheckboxButton,q);var Z=function(a){function o(){return _classCallCheck(this,o),_possibleConstructorReturn(this,_getPrototypeOf(o).apply(this,arguments))}return _inherits(o,t.ZButton),_createClass(o,[{key:"_init",value:function(){this._opts=t.ZMenuButton.init(this._opts),_get(_getPrototypeOf(o.prototype),"_init",this).apply(this,arguments)}},{key:"_updateIcon",value:function(){var a=this._opts;a.arrowIcon&&t.ZMenuButton.getIconInfo(a)}},{key:"_mousedownHandler",value:function(a){var o=this,n=3===a.which,l=this._opts,i=this._getID(this.element),s=l.disabled;if(!s&&t.menu&&window.setTimeout(function(){return o._showHideMenu(n,i)},l.delay||0),s||n)return a.stopImmediatePropagation(),!1}},{key:"_keydownHandler",value:function(a){var o=!1,l=!1,i=!1,s=a.keyCode,r=t.keyCode,d=this._activeMenu||n("#"+this._opts.menuId);if(s===r.ESCAPE||s===r.TAB?d.is(":visible")&&(d.find(".on-hover").hasClass("zmenu--submenu")?i=!0:(t.menu(d).hide(),s===r.ESCAPE&&a.stopPropagation())):s!==r.ENTER&&s!==r.SPACE||!d?(o=!0,d.is(":visible")?i=!0:(s===r.UP||s===r.DOWN)&&(l=!0)):document.activeElement===this.element[0]&&(o=!0,d.find(".on-hover").length?i=!0:l=!0),i?t.menu(d).handleKeyCode(a):l&&this._showHideMenu(),o)return!1}},{key:"_clickHandler",value:function(t){this._dispatchEvent("click",t,{button:this.element})}},{key:"_bindEvents",value:function(){var a={mousedown:"mousedown",keydown:"keydown",click:"click"};"mouseover"===this._opts.openOn&&(a={mouseEnter:"mouseenter",mouseLeave:"mouseleave"}),this._addEvents(a),this._handleFocus(this._container),t.ShortCut&&t.ShortCut.register(this.element)}},{key:"_showHideMenu",value:function(a,o){var l=this._opts,i=n("#"+l.menuId);if(a||i.is(":visible"))"mouseover"!==this._opts.openOn&&(this._handleState(),t.menu(i).hide());else{var s={menuHide:"zmenuhide."+o+" zhide."+o,menuShow:"zmenushow."+o+" zshow."+o+" zmenusubmenushow."+o+" zsubmenushow."+o,menuSubmenuHide:"zmenusubmenuhide."+o+" zsubmenuhide."+o};"mouseover"===l.openOn&&(s.menuMouseEnter="mouseenter",s.menuMouseLeave="mouseleave"),t.Browser.isFirefox||(s.menuFocus="zmenubeforefocus zbeforefocus zmenubeforesubmenufocus zbeforesubmenufocus"),this._addEvents(s,i),t.menu(i,_objectSpread({rtl:l.rtl},l.menuOptions)),t.menu(i).show({forElement:this._container.data("menuForElement")||this._container}),this._handleState(!0),this._addEvents({windowResize:"resize"},t.$window)}}},{key:"_windowResizeHandler",value:function(){t.currentMenu&&t.menu(t.currentMenu).hide()}},{key:"_menuFocusHandler",value:function(){return!1}},{key:"_mouseLeaveHandler",value:function(a){var o=this,l=this._opts,i="#"+l.menuId;this._mouseEnterFired=!1,this._mouseLeaveTimeout=setTimeout(function(){o._durationLeft&&(o._durationLeft-=(new Date).getTime()-o._closeAfterStartTime);var s=n(a.relatedTarget);s.parents(i).length||s.attr("id")===i||(o._handleState(),t.menu(n("#"+l.menuId)).hide())},50)}},{key:"_menuMouseEnterHandler",value:function(){this._resetLeaveTimer()}},{key:"_menuMouseLeaveHandler",value:function(t){this._mouseLeaveHandler(t)}},{key:"_mouseEnterHandler",value:function(t){this._mouseEnterFired=!0,this._resetLeaveTimer(),this._mousedownHandler(t)}},{key:"_resetLeaveTimer",value:function(){this._durationLeft&&(this._durationLeft-=(new Date).getTime()-this._closeAfterStartTime),this._mouseLeaveTimeout&&clearTimeout(this._mouseLeaveTimeout)}},{key:"_menuHideHandler",value:function(a,o){var n=(a.detail||o||{}).menuitem,l=a.originalEvent;if(l){var i=n&&n.is(".is-fixed"),s="mouseup"===l.type;!i&&s&&(this.element.focus(),this.element.removeClass("has-kfocus")),(s||i)&&this.element.removeClass("has-focus")}this._handleState(),this._removeEvents("resize",t.$window);var r=this._getID(this.element);this._removeEvents("zmenuhide."+r+" zhide."+r,a.detail.element),this._removeEvents("zmenusubmenuhide."+r+" zsubmenuhide."+r,a.detail.element),this._activeMenu=void 0}},{key:"_menuSubmenuHideHandler",value:function(t){this._activeMenu=t.detail.element}},{key:"_menuShowHandler",value:function(t){var a=t.detail;this._activeMenu=a.menu||a.element}},{key:"_handleState",value:function(t){this._container[t?"addClass":"removeClass"](this._opts.activeClass),this.element.attr("aria-expanded",t)}},{key:"_destroy",value:function(){this.element.removeClass("zbutton--menu").removeAttr("aria-haspopup");var t=n("#"+this._opts.menuId),a=this._getID(this.element);this._removeEvents("zmenuhide."+a+" zhide."+a+" zmenubeforefocus zbeforefocus zmenubeforesubmenufocus zbeforesubmenufocus",t),this._removeEvents("zmenushow."+a+" zshow."+a+" zmenusubmenushow."+a+" zsubmenushow."+a+" zmenusubmenuhide."+a+" zsubmenuhide."+a,t),this._activeMenu=void 0,_get(_getPrototypeOf(o.prototype),"_destroy",this).call(this)}},{key:"_setAttribute",value:function(a,l){"menuId"===a&&this.element[0].setAttribute("aria-controls",l);var i=this._opts;if("arrowIconClassName"===a||"arrowIconClass"===a||"arrowSVGIconId"===a)i[a]=l,this._updateIcon(),this._domChanged=!0;else{if("rtl"!==a)return _get(_getPrototypeOf(o.prototype),"_setAttribute",this).call(this,a,l);t.menu(n("#".concat(i.menuId))).setAttribute("rtl",l)}}},{key:"name",get:function(){return"zmenubutton"}},{key:"attrs",get:function(){return{openOn:"click",menuId:null,delay:0,arrowIcon:!0,arrowIconClass:null,arrowSVGIconId:null,activeClass:"is-selected",menuOptions:{}}}},{key:"props",get:function(){return{arrowIconClassName:null}}}],[{key:"getIconInfo",value:function(a){var o=t._getIconInfo(a.arrowIconClassName||a.arrowIconClass,a.arrowSVGIconId,"zc__svg--downarrow zbutton__svg zbutton__menuarrow","zbutton__icon zh-floatright");return a.arrowIcon=!0,a.arrowIconInfo=o,a}},{key:"init",value:function(t){t.className+=" zbutton--menu";var a=t.customAttributes||{};return a["aria-haspopup"]=!0,a["aria-expanded"]=!1,a["aria-controls"]=t.menuId,t.customAttributes=a,t.arrowIcon?o.getIconInfo(t):t}}]),o}();t.registerComponent("ZMenuButton",t.ZButton,Z),function(t){var a=t.zmenubutton.Templates,o=t.Templates.Utilities.icon;a.container=function(t){return ZT.html(zc0tO257(),t.text,t.id,t.role,t.type,t.className,t.children&&a.children(t))},a.children=function(t){return ZT.html(zc0tO258(),t.icon&&ZT.html(zc0tO259(),t.iconClassName,t.SVGIconId&&ZT.customHTML('<svg class="'.concat(t.SVGIconClassName,'"> <use xlink:href="').concat(t.SVGIconId,'" ></use> </svg>'))),t.text&&ZT.html(zc0tO260(),t.text),t.arrowIcon&&o(t.arrowIconInfo))}}(ZPeopleComponents);var X=function(a){function o(){return _classCallCheck(this,o),_possibleConstructorReturn(this,_getPrototypeOf(o).apply(this,arguments))}return _inherits(o,t.CoreComponent),_createClass(o,[{key:"_init",value:function(a,o){o.isCE=this.isCE,o.disabled=o.disabled||this.element[0].disabled;var i,n=a[0],l=a.attr("id");o.text=o.text||n.textContent,l&&(i=l+"DropDown"),o.primaryButton=t.ZButton.getBtnProps({text:o.text,isCE:o.isCE,className:"zbutton--action",appearance:o.appearance,disabled:o.disabled,templateRender:!0,iconClass:o.iconClass,iconClassName:o.iconClassName,size:o.size,SVGIconId:o.SVGIconId},a),o.menuButton=t.ZMenuButton.init({id:i,templateRender:!0,className:"zbutton zbutton--icononly",appearance:o.appearance,size:o.size,disabled:o.disabled||!1,delay:o.delay,arrowIcon:!0,arrowIconClass:o.arrowIconClass,arrowIconClassName:o.arrowIconClassName,isCE:o.isCE,menuOptions:{isLabelHTMLEncoded:o.isLabelHTMLEncoded},menuId:o.menuId,arrowSVGIconId:o.arrowSVGIconId,customAttributes:o.splitbuttonAttributes}),a.removeAttr("data-menu-id")}},{key:"_getSelecteditem",value:function(){var t=this.isCE?"z-menuitem":"li",a=n("#"+this._opts.menuId)[0].querySelectorAll(t+'[data-value = "'+this.element[0].getAttribute("data-value")+'"]')[0];return a&&n(a)}},{key:"_postRender",value:function(){var t=this.element,a=this.container,o=this._opts,l=t.attr("title");l&&(t.removeAttr("title"),a.attr("title",l));var i=a.find(".zbutton--menu");o.isCE||a.attr("id",t.attr("id")+"Container"),this._data.className+=" zbutton--split  zbutton--split"+(o.appearance||"normal"),i.data("menuForElement",a),this.actionBtn=a.find(".zbutton--action").length?a.find(".zbutton--action"):n(a.find(".zbutton")[0]),this.menuButton=i,o.width&&this.container.css("width",o.width)}},{key:"_bindEvents",value:function(){var r,a=this,o=n("#"+this._opts.menuId),l=this.name,i=this.actionBtn,s=this.menuButton;this.container.on("click."+l,function(l){if(!i.hasClass("is-disabled")){var c=n(l.target).closest(".zbutton")[0]===s[0],_={button:a.element,menuButton:s,isMenuButton:c},u="menubuttonclick";c||(u="buttonclick",t.menu&&t.menu(o).hide()),r=a._selectedItem||r||a._getSelecteditem()||a.element,_.selectedItem=r&&n(r)||a._opts.text,_.selectedValue=r[0]&&r[0].getAttribute("data-value"),a._dispatchEvent(u,l,_),a._dispatchEvent("click",l,_)}}),i.off("click.zbutton").off("mousedown."+l).on("mousedown."+l,function(t){if(i.hasClass("is-disabled"))return t.stopImmediatePropagation(),!1}),t.ShortCut&&(t.ShortCut.register(i),t.ShortCut.register(this.menuButton)),o.on("zmenushow."+l+" zshow."+l,function(t){var n=a.container[0];if(o.data("forElement")[0]===n){var r=window.getComputedStyle(n,null),d=t.detail.menu.attr("class"),c=a._opts.rtl;d.match("top")?(i.css("border-bottom-"+(c?"right":"left")+"-radius",r["borderBottom"+(c?"Right":"Left")+"Radius"]),s.css("border-bottom-"+(c?"left":"right")+"-radius",r["borderBottom"+(c?"Left":"Right")+"Radius"])):d.match("bottom")&&(i.css("border-top-"+(c?"right":"left")+"-radius",r["borderTop"+(c?"Right":"Left")+"Radius"]),s.css("border-top-"+(c?"left":"right")+"-radius",r["borderTop"+(c?"Left":"Right")+"Radius"])),o.off("zmenubeforeshow."+l+" zbeforeshow."+l),a.container.addClass(a._opts.activeClass)}}).on("zmenuhide."+l+" zhide."+l,function(){var t={"border-bottom-left-radius":"","border-top-left-radius":"","border-bottom-right-radius":"","border-top-right-radius":""};i.css(t),s.css(t),a.container.removeClass(a._opts.activeClass)}),this._opts.updateButtonOnMenuItemClick&&o.on("zmenubeforeshow."+l+" zbeforeshow."+l,function(){a._opts.updateButtonOnMenuItemClick&&a._hideMenuItem(!0)}),o.on("zmenuitemclick."+l+" zitemclick."+l,function(n){var l=n.detail,i=t.menu(l.menu)._opts,s=a._opts.iconClassName||a._opts.iconClass||a._opts.SVGIconId,r=t.button(a.actionBtn)._opts.text,d=s?r?"icon-text":"icon":"text";if(a._opts.updateButtonOnMenuItemClick&&i.contentType===d){a._hideMenuItem(!1);var c=l.data;t.menu(o).hideMenuItems([l.menuitem]),s&&(c.SVGIconId?a._setAttribute("SVGIconId",c.SVGIconId):c.iconClassName&&a._setAttribute("iconClassName",c.iconClassName)),r&&a._setAttribute("text",c.decodedLabel)}var _=n.detail.menuitem,u=_[0].getAttribute("data-value"),p={button:a.element,menuButton:a.menuButton,selectedItem:_,selectedValue:u,previousSelectedItem:a._selectedItem,previousValue:a._previousValue};a._dispatchEvent("itemclick",n,p,a.getElement()),a._selectedItem&&_[0]==a._selectedItem[0]||(a._dispatchEvent("change",n,p,a.getElement()),a._selectedItem=_,a._previousValue=u)})}},{key:"_hideMenuItem",value:function(a){var o=n("#"+this._opts.menuId),l=t.button(this.actionBtn)._opts.text,s=this._opts.SVGIconId&&-1===this._opts.SVGIconId.indexOf("#")?"#"+this._opts.SVGIconId:this._opts.SVGIconId,r=this._opts.iconClassName||this._opts.iconClass,d=o.find(".zmenu__item"),c=t.menu(o)._opts.contentType;l=l&&l.trim();for(var _=0;_<d.length;_++){var u=d[_].itemData,p=u.decodedLabel||n(d[_]).text().trim(),m="text"!==u.contentType,g=!(!m||!s)&&s===u.SVGIconId,h=!!(m&&r&&u.iconClassName)&&u.iconClassName.replace("zmenu__icon","").trim()===r,v=g||h||!a,y=p&&l?p===l:!a;("icon-text"===c?v&&y:"icon"===c?v:y)&&t.menu(o)[a?"hideMenuItems":"showMenuItems"]([d[_]])}}},{key:"_setAttribute",value:function(a,o){if("disabled"!==a&&"menuId"!==a&&"size"!==a&&"appearance"!==a&&"arrowIconClassName"!==a&&"arrowIconClass"!==a&&"arrowSVGIconId"!==a&&"rtl"!==a)"width"===a&&this.container.css("width",o);else if(t.menubutton(this.menuButton).setAttribute(a,o),"appearance"===a){var n="primary"===o;this._updateClass(n?"":"zbutton--splitnormal",n?"zbutton--splitnormal":"")}return this._opts[a]=o,t.button(this.actionBtn).setAttribute(a,o)}},{key:"_destroy",value:function(){this.actionBtn.removeClass("zbutton zbutton--icononly is-selected is-disabled zbutton--"+this._opts.size+" zbutton--"+this._opts.appearance).removeAttr("role aria-label"),n("#"+this._opts.menuId).off("zmenubeforeshow.zsplitbutton zbeforeshow.zsplitbutton zmenushow.zsplitbutton zshow.zsplitbutton zmenuitemclick.zsplitbutton zitemclick.zsplitbutton zmenuhide.zsplitbutton zhide.zsplitbutton")}},{key:"name",get:function(){return"zsplitbutton"}},{key:"attrs",get:function(){return{appearance:"normal",size:"medium",text:null,icon:null,iconClass:null,SVGIconId:null,disabled:!1,arrowIcon:!0,arrowIconClass:null,arrowSVGIconId:null,menuId:null,updateButtonOnMenuItemClick:!0,activeClass:"",width:null,isLabelHTMLEncoded:!1}}},{key:"props",get:function(){return{iconClassName:null,arrowIconClassName:null,splitbuttonAttributes:{}}}},{key:"EVENTS",get:function(){return["click","change","buttonclick","menubuttonclick","itemclick"]}}]),o}();t.registerComponent("ZSplitButton",X),function(t){var a=t.zsplitbutton.Templates;t.zmenubutton.Templates.button,t.zbutton.Templates.button;a.container=function(t){return ZT.html(zc0tO261(),t.text,t.id,t.className,t.children&&a.children(t))},a.children=function(a){return ZT.html(zc0tO262(),t.createButton(a.primaryButton),t.createMenuButton(a.menuButton))}}(ZPeopleComponents);var J=function(a){function o(){return _classCallCheck(this,o),_possibleConstructorReturn(this,_getPrototypeOf(o).apply(this,arguments))}return _inherits(o,t.CoreComponent),_createClass(o,[{key:"_init",value:function(t,a){this._fromInit=!0,this._id=this._getID(),this._namespace=".zcolorbase",a.value=a.value||t[0].value,this._setInitial(),this._fromInit=!1}},{key:"_postEachRender",value:function(){var t=this._data,a=this._opts;if(!t.rendered||this._domChanged){var o=a.width||!this._useParent&&this.element[0].style.width;o&&(this.container[0].style.width=isNaN(o)?o:o+"px")}this._storeRef(t,a),this._setClassName(t,a),this._updateElementValue(t,a),this._reopen&&(this._open(),this._reopen=!1)}},{key:"_preRender",value:function(){return this._setRenderData(this._data,this._opts,this.element),this._data}},{key:"_setRenderData",value:function(a,o,n){var l=this._selectedInstance;a.opened=this._opened,a.nofill=!o.icon&&this._noFill,a.color=l.getColor();var i=a.attrs=a.attrs||{};if(i["aria-label"]=this._getI18NText("aria-label").replace(/#value#/g,l.getColor("hexa")),!a.rendered||this._domChanged){var s=a.colorMode=o.colorModel;t.ColorUtil.REGEX.colorMode.test(s)||(a.colorModel=this._getClrInstance(o.value).format,o.colorModel="auto"),a.alwaysSetAttrs=!0,a.pickerId=o.pickerId,a.disabled=o.disabled||n[0].disabled,i.tabindex=!a.disabled&&(o.tabIndex||n[0].tabIndex||0),a.rtl=o.rtl,a.template=o.template,a.stroke="stroke"===o.appliedFor,a.icon=a.arrow=a.previewStyleAttr=!1,o.icon&&t._getIconInfo(o.iconClassName||o.iconClass,o.SVGIconId,null,null,a.icon={}),this.isCE||(i.title=n.attr("title")),o.arrowIcon&&(a.arrow={disabled:a.disabled,rtl:a.rtl,isCE:this.isCE},this._setArrowData(a,o))}(a.stroke||a.icon)&&(a.previewStyleAttr=this._getStyle({"border-color":a.color,"border-style":o.previewBorderStyle||"solid","border-width":o.previewBorderWidth||(a.icon?"0px 0px 2px 0px":"3px")})),this._setTogglerData(i,o)}},{key:"_setArrowData",value:function(a,o){var n=this._CLASSES;t._getIconInfo(o.arrowIconClassName||o.arrowIconClass,o.arrowSVGIconId,"zc__svg--downarrow "+n.ARROWSVGICON,(n.ICON||"")+" "+(n.ARROW||""),a.arrow)}},{key:"_setTogglerData",value:function(t,a){Object.assign(t,{"aria-owns":a.pickerId,"aria-haspopup":!0,"aria-expanded":this._opened})}},{key:"_setClassName",value:function(t,a){var o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"",n=this._CLASSES,l=function(t){t&&(o+=" "+t)};l(n.CONTAINER),l(a.zclassName||a.className),this._opened&&l(n.ACTIVE),t.disabled&&l("is-disabled"),t.rtl&&l("zh-rtl"),t.className=o}},{key:"_bindEvents",value:function(){this._addEvents({focus:"focusin",blur:"focusout",click:"click"},this.container),this._addEvents({toggleBtnClick:"mousedown",toggleBtnKeydown:"keydown"},this._toggler)}},{key:"_toggleBtnClickHandler",value:function(t){t.button||this._togglePicker(t)}},{key:"_toggleBtnKeydownHandler",value:function(a){var o=a.keyCode,n=t.keyCode;(o===n.ENTER||o===n.SPACE||o===n.DOWN&&this._data.arrow)&&(this._togglePicker(a),(o===n.DOWN||o===n.SPACE)&&a.preventDefault())}},{key:"_focusHandler",value:function(t){clearTimeout(this._blurTimer),this._focussed||this._trigger("focus",t),this._focussed=!0}},{key:"_blurHandler",value:function(t){var a=this;clearTimeout(this._blurTimer),this._blurTimer=setTimeout(function(){a._focussed=!1,a._trigger("blur",t)})}},{key:"_clickHandler",value:function(t){this._opts.disabled||this._trigger("click",t)}},{key:"_storeRef",value:function(t){if(!t.rendered||this._domChanged){this._previewBox=!1;var a=this._CLASSES,o=this.container,n=o.find("."+a.PREVIEW);n.length&&(this._previewBox=n),this._toggler=o}}},{key:"_setInitial",value:function(){var t=this._opts,a=this._getClrInstance(t.value);"none"===t.value||"transparent"===t.value||a.isValid()||(t.value=this._DEFAULTS.value),this._setValue(t.value)}},{key:"_getClrInstance",value:function(a){return t.ColorUtil.getColorInstance(a)}},{key:"_setPickerAttributes",value:function(a){var o=this._opts,l=this._data,i=this._currentClrField,s=l.picker,r="colorpicker",d="createColorPicker";if("advanced"===o.pickerType&&(r="advancedcolorpicker",d="createAdvancedColorPicker"),!s){var c=o.pickerId||"picker-"+this._id;s=l.picker=_objectSpread({},{noColorButtonLabel:this._getI18NText((l.stroke?"noStroke":"noColor")+"ButtonLabel"),forElement:this._opts.forElement||this.container},{},o.pickerOptions||{},{},{valueColorModel:o.colorModel,type:"popup",template:o.template,rtl:o.rtl,locale:o.locale,isCE:o.isCE,id:c,ctype:r,beforedestroy:this._pickerDestroyHandler.bind(this)}),this._toggler.attr("aria-owns",c)}var _=this._picker=n("#"+s.id);if(s.value=this._noFill?"transparent":this.getValue(),_&&_.length){var u=this._getPickerName();if(u){var p=t[u](_);if(this._opened||p.close(a),r===u){if(o.pickerId){if(o.resetPickerOptions&&(s=n.extend(!0,{},p._DEFAULTS,s)),"colorpicker"===u)(s.advancedPickerOptions=s.advancedPickerOptions||{}).currentColorField=i;else s.currentColorField=i;p.setAttributes(s)}else this._updateAdvPicker&&(p.setAttributes(s),this._updateAdvPicker=!1);return}this._destroyPicker()}}this._picker=_=n(t[d](s)),s.instance=t[r](_)}},{key:"_pickerDestroyHandler",value:function(){this._picker=this._opened=!1,this._updateUI()}},{key:"_destroyPicker",value:function(){if(this._picker){var t=this._picker;this._callPickerMethod("destroy"),this.isCE&&t.remove()}}},{key:"_bindPickerEvents",value:function(){var t=this,a=this._picker,o="z"+this._data.picker.ctype,n=this.isCE?"z":o,l="."+this.name+"."+o;a.off(l),["select","pick","close","beforeClose","open","beforeOpen","colorPanMouseOver","colorPanMouseOut","colorPanClick","focus"].forEach(function(o){a.on(n+o.toLowerCase()+l,t._pickerCallback.bind(t,t["_"+o+"Handler"]))})}},{key:"_pickerCallback",value:function(t,a){var o=a.detail;a=a.originalEvent,this.isCE&&(o=a.detail,a=a.originalEvent),t.call(this,a,o)}},{key:"_colorPanMouseOverHandler",value:function(t,a){this._trigger("colorpanmouseover",t,a)}},{key:"_colorPanMouseOutHandler",value:function(t,a){this._trigger("colorpanmouseout",t,a)}},{key:"_colorPanClickHandler",value:function(t,a){this._trigger("colorpanclick",t,a)}},{key:"_openHandler",value:function(t,a){this._opened=!0,this._updateUI(),this._trigger("pickeropen",t,a)}},{key:"_beforeOpenHandler",value:function(){}},{key:"_closeHandler",value:function(t,a){this._opened=!1,this._currentClrField=a.options.currentColorField,this._updateUI(),t&&t.currentTarget!==document?this.setFocus(t):this._blurHandler(t),this._removeEvents("",this._picker),this._trigger("pickerclose",t,a)}},{key:"_beforeCloseHandler",value:function(t,a){return this._trigger("beforepickerclose",t,a)}},{key:"_open",value:function(t){this._trigger("beforepickeropen",t)&&(this._setPickerAttributes(t),this._bindPickerEvents(),this._callPickerMethod("open",void 0,t))}},{key:"_close",value:function(t){this._opened&&this._callPickerMethod("close",t)}},{key:"_selectHandler",value:function(t,a){this._opened&&a.fromUI&&this._trigger("select",t,a)}},{key:"_pickHandler",value:function(t,a){this._opened&&a.fromUI&&(this._setValue(a.rgb,t,a,!1),this._trigger("pick",t,a))}},{key:"_setValue",value:function(t,a,o){var n=!(3<arguments.length&&void 0!==arguments[3])||arguments[3],l="none"===t||"transparent"===t,i=this._getClrInstance(l?"transparent":t);if(i.isValid()){var s=this._selectedInstance&&this._selectedInstance.getColor();this._selectedInstance=i,this._noFill=o&&o.noColorButtonClick||l,this._updateUI();var r=i.getColor();s!==r&&(this._opened&&n?this._callPickerMethod("setValue",r):this._updateAdvPicker=n,this._trigger("change",a,o))}}},{key:"_updateElementValue",value:function(t,a){a.value=this._noFill?"transparent":this._selectedInstance.getColor(t.colorMode,void 0,"auto"===this._opts.colorModel)}},{key:"_trigger",value:function(t,a,o){if(!this._fromInit){var n=this._selectedInstance,l=this._picker;return(o=o||{}).value=o.color=this.getValue(),o.rgb=n.getColor(),o.opacity=n.getAlpha(),o.colorData=n.getObject(this._data.colorMode),o.picker=l&&l[0],a=a&&a.originalEvent?a.originalEvent:void 0,this._dispatchEvent(t,a,o,void 0,!!a)}return!0}},{key:"_togglePicker",value:function(t){this._opts.disabled||(this._opened?(!t||"keydown"!==t.type)&&this._close(t):this._open(t))}},{key:"_callPickerMethod",value:function(a,o,n){t[this._getPickerName()](this._picker)[a](o,n)}},{key:"_getPickerName",value:function(){var t=this._picker.data();return t.zcolorpicker?"colorpicker":t.zadvancedcolorpicker?"advancedcolorpicker":void 0}},{key:"_updateUI",value:function(){this._data.rendered&&!this._domChanged&&this._render()}},{key:"_disable",value:function(t){this._domChanged=!0,_get(_getPrototypeOf(o.prototype),"_disable",this).call(this,t),this.closePicker()}},{key:"_setAdvAttribute",value:function(t,a){var o=this._opts;/^(pickerId|pickerType|pickerOptions|appliedFor|rtl|locale|forElement|colorModel)$/.test(t)?(o[t]=a,this._reopen=this._opened,this._domChanged=this._updateAdvPicker=!0,"pickerId"===t&&this.closePicker(),this._data.picker=!1):/^(icon|iconClassName|iconClass|SVGIconId|arrowIconClassName|arrowIconClass|arrowSVGIconId|previewBorderWidth|previewBorderStyle|tabIndex|width)$/.test(t)&&(o[t]=a,this._domChanged=!0)}},{key:"_setAttribute",value:function(t,a){var o;return this._addedByComponent=!0,"value"===t?(this._domChanged=!0,this.setValue(a)):o=this._setAdvAttribute(t,a),this._addedByComponent=!1,o}},{key:"setFocus",value:function(t){this._trigger("beforefocus",t)&&this._toggler.focus()}},{key:"openPicker",value:function(t){this._open(t)}},{key:"closePicker",value:function(t){this._close(t)}},{key:"getValue",value:function(){return this._opts.value}},{key:"setValue",value:function(t,a){this._setValue(t,a)}},{key:"_destroy",value:function(){this._destroyPicker(),clearTimeout(this._focusTimer),clearTimeout(this._blurTimer),this.element.empty()}},{key:"name",get:function(){return"zcolorbase"}},{key:"attrs",get:function(){return{value:"rgba(0,0,0,1)",colorModel:"auto",pickerId:null,pickerType:"basic",forElement:null,disabled:!1,appliedFor:"fill",arrowIconClass:null,arrowSVGIconId:null,previewBorderStyle:null,previewBorderWidth:null,resetPickerOptions:!1,icon:!1,width:null,iconClass:null,SVGIconId:null,rtl:null,locale:null}}},{key:"props",get:function(){return{iconClassName:null,arrowIconClassName:null,pickerOptions:{},labels:{noStrokeButtonLabel:"No Stroke",noColorButtonLabel:"No Fill","aria-label":"Current selected color is #value#"}}}},{key:"CLASSES",get:function(){return{CONTAINER:"zcolorbase",ACTIVE:"is-active",PREVIEW:"zcolorbutton__preview",ICON:"zbutton__icon",ARROW:"zcolorfield__arrow"}}},{key:"EVENTS",get:function(){return["change","select","pick","beforepickeropen","pickeropen","beforepickerclose","pickerclose","colorpanmouseover","colorpanmouseout","colorpanclick","beforefocus","focus","blur","click"]}}]),o}();t.registerComponent("ZColorBase",J);var $=function(t){function a(){return _classCallCheck(this,a),_possibleConstructorReturn(this,_getPrototypeOf(a).apply(this,arguments))}return _inherits(a,t),_createClass(a,[{key:"_bindEvents",value:function(){_get(_getPrototypeOf(a.prototype),"_bindEvents",this).call(this),this._handleFocus(this._toggler)}},{key:"name",get:function(){return"zcolorbutton"}},{key:"CLASSES",get:function(){return{CONTAINER:"zbutton zcolorbutton",ACTIVE:"is-selected"}}}]),a}(t.ZColorBase);t.registerComponent("ZColorButton",t.ZColorBase,$),function(t){var a=t.zcolorbutton.Templates,o=t.Templates.Utilities;a.container=function(){return ZT.html(zc0tO263())},a.children=function(t){return ZT.html(zc0tO264(),t.nofill?ZT.html(zc0tO265()):t.icon||t.stroke?ZT.html(zc0tO266(),t.previewStyleAttr,t.icon&&o.icon(t.icon)):ZT.html(zc0tO267(),t.color))}}(ZPeopleComponents);var Q=function(a){function o(){return _classCallCheck(this,o),_possibleConstructorReturn(this,_getPrototypeOf(o).apply(this,arguments))}return _inherits(o,t.ZDateInput),_createClass(o,[{key:"_create",value:function(){_get(_getPrototypeOf(o.prototype),"_create",this).apply(this,arguments)}},{key:"_getDateParts",value:function(){return{d:"date",M:"month",y:"year"}}},{key:"_replaceText",value:function(t){return this._replaceDate(t)}},{key:"_getRegEx",value:function(){return/dd{0,3}|MM{0,3}|yyyy|yy|"[^"]*"|'[^']*'/g}},{key:"_getMatch",value:function(t){return-1<["ddd","dddd","z","zz","zzz"].indexOf(t)?t.replace("d","E").replace("z","f"):t}},{key:"_replaceDate",value:function(t){var s,r,d,a=this._viewDate,o=this._monthModified,n=this._dateModified,l=this._yearModified,i=-1<["d","dd","ddd","dddd"].indexOf(t);return-1===["d","dd","M","MM"].indexOf(t)?-1===["ddd","dddd","MMM","MMMM"].indexOf(t)?-1!==["yy","yyyy"].indexOf(t)&&(this._isYear2Digit="yy"===t,a=a.getFullYear(),s=l?this._appendZeros("yy"===t?a%100:a,t.length):this._getPlaceholder(t)):(a=i?a.getDay():a.getMonth(),d=i?n&&o&&l:o,r=-1<t.indexOf("d")?"days":"months",s=d?this._getI18NText(3===t.length?"".concat(r,"Abbreviated"):r)[a]:this._getPlaceholder(t)):(a=i?a.getDate():a.getMonth()+1,s=(i?n:o)?1===t.length?a.toString():(10>a?"0":"")+a:this._getPlaceholder(t)),this._translateEToA(s)}},{key:"_focusOutHandler",value:function(t){var a=n(t.relatedTarget);this._hasPicker&&this._hasPicker&&a.closest(".zdatetimepicker,.zdatetimepicker--group").length||_get(_getPrototypeOf(o.prototype),"_focusOutHandler",this).call(this,t)}},{key:"_appendZeros",value:function(t,a){var o;return(o=a-(t=t.toString()).length)?["","0","00","000","0000"][a].substring(0,o)+t:t}},{key:"_init",value:function(){this._allowedChars="dMyz",this._pickerMethods||(this._pickerMethods={create:"createDatePicker",instance:"datepicker"}),_get(_getPrototypeOf(o.prototype),"_init",this).apply(this,arguments),this._opts.calendarIcon&&this._getCalendarIconProps()}},{key:"_performValidations",value:function(){var t=this._opts,a=["date","month","year"];t.calendarIcon&&-1===["right","left"].indexOf(t.calendarIconAlignment)&&(t.calendarIconAlignment="right"),_get(_getPrototypeOf(o.prototype),"_performValidations",this).call(this,a.map(function(t){return t+"Step"}),a)}},{key:"_validateFormat",value:function(){this._checkFormat(/h|H|m|t/g)}},{key:"_postRender",value:function(){_get(_getPrototypeOf(o.prototype),"_postRender",this).apply(this,arguments),this._opts.picker&&this._createPicker()}},{key:"_postEachRender",value:function(t,a){var n=a.modifiedAttr;a.calendarIcon&&(!n||"calendarIcon"===n)&&this._updateCalendarIcon(),_get(_getPrototypeOf(o.prototype),"_postEachRender",this).apply(this,arguments)}},{key:"_getCustomMatch",value:function(t){return this._getDateMatch(t)}},{key:"_getDateMatch",value:function(t){var a=this._opts.placeholder;return-1<["d","dd","ddd","dddd"].indexOf(t)?a[2<t.length?"weekDay":"date"]:-1<["M","MM","MMM","MMMM"].indexOf(t)?a.month:-1<["yy","yyyy"].indexOf(t)?a.year:void 0}},{key:"_getDateValue",value:function(){return this._dateModified&&this._monthModified&&this._yearModified?new Date(+this._viewDate):void 0}},{key:"_modifyValue",value:function(t,a,o,n){return this._modifyDate(t,a,o,n)}},{key:"_getDateSegment",value:function(t,a){return t["get".concat({y:"FullYear",M:"Month",d:"Date"}[a])]()}},{key:"_checkValue",value:function(t,a,o,n,l){return l<t?l+=a+o:l>a&&(l%=a+n),l}},{key:"_changeDateValue",value:function(t,a,o){a&&(t.setDate(1),t.setMonth(o))}},{key:"_modifyDate",value:function(t,a,o,n){var l=this._getDateParts()[a],i="_"+l+"Modified",s=this._opts,r=this._getDateSegment(t,a),d=this._checkValue.bind(this);if(o&&(o*=s[l+"Step"]),r+=o,"y"===a)0===(r=d(0,9999,0,1,r))&&(r=1),this._yearModified&&t.setFullYear(r);else if("M"!==a)"d"===a&&(s.incrementOnWrapAround&&n||(r=d(1,this._getDaysInAMonth(t),-r,0,r)),this[i]?t.setDate(r):0>o&&t.setDate(31));else if(this[i])if(s.incrementOnWrapAround&&void 0!==n)t.setMonth(r),this._changeDateValue(t,t.getMonth()%12!=(r+12)%12,r);else{r=d(0,11,1,1,r);var c=new Date(t.getFullYear(),r+1,0).getDate();t.getDate()>c&&t.setDate(c),t.setMonth(r)}else 0>o&&t.setMonth(11);return i}},{key:"_getDaysInAMonth",value:function(t){return new Date(t.getFullYear(),t.getMonth()+1,0).getDate()}},{key:"_parseSegment",value:function(t,a,o){return this._parseDate(t,a,o)}},{key:"_getNewValue",value:function(t,a,o,n,l){var s=t["get"+("date"===o?"Date":"Month")]()+ +("month"===o),r=this._isNewValue&&this._oldSegment!==this._currentSegment?0:this["_".concat(o,"Modified")]?10*s:0;return r+=parseInt(a),this._isNextSegment=!isNaN(r)&&n&&r>=l,r}},{key:"_sliceValue",value:function(t,a,o){for(;a>t;)a=parseInt(o.slice(1));return a}},{key:"_parseDate",value:function(t,a,o){var d,n=this._opts.jumpOnComplete,l=this._getNewValue.bind(this),s=this._sliceValue.bind(this),r=this._viewDate;if("d"===t){var c=this._getDaysInAMonth(o);if(d=l(o,a,"date",n,4),isNaN(d))return;var _=d.toString();if(!n&&d>c&&this._isFastInput?2===_.length?d=r.getDate():3<=_.length&&(d=s(31,d,_)):d=d>c?n?parseInt(_[0]):parseInt(_.slice(-1)):d,this._dateModified=1<=d,this._dateModified&&(o.setDate(d),o.getMonth()!==r.getMonth()))return}else if("M"===t){if(d=l(o,a,"month",n,2),isNaN(d)){for(var u=this._getI18NText("months"),p=this._typedMonthChar+=a.toLowerCase();0<p.length;){for(var m=0;m<u.length;m++)if(0===u[m].toLowerCase().indexOf(p))return o.setMonth(m),this._isNextSegment=n&&-1<this.monthChars.indexOf(p),this._monthModified=!0,this._oldDateValue=new Date(+r),this._viewDate=o,!0;p=this._typedMonthChar=p.substring(1,p.length)}return!1}var g=d.toString();if(!n&&12<d&&this._isFastInput){var h=parseInt(g.slice(1));d=12<h?parseInt(h.toString()[0]):r.getMonth()+1}else d=n?12<d&&20>d?12:20<d?g[0]:d:111===d||112===d?parseInt(g.slice(-1)):s(12,d,g);this._monthModified=1<=d,this._monthModified&&(o.setMonth(d-1),this._changeDateValue(o,o.getMonth()!==d-1,--d))}else if("y"===t){var v=this._isYear2Digit;if(d=this._yearModified?v?o.getFullYear().toString().slice(2):10*o.getFullYear():0,d=v?parseInt(d+a):d+parseInt(a),isNaN(d))return;var y=d.toString();if(v){if(n&&10<d&&2===y.length&&"0"!==y[1]&&(this._isNextSegment=!0),d=s(99,d,y),this._yearModified=1<=d,this._yearModified){var f=this._opts.century-1;d=parseInt(f.toString()+d.toString()),o.setFullYear(d)}}else n&&1001<d&&4===y.length&&"0"!==y[3]&&(this._isNextSegment=!0),d=s(9999,d,y),this._yearModified=1<=d,this._yearModified&&o.setFullYear(d)}return o}},{key:"_isPartModified",value:function(t,a){this._isDateModified(t,a)}},{key:"_isDateModified",value:function(t,a){-1<["d","y","M"].indexOf(t)&&(this["_"+this._getDateParts()[t]+"Modified"]=a,a||"M"!==t||(this._typedMonthChar=""))}},{key:"_setFormat",value:function(){this._setFormatVal(/^(date-short|date-long|date-medium)$/,"date","dd/MM/yyyy")}},{key:"_getNumberOfDays",value:function(t,a){return new Date(t,a,0).getDate()}},{key:"_parseValue",value:function(t,a){return _get(_getPrototypeOf(o.prototype),"_parseValue",this).call(this,t,a),this._hasPicker&&(this._opts.pickerOptions.disabledDaysOfWeek||this._opts.pickerOptions.disabledDates)&&(this._viewDate=this._checkForDisabledDates(this._viewDate)),!0}},{key:"_bindEvents",value:function(){_get(_getPrototypeOf(o.prototype),"_bindEvents",this).call(this),this._opts.picker&&this._bindPickerEvents()}},{key:"_keydownHandler",value:function(a){var n=this._picker,l=a.keyCode,i=t.keyCode;return this._hasPicker&&(n.is(":visible")&&-1<[i.ESCAPE,i.ENTER].indexOf(l)&&t[this._pickerMethods.instance](n).close(),(a.metaKey||a.ctrlKey)&&i.DOWN===l&&!n.is(":visible"))?void t[this._pickerMethods.instance](n).open():void _get(_getPrototypeOf(o.prototype),"_keydownHandler",this).call(this,a)}},{key:"_isDateInstance",value:function(t){return t instanceof Date?new Date(+t):t}},{key:"_updateElementValue",value:function(){_get(_getPrototypeOf(o.prototype),"_updateElementValue",this).call(this);var a=this._opts,n=a.value,l=this._lastValue,i=this._picker;this._hasPicker&&n&&(!l||l&&+t.Date.parseDate(l,a.format).date!=+n)&&t[this._pickerMethods.instance](i).setAttribute("value",new Date(+n)),n&&(this._lastValue=this._isDateInstance(n),(0>a.format.indexOf("h")||0>a.indexOf("H"))&&n.setHours(0,0,0,0))}},{key:"_clearActionHandler",value:function(){_get(_getPrototypeOf(o.prototype),"_clearActionHandler",this).call(this),this._picker&&t[this._pickerMethods.instance](this._picker).setAttribute("value",null)}},{key:"_resetToFirst",value:function(t){this._resetDateToFirst(t)}},{key:"_resetDateToFirst",value:function(t){t&&"Mdy".indexOf(-1<t)&&this._viewDate["set".concat({M:"Month",d:"Date",y:"FullYear"}[t])]("y"===t?this._getNewDate().getFullYear():"Mdy".indexOf(t))}},{key:"_resetOnBlur",value:function(t){this._resetDateOnBlur(t)}},{key:"_resetDateOnBlur",value:function(t){"y"===t&&this._viewDate.setFullYear(0)}},{key:"_destroy",value:function(){this._picker&&this._destroyPicker(),_get(_getPrototypeOf(o.prototype),"_destroy",this).call(this)}},{key:"_getCalendarIconProps",value:function(){var a=this._data,o=this._opts,n=this._calendarIcon;a.calendarPosition="";var l=o.calendarIconUIType,i="zdatetimefield__icon"+l;a.calIconClassName=i;var s={className:i,defaultIconClassName:"zdatetimefield__icon",iconClassName:o.calendarIconClassName,SVGIconId:o.calendarSVGIconId,defaultSVGIconId:"zc__svg--calendaricon zbutton__svg",isCE:this.isCE,customAttributes:{tabindex:-1},templateRender:!0,mainElement:n?n[0]:null};a.calendarIconProps="label"===l?t._getIconInfo(s.iconClassName,s.SVGIconId,"zc__svg--calendaricon zbutton__svg","zdatetimefield__icon",s):t.ZButton.getBtnProps(s),a.calendarPosition=this._getCalendarPosition(l,o.calendarIconAlignment)}},{key:"_getCalendarPosition",value:function(t,a){if(-1<["right","left"].indexOf(a))return"left"===a?"beforeInput":("button"===t?"after":"before")+"SpinBtn"}},{key:"_updateCalendarIcon",value:function(){var t=this._opts.calendarIconUIType,a=this.container;this._calendarIcon=a.find(".zdatetimefield__icon"+("label"===t?"label":"button")),this._data.calendarIconProps.mainElement=this._calendarIcon[0],a.addClass("zdatetimefield zinputfield--withcalendaricon"),"button"===t&&(a.addClass("zh-hasiconbutton"),this._addEvents({calendarIconClick:"mousedown"},this._calendarIcon))}},{key:"_calendarIconClickHandler",value:function(t){t.preventDefault(),this._picker&&this._picker.is(":visible")?this._picker.zdatepicker("close"):this._pickerOpenHandler(t),this._currentSegment?this._selectText(this._currentSegment):this._selectCaretPosition(this._input[0],0,0),this._mouseupHandler(t),this.container.addClass("has-focus")}},{key:"_handleCalendarIcon",value:function(t,a){var o=this.name,n=this._data,l=this._opts,i=this.container,s=l.calendarIconUIType;"calendarIcon"===n.modifiedAttr&&this._calendarIcon&&("button"!==a&&this._hasPicker&&this._calendarIcon.off("click."+this.name),n.calendarPosition="",n.calendarIconProps=null,this._calendarIcon=void 0,i.removeClass("zh-hasiconbutton zinputfield--withcalendaricon")),a&&l.calendarIcon&&(this._getCalendarIconProps(),i.addClass("zinputfield--withcalendaricon"+("focus"===l.spinButtons?" zdatetimefield--buttonsonhover":"")),"button"===s?!l.showPickerOnFocus&&i.off("click.".concat(o)):this._addEvents({pickerOpen:"click"},i)),this._domChanged=!0}},{key:"_checkForDisabledDates",value:function(a,o){o=o||1;var r,d,c,n=new Date(a.getTime()),l=this._opts,s=this._isGreater.bind(this);if(this._hasPicker&&s(a,l.min)&&s(l.max,a)){c=(d=t[this._pickerMethods.instance](this._picker)).getAttribute("disabledDaysOfWeek"),r=d.getAttribute("disabledDates");var _=new Date(a.getTime());this._checkTime||_.setHours(0,0,0,0);var u=l.dateStep*(1===o?1:-1),p=new Date(a.getTime());for(this._checkTime||p.setHours(0,0,0,0);this._picker.find("[data-time='".concat(p.getTime(),"']")).hasClass("is-disabled");){if(c&&c.length){for(var m=0;m<c.length;m++)_.getDay()===c[m]&&(_.setDate(_.getDate()+u),a=new Date(_.getTime()),m=-1);a.setHours(n.getHours(),n.getMinutes(),n.getSeconds(),0)}if(r&&r.length)for(var g=0,h=r.length;g<h;g++){var v=void 0,y=r[g],f=void 0;if(y.date instanceof Date)v=y.date;else if(y.date)f=!1,v=y.date.date,y.repeatEveryYear&&v.setFullYear(a.getFullYear()),y.repeatEveryMonth&&v.setMonth(a.getMonth());else if(y.startDate&&y.endDate){var k=y.startDate.date,b=y.endDate.date;y.repeatEveryYear&&(k.setFullYear(a.getFullYear()),b.setFullYear(a.getFullYear())),y.repeatEveryMonth&&(k.setMonth(a.getMonth()),b.setMonth(a.getMonth())),f=!(!t.Date.isGreater(_,k)&&!t.Date.areDatesEqual(k,_)||!t.Date.isGreater(b,_))}if(v&&t.Date.areDatesEqual(v,_)||f){var C=a.getDate()+u;if(!l.incrementOnWrapAround){var D=new Date(_.getFullYear(),_.getMonth()+1,0).getDate();1>C?C=D:C>D&&(C%=D)}_.setDate(C);var S=_.getTime();a=new Date(S),g=-1}}a.setHours(n.getHours(),n.getMinutes(),n.getSeconds(),0),p=new Date(a.getTime()),this._checkTime||p.setHours(0,0,0,0)}}return a}},{key:"_isGreater",value:function(a,o){return t.Date.isGreater(a,o)&&!t.Date.areDatesEqual(a,o)}},{key:"_createPicker",value:function(){var a=this._opts,o=this._pickerMethods;if(this._hasPicker=a.picker,a.picker&&!a.pickerId&&this._initPicker(),a.pickerId){var l=n("#"+a.pickerId);if(l.length){var i=l.data("z"+o.instance);Object.keys(i).length&&(this._hasPicker=!0,this._picker=l,t[o.instance](this._picker).setAttribute("forElement",this.container))}}this._hasPicker&&(this._immediateCommit=t[o.instance](this._picker).getAttribute("immediateCommit"),this.container.attr({"aria-owns":n(this._picker).attr("id"),"aria-expanded":!1}))}},{key:"_initPicker",value:function(){var l,i,a=this._opts,o=a.pickerOptions;a.min&&(l=new Date(a.min.getTime())),a.max&&(i=new Date(a.max.getTime())),this._checkTime||(l&&l.setHours(0,0,0,0),i&&i.setHours(0,0,0,0)),o=n.extend(!0,{},o,{id:"".concat(this._getID(this.container),"-picker"),appendTo:o.appendTo||n("body"),isCE:this.isCE,rtl:a.rtl,locale:a.locale,forElement:this.container,minDate:o.minDate||l,maxDate:o.maxDate||i,value:a.value,timeZone:a.timeZone,format:a.format,beforedatecellrender:this._dispatchPickerEventsHandler.bind(this,"pickerbeforedatecellrender")}),this._picker=t[this._pickerMethods.create](o)}},{key:"_bindPickerEvents",value:function(){var t=this,a=this.name,o=this.isCE?"z":"z".concat(this._pickerMethods.instance),l=this._opts;this._hasPicker&&("label"===l.calendarIconUIType||"button"===l.calendarIconUIType&&l.showPickerOnFocus)&&this._addEvents({pickerOpen:"click"},this.container);var s=this._picker=n(this._picker);s.off(this._getPicker()._EVENTS.map(function(a){return"z".concat(t._pickerMethods.instance).concat(a,".").concat(t.name)}).join(" ")),this._addEvents({pickerMouseup:"mouseup",focusInput:"mousedown",apply:"".concat(o,"change"),clear:"".concat(o,"clear"),close:"".concat(o,"close"),open:"".concat(o,"open"),beforeClose:"".concat(o,"beforeclose"),beforeOpen:"".concat(o,"beforeopen"),beforeFocus:"".concat(o,"beforefocus")},s);for(var r=["beforedrilldown","drilldown","datemouseover","dateselect","monthchange","yearchange","hourchange","minutechange","periodchange","timechange","todaybuttonclick","cancel","clear"],d=0,c=r.length;d<c;d++)s.off(o+r[d]+"."+a).on("".concat(o).concat(r[d],".").concat(a),this._dispatchPickerEventsHandler.bind(this,"picker"+r[d]))}},{key:"_beforeFocusHandler",value:function(t){t.preventDefault()}},{key:"_focusInputHandler",value:function(){this._pickerMouseDown=!0,this.container.addClass("has-focus").trigger("focusin")}},{key:"_pickerMouseupHandler",value:function(){this._pickerMouseDown=!1}},{key:"_clearHandler",value:function(){this._opts.immediateCommit&&(this.setAttribute("value",null),this._clearActionHandler())}},{key:"_dispatchPickerEventsHandler",value:function(t,a,o){o||(o=a.detail),this._dispatchEvent(t,a,o)}},{key:"_openHandler",value:function(a){var o=this;this.container.attr("aria-expanded",!0),this._dispatchEvent("pickeropen",a,{value:this._input[0].value,dateValue:this._opts.value});var l=this;t.$document.on("mousedown."+this.name,function(t){if(!l._pickerMouseDown){var a=n(t.target);a&&a.length&&!a.closest(o._picker).length&&(l._bodyClick=!0)}})}},{key:"_beforeOpenHandler",value:function(t){return this._dispatchEvent("pickerbeforeopen",t,{value:this._input[0].value,dateValue:this._opts.value})}},{key:"_beforeCloseHandler",value:function(t){this._dispatchEvent("pickerbeforeclose",t,{value:this._input[0].value,dateValue:this._opts.value})}},{key:"_closeHandler",value:function(a){this.container.attr("aria-expanded",!1),this._getSegmentValue();var o=this._opts.value;this._immediateCommit||this.setAttribute("value",this._applyClicked?this._isDateInstance(o):this._isDateInstance(this._lastValue)),this._selectText(this._segment),this._mouseupHandler(),this._applyClicked=!1,this._dispatchEvent("pickerclose",a,{value:this._input[0].value,dateValue:o}),this._bodyClick&&this._input.trigger("focusout"),t.$document.off("mousedown."+this.name),this._bodyClick=!1}},{key:"_applyHandler",value:function(a,o){o=o||a.detail,this._applyClicked=!0,this._lastValue=o.valueString,this._getSegmentValue();var n=this._opts.format,l=t.Date;if(l.formatDate(this._opts.value,n)!==l.formatDate(o.value,n)&&(this._oldDateValue=new Date(+this._viewDate),this._updateOldVal=!1,this.setAttribute("value",o.value?o.valueString:null),this._updateOldVal=!0,1<t[this._pickerMethods.instance](this._picker).getAttributes().monthsPerView)){var s=parseInt(this._picker.find(".is-selected").closest("li").index());this.setAttribute("pickerOptions",{selectedDateMonthViewIndex:s})}o.fromUI&&(this._selectText(this._segment),this._mouseupHandler())}},{key:"clearHandler",value:function(){this._opts.immediateCommit&&(this.setAttribute("value",null),this._clearActionHandler())}},{key:"_pickerOpenHandler",value:function(a){var o=this._picker,l=this._opts;if(this._getSegment(),a.preventDefault(),o&&!o.is(":visible")&&!l.readonly&&!l.disabled&&0===n(a.target).closest(".zinputfield__clearbutton,.zinputfield__spinbutton").length){l.pickerId&&this._bindPickerEvents();var i=t[this._pickerMethods.instance](o),s={forElement:this.container};l.value&&(s.value=this._isDateInstance(l.value)),i.setAttributes(s),i.open()}}},{key:"_getSegmentValue",value:function(){this._getSegment(),this._segment||(this._selectCaretPosition(this._input[0],0,0),this._getSegment())}},{key:"_isPickerOpenValid",value:function(){var t=this._opts;return"button"!==t.calendarIconUIType||"button"===t.calendarIconUIType&&t.showPickerOnFocus}},{key:"_setPickerAttributes",value:function(a,o){var r,l=this._opts,i=this.name,s=n.extend(!0,{},l.pickerOptions);this._picker&&(r=t[this._pickerMethods.instance](this._picker)),"picker"===a?o?(this._hasPicker=!0,this._createPicker(),this._bindPickerEvents(),this._isPickerOpenValid()&&this._addEvents({pickerOpen:"click"},this.container),"button"===l.calendarIconUIType&&this._addEvents({calendarIconClick:"mousedown"},this._calendarIcon),r=t[this._pickerMethods.instance](this._picker),this._immediateCommit=r.getAttribute("immediateCommit")):this._picker&&(l.pickerOptions=null,this._render(),l.pickerOptions=s,this._picker=void 0,this._hasPicker=!1,this.container.off("click."+i)):"pickerOptions"===a?(l.value=this._isDateInstance(l.value),r&&r.setAttributes(s)):"showPickerOnFocus"===a&&"button"===l.calendarIconUIType&&(this.container.off("click.".concat(i)),o&&this._addEvents({pickerOpen:"click"},this.container))}},{key:"_getPicker",value:function(){return t[this._pickerMethods.instance](this._picker)}},{key:"_destroyPicker",value:function(){var t=this,a=this._getPicker();this._picker.off(a._EVENTS.map(function(a){return"z".concat(t._pickerMethods.instance).concat(a,".").concat(t.name)}).join(" ")),a.destroy(),this._picker.remove(),this._picker=void 0}},{key:"openPicker",value:function(){t[this._pickerMethods.instance](this._picker).open()}},{key:"closePicker",value:function(){t[this._pickerMethods.instance](this._picker).close()}},{key:"getPickerElement",value:function(){return this._picker}},{key:"_setAttribute",value:function(a,n){var u,l=this._data,i=this._opts,s=this._hasPicker,r=_get(_getPrototypeOf(o.prototype),"_setAttribute",this).bind(this),d="format"===a,c=i.value,_=this._picker;if(n=d?this._changeFormat(n):n,i[a]=n,s&&(u=t[this._pickerMethods.instance](_)),"century"===a){--n;var p=this._viewDate;if(isNaN(n)||2!==n.toString().length)throw new Error(i.labels.invalidNumber);p.setFullYear(parseInt(n.toString()+p.getFullYear().toString().slice(2))),c&&(i.value=new Date(p.getTime())),i.century=n+1}else d||"value"===a?(this._lastValue=null,r(a,n)):"min"===a||"max"===a?r(a,n):-1<a.indexOf("picker")||"showPickerOnFocus"===a?(i.value=this._isDateInstance(c),this._setPickerAttributes(a,n)):-1<["calendarIcon","calendarIconClassName","calendarSVGIconId","calendarIconUIType","calendarIconAlignment"].indexOf(a)?(("calendarIconUIType"===a&&i.calendarIcon||"calendarIcon"===a)&&(l.modifiedAttr="calendarIcon"),"calendarIconAlignment"===a&&(n=-1<["right","left"].indexOf(n)?n:"right",this._domChanged=!0),this._handleCalendarIcon(a,n)):"rtl"===a&&s?_&&u.setAttribute("rtl",n):"locale"===a?(r(a,n),_&&u.setAttribute("locale",n)):r(a,n)}},{key:"name",get:function(){return"zdatefield"}},{key:"attrs",get:function(){return{format:"dd/MM/yyyy",dateStep:1,monthStep:1,yearStep:1,picker:!1,pickerId:null,century:21,calendarIcon:!1,calendarIconClass:null,calendarSVGIconId:null,calendarIconAlignment:"right",calendarIconUIType:"label",showPickerOnFocus:!1}}},{key:"props",get:function(){return{calendarIconClassName:null,placeholder:{year:"year",month:"month",date:"date"},pickerOptions:{timeFieldType:"multiple-select-box"},labels:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysAbbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsAbbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],invalidInput:"Invalid date/time provided. Please provide correct input",invalidNumber:"Not a number"}}}},{key:"EVENTS",get:function(){return["pickerbeforeopen","pickeropen","pickerbeforeclose","pickerclose","pickerbeforedatecellrender","pickerdatecellrender","pickerbeforemonthopen","pickerbeforedrilldown","pickerdrilldown","pickerdatemouseover","pickerdateselect","pickermonthchange","pickeryearchange","pickerdecadechange","pickertodaybuttonclick","pickercancel","pickerclear"]}},{key:"monthChars",get:function(){return["f","s","o","n","d","ja","may","mar","ap","au","jun","jul"]}}]),o}();t.registerComponent("ZDateField",t.ZDateInput,Q),function(t){var a=t.zdatefield.Templates,o=t.zbutton.Templates.container;a.container=function(t){return ZT.html(zc0tO268(),t.className,t.title,t.width,t.id,t.children&&a.children(t))},a.children=function(t){return ZT.html(zc0tO269(),"beforeInput"===t.calendarPosition&&a.calendarIcon(t),ZT.html(zc0tO270(),t.tabindex,t.min,t.max,t.readonly,t.readonly,t.disabled,t.disabled,t.maxLength),t.clearButton&&o(t.clearButtonProps),"beforeSpinBtn"===t.calendarPosition&&a.calendarIcon(t),t.spinButtons&&ZT.html(zc0tO271(),t.isVertical?o(t.incrementProps):o(t.decrementProps),t.isVertical?o(t.decrementProps):o(t.incrementProps)),"afterSpinBtn"===t.calendarPosition&&a.calendarIcon(t))};var n=t.Templates.Utilities;a.calendarIcon=function(a){return ZT.html(zc0tO272(),"label"===a.calendarIconUIType?ZT.html(zc0tO273(),a.calIconClassName,n.icon(a.calendarIconProps)):t.zbutton.Templates.container(a.calendarIconProps))}}(ZPeopleComponents);var ee=function(o){function l(){return _classCallCheck(this,l),_possibleConstructorReturn(this,_getPrototypeOf(l).apply(this,arguments))}return _inherits(l,t.CoreComponent),_createClass(l,[{key:"_init",value:function(){var t=this._opts,o=(this.element[0],t.mainClass);t.id=this._getID(t),t.isToggle="zswitch"===o,this._setContentType(),t.checked=t.on=null===t.on?t.checked:t.on,null===t.checked?t.on=t.checked=this.element[0].checked:this.element[0].checked=t.checked,t.transition=/(Trident|Edge)/gi.test(navigator.userAgent)?"zswitch--notransition":"",t.isCE=this.isCE;var n=t.thumb,l=n.offStateClassName,i=n.onStateClassName;t.thumb&&(t.thumbClassName=t.checked?null===i?"":i:null===l?"":l),t.name&&(this._data.attrs={name:t.name}),this._isVertical="vertical"===this._opts.orientation,"none"!==t.contentType&&this._assignIcons(!1)}},{key:"_assignIcons",value:function(){var t=this._data,a=this._opts;t.hasOnIcon=t.hasOffIcon=t.hasThumbIcon=!1,a.isToggle&&this._mergeData(a.thumb,a.on?"on":"off",!0)&&(t.isThumb=!0),"icon"===a.contentType&&this._initIcon(),t.track=a.isToggle?a.track:this._buildTrack(a),this._firstRender=t.firstRender=!0}},{key:"_postRender",value:function(t){var a=this._opts,n=a.mainClass,l=this.container,i=this.name,s=a.disabled;a.isToggle||(this.element=t||l),this._data.className+=" ".concat(n," ")+n+(a.checked?"--on ":"--off ")+n+"--"+a.size.toLowerCase()+("vertical"===a.orientation?" "+n+"--vertical ":""),this._addedByComponent=!0,l.attr({"aria-checked":a.checked,"aria-pressed":a.checked,checked:a.checked,"aria-orientation":a.orientation,id:this._getID(l),role:"switch"}).on("contextmenu."+i,function(){return!1}),this._addedByComponent=!1,a.isToggle&&(this._thumb=l.find("."+n+"__thumb")),this._touchInit(),this._buildElements(),s&&this._disable(s)}},{key:"_postEachRender",value:function(){this._setSize(!0),this._data.rendered&&this._resizeSwitch()}},{key:"_bindEvents",value:function(){var a=this,o=this._opts;this.element[0].id&&this.element.next("[for='".concat(this.element[0].id,"']")).on("click",function(){a._swtichOnOff(!o.checked,!0,!0)});var n=this.container,l="."+this.name;n.on("keyup"+l,function(a){a.keyCode===t.keyCode.TAB&&n.addClass("has-kfocus")}).on("blur"+l,function(){n.removeClass("has-kfocus")}).on("keydown"+l,function(){32!==e.which||o.disabled||(a.element[0].checked?a.switchOff(!0):a.switchOn(!0),e.preventDefault())}),o.isToggle&&this._handleState?n.on("mousedown"+l,function(t){o.disabled||(a._handleState(t,a._thumb.outerHeight(),a._thumb.outerWidth()),n.attr("tabindex",0))}):this._listenMousUp(l)}},{key:"_listenMousUp",value:function(t){var a=this,o=this._opts;this.container.on("mouseup."+t,function(){o.disabled||(a.element[0].checked?a.switchOff(!0):a.switchOn(!0))})}},{key:"_initIcon",value:function(){var t=this._opts,a=t.isToggle?t.track:this._buildTrack(t);this._mergeData(a,"on"),this._mergeData(a,"off")}},{key:"_mergeData",value:function(a,o,n){var l=t._getIconInfo(a["".concat(o,"StateIconClassName")],a["".concat(o,"StateSVGIconId")],void 0,"".concat(this._opts.mainClass,"__icon")),i=this._data;i["".concat(o=n?"thumb":o,"SVGIconId")]=l.SVGIconId,i["".concat(o,"iconClassName")]=l.iconClassName,i["".concat(o,"SVGIconClassName")]=l.SVGIconClassName,(l.SVGIconId||l.iconClassName||l.SVGIconClassName)&&(n?i.hasThumbIcon=!0:i.hasOnIcon=i.hasOffIcon=!0)}},{key:"_hasSVG",value:function(t){return!(!t.onStateSVGIconId&&!t.offStateSVGIconId)}},{key:"_buildElements",value:function(){var t=this._opts,a=this.container;this._switchWrapper=a.find(".".concat(t.mainClass,"__statescontainer")),this._left=a.find(".".concat(t.onState)),this._right=a.find(".".concat(t.offState)),this._setPosition(t.orientation,t.checked)}},{key:"_thumbIcon",value:function(t){var a=this._opts,n=(a.on?"on":"off")+(this._hasSVG(a.thumb)?"StateSVGIconId":"StateIconClassName");this._createIcon(n,a.thumb[n],!0,!t)}},{key:"_buildTrack",value:function(t){return{onStateClass:t.onStateClass,offStateClass:t.offStateClass,onStateLabel:t.onStateLabel,offStateLabel:t.offStateLabel,onStateIconClassName:t.onStateIconClassName,offStateIconClassName:t.offStateIconClassName,onStateSVGIconId:t.onStateSVGIconId,offStateSVGIconId:t.offStateSVGIconId}}},{key:"_createIcon",value:function(t,a,o,n){if(a){var l=this._opts,i=this._data,s=-1===t.indexOf("off")?"on":"off",r=o?"thumb":"track";l[r][t]=a,i[r]=l[r],this._mergeData(l[r],s,o),l.isToggle||(l.track=this._buildTrack(l)),n&&(this._render(i),this._buildElements()),o&&(this._thumb=this.container.find(".".concat(l.mainClass,"__thumb")))}}},{key:"_setContentType",value:function(){var t=this._opts,a=t.isToggle?t.track:this._buildTrack(t);a.onStateIconClassName&&a.offStateIconClassName||a.onStateSVGIconId&&a.offStateSVGIconId?t.contentType="icon":a.offStateLabel&&a.onStateLabel&&(t.contentType="text")}},{key:"_setSize",value:function(){var t=this._opts,a=this.container,o=this._thumb,n=this._switchWrapper,l=t.orientation,i=t.height,s=t.width;t.minHeight=i||parseInt(a.css("min-height")),t.minWidth=s||parseInt(a.css("min-width")),t.isToggle&&(t.thumbMinWidth=parseInt(o.css("width")),t.thumbMinHeight=parseInt(o.css("height")),this._maxWidth=parseInt(n.css("vertical"===l?"top":"left")),this._setPosition(l,t.checked),this._domChanged=!0),this._resizeSwitch(i,s)}},{key:"_setTooltip",value:function(){if(this._opts.title)this.container.attr("title",this._opts.title);else{var t=(!0===this._opts.checked?this._left:this._right).find("span.zswitch__label"),a=0<t.length&&t[0].offsetWidth<t[0].scrollWidth;this.container[a?"attr":"removeAttr"]("title",t.text())}}},{key:"_trigger",value:function(t){return this._dispatchEvent("change",null,{state:this._opts.checked},null,t)}},{key:"getState",value:function(){return this._opts.checked}},{key:"switch",value:function(){this.element[0].checked?this.switchOff():this.switchOn()}},{key:"switchOn",value:function(t){this._swtichOnOff(!0,!this.element[0].checked,t)}},{key:"switchOff",value:function(t){this._swtichOnOff(!1,!!this.element[0].checked,t)}},{key:"_swtichOnOff",value:function(t,a,o){var n=this._opts;if(!n.disabled){var l=n.mainClass,i=n.thumb,s=n.track,r=l+"--on "+s.onStateClassName,d=l+"--off "+s.offStateClassName,c=this._data;this.container.addClass(t?r:d).removeClass(t?d:r).attr({"aria-checked":t,"aria-pressed":t}),n.isThumb&&(c.thumbClassName=i[t?"onStateClassName":"offStateClassName"]),this._setPosition(n.orientation,t),this._addedByComponent=!0,c.checked=c.on=n.checked=n.on=this.element[0].checked=t,this._addedByComponent=!1,c.hasThumbIcon&&this._thumbIcon(!1),a&&this._trigger(o),this._setTooltip()}this._thumb.css({top:"",left:""})}},{key:"disable",value:function(){this._disable(!0)}},{key:"enable",value:function(){this._disable(!1)}},{key:"_disable",value:function(t){var a=this.container;t=!(!t&&"disabled"!==t),this._opts.disabled=t,t?a.attr({"aria-disabled":!0,disabled:!0}):a.removeAttr("aria-disabled disabled"),a[t?"addClass":"removeClass"]("is-disabled")}},{key:"resizeSwitch",value:function(t,a){var o=this._opts;o.minHeight=o.maxHeight=o.height=t,o.minWidth=o.maxWidth=o.width=a,this._resizeSwitch(t,a)}},{key:"_getStyles",value:function(t,a){var o=t.css(a);return void 0===o?0:parseInt(o,10)}},{key:"_getWidth",value:function(t){var a="border-".concat(t,"-width");return parseInt(getComputedStyle(this.container[0],null).getPropertyValue(a),10)}},{key:"_getEle",value:function(t){return"text"===this._opts.contentType?t.html():t.clone()}},{key:"_resizeSwitch",value:function(t,a){var g,h,v,y,o=this._opts,l=this._left,i=this._right,s=this._getWidth("left")+this._getWidth("right"),r=this._getWidth("top")+this._getWidth("bottom"),d=o.rtl?"padding-left":"padding-right",c=o.rtl?"padding-right":"padding-left",_=this._getStyles(l,"padding-"+(o.rtl?"bottom":"top")),u=0,p=0,m=0;(l.children()[0]||i.children()[0])&&(g=this._getEle(l.children()),h=this._getEle(i.children()),y=(v=n('<label style="font-size:12px;">').html(g.length?g:"").appendTo(n("body"))).clone().html(h.length?h:"").appendTo(n("body")),m=(u=v.width())>(p=y.width())?u:p);var w,f=o.thumbMinWidth,k=o.minWidth,b=o.minHeight,C=o.minHeight,D=o.thumbMinHeight,S=f+s,T=D+r;(f=this._max(f,"thumbMinWidth","thumbMaxWidth"))>=o.thumbMinWidth&&("horizontal"===o.orientation?(l.css({"padding-bottom":0,left:o.rtl?1*-f:"auto"}).css(d,S),i.css({"padding-top":0,left:o.rtl?"auto":1*-f}).css(c,S)):(l.css({"padding-bottom":T,left:0}).css(d,0),i.css({"padding-top":T,left:"auto"}).css(c,0))),"vertical"===o.orientation?(void 0!==t&&null!==t?(C=b=this._max(t,"minHeight","maxHeight"),this._maxWidth=b-D-r):C=this._max(C+D+_+r,"minHeight","maxHeight"),w="none"===o.contentType?0:this._getStyles(l.children(),"margin-top")+this._getStyles(l.children(),"margin-bottom"),this._setContainerWidthHeight(o.minWidth,o.minHeight+(""===w?0:w)+r),this._maxWidth=o.minHeight-D+(""===w?0:w)+r,this._setPosition(o.orientation,o.checked)):(void 0!==a&&null!==a?(m=this._max(a,"minWidth","maxWidth"),this._maxWidth=m-f-s):(w=this._getStyles(l.children(),"margin-left")+this._getStyles(l.children(),"margin-right"),k=m+f+s+("text"===o.contentType?w+(18<m?.2*m:0):0),"none"!==o.contentType&&(k+=4),m=this._max(k,"minWidth","maxWidth")),this._setContainerWidthHeight(m,C),this._maxWidth=m-f,this._setPosition(o.orientation,o.checked),this._setTooltip()),v&&v.remove(),y&&y.remove()}},{key:"_setContainerWidthHeight",value:function(t,a){var o={};void 0!==t&&(o.width="".concat(t,"px")),void 0!==a&&(o.height="".concat(a,"px")),this.container.css(o)}},{key:"_setPosition",value:function(t,a){"vertical"===t?this._switchWrapper.css({top:a?0:-this._maxWidth,left:0}):this._switchWrapper.css({left:this._swapValue(0,-this._maxWidth,a),top:0})}},{key:"_swapValue",value:function(t,a,o){return o&&this._opts.rtl||!o&&!this._opts.rtl?a:t}},{key:"_max",value:function(t,a,o){var n=this._opts;return t<n[a]?n[a]:t>n[o]?n[o]:t}},{key:"_changeDirection",value:function(t){var a=this._opts;this._left[0].removeAttribute("style"),this._right[0].removeAttribute("style"),this._data.rtl=a.rtl=t,this._updateClass("zh-rtl",t,this.container),this._render()}},{key:"_setAttribute",value:function(t,a){var o=this._opts;"checked"===t||"on"===t?a?this.switchOn():this.switchOff():"disabled"===t?this._disable(a):"className"==t&&this.container.addClass(a).removeClass(o[t]),"rtl"===t?this._changeDirection(a):!/^(disabled|className|orientation|size)$/.test(t)&&(this._domChanged=!0),("height"===t||"width"===t)&&this._resizeSwitch(o.height,o.width)}},{key:"_touchInit",value:function(){var t=this.container,a=this;t[0].addEventListener("touchstart",a._touchHandler,!0),t[0].addEventListener("touchmove",a._touchHandler,!0),t[0].addEventListener("touchend",a._touchHandler,!0),t[0].addEventListener("touchcancel",a._touchHandler,!0)}},{key:"_touchHandler",value:function(t){var o=t.changedTouches[0],n="";switch(t.type){case"touchstart":n="mousedown";break;case"touchmove":n="mousemove";break;case"touchend":case"touchcancel":n="mouseup";break;default:return}var l=document.createEvent("MouseEvent");l.initMouseEvent(n,!0,!0,window,1,o.screenX,o.screenY,o.clientX,o.clientY,!1,!1,!1,!1,0,null),o.target.dispatchEvent(l),t.preventDefault()}},{key:"_switchHandler",value:function(t,o,n){t=a(o);var l=this._opts,i=l.orientation;return!!(n/2>=t&&(!l.rtl||"vertical"===i)||n/2<=t&&l.rtl&&"horizontal"===i)}},{key:"_addTransition",value:function(){""!==this._opts.transition&&this._switchWrapper.addClass("zswitch--notransition")}},{key:"_handleState",value:function(a){var y,f,o=this,n=this._opts,l=a.clientX,i=this.container,s=this._thumb,r=!1,d=this.name,c=this._switchWrapper,_=parseInt(c.css("left")),u="left",p=_,m=n.mainClass,g=m+"--on ",h=m+"--off ",v=n.orientation;"vertical"===v&&(p=_=parseInt(c.css("top")),l=a.clientY,u="top");var k=parseInt(i.width())-s.outerWidth(!0),b=parseInt(i.height())-s.outerHeight(!0);this.container.on("mousemove."+d,function(t){c.removeClass("zswitch--notransition"),setTimeout(function(){r=!0},100),y=o._maxWidth;var C,D,a=n.track,d=k,m=t.clientX-l+_;"horizontal"!==v&&(d=b,m=t.clientY-l+_),0>=m&&m>=-y?(p=m,C=d+m,D=m):0>m?(C=0,D=-y):m>-y&&(C=d,D=0),s.css(u,C),c.css(u,D),o._switchHandler(f,p,y)?i.addClass(g+a.onStateClassName).removeClass(h+a.offStateClassName):i.addClass(h+a.offStateClassName).removeClass(g+a.onStateClassName)}).on("mouseup."+d,function(){o.container.off("mousemove."+d+" mouseup."+d+" selectstart."+d),r?o._switchHandler(f,p,y)?o.switchOn(!0):o.switchOff(!0):o.element[0].checked?o.switchOff(!0):o.switchOn(!0),o._addTransition()}).on("selectstart."+d,function(){return!1}).off("mouseleave."+d).on("mouseleave."+d,function(){o.container.off("mousemove."+d+" mouseup."+d+" selectstart."+d)}),t.$window.off("mouseup."+d).on("mouseup."+d,function(){r&&(o._switchHandler(f,p,y)?o.switchOn(!0):o.switchOff(!0),o._addTransition()),t.$window.off("mouseup."+d)})}},{key:"_setAttribute",value:function(t,a){var o=this._opts,n=this._data,l=o.mainClass,i=o[t];if(!/^(track|thumb|className)$/.test(t)){if(/^(checked|on)$/.test(t)&&n.disabled)return!1;n[t]=o[t]=a}if("orientation"===t)return this._isVertical="vertical"===a,this._updateClass("".concat(l,"--vertical"),!this._isVertical,this.container),this.container.attr("aria-orientation",a),this._setSize(),!1;if("size"===t)this.container.addClass(l+"--"+a).removeClass(l+"--"+i),this._thumb&&this._thumb.removeAttr("style"),this._setSize();else if(/^(track|thumb)$/.test(t))if("none"===a)this._resetOption(t),"track"===t?(o.contentType="none",this._initIcon()):(n.hasThumbIcon=!1,this._thumbIcon(!0));else{var s;for(var r in a)s=a[r],this._isNotNull(s)&&s!==i[r]&&this._changeContents(r,t,s,i,"thumb"===t)}else/^(checked|on)$/.test(t)?a?this.switchOn():this.switchOff():"disabled"===t?this._disable(a):"className"===t&&this.container.addClass(a).removeClass(i);"rtl"===t?this._changeDirection(a):!/^(disabled|className|orientation|size)$/.test(t)&&(this._domChanged=!0),("height"===t||"width"===t)&&this._resizeSwitch(o.height,o.width)}},{key:"_changeContents",value:function(t,a,o,n,l){var i=this._opts,s=this._data,r=void 0===a?i:i[a];if(-1!==t.indexOf("StateClassName")||"className"===t){var d=i.checked;if("className"===t||d&&"onStateClassName"===t||!d&&"offStateClassName"===t)(!0===l?this._thumb:this.container).addClass(o).removeClass(n[t]);r[t]=o}else if(-1===t.indexOf("StateLabel")||l){if(-1!==t.indexOf("StateIconClassName")||-1!==t.indexOf("StateSVGIconId")){var u=-1===t.indexOf("off")?this._left:this._right,p=!1;l?(i.isThumb=this._isNotNull(o),u=this._thumb,p=-1!==t.indexOf("onS")&&i.checked||-1!==t.indexOf("off")&&!i.checked):i.contentType="icon",this._updateIcons(u,a,t,o,l,p)}}else{i.contentType="text",s.hasOnIcon=s.hasOffIcon=!1,(void 0===a?i:i[a])[t]=r[t]=o,this._resetOption(a,"icons"),this._resetOption(a,"svg"),this._createLabel(r)}}},{key:"_updateIcons",value:function(t,a,o,n,l,i){var s=void 0===a?this._opts:this._opts[a],r=this._opts.contentType;("icon"===r||"icon-text"===r||l)&&(this._resetOption(a,"text"),s[o]=n,-1===o.indexOf("StateIconClassName")?this._resetOption(a,"icons"):this._resetOption(a,"svg"),n&&(l&&i||!l)&&this._createIcon(o,n,l))}},{key:"_createLabel",value:function(t){t.onStateLabel=t.onStateLabel||this._getI18NText("on"),t.offStateLabel=t.offStateLabel||this._getI18NText("off");var a=this._data,o=this._opts,n=this._buildTrack(t);if(o.isToggle)a.track=o.track=n;else{var l=this._data.rendered;(a=o=n).rendered=l}}},{key:"_resetOption",value:function(t,a){var o=void 0===t?this._opts:this._opts[t];"text"===a?o.onStateLabel=o.offStateLabel=null:"icons"===a?o.onStateIconClassName=o.offStateIconClassName=null:o.onStateSVGIconId=o.offStateSVGIconId="svg"===a?null:o.onStateIconClassName=o.offStateIconClassName=o.onStateLabel=o.offStateLabel=null}},{key:"name",get:function(){return"ztoggleswitch"}},{key:"attrs",get:function(){return{rtl:!1,contentType:"none",orientation:"horizontal",size:"medium",on:!1,checked:!1,disabled:!1,minWidth:null,maxWidth:500,minHeight:null,maxHeight:300,thumbMinWidth:null,thumbMinHeight:null,thumbMaxHeight:100,thumbMaxWidth:100,height:null,width:null,isThumb:!1,onState:"zswitch__onstate",offState:"zswitch__offstate",mainClass:"zswitch"}}},{key:"props",get:function(){return{track:{color:null,offStateClassName:null,onStateColor:null,offStateColor:null,onStateClassName:null,onStateLabel:null,offStateLabel:null,onStateIconClassName:null,onStateSVGIconId:null,offStateIconClassName:null,offStateSVGIconId:null},thumb:{color:null,offStateClassName:null,onStateColor:null,onStateClassName:null,onStateIconClassName:null,onStateSVGIconId:null,offStateIconClassName:null,offStateSVGIconId:null},labels:{on:"On",off:"Off"}}}},{key:"EVENTS",get:function(){return["change"]}},{key:"clsname",get:function(){return{oncls:"onStateClassName",offcls:"offStateClassName",onicon:"onStateIconClassName",officon:"offStateIconClassName",onsvg:"onStateSVGIconId",offsvg:"offStateSVGIconId",onlbl:"onStateLabel",offlbl:"offStateLabel"}}}]),l}();t.registerComponent("ZToggleSwitch",ee),function(t){var a=ZPeopleComponents.ztoggleswitch.Templates;a.container=function(t){return ZT.html(zc0tO274(),t.text,t.id,t.role,t.className,t.checked,t.children&&a.children(t))},a.children=function(t){return ZT.html(zc0tO275(),t.thumbClassName,t.hasThumbIcon&&(t.iconType="thumb")&&a.icon(t),t.transition,t.track.onStateLabel&&ZT.html(zc0tO276(),t.track.onStateLabel),t.hasOnIcon&&(t.iconType="on")&&a.icon(t),t.track.offStateLabel&&ZT.html(zc0tO277(),t.track.offStateLabel),t.hasOffIcon&&(t.iconType="off")&&a.icon(t))},a.icon=function(t){return ZT.html(zc0tO278(),t[t.iconType+"iconClassName"],ZT.customHTML(t[t.iconType+"SVGIconId"]&&"<svg class='".concat(t[t.iconType+"SVGIconClassName"],"'><use xlink:href='").concat(t[t.iconType+"SVGIconId"],"'></use></svg>")))}}();var te=function(a){function o(){return _classCallCheck(this,o),_possibleConstructorReturn(this,_getPrototypeOf(o).apply(this,arguments))}return _inherits(o,t.CoreComponent),_createClass(o,[{key:"_create",value:function(){var a="."+this.name;this._eventSuffix=a+"-temp";var o=this._opts.enableDebounce?"_debounceHandler":"_targetEnter";this.element.on("mouseenter"+a+" mousemove"+a,this[o].bind(this)).on("mouseleave"+a,function(){t._inTooltipArea=!1}),this._scrollHandlerBinded=this._scrollHandler.bind(this)}},{key:"_scrollHandler",value:function(t){this._hide(void 0,t)}},{key:"_debounceHandler",value:function(t){var a=this;this._moveMoveTimer&&clearTimeout(this._moveMoveTimer),this._removeTitleOnHover(t.target),this._hidePrevInstance(),this._moveMoveTimer=setTimeout(function(){a._targetEnter(t),a._moveMoveTimer=null},100)}},{key:"_handleEvents",value:function(a){var o=this,n=this._eventSuffix;t.$document.off(n),window.removeEventListener("scroll",this._scrollHandlerBinded,!0),a&&(t.$document.on("keydown"+n+" mousedown"+n,function(t){(o.targetOpt.hideOnTargetClick||o.target[0]!==t.target)&&o._hide(void 0,t)}),window.addEventListener("scroll",this._scrollHandlerBinded,!0))}},{key:"_targetEnter",value:function(a,o,l){var r,s=this;if(this.custom=!1,this.target&&(this.target.is(":hidden")||this.target.is("button[disabled], input[disabled], textarea[disabled], fieldset[disabled], select[disabled], keygen[disabled] , output[disabled], option[disabled]")))this._hide(void 0,a);else{if(a){if(!a.originalEvent)return;this.pageX=a.pageX,this.pageY=a.pageY;var c,d=this._opts.maxAllowedTraversal;r=a.target;for(var _=0;_<d&&(c=r.hasAttribute("data-ztemp-title"),!(r==this.element[0]||c||r.hasAttribute("title")||r.hasAttribute("data-title-content-id")))&&((r=r.parentElement)&&"BODY"!==r.tagName);_++);if(r=n(r),this.target&&this.target.is(":hover")&&!this.target.find(r).length){if(!this._refreshed&&(this._lastTip||this._hiddenOnTimeOut))return;r=this.target}else if(!r.length||!r.attr("title")&&!r.attr("data-ztemp-title")&&!r.attr("data-title-for-element")||r.attr("data-title-content-id")||this._opts.selector&&!r.is(this._opts.selector))return;this._hidePrevInstance(),t._inTooltipArea=this}else{if(!o)return;this.custom=!0,r=n(o)}this._hiddenOnTimeOut=!1,this.target&&this._clearTitle(!0,this.target),this.target=r,this.targetOpt=this._getOptions(r,l),this.custom&&(this.targetOpt.showDelay=0),this._clearTitle(),this.target.off(this._eventSuffix).on("mouseleave"+this._eventSuffix,function(t){s._hiddenOnTimeOut=!1,s._hide(void 0,t)}),this._lastEvent=a,this._show(a)}}},{key:"_removeTitleOnHover",value:function(t){if(t.hasAttribute("title")){var a=t.getAttribute("title");t.removeAttribute("title"),t.setAttribute("data-ztemp-title",a)}}},{key:"_hidePrevInstance",value:function(){var a=t._inTooltipArea;if(a){if(this.element.find(a.element[0]).length)return;a._hide(!0),t._inTooltipArea=!1}}},{key:"_hide",value:function(t,a){if(this.target&&this._trigger("beforehide",a)){var o=!this.target.is(":hover");o&&this._clearTitle(!0),this._clearShowTimer(),this._clearHideTimer(),this.container&&this._removeTip(t,o),this._handleEvents()}}},{key:"_show",value:function(t){var a=this,o=this.targetOpt,n=this.target;o.showDelay&&void 0===o.reshowDelay&&(this.targetOpt.reshowDelay=o.showDelay/5),this.targetOpt.hideOnTargetClick&&n.on("mousedown"+this._eventSuffix,function(t){a._trigger("beforehide",t)&&(a._clearShowTimer(),a._removeTip(!0))}),this._showTooltip(t)}},{key:"_clearShowTimer",value:function(){clearTimeout(this.showTimer)}},{key:"_clearHideTimer",value:function(){clearTimeout(this.hideTimer)}},{key:"_setTimer",value:function(t,a){var o=this,n=a.maxDisplayTime;(n="number"==typeof n?+n:0)&&(this._clearHideTimer(),this.hideTimer=setTimeout(function(){o._trigger("beforehide",void 0,{exceededMaxDisplayTime:!0})&&(o._hiddenOnTimeOut=!0,o._removeTip(!0))},n))}},{key:"_getTitleForEllipsisEle",value:function(t,a){var o=this.target;if("self"!==a&&a&&(o=o.find(a)),o.length){var n=o[0].clientWidth;return""!==o[0].innerText&&0<n&&n>=o[0].scrollWidth?void 0:t.title||o.text()}}},{key:"_showHandler",value:function(t,a){var o=this;if(this._trigger("beforeshow",t)){var n=this.targetOpt;if(!this.target.is(":visible"))return;var l=n.forElement;if(l||!n.ignoreEllipsis){var i=this._getTitleForEllipsisEle(n,l);if(!i)return;n.title=i}this._clearHideTimer(),/^(auto|top|bottom|right|left|top-left|top-right|bottom-left|bottom-right|at-cursor|follow-cursor)$/.test(n.position)||(n.position=this._DEFAULTS.position),this._isAtCursorPos()&&(void 0!==this.pageX&&void 0!==this.pageY||n.offset?n.displayType="box":n.position="top"),this._includeContent(),this._createTooltip(),this._setTimer(this.target,n),"follow-cursor"===n.position&&this.target.on("mousemove"+this._eventSuffix,function(t){o._positionElement(t),o._setTimer(o.target,n)}),this._positionElement(t),this._handleEvents(!0),this._animate(this.container,a,"show",function(){o._trigger("show",t)})}}},{key:"_showTooltip",value:function(t){var a=this.targetOpt,o=a.showDelay,n=a.animation;this.container&&(this.target.is(this._lastTip)?n=o=void 0:(o=a.reshowDelay,this._trigger("hide",t,this._lastTip))),this._lastTip=this.target,this._clearShowTimer(),o?this.showTimer=setTimeout(this._showHandler.bind(this,t,n),o):this._showHandler(t,n)}},{key:"_animate",value:function(a,o,l,i){var s=function(){a.css("display","hide"===l?"none":""),i&&i()};if(o&&t.animationHandler&&!n.isEmptyObject(o)){var r={element:a,action:l,callback:s,ctype:this.name,animation:o};t.animationHandler(r)}else s()}},{key:"_includeContent",value:function(){var a=this.targetOpt;if("object"===_typeof(a)){var o=a.title=a.title||a.content||"";o="string"==typeof a.innerHTML?this._populateTemplate(a.innerHTML,a):"string"==typeof a.contentId?document.getElementById(a.contentId).innerHTML:this._encodeContent(o),a.showShortcutKey&&t.ShortCut&&(o=this._appendShortCut(a,o)),this._setContent(a,o)}}},{key:"_setContent",value:function(t,a){this._opts.content=a}},{key:"_encodeContent",value:function(a){return this.targetOpt.isMessageHTMLEncoded?a:t.encodeHTML(a)}},{key:"_populateTemplate",value:function(t,a){var o=this;return"string"==typeof t?t.replace(/(#?#[^# ]+#?#)/g,function(t){var n=a[t.replace(/#/g,"")];return o._isNotNull(n)?o._encodeContent(n):t}):"function"==typeof t?t(a):void 0}},{key:"_isAtCursorPos",value:function(){return/^(at-cursor|follow-cursor)$/.test(this.targetOpt.position)}},{key:"_positionElement",value:function(t){var a=this._getPosition(t),o=a.direction.split("-")[0];this.container.removeClass("class").addClass("ztooltip ztooltip--"+o);var n=this.targetOpt.margin;(this._isAtCursorPos()||n&&"object"===_typeof(n))&&this._updateMargin(n,a,o),this.container.css(a.elementPosition),this._callout&&this._callout.css(a.arrowPosition)}},{key:"_getPosition",value:function(a){var o=this.targetOpt,l=this.target,i=o.position,s=o.positionAlterable;this.container.css({left:"auto",right:"auto"});var r=o.offset;return this._isAtCursorPos()||r?(r?(this.pageX=parseInt(r.left),this.pageY=parseInt(r.top)):i="bottom-left",(l=a||{preventDefault:function(){}}).pageX=this.pageX,l.pageY=this.pageY,s="flipallfit"):"auto"===o.position?(i="bottom",s="flipallfit"):void 0===s&&(s=!1),t.Position.get(l,this.container,{rtl:o.rtl,direction:i,eventObj:a,bufferSpace:this._callout?10:0,positionAlterable:s,arrowCallback:function(t,a){n(t).attr("class","ztooltip__pointer zh-"+a)},arrow:"callout"===o.displayType?{element:this._callout,direction:!0,minSpace:8}:void 0})}},{key:"_removeTipHandler",value:function(t){var a=this;if(this.container){if(!t&&this.targetOpt.pauseOnMouseOver&&this.container.is(":hover"))return;this._lastTip=null,this._animate(this.container,this.targetOpt.animation,"hide",function(){a._callout=null,a._trigger("hide")})}}},{key:"_removeTip",value:function(t,a){this._lastEvent=!1,this._clearHideTimer(),this.container&&(this.custom&&a&&this._clearTitle(!0,this.target),t||!this.targetOpt.hideDelay?this._removeTipHandler(t):this.hideTimer=setTimeout(this._removeTipHandler.bind(this),this.targetOpt.hideDelay))}},{key:"_getOptions",value:function(t,a){var o=t.attr("title")||t.attr("data-ztemp-title"),l={title:o};if(this._opts.parseTitleForOptions&&o&&isNaN(o)&&-1!==o.indexOf("{"))try{l=JSON.parse(o)}catch(t){}else n.extend(l,this._getTargetAttrs(t));return n.extend(!0,{},this._opts,l,a||{})}},{key:"_createTooltip",value:function(){var t=this,a=this.targetOpt;this._opts.callout="callout"===a.displayType,this._callout=!1;var o=this._render(!!this.container);o&&(this.container?this.container.stop(!0,!0).hide():this.container=n(o).on("mouseleave"+this._eventSuffix,function(){t.target||t._removeTipHandler()})),this.container.css("pointer-events",a.pauseOnMouseOver?"auto":"").attr("class","ztooltip "+(a.className||"")+(a.rtl?" h-rtl":"")),this._opts.callout&&(this._callout=this.container.find(".ztooltip__pointer"))}},{key:"_render",value:function(a){return t._render(this._opts,this.name,null,this.container&&this.container[0],n("body")[0],{skipParent:a})}},{key:"_isUploadFileBtn",value:function(t){return"INPUT"===t.tagName&&"file"===t.type}},{key:"_clearTitle",value:function(t,a){if((a=a||this.target)&&a.length)if(t){a.off(this._eventSuffix);for(var o=a.data("zdependentElements")||[],l=0;l<o.length;l++){var s=n(o[l]),r=s.attr("title");(void 0===r||!r&&this._isUploadFileBtn(s[0]))&&s.attr("title",s.data("ztitle")),s.removeData("ztitle")}a.removeData("zdependentElements");var d=a.data("ztitleId");d&&a.attr("data-title-content-id",d).removeData("ztitleId"),this.target=void 0}else{var c=a[0].hasAttribute("data-ztemp-title")?[]:a.parents("[title]").toArray();c.push(a);for(var u,_=0;_<c.length;_++)(u=n(c[_])).data("ztitle",u.attr("title")),u.removeAttr("title"),this._isUploadFileBtn(u[0])&&(u[0].title="");a.data("zdependentElements",c);var p=a.attr("data-title-content-id");p&&a.data("ztitleId",p).removeAttr("data-title-content-id")}}},{key:"_trigger",value:function(t,a,o){return this._dispatchEvent(t,a,{target:o||this.target,tooltip:"show"===t?this.container:void 0})}},{key:"_destroy",value:function(){this.element.off("."+this.name),this._hide(!0),this._useParent=this._keepTemplateData=!this.container}},{key:"refresh",value:function(){this._lastEvent&&(this._refreshed=!0,this._targetEnter(this._lastEvent),this._refreshed=!1)}},{key:"setAttribute",value:function(t,a){return"object"===_typeof(a)&&this._opts[t]?void n.extend(this._opts[t],a):void(this._opts[t]=a)}},{key:"_appendShortCut",value:function(a,o){var n=this.target;n=n.is("label.zbutton")?n.prev("input"):n;var l=t._getOpts(n),i=t.ShortCut.getInfo(l.actionName,n,!1);return i&&(o+=i=a.shortcutKeyCustomHTML?a.shortcutKeyCustomHTML.replace(/(#key#)/gi,i):" ("+i+")"),o}},{key:"_updateMargin",value:function(t,a,o){var n=t&&parseInt(t.top),l=t&&parseInt(t.left),s=this.targetOpt.rtl?-1:1,r=a.elementPosition;if(isNaN(n)&&(n=0),isNaN(l)&&(l=0),this._isAtCursorPos()){var d=a.availableHeight-this.container.outerHeight();r.left+=l*s,n||(n=i(16,d))}"top"===o?r.top-=n:"bottom"===o?r.top+=n:"right"===o?r.left+=l*s:"left"==o&&(r.left-=l*s)}},{key:"_getTargetAttrs",value:function(a){var o={},n=a[0].attributes;return Object.keys(n).forEach(function(a){var l=n[a];if(l){var i=l.nodeName,s=l.value;i.match(/^data-title-/)&&(i=i.replace(/^data-title-/,"").replace(/-([a-z])/g,function(t){return t[1].toUpperCase()}).replace(/(html)/gi,"HTML"),o[i]="true"===s||"false"===s?"true"===s:-1===s.indexOf("{")?s:t._getObject(s))}}),o}},{key:"show",value:function(t,a){return(t=n(t||this.element)).length&&((a=a||{}).showDelay=0,this._targetEnter(void 0,t,a)),t}},{key:"hide",value:function(t){this._hide(t)}},{key:"name",get:function(){return"ztooltip"}},{key:"attrs",get:function(){return{isMessageHTMLEncoded:!1,selector:void 0,displayType:"box",position:"at-cursor",hideOnTargetClick:!0,margin:void 0,showDelay:500,hideDelay:300,maxDisplayTime:5e3,reshowDelay:void 0,showShortcutKey:!0,enableDebounce:!1,ignoreEllipsis:!0,maxAllowedTraversal:10,animation:{show:{name:"fade"},hide:{name:"fade"}},className:void 0,innerHTML:void 0,pauseOnMouseOver:!1,positionAlterable:void 0,parseTitleForOptions:!1,forElement:""}}},{key:"EVENTS",get:function(){return["beforeshow","show","beforehide","hide"]}}]),o}();t.registerComponent("ZTooltip",te),function(t){var a=ZPeopleComponents.ztooltip.Templates;a.container=function(t){return ZT.html(zc0tO279(),t.children&&a.children(t))},a.children=function(t){return ZT.html(zc0tO280(),ZT.customHTML(t.content),t.callout&&ZT.html(zc0tO281()))}}();var ae=function(t){function a(){return _classCallCheck(this,a),_possibleConstructorReturn(this,_getPrototypeOf(a).apply(this,arguments))}return _inherits(a,t),_createClass(a,[{key:"_bindEvents",value:function(){_get(_getPrototypeOf(a.prototype),"_bindEvents",this).call(this),this._handleFocus(this.container)}},{key:"_setRenderData",value:function(){_get(_getPrototypeOf(a.prototype),"_setRenderData",this).apply(this,arguments),this._data.attrs.role="button"}},{key:"_setClassName",value:function(t,o){_get(_getPrototypeOf(a.prototype),"_setClassName",this).call(this,t,o,t.arrow?"":"zcolorselect--withoutarrow")}},{key:"_setAttribute",value:function(t,o){/^(arrowIcon)$/.test(t)?(this._opts[t]=o,this._domChanged=!0):_get(_getPrototypeOf(a.prototype),"_setAttribute",this).call(this,t,o)}},{key:"name",get:function(){return"zcolorselect"}},{key:"attrs",get:function(){return{tabIndex:0,arrowIcon:!0}}},{key:"CLASSES",get:function(){return{CONTAINER:"zselectbox zcolorselect zselectbox--icononly",ICON:"zselectbox__icon",PREVIEW:"zcolorselect__preview",ARROWSVGICON:"zselectbox__arrow"}}}]),a}(t.ZColorBase);t.registerComponent("ZColorSelect",t.ZColorBase,ae),function(t){var a=t.zcolorselect.Templates,o=t.Templates.Utilities;a.container=function(t){return ZT.html(zc0tO282(),t.children&&a.children(t))},a.children=function(t){return ZT.html(zc0tO283(),t.template?t.template(t):ZT.html(zc0tO284(),t.nofill?ZT.html(zc0tO285()):t.icon||t.stroke?ZT.html(zc0tO286(),t.previewStyleAttr,t.icon&&o.icon(t.icon)):ZT.html(zc0tO287(),t.color),t.arrow&&o.icon(t.arrow)))}}(ZPeopleComponents);var oe=function(a){function n(){return _classCallCheck(this,n),_possibleConstructorReturn(this,_getPrototypeOf(n).apply(this,arguments))}return _inherits(n,t.CoreComponent),_createClass(n,[{key:"_init",value:function(){var a=this._opts;a.locale||(this._opts.locale=t.locale),a.max=parseInt(a.max),this._eventTriggered=!1,"indeterminate"===a.mode&&(this._data.progressModifier="zeffects--move"),this._data.trackClass=a.trackClassName+" "+a.trackClass,this._data.progressClass=a.progressClassName+" "+a.progressClass,this._setBarStyles(),t.isEmpty(a.statusMessage)||this._updateStatusMessageData()}},{key:"_setBarStyles",value:function(){var t=this._opts;this._data.progressStyle="background:"+t.progressColor,this._data.trackStyle=this._getStyle({background:t.trackColor,border:t.trackBorder,"border-color":t.trackBorderColor})}},{key:"_postRender",value:function(t,a){t.attr({role:"progressbar","aria-valuemin":0,"aria-valuemax":a.max})}},{key:"_postEachRender",value:function(a){var o=this._opts,n=this._data;n.className=n.className.replace(/zprogress--group|zprogress--indeterminate|zprogress__labeltop|zprogress__labelleft|zprogress__labelright|zprogress__labelbottom|zprogress__labelinside|zprogress__labelcenter|/g,"");var l=" zprogress--group ";"indeterminate"===o.mode&&(l+="zprogress--indeterminate "),n.className+=l+(o.labelModifier||""),this._progressValue=a.find(".zprogress__bar"),this._progressValue.css("width","indeterminate"===o.mode?"":o.value*(100/o.max)+"%"),"callout"!==n.modifiedAttr&&!t.isEmpty(o.statusMessage)&&"callout"===o.statusMessage.displayType&&(!n.rendered||n.isStatusModified||this._reInit)&&(n.isStatusModified=null,this._setCalloutPosition())}},{key:"setValue",value:function(t){this._setValue(t)}},{key:"getValue",value:function(){if("indeterminate"!==this._opts.mode)return this._opts.value}},{key:"_setValue",value:function(a){var o=this,n=this._opts,l=n.max;if("indeterminate"!==n.mode&&!isNaN(a)&&((a=parseInt(a))>l&&(a=l),n.value!==a)){this._opts.value=a,this._eventTriggered&&a!==l&&(this._eventTriggered=!1);var i=a*(100/l);this._progressValue.css("width",i+"%").on(t._animationEnd,function(){o._eventTriggered||o._lastValue===o._opts.value||(!t.isEmpty(n.statusMessage)&&o._updateStatusText(),o._triggerEvent())})}}},{key:"_triggerEvent",value:function(){var t=this._opts.value,a={indicator:this.container,value:t};this.element.attr("aria-valuenow",t),this._dispatchEvent("change",{},a),t===this._opts.max&&(this._eventTriggered=!0,this._dispatchEvent("complete",{},a)),this._lastValue=t}},{key:"_destroy",value:function(){this.element.removeAttr("role aria-valuenow"),this._progressValue=this._messageElement=void 0}},{key:"_handleProgress",value:function(t){if("indeterminate"===this._opts.mode){this.element[t?"removeClass":"addClass"]("zprogress--indeterminate");var a=this._data.className;a=t?a.replace("zprogress--indeterminate",""):a+" zprogress--indeterminate",this._data.className=a}}},{key:"startProgress",value:function(){this._handleProgress()}},{key:"stopProgress",value:function(){this._handleProgress(!0)}},{key:"_updateStatusMessageData",value:function(){this._data.isMessageCallout=this._data.isMessageInline=void 0;var t=this._opts.statusMessage,a="",o=t.displayType&&"indeterminate"!==this._opts.mode?t.displayType:"adjacent";this._data["isMessage"+o[0].toUpperCase()+o.slice(1)]=!0,t.position||(t.position="inline"===o?"center":"adjacent"===o?"top":"bottom"),"adjacent"===o?a="zprogress__label"+(t.position?t.position:"top"):"inline"===o?(a="zprogress__labelinside",this._data.inlineClass="left"===t.position||"right"===t.position?"zh-align"+t.position:"",this._data.inlineTextWidth=window.getComputedStyle(this.element[0]).width):this._data.calloutClass="zh-"+("bottom"===t.position?"top":"bottom"),this._data.text=t.text.replace(/#value#/g,this._translateEToA(this._opts.value)),this._opts.labelModifier=a,this.element.attr("aria-valuetext",this._data.text)}},{key:"_setCalloutPosition",value:function(t){var s,a=this.element.find(".ztooltip"),n=a.find(".ztooltip__pointer"),l=this._opts.rtl?"right":"left",i=_defineProperty({},l,"calc(50% - ".concat(n.width()/2,"px)"));this._data.pointerStyle=this._getStyle(i),this._data.calloutStyle=this._getStyle((_defineProperty(s={top:("top"===this._opts.statusMessage.position?-parseInt(this.element.height()+a.outerHeight(!0)):parseInt(this.element.height()+n.height()))+"px"},l,this._progressValue.width()-o(a.outerWidth(!0)/2)+"px"),_defineProperty(s,"-webkit-transition","all 0.2s ease"),_defineProperty(s,"-moz-transition","all 0.2s ease"),_defineProperty(s,"-o-transition","all 0.2s ease"),_defineProperty(s,"-ms-transition","all 0.2s ease"),_defineProperty(s,"transition","all 0.2s ease"),s)),t||(this._data.modifiedAttr="callout",this._render(),this._data.modifiedAttr=void 0)}},{key:"_updateStatusText",value:function(){var a=this._opts.statusMessage,o=a.text.replace(/#value#/g,this._translateEToA(this._opts.value));""===o.trim()||(this._data.text=a.isTextHTMLEncoded?o:t.encodeHTML(o),this._render(),"callout"===a.displayType&&this._setCalloutPosition(),this.element.attr("aria-valuetext",this._data.text))}},{key:"_setAttribute",value:function(a,o){this._domChanged=!0;var n=this._data;if("mode"===a)t.isEmpty(this._opts.statusMessage)||(this._opts.mode=o,this._updateStatusMessageData()),n.progressModifier="indeterminate"===o?"zeffects--move":"";else if("value"===a)this._setValue(o),this._domChanged=!1;else if("progressColor"===a||"trackColor"===a||"trackBorder"===a||"trackBorderColor"===a)this._opts[a]=o,this._setBarStyles();else if("trackClassName"===a||"progressClassName"===a)n[a.replace("Name","")]=o;else if("rtl"===a)t.isEmpty(this._opts.statusMessage)||(this._opts.rtl=o,this._setCalloutPosition(!0));else if("statusMessage"===a){var l=this._opts;if(l[a]=null===o?{}:o,"object"===_typeof(l[a])&&l[a].text&&""===l[a].text.trim())return;null===o?n.isMessageInline=n.isMessageCallout=void 0:this._updateStatusMessageData(),n.isStatusModified=!0}this._opts[a]=o}},{key:"name",get:function(){return"zprogressbar"}},{key:"attrs",get:function(){return{mode:"determinate",value:0,max:100,locale:null,progressColor:"#4190F2",progressClass:"",trackColor:"#DBDBDB",trackBorder:null,trackBorderColor:null,trackClass:"",progressTooltipText:"#value#%",trackTooltipText:"100 - #value#%",innerHTML:null}}},{key:"props",get:function(){return{progressClassName:"",trackClassName:"",statusMessage:{}}}},{key:"EVENTS",get:function(){return["complete","change"]}}]),n}();t.registerComponent("ZProgressBar",oe),ZPeopleComponents.zprogressbar.Templates.children=function(t){return ZT.html(zc0tO288(),!t.isMessageInline&&!t.isMessageCallout&&ZT.html(zc0tO289(),ZT.customHTML(t.text||"")),t.trackClass,t.trackStyle,t.isMessageInline&&ZT.html(zc0tO290(),t.inlineClass||"",ZT.customHTML(t.text||"")),t.progressClass,t.progressModifier||"",t.progressStyle,t.isMessageInline&&ZT.html(zc0tO291(),t.inlineClass||"",t.inlineTextWidth,ZT.customHTML(t.text||"")),t.isMessageCallout&&ZT.html(zc0tO292(),t.calloutStyle,ZT.customHTML(t.text||""),t.calloutClass||"",t.pointerStyle))};var ne=function(a){function o(){return _classCallCheck(this,o),_possibleConstructorReturn(this,_getPrototypeOf(o).apply(this,arguments))}return _inherits(o,t.CoreComponent),_createClass(o,[{key:"_init",value:function(){var a=this._opts;this.element.attr({role:"progressbar","aria-valuemin":0,"aria-valuemax":a.max}),a.locale||(this._opts.locale=t.locale),this._data.animateClass="indeterminate"===a.mode?"zeffects--rotate":"",this._data.trackClass=a.trackClassName+" "+a.trackClass,this._data.progressClass=a.progressClassName+" "+a.progressClass,this._setWheelData(),t.isEmpty(a.statusMessage)||this._updateStatusMessageData()}},{key:"_postEachRender",value:function(){var t=this._opts,a=this._data;a.className=a.className.replace(/zprogress--group|zprogress--indeterminate|zprogresscircular--labelcenter|zprogresscircular--labelleft|zprogresscircular--labelright|zprogresscircular--labelbottom|zprogresscircular--labeltop/g,"");var o=" zprogress--group";"indeterminate"===t.mode&&(o+=" zprogress--indeterminate"),this._data.className+=o+(t.labelModifier?" "+t.labelModifier:"")}},{key:"_setWheelData",value:function(){var t=this._opts,a=t.size,o=isNaN(a),l="string"==typeof a&&"medium"===a&&this._MED_DATA[a],i=o?l?this._MED_DATA.size:this._SIZES[a]:parseInt(a),s=i/2,r=o?l?this._MED_DATA.strokeWidth:this._STROKE_WIDTH[a]:t.strokeWidth,d=2*(s-parseInt(r))*(22/7);n.extend(!0,this._data,{diameter:i,radius:s,circumference:d,strokeWidth:r,axis:s-parseInt(r),strokeOffset:"indeterminate"===t.mode?this._calculateStrokeOffset(d):t.value?d-t.value*d/t.max:d}),this._setWheelStyles()}},{key:"_calculateStrokeOffset",value:function(t){if(t)return t-parseFloat(t/4)}},{key:"_setWheelStyles",value:function(){var t=this._opts;this._data.progressStyle=this._getStyle({stroke:t.fillGradient||t.progressColor}),this._data.trackStyle=this._getStyle({stroke:t.trackGradient||t.trackColor,border:t.trackBorder,"border-color":t.trackBorderColor})}},{key:"getValue",value:function(){if("indeterminate"!==this._opts.mode)return this._opts.value}},{key:"setValue",value:function(t){this._setValue(t)}},{key:"_setValue",value:function(a,o){if(this.element.is(":hidden")&&this.element.show(),!isNaN(a)){var n=this._opts,l=n.max,i=this._data;(a=parseInt(a))>l&&(a=l),this._opts.value=a,a=0<=(a=i.circumference-a*i.circumference/l)?a:0,i.strokeOffset=a,t.isEmpty(n.statusMessage)||this._updateStatusText(n.statusMessage),a=this._opts.value,i.trackTooltip=n.trackTooltipText.replace(l+" - #value#",l-a).replace("#value#",a),i.progressTooltip=n.progressTooltipText.replace("#value#",a),this._triggerEvent(),o||this._render()}}},{key:"_triggerEvent",value:function(){var t=this._opts.value,a={indicator:this.element,value:t};this.element.attr("aria-valuenow",t),this._dispatchEvent("change",{},a),t===this._opts.max&&this._dispatchEvent("complete",{},a)}},{key:"_destroy",value:function(){this.element.removeAttr("role aria-valuenow")}},{key:"_handleProgress",value:function(t){if("indeterminate"===this._opts.mode){this.element.removeClass("zprogress--indeterminate");var a=this._data.className;a=t?a.replace("zprogress--indeterminate",""):a+" zprogress--indeterminate",this._data.className=a}}},{key:"startProgress",value:function(){this._handleProgress()}},{key:"stopProgress",value:function(){this._handleProgress(!0)}},{key:"_updateStatusMessageData",value:function(){var t=this._opts.statusMessage.position||"center";n.extend(!0,this._data,{showMessageAtCenter:"center"===t}),this._opts.labelModifier="zprogresscircular--label"+t,this._updateStatusText()}},{key:"_updateStatusText",value:function(){var a=this._opts.statusMessage,o=a.text.replace(/#value#/g,this._opts.value);this._data.text=a.isTextHTMLEncoded?o:t.encodeHTML(o)}},{key:"_setAttribute",value:function(t,a){this._domChanged=!0;var o=this._data;if("mode"===t){var n="indeterminate"===a;this._data.animateClass=n?"zeffects--rotate":"",n||this._setValue(this._opts.value,!0)}else"value"===t?this._setValue(a,!0):-1<["progressColor","trackColor","fillGradient","trackGradient","trackGradient","trackBorderColor"].indexOf(t)?(this._opts[t]=a,this._setWheelStyles()):"progressClassName"===t||"trackClassName"===t?this._data[t.replace("Name","")]=a:("statusMessage"===t||"size"===t||"strokeWidth"===t)&&(this._opts[t]=null===a?{}:a,"statusMessage"===t?null===a?o.showMessageAtCenter=void 0:this._updateStatusMessageData():this._setWheelData());this._opts[t]=a}},{key:"name",get:function(){return"zprogresswheel"}},{key:"attrs",get:function(){return{mode:"determinate",value:0,max:100,progressColor:"#4190F2",fillGradient:null,progressClass:"",trackColor:"#DBDBDB",trackBorder:null,trackBorderColor:null,locale:null,trackGradient:null,trackClass:"",size:"medium",strokeWidth:"3px",progressTooltipText:"#value#%",trackTooltipText:"100 - #value#%",innerHTML:null,width:"auto"}}},{key:"props",get:function(){return{progressClassName:"",trackClassName:"",statusMessage:{}}}},{key:"_MED_DATA",get:function(){return{size:40,strokeWidth:"3px"}}},{key:"EVENTS",get:function(){return["complete","change"]}},{key:"_SIZES",get:function(){return{micro:16,mini:20,small:24,medium:40,large:48,mega:64}}},{key:"_STROKE_WIDTH",get:function(){return{micro:"2px",mini:"2px",small:"2px",medium:"3px",large:"3px",mega:"4px"}}}]),o}();t.registerComponent("ZProgressWheel",ne),ZPeopleComponents.zprogresswheel.Templates.children=function(t){return ZT.html(zc0tO293(),!t.showMessageAtCenter&&t.text?ZT.html(zc0tO294(),ZT.customHTML(t.text||"")):"",t.showMessageAtCenter?ZT.html(zc0tO295(),ZT.customHTML(t.text||"")):"",t.animateClass,t.diameter,t.diameter,t.trackClass,t.radius,t.radius,t.axis,t.circumference,t.strokeWidth,t.trackStyle,t.trackTooltip,t.progressClass,t.radius,t.radius,t.axis,t.circumference,t.strokeOffset,t.strokeWidth,t.progressStyle,t.progressTooltip)},t.dateTimePrototype=function(t){function a(){return _classCallCheck(this,a),_possibleConstructorReturn(this,_getPrototypeOf(a).apply(this,arguments))}return _inherits(a,t),_createClass(a,[{key:"name",get:function(){return"datetimeprototype"}}]),a}(t.CoreComponent),t.getPrototype(t.ZDateField,t.dateTimePrototype),t.getPrototype(t.ZTimeField,t.dateTimePrototype);var le=function(a){function o(){return _classCallCheck(this,o),_possibleConstructorReturn(this,_getPrototypeOf(o).apply(this,arguments))}return _inherits(o,t.dateTimePrototype),_createClass(o,[{key:"_checkForTime",value:function(){var t=this._opts.format;return-1<t.indexOf("H")||-1<t.indexOf("h")||-1<t.indexOf("m")}},{key:"_checkForDate",value:function(){var t=this._opts.format;return-1<t.indexOf("d")||-1<t.indexOf("dd")}},{key:"_validateFormat",value:function(){this._invalidFormat=!(this._checkForDate()&&this._checkForTime())}},{key:"_getDateValue",value:function(){return this._dateModified&&this._monthModified&&this._yearModified&&this._hoursModified&&this._minutesModified&&this._secondsModified?new Date(this._viewDate.getTime()):void 0}},{key:"_getRegEx",value:function(){return/dd{0,3}|MM{0,3}|yyyy|yy|HH|H|hh|h|mm|m|ss|s|tt|zz{0,2}|"[^"]*"|'[^']*'/g}},{key:"_initPicker",value:function(){var t=this._opts,a=t.pickerOptions,n=t.min,l=t.max;n&&(n=new Date(+t.min)),l&&(l=new Date(+t.max)),a.hourStep=t.hourStep,a.minuteStep=t.minuteStep,a.secondStep=t.secondStep,a.minDate=a.minDate||n,a.maxDate=a.maxDate||l,a.minTime=a.minDate,a.maxTime=a.maxDate,_get(_getPrototypeOf(o.prototype),"_initPicker",this).call(this)}},{key:"_init",value:function(){this._checkTime=!0,this._isInit=!0,_get(_getPrototypeOf(o.prototype),"_init",this).apply(this,arguments),this._opts.templateName="zdatefield",this._allowedChars="dMyHhmstz"}},{key:"_postRender",value:function(){this._pickerMethods={create:"createDateTimePicker",instance:"datetimepicker"},_get(_getPrototypeOf(o.prototype),"_postRender",this).call(this)}},{key:"_getSuffix",value:function(t){return-1<"dMy".indexOf(t[0])?"Date":"Time"}},{key:"_modifyValue",value:function(t,a,o,n){return this["_modify".concat(this._getSuffix(a))](t,a,o,n)}},{key:"_replaceText",value:function(t){return this["_replace".concat(this._getSuffix(t))](t)}},{key:"_resetOnBlur",value:function(t){this["_reset".concat(this._getSuffix(t),"OnBlur")](t)}},{key:"_resetToFirst",value:function(t){this["_reset".concat(this._getSuffix(t),"ToFirst")](t)}},{key:"_getCustomMatch",value:function(t){return this["_get".concat(this._getSuffix(t),"Match")](t)}},{key:"_isPartModified",value:function(t,a){this["_is".concat(this._getSuffix(t),"Modified")](t,a)}},{key:"_parseSegment",value:function(t,a,o){return this["_parse".concat(this._getSuffix(t))](t,a,o)}},{key:"_performValidations",value:function(){this._validateStep(["dateStep","monthStep","yearStep","hourStep","minuteStep","secondStep"]),_get(_getPrototypeOf(o.prototype),"_performValidations",this).call(this);var t=this._opts.min,a=this._opts.format,n=this._opts.max;t&&t.setHours(t.getHours(),t.getMinutes(),0>a.indexOf("s")?0:t.getSeconds(),0),n&&n.setHours(n.getHours(),n.getMinutes(),0>a.indexOf("s")?0:n.getSeconds(),0),this._dateModified=this._monthModified=this._yearModified=this._hoursModified=this._minutesModified=this._secondsModified=!0,this._checkForModification(this._opts.value)}},{key:"_isDateInstance",value:function(t){return t instanceof Date&&(t=new Date(t.getTime()),0>this._opts.format.indexOf("s")&&t.setSeconds(0,0)),t}},{key:"_updateElementValue",value:function(){var a=this._getRegEx(),o=this._opts,n=o.format;this._retursFormat=!1;var l=n.replace(a,this._replaceMatchedText.bind(this));if(this._retursFormat=!0,this._dateFormat=n.replace(a,this._replaceMatchedText.bind(this)),this._input[0].value=l,o.value=this._getDateValue()?new Date(this._viewDate.getTime()):void 0,this._oldValue=l,this._hasPicker&&o.value){var i=new Date(o.value.getTime());0>n.indexOf("s")&&i.setSeconds(0,0),(!this._lastValue||this._lastValue&&t.Date.parseDate(this._lastValue,o.format).date.getTime()!==i.getTime())&&t[this._pickerMethods.instance](this._picker).setAttribute("value",new Date(i.getTime()))}o.value&&(this._lastValue=this._isDateInstance(o.value))}},{key:"_setFormat",value:function(){this._setFormatVal(/^(datetime-short|datetime-long|datetime-medium|datetime-full)$/,"datetime","dd/MM/yyyy, hh:mm tt")}},{key:"name",get:function(){return"zdatetimefield"}},{key:"attrs",get:function(){return{format:"dd/MM/yyyy, hh:mm tt"}}}]),o}();t.registerComponent("ZDateTimeField",t.dateTimePrototype,le);var ie=function(a){function o(){return _classCallCheck(this,o),_possibleConstructorReturn(this,_getPrototypeOf(o).apply(this,arguments))}return _inherits(o,t.CoreComponent),_createClass(o,[{key:"_create",value:function(t,a){var o=a.disabled;t.addClass("zresizable"+(o?" is-disabled":"")),this._createVisuals(),o||this._bindEvents()}},{key:"_createVisuals",value:function(){var a=this._opts,o=a.directions,n="string"==typeof o;a.rtl&&n&&(o=o.replace(/e/g,"east").replace(/w/g,"e").replace(/east/g,"w")),n&&(o="all"===o?["s","e","n","w","se","sw","ne","nw"]:o.split(","));for(var g,h,v,y,f,l="",s="style=display:none;",r=!1,d=!1,c="object"===_typeof(a.handles)?a.handles:void 0,_="object"===_typeof(a.cues)?a.cues:void 0,u=t.isEmpty(a.cueIcons),p="zresizable__icon zresizable__cue",m=0;m<o.length;m++)f=o[m].trim(),v=this.dirMap[f],r="all"===a.handles||a.handles===f||c&&-1<c.indexOf(f),d="all"===a.cues||a.cues===f||_&&-1<_.indexOf(f),l+="<div hdir="+f+" class='zresizable__handle zresizable__"+f+" "+(a.handleClasses[v]||"")+"'>",l+='<div class="zresizable__sub__handle '+(r?"h-visibleitem":"")+'" '+(r?"":s)+" ></div>",u?l+='<i class="'+p+" "+(d?"h-visibleitem":"")+'" '+(d?"":s)+"  ></i>":(h=a.cueIcons[v+"iconClassName"],(g=a.cueIcons[v+"SVGIconId"])||h?(l+='<i class="'+(p+=" "+(y=t._getIconInfo(h,g)).iconClassName)+" "+(d?"h-visibleitem":"")+'"  '+(d?"":s)+">",y.SVGIconId&&(l+="<svg class="+y.SVGIconClassName+'><use xlink:href="'+y.SVGIconId+'" ></use></svg>'),l+="</i>"):l+='<i class="'+p+" "+(d?"h-visibleitem":"")+'" '+(d?"":s)+"  ></i>"),l+="</i></div>";this.element.append(l)}},{key:"_bindEvents",value:function(){var t=this,a=this.element.find(".zresizable__handle"),o=this._opts.directions,n="string"==typeof o?o.split(","):o;this._addEvents({handleMD:"mousedown",handleMU:"mouseup"},a),this._bindHandleCueEvents(!0),this._bindHandleCueEvents(),n.forEach(function(a){-1!==["nw","ne","sw","se"].indexOf(a)&&(t._haveCorner=!0)})}},{key:"_keyDownHandler",value:function(a){a.keyCode===t.keyCode.ESCAPE&&(this.element.offset(this.orgPos).outerWidth(this.orgSize.width,!0).outerHeight(this.orgSize.height,!0),this._dispatchEvent("cancel",a),this._handleMUHandler(a,!0),a.stopPropagation())}},{key:"_handleMDHandler",value:function(a){var o=this;a.stopPropagation();var l=this.name,i=this._opts,s=i.delay,r=this.element;this._bodyCursor=t.$body[0].style.cursor,s&&t.$document.on("mousemove.delay."+l,function(n){n.pageX!==a.pageX&&n.pageY!==a.pageY&&(clearTimeout(o._delay),t.$document.off("mousemove.delay."+l))}),this._delay=window.setTimeout(function(){a.preventDefault(),o._md=!0;var l=parseInt(r.outerWidth(!0)),s=parseInt(r.outerHeight(!0));o.size={width:l,height:s},o.orgSize={width:l,height:s},i.preserveAspectRatio&&(o._ratio=l/s),i.boundary&&o._saveContainerData();var d=r.offset(),c=parseInt(d.top)||0,_=parseInt(d.left)||0;o.offset=d,o.orgPos={left:_,top:c},o.position={left:_,top:c},o.currTop=c,o.currLeft=_,o._bindDocEvents(c,_),o.orgMousePos={left:a.pageX,top:a.pageY},o.sizeDiff={width:r.outerWidth(!0)-r.width(),height:r.outerHeight(!0)-r.height()},i.relatedElements&&o._cacheProperties(i.relatedElements),o._target=n(a.target).closest(".zresizable__handle"),o._resizeDirection=n(o._target).attr("class").replace("zresizable__handle zresizable__",""),t.$body.addClass("zh-userselectnone"),o._dispatchEvent("start",a)},s)}},{key:"_handleMUHandler",value:function(a,o){var n=this.name;clearTimeout(this._delay),this._md&&(!o&&this._dispatchEvent("end",a),t.$document.off("mousemove."+n+" mouseup."+n),this._opts.cancelOnEscKey&&this.element.off("keydown."+n),this._md=!1),t.$body.removeClass("zh-userselectnone").css("cursor",this._bodyCursor)}},{key:"_bindHandleCueEvents",value:function(t){var a=(t?".handle.":".cue.")+this.name,o=this.element,l=o.find(".zresizable__handle"),i=(t?".zresizable__sub__handle":".zresizable__cue")+".h-visibleitem",s=o.find(".zresizable__handle "+i),r=this._opts["display"+(t?"Handles":"Cues")],d=function(t,a,o){o?n(t.target).closest(".zresizable__handle").find(i)[a?"hide":"show"]():s[a?"hide":"show"]()},c=function(t,a){d(t,!1,a)},_=function(t,a){d(t,!0,a)};s.hide(),"onelementmouseover"===r?o.on("mouseenter"+a,c).on("mouseleave"+a,_):"onelementactive"===r?o.on("focus"+a,c).on("blur"+a,_):"oncontextmouseover"===r?l.on("mouseenter"+a,function(t){c(t,!0)}).on("mouseleave"+a,function(t){_(t,!0)}):"always"===r&&s.show()}},{key:"_unbindHandleCueEvents",value:function(t){var a=this.element,o=a.find(".zresizable__handle"),n=(t?".handle.":".cue.")+this.name;a.off(n),o.off(n)}},{key:"_bindDocEvents",value:function(){this._addEvents({docMM:"mousemove",handleMU:"mouseup"},t.$document),this._opts.cancelOnEscKey&&this._addEvents({keyDown:"keydown"},this.element)}},{key:"_docMMHandler",value:function(o){if(this._md){var l=this.element;(l[0].style.right||l[0].style.bottom)&&(l.css({right:"",bottom:""}),l.css({top:this.currTop,left:this.currLeft}));var i=o.pageX-this.orgMousePos.left||0,s=o.pageY-this.orgMousePos.top||0,r=n(this._target).attr("hdir"),a=this._computePosition(r,i,s);this._opts.preserveAspectRatio&&(a=this._checkRatio(a,r)),a=this._checkLimit(a,r),this._opts.boundary&&(a=this._checkContainerLimit(a)),this._opts.relatedElements&&this._resizeOthers(),("n"===r||"ne"===r||"nw"===r||"w"===r||"sw"===r)&&l.offset({top:this.position.top,left:this.position.left}),"n"!=r&&"s"!=r||this._haveCorner?l.outerWidth(this.size.width):l.width("auto"),"e"!=r&&"w"!=r||this._haveCorner?l.outerHeight(this.size.height):l.height("auto"),t.$body.css("cursor",r+"-resize"),this._updateCache(a),this._dispatchEvent("resize",o)}}},{key:"_dispatchEvent",value:function(t,a){_get(_getPrototypeOf(o.prototype),"_dispatchEvent",this).call(this,t,a,{originalPosition:this.orgPos,originalSize:this.orgSize,resizedDirection:this._resizeDirection,currentPosition:this.position,currentSize:this.size})}},{key:"_cacheProperties",value:function(t){for(var l,a=n(t),o=0;o<a.length;o++)(l=n(a[o])).data("resizable-related",{width:parseInt(l.outerWidth(!0)),height:parseInt(l.outerHeight(!0)),left:parseInt(l.css("left"),10),top:parseInt(l.css("top"),10)})}},{key:"_resizeOthers",value:function(){for(var s,r,d,c,_,u,p,m,t={height:this.size.height-this.orgSize.height||0,width:this.size.width-this.orgSize.width||0,top:this.position.top-this.orgPos.top||0,left:this.position.left-this.orgPos.left||0},a=n(this._opts.relatedElements),o=a.length,l=0;l<o;l++){for(r=(s=n(a[l])).data("resizable-related"),d={},u=(c=s.closest(this.element).length?["width","height"]:["width","height","top","left"]).length,_=0;_<u;_++)(m=(r[p=c[_]]||0)+(t[p]||0))&&0<=m&&("width"===p||"height"===p?s["outer"+p[0].toUpperCase()+p.substr(1)](m):d[p]=m);s.css(d)}}},{key:"_updateCache",value:function(t){t.left&&(this.position.left=t.left),t.top&&(this.position.top=t.top),t.height&&(this.size.height=t.height),t.width&&(this.size.width=t.width)}},{key:"_computePosition",value:function(t,a,o){var l=this.orgSize,i=this.orgPos,s={};return"n"===t?(s.top=i.top+o,s.height=l.height-o):"s"===t?s.height=l.height+o:"e"===t?s.width=l.width+a:"w"===t?(s.left=i.left+a,s.width=l.width-a):("se"===t||"sw"===t||"ne"===t||"nw"===t)&&(s=n.extend(this._computePosition(t[0],a,o),this._computePosition(t[1],a,o))),s}},{key:"_checkRatio",value:function(t,o){var a=this.position,n=this.size;return"number"==typeof t.height?t.width=t.height*this._ratio:"number"==typeof t.width&&(t.height=t.width/this._ratio),"sw"==o&&(t.left=a.left+(n.width-t.width),t.top=null),"nw"==o&&(t.top=a.top+(n.height-t.height),t.left=a.left+(n.width-t.width)),t}},{key:"_hasScroll",value:function(t,a){return"hidden"!==n(t).css("overflow")&&0<t["scroll"+(a?"Left":"Top")]}},{key:"_saveContainerData",value:function(){var a=this._opts.boundary,o="parent"===a?this.element.parent().get(0):a,l={},s="page"===o;if(s||"viewport"===o){l={left:0,top:0};var r=t[s?"$document":"$window"],d=window.pageXOffset,c=window.pageYOffset;this.parentData={scrollTop:c,scrollLeft:d,top:c,left:d,element:r,width:r.width()-d,height:r.height()+(s?c:0)}}else{for(var h,_=n(o),u=[],p=["Top","Right","Left","Bottom"],m=p.length,g=0;g<m;g++)h=p[g],u[g]=parseInt(_.css("padding"+h))||0;l=_.offset();var v=_.innerHeight()-u[3],y=_.innerWidth()-u[1],f={height:this._hasScroll(_)?_[0].scrollHeight:v,width:this._hasScroll(_,"left")?_[0].scrollWidth:y};this.parentData={element:o,scrollTop:_.scrollTop(),scrollLeft:_.scrollLeft(),left:l.left,top:l.top,width:f.width,height:f.height}}}},{key:"_checkContainerLimit",value:function(t){var a=this.parentData,o=this.position,n=a.scrollTop;o.top+t.height-n>=a.top+a.height&&(t.height=a.top+a.height-n-o.top);var l=a.scrollLeft;return o.left+t.width-l>=a.left+a.width&&(t.width=a.left+a.width-l-o.left),t.top&&t.top<a.top&&(t.top=a.top,t.height=this.size.height),t.left&&t.left<a.left&&(t.left=a.left,t.width=this.size.width),t}},{key:"_checkLimit",value:function(t,a){var o=this._opts,n=o.minWidth,l=o.maxWidth,i=o.minHeight,s=o.maxHeight,r=t.width&&n&&t.width<n,d=t.height&&i&&t.height<i,c=t.width&&l&&t.width>l,_=t.height&&s&&t.height>s;r&&(t.width=n),d&&(t.height=i),c&&(t.width=l),_&&(t.height=s);var u=this.orgPos.left+this.orgSize.width,p=this.position.top+this.size.height,m=/sw|nw|w/.test(a),g=/nw|ne|n/.test(a);r&&m&&(t.left=u-n),c&&m&&(t.left=u-l),d&&g&&(t.top=p-i),_&&g&&(t.top=p-s);var h=!t.width&&!t.height;return h&&!t.left&&t.top?t.top=void 0:h&&!t.top&&t.left&&(t.left=void 0),t}},{key:"destroy",value:function(){this.element.removeClass("zresizable").removeData(this.name),this.element.find(".zresizable__handle").remove(),this._unbindEvents(!0)}},{key:"_showHideEle",value:function(){for(var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this._opts.directions,a=1<arguments.length?arguments[1]:void 0,o=2<arguments.length?arguments[2]:void 0,n="string"==typeof t?t.split(","):t,l=n.length,s=0;s<l;s++)this.element.find(".zresizable__"+n[s]).find(".zresizable__"+(o?"cue":"sub__handle"))[a?"removeClass":"addClass"]("h-visibleitem")[a?"hide":"show"]()}},{key:"showHandles",value:function(t){this._showHideEle(t)}},{key:"hideHandles",value:function(t){this._showHideEle(t,!0)}},{key:"showCues",value:function(t){this._showHideEle(t,!1,!0)}},{key:"hideCues",value:function(t){this._showHideEle(t,!0,!0)}},{key:"_setAttribute",value:function(t,a){var o=this._opts,n=this.element;if(o[t]=a,"directions"===t||"cues"===t||"handles"===t||"rtl"===t||"cueIcons"===t)n.find(".zresizable__handle").remove(),this._createVisuals(),o.disabled||this._bindEvents();else if("displayCues"===t||"displayHandles"===t){var l=0>t.indexOf("Cue");this._unbindHandleCueEvents(l),this._bindHandleCueEvents(l)}}},{key:"_unbindEvents",value:function(a){var o=this.name,n=this.element.find(".zresizable__handle");n.off("."+o),this.element.off("."+o),t.$document.off("."+o),a&&n.remove()}},{key:"_disable",value:function(t){this.element[t?"addClass":"removeClass"]("is-disabled"),this[(t?"_un":"_")+"bindEvents"]()}},{key:"name",get:function(){return"zresizable"}},{key:"props",get:function(){return{disabled:!1,minHeight:10,minWidth:10,maxWidth:!1,maxHeight:!1,boundary:"viewport",directions:"s,e,se",relatedElements:null,handleClasses:{},cancelOnEscKey:!0,delay:0,cueIcons:{},cues:"se",handles:"none",displayCues:"always",displayHandles:"oncontextmouseover",preserveAspectRatio:!1}}},{key:"dirMap",get:function(){return{se:"southEast",ne:"northEast",sw:"southWest",nw:"northWest",s:"south",n:"north",e:"east",w:"west"}}},{key:"EVENTS",get:function(){return["start","end","resize","cancel"]}}]),o}();t.registerComponent("ZResizable",ie);var se=function(l){function i(){return _classCallCheck(this,i),_possibleConstructorReturn(this,_getPrototypeOf(i).apply(this,arguments))}return _inherits(i,t.CoreComponent),_createClass(i,[{key:"_create",value:function(){this._init(),this._construct(),this._bindEvents()}},{key:"_init",value:function(){this._doc=t.$document[0]}},{key:"_construct",value:function(){var t=this.element;this.savedData={},t.addClass("zsortable"),this._manipulateHandles(),this._offsetPos=t.offset(),this._inited=!0,this._stDispatched=!1}},{key:"_manipulateHandles",value:function(){this._refreshItems(),this._setHandleClassName(),this._refreshPositions()}},{key:"_handleMouseDown",value:function(t){var a=this,o=this._opts,l=this.name,i=o.sortStartDelay;this.initialIndex=this._getIndexOfChildInParent(t.target.parentElement.children,t.target),i&&n(this._doc).on("mousemove.delay."+l,function(o){o.pageX!==t.pageX&&o.pageY!==t.pageY&&(clearTimeout(a._delay),n(a._doc).off("mousemove.delay."+l))}),this._delay=window.setTimeout(function(){var i=n(t.target);a._isMouseMoved=!1,a._ms&&a._handleMouseUp(t),a._mdEvent=t;var s=1===t.which,r=!("string"!=typeof o.ignoreAsHandle||!i[0].nodeName)&&i.closest(o.ignoreAsHandle).length,d=!o.handle||i.closest(o.handle).length;return!(s&&!r&&d&&a._captureMouseAction(t)&&(!0===i.data(l+".prevClickEve")&&i.removeData(l+".prevClickEve"),n(a._doc).on("mousemove."+l,function(t){a._handleMouseMove(t)}).on("mouseup."+l,function(t){a._handleMouseUp(t)}),t.preventDefault(),0))},i)}},{key:"_handleMouseMove",value:function(a){return this._stDispatched||(this._dispatchEvent("start",a.target,a),this._stDispatched=!0),this._dispatchEvent("drag",a.target,a),this._isMouseMoved&&t.Browser.isIE&&(!document.documentMode||9>document.documentMode)&&!a.button?this._handleMouseUp(a):((a.which||a.button)&&(this._isMouseMoved=!0),this._ms?(this._onMouseDrag(a),a.preventDefault()):(this._opts.cancelOnEscKey&&t.$document.on("keydown."+this.name,this._keydownHandler.bind(this,a)),this._ms=!1!==this._handleMouseMoveStart(this._mdEvent,a),this[this._ms?"_onMouseDrag":"_handleMouseUp"](a),!this._ms))}},{key:"_keydownHandler",value:function(a,o){o.keyCode===t.keyCode.ESCAPE&&(this._handleMouseUp(this._mdEvent,!0),this._dispatchEvent("cancel",o.target,o)),t.$document.off("keydown."+this.name)}},{key:"_dispatchEvent",value:function(t,a,o){var l="end"===t||"change"===t?{relocateFrom:a.relocateFrom,relocateTo:a.relocateTo,relocationNature:a.relocationNature,value:o.target}:{value:a};return l.draggedElement=this._draggedEle||n(o.target).closest(".zsortable__handle"),l.currentItem=n(a),_get(_getPrototypeOf(i.prototype),"_dispatchEvent",this).call(this,t,o,l)}},{key:"triggerEvent",value:function(t,a,o){return this._dispatchEvent(t,a,o)}},{key:"_handleMouseMoveStart",value:function(t){this.currentContainer=this,this._refreshPositions(),this._draggedEle=this._createDraggableElement(),this._saveDraggedEleSize(),this._saveMargins(),this._scrollParent=this._getScrollParent(this._draggedEle),this._scrollEleOffset=this._scrollParent[0]===document?{left:0,top:0}:this._scrollParent.offset(),this._offsetPos=this._selItem.offset(),this._offsetPos={top:this._offsetPos.top-this._margins.top,left:this._offsetPos.left-this._margins.left},this._draggedEle.css("position","absolute"),this._cssPos=this._draggedEle.css("position");var a=this,o=t.pageX,l=t.pageY;return n.extend(this._offsetPos,{click:{left:o-a._offsetPos.left,top:l-a._offsetPos.top},parent:a._getParentOffset(),relative:a._getRelativeOffset()}),this._elementPosition=this._fixPosition(t),this._eventPageX=o,this._eventPageY=l,this._formerDomElements={prev:this._selItem.prev()[0],parent:this._selItem.parent()[0]},this._createPlaceHolder(),this._opts.region&&this._setContainment(),this._draggedEle.addClass(this._opts.classNameOnSort+" zsortable__helper"),this._onMouseDrag(t),!0}},{key:"_setContainment",value:function(){var a=this._opts.region;"parent"===a&&(a=this._draggedEle[0].parentNode);var o="page"===a;if(o||"viewport"===a){var l=n(o?document:window);this._containment=[0-this._offsetPos.relative.left-this._offsetPos.parent.left,0-this._offsetPos.relative.top-this._offsetPos.parent.top,l.width()-this._draggedEleSize.width-this._margins.left,(l.height()||document.body.parentNode.scrollHeight)-this._draggedEleSize.height-this._margins.top]}else if("parent"!==a){var i=n(a)[0],s=n(i),r=n(a).offset(),c="hidden"!==n(i).css("overflow"),_=parseInt(s.css("borderLeftWidth")),u=parseInt(s.css("borderTopWidth"));this._containment=[r.left+_+parseInt(s.css("paddingLeft"))-this._margins.left,r.top+u+parseInt(s.css("paddingTop"))-this._margins.top,r.left+(c?d(i.scrollWidth,i.offsetWidth):i.offsetWidth)-_-parseInt(s.css("paddingRight"))-this._draggedEleSize.width-this._margins.left,r.top+(c?d(i.scrollHeight,i.offsetHeight):i.offsetHeight)-u-parseInt(s.css("paddingBottom"))-this._draggedEleSize.height-this._margins.top]}}},{key:"_onMouseDrag",value:function(t){var l,s,r,o=this._opts;this._position=this._fixPosition(t),this._changeToAbsolute=this._changePosition("absolute"),this._lastAbsolutePos||(this._lastAbsolutePos=this._changeToAbsolute);var c=this._opts.region,_=this._scrollEleOffset,u=this._scrollParent,p=!c||t.pageX>=this._containment[0]&&t.pageX<=this._containment[2],m=!c||t.pageY>=this._containment[1]&&t.pageY<=this._containment[3]+this._draggedEleSize.height,g=o.scrollSpeed;if(o.autoScrollRegion&&"viewport"!==o.region&&(p||m)){var v,y,h=!1;if(u[0]!==document&&"HTML"!==u[0].tagName)m&&(_.top+u[0].offsetHeight-t.pageY<o.scrollSensitivity?(h=!0,y=u[0].scrollTop+g+this._selItem.height()):t.pageY-_.top<o.scrollSensitivity&&(y=u[0].scrollTop-g),void 0!==y&&(!c||h&&u.offset().top-this._selItem.offset().top+y<=u[0].scrollHeight-u[0].offsetHeight||!h&&void 0!==this._containment[1]&&y>=this._containment[1]-u.offset().top)?(this._fullScroll=!1,u[0].scrollTop=y,this._refreshPositions(!0),this._offsetPos.top=this._selItem.offset().top,this._offsetPos.left=this._selItem.offset().left):!this._fullScroll&&void 0!==y&&(h&&!(this._selItem.offset().top+y)<=u[0].scrollHeight&&u[0].scrollTop!==u[0].scrollHeight-u[0].offsetHeight||!h&&y>=this._containment[1]&&0!==u[0].scrollTop)&&(u[0].scrollTop=h?u[0].scrollHeight-u[0].offsetHeight:0,this._fullScroll=!0)),p&&(_.left+u[0].offsetWidth-t.pageX<o.scrollSensitivity?(h=!0,v=u[0].scrollLeft+g):t.pageX-_.left<o.scrollSensitivity&&(v=u[0].scrollLeft-g),void 0!==v&&(!c||this._changeToAbsolute.left+v<this._containment[1])&&(u[0].scrollLeft=v));else{var f=n(document),k=this._prevX?d(a(this._prevY-t.pageY),a(this._prevX-t.pageX)):o.scrollSpeed;t.pageY-f.scrollTop()<o.scrollSensitivity?f.scrollTop(f.scrollTop()-k):n(window).height()-(t.pageY-f.scrollTop())<o.scrollSensitivity&&f.scrollTop(f.scrollTop()+k),t.pageX-f.scrollLeft()<o.scrollSensitivity?f.scrollLeft(f.scrollLeft()-k):n(window).width()-(t.pageX-f.scrollLeft())<o.scrollSensitivity&&f.scrollLeft(f.scrollLeft()+k),this._prevX=t.pageX,this._prevY=t.pageY}}if(this._changeToAbsolute=this._changePosition("absolute"),p&&("both"===o.axis||"y"!==o.axis)){var b=o.cursorOffset.left;this._draggedEle[0].style.left=this._position.left-b+"px"}if(m&&("both"===o.axis||"x"!==o.axis)){var C=o.cursorOffset.top;this._draggedEle[0].style.top=this._position.top-C+"px"}for(var D=0;D<=this.items.length-1;D++)if(r=(l=this.items[D]).item[0],(s=this._intersectsWithPointer(l))&&r!==this._selItem[0]&&this._placeHolder[1===s?"next":"prev"]()[0]!==r&&!this._placeHolder[0].contains(r)){this._direction=1===s?"down":"up",this._intersectsWithSides(l)&&"INPUT"!==l.item[0].nodeName&&this._reArrangeItems(t,l);break}return this._lastAbsolutePos=this._changeToAbsolute,this._checkContainerIntersection(t),!1}},{key:"_checkContainerIntersection",value:function(){for(var l,s,t=this.containers,n=t.length-1;0<=n;n--)t[n].element[0].contains(this._selItem[0])&&t[n].element[0].contains(this._placeHolder[0])||this._intersectsWith(this.containers[n].savedData)&&(l=t[n],s=n);if(l&&(!this.element[0].contains(l[0])||l.element[0]!==this.element[0])){for(var p,r=t[s],d=1e4,c=null,_=this._changeToAbsolute[r.floating?"left":"top"],u=this.items.length-1;0<=u;u--)r.element[0].contains(this.items[u].item[0])&&(p=r.floating?this.items[u].item.offset().left:this.items[u].item.offset().top,a(p-_)<d&&(d=a(p-_),c=this.items[u],this.direction=0<p-_?"down":"up"));this.currentContainer=r,this._reArrangeItems(event,c,!c&&r.element,!0)}}},{key:"_reArrangeItems",value:function(t,a,o,n){var l=this,i=this._placeHolder[0];if(o){var s=o[0];this._opts.prependToEmpty?s.insertBefore(i,s.firstChild):s.appendChild(i)}else{var r=a.item[0],d="down"===this._direction?r:r.nextSibling;r.parentNode.insertBefore(i,d)}this._dispatchEvent("shuffle",t.target,t),this._counter=this._counter?++this._counter:1,setTimeout(function(){l._refreshPositions(!n)},0)}},{key:"_intersectsWithSides",value:function(t){var a=this._changeToAbsolute,o=this._isOverAxis(a.top+this._offsetPos.click.top,t.top+t.height/2,t.height),n=this._isOverAxis(a.left+this._offsetPos.click.left,t.left+t.width/2,t.width),l=this._getDragVerticalDirection(),i=this._getDragHorizontalDirection(),s=!1;if(!i&&!l)return!1;var d,r=this._containment;return this.floating&&i?(r&&(s=a.left<=r[0]||a.left>=r[2]),d=s||"right"===i&&n||"left"===i&&!n):(r&&(s=a.top<=r[1]||a.top>=r[3]),d=s||l&&("down"===l&&o||"up"===l&&!o)),d}},{key:"_intersectsWithPointer",value:function(t){var a="x"===this._opts.axis||this._isOverAxis(this._changeToAbsolute.top+this._offsetPos.click.top,t.top,t.height,"x"),o="y"===this._opts.axis||this._isOverAxis(this._changeToAbsolute.left+this._offsetPos.click.left,t.left,t.width,"y"),n=this._getDragVerticalDirection(),l=this._getDragHorizontalDirection();return!(!a||!o)&&(this.floating?l&&"right"===l||"down"===n?2:1:n&&("down"===n?2:1))}},{key:"_intersectsWith",value:function(t){var a={width:this._placeHolder.outerWidth(),height:this._placeHolder.outerHeight()},o=this._changeToAbsolute.left,n=o+a.width,l=this._changeToAbsolute.top,i=l+a.height,s=t.left,r=s+t.width,d=t.top,c=d+t.height,_=this._offsetPos.click.top,u=this._offsetPos.click.left;return a[this.floating?"width":"height"]>t[this.floating?"width":"height"]?l+_>d&&l+_<c&&o+u>s&&o+u<r:s<o+a.width/2&&n-a.width/2<r&&d<l+a.height/2&&i-a.height/2<c}},{key:"_isOverAxis",value:function(t,a,n,l){var i="x"===l,s=i?o(this._selItem.outerHeight()):0;return i&&s!==n?t+s>a&&t<a+n:t>=a&&t<a+n}},{key:"_getDragVerticalDirection",value:function(){var t=this._changeToAbsolute.top-this._lastAbsolutePos.top;return 0!=t&&(0<t?"down":"up")}},{key:"_getDragHorizontalDirection",value:function(){var t=this._changeToAbsolute.left-this._lastAbsolutePos.left;return 0!=t&&(0<t?"right":"left")}},{key:"_changePosition",value:function(t){var n,a="absolute"===t?1:-1,o="absolute"!==this._cssPos||this._scrollParent[0]!==this._doc&&this._scrollParent[0].contains(this._offsetParent[0])?this._scrollParent:this._offsetParent;return("html"===o[0].tagName.toLowerCase()||"body"===o[0].tagName.toLowerCase())&&(n=!0),{top:this._position.top+this._offsetPos.relative.top*a+this._offsetPos.parent.top*a-("fixed"===this._cssPos?-this._scrollParent.scrollTop():n?0:o.scrollTop())*a,left:this._position.left+this._offsetPos.relative.left*a+this._offsetPos.parent.left*a-("fixed"===this._cssPos?-this._scrollParent.scrollLeft():n?0:o.scrollLeft())*a}}},{key:"_createPlaceHolder",value:function(){var t=this._selItem[0].nodeName.toLowerCase();this._placeHolder=n("<"+t+">",this._doc).addClass(this._selItem[0].className+" zsortable__placeholder"),this._placeHolder.addClass(this._opts.placeholderClassName),this._selItem.after(this._placeHolder),this._placeHolder.width(this._selItem.innerWidth()-parseInt(this._selItem.css("paddingLeft")||0,10)-parseInt(this._selItem.css("paddingRight")||0,10)),this._placeHolder.height(this._selItem.innerHeight()-parseInt(this._selItem.css("paddingTop")||0,10)-parseInt(this._selItem.css("paddingBottom")||0,10))}},{key:"_fixPosition",value:function(t){var i,o=t.pageX,n=t.pageY,l="absolute"!==this._cssPos||this._scrollParent[0]!==this._doc&&this._scrollParent[0].contains(this._offsetParent[0])?this._scrollParent:this._offsetParent;return this._containment&&(t.pageX-this._offsetPos.click.left<this._containment[0]&&(o=this._containment[0]+this._offsetPos.click.left),t.pageY-this._offsetPos.click.top<this._containment[1]&&(n=this._containment[1]+this._offsetPos.click.top),t.pageX-this._offsetPos.click.left>this._containment[2]&&(o=this._containment[2]+this._offsetPos.click.left),t.pageY-this._offsetPos.click.top>this._containment[3]&&(n=this._containment[3]+this._offsetPos.click.top)),("html"===l[0].tagName.toLowerCase()||"body"===l[0].tagName.toLowerCase())&&(i=!0),{top:n-this._offsetPos.click.top-this._offsetPos.relative.top-a(this._offsetPos.parent.top)+("fixed"===this._cssPos?-this._scrollParent.scrollTop():i?0:l.scrollTop()),left:o-this._offsetPos.click.left-this._offsetPos.relative.left-this._offsetPos.parent.left+("fixed"===this._cssPos?-this._scrollParent.scrollLeft():i?0:l.scrollLeft())}}},{key:"_getScrollParent",value:function(t,a){var o=t.css("position"),l=a?/(auto|scroll|hidden)/:/(auto|scroll)/,i=t.parents().filter(function(t,a){var i=n(a);return!("absolute"===o&&"static"===i.css("position"))&&l.test(i.css("overflow")+i.css("overflow-y")+i.css("overflow-x"))}).eq(0);return"fixed"!==o&&i.length?i:n(t[0].ownerDocument||document)}},{key:"_getParentOffset",value:function(){this._offsetParent=n(this._draggedEle[0].offsetParent);var a=this._offsetParent[0]===document?{left:0,top:0}:this._offsetParent.offset();return"absolute"===this._cssPos&&this._scrollParent[0]!==this._doc&&this._scrollParent[0].contains(this._offsetParent[0])&&(a.left+=this._scrollParent.scrollLeft(),a.top+=this._scrollParent.scrollTop()),(this._offsetParent[0]===this._doc.body||this._offsetParent[0].tagName&&"html"===this._offsetParent[0].tagName.toLowerCase()&&t.Browser.isIE)&&(a={top:0,left:0}),{top:a.top+(parseInt(this._offsetParent.css("borderTopWidth"),10)||0),left:a.left+(parseInt(this._offsetParent.css("borderLeftWidth"),10)||0)}}},{key:"_getRelativeOffset",value:function(){if("relative"===this._cssPos){var t=this._selItem.position();return{top:t.top-(parseInt(this._draggedEle.css("top"),10)||0)+this._scrollParent.scrollTop(),left:t.left-(parseInt(this._draggedEle.css("left"),10)||0)+this._scrollParent.scrollLeft()}}return{top:0,left:0}}},{key:"_saveMargins",value:function(){this._margins={left:parseInt(this._selItem.css("marginLeft"),10)||0,top:parseInt(this._selItem.css("marginTop"),10)||0}}},{key:"_createDraggableElement",value:function(){var a=this._selItem,o=this._selItem;return this._savedCSS={width:o[0].style.width,height:o[0].style.height,position:o.css("position"),top:o.css("top"),left:o.css("left")},a.width(o.width()-(t.Browser.isIE?parseInt(o.css("borderLeftWidth"))+parseInt(o.css("borderRightWidth")):0)).height(o.height()),a}},{key:"_saveDraggedEleSize",value:function(){this._draggedEleSize={width:this._draggedEle.outerWidth(),height:this._draggedEle.outerHeight()}}},{key:"_captureMouseAction",value:function(t){var a=null,o=this;if(this._isPrev=!1,this.reverting)return!1;if(this._opts.disabled)return!1;if(this._refreshItems(),n(t.target).parents().toArray().forEach(function(t){if(n.data(t,o.name+"-item")===o)return a=n(t),!1}),n.data(t.target,this.name+"-item")===o&&(a=n(t.target)),!a)return!1;this._selItem=a;var i=this._selItem.prev();return i.length?(this._adjacentElement=i,this._isPrev=!0):this._adjacentElement=this._selItem.next(),!0}},{key:"_handleMouseUp",value:function(t,a){var o=this.name;return clearTimeout(this._delay),this._stDispatched=!1,n(this._doc).off("mousemove."+o).off("mouseup."+o),this._ms&&(this._ms=!1,this._prevX=this._prevY=void 0,t.target===this._mdEvent.target&&n.data(t.target,o+".prevClickEve",!0),this._dropDraggedElement(t,a)),!1}},{key:"_dropDraggedElement",value:function(t,a){t&&(!this._dispatchEvent("beforeend",t.target,t)&&(a=!0),this._placeElement(t,a))}},{key:"_placeElement",value:function(a,o){var l,n=this._selItem;this.reverting=!1,!o&&n.length&&this._placeHolder.length&&n[0].contains(this._placeHolder[0])&&(o=!0),o?n["insert"+(this._isPrev?"After":"Before")](this._adjacentElement):!this._noFinalSort&&n.parent().length&&this._placeHolder.before(n);var s=this._placeHolder.closest(".zsortable"),r=!o&&s.length&&s[0]!==this.element[0];if(this._noFinalSort=null,this._draggedEle[0]===n[0]){for(l in this._savedCSS)("auto"===this._savedCSS[l]||"static"===this._savedCSS[l])&&(this._savedCSS[l]="");n.css(this._savedCSS).removeClass("zsortable__helper")}else n.show();this._draggedEle.removeClass(this._opts.classNameOnSort),this.dragging=!1,this._placeHolder[0].parentNode.removeChild(this._placeHolder[0]),this.fromOutside=!1,this._selItem=void 0;var d=r?{relocateTo:s,relocationNature:"remove",relocateFrom:this.element}:a.target;this._dispatchEvent("end",d,a),r&&t.sortable(s).triggerEvent("change",{relocateFrom:this.element,relocationNature:"add",relocateTo:s},a);var c=this._getIndexOfChildInParent(a.currentTarget.children,a.target.closest(".zsortable__handle")),_=this.initialIndex==c;o||_||this._dispatchEvent("change",d,a)}},{key:"_getIndexOfChildInParent",value:function(t,a){return Array.prototype.indexOf.call(t,a)}},{key:"_bindEvents",value:function(){var t=this,a=this.name,o=this.element;o.on("mousedown."+a,function(a){t._handleMouseDown(a),-1!=o[0].parentNode.className.indexOf("zsortable__handle")&&a.stopImmediatePropagation()}).on("click."+a,function(t){if(!0===n.data(t.target,a+".prevClickEve"))return n.removeData(t.target,a+".prevClickEve"),t.stopImmediatePropagation(),!1}).on("mouseup."+a,function(a){if(n(a.target).closest(".zsortable__placeholder").length&&!t._selItem){t._storeContainerDetails();for(var r,d,l=t.containers,i=l.length,s=1;s<i;s++)(d=(r=n(l[s].element).data("zsortable"))&&r._selItem)&&n(d).trigger("mouseup")}else t._handleMouseUp(a)})}},{key:"_refreshItems",value:function(){this.items=[];for(var o,l,s,t=this._storeContainerDetails(),a=t.length-1;0<=a;a--){o=t[a][1],s=t[a][0];for(var r=0;r<s.length;r++)(l=n(s[r])).data(this.name+"-item",o),this.items.push({item:l,width:0,height:0,left:0,top:0})}}},{key:"_storeContainerDetails",value:function(){this.containers=[this];var t=this._opts,a=[[n(t.items,this.element),this]];if(t.connectWith&&this._inited&&!t.restrictExternalItem)for(var i,o=n(t.connectWith),l=0;l<o.length;l++)(i=n(o[l]).data("zsortable"))&&i.element[0]!==this.element[0]&&(a.push([n(i._opts.items,i.element),i]),this.containers.push(i));return a}},{key:"_setHandleClassName",value:function(){this.element.find(".zsortable__handle").removeClass("zsortable__handle");for(var l,t=this._opts.ignoreAsHandle.split(","),a=this.items,o=0;o<a.length;o++)l=a[o].item,-1===t.indexOf(l[0].nodeName.toLowerCase())&&l.addClass("zsortable__handle")}},{key:"_refreshPositions",value:function(t){var a=this.items;this.floating=!!a.length&&("x"===this._opts.axis||this._isFloating(a[0].item));for(var n,l,s,o=a.length-1;0<=o;o--)l=(n=a[o]).item,t||(n.width=l.outerWidth(),n.height=c(l.outerHeight())),s=l.offset(),n.left=s.left,n.top=c(s.top);for(var r=this.containers,d=r.length-1;0<=d;d--)s=r[d].element.offset(),r[d].savedData.left=s.left,r[d].savedData.top=s.top,r[d].savedData.width=r[d].element.outerWidth(),r[d].savedData.height=r[d].element.outerHeight();return this}},{key:"_isFloating",value:function(t){var a=t.css("float").toLowerCase(),o=t.css("display").toLowerCase();return"left"===a||"right"===a||"table-cell"===o||"inline"===o}},{key:"_unbindEvents",value:function(t){var a=this.name;this.element.off("mousedown."+a).off("click."+a),n(this._doc).off("mousemove."+a).off("mouseup."+a),t&&this.element.removeData(a)}},{key:"destroy",value:function(){this._unbindEvents(!0)}},{key:"disable",value:function(){this._unbindEvents()}},{key:"enable",value:function(){this._bindEvents()}},{key:"getItems",value:function(){return n(this._opts.items,this.element).toArray()}},{key:"refresh",value:function(){return this._manipulateHandles(),this}},{key:"_disable",value:function(){}},{key:"_setAttribute",value:function(t,a){this._opts[t]=a,"items"===t?this._manipulateHandles():"ignoreAsHandle"===t?this._setHandleClassName():("connectWith"==t||"restrictExternalItem"==t)&&this._refreshItems()}},{key:"name",get:function(){return"zsortable"}},{key:"attrs",get:function(){return{items:"> *",handle:void 0,ignoreAsHandle:"input,textarea,button,select,option",axis:"both",region:void 0,disabled:!1,classNameOnSort:"",cancelOnEscKey:!0,connectWith:void 0,autoScrollRegion:!0,placeholderClassName:"",sortStartDelay:0,cursorOffset:{left:0,top:0},restrictExternalItem:!1,scrollSensitivity:20,scrollSpeed:20,prependToEmpty:!1}}},{key:"EVENTS",get:function(){return["start","drag","change","beforeend","end","cancel","shuffle"]}}]),i}();t.registerComponent("ZSortable",se)}(ZPeopleComponents,ZPeopleComponents.DOMUtil),function(ZC){let $=ZC.DOMUtil;ZC.tagNames.ztabbedlistboxpopup=["div","z-tabbedlistboxpopup"],ZC.registerComponent("ZTabbedListBoxPopup",ZC.ZTabPanel,class extends ZC.ZTabPanel{get name(){return"ztabbedlistboxpopup"}get attrs(){return{tabPosition:"left"}}_init(){let inlineStyle={display:"none",position:"absolute","z-index":this._opts.zIndex||999999};this._opts.height&&(inlineStyle.height=this._opts.height),this._opts.width&&(inlineStyle.width=this._opts.width),this.element.css({display:"none",position:"absolute","z-index":this._opts.zIndex||999999}),super._init(...arguments),this._opts.className=(this._opts.className||"")+" ztabbedlistbox",this._data.footer=this._opts.footer}_bindEvents(){super._bindEvents(...arguments),this.element.find("#zpNotifyAll").on("change",eventObj=>{(this._data.tabs||[]).forEach(value=>{this.setTabAttributes("#"+value.id,{disabled:eventObj.target.checked})}),this._dispatchCallback("changenotification",{notifyAll:eventObj.target.checked,options:this._opts})})}open(){let opts=this._opts;!this._arrow&&opts.pointer&&(this._arrow=$("<div class='zdropdownlist__pointer zh-top'></div>"),this._arrow.prependTo(this.container)),this._showHideProps={cname:this.name,arrowElement:this._arrow,forElement:opts.forElement,appendTo:opts.appendTo,isCE:this.isCE,rtl:opts.rtl,originalElement:this.element,direction:opts.position,offset:opts.margin,position:opts.offset,hideMethodName:"close",hideEventName:"close"},ZC.Helpers.open(this.container,this._showHideProps)}close(){this._display(this.container[0],!1)}disbleAlTabs(disable){let canDisable=!1!==disable;this._hidedAllTabs=canDisable,(this._data.tabs||[]).forEach(tabInfo=>{this.setTabAttributes("#"+tabInfo.id,{disabled:canDisable})}),this._hidedAllTabs=!1}_disableTab(tab,canDisable){this._toArr(tab).forEach(tab=>{let tabData=this._getTabData(tab);if(tabData.element!=this._activeTab)return super._disableTab(...arguments);{let listInstance=ZC.listbox(this._getTabListID(tabData));if(canDisable)this._activeTabValues=listInstance.getValues(),listInstance.selectAll();else{listInstance.deselectAll();let _activeTabValues=this._activeTabValues;_activeTabValues&&listInstance[this._multiple?"setValues":"setValue"](_activeTabValues)}listInstance.setAttribute("disabled",canDisable)}})}disbleTab(tabInfo,disable){let canDisable=!1!==disable;this._getTabInfo(tabInfo,tabInfo=>{this.setTabAttributes("#"+tabInfo.id,{disabled:canDisable}),this._disbleListbox(tabInfo,canDisable)})}getSelectedItems(tabSelector){let selectedItems=null;return this._getTabInfo(tabSelector,listBoxId=>{selectedItems=ZC.listbox(listBoxId).getValues()}),selectedItems}setTabItems(tabInfo,items){this._getTabInfo(tabInfo,(listBoxId,tabInfo)=>{tabInfo.isItemUpdated=!0,tabInfo.actualData.items=items})}selectTabItems(tabInfo,items){this._getTabInfo(tabInfo,(listBoxId,tabInfo)=>{if(ZC.isComponent(listBoxId)){let listInstance=ZC.listbox(listBoxId);"all"===items?listInstance.selectAll():listInstance[this._multiple?"setValues":"setValue"](items)}else tabInfo.actualData.values=items})}deselectTabItems(tabInfo,items){this._getTabInfo(tabInfo,listBoxId=>{let listInstance=ZC.listbox(listBoxId);"all"===items?listInstance.deselectAll():listInstance.deselect(items)})}deselectAll(){this._selectAll()}selectAll(){this._selectAll(!0)}_selectAll(selectedAll){(this._data.tabs||[]).forEach((tabInfo,tabIndex)=>{let listBoxId=this._getTabListID(tabInfo);ZPeopleComponents.isComponent(listBoxId)&&ZC.listbox(listBoxId)[selectedAll?"selectAll":"deselectAll"]()})}_handleItemSelect(eventObj,listBoxId,canSelect){if(canSelect){let listInstance=ZC.listbox("#"+listBoxId);canSelect=listInstance.values().length===listInstance._datasource.length}else canSelect=!1;$("#z"+listBoxId+"-searchbox--selectall")[0].checked=canSelect}_destroy(canRemove){(this._data.tabs||[]).forEach(tabInfo=>{let listBoxDOM=$(this._getTabListID(tabInfo));listBoxDOM.length&&(ZC.listbox(listBoxDOM).destroy(),listBoxDOM.remove())}),this.element.html(""),this.element.hide(),super._destroy(...arguments),canRemove&&this.element.remove()}_getTabListID(tabInfo){return"#"+this.element[0].id+tabInfo.panelId+"list"}_getTabInfo(tabSelector,callBack,getFromOpts){let tabDetail,tabId=tabSelector;return"string"!=typeof tabSelector&&(tabId=tabSelector.id),((getFromOpts?this._opts.tabs:this._data.tabs)||[]).forEach(tabInfo=>{tabInfo.id===tabId&&(callBack||getFromOpts)&&(callBack&&callBack(this._getTabListID(tabInfo),tabInfo),tabDetail=tabInfo)}),tabDetail}_dispatchCallback(eventName,eventObj){let opts=this._opts;opts[eventName]&&opts[eventName](eventObj,opts)}_loadPane(tabData){let actualTabData=tabData.actualData,actualTabOpts=this._getTabInfo(actualTabData.id,null,!0),pane=super._loadPane(...arguments),listId=this.element[0].id+actualTabData.panelId+"list",panelList=this.container.find("#"+listId);if(!panelList.length){var listboxOptions=$.extend({},{multiple:!0,templateData:{selectAll:!0},dataMapping:this._opts.dataMapping,multiSelectInterfacePattern:"checkbox",showSearchField:!0},this._opts.listboxOptions,actualTabOpts.listboxOptions||{});let enableSelectAll=actualTabOpts.selectAll;listboxOptions.templateData={selectAll:enableSelectAll||listboxOptions.selectAll},this._multiple=listboxOptions.multiple,ZC.createListBox($.extend({},listboxOptions,{id:listId,appendTo:pane,tabData:actualTabData,itemclick:eventObj=>{this._dispatchCallback("itemclick",eventObj)},select:eventObj=>{enableSelectAll&&this._handleItemSelect(eventObj,listId,!0),this._dispatchCallback("select",eventObj)},deselect:eventObj=>{enableSelectAll&&this._handleItemSelect(eventObj,listId,!0),this._dispatchCallback("deselect",eventObj)},value:actualTabData.values,selectAll:!0,items:actualTabData.items})),enableSelectAll&&$("#z"+listId+"-searchbox--selectall").on("change",eventObj=>{let selectedAll=$(eventObj.target)[0].checked;ZC.listbox("#"+listId)[selectedAll?"selectAll":"deselectAll"](),this._dispatchCallback("selectall",{selectedAll:selectedAll,options:ZC.listbox("#"+listId).getAttributes()})})}return tabData.isItemUpdated&&ZC.listbox(panelList).setAttribute("items",actualTabData.items),tabData.isItemUpdated=!1,pane}});var childrenTemplate=ZPeopleComponents.ztabpanel.Templates.children;ZPeopleComponents.ztabbedlistboxpopup.Templates.children=(data=>ZT.html`${childrenTemplate(data)}${data.footer&&ZT.html`<div class="ztabbedlistbox--footer">${ZT.customHTML(data.footer)}</div>`}`);var searchField=ZPeopleComponents.zlistbox.Templates.searchField;ZPeopleComponents.zlistbox.Templates.searchField=((subData,classes,mainData)=>mainData&&mainData.selectAll?ZT.html`<div class="ztabbedlistbox--header"><div class="zcheckbox zcheckbox--selectall"><input type="checkbox" tabindex="-1" id="${subData.id}--selectall" class="zcheckbox__helper zlistbox__inputcheckbox"><label for="${subData.id}--selectall" class="zcheckbox__label zlistbox__checkboxlabel "></label></div>${searchField(subData,classes)}</div>`:ZT.html`${searchField(subData,classes)}`)}(ZPeopleComponents);