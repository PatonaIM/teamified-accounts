ZPA_TabbedListBox={RECIPIENT:"recipient",ORG_STRUCTURE:"orgStructure",TASK_OWNER:"taskOwner",TRANSITION_OWNER:"transitionOwner",MODULE:"module",FORMVIEWPERMISSION:"FormViewPermission",POSTRECIPIENT:"postrecipient",initializeTabPanel:function(thisObj,type,id,forEleId,targetId){var cardDiv=$(thisObj).closest(".zpl_crd");if(!ZPeopleComponents.isComponent("#"+id))switch(type){case ZPA_TabbedListBox.RECIPIENT:ZPA_Messages.TabPanel.openTabPanel(id,forEleId,targetId);break;case ZPA_TabbedListBox.ORG_STRUCTURE:FilesUtil.TabPanel.init();break;case ZPA_TabbedListBox.TASK_OWNER:ZPA_Task.TabPanel.openTaskOwnerTabPanel(id,forEleId,targetId);break;case ZPA_TabbedListBox.TRANSITION_OWNER:ZPA_Blueprint.TransitionOwners.openTabpanel(id,forEleId,targetId);break;case ZPA_TabbedListBox.MODULE:ModuleComp.ZPPickList.openTabPanel();break;case ZPA_TabbedListBox.FORMVIEWPERMISSION:ModuleComp.ZPPickList.openTabPanel(type,"#cardCreateEditViewPopup",!0);break;case ZPA_TabbedListBox.POSTRECIPIENT:ZPA_Posts.TabPanel.openTabPanel(id,forEleId,targetId)}ZPeopleComponents.tabbedlistboxpopup("#"+id).open(),ZPA_TabbedListBox.setTagInput(id,cardDiv.find("#"+targetId),type)},selectAllCallback:function(event,tabPanelProps){var panelId,tagGrpId,isFromUI=!1;if(event.options?(panelId=event.options.tabData.panelId,isFromUI=!0,tagGrpId=event.options.tabData.id):(panelId=event.panelId,tagGrpId=event.tagGrpId),tabPanelProps.showSelectAllOption){var tabItems=ZPA_Common.getMainContainer().find("#"+panelId+" .zlistbox__body li"),tabItemsLen=tabItems.length;if(event.selectedAll)for(let index=0;index<tabItemsLen;index++){if("0"===tabItems.eq(index)[0].id.split("-")[1])tabItems.eq(index).show();else if(tabItems.eq(index).hide(),isFromUI)ZPA_Common.getMainContainer().find("#"+tabPanelProps.targetId+" [tagGrpId="+tagGrpId+"]").find("[cTagId="+tabItems.eq(index).attr("aria-value")+"]").parent().remove()}else for(let index=0;index<tabItemsLen;index++)if("0"===tabItems.eq(index)[0].id.split("-")[1])tabItems.eq(index).hide();else{tabItems.eq(index).show();var obj={};obj.Id=tabItems.eq(index)[0].id.split("-")[1],obj.Value=tabItems.eq(index).attr("data-label"),ZPeopleComponents.tabbedlistboxpopup("#"+ZPA_Common.getMainContainer().find("#"+panelId).closest(".ztabpanel")[0].id).deselectTabItems(tagGrpId,obj)}}void 0!=tabPanelProps.changeNotifierCallback&&"function"==typeof tabPanelProps.changeNotifierCallback&&tabPanelProps.changeNotifierCallback(),ZPA_Common.CloseAlert.changesMade()},selectCallback:function(event,tabPanelProps){if(event.detail.fromUI||tabPanelProps.isSelectAll&&!tabPanelProps.showSelectAllOption||tabPanelProps.isSelectAll&&tabPanelProps.showSelectAllOption&&"0"===event.detail.item.id.split("-")[1]){var pageWrapId=ZPA_Common.getMainContainer(),tabPanelId=tabPanelProps.id,targetId=tabPanelProps.targetId,tabData=event.detail.options.tabData,itemData=event.detail.itemData,addrId=itemData.Id,addrName=void 0==tabPanelProps.listboxOptions||tabPanelProps.listboxOptions.isTextHTMLEncoded?itemData.Value:ZSEC.Encoder.encodeForHTML(itemData.Value);if(0==pageWrapId.find("#"+targetId+" [tagGrpId="+tabData.id+"]").length){var tagGrp=ZPA_TabbedListBox.getRecipientTagGrpDiv(tabData.id,tabData.label,tabPanelId);pageWrapId.find("#"+targetId).append(tagGrp)}var systemTagDiv=pageWrapId.find("#"+targetId+" [tagGrpId="+tabData.id+"] .zpl_tglist");if(systemTagDiv.find("[cTagId="+addrId+"]").length<=0){var addrDtlDiv=ZPA_TabbedListBox.getRecipientTag(ZPA_Common.getCustomFormComponentId(addrId),addrName);$(addrDtlDiv).find("span").parent().attr("tabPanelId",tabPanelId),systemTagDiv.append(addrDtlDiv)}}ZPA_Common.CloseAlert.changesMade(),void 0!=tabPanelProps.changeNotifierCallback&&"function"==typeof tabPanelProps.changeNotifierCallback&&tabPanelProps.changeNotifierCallback(),ZPA_Common.getPageMode()==ZP_Automation_Mode.POSTMESSAGE&&void 0!=addrId&&"departmentwall"==addrId&&ZPA_PostMessage.departmentSyncPopUp.construct(!0)},deselectCallback:function(event,tabPanelProps){if(event.detail.fromUI||tabPanelProps.isSelectAll&&!tabPanelProps.showSelectAllOption||tabPanelProps.isSelectAll&&tabPanelProps.showSelectAllOption&&"0"===event.detail.item.id.split("-")[1]){var pageWrapId=ZPA_Common.getMainContainer(),targetId=tabPanelProps.targetId,itemData=event.detail.itemData,tabData=event.detail.options.tabData,addrId=itemData.Id,systemTag=(itemData.Value,pageWrapId.find("#"+targetId+" [tagGrpId="+tabData.id+"]"));if(systemTag.find("[cTagId="+addrId+"]").parent().remove(),0==systemTag.find("[cTagId]").length&&systemTag.remove(),0==pageWrapId.find("#"+targetId+" [tagGrpId]").length&&pageWrapId.find("#"+targetId).find("[elem=addContactEmlLnk]").addClass("DN"),tabPanelProps.isSelectAll&&tabPanelProps.showSelectAllOption&&"0"===event.detail.item.id.split("-")[1]){event={panelId:tabData.panelId,selectedAll:!1,tagGrpId:tabData.id};ZPA_TabbedListBox.selectAllCallback(event,{showSelectAllOption:!0})}}void 0!=tabPanelProps.changeNotifierCallback&&"function"==typeof tabPanelProps.changeNotifierCallback&&tabPanelProps.changeNotifierCallback(),ZPA_Common.CloseAlert.changesMade()},changeNotify:function(event,tabPanelProps){var notifyAll=event.notifyAll,pageWrapId=ZPA_Common.getMainContainer(),targetId=tabPanelProps.targetId;if(notifyAll){var tabPanelId=tabPanelProps.id;ZPeopleComponents.tabbedlistboxpopup("#"+tabPanelId).deselectAll(),pageWrapId.find("#"+targetId).find(".zpl_tgrp:not('#constEmlDiv'), .zpl_tg").remove(),pageWrapId.find("#to_grp [elem=addLnk]").addClass("DNI");var tagGrp=ZPA_TabbedListBox.getRecipientTagGrpDiv("NOTIFY_ALL","");if(pageWrapId.find("#"+targetId).append(tagGrp),(systemTagDiv=pageWrapId.find("#"+targetId+" [tagGrpId=NOTIFY_ALL]")).find("[cTagId=NotifyAll]").length<=0){var addrDtlDiv=ZPA_TabbedListBox.getRecipientTag("NotifyAll",void 0!=tabPanelProps.type&&""!=tabPanelProps.type&&tabPanelProps.type===ZPA_TabbedListBox.ORG_STRUCTURE?ZPI18N.getString("zp.sharetoorg"):ZPI18N.getString("zp.notifyall"));$(addrDtlDiv).find("span").parent().attr("tabPanelId",tabPanelId),systemTagDiv.append(addrDtlDiv)}}else{var systemTagDiv;pageWrapId.find("#to_grp  [elem=addLnk]").removeClass("DNI"),(systemTagDiv=pageWrapId.find("#"+targetId+" [tagGrpId=NOTIFY_ALL]")).remove()}},clearTagGrp:function(obj,tabPanelId){var tags=$(obj).closest(".zpl_tgrp").find(".zpl_tg"),tagsLen=tags.length;for(let index=0;index<tagsLen;index++)ZPA_TabbedListBox.remove(tags.eq(index).find(".PI_cls")[0]);if(ZPeopleComponents.isComponent("#"+tabPanelId)){var pageWrapId=ZPA_Common.getMainContainer(),tagGrpId=$(obj).closest(".zpl_tgrp").attr("taggrpid"),dataPanelId=pageWrapId.find("#"+tabPanelId+" .ztab__head #"+tagGrpId).attr("data-panel-id"),tabItems=pageWrapId.find("#"+tabPanelId+" .ztab__body #"+dataPanelId+" .zlistbox__body li"),tabItemsLen=tabItems.length;if("0"===tabItems.eq(tabItemsLen-1)[0].id.split("-")[1])for(let index=0;index<tabItemsLen;index++){"0"===tabItems.eq(index)[0].id.split("-")[1]?tabItems.eq(index).hide():tabItems.eq(index).show(),(obj={}).Id=tabItems.eq(index)[0].id.split("-")[1],obj.Value=tabItems.eq(index).attr("data-label"),ZPeopleComponents.tabbedlistboxpopup("#"+tabPanelId).deselectTabItems(tagGrpId,obj)}}},isClearNeeded:function(){var pageId=settingsPage.container[0].id;return"settings-service-attendance-absentscheduler"===pageId||"settings-service-attendance-attspecificpolicy"===pageId||"tab-leavetracker-compoffschedule"===pageId||"settings-service-timetracker-timesheetscheduler"===pageId||"settings-service-timetracker-specificpolicies"===pageId||"settings-service-shift-manage"===pageId||"settings-service-shift-rotation"===pageId||"settings-service-attendance-defaultpresent"===pageId},getRecipientTagGrpDiv:function(tagGrpId,tagGrpDispName,tabPanelId){var tagGrpDiv='<div class="zpl_tgrp" tagGrpId="'+tagGrpId+'" style="position:initial" ><p>'+ZSEC.Encoder.encodeForHTML(tagGrpDispName)+'</p><div class="zpl_tglist"></div>';return ZPA_TabbedListBox.isClearNeeded()&&(tagGrpDiv+='<a class="zpl_lnk" onclick="ZPA_TabbedListBox.clearTagGrp(this, \''+tabPanelId+'\')"><i class="PI_cls"></i> ',tagGrpDiv+=ZPI18N.getString("zp.clear")+"</a>"),tagGrpDiv+="</div>"},getRecipientTag:function(childAddrId,childAddrName){var chldTag=$('<div class="zpl_tg"></div>'),tagSpan=$("<span cTagId="+childAddrId+' title="'+childAddrName+'">'+childAddrName+"</span>");return chldTag.append(tagSpan),"NotifyAll"!=childAddrId&&chldTag.append('<i name="closeIc" class="PI_cls" onclick="ZPA_TabbedListBox.remove(this)"></i>'),chldTag},getTagConfig:function(recipientDiv){var tagConfigJson={},recipList=recipientDiv.find("[tagGrpId]");return void 0!=recipList&&$.each(recipList,function(index,Obj){var chldTagAry=[];$($(Obj).find("[cTagId]")).each(function(ind,chldObj){chldTagAry.push(ZPA_Common.getOriginalFormComponentId($(chldObj).attr("cTagId")))}),0!==$(Obj).find("[cTagId]").length&&(tagConfigJson[$(Obj).attr("tagGrpId")]=chldTagAry)}),tagConfigJson},getTagValue:function(recipientDiv){var tagConfigJson={},recipList=recipientDiv.find("[tagGrpId]");return void 0!=recipList&&$.each(recipList,function(index,Obj){var chldTagAry=[];$($(Obj).find("[cTagId]")).each(function(ind,chldObj){var tagValueJson={};tagValueJson[$(chldObj).attr("cTagId")]=$(chldObj).text(),chldTagAry.push(tagValueJson)}),0!==$(Obj).find("[cTagId]").length&&(tagConfigJson[$(Obj).attr("tagGrpId")+"Value"]=chldTagAry)}),tagConfigJson},appendRecipientTag:function(tabPanelId,recipDiv,tagGrpJson,chldTagjson){if(0==(tagGrpDiv=recipDiv.find("[tagGrpId="+tagGrpJson.id+"]")).length){var tagGrpDiv=ZPA_TabbedListBox.getRecipientTagGrpDiv(tagGrpJson.id,tagGrpJson.value,tabPanelId);recipDiv.append(tagGrpDiv)}var chldTagDiv=ZPA_TabbedListBox.getRecipientTag(ZPA_Common.getCustomFormComponentId(chldTagjson.id),chldTagjson.value);$(chldTagDiv).find("span").parent().attr("tabPanelId",tabPanelId),recipDiv.find("[tagGrpId="+tagGrpJson.id+"] .zpl_tglist").append(chldTagDiv)},remove(thisObj){var remObj=$(thisObj),tagGrpDiv=(remObj.closest(".zpl_inpgrp"),remObj.closest("[tagGrpId]")),tagGrpId=tagGrpDiv.attr("tagGrpId"),chldTagDiv=remObj.closest(".zpl_tg"),cTagText=chldTagDiv.text(),cTagId=chldTagDiv.find("[ctagid]").attr("ctagid");chldTagDiv.remove(),tagGrpDiv.find("[ctagid]").length<=0&&tagGrpDiv.remove();var tabPanelId=chldTagDiv.attr("tabpanelId");"transown_panel"!=tabPanelId||ZPeopleComponents.isComponent("#"+tabPanelId)||ZPA_Blueprint.TransitionOwners.postDeselectCB();let mailAddrObj={Id:cTagId,Value:cTagText};ZPeopleComponents.isComponent("#"+tabPanelId)&&ZPeopleComponents.tabbedlistboxpopup("#"+tabPanelId).deselectTabItems(tagGrpId,mailAddrObj),ZPA_Common.CloseAlert.changesMade()},setTagInput:function(tabbedListBxId,recipDiv,mode){var recipList=recipDiv.find("[tagGrpId]");void 0!=recipList&&$.each(recipList,function(index,Obj){var tagGrpId=$(Obj).attr("tagGrpId");if("constantVal"!=tagGrpId){if("NOTIFY_ALL"==tagGrpId){var pageWrapId=ZPA_Common.getMainContainer();return pageWrapId.find("#"+tabbedListBxId).find("#zpNotifyAll").prop("checked",!0),void pageWrapId.find("#"+tabbedListBxId).find("#zpNotifyAll").trigger("change")}var mailAddrList=[];$($(Obj).find("[cTagId]")).each(function(ind,chldObj){var addrId=$(chldObj).attr("cTagId");let mailAddrObj={Id:addrId,Value:$(chldObj).text()};mailAddrList.push(mailAddrObj),"0"===addrId&&ZPA_TabbedListBox.selectAll(tabbedListBxId,tagGrpId)}),ZPeopleComponents.tabbedlistboxpopup("#"+tabbedListBxId).selectTabItems(tagGrpId,mailAddrList)}});var pageWrapId=ZPA_Common.getMainContainer();ModuleComp.ZPPickList.getAppKeys(mode).forEach(function(curKey){var tagGrpId=ModuleComp.ZPPickList.CONSTANTS.APPFOR_AND_TABID[curKey],isAllSelected=!1;if(void 0!=recipList&&$.each(recipList,function(index,Obj){tagGrpId===$(Obj).attr("tagGrpId")&&$($(Obj).find("[cTagId]")).each(function(ind,chldObj){"0"===$(chldObj).attr("cTagId")&&(isAllSelected=!0)})}),!isAllSelected){var dataPanelId=pageWrapId.find("#"+tabbedListBxId+" .ztab__head #"+tagGrpId).attr("data-panel-id"),tabItems=pageWrapId.find("#"+tabbedListBxId+" .ztab__body #"+dataPanelId+" .zlistbox__body li");if(tabItems.length>0){var lastItem=tabItems.eq(tabItems.length-1);"0"===lastItem.attr("aria-value")&&lastItem.hide()}}})},selectAll:function(tabPanelId,tagGrpId){var pageWrapId=ZPA_Common.getMainContainer(),dataPanelId=pageWrapId.find("#"+tabPanelId+" .ztab__head #"+tagGrpId).attr("data-panel-id"),tabItems=pageWrapId.find("#"+tabPanelId+" .ztab__body #"+dataPanelId+" .zlistbox__body li"),itemsLen=tabItems.length;for(let index=0;index<itemsLen;index++){let obj={Id:tabItems.eq(index).attr("aria-value"),Value:tabItems.eq(index).attr("data-label")};ZPeopleComponents.tabbedlistboxpopup("#"+tabPanelId).selectTabItems(tagGrpId,obj)}var event={panelId:dataPanelId,selectedAll:!0,tagGrpId:tagGrpId};ZPA_TabbedListBox.selectAllCallback(event,{showSelectAllOption:!0})},getFooterHtml:function(footerText){return'<div class="ztab__footer"><div class="zcheckbox"><input id="zpNotifyAll" type="checkbox" class="zcheckbox__helper"><label for="zpNotifyAll" class="zcheckbox__label">'+footerText+"</label></div></div>"},getActiveTabId:function(formJAry,selFormId,lookupFcId){var activeTabId="";return selFormId=ZPA_Common.isNotNull(selFormId)?selFormId:"baseform",$.each(formJAry,function(ind,formJObj){var formId=Object.keys(formJObj)[0];if(formId.indexOf(selFormId)>=0&&void 0!=formId&&formJObj[formId].lookupFcId==lookupFcId)return activeTabId=formId,!1}),activeTabId}};