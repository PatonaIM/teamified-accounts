class CardMessage{static setNoData(container,options){let htmlContent='<div id="emptPage" class="zpl_crd wd100_per"><div class="zpl_Emptydata"><div><div class="zpl_emptimg '+options.className+'"></div>';options.text&&(htmlContent+="<h4>"+options.text+"</h4>"),options.subText&&(htmlContent+="<p>"+options.subText+"</p>"),options.buttonText&&(htmlContent+='<font><button class="zlabel zlabel--blue zlabel--medium" title="'+options.buttonText+'"><span class="zpl_ellipsis200">'+options.buttonText+"</span></button></font>"),htmlContent+="</div></div></div></div>",options.isAppend?container.append(htmlContent):container.html(htmlContent),"function"==typeof options.buttonCallback&&container.find("button").on("click",options.buttonCallback)}}const layoutUtil={generatePageHash:()=>{return`${Layout.Page.currentmode}-`+Object.entries(Layout.Page.urlparam).map(([paramName,paramValue])=>`${paramName}:${paramValue}`).join("/")}},UserUtils={paDeletedUsersData:[],defaultValues:()=>{const tempResultObj={};return tempResultObj.text=tempResultObj.html=ZPI18N.getString("zp.select"),tempResultObj.id="0",tempResultObj.photo=ZPeople.getResourceURL(imageUrl+"user.png"),tempResultObj},loginUserObject:()=>{let userDetail=ZPeople.getUserDetailsById(erecno),defaultOpt={};return defaultOpt.html=userDetail.empid+" "+userDetail.name,defaultOpt.text=ZPeople.decodeTxt(userDetail.empid)+" "+ZPeople.decodeTxt(userDetail.name),defaultOpt.id=erecno,defaultOpt.photo=userDetail.avatar,defaultOpt.zuid=userDetail.zuid,defaultOpt},selectUserObject:userErecNo=>{let userDetail=ZPeople.getUserDetailsById(userErecNo),defaultOpt={};return defaultOpt.html=userDetail.empid+" "+userDetail.name,defaultOpt.text=ZPeople.decodeTxt(userDetail.empid)+" "+ZPeople.decodeTxt(userDetail.name),defaultOpt.id=userErecNo,defaultOpt.photo=userDetail.avatar,defaultOpt.zuid=userDetail.zuid,defaultOpt.empid=userDetail.empid,defaultOpt.decodedItemText=ZPeople.decodeTxt(userDetail.empid)+" "+ZPeople.decodeTxt(userDetail.name),defaultOpt},selectObject:()=>{let defaultOpt={};return defaultOpt.html=ZPI18N.getString("zp.select"),defaultOpt.text=ZPI18N.getString("zp.select"),defaultOpt.id="-1",defaultOpt.photo=ZPeople.getResourceURL(imageUrl+"user.png"),defaultOpt},selectEmpObject:()=>{let defaultOpt={};return defaultOpt.html=ZPI18N.getString("zp.allemployees"),defaultOpt.text=ZPI18N.getString("zp.allemployees"),defaultOpt.id="-1",defaultOpt.photo=ZPeople.getResourceURL(imageUrl+"user.png"),defaultOpt},selUserObject:(type,extramode)=>{let selErecNo=erecno;var defaultOpt={};if("-1"!=selErecNo){var userDetail=ZPeople.getUserDetailsById(selErecNo);defaultOpt.html=userDetail.empid+" "+userDetail.name,defaultOpt.text=ZPeople.decodeTxt(userDetail.empid)+" "+ZPeople.decodeTxt(userDetail.name),defaultOpt.id=selErecNo,defaultOpt.photo=userDetail.avatar,defaultOpt.zuid=userDetail.zuid}else defaultOpt=UserUtils.selectObject();return defaultOpt},createMultiSelectEmpSearchbox:(empSearchId,extraMode,extraParams)=>{if(empSearchId){let searchJson={id:empSearchId,inpFormat:"token",type:1,limit:10,searchMode:{salary:"PA_EMPLOYEE_SALARY",multirater:"PA_MULTIRATER_SELECT_FILTER_NEW",MANAGE_APPR_VIEW:"INCLUDEUSERS",PV:"PA_TEAMPEERSVIEW",PVADMIN:"PA_MODULEDATAADMINVIEW",directReportees:"PA_TEAMDIRECTSUBUSERS",managerReportees:"PA_TEAMMANGERSUBUSER",goalAdminUsers:"PA_GOALADMINVIEW",skillsetDeptHead:"PA_DEPARTMENTUSERS",cycleAdmins:"PA_CYCLEADMINS",Opr_AV:"PA_APPRAISALREVIEW",PA_MODULERATING_REPORT_ADMINVIEW:"PA_MODULERATING_REPORT_ADMINVIEW",PA_MODULERATING_REPORT_TEAMVIEW:"PA_MODULERATING_REPORT_TEAMVIEW"}[extraMode]||"PA_APPRAISALREVIEWNEW",searchType:"emp",placeHolder:ZPI18N.getString("zp.allemployees"),isMultiple:!0,initDefaultValues:!0,maxAllowedValues:25};if(extraParams.hasOwnProperty("extraSParams")&&(searchJson.extraParamCallback=extraParams.extraSParams),extraParams.hasOwnProperty("placeHolder")&&(searchJson.placeHolder=extraParams.placeHolder),extraParams.hasOwnProperty("pModal")&&(searchJson.pModal=extraParams.pModal),void 0!=extraParams.hasOwnProperty("initSelVal")){let initSelObj=[];$.each(extraParams.initSelVal,function(key,value){initSelObj.push(UserUtils.selectUserObject(value))}),searchJson.initialSelection=initSelObj}ModuleComp.Search.reset(searchJson,!0),ModuleComp.Search.create(searchJson)}},createMangEmpSearchbox:(mangsearcId,empsearchId,extramode,extraParams)=>{let searchMode="APPRAISALREVIEWMANG";if("managersreviewcfs_sel"==mangsearcId?searchMode="PA_CFS_REVIEWMANG":"compmanagers_sel"==mangsearcId?searchMode="APPRAISALTEAMREVIEWMANG":"myteamskillmanagers_sel"!==mangsearcId&&"myteamcompetencymanagers_sel"!==mangsearcId&&"oprteamcompetencymanagers_sel"!==mangsearcId&&"myteamkramanagers_sel"!==mangsearcId&&"oprteamkramanagers_sel"!==mangsearcId&&"myteamgoalsmanagers_sel"!==mangsearcId&&"myteamkragoalsmanagers_sel"!==mangsearcId||(searchMode="APPRAISALTEAMREVIEWMANG"),null!=mangsearcId&&void 0!=mangsearcId&&""!=mangsearcId){let mSeachJson={id:mangsearcId,inpFormat:"select",type:1,limit:10,searchMode:searchMode,searchType:"emp",defaultOption:UserUtils.selectObject(),initDefaultValues:!0};extraParams.hasOwnProperty("pModal")&&(mSeachJson.pModal=extraParams.pModal),extraParams.hasOwnProperty("extraSParams")&&(mSeachJson.extraParamCallback=extraParams.extraSParams),extraParams.hasOwnProperty("initialSelection")&&extraParams.initialSelection&&(mSeachJson.pModal=extraParams.pModal,mSeachJson.initialSelection=void 0==extramode?UserUtils.loginUserObject():UserUtils.selUserObject("manager",extramode)),ModuleComp.Search.reset(mSeachJson,!0),ModuleComp.Search.create(mSeachJson)}if(searchMode="PA_APPRAISALREVIEW","goalfilter_managers"===mangsearcId&&(searchMode="PA_EMPLOYEE_GOAL_REPORT"),null!=empsearchId&&void 0!=empsearchId&&""!=empsearchId){let searchJson={id:empsearchId,inpFormat:"select",type:1,limit:10,searchMode:searchMode,searchType:"emp",initialSelection:void 0==extramode?UserUtils.selectObject():UserUtils.selUserObject("employee",extramode),defaultOption:UserUtils.selectObject(),initDefaultValues:!0};extraParams.hasOwnProperty("extraSParams")&&(searchJson.extraParamCallback=extraParams.extraSParams),extraParams.hasOwnProperty("pModal")&&(searchJson.pModal=extraParams.pModal),extraParams.hasOwnProperty("initialSelection")&&extraParams.initialSelection&&extraParams.hasOwnProperty("selectedUser")&&(searchJson.initialSelection=UserUtils.selectUserObject(extraParams.selectedUser)),ModuleComp.Search.reset(searchJson,!0),ModuleComp.Search.create(searchJson)}},getProfileParam:()=>({mode:"reportees",employee:ZPUtil.Validation.isEmpty(PV.sel_UserErecNo)?erecno:PV.sel_UserErecNo}),getPaUserDetail:userId=>{if(UserUtils.paDeletedUsersData.includes(userId))return{notFound:!0};const userDetails=ZPeople.getUserDetailsById(userId);return userDetails.notFound&&!UserUtils.paDeletedUsersData.includes(userId)&&UserUtils.paDeletedUsersData.push(userId),userDetails}},paCommonUtil={ERRORBOX_TIME:null,DISABLE_AUTOICREMENT:!1,focus:element=>$(element).focus(),clearFocus:element=>$(element).blur(),previousURLBackup:"",isFromUserPopup:!1,markInputError:Obj=>{null!==paCommonUtil.ERRORBOX_TIME&&clearTimeout(paCommonUtil.ERRORBOX_TIME),$(Obj).addClass("ztextbox__error").on("keyup",()=>paCommonUtil.resetInputError(Obj)),paCommonUtil.ERRORBOX_TIME=setTimeout(()=>paCommonUtil.resetInputError(Obj),3e3)},resetInputError:Obj=>{paCommonUtil.ERRORBOX_TIME=null,$(Obj).removeClass("ztextbox__error")},resetErrorBox:function(Obj){$(Obj).removeClass("ztextbox__error")},iterateTokenFieldValues:function(arr){for(var idArr=[],i=0;i<arr.length;i++)idArr.push(arr[i].id);return idArr},markAsInvalidHours:function(Obj){$(Obj).addClass("ztextbox__error")},replaceURLWithTag:function(content){return content.replace(/(\b(https?):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gim,function(url){content=content.replace(url,'<a class="WBI" href="'+url+'" target="_blank">'+url+"</a>")}),content},replaceLineBr:function(content){return content.replace(/\n/g,function(lineBr){content=content.replace(lineBr,"<br>")}),content},openComtDivinViewMode:function(obj){$(obj).closest("td").find(".zpl_paglcmrtmx").removeClass("zpl_DNI"),$(obj).closest("td").find(".zpl_paglcmrtmx").on("mouseenter",function(){$(this).removeClass("zpl_DNI")}).on("mouseleave",function(){$(this).addClass("zpl_DNI")})},isValidNumberInRange:function(val,evt,mode,min,max){let charCode=evt.which?evt.which:evt.keyCode;if(8===charCode||9===charCode||37===charCode||39===charCode)return!0;let value=val.value;if(!/^\d+$/.test(value))return!1;const num=parseInt(value,10);return num>=min&&num<=max},onNRKeyDown:function(val,evt,mode){let charCode=evt.which?evt.which:evt.keyCode;if(8===charCode||9===charCode||37===charCode||39===charCode)return!0;let value=val.value,splitArr=value.split(".");return!(splitArr.length>1&&splitArr[1].length>1&&splitArr[0].length>0&&"moduleWeightage"==mode)&&((1!=splitArr.length||2!=splitArr[0].length||void 0==splitArr[1]||"moduleWeightage"!=mode)&&(!(splitArr[0].length>2&&"moduleWeightage"==mode)&&(!(value.length>1&&"year"==mode)&&(!(value.length>2&&"moduleWeightage"!=mode&&"2"!=mode&&"3"!=mode&&"4"!=mode&&"5"!=mode&&"hike"!=mode&&"hikedeviation"!=mode)&&((!(value.length>3)||"2"!=mode&&"3"!=mode)&&(!(value.length>1&&"0"==mode)&&(!(value.length>4&&"4"==mode)&&(!(value.length>5&&"5"==mode)&&((!(splitArr.length>1)||"0"!=mode&&"3"!=mode)&&((!(splitArr.length>1&&splitArr[1].length>0)||"1"!=mode&&"4"!=mode)&&((!(splitArr.length>1&&splitArr[1].length>1)||"2"!=mode&&"5"!=mode)&&(46==charCode||190==charCode||110==charCode?-1===value.indexOf("."):!(charCode>31&&(charCode<48||charCode>57&&charCode<96||charCode>105))&&(!(splitArr.length>1&&splitArr[1].length>0&&splitArr[0].length>0&&"2"!=mode&&"3"!=mode&&"4"!=mode&&"5"!=mode&&"moduleWeightage"!=mode&&"hike"!=mode&&"hikedeviation"!=mode)&&(!(splitArr[0].length>4&&"hike"==mode&&void 0==splitArr[1])&&(void 0!=splitArr[1]&&splitArr[1].length>1&&"hike"==mode?"00"==splitArr[1]&&splitArr[0].length<5||("0"==splitArr[0]||splitArr[0].length<5)&&splitArr[1].length<2:!("hikedeviation"==mode&&splitArr.length>1&&splitArr[1].length>1))))))))))))))))},registerInputPercentage:function(inputList,mode){$(inputList).unbind(),inputList.on("blur",function(){let newValue=$(this).val(),oldValue="";if("Goal_Progress"==mode?oldValue=$(this).attr("oldvalue"):"editkra_weightage"==mode?oldValue=$(this).attr("oldvalue"):"editCompetency_weightage"==mode?oldValue=$(this).attr("oldvalue"):"skillset"==mode&&(oldValue=$(this).attr("oldvalue")),!isNaN(newValue)&&oldValue+""!=newValue+""&&$(this).is(":visible")&&newValue>=0&&newValue<=100){let extraDtl={};if(extraDtl.mode=mode,"editkra_weightage"==mode){const minVal=parseFloat($(this).attr("min")),maxVal=parseFloat($(this).attr("max")),num=parseFloat(newValue);if(kra.util.kraWeightageRange&&"null"!=$(this).attr("min")&&"null"!=$(this).attr("max")&&(num<minVal||num>maxVal))return paCommonUtil.markAsInvalidHours($(this)),void ZPeople.Message.failure(`Weightage must be between ${minVal} and ${maxVal}`);if(kra.util.kraWeightageRange&&"null"==$(this).attr("min")&&"null"!=$(this).attr("max")&&num!=minVal)return paCommonUtil.markAsInvalidHours($(this)),void ZPeople.Message.failure(`Weightage must be ${maxVal}`);!paCommonUtil.checkKraWeightageMod(newValue,AppraisalConfig.kraWeightageModValue.modVal)&&AppraisalConfig.isKRAWeightageRestirctionEnabled||!AppraisalConfig.isKRAWeightageRestirctionEnabled?paCommonUtil.setPopupContentDetails("kra_save_pop","",this,"",extraDtl):AppraisalConfig.isKRAWeightageRestirctionEnabled&&(ZPeople.Message.failure(ZPI18N.getString("zp.kraModValueErrMsg",new Array([AppraisalConfig.formUtil.kradispName],[AppraisalConfig.kraWeightageModValue.modVal]))),paCommonUtil.markAsInvalidHours(this))}else"skillset"==mode?paCommonUtil.setPopupContentDetails("skillset_save_pop","",this,"",extraDtl):"editCompetency_weightage"==mode?paCommonUtil.setPopupContentDetails("competency_save_pop","",this,"",extraDtl):"Goal_Progress"==mode&&paCommonUtil.setPopupContentDetails("Goal_Progress_save_pop","",this,"",extraDtl)}else paCommonUtil.hidePercentageInput(this,mode),paCommonUtil.resetErrorBox(this)}),inputList.on("keydown",function(event){if(paCommonUtil.DISABLE_AUTOICREMENT)return;let keyCode=event.keyCode,value=$(this).val();if((38===keyCode||40===keyCode)&&void 0!==value&&""!==value.trim()&&!isNaN(value)){ZPeople.stopEvents(event);let newVal=parseFloat(value);if(38===keyCode?newVal+=1:40===keyCode&&(newVal-=1),newVal<0||newVal>100)return;paCommonUtil.resetErrorBox(this),paCommonUtil.validateAndSetPercentage(this,keyCode,newVal,mode,"down")}}),inputList.on("keyup",function(event){paCommonUtil.inputKeydownHandling(this,event,mode)})},inputKeydownHandling:function(Obj,event,mode,update){if(paCommonUtil.DISABLE_AUTOICREMENT)return;let keyCode=event.keyCode,value=$(Obj).val();if(38!==keyCode&&40!==keyCode||ZPeople.stopEvents(event),paCommonUtil.resetErrorBox(Obj),void 0===value||""===value.trim()||isNaN(value))paCommonUtil.markAsInvalidHours(Obj);else{if(value<0||value>100)return void paCommonUtil.markAsInvalidHours(Obj);"Kra"!=mode&&"KraUser"!=mode&&"skillset"!=mode&&"editkra_weightage"!=mode&&"editCompetency_weightage"!=mode&&(value=parseFloat(value)),paCommonUtil.validateAndSetPercentage(Obj,keyCode,value,mode,"up",update)}},checkKraWeightageMod:function(value,modVal){return value%modVal!=0},hidePercentageInput:function(obj,mode){let pageId=Layout.Page.container,oldPercentage=$(obj).attr("oldvalue");if($(obj).val(oldPercentage),paCommonUtil.resetErrorBox(obj),"editkra_weightage"==mode)$(obj).siblings().eq(0).show(),$(obj).siblings().eq(1).show(),$(obj).siblings().eq(2).hide(),$(obj).hide();else if("skillset"===mode){var skillscoreId=$(obj).attr("skillsetid");pageId.find("[skillsetid="+skillscoreId+"]").addClass("zpl_DNI"),pageId.find("#skill_"+skillscoreId).find("#skillWeightage").removeClass("zpl_DNI")}else if("editCompetency_weightage"==mode)$(obj).siblings().show(),$(obj).hide();else if("Goal_Progress"==mode){$(obj).siblings().show(),$(obj).hide();let goalId=$(obj).attr("goalId");ZPeopleComponents.progressbar(pageId.find("#progressElement_"+goalId)).setAttribute("value",oldPercentage)}},validateAndSetPercentage:function(obj,keyCode,value,mode,eventType,update){let pageId=Layout.Page.container;if($(obj).val(value),value>-1&&value<101){if(13===keyCode&&"up"===eventType||update){var isAllowed=!(("editkra_weightage"!=mode||paCommonUtil.checkKraWeightageMod(value,AppraisalConfig.kraWeightageModValue.modVal)||!AppraisalConfig.isKRAWeightageRestirctionEnabled)&&AppraisalConfig.isKRAWeightageRestirctionEnabled);"editTeam_weightage"!=mode&&"editkra_weightage"!=mode||isAllowed&&"editkra_weightage"==mode?paCommonUtil.updatePercentage(obj,value,mode):isAllowed||"editkra_weightage"!=mode||(ZPeople.Message.failure(ZPI18N.getString("zp.kraModValueErrMsg",new Array([AppraisalConfig.formUtil.kradispName],[AppraisalConfig.kraWeightageModValue.modVal]))),paCommonUtil.markAsInvalidHours(obj))}if("Goal_Progress"==mode){let goalId=$(obj).attr("goalId");ZPeopleComponents.progressbar(pageId.find("#progressElement_"+goalId)).setAttribute("value",value)}}},updatePercentage:function(obj,percentage,mode){let pageId=Layout.Page.container;paCommonUtil.DISABLE_AUTOICREMENT=!0;let params={};if("editkra_weightage"==mode){params={mode:"editkra_weightage",conreqcsr:csrfToken};let mapId=$(obj).attr("id").split("_")[1];params.recId=mapId,params.weightage=percentage,params.isdelete="false",params.selUser=AppraisalConfig.selectUsererecno,params.configId=AppraisalConfig.selectconfigId;var userMapId=mapId}else if("skillset"===mode){var skillscoreId=$(obj).attr("skillsetid");params={mode:"addSkillWeightage",skillWeightage:percentage,configId:AppraisalConfig.selectconfigId,userErecNo:AppraisalConfig.selectUsererecno,skillscoreId:skillscoreId,conreqcsr:csrfToken}}else if("editCompetency_weightage"==mode){params={mode:"editcomp_weightage",conreqcsr:csrfToken};let mapId=$(obj).attr("id").split("_")[1];params.recId=mapId,params.weightage=percentage,params.selUser=AppraisalConfig.selectUsererecno,params.configId=AppraisalConfig.selectconfigId;userMapId=mapId}else if("Goal_Progress"==mode){let goalId=$(obj).attr("goalId");(params={mode:"addGoalpercentage",percentage:percentage,goalId:goalId,erecNo:AppraisalConfig.selectUsererecno,conreqcsr:csrfToken}).formId=AppraisalConfig.formUtil.goalFormDtl.formId;let ismodulePage="operations"!==settingsUrlProps.pageMode;params.isModulePage=ismodulePage}$.post("/performanceConfig.zp",params,function(resultData,params){if("editkra_weightage"===mode)"success"==resultData.msg?(pageId.find("#weightage_"+userMapId).attr("actualweightage",percentage),pageId.find("#weightage_"+userMapId).text(percentage+"%"),$(obj).attr("oldvalue",percentage),$(obj).attr("value",percentage),$(obj).hide(),$(obj).siblings().show(),ZPeople.Message.success(ZPI18N.getString("zp.weightageupdatedsucc"))):(void 0!=resultData.msg&&"failure"==resultData.msg&&void 0!=resultData.reason?ZPeople.Message.failure(resultData.reason):ZPeople.Message.failure(ZPI18N.getString("zp.sorryservererror")),paCommonUtil.hidePercentageInput(obj,mode),paCommonUtil.resetErrorBox(obj));else if("skillset"===mode){$.each(Skillset.temp,function(index,dataval){dataval.skillSetScoreId==skillscoreId&&(Skillset.temp[index].skillSetWeightage=percentage)}),ZPeople.Message.success(ZPI18N.getString("zp.weightageupdatedsucc")),$(obj).attr("oldvalue",parseFloat(percentage)),Layout.Page.container.find("[skillsetid="+skillscoreId+"]").addClass("zpl_DNI"),Layout.Page.container.find("#skill_"+skillscoreId).find("#skillWeightage").removeClass("zpl_DNI").html(parseFloat(percentage)+"%"),Layout.Page.container.find("#skill_"+skillscoreId).find("#skillWeightage").attr("widthpers",percentage);let totalPotential=0,totalWeightage=0,count=0;Layout.Page.container.find("[id^=skillScorelistviewtable_]").find("[id^=skill_]").each(function(){let weightage=0;weightage=-1==$(this).attr("apprstatus")?$(this).find("#skillWeightage").attr("actualweightage"):$(this).find("#skillWeightage").attr("widthpers"),isNaN(weightage)||0===parseInt(weightage)||(totalPotential+=parseFloat($(this).find("#total_potential").attr("potential")),totalWeightage+=parseFloat(weightage),count++)}),totalWeightage>0&&totalPotential>0&&(totalPotential=(totalPotential/totalWeightage*100).toFixed(0)),Skillset.list.updateTotalPotential(totalPotential)}else if("editCompetency_weightage"===mode)"success"==resultData.msg?(pageId.find("#weightage_"+userMapId).attr("actualweightage",percentage),pageId.find("#weightage_"+userMapId).text(percentage+"%"),$(obj).attr("oldvalue",percentage),$(obj).attr("value",percentage),$(obj).hide(),$(obj).siblings().show(),ZPeople.Message.success(ZPI18N.getString("zp.weightageupdatedsucc"))):(paCommonUtil.hidePercentageInput(obj,mode),paCommonUtil.resetErrorBox(obj),ZPeople.Message.failure(ZPI18N.getString("zp.sorryservererror")));else if("Goal_Progress"===mode)if("succ"==resultData.msg){ZPeople.Message.success(ZPI18N.getString("zp.progressupdtedsuccess"));let goalId=$(obj).attr("goalId");pageId.find("#progress_"+goalId).attr("progress",percentage),pageId.find("#progress_"+goalId).text(percentage+"%"),$(obj).attr("oldvalue",percentage),$(obj).attr("value",percentage),$(obj).hide(),$(obj).siblings().show(),ZPeopleComponents.progressbar(pageId.find("#progressElement_"+goalId)).setAttribute("value",percentage)}else paCommonUtil.hidePercentageInput(obj,mode),paCommonUtil.resetErrorBox(obj),ZPeople.Message.warning(ZPI18N.getString("zp.permdenied"));paCommonUtil.DISABLE_AUTOICREMENT=!1})},setPopupContentDetails:function(type,content,obj,header,extraDtl,jobId){var infoAlertMessage=new InfoAlertMessage;infoAlertMessage.title="","kra_save_pop"==type?(infoAlertMessage.despcription=ZPI18N.getString("zp.weightagechangeconfmsg"),infoAlertMessage.yesButtonText=ZPI18N.getString("zp.save")):"skillset_save_pop"==type?(infoAlertMessage.despcription=ZPI18N.getString("zp.weightagechangeconfmsg"),infoAlertMessage.yesButtonText=ZPI18N.getString("zp.save")):"competency_save_pop"==type?(infoAlertMessage.despcription=ZPI18N.getString("zp.weightagechangeconfmsg"),infoAlertMessage.yesButtonText=ZPI18N.getString("zp.save")):"Goal_Progress_save_pop"==type&&(infoAlertMessage.despcription=ZPI18N.getString("zp.progresschangecnfrmsg"),infoAlertMessage.yesButtonText=ZPI18N.getString("zp.save")),infoAlertMessage.cancelButtonText=ZPI18N.getString("zp.cancel"),infoAlertMessage.callback=function(event){paCommonUtil.inputKeydownHandling(obj,event,extraDtl.mode,!0)},infoAlertMessage.cancelCallback=function(){paCommonUtil.hidePercentageInput(obj,extraDtl.mode)},infoAlertMessage.show()},roundOff:num=>Math.round(10*num)/10,downloadguideLines:(mode,recordId1,selUser1,reqfile)=>{if(UDS_DOWNLOAD_IS_ACTIVE){var downloadparams={};downloadparams.recordId=recordId1,downloadparams.mode=mode,downloadparams.original=!0,downloadparams.portalId=_LOGGEDIN_ACCZSOID;var currentTime=(new Date).getTime(),eventid=_LOGGEDIN_ZUID+"_"+currentTime;downloadparams.userErecno=selUser1,"guidlines"==reqfile?downloadparams.reqfile="guidlines":"selfappform"==reqfile&&(downloadparams.reqfile="selfappform");var myJson=JSON.stringify(downloadparams);downloadURL=UDS_DOWNLOAD_URL+"/webdownload?x-service="+UDS_DOWNLOAD_SERVICE_CODE+"&event-id="+eventid+"&x-cli-msg="+encodeURIComponent(myJson),void 0!=ZPeople.zaid&&(downloadURL+="&x-cli-zaid="+ZPeople.zaid),window.open(downloadURL)}else"guidlines"==reqfile?(reqfile="guidlines",window.open("/download?mode="+mode+"&recordId="+recordId1+"&userErecno="+selUser1+"&reqfile="+reqfile)):"certification"==reqfile?(reqfile="certification",window.open("/download?mode="+mode+"&recordId="+recordId1+"&userErecno="+selUser1+"&reqfile="+reqfile)):(reqfile="selfappform",window.open("/download?mode="+mode+"&recordId="+recordId1+"&userErecno="+selUser1+"&reqfile="+reqfile))},getLayout:function(){return"operations/performance/cycle"==settingsUrlProps.niceUrl||"operations/performance/salarycycle"==settingsUrlProps.niceUrl||"#settings/service/performance/appraisaltemplate"==settingsPage.tabId||"operations/performance/multiraterselection"==settingsUrlProps.niceUrl?settingsPage.container:Layout.Page.container},isAppraisalSelfReviewtab:function(){return!!("#performance-appraisaluser-selfappraisal"==settingsPage.tabId||"#operations-performance-oprappraisaluser-selfappraisal"==settingsPage.tabId||paCommonUtil.isManageAppraisalSelfView()||PR.reviewKeysObject.isWebForm&&PR.reviewKeysObject.isSelfWebForm)},isAppraisalReviewTab:function(){return!!("#performance-appraisal-userlisting"===settingsPage.tabId&&-1==Layout.Page.hash.indexOf("performance/appraisal/userlisting-selfuser")&&-1==Layout.Page.hash.indexOf("performance/appraisal/userlisting-multiuser")||paCommonUtil.isManageAppraisalReviewPage()||"#home/myspace/overview-approval"==Layout.Page.hash||PR.reviewKeysObject.isWebForm&&PR.reviewKeysObject.isPaWebForm)},isAppraisalMRSelectionTab:function(){return!(-1==Layout.Page.currentmode.indexOf("performance/appraisaluser/choosemultirater")&&!paCommonUtil.isMultiRaterSelectionOperationPage())},validateSearch:function(inputElement,previouskey,callback,otherdetails){if(void 0!=inputElement&&void 0!=previouskey&&void 0!=callback){let previousVal=paCommonUtil.getSearchPrevValue(previouskey);previousVal=previousVal.trim();let currSearchval=$(inputElement).val().trim();setTimeout(function(){if(currSearchval!=$(inputElement).val().trim()||currSearchval==previousVal)return!1;callback(otherdetails)},600)}},getSearchPrevValue:function(previouskey){if("apprRemindPoke"==previouskey)return PMSOperation.REMINDER_POKE_PREV_SEARCHTEXT;if("apprRemindPoke"==previouskey)return PMSOperation.REMINDER_POKE_PREV_SEARCHTEXT;if("SalaryCycle"==previouskey)return PMSOperation.SALARY_CYCLE_PREV_SEARCHTEXT;if("AppraisalCycle"==previouskey)return PMSOperation.APPRAISAL_CYCLE_PREV_SEARCHTEXT;if("salaryHikeSearch"==previouskey)return PMSCycleManageData.previouslySearchedText;if("manageAppraisal"==previouskey){const{_mode:_mode,_filterPrefix:_filterPrefix}=AppraisalView.getAppraisalViewMode();return AppraisalView.cycleManageData[_mode].previouslySearchedText}return"Esign_StatusList"==previouskey?PMSESign.ESIGN_PREV_SEARCHTEXT:void 0},isRatingPageFromReviewHistory:function(){return"#performance-myreview-selfappraisal"===settingsPage.tabId&&-1!=Layout.Page.hash.indexOf("mode:revhistory")},isManageAppraisalPAImportExport:function(){if(paCommonUtil.isManageAppraisalPage()){const{_mode:_mode}=AppraisalView.getAppraisalViewMode();if(void 0!==AppraisalView[_mode].sel_configId)return!0}return!1},isApprovalPage:function(){return-1!=Layout.Page.hash.indexOf("#operations/approvals/allapproval")||-1!=Layout.Page.hash.indexOf("#performance/approval")||-1!=Layout.Page.hash.indexOf("#home/myspace/overview-actionlist")||-1!=Layout.Page.hash.indexOf("#home/myspace/overview-approval")||-1!=Layout.Page.hash.indexOf("#home/team/approvals")},isManageAppraisalSelfView:function(){if(paCommonUtil.isManageAppraisalPage()){const{_mode:_mode}=AppraisalView.getAppraisalViewMode();let pageId=Layout.Page.container;return!!(!AppraisalView[_mode].isListView&&void 0!==AppraisalView[_mode].sel_configId&&pageId.find("#manageDataStatus").length>0&&pageId.find("#manageDataStatus #self").length>0&&pageId.find("#manageDataStatus #self").hasClass("zpl_act"))}return!1},isMultiRaterSelectionOperationPage:function(){return-1!=Layout.Page.currentmode.indexOf("operations/performance/oprappraisaluser/choosemultirater")},isUserProfileSelfAppPage:function(){return"#performance-appraisaluser-selfappraisal"==settingsPage.tabId},isManageAppraisalPage:function(){return"operations/performance/cycle/manageappraisal"===Layout.Page.currentmode},isManageAppraisalReviewPage:function(){return-1!==Layout.Page.currentmode.indexOf("operations/performance/cycle")},isOprCRRatingPage:function(){return"operations/performance/crs/oprreview"===Layout.Page.currentmode},isKravsGoalOverViewTab:function(){return"#home/myspace/overview-kra"===Layout.Page.hash},modGoalImport:function(){let pageSplitUrl=Layout.Page.hash.split("-"),pageUrl=void 0;if(void 0!==pageSplitUrl&&(pageUrl=pageSplitUrl[0]),void 0===pageUrl)return!1;switch(pageUrl){case"#performance/myteamuser/goals":case"#performance/appraisaluser/goals":case"#operations/performance/user/goals":case"#performance/myteam/allgoals":case"#performance/myteamuser/kra":case"#performance/appraisaluser/kra":case"#operations/performance/user/kra":case"#performance/myteam/allkra":case"#performance/myreview/kra":case"#performance/myreview/goals":return!0;default:return!1}},isSalaryHikeCyclePage:function(){return-1!==Layout.Page.currentmode.indexOf("operations/performance/salarycycle")},isTeamKraGoals:function(){let tabId=settingsPage.tabId;return!!(AppraisalConfig.isKraGoals&&"#performance-myteam-allkra"===tabId&&Layout.Page.container.find("#toggleModule li").length>0&&"3"===Layout.Page.container.find("#toggleModule").find(".zpl_act").attr("moduletype"))},isTeamKra:function(){let tabId=settingsPage.tabId;return!!(AppraisalConfig.isKraGoals&&"#performance-myteam-allkra"===tabId&&Layout.Page.container.find("#toggleModule li").length>0&&"2"===Layout.Page.container.find("#toggleModule").find(".zpl_act").attr("moduletype"))}},AppraisalConfig={PERMDENIED_HTML:'<div class="zpl_act" id="paPermDenied"><div class="zpl_crd wd100_per"><div class="zpl_crdcnt"><div class="zpl_Emptydata"><div><div class="zpl_emptimg zp_nd_permission"></div><h4>'+ZPI18N.getString("zp.permissiondeniedtoaccessthispage")+"</h4><p></p></div></div></div></div></div>",REVIEW_DATA:null,isReviewQuestionEnabledConfig:!1,selectUsererecno:"",selUserdata:"",selectconfigId:-1,prevconfigId:-1,IS_FINAL_REVIEWER:!1,isSARatingEnabled:null,isPARatingEnabled:null,isRatingRangeEnabled:!1,SEL_USER_ERECNO:void 0,MYTEAM_USERID:null,IS_APPVIEW_ALLOWED:!1,ishavingrt:null,PERMISSIONLEVELDATA:[],IS_OPR_ADMIN:!1,configurationData:null,approver:!1,employeeFormId:null,NORMALIZEDREQDETAILS:{},potentialData:null,InitResult:{},act_configId:"",isconfigExist:!1,reportingto:!1,peertopeer:!1,feedback360:!1,isselfappraisal:!1,isFeedback:!1,isGoals:!1,isSkillset:!1,isSummary:!1,isCompetency:!1,isReviewQuestion:!0,isSkill_All:!1,isSkill_Rep:!1,isSkill_Admin:!1,isSkillAdd_Self:!1,isSkillAdd_Rep:!1,isSkillAdd_DepHead:!1,isSkillEdit_Self:!1,isSkillEdit_Rep:!1,isSkillEdit_DepHead:!1,isSkillDelete_Self:!1,isSkillDelete_Rep:!1,isSkillDelete_DepHead:!1,isSkillView_Self:!1,isSkillView_Rep:!1,isSkillView_DepHead:!1,isSkillSetDeptHead:0,isDeptHead:0,isTVPDeptHead:!1,isKra_All:!1,isKra_Rep:!1,kraWeightageModValue:1,isKRAWeightageRestirctionEnabled:!1,isKra:!1,isKraGoals:!1,permDeniedForNonAdminAccess:7069,helplinkfor:"",IS_PERM_ALLOWED:!1,IS_MRFORM_ENABLED:!1,goal_formId:null,isCompAdd_Self:!1,isCompTag_Self:!1,isCompDelete_Self:!1,isCompAdd_Rep:!1,isCompTag_Rep:!1,isCompDelete_Rep:!1,isKraAdd_Self:!1,isKraTag_Self:!1,isKraDelete_Self:!1,isKraAdd_Rep:!1,isKraTag_Rep:!1,isKraDelete_Rep:!1,HIKENAME:null,SALARYHIKENAME:null,ALLOCATEDHIKENAME:null,PROPOSEDHIKENAME:null,isAppraisal_changed:"",GOALSHEETAPPROVER:!1,isReviewApprover:!1,ratingId:void 0,IS_OPRMOD_ALLOWED:!1,reviewCustomName:ZPI18N.getString("zp.cycletemplate.customsection"),setTLTabParams:params=>{AppraisalConfig.setSelectedUser(),params.userErecno=AppraisalConfig.getSelectedUser(),params.configId=Layout.Page.urlparam.configId},initPage:function(userElement){let userId=Layout.Page.urlparam.user;userId&&Layout.Page.Header.updateUser(userId,"#performance/team")},setLoginAsSelectedUser:function(){AppraisalConfig.setSelectedUser(erecno)},setSelectedUser:function(user){AppraisalConfig.SEL_USER_ERECNO=void 0!==user?user:Layout.Page.urlparam.user},getSelectedUser:function(){return AppraisalConfig.SEL_USER_ERECNO},getPreviousPageUrl:()=>{let userId=Layout.Page.urlparam.user;if(userId){AppraisalConfig.setSelectedUser(userId);let backUrl="#performance/myteam/peersview";if(paCommonUtil.isFromUserPopup)backUrl=paCommonUtil.previousURLBackup;else if(-1!==Layout.Page.currentmode.indexOf("performance/appraisaluser")){backUrl="#performance/appraisal/userlisting-configId:"+Layout.Page.hash.split("/")[3].split(":")[1]}else-1!==Layout.Page.currentmode.indexOf("operations/performance/user")?backUrl="#operations/performance/searchuser":-1!==Layout.Page.currentmode.indexOf("operations/performance/oprappraisaluser")&&(backUrl=void 0!=Layout.Page.urlparam&&void 0!=Layout.Page.urlparam.configId?"#operations/performance/cycle/manageappraisal-configId:"+Layout.Page.urlparam.configId:"#operations/performance/cycle");return backUrl}},fetchInit:function(){var params={initmodule:JSON.stringify({modulePrefix:"performance"}),conreqcsr:csrfToken};ZPeople.Request.sendAsyncPost("/gettabdetails/initpage",params,function(resultData){void 0!==resultData.initmodule&&Object.keys(resultData.initmodule).length>0&&AppraisalConfig.setappdata(resultData.initmodule)})},getCycleByID:function(cycleID){if(void 0===cycleID||-1===cycleID||null===cycleID||null===AppraisalConfig.configurationData)return null;var returnObj=null;return $.each(AppraisalConfig.configurationData,function(key,value){if(value.configId===cycleID)return returnObj=value,!0}),returnObj},getLayoutModuleParam:function(){return{modulePrefix:"performance"}},getInitLayoutCallBack:function(){if(null===AppraisalConfig.InitResult||void 0===AppraisalConfig.InitResult||0===Object.keys(AppraisalConfig.InitResult).length){var resultData=ZPeople.Module.getData();AppraisalConfig.setappdata(resultData)}},setappdata:function(resultData){AppraisalConfig.imp_configid=null,AppraisalConfig.InitResult=resultData,AppraisalConfig.potentialData=resultData.potentialSettings,AppraisalConfig.reviewCustomName=resultData.reviewCustomName.REVIEW_CUSTOM_SECTION,AppraisalConfig.potentialData=resultData.potentialSettings,AppraisalConfig.approver=resultData.approver,AppraisalConfig.employeeFormId=resultData.employeeFormId,AppraisalConfig.NORMALIZEDREQDETAILS=resultData.normalizReqDtl,AppraisalConfig.setAppraisalConfigDetails(resultData.confDtls),AppraisalConfig.setAppraisalComponents(resultData.appComp),AppraisalConfig.setMultiraterName(resultData.multiraterName),AppraisalConfig.setKraPermissions(resultData.kraPermissions),AppraisalConfig.setCompetencyPermissions(),AppraisalConfig.setHikeTerms(resultData.hikeTerm),AppraisalConfig.ishavingrt=resultData.ishavingrt},setMultiraterName:function(value){AppraisalConfig.formUtil.multiraterName=null!=value&&void 0!=value?value:ZPI18N.getString("zp.multi")},setAppraisalConfigDetails:function(resultData){let configflag=!1;AppraisalConfig.configurationData=resultData;var parseObj=resultData;void 0!=parseObj&&parseObj.length>0&&"No_records_Found"!==parseObj[0].msg&&(null!=AppraisalConfig.act_configId&&""!=AppraisalConfig.act_configId&&-1!=AppraisalConfig.act_configId||(AppraisalConfig.act_configId=parseObj[0].configId),AppraisalConfig.isconfigExist=!0,configflag=!0),configflag||(AppraisalConfig.act_configId=-1)},setAppraisalComponents:function(resultData){AppraisalConfig.reportingto=!1,AppraisalConfig.peertopeer=!1,AppraisalConfig.feedback360=!1,AppraisalConfig.isselfappraisal=!1,AppraisalConfig.isFeedback=!1,AppraisalConfig.isGoals=!1,AppraisalConfig.isSkillset=!1,AppraisalConfig.isSummary=!1,AppraisalConfig.isCompetency=!1,AppraisalConfig.isReviewQuestion=!0,AppraisalConfig.isSkill_All=!1,AppraisalConfig.isSkill_Rep=!1,AppraisalConfig.isSkill_Admin=!1,AppraisalConfig.isSkillAdd_Self=!1,AppraisalConfig.isSkillAdd_Rep=!1,AppraisalConfig.isSkillAdd_DepHead=!1,AppraisalConfig.isSkillEdit_Self=!1,AppraisalConfig.isSkillEdit_Rep=!1,AppraisalConfig.isSkillEdit_DepHead=!1,AppraisalConfig.isSkillDelete_Self=!1,AppraisalConfig.isSkillDelete_Rep=!1,AppraisalConfig.isSkillDelete_DepHead=!1,AppraisalConfig.isSkillView_Self=!1,AppraisalConfig.isSkillView_Rep=!1,AppraisalConfig.isSkillView_DepHead=!1,AppraisalConfig.isKra_All=!1,AppraisalConfig.isKra_Rep=!1,AppraisalConfig.isKra=!1,AppraisalConfig.isKraGoals=!1,AppraisalConfig.formUtil.feedbackdispName=ZPI18N.getString("zp.feedback"),AppraisalConfig.formUtil.goalsdispName=ZPI18N.getString("zp.goals"),AppraisalConfig.formUtil.kradispName=ZPI18N.getString("zp.kra"),AppraisalConfig.formUtil.kragoalsdispName=ZPI18N.getString("zp.kravsgoals"),AppraisalConfig.formUtil.skillsetdispName=ZPI18N.getString("zp.skillset"),AppraisalConfig.formUtil.summarydispName=ZPI18N.getString("zp.summary"),AppraisalConfig.formUtil.competencydispName=ZPI18N.getString("zp.competency"),AppraisalConfig.formUtil.skilldispName=ZPI18N.getString("zp.skill"),AppraisalConfig.formUtil.reviewQuestiondispName=ZPI18N.getString("zp.questionnaire"),AppraisalConfig.componentsData=resultData,resultData.length>0&&$.each(resultData,function(index,data){"REPORTING_TO"===data.componentName&&data.isactive?AppraisalConfig.reportingto=!0:"PEER_TO_PEER"===data.componentName&&data.isactive?AppraisalConfig.peertopeer=!0:"360_FEEDBACK"===data.componentName&&data.isactive?AppraisalConfig.feedback360=!0:"SELFAPPRAISALFORM"===data.componentName&&data.isactive?AppraisalConfig.isselfappraisal=!0:"FEEDBACK"===data.componentName&&data.isactive?(AppraisalConfig.isFeedback=!0,AppraisalConfig.formUtil.feedbackdispName=void 0!=data.dispName?data.dispName:AppraisalConfig.formUtil.feedbackdispName):"GOALS"===data.componentName?(AppraisalConfig.isGoals=!!data.isactive,AppraisalConfig.formUtil.goalsdispName=void 0!=data.dispName?data.dispName:AppraisalConfig.formUtil.goalsdispName):"SKILLSET"===data.componentName&&data.isactive?(AppraisalConfig.isSkillset=!0,AppraisalConfig.formUtil.skillsetdispName=void 0!=data.dispName?data.dispName:AppraisalConfig.formUtil.skillsetdispName,AppraisalConfig.formUtil.skilldispName=void 0!=data.dispName?data.dispName:AppraisalConfig.formUtil.skilldispName):"SUMMARY"===data.componentName&&data.isactive?(AppraisalConfig.isSummary=!0,AppraisalConfig.formUtil.summarydispName=void 0!=data.dispName?data.dispName:AppraisalConfig.formUtil.summarydispName):"QUS_ANS"===data.componentName?(AppraisalConfig.formUtil.reviewQuestiondispName=void 0!=data.dispName?data.dispName:AppraisalConfig.formUtil.reviewQuestiondispName,AppraisalConfig.isReviewQuestion=!0):"SKILL_ALL"===data.componentName&&data.isactive?AppraisalConfig.isSkill_All=!0:"SKILL_REPORTING_TO"===data.componentName&&data.isactive?AppraisalConfig.isSkill_Rep=!0:"SKILL_ADMIN"===data.componentName&&data.isactive?AppraisalConfig.isSkill_Admin=!0:"KRA_REPORTING_TO"===data.componentName&&data.isactive?AppraisalConfig.isKra_Rep=!0:"KRA_ALL"===data.componentName&&data.isactive?AppraisalConfig.isKra_All=!0:"KRA"===data.componentName?(AppraisalConfig.isKra=!!data.isactive,AppraisalConfig.formUtil.kradispName=void 0!=data.dispName?data.dispName:AppraisalConfig.formUtil.kradispName):"KRA_GOALS"===data.componentName?(AppraisalConfig.isKraGoals=!!data.isactive,AppraisalConfig.formUtil.kragoalsdispName=void 0!=data.dispName?data.dispName:AppraisalConfig.formUtil.kradispName+" vs "+AppraisalConfig.formUtil.goalsdispName):"COMPETENCY"==data.componentName?(AppraisalConfig.formUtil.competencydispName=void 0!=data.dispName?data.dispName:AppraisalConfig.formUtil.competencydispName,AppraisalConfig.isCompetency=!!data.isactive):void 0==data.componentName&&(AppraisalConfig.isSkillAdd_Self=data.isSkillAdd_Self,AppraisalConfig.isSkillAdd_Rep=data.isSkillAdd_Rep,AppraisalConfig.isSkillAdd_DepHead=data.isSkillAdd_DepHead,AppraisalConfig.isSkillEdit_Self=data.isSkillEdit_Self,AppraisalConfig.isSkillEdit_Rep=data.isSkillEdit_Rep,AppraisalConfig.isSkillEdit_DepHead=data.isSkillEdit_DepHead,AppraisalConfig.isSkillDelete_Self=data.isSkillDelete_Self,AppraisalConfig.isSkillDelete_Rep=data.isSkillDelete_Rep,AppraisalConfig.isSkillDelete_DepHead=data.isSkillDelete_DepHead,AppraisalConfig.isSkillView_Self=data.isSkillView_Self,AppraisalConfig.isSkillView_Rep=data.isSkillView_Rep,AppraisalConfig.isSkillView_DepHead=data.isSkillView_DepHead)})},setKraPermissions:function(kraPermission){AppraisalConfig.isKraAdd_Self=!1,AppraisalConfig.isKraTag_Self=!1,AppraisalConfig.isKraDelete_Self=!1,AppraisalConfig.isKraAdd_Rep=!1,AppraisalConfig.isKraTag_Rep=!1,AppraisalConfig.isKraDelete_Rep=!1,void 0!=kraPermission&&(AppraisalConfig.isKraAdd_Self=kraPermission.isKraAdd_Self,AppraisalConfig.isKraTag_Self=kraPermission.isKraTag_Self,AppraisalConfig.isKraDelete_Self=kraPermission.isKraDelete_Self,AppraisalConfig.isKraAdd_Rep=kraPermission.isKraAdd_Rep,AppraisalConfig.isKraTag_Rep=kraPermission.isKraTag_Rep,AppraisalConfig.isKraDelete_Rep=kraPermission.isKraDelete_Rep)},setCompetencyPermissions:function(compPermission){AppraisalConfig.isCompAdd_Self=!1,AppraisalConfig.isCompTag_Self=!1,AppraisalConfig.isCompDelete_Self=!1,AppraisalConfig.isCompAdd_Rep=!1,AppraisalConfig.isCompTag_Rep=!0,AppraisalConfig.isCompDelete_Rep=!0},setHikeTerms:hikeTerms=>{AppraisalConfig.HIKENAME=null!=hikeTerms.HIKE_NAME&&void 0!=hikeTerms.HIKE_NAME?hikeTerms.HIKE_NAME:ZPI18N.getString("zp.hike"),AppraisalConfig.SALARYHIKENAME=null!=hikeTerms.SALARY_HIKE_NAME&&void 0!=hikeTerms.SALARY_HIKE_NAME?hikeTerms.SALARY_HIKE_NAME:ZPI18N.getString("zp.appraisalhike"),AppraisalConfig.ALLOCATEDHIKENAME=null!=hikeTerms.ALLOCATED_HIKE_NAME&&void 0!=hikeTerms.ALLOCATED_HIKE_NAME?hikeTerms.ALLOCATED_HIKE_NAME:ZPI18N.getString("zp.budgeted"),AppraisalConfig.PROPOSEDHIKENAME=null!=hikeTerms.PROPOSED_HIKE_NAME&&void 0!=hikeTerms.PROPOSED_HIKE_NAME?hikeTerms.PROPOSED_HIKE_NAME:ZPI18N.getString("zp.increment")}};AppraisalConfig.formUtil={goalFormDtl:[],salaryFormDtl:[],selfappFormDtl:[],performanceappFormDtl:[],allformdetails:[],multiraterDtl:[],kraformDtl:[],teambudgetformDtl:[],budgetSplitupformDtl:[],userSkillMapformDtl:[],skillsformDtl:[],goalsheetformDtl:[],kraUsrformDtl:[],competencyUsrformDtl:[],competencyformDtl:[],feedbackdispName:ZPI18N.getString("zp.feedback"),goalsdispName:ZPI18N.getString("zp.goals"),kradispName:ZPI18N.getString("zp.kra"),kragoalsdispName:ZPI18N.getString("zp.kravsgoals"),skillsetdispName:ZPI18N.getString("zp.skillset"),summarydispName:ZPI18N.getString("zp.summary"),competencydisplayname:ZPI18N.getString("zp.competency"),skilldispName:ZPI18N.getString("zp.skill"),reviewQuestiondispName:ZPI18N.getString("zp.questionnaire"),multiraterName:ZPI18N.getString("zp.multi"),getformDetails:function(mode,formdetails,callback,callbackParams){let formName="";if("appraisal"!==mode&&"appraisal_form"!==mode||0!=AppraisalConfig.formUtil.performanceappFormDtl.length?"salary"===mode&&0==AppraisalConfig.formUtil.salaryFormDtl.length?formName="empSalary_form":"goal"===mode&&0==AppraisalConfig.formUtil.goalFormDtl.length?formName="goalForm":"selfappraisal"===mode&&0==AppraisalConfig.formUtil.selfappFormDtl.length?formName="selfapp_form":"multirater"!==mode&&"multiraterform"!=mode||0!=AppraisalConfig.formUtil.multiraterDtl.length?"goalsheet"==mode&&0==AppraisalConfig.formUtil.goalsheetformDtl.length?formName="goalsheet_form":"kraForm"==mode&&0==AppraisalConfig.formUtil.kraformDtl.length?formName="kra_form":"kraUserform"==mode&&0==AppraisalConfig.formUtil.kraUsrformDtl.length?formName="krauser_form":"teambudgetform"==mode&&0==AppraisalConfig.formUtil.teambudgetformDtl.length?formName="teambudget_form":"budgetsplitupform"==mode&&0==AppraisalConfig.formUtil.budgetSplitupformDtl.length?formName="budgetsplitup_form":"competencyUserform"==mode&&0==AppraisalConfig.formUtil.competencyUsrformDtl.length?formName="competencyuser_form":"competency_form"==mode&&0==AppraisalConfig.formUtil.competencyformDtl.length?formName="competency_form":"userSkillMap"==mode&&0==AppraisalConfig.formUtil.userSkillMapformDtl.length?formName="userSkillMap_form":"skillform"==mode&&0==AppraisalConfig.formUtil.skillsformDtl.length&&(formName="skillsform"):formName="multirater_form":formName="performanceapp_form","getformdetailsforcfs"!=mode||0!==AppraisalConfig.formUtil.goalFormDtl.length&&0!==AppraisalConfig.formUtil.kraUsrformDtl.length&&0!==AppraisalConfig.formUtil.competencyUsrformDtl.length){if(""!=formName){let params={mode:"getformdetails",formName:formName,conreqcsr:csrfToken};$.ajax({type:"POST",async:!1,url:"/performanceConfig.zp",data:params,success:function(resultData){void 0!=resultData&&("goal"===mode?AppraisalConfig.formUtil.goalFormDtl=resultData:"appraisal"===mode||"appraisal_form"===mode?AppraisalConfig.formUtil.performanceappFormDtl=resultData:"salary"===mode?AppraisalConfig.formUtil.salaryFormDtl=resultData:"selfappraisal"===mode?AppraisalConfig.formUtil.selfappFormDtl=resultData:"kraUserform"==mode?(AppraisalConfig.formUtil.kraUsrformDtl=resultData,AppraisalConfig.formUtil.kradispName=resultData.kradispName?resultData.kradispName:ZPI18N.getString("zp.kra")):"multirater"==mode||"multiraterform"==mode?AppraisalConfig.formUtil.multiraterDtl=resultData:"goalsheet"==mode?AppraisalConfig.formUtil.goalsheetformDtl=resultData:"kraForm"==mode?(AppraisalConfig.formUtil.kraformDtl=resultData,AppraisalConfig.formUtil.kradispName=resultData.kradispName?resultData.kradispName:ZPI18N.getString("zp.kra")):"teambudgetform"==mode?AppraisalConfig.formUtil.teambudgetformDtl=resultData:"budgetsplitupform"==mode?AppraisalConfig.formUtil.budgetSplitupformDtl=resultData:"competencyUserform"==mode?(AppraisalConfig.formUtil.competencyUsrformDtl=resultData,AppraisalConfig.formUtil.competencydispName=resultData.competencydispName?resultData.competencydispName:ZPI18N.getString("zp.competency")):"competency_form"==mode?(AppraisalConfig.formUtil.competencyformDtl=resultData,null!=resultData.formDispname&&(AppraisalConfig.formUtil.competencydispName=resultData.formDispname)):"skillform"==mode?AppraisalConfig.formUtil.skillsformDtl=resultData:"userSkillMap"==mode&&(AppraisalConfig.formUtil.userSkillMapformDtl=resultData),null!==callback&&void 0!==callback&&"function"==typeof callback&&callback(callbackParams))}})}}else{let params={mode:"getformdetailsforcfs",conreqcsr:csrfToken};$.ajax({type:"POST",async:!1,url:"/performanceConfig.zp",data:params,success:function(resultData){void 0!=resultData&&(AppraisalConfig.formUtil.goalFormDtl=resultData.goal,AppraisalConfig.formUtil.kraUsrformDtl=resultData.kra,AppraisalConfig.formUtil.competencyUsrformDtl=resultData.competency)}})}}};const PMSConstant={PERFORMANCE_CONFIG_URL:"/performanceConfig.zp",PENDING:"Pending",COMPLETED:"Completed",PERMISSION_DENIED_FOR_NON_OPR_ADMIN_DATA:7069,NONE:0,MONTHLY:3,YEARLY:4,QUARTERLY:5,HALF_YEARLY:6,DBDATEFORMAT:"YYYY-MM-DD",STAR_RATING:0,NUMBER_RATING:1,TEXT_RATING:2,CUSTOM_RATING:3,EXCLUDE_RATING_VALUE:-1,KRA_SORT_DEFAULT:0,KRA_SORT_WEIGHTAGE_ASC:1,KRA_SORT_WEIGHTAGE_DESC:2,GOAL_TABLE:"P_Goals",SELF_APPRAISAL_TABLE:"P_SelfAppraisal",SECTION_SALARY_HIKE:"SALARYHIKEINPUT",GOAL_FORM_NAME:null,SELF_APPRAISAL_FORM_NAME:null,REVIEW_QUESTIONS_NAME:"REVIEWQUESTIONS",SECTION_GOALS_ARCHIVE_PERMISSION:"GOALS_ARCHIVE_PERMISSION",APPRAISAL_CYCLE_COMMENCE:"APPRAISAL_PROCESS_COMMENCE_NOTIFY",PA_REVIEW_COMMENCE:"REVIEW_COMMENCE_NOTIFY",PA_REVIEW_END:"REVIEW_END_NOTIFY",KRA_VS_GOAL:0,KRA:1,GOAL:2,COMPETENCY:5,QUS_ANS:6,getNotificationTypes:function(){return[PMSConstant.APPRAISAL_CYCLE_COMMENCE,PMSConstant.PA_REVIEW_COMMENCE,PMSConstant.PA_REVIEW_END]},getFormName(formName){if(!formName)return"";const params={mode:"getFormDetailsNew",formName:formName};return formName===PMSConstant.GOAL_TABLE?PMSConstant.getGoalFormName(formName,params):formName===PMSConstant.SELF_APPRAISAL_TABLE?PMSConstant.getSelfAppraisalFormName(formName,params):""},getGoalFormName:(formName,params)=>(null===PMSConstant.GOAL_FORM_NAME&&ZPeople.Request.sendAsyncPost(PMSConstant.PERFORMANCE_CONFIG_URL,params,function(data){void 0!==data.formDispname?PMSConstant.GOAL_FORM_NAME=data.formDispname:PMSConstant.GOAL_FORM_NAME=ZPI18N.getString("zp.goals")}),PMSConstant.GOAL_FORM_NAME),getSelfAppraisalFormName:(formName,params)=>(null===PMSConstant.SELF_APPRAISAL_FORM_NAME&&ZPeople.Request.sendAsyncPost(PMSConstant.PERFORMANCE_CONFIG_URL,params,data=>{PMSConstant.SELF_APPRAISAL_FORM_NAME=void 0!==data.formDispname?data.formDispname:ZPI18N.getString("zp.selfappraisal")}),PMSConstant.SELF_APPRAISAL_FORM_NAME||""),getFormDetails:formName=>{if(!formName)return"";const params={mode:"getFormDetailsNew",formName:formName};formName!==PMSConstant.GOAL_TABLE||Object.keys(AppraisalConfig.formUtil.goalFormDtl).length||ZPeople.Request.sendAsyncPost(PMSConstant.PERFORMANCE_CONFIG_URL,params,data=>{AppraisalConfig.formUtil.goalFormDtl=data})}};var PMS_MOD_Export={EXPACK_MODAL:null,popupId:"exportPopup_PA",cardId:"cardexportPopup_PA",moduleType:"",view:"",ALLOWED_FORMAT:new Array("pdf","xls","xlsx","csv"),inclusetabmodes:["employeesalary","appraisal_form","goalForm","kraGoals","multiraterform"],showExportPopup:function(callback,mode){var modelLen=$("#"+PMS_MOD_Export.modelId).length,popupTab=new Tab(PMS_MOD_Export.popupId,function(){if(0==modelLen){let isPasswordProtected=PMS_MOD_Export.isPasswordProtected(mode);var popup="";if(popup+='<div class="zpl_crd"><div class="zpl_crdcnt"><div class="zpl_Emptydata"><div><div class="zpl_mdexprtimg smll"></div><h4>'+ZPI18N.getString("zp.choosefileformattoexport")+'</h4><div class="zpl_secn"><div>',isPasswordProtected||(popup+='<div class="zradiobutton zradiobutton--horizontal"><input id="expFormat_xls" type="radio" name="zp_ftype" class="zradiobutton__helper" value="xls" checked><label onclick="PMS_MOD_Export.toggleCheckBox(\'expFormat_xls\', false);" class="zradiobutton__label"><span class="zradiobutton__text">'+ZPI18N.getString("zp.xls")+"</span></label></div>"),popup+='<div class="zradiobutton zradiobutton--horizontal"><input id="expFormat_xlsx" type="radio" name="zp_ftype" class="zradiobutton__helper" value="xlsx"><label onclick="PMS_MOD_Export.toggleCheckBox(\'expFormat_xlsx\', false);" class="zradiobutton__label"><span class="zradiobutton__text">'+ZPI18N.getString("zp.xlsx")+"</span></label></div>",isPasswordProtected||(popup+='<div class="zradiobutton zradiobutton--horizontal"><input id="expFormat_csv" type="radio" name="zp_ftype" class="zradiobutton__helper" value="csv"><label onclick="PMS_MOD_Export.toggleCheckBox(\'expFormat_csv\', false);" class="zradiobutton__label"><span class="zradiobutton__text">'+ZPI18N.getString("zp.csv")+'</span></label></div><div class="zradiobutton zradiobutton--horizontal"><input id="expFormat_tsv" type="radio" name="zp_ftype" class="zradiobutton__helper"  value="tsv"><label onclick="PMS_MOD_Export.toggleCheckBox(\'expFormat_tsv\', false);" class="zradiobutton__label"><span class="zradiobutton__text">'+ZPI18N.getString("zp.tsv")+"</span></label></div>"),$("#"+PMS_MOD_Export.cardId).html(popup),isPasswordProtected&&$("#"+PMS_MOD_Export.cardId).find("#expFormat_xlsx").prop("checked",!0),PMS_MOD_Export.inclusetabmodes.includes(mode)){let inclEle='<div class="zpl_secn"><div><div class="zcheckbox">';inclEle+='<input type="checkbox" id="zp_export_inctabularsec" class="zcheckbox__helper">',inclEle+='<label class="zcheckbox__label" for="zp_export_inctabularsec">'+ZPI18N.getString("zp.includetabulardata")+"</label></div></div></div>",$("#"+PMS_MOD_Export.cardId).find(".zpl_crdcnt").append(inclEle)}if((("kraUserform"==mode||"kraGoals"==mode)&&-1!=Layout.Page.currentmode.indexOf("performance/myreview/kra")||"goalForm"==mode&&-1!=Layout.Page.currentmode.indexOf("performance/myreview/goals")||"competencyUserform"==mode&&-1!=Layout.Page.currentmode.indexOf("performance/myreview/competency")||"skillset"==mode&&-1!=Layout.Page.currentmode.indexOf("performance/myreview/skillset"))&&(isPAdmin||appdataadmin||palocadm||ZPeople.getSubUsersCount(erecno)>0)){let _chsExpDataEle='<div class="zpl_secn "><div><h5>'+ZPI18N.getString("zp.choosedatatoexport")+':</h5></div><div><div class="zradiobutton zradiobutton--horizontal"><input type="radio" id="myDataExprt" value="myDataExprt" checked="checked" class="zradiobutton__helper" name="choosedatatypeexp"><label for="myDataExprt" class="zradiobutton__label"><span class="zradiobutton__text">'+ZPI18N.getString("zp.mydata")+'</span></label></div><div class="zradiobutton zradiobutton--horizontal"><input type="radio"  value="allDataExprt" id="allDataExprt" class="zradiobutton__helper" name="choosedatatypeexp"><label for="allDataExprt" class="zradiobutton__label"><span class="zradiobutton__text">'+ZPI18N.getString("zp.allaccessibledata")+"</span></label></div></div> </div>";$("#"+PMS_MOD_Export.cardId).find(".zpl_crdcnt").append(_chsExpDataEle)}if("appraisal_form"==mode&&(-1!=Layout.Page.currentmode.indexOf("performance/appraisal/userlisting")||paCommonUtil.isManageAppraisalPage())){const{_mode:_mode}=AppraisalView.getAppraisalViewMode();if(isSanmarUI){let finalrecordExportEle='<div class="zpl_secn "><div><h5>'+ZPI18N.getString("zp.choosedatatoexport")+':</h5></div><div><div class="zradiobutton zradiobutton--horizontal"><input type="radio" id="appraisalExportallrecord" value="allRecord" checked="checked" class="zradiobutton__helper" name="zp_reviewtype"><label for="appraisalExportallrecord" class="zradiobutton__label"><span class="zradiobutton__text">Current Level</span></label></div><div class="zradiobutton zradiobutton--horizontal"><input type="radio"  value="finalReview" id="appraisalExportfinalrecord" class="zradiobutton__helper" name="zp_reviewtype"><label for="appraisalExportfinalrecord" class="zradiobutton__label"><span class="zradiobutton__text">'+ZPI18N.getString("zp.finallevelreview")+"</span></label></div></div> </div>";$("#"+PMS_MOD_Export.cardId).find(".zpl_crdcnt").append(finalrecordExportEle)}else if(AppraisalView[_mode].reviewlevel>1){let finalrecordExportEle='<div class="zpl_secn "><div><h5>'+ZPI18N.getString("zp.choosedatatoexport")+':</h5></div><div><div class="zradiobutton zradiobutton--horizontal"><input type="radio" id="appraisalExportallrecord" value="allRecord" checked="checked" class="zradiobutton__helper" name="zp_reviewtype"><label for="appraisalExportallrecord" class="zradiobutton__label"><span class="zradiobutton__text">'+ZPI18N.getString("zp.alllevelreview")+'</span></label></div><div class="zradiobutton zradiobutton--horizontal"><input type="radio"  value="finalReview" id="appraisalExportfinalrecord" class="zradiobutton__helper" name="zp_reviewtype"><label for="appraisalExportfinalrecord" class="zradiobutton__label"><span class="zradiobutton__text">'+ZPI18N.getString("zp.finallevelreview")+"</span></label></div></div> </div>";$("#"+PMS_MOD_Export.cardId).find(".zpl_crdcnt").append(finalrecordExportEle)}}}},function(){"function"==typeof callback?callback(mode):PMS_MOD_Export.EXPACK_MODAL.close()}),popupName=ZPI18N.getString("zp.exportas",[""]);PMS_MOD_Export.EXPACK_MODAL=new popupModal(popupName,popupTab),PMS_MOD_Export.EXPACK_MODAL.save=ZPI18N.getString("zp.export"),PMS_MOD_Export.EXPACK_MODAL.setCloseCallback(function(){PMS_MOD_Export.EXPACK_MODAL.remove()}),PMS_MOD_Export.EXPACK_MODAL.construct()},isPasswordProtected:mode=>{let isPassword=!1;return"multiraterform"==mode?isPassword=AppraisalConfig.formUtil.multiraterDtl.isPassword:"selfappraisal"==mode?isPassword=AppraisalConfig.formUtil.selfappFormDtl.isPassword:"appraisal_form"==mode?isPassword=AppraisalConfig.formUtil.performanceappFormDtl.isPassword:"goal"==mode||"goalForm"==mode?isPassword=AppraisalConfig.formUtil.goalFormDtl.isPassword:"employeesalary"==mode&&(isPassword=AppraisalConfig.formUtil.salaryFormDtl.isPassword),isPassword},toggleCheckBox:(id,isCurrentContainer)=>{const pageCont=$(PMS_MOD_Export.EXPACK_MODAL.sliderDiv);let isChecked;(isChecked=pageCont.find("#"+id).prop("checked"))||pageCont.find("#"+id).prop("checked",!0)},exportModuleMapping:function(){var popCont=$(PMS_MOD_Export.EXPACK_MODAL.sliderDiv),pageId=settingsPage.container,path="selfappraisalExport.zp?submode=exportModuleMapping";path+="&ftype="+popCont.find("input[name=zp_ftype]:checked").val();var modtype,compType=PMS_MOD_Export.moduleType;if(0==compType){var modVal=ZPeopleComponents.select(pageId.find("#desigdomainsel")).getValue();"designation"==modVal?modtype=1:"domain"==modVal?modtype=3:"department"==modVal?modtype=2:"desDep"==modVal&&(modtype=4)}else 1==compType?modtype=ZPeopleComponents.select(pageId.find("#desdepselect")).getValue():2==compType&&(modtype=ZPeopleComponents.select(pageId.find("#compdesdepsel2")).getValue());path+="&modtype="+modtype,path+="&cmpType="+compType;var form=document.createElement("form");form.id="skexport";var logexport=document.createElement("input");form.setAttribute("method","post"),form.setAttribute("action",path),logexport.setAttribute("type","hidden"),logexport.setAttribute("name","conreqcsr"),logexport.setAttribute("value",csrfToken),form.appendChild(logexport),document.body.appendChild(form),form.submit(),form.reset(),PMS_MOD_Export.EXPACK_MODAL.close()},exportdata:function(mode){var popCont=$(PMS_MOD_Export.EXPACK_MODAL.sliderDiv),frmId="",viewid="",formElm=document.createElement("form");formElm.id="exp_form",formElm.name="ExportForm";var path="",ftype=popCont.find("input[name=zp_ftype]:checked").val(),includeTabular=popCont.find("#zp_export_inctabularsec").prop("checked");let allDataSelected="allDataExprt"===popCont.find("input[name=choosedatatypeexp]:checked").val();if(path="ExportData.do?approvalStatus=all&ftype="+ftype,"kraForm"==mode)AppraisalConfig.formUtil.getformDetails("kraForm"),path+="&hrmsform="+(frmId=AppraisalConfig.formUtil.kraformDtl.formId)+"&viewID="+(viewid=AppraisalConfig.formUtil.kraformDtl.viewId),path+="&selectedView="+(0==kraView?"kra":"userKra");else if("competency_form"==mode)AppraisalConfig.formUtil.getformDetails("competency_form"),path+="&hrmsform="+(frmId=AppraisalConfig.formUtil.competencyformDtl.formId)+"&viewID="+(viewid=AppraisalConfig.formUtil.competencyformDtl.viewId);else if("skillform"==mode)AppraisalConfig.formUtil.getformDetails("skillform"),path+="&hrmsform="+(frmId=AppraisalConfig.formUtil.skillsformDtl.formId)+"&viewID="+(viewid=AppraisalConfig.formUtil.skillsformDtl.viewId);else if("multiraterform"==mode){const{_mode:_mode,_filterPrefix:_filterPrefix,_isManageAppraisal:_isManageAppraisal}=AppraisalView.getAppraisalViewMode();AppraisalConfig.formUtil.getformDetails("multirater"),frmId=AppraisalConfig.formUtil.multiraterDtl.formId,viewid=AppraisalConfig.formUtil.multiraterDtl.viewId;const pageId=Layout.Page.container;void 0!=ZPeopleComponents.select(pageId.find("#"+_filterPrefix+"applicableType")).getValue()&&null!=ZPeopleComponents.select(pageId.find("#"+_filterPrefix+"applicableType")).getValue()&&""!=ZPeopleComponents.select(pageId.find("#"+_filterPrefix+"applicableType")).getValue()&&(path+="&customAdminGrpId="+ZPeopleComponents.select(pageId.find("#"+_filterPrefix+"applicableType")).getValue());let mode="PAMultirater";("#performance-appraisal-userlisting"==settingsPage.tabId||paCommonUtil.isManageAppraisalPage())&&(mode="PAMultiraterReviewer"),path+="&filtermode="+mode+"&hrmsform="+frmId+"&viewID="+viewid,path+="&configId="+AppraisalView[_mode].sel_configId,"#performance-appraisal-userlisting"==settingsPage.tabId&&(path+="&managerId="+erecno),path+="&status=1"}else if("teambudgetform"==mode){if(AppraisalConfig.formUtil.getformDetails("teambudgetform"),frmId=AppraisalConfig.formUtil.teambudgetformDtl.formId,viewid=AppraisalConfig.formUtil.teambudgetformDtl.viewId,"#performance-appraisal-salaryhike"==settingsPage.tabId){const pageId=Layout.Page.container;let configIds=ZPeopleComponents.select(pageId.find("#siSalaryCycle")).getValue();const managerId=erecno;null!=managerId&&void 0!=managerId&&""!=managerId&&"-1"!=managerId&&(path+="&managerId="+managerId),null!=configIds&&void 0!=configIds&&""!=configIds&&"-1"!=configIds&&(path+="&configId="+configIds),path+="&hrmsform="+frmId+"&viewID="+viewid}}else if("kraUserform"==mode){AppraisalConfig.formUtil.getformDetails("kraUserform"),path+="&hrmsform="+(frmId=AppraisalConfig.formUtil.kraUsrformDtl.formId)+"&viewID="+(viewid=AppraisalConfig.formUtil.kraUsrformDtl.viewId),path+="&filtermode=KRAuser",-1!=settingsUrlProps.url.indexOf("performance/myreview/kra")&&allDataSelected?path+="&isAllData="+allDataSelected:path+="&userErecno="+AppraisalConfig.selectUsererecno;let configID=settingsUrlProps.urlParamsArr.configId;void 0!=configID&&"-1"!=configID&&(path+="&configId="+configID)}else if("goalForm"===mode||"kraGoals"==mode){AppraisalConfig.formUtil.getformDetails("goal"),path+="&hrmsform="+(frmId=AppraisalConfig.formUtil.goalFormDtl.formId)+"&viewID="+(viewid=AppraisalConfig.formUtil.goalFormDtl.viewId)+"&configId="+AppraisalConfig.selectconfigId,-1!=settingsUrlProps.url.indexOf("performance/myreview")&&allDataSelected?path+="&isAllData="+allDataSelected:path+="&userErecno="+AppraisalConfig.selectUsererecno;let goalFilterDts=Goals.Filter.Filter_Value,datetype=goalFilterDts.dateType;void 0!==datetype&&null!==datetype&&""!==datetype&&(path+="&dateType="+(datetype=encodeURIComponent(datetype))),void 0!=goalFilterDts.status&&null!=goalFilterDts.status&&""!=goalFilterDts.status?path+="&status="+goalFilterDts.status:path+="&status=1";let fromDate=goalFilterDts.fromDate,toDate=goalFilterDts.toDate;null!=fromDate&&null!=toDate&&""!=toDate&&""!=fromDate&&(path+="&goalFromDate="+fromDate,path+="&goalToDate="+toDate);let goalPeriodStatus=goalFilterDts.periodStatus;if(null!=goalPeriodStatus&&""!=goalPeriodStatus&&void 0!=goalPeriodStatus){if(6==goalPeriodStatus)return void ZPeople.Message.warning(ZPI18N.getString("zp.nogoalavailabletoexport",[AppraisalConfig.formUtil.goalsdispName]));path+="&goalPeriodStatus="+goalPeriodStatus}path+="goalForm"==mode?"&filtermode=Goals":"&filtermode=kraGoals"}else if("competencyUserform"===mode){AppraisalConfig.formUtil.getformDetails("competencyUserform"),path+="&hrmsform="+(frmId=AppraisalConfig.formUtil.competencyUsrformDtl.formId)+"&viewID="+(viewid=AppraisalConfig.formUtil.competencyUsrformDtl.viewId),path+="&filtermode=Competencyuser",-1!=settingsUrlProps.url.indexOf("performance/myreview/competency")&&allDataSelected?path+="&isAllData="+allDataSelected:path+="&userErecno="+AppraisalConfig.selectUsererecno;let configID=settingsUrlProps.urlParamsArr.configId;void 0!=configID&&"-1"!=configID&&(path+="&configId="+configID)}else if("appraisal_form"==mode){AppraisalConfig.formUtil.getformDetails("appraisal"),path+="&hrmsform="+AppraisalConfig.formUtil.performanceappFormDtl.formId+"&viewID="+AppraisalConfig.formUtil.performanceappFormDtl.viewId;let finalrecordOnly=!1;if(popCont.find("#appraisalExportfinalrecord").length>0&&"finalReview"==popCont.find("input[name=zp_reviewtype]:checked").val()&&(finalrecordOnly=!0),path+="&isFinalRecordOnly="+finalrecordOnly,"performance/appraisal/userlisting"==Layout.Page.currentmode||paCommonUtil.isManageAppraisalPage()&&AppraisalView[AppraisalView.constant.oprAppraisal].isListView){const{_mode:_mode,_filterPrefix:_filterPrefix,_isManageAppraisal:_isManageAppraisal}=AppraisalView.getAppraisalViewMode();let fromexp=ZPeopleComponents.select(Layout.Page.container.find("#"+_filterPrefix+"avexp_from")).getValue(),toexp=ZPeopleComponents.select(Layout.Page.container.find("#"+_filterPrefix+"avexp_to")).getValue(),empIds=paCommonUtil.iterateTokenFieldValues(ZPeopleComponents.tokenfield(Layout.Page.container.find("#"+_filterPrefix+"employees_sel")).getAllValues()),searchStr=0==empIds.length?["-1"]:empIds,caGrpId=null;ZPeopleComponents.isComponent(Layout.Page.container.find("#"+_filterPrefix+"applicableType"))&&(caGrpId=ZPeopleComponents.select(Layout.Page.container.find("#"+_filterPrefix+"applicableType")).getValue());let status=ZPeopleComponents.select(Layout.Page.container.find("#"+_filterPrefix+"appraisalStatus_sel")).getValue(),managerId=erecno;_isManageAppraisal&&(managerId="-1"),null!=managerId&&void 0!=managerId&&""!=managerId&&"-1"!=managerId&&(path+="&managerId="+managerId),path+="&configId="+AppraisalView[_mode].sel_configId,void 0!=searchStr&&null!=searchStr&&""!=searchStr&&"-1"!=searchStr&&empIds.length>0&&(path+="&employeeArr="+encodeURIComponent(JSON.stringify(searchStr))),null!=status&&void 0!=status&&""!=status&&(path+="&status="+status),null!=fromexp&&void 0!=fromexp&&""!=fromexp&&"-1"!=fromexp&&(path+="&fromexp="+fromexp),null!=toexp&&void 0!=toexp&&""!=toexp&&"-1"!=toexp&&(path+="&toexp="+toexp),null!=caGrpId&&void 0!=caGrpId&&""!=caGrpId&&(path+="&customAdminGrpId="+caGrpId),path+="&filtermode=fromAppraiseeView",path+="&isModuleReportNeeded=true"}}null==includeTabular&&(includeTabular=!1),path+="&typeOfView=all&includeTabular="+includeTabular;var inputval=document.createElement("input");formElm.setAttribute("target","exportresp"),formElm.setAttribute("method","post"),formElm.setAttribute("action",path),inputval.setAttribute("type","hidden"),inputval.setAttribute("name",csrfParamName),inputval.setAttribute("value",csrfToken),formElm.appendChild(inputval),document.body.appendChild(formElm),formElm.submit(),formElm.reset(),PMS_MOD_Export.EXPACK_MODAL.close()}},ExtendReview={extendReviewrequest:function(configId,isSelfExtendByReviewerOrCFSBulkreview,selUser){var type=1;let extendBtnMsg=ZPI18N.getString("zp.sendreq");if("performance/myteam/userlisting"==Layout.Page.currentmode||"performance/appraisal/userlisting"==Layout.Page.currentmode)"performance/appraisal/userlisting"==Layout.Page.currentmode&&isSelfExtendByReviewerOrCFSBulkreview?(type=9,AppraisalConfig.selUserdata=selUser,extendBtnMsg=ZPI18N.getString("zp.extend")):type=1;else if(paCommonUtil.isAppraisalReviewTab())isSelfExtendByReviewerOrCFSBulkreview?(type=9,paCommonUtil.isManageAppraisalPage()&&(AppraisalConfig.selUserdata=selUser),extendBtnMsg=ZPI18N.getString("zp.extend")):type=3;else if("performance/myreview/selfappraisal"==Layout.Page.currentmode||"operations/performance/user/selfappraisal"===Layout.Page.currentmode)type=4;else if("performance/crs/selfreview"==Layout.Page.currentmode)type=5;else if("performance/crs/continuousreview"==Layout.Page.currentmode||paCommonUtil.isOprCRRatingPage()){var pageId=Layout.Page.container;2==pageId.find("[id=myPopRight_extendreview]").length&&pageId.find("[id=myPopRight_extendreview]")[1].remove(),type=isSelfExtendByReviewerOrCFSBulkreview?10:6}else"performance/appraisal/multiraterfeedback"==Layout.Page.currentmode&&(type=8,AppraisalConfig.selUserdata=selUser);ExtendReview.extendReviewCard={};var tab=new Tab;tab.id="myPopRight_extendreview",tab.cardId="extendreview_Div",ExtendReview.extendReviewCard=new sliderModal(ZPI18N.getString("zp.extendreview"),tab),ExtendReview.extendReviewCard.mediumSize=!1,ExtendReview.extendReviewCard.save=extendBtnMsg,ExtendReview.extendReviewCard.construct(),$(ExtendReview.extendReviewCard.sliderDiv).find("#sliderSbt").unbind("click"),$(ExtendReview.extendReviewCard.sliderDiv).find("#sliderSbt").attr("onclick","ExtendReview.addextendreview('"+type+"','"+configId+"','"+isSelfExtendByReviewerOrCFSBulkreview+"')"),$(ExtendReview.extendReviewCard.sliderDiv).find("#sliderSbt").text(extendBtnMsg),ExtendReview.extendReviewCard.setCloseCallback(function(){ExtendReview.extendReviewCard.remove(),ExtendReview.extendReviewCard={}});var _editHtm='<div class="zpl_crd"><div class="zpl_crdcnt"><div>';_editHtm+='<div class="zpl_secn"><div><label class="zpl_mtry">'+ZPI18N.getString("zp.reason")+'</label></div><div id="extendreview_comment"><textarea id="extendreview_description" class="ztextbox w300" rows="5"></textarea></div></div>',_editHtm+='<div class="zpl_secn"><div><label class="zpl_mtry">'+ZPI18N.getString("zp.local.NoOfDays")+'</label></div><div id="extendreview_days"><input type="text" id="noofdays" maxsize="2" maxlength="2" class="ztextbox w60" onkeydown="return ExtendReview.numberFieldValidation(this,event);" ></input></div></div>',_editHtm+="</div></div></div>",ExtendReview.extendReviewCard.sliderDiv.find("#extendreview_Div").html(""),ExtendReview.extendReviewCard.sliderDiv.find("#extendreview_Div").append($(_editHtm))},numberFieldValidation:function(obj,event){var pageId=Layout.Page.container;pageId.find("#extendreview_days").find("span").remove(),pageId.find("#extendgoal_days").find("span").remove(),pageId.find("#noofdays").removeClass("ztextbox__error");var charKey=event.which?event.which:event.KeyCode,val=$(obj).parent().attr("id"),valNoofdays=$(obj).val();return 8===charKey||9===charKey||37===charKey||39===charKey||13!==charKey&&((charKey<48||charKey>57&&charKey<96||charKey>105||!(event.key>="0"&&event.key<="9"))&&void 0!=charKey?ExtendReview.digitInvalidErrorDisplay(""+ZPI18N.getString("zp.errornofordays"),val,0):!(void 0!=valNoofdays&&valNoofdays.length>=1&&"0"!=valNoofdays)||!ExtendReview.digitInvalidErrorDisplay(""+ZPI18N.getString("zp.errornofordays"),val,1))},digitInvalidErrorDisplay:function(condition,parentId,option){var pageId=Layout.Page.container;if("extendbulkreview_days"===parentId)ZPeople.Message.warning(""+condition);else{var msg="<span id='errormsg' class='ztextbox--error__label'>"+condition+"</span>";void 0==parentId&&pageId.find("#noofdays").addClass("error-clr"),"extendgoal_days"===parentId?pageId.find("#extendgoal_days").append(msg):(pageId.find("#noofdays").addClass("ztextbox__error"),pageId.find("#extendreview_days").append(msg))}return option||pageId.find("#noofdays").val(""),!1},addextendreview:function(type,configId,isSelfExtendByReviewerOrCFSBulkreview){var pageid=Layout.Page.container;pageid.find("#extendreview_description").removeClass("ztextbox__error"),pageid.find("#errormsg").remove();var reason=pageid.find("#extendreview_description").val().trim();if(""===reason)return pageid.find("#extendreview_description").addClass("ztextbox__error"),pageid.find("#extendreview_comment").append('<span errmsg="mailids" id="errormsg" class="ztextbox--error__label">'+ZPI18N.getString("zp.pa.extendreview")+" </span>"),0;if("1"!==type&&"4"!==type&&"10"!==type&&"8"!==type&&"9"!==type&&(configId=AppraisalConfig.act_configId),"1"===type){const{_mode:_mode}=AppraisalView.getAppraisalViewMode();configId=AppraisalView[_mode].sel_configId}"3"===type&&(configId=AppraisalConfig.act_configId);var noofday=pageid.find("#noofdays").val();if(""===noofday)return pageid.find("#noofdays").addClass("ztextbox__error"),pageid.find("#extendreview_days").append('<span errmsg="mailids" id="errormsg" class="ztextbox--error__label">'+ZPI18N.getString("zp.pa.extendreviewnoofdays")+"</span>"),0;if(parseInt(noofday)>9||0==parseInt(noofday))return pageid.find("#noofdays").addClass("ztextbox__error"),pageid.find("#extendreview_days").append('<span errmsg="mailids" id="errormsg" class="ztextbox--error__label">'+ZPI18N.getString("zp.errornofordays")+"</span>"),0;ExtendReview.extendReviewCard.close(),noofday=parseInt(noofday),"#performance/crs/selfreview"==Layout.Page.hash&&(type="5");var params={mode:"extendreview",description:reason,type:type,noofdays:noofday,conreqcsr:csrfToken};"5"!=type&&"6"!=type?params.configId=configId:(params.configId=pageid.find("#cfsCenterDiv").find("#mainDiv").attr("populateid"),params.selUser=pageid.find("#cfsCenterDiv").find("#mainDiv").attr("seluser")),"3"!==type&&"9"!=type||(params.selUser=AppraisalConfig.selUserdata),"8"==type&&(params.selUser=AppraisalConfig.selUserdata),params.isModulePage=-1===settingsPage.tabId.indexOf("operations"),$.post("/performanceConfig.zp",params,function(resultData){if("success"===resultData.msg)if("9"==type?ZPeople.Message.success(ZPI18N.getString("zp.extendreviewsuccmsg")):ZPeople.Message.success(ZPI18N.getString("zp.reqAddeddSuccess")),"1"==type)pageid.find("#pa_alert").html(""),pageid.find("#pa_alert").html('<div class="zpl_info redbglit"><div class="red"><span class="d-flexM"><i class="PI_lock red"></i>'+ZPI18N.getString("zp.extendreviewpendingmsg")+"</span></div></div>");else if("3"==type)PATeamTabHandler.MyTeamhandleCallback();else if("4"==type)SelfAppr.util.getselfAppraisalRec();else if("5"==type||"6"==type)ZPeople.Message.success(ZPI18N.getString("zp.reqAddeddSuccess")),"5"!=type?(CR.RatingPage.RATING_PAGE_MODAL.sliderDiv.find("#pa_alert_Div").html(""),CR.RatingPage.RATING_PAGE_MODAL.sliderDiv.find("#pa_alert_Div").html('<div class="red"><span class="d-flexM"><i class="PI_lock red"></i>'+ZPI18N.getString("zp.extendreviewpendingmsg")+"</span></div>")):(Layout.Page.container.find("#pa_alert_Div").html(""),Layout.Page.container.find("#pa_alert_Div").html('<div class="red"><span class="d-flexM"><i class="PI_lock red"></i>'+ZPI18N.getString("zp.extendreviewpendingmsg")+"</span></div>"));else if("10"==type)ZPeople.Message.success(ZPI18N.getString("zp.reqAddeddSuccess")),Layout.Page.container.find("#cfsbulkpa_alert").html(""),Layout.Page.container.find("#cfsbulkpa_alert").html('<div class="zpl_info redbglit"><div class="red"><span class="d-flexM"><i class="PI_lock red"></i>'+ZPI18N.getString("zp.extendreviewpendingmsg")+"</span></div></div>");else if("9"==type)if(isSelfExtendByReviewerOrCFSBulkreview){const{_isManageAppraisal:_isManageAppraisal}=AppraisalView.getAppraisalViewMode();_isManageAppraisal&&AppraisalView.setRefreshListView(),AppraisalView.init()}else pageid.find("#paselfextendbyreviewer").remove();else"8"==type&&(ZPeople.Message.success(ZPI18N.getString("zp.reqAddeddSuccess")),MR.FeedBack.getMultiRaterFeedback());else"permissiondenied"===resultData.msg?ZPeople.Message.failure(ZPI18N.getString("zp.permdenied")):ZPeople.Message.success(resultData.msg)})}},PMSGettingStarted={MODULE_PAGE:1,OPERATION_PAGE:2,SETTINGS_PAGE:3,gettingStartedInit:function(sourcePage,isfromlms){let PAGSStatus=PMSGettingStarted.getGSStatus();return 1==PAGSStatus||(PMSGettingStarted.gettingStartedInitAction(PAGSStatus,sourcePage,isfromlms),!1)},getGSStatus:function(){let PAGSStatus=null;return PAGSStatus=isPATabEnabled?isPAGettingStartedCompleted?1:isadmin?2:3:4},gettingStartedInitAction:function(status,sourcePage,isfromlms){if(2==status)sourcePage==PMSGettingStarted.MODULE_PAGE?window.location.href="#performance/gettingstarted":sourcePage==PMSGettingStarted.OPERATION_PAGE?window.location.href="#operations/performance/gettingstarted":void 0!=sourcePage&&sourcePage!=PMSGettingStarted.SETTINGS_PAGE||(window.location.href="#settings/service/performance/gettingstarted");else if(3==status){let pageId=void 0!=isfromlms&&isfromlms?Skillset.skillsetContainer:Layout.Page.container;pageId.html(""),CardMessage.setNoData(pageId,{text:ZPI18N.getString("zp.pagettingstartednotcompleted"),className:"zp_nd_nodata",buttonText:"",isAppend:!1,buttonCallback:""})}else if(4==status){let pageId=void 0!=isfromlms&&isfromlms?Skillset.skillsetContainer:Layout.Page.container;pageId.html(""),CardMessage.setNoData(pageId,{text:ZPI18N.getString("zp.padisabled"),className:"zp_nd_nodata",buttonText:"",isAppend:!1,buttonCallback:""})}},gettingStartedOprValidation:function(){let PAGSStatus=PMSGettingStarted.getGSStatus();if(1==PAGSStatus)return!0;if(2==PAGSStatus||3==PAGSStatus||4==PAGSStatus){let obj={isValid:!0,redirectToURL:"operations/performance/gettingstarted"};return obj}},gettingstarted:function(){var pageId=Layout.Page.container;let PAGSStatus=PMSGettingStarted.getGSStatus();1==PAGSStatus?isadmin?window.location.href="#settings/service/performance/generalsettings":window.location.href="#performance/myreview/kra":2==PAGSStatus?(pageId.html(""),Layout.Page.pageContWrapper.find(".zpl_iwrprlft").remove(),pageId.append(PMSGettingStarted.gettingStartedHtml()),PMSGettingStarted.setGettingStartedEvent()):3!=PAGSStatus&&4!=PAGSStatus||PMSGettingStarted.gettingStartedInitAction(PAGSStatus)},gettingStartedHtml:function(){return'<div class="zpl_container"> <div class="zpl_iwrpr"> <div class="zpl_iwrprrgt"> <div class="zpl_act"> <div class="zpl_mdlget"> <div class="zpl_mdlgetlft"> <div class="zpl_mdlgetlfthdr"> <div class="d-flexclm8"> <h1>'+ZPI18N.getString("zp.pa.paservice")+"</h1> <p>"+ZPI18N.getString("zp.pa.gettingstarted.performanedescription")+'</p> </div> </div> <div class="zpl_mdlgetlftimg"> <img src="'+ZPeople.getResourceURL(hrImageUrl+"pms_gettingstarted.png")+'" style=""> </div> </div> <div class="zpl_mdlgetrgt"> <div class="zpl_mdlgetcrd"> <div id="pagspage1" class="zpl_mdlgetcrdlst"> <div class="zpl_mdlgetcrdhdr"> <div class="bxcard-hdrlft"> <h5>'+ZPI18N.getString("zp.pa.gettingstarted.availablemetrics")+"</h5> <p>"+ZPI18N.getString("zp.pa.gettingstarted.reviewmethoddescription")+'</p> </div> </div> <div class="zpl_mdlgetcrdcnt"> <div class="zpl_crdlst"> <div class="zpl_catlst"> <span class="PI_kra icn zpl_seclr1"></span> <div> <h5>'+ZPI18N.getString("zp.pa.ketresultarea")+"</h5> <p>"+ZPI18N.getString("zp.pa.gettingstarted.kradescription")+'</p> </div> </div> <div class="zpl_catlst"> <span class="PI_goals icn zpl_seclr2"></span> <div> <h5>'+ZPI18N.getString("zp.goals")+"</h5> <p>"+ZPI18N.getString("zp.pa.gettingstarted.goalsdescription")+'</p> </div> </div> <div class="zpl_catlst"> <span class="PI_objective icn zpl_seclr3"></span> <div> <h5>'+ZPI18N.getString("zp.skillset")+"</h5> <p>"+ZPI18N.getString("zp.pa.gettingstarted.skillsetdescription")+'</p> </div> </div> <div class="zpl_catlst"> <span class="PI_competency icn zpl_seclr4"></span> <div> <h5>'+ZPI18N.getString("zp.competency")+"</h5> <p>"+ZPI18N.getString("zp.pa.gettingstarted.competencydescription")+' </p> </div> </div> </div> </div> <div class="zpl_mdlgetcrdfdr"> <div class="zpl_mdlgetcrdfdrlft"> <span>'+ZPI18N.getString("zp.pa.gettingstarted.step",new Array("1","3"))+'</span> </div> <div class="zpl_mdlgetcrdfdrcnt"> </div> <div class="zpl_mdlgetcrdfdrrgt"> <i class="PI_abtm zpl_lftarw zpl_inact" pagenumber="1"></i> <i class="PI_abtm zpl_rgtarw" pagenumber="1"></i> </div> </div> </div> <div id="pagspage2" data-tab="" class="zpl_mdlgetcrdlst zpl_DNI"> <div class="zpl_mdlgetcrdhdr"> <div class="bxcard-hdrlft"> <h5>'+ZPI18N.getString("zp.pa.gettingstarted.reviewtype")+"</h5> <p>"+ZPI18N.getString("zp.pa.gettingstarted.reviewtypedescription")+'</p> </div> </div> <div class="zpl_mdlgetcrdcnt"> <div class="zpl_crdlst"> <div class="zpl_catlst"> <span class="PI_selfappraisal icn zpl_seclr2"></span> <div> <h5>'+ZPI18N.getString("zp.selfassessment")+"</h5> <p>"+ZPI18N.getString("zp.pa.gettingstarted.selfreviewdescripion")+'</p> </div> </div> <div class="zpl_catlst"> <span class="PI_multi-rater-review icn zpl_seclr4"></span> <div> <h5>'+ZPI18N.getString("zp.formmultiraterreview")+"</h5> <p>"+ZPI18N.getString("zp.pa.gettingstarted.mrdescripion")+'</p> </div> </div> <div class="zpl_catlst"> <span class="PI_manager-review icn zpl_seclr1"></span> <div> <h5>'+ZPI18N.getString("zp.reviewerreview")+"</h5> <p>"+ZPI18N.getString("zp.pa.gettingstarted.reviewdescripion")+'</p> </div> </div> <div class="zpl_catlst"> <span class="PI_continuos-review  icn zpl_seclr3"></span> <div> <h5>'+ZPI18N.getString("zp.continuousreview")+"</h5> <p>"+ZPI18N.getString("zp.pa.gettingstarted.continuousreviewdescription")+' </p> </div> </div> </div> </div> <div class="zpl_mdlgetcrdfdr"> <div class="zpl_mdlgetcrdfdrlft"> <span>'+ZPI18N.getString("zp.pa.gettingstarted.step",new Array("2","3"))+'</span> </div> <div class="zpl_mdlgetcrdfdrcnt"> </div> <div class="zpl_mdlgetcrdfdrrgt"> <i class="PI_abtm zpl_lftarw" pagenumber="2"></i> <i class="PI_abtm zpl_rgtarw" pagenumber="2"></i> </div> </div> </div> <div id="pagspage3" data-tab="" class="zpl_mdlgetcrdlst zpl_DNI"> <div class="zpl_mdlgetcrdhdr"> <div class="bxcard-hdrlft"> <h5>'+ZPI18N.getString("zp.pa.gettingstarted.howtouse")+'</h5> <p></p> </div> </div> <div class="zpl_mdlgetcrdcnt"> <div class="zpl_ovrvbox grnbdr1"> <h5>'+ZPI18N.getString("zp.pa.gettingstarted.card1title")+"</h5> <p>"+ZPI18N.getString("zp.pa.gettingstarted.card1description")+'</p> </div> <div class="zpl_ovrvbox ylwbdr"> <h5>'+ZPI18N.getString("zp.pa.gettingstarted.card2title")+"</h5> <p>"+ZPI18N.getString("zp.pa.gettingstarted.card2description")+'</p> </div> <div class="zpl_ovrvbox orgbdr"> <h5>'+ZPI18N.getString("zp.pa.gettingstarted.card3title")+"</h5> <p>"+ZPI18N.getString("zp.pa.gettingstarted.card3description")+'</p> </div> <div class="zpl_ovrvbox redbdr1"> <h5>'+ZPI18N.getString("zp.pa.gettingstarted.card4title")+"</h5> <p>"+ZPI18N.getString("zp.pa.gettingstarted.card4description")+'</p> </div> <div class="zpl_ovrvbox blubdr"> <h5>'+ZPI18N.getString("zp.pa.gettingstarted.card5title")+"</h5> <p>"+ZPI18N.getString("zp.pa.gettingstarted.card5description")+'</p> </div> </div> <div class="zpl_mdlgetcrdfdr"> <div class="zpl_mdlgetcrdfdrlft"> <span>'+ZPI18N.getString("zp.pa.gettingstarted.step",new Array("3","3"))+'</span> </div> <div class="zpl_mdlgetcrdfdrcnt"> <button class="zlabel zlabel--blue zlabel--medium" id="gettingStarted">'+ZPI18N.getString("zp.gettingStarted")+'</button> </div> <div class="zpl_mdlgetcrdfdrrgt"> <i class="PI_abtm zpl_lftarw " pagenumber="3"></i> <i class="PI_abtm zpl_rgtarw zpl_inact" pagenumber="3"></i> </div> </div> </div> </div> </div> </div> </div> </div> </div> </div>'},setGettingStartedEvent:function(){let pageId=Layout.Page.container;pageId.find(".zpl_rgtarw").off("click").on("click",function(){let currPage=parseInt($(this).attr("pagenumber")),newPage=currPage+1;currPage<3&&(pageId.find("#pagspage"+currPage).addClass("zpl_DNI"),pageId.find("#pagspage"+newPage).removeClass("zpl_DNI"))}),pageId.find(".zpl_lftarw").off("click").on("click",function(){let currPage=parseInt($(this).attr("pagenumber")),newPage=currPage-1;currPage>1&&(pageId.find("#pagspage"+currPage).addClass("zpl_DNI"),pageId.find("#pagspage"+newPage).removeClass("zpl_DNI"))}),pageId.find("#gettingStarted").off("click").on("click",function(){PMSGettingStarted.addmodulesinsetup()})},addmodulesinsetup:function(){let pageId=Layout.Page.container;pageId.find("#gettingStarted").off("click"),pageId.find("#gettingStarted").prop("disabled",!0);var params={mode:"newmodulesinsetup",conreqcsr:csrfToken};$.post("/performanceConfig.zp",params,function(resultData){$.each(resultData,function(index,data){"success"===data.msg&&(window.location.href="#settings/service/performance/generalsettings",location.reload())})})}},ApprovalBottomBanner={apprTableName:null,modalBodyId:null,approvalSettingsDetails:null,resetApprovalBottomBannerDts:function(){ApprovalBottomBanner.apprTableName=null,ApprovalBottomBanner.modalBodyId=null,ApprovalBottomBanner.approvalSettingsDetails=null},setApprovalTabelName:function(tableName){ApprovalBottomBanner.apprTableName=tableName},setApprovalSettingsDetails:function(approvalSettingsDetails){ApprovalBottomBanner.approvalSettingsDetails=approvalSettingsDetails},getApprovalModal:function(){return"P_GoalSheet"===ApprovalBottomBanner.apprTableName?Goals.Approval.goalSheetModal.sliderDiv:"P_ReviewApprovalSheet"===ApprovalBottomBanner.apprTableName?ApprReview.Approval.APPROVALMODAL.sliderDiv:"P_MultiRater_Approval"===ApprovalBottomBanner.apprTableName?MR.Approval.APPROVALMODAL.sliderDiv:"P_Budget_Splitup"===ApprovalBottomBanner.apprTableName?BudgetReviewSheet.BRS_MODAL.sliderDiv:void 0},getFooterHtml:function(approvalStatus,isConstructFooter){let htm_="";return isConstructFooter&&void 0!=approvalStatus&&"-1"==approvalStatus?(htm_+='<div class="d-flexC flexclmcap12 zpl_DNI" id="zp_approvereject_box"><div><label id="apprCmtLabel">'+ZPI18N.getString("zp.lms.approvals.addComment")+'</label></div><div class="flex-grow"><textarea type="text" rows="4" class="ztextbox" id="zp_approval_comment" placeholder="'+ZPI18N.getString("zp.writeacomment")+'"></textarea></div></div>',htm_+='<div class="zpl_btnsplt">',"P_Budget_Splitup"===ApprovalBottomBanner.apprTableName&&(htm_+='<div class="zpl_lftpgn">'),htm_+='<div id="createtsbutton">',htm_+='<div id="approvetsbutton"><button id="zp_appproval_approve_btn" name="approvalTypeBtn" class="zlabel zlabel--blue zlabel--medium" approvaltype="1">'+ZPI18N.getString("zp.approve")+"</button>",htm_+='<button id="zp_appproval_reject_btn" name="approvalTypeBtn" class="zlabel zlabel--red zlabel--medium" approvaltype="0">'+ZPI18N.getString("zp.reject")+"</button>",htm_+='<button name="approvalTypeBtn" class="zlabel zlabel--outline zlabel--medium" id="zp_appproval_close_btn" type="button">'+ZPI18N.getString("zp.close")+"</button>",htm_+='<button name="confirmTypeBtn" class="zlabel zlabel--blue zlabel--medium zpl_DNI" id="zp_appproval_confirm_btn">'+ZPI18N.getString("zp.confirm")+"</button>",htm_+='<button name="confirmTypeBtn" class="zlabel zlabel--outline zlabel--medium zpl_DNI" id="zp_appproval_cancel_btn">'+ZPI18N.getString("zp.cancel")+"</button>",htm_+="</div>","P_Budget_Splitup"===ApprovalBottomBanner.apprTableName&&(htm_+="</div>"),htm_+="</div>"):(htm_+='<div class="zpl_btnsplt">',"P_Budget_Splitup"===ApprovalBottomBanner.apprTableName&&(htm_+='<div class="zpl_lftpgn">'),htm_+='<div id="createtsbutton">',htm_+='<button name="approvalTypeBtn" class="zlabel zlabel--outline zlabel--medium" type="button" id="zp_appproval_close_btn">'+ZPI18N.getString("zp.close")+"</button>",htm_+="</div>","P_Budget_Splitup"===ApprovalBottomBanner.apprTableName&&(htm_+="</div>"),htm_+="</div>"),htm_},setFooterCallBack:function(){let pageId=ApprovalBottomBanner.getApprovalModal();pageId.find("#zp_appproval_approve_btn").unbind(),pageId.find("#zp_appproval_approve_btn").on("click",function(){ApprovalBottomBanner.showHideApproveRejCommentBox(this)}),pageId.find("#zp_appproval_reject_btn").unbind(),pageId.find("#zp_appproval_reject_btn").on("click",function(){ApprovalBottomBanner.showHideApproveRejCommentBox(this)}),pageId.find("#zp_appproval_close_btn").unbind(),pageId.find("#zp_appproval_close_btn").on("click",function(){ApprovalBottomBanner.setApprovalCloseCallBack()}),pageId.find("#zp_appproval_confirm_btn").unbind(),pageId.find("#zp_appproval_confirm_btn").on("click",function(){ApprovalBottomBanner.approveRejectConfirm()}),pageId.find("#zp_appproval_cancel_btn").unbind(),pageId.find("#zp_appproval_cancel_btn").on("click",function(){ApprovalBottomBanner.showHideApproveRejCommentBox(this,!0)})},setApprovalCloseCallBack:function(){return"P_GoalSheet"===ApprovalBottomBanner.apprTableName?Goals.Approval.goalSheetModal.close():"P_ReviewApprovalSheet"===ApprovalBottomBanner.apprTableName?ApprReview.Approval.APPROVALMODAL.close():"P_MultiRater_Approval"===ApprovalBottomBanner.apprTableName?MR.Approval.onClickCloseModal():"P_Budget_Splitup"===ApprovalBottomBanner.apprTableName?BudgetReviewSheet.BRS_MODAL.close():void 0},showHideApproveRejCommentBox:function(ele,hideCommentBox){let pageId=ApprovalBottomBanner.getApprovalModal();if(pageId.find("#zp_approval_comment").val(""),ApprovalBottomBanner.removeErrMsg(),hideCommentBox)pageId.find("#zp_approvereject_box").addClass("zpl_DNI"),pageId.find('[name="approvalTypeBtn"]').removeClass("zpl_DNI"),pageId.find('[name="confirmTypeBtn"]').addClass("zpl_DNI");else{pageId.find("#zp_approvereject_box").removeClass("zpl_DNI"),pageId.find('[name="approvalTypeBtn"]').addClass("zpl_DNI"),pageId.find('[name="confirmTypeBtn"]').removeClass("zpl_DNI");var type=$(ele).attr("approvaltype");ApprovalBottomBanner.isCmtManidatory(type)?pageId.find("#apprCmtLabel").addClass("zpl_mtry"):pageId.find("#apprCmtLabel").removeClass("zpl_mtry"),"0"==type?(pageId.find("#zp_appproval_confirm_btn").addClass("zlabel--red").removeClass("zlabel--blue"),pageId.find("#zp_appproval_confirm_btn").attr("approvaltype",0)):(pageId.find("#zp_appproval_confirm_btn").removeClass("zlabel--red").addClass("zlabel--blue"),"1"==type?pageId.find("#zp_appproval_confirm_btn").attr("approvaltype",1):"2"==type&&pageId.find("#zp_appproval_confirm_btn").attr("approvaltype",2))}},removeErrMsg:function(){let pageId=ApprovalBottomBanner.getApprovalModal();pageId.find("#zp_approvereject_box #zp_approval_comment").removeClass("ztextbox__error"),pageId.find("#sliFootDiv #error_message").remove()},isCmtManidatory:function(apprType){let isCmtMandatory=!1;return void 0!==ApprovalBottomBanner.approvalSettingsDetails&&null!==ApprovalBottomBanner.approvalSettingsDetails&&("1"===apprType&&void 0!==ApprovalBottomBanner.approvalSettingsDetails.isApprMandatory&&ApprovalBottomBanner.approvalSettingsDetails.isApprMandatory||"0"===apprType&&void 0!==ApprovalBottomBanner.approvalSettingsDetails.isRejMandatory&&ApprovalBottomBanner.approvalSettingsDetails.isRejMandatory)&&(isCmtMandatory=!0),isCmtMandatory},validateApprReject:function(apprType,comment){let pageId=ApprovalBottomBanner.getApprovalModal(),isValid=!0;return ApprovalBottomBanner.isCmtManidatory(apprType)&&""===comment&&comment.length<=0&&(pageId.find("#zp_approvereject_box #zp_approval_comment").addClass("ztextbox__error"),pageId.find("#zp_approvereject_box #zp_approval_comment").parent().append('<span id="error_message" class="ztextbox--error__label">'+ZPI18N.getString("zp.apprCmtMandatoryErr")+"</span>"),isValid=!1),isValid},approveRejectConfirm:function(){let pageId=ApprovalBottomBanner.getApprovalModal();var modalFooter=pageId.find(".zpl_mfoter"),status=modalFooter.find("#zp_appproval_confirm_btn").attr("approvaltype"),comment=modalFooter.find("#zp_approval_comment").val().trim(),approvalType=0==status?"0":"1";if(ApprovalBottomBanner.removeErrMsg(),!ApprovalBottomBanner.validateApprReject(approvalType,comment))return!1;var data=pageId.find(ApprovalBottomBanner.modalBodyId).data(),approveRejObj=new ApproveReject(data.appParam,data.layoutParam,approvalType,comment,!1);return"P_GoalSheet"===ApprovalBottomBanner.apprTableName?Goals.Approval.handleGoalApproval(approveRejObj,comment):"P_ReviewApprovalSheet"===ApprovalBottomBanner.apprTableName?ApprReview.Approval.appRejReviewApproval(approveRejObj,comment):"P_MultiRater_Approval"===ApprovalBottomBanner.apprTableName?MR.Approval.approveRejectSubmit(approveRejObj):"P_Budget_Splitup"===ApprovalBottomBanner.apprTableName?BudgetReviewSheet.approveRejectReviewSheet(approveRejObj):void 0},enableDisableButton:function(isDisable){let pageId=ApprovalBottomBanner.getApprovalModal();pageId.find("#zp_appproval_approve_btn").prop("disabled",isDisable),pageId.find("#zp_appproval_reject_btn").prop("disabled",isDisable),pageId.find("#zp_appproval_close_btn").prop("disabled",isDisable),pageId.find("#zp_appproval_confirm_btn").prop("disabled",isDisable),pageId.find("#zp_appproval_cancel_btn").prop("disabled",isDisable)}},PATeamTabHandler={teamMembersViewpage:function(obj,recId,configId,appraisemode,fromBudgetView,fromReviewLayout){Goals.Job.editjobPermission=null,Goals.Job.addjobPermission=null,Goals.Util.goalsNonAdminAccess=!1;var valob="";try{valob="nonappraisee"===appraisemode?"#performance-myteam-peersview"==settingsPage.tabId?PV.nonappraisee.find(item=>item.recordId===recId):$(obj).attr("data-dataObj"):$(obj).parent().parent().parent().data().dataval,AppraisalConfig.selUserdata=valob,Layout.refreshsubtab=!0,void 0!==configId&&""!==configId||(configId=-1);AppraisalConfig.act_configId=configId,AppraisalConfig.selectUsererecno=recId,AppraisalConfig.selectconfigId=configId;var fromBudgetViewB=void 0!==fromBudgetView&&(fromBudgetView||"true"===fromBudgetView);isPAdmin||appdataadmin;if(appdataadmin&&AppraisalConfig.IS_OPR_ADMIN,isSanmarUI)isSanmarUI?PATeamTabHandler.constructsubtabs(recId,configId,!1,!1,!1,!0,fromReviewLayout):PATeamTabHandler.constructsubtabs(recId,configId,!1,!1,!0,fromBudgetViewB,fromReviewLayout);else{var params={mode:"ismyhigherlevel",selUsr:recId,configId:configId,conreqcsr:csrfToken};$.post("/performanceConfig.zp",params,function(resultData){AppraisalConfig.PERMISSIONLEVELDATA=resultData,AppraisalConfig.isSkillSetDeptHead=resultData.isSkillSetDeptHead,AppraisalConfig.isDeptHead=resultData.isDeptHead,void 0!=resultData.isManager&&!0===resultData.isManager?PATeamTabHandler.constructsubtabs(recId,configId,!1,!1,!1):void 0!=resultData.isGoalsaccess&&!0===resultData.isGoalsaccess?PATeamTabHandler.constructsubtabs(recId,configId,!1,!0,!1):void 0!=resultData.isReviewer&&!0===resultData.isReviewer?PATeamTabHandler.constructsubtabs(recId,configId,!1,!1,!0,fromBudgetViewB,fromReviewLayout):PATeamTabHandler.constructsubtabs(recId,configId,AppraisalConfig.isFeedback,!1,!1,fromReviewLayout)})}}catch(e){}},constructsubtabs:function(recId,configId,onlyfeedbacktab,goalsnonAdmin,isReviewer,fromBudgetView,fromReviewLayout){ZPTabs.refreshTL=!0;let sTabNme="myteamuser";if(-1!=configId&&(sTabNme="appraisaluser"),fromBudgetView&&-1!=configId)window.location.href="#performance/appraisaluser/review-user:"+recId+"/configId:"+configId;else if(goalsnonAdmin&&!onlyfeedbacktab&&AppraisalConfig.isGoals)if(AppraisalConfig.isSkillSetDeptHead&&AppraisalConfig.isDeptHead&&AppraisalConfig.isSkillSet)if(fromReviewLayout){let url=window.location.href.split("#")[0]+"#performance/"+sTabNme+"/skillset-user:"+recId+"/configId:"+configId;window.open(url,"_blank")}else window.location.href="#performance/"+sTabNme+"/skillset-user:"+recId+"/configId:"+configId;else window.location.href="#performance/"+sTabNme+"/goals-user:"+recId+"/configId:"+configId;else if(goalsnonAdmin&&!onlyfeedbacktab&&AppraisalConfig.isKraGoals)if(fromReviewLayout){let url=window.location.href.split("#")[0]+"#performance/"+sTabNme+"/kra-user:"+recId+"/configId:"+configId;window.open(url,"_blank")}else window.location.href="#performance/"+sTabNme+"/kra-user:"+recId+"/configId:"+configId;else if(-1!=configId&&isReviewer&&void 0===fromReviewLayout)window.location.href="#performance/"+sTabNme+"/review-user:"+recId+"/configId:"+configId;else if(!goalsnonAdmin||onlyfeedbacktab||AppraisalConfig.isGoals)if(onlyfeedbacktab||1!=AppraisalConfig.isKra&&1!=AppraisalConfig.isKraGoals)if(onlyfeedbacktab||1!=AppraisalConfig.isCompetency)if(onlyfeedbacktab||1!=AppraisalConfig.isSkillset||0!=AppraisalConfig.isKra||!1!==AppraisalConfig.isKraGoals)if(onlyfeedbacktab||0!=AppraisalConfig.isSkillset||0!=AppraisalConfig.isKra||!1!==AppraisalConfig.isKraGoals||1!=AppraisalConfig.isGoals)if(0==AppraisalConfig.isSkillset&&0==AppraisalConfig.isGoals&&0==AppraisalConfig.isKra&&!1===AppraisalConfig.isKraGoals&&1==AppraisalConfig.isFeedback||0==AppraisalConfig.isSkillset&&0==AppraisalConfig.isGoals&&!1===AppraisalConfig.isKra&&0==AppraisalConfig.isselfappraisal&&0==AppraisalConfig.isSummary||onlyfeedbacktab)if(AppraisalConfig.isSkillSetDeptHead&&AppraisalConfig.isDeptHead&&AppraisalConfig.isSkillSet)if(fromReviewLayout){let url=window.location.href.split("#")[0]+"#performance/"+sTabNme+"/skillset-user:"+recId+"/configId:"+configId;window.open(url,"_blank")}else window.location.href="#performance/"+sTabNme+"/skillset-user:"+recId+"/configId:"+configId;else if(fromReviewLayout){let url=window.location.href.split("#")[0]+"#performance/"+sTabNme+"/feedback-user:"+recId+"/configId:"+configId;window.open(url,"_blank")}else window.location.href="#performance/"+sTabNme+"/feedback-user:"+recId+"/configId:"+configId;else if(onlyfeedbacktab||0!=AppraisalConfig.isSkillset||0!=AppraisalConfig.isGoals||0!=AppraisalConfig.isFeedback||0!=AppraisalConfig.isKra||!1!==AppraisalConfig.isKraGoals||1!=AppraisalConfig.isSummary){if(!onlyfeedbacktab&&0==AppraisalConfig.isSkillset&&0==AppraisalConfig.isGoals&&0==AppraisalConfig.isFeedback&&0==AppraisalConfig.isKra&&!1===AppraisalConfig.isKraGoals&&0==AppraisalConfig.isSummary&&!0===AppraisalConfig.isselfappraisal)if(fromReviewLayout){let url=window.location.href.split("#")[0]+"#performance/"+sTabNme+"/selfappraisal-user:"+recId+"/configId:"+configId;window.open(url,"_blank")}else window.location.href="#performance/"+sTabNme+"/selfappraisal-user:"+recId+"/configId:"+configId}else if(fromReviewLayout){let url=window.location.href.split("#")[0]+"#performance/"+sTabNme+"/summary-user:"+recId+"/configId:"+configId;window.open(url,"_blank")}else window.location.href="#performance/"+sTabNme+"/summary-user:"+recId+"/configId:"+configId;else window.location.href="#performance/"+sTabNme+"/goals-user:"+recId+"/configId:"+configId;else if(fromReviewLayout){let url=window.location.href.split("#")[0]+"#performance/"+sTabNme+"/skillset-user:"+recId+"/configId:"+configId;window.open(url,"_blank")}else window.location.href="#performance/"+sTabNme+"/skillset-user:"+recId+"/configId:"+configId;else if(fromReviewLayout){let url=window.location.href.split("#")[0]+"#performance/"+sTabNme+"/competency-user:"+recId+"/configId:"+configId;window.open(url,"_blank")}else window.location.href="#performance/"+sTabNme+"/competency-user:"+recId+"/configId:"+configId;else if(fromReviewLayout){let url=window.location.href.split("#")[0]+"#performance/"+sTabNme+"/kra-user:"+recId+"/configId:"+configId;window.open(url,"_blank")}else window.location.href="#performance/"+sTabNme+"/kra-user:"+recId+"/configId:"+configId;else if(fromReviewLayout){let url=window.location.href.split("#")[0]+"#performance/"+sTabNme+"/feedback-user:"+recId+"/configId:"+configId;window.open(url,"_blank")}else window.location.href="#performance/"+sTabNme+"/feedback-user:"+recId+"/configId:"+configId;AppraisalConfig.selectUsererecno=erecno,CompetencyMyView.isCmpPopulateChk=null,kra.util.isKraPopulateChk=null},getIsActiveUser:function(param1){var isactiveUser=!0;return $.ajax({type:"POST",async:!1,url:"/performanceConfig.zp",data:{mode:"isActiveuser",conreqcsr:csrfToken,userId:param1},success:function(data){void 0!=data.code&&"Deleted"===data.code&&(isactiveUser=!1)}}),isactiveUser},MyTeamhandleCallback:function(){if(PMSGettingStarted.gettingStartedInit(PMSGettingStarted.MODULE_PAGE)){var urlsplit=Layout.Page.hash.split("/"),idsplit=urlsplit[2].split(":"),json={"performance/myteamuser/kra":"kralisting_page","performance/myteamuser/goals":"goalslisting_Page","performance/myteamuser/competency":"mydata_competence","performance/myteamuser/skillset":"skillsetScore_Page","performance/myteamuser/feedback":"feedback_page","performance/myteamuser/summary":"hrnotesList_page","performance/appraisaluser/kra":"kralisting_page","performance/appraisaluser/goals":"goalslisting_Page","performance/appraisaluser/competency":"mydata_competence","performance/appraisaluser/skillset":"skillsetScore_Page","performance/appraisaluser/feedback":"feedback_page","performance/appraisaluser/summary":"hrnotesList_page","performance/appraisaluser/selfappraisal":"selfapp_cont","performance/appraisaluser/choosemultirater":"pa_choose_multirater_page"};let configID=urlsplit[3].split(":")[1];Layout.Page.currentmode="-1"!==configID?"performance/appraisaluser/"+idsplit[0].split("-")[0]:"performance/myteamuser/"+idsplit[0].split("-")[0];urlsplit[2].split(":");var param1=urlsplit[2].split(":")[1],isactiveUser=!0,dataVisible=!0;AppraisalConfig.selectUsererecno=urlsplit[2].split(":")[1],AppraisalConfig.selectconfigId=urlsplit[3].split(":")[1],urlsplit.length>4&&-1!==urlsplit[2].indexOf("review-user")&&-1!==urlsplit[4].indexOf("recordId")&&(null===AppraisalConfig.REVIEW_DATA||void 0==AppraisalConfig.REVIEW_DATA.formMode)?(void 0===AppraisalConfig.formUtil.performanceappFormDtl.formId&&AppraisalConfig.formUtil.getformDetails("appraisal"),AppraisalConfig.REVIEW_DATA={},AppraisalConfig.REVIEW_DATA.modeVal="appraisal",AppraisalConfig.REVIEW_DATA.appraisalId=urlsplit[4].split(":")[1],AppraisalConfig.selectUsererecno=urlsplit[2].split(":")[1],AppraisalConfig.REVIEW_DATA.configId=AppraisalConfig.selectconfigId=urlsplit[3].split(":")[1],param={mode:"reviewPageDetails",configId:AppraisalConfig.REVIEW_DATA.configId,recId:AppraisalConfig.REVIEW_DATA.appraisalId,selUserId:AppraisalConfig.selectUsererecno,conreqcsr:csrfToken},$.ajax({type:"POST",async:!1,url:"/performanceConfig.zp",data:param,success:function(data){void 0!==data.code&&"Deleted"===data.code?isactiveUser=!1:void 0===data.code&&"success"===data.msg?(AppraisalConfig.REVIEW_DATA.formMode="-3"!==data.status&&"0"!==data.status&&"-4"!==data.status||"1"!==data.isActive||"5"===data.cycleStatus?"VIEW":"EDIT","EDIT"===AppraisalConfig.REVIEW_DATA.formMode?AppraisalConfig.REVIEW_DATA.userErecno=data.reviewId:AppraisalConfig.REVIEW_DATA.raterId=data.reviewId,void 0!=data.isReviewQuestionEnabled?AppraisalConfig.isReviewQuestionEnabledConfig=data.isReviewQuestionEnabled:AppraisalConfig.isReviewQuestionEnabledConfig=!1):dataVisible=!1}})):isactiveUser=PATeamTabHandler.getIsActiveUser(param1),isactiveUser?urlsplit.length>4&&-1!==urlsplit[2].indexOf("review-user")&&-1!==urlsplit[4].indexOf("recordId")&&dataVisible?ApprReview.Util.showReviewEditOrViewPage():PATeamTabHandler.handleCallback(urlsplit[2]+"/"+urlsplit[3]):void 0!=json[Layout.Page.currentmode]&&Layout.Page.container.find("#"+json[Layout.Page.currentmode]).html(AppraisalConfig.PERMDENIED_HTML)}},OprHandleCallback:function(){if(PMSGettingStarted.gettingStartedInit(PMSGettingStarted.OPERATION_PAGE)){void 0!==AppraisalConfig.InitResult&&0!=Object.keys(AppraisalConfig.InitResult).length||AppraisalConfig.fetchInit();var urlsplit=Layout.Page.hash.split("/"),idsplit=urlsplit[3].split(":"),json={"operations/performance/user/kra":"kralisting_page","operations/performance/user/goals":"goalslisting_Page","operations/performance/user/competency":"mydata_competence","operations/performance/user/skillset":"skillsetScore_Page","operations/performance/user/feedback":"feedback_page","operations/performance/user/summary":"hrnotesList_page","operations/performance/user/selfappraisal":"selfapp_cont","operations/performance/user/choosemultirater":"pa_choose_multirater_page"};"-1"!==urlsplit[4].split(":")[1]&&-1==Layout.Page.hash.indexOf("operations")?Layout.Page.currentmode="performance/appraisaluser/"+idsplit[0].split("-")[0]:Layout.Page.currentmode="operations/performance/user/"+idsplit[0].split("-")[0];urlsplit[3].split(":");var param1=urlsplit[3].split(":")[1],isactiveUser=!0,dataVisible=!0;urlsplit.length>4&&-1!==urlsplit[3].indexOf("review-user")&&-1!==urlsplit[5].indexOf("recordId")&&(null===AppraisalConfig.REVIEW_DATA||void 0==AppraisalConfig.REVIEW_DATA.formMode)?(void 0===AppraisalConfig.formUtil.performanceappFormDtl.formId&&AppraisalConfig.formUtil.getformDetails("appraisal"),AppraisalConfig.REVIEW_DATA={},AppraisalConfig.REVIEW_DATA.modeVal="appraisal",AppraisalConfig.REVIEW_DATA.appraisalId=urlsplit[5].split(":")[1],AppraisalConfig.selectUsererecno=urlsplit[3].split(":")[1],AppraisalConfig.REVIEW_DATA.configId=AppraisalConfig.selectconfigId=urlsplit[4].split(":")[1],param={mode:"reviewPageDetails",configId:AppraisalConfig.REVIEW_DATA.configId,recId:AppraisalConfig.REVIEW_DATA.appraisalId,selUserId:AppraisalConfig.selectUsererecno,conreqcsr:csrfToken},$.ajax({type:"POST",async:!1,url:"/performanceConfig.zp",data:param,success:function(data){void 0!==data.code&&"Deleted"===data.code?isactiveUser=!1:void 0===data.code&&"success"===data.msg?(AppraisalConfig.REVIEW_DATA.formMode="-3"!==data.status&&"0"!==data.status&&"-4"!==data.status||"1"!==data.isActive||"5"===data.cycleStatus?"VIEW":"EDIT","EDIT"===AppraisalConfig.REVIEW_DATA.formMode?AppraisalConfig.REVIEW_DATA.userErecno=data.reviewId:AppraisalConfig.REVIEW_DATA.raterId=data.reviewId,void 0!=data.isReviewQuestionEnabled?AppraisalConfig.isReviewQuestionEnabledConfig=data.isReviewQuestionEnabled:AppraisalConfig.isReviewQuestionEnabledConfig=!1):dataVisible=!1}})):isactiveUser=PATeamTabHandler.getIsActiveUser(param1),isactiveUser?urlsplit.length>4&&-1!==urlsplit[3].indexOf("review-user")&&-1!==urlsplit[5].indexOf("recordId")&&dataVisible?ApprReview.Util.showReviewEditOrViewPage():PATeamTabHandler.handleCallback(urlsplit[3]+"/"+urlsplit[4]):void 0!=json[Layout.Page.currentmode]&&Layout.Page.container.find("#"+json[Layout.Page.currentmode]).html(AppraisalConfig.PERMDENIED_HTML)}},OpAppraisalUserrHandleCallback:function(){if(PMSGettingStarted.gettingStartedInit(PMSGettingStarted.OPERATION_PAGE)){var urlsplit=Layout.Page.hash.split("/"),idsplit=urlsplit[3].split(":");$('[taburl="#operations/performance/cycle"]').length>0&&($('[taburl="#operations/performance/cycle"]').hasClass("zpl_act")||$('[taburl="#operations/performance/cycle"]').addClass("zpl_act"));var json={"operations/performance/oprappraisaluser/choosemultirater":"pa_choose_multirater_page","operations/performance/oprappraisaluser/selfappraisal":"selfapp_cont"};let configID=urlsplit[4].split(":")[1];Layout.Page.currentmode="-1"!==configID?"operations/performance/oprappraisaluser/"+idsplit[0].split("-")[0]:"operations/performance/user/"+idsplit[0].split("-")[0];urlsplit[3].split(":");var param1=urlsplit[3].split(":")[1];AppraisalConfig.selectUsererecno=urlsplit[3].split(":")[1],AppraisalConfig.selectconfigId=urlsplit[4].split(":")[1],PATeamTabHandler.getIsActiveUser(param1)?PATeamTabHandler.handleCallback(urlsplit[3]+"/"+urlsplit[4]):void 0!=json[Layout.Page.currentmode]&&Layout.Page.container.find("#"+json[Layout.Page.currentmode]).html(AppraisalConfig.PERMDENIED_HTML)}},OpAppraisalReviewUserrHandleCallback:function(){if(PMSGettingStarted.gettingStartedInit(PMSGettingStarted.OPERATION_PAGE)){var urlsplit=Layout.Page.hash.split("/"),idsplit=urlsplit[2].split(":");$('[taburl="#operations/performance/cycle"]').length>0&&($('[taburl="#operations/performance/cycle"]').hasClass("zpl_act")||$('[taburl="#operations/performance/cycle"]').addClass("zpl_act"));var json={"operations/performance/cycle":"reviewerheader","operations/performance/oprappraisaluser/choosemultirater":"pa_choose_multirater_page","operations/performance/oprappraisaluser/selfappraisal":"selfapp_cont"};let configID=urlsplit[4].split(":")[1];Layout.Page.currentmode="-1"!==configID?"operations/performance/"+idsplit[0].split("-")[0]:"operations/performance/user/"+idsplit[0].split("-")[0];urlsplit[2].split(":");var param1=urlsplit[2].split(":")[1],isactiveUser=!0,dataVisible=!0;AppraisalConfig.selectUsererecno=urlsplit[2].split(":")[1],AppraisalConfig.selectconfigId=urlsplit[3].split(":")[1],5!=urlsplit.length||-1===urlsplit[2].indexOf("reviewuser")||-1===urlsplit[4].indexOf("recordId")||null!==AppraisalConfig.REVIEW_DATA&&void 0!=AppraisalConfig.REVIEW_DATA.formMode?isactiveUser=PATeamTabHandler.getIsActiveUser(param1):(void 0===AppraisalConfig.formUtil.performanceappFormDtl.formId&&AppraisalConfig.formUtil.getformDetails("appraisal"),AppraisalConfig.REVIEW_DATA={},AppraisalConfig.REVIEW_DATA.modeVal="appraisal",AppraisalConfig.REVIEW_DATA.appraisalId=urlsplit[4].split(":")[1],AppraisalConfig.selectUsererecno=urlsplit[2].split(":")[1],AppraisalConfig.REVIEW_DATA.configId=AppraisalConfig.selectconfigId=urlsplit[3].split(":")[1],param={mode:"reviewPageDetails",configId:AppraisalConfig.REVIEW_DATA.configId,recId:AppraisalConfig.REVIEW_DATA.appraisalId,selUserId:AppraisalConfig.selectUsererecno,conreqcsr:csrfToken},$.ajax({type:"POST",async:!1,url:"/performanceConfig.zp",data:param,success:function(data){void 0!==data.code&&"Deleted"===data.code?isactiveUser=!1:void 0===data.code&&"success"===data.msg?(AppraisalConfig.REVIEW_DATA.formMode="-3"!==data.status&&"0"!==data.status&&"-4"!==data.status||"1"!==data.isActive||"5"===data.cycleStatus?"VIEW":"EDIT","EDIT"===AppraisalConfig.REVIEW_DATA.formMode?AppraisalConfig.REVIEW_DATA.userErecno=data.reviewId:AppraisalConfig.REVIEW_DATA.raterId=data.reviewId,void 0!=data.isReviewQuestionEnabled?AppraisalConfig.isReviewQuestionEnabledConfig=data.isReviewQuestionEnabled:AppraisalConfig.isReviewQuestionEnabledConfig=!1):dataVisible=!1}})),isactiveUser?5==urlsplit.length&&-1!==urlsplit[2].indexOf("reviewuser")&&-1!==urlsplit[4].indexOf("recordId")&&dataVisible?ApprReview.Util.showReviewEditOrViewPage():PATeamTabHandler.handleCallback(urlsplit[3]+"/"+urlsplit[4]):void 0!=json[Layout.Page.currentmode]&&Layout.Page.container.find("#"+json[Layout.Page.currentmode]).html(AppraisalConfig.PERMDENIED_HTML)}},handleCallback:function(query){var param1;if(void 0!==query){var queryele=query.split("/");param1=queryele[0].split(":")[1],kra.util.isKraPopulateChk=null,CompetencyMyView.isCmpPopulateChk=!1,AppraisalConfig.selectUsererecno=param1,AppraisalConfig.selectconfigId=queryele[1].split(":")[1],void 0!=AppraisalConfig.selectconfigId&&""!=AppraisalConfig.selectconfigId||(AppraisalConfig.selectconfigId=-1),Goals.Util.goalsNonAdminAccess=!1}switch(AppraisalConfig.MYTEAM_USERID=param1,AppraisalConfig.selUserdata=param1,Layout.Page.currentmode){case"performance/appraisaluser/skillset":case"operations/performance/user/skillset":case"performance/myteamuser/skillset":$.ajax({type:"POST",async:!1,url:"/performanceConfig.zp",data:{mode:"ismyhigherlevel",configId:AppraisalConfig.selectconfigId,conreqcsr:csrfToken,selUsr:AppraisalConfig.selectUsererecno},success:function(data){AppraisalConfig.PERMISSIONLEVELDATA=data}}),Skillset.sortskillSetScoreflag=!1,Skillset.sortSkillsetWeightFlag=!1,Skillset.sortSkillsetTimeFlag=!0,Skillset.util.getSkillsetScoreList(param1);break;case"performance/appraisaluser/goals":case"operations/performance/user/goals":case"performance/myteamuser/goals":$.ajax({type:"POST",async:!1,url:"/performanceConfig.zp",data:{mode:"ismyhigherlevel",configId:AppraisalConfig.selectconfigId,conreqcsr:csrfToken,selUsr:AppraisalConfig.selectUsererecno},success:function(data){AppraisalConfig.PERMISSIONLEVELDATA=data}}),Goals.Util.getGoalList(param1);break;case"performance/appraisaluser/feedback":case"operations/performance/user/feedback":case"performance/myteamuser/feedback":FeedBack.initPage();break;case"performance/appraisaluser/summary":case"performance/myteam/summary":case"operations/performance/user/summary":case"performance/myteamuser/summary":Summary.getsummaryList(param1);break;case"performance/appraisaluser/selfappraisal":case"operations/performance/oprappraisaluser/selfappraisal":case"operations/performance/user/selfappraisal":case"performance/myteamuser/selfappraisal":SelfAppr.util.getselfAppraisalRec(param1);break;case"performance/appraisaluser/review":case"operations/performance/oprappraisaluser/review":case"performance/myteamuser/review":AppraisalConfig.formUtil.getformDetails("appraisal"),ApprReview.Util.initReview(param1,AppraisalConfig.selectconfigId,"review");break;case"performance/appraisaluser/kra":case"operations/performance/user/kra":case"performance/myteamuser/kra":$.ajax({type:"POST",async:!1,url:"/performanceConfig.zp",data:{mode:"ismyhigherlevel",configId:AppraisalConfig.selectconfigId,conreqcsr:csrfToken,selUsr:AppraisalConfig.selectUsererecno},success:function(data){AppraisalConfig.PERMISSIONLEVELDATA=data}}),kra.util.initKra();break;case"performance/appraisaluser/choosemultirater":case"operations/performance/user/choosemultirater":case"operations/performance/oprappraisaluser/choosemultirater":case"performance/myteamuser/choosemultirater":if(void 0==AppraisalConfig.selectconfigId||""==AppraisalConfig.selectconfigId||-1===AppraisalConfig.selectconfigId)return;MR.ApprSelection.showReviewMRPageForSelUser(AppraisalConfig.selectconfigId,AppraisalConfig.selectUsererecno);break;case"performance/appraisaluser/competency":case"operations/performance/user/competency":case"performance/myteamuser/competency":$.ajax({type:"POST",async:!1,url:"/performanceConfig.zp",data:{mode:"ismyhigherlevel",configId:AppraisalConfig.selectconfigId,conreqcsr:csrfToken,selUsr:AppraisalConfig.selectUsererecno},success:function(data){AppraisalConfig.PERMISSIONLEVELDATA=data}}),CompetencyMyView.init();break;case"performance/myteamuser/reviewhistory":case"operations/performance/user/reviewhistory":case"performance/appraisaluser/reviewhistory":reviewHistory.getpublished_selectedratings()}}},ModulesCount={getUsrModulesCnt:function(obj){let pageId=Layout.Page.container,id=obj.id;"skillRecCnt"==id&&(pageId=Skillset.skillsetContainer),pageId.find("#"+id).removeAttr("onclick"),pageId.find("#"+id).empty().html('<div id="rec_cnt_loading" class="loader-inner line-scale FR ML5"><div></div><div></div><div></div></div>');let params={};"skillRecCnt"==id?params.mode="getskillRecCnt":"kraRecCnt"==id?params.mode="getKraRecCount":"comptCount"==id&&(params.mode="getcompetencyRecCnt"),params.configId=AppraisalConfig.selectconfigId,params.conreqcsr=csrfToken,params.selUser="skillRecCnt"==id?Skillset.skillscoreFor:AppraisalConfig.getSelectedUser(),$.post("/performanceConfig.zp",params,function(resultData){pageId.find("#"+id+"#rec_cnt_loading").remove();let count=0;void 0!=resultData&&(void 0!=resultData.msg&&"permission denied"==resultData.msg?(pageId.find("#"+id+"#rec_cnt_loading").remove(),pageId.find("#"+id).empty().html("#"),pageId.find("#"+id).attr("onclick","ModulesCount.getUsrModulesCnt(this)"),ZPeople.Message.failure(ZPI18N.getString("zp.permdenied1"))):(void 0!=resultData.count&&(count=resultData.count),pageId.find("#"+id).empty().html(count)))}).fail(function(){pageId.find("#"+id+"#rec_cnt_loading").remove(),pageId.find("#"+id).empty().html("#"),pageId.find("#"+id).attr("onclick","ModulesCount.getUsrModulesCnt(this)"),ZPeople.Message.failure(ZPI18N.getString("zp.unabletoprocess"))})}},pmsUtil={get:function(url,data,async,successCallback,failureCallBack,complete,extraParam){pmsUtil.ajaxCall(url,data,"GET",async,successCallback,failureCallBack,complete,extraParam)},post:function(url,data,async,successCallback,failureCallBack,complete,extraParam){pmsUtil.ajaxCall(url,data,"POST",async,successCallback,failureCallBack,complete,extraParam)},delete:function(url,data,async,successCallback,failureCallBack,complete,extraParam){pmsUtil.ajaxCall(url,data,"delete",async,successCallback,failureCallBack,complete,extraParam)},update:function(url,data,async,successCallback,failureCallBack,complete,extraParam){pmsUtil.ajaxCall(url,data,"PUT",async,successCallback,failureCallBack,complete,extraParam)},ajaxCall:function(url,data,type,isAsync,successCallback,failureCallback,complete,extraParam){$.ajax({url:url,data:data,method:type,async:isAsync,success:function(resultData){successCallback(resultData,data,extraParam)},failure:failureCallback,headers:{"X-ZCSRF-TOKEN":csrfParamName+"="+csrfToken},complete:complete})},formSubmit:function(url,data,isAsync,successCallback,failureCallback,complete,extraParam){$.ajax({url:url,data:data,method:"POST",async:isAsync,processData:!1,contentType:!1,success:function(resultData){successCallback(resultData,data,extraParam)},failure:failureCallback,headers:{"X-ZCSRF-TOKEN":csrfParamName+"="+csrfToken},complete:complete})},getSync:function(url,data,async,successCallback,failureCallBack,complete,extraParam){return pmsUtil.ajaxCallSync(url,data,"GET",async,successCallback,failureCallBack,complete,extraParam)},postSync:function(url,data,async,successCallback,failureCallBack,complete,extraParam){return pmsUtil.ajaxCallSync(url,data,"POST",async,successCallback,failureCallBack,complete,extraParam)},deleteSync:function(url,data,async,successCallback,failureCallBack,complete,extraParam){return pmsUtil.ajaxCallSync(url,data,"delete",async,successCallback,failureCallBack,complete,extraParam)},updateSync:function(url,data,async,successCallback,failureCallBack,complete,extraParam){return pmsUtil.ajaxCallSync(url,data,"PUT",async,successCallback,failureCallBack,complete,extraParam)},ajaxCallSync:function(url,data,type,async,successCallback,failureCallBack,complete,extraParam){return new Promise(resolve=>{$.ajax({url:url,data:data,method:type,async:!0,success:function(resultData){successCallback(resultData,data,extraParam),resolve({status:"resolved",resultData:resultData})},error:function(xhr,status,error){void 0!=failureCallBack&&"function"==typeof failureCallBack&&failureCallBack(error),resolve({status:"rejected",error:error})},headers:{"X-ZCSRF-TOKEN":csrfParamName+"="+csrfToken},complete:complete})})}};const pms={validateOldUrl:function(){let redirectUrl="";return"performance/myteam/review"===Layout.Page.hashDtl.hash?Layout.Page.hashDtl.dynParam.hasOwnProperty("recordId")&&""!=Layout.Page.hashDtl.dynParam.recordId&&Layout.Page.hashDtl.dynParam.hasOwnProperty("configId")&&""!=Layout.Page.hashDtl.dynParam.configId&&Layout.Page.hashDtl.dynParam.hasOwnProperty("user")&&""!=Layout.Page.hashDtl.dynParam.user&&(redirectUrl="performance/appraisal/userlisting-reviewuser:"+Layout.Page.hashDtl.dynParam.user+"/configId:"+Layout.Page.hashDtl.dynParam.configId+"/recordId:"+Layout.Page.hashDtl.dynParam.recordId):"performance/myteam/multiratershare"===Layout.Page.hashDtl.hash&&(redirectUrl="performance/appraisal/multiratershare"),{isValid:!0,redirectToURL:redirectUrl}}};PMSESign={ESIGN_CONFIGURATION:null,PA_MAIL_MERGE_LIST:null,ESIGN_SIGNER_LOOKUP_LIST:null,ESIGN_SIGNER_EMAIL_FIELD_LIST:null,APPRAISAL_ESIGN_ENABLED:!1,apprEsignDocumentObj:{},REQUESTLIST_SINDEX:1,ESIGNSTATUS_SINDEX:1,EsignStatusFireScrollObj:{},ESIGN_PREV_SEARCHTEXT:"",ESIGN_CYCLES:null,IS_ESIGN_DEPARTMENTHEAD_ENABLED:!1,RECALL_AVAILABLE_DOCIDS:[],SENT_AVAILABLE_DOCIDS:[],IS_APPRAISAL_LETTER_FEATURE_ENABLED:!1,IS_REVIEW_FEEDBACK_ENABLED:!1,ReviewFeedbackType:null,esignStatus:[ZPI18N.getString("zp.all"),ZPI18N.getString("zp.pending"),ZPI18N.getString("zp.paesign.signed"),ZPI18N.getString("zp.others")],initEsignSetting:function(isFromCycleConfigPage){if(null==PMSESign.ESIGN_CONFIGURATION){let params={mode:"getEsignDetails",conreqcsr:csrfToken};ZPeople.Request.sendAsyncPost("/performanceConfig.zp",params,PMSESign.setEsignConfigValue)}},setEsignConfigValue:function(resultData,params){PMSESign.ESIGN_CONFIGURATION=resultData.esignConfiguration,PMSESign.PA_MAIL_MERGE_LIST=resultData.mailmergetemplateArr,PMSESign.ESIGN_SIGNER_LOOKUP_LIST=resultData.signerArr,PMSESign.ESIGN_SIGNER_EMAIL_FIELD_LIST=resultData.mailFieldArr,PMSESign.APPRAISAL_ESIGN_ENABLED=resultData.isAppraisalEsignEnabled,PMSESign.IS_ESIGN_DEPARTMENTHEAD_ENABLED=resultData.includeDepartmentHead,PMSESign.IS_APPRAISAL_LETTER_FEATURE_ENABLED=resultData.isAppraisalLetterFeatureEnabled},anyEsignConfigurationEnabled:function(){return!(null==PMSESign.ESIGN_CONFIGURATION||!(PMSESign.ESIGN_CONFIGURATION.isAdobeSignEnabled||PMSESign.ESIGN_CONFIGURATION.isDocuSignEnabled||PMSESign.ESIGN_CONFIGURATION.isZohoSignEnabled))},getSignUrl:function(recId){PMSESign.signSlider={};var sliderTab=new Tab("appraisalSign",function(){});PMSESign.signSlider=new sliderModal("Sign appraisal letter",sliderTab),PMSESign.signSlider.ftExtraCls="DN",PMSESign.signSlider.fullPageSize=!0,PMSESign.signSlider._saveToggle=!1,PMSESign.signSlider.setCloseCallback(function(){PMSESign.signSlider.remove(),PMSESign.signSlider={}}),PMSESign.signSlider.construct();var params={mode:"getAppraisalEsignUrl"};params.appraisalSignDocId=recId,params.conreqcsr=csrfToken,$.ajax({type:"POST",async:!1,url:"/performanceConfig.zp",data:params,success:function(data){void 0!=data.filepath&&void 0!=data.apprDocId?PMSESign.appraisalletterpreview(data.apprDocId,null,"AppraisalLetter"):void 0!=data.esignurl?PMSESign.setEsignurl(data):(ZPeople.Message.failure("Error occurred while getting sign URL"),PMSESign.signSlider.close())}})},setEsignurl:function(data){var IFrameComponent=document.createElement("iframe");IFrameComponent.setAttribute("width","100%"),IFrameComponent.setAttribute("height","100%"),IFrameComponent.setAttribute("src",data.esignurl),IFrameComponent.setAttribute("id","Signer"),PMSESign.signSlider.sliderDiv.find("#cardappraisalSign").append(IFrameComponent)},showAppraisalEsignPages:function(configId,status){if(void 0!=PMSESign.apprEsignDocumentObj.remove&&PMSESign.apprEsignDocumentObj.remove(),PMSESign.apprEsignDocumentObj={},0==Object.keys(PMSESign.apprEsignDocumentObj).length){var sliderTab=new Tab("apprEsignSlider",function(){let searchHtm='<div class="zpl_btnmnu"> <div class="actn_ovrly" id="apprDocnftbuttonDiv"><div id="recActDiv"><button id="apprDocntfn_button" style="" class="zlabel zlabel--blue zlabel--outline zlabel--medium" onclick="PMSESign.resendEsignLetter();">'+ZPI18N.getString("zp.paesign.resendappraisalletter")+'</button><button id="apprDocrecall_button" style="" class="zlabel zlabel--red zlabel--outline zlabel--medium" onclick="PMSESign.recallEsignLetterconfirm(\'1\');">'+ZPI18N.getString("zp.paesign.recallappraisalletter")+'</button><span style="padding-left: 10px;"><b id="selectedCountDiv"></b></span></div><i class="PI_cls" id="recordActionClose" onclick="PMSESign.closeSelectPopOver();"></i></div>  <div class="search-cmn"> <i class="PI_lens" title="'+ZPI18N.getString("zp.search")+'"></i><input type="text" class="ztextbox" id="CycleEsignSerachEmployee" placeholder="'+ZPI18N.getString("zp.searchdata")+'" onkeyup="PMSESign.searchEsignEmployees(this,\'Esign_StatusList\')"> <i class="PI_cls" onclick="PMSOperation.clssearch(\'Esign_StatusList\')"></i> </div><div class="zpl_rgt"><i class="zpl_ibg PI_lens" onclick="PMSOperation.opnsearch(\'Esign_StatusList\')" title="'+ZPI18N.getString("zp.search")+'"></i></div></div>';searchHtm+='<div class="zpl_fltrvw" id="esignStatusSelectedFltr"><div><ul class="zpl_fltrvwlst" id="esignStatusSelectedFltrlst"></ul></div><div class="d-flexcap MLauto"><a onclick="PMSESign.resetBreadcrumpFilter();" class="zpl_link">'+ZPI18N.getString("zp.reset")+"</a></div></div>",_htm=searchHtm+'<div class="zpl_crdcnt"><div id="apprEsignSliderDiv" class="zpl_tblres zpl_oxa"></div></div>',$("#cardapprEsignSlider").html(_htm)});PMSESign.apprEsignDocumentObj=new sliderModal(ZPI18N.getString("zp.paesign.appraisalletterstatus"),sliderTab),PMSESign.apprEsignDocumentObj.largeSize=!0,PMSESign.apprEsignDocumentObj._saveToggle=!1,PMSESign.apprEsignDocumentObj.setCloseCallback(function(){ZPeopleComponents.select(pageId.find("#Opr_esign_Status")).destroy(),ZPeopleComponents.select(pageId.find("#Opr_esign_reviewFeedbackType")).destroy(),ZPeopleComponents.select(pageId.find("#Opr_esign_review_Status")).destroy(),ZPeopleComponents.select(pageId.find("#Opr_esign_publish_Status")).destroy(),PMSESign.apprEsignDocumentObj.remove(),PMSESign.apprEsignDocumentObj={},PMSV2Cycle.processStatusView(Layout.Page.urlparam.viewstatus,PMSV2Cycle.appraisalCycleStatus,"appraisalLetter")}),PMSESign.apprEsignDocumentObj.construct()}$(PMSESign.apprEsignDocumentObj.sliderDiv).find("#sliFootDiv").addClass("zpl_DNI");var pageId=$(PMSESign.apprEsignDocumentObj.sliderDiv);if(0==pageId.find(".zpl_dots").length){let cycleData=PMSV2Cycle.REVIEWSTATUS_DATA.cycleData;pageId.find("#sliHdrDiv").find("div:first").addClass("d-flexC"),pageId.find("#sliHdrDiv").find("h4").after('<span class="zpl_dots"></span><div class="zpl_ellipsis250" style="max-inline-size: 400px !important;" title="'+cycleData.periodName+'">'+cycleData.periodName+"</div>")}let filterhtml='<div class="zpl_fltr"><div><div class="zpl_fltrhd"><h5>Filter</h5><i class="PI_cls" onclick="PMSESign.toggleStatusFilter()" title="Close"></i></div></div><div class="zpl_fltrcnt"><div><div class="zpl_fltclps fltopn"><div class="zpl_fltrlst">';filterhtml+='<div class="zpl_secn"> <div> <label>'+ZPI18N.getString("zp.paesign.appraisalletterstatus")+'</label> </div> <div> <select class="zselectbox select-js has-focus has-mfocus" style="display: none;" id="Opr_esign_Status" data-show-search-field="true"></select> </div> </div>',filterhtml+='<div class="zpl_secn"> <div> <label>'+ZPI18N.getString("zp.reviewstatus")+'</label> </div> <div> <select class="zselectbox select-js has-focus has-mfocus" style="display: none;" id="Opr_esign_review_Status" data-show-search-field="true"></select> </div> </div>',filterhtml+='<div class="zpl_secn"> <div> <label>'+ZPI18N.getString("zp.publishedstatus")+'</label> </div> <div> <select class="zselectbox select-js has-focus has-mfocus" style="display: none;" id="Opr_esign_publish_Status" data-show-search-field="true"></select> </div> </div>',filterhtml+='<div class="zpl_secn"> <div> <label>'+ZPI18N.getString("zp.appraiseefeedback")+'</label> </div> <div> <select class="zselectbox select-js has-focus has-mfocus" style="display: none;" id="Opr_esign_reviewFeedbackType" data-show-search-field="true"></select> </div> </div>',filterhtml+='</div></div></div></div><div><button type="button" class="zlabel zlabel--blue zlabel--medium" onclick="PMSESign.searchEsignStatus()">'+ZPI18N.getString("zp.apply")+'</button><button type="button" class="zlabel zlabel--outline zlabel--medium" onclick="PMSESign.resetEsignStatusView()">'+ZPI18N.getString("zp.reset")+"</button></div></div>",$(PMSESign.apprEsignDocumentObj.sliderDiv).find("#cardapprEsignSlider").append(filterhtml),pageId.find("#sliHdrDiv").find("#sliderCls").before('<div class="zpl_mhderrgt"> <i class="zpl_ibg PI_fltr" onclick="PMSESign.toggleStatusFilter()"></i></div>'),PMSESign.constructOprStatusSelect(),PMSESign.constructOprReviewStatusSelect(),PMSESign.constructOprPublishStatusSelect(),null==PMSESign.ReviewFeedbackType&&$.ajax({type:"POST",async:!1,url:"/performanceConfig.zp",data:{mode:"getReviewFeedbackNames",conreqcsr:csrfToken},success:function(resultData){if(void 0==resultData.msg){PMSESign.ReviewFeedbackType=resultData;let allOption=[];allOption.optionId="1",allOption.optionvalue=ZPI18N.getString("zp.all"),allOption.disabled=!1,PMSESign.ReviewFeedbackType.unshift(allOption)}}}),PMSESign.constructOprFeedbackTypeSelect(),PMSESign.apprEsignDocumentObj.appraisalConfigId=configId,void 0!=status&&ZPeopleComponents.select(pageId.find("#Opr_esign_Status")).setValue(status),PMSESign.ESIGNSTATUS_SINDEX=1,PMSESign.EsignStatusFireScrollObj={},PMSESign.RECALL_AVAILABLE_DOCIDS=new Array,PMSESign.SENT_AVAILABLE_DOCIDS=new Array,ESIGN_PREV_SEARCHTEXT="",PMSESign.getOprSignRequestStatus()},constructStatusPageBreadCrumb:function(){var pageId=$(PMSESign.apprEsignDocumentObj.sliderDiv);PMSESign.hideStatusFilterBreadCrumb();let filterObject=PMSESign.constructStatusFilterBreadCrumbHTML();filterObject&&""!=filterObject&&(pageId.find("#esignStatusSelectedFltrlst").html(filterObject),pageId.find("#esignStatusSelectedFltr").removeClass("zpl_DNI"),pageId.find("[name=BreadCrumbElement]").unbind(),pageId.find("[name=BreadCrumbElement]").on("click",function(){PMSESign.onclickStatusBreadCrumb(event,this)}))},onclickStatusBreadCrumb:function(){let filterFieldId=$(event.target).attr("id");if(void 0!==filterFieldId&&"filterTypeClose"===filterFieldId){let filterId=$(event.target).attr("filterid");"filterTypeClose"===filterFieldId&&PMSESign.removeStatusSelectedFilter(filterId)}else PMSESign.toggleStatusFilter()},removeStatusSelectedFilter:function(filterId){var pageId=$(PMSESign.apprEsignDocumentObj.sliderDiv);"Opr_esign_Status"==filterId?ZPeopleComponents.select(pageId.find("#Opr_esign_Status")).setValue("0"):"Opr_esign_review_Status"==filterId?ZPeopleComponents.select(pageId.find("#Opr_esign_review_Status")).setValue("0"):"Opr_esign_publish_Status"==filterId?ZPeopleComponents.select(pageId.find("#Opr_esign_publish_Status")).setValue("0"):"Opr_esign_reviewFeedbackType"==filterId&&ZPeopleComponents.select(pageId.find("#Opr_esign_reviewFeedbackType")).setValue("1"),PMSESign.esignOprStatusOnchange()},clearStatusSelectedFilter:function(){PMSESign.resetEsignStatusView(),PMSESign.esignOprStatusOnchange()},constructStatusFilterBreadCrumbHTML:function(){var pageId=$(PMSESign.apprEsignDocumentObj.sliderDiv);let selectedMRFilter={},esignStatus=ZPeopleComponents.select(pageId.find("#Opr_esign_Status")).getValue(),signArrstatus=[ZPI18N.getString("zp.all"),ZPI18N.getString("zp.paesign.docgeninprogress"),"SCEDULED",ZPI18N.getString("zp.paesign.sendforsign"),ZPI18N.getString("zp.paesign.docgenfailed"),ZPI18N.getString("zp.paesign.docpartiallysigned"),ZPI18N.getString("zp.paesign.signed"),ZPI18N.getString("zp.recalled"),ZPI18N.getString("zp.expired"),ZPI18N.getString("zp.declined"),ZPI18N.getString("zp.paesign.lettersent"),ZPI18N.getString("zp.paesign.yettosend")],constructBreadCrumb=!1,statusName="";"0"!=esignStatus?(constructBreadCrumb=!0,statusName=signArrstatus[parseInt(esignStatus)]):statusName=ZPI18N.getString("zp.all"),selectedMRFilter.esignStatus=new Array,selectedMRFilter.esignStatus[0]=statusName;let reviewstatus=ZPeopleComponents.select(pageId.find("#Opr_esign_review_Status")).getValue();selectedMRFilter.reviewstatusName=new Array,selectedMRFilter.reviewstatusName[0]="0"==reviewstatus?ZPI18N.getString("zp.all"):"1"==reviewstatus?ZPI18N.getString("zp.completed"):ZPI18N.getString("zp.pending"),"0"!=reviewstatus&&(constructBreadCrumb=!0);let publishstatus=ZPeopleComponents.select(pageId.find("#Opr_esign_publish_Status")).getValue();selectedMRFilter.publishstatus=new Array,selectedMRFilter.publishstatus[0]="0"==publishstatus?ZPI18N.getString("zp.all"):"1"==publishstatus?ZPI18N.getString("zp.completed"):ZPI18N.getString("zp.pending"),"0"!=publishstatus&&(constructBreadCrumb=!0);let feedbackType=null;if(PMSESign.IS_REVIEW_FEEDBACK_ENABLED)if(feedbackType=ZPeopleComponents.select(pageId.find("#Opr_esign_reviewFeedbackType")).getValue(),selectedMRFilter.feedbackType=new Array,"1"!=feedbackType){let feedbackIndex=PMSESign.ReviewFeedbackType.findIndex(obj=>obj.optionId===feedbackType);"-1"!=feedbackIndex?(constructBreadCrumb=!0,selectedMRFilter.feedbackType[0]=PMSESign.ReviewFeedbackType[feedbackIndex].optionvalue):selectedMRFilter.feedbackType[0]=ZPI18N.getString("zp.all")}else selectedMRFilter.feedbackType[0]=ZPI18N.getString("zp.all");let html="",constructFilterStatus=(filterType,headerName,filterElement,filterElementType,isDefaultValue)=>{let filterValues=selectedMRFilter[filterType];if(filterValues.length>0){let subHtml="";filterValues.length>1&&(subHtml='<sub data-menu-id="filterAdditional_list" id="filterCount" filterId='+filterElement+">+"+(filterValues.length-1)+"</sub>");let removeHtml="";isDefaultValue||(removeHtml='<a class="PI_cls" id="filterTypeClose" filterId="'+filterElement+'" title="'+ZPI18N.getString("zp.remove")+'"></a>'),html+='<li name="BreadCrumbElement" fieldObj=\''+JSON.stringify({filterElementId:filterElement,filterElementType:filterElementType})+"'><label>"+headerName+':</label><span title="'+filterValues[0]+'">'+filterValues[0]+"</span>"+subHtml+removeHtml+"</li>"}};return constructBreadCrumb&&(constructFilterStatus("esignStatus",ZPI18N.getString("zp.paesign.appraisalletterstatus"),"Opr_esign_Status","selectField","0"==esignStatus),constructFilterStatus("reviewstatusName",ZPI18N.getString("zp.reviewstatus"),"Opr_esign_review_Status","selectField","0"==reviewstatus),constructFilterStatus("publishstatus",ZPI18N.getString("zp.publishedstatus"),"Opr_esign_publish_Status","selectField","0"==publishstatus),PMSESign.IS_REVIEW_FEEDBACK_ENABLED&&constructFilterStatus("feedbackType",ZPI18N.getString("zp.appraiseefeedback"),"Opr_esign_reviewFeedbackType","selectField","1"==feedbackType)),html},hideStatusFilterBreadCrumb:function(){let pageId=$(PMSESign.apprEsignDocumentObj.sliderDiv);pageId.find("#esignStatusSelectedFltrlst").empty(),pageId.find("#esignStatusSelectedFltr").addClass("zpl_DNI")},toggleStatusFilter:function(){$(PMSESign.apprEsignDocumentObj.sliderDiv).find("#cardapprEsignSlider").hasClass("zpl_fltr_flt")?$(PMSESign.apprEsignDocumentObj.sliderDiv).find("#cardapprEsignSlider").removeClass("zpl_fltr_flt"):$(PMSESign.apprEsignDocumentObj.sliderDiv).find("#cardapprEsignSlider").addClass("zpl_fltr_flt")},searchEsignStatus:function(){PMSESign.toggleStatusFilter(),PMSESign.esignOprStatusOnchange()},resetEsignStatusView:function(){var pageId=$(PMSESign.apprEsignDocumentObj.sliderDiv);ZPeopleComponents.select(pageId.find("#Opr_esign_Status")).setValue("0"),ZPeopleComponents.select(pageId.find("#Opr_esign_review_Status")).setValue("0"),ZPeopleComponents.select(pageId.find("#Opr_esign_publish_Status")).setValue("0"),ZPeopleComponents.select(pageId.find("#Opr_esign_reviewFeedbackType")).setValue("1")},resetBreadcrumpFilter:function(){PMSESign.resetEsignStatusView(),PMSESign.esignOprStatusOnchange()},searchEsignEmployees:function(obj){paCommonUtil.validateSearch(obj,"Esign_StatusList",PMSESign.esignOprStatusOnchange,!0)},constructOprStatusSelect:function(){var pageId=$(PMSESign.apprEsignDocumentObj.sliderDiv);let status=[ZPI18N.getString("zp.all"),ZPI18N.getString("zp.paesign.docgeninprogress"),"SCEDULED",ZPI18N.getString("zp.paesign.sendforsign"),ZPI18N.getString("zp.paesign.docgenfailed"),ZPI18N.getString("zp.paesign.docpartiallysigned"),ZPI18N.getString("zp.paesign.signed"),ZPI18N.getString("zp.recalled"),ZPI18N.getString("zp.expired"),ZPI18N.getString("zp.declined"),ZPI18N.getString("zp.paesign.lettersent"),ZPI18N.getString("zp.paesign.yettosend")],_confselptions=[];void 0!==status&&status.length>0&&$.each(status,function(key,data){let isAllowedType=!1;if(PMSV2Cycle.REVIEWSTATUS_DATA.cycleData.isAppraisalEsignEnabled?2!=key&&10!=key&&(isAllowedType=!0):0!=key&&10!=key&&11!=key||(isAllowedType=!0),isAllowedType){let cycDtl={};cycDtl.id=key,cycDtl.name=ZPeople.decodeTxt(data),_confselptions.push(cycDtl)}});let _confselObj={};_confselObj.options=_confselptions,_confselObj.dataMapping={label:"name",value:"id",informativeText:"name"},_confselObj.contentType="text",_confselObj.title="name",_confselObj.dropdownList={contentType:"text"},_confselObj.search={by:["name"],highlightKeyword:!0},ZPeopleComponents.select(pageId.find("#Opr_esign_Status"),_confselObj),ZPeopleComponents.select(pageId.find("#Opr_esign_Status")).setValue("0")},constructOprReviewStatusSelect:function(){var pageId=$(PMSESign.apprEsignDocumentObj.sliderDiv);let status=[ZPI18N.getString("zp.all"),ZPI18N.getString("zp.completed"),ZPI18N.getString("zp.pending")],_confselptions=[];void 0!==status&&status.length>0&&$.each(status,function(key,data){let cycDtl={};cycDtl.id=key,cycDtl.name=ZPeople.decodeTxt(data),_confselptions.push(cycDtl)});let _confselObj={};_confselObj.options=_confselptions,_confselObj.dataMapping={label:"name",value:"id",informativeText:"name"},_confselObj.contentType="text",_confselObj.title="name",_confselObj.dropdownList={contentType:"text"},_confselObj.search={by:["name"],highlightKeyword:!0},ZPeopleComponents.select(pageId.find("#Opr_esign_review_Status"),_confselObj),ZPeopleComponents.select(pageId.find("#Opr_esign_review_Status")).setValue("0")},constructOprPublishStatusSelect:function(){var pageId=$(PMSESign.apprEsignDocumentObj.sliderDiv);let status=[ZPI18N.getString("zp.all"),ZPI18N.getString("zp.published"),ZPI18N.getString("zp.unpublished")],_confselptions=[];void 0!==status&&status.length>0&&$.each(status,function(key,data){let cycDtl={};cycDtl.id=key,cycDtl.name=ZPeople.decodeTxt(data),_confselptions.push(cycDtl)});let _confselObj={};_confselObj.options=_confselptions,_confselObj.dataMapping={label:"name",value:"id",informativeText:"name"},_confselObj.contentType="text",_confselObj.title="name",_confselObj.dropdownList={contentType:"text"},_confselObj.search={by:["name"],highlightKeyword:!0},ZPeopleComponents.select(pageId.find("#Opr_esign_publish_Status"),_confselObj),ZPeopleComponents.select(pageId.find("#Opr_esign_publish_Status")).setValue("0")},constructOprFeedbackTypeSelect:function(){var pageId=$(PMSESign.apprEsignDocumentObj.sliderDiv);let _confselptions=[];void 0!==PMSESign.ReviewFeedbackType&&PMSESign.ReviewFeedbackType.length>0&&$.each(PMSESign.ReviewFeedbackType,function(key,data){let cycDtl={};cycDtl.id=data.optionId,cycDtl.name=ZPeople.decodeTxt(data.optionvalue),_confselptions.push(cycDtl)});let _confselObj={};_confselObj.options=_confselptions,_confselObj.dataMapping={label:"name",value:"id",informativeText:"name"},_confselObj.contentType="text",_confselObj.title="name",_confselObj.dropdownList={contentType:"text"},_confselObj.search={by:["name"],highlightKeyword:!0},ZPeopleComponents.select(pageId.find("#Opr_esign_reviewFeedbackType"),_confselObj),ZPeopleComponents.select(pageId.find("#Opr_esign_reviewFeedbackType")).setValue("1")},esignOprStatusOnchangeFromComp:function(elementObj,componentObj){componentObj.fromUI&&PMSESign.esignOprStatusOnchange()},esignOprStatusOnchange:function(){PMSESign.ESIGNSTATUS_SINDEX=1,PMSESign.EsignStatusFireScrollObj={},PMSESign.RECALL_AVAILABLE_DOCIDS=new Array,PMSESign.SENT_AVAILABLE_DOCIDS=new Array,PMSESign.getOprSignRequestStatus()},getOprSignRequestStatus:function(){$(PMSESign.apprEsignDocumentObj.sliderDiv).find("#apprEsignSliderDiv").append(ZPeople.LOADING_HTML);let params={mode:"getAppraisalEsignStatus",conreqcsr:csrfToken};params.cycleId=PMSESign.apprEsignDocumentObj.appraisalConfigId,params.status=ZPeopleComponents.select($(PMSESign.apprEsignDocumentObj.sliderDiv).find("#Opr_esign_Status")).getValue(),params.reviewstatus=ZPeopleComponents.select($(PMSESign.apprEsignDocumentObj.sliderDiv).find("#Opr_esign_review_Status")).getValue(),params.publishstatus=ZPeopleComponents.select($(PMSESign.apprEsignDocumentObj.sliderDiv).find("#Opr_esign_publish_Status")).getValue(),params.reviewfeedbacktype=ZPeopleComponents.select($(PMSESign.apprEsignDocumentObj.sliderDiv).find("#Opr_esign_reviewFeedbackType")).getValue(),params.sIndex=PMSESign.ESIGNSTATUS_SINDEX,params.searchText=$(PMSESign.apprEsignDocumentObj.sliderDiv).find("#CycleEsignSerachEmployee").val(),PMSESign.ESIGN_PREV_SEARCHTEXT=params.searchText,ZPeople.Request.send("/performanceConfig.zp",params,PMSESign.constructOprEsignStatusTable)},constructOprEsignStatusTable:function(resultData,params){if($(PMSESign.apprEsignDocumentObj.sliderDiv).find("#apprEsignSliderDiv").find("#zp_page_loading").remove(),1==params.sIndex&&(PMSESign.ESIGNSTATUS_SINDEX=1,PMSESign.EsignStatusFireScrollObj={},PMSESign.RECALL_AVAILABLE_DOCIDS=new Array,PMSESign.SENT_AVAILABLE_DOCIDS=new Array,PMSESign.closeSelectPopOver(),void 0!=resultData.isReviewFeedbackEnabled&&resultData.isReviewFeedbackEnabled?(PMSESign.IS_REVIEW_FEEDBACK_ENABLED=!0,$(PMSESign.apprEsignDocumentObj.sliderDiv).find("#Opr_esign_reviewFeedbackType").parent().parent().removeClass("zpl_DNI")):(PMSESign.IS_REVIEW_FEEDBACK_ENABLED=!1,$(PMSESign.apprEsignDocumentObj.sliderDiv).find("#Opr_esign_reviewFeedbackType").parent().parent().addClass("zpl_DNI")),PMSESign.constructStatusPageBreadCrumb()),0==Object.keys(PMSESign.EsignStatusFireScrollObj).length&&1==PMSESign.ESIGNSTATUS_SINDEX){$(PMSESign.apprEsignDocumentObj.sliderDiv).find("#apprEsignSliderDiv").html("");let header='<table class="zpl_tbl wd100_per"> <thead> <tr> ';header+='<th style="min-width: 300px !important;">'+ZPI18N.getString("zp.appraisee")+"</th>",header+='<th style="min-width: 100px !important;">'+ZPI18N.getString("zp.reviewstatus")+"</th>",header+='<th style="min-width: 100px !important;">'+ZPI18N.getString("zp.publishedstatus")+"</th>",PMSESign.IS_REVIEW_FEEDBACK_ENABLED&&(header+='<th style="min-width: 100px !important;">'+ZPI18N.getString("zp.appraiseefeedback")+"</th>"),void 0!=resultData.isAppraisalEsignEnabled&&resultData.isAppraisalEsignEnabled&&(header+=' <th style="min-width: 300px !important;">'+ZPI18N.getString("zp.paesign.signers")+'</th><th style="min-width: 300px !important;">'+ZPI18N.getString("zp.paesign.completedsigner")+"</th> "),header+='<th style="min-width: 150px !important;">'+ZPI18N.getString("zp.status")+'</th> </tr> </thead> <tbody id="AppraisalEsignStatusTbody"> </tbody> </table>',$(PMSESign.apprEsignDocumentObj.sliderDiv).find("#apprEsignSliderDiv").append(header)}let tbodyHtml="";if(void 0!=resultData&&void 0!=resultData.statusArr&&0==resultData.statusArr.length&&Object.keys(PMSESign.EsignStatusFireScrollObj).length>0&&(PMSESign.EsignStatusFireScrollObj.reset(),PMSESign.EsignStatusFireScrollObj={},PMSESign.RECALL_AVAILABLE_DOCIDS=new Array,PMSESign.SENT_AVAILABLE_DOCIDS=new Array),void 0!=resultData&&void 0!=resultData.statusArr&&resultData.statusArr.length>0){for(var index=0;index<resultData.statusArr.length;index++){let data=resultData.statusArr[index],row='<tr id="'+data.recordId+'">',constructCheckBox=!1;if(resultData.isAppraisalEsignEnabled?0==resultData.appraisalLetterSentActionType?!data.isAppraisalLetterSent||3!=data.appraisalEsignstatus&&5!=data.appraisalEsignstatus?!data.isPublished||void 0==data.appraisalEsignstatus||0!=data.appraisalEsignstatus&&4!=data.appraisalEsignstatus&&7!=data.appraisalEsignstatus&&8!=data.appraisalEsignstatus&&9!=data.appraisalEsignstatus||(PMSESign.SENT_AVAILABLE_DOCIDS.push(data.recordId),constructCheckBox=!0):(PMSESign.RECALL_AVAILABLE_DOCIDS.push(data.recordId),constructCheckBox=!0):!data.isAppraisalLetterSent||3!=data.appraisalEsignstatus&&5!=data.appraisalEsignstatus?(!data.isAppraisalLetterSent&&data.isFinalized||data.isFinalized&&void 0!=data.appraisalEsignstatus&&(0==data.appraisalEsignstatus||4==data.appraisalEsignstatus||7==data.appraisalEsignstatus||8==data.appraisalEsignstatus||9==data.appraisalEsignstatus))&&(PMSESign.SENT_AVAILABLE_DOCIDS.push(data.recordId),constructCheckBox=!0):(PMSESign.RECALL_AVAILABLE_DOCIDS.push(data.recordId),constructCheckBox=!0):0==resultData.appraisalLetterSentActionType?data.isAppraisalLetterSent&&10==data.appraisalEsignstatus?(PMSESign.RECALL_AVAILABLE_DOCIDS.push(data.recordId),constructCheckBox=!0):data.isPublished&&void 0!=data.appraisalEsignstatus&&10!=data.appraisalEsignstatus&&(PMSESign.SENT_AVAILABLE_DOCIDS.push(data.recordId),constructCheckBox=!0):data.isAppraisalLetterSent&&10==data.appraisalEsignstatus?(PMSESign.RECALL_AVAILABLE_DOCIDS.push(data.recordId),constructCheckBox=!0):(!data.isAppraisalLetterSent&&data.isFinalized||data.isFinalized&&void 0!=data.appraisalEsignstatus&&11!=data.appraisalEsignstatus)&&(PMSESign.SENT_AVAILABLE_DOCIDS.push(data.recordId),constructCheckBox=!0),row+=constructCheckBox?'<td><div class="zcheckbox" onclick="PMSESign.enableSinglecheck(event,this)"><input id="'+data.recordId+'" type="checkbox" class="zcheckbox__helper"><label for="'+data.recordId+'" class="zcheckbox__label"></label></div></td>':"<td></td>",void 0!=resultData.isAppraisalEsignEnabled&&resultData.isAppraisalEsignEnabled){if(row+=" <td  onclick=\"PMSESign.showEsignInterationView('"+data.agrementId+"','"+data.appraisalDocId+'\')" > <div class="zpl_em"> <div class="zpl_emimg"><img src="'+data.empPhoto+'"> </div> <div class="zpl_emdts"> <div><em>'+ZSEC.Encoder.encodeForHTML(data.empId)+" - </em><b>"+ZSEC.Encoder.encodeForHTML(data.name)+"</b></div> </div> </div> </td>",void 0!=data.isFinalized&&data.isFinalized?row+="<td >"+ZPI18N.getString("zp.completed")+"</td>":row+="<td >"+ZPI18N.getString("zp.pending")+"</td>",void 0!=data.isPublished&&data.isPublished?row+="<td>"+ZPI18N.getString("zp.published")+"</td>":row+="<td>"+ZPI18N.getString("zp.unpublished")+"</td>",PMSESign.IS_REVIEW_FEEDBACK_ENABLED)if(void 0!=data.reviewFeedback){let feedbackIndex=PMSESign.ReviewFeedbackType.findIndex(obj=>obj.optionId===data.reviewFeedback);row+="-1"!=feedbackIndex?"<td>"+PMSESign.ReviewFeedbackType[feedbackIndex].optionvalue+"</td>":"<td></td>"}else row+="<td></td>";data.isAppraisalLetterSent?(row+=" <td >"+PMSESign.constrctSignerlistTd(data.signerlist,data.appraisalDocId,1)+"</td>",void 0!=data.signedList?row+="<td>"+PMSESign.constrctSignerlistTd(data.signedList,data.appraisalDocId,2)+"</td>":row+="<td ></td>"):row+="<td></td><td></td>"}else if(row+=' <td> <div class="zpl_em"> <div class="zpl_emimg"><img src="'+data.empPhoto+'"> </div> <div class="zpl_emdts"> <div><em>'+ZSEC.Encoder.encodeForHTML(data.empId)+" - </em><b>"+ZSEC.Encoder.encodeForHTML(data.name)+"</b></div> </div> </div> </td>",void 0!=data.isFinalized&&data.isFinalized?row+="<td>"+ZPI18N.getString("zp.completed")+"</td>":row+="<td>"+ZPI18N.getString("zp.pending")+"</td>",void 0!=data.isPublished&&data.isPublished?row+="<td >"+ZPI18N.getString("zp.published")+"</td>":row+="<td>"+ZPI18N.getString("zp.unpublished")+"</td>",PMSESign.IS_REVIEW_FEEDBACK_ENABLED)if(void 0!=data.reviewFeedback){let feedbackIndex=PMSESign.ReviewFeedbackType.findIndex(obj=>obj.optionId===data.reviewFeedback);row+="-1"!=feedbackIndex?"<td>"+PMSESign.ReviewFeedbackType[feedbackIndex].optionvalue+"</td>":"<td ></td>"}else row+="<td></td>";row+="<td>",void 0!=resultData.isAppraisalEsignEnabled&&resultData.isAppraisalEsignEnabled?row+=PMSESign.getEsignRequestStatusDiv(data):row+=PMSESign.getAppraisalLetterDiv(data),tbodyHtml+=row+="</td></tr>",(row=$(row)).data("dataval",data)}if(0==$(PMSESign.apprEsignDocumentObj.sliderDiv).find("#apprEsignSliderDiv table thead tr").find("#appraisalDoc_allchk").length&&(PMSESign.RECALL_AVAILABLE_DOCIDS.length>0||PMSESign.SENT_AVAILABLE_DOCIDS.length>0)){let checkbox='<th style="min-width: 20px !important;"><div class="zcheckbox" id="appraisalDoc_allchk" onclick="PMSESign.enableAllCheckbox(event,this);"><input type="checkbox" name="check" class="zcheckbox__helper" id="esignDoc_all"><label for="esignDoc_all" class="zcheckbox__label"></label></div></th>';$(PMSESign.apprEsignDocumentObj.sliderDiv).find("#apprEsignSliderDiv table thead tr").find("#appraisalDoc_allchk_temp").remove(),$(PMSESign.apprEsignDocumentObj.sliderDiv).find("#apprEsignSliderDiv table thead tr").prepend(checkbox)}else if(0==$(PMSESign.apprEsignDocumentObj.sliderDiv).find("#apprEsignSliderDiv table thead tr").find("#appraisalDoc_allchk_temp").length&&0==$(PMSESign.apprEsignDocumentObj.sliderDiv).find("#apprEsignSliderDiv table thead tr").find("#appraisalDoc_allchk").length){let checkbox='<th style="min-width: 20px !important;" id="appraisalDoc_allchk_temp"></th>';$(PMSESign.apprEsignDocumentObj.sliderDiv).find("#apprEsignSliderDiv table thead tr").prepend(checkbox)}PMSESign.ESIGNSTATUS_SINDEX+=resultData.statusArr.length,PMSESign.EsignStatusFireScrollObj=new FireScrollBack(PMSESign.getOprSignRequestStatus,$(PMSESign.apprEsignDocumentObj.sliderDiv).find("#cardapprEsignSlider"),"operation_Cycle_EsignstatusList")}else 0==Object.keys(PMSESign.EsignStatusFireScrollObj).length&&1==PMSESign.ESIGNSTATUS_SINDEX&&($(PMSESign.apprEsignDocumentObj.sliderDiv).find(".zpl_tblres").html(""),PMSOperationCommon.setNoData($(PMSESign.apprEsignDocumentObj.sliderDiv).find(".zpl_tblres"),ZPI18N.getString("zp.norecfound"),"no_data_found",null,null,null));$(PMSESign.apprEsignDocumentObj.sliderDiv).find("#AppraisalEsignStatusTbody").append(tbodyHtml),PMSESign.RECALL_AVAILABLE_DOCIDS.length>0||PMSESign.SENT_AVAILABLE_DOCIDS.length>0?($(PMSESign.apprEsignDocumentObj.sliderDiv).find("#esignDoc_all").prop("disabled",!1),PMSESign.oprStatusisAllChecked()?$(PMSESign.apprEsignDocumentObj.sliderDiv).find("#esignDoc_all").prop("checked",!0):$(PMSESign.apprEsignDocumentObj.sliderDiv).find("#esignDoc_all").prop("checked",!1)):$(PMSESign.apprEsignDocumentObj.sliderDiv).find("#esignDoc_all").prop("disabled",!0)},enableSinglecheck:function(event,obj){event.stopPropagation(),$(obj).find("input").is(":checked")?$(obj).find("input").prop("checked",!1):$(obj).find("input").prop("checked",!0);let checkedcount=$(PMSESign.apprEsignDocumentObj.sliderDiv).find("#AppraisalEsignStatusTbody input:checked").length;0==checkedcount?$(PMSESign.apprEsignDocumentObj.sliderDiv).find("#apprDocnftbuttonDiv").removeClass("opn"):($(PMSESign.apprEsignDocumentObj.sliderDiv).find("#apprDocnftbuttonDiv").addClass("opn"),searchInput=PMSESign.apprEsignDocumentObj.sliderDiv.find("#CycleEsignSerachEmployee"),searchInput.parent().removeClass("opn"),PMSESign.RECALL_AVAILABLE_DOCIDS.length>0?$(PMSESign.apprEsignDocumentObj.sliderDiv).find("#apprDocrecall_button").removeClass("zpl_DNI"):$(PMSESign.apprEsignDocumentObj.sliderDiv).find("#apprDocrecall_button").addClass("zpl_DNI"),PMSESign.SENT_AVAILABLE_DOCIDS.length>0?$(PMSESign.apprEsignDocumentObj.sliderDiv).find("#apprDocntfn_button").removeClass("zpl_DNI"):$(PMSESign.apprEsignDocumentObj.sliderDiv).find("#apprDocntfn_button").addClass("zpl_DNI"),$(PMSESign.apprEsignDocumentObj.sliderDiv).find("#selectedCountDiv").html(checkedcount+" "+ZPI18N.getString("zp.selected"))),PMSESign.oprStatusisAllChecked()?$(PMSESign.apprEsignDocumentObj.sliderDiv).find("#esignDoc_all").prop("checked",!0):$(PMSESign.apprEsignDocumentObj.sliderDiv).find("#esignDoc_all").prop("checked",!1)},oprStatusisAllChecked:function(){return $(PMSESign.apprEsignDocumentObj.sliderDiv).find("#AppraisalEsignStatusTbody input").not(".disabled").length==$(PMSESign.apprEsignDocumentObj.sliderDiv).find("#AppraisalEsignStatusTbody input:checked").length},enableAllCheckbox:function(event,obj){event.stopPropagation(),$(obj).find("input").is(":checked")?($(PMSESign.apprEsignDocumentObj.sliderDiv).find("#esignDoc_all").prop("checked",!1),$(PMSESign.apprEsignDocumentObj.sliderDiv).find("#AppraisalEsignStatusTbody input").not(".disabled").prop("checked",!1),$(PMSESign.apprEsignDocumentObj.sliderDiv).find("#apprDocnftbuttonDiv").removeClass("opn")):($(PMSESign.apprEsignDocumentObj.sliderDiv).find("#esignDoc_all").prop("checked",!0),$(PMSESign.apprEsignDocumentObj.sliderDiv).find("#AppraisalEsignStatusTbody input").not(".disabled").prop("checked",!0),$(PMSESign.apprEsignDocumentObj.sliderDiv).find("#apprDocnftbuttonDiv").addClass("opn"),PMSESign.RECALL_AVAILABLE_DOCIDS.length>0?$(PMSESign.apprEsignDocumentObj.sliderDiv).find("#apprDocrecall_button").removeClass("zpl_DNI"):$(PMSESign.apprEsignDocumentObj.sliderDiv).find("#apprDocrecall_button").addClass("zpl_DNI"),PMSESign.SENT_AVAILABLE_DOCIDS.length>0?$(PMSESign.apprEsignDocumentObj.sliderDiv).find("#apprDocntfn_button").removeClass("zpl_DNI"):$(PMSESign.apprEsignDocumentObj.sliderDiv).find("#apprDocntfn_button").addClass("zpl_DNI"),$(PMSESign.apprEsignDocumentObj.sliderDiv).find("#selectedCountDiv").html($(PMSESign.apprEsignDocumentObj.sliderDiv).find("#AppraisalEsignStatusTbody input").not(".disabled").length+" "+ZPI18N.getString("zp.selected")),searchInput=PMSESign.apprEsignDocumentObj.sliderDiv.find("#CycleEsignSerachEmployee"),searchInput.parent().removeClass("opn"))},closeSelectPopOver:function(){$(PMSESign.apprEsignDocumentObj.sliderDiv).find("#AppraisalEsignStatusTbody input").prop("checked",!1),$(PMSESign.apprEsignDocumentObj.sliderDiv).find("#esignDoc_all").prop("checked",!1),$(PMSESign.apprEsignDocumentObj.sliderDiv).find("#apprDocnftbuttonDiv").removeClass("opn")},resendEsignLetter:function(){let recordIds=new Array,elements=$(PMSESign.apprEsignDocumentObj.sliderDiv).find("#AppraisalEsignStatusTbody input:checked");for(let index=0;index<elements.length;index++){let element=elements[index],docId=$(element).attr("id");-1!=PMSESign.SENT_AVAILABLE_DOCIDS.indexOf(docId)&&recordIds.push(docId)}0!=recordIds.length?recordIds.length>100?ZPeople.Message.warning(ZPI18N.getString("zp.paesign.maxrecordforresend")):PMSESign.resendEsignLetterRequest(recordIds):ZPeople.Message.warning(ZPI18N.getString("zp.paesign.norecordselectedforresend"))},resendEsignLetterRequest:function(recordIds){let params={mode:"resendEsignLetter",conreqcsr:csrfToken};params.recordIds=JSON.stringify(recordIds),ZPeople.Request.send("/performanceConfig.zp",params,PMSESign.esignOprResendCallback)},esignOprResendCallback:function(data){"success"==data.msg?(ZPeople.Message.success(ZPI18N.getString("zp.paesign.resendinit")),PMSESign.closeSelectPopOver(),PMSESign.esignOprStatusOnchange()):ZPeople.Message.failure(ZPI18N.getString("zpp.somethingwentwrong"))},recallAppraisalLetterAndExcludeUser:function(){PMSESign.recallEsignDocument("Exclude")},backupAndRecallExcludeReviewedEmp:function(){let selectedDiv=$(PMSOperation.noUserExcludeSliderObj.sliderDiv).find("#excludeRecallTbody input:checked"),userErecnos=new Array;for(var index=0;index<selectedDiv.length;index++){let userErecno=$(selectedDiv[index]).attr("userErecno");userErecnos.push(userErecno)}if(userErecnos.length>0){var infoPopUp=new InfoAlertMessage;infoPopUp.title=ZPI18N.getString("zp.excludeEmp"),infoPopUp.despcription=ZPI18N.getString("zp.paesign.excluderecallinfodes"),infoPopUp.yesButtonText=ZPI18N.getString("zp.exclude"),infoPopUp.cancelButtonText=ZPI18N.getString("zp.cancel"),infoPopUp.callback=function(){$(PMSOperation.noUserExcludeSliderObj.sliderDiv).find("#excludeRecallBtn").prop("disabled",!0),PMSOperation.backUpCycleData(userErecnos,!0)},infoPopUp.show()}},recallEsignLetterconfirm:function(mode){var infoPopUp=new InfoAlertMessage;infoPopUp.title=void 0!=mode&&2==mode?ZPI18N.getString("zp.unpublishreview"):ZPI18N.getString("zp.paesign.recallinfotitle"),infoPopUp.despcription=void 0!=mode&&2==mode?ZPI18N.getString("zp.paesign.unpublishrecallinfodes"):ZPI18N.getString("zp.paesign.recallinfodesc"),void 0!=mode&&2==mode&&(infoPopUp.centerHtml=ZPI18N.getString("zp.paesign.unpublishrecallinfonote")),infoPopUp.yesButtonText=ZPI18N.getString("zp.confirm"),void 0!=mode&&2==mode&&(infoPopUp.yesButtonText=ZPI18N.getString("zp.lms.course.unpublish")),infoPopUp.cancelButtonText=ZPI18N.getString("zp.cancel"),infoPopUp.callback=function(){"1"==mode?PMSESign.recallEsignLetter():"2"==mode?PMSESign.recallEsignDocument("unpublish"):"3"==mode&&PMSESign.backupAndRecallExcludeReviewedEmp()},infoPopUp.show()},recallEsignLetter:function(){let recordIds=new Array,elements=$(PMSESign.apprEsignDocumentObj.sliderDiv).find("#AppraisalEsignStatusTbody input:checked");for(let index=0;index<elements.length;index++){let element=elements[index],recordId=$(element).attr("id");-1!=PMSESign.RECALL_AVAILABLE_DOCIDS.indexOf(recordId)&&recordIds.push(recordId)}PMSESign.recallEsignLetterRequest(recordIds)},recallEsignLetterRequest:function(recordIds,mode){if(0==recordIds.length)return void ZPeople.Message.warning(ZPI18N.getString("zp.paesign.norecordselectedforrecall"));if(recordIds.length>100)return void ZPeople.Message.warning(ZPI18N.getString("zp.paesign.maxrecordforrecall"));let params={mode:"recallDocument",conreqcsr:csrfToken};params.recordIds=JSON.stringify(recordIds),params.submode=void 0!=mode?"unpublish"==mode?"unpublish":"Exclude"==mode?"excludeuser":"common":"common",ZPeople.Request.send("/performanceConfig.zp",params,PMSESign.esignOprRecallCallback,mode)},esignOprRecallCallback:function(data,param,mode){void 0!=data.isSuccess&&data.isSuccess?"Exclude"==mode?(ZPeople.Message.success(ZPI18N.getString("zp.paesign.recallexcludeinit")),PMSOperation.noUserExcludeSliderObj.closeCallback()):"unpublish"==mode?(ZPeople.Message.success(ZPI18N.getString("zp.paesign.recallunpublishinit")),PMSESign.notpublishedOrExcludedListSliderObj.closeCallback(),PMSV2Cycle.unpublishEmpSlider.close()):(ZPeople.Message.success(ZPI18N.getString("zp.paesign.recallinit")),PMSESign.closeSelectPopOver(),PMSESign.esignOprStatusOnchange()):ZPeople.Message.failure(ZPI18N.getString("zpp.somethingwentwrong"))},showEsignInterationView:function(agreementId,appraisalDocId){PMSESign.getEsignInfoSlider(agreementId,appraisalDocId)},downloadSignedDocument:function(apprEsignDocId){var path="selfappraisalExport.zp?submode=DownloadFile";path+="&backupid="+apprEsignDocId,path+="&downloadFileSubMode=esignDocument",path+="&ftype=csv";var formElm=document.createElement("form");formElm.id="esignDocumentDownload";var inputval=document.createElement("input");formElm.setAttribute("target","exportresp"),formElm.setAttribute("method","post"),formElm.setAttribute("action",path),inputval.setAttribute("type","hidden"),inputval.setAttribute("name",csrfParamName),inputval.setAttribute("value",csrfToken),formElm.appendChild(inputval),document.body.appendChild(formElm),formElm.submit(),formElm.reset()},initEsignRequestList:function(){let pageId=Layout.Page.container;PMSESign.destoryFilter(),pageId.html(""),pageId.append(PMSESign.getEsignRequestListingPageHtml()),PMSESign.getEsignCyclesAndInit()},getEsignRequestListingPageHtml:function(){return'<div class="zpl_container"> <div class="zpl_iwrpr"> <div class="zpl_iwrprrgt"> <div class="zpl_act zpl_tblfxd" id="esign_filtercont"> <div class="zpl_btnmnu"> <div class="zpl_lft" id="esign_CycleName"></div><div class="zpl_rgt" id="esign_BackDiv"> <i class="zpl_ibg PI_fltr"  onclick="PMSESign.toggleFilter();"></i> </div> </div> <div class="zpl_fltrvw zpl_DNI" id="esign_selectedfltr"> <div> <ul class="zpl_fltrvwlst" id="esign_selectedfltrlst"></ul> </div> <div class="d-flexcap MLauto"> <a id="esign_fltr_clearall" class="zpl_link">'+ZPI18N.getString("zp.reset")+'</a> </div> </div> <div class="zpl_rgtcnt zpl_mdltmvw" id="esign_RequestlistDiv" scroll="enabled"> <div class="zpl_tblres" id="esign_table_div"> <table class="zpl_tbl" id="esign_table"> <thead id="esign_tablehead"> </thead> <tbody id="esign_tbody"></tbody> </table> </div> </div> <div class="zpl_tblpagination zpl_DNI" id="esign_btmBanner"> <div class="zpl_lftpgn"> <span class="red" id="esign_footer_error"></span> </div> <div class="zpl_rhtpgn" id="esign_pagination"> <span class="d-flexC">'+ZPI18N.getString("zp.records")+'</span> <div class="pagecount" id="esign_page_cnt"> <a class="zpl_prev" id="esign_pageprev" onclick="PMSESign.getPreviousSetesign()"></a><span id="esign_viewPageCount"></span><a class="zpl_nxt"  id="esign_pagenext" onclick="PMSESign.getNextSetesign()"></a> </div> </div> </div> <div class="zpl_fltr"> <div> <div class="zpl_fltrhd"> <h5>'+ZPI18N.getString("zp.filter")+'</h5> <i class="PI_cls" onclick="PMSESign.toggleFilter();"></i> </div> </div> <div class="zpl_fltrcnt" id="esign_filterBody"></div> <div> <button type="button" class="zlabel zlabel--blue zlabel--medium" id="esign_searchBut" onclick="PMSESign.getEsignRequestList(true);"">'+ZPI18N.getString("zp.apply")+'</button> <button type="button" class="zlabel zlabel--outline zlabel--medium" id="esign_resetBut" onclick="PMSESign.clearSelectedFilter();">'+ZPI18N.getString("zp.reset")+"</button> </div> </div> </div> </div> </div> </div>"},getEsignCyclesAndInit:function(){if(null!=PMSESign.ESIGN_CYCLES)PMSESign.initFilter(),PMSESign.getEsignRequestList(!0);else{let params={mode:"getEsignCycles",conreqcsr:csrfToken};ZPeople.Request.send("/performanceConfig.zp",params,PMSESign.getEsignCycleCallback)}},getEsignCycleCallback:function(resultData){void 0!=resultData&&void 0!=resultData.appConfList&&resultData.appConfList.length>0?(PMSESign.ESIGN_CYCLES=resultData.appConfList,PMSESign.initFilter(),PMSESign.getEsignRequestList(!0)):PMSESign.esignListingNoData()},initFilter:function(){let pageId=Layout.Page.container;PMSESign.destoryFilter(),pageId.find("#esign_filterBody").html(""),pageId.find("#esign_perpage").remove(),PMSESign.constructFilterHtml(),PMSESign.constructCycleFilter(),ZPeopleComponents.select(pageId.find("#esign_StatusFilter")).setValue("0"),ZPeopleComponents.select(pageId.find("#esign_perpage")).setValue("10"),pageId.find("#esign_perpage").unbind(),$(pageId.find("#esign_perpage")).on("zselectchange",PMSESign.esignRecordPerPageOnChange)},esignRecordPerPageOnChange:function(){PMSESign.getEsignRequestList(!0)},destoryFilter:function(){let pageId=Layout.Page.container;[{selector:"cycleFilter",method:"select"},{selector:"StatusFilter",method:"select"},{selector:"perpage",method:"select"}].forEach(component=>{let compId="#esign_"+component.selector;ZPeopleComponents.isComponent(pageId.find(compId))&&("tokenfield"===component.method?ZPeopleComponents.tokenfield(pageId.find(compId)).destroy():ZPeopleComponents.select(pageId.find(compId)).destroy())})},constructFilterHtml:function(){let filterHtml="";filterHtml+="<div>",filterHtml+='<div class="zpl_fltclps fltopn">',filterHtml+='<div class="zpl_fltrlst">',filterHtml+='<div class="zpl_secn">',filterHtml+="<div>",filterHtml+="<label>"+ZPI18N.getString("zp.appraisalcycle")+"</label>",filterHtml+="</div>",filterHtml+="<div>",filterHtml+='<select data-show-search-field="true" class="zselectbox select-js has-focus has-mfocus" style="display: none;" id="esign_cycleFilter"></select>',filterHtml+="</div>",filterHtml+="</div>",filterHtml+='<div class="zpl_secn">',filterHtml+="<div>",filterHtml+="<label>"+ZPI18N.getString("zp.status")+"</label>",filterHtml+="</div>",filterHtml+="<div>",filterHtml+='<select class="zselectbox select-js has-focus has-mfocus" style="display: none;" id="esign_StatusFilter">';let options="";$.each(PMSESign.esignStatus,function(index,value){options='<option value="'+index+'">'+value+"</option>"+options}),filterHtml+=options,filterHtml+="</select>",filterHtml+="</div>",filterHtml+="</div>",filterHtml+="</div>",filterHtml+="</div>",filterHtml+="</div>";let pageId=Layout.Page.container;pageId.find("#esign_filterBody").html(filterHtml);let perPageArr=["10","20","30","50","100"];filterHtml="",filterHtml+='<select data-width="70" class="zselectbox select-js" style="display: none;" id="esign_perpage">';for(const pageCnt of perPageArr)filterHtml+='<option value="'+pageCnt+'">'+pageCnt+"</option>";filterHtml+="</select>",pageId.find("#esign_pagination").prepend(filterHtml)},constructCycleFilter:function(){let pageId=Layout.Page.container,_confselObj={},_confselptions=[];PMSESign.DEFAULT_CONFIGID="-1",void 0!==PMSESign.ESIGN_CYCLES&&PMSESign.ESIGN_CYCLES.length>0&&$.each(PMSESign.ESIGN_CYCLES,function(key,data){let cycDtl={};void 0!=data.isAppraisalEsignEnabled&&data.isAppraisalEsignEnabled&&(cycDtl.id=data.configId,cycDtl.name=ZPeople.decodeTxt(data.periodName)),Object.keys(cycDtl).length>0&&(_confselptions.push(cycDtl),"-1"==PMSESign.DEFAULT_CONFIGID&&(PMSESign.DEFAULT_CONFIGID=data.configId))}),_confselObj.options=_confselptions,_confselObj.dataMapping={label:"name",value:"id",informativeText:"name"},_confselObj.contentType="text",_confselObj.title="name",_confselObj.dropdownList={contentType:"text"},_confselObj.search={by:["name"],highlightKeyword:!0};let cycleId="cycleFilter";ZPeopleComponents.select(pageId.find("#esign_"+cycleId),_confselObj),ZPeopleComponents.select(pageId.find("#esign_"+cycleId)).setValue(PMSESign.DEFAULT_CONFIGID);let selConfWidth=$(ZPeopleComponents.select(pageId.find("#esign_"+cycleId)).getElement()[0]).outerWidth();ZPeopleComponents.select(pageId.find("#esign_"+cycleId)).setAttribute("dropdownList",{width:selConfWidth+"px"})},toggleFilter:function(isClose,breadCrumbObj){let pageId=Layout.Page.container,filterCont=pageId.find("#esign_filtercont");if(void 0!==isClose?isClose?filterCont.removeClass("zpl_fltr_flt"):filterCont.addClass("zpl_fltr_flt"):filterCont.hasClass("zpl_fltr_flt")?filterCont.removeClass("zpl_fltr_flt"):filterCont.addClass("zpl_fltr_flt"),void 0!==breadCrumbObj){let filterElementObj=JSON.parse($(breadCrumbObj).attr("fieldObj"));ZPeopleComponents.isComponent(pageId.find("#"+filterElementObj.filterElementId))&&("selectField"===filterElementObj.filterElementType?ZPeopleComponents.select(pageId.find("#"+filterElementObj.filterElementId)).open():"tokenField"===filterElementObj.filterElementType&&ZPeopleComponents.tokenfield(pageId.find("#"+filterElementObj.filterElementId)).openDropdownList())}},getEsignRequestList:function(init){let pageId=Layout.Page.container;PMSESign.toggleFilter(!0),void 0!=init&&init&&(PMSESign.REQUESTLIST_SINDEX=1);let cycleId=ZPeopleComponents.select(pageId.find("#esign_cycleFilter")).getValue();if(""!=cycleId){let params={mode:"getUserSignRequest",conreqcsr:csrfToken};params.cycleId=cycleId,params.status=ZPeopleComponents.select(pageId.find("#esign_StatusFilter")).getValue(),params.sIndex=PMSESign.REQUESTLIST_SINDEX,params.reclimit=ZPeopleComponents.select(pageId.find("#esign_perpage")).getValue(),ZPeople.Request.send("/performanceConfig.zp",params,PMSESign.constructEsignRequestlisting)}else PMSESign.esignListingNoData()},constructEsignRequestlisting:function(resultData,params){let pageId=Layout.Page.container;pageId.find("#esign_tablehead").html(""),pageId.find("#esign_tbody").html("");let header="<tr>";if(header+='<th width="300">'+ZPI18N.getString("zp.appraisee")+"</th> <th>"+ZPI18N.getString("zp.paesign.signers")+"</th><th>"+ZPI18N.getString("zp.paesign.completedsigner")+"</th> <th>"+ZPI18N.getString("zp.datesent",new Array(""))+'</th> <th width="350">'+ZPI18N.getString("zp.status")+"</th> </tr>",pageId.find("#esign_tablehead").append(header),void 0!=resultData&&void 0!=resultData.statusArr&&resultData.statusArr.length>0){let tbodyHtml="";for(var index=0;index<resultData.statusArr.length;index++){let data=resultData.statusArr[index],row='<tr id="'+data.appraisalDocId+'_appraisalDoc">';row+='<td width="300" onclick="PMSESign.showEsignInterationView(\''+data.agrementId+"','"+data.appraisalDocId+'\')"> <div class="zpl_em"> <div class="zpl_emimg"><img src="'+data.empPhoto+'"> </div> <div class="zpl_emdts"> <div><em>'+ZSEC.Encoder.encodeForHTML(data.empId)+" - </em><b>"+ZSEC.Encoder.encodeForHTML(data.name)+"</b></div> </div> </div> </td> <td>"+Object.keys(data.signerlist).length+"</td>",void 0!=data.signedList?row+="<td>"+Object.keys(data.signedList).length+"</td>":row+="<td></td>",row+="<td>"+data.sendDate+"</td>",row+='<td id="'+data.appraisalDocId+'_Statustd">',row+=PMSESign.getEsignRequestStatusDiv(data),row+="</td>",tbodyHtml+=row+="</tr>",(row=$(row)).data("dataval",data)}pageId.find("#esign_tbody").append(tbodyHtml),pageId.find("#esign_btmBanner").removeClass("zpl_DNI"),PMSESign.esignStatusListingBtm(resultData.statusArr.length,resultData.hasNext),PMSESign.constructPageBreadCrumb()}else PMSESign.esignListingNoData()},constrctSignerlistTd:function(signerObj,appraisalDocId,type){let row="";for(let index=0;index<Object.keys(signerObj).length;index++){let level=index+1+"",signerArr=signerObj[level];if(void 0!=signerArr&&signerArr.length>0){let mailId=signerArr[0];if(row+="<div "+(index>0?'style="padding-top: 5px;"':"")+'><div class="zpl_tg"><span title="'+ZPI18N.getString("zp.level")+" "+level+'">'+level+"</span></div>",row+='<div class="zpl_tg"><span title="'+mailId+'">'+mailId+"</span></div>",signerArr.length>1){let moreActionid="moreAction_"+appraisalDocId+"_"+type;row+='<div id="'+moreActionid+'" onclick="PMSESign.showMoreRecepients(\''+signerArr+"','"+moreActionid+'\');" class="zpl_tg"><span>+'+(signerArr.length-1)+"</span></div>"}row+="</div>"}}return row},showMoreRecepients:function(signerArr,forElementId){var recpNameArr=signerArr.toString().split(","),recpList=[];for(i=1;i<recpNameArr.length;++i)recpList.push({id:i,label:recpNameArr[i]});var divId="apr_to_Recep";ZPeopleComponents.isComponent("#"+divId)&&(ZPeopleComponents.menu($("#"+divId)).destroy(),$("#"+divId).remove());var tokenObj={direction:"bottom",displayType:"box",contentType:"text"};tokenObj.forElement="#"+forElementId,ZPeopleComponents.createMenu(divId,recpList,tokenObj),ZPeopleComponents.menu("#"+divId).show()},esignListingNoData:function(){let pageId=Layout.Page.container;PMSESign.hideFilterBreadCrumb(),pageId.find("#esign_btmBanner").addClass("zpl_DNI"),pageId.find("#esign_tbody").html(""),pageId.find("#esign_tablehead").html(""),CardMessage.setNoData(pageId.find("#esign_tbody"),{text:ZPI18N.getString("zp.norecfound"),className:"zp_nd_nodata",isAppend:!0})},esignStatusListingBtm:function(selectedCount,isNextAvailable){let pageID=paCommonUtil.getLayout();pageID.find("#esign_btmBanner").removeClass("zpl_DNI"),pageID.find("#esign_viewPageCount").text(PMSESign.REQUESTLIST_SINDEX+" - "+(PMSESign.REQUESTLIST_SINDEX+(selectedCount-1))),pageID.find("#esign_pagination").show(),isNextAvailable?(pageID.find("#esign_pagenext").removeClass("disabled").addClass("blu"),pageID.find("#esign_pagenext").attr("onclick","PMSESign.getNextSetesign();")):(pageID.find("#esign_pagenext").removeClass("blu").addClass("disabled"),pageID.find("#esign_pagenext").attr("onclick","")),1!==PMSESign.REQUESTLIST_SINDEX&&0!==PMSESign.REQUESTLIST_SINDEX?(pageID.find("#esign_pageprev").removeClass("disabled").addClass("blu"),pageID.find("#esign_pageprev").attr("onclick","PMSESign.getPreviousSetesign();")):(pageID.find("#esign_pageprev").removeClass("blu").addClass("disabled"),pageID.find("#esign_pageprev").attr("onclick",""))},getPreviousSetesign:function(){let pageId=paCommonUtil.getLayout();PMSESign.REQUESTLIST_SINDEX=PMSESign.REQUESTLIST_SINDEX-parseInt(ZPeopleComponents.select(pageId.find("#esign_perpage")).getValue()),pageId.find("#esign_pageprev").removeAttr("onclick"),PMSESign.getEsignRequestList()},getNextSetesign:function(){let pageId=paCommonUtil.getLayout();PMSESign.REQUESTLIST_SINDEX=PMSESign.REQUESTLIST_SINDEX+parseInt(ZPeopleComponents.select(pageId.find("#esign_perpage")).getValue()),pageId.find("#esign_pagenext").removeAttr("onclick"),PMSESign.getEsignRequestList()},clearSelectedFilter:function(){let pageId=Layout.Page.container;ZPeopleComponents.select(pageId.find("#esign_cycleFilter")).setValue(PMSESign.DEFAULT_CONFIGID),ZPeopleComponents.select(pageId.find("#esign_StatusFilter")).setValue("0"),PMSESign.getEsignRequestList(!0)},constructPageBreadCrumb:function(){let pageId=Layout.Page.container;PMSESign.hideFilterBreadCrumb();let filterObject=PMSESign.constructBreadCrumbHTML();filterObject&&(pageId.find("#esign_selectedfltrlst").html(filterObject),pageId.find("#esign_selectedfltr").removeClass("zpl_DNI"),pageId.find("#esign_filtercont").addClass("zpl_fltrvwfxd"),pageId.find("#esign_fltr_clearall").unbind(),pageId.find("#esign_fltr_clearall").on("click",function(){PMSESign.clearSelectedFilter()}),$("[name=BreadCrumbElement]").unbind(),$("[name=BreadCrumbElement]").on("click",function(){PMSESign.onclickBreadCrumb(event,this)}))},onclickBreadCrumb:function(){let filterFieldId=$(event.target).attr("id");if(void 0!==filterFieldId&&"filterTypeClose"===filterFieldId){let filterId=$(event.target).attr("filterid");"filterTypeClose"===filterFieldId&&PMSESign.removeSelectedFilter(filterId)}else PMSESign.toggleFilter()},removeSelectedFilter:function(filterId){let pageId=Layout.Page.container;"esign_cycleFilter"==filterId?ZPeopleComponents.select(pageId.find("#esign_cycleFilter")).setValue(PMSESign.DEFAULT_CONFIGID):"esign_StatusFilter"==filterId&&ZPeopleComponents.select(pageId.find("#esign_StatusFilter")).setValue("0"),PMSESign.getEsignRequestList(!0)},constructBreadCrumbHTML:function(){let pageId=Layout.Page.container,selectedMRFilter={},cycleId=ZPeopleComponents.select(pageId.find("#esign_cycleFilter")).getValue(),cycleIndex=PMSESign.ESIGN_CYCLES.findIndex(obj=>obj.configId===cycleId),periodName="";"-1"!=cycleIndex&&(periodName=PMSESign.ESIGN_CYCLES[cycleIndex].periodName),selectedMRFilter.cycleNames=new Array,selectedMRFilter.cycleNames[0]=periodName;let status=ZPeopleComponents.select(pageId.find("#esign_StatusFilter")).getValue();selectedMRFilter.statusName=new Array,selectedMRFilter.statusName[0]=PMSESign.esignStatus[parseInt(status)];let html="",constructFilter=(filterType,headerName,filterElement,filterElementType,isDefaultValue)=>{let filterValues=selectedMRFilter[filterType];if(filterValues.length>0){let subHtml="";filterValues.length>1&&(subHtml='<sub data-menu-id="filterAdditional_list" id="filterCount" filterId='+filterElement+">+"+(filterValues.length-1)+"</sub>");let removeHtml="";isDefaultValue||(removeHtml='<a class="PI_cls" id="filterTypeClose" filterId="'+filterElement+'" title="'+ZPI18N.getString("zp.remove")+'"></a>'),html+='<li name="BreadCrumbElement" fieldObj=\''+JSON.stringify({filterElementId:filterElement,filterElementType:filterElementType})+"'><label>"+headerName+':</label><span title="'+filterValues[0]+'">'+filterValues[0]+"</span>"+subHtml+removeHtml+"</li>"}};return constructFilter("cycleNames",ZPI18N.getString("zp.appraisalcycle"),"esign_cycleFilter","selectField",cycleId==PMSESign.DEFAULT_CONFIGID),constructFilter("statusName",ZPI18N.getString("zp.status"),"esign_StatusFilter","selectField","0"==status),html},hideFilterBreadCrumb:function(){let pageId=Layout.Page.container;pageId.find("#esign_filtercont").removeClass("zpl_fltrvwfxd"),pageId.find("#esign_selectedfltrlst").empty(),pageId.find("#esign_selectedfltr").addClass("zpl_DNI")},getEsignRequestStatusDiv:function(data){let row="";if(void 0!=data.appraisalEsignstatus)if(void 0==data.appraisalEsignstatus||"1"!=data.appraisalEsignstatus&&"2"!=data.appraisalEsignstatus&&"4"!=data.appraisalEsignstatus&&"7"!=data.appraisalEsignstatus&&"8"!=data.appraisalEsignstatus&&"9"!=data.appraisalEsignstatus)if(void 0!=data.isFullySigned&&data.isFullySigned)if(void 0!=data.isAllowedtoViewDownload&&data.isAllowedtoViewDownload){let mode="AppraisalLetter";row+='<div class="zpl_flex-a-c zpl_justify-between"><span><a onclick="PMSESign.appraisalletterpreview(\''+data.appraisalDocId+"','"+data.signedDocID+"','"+mode+"','"+data.signedDocName+'\');" class="zpl_link">'+ZPI18N.getString("zp.view")+'</a></span><div class="zpl_hvr"><i class="PI_downld" onclick="PMSESign.downloadSignedDocument(\''+data.appraisalDocId+"');\"></i></div></div>"}else row+=""+data.appraisalEsignstatusStr;else void 0!=data.isCurrUserSigner&&data.isCurrUserSigner?void 0!=data.isEmbeddedURLSupported&&data.isEmbeddedURLSupported?row+="<a onclick=\"PMSESign.getSignUrl('"+data.appraisalDocId+"');\">"+ZPI18N.getString("zp.sign")+"</a>":row+=ZPI18N.getString("zp.paesign.watingforyoutosign"):void 0!=data.isOneOfTheSigner&&data.isOneOfTheSigner?void 0!=data.isCurrentUserSigned&&data.isCurrentUserSigned?row+=ZPI18N.getString("zp.paesign.signedwatingforotherstosign")+"":row+=ZPI18N.getString("zp.paesign.previouslevelyettosign"):row+=""+data.appraisalEsignstatusStr;else row=""+data.appraisalEsignstatusStr;return row},wmsCallback:function(data){"ESIGNSIGNER"==data.mode&&PMSESign.esignSignerCallback(data)},esignSignerCallback:function(data){let esigndata={};esigndata.appraisalDocId=data.aprdocid,esigndata.appraisalEsignstatus=data.sts,esigndata.appraisalEsignstatusStr=data.stsstr,esigndata.isFullySigned=data.FS,esigndata.isCurrUserSigner=data.CS,esigndata.isOneOfTheSigner=data.OS,esigndata.isCurrentUserSigned=data.CUSN,esigndata.isEmbeddedURLSupported=data.isEmbed,esigndata.employee=data.apremp,esigndata.isAllowedtoViewDownload=data.isAlVD;let html=PMSESign.getEsignRequestStatusDiv(esigndata),id=esigndata.appraisalDocId+"_Statustd",elements=$('[id="'+id+'"]');for(let index=0;index<elements.length;index++){let element=elements[index];$(element).html(html)}if(data.issucs){let rowId="undefined_Statustd",apprviewelements=$('[id="appraisalviewlst"]');for(let index=0;index<apprviewelements.length;index++){let element=apprviewelements[index],rowelement=$(element).find("#truser_"+esigndata.employee);$(rowelement).find("#"+rowId).html(html),$(rowelement).find("#"+rowId).attr("id",id),$(rowelement).find("#publishdiv").find("span").html(ZPI18N.getString("zp.published"))}}},updatePublishedStatusFromWS:function(data){ZPeople.Message.success(ZPI18N.getString("zp.ratingpublishsuccess"))},updateUnPublishedStatusFromWS:function(data){ZPeople.Message.success(ZPI18N.getString("zp.ratingpublishsuccess"))},appraisalletterpreview:function(docId,fileID,fpath,fname){let displayName=fname;var lightBoxObj=new LightBox(ZSEC.Encoder.encodeForHTML(displayName));lightBoxObj.isImage=!1,lightBoxObj.needPrint=!1,lightBoxObj.needDownload=!0,lightBoxObj.setDownloadCallback(function(){PMSESign.downloadFile(docId,fpath)});let url="/"+portalName+"/pdfViewer.zp?mode=agreement&fileId="+fileID;lightBoxObj.viewUrl=url,lightBoxObj.show()},appraisalLetterOnlyPreview:function(docId,fileID,fpath){let displayName=ZPI18N.getString("zp.paesign.appraisalletter");var lightBoxObj=new LightBox(displayName);lightBoxObj.isImage=!1,lightBoxObj.needPrint=!1,lightBoxObj.needDownload=!0,lightBoxObj.setDownloadCallback(function(){PMSESign.downloadFile(docId,fpath)});let url="/"+portalName+"/pdfViewer.zp?mode=Performance&recordId="+docId;lightBoxObj.viewUrl=url,lightBoxObj.show()},downloadFile:function(docId,fpath){PMSESign.downloadSignedDocument(docId)},getAppraisalLetterDiv:function(data){if(10==data.appraisalEsignstatus&&void 0!=data.isAllowedtoViewDownload&&data.isAllowedtoViewDownload){let mode="AppraisalLetter";return'<div class="zpl_flex-a-c zpl_justify-between"><span> <a onclick="PMSESign.appraisalLetterOnlyPreview(\''+data.appraisalDocId+"','"+mode+'\');" class="zpl_link">'+ZPI18N.getString("zp.view")+'</a>  </span><div class="zpl_hvr"><i class="PI_downld" onclick="PMSESign.downloadSignedDocument(\''+data.appraisalDocId+"');\"></i></div></div>"}return void 0!=data.docGenInProgress&&data.docGenInProgress?ZPI18N.getString("zp.paesign.docgeninprogress"):4==data.appraisalEsignstatus?ZPI18N.getString("zp.paesign.docgenfailed"):""},isAppraisalLetterEnabled:function(cycleData,configId){let cycleIndex=cycleData.findIndex(obj=>obj.configId===configId);return"-1"!=cycleIndex&&cycleData[cycleIndex].isAppraisalLetterEnabled},isAppraisalEsignEnabled:function(cycleData,configId){let cycleIndex=cycleData.findIndex(obj=>obj.configId===configId);return!("-1"==cycleIndex||!cycleData[cycleIndex].isAppraisalLetterEnabled||!cycleData[cycleIndex].isAppraisalEsignEnabled)},isAppraisalletterSentActionType:function(cycleData,configId){let cycleIndex=cycleData.findIndex(obj=>obj.configId===configId);return"-1"!=cycleIndex&&void 0!=cycleData[cycleIndex].appraisalLetterSentActionType?cycleData[cycleIndex].appraisalLetterSentActionType:-1},openEsignRecallSlider:function(resultData,params,isExclude){let successCnt=0,successTxt=ZPI18N.getString("zp.paesign.unpublishedreview"),failedCnt=void 0!=resultData.unPublishNotAllowedList?resultData.unPublishNotAllowedList.length:0;successCnt=JSON.parse(params.userErecnoArr).length-failedCnt;let failedTxt=ZPI18N.getString("zp.paesign.unpublishfailed"),excludeTxt=ZPI18N.getString("zp.paesign.unpublishsigneduserrestrictmsg");const sliderTab=new Tab("notpublishedOrExcludedList",function(){$("#cardnotpublishedOrExcludedList").append(ZPeople.LOADING_HTML);var _htm='<div class="zpl_info" style="margin-bottom: 20px;"><div><p id="esignRestrictionMessage">'+excludeTxt+"</p></div></div>";_htm+='<div class="zpl_btnmnu"><div class="zpl_nowrap"><ul class="zpl_grpmnulnelst">',_htm+="<li>"+successTxt+'<b class="ylw id="successCount">'+successCnt+"</b></li>",_htm+="<li>"+failedTxt+'<b class="ylw" id="failedCount">'+failedCnt+"</b></li></ul></div></div>",_htm+='<div class="zpl_crd">',_htm+='<div class="zpl_crdcnt">',_htm+='<div class="zpl_secn">',_htm+='<div class="zpl_tblres">',_htm+='<table class="zpl_tbl wd100_per" id="ExcUnpubRecallEmpDiv"><thead>',_htm+='<tr><th style="width: 8%;">',_htm+='<div class="zcheckbox" id="excludeUnpubRecallEmpChkBox" onclick="PMSOperation.enableDisableAll(this)"><input id="excunpubrecall" type="checkbox" name="check" class="zcheckbox__helper">',_htm+='<label for="excunpubrecall" class="zcheckbox__label"></label></div></th>',_htm+='<th><button type="button" class="zlabel zlabel--red zlabel--small" id="esignPublishExcludeRestrictionButton" onclick="PMSESign.recallEsignLetterconfirm(\'2\')" value="Recall" disabled>'+ZPI18N.getString("zp.lms.course.unpublish")+"</button></th></tr>",_htm+='</thead><tbody id="esignPublishExcludeRestrictionBody"></tbody></table></div></div></div></div>',$("#cardnotpublishedOrExcludedList").html(_htm)});let sliderTitle=isExclude?ZPI18N.getString("zp.excludeSummary"):ZPI18N.getString("zp.paesign.unpublishsummary");PMSESign.notpublishedOrExcludedListSliderObj=new sliderModal(sliderTitle,sliderTab),PMSESign.notpublishedOrExcludedListSliderObj.setCloseCallback(function(){PMSESign.notpublishedOrExcludedListSliderObj.remove(),PMSESign.notpublishedOrExcludedListSliderObj={}}),PMSESign.notpublishedOrExcludedListSliderObj.construct(),$(PMSESign.notpublishedOrExcludedListSliderObj.sliderDiv).find("#sliFootDiv").addClass("zpl_DNI"),PMSESign.constructUnpublishNotExcludedUserList(resultData)},constructUnpublishNotExcludedUserList:function(resultData){var row="";$.each(resultData.unPublishNotAllowedList,function(index,data){row+=PMSESign.constructRecallRow(data,"unpublish")}),$(PMSESign.notpublishedOrExcludedListSliderObj.sliderDiv).find("#esignPublishExcludeRestrictionBody").html(row)},constructRecallRow:function(data,mode){let row='<tr id="'+data.esignRecordId+'">';return void 0!=mode&&"signedsection"==mode?row+="":(row+='<td><div class="zcheckbox">',data.isEsignCompleted?row+='<input id="Esign_'+data.esignRecordId+'" userErecno="'+data.recordId+'" type="checkbox" name="check" class="zcheckbox__helper disabled" disabled>':row+='<input id="Esign_'+data.esignRecordId+'" userErecno="'+data.recordId+'" type="checkbox" name="check" class="zcheckbox__helper" onclick="PMSESign.recallEsignDocumentCheckBox(this,\''+mode+"')\">",row+='<label for="Esign_'+data.esignRecordId+'" class="zcheckbox__label"></label></div></td>'),row+='<td><div class="zpl_em">',row+='<div class="zpl_emimg"><img src="'+data.empPhoto+'"></div>',row+='<div class="zpl_emdts"><div><em>'+ZSEC.Encoder.encodeForHTML(data.empId)+" - </em><b>"+ZSEC.Encoder.encodeForHTML(data.name)+"</b></div></div></div> </td> </tr>"},recallEsignDocumentCheckBox:function(obj,mode){let isChecked=$(obj).is(":checked");"unpublish"==mode?isChecked?$(PMSESign.notpublishedOrExcludedListSliderObj.sliderDiv).find("#esignPublishExcludeRestrictionButton").prop("disabled",!1):$(PMSESign.notpublishedOrExcludedListSliderObj.sliderDiv).find("#esignPublishExcludeRestrictionButton").prop("disabled",!0):"Exclude"==mode&&(isChecked?$(PMSOperation.noUserExcludeSliderObj.sliderDiv).find("#excludeRecallBtn").prop("disabled",!1):$(PMSOperation.noUserExcludeSliderObj.sliderDiv).find("#excludeRecallBtn").prop("disabled",!0))},recallEsignDocumentSignle:function(obj){let recordIds=new Array;recordIds.push($(obj).parent().attr("id").replace("Esign_","")),PMSESign.recallEsignLetterRequest(recordIds)},recallEsignDocument:function(mode){let selectedDiv=void 0!=mode&&"Exclude"==mode?$(PMSOperation.noUserExcludeSliderObj.sliderDiv).find("#excludeRecallTbody input:checked"):$(PMSESign.notpublishedOrExcludedListSliderObj.sliderDiv).find("#esignPublishExcludeRestrictionBody input:checked"),recordIds=new Array;for(var index=0;index<selectedDiv.length;index++){let recordId=$(selectedDiv[index]).attr("id").replace("Esign_","");recordIds.push(recordId)}PMSESign.recallEsignLetterRequest(recordIds,mode)},getEsignInfoSlider:function(agreementId,appraisalDocId){let params={mode:"getEsignInfo",conreqcsr:csrfToken};params.agreementId=agreementId,ZPeople.Request.send("/performanceConfig.zp",params,PMSESign.constructEsignSlider,agreementId)},constructEsignSlider:function(resultData,param,agreementId){if(Object.keys(resultData).length>0){var data=new Array;data[0]={},data[1]=resultData,Zsign.constructDocumentInfo(data,param,agreementId),$("#esign_detail").find("#signOptList").addClass("zpl_DNI")}},sendAppraisalLetterToApplicableUser:function(configId){var infoPopUp=new InfoAlertMessage;infoPopUp.title="sendLetterBulk",infoPopUp.despcription="sendLetterBulk description",infoPopUp.yesButtonText=ZPI18N.getString("zp.confirm"),infoPopUp.cancelButtonText=ZPI18N.getString("zp.cancel"),infoPopUp.callback=function(){PMSESign.sendAppraisalLetterBulk(configId)},infoPopUp.show()},sendAppraisalLetterBulk:function(cycleId){let params={mode:"sendAppraisalLetterForAllUser",conreqcsr:csrfToken};params.cycleId=cycleId,ZPeople.Request.send("/performanceConfig.zp",params,PMSESign.constructBulkSentResponse)},constructBulkSentResponse:function(){ZPeople.Message.success("success")},getMyAppraisalLetter:function(){let params={mode:"getmyAppraisalletter",conreqcsr:csrfToken};ZPeople.Request.send("/performanceConfig.zp",params,PMSESign.constructgetMyAppraisalletterResponse)},constructgetMyAppraisalletterResponse:function(resultData){let pageId=Layout.Page.container;if(pageId.find("#appraisalLetterList").html(""),void 0!=resultData.appraisalLetter&&resultData.appraisalLetter.length>0){let header='<table class="zpl_tbl"><thead><tr><th>'+ZPI18N.getString("zp.appname")+'</th><th width="150">'+ZPI18N.getString("zp.paesign.appraisalletter")+'</th></tr></thead><tbody id="appraisalLetter_tbody">';for(let index=0;index<resultData.appraisalLetter.length;index++)header+="<tr><td><span>"+ZSEC.Encoder.encodeForHTML(resultData.appraisalLetter[index].cyclename)+"</span></td> <td>",void 0!=resultData.appraisalLetter[index].isAppraisalEsignEnabled&&resultData.appraisalLetter[index].isAppraisalEsignEnabled?header+=PMSESign.getEsignRequestStatusDiv(resultData.appraisalLetter[index]):header+=PMSESign.getAppraisalLetterDiv(resultData.appraisalLetter[index]),header+="</td></tr>";header+="</tbody></table>",pageId.find("#appraisalLetterList").html(header)}else CardMessage.setNoData(pageId.find("#appraisalLetterList"),{text:ZPI18N.getString("zp.paesign.appraisalletternodata"),className:"zp_nd_nodata",isAppend:!0})}};