var ActionListConfiguration={ATTENDANCE:{callback:()=>AttActionList.AttendanceReminder.construct,loadFile:["attActionList.min.js"]},APPROVAL:{callback:()=>ActionList.Card.Approval.construct},HOLIDAY:{callback:()=>TAMSUtil.UserSpace.HoliDays.construct},FILES:{callback:()=>ActionList.Card.Files.construct,loadFile:["fileshome.min.js"]},LMS_ENROLLED:{callback:()=>lmsActionCard.constructLearnerCourseEnrollmentCard,loadFile:["lmsActionCard.min.js"]},LMS_MANAGEREVAL:{callback:()=>lmsActionCard.constructManagerEvaluationCard,loadFile:["lmsActionCard.min.js"]},LMS_SESSION:{callback:()=>lmsActionCard.constructSessionCard,loadFile:["lmsActionCard.min.js"]},REVISIONLETTER:{callback:()=>ActionList.Card.RevLetter.construct},COMPHIKEPUSH:{callback:()=>ActionList.Card.CompHikePush.construct},SHIFT:{callback:()=>AttActionList.Shift.construct,loadFile:["attActionList.min.js"]},ATT_STATUS:{callback:()=>ActionList.Card.AttStatus.construct},ANNOUNCEMENT:{callback:()=>ActionList.Card.Announcement.construct},FEEDS:{callback:()=>ActionList.Card.Feeds.construct},PENDING_JOBS:{callback:()=>Timetracker.UserSpace.ActionListPendingJobs.construct,loadFile:["timetracker5_0.1.min.js"]},ABSENT:{callback:()=>TAMSUtil.UserSpace.Absent.construct,loadFile:["regularization.min.js"]},SURVEY:{callback:()=>ActionList.Card.Survey.construct,loadFile:["ee_operation.min.js"]},ATTENDANCE_TEAM_CHECKINREPORTS:{callback:()=>ActionList.Card.SmartCard.construct},LEAVE_NOTIFICATION:{callback:()=>ActionList.Card.SmartCard.construct},COMPENSATION_DEPTCOSTREPORTS:{callback:()=>ActionList.Card.SmartCard.construct},ATTENDANCE_CONTRIBUTORS:{callback:()=>ActionList.Card.SmartCard.construct},HR_PROCESS:{callback:()=>TransferUserSpace.constructCards,loadFile:["framework.userspace.min.js"]},TIMESHEETS:{callback:()=>Timetracker.UserSpace.ActionListTimesheets.construct,loadFile:["timetracker5_0.1.min.js"]},REPORTS:{callback:()=>ActionList.Card.Reports.construct},GOALS:{callback:()=>GoalActionCard.construct,loadFile:["pms.myspace.min.js"]},WORK_ANNIVERSARY:{callback:()=>FormsUserSpaceEntity.constructSelfContent,loadFile:["framework.userspace.min.js"]},COLLEAGUES_WORK_ANNIVERSARY:{callback:()=>FormsUserSpaceEntity.constructColleagueContent,loadFile:["framework.userspace.min.js"]},JOBSCHEDULE:{callback:()=>Timetracker.UserSpace.ActionListJobSchedule.construct,loadFile:["timetracker5_0.1.min.js"]},TIMELOG_REMINDER:{callback:()=>Timetracker.UserSpace.ActionListLogTime.construct,loadFile:["timetracker5_0.1.min.js"]},TIMESHEET_REMINDER:{callback:()=>Timetracker.UserSpace.ActionListSubmitTimesheet.construct,loadFile:["timetracker5_0.1.min.js"]},FORMS_RECORD_ACTIONS:{callback:()=>RecordsUserSpaceEntity.construct,loadFile:["framework.userspace.min.js"]},CASES:{callback:()=>CasesActivity.constructSingleCard,loadFile:["casesv5.min.js"]},PEOPLEDEMO:{callback:()=>ActionList.Component.peopleDemoCard}},ActionList={requestInitiated:!1};ActionList.Card={data:{},actionListContWrap:null,wrapperEle:null,isInit:!0,handleCards:async function(actionListCnt,actionListData,param){if(actionListData.welcomecard&&ActionList.Card.actionListContWrap.find("#actionListWelcomeCard").append(ActionList.Component.welcomeCard(actionListData.welcomecard)),actionListData.cardList&&0!=actionListData.cardList.length){for(cardData of(ZPeople.FireScroll.setParam("moreKey",actionListData.moreKey,"ACTIONLIST"),actionListData.cardList))await ActionList.Card.createCardWrapper(cardData);actionListData.hasMore&&(ZPeople.FireScroll.getFireScrollPropertie("ACTIONLIST").triggered=!1)}else ZPUtil.Validation.isEmpty(param.moreKey)&&!actionListData.welcomecard&&actionListCnt.append('<div id="emptPage" class="zpl_crd zpl_nodata"> <div class="zpl_crdcnt"> <div class="zpl_Emptydata"> <div> <div class="zpl_emptimg zp_nd_nodata"></div> <h4>'+ZPI18N.getString("zp.noactionsinlist")+"</h4> <p></p> </div> </div> </div> </div>")},createCardWrapper:async function(cardData,prepend){var cardConf;if(cardData&&(cardConf=ActionListConfiguration[cardData.entityName])){var containerId=ActionList.Card.getCardId(cardData);ActionList.Card.wrapperEle.find("#"+containerId).length>0?ActionList.Card.wrapperEle.find("#"+containerId).empty():prepend?ActionList.Card.wrapperEle.prepend(`<div id="${containerId}" ${cardData.hasOwnProperty("id")?'card-id="'+cardData.id+'"':""} tabindex="0"></div>`):ActionList.Card.wrapperEle.append(`<div id="${containerId}" ${cardData.hasOwnProperty("id")?'card-id="'+cardData.id+'"':""} tabindex="0"></div>`),ActionList.Card.wrapperEle.find("#"+containerId).append(ZPeople.LOADING_HTML),await new Promise((resolve,reject)=>{var fileArr=[];void 0!==cardConf.loadFile&&(fileArr=cardConf.loadFile),Layout.PageUtil.loadFiles(fileArr,function(){try{resolve(),ActionList.Card.wrapperEle.find("#"+containerId).empty(),cardConf.callback()(ActionList.Card.wrapperEle.find("#"+containerId),cardData)}catch(e){ActionList.Card.wrapperEle.find("#"+containerId).remove(),console.log(e)}})})}},init:function(actionListCnt){ActionList.Card.actionListContWrap=actionListCnt,ActionList.Card.isInit&&!ActionList.requestInitiated&&(ActionList.requestInitiated=!0,ZPeople.Request.send("userSpaceAction.zp",{mode:"getData"},function(response,param){ActionList.Card.isInit=!1,ActionList.requestInitiated=!1,ActionList.Card.actionListContWrap.empty(),actionListCnt.append("<div id='actionListWelcomeCard'></div><div id='cardWrapper' class='DN'></div>"),ActionList.Card.wrapperEle=actionListCnt.find("#cardWrapper"),ActionList.Card.data=response,ActionList.Card.handleCards(ActionList.Card.wrapperEle,response,param),actionListCnt.find("#pageloader").remove(),ActionList.Card.wrapperEle.removeClass("DN")},{},function(){ActionList.requestInitiated=!1}))},getMoreCard:()=>{let moreKeyVal=ZPeople.FireScroll.getFireScrollPropertie("ACTIONLIST").moreKey;moreKeyVal&&ZPeople.Request.send("userSpaceAction.zp",{moreKey:moreKeyVal,mode:"getData"},function(response,param){ActionList.Card.actionListContWrap.find("#pageloader").remove(),ActionList.Card.handleCards(ActionList.Card.wrapperEle,response,param)})},closeCard:function(entityName){ZPeople.Request.send("userSpaceAction.zp",{mode:"hideCard",entityName:entityName},function(response){response.success?ActionList.Card.wrapperEle.find("#actionList_"+entityName).remove():ZPeople.Message.showFailureMsg(response.error)})},getCardId:function(cardData){var containerId="actionList_"+cardData.entityName;return cardData.hasOwnProperty("id")&&(containerId=containerId+"-"+cardData.id),containerId},handleWMSCallback:function(cardData){if(cardData.erecno==erecno&&void 0!=ActionList.Card.wrapperEle)if("update"==cardData.userSpaceCardMode)ActionList.Card.createCardWrapper(cardData,!0);else if("remove"==cardData.userSpaceCardMode){var containerId=ActionList.Card.getCardId(cardData);ActionList.Card.wrapperEle.find("#"+containerId).remove()}},getCardConfByEntityName:function(entityName){return ActionListConfiguration[entityName]},Survey:{construct:function(cardContainer,data){ZDOMEEAPI.api.actionListInit(cardContainer,data)}},Approval:{construct(cardContainer,data){data.isPhotoTransfer&&(data.formDispName=ZPI18N.getString("zp.photochange"));var card=`<div class="zpl_msplst zpl_mspwelc"><div name="approval_card" id="${data.recordId}" isPhotoTransfer = ${data.isPhotoTransfer} formid="${data.formId}" formdisplayname="${ZSEC.Encoder.encodeForHTML(data.formDispName)}" tablename="${data.tableName}" status="-1" recordownererecno="${data.recordowner.erecno}"><div class="zpl_msp-dts CP"><div><div class="zpl_em"><div class="zpl_emimg" popup="user" empid="${data.recordowner.zuid}"><img alt="" src="${ZPeople.getUserDetailsById(data.recordowner.erecno).originalphoto}"></div><div class="zpl_emdts zpl_ellipsis"><div><em>${ZSEC.Encoder.encodeForHTML(data.recordowner.employeeid)} - </em><b>${ZSEC.Encoder.encodeForHTML(data.recordowner.name)}</b></div><div><em>has made a request for </em><b>${ZSEC.Encoder.encodeForHTML(data.formDispName)}</b></div></div></div></div></div><div><div class="zpl_compoffar"><em>${ZPI18N.getString("zp.raisedon")}</em><div class="d-flexclmcap10"><div><b>${data.submittedOn}</b></div></div></div></div><div id="zp_approval_actiondiv" class="zpl_msp-act"><div id="zp_approval_approvereject" class="zpl_hvr"><button class="zlabel zlabel--blue zlabel--medium zlabel--outline" approvaltype="1">${ZPI18N.getString("zp.approve")}</button><button class="zlabel zlabel--red zlabel--medium zlabel--outline" approvaltype="0">${ZPI18N.getString("zp.reject")}</button></div></div></div></div>`;cardContainer.append(card),ApprovalList.addClickEvent(cardContainer),ApprovalHome.updateApprovalCount()}},AttStatus:{reloadStatusCnt:void 0,actionListMode:void 0,isFirstTimeLoad:!0,STATUSLIST:[ZPI18N.getString("zp.officein"),ZPI18N.getString("zp.remotein"),ZPI18N.getString("zp.in"),ZPI18N.getString("zp.defprestat"),ZPI18N.getString("zp.yetToCheckIn"),ZPI18N.getString("zp.out"),ZPI18N.getString("zp.break"),"On Duty","",ZPI18N.getString("zp.weekend"),ZPI18N.getString("zp.statwknd"),ZPI18N.getString("zp.nonstatwknd"),""],colourCLass:["pfsbgbdr_onln","pfsbgbdr_onln","pfsbgbdr_onln","pfsbgbdr_onln","pfsbgbdr_out","pfsbgbdr_out","pfsbgbdr_out","pfsbgbdr_onduty","pfsbgbdr_lv","pfsbgbdr_wkend","pfsbgbdr_wkend","pfsbgbdr_wkend","pfsbgbdr_hlday"],URL:"/timeAttendance/teamcount",construct:function(cardContainer,statusDetails){ActionList.Card.AttStatus.isFirstTimeLoad=!1,ActionList.Card.AttStatus.STATUSLIST[12]=holiday_disName===ZPI18N.getString("zp.holidays")?ZPI18N.getString("zp.holiday"):holiday_disName,ActionList.Card.AttStatus.STATUSLIST[8]=ZPeople.Module.MODULE_DATA.attendance.formname,ActionList.Card.AttStatus.STATUSLIST[0]=ZPeople.Module.MODULE_DATA.attendance.officeINdName?ZPeople.Module.MODULE_DATA.attendance.officeINdName:ActionList.Card.AttStatus.STATUSLIST[0],ActionList.Card.AttStatus.STATUSLIST[1]=ZPeople.Module.MODULE_DATA.attendance.remoteINdName?ZPeople.Module.MODULE_DATA.attendance.remoteINdName:ActionList.Card.AttStatus.STATUSLIST[1];var showTeamAvail=statusDetails.showTeamAvail;cardContainer.empty();var html='<div class="zpl_msplst zpl_mspgroup"><div><span class="PI_s_attnd icn"></span>';html+='<div class="zpl_mspacts_rht"><a class="zpl_link" onclick="ActionList.Card.AttStatus.viewAll()">'+ZPI18N.getString("zp.viewall")+"</a></div>",html+='<div><div class="zpl_msp-dts"><div class="zpl_msp-name"><div>';var myTeam=showTeamAvail?ZPI18N.getString("zp.teamavail"):ZPI18N.getString("zp.drepavail");statusDetails.showSubordinateStatus?html+='<span class="zpl_msp-title zpl_ellipsis"><a class="d-inle-flex zpl_drpdwn-js"><span id="statusCountFilter" onclick="ActionList.Card.AttStatus.showHideStatusFilter()">'+myTeam+"</span></a>":html+='<span id="statusCountFilter" class="zpl_msp-title">'+myTeam+"</span>",html+='</span></div></div></div><div class="zpl_mspace-gap" id="countDivParent"></div>',html+="</div></div></div>",cardContainer.append(html),statusDetails.showSubordinateStatus&&(html='<div id="statusCountFilterOptions" class="zpl_drpdwn zmenu zmenu--iconwithtext"><ul>',showTeamAvail&&(html+='<li data-action="ActionList.Card.AttStatus.getTeamMembersCount"><span class="zmenu__text">'+myTeam+"</span></li>"),html+='<li data-action="ActionList.Card.AttStatus.getDirectReporteesCount"><span class="zmenu__text">'+ZPI18N.getString("zp.drepavail")+"</span></li>",html+='<li data-action="ActionList.Card.AttStatus.getAllReporteesCount"><span class="zmenu__text">'+ZPI18N.getString("zp.arepavail")+"</span></li>",html+="</ul></div>",cardContainer.append(html),ZPeopleComponents.menu("#statusCountFilterOptions",{forElement:"#statusCountFilter",contentType:"text"})),ActionList.Card.AttStatus.STATUSLIST.forEach(function(currStat,index){let currStatData=statusDetails.statusCount[ZSEC.Encoder.encodeForHTML(currStat)];if(void 0!==currStatData){var html='<div class="zpl_mspace-lvecrd '+ActionList.Card.AttStatus.colourCLass[index]+'">';html+='<span class="d-flex d-flexclmcap5"><em>'+currStat+"</em><b>"+currStatData+"</b></span></div>",cardContainer.find("#countDivParent").append(html)}})},viewAll:function(){var page=settingsPage.container;if(page[0].id.includes("overview_actionlist")){var filter=page.find("#statusCountFilter").text();filter===ZPI18N.getString("zp.teamavail")?window.location.href="#attendance/team/members":filter===ZPI18N.getString("zp.drepavail")?(window.location.href="#attendance/team/reportees",ActionList.Card.AttStatus.actionListMode="1"):(window.location.href="#attendance/team/reportees",ActionList.Card.AttStatus.actionListMode="2")}},countReload:function(){var page=settingsPage.container;if(window.removeEventListener("mouseover",ActionList.Card.AttStatus.countReload),window.removeEventListener("focus",ActionList.Card.AttStatus.countReload),page[0].id.includes("overview_actionlist")){var filter=page.find("#statusCountFilter").text();filter===ZPI18N.getString("zp.teamavail")?ActionList.Card.AttStatus.getTeamMembersCount():filter===ZPI18N.getString("zp.drepavail")?ActionList.Card.AttStatus.getDirectReporteesCount():ActionList.Card.AttStatus.getAllReporteesCount()}},showHideStatusFilter:function(){ZPeopleComponents.menu("#statusCountFilterOptions").show()},getTeamMembersCount:function(){let filterParams={dataSelect:2,employee:erecno,viewMode:"count",mode:"members"};ActionList.Card.AttStatus.statusCountFilter(filterParams),settingsPage.container.find("#statusCountFilter").text(ZPI18N.getString("zp.teamavail"))},getDirectReporteesCount:function(){let filterParams={dataSelect:1,employee:erecno,viewMode:"count",mode:"reportees"};ActionList.Card.AttStatus.statusCountFilter(filterParams),settingsPage.container.find("#statusCountFilter").text(ZPI18N.getString("zp.drepavail"))},getAllReporteesCount:function(){let filterParams={dataSelect:2,employee:erecno,viewMode:"count",mode:"reportees"};ActionList.Card.AttStatus.statusCountFilter(filterParams),settingsPage.container.find("#statusCountFilter").text(ZPI18N.getString("zp.arepavail"))},statusCountFilter:function(filterParams){var params={module:"attendance"};params.filterParams=JSON.stringify(filterParams);var countDiv=settingsPage.container.find("#countDivParent");ZPeople.Request.send(ActionList.Card.AttStatus.URL,params,function(response,params){ActionList.Card.AttStatus.isFirstTimeLoad=!1,countDiv.empty(),ActionList.Card.AttStatus.STATUSLIST.forEach(function(currStat,index){let currStatData=response.data[ZSEC.Encoder.encodeForHTML(currStat)];if(void 0!==currStatData){var html='<div class="zpl_mspace-lvecrd '+ActionList.Card.AttStatus.colourCLass[index]+'"><span class="d-flex d-flexclmcap5"><em>'+currStat+"</em><b>"+currStatData+"</b></span></div>";countDiv.append(html)}})})}},Files:{construct:function(cardContainer,fileData){var entityId="filesEntity_"+fileData.entityId;if($.isEmptyObject(fileData))return!1;var contentwrap=$('<div class="zpl_msplst"></div>'),row=FilesHome.constructSingleCard(entityId,fileData);(row=$(row)).data("ldata",JSON.stringify(fileData)),contentwrap.append(row),cardContainer.append(contentwrap)}},RevLetter:{construct:function(cardContainer,revData){var content=$('<div class="zpl_crd"></div>');content.append(ActionList.Component.revLetterCard(revData)),cardContainer.append(content)},viewLetter:function(data){var erecno=data.erecNo,revId=data.revId,revLettName=data.revLettName;Compensation.RL.preview(revId,erecno,revLettName)},closeCard:function(entityName){ZPeople.Request.send("userSpaceAction.zp",{mode:"hideCard",entityName:entityName},function(response){response.success?ActionList.Card.wrapperEle.find("#actionList_"+entityName).remove():ZPeople.Message.showFailureMsg(response.error)})}},CompHikePush:{construct:function(cardContainer,CompHikeData){var content=$('<div class="zpl_crd"></div>');content.append(ActionList.Component.HikePushCard(CompHikeData)),cardContainer.append(content)},viewCompHike:function(data){Compensation.SalaryHikes.showHikeModal(data.rootId,!1,data)},closeCard:function(entityName){ZPeople.Request.send("userSpaceAction.zp",{mode:"hideCard",entityName:entityName},function(response){response.success?ActionList.Card.wrapperEle.find("#actionList_"+entityName).remove():ZPeople.Message.showFailureMsg(response.error)})}},SmartCard:{construct:function(cardContainer,data){var entity=data.smartCard_entityName;cardContainer.append(ActionList.Component.smartCardLetter(cardContainer,entity,data))},closeCard:function(entityName){ZPeople.Request.send("userSpaceAction.zp",{mode:"hideCard",entityName:entityName},function(response){response.success?ActionList.Card.wrapperEle.find("#actionList_"+entityName).remove():ZPeople.Message.showFailureMsg(response.error)})}},Announcement:{construct:(cardContainer,announcemntList)=>{let card='<div class="zpl_msplst zpl_mspgroup"><div><span class="icn PI_anounce"></span><div><div class="zpl_msp-dts"><div class="zpl_msp-name"><span class="d-flex d-flexclmcap8"><span><em> New Announcement has been published .</em></span></span></div></div><div class="zpl_mspace-gap zpl_msp-name"><div><b class="zpl_msp-title">'+announcemntList.postDtls.subject+"</b></div><div>"+announcemntList.postDtls.message+"</div></div></div></div></div>";cardContainer.append(card)}},Feeds:{construct:(cardContainer,announcemntList)=>{let card='<div class="zpl_msplst zpl_mspgroup"><div><span class="icn PI_feed"></span><div><div class="zpl_msp-dts"><div class="zpl_msp-name"><span class="d-flex d-flexclmcap8"><span><em>New Feed Alert! Check out the latest update in your feed!</em></span></span></div></div><div class="zpl_mspace-gap zpl_msp-name"><div><b class="zpl_msp-title">'+announcemntList.postDtls.subject+"</b></div><div>"+announcemntList.postDtls.message+"</div></div></div></div></div>";cardContainer.append(card)}},Reports:{construct:function(cardContainer,cardData){const contentwrap=$('<div class="zpl_msplst zpl_mspgroup"> </div>');let row='<div> <span class="PI_s_report icn"></span><div><div class="zpl_msp-dts"><div class="zpl_msp-name"><div><span class="zpl_msp-title zpl_ellipsis"><span>'+ZPI18N.getString("zp.reports.card.title")+'</span> </span></div></div></div><div class="zpl_mspace-gap" id="viewed_reports"> </div></div></div>';contentwrap.append(row),$.each(cardData.recentReports,function(index,data){$.each(data,function(key,value){let record='<div class="zpl_pfstg pfsbgbdr"> <span> <em> <a href="'+(window.location.origin+window.location.pathname+"#"+key)+'" target="_blank">'+value+"</a> </em> </span> </div>";contentwrap.find("#viewed_reports").prepend(record)})}),cardContainer.html(contentwrap)}}},ActionList.Component={welcomeCard:cardObj=>{let quoteHtml="";if(cardObj.quotesObj){quoteHtml=`<div class="zpl_mspace-gap">"${cardObj.quotesObj.quote}" - ${cardObj.quotesObj.author?cardObj.quotesObj.author:"Unknown"}</div>`}let currentOrgDtls=ZPeople.ORGLIST.serviceOrgs.find(obj=>obj.ZSOID==_LOGGEDIN_ACCZSOID),logo=currentOrgDtls?currentOrgDtls.compLogo:ZPeople.getResourceURL(newUIImageUrl+"ppl_logo.svg"),card=$(`<div class="zpl_msplst zpl_mspgroup zpl_mspwelc"><div><span class="zpl_mspwellogo"><img src="${logo}"></span><div><div class="zpl_msp-dts"><div class="zpl_msp-name"><span class="d-flex d-flexclmcap8"><b class="zpl_msp-title"></b><span>${ZPeople.CURR_USER.name}</span></span></div><div><em>${ZPI18N.getString("zp.haveaproductiveday")}</em></div></div>${quoteHtml}<div id="" class="zpl_crdwelani zpl_night"><span><em></em><em></em><em></em><svg viewBox="0 0 120 120"><circle cx="55" cy="55" r="50" class="dotted"></circle><foreignObject x="5" y="5" height="150px" width="150px"></foreignObject></svg><span class="cloud1"><span></span><span></span><span></span><span></span></span><span class="cloud2"><span></span><span></span><span></span><span></span></span></span></div></div></div></div>`);return ActionList.Component.setPeriod(card,cardObj.timeData),card},setPeriod:(obj,timeObj)=>{let hour=timeObj.hours,period="";var dateString=timeObj.date_time,currentDate=new Date(dateString),targetTime=new Date(dateString),timeDifference=0;let iconClass="zpl_morn";hour>=0&&hour<12?(targetTime.setHours(12,0,0,0),timeDifference=targetTime-currentDate,period=ZPI18N.getString("zp.goodmorning"),iconClass="zpl_morn"):hour>=12&&hour<18?(targetTime.setHours(18,0,0,0),timeDifference=targetTime-currentDate,period=ZPI18N.getString("zp.goodafternoon"),iconClass="zpl_noon"):(targetTime.setHours(24,0,0,0),timeDifference=targetTime-currentDate,period=ZPI18N.getString("zp.goodevening"),iconClass="zpl_night");let periodIcon=obj.find(".zpl_crdwelani");periodIcon.removeClass("zpl_night zpl_noon zpl_morn"),periodIcon.addClass(iconClass),obj.find(".zpl_msp-title").text(period);let nextTime=new Date(currentDate.getTime()+timeDifference);setTimeout(function(){var dateString=nextTime.getFullYear()+"-"+(nextTime.getMonth()+1).toString().padStart(2,"0")+"-"+nextTime.getDate().toString().padStart(2,"0")+" "+nextTime.getHours().toString().padStart(2,"0")+":"+nextTime.getMinutes().toString().padStart(2,"0")+":"+nextTime.getSeconds().toString().padStart(2,"0");let dateObj={hours:nextTime.getHours(),date_time:dateString};ActionList.Component.setPeriod(obj,dateObj)},timeDifference)},leaveCard:function(userObj,leaveType){return $('<div class="zpl_mspace-comcrd"><div class="zpl_em"><div class="zpl_emimg"><img src="'+userObj.empphoto+'"></div><div class="zpl_emdts zpl_ellipsis"><div><em>'+ZSEC.Encoder.encodeForHTML(userObj.emp_id)+" - </em><b>"+ZSEC.Encoder.encodeForHTML(userObj.emp_name)+'</b></div><em class="AprvTym">'+ZSEC.Encoder.encodeForHTML(leaveType)+"</em></div></div></div>")},revLetterCard:function(revLetterForHtml){var revlett=$('<div class="zpl_msplst" id="revLett"><div><span class="PI_s_compensation icn"></span>\n\t\t                  <div class="zpl_msp-dts"><div><div class="zpl_msp-name"><span class="zpl_msp-title">'+ZPI18N.getString("zp.comp.rl.revlettcardDesc",new Array(revLetterForHtml.revLettName))+"</span><div><span>"+revLetterForHtml.daysAgo+'</span></div></div></div></div>\n\t\t                  <div class="zpl_msp-act"><div class="zpl_hvr"><button id="revletterbtn" class="zlabel zlabel--blue zlabel--medium zlabel--outline">'+ZPI18N.getString("zp.viewComp",new Array(ZPI18N.getString("zp.comp.rlg.singluarsalrevlet")))+"</button> </div>\n\t\t                  </div></div>");return revlett.find("#revletterbtn").on("click",function(){ActionList.Card.RevLetter.viewLetter(revLetterForHtml)}),revlett},HikePushCard:function(data){var hikeComp="";return(hikeComp=data.isHikeApprEnabled&&1==data.status?$('<div class="zpl_msplst"><div>\n\t\t                       <span class="PI_s_compensation icn"></span><div class="zpl_msp-dts"><div class="zpl_msp-name">\n                               <span class="zpl_msp-title">'+ZPI18N.getString("zp.compensation.hikePushCardPending")+"</span>\n                               </div><div><span>"+ZPI18N.getString("zp.appraisalcyclename")+`</span><em class="zpl_dots sm"></em><span>${ZSEC.Encoder.encodeForHTML(data.cycleName)}</span></div></div><div>\n                               <div class="zpl_compoffar"><em>Initiated On</em><div class="d-flexclmcap10">\n                               <div><b>${data.createdOn}</b></div></div>\n                               <div><span>Employee :</span><span>${data.userCount}</span></div>\n                               </div></div><div class="zpl_msp-act"><div class="zpl_hvr"><button id="viewHikePush" class="zlabel zlabel--blue zlabel--medium zlabel--outline">`+ZPI18N.getString("zp.viewdetails")+"</button></div></div></div></div>"):$('<div class="zpl_msplst"><div><span class="PI_s_compensation icn">\n\t\t        </span><div class="zpl_msp-dts"><div class="zpl_msp-name">\n\t\t          <span  class="zpl_msp-title">'+ZPI18N.getString("zp.compensation.hikePushCardComp")+"</span></div>\n\t         <div><span>"+ZPI18N.getString("zp.appraisalcyclename")+`</span><em class="zpl_dots sm"></em><span>${ZSEC.Encoder.encodeForHTML(data.cycleName)}</span>\n             </div></div><div class="zpl_msp-act"><div class="zpl_hvr"><button id="viewHikePush" class="zlabel zlabel--blue zlabel--medium zlabel--outline">`+ZPI18N.getString("zp.viewdetails")+"</button></div></div></div></div>")).find("#viewHikePush").on("click",function(){ActionList.Card.CompHikePush.viewCompHike(data)}),hikeComp},HikePushCard:function(data){var hikeComp="";return(hikeComp=data.isHikeApprEnabled&&1==data.status?$('<div class="zpl_msplst"><div>\n\t\t                       <span class="PI_s_compensation icn"></span><div class="zpl_msp-dts"><div class="zpl_msp-name">\n                               <span class="zpl_msp-title">'+ZPI18N.getString("zp.compensation.hikePushCardPending")+"</span>\n                               </div><div><span>"+ZPI18N.getString("zp.appraisalcyclename")+`</span><em class="zpl_dots sm"></em><span>${ZSEC.Encoder.encodeForHTML(data.cycleName)}</span></div></div><div>\n                               <div class="zpl_compoffar"><em>Initiated On</em><div class="d-flexclmcap10">\n                               <div><b>${data.createdOn}</b></div></div>\n                               <div><span>Employee :</span><span>${data.userCount}</span></div>\n                               </div></div><div class="zpl_msp-act"><div class="zpl_hvr"><button id="viewHikePush" class="zlabel zlabel--blue zlabel--medium zlabel--outline">`+ZPI18N.getString("zp.viewdetails")+"</button></div></div></div></div>"):$('<div class="zpl_msplst"><div><span class="PI_s_compensation icn">\n\t\t        </span><div class="zpl_msp-dts"><div class="zpl_msp-name">\n\t\t          <span  class="zpl_msp-title">'+ZPI18N.getString("zp.compensation.hikePushCardComp")+"</span></div>\n\t         <div><span>"+ZPI18N.getString("zp.appraisalcyclename")+`</span><em class="zpl_dots sm"></em><span>${ZSEC.Encoder.encodeForHTML(data.cycleName)}</span>\n             </div></div><div class="zpl_msp-act"><div class="zpl_hvr"><button id="viewHikePush" class="zlabel zlabel--blue zlabel--medium zlabel--outline">`+ZPI18N.getString("zp.viewdetails")+"</button></div></div></div></div>")).find("#viewHikePush").on("click",function(){ActionList.Card.CompHikePush.viewCompHike(data)}),hikeComp},smartCardLetter:function(cardContainer,entity,data){var cardBdyHtml="";if("ATTENDANCE_TEAM_CHECKINREPORTS"==entity)cardBdyHtml=`<div class="zpl_crd">\n\t\t\t\t\t\t\t\t<div class="zpl_msplst">\n\t\t\t\t\t\t\t\t<div><span class="PI_s_attnd icn"></span>\n\t\t\t\t\t\t\t\t<div class="zpl_msp-dts">\n                                    <div class="zpl_msp-name">\n                                        <span class="zpl_msp-title">${ZPI18N.getString("zp.card.attsummary.ttl")}</span>\n                                    </div>\n                                   <div class="mw800">\n                                        <span>${ZPI18N.getString("zp.card.att.avgchkin")} :</span><em class="grn">${data.avgInTime}</em> | <span>${ZPI18N.getString("zp.card.att.avgchkout")} :</span><em class="red">${data.avgOutTime}</em>\n                                    </div>\n                                </div><div class="zpl_msp-act ">\n                                    \n                                </div></div></div></div>`;else if("COMPENSATION_DEPTCOSTREPORTS"==entity){let deptCostHtml="",cardDate="";data.costDets.forEach(dataObj=>{let chp=dataObj.chp;cardDate=dataObj.cardDate,deptCostHtml+=`<div class="zpl_bn">\n                        <div class="zpl_msp-dts wd80_per">\n                            <div class="zpl_msp-name">\n                                <div>\n                                \t${ZPI18N.getString("zp.card.comp.deptcost.desc",new Array(`<span class="zpl_msp-title zpl_ellipsis">${ZSEC.Encoder.encodeForHTML(dataObj.deptName)}</span>`,chp>0?ZPI18N.getString("zp.increased"):ZPI18N.getString("zp.decreased"),`<em class="${chp>0?"grn":"red"}">${chp}</em>`))}\n                                </div>\n                            </div>                          \n                        </div>\n                                                           \n                        <div class="zpl_msp-act DNI">\n                            <div class="zpl_msp-tlog">\n                                <i class="PI_tick2_fil gry CP"></i>\n                            </div>\n                        </div>\n                    </div>`}),cardBdyHtml=`<div>\n\t\t\t\t\t            <span class="PI_s_compensation icn"></span>\n\t\t\t\t\t            <div>\n\t\t\t\t\t                <div class="zpl_msp-dts ">\n\t\t\t\t\t                <div class="zpl_msp-name">\n\t\t\t\t\t                    <div class="zpl_msp-title">${ZPI18N.getString("zp.card.comp.deptcost.ttl")}</div><div><em>on ${cardDate}</em></div>\n\t\t\t\t\t                </div>        \n\t\t\t\t\t                </div>\n\t\t\t\t\t                <div>\n\t\t\t\t\t                <div class="zpl_msplst">\n\t\t\t\t\t                   ${deptCostHtml} \n\t\t\t\t\t                </div>\n\t\t\t\t\t                </div>\n\t\t\t\t\t            </div>\n\t\t\t\t\t        </div>`,cardContainer.addClass("zpl_msplst zpl_mspgroup")}else if("ATTENDANCE_CONTRIBUTORS"==entity){if(isSameUsr=data.maxWorkingEmp==data.minWorkingEmp,isAnyChng=void 0!=data.perc,isInc=!!isAnyChng&&data.perc>0,isAnyChng&&!isSameUsr){let maxWemp=ZPeople.getUserDetailsById(data.maxWorkingEmp),maxWemp_hr=data.maxWorkedHrs,minWemp=ZPeople.getUserDetailsById(data.minWorkingEmp),minWemp_hr=data.minWorkedHrs,team_whr=data.newWorkHrs,perc=data.perc;cardBdyHtml=`<div> \n\t\t\t\t\t\t\t\t  <span class="PI_s_attnd icn"></span>\n\t\t\t\t\t\t\t\t   <div>\n\t\t\t\t\t\t\t\t      <div class="zpl_mspacts_rht"></div>\n\t\t\t\t\t\t\t\t      <div class="zpl_msp-dts">\n\t\t\t\t\t\t\t\t         <div class="zpl_msp-name"><span class="d-flex d-flexclmcap8"><b class="zpl_msp-title">Total team working hours</b></span></div>\n\t\t\t\t\t\t\t\t         <div class="zpl_DNI"><span>Your team productivity has ${isInc?"increased":"decreased"} by </span> <em class=${isInc?"grn":"red"}>${perc}%</em><span> with a total monthly worked hours of </span><em class="blu"> ${team_whr.split(":")[0]}h ${team_whr.split(":")[1]}mins</em></div>`+`<div class="">\n\t\t\t\t\t\t\t\t         \t${ZPI18N.getString("zp.card.att.teamworkinghrs.desc",new Array(isInc?ZPI18N.getString("zp.increased"):ZPI18N.getString("zp.decreased"),`<em class=${isInc?"grn":"red"}>${perc}</em>`))}\n\t\t\t\t\t\t\t\t         </div>\n\t\t\t\t\t\t\t\t     </div>\n\t\t\t\t\t\t\t\t      <div class="zpl_mspace-gap j-cnt-btwen a-itm-cntr mw800">\n\t\t\t\t\t\t\t\t         <div>\n\t\t\t\t\t\t\t\t            <b>${ZPI18N.getString("zp.card.att.earlybird")}</b>\n\t\t\t\t\t\t\t\t            <span class="zpl_em ">\n\t\t\t\t\t\t\t\t               <div class="zpl_emimg"><img class="zpl_emimg" src="${minWemp.avatar}"></div>\n\t\t\t\t\t\t\t\t               <div class="zpl_emdts zpl_ellipsis ">\n\t\t\t\t\t\t\t\t                  <div>${minWemp.empid} - <b>${minWemp.name}</b></div>\n\t\t\t\t\t\t\t\t                  <div><span> ${ZPI18N.getString("zp.card.att.totalworkinghours")}: </span><em class="blu"> ${minWemp_hr.split(":")[0]}  ${ZPI18N.getString("zp.hrs")} ${minWemp_hr.split(":")[1]} ${ZPI18N.getString("zp.mins")}</em></div>\n\t\t\t\t\t\t\t\t               </div>\n\t\t\t\t\t\t\t\t            </span>\n\t\t\t\t\t\t\t\t         </div>\n\t\t\t\t\t\t\t\t         <div>\n\t\t\t\t\t\t\t\t            <b>${ZPI18N.getString("zp.card.att.nightowl")}</b>\n\t\t\t\t\t\t\t\t            <span class="zpl_em ">\n\t\t\t\t\t\t\t\t               <div class="zpl_emimg"><img class="zpl_emimg" src="${maxWemp.avatar}"></div>\n\t\t\t\t\t\t\t\t               <div class="zpl_emdts zpl_ellipsis ">\n\t\t\t\t\t\t\t\t                  <div>${maxWemp.empid} - <b>${maxWemp.name}</b></div>\n\t\t\t\t\t\t\t\t                  <div><span> ${ZPI18N.getString("zp.card.att.totalworkinghours")}: </span><em class="blu"> ${maxWemp_hr.split(":")[0]} ${ZPI18N.getString("zp.hrs")} ${maxWemp_hr.split(":")[1]} ${ZPI18N.getString("zp.mins")}</em></div>\n\t\t\t\t\t\t\t\t               </div>\n\t\t\t\t\t\t\t\t            </span>\n\t\t\t\t\t\t\t\t         </div>\n\t\t\t\t\t\t\t\t      </div>\n\t\t\t\t\t\t\t\t   </div>\n\t\t\t\t\t\t\t\t</div>`,cardContainer.addClass("zpl_msplst zpl_mspgroup")}}else if("LEAVE_NOTIFICATION"==entity){let empList=data.empList;if(empList.length>0){var userHtml="";empList.forEach(dataObj=>{let usr=ZPeople.getUserDetailsById(dataObj.user),leaveType=(dataObj.type,dataObj.leavetype);userHtml+=`<div class="zpl_mspace-gap">\n\t\t\t\t\t              <div class="zpl_mspace-comcrd">\n\t\t\t\t\t                  <div class="zpl_em">\n\t\t\t\t\t                      <div class="zpl_emimg"><img src="${usr.avatar}"></div>\n\t\t\t\t\t                      <div class="zpl_emdts ">\n\t\t\t\t\t                          <div><em>${usr.empid} - </em><b>${usr.name}</b></div>\n\t\t\t\t\t                          <em>${leaveType}</em>\n\t\t\t\t\t                      </div>\n\t\t\t\t\t                  </div>\n\t\t\t\t\t              </div>`}),cardBdyHtml=`<div>\n\t\t\t\t\t\t          <span class="PI_s_leave icn"></span>\n\t\t\t\t\t\t          <div>\n\t\t\t\t\t\t            <div class="zpl_mspacts_rht"><span class="d-flexclmcap8"><b>${empList.length}</b><em> ${empList.length>1?ZPI18N.getString("zp.employees_LC"):ZPI18N.getString("zp.employee_LC")}</em></span></div>\n\t\t\t\t\t\t            <div class="zpl_msp-dts">\n\t\t\t\t\t\t                  <div class="zpl_msp-name">\n\t\t\t\t\t\t                    <div class="zpl_msp-title">\n\t\t\t\t\t\t                    \t${ZPI18N.getString("zp.card.leave.empInLv.ttl")}<i class="PI_info tooltip-js" data-title-position="right" data-html="true" title="${ZPI18N.getString("zp.card.leave.empInLv.tooltip")}"></i>\n\t\t\t\t\t\t                    </div>\n\t\t\t\t\t\t                </div>\n\t\t\t\t\t\t                <div><em>${ZPI18N.getString("zp.today")}</em></div>\n\t\t\t\t\t\t            </div>\n\t\t\t\t\t\t            \t${userHtml}\n\t\t\t\t\t\t            </div>\n\t\t\t\t\t\t          </div>\n\t\t\t\t\t\t      </div>`}cardContainer.addClass("zpl_msplst zpl_mspgroup")}return cardBdyHtml},actionlistcontainer:function(param){return $('<div class="zpl_msplst zpl_mspgroup"><div><span class="'+param.ICNclass+' icn"></span><div><div class="zpl_msp-dts"><div class="zpl_msp-name"><div class="zpl_msp-title">'+(param.header?param.header:"")+"</div></div><div><em>"+(param.message?param.message:"")+'</em></div></div><div class="zpl_mspace-gap" id="action_list_wrap"></div></div></div></div>')},peopleDemoCard:(wrap,details)=>{wrap.addClass("zpl_msplst zpl_msp-reqdemo"),wrap.html(`<div><div class="zpl_msp-dts"><div class="zpl_msp-name"><div><b>${details.header}</b></div></div><div><span>${details.message}</span></div></div><div class="zpl_msp-act"><div class="zpl_hvr zpl_hvrsw"><button id="initDemo" class="zlabel zlabel--red zlabel--medium">Request Demo</button></div></div></div>`),wrap.find("#initDemo").on("click",()=>{window.open(details.url,"_blank"),ZPeople.Request.send("/peopledemo/hideDemoCard",{status:!0,cardId:details.id},function(response){response&&response.success&&wrap.remove()})}),Layout.Page.container.prepend(wrap)}},ActionList.updateOnServerUp=function(){ActionList.Card.actionListContWrap&&(ActionList.Card.isInit=!0,-1!==window.location.hash.indexOf("home/myspace/overview-actionlist")&&ActionList.Card.init(ActionList.Card.actionListContWrap))};