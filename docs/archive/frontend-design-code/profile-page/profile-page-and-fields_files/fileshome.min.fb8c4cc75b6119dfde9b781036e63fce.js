FilesHome={constructSingleCard:function(entityId,data){var fileExtn=FilesUtil.Page.getFileExtn(data.fileExtn,data.filePath,data.UploadSource),fileIconClass=FileUpload.getFileIcon(fileExtn),fileName=data.fileName,modifiedDate=data.fileModifiedDate,fileId=data.fileID,row='<div id="'+entityId+'">';return row+='<div><i class="'+fileIconClass+'"></i></div>',settingsUrlProps.url.indexOf("/myspace/overview-actionlist")>-1?row+='<div class="zpl_msp-dts" onclick="FilesHome.Activity.fetchDataForPreview(\''+fileId+"');\">":row+='<div class="zpl_msp-dts" onclick="FilesOperations.Preview.initLightBox(this);">',row+='<div class="zpl_msp-name"><span class="zpl_msp-title CP">'+ZSEC.Encoder.encodeForHTML(fileName)+'</span></div><div id="ackdesc" class="DN">'+ZPI18N.getString("zp.viewackreport")+'</div></div><div class="zpl_compoffar w200"><span class="zpl_progtitle"><em>'+ZPI18N.getString("zp.common.updatedon",new Array(""))+'</em></span><div><b class="">'+modifiedDate+"</b></div></div>",row+=FilesOperations.Acknowledgement.acknowledgementStatus("mySpace",data),row+="</div>"}},FilesHome.Activity={fetchDataForPreview:function(fileId){var fileData=FilesHome.Feeds.getData(fileId);FilesOperations.Preview.initLightBox(JSON.stringify(fileData))}},FilesHome.FilesTab={subUsersList:[],loadFiles:function(cardContainer){cardContainer.empty();var params={conreqcsr:csrfToken,filterBy:"my",fileType:FilesUtil.FILETYPE.EMPFILE,start:"0",limit:"2",fileSortByType:"3",isFileSortDesc:!0,ERECNO:ZPUserProfile.info.getUserId()};params=FilesUtil.Geo.setLatLongParams(params),$.post("zpfiles/myspace/getMySpaceFiles",params,function(resultData){if(null!=resultData&&null!=resultData[1]){FilesHome.FilesTab.subUsersList=resultData[1].subordinates;var persParseObj=resultData[1].persFiles;if(null!=persParseObj&&void 0!=persParseObj&&persParseObj.length>0)for(var contentwrap=$('<div class="zpl_msplst"><div class="zpl_msp-hgroup"><div class="zpl_mspacts_rht"><a class="zpl_lnk" onclick="FilesHome.FilesTab.goToModule(2);">'+ZPI18N.getString("zp.viewall")+'</a><i class="PI_plus zpl_ibg zpl_act" onclick="FilesOperations.Util.AddFileBtnCallback();"></i></div><div><b>'+ZPI18N.getString("zp.personalfiles")+"</b></div></div></div>"),i=0;i<persParseObj.length;i++){var entityId="mySpaceFiles_"+(fileData=persParseObj[i]).fileID,fileExtn=FilesUtil.Page.getFileExtn(fileData.fileExtn,fileData.filePath,fileData.UploadSource);fileData.fileExtn=fileExtn;var row=FilesHome.constructSingleCard(entityId,fileData);(row=$(row)).data("ldata",fileData),contentwrap.append(row),cardContainer.append(contentwrap)}else if(null!=persParseObj&&void 0!=persParseObj&&0==persParseObj.length){contentwrap=$('<div class="zpl_msplst" data-collaspe-head="PersonalUploadsNodata"><div class="zpl_msp-hgroup"><div class="zpl_mspacts_rht"><div><a class="zpl_lnk" onclick="FilesHome.FilesTab.goToModule(2);">'+ZPI18N.getString("zp.viewall")+"</a></div></div><div><b>"+ZPI18N.getString("zp.personalfiles")+'</b></div></div></div><div class="zpl_acrdcont"><div><div class="zpl_Emptydata"><div><p>'+ZPI18N.getString("zp.files.myspacenopersdata")+'</p><font><button class="zlabel zlabel--blue zlabel--medium" onclick="FilesOperations.Util.AddFileBtnCallback();">'+ZPI18N.getString("zp.addpersonalfiles")+"</button></font></div></div></div></div>");cardContainer.append(contentwrap),contentwrap.show()}var empParseObj=resultData[1].empFiles;if(null!=empParseObj&&void 0!=empParseObj&&empParseObj.length>0)for(contentwrap=$('<div class="zpl_msplst"><div class="zpl_msp-hgroup"><div class="zpl_mspacts_rht"><a class="zpl_lnk" onclick="FilesHome.FilesTab.userProfileViewAll(\''+resultData[1].loginUserRoleCheck+"');\">"+ZPI18N.getString("zp.viewall")+"</a></div><div><b>"+ZPI18N.getString("zp.myfiles")+"</b></div></div></div>"),i=0;i<empParseObj.length;i++){var fileData;entityId="mySpaceFiles_"+(fileData=empParseObj[i]).fileID,fileExtn=FilesUtil.Page.getFileExtn(fileData.fileExtn,fileData.filePath,fileData.UploadSource);fileData.fileExtn=fileExtn;row=FilesHome.constructSingleCard(entityId,fileData);(row=$(row)).data("ldata",fileData),contentwrap.append(row),cardContainer.append(contentwrap),Layout.Page.container.find("#"+entityId).find("#mySpace_files_ack_"+fileData.fileID).length>0&&Layout.Page.container.find("#"+entityId).find("#ackdesc").removeClass("zpl_DNI")}if((null==empParseObj||void 0==empParseObj||0==empParseObj.length)&&null!=persParseObj&&void 0!=persParseObj&&0==persParseObj.length)(emptyhtml=new EmptyPages("zp_nd_file","",ZPI18N.getString("zp.files.myspacenodata"),cardContainer)).setButton(ZPI18N.getString("zp.addpersonalfiles"),FilesOperations.Util.AddFileBtnCallback),emptyhtml.show();if(!(null!=empParseObj&&void 0!=empParseObj&&0!=empParseObj.length||null!=persParseObj&&void 0!=persParseObj)){var errMsg=ZPI18N.getString("zp.files.module.nodatahdr4");null!=ZPUserProfile.info.getUserId()&&ZPUserProfile.info.getUserId()==erecno&&(errMsg=ZPI18N.getString("zp.files.myspacenodata")),(emptyhtml=new EmptyPages("zp_nd_file","",errMsg,cardContainer)).show()}}else{if(null!=resultData&&null!=resultData[0])if(void 0!=resultData[0]&&resultData[0].code==FilesUtil.IP.errorCode)(emptyhtml=new EmptyPages("zp_nd_iprestrict",ZPI18N.getString("zp.files.operations.iprestricted"),"",cardContainer)).show();else if(void 0!=resultData[0]&&resultData[0].code==FilesUtil.Geo.errorCode){var emptyhtml,noDataClass="zp_nd_georestrict",noDataTitle=ZPI18N.getString("zp.files.operations.georestricted");FilesUtil.Geo.isBlocked&&(noDataClass="zp_nd_locat",noDataTitle=ZPI18N.getString("zp.files.operations.allowloc")),(emptyhtml=new EmptyPages(noDataClass,noDataTitle,"",cardContainer)).show()}}})},goToModule:function(mode){var newHash="files/myfile/me";1==mode?newHash="files/myfile/me":2==mode&&(newHash="files/myfile/pers"),window.location.href="#"+newHash},userProfileViewAll:function(loginUserRoleCheck){if(ZPUserProfile.info.getUserId()==erecno)newHash="files/myfile/me",window.location.href="#"+newHash;else{var subUsersList=FilesHome.FilesTab.subUsersList;null!=subUsersList&&void 0!=subUsersList||(subUsersList=[]),-1!=loginUserRoleCheck&&jQuery.inArray(ZPUserProfile.info.getUserId(),subUsersList)<0?(newHash="operations/files/all-viewType:1/empId:"+ZPUserProfile.info.getUserId(),window.location.href="#"+newHash):subUsersList.length>0&&-1!==jQuery.inArray(ZPUserProfile.info.getUserId(),subUsersList)&&(newHash="files/team/members/user-viewType:1/empId:"+ZPUserProfile.info.getUserId(),window.location.href="#"+newHash)}}},FilesHome.Feeds={getData:function(fileId){var formData=new FormData;formData.append("conreqcsr",csrfToken),formData.append("fileId",fileId),formData.append("fileSortByType","3"),formData.append("isFileSortDesc",!0),window.location.hash.indexOf("myspace/overview-feeds")>-1&&formData.append("ERECNO",erecno);var result={};return $.ajax({url:"zpfiles/operations/getFileDetails",type:"POST",data:formData,async:!1,contentType:!1,processData:!1,success:function(resultData){void 0!==resultData[1]&&(result=resultData[1])},error:function(req){var errResponse=req.responseJSON[1];500===req.status&&ZPeople.Message.failure(errResponse.msg)}}),result[0]}},FilesHome.FilesTeamDeptTab={isFilesLoaded:!1,loadFiles:(wrap,param)=>{if(!FilesHome.FilesTeamDeptTab.isFilesLoaded){var cardContainer=wrap.find('[divtype="container"]'),params={conreqcsr:csrfToken,fileType:FilesUtil.FILETYPE.ORGFILE,start:"0",limit:"4",fileSortByType:"3",isFileSortDesc:!0,isFromModule:!0,orgUserType:"dept"};params=FilesUtil.Geo.setLatLongParams(params);var contentwrap=$("<h5>"+ZPI18N.getString("zp.files.operations.dept")+'</h5><div class="zpl_msp-lstview"></div>');cardContainer.append(contentwrap),$.post("zpfiles/operations/getAllFiles",params,function(resultData){if(null!=resultData&&null!=resultData[1]){var filesList=resultData[1].filesList;if(null!=filesList&&filesList.length>0){for(var i=0;i<filesList.length;i++){var fileData=filesList[i],entityId="mySpaceDeptFiles_"+fileData.fileID,fileExtn=FilesUtil.Page.getFileExtn(fileData.fileExtn,fileData.filePath,fileData.UploadSource);fileData.fileExtn=fileExtn;var row=FilesHome.FilesTeamDeptTab.constructSingleCard(entityId,fileData);(row=$(row)).data("ldata",fileData),cardContainer.find(".zpl_msp-lstview").append(row)}var lrow='<div class="zpl_mspmore text-right">';lrow+='<a data-popup-open="" onclick="FilesHome.FilesTeamDeptTab.goToModule()" >'+ZPI18N.getString("zp.viewall")+"</a>",lrow+="</div>",cardContainer.find(".zpl_msp-lstview").append(lrow)}null!=filesList&&0!=filesList.length||cardContainer.find(".zpl_msp-lstview").append(UserWidget.Components.getNoDataTxt(param.mode))}}),FilesHome.FilesTeamDeptTab.isFilesLoaded=!0}},goToModule:function(){window.location.href="#files/team/dept"},constructSingleCard:function(entityId,data){var fileExtn=FilesUtil.Page.getFileExtn(data.fileExtn,data.filePath,data.UploadSource),fileIconClass=FileUpload.getFileIcon(fileExtn),fileName=data.fileName,modifiedDate=data.fileModifiedDate,row='<div id="'+entityId+'" class="zpl_em">';return row+='<div class="d-flexM zpl_emimg">',row+='<span class="'+fileIconClass+'"></span>',row+="</div>",row+='<div class="zpl_emdts">',row+='<div class="zpl_link" onclick="FilesOperations.Preview.initLightBox(this);" onmouseover=FilesHome.FilesTeamDeptTab.mouseEnterFunction()><b>'+ZSEC.Encoder.encodeForHTML(fileName)+"</b></div>",row+="<div>",row+="<em>"+ZPI18N.getString("zp.common.updatedon",new Array(""))+" : <span>"+modifiedDate+"</span></em>",row+="</div>",row+="</div>",row+="</div>",row+="</div>"},mouseEnterFunction:function(){let elementToCheck=event.target;event.target.offsetWidth<event.target.scrollWidth&&!$(elementToCheck).attr("title")&&($(elementToCheck).attr("title",$(elementToCheck).text()),$(elementToCheck).attr("data-title-position","auto"),$(elementToCheck).attr("data-title-display-type","callout"))}},FilesOperations={sharingOpts:{Entity:{},Department:{},Division:{},Unit:{},Location:{}},isOrgShareFetched:!1,previewFileData:[],filterView:{ENT:"entity",UNIT:"unit",DIV:"division",DEPT:"department",LOC:"location"},filterBy:{ALL:"all",INACT:"inactiveemp",LOGDIS:"logindisabled",ALLROLE:"allrole",MY:"my",MYROLE:"myrole",SUB:"subordinates",ALLSUB:"allsubordinates"},impFileFormatLabels:[],empListData_addFiles:[],ACTIONMODE:{ORGFILE_FOLDER:1,ORGFILE_SUBFOLDER:2,ORGFILE_SUBFILE:3,EMPFILE_FOLDER:4,EMPFILE_SUBFOLDER:5,EMPFILE_SUBFILE:6,PERSFILE:7,TEAMFILE:8}},FilesOperations.Page={hideElementsInModule:function(){var parentContainer=FilesUtil.Page.getParentContainer(),tabGroup=FilesUtil.Page.getTabGroup();parentContainer!=FilesUtil.Page.pageIdMap_mod.MY&&parentContainer!=FilesUtil.Page.pageIdMap_mod.ROLE||settingsPage.container.find("#sharedToHdr").addClass("zpl_DNI"),settingsPage.container.find("#addFileBtn, #chkBoxHdr").addClass("zpl_DNI"),settingsPage.container.find("#impExpCont"+parentContainer).addClass("zpl_DNI"),FilesUtil.Page.isListView()||settingsUrlProps.url.indexOf("-catId")>-1?(settingsPage.container.find("#filesActionHdr").removeClass("zpl_DNI"),settingsPage.container.find("#modTimeHdr").attr("width","200")):settingsPage.container.find("#filesActionHdr").addClass("zpl_DNI"),"2"==tabGroup&&(settingsPage.container.find("#filesActionHdr, #addFileBtn").removeClass("zpl_DNI"),settingsPage.container.find("#chkBoxHdr").removeClass("zpl_DNI")),FilesUtil.Page.isDeptTeamPage()&&FilesUtil.isDeptLead&&settingsPage.container.find("#addFileBtn").removeClass("zpl_DNI")},getFirescrollId:function(){return"files"+FilesUtil.Page.getParentContainer()+"_Scroll"},resetDefaultParams:function(mode,parentContainer){if(null!=parentContainer&&void 0!=parentContainer&&void 0!=parentContainer||(parentContainer=FilesUtil.Page.getParentContainer()),"2"==mode){var pageElement=FilesUtil.Page.getPageData(parentContainer,mode);pageElement[7]=0,pageElement[8]=!0,pageElement[0]=0,pageElement[1]=!0}else{var pageElement_ListView=FilesUtil.Page.getListPageData(parentContainer);if(pageElement_ListView[0]=0,pageElement_ListView[1]=!0,"2"!=FilesUtil.Page.getTabGroup()){var pageElement_FolderView=FilesUtil.Page.getFolderPageData(parentContainer);pageElement_FolderView[0]=0,pageElement_FolderView[1]=!0}}},resetFolderIdOnTabSwitch:function(){var parentContainer=FilesUtil.Page.getParentContainer(),subPageElement=FilesUtil.Page.getPageData(parentContainer,"2"),tabGroup=FilesUtil.Page.getTabGroup();if(("1"==tabGroup||"0"==tabGroup&&settingsUrlProps.url.indexOf("-catId")<=0)&&Object.keys(subPageElement[2]).length>0&&null!=subPageElement[2].catId&&void 0!=subPageElement[2].catId&&""!=subPageElement[2].catId){if(FilesUtil.Page.isModulePage()||FilesUtil.Page.isPolicyPage())return!0;if("0"==tabGroup){var pageId=settingsPage.container.find("#empFile_filterModal").parent();parentContainer=FilesUtil.Page.getParentContainer();if(null==(folderId=ZPeopleComponents.select(pageId.find("#filterEmpFile_Folder"+parentContainer)).getValue())||void 0==folderId||""==folderId||"-1"==folderId)return!0}else{var folderId;pageId=settingsPage.container.find("#orgFile_filterModal").parent(),parentContainer=FilesUtil.Page.getParentContainer();if(null==(folderId=ZPeopleComponents.select(pageId.find("#filterOrgFile_Folder"+parentContainer)).getValue())||void 0==folderId||""==folderId||"-1"==folderId)return!0}}return!1},setPageDataOnURLChange:function(id,isFromSearch){var parentContainer=FilesUtil.Page.getParentContainer(),subPageElement=FilesUtil.Page.getPageData(parentContainer,"2"),tabGroup=FilesUtil.Page.getTabGroup();isFromSearch?"-1"!=id&&"1"==tabGroup&&Object.keys(subPageElement[2]).length>0&&FilesOperations.OrgFiles.Filter.isValid()?(subPageElement[1]=!1,subPageElement[7]=0,subPageElement[8]=!0,settingsPage.container.find("#orgFileSubList_Folder"+parentContainer).html(""),settingsPage.container.find("#orgFileSubList_List"+parentContainer).html(""),FilesOperations.Page.resetDefaultParams("1")):"-1"!=id&&"0"==tabGroup&&Object.keys(subPageElement[2]).length>0&&FilesOperations.EmpFiles.Filter.isValid()?(subPageElement[1]=!1,subPageElement[7]=0,subPageElement[8]=!0,settingsPage.container.find("#empFileSubList_Folder"+parentContainer).html(""),settingsPage.container.find("#empFileSubList_List"+parentContainer).html(""),FilesOperations.Page.resetDefaultParams("1")):(FilesOperations.Page.resetDefaultParams("1"),"-1"!=id&&FilesOperations.Page.resetDefaultParams("2")):("1"==tabGroup&&Object.keys(subPageElement[2]).length>0&&FilesOperations.OrgFiles.Filter.isValid()?(subPageElement[1]=!1,subPageElement[7]=0,subPageElement[8]=!0,settingsPage.container.find("#orgFileSubList_Folder"+parentContainer).html(""),settingsPage.container.find("#orgFileSubList_List"+parentContainer).html("")):"0"==tabGroup&&Object.keys(subPageElement[2]).length>0&&FilesOperations.EmpFiles.Filter.isValid()?(subPageElement[1]=!1,subPageElement[7]=0,subPageElement[8]=!0,settingsPage.container.find("#empFileSubList_Folder"+parentContainer).html(""),settingsPage.container.find("#empFileSubList_List"+parentContainer).html("")):FilesOperations.Page.resetDefaultParams("2"),"-1"==id&&(subPageElement[6]={},Object.keys(subPageElement[2]).length>0&&(subPageElement[2].catId=""),FilesOperations.Util.showHideBreadCrump()))},reloadOtherPages:function(){var tabGroup=FilesUtil.Page.getTabGroup(),parentContainer="";"1"==tabGroup?(parentContainer=FilesUtil.Page.pageIdMap.ENT,FilesOperations.Page.resetDefaultParams("1",parentContainer),parentContainer=FilesUtil.Page.pageIdMap.UNIT,FilesOperations.Page.resetDefaultParams("1",parentContainer),parentContainer=FilesUtil.Page.pageIdMap.DIV,FilesOperations.Page.resetDefaultParams("1",parentContainer),parentContainer=FilesUtil.Page.pageIdMap.DEPT,FilesOperations.Page.resetDefaultParams("1",parentContainer),parentContainer=FilesUtil.Page.pageIdMap.LOC,FilesOperations.Page.resetDefaultParams("1",parentContainer),parentContainer=FilesUtil.Page.pageIdMap_mod.ORG,FilesOperations.Page.resetDefaultParams("1",parentContainer),parentContainer=FilesUtil.Page.pageIdMap_mod.MYDEPT,FilesOperations.Page.resetDefaultParams("1",parentContainer),parentContainer=FilesUtil.Page.pageIdMap_pol.ORG,FilesOperations.Page.resetDefaultParams("1",parentContainer)):"0"==tabGroup?(parentContainer=FilesUtil.Page.pageIdMap.ALL,FilesOperations.Page.resetDefaultParams("1",parentContainer),parentContainer=FilesUtil.Page.pageIdMap_mod.MY,FilesOperations.Page.resetDefaultParams("1",parentContainer),parentContainer=FilesUtil.Page.pageIdMap_mod.ROLE,FilesOperations.Page.resetDefaultParams("1",parentContainer),parentContainer=FilesUtil.Page.pageIdMap_mod.SUB,FilesOperations.Page.resetDefaultParams("1",parentContainer),parentContainer=FilesUtil.Page.pageIdMap_mod.TEAM,FilesOperations.Page.resetDefaultParams("1",parentContainer)):"2"==tabGroup&&(parentContainer=FilesUtil.Page.pageIdMap_mod.PERS,FilesOperations.Page.resetDefaultParams("1",parentContainer)),parentContainer=FilesUtil.Page.getParentContainer(),settingsUrlProps.url.indexOf("-catId")>-1&&FilesOperations.Page.resetDefaultParams("2",parentContainer);var tabgroup=FilesUtil.Page.getTabGroup();(FilesUtil.Page.isPolicyPage()||FilesUtil.Page.isModulePage()||"1"==tabgroup||"0"==tabgroup||"2"==tabgroup)&&FilesOperations.FolderListing.getData(parentContainer)}},FilesOperations.Util={toggleMandatoryAckCheckBox:function(value,mode){1==mode?1==value?($("#"+FilesOperations.OrgFiles.AddEdit.modelId).find("#addOrgFile_mandAck").prop("checked",!1),FilesUtil.componentInit.toggleCheckBox("addOrgFile_notMandAck",!1)):($("#"+FilesOperations.OrgFiles.AddEdit.modelId).find("#addOrgFile_notMandAck").prop("checked",!1),FilesUtil.componentInit.toggleCheckBox("addOrgFile_mandAck",!1)):2==mode?1==value?($("#"+FilesOperations.EmpFiles.AddEdit.modelId).find("#addEmpFile_mandAck").prop("checked",!1),FilesUtil.componentInit.toggleCheckBox("addEmpFile_notMandAck",!1)):($("#"+FilesOperations.EmpFiles.AddEdit.modelId).find("#addEmpFile_notMandAck").prop("checked",!1),FilesUtil.componentInit.toggleCheckBox("addEmpFile_mandAck",!1)):3==mode&&(1==value?($("#"+FilesOperations.EmpFiles.Import.modelId).find("#imp_addEmpFile_mandAck").prop("checked",!1),FilesUtil.componentInit.toggleCheckBox("imp_addEmpFile_notMandAck",!1)):($("#"+FilesOperations.EmpFiles.Import.modelId).find("#imp_addEmpFile_notMandAck").prop("checked",!1),FilesUtil.componentInit.toggleCheckBox("imp_addEmpFile_mandAck",!1)))},manageAction:function(actionType,actionURL,params,extraDetails){switch(actionType){case FilesOperations.ACTIONMODE.ORGFILE_FOLDER:if((parentContainer=extraDetails.parentContainer)==FilesUtil.Page.pageIdMap.ENT?(params.fileSortByType=FilesUtil.Page.orgSubCatViewData.Ent[4],params.isFileSortDesc=FilesUtil.Page.orgSubCatViewData.Ent[5]):parentContainer==FilesUtil.Page.pageIdMap.UNIT?(params.fileSortByType=FilesUtil.Page.orgSubCatViewData.Unit[4],params.isFileSortDesc=FilesUtil.Page.orgSubCatViewData.Unit[5]):parentContainer==FilesUtil.Page.pageIdMap.DIV?(params.fileSortByType=FilesUtil.Page.orgSubCatViewData.Div[4],params.isFileSortDesc=FilesUtil.Page.orgSubCatViewData.Div[5]):parentContainer==FilesUtil.Page.pageIdMap.DEPT?(params.fileSortByType=FilesUtil.Page.orgSubCatViewData.Dept[4],params.isFileSortDesc=FilesUtil.Page.orgSubCatViewData.Dept[5]):parentContainer==FilesUtil.Page.pageIdMap.LOC?(params.fileSortByType=FilesUtil.Page.orgSubCatViewData.Loc[4],params.isFileSortDesc=FilesUtil.Page.orgSubCatViewData.Loc[5]):parentContainer==FilesUtil.Page.pageIdMap_mod.ORG?(params.fileSortByType=FilesUtil.Page.orgSubCatViewData_mod.Org[4],params.isFileSortDesc=FilesUtil.Page.orgSubCatViewData_mod.Org[5]):parentContainer==FilesUtil.Page.pageIdMap_mod.MYDEPT?(params.fileSortByType=FilesUtil.Page.orgSubCatViewData_mod.Mydept[4],params.isFileSortDesc=FilesUtil.Page.orgSubCatViewData_mod.Mydept[5]):parentContainer==FilesUtil.Page.pageIdMap_pol.ORG&&(params.fileSortByType=FilesUtil.Page.orgSubCatViewData_pol.Org[4],params.isFileSortDesc=FilesUtil.Page.orgSubCatViewData_pol.Org[5]),parentContainer==FilesUtil.Page.pageIdMap.ENT&&0!=FilesUtil.Page.orgCatViewData.Ent[1]||parentContainer==FilesUtil.Page.pageIdMap.UNIT&&0!=FilesUtil.Page.orgCatViewData.Unit[1]||parentContainer==FilesUtil.Page.pageIdMap.DIV&&0!=FilesUtil.Page.orgCatViewData.Div[1]||parentContainer==FilesUtil.Page.pageIdMap.DEPT&&0!=FilesUtil.Page.orgCatViewData.Dept[1]||parentContainer==FilesUtil.Page.pageIdMap.LOC&&0!=FilesUtil.Page.orgCatViewData.Loc[1]||parentContainer==FilesUtil.Page.pageIdMap_mod.ORG&&0!=FilesUtil.Page.orgCatViewData_mod.Org[1]||parentContainer==FilesUtil.Page.pageIdMap_mod.MYDEPT&&0!=FilesUtil.Page.orgCatViewData_mod.Mydept[1]||parentContainer==FilesUtil.Page.pageIdMap_pol.ORG&&0!=FilesUtil.Page.orgCatViewData_pol.Org[1])(details={}).parentContainer=parentContainer,details.actionType=actionType,ZPeople.Request.send(actionURL,params,FilesOperations.FolderListing.callBack,details,FilesOperations.FolderListing.callBack);break;case FilesOperations.ACTIONMODE.ORGFILE_SUBFOLDER:if((parentContainer=extraDetails.parentContainer)==FilesUtil.Page.pageIdMap.ENT?(params.fileSortByType=FilesUtil.Page.orgSubCatViewData.Ent[4],params.isFileSortDesc=FilesUtil.Page.orgSubCatViewData.Ent[5]):parentContainer==FilesUtil.Page.pageIdMap.UNIT?(params.fileSortByType=FilesUtil.Page.orgSubCatViewData.Unit[4],params.isFileSortDesc=FilesUtil.Page.orgSubCatViewData.Unit[5]):parentContainer==FilesUtil.Page.pageIdMap.DIV?(params.fileSortByType=FilesUtil.Page.orgSubCatViewData.Div[4],params.isFileSortDesc=FilesUtil.Page.orgSubCatViewData.Div[5]):parentContainer==FilesUtil.Page.pageIdMap.DEPT?(params.fileSortByType=FilesUtil.Page.orgSubCatViewData.Dept[4],params.isFileSortDesc=FilesUtil.Page.orgSubCatViewData.Dept[5]):parentContainer==FilesUtil.Page.pageIdMap.LOC?(params.fileSortByType=FilesUtil.Page.orgSubCatViewData.Loc[4],params.isFileSortDesc=FilesUtil.Page.orgSubCatViewData.Loc[5]):parentContainer==FilesUtil.Page.pageIdMap_mod.ORG?(params.fileSortByType=FilesUtil.Page.orgSubCatViewData_mod.Org[4],params.isFileSortDesc=FilesUtil.Page.orgSubCatViewData_mod.Org[5]):parentContainer==FilesUtil.Page.pageIdMap_mod.MYDEPT?(params.fileSortByType=FilesUtil.Page.orgSubCatViewData_mod.Mydept[4],params.isFileSortDesc=FilesUtil.Page.orgSubCatViewData_mod.Mydept[5]):parentContainer==FilesUtil.Page.pageIdMap_pol.ORG&&(params.fileSortByType=FilesUtil.Page.orgSubCatViewData_pol.Org[4],params.isFileSortDesc=FilesUtil.Page.orgSubCatViewData_pol.Org[5]),parentContainer==FilesUtil.Page.pageIdMap.ENT&&0!=FilesUtil.Page.orgSubCatViewData.Ent[1]||parentContainer==FilesUtil.Page.pageIdMap.UNIT&&0!=FilesUtil.Page.orgSubCatViewData.Unit[1]||parentContainer==FilesUtil.Page.pageIdMap.DIV&&0!=FilesUtil.Page.orgSubCatViewData.Div[1]||parentContainer==FilesUtil.Page.pageIdMap.DEPT&&0!=FilesUtil.Page.orgSubCatViewData.Dept[1]||parentContainer==FilesUtil.Page.pageIdMap.LOC&&0!=FilesUtil.Page.orgSubCatViewData.Loc[1]||parentContainer==FilesUtil.Page.pageIdMap_mod.ORG&&0!=FilesUtil.Page.orgSubCatViewData_mod.Org[1]||parentContainer==FilesUtil.Page.pageIdMap_mod.MYDEPT&&0!=FilesUtil.Page.orgSubCatViewData_mod.Mydept[1]||parentContainer==FilesUtil.Page.pageIdMap_pol.ORG&&0!=FilesUtil.Page.orgSubCatViewData_pol.Org[1])(details={}).parentContainer=parentContainer,details.actionType=actionType,ZPeople.Request.send(actionURL,params,FilesOperations.FolderListing.callBack,details,FilesOperations.FolderListing.callBack);break;case FilesOperations.ACTIONMODE.ORGFILE_SUBFILE:(parentContainer=extraDetails.parentContainer)==FilesUtil.Page.pageIdMap.ENT?(params.fileSortByType=FilesUtil.Page.orgSubCatViewData.Ent[4],params.isFileSortDesc=FilesUtil.Page.orgSubCatViewData.Ent[5]):parentContainer==FilesUtil.Page.pageIdMap.UNIT?(params.fileSortByType=FilesUtil.Page.orgSubCatViewData.Unit[4],params.isFileSortDesc=FilesUtil.Page.orgSubCatViewData.Unit[5]):parentContainer==FilesUtil.Page.pageIdMap.DIV?(params.fileSortByType=FilesUtil.Page.orgSubCatViewData.Div[4],params.isFileSortDesc=FilesUtil.Page.orgSubCatViewData.Div[5]):parentContainer==FilesUtil.Page.pageIdMap.DEPT?(params.fileSortByType=FilesUtil.Page.orgSubCatViewData.Dept[4],params.isFileSortDesc=FilesUtil.Page.orgSubCatViewData.Dept[5]):parentContainer==FilesUtil.Page.pageIdMap.LOC?(params.fileSortByType=FilesUtil.Page.orgSubCatViewData.Loc[4],params.isFileSortDesc=FilesUtil.Page.orgSubCatViewData.Loc[5]):parentContainer==FilesUtil.Page.pageIdMap_mod.MYDEPT?(params.fileSortByType=FilesUtil.Page.orgSubCatViewData_mod.Mydept[4],params.isFileSortDesc=FilesUtil.Page.orgSubCatViewData_mod.Mydept[5]):parentContainer==FilesUtil.Page.pageIdMap_mod.ORG?(params.fileSortByType=FilesUtil.Page.orgSubCatViewData_mod.Org[4],params.isFileSortDesc=FilesUtil.Page.orgSubCatViewData_mod.Org[5]):parentContainer==FilesUtil.Page.pageIdMap_pol.ORG&&(params.fileSortByType=FilesUtil.Page.orgSubCatViewData_pol.Org[4],params.isFileSortDesc=FilesUtil.Page.orgSubCatViewData_pol.Org[5]);var isFetchData=!1;if(FilesUtil.Page.isListView()?(parentContainer==FilesUtil.Page.pageIdMap.ENT&&0!=FilesUtil.Page.orgListViewData.Ent[1]||parentContainer==FilesUtil.Page.pageIdMap.UNIT&&0!=FilesUtil.Page.orgListViewData.Unit[1]||parentContainer==FilesUtil.Page.pageIdMap.DIV&&0!=FilesUtil.Page.orgListViewData.Div[1]||parentContainer==FilesUtil.Page.pageIdMap.DEPT&&0!=FilesUtil.Page.orgListViewData.Dept[1]||parentContainer==FilesUtil.Page.pageIdMap.LOC&&0!=FilesUtil.Page.orgListViewData.Loc[1]||parentContainer==FilesUtil.Page.pageIdMap_mod.MYDEPT&&0!=FilesUtil.Page.orgListViewData_mod.Mydept[1]||parentContainer==FilesUtil.Page.pageIdMap_mod.ORG&&0!=FilesUtil.Page.orgListViewData_mod.Org[1]||parentContainer==FilesUtil.Page.pageIdMap_pol.ORG&&0!=FilesUtil.Page.orgListViewData_pol.Org[1])&&(isFetchData=!0):settingsUrlProps.url.indexOf("-catId")>-1&&(parentContainer==FilesUtil.Page.pageIdMap.ENT&&0!=FilesUtil.Page.orgSubCatViewData.Ent[8]||parentContainer==FilesUtil.Page.pageIdMap.UNIT&&0!=FilesUtil.Page.orgSubCatViewData.Unit[8]||parentContainer==FilesUtil.Page.pageIdMap.DIV&&0!=FilesUtil.Page.orgSubCatViewData.Div[8]||parentContainer==FilesUtil.Page.pageIdMap.DEPT&&0!=FilesUtil.Page.orgSubCatViewData.Dept[8]||parentContainer==FilesUtil.Page.pageIdMap.LOC&&0!=FilesUtil.Page.orgSubCatViewData.Loc[8]||parentContainer==FilesUtil.Page.pageIdMap_mod.ORG&&0!=FilesUtil.Page.orgSubCatViewData_mod.Org[8]||parentContainer==FilesUtil.Page.pageIdMap_mod.MYDEPT&&0!=FilesUtil.Page.orgSubCatViewData_mod.Mydept[8]||parentContainer==FilesUtil.Page.pageIdMap_pol.ORG&&0!=FilesUtil.Page.orgSubCatViewData_pol.Org[8])&&(isFetchData=!0),isFetchData)(details={}).parentContainer=parentContainer,ZPeople.Request.send(actionURL,params,FilesOperations.OrgFiles.callBack,details,FilesOperations.OrgFiles.callBack);break;case FilesOperations.ACTIONMODE.EMPFILE_FOLDER:if((parentContainer=extraDetails.parentContainer)==FilesUtil.Page.pageIdMap.ALL?(params.fileSortByType=FilesUtil.Page.empSubCatViewData.All[4],params.isFileSortDesc=FilesUtil.Page.empSubCatViewData.All[5]):parentContainer==FilesUtil.Page.pageIdMap_mod.MY?(params.fileSortByType=FilesUtil.Page.empSubCatViewData_mod.My[4],params.isFileSortDesc=FilesUtil.Page.empSubCatViewData_mod.My[5]):parentContainer==FilesUtil.Page.pageIdMap_mod.ROLE?(params.fileSortByType=FilesUtil.Page.empSubCatViewData_mod.Role[4],params.isFileSortDesc=FilesUtil.Page.empSubCatViewData_mod.Role[5]):parentContainer==FilesUtil.Page.pageIdMap_mod.SUB?(params.fileSortByType=FilesUtil.Page.empSubCatViewData_mod.Sub[4],params.isFileSortDesc=FilesUtil.Page.empSubCatViewData_mod.Sub[5]):parentContainer==FilesUtil.Page.pageIdMap_mod.TEAM&&(params.fileSortByType=FilesUtil.Page.empSubCatViewData_mod.Team[4],params.isFileSortDesc=FilesUtil.Page.empSubCatViewData_mod.Team[5]),parentContainer==FilesUtil.Page.pageIdMap.ALL&&0!=FilesUtil.Page.empCatViewData.All[1]||parentContainer==FilesUtil.Page.pageIdMap_mod.MY&&0!=FilesUtil.Page.empCatViewData_mod.My[1]||parentContainer==FilesUtil.Page.pageIdMap_mod.ROLE&&0!=FilesUtil.Page.empCatViewData_mod.Role[1]||parentContainer==FilesUtil.Page.pageIdMap_mod.SUB&&0!=FilesUtil.Page.empCatViewData_mod.Sub[1]||parentContainer==FilesUtil.Page.pageIdMap_mod.TEAM&&0!=FilesUtil.Page.empCatViewData_mod.Team[1])(details={}).parentContainer=parentContainer,details.actionType=actionType,ZPeople.Request.send(actionURL,params,FilesOperations.FolderListing.callBack,details,FilesOperations.FolderListing.callBack);break;case FilesOperations.ACTIONMODE.EMPFILE_SUBFOLDER:if((parentContainer=extraDetails.parentContainer)==FilesUtil.Page.pageIdMap.ALL?(params.fileSortByType=FilesUtil.Page.empSubCatViewData.All[4],params.isFileSortDesc=FilesUtil.Page.empSubCatViewData.All[5]):parentContainer==FilesUtil.Page.pageIdMap_mod.MY?(params.fileSortByType=FilesUtil.Page.empSubCatViewData_mod.My[4],params.isFileSortDesc=FilesUtil.Page.empSubCatViewData_mod.My[5]):parentContainer==FilesUtil.Page.pageIdMap_mod.ROLE?(params.fileSortByType=FilesUtil.Page.empSubCatViewData_mod.Role[4],params.isFileSortDesc=FilesUtil.Page.empSubCatViewData_mod.Role[5]):parentContainer==FilesUtil.Page.pageIdMap_mod.SUB?(params.fileSortByType=FilesUtil.Page.empSubCatViewData_mod.Sub[4],params.isFileSortDesc=FilesUtil.Page.empSubCatViewData_mod.Sub[5]):parentContainer==FilesUtil.Page.pageIdMap_mod.TEAM&&(params.fileSortByType=FilesUtil.Page.empSubCatViewData_mod.Team[4],params.isFileSortDesc=FilesUtil.Page.empSubCatViewData_mod.Team[5]),parentContainer==FilesUtil.Page.pageIdMap.ALL&&0!=FilesUtil.Page.empSubCatViewData.All[1]||parentContainer==FilesUtil.Page.pageIdMap_mod.MY&&0!=FilesUtil.Page.empSubCatViewData_mod.My[1]||parentContainer==FilesUtil.Page.pageIdMap_mod.ROLE&&0!=FilesUtil.Page.empSubCatViewData_mod.Role[1]||parentContainer==FilesUtil.Page.pageIdMap_mod.SUB&&0!=FilesUtil.Page.empSubCatViewData_mod.Sub[1]||parentContainer==FilesUtil.Page.pageIdMap_mod.TEAM&&0!=FilesUtil.Page.empSubCatViewData_mod.Team[1])(details={}).parentContainer=parentContainer,details.actionType=actionType,ZPeople.Request.send(actionURL,params,FilesOperations.FolderListing.callBack,details,FilesOperations.FolderListing.callBack);break;case FilesOperations.ACTIONMODE.EMPFILE_SUBFILE:var parentContainer;(parentContainer=extraDetails.parentContainer)==FilesUtil.Page.pageIdMap.ALL?(params.fileSortByType=FilesUtil.Page.empSubCatViewData.All[4],params.isFileSortDesc=FilesUtil.Page.empSubCatViewData.All[5]):parentContainer==FilesUtil.Page.pageIdMap_mod.MY?(params.fileSortByType=FilesUtil.Page.empSubCatViewData_mod.My[4],params.isFileSortDesc=FilesUtil.Page.empSubCatViewData_mod.My[5]):parentContainer==FilesUtil.Page.pageIdMap_mod.ROLE?(params.fileSortByType=FilesUtil.Page.empSubCatViewData_mod.Role[4],params.isFileSortDesc=FilesUtil.Page.empSubCatViewData_mod.Role[5]):parentContainer==FilesUtil.Page.pageIdMap_mod.SUB?(params.fileSortByType=FilesUtil.Page.empSubCatViewData_mod.Sub[4],params.isFileSortDesc=FilesUtil.Page.empSubCatViewData_mod.Sub[5]):parentContainer==FilesUtil.Page.pageIdMap_mod.TEAM&&(params.fileSortByType=FilesUtil.Page.empSubCatViewData_mod.Team[4],params.isFileSortDesc=FilesUtil.Page.empSubCatViewData_mod.Team[5]);isFetchData=!1;if(FilesUtil.Page.isListView()?(parentContainer==FilesUtil.Page.pageIdMap.ALL&&0!=FilesUtil.Page.empListViewData.All[1]||parentContainer==FilesUtil.Page.pageIdMap_mod.MY&&0!=FilesUtil.Page.empListViewData_mod.My[1]||parentContainer==FilesUtil.Page.pageIdMap_mod.SUB&&0!=FilesUtil.Page.empListViewData_mod.Sub[1]||parentContainer==FilesUtil.Page.pageIdMap_mod.TEAM&&0!=FilesUtil.Page.empListViewData_mod.Team[1]||parentContainer==FilesUtil.Page.pageIdMap_mod.ROLE&&0!=FilesUtil.Page.empListViewData_mod.Role[1])&&(isFetchData=!0):settingsUrlProps.url.indexOf("-catId")>-1&&(parentContainer==FilesUtil.Page.pageIdMap.ALL&&0!=FilesUtil.Page.empSubCatViewData.All[8]||parentContainer==FilesUtil.Page.pageIdMap_mod.MY&&0!=FilesUtil.Page.empListViewData_mod.My[8]||parentContainer==FilesUtil.Page.pageIdMap_mod.SUB&&0!=FilesUtil.Page.empListViewData_mod.Sub[8]||parentContainer==FilesUtil.Page.pageIdMap_mod.TEAM&&0!=FilesUtil.Page.empListViewData_mod.Team[8]||parentContainer==FilesUtil.Page.pageIdMap_mod.ROLE&&0!=FilesUtil.Page.empListViewData_mod.Role[8])&&(isFetchData=!0),isFetchData)(details={}).parentContainer=parentContainer,ZPeople.Request.send(actionURL,params,FilesOperations.EmpFiles.callBack,details,FilesOperations.EmpFiles.callBack);break;case FilesOperations.ACTIONMODE.PERSFILE:var details;if(params.fileSortByType=FilesUtil.Page.persListViewData.Pers[4],params.isFileSortDesc=FilesUtil.Page.persListViewData.Pers[5],0!=FilesUtil.Page.persListViewData.Pers[1])(details={}).parentContainer=extraDetails.parentContainer,ZPeople.Request.send(actionURL,params,FilesOperations.PersFiles.callBack,details,FilesOperations.PersFiles.callBack)}},getFileExtnType:function(fileExtn){var extnList="";return"1"===fileExtn?extnList="doc,docx,sxw,odt,rtf":"2"===fileExtn?extnList="xls,xlsx,sxc,ods,csv,tsv":"3"===fileExtn?extnList="ppt,pps,odp,ods,sxi,pptx":"4"===fileExtn?extnList="pdf":"5"===fileExtn?extnList="jpg,jpeg,gif,png":"6"===fileExtn?extnList="mp3,mp4a,wav":"7"===fileExtn&&(extnList="mp4"),extnList},fetchFileTypeByExtn:function(fileExtn,mode){var extnType="",FileType="";return"doc,docx,sxw,odt,rtf"===fileExtn?(extnType="1",FileType=ZPI18N.getString("zp.zs.documents")):"xls,xlsx,sxc,ods,csv,tsv"===fileExtn?(extnType="2",FileType=ZPI18N.getString("zp.spreadsheets")):"ppt,pps,odp,ods,sxi,pptx"===fileExtn?(extnType="3",FileType=ZPI18N.getString("zp.presentations")):"pdf"===fileExtn?(extnType="4",FileType=ZPI18N.getString("zp.pdf")):"jpg,jpeg,gif,png"===fileExtn?(extnType="5",FileType=ZPI18N.getString("zp.images")):"mp3,mp4a,wav"===fileExtn?(extnType="6",FileType=ZPI18N.getString("zp.audio")):"mp4"===fileExtn&&(extnType="7",FileType=ZPI18N.getString("zp.video")),"type"===mode?FileType:extnType},selectAll:function(id,isMultiple,isReset){settingsPage.container.find("#topMenu").find("#copyBtn").addClass("zpl_DNI"),settingsPage.container.find("#topMenu").find("#moveBtn").addClass("zpl_DNI");var pageId=FilesUtil.Page.getPageId(),tabGroup=FilesUtil.Page.getTabGroup(),parentContainer=FilesUtil.Page.getParentContainer();if(settingsUrlProps.url.indexOf("-catId")>-1&&("1"===tabGroup?pageId="orgFileSubList_List"+parentContainer:"0"===tabGroup&&(pageId="empFileSubList_List"+parentContainer)),isReset||isMultiple&&!0===settingsPage.container.find("#"+pageId).parent().find("#"+id).prop("checked")||!isMultiple&&!0===settingsPage.container.find("#"+pageId).find("#"+id).prop("checked"))if(settingsPage.container.find("#topMenu_breadCrump").removeClass("zpl_DNI"),isMultiple)settingsPage.container.find("#"+pageId).parent().find("#"+id).prop("checked",!1),settingsPage.container.find("#"+pageId).find("input[type=checkbox]").prop("checked",!1),settingsPage.container.find("#topMenu").find("#deleteBtn").parent().parent().removeClass("opn");else{FilesUtil.componentInit.toggleCheckBox(id,!0);var selFolderLen=settingsPage.container.find("#"+pageId).find("tr[id^='catLi_']").find("input[type='checkbox']:checked").length;0==("1"===tabGroup?settingsPage.container.find("#"+pageId).find("tr[id^='orgFileTr_']").find("input[type='checkbox']:checked").length:settingsPage.container.find("#"+pageId).find("tr[id^='empFileTr_']").find("input[type='checkbox']:checked").length)&&0==selFolderLen&&settingsPage.container.find("#topMenu").find("#deleteBtn").parent().parent().removeClass("opn")}else settingsPage.container.find("#topMenu_breadCrump").addClass("zpl_DNI"),isMultiple?(settingsPage.container.find("#"+pageId).parent().find("#"+id).prop("checked",!0),settingsPage.container.find("#"+pageId).find("input[type=checkbox]").prop("checked",!0)):FilesUtil.componentInit.toggleCheckBox(id,!0),settingsPage.container.find("#topMenu").find("#deleteBtn").parent().parent().addClass("opn");var hasFolder=FilesOperations.Delete.getFolderList("1");if((FilesUtil.Page.isListView()||settingsUrlProps.url.indexOf("-catId")>-1)&&!hasFolder){tabGroup=FilesUtil.Page.getTabGroup(),parentContainer=FilesUtil.Page.getParentContainer();var subPageElement=FilesUtil.Page.getPageData(parentContainer,"2");("1"===tabGroup||"0"===tabGroup&&(void 0!=subPageElement[2]&&Object.keys(subPageElement[2]).length>0&&void 0!=subPageElement[2].filterBy&&subPageElement[2].filterBy==FilesOperations.filterBy.ALLROLE||settingsUrlProps.niceUrl.indexOf("/role")>-1))&&(settingsPage.container.find("#topMenu").find("#copyBtn").removeClass("zpl_DNI"),settingsPage.container.find("#topMenu").find("#moveBtn").removeClass("zpl_DNI"))}hasFolder&&(settingsPage.container.find("#topMenu").find("#copyBtn").addClass("zpl_DNI"),settingsPage.container.find("#topMenu").find("#moveBtn").addClass("zpl_DNI"))},AddFileBtnCallback:function(event){if(FilesUtil.IP.isRestricted)FilesUtil.IP.showError(!0);else if(FilesUtil.Geo.isRestricted)FilesUtil.Geo.showError(!0);else{var tabGroup=FilesUtil.Page.getTabGroup();"1"==tabGroup?FilesOperations.OrgFiles.AddEdit.show():"0"==tabGroup?FilesOperations.EmpFiles.AddEdit.show():("2"==tabGroup||settingsUrlProps.url.indexOf("myspace/overview-files")>-1)&&FilesOperations.PersFiles.AddEdit.show()}},fileFilterFileFormat:function(id){var format=[];format.push({name:ZPI18N.getString("zp.all"),value:"-1",id:"-1"}),format.push({name:ZPI18N.getString("zp.zs.documents"),value:"1",id:"1"}),format.push({name:ZPI18N.getString("zp.spreadsheets"),value:"2",id:"2"}),format.push({name:ZPI18N.getString("zp.presentations"),value:"3",id:"3"}),format.push({name:ZPI18N.getString("zp.pdf"),value:"4",id:"4"}),format.push({name:ZPI18N.getString("zp.images"),value:"5",id:"5"}),format.push({name:ZPI18N.getString("zp.audio"),value:"6",id:"6"}),format.push({name:ZPI18N.getString("zp.video"),value:"7",id:"7"});var tokenObj={};tokenObj.options=format,tokenObj.contentType="text",tokenObj.dataMapping={label:"name",informativeText:"name",value:"id"},tokenObj.dropdownList={fitForElement:!0,moveOnScroll:!0},ZPeopleComponents.select(settingsPage.container.find("#"+id),tokenObj)},getAllNodes:function(data){var fileOrgStructure=JSON.parse(data),nodes={};return FilesUtil.Page.getParentContainer()==FilesUtil.Page.pageIdMap_mod.MYDEPT?nodes=fileOrgStructure.Department:(void 0!=fileOrgStructure.Entity&&(nodes=$.extend(!1,{},nodes,fileOrgStructure.Entity)),void 0!=fileOrgStructure.Unit&&(nodes=$.extend(!1,{},nodes,fileOrgStructure.Unit)),void 0!=fileOrgStructure.Division&&(nodes=$.extend(!1,{},nodes,fileOrgStructure.Division)),void 0!=fileOrgStructure.Department&&(nodes=$.extend(!1,{},nodes,fileOrgStructure.Department)),void 0!=fileOrgStructure.Location&&(nodes=$.extend(!1,{},nodes,fileOrgStructure.Location))),nodes},showSharedToList:function(id,shareId){var rowData=settingsPage.container.find("#"+id).data().ldata,tabGroup=FilesUtil.Page.getTabGroup(),parentContainer=FilesUtil.Page.getParentContainer(),data={},sharedToList=[];for(var item in"1"===tabGroup?(FilesUtil.Page.isModulePage()?data=FilesOperations.Util.getAllNodes(JSON.stringify(rowData.fileOrgStructure)):parentContainer===FilesUtil.Page.pageIdMap.ENT?data=rowData.fileOrgStructure.Entity:parentContainer===FilesUtil.Page.pageIdMap.UNIT?data=rowData.fileOrgStructure.Unit:parentContainer===FilesUtil.Page.pageIdMap.DIV?data=rowData.fileOrgStructure.Division:parentContainer===FilesUtil.Page.pageIdMap.DEPT?data=rowData.fileOrgStructure.Department:parentContainer===FilesUtil.Page.pageIdMap.LOC&&(data=rowData.fileOrgStructure.Location),delete data[shareId]):data=rowData.moreRole,data){var resultHtml='<div class="zpl_tg"><span>'+data[item]+"</span></div>";sharedToList.push({itemType:"custom",innerHTML:resultHtml})}var viewType="1";settingsUrlProps.url.indexOf("-catId")>-1&&(viewType="2");id=id.substr(id.lastIndexOf("_")+1,id.length),FilesOperations.MoreOption.showMoreMenu("sharedTo","sharedTo_"+id+parentContainer+"_"+viewType,FilesOperations.MoreOption.getMenuObject("sharedTo"),sharedToList,!0)},showSharedFolderList:function(id,shareId){settingsPage.container.find("#"+id).data().ldata,FilesUtil.Page.getTabGroup();for(var parentContainer=FilesUtil.Page.getParentContainer(),data=ZSEC.Encoder.encodeForHTML(data.fileCatNameNew),sharedToList=[],i=1;i<=data.length;i++){var resultHtml='<div class="zpl_tg"><span>'+data[i]+"</span></div>";sharedToList.push({itemType:"custom",innerHTML:resultHtml})}id=id.substr(id.lastIndexOf("_")+1,id.length),FilesOperations.MoreOption.showMoreMenu("folderTo","folderTo_"+id+parentContainer,FilesOperations.MoreOption.getMenuObject("folderTo"),sharedToList,!0)},getMoreActionFolderView:function(catId){var actionsList=[];return actionsList.push({id:"files_folderView_edit",label:ZPI18N.getString("zp.edit"),iconClass:"PI_edt",catId:catId}),actionsList.push({id:"files_folderView_delete",label:ZPI18N.getString("zp.delete"),iconClass:"PI_delete",catId:catId}),actionsList},getMoreActionList:function(data){var rowData=JSON.parse(data),fileIdData=rowData.fileID,actionsList=[];if("1"==rowData.fileType){if(0!==FilesUtil.loginUserRoleCheck&&1!==FilesUtil.loginUserRoleCheck||(actionsList.push({id:"files_copyURL",label:ZPI18N.getString("zp.copyUrl"),iconClass:"PI_cpy",fileIdData:fileIdData}),1===rowData.fileAcknowledge&&actionsList.push({id:"files_ackDetails_listView",label:ZPI18N.getString("zp.viewack"),iconClass:"PI_user_tick",fileIdData:fileIdData})),0!==FilesUtil.loginUserRoleCheck&&1!==FilesUtil.loginUserRoleCheck||(actionsList=Zsign.FilesOperations.showActionMenu_Org(rowData,actionsList)),null!=rowData.fileActions.isEditPerm&&void 0!=rowData.fileActions.isEditPerm&&!0===rowData.fileActions.isEditPerm){var rowId="orgFileTr_"+rowData.fileID;actionsList.push({id:"files_orgList_edit",label:ZPI18N.getString("zp.edit"),iconClass:"PI_edt",rowId:rowId,fileIdData:fileIdData})}null!=rowData.fileActions.isDeletePerm&&void 0!=rowData.fileActions.isDeletePerm&&!0===rowData.fileActions.isDeletePerm&&actionsList.push({id:"files_orgList_delete",label:ZPI18N.getString("zp.delete"),iconClass:"PI_delete",fileIdData:fileIdData})}else if("0"==rowData.fileType){if(0!==FilesUtil.loginUserRoleCheck&&1!==FilesUtil.loginUserRoleCheck||1===rowData.fileAcknowledge&&actionsList.push({id:"files_ackDetails_listView",label:ZPI18N.getString("zp.viewack"),iconClass:"PI_user_tick",fileIdData:fileIdData}),0!==FilesUtil.loginUserRoleCheck&&1!==FilesUtil.loginUserRoleCheck||(actionsList=Zsign.FilesOperations.showActionMenu_Emp(rowData,actionsList)),null!=rowData.fileActions.isEditPerm&&void 0!=rowData.fileActions.isEditPerm&&!0===rowData.fileActions.isEditPerm){rowId="empFileTr_"+rowData.fileID;actionsList.push({id:"files_empList_edit",label:ZPI18N.getString("zp.edit"),iconClass:"PI_edt",rowId:rowId,fileIdData:fileIdData})}null!=rowData.fileActions.isDeletePerm&&void 0!=rowData.fileActions.isDeletePerm&&!0===rowData.fileActions.isDeletePerm&&actionsList.push({id:"files_empList_delete",label:ZPI18N.getString("zp.delete"),iconClass:"PI_delete",fileIdData:fileIdData})}else if("2"==rowData.fileType){if(null!=rowData.fileActions.isEditPerm&&void 0!=rowData.fileActions.isEditPerm&&!0===rowData.fileActions.isEditPerm){rowId="persFileTr_"+rowData.fileID;actionsList.push({id:"files_persList_edit",label:ZPI18N.getString("zp.edit"),iconClass:"PI_edt",rowId:rowId,fileIdData:fileIdData})}null!=rowData.fileActions.isDeletePerm&&void 0!=rowData.fileActions.isDeletePerm&&!0===rowData.fileActions.isDeletePerm&&actionsList.push({id:"files_persList_delete",label:ZPI18N.getString("zp.delete"),iconClass:"PI_delete",fileIdData:fileIdData})}return actionsList},showActions:function(event,rowId){var actionsList=settingsPage.container.find("#"+rowId).data().ldata.actionsList;FilesOperations.MoreOption.showMoreMenu("moreAction",event.id,FilesOperations.MoreOption.getMenuObject("moreAction"),actionsList,!0)},showHideBreadCrump:function(){var parentContainer=FilesUtil.Page.getParentContainer();parentContainer==FilesUtil.Page.pageIdMap.ALL||parentContainer==FilesUtil.Page.pageIdMap_mod.TEAM||FilesUtil.Page.pageIdMap_mod.SUB,settingsPage.container.find("#topMenu_breadCrump").html("").addClass("zpl_DNI")},getNodeValue:function(json,id,isName){var nodeName="";return $.each(json,function(key,val){if(isName){if(val.value==id)return nodeName=val.name,!1}else if(val.Id==id)return nodeName=val.Value,!1}),nodeName}},FilesOperations.DataPage={showLoadingPage:function(){var noPageId=FilesOperations.DataPage.getNoDataContainer(),loadingPageId=noPageId.find("#noDataIconWpr");if(loadingPageId.find("#emptPage").remove(),loadingPageId.find("#zp_page_loading").length<=0){loadingPageId.append('<div id="zp_page_loading" class="loader-inner line-scale"><div></div><div></div><div></div><div></div><div></div></div>')}loadingPageId.addClass("h100_per"),loadingPageId.removeClass("zpl_DNI"),noPageId.removeClass("zpl_DNI")},hideLoadingPage:function(){var loadingPageId=FilesOperations.DataPage.getNoDataContainer().find("#noDataIconWpr");loadingPageId.find("#zp_page_loading").remove(),loadingPageId.removeClass("h100_per"),loadingPageId.removeClass("zpl_DNI")},getNoDataContainer:function(){var noPageId="";return FilesUtil.Page.isListView()?noPageId=settingsPage.container.find("#fileListViewCntWpr"):settingsUrlProps.url.indexOf("-catId")>-1?noPageId=settingsPage.container.find("#fileSubFolderViewCntWpr"):FilesUtil.Page.isFolderViewPage()&&(noPageId=settingsPage.container.find("#fileFolderViewCntWpr")),noPageId},showNoData:function(){var searchLen=settingsPage.container.find(".zpl_fltrvwlst").find("li").length,tabGroup=FilesUtil.Page.getTabGroup(),desc="",nofileHdr="",showAddBtnInDeptPage=!1;if(FilesUtil.Page.isModulePage())if("1"==tabGroup)nofileHdr=(parentContainer=FilesUtil.Page.getParentContainer())==FilesUtil.Page.pageIdMap_mod.MYDEPT?ZPI18N.getString("zp.files.module.nodeptfiles"):ZPI18N.getString("zp.files.module.nodatahdr1"),desc=searchLen>0?ZPI18N.getString("zp.newnodata"):parentContainer==FilesUtil.Page.pageIdMap_mod.MYDEPT?ZPI18N.getString("zp.files.module.nodatadec4"):ZPI18N.getString("zp.files.module.nodatadec1"),FilesUtil.Page.isDeptTeamPage()&&FilesUtil.isDeptLead&&(showAddBtnInDeptPage=!0);else if("0"==tabGroup){var parentContainer;nofileHdr=(parentContainer=FilesUtil.Page.getParentContainer())==FilesUtil.Page.pageIdMap_mod.TEAM||parentContainer==FilesUtil.Page.pageIdMap_mod.SUB?ZPI18N.getString("zp.files.module.nodatahdr2"):ZPI18N.getString("zp.files.module.nodatahdr1"),desc=searchLen>0?ZPI18N.getString("zp.newnodata"):parentContainer==FilesUtil.Page.pageIdMap_mod.TEAM||parentContainer==FilesUtil.Page.pageIdMap_mod.SUB?ZPI18N.getString("zp.files.module.nodatadec2"):ZPI18N.getString("zp.files.module.nodatadec1")}else"2"==tabGroup&&(searchLen>0?(nofileHdr=ZPI18N.getString("zp.files.module.nodatahdr4"),desc=ZPI18N.getString("zp.newnodata")):(nofileHdr=ZPI18N.getString("zp.files.module.nodatahdr3"),desc=ZPI18N.getString("zp.files.module.nodatadec3")));else if(searchLen>0)desc=ZPI18N.getString("zp.newnodata"),nofileHdr=ZPI18N.getString("zp.esign.nofiles");else if("1"==tabGroup){desc=ZPI18N.getString("zp.noorgfiles");var tabname=ZPI18N.getString("zp.files.operations.orgfile")==FilesUtil.compdisname?FilesUtil.compdisname.toLowerCase():ZSEC.Encoder.encodeForHTML(FilesUtil.compdisname);nofileHdr=ZPI18N.getString("zp.common.noadded",new Array(tabname))}else if("0"==tabGroup){desc=ZPI18N.getString("zp.noempfiles");tabname=ZPI18N.getString("zp.files.operations.empfile")==FilesUtil.hrfiledisname?FilesUtil.hrfiledisname.toLowerCase():ZSEC.Encoder.encodeForHTML(FilesUtil.hrfiledisname);nofileHdr=ZPI18N.getString("zp.common.noadded",new Array(tabname))}FilesOperations.DataPage.hideLoadingPage();var noPageId=FilesOperations.DataPage.getNoDataContainer(),emptyhtml=new EmptyPages("zp_nd_file",nofileHdr,desc,noPageId.find("#noDataIconWpr"));searchLen>0?settingsUrlProps.url.indexOf("operations/files")>-1&&settingsPage.container.find("#addFileBtn").removeClass("zpl_DNI"):(settingsPage.container.find("#addFileBtn").addClass("zpl_DNI"),"1"==(tabGroup=FilesUtil.Page.getTabGroup())&&!FilesUtil.Page.isModulePage()||showAddBtnInDeptPage?(emptyhtml.buttonName=showAddBtnInDeptPage?ZPI18N.getString("zp.files.module.adddeptfile"):ZSEC.Encoder.encodeForHTML(FilesUtil.addcompdisnameBtn),emptyhtml.btnCallback=FilesOperations.OrgFiles.AddEdit.show):"0"!=tabGroup||FilesUtil.Page.isModulePage()?"2"==tabGroup&&(emptyhtml.buttonName=ZPI18N.getString("zp.addpersonalfiles"),emptyhtml.btnCallback=FilesOperations.PersFiles.AddEdit.show):(emptyhtml.buttonName=ZSEC.Encoder.encodeForHTML(FilesUtil.addhrfiledisnameBtn),emptyhtml.btnCallback=FilesOperations.EmpFiles.AddEdit.show));emptyhtml.show(),noPageId.find("#noDataIconWpr").removeClass("zpl_DNI"),noPageId.find("#noDataIconWpr").prev().addClass("zpl_DNI")},showDataTable:function(pageId){FilesOperations.DataPage.hideLoadingPage();var noPageId=FilesOperations.DataPage.getNoDataContainer();noPageId.find("#noDataIconWpr").addClass("zpl_DNI"),noPageId.find("#noDataIconWpr").prev().removeClass("zpl_DNI"),null!=pageId&&pageId.closest(".zpl_tblres").removeClass("zpl_DNI")},hideFileDataTable_subFolderView:function(){FilesOperations.DataPage.hideLoadingPage(),FilesOperations.DataPage.getNoDataContainer().find("#noDataIconWpr").addClass("zpl_DNI")},hideSubFolderView:function(){var noPageId=FilesOperations.DataPage.getNoDataContainer();noPageId.addClass("zpl_DNI"),noPageId.find("#subFolderSecn1, #subFolderSecn2").addClass("zpl_DNI")}},FilesOperations.SortData={toggle:function(ele,val){var dataMode=settingsUrlProps.url.indexOf("-catId")>-1?"2":"1";FilesOperations.Page.resetDefaultParams(dataMode);for(var sortField=val,sortDesc=!1,toggleFields=settingsPage.container.find(ele).parent().parent().parent().find("[class^='PI_sort']"),i=0;i<toggleFields.length;i++)toggleFields[i].id!=ele.id?settingsPage.container.find("#"+toggleFields[i].id).removeClass("asc").removeClass("desc"):ele.classList.contains("desc")?(settingsPage.container.find(ele).removeClass("desc").addClass("asc"),sortDesc=!1):(settingsPage.container.find(ele).removeClass("asc").addClass("desc"),sortDesc=!0);var parentContainer=FilesUtil.Page.getParentContainer();parentContainer==FilesUtil.Page.pageIdMap.ENT?(FilesUtil.Page.orgSubCatViewData.Ent[4]=sortField,FilesUtil.Page.orgSubCatViewData.Ent[5]=sortDesc):parentContainer==FilesUtil.Page.pageIdMap.UNIT?(FilesUtil.Page.orgSubCatViewData.Unit[4]=sortField,FilesUtil.Page.orgSubCatViewData.Unit[5]=sortDesc):parentContainer==FilesUtil.Page.pageIdMap.DIV?(FilesUtil.Page.orgSubCatViewData.Div[4]=sortField,FilesUtil.Page.orgSubCatViewData.Div[5]=sortDesc):parentContainer==FilesUtil.Page.pageIdMap.DEPT?(FilesUtil.Page.orgSubCatViewData.Dept[4]=sortField,FilesUtil.Page.orgSubCatViewData.Dept[5]=sortDesc):parentContainer==FilesUtil.Page.pageIdMap.LOC?(FilesUtil.Page.orgSubCatViewData.Loc[4]=sortField,FilesUtil.Page.orgSubCatViewData.Loc[5]=sortDesc):parentContainer==FilesUtil.Page.pageIdMap.ALL?(FilesUtil.Page.empSubCatViewData.All[4]=sortField,FilesUtil.Page.empSubCatViewData.All[5]=sortDesc):parentContainer==FilesUtil.Page.pageIdMap_mod.MY?(FilesUtil.Page.empSubCatViewData_mod.My[4]=sortField,FilesUtil.Page.empSubCatViewData_mod.My[5]=sortDesc):parentContainer==FilesUtil.Page.pageIdMap_mod.ROLE?(FilesUtil.Page.empSubCatViewData_mod.Role[4]=sortField,FilesUtil.Page.empSubCatViewData_mod.Role[5]=sortDesc):parentContainer==FilesUtil.Page.pageIdMap_mod.SUB?(FilesUtil.Page.empSubCatViewData_mod.Sub[4]=sortField,FilesUtil.Page.empSubCatViewData_mod.Sub[5]=sortDesc):parentContainer==FilesUtil.Page.pageIdMap_mod.TEAM?(FilesUtil.Page.empSubCatViewData_mod.Team[4]=sortField,FilesUtil.Page.empSubCatViewData_mod.Team[5]=sortDesc):parentContainer==FilesUtil.Page.pageIdMap_mod.MYDEPT?(FilesUtil.Page.orgSubCatViewData_mod.Mydept[4]=sortField,FilesUtil.Page.orgSubCatViewData_mod.Mydept[5]=sortDesc):parentContainer==FilesUtil.Page.pageIdMap_mod.ORG?(FilesUtil.Page.orgSubCatViewData_mod.Org[4]=sortField,FilesUtil.Page.orgSubCatViewData_mod.Org[5]=sortDesc):parentContainer==FilesUtil.Page.pageIdMap_pol.ORG?(FilesUtil.Page.orgSubCatViewData_pol.Org[4]=sortField,FilesUtil.Page.orgSubCatViewData_pol.Org[5]=sortDesc):parentContainer==FilesUtil.Page.pageIdMap_mod.PERS&&(FilesUtil.Page.persListViewData.Pers[4]=sortField,FilesUtil.Page.persListViewData.Pers[5]=sortDesc),FilesOperations.FolderListing.getData(parentContainer)}},FilesOperations.FolderListing={init:function(){settingsPage.container.addClass("zpl_tblfxd");var parentContainer=FilesUtil.Page.getParentContainer(),tabGroup=FilesUtil.Page.getTabGroup(),isFromModulePage=FilesUtil.Page.isModulePage(),html=FilesOperations.FolderListing.constructTitleBar(parentContainer);if(""!=(html+=FilesOperations.FolderListing.constructHeader(parentContainer))&&settingsPage.container.html(html),FilesOperations.DataPage.showLoadingPage(),"1"!=tabGroup||isFromModulePage?"0"!=tabGroup||isFromModulePage?"2"==tabGroup&&(settingsPage.container.find("#folderHdr, #sharedToHdr, #ackIconHdr").addClass("zpl_DNI"),settingsPage.container.find("#fileSizeHdr").removeClass("zpl_DNI")):FilesOperations.EmpFiles.componentInit.initHeader():FilesOperations.OrgFiles.componentInit.initHeader(),FilesUtil.IP.isRestricted)FilesUtil.IP.showError(!1);else if(FilesUtil.Geo.isRestricted)FilesUtil.Geo.showError(!1);else{var pageElement=FilesUtil.Page.getPageData(parentContainer,"1");if(0===pageElement[0]&&1==pageElement[1])new FireScrollBack(FilesOperations.FolderListing.getData,settingsPage.container,FilesOperations.Page.getFirescrollId());"0"==tabGroup&&(parentContainer!=FilesUtil.Page.pageIdMap.ALL&&parentContainer!=FilesUtil.Page.pageIdMap_mod.SUB||(FilesOperations.EmpFiles.Modal.filter(),FilesOperations.EmpFiles.Filter.init()))}},constructTitleBar:function(parentContainer){var titleBar="",tabGroup=FilesUtil.Page.getTabGroup(),checkBoxId="1"==tabGroup?"orgfile_checkallbox":"empfile_checkallbox";return titleBar+='<div class="zpl_btnmnu"><div id="topMenu" class="actn_ovrly"><div><button id="deleteBtn" onclick="FilesOperations.Delete.confirmPopup()" class="zlabel zlabel--red zlabel--medium" tabindex="-1">'+ZPI18N.getString("zp.delete")+"</button>",(0==FilesUtil.loginUserRoleCheck||1==FilesUtil.loginUserRoleCheck&&"2"!=tabGroup)&&(titleBar+='<button id="copyBtn" onclick="FilesOperations.copyMove.openModal(1)" class="zlabel zlabel--blue zlabel--outline zlabel--medium"  tabindex="-1">'+ZPI18N.getString("zp.copy")+'</button><button id="moveBtn" onclick="FilesOperations.copyMove.openModal(2)" class="zlabel zlabel--blue zlabel--outline zlabel--medium"  tabindex="-1">'+ZPI18N.getString("zp.move")+"</button>"),titleBar+="</div>",titleBar+='<i class="PI_cls" onclick="FilesOperations.Util.selectAll(\''+checkBoxId+"' , true, true);\"></i></div>",titleBar+='<div id="topMenu_breadCrump" class="zpl_brdcrmp zpl_DNI"></div>',"1"==tabGroup?(titleBar+='<div class="zpl_rgt">',0!=FilesUtil.loginUserRoleCheck&&1!=FilesUtil.loginUserRoleCheck||!FilesUtil.Page.isModulePage()||FilesUtil.Page.isDeptTeamPage()||(titleBar+='<button id="gotofilesoperations" onclick="FilesOperations.Redirect.goToOperations('+tabGroup+');" class="zlabel zlabel--blue zlabel--outline zlabel--medium ">'+ZPI18N.getString("zp.manage")+"</button>"),titleBar+='<div class="grpbtn" role="tablist" aria-label="'+ZPI18N.getString("zp.view")+'"><i class="PI_listview zpl_act" id="files_list_view" onclick="FilesOperations.FolderListing.SwitchListAndFolderView(1);" data-title-position="bottom" title="'+ZPI18N.getString("zp.list")+'" tabindex="0" role="tab" aria-label="'+ZPI18N.getString("zp.listview")+'" aria-selected="true"></i><i class="PI_folder" id="files_folder_view" onclick="FilesOperations.FolderListing.SwitchListAndFolderView(2);" data-title-position="bottom" title="'+ZPI18N.getString("zp.folder")+'" tabindex="0" role="tab" aria-label="'+ZPI18N.getString("zp.files.wcag.folderview")+'" aria-selected="true"></i></div>',FilesUtil.Page.isDeptTeamPage()?titleBar+='<button id="addFileBtn" onclick="FilesOperations.Util.AddFileBtnCallback();" class="zlabel zlabel--blue zlabel--medium" aria-haspopup="dialog">'+ZPI18N.getString("zp.files.module.adddeptfile")+"</button>":titleBar+='<button id="addFileBtn" onclick="FilesOperations.Util.AddFileBtnCallback();" class="zlabel zlabel--blue zlabel--medium" aria-haspopup="dialog">'+ZSEC.Encoder.encodeForHTML(FilesUtil.addcompdisnameBtn)+"</button>",titleBar+='<i class="zpl_ibg PI_fltr" onclick="FilesOperations.OrgFiles.Filter.showHide()" data-title-position="bottom" title="'+ZPI18N.getString("zp.filter")+'" role="button" tabindex="0" aria-label="'+ZPI18N.getString("zp.filter")+'" aria-haspopup="dialog"></i><i type="button" id="impExpCont'+parentContainer+'" class="zpl_ibg zpl_drpdwn-js PI_more" data-title-position="bottom-right" title="'+ZPI18N.getString("zp.files.operations.moreactions")+'"></i></div>'):"0"==tabGroup?(titleBar+='<div class="zpl_rgt">',0!=FilesUtil.loginUserRoleCheck&&1!=FilesUtil.loginUserRoleCheck||!FilesUtil.Page.isModulePage()||FilesUtil.Page.isDeptTeamPage()||(titleBar+='<button id="gotofilesoperations" onclick="FilesOperations.Redirect.goToOperations('+tabGroup+');" class="zlabel zlabel--blue zlabel--outline zlabel--medium ">'+ZPI18N.getString("zp.manage")+"</button>"),titleBar+='<div class="grpbtn" role="tablist" aria-label="'+ZPI18N.getString("zp.view")+'"><i class="PI_listview zpl_act" id="files_list_view" onclick="FilesOperations.FolderListing.SwitchListAndFolderView(1);" data-title-position="bottom" title="'+ZPI18N.getString("zp.list")+'" tabindex="0" role="tab" aria-label="'+ZPI18N.getString("zp.listview")+'" aria-selected="true"></i><i class="PI_folder" id="files_folder_view" onclick="FilesOperations.FolderListing.SwitchListAndFolderView(2);" data-title-position="bottom" title="'+ZPI18N.getString("zp.folder")+'" tabindex="0" role="tab" aria-label="'+ZPI18N.getString("zp.files.wcag.folderview")+'" aria-selected="true"></i></div><button id="addFileBtn" onclick="FilesOperations.Util.AddFileBtnCallback();" class="zlabel zlabel--blue zlabel--medium">'+ZSEC.Encoder.encodeForHTML(FilesUtil.addhrfiledisnameBtn)+'</button><i class="zpl_ibg PI_fltr" onclick="FilesOperations.EmpFiles.Filter.showHide()" data-title-position="bottom" title="'+ZPI18N.getString("zp.filter")+'" role="button" tabindex="0" aria-label="'+ZPI18N.getString("zp.filter")+'" aria-haspopup="dialog"></i><i type="button" id="impExpCont'+parentContainer+'" class="zpl_ibg zpl_drpdwn-js PI_more" data-title-position="bottom-right" title="'+ZPI18N.getString("zp.files.operations.moreactions")+'" ></i></div>'):"2"==tabGroup&&(titleBar+='<div class="zpl_rgt"><button id="addFileBtn" onclick="FilesOperations.Util.AddFileBtnCallback();" class="zlabel zlabel--blue zlabel--medium" aria-haspopup="dialog">'+ZPI18N.getString("zp.addpersonalfiles")+'</button><i class="zpl_ibg PI_fltr" onclick="FilesOperations.PersFiles.Filter.showHide()" data-title-position="bottom" title="'+ZPI18N.getString("zp.filter")+'" role="button" tabindex="0" aria-label="'+ZPI18N.getString("zp.filter")+'" aria-haspopup="dialog"></i></div>'),titleBar+="</div>",titleBar+='<div class="zpl_fltrvw zpl_DNI"><div><ul class="zpl_fltrvwlst"></ul></div><div class="d-flexcap MLauto"><a onclick="FilesOperations.Breadcrump.remove(undefined, \'true\')">'+ZPI18N.getString("zp.reset")+"</a></div></div>"},constructHeader:function(parentContainer){var header="",tabGroup=FilesUtil.Page.getTabGroup();return settingsPage.container.find(".zpl_rgtcnt").length<=0&&(header+=FilesOperations.FolderListing.constructListContainer(parentContainer,tabGroup),header+=FilesOperations.FolderListing.constructFolderContainer(parentContainer,tabGroup),"2"!=tabGroup&&(header+=FilesOperations.FolderListing.constructSubFolderContainer(parentContainer,tabGroup)),"1"==tabGroup?header+='<div id="orgFile_filterModal" class="zpl_fltr"></div>':"0"==tabGroup?header+='<div id="empFile_filterModal" class="zpl_fltr"></div>':"2"==tabGroup&&(header+='<div id="persFile_filterModal" class="zpl_fltr"></div>')),header},constructListContainer:function(parentContainer,tabGroup){var container="";return container+='<div id="fileListViewCntWpr" class="zpl_rgtcnt h100_per">',container+=FilesOperations.FolderListing.constructInnerListContainer(parentContainer,tabGroup),container+='<div id="noDataIconWpr" class="zpl_DNI"></div>',container+="</div>"},constructInnerListContainer:function(parentContainer,tabGroup,isSubFolder){var container="";container+='<div id="listview-js" class="zpl_tblres zpl_DNI" aria-label="'+ZPI18N.getString("zp.files.wcag.filescontainer")+'"><table class="zpl_tbl" role="grid" tabindex="0"><thead><tr><th id="chkBoxHdr" width=40 scope="col">',"1"==tabGroup?container+='<div class="zcheckbox" onclick="FilesOperations.Util.selectAll(\'orgfile_checkallbox\' , true);"><input id="orgfile_checkallbox" type="checkbox" name="check" class="zcheckbox__helper"><label class="zcheckbox__label"></label></div>':"0"==tabGroup?container+='<div class="zcheckbox" onclick="FilesOperations.Util.selectAll(\'empfile_checkallbox\' , true);"><input id="empfile_checkallbox" type="checkbox" name="check" class="zcheckbox__helper"><label class="zcheckbox__label"></label></div>':"2"==tabGroup&&(container+='<div class="zcheckbox" onclick="FilesOperations.Util.selectAll(\'persfile_checkallbox\' , true);"><input id="persfile_checkallbox" type="checkbox" name="check" class="zcheckbox__helper"><label class="zcheckbox__label"></label></div>'),container+='</th><th scope="col">'+ZPI18N.getString("zp.name")+'<div class="zpl_icncnt"><i id="sort_fileName" class="PI_sort" onclick="FilesOperations.SortData.toggle(this,\'1\');" data-title-position="bottom" title="'+ZPI18N.getString("zp.sort")+'"></i></div></th><th id="ackIconHdr" width=50 scope="col"></th><th id="sharedToHdr" width=200 scope="col">'+ZPI18N.getString("zp.files.operations.sharedwith",new Array(""))+'</th><th id="folderHdr" class="zpl_DNI" width=200 scope="col">'+ZPI18N.getString("zp.folder")+'</th><th id="modTimeHdr" scope="col">'+ZPI18N.getString("zp.common.updatedon",new Array(""))+'<div class="zpl_icncnt"><i id="sort_modifiedTime" class="PI_sort desc" onclick="FilesOperations.SortData.toggle(this,\'3\');" data-title-position="bottom" title="'+ZPI18N.getString("zp.sort")+'"></i></div></th><th id="fileSizeHdr" class="zpl_DNI" width=200 scope="col">'+ZPI18N.getString("zp.files.operations.size")+'</th><th id="filesActionHdr" width=140 scope="col">'+ZPI18N.getString("zp.actions")+"</th></tr></thead>";var id="";return void 0!=isSubFolder&&isSubFolder?"1"==tabGroup?id="orgFileSubList_List"+parentContainer:"0"==tabGroup&&(id="empFileSubList_List"+parentContainer):"1"==tabGroup?id="orgFileListView"+parentContainer:"0"==tabGroup?id="empFileListView"+parentContainer:"2"==tabGroup&&(id="persFileListView"+parentContainer),container+='<tbody id="'+id+'"></tbody>',container+="</table>",container+="</div>"},constructFolderContainer:function(parentContainer,tabGroup){var container="";return container+='<div id="fileFolderViewCntWpr" class="zpl_rgtcnt h100_per zpl_DNI">',"1"==tabGroup?container+='<div id="orgFileList'+parentContainer+'" class="zpl_cat">':"0"==tabGroup&&(container+='<div id="empFileList'+parentContainer+'" class="zpl_cat">'),container+="</div>",container+='<div id="noDataIconWpr" class="zpl_DNI"></div>',container+="</div>"},constructSubFolderContainer:function(parentContainer,tabGroup){var container="";return container+='<div id="fileSubFolderViewCntWpr" class="zpl_rgtcnt zpl_filesSubFLdr h100_per zpl_DNI">',container+='<div id="subFolderSecn1" class="zpl_secn zpl_DNI">',"1"==tabGroup?container+='<div id="orgFileSubList_Folder'+parentContainer+'" class="zpl_cat">':"0"==tabGroup&&(container+='<div id="empFileSubList_Folder'+parentContainer+'" class="zpl_cat">'),container+="</div>",container+="</div>",container+='<div id="subFolderSecn2" class="zpl_secn zpl_DNI">',container+=FilesOperations.FolderListing.constructInnerListContainer(parentContainer,tabGroup,!0),container+="</div>",container+='<div id="noDataIconWpr" class="zpl_DNI"></div>',container+="</div>"},getData:function(){if(FilesUtil.IP.isRestricted)FilesUtil.IP.showError(!1);else if(FilesUtil.Geo.isRestricted)FilesUtil.Geo.showError(!1);else{var mainPageId,subPageId,listPageId,pageElement,parentContainer=FilesUtil.Page.getParentContainer(),tabGroup=FilesUtil.Page.getTabGroup();listPageId="#fileListViewCntWpr",mainPageId="#fileFolderViewCntWpr",subPageId="#fileSubFolderViewCntWpr",pageElement=settingsUrlProps.url.indexOf("-catId")>-1?FilesUtil.Page.getPageData(parentContainer,"2"):FilesUtil.Page.getPageData(parentContainer,"1");var scrlObj=FilesOperations.Page.getFirescrollId(),isFetchData=!1,isFirescroll=!1;if(void 0!=settingsPage.fireScrollObj[scrlObj]&&settingsPage.fireScrollObj[scrlObj].fireScrollCalled&&(isFirescroll=!0),FilesUtil.Page.isModulePage()&&FilesOperations.Page.hideElementsInModule(),0==pageElement[0]){var pageId=FilesUtil.Page.getPageId();settingsPage.container.find("#"+pageId).html(""),FilesOperations.DataPage.showLoadingPage()}(0==pageElement[0]&&1==pageElement[1]||0==pageElement[7]&&1==pageElement[8]||1==pageElement[3]||1==pageElement[1]&&isFirescroll||1==pageElement[8]&&isFirescroll)&&(isFetchData=!0),"2"==tabGroup?isFetchData&&FilesOperations.PersFiles.fetchData(parentContainer):settingsUrlProps.url.indexOf("-catId")>-1||FilesUtil.Page.isListView()?(settingsPage.container.find("#files_folder_view").removeClass("zpl_act"),settingsPage.container.find("#files_list_view").addClass("zpl_act"),settingsPage.container.find("#topMenu_breadCrump").removeClass("zpl_DNI"),FilesUtil.Page.isListView()?(settingsPage.container.find(mainPageId).addClass("zpl_DNI"),settingsPage.container.find(subPageId).addClass("zpl_DNI"),settingsPage.container.find(listPageId).removeClass("zpl_DNI"),settingsPage.container.find("#folderHdr").removeClass("zpl_DNI"),settingsPage.container.find("#topMenu_breadCrump").addClass("zpl_DNI"),settingsPage.container.find("#files_list_view").parent().removeClass("zpl_DNI")):(settingsPage.container.find(listPageId).addClass("zpl_DNI"),settingsPage.container.find(mainPageId).addClass("zpl_DNI"),settingsPage.container.find(subPageId).removeClass("zpl_DNI"),settingsPage.container.find("#folderHdr").addClass("zpl_DNI"),settingsPage.container.find("#topMenu").removeClass("opn"),settingsPage.container.find("#topMenu_breadCrump").removeClass("zpl_DNI"),settingsPage.container.find("#files_list_view").parent().addClass("zpl_DNI")),settingsPage.container.find("#ackIconHdr, #sharedToHdr, #modTimeHdr").removeClass("zpl_DNI"),FilesUtil.Page.isModulePage()&&(parentContainer!=FilesUtil.Page.pageIdMap_mod.MY&&parentContainer!=FilesUtil.Page.pageIdMap_mod.ROLE||(FilesUtil.Page.isListView()?settingsPage.container.find(listPageId).find("#sharedToHdr").addClass("zpl_DNI"):settingsPage.container.find(subPageId).find("#sharedToHdr").addClass("zpl_DNI"))),isFetchData&&("1"===tabGroup?FilesOperations.OrgFiles.fetchData(parentContainer):"0"===tabGroup&&FilesOperations.EmpFiles.fetchData(parentContainer))):(settingsPage.container.find("#files_folder_view").addClass("zpl_act"),settingsPage.container.find("#files_list_view").removeClass("zpl_act"),settingsPage.container.find("#files_list_view").parent().removeClass("zpl_DNI"),settingsPage.container.find("#topMenu").removeClass("opn"),settingsPage.container.find("#topMenu_breadCrump").addClass("zpl_DNI"),settingsPage.container.find(listPageId).addClass("zpl_DNI"),settingsPage.container.find("#folderHdr").addClass("zpl_DNI"),settingsPage.container.find(mainPageId).removeClass("zpl_DNI"),settingsPage.container.find(subPageId).addClass("zpl_DNI"),settingsPage.container.find("#ackIconHdr, #sharedToHdr, #modTimeHdr").addClass("zpl_DNI"),isFetchData||FilesOperations.Util.showHideBreadCrump(),isFetchData&&FilesOperations.FolderListing.showCategoryView(parentContainer))}},showCategoryView:function(parentContainer){var actionURL,params={},actionMode="",pageElement=FilesUtil.Page.getPageData(parentContainer,"1");"1"==(tabGroup=FilesUtil.Page.getTabGroup())?actionMode=FilesOperations.ACTIONMODE.ORGFILE_FOLDER:"0"==tabGroup&&(actionMode=FilesOperations.ACTIONMODE.EMPFILE_FOLDER),actionURL="/zpfiles/operations/getFolderView";var tabGroup,subPageElement=FilesUtil.Page.getPageData(parentContainer,"2");parentContainer=FilesUtil.Page.getParentContainer(),subPageElement=FilesUtil.Page.getPageData(parentContainer,"2");("1"==(tabGroup=FilesUtil.Page.getTabGroup())||"0"==tabGroup&&settingsUrlProps.url.indexOf("-catId")<=0)&&(1==FilesOperations.Page.resetFolderIdOnTabSwitch()&&(subPageElement[2].catId=""));if(settingsUrlProps.url.indexOf("empId")>-1){var empId=void 0!=settingsUrlProps.urlParamsArr.empId?settingsUrlProps.urlParamsArr.empId:pageElement[2].empId;empId=null!=empId&&void 0!=empId&&""!=empId&&"-1"!=empId?empId:""}if(0!=Object.keys(subPageElement[2]).length)params=subPageElement[2],settingsUrlProps.url.indexOf("empId")>-1&&(params.employeeId=empId),"0"==tabGroup&&(window.location.href.indexOf("operations/files/all-viewType:1/empId:")>-1||window.location.href.indexOf("operations/files/all-viewType:2/empId:")>-1||window.location.href.indexOf("operations/files/all")>-1&&window.location.href.indexOf("/empId:")>-1)&&(params.filterBy=FilesOperations.filterBy.ALL,params.fileType=FilesUtil.FILETYPE.EMPFILE);else if(params={conreqcsr:csrfToken,limit:"200",employeeId:empId},"1"==tabGroup){var filterView="";parentContainer==FilesUtil.Page.pageIdMap.ENT?filterView=FilesOperations.filterView.ENT:parentContainer==FilesUtil.Page.pageIdMap.UNIT?filterView=FilesOperations.filterView.UNIT:parentContainer==FilesUtil.Page.pageIdMap.DIV?filterView=FilesOperations.filterView.DIV:parentContainer==FilesUtil.Page.pageIdMap.DEPT?filterView=FilesOperations.filterView.DEPT:parentContainer==FilesUtil.Page.pageIdMap.LOC?filterView=FilesOperations.filterView.LOC:parentContainer!=FilesUtil.Page.pageIdMap_mod.ORG&&parentContainer!=FilesUtil.Page.pageIdMap_pol.ORG&&parentContainer!=FilesUtil.Page.pageIdMap_mod.MYDEPT||(params.isFromModule=!0),parentContainer==FilesUtil.Page.pageIdMap_pol.ORG&&(params.isFromPolicy=!0),parentContainer==FilesUtil.Page.pageIdMap_mod.MYDEPT&&(params.orgUserType="dept"),params.fileType="1",params.isExpiredFilesView=!1,params.filterView=filterView}else if("0"==tabGroup){var filterBy="";if(parentContainer==FilesUtil.Page.pageIdMap.ALL)filterBy=FilesOperations.filterBy.ALL;else if(parentContainer==FilesUtil.Page.pageIdMap_mod.MY)filterBy=FilesOperations.filterBy.MY;else if(parentContainer==FilesUtil.Page.pageIdMap_mod.ROLE)filterBy=FilesOperations.filterBy.MYROLE;else if(parentContainer==FilesUtil.Page.pageIdMap_mod.TEAM)filterBy=null!==FilesUtil.hasAllReporteePerm&&void 0!==FilesUtil.hasAllReporteePerm&&!0===FilesUtil.hasAllReporteePerm?FilesOperations.filterBy.ALLSUB:FilesOperations.filterBy.SUB;else if(parentContainer==FilesUtil.Page.pageIdMap_mod.SUB)if(null!==FilesUtil.hasAllReporteePerm&&void 0!==FilesUtil.hasAllReporteePerm&&!0===FilesUtil.hasAllReporteePerm){var filterByVal=ZPeopleComponents.select("#filterEmpFile_view"+parentContainer).getValue();"6"==filterByVal?filterBy=FilesOperations.filterBy.SUB:"7"==filterByVal&&(filterBy=FilesOperations.filterBy.ALLSUB)}else filterBy=FilesOperations.filterBy.SUB;params.fileType="0",params.filterBy=filterBy}params.start=pageElement[0],params=FilesUtil.Geo.setLatLongParams(params);var details={};details.parentContainer=parentContainer,FilesOperations.Util.manageAction(actionMode,actionURL,params,details)},callBack:function(resultData,params,otherDtls){var respObj,parentContainer="";if(null!=otherDtls&&void 0!=otherDtls&&void 0!=otherDtls.parentContainer&&(parentContainer=otherDtls.parentContainer),void 0!=resultData[0]&&resultData[0].code==FilesUtil.IP.errorCode)FilesUtil.IP.showError(!1);else if(void 0!=resultData[0]&&resultData[0].code==FilesUtil.Geo.errorCode)FilesUtil.Geo.showError(!1);else if(void 0!=resultData[1]){var catTree=resultData[1].catTree;null!=catTree&&void 0!=catTree&&FilesUtil.Breadcrump.setDetail(catTree,parentContainer),respObj=null!=resultData[1].subCategory&&void 0!=resultData[1].subCategory?resultData[1].subCategory:resultData[1];var isAllowed=!1;settingsUrlProps.url.indexOf("-catId")>-1?(parentContainer===FilesUtil.Page.pageIdMap.ENT&&!0===FilesUtil.Page.orgSubCatViewData.Ent[1]||parentContainer===FilesUtil.Page.pageIdMap.UNIT&&!0===FilesUtil.Page.orgSubCatViewData.Unit[1]||parentContainer===FilesUtil.Page.pageIdMap.DIV&&!0===FilesUtil.Page.orgSubCatViewData.Div[1]||parentContainer===FilesUtil.Page.pageIdMap.DEPT&&!0===FilesUtil.Page.orgSubCatViewData.Dept[1]||parentContainer===FilesUtil.Page.pageIdMap.LOC&&!0===FilesUtil.Page.orgSubCatViewData.Loc[1]||parentContainer===FilesUtil.Page.pageIdMap.ALL&&!0===FilesUtil.Page.empSubCatViewData.All[1]||parentContainer===FilesUtil.Page.pageIdMap_mod.MY&&!0===FilesUtil.Page.empSubCatViewData_mod.My[1]||parentContainer===FilesUtil.Page.pageIdMap_mod.ROLE&&!0===FilesUtil.Page.empSubCatViewData_mod.Role[1]||parentContainer===FilesUtil.Page.pageIdMap_mod.SUB&&!0===FilesUtil.Page.empSubCatViewData_mod.Sub[1]||parentContainer===FilesUtil.Page.pageIdMap_mod.TEAM&&!0===FilesUtil.Page.empSubCatViewData_mod.Team[1]||parentContainer===FilesUtil.Page.pageIdMap_mod.MYDEPT&&!0===FilesUtil.Page.orgSubCatViewData_mod.Mydept[1]||parentContainer===FilesUtil.Page.pageIdMap_mod.ORG&&!0===FilesUtil.Page.orgSubCatViewData_mod.Org[1]||parentContainer===FilesUtil.Page.pageIdMap_pol.ORG&&!0===FilesUtil.Page.orgSubCatViewData_pol.Org[1])&&(isAllowed=!0):(parentContainer===FilesUtil.Page.pageIdMap.ENT&&!0===FilesUtil.Page.orgCatViewData.Ent[1]||parentContainer===FilesUtil.Page.pageIdMap.UNIT&&!0===FilesUtil.Page.orgCatViewData.Unit[1]||parentContainer===FilesUtil.Page.pageIdMap.DIV&&!0===FilesUtil.Page.orgCatViewData.Div[1]||parentContainer===FilesUtil.Page.pageIdMap.DEPT&&!0===FilesUtil.Page.orgCatViewData.Dept[1]||parentContainer===FilesUtil.Page.pageIdMap.LOC&&!0===FilesUtil.Page.orgCatViewData.Loc[1]||parentContainer===FilesUtil.Page.pageIdMap.ALL&&!0===FilesUtil.Page.empCatViewData.All[1]||parentContainer===FilesUtil.Page.pageIdMap_mod.MY&&!0===FilesUtil.Page.empCatViewData_mod.My[1]||parentContainer===FilesUtil.Page.pageIdMap_mod.ROLE&&!0===FilesUtil.Page.empCatViewData_mod.Role[1]||parentContainer===FilesUtil.Page.pageIdMap_mod.SUB&&!0===FilesUtil.Page.empCatViewData_mod.Sub[1]||parentContainer===FilesUtil.Page.pageIdMap_mod.TEAM&&!0===FilesUtil.Page.empCatViewData_mod.Team[1]||parentContainer===FilesUtil.Page.pageIdMap_mod.ORG&&!0===FilesUtil.Page.orgCatViewData_mod.Org[1]||parentContainer===FilesUtil.Page.pageIdMap_mod.MYDEPT&&!0===FilesUtil.Page.orgCatViewData_mod.Mydept[1]||parentContainer===FilesUtil.Page.pageIdMap_pol.ORG&&!0===FilesUtil.Page.orgCatViewData_pol.Org[1])&&(isAllowed=!0),isAllowed&&FilesOperations.FolderListing.construct(respObj,otherDtls)}},construct:function(viewObj,otherDtls){var parentContainer="",actionType="";null!=otherDtls&&void 0!=otherDtls&&(parentContainer=otherDtls.parentContainer,actionType=otherDtls.actionType);var pageElement={},parentDiv="";(actionType===FilesOperations.ACTIONMODE.ORGFILE_FOLDER?(parentDiv="orgFileList"+parentContainer,parentContainer==FilesUtil.Page.pageIdMap.ENT?pageElement=FilesUtil.Page.orgCatViewData.Ent:parentContainer==FilesUtil.Page.pageIdMap.UNIT?pageElement=FilesUtil.Page.orgCatViewData.Unit:parentContainer==FilesUtil.Page.pageIdMap.DIV?pageElement=FilesUtil.Page.orgCatViewData.Div:parentContainer==FilesUtil.Page.pageIdMap.DEPT?pageElement=FilesUtil.Page.orgCatViewData.Dept:parentContainer==FilesUtil.Page.pageIdMap.LOC?pageElement=FilesUtil.Page.orgCatViewData.Loc:parentContainer==FilesUtil.Page.pageIdMap_mod.MYDEPT?pageElement=FilesUtil.Page.orgCatViewData_mod.Mydept:parentContainer==FilesUtil.Page.pageIdMap_mod.ORG?pageElement=FilesUtil.Page.orgCatViewData_mod.Org:parentContainer==FilesUtil.Page.pageIdMap_pol.ORG&&(pageElement=FilesUtil.Page.orgCatViewData_pol.Org)):actionType===FilesOperations.ACTIONMODE.ORGFILE_SUBFOLDER&&(parentDiv="orgFileSubList_Folder"+parentContainer,parentContainer==FilesUtil.Page.pageIdMap.ENT?pageElement=FilesUtil.Page.orgSubCatViewData.Ent:parentContainer==FilesUtil.Page.pageIdMap.UNIT?pageElement=FilesUtil.Page.orgSubCatViewData.Unit:parentContainer==FilesUtil.Page.pageIdMap.DIV?pageElement=FilesUtil.Page.orgSubCatViewData.Div:parentContainer==FilesUtil.Page.pageIdMap.DEPT?pageElement=FilesUtil.Page.orgSubCatViewData.Dept:parentContainer==FilesUtil.Page.pageIdMap.LOC?pageElement=FilesUtil.Page.orgSubCatViewData.Loc:parentContainer==FilesUtil.Page.pageIdMap_mod.ORG?pageElement=FilesUtil.Page.orgSubCatViewData_mod.Org:parentContainer==FilesUtil.Page.pageIdMap_mod.MYDEPT?pageElement=FilesUtil.Page.orgSubCatViewData_mod.Mydept:parentContainer==FilesUtil.Page.pageIdMap_pol.ORG&&(pageElement=FilesUtil.Page.orgSubCatViewData_pol.Org)),actionType===FilesOperations.ACTIONMODE.EMPFILE_FOLDER?(parentDiv="empFileList"+parentContainer,parentContainer==FilesUtil.Page.pageIdMap.ALL?pageElement=FilesUtil.Page.empCatViewData.All:parentContainer==FilesUtil.Page.pageIdMap_mod.MY?pageElement=FilesUtil.Page.empCatViewData_mod.My:parentContainer==FilesUtil.Page.pageIdMap_mod.ROLE?pageElement=FilesUtil.Page.empCatViewData_mod.Role:parentContainer==FilesUtil.Page.pageIdMap_mod.SUB?pageElement=FilesUtil.Page.empCatViewData_mod.Sub:parentContainer==FilesUtil.Page.pageIdMap_mod.TEAM&&(pageElement=FilesUtil.Page.empCatViewData_mod.Team)):actionType===FilesOperations.ACTIONMODE.EMPFILE_SUBFOLDER&&(parentDiv="empFileSubList_Folder"+parentContainer,parentContainer==FilesUtil.Page.pageIdMap.ALL?pageElement=FilesUtil.Page.empSubCatViewData.All:parentContainer==FilesUtil.Page.pageIdMap_mod.MY?pageElement=FilesUtil.Page.empSubCatViewData_mod.My:parentContainer==FilesUtil.Page.pageIdMap_mod.ROLE?pageElement=FilesUtil.Page.empSubCatViewData_mod.Role:parentContainer==FilesUtil.Page.pageIdMap_mod.SUB?pageElement=FilesUtil.Page.empSubCatViewData_mod.Sub:parentContainer==FilesUtil.Page.pageIdMap_mod.TEAM&&(pageElement=FilesUtil.Page.empSubCatViewData_mod.Team)),viewObj.length>0)&&(FilesOperations.DataPage.hideLoadingPage(),(!(isFromModulePage=FilesUtil.Page.isModulePage())||FilesUtil.Page.isDeptTeamPage()&&FilesUtil.isDeptLead)&&settingsPage.container.find("#addFileBtn").removeClass("zpl_DNI"));var start=0,pageId=settingsPage.container.find("#"+parentDiv);0!=pageElement[0]?start=1:pageId.html("");var isFromModulePage=FilesUtil.Page.isModulePage();if(FilesOperations.FolderListing.constructFolderRow(viewObj,isFromModulePage,pageId,start),actionType!==FilesOperations.ACTIONMODE.ORGFILE_SUBFOLDER&&actionType!==FilesOperations.ACTIONMODE.EMPFILE_SUBFOLDER||0==pageElement[0]&&(viewObj.length>0?pageId.closest(".zpl_secn").removeClass("zpl_DNI"):pageId.closest(".zpl_secn").addClass("zpl_DNI")),viewObj.length<200)pageElement[1]=!1,settingsUrlProps.url.indexOf("-catId")<=0&&(0==pageElement[0]&&0==viewObj.length?FilesOperations.DataPage.showNoData():FilesOperations.DataPage.showDataTable(pageId));else{pageElement[1]=!0;var scrlObj=FilesOperations.Page.getFirescrollId();settingsPage.fireScrollObj[scrlObj].reset(),FilesOperations.DataPage.showDataTable(pageId)}pageElement[0]=pageElement[0]+200,!0===pageElement[3]&&(pageElement[3]=!1),0==pageElement[1]&&settingsUrlProps.url.indexOf("-catId")>-1&&FilesOperations.FolderListing.getData()},constructFolderRow:function(viewObj,isFromModulePage,pageId,start){var isModulePage=FilesUtil.Page.isModulePage(),viewType="1";settingsUrlProps.url.indexOf("-catId")>-1&&(viewType="2");var parentContainer=FilesUtil.Page.getParentContainer();if(void 0!=viewObj&&viewObj.length>0)for(var i=start;i<viewObj.length;i++){var data=viewObj[i],catId=data.CatID,rowId="catLi_"+catId,row='<div id="'+rowId+'" class="CP" folderID="'+catId+'">';if(row+='<div class="zpl_Fltyp"><i class="PI_foldr"></i></div>',row+="<div onclick=\"FilesOperations.FolderListing.redirectToListView('"+catId+'\')" class="zpl_Fldtl"><h5>'+data.CatName+"</h5></div>",!isModulePage){row+='<div class="zpl_hvr">';var moreActionData=FilesOperations.Util.getMoreActionFolderView(catId);row+='<i id="'+("moreAction_"+catId+parentContainer+"_"+viewType)+'" onclick="FilesOperations.Util.showActions(this, \''+rowId+'\');" type="button" class="PI_more zpl_drpdwn-js" data-title-position="bottom" title="'+ZPI18N.getString("zp.files.operations.moreactions")+'" ></i>',data.actionsList=moreActionData,row+="</div>"}row+="</div>",(row=$(row)).data("ldata",data),pageId.append(row)}},redirectToListView:function(id){FilesOperations.Page.setPageDataOnURLChange(id);var url=window.location.href;if("-1"==id){FilesUtil.Page.getPageId();FilesOperations.DataPage.showDataTable(null);FilesUtil.Page.getTabGroup();settingsPage.container.find("#topMenu_breadCrump").addClass("zpl_DNI"),url=window.location.hash.substring(0,window.location.hash.lastIndexOf("-catId"))+"-viewType:2"}else FilesOperations.DataPage.hideSubFolderView(),""!==window.location.hash.substring(0,window.location.hash.lastIndexOf("-"))&&(url=window.location.hash.substring(0,window.location.hash.lastIndexOf("-"))),url+="-catId:"+id;var empId=settingsUrlProps.urlParamsArr.empId;null!=empId&&void 0!=empId&&""!=empId&&(url+="/empId:"+empId),window.location.href=url},checkAndUpdateView:function(empId){var type=1;FilesUtil.isFolderView&&(type=2),FilesOperations.FolderListing.SwitchListAndFolderView(type,empId)},SwitchListAndFolderView:function(type,empId){if(!(1==type&&settingsPage.container.find("#files_list_view").hasClass("zpl_act")||2==type&&settingsPage.container.find("#files_folder_view").hasClass("zpl_act"))){FilesOperations.DataPage.getNoDataContainer().addClass("zpl_DNI");var url=window.location.href;if(""!==window.location.hash.substring(0,window.location.hash.lastIndexOf("-"))&&(url=window.location.hash.substring(0,window.location.hash.lastIndexOf("-"))),FilesUtil.Page.isTeamPage()&&(url+="/user"),null!=type&&void 0!=type&&""!=type&&(url+="-viewType:"+type),null!=(empId=null!=empId&&void 0!=empId?empId:settingsUrlProps.urlParamsArr.empId)&&void 0!=empId&&""!=empId&&(url+="/empId:"+empId),window.location.href=url,1==type?(settingsPage.container.find("#files_folder_view").removeClass("zpl_act"),settingsPage.container.find("#files_list_view").addClass("zpl_act")):(settingsPage.container.find("#files_list_view").removeClass("zpl_act"),settingsPage.container.find("#files_folder_view").addClass("zpl_act")),!FilesUtil.Page.isTeamPage()){settingsPage.container.scrollTop(0);var scrlObj=FilesOperations.Page.getFirescrollId();settingsPage.fireScrollObj[scrlObj].reset()}}}},FilesOperations.OrgFiles={fetchData:function(parentContainer){var pageElement={};parentContainer=FilesUtil.Page.getParentContainer();if(FilesUtil.Page.isListView())pageElement=FilesUtil.Page.getPageData(parentContainer,"1");else pageElement=FilesUtil.Page.getPageData(parentContainer,"2");var searchApplied=FilesUtil.Page.getPageData(parentContainer,"2"),tabGroup=FilesUtil.Page.getTabGroup();("1"==tabGroup||"0"==tabGroup&&settingsUrlProps.url.indexOf("-catId")<=0)&&(1==FilesOperations.Page.resetFolderIdOnTabSwitch()&&(searchApplied[2].catId=""));var catId="";catId=settingsUrlProps.url.indexOf("-catId")>-1?null!=(catId=void 0!=settingsUrlProps.urlParamsArr.catId?settingsUrlProps.urlParamsArr.catId:pageElement[2].catId)&&void 0!=catId&&""!=catId&&"-1"!=catId?catId:"":searchApplied[2].catId;var params={},actionMode="",actionURL="";1==pageElement[1]&&settingsUrlProps.url.indexOf("-catId")>-1&&!FilesUtil.Page.isModulePage()?(actionURL="/zpfiles/settings/getFolders",actionMode=FilesOperations.ACTIONMODE.ORGFILE_SUBFOLDER,params={conreqcsr:csrfToken,start:pageElement[0],parentCatId:catId,isNewUI:!0}):(FilesUtil.Page.isListView()&&1==pageElement[1]||settingsUrlProps.url.indexOf("-catId")>-1&&1==pageElement[8])&&(actionURL="/zpfiles/operations/getAllFiles",actionMode=FilesOperations.ACTIONMODE.ORGFILE_SUBFILE,0!=Object.keys(searchApplied[2]).length?(params=searchApplied[2]).catId=catId:(params={catId:catId,fileType:FilesUtil.FILETYPE.ORGFILE,conreqcsr:csrfToken},parentContainer==FilesUtil.Page.pageIdMap.ENT?params.filterView=FilesOperations.filterView.ENT:parentContainer==FilesUtil.Page.pageIdMap.UNIT?params.filterView=FilesOperations.filterView.UNIT:parentContainer==FilesUtil.Page.pageIdMap.DIV?params.filterView=FilesOperations.filterView.DIV:parentContainer==FilesUtil.Page.pageIdMap.DEPT?params.filterView=FilesOperations.filterView.DEPT:parentContainer==FilesUtil.Page.pageIdMap.LOC?params.filterView=FilesOperations.filterView.LOC:parentContainer!=FilesUtil.Page.pageIdMap_mod.ORG&&parentContainer!=FilesUtil.Page.pageIdMap_pol.ORG&&parentContainer!=FilesUtil.Page.pageIdMap_mod.MYDEPT||(params.isFromModule=!0),parentContainer==FilesUtil.Page.pageIdMap_mod.MYDEPT&&(params.orgUserType="dept"),parentContainer==FilesUtil.Page.pageIdMap_pol.ORG&&(params.isFromPolicy=!0),"1"===Layout.Page.container.find("#companyFileViewType").val()?params.isExpiredFilesView=!0:"0"===Layout.Page.container.find("#companyFileViewType").val()&&(params.isExpiredFilesView=!1)),FilesUtil.Page.isListView()?params.start=pageElement[0]:params.start=pageElement[7]),params=FilesUtil.Geo.setLatLongParams(params);var details={};details.parentContainer=parentContainer,FilesOperations.Util.manageAction(actionMode,actionURL,params,details)},callBack:function(resultData,params,otherDetails){var respObj,parentContainer="";if(null!=otherDetails&&void 0!=otherDetails&&void 0!=otherDetails.parentContainer&&(parentContainer=otherDetails.parentContainer),void 0!=resultData[0]&&resultData[0].code==FilesUtil.IP.errorCode)FilesUtil.IP.showError(!1);else if(void 0!=resultData[0]&&resultData[0].code==FilesUtil.Geo.errorCode)FilesUtil.Geo.showError(!1);else{if(settingsUrlProps.url.indexOf("-catId")>-1){var catTree=resultData[1].catTree;null!=catTree&&void 0!=catTree&&catTree.length>0&&FilesUtil.Breadcrump.setDetail(catTree,parentContainer)}respObj=resultData[1],FilesOperations.OrgFiles.construct(respObj,void 0,parentContainer)}},construct:function(resultData,mode,parentContainer){var parseObj=resultData.filesList,catTree=resultData.catTree;null==catTree||void 0==catTree||catTree.length;var dataLimit=parseObj.length,isListView=!1,isFromModulePage=FilesUtil.Page.isModulePage(),pageId=settingsPage.container.find("#orgFileSubList_List"+parentContainer),pageElement=FilesUtil.Page.getPageData(parentContainer,"2");if(FilesUtil.Page.isListView()){pageId=settingsPage.container.find("#orgFileListView"+parentContainer),pageElement=FilesUtil.Page.getPageData(parentContainer,"1");isListView=!0}var subFolderCount=settingsPage.container.find("#orgFileSubList_Folder"+parentContainer).children().length;settingsUrlProps.url.indexOf("-catId")>-1&&0==subFolderCount&&pageId.closest(".zpl_secn").prev().addClass("zpl_DNI");var viewType="1";if(settingsUrlProps.url.indexOf("-catId")>-1&&(viewType="2"),parseObj.length<25?(dataLimit=parseObj.length,FilesUtil.Page.isListView()?pageElement[1]=!1:pageElement[8]=!1):(dataLimit=parseObj.length-1,FilesUtil.Page.isListView()?pageElement[1]=!0:pageElement[8]=!0),(FilesUtil.Page.isListView()&&0==pageElement[0]||settingsUrlProps.url.indexOf("-catId")>-1&&0==pageElement[7])&&pageId.empty(),parseObj.length>0){FilesOperations.DataPage.hideLoadingPage(),(!(isFromModulePage=FilesUtil.Page.isModulePage())||FilesUtil.Page.isDeptTeamPage()&&FilesUtil.isDeptLead)&&settingsPage.container.find("#addFileBtn").removeClass("zpl_DNI");for(var i=0;i<dataLimit;i++){var data=parseObj[i],fileId=data.fileID,fileExtn=data.fileExtn,filePath=data.filePath,fileName=data.fileName;fileExtn=FilesUtil.Page.getFileExtn(fileExtn,filePath,data.UploadSource),data.fileExtn=fileExtn;var rowId="orgFileTr_"+fileId,row='<tr id="'+rowId+'" fileName = "'+ZSEC.Encoder.encodeForHTMLAttribute(fileName)+'" fileID = "'+fileId+'"  uploadFileExtn = "'+fileExtn+'" isLoginUserAck = '+data.isLoginUserAck+">";if(isFromModulePage||(null!=data.fileActions.isDeletePerm&&void 0!=data.fileActions.isDeletePerm&&!0===data.fileActions.isDeletePerm?row+='<td scope="row"><div class="zcheckbox">':row+='<td scope="row"><div class="zcheckbox disabled">',row+='<input id="chkBox_'+fileId+'" type="checkbox" name="check" value="" class="zcheckbox__helper">',row+="<label onclick=\"FilesOperations.Util.selectAll('chkBox_"+fileId+'\' ,false);" class="zcheckbox__label"></label>',row+="</div></td>"),row+='<td id="orgFileNameTd_'+fileId+'" fileName = "'+ZSEC.Encoder.encodeForHTMLAttribute(fileName)+'" fileID = "'+fileId+'" scope="row">',row+='<div class="d-flexC d-flexclmcap10" onclick="FilesOperations.Preview.initLightBox(this);" role="button">',row+='<i class="'+FileUpload.getFileIcon(fileExtn)+'"></i>',row+="<span>"+ZSEC.Encoder.encodeForHTML(fileName)+"</span>",row+="</div></td>",row+='<td class="zpl_cpd">'+FilesOperations.Acknowledgement.acknowledgementStatus("Operations",data)+"</td>",jQuery.isEmptyObject(data.fileOrgStructure))row+='<td><div class="zpl_tg"><span>'+ZPI18N.getString("zp.all")+"</span></div></td>";else{var shareToJson={};if(shareToJson=isFromModulePage?FilesOperations.Util.getAllNodes(JSON.stringify(data.fileOrgStructure)):parentContainer==FilesUtil.Page.pageIdMap.ENT?data.fileOrgStructure.Entity:parentContainer==FilesUtil.Page.pageIdMap.UNIT?data.fileOrgStructure.Unit:parentContainer==FilesUtil.Page.pageIdMap.DIV?data.fileOrgStructure.Division:parentContainer==FilesUtil.Page.pageIdMap.DEPT?data.fileOrgStructure.Department:data.fileOrgStructure.Location,Object.keys(shareToJson).length>1){row+="<td>",row+='<div class="zpl_tg"><span>'+shareToJson[Object.keys(shareToJson)[0]]+"</span></div>";var shareId="sharedTo_"+fileId+parentContainer+"_"+viewType;Object.keys(shareToJson).length>9?row+='<div id="'+shareId+'" onclick="FilesOperations.Util.showSharedToList(\''+rowId+"','"+Object.keys(shareToJson)[0]+'\');" class="zpl_tg" tabindex="0" role="button" aria-haspopup="true" aria-expanded="false"><span>9+</span></div>':row+='<div id="'+shareId+'" onclick="FilesOperations.Util.showSharedToList(\''+rowId+"','"+Object.keys(shareToJson)[0]+'\');" class="zpl_tg" tabindex="0" role="button" aria-haspopup="true" aria-expanded="false"><span>+'+(Object.keys(shareToJson).length-1)+"</span></div>",row+="</td>"}else row+='<td><div class="zpl_tg"><span>'+shareToJson[Object.keys(shareToJson)[0]]+"</span></div></td>"}if(isListView&&(data.fileCatNameNew.length>1?(row+="<td>",row+='<div class="zpl_tg"><span>'+ZSEC.Encoder.encodeForHTML(data.fileCatNameNew).toString().split(",")[0]+"</span></div>",data.fileCatNameNew.length>9?row+='<div id="folderTo_'+fileId+parentContainer+'" onclick="FilesOperations.Util.showSharedFolderList(\''+rowId+'\');" class="zpl_tg"><span>9+</span></div>':row+='<div id="folderTo_'+fileId+parentContainer+'" onclick="FilesOperations.Util.showSharedFolderList(\''+rowId+'\');" class="zpl_tg"><span>+'+(data.fileCatNameNew.length-1)+"</span></div>",row+="</td>"):row+='<td><div class="zpl_tg"><span>'+ZSEC.Encoder.encodeForHTML(data.fileCatName)+"</span></div></td>"),row+="<td><span>"+data.fileModifiedDate+"</span></td>",row+='<td><div class="text-center">',row+=' <div class="zpl_hvr">',"0"!=FilesUtil.loginUserRoleCheck&&"1"!=FilesUtil.loginUserRoleCheck||-1!=data.filePath.indexOf(workDriveUrl)||-1!=data.filePath.indexOf(writerUrl)||-1!=data.filePath.indexOf(sheetUrl)||-1!=data.filePath.indexOf(showUrl)||"1"==data.UploadSource?-1==data.filePath.indexOf(workDriveUrl)&&-1==data.filePath.indexOf(writerUrl)&&-1==data.filePath.indexOf(sheetUrl)&&-1==data.filePath.indexOf(showUrl)&&"1"!=data.UploadSource&&!0===data.allowDownload&&(row+='<i class="PI_downld" data-title-position="bottom" title="'+ZPI18N.getString("zp.Download")+'" onclick="FilesOperations.DownloadPrint.downloadFile(\''+fileId+'\');" name="deleteElm" role="button" aria-label="'+ZPI18N.getString("zp.Download")+'" tabindex="0"></i>'):row+='<i class="PI_downld" data-title-position="bottom" title="'+ZPI18N.getString("zp.Download")+'" onclick="FilesOperations.DownloadPrint.downloadFile(\''+fileId+'\');" name="deleteElm" role="button" aria-label="'+ZPI18N.getString("zp.Download")+'" tabindex="0"></i>',(!isFromModulePage||FilesUtil.Page.isDeptTeamPage()&&FilesUtil.isDeptLead)&&(-1!==FilesUtil.loginUserRoleCheck||FilesUtil.isDeptLead)){var moreActionData=FilesOperations.Util.getMoreActionList(JSON.stringify(data));if(moreActionData.length>0)row+='<i id="'+("moreAction_"+data.fileID+parentContainer+"_"+viewType)+'" onclick="FilesOperations.Util.showActions(this, \''+rowId+'\');" type="button" class="PI_more zpl_drpdwn-js" data-title-position="bottom" title="'+ZPI18N.getString("zp.files.operations.moreactions")+'" role="button" aria-label="'+ZPI18N.getString("zp.files.operations.moreactions")+'" tabindex="0"></i>',data.actionsList=moreActionData}row+="</div></div></td>",row+="</tr>",(row=$(row)).data("ldata",data),pageId.append(row)}}if((FilesUtil.Page.isListView()&&0==pageElement[0]&&0==pageElement[1]||settingsUrlProps.url.indexOf("-catId")>-1&&0==pageElement[7]&&0==pageElement[8])&&parseObj.length<=0?0==subFolderCount?FilesOperations.DataPage.showNoData():subFolderCount>0&&(settingsUrlProps.url.indexOf("-catId")>-1&&pageId.closest(".zpl_secn").addClass("zpl_DNI"),FilesOperations.DataPage.hideFileDataTable_subFolderView()):FilesOperations.DataPage.showDataTable(pageId),FilesUtil.Page.isListView()?0==pageElement[0]?pageElement[0]=25:pageElement[0]=pageElement[0]+24:0==pageElement[7]?pageElement[7]=25:pageElement[7]=pageElement[7]+24,FilesUtil.Page.isListView()&&!0===pageElement[1]||settingsUrlProps.url.indexOf("-catId")>-1&&!0===pageElement[8]){var scrlObj=FilesOperations.Page.getFirescrollId();settingsPage.fireScrollObj[scrlObj].reset()}}},FilesOperations.OrgFiles.componentInit={orgFileFilterActExpView:function(id){var viewArr=[];viewArr.push({name:ZPI18N.getString("zp.activecompfiles"),value:"0",id:"0"}),viewArr.push({name:ZPI18N.getString("zp.expiredcompfiles"),value:"1",id:"1"});var tokenObj={};tokenObj.options=viewArr,tokenObj.contentType="text",tokenObj.dataMapping={label:"name",informativeText:"name",value:"id"},tokenObj.dropdownList={fitForElement:!0,moveOnScroll:!0},ZPeopleComponents.select(settingsPage.container.find("#"+id),tokenObj)},orgFileFilterLocation:function(id){FilesUtil.getSharingOptsList();var dataList=[];settingsUrlProps.niceUrl.indexOf("/files/ent")>-1?dataList=JSON.parse(JSON.stringify(FilesUtil.sharingOpts.Entity)):settingsUrlProps.niceUrl.indexOf("/files/unit")>-1?dataList=JSON.parse(JSON.stringify(FilesUtil.sharingOpts.Unit)):settingsUrlProps.niceUrl.indexOf("/files/div")>-1?dataList=JSON.parse(JSON.stringify(FilesUtil.sharingOpts.Division)):settingsUrlProps.niceUrl.indexOf("/files/dept")>-1?dataList=JSON.parse(JSON.stringify(FilesUtil.sharingOpts.Department)):settingsUrlProps.niceUrl.indexOf("/files/loc")>-1&&(dataList=JSON.parse(JSON.stringify(FilesUtil.sharingOpts.Location))),dataList.unshift({Value:ZPI18N.getString("zp.all"),Id:"-1"});var tokenObj={};tokenObj.options=dataList,tokenObj.contentType="text",tokenObj.dataMapping={label:"Value",informativeText:"Value",value:"Id"},tokenObj.dropdownList={fitForElement:!0,moveOnScroll:!0},ZPeopleComponents.select(settingsPage.container.find("#"+id),tokenObj)},initHeader:function(){if(settingsUrlProps.niceUrl.indexOf("files/orgfile")<0&&settingsUrlProps.niceUrl.indexOf("/policyfiles")<0){var moreMenuId="",moreMenuForElement="";settingsUrlProps.niceUrl.indexOf("/files/ent")>-1?(moreMenuId="orgFiles_importExport_ent",moreMenuForElement="impExpCont_ent"):settingsUrlProps.niceUrl.indexOf("/files/unit")>-1?(moreMenuId="orgFiles_importExport_unit",moreMenuForElement="impExpCont_unit"):settingsUrlProps.niceUrl.indexOf("/files/div")>-1?(moreMenuId="orgFiles_importExport_div",moreMenuForElement="impExpCont_div"):settingsUrlProps.niceUrl.indexOf("/files/dept")>-1?(moreMenuId="orgFiles_importExport_dept",moreMenuForElement="impExpCont_dept"):settingsUrlProps.niceUrl.indexOf("/files/loc")>-1&&(moreMenuId="orgFiles_importExport_loc",moreMenuForElement="impExpCont_loc"),FilesOperations.MoreOption.showMoreMenu(moreMenuId,moreMenuForElement,FilesOperations.MoreOption.getMenuObject(moreMenuId),FilesOperations.MoreOption.getViewActionsList(moreMenuId),!1)}},copyFileUrl:function(fileId){var successCopy,url=window.location.href.substring(0,window.location.href.lastIndexOf("#")+1)+"files/viewfile-fileId:"+fileId,tempInput=document.createElement("input");tempInput.style="position: absolute; left: -1000px; top: -1000px",tempInput.value=url,document.body.appendChild(tempInput),tempInput.select(),document.execCommand("copy"),document.body.removeChild(tempInput);try{!1===(successCopy=document.execCommand("copy"))?ZPeople.Message.failure(ZPI18N.getString("zp.files.operations.copyfail")):ZPeople.Message.success(ZPI18N.getString("zp.files.operations.copysuccess"))}catch(exception){successCopy=!1,ZPeople.Message.failure(ZPI18N.getString("zp.files.operations.copyfail"))}return successCopy}},FilesOperations.OrgFiles.Modal={uploadMode:"",ADD_MODAL:null,addPopup:function(){if(""==$("#"+FilesOperations.OrgFiles.AddEdit.cardId).html().trim()){var popup="";popup+='<div class="zpl_crd"><div class="zpl_crdhdr"><div><h4>'+ZPI18N.getString("zp.esign.uploadfile")+"</h4><p>"+ZPI18N.getString("zp.files.operations.orgfileinfo")+'</p></div></div><div class="zpl_crdcnt"><div id="orgFile_uploadFileDiv" class="zpl_secn"><div><div class="zpl_upld"><div class="zpl_fldrp"><h5><div class="zpl_flupld_img"></div><a id="addOrgFile_localUpload" class="zpl_lnk" onclick="FileUpload.onSelect(this)"><i class="PI_case"></i>'+ZPI18N.getString("zp.files.desktop")+'</a> / <a class="zpl_lnk" onclick="FileUpload.WorkDrive.showModal();"><i class="PI_cloud"></i>'+ZPI18N.getString("zp.workdrive")+'</a> / <a class="zpl_lnk" onclick="FileUpload.CloudPicker.showModal();"><i class="PI_cloud"></i>'+ZPI18N.getString("zp.others")+"</a></h5></div><p><span>"+ZPI18N.getString("zp.files.operations.uploadfileinfo",new Array(maxFileSize_filesModule))+'</span></p></div></div></div><div class="zpl_secn zpl_DNI"><div><h5>'+ZPI18N.getString("zp.files.operations.attachedfiles")+'</h5></div><div id="orgfile_uploaded"></div></div><div class="zpl_secn"><div><h6 class="zpl_mtry">'+ZPI18N.getString("zp.files.operations.filename")+'</h6></div><div><input id="addOrgFile_fileName" type="text" placeholder="'+ZPI18N.getString("zp.files.operations.givefilename")+'" class="ztextbox"></div></div><div class="zpl_secn"><div><h6>'+ZPI18N.getString("zp.description")+'</h6></div><div><textarea id="addOrgFile_fileDesc" class="ztextbox" rows="3"></textarea></div></div><div class="zpl_secn"><div><h6 class="zpl_mtry">'+ZPI18N.getString("zp.sharewith",new Array(""))+'</h6></div><div><div id="shareWith_cont" class="zpl_inpgrp"><div id="shareWith_SelectedOpts" class="zpl_frmctrl"></div><a class="grp_add" id="orgFile_shareWith" onclick="ZPA_TabbedListBox.initializeTabPanel(this, \'orgStructure\', \'orgFile_shareWithPanel\', \'orgFile_shareWith\', \'shareWith_SelectedOpts\')"><i class="PI_addlist"></i></a><div id="orgFile_shareWithPanel"></div></div><p><span>'+(isOrgStructureEnabled?ZPI18N.getString("zp.files.shareinfoOrgStructure"):ZPI18N.getString("zp.files.shareinfo"))+'</span></p></div></div><div class="zpl_secn"><div><h6 class="zpl_mtry">'+ZPI18N.getString("zp.folder")+'</h6></div><div><select id="addOrgFile_Folder" data-show-search-field="true"></select></div><div class="zpl_idiv  zpl_erorbx zpl_DNI"><div><input id="addOrgFile_newCatName" placeholder="'+ZPI18N.getString("zp.enterCategory")+'" type="text" class="ztextbox w300"></div><div><div onclick="FilesUtil.componentInit.cancelFolderNameBox(\'addOrgFile\');" class="zlabel zlabel--red zlabel--outline zlabel--small">'+ZPI18N.getString("zp.cancel")+'</div></div></div></div><div class="zpl_secn"><div><h6>'+ZPI18N.getString("zp.files.operations.validity")+'</h6></div><div><input id="addOrgFile_validUntil" data-format="'+dateFmt+'" data-picker="true" data-calendar-icon="true" data-spin-buttons="none"></div></div><div class="zpl_secn"><div class="chkdectxt"><div class="zcheckbox zcheckbox--horizontal"><input id="addOrgFile_policy" type="checkbox" name="check" value="" class="zcheckbox__helper"><label onclick="FilesUtil.componentInit.toggleCheckBox(\'addOrgFile_policy\', false);" class="zcheckbox__label">'+ZPI18N.getString("zp.files.operations.markaspolicy")+'</label></div><span class="dectxt">'+ZPI18N.getString("zp.files.operations.markaspolicydesc")+'</span></div></div></div></div></div><div class="zpl_crd"><div class="zpl_crdhdr"><div><h4>'+ZPI18N.getString("zp.acknowledge")+"</h4><p>"+ZPI18N.getString("zp.files.operations.acknote")+'</p></div></div><div class="zpl_crdcnt"><div class="zpl_secn"><div class="chkdectxt"><div class="zcheckbox"><input id="addOrgFile_notMandAck" type="checkbox" name="checkBoxAck" class="zcheckbox__helper"><label onclick="FilesOperations.Util.toggleMandatoryAckCheckBox(1, 1);" for="fldayo1n" class="zcheckbox__label">'+ZPI18N.getString("zp.files.operations.ackdeadline1")+'</label></div></div></div><div class="zpl_secn"><div class="chkdectxt"><div class="zcheckbox"><input id="addOrgFile_mandAck" type="checkbox" name="checkBoxAck" class="zcheckbox__helper"><label onclick="FilesOperations.Util.toggleMandatoryAckCheckBox(2, 1);" for="fldayo1n" class="zcheckbox__label">'+ZPI18N.getString("zp.files.operations.ackdeadline2")+'</label></div><div class="zpl_gbox zpl_mw-90"><div><input id="addOrgFile_ackDeadLine" data-format="'+dateFmt+'" data-picker="true" data-calendar-icon="true" data-spin-buttons="none"></div><p class="zpl_info"><em>'+ZPI18N.getString("zp.files.operations.mandacknote")+'</em></p></div></div></div></div></div><div class="zpl_crd"><div class="zpl_crdhdr"><div><h4>'+ZPI18N.getString("zp.files.operations.fileperm")+"</h4><p>"+ZPI18N.getString("zp.files.operations.dwndfile")+'</p></div></div><div class="zpl_crdcnt"><div class="zpl_secn"><div><h6>'+ZPI18N.getString("zp.files.operations.downloadfile")+'</h6></div><div><div class="zcheckbox zcheckbox--horizontal"><input id="addOrgFile_download" type="checkbox" name="check" value="" class="zcheckbox__helper"><label onclick="FilesUtil.componentInit.toggleCheckBox(\'addOrgFile_download\', false);" class="zcheckbox__label">'+ZPI18N.getString("zp.employee")+'</label></div></div></div></div></div><div class="zpl_crd"><div class="zpl_crdhdr"><div><h4>'+ZPI18N.getString("zp.notifications")+"</h4><p>"+ZPI18N.getString("zp.files.operations.notifyinfo")+'</p></div></div><div class="zpl_crdcnt"><div class="zpl_secn"><div><h6>'+ZPI18N.getString("zp.notifythrough",new Array(""))+'</h6></div><div><div class="zcheckbox zcheckbox--horizontal"><input id="addOrgFile_feeds" type="checkbox" name="check" value="" class="zcheckbox__helper"><label onclick="FilesUtil.componentInit.toggleCheckBox(\'addOrgFile_feeds\', false);" class="zcheckbox__label">'+ZPI18N.getString("zp.feeds")+'</label></div><div class="zcheckbox zcheckbox--horizontal"><input id="addOrgFile_mail" type="checkbox" name="check" value="" class="zcheckbox__helper"><label onclick="FilesUtil.componentInit.toggleCheckBox(\'addOrgFile_mail\', false);" class="zcheckbox__label">'+ZPI18N.getString("zp.mail")+"</label></div></div></div></div></div>",$("#"+FilesOperations.OrgFiles.AddEdit.cardId).html(popup)}},filter:function(){var parentContainer=FilesUtil.Page.getParentContainer(),isFromModulePage=FilesUtil.Page.isModulePage(),html="";html+='<div><div class="zpl_fltrhd"><h5>'+ZPI18N.getString("zp.filter")+'</h5><i class="PI_cls" onclick="FilesOperations.OrgFiles.Filter.showHide();"></i></div></div><div class="zpl_fltrcnt"><div><div class="zpl_fltclps fltopn"><div class="zpl_fltrlst"><div class="zpl_secn"><div><label>'+ZPI18N.getString("zp.files.operations.filename")+'</label></div><div><input id="filterOrgFile_name'+parentContainer+'" type="text" class="ztextbox" placeholder="'+ZPI18N.getString("zp.files.operations.filter.filenameinfo")+'"></div></div>',isFromModulePage||(html+='<div class="zpl_secn"><div><label>'+ZPI18N.getString("zp.filesextn")+'</label></div><div><select id="filterOrgFile_format'+parentContainer+'" data-show-search-field="true"></select></div></div><div class="zpl_secn"><div><label>'+ZPI18N.getString("zp.folder")+'</label></div><div><select id="filterOrgFile_Folder'+parentContainer+'" data-show-search-field="true"></select></div></div>'),FilesUtil.Page.isPolicyPage()||(html+='<div class="zpl_secn"><div><label>'+ZPI18N.getString("zp.files.operations.filter.fileview")+'</label></div><div><select id="filterOrgFile_actExpView'+parentContainer+'" data-show-search-field="true"></select></div></div>'),isFromModulePage||(html+='<div class="zpl_secn"><div><label id="orgstrName">'+ZPI18N.getString("zp.location")+'</label></div><div><select id="filterOrgFile_loc'+parentContainer+'" data-show-search-field="true"></select></div></div>'),html+='<div class="zpl_secn"><div><label>'+ZPI18N.getString("zp.from")+'</label></div><div><input id="filterOrgFile_fromDate'+parentContainer+'" data-format="'+dateFmt+'" data-picker="true" data-calendar-icon="true" data-spin-buttons="none"></div></div><div class="zpl_secn"><div><label>'+ZPI18N.getString("zp.to")+'</label></div><div><input id="filterOrgFile_toDate'+parentContainer+'" data-format="'+dateFmt+'" data-picker="true" data-calendar-icon="true" data-spin-buttons="none"></div></div></div></div></div></div><div><button id="orgFileFilter_search" onclick="FilesOperations.OrgFiles.Filter.search();" class="zlabel zlabel--blue zlabel--medium">'+ZPI18N.getString("zp.apply")+'</button><button id="orgFileFilter_reset" onclick="FilesOperations.OrgFiles.Filter.reset();" class="zlabel zlabel--outline zlabel--medium">'+ZPI18N.getString("zp.reset")+"</button></div>",settingsPage.container.find("#orgFile_filterModal").html(html)}},FilesOperations.OrgFiles.AddEdit={editFileId:"0",popupId:"addOrgFile",modelId:"tabaddOrgFile",cardId:"cardaddOrgFile",popupName:"",show:function(mode,rowId){"edit"===mode&&settingsUrlProps.niceUrl.indexOf("/hrdocuments")<=0?FilesOperations.OrgFiles.AddEdit.popupName=FilesUtil.Page.isDeptTeamPage()?ZPI18N.getString("zp.files.module.editdeptfile"):ZSEC.Encoder.encodeForHTML(FilesUtil.editcompdisname):FilesOperations.OrgFiles.AddEdit.popupName=FilesUtil.Page.isDeptTeamPage()?ZPI18N.getString("zp.files.module.adddeptfile"):ZSEC.Encoder.encodeForHTML(FilesUtil.addcompdisname);var modelLen=$("#"+FilesOperations.OrgFiles.AddEdit.modelId).length;if(0==modelLen){var popupTab=new Tab(FilesOperations.OrgFiles.AddEdit.popupId,FilesOperations.OrgFiles.Modal.addPopup,FilesOperations.OrgFiles.AddEdit.update);FilesOperations.OrgFiles.Modal.ADD_MODAL=new sliderModal(FilesOperations.OrgFiles.AddEdit.popupName,popupTab)}FilesOperations.OrgFiles.Modal.ADD_MODAL.setCloseCallback(FilesOperations.OrgFiles.AddEdit.hide),FilesOperations.OrgFiles.Modal.ADD_MODAL.construct(),$(settingsPage.mainWrapId).find("#"+FilesOperations.OrgFiles.AddEdit.modelId).find("#sliderSbt").removeClass("disabled"),0!=modelLen&&$("#"+FilesOperations.OrgFiles.AddEdit.modelId).find("#sliHdrDiv").find("h4").text(FilesOperations.OrgFiles.AddEdit.popupName),$("#addOrgFile_newCatName").val("").parent().parent().addClass("zpl_DNI"),$("#addOrgFile_Folder").parent().removeClass("zpl_DNI"),FilesUtil.componentInit.folderListDropdown("addOrgFile_Folder"),ZPeopleComponents.isComponent("#addOrgFile_validUntil")||ZPeopleComponents.datefield($("#addOrgFile_validUntil")).setAttributes({placeholder:dateFmt}),ZPeopleComponents.isComponent("#addOrgFile_ackDeadLine")||ZPeopleComponents.datefield($("#addOrgFile_ackDeadLine")).setAttributes({placeholder:dateFmt}),FilesOperations.OrgFiles.AddEdit.editFileId="0",FilesOperations.OrgFiles.AddEdit.clearFields(!1),"edit"===mode&&FilesOperations.OrgFiles.AddEdit.setFieldValues(rowId)},hide:function(){FilesOperations.OrgFiles.AddEdit.clearFields(!0),$(settingsPage.mainWrapId).find("#"+FilesOperations.OrgFiles.AddEdit.modelId).remove()},clearFields:function(isDestroy){var pageId=$("#"+FilesOperations.OrgFiles.AddEdit.cardId);if(pageId.find(".ztextbox--error__label").remove(),pageId.find(".ztextbox__error").removeClass("ztextbox__error"),FileUpload.removeFile(),pageId.find("#addOrgFile_fileName").val(""),pageId.find("#addOrgFile_fileDesc").val(""),isDestroy)ZPeopleComponents.isComponent("#orgFile_shareWithPanel")&&ZPeopleComponents.tabbedlistboxpopup("#orgFile_shareWithPanel").destroy(),ZPeopleComponents.isComponent("#addOrgFile_Folder")&&ZPeopleComponents.select(pageId.find("#addOrgFile_Folder")).destroy(),ZPeopleComponents.isComponent("#addOrgFile_validUntil")&&ZPeopleComponents.datefield(pageId.find("#addOrgFile_validUntil")).destroy(),ZPeopleComponents.isComponent("#addOrgFile_ackDeadLine")&&ZPeopleComponents.datefield(pageId.find("#addOrgFile_ackDeadLine")).destroy();else{if($("#shareWith_cont").find("#shareWith_SelectedOpts").empty(),ZPeopleComponents.isComponent("#orgFile_shareWithPanel")&&ZPeopleComponents.tabbedlistboxpopup("#orgFile_shareWithPanel").deselectAll(),ZPeopleComponents.isComponent("#addOrgFile_Folder"))if(settingsUrlProps.url.indexOf("-catId")>-1){var parentContainer=FilesUtil.Page.getParentContainer(),pageData=FilesUtil.Page.getPageData(parentContainer,"2");ZPeopleComponents.select(pageId.find("#addOrgFile_Folder")).setValue({id:Layout.Page.urlparam.catId,name:pageData[6][Layout.Page.urlparam.catId]})}else ZPeopleComponents.select(pageId.find("#addOrgFile_Folder")).deselectAllOptions(),ZPeopleComponents.select(pageId.find("#addOrgFile_Folder")).setValue({id:"-1",name:ZPI18N.getString("zp.select")});var dateObj;if(ZPeopleComponents.isComponent("#addOrgFile_validUntil"))null!=(dateObj=ZPeopleComponents.datefield(pageId.find("#addOrgFile_validUntil")).getValue()).dateString&&void 0!=dateObj.dateString&&""!=dateObj.dateString&&ZPeopleComponents.datefield(pageId.find("#addOrgFile_validUntil")).clear();if(ZPeopleComponents.isComponent("#addOrgFile_ackDeadLine"))null!=(dateObj=ZPeopleComponents.datefield(pageId.find("#addOrgFile_ackDeadLine")).getValue()).dateString&&void 0!=dateObj.dateString&&""!=dateObj.dateString&&ZPeopleComponents.datefield(pageId.find("#addOrgFile_ackDeadLine")).clear()}pageId.find("#addOrgFile_notMandAck").prop("checked",!1),pageId.find("#addOrgFile_mandAck").prop("checked",!1),pageId.find("#addOrgFile_download").prop("checked",!0),pageId.find("#addOrgFile_feeds").prop("checked",!1),pageId.find("#addOrgFile_mail").prop("checked",!1)},setFieldValues:function(rowId){var editData=settingsPage.container.find("#"+rowId).data().ldata,pageId=$("#"+FilesOperations.OrgFiles.AddEdit.cardId);FilesOperations.OrgFiles.AddEdit.editFileId=editData.fileID;var fileName=editData.fileName,fileExtn=FilesUtil.Page.getFileExtn(editData.fileExtn,editData.filePath,editData.UploadSource);settingsUrlProps.niceUrl.indexOf("/hrdocuments")>0&&($("#orgFile_uploadFileDiv").css("display","none"),"5"==editData.fileType&&(fileName=(fileName=editData.fileName).substr(0,fileName.lastIndexOf(" Template")),fileName+=".pdf",fileExtn="pdf"));FileUpload.attachFile(fileName,fileExtn),pageId.find("#addOrgFile_fileName").val(fileName),"null"!=editData.fileDesc&&void 0!=editData.fileDesc&&""!=editData.fileDesc&&pageId.find("#addOrgFile_fileDesc").val(editData.fileDesc);var targetId=$("#shareWith_cont").find("#shareWith_SelectedOpts");FilesUtil.TabPanel.constructTabListValues(editData.fileOrgStructure,"orgFile_shareWithPanel",targetId),ZPeopleComponents.select(pageId.find("#addOrgFile_Folder")).setValue({id:editData.fileCategoryID,name:editData.fileCatName}),"null"!=editData.validUntildate&&void 0!=editData.validUntildate&&null!=editData.validUntildate&&0!=editData.validUntildate?ZPeopleComponents.datefield(pageId.find("#addOrgFile_validUntil")).setValue(editData.validUntildate):ZPeopleComponents.datefield(pageId.find("#addOrgFile_validUntil")).clear(),1===editData.isPolicy?pageId.find("#addOrgFile_policy").prop("checked",!0):pageId.find("#addOrgFile_policy").prop("checked",!1),1===editData.fileConfident?pageId.find("#addOrgFile_download").prop("checked",!1):pageId.find("#addOrgFile_download").prop("checked",!0),"null"!=editData.ackDeadLine&&void 0!=editData.ackDeadLine&&null!=editData.ackDeadLine&&0!=editData.ackDeadLine?(ZPeopleComponents.datefield(pageId.find("#addOrgFile_ackDeadLine")).setValue(editData.ackDeadLine),1===editData.fileAcknowledge&&pageId.find("#addOrgFile_mandAck").prop("checked",!0)):(ZPeopleComponents.datefield(pageId.find("#addOrgFile_ackDeadLine")).clear(),1===editData.fileAcknowledge&&pageId.find("#addOrgFile_notMandAck").prop("checked",!0))},update:function(){var errflag=!1,pageId=$("#"+FilesOperations.OrgFiles.AddEdit.cardId);pageId.find(".ztextbox--error__label").remove(),pageId.find(".ztextbox__error").removeClass("ztextbox__error");var isDownload="0",isPolicy="0",isacknowledge="0",catId="-1",newCatName="",fileName=pageId.find("#addOrgFile_fileName").val().trim(),fileDesc=pageId.find("#addOrgFile_fileDesc").val().trim(),orgStructureDetails=ZPA_TabbedListBox.getTagConfig($("#shareWith_SelectedOpts"));pageId.find("#addOrgFile_newCatName").is(":visible")?newCatName=pageId.find("#addOrgFile_newCatName").val().trim():catId=ZPeopleComponents.select(pageId.find("#addOrgFile_Folder")).getValue();var validUntil="",dateObj=ZPeopleComponents.datefield(pageId.find("#addOrgFile_validUntil")).getValue();null!=dateObj.dateString&&void 0!=dateObj.dateString&&""!=dateObj.dateString&&(validUntil=dateObj.dateString);var isAckEnabledFile=!1;(pageId.find("#addOrgFile_mandAck").prop("checked")||pageId.find("#addOrgFile_notMandAck").prop("checked"))&&(isacknowledge="1",isAckEnabledFile=!0),pageId.find("#addOrgFile_download").prop("checked")||(isDownload="1"),pageId.find("#addOrgFile_policy").prop("checked")&&(isPolicy="1");var ackDeadLine="",ack_dateObj=ZPeopleComponents.datefield(pageId.find("#addOrgFile_ackDeadLine")).getValue();null!=ack_dateObj.dateString&&void 0!=ack_dateObj.dateString&&""!=ack_dateObj.dateString&&(ackDeadLine=ack_dateObj.dateString);var isFeeds=pageId.find("#addOrgFile_feeds").prop("checked"),isMail=pageId.find("#addOrgFile_mail").prop("checked");if(-1!=fileName.indexOf(",")&&(fileName=fileName.replace(/,/g,"_")),-1!=fileName.indexOf(",")&&(fileName=fileName.replace(/,/g,"")),"exe"==fileName.substr(fileName.lastIndexOf(".")+1,fileName.length).toLowerCase()&&(ZPeople.Message.failure(ZPI18N.getString("zp.exefileerror")),errflag=!0),""==fileName&&(pageId.find("#addOrgFile_fileName").addClass("ztextbox__error"),pageId.find("#addOrgFile_fileName").after('<span class="ztextbox--error__label">'+ZPI18N.getString("zp.files.operations.filter.filenameinfo")+"</span>"),errflag=!0),fileName.length>250&&(pageId.find("#addOrgFile_fileName").addClass("ztextbox__error"),pageId.find("#addOrgFile_fileName").after('<span class="ztextbox--error__label">'+ZPI18N.getString("zp.files.operations.fnamelimit")+"</span>"),errflag=!0),fileDesc.length>250&&(pageId.find("#addOrgFile_fileDesc").addClass("ztextbox__error"),pageId.find("#addOrgFile_fileDesc").after('<span class="ztextbox--error__label">'+ZPI18N.getString("zp.files.operations.desclimit")+"</span>"),errflag=!0),null==orgStructureDetails||void 0===orgStructureDetails||jQuery.isEmptyObject(orgStructureDetails)?(pageId.find("#shareWith_cont").addClass("ztextbox__error"),pageId.find("#shareWith_cont").after('<span class="ztextbox--error__label">'+ZPI18N.getString("zp.files.operations.giveorgstruct")+"</span>"),errflag=!0):orgStructureDetails.hasOwnProperty("NOTIFY_ALL")&&(orgStructureDetails.LocationName=["-1"],delete orgStructureDetails.NOTIFY_ALL),""!=validUntil){var validityDateval=validUntil;"-1"!=dateFmt.indexOf("MMM")&&(validityDateval=validityDateval.replace(/-/g," "));var currentdatelong=Calendar.getCurrentDate().getTime(),validityDatelong=new Date(validityDateval).getTime();validityDatelong<currentdatelong&&(ZPeopleComponents.datefield(pageId.find("#addOrgFile_validUntil")).getElement().addClass("ztextbox__error"),pageId.find("#addOrgFile_validUntil").parent().append('<span class="ztextbox--error__label">'+ZPI18N.getString("zp.validuntilerr")+"</span>"),errflag=!0)}if(!pageId.find("#addOrgFile_mandAck").prop("checked")||null!=ackDeadLine&&void 0!=ackDeadLine&&""!=ackDeadLine&&"-1"!=ackDeadLine||(ZPeopleComponents.datefield(pageId.find("#addOrgFile_ackDeadLine")).getElement().addClass("ztextbox__error"),pageId.find("#addOrgFile_ackDeadLine").parent().append('<span class="ztextbox--error__label">'+ZPI18N.getString("zp.entervaliddate")+"</span>"),errflag=!0),""!=ackDeadLine){var ack_deadline_val=ackDeadLine;"-1"!=dateFmt.indexOf("MMM")&&(ack_deadline_val=ack_deadline_val.replace(/-/g," "));currentdatelong=Calendar.getCurrentDate().getTime();var ackDeadlinelong=new Date(ack_deadline_val).getTime();ackDeadlinelong<currentdatelong&&(ZPeopleComponents.datefield(pageId.find("#addOrgFile_ackDeadLine")).getElement().addClass("ztextbox__error"),pageId.find("#addOrgFile_ackDeadLine").parent().append('<span class="ztextbox--error__label">'+ZPI18N.getString("zp.validuntilerr")+"</span>"),errflag=!0);var dateObject=new Date;ackDeadlinelong>new Date(dateObject.setDate(dateObject.getDate()+90)).getTime()&&(ZPeopleComponents.datefield(pageId.find("#addOrgFile_ackDeadLine")).getElement().addClass("ztextbox__error"),pageId.find("#addOrgFile_ackDeadLine").parent().append('<span class="ztextbox--error__label">'+ZPI18N.getString("zp.files.operations.ackmandatoryerr")+"</span>"),errflag=!0),isAckEnabledFile=!0}if(""!=validUntil&&""!=ackDeadLine&&validityDatelong<ackDeadlinelong&&(ZPeopleComponents.datefield(pageId.find("#addOrgFile_ackDeadLine")).getElement().addClass("ztextbox__error"),pageId.find("#addOrgFile_ackDeadLine").parent().append('<span class="ztextbox--error__label">'+ZPI18N.getString("zp.files.operations.expiryackdeadline")+"</span>"),errflag=!0),-1==fileName.indexOf("<")&&-1==fileName.indexOf(">")&&-1==fileName.indexOf("&lt;")&&-1==fileName.indexOf("&gt;")||(ZPeople.Message.failure(ZPI18N.getString("zp.files.operations.avoidchar",new Array(ZPI18N.getString("zp.files.operations.filename")))),errflag=!0),-1==fileDesc.indexOf("<")&&-1==fileDesc.indexOf(">")&&-1==fileDesc.indexOf("&lt;")&&-1==fileDesc.indexOf("&gt;")||(ZPeople.Message.failure(ZPI18N.getString("zp.files.operations.avoidchar",new Array(ZPI18N.getString("zp.description")))),errflag=!0),pageId.find("#addOrgFile_newCatName").parent().is(":visible")&&""==newCatName?(pageId.find("#addOrgFile_newCatName").addClass("ztextbox__error"),pageId.find("#addOrgFile_newCatName").parent().append('<span class="ztextbox--error__label">'+ZPI18N.getString("zp.enterCategory")+"</span>"),errflag=!0):!pageId.find("#addOrgFile_Folder").parent().is(":visible")||""!=catId&&"-1"!=catId||(ZPeopleComponents.select(pageId.find("#addOrgFile_Folder")).getElement().addClass("ztextbox__error"),pageId.find("#addOrgFile_Folder").parent().append('<span class="ztextbox--error__label">'+ZPI18N.getString("zp.files.operations.selectfolder")+"</span>"),errflag=!0),(pageId.find("#addOrgFile_newCatName").parent().is(":visible")&&-1!=newCatName.indexOf("<")||-1!=newCatName.indexOf(">")||-1!=newCatName.indexOf("&lt;")||-1!=newCatName.indexOf("&gt;"))&&(ZPeople.Message.failure(ZPI18N.getString("zp.files.operations.avoidchar",new Array(ZPI18N.getString("zp.folder")))),errflag=!0),pageId.find("#addOrgFile_newCatName").parent().is(":visible")&&null!=newCatName&&void 0!=newCatName&&"/"===newCatName&&(ZPeople.Message.failure(ZPI18N.getString("zp.files.operations.avoidchar",new Array(ZPI18N.getString("zp.lms.base.foldername")))),errflag=!0),"0"!=FilesOperations.OrgFiles.AddEdit.editFileId||null!=FileUpload.uploadMode&&void 0!=FileUpload.uploadMode&&""!=FileUpload.uploadMode||(ZPeople.Message.failure(ZPI18N.getString("zp.files.operations.selectfile")),errflag=!0),null!=FileUpload.fileExtn&&void 0!=FileUpload.fileExtn&&""!=FileUpload.fileExtn&&"zip"==FileUpload.fileExtn.toLowerCase()&&1==isAckEnabledFile&&(ZPeople.Message.failure(ZPI18N.getString("zp.files.operations.zipwithacknotsupported")),errflag=!0),errflag)return!1;$(settingsPage.mainWrapId).find("#"+FilesOperations.OrgFiles.AddEdit.modelId).find("#sliderSbt").addClass("disabled");var formData=new FormData;formData.append("conreqcsr",csrfToken),formData.append("fileName",fileName),formData.append("fileDesc",fileDesc),formData.append("fileType","1"),pageId.find("#addOrgFile_newCatName").is(":visible")?formData.append("newCatName",newCatName):formData.append("catId",catId),formData.append("editFileId",FilesOperations.OrgFiles.AddEdit.editFileId),formData.append("notifyToall",isMail),formData.append("notifyFeeds",isFeeds),formData.append("confidential",isDownload),formData.append("isPolicy",isPolicy),formData.append("isAcknowledgement",isacknowledge),formData.append("uploadMode",FileUpload.uploadMode),null!=validUntil&&void 0!=validUntil&&""!=validUntil&&-1!=validUntil&&formData.append("validityDate",validUntil),null!=ackDeadLine&&void 0!=ackDeadLine&&""!=ackDeadLine&&-1!=ackDeadLine&&formData.append("ackDeadLine",ackDeadLine),"localUpload"==FileUpload.uploadMode&&(formData.append("importFileId",FileUpload.udsParams.fileId),formData.append("fileVersion",FileUpload.udsParams.fileVersion)),"cloudUpload"==FileUpload.uploadMode&&formData.append("cloudUploadDoc",JSON.stringify(FileUpload.CloudPicker.UPLOADOBJ)),"workDriveUpload"==FileUpload.uploadMode&&formData.append("WDUploadDoc",JSON.stringify(FileUpload.WorkDrive.UPLOADOBJ)),null==orgStructureDetails||jQuery.isEmptyObject(orgStructureDetails)||formData.append("orgStructureDetails",JSON.stringify(orgStructureDetails)),formData=FilesUtil.Geo.setLatLongParams(formData,!0),$.ajax({url:"/zpfiles/operations/addFile",type:"POST",data:formData,contentType:!1,processData:!1,success:function(data){FilesOperations.OrgFiles.Modal.ADD_MODAL.close();var switchViewAlert=!1;settingsUrlProps.niceUrl.indexOf("/hrdocuments")>-1?HRDocumentFiles.switchViewAlert(JSON.stringify(orgStructureDetails)):switchViewAlert=FilesOperations.OrgFiles.AddEdit.switchViewAlert(JSON.stringify(orgStructureDetails));var editId=FilesOperations.OrgFiles.AddEdit.editFileId;settingsUrlProps.niceUrl.indexOf("/hrdocuments")<=0&&!switchViewAlert&&(null!=editId&&void 0!=editId&&""!=editId&&"0"!=editId&&"-1"!=editId?ZPeople.Message.success(ZPI18N.getString("zp.updatefile")):ZPeople.Message.success(ZPI18N.getString("zp.addfile"))),settingsUrlProps.niceUrl.indexOf("/hrdocuments")>-1?HRDocumentFiles.reloadPage():FilesOperations.Page.reloadOtherPages()},error:function(req){var errResponse=req.responseJSON[1];8103!==req.status&&8101!==req.status&&500!==req.status||ZPeople.Message.failure(errResponse.msg),FilesOperations.OrgFiles.Modal.ADD_MODAL.close()}})},changeView:function(url){window.location.href=url,FilesOperations.OrgFiles.AddEdit.alertMsgObj.close()},switchViewAlert:function(orgStructureDetails){var isSwitchViewAlert=!1,tabNames=FilesOperations.OrgFiles.AddEdit.isAddedToOtherView(orgStructureDetails);if(null!=tabNames&&void 0!=tabNames&&Object.keys(tabNames).length>0){var mapHtml='<div class="zpl_gbox wd100_per"><div class="zpl_gbxttl"><div><h4>'+ZPI18N.getString("zp.views")+'</h4></div></div><div class="zpl_idiv whtbg">';$(tabNames).each(function(i,view){var url=window.location.hash.substring(0,window.location.hash.lastIndexOf("/")+1)+view.url;mapHtml+='<div class="zpl_tg"><a onclick="FilesOperations.OrgFiles.AddEdit.changeView(\''+url+"');\">"+view.tabName+"</a></div>"}),mapHtml+="</div>";var title=ZPI18N.getString("zp.addfile"),desc=ZPI18N.getString("zp.files.operations.fileaccessview");FilesOperations.OrgFiles.AddEdit.alertMsgObj=new SuccessAlertMessage(title,desc),FilesOperations.OrgFiles.AddEdit.alertMsgObj.yesButtonText="",FilesOperations.OrgFiles.AddEdit.alertMsgObj.cancelButtonText=ZPI18N.getString("zp.close"),FilesOperations.OrgFiles.AddEdit.alertMsgObj.setCenterHtml(mapHtml),FilesOperations.OrgFiles.AddEdit.alertMsgObj.show(),isSwitchViewAlert=!0}return isSwitchViewAlert},isAddedToOtherView:function(nodes){var parentContainer=FilesUtil.Page.getParentContainer(),nodeDetails=JSON.parse(nodes);if(null!=nodeDetails&&void 0!=nodeDetails){var isOtherView=!1;(parentContainer===FilesUtil.Page.pageIdMap.ENT&&(void 0==nodeDetails.Entity||nodeDetails.Entity.length<=0)||parentContainer===FilesUtil.Page.pageIdMap.UNIT&&(void 0==nodeDetails.Business_unit||nodeDetails.Business_unit.length<=0)||parentContainer===FilesUtil.Page.pageIdMap.DIV&&(void 0==nodeDetails.Division||nodeDetails.Division.length<=0)||parentContainer===FilesUtil.Page.pageIdMap.DEPT&&(void 0==nodeDetails.Department||nodeDetails.Department.length<=0)||parentContainer===FilesUtil.Page.pageIdMap.LOC&&(void 0==nodeDetails.LocationName||nodeDetails.LocationName.length<=0))&&(isOtherView=!0);var tabNames=[];return isOtherView&&(void 0!==nodeDetails.Entity&&nodeDetails.Entity.length>0&&parentContainer!=FilesUtil.Page.pageIdMap.ENT&&(json={},json.tabName=ZPeople.orgStructureDispNameMap.entity,json.url="ent",tabNames.push(json)),void 0!==nodeDetails.Business_unit&&nodeDetails.Business_unit.length>0&&parentContainer!=FilesUtil.Page.pageIdMap.UNIT&&(json={},json.tabName=ZPeople.orgStructureDispNameMap.unit,json.url="unit",tabNames.push(json)),void 0!==nodeDetails.Division&&nodeDetails.Division.length>0&&parentContainer!=FilesUtil.Page.pageIdMap.DIV&&(json={},json.tabName=ZPeople.orgStructureDispNameMap.division,json.url="div",tabNames.push(json)),void 0!==nodeDetails.Department&&nodeDetails.Department.length>0&&parentContainer!=FilesUtil.Page.pageIdMap.DEPT&&(json={},json.tabName=ZPeople.orgStructureDispNameMap.department,json.url="dept",tabNames.push(json)),void 0!==nodeDetails.LocationName&&nodeDetails.LocationName.length>0&&parentContainer!=FilesUtil.Page.pageIdMap.LOC&&(json={},json.tabName=ZPI18N.getString("zp.location"),json.url="loc",tabNames.push(json))),tabNames}}},FilesOperations.OrgFiles.Filter={showHide:function(){if(FilesUtil.IP.isRestricted)FilesUtil.IP.showError(!0);else if(FilesUtil.Geo.isRestricted)FilesUtil.Geo.showError(!0);else if(settingsPage.container.find("#orgFile_filterModal").parent().hasClass("zpl_fltr_flt"))FilesOperations.OrgFiles.Filter.hide();else{0==settingsPage.container.find("#orgFile_filterModal").find(".zpl_fltrhd").length&&(FilesOperations.OrgFiles.Modal.filter(),FilesOperations.OrgFiles.Filter.init()),settingsPage.container.find("#orgFile_filterModal").parent().addClass("zpl_fltr_flt");var parentContainer=FilesUtil.Page.getParentContainer(),filterLabel=ZPI18N.getString("zp.location");parentContainer===FilesUtil.Page.pageIdMap.ENT?filterLabel=ZPeople.orgStructureDispNameMap.entity:parentContainer===FilesUtil.Page.pageIdMap.UNIT?filterLabel=ZPeople.orgStructureDispNameMap.unit:parentContainer===FilesUtil.Page.pageIdMap.DIV?filterLabel=ZPeople.orgStructureDispNameMap.division:parentContainer===FilesUtil.Page.pageIdMap.DEPT&&(filterLabel=ZPeople.orgStructureDispNameMap.department),settingsPage.container.find("#filterOrgFile_loc"+parentContainer).parent().parent().find("#orgstrName").text(filterLabel),settingsUrlProps.url.indexOf("-catId")>-1?settingsPage.container.find("#orgFile_filterModal").find("#filterOrgFile_Folder"+parentContainer).parent().parent().addClass("zpl_DNI"):settingsPage.container.find("#orgFile_filterModal").find("#filterOrgFile_Folder"+parentContainer).parent().parent().removeClass("zpl_DNI"),settingsPage.container.find("#orgFile_filterModal").find("#filterOrgFile_name"+parentContainer).focus()}},hide:function(){settingsPage.container.find("#orgFile_filterModal").parent().removeClass("zpl_fltr_flt")},init:function(){var parentContainer=FilesUtil.Page.getParentContainer();FilesUtil.Page.isPolicyPage()||FilesOperations.OrgFiles.componentInit.orgFileFilterActExpView("filterOrgFile_actExpView"+parentContainer),FilesUtil.Page.isModulePage()||(FilesUtil.componentInit.folderListDropdown("filterOrgFile_Folder"+parentContainer),FilesOperations.Util.fileFilterFileFormat("filterOrgFile_format"+parentContainer),FilesOperations.OrgFiles.componentInit.orgFileFilterLocation("filterOrgFile_loc"+parentContainer)),ZPeopleComponents.datefield(settingsPage.container.find("#filterOrgFile_fromDate"+parentContainer)).setAttributes({placeholder:dateFmt}),ZPeopleComponents.datefield(settingsPage.container.find("#filterOrgFile_toDate"+parentContainer)).setAttributes({placeholder:dateFmt})},reset:function(key){var parentContainer=FilesUtil.Page.getParentContainer(),isFromModulePage=FilesUtil.Page.isModulePage(),isPolicyPage=FilesUtil.Page.isPolicyPage(),pageId=settingsPage.container.find("#orgFile_filterModal").parent();void 0==key?(pageId.find("#filterOrgFile_name"+parentContainer).val(""),isPolicyPage||ZPeopleComponents.select(pageId.find("#filterOrgFile_actExpView"+parentContainer)).setValue("0"),ZPeopleComponents.datefield(pageId.find("#filterOrgFile_fromDate"+parentContainer)).clear(),ZPeopleComponents.datefield(pageId.find("#filterOrgFile_toDate"+parentContainer)).clear(),isFromModulePage||(ZPeopleComponents.select(pageId.find("#filterOrgFile_Folder"+parentContainer)).deselectAllOptions(),ZPeopleComponents.select(pageId.find("#filterOrgFile_loc"+parentContainer)).deselectAllOptions(),ZPeopleComponents.select(pageId.find("#filterOrgFile_format"+parentContainer)).deselectAllOptions())):key==ZPI18N.getString("zp.files.operations.filename")?pageId.find("#filterOrgFile_name"+parentContainer).val(""):key!=ZPI18N.getString("zp.folder")||isFromModulePage?key!=ZPI18N.getString("zp.files.operations.filter.fileview")||isPolicyPage?key!=ZPI18N.getString("zp.location")&&key!=ZPeople.orgStructureDispNameMap.entity&&key!=ZPeople.orgStructureDispNameMap.unit&&key!=ZPeople.orgStructureDispNameMap.division&&key!=ZPeople.orgStructureDispNameMap.department||isFromModulePage?key==ZPI18N.getString("zp.from")?ZPeopleComponents.datefield(pageId.find("#filterOrgFile_fromDate"+parentContainer)).clear():key==ZPI18N.getString("zp.to")?ZPeopleComponents.datefield(pageId.find("#filterOrgFile_toDate"+parentContainer)).clear():key!=ZPI18N.getString("zp.filesextn")||isFromModulePage||ZPeopleComponents.select(pageId.find("#filterOrgFile_format"+parentContainer)).deselectAllOptions():ZPeopleComponents.select(pageId.find("#filterOrgFile_loc"+parentContainer)).deselectAllOptions():ZPeopleComponents.select(pageId.find("#filterOrgFile_actExpView"+parentContainer)).setValue("0"):ZPeopleComponents.select(pageId.find("#filterOrgFile_Folder"+parentContainer)).deselectAllOptions()},isValid:function(){var parentContainer=FilesUtil.Page.getParentContainer(),isFromModulePage=FilesUtil.Page.isModulePage(),pageId=settingsPage.container.find("#orgFile_filterModal").parent(),fileName=pageId.find("#filterOrgFile_name"+parentContainer).val();if(null!=fileName&&void 0!=fileName&&""!=fileName)return!0;if(!isFromModulePage){if(settingsUrlProps.url.indexOf("-catId")<=0){var folderId=ZPeopleComponents.select(pageId.find("#filterOrgFile_Folder"+parentContainer)).getValue();if(null!=folderId&&void 0!=folderId&&""!=folderId&&"-1"!=folderId)return!0}var locFilter=ZPeopleComponents.select(pageId.find("#filterOrgFile_loc"+parentContainer)).getValue();if(null!=locFilter&&void 0!=locFilter&&""!=locFilter&&"-1"!=locFilter)return!0;var format=ZPeopleComponents.select(pageId.find("#filterOrgFile_format"+parentContainer)).getValue();if(null!=format&&void 0!=format&&""!=format&&"-1"!=format)return!0}if(!FilesUtil.Page.isPolicyPage()){var actExpView=ZPeopleComponents.select(pageId.find("#filterOrgFile_actExpView"+parentContainer)).getValue();if(null!=actExpView&&void 0!=actExpView&&""!=actExpView&&"0"!=actExpView)return!0}var fromDate=ZPeopleComponents.datefield(pageId.find("#filterOrgFile_fromDate"+parentContainer)).getValue().dateString;if(null!=fromDate&&void 0!=fromDate&&""!=fromDate&&"-1"!=fromDate)return!0;var toDate=ZPeopleComponents.datefield(pageId.find("#filterOrgFile_toDate"+parentContainer)).getValue().dateString;return null!=toDate&&void 0!=toDate&&""!=toDate&&"-1"!=toDate},search:function(){var parentContainer=FilesUtil.Page.getParentContainer(),isFromModulePage=FilesUtil.Page.isModulePage(),fileName=(pageId=settingsPage.container.find("#orgFile_filterModal").parent()).find("#filterOrgFile_name"+parentContainer).val(),catId="";if(settingsUrlProps.url.indexOf("-catId")>-1)catId=Layout.Page.urlparam.catId;else if(!isFromModulePage){var catIdVal=ZPeopleComponents.select(pageId.find("#filterOrgFile_Folder"+parentContainer)).getValue();catId=""==catIdVal||void 0==catIdVal?"":catIdVal}var isExpiredFilesView=!1;FilesUtil.Page.isPolicyPage()||"1"===ZPeopleComponents.select(pageId.find("#filterOrgFile_actExpView"+parentContainer)).getValue()&&(isExpiredFilesView=!0);if(!isFromModulePage)var nodeId=ZPeopleComponents.select(pageId.find("#filterOrgFile_loc"+parentContainer)).getValue(),fileExtn=ZPeopleComponents.select(pageId.find("#filterOrgFile_format"+parentContainer)).getValue();var fromDate=ZPeopleComponents.datefield(pageId.find("#filterOrgFile_fromDate"+parentContainer)).getValue().dateString,toDate=ZPeopleComponents.datefield(pageId.find("#filterOrgFile_toDate"+parentContainer)).getValue().dateString,subPageElement=FilesUtil.Page.getPageData(parentContainer,"2");subPageElement[7]=0,subPageElement[8]=!0;var searchObj={catId:catId,fileType:FilesUtil.FILETYPE.ORGFILE,conreqcsr:csrfToken,searchFileName:fileName,isExpiredFilesView:isExpiredFilesView};if(parentContainer===FilesUtil.Page.pageIdMap.ENT?(searchObj.filterView=FilesOperations.filterView.ENT,null!=nodeId&&void 0!=nodeId&&""!=nodeId&&"-1"!=nodeId&&(searchObj.entityId=nodeId)):parentContainer===FilesUtil.Page.pageIdMap.UNIT?(searchObj.filterView=FilesOperations.filterView.UNIT,null!=nodeId&&void 0!=nodeId&&""!=nodeId&&"-1"!=nodeId&&(searchObj.unitId=nodeId)):parentContainer===FilesUtil.Page.pageIdMap.DIV?(searchObj.filterView=FilesOperations.filterView.DIV,null!=nodeId&&void 0!=nodeId&&""!=nodeId&&"-1"!=nodeId&&(searchObj.divisionId=nodeId)):parentContainer===FilesUtil.Page.pageIdMap.DEPT?(searchObj.filterView=FilesOperations.filterView.DEPT,null!=nodeId&&void 0!=nodeId&&""!=nodeId&&"-1"!=nodeId&&(searchObj.deptId=nodeId)):parentContainer===FilesUtil.Page.pageIdMap.LOC?(searchObj.filterView=FilesOperations.filterView.LOC,null!=nodeId&&void 0!=nodeId&&""!=nodeId&&"-1"!=nodeId&&(searchObj.locationId=nodeId)):parentContainer!=FilesUtil.Page.pageIdMap_mod.ORG&&parentContainer!=FilesUtil.Page.pageIdMap_pol.ORG&&parentContainer!=FilesUtil.Page.pageIdMap_mod.MYDEPT||(searchObj.isFromModule=!0),parentContainer==FilesUtil.Page.pageIdMap_pol.ORG&&(searchObj.isFromPolicy=!0),parentContainer==FilesUtil.Page.pageIdMap_mod.MYDEPT&&(searchObj.orgUserType="dept"),null!=fromDate&&void 0!=fromDate&&""!=fromDate&&"-1"!=fromDate&&(searchObj.fromDate=fromDate),null!=toDate&&void 0!=toDate&&""!=toDate&&"-1"!=toDate&&(searchObj.toDate=toDate),null!=fileExtn&&void 0!=fileExtn&&""!=fileExtn&&"-1"!=fileExtn){var searchFileExtn=FilesOperations.Util.getFileExtnType(fileExtn);searchObj.searchFileExtn=searchFileExtn}subPageElement[2]=searchObj,FilesOperations.Page.setPageDataOnURLChange(catId,!0);var pageId=FilesUtil.Page.getPageId();settingsPage.container.find("#"+pageId).html(""),FilesOperations.OrgFiles.Filter.hide(),FilesOperations.Breadcrump.construct(),FilesOperations.FolderListing.getData(parentContainer)}},FilesOperations.EmpFiles={fetchData:function(parentContainer){parentContainer=FilesUtil.Page.getParentContainer();if(FilesUtil.Page.isListView())var pageElement=FilesUtil.Page.getPageData(parentContainer,"1");else pageElement=FilesUtil.Page.getPageData(parentContainer,"2");var searchApplied=FilesUtil.Page.getPageData(parentContainer,"2"),tabGroup=FilesUtil.Page.getTabGroup();("1"==tabGroup||"0"==tabGroup&&settingsUrlProps.url.indexOf("-catId")<=0)&&(1==FilesOperations.Page.resetFolderIdOnTabSwitch()&&(searchApplied[2].catId=""));if(settingsUrlProps.url.indexOf("-catId")>-1){var catId=void 0!=settingsUrlProps.urlParamsArr.catId?settingsUrlProps.urlParamsArr.catId:pageElement[2].catId;catId=null!=catId&&void 0!=catId&&""!=catId&&"-1"!=catId?catId:""}else catId=searchApplied[2].catId;if(window.location.href.indexOf("empId")>-1){var empId=void 0!=settingsUrlProps.urlParamsArr.empId?settingsUrlProps.urlParamsArr.empId:pageElement[2].empId;empId=null!=empId&&void 0!=empId&&""!=empId&&"-1"!=empId?empId:""}var params={},actionMode="",actionURL="";if(1==pageElement[1]&&settingsUrlProps.url.indexOf("-catId")>-1&&!FilesUtil.Page.isModulePage())actionURL="/zpfiles/settings/getFolders",actionMode=FilesOperations.ACTIONMODE.EMPFILE_SUBFOLDER,params={conreqcsr:csrfToken,start:pageElement[0],parentCatId:catId,isNewUI:!0};else if(FilesUtil.Page.isListView()&&1==pageElement[1]||settingsUrlProps.url.indexOf("-catId")>-1&&1==pageElement[8]){if(actionURL="/zpfiles/operations/getAllFiles",actionMode=FilesOperations.ACTIONMODE.EMPFILE_SUBFILE,0!=Object.keys(searchApplied[2]).length)(params=searchApplied[2]).fileType=FilesUtil.FILETYPE.EMPFILE,window.location.href.indexOf("operations/files/all-viewType:1/empId:")>-1&&(params.filterBy=FilesOperations.filterBy.ALL),params.catId=catId,window.location.href.indexOf("empId")>-1&&(params.employeeId=empId);else if(params={catId:catId,employeeId:empId,fileType:FilesUtil.FILETYPE.EMPFILE,conreqcsr:csrfToken},parentContainer==FilesUtil.Page.pageIdMap.ALL)params.filterBy=FilesOperations.filterBy.ALL;else if(parentContainer==FilesUtil.Page.pageIdMap_mod.MY)params.filterBy=FilesOperations.filterBy.MY;else if(parentContainer==FilesUtil.Page.pageIdMap_mod.ROLE)params.filterBy=FilesOperations.filterBy.MYROLE;else if(parentContainer==FilesUtil.Page.pageIdMap_mod.TEAM)null!==FilesUtil.hasAllReporteePerm&&void 0!==FilesUtil.hasAllReporteePerm&&!0===FilesUtil.hasAllReporteePerm?params.filterBy=FilesOperations.filterBy.ALLSUB:params.filterBy=FilesOperations.filterBy.SUB;else if(parentContainer==FilesUtil.Page.pageIdMap_mod.SUB)if(null!==FilesUtil.hasAllReporteePerm&&void 0!==FilesUtil.hasAllReporteePerm&&!0===FilesUtil.hasAllReporteePerm){var filterByVal=ZPeopleComponents.select("#filterEmpFile_view"+parentContainer).getValue();"6"==filterByVal?params.filterBy=FilesOperations.filterBy.SUB:"7"==filterByVal&&(params.filterBy=FilesOperations.filterBy.ALLSUB)}else params.filterBy=FilesOperations.filterBy.SUB;FilesUtil.Page.isListView()?params.start=pageElement[0]:params.start=pageElement[7]}params=FilesUtil.Geo.setLatLongParams(params);var details={};details.parentContainer=parentContainer,FilesOperations.Util.manageAction(actionMode,actionURL,params,details)},callBack:function(resultData,params,otherDetails){var respObj,parentContainer="";if(null!=otherDetails&&void 0!=otherDetails&&void 0!=otherDetails.parentContainer&&(parentContainer=otherDetails.parentContainer),void 0!=resultData[0]&&resultData[0].code==FilesUtil.IP.errorCode)FilesUtil.IP.showError(!1);else if(void 0!=resultData[0]&&resultData[0].code==FilesUtil.Geo.errorCode)FilesUtil.Geo.showError(!1);else{if(settingsUrlProps.url.indexOf("-catId")>-1){var catTree=resultData[1].catTree;null!=catTree&&void 0!=catTree&&catTree.length>0&&FilesUtil.Breadcrump.setDetail(catTree,parentContainer)}if(window.location.href.indexOf("operations/files/all-viewType:1/empId:")>-1){settingsUrlProps.urlParamsArr.empId;FilesOperations.Breadcrump.construct()}respObj=resultData[1],FilesOperations.EmpFiles.construct(respObj,void 0,parentContainer)}},construct:function(resultData,mode,parentContainer){var pageId=settingsPage.container.find("#empFileSubList_List"+parentContainer),parseObj=resultData.filesList,catTree=resultData.catTree;null==catTree||void 0==catTree||catTree.length;var dataLimit=parseObj.length,isListView=!1,isFromModulePage=FilesUtil.Page.isModulePage(),pageElement=FilesUtil.Page.getPageData(parentContainer,"2"),subFolderCount=settingsPage.container.find("#empFileSubList_Folder"+parentContainer).children().length;if(settingsUrlProps.url.indexOf("-catId")>-1&&0==subFolderCount&&pageId.closest(".zpl_secn").prev().addClass("zpl_DNI"),FilesUtil.Page.isListView()){pageId=settingsPage.container.find("#empFileListView"+parentContainer),pageElement=FilesUtil.Page.getPageData(parentContainer,"1");isListView=!0}var isModuleShareToHide=!1;FilesUtil.Page.isModulePage()&&(parentContainer!=FilesUtil.Page.pageIdMap_mod.MY&&parentContainer!=FilesUtil.Page.pageIdMap_mod.ROLE||(isModuleShareToHide=!0));var viewType="1";if(settingsUrlProps.url.indexOf("-catId")>-1&&(viewType="2"),parseObj.length<25?(dataLimit=parseObj.length,FilesUtil.Page.isListView()?pageElement[1]=!1:pageElement[8]=!1):(dataLimit=parseObj.length-1,FilesUtil.Page.isListView()?pageElement[1]=!0:pageElement[8]=!0),(FilesUtil.Page.isListView()&&0==pageElement[0]||settingsUrlProps.url.indexOf("-catId")>-1&&0==pageElement[7])&&pageId.empty(),parseObj.length>0){FilesOperations.DataPage.hideLoadingPage(),(isFromModulePage=FilesUtil.Page.isModulePage())||settingsPage.container.find("#addFileBtn").removeClass("zpl_DNI");for(var i=0;i<dataLimit;i++){var data=parseObj[i],fileId=data.fileID,fileExtn=data.fileExtn,filePath=data.filePath,fileName=data.fileName;fileExtn=FilesUtil.Page.getFileExtn(fileExtn,filePath,data.UploadSource),data.fileExtn=fileExtn;var rowId="empFileTr_"+fileId,row='<tr id="'+rowId+'" fileName = "'+ZSEC.Encoder.encodeForHTMLAttribute(fileName)+'" fileID = "'+fileId+'"  uploadFileExtn = "'+fileExtn+'" isLoginUserAck = '+data.isLoginUserAck+" isEmpFileAck = "+data.isEmpFileAck+">";if(isFromModulePage||(null!=data.fileActions.isDeletePerm&&void 0!=data.fileActions.isDeletePerm&&!0===data.fileActions.isDeletePerm?(row+='<td scope="row"><div class="zcheckbox">',row+='<input id="chkBox_'+fileId+'" type="checkbox" name="check" value="" class="zcheckbox__helper">',row+="<label onclick=\"FilesOperations.Util.selectAll('chkBox_"+fileId+'\' ,false);" class="zcheckbox__label"></label>',row+="</div></td>"):row+='<td scope="row"></td>'),row+='<td scope="row" id="empFileNameTd_'+fileId+'" fileName = "'+ZSEC.Encoder.encodeForHTMLAttribute(fileName)+'" fileID = "'+fileId+'"  scope="row">',row+='<div class="d-flexC d-flexclmcap10" onclick="FilesOperations.Preview.initLightBox(this);" role="button">',row+='<i class="'+FileUpload.getFileIcon(fileExtn)+'"></i>',1===data.fileConfident&&(row+='<i class="PI_lock" data-title-position="bottom" title="'+ZPI18N.getString("zp.files.operations.confidential")+'"></i>'),row+="<span>"+ZSEC.Encoder.encodeForHTML(fileName)+"</span>",row+="</div></td>",row+='<td class="zpl_cpd">'+FilesOperations.Acknowledgement.acknowledgementStatus("Operations",data)+"</td>",!isModuleShareToHide)if(data.fileOwnerName)row+='<td><div class="zpl_tg"><span>'+ZSEC.Encoder.encodeForHTML(data.fileOwnerName)+"</span></div></td>";else if(data.fileRoleName)if(data.fileRoleNameNew.length>1){row+="<td>";var tempRoleArr=ZSEC.Encoder.encodeForHTML(data.fileRoleNameNew);row+='<div class="zpl_tg"><span>'+tempRoleArr[0]+"</span></div>",data.moreRole=tempRoleArr.slice(1,tempRoleArr.length);var shareId="sharedTo_"+fileId+parentContainer+"_"+viewType;data.fileRoleNameNew.length>9?row+='<div id="'+shareId+'" onclick="FilesOperations.Util.showSharedToList(\''+rowId+'\');" class="zpl_tg" tabindex="0" role="button" aria-haspopup="true" aria-expanded="false"><span>9+</span></div>':row+='<div id="'+shareId+'" onclick="FilesOperations.Util.showSharedToList(\''+rowId+'\');" class="zpl_tg" tabindex="0" role="button" aria-haspopup="true" aria-expanded="false"><span>+'+(data.fileRoleNameNew.length-1)+"</span></div>",row+="</td>"}else row+='<td><div class="zpl_tg"><span>'+tempRoleArr+"</span></div></td>";if(isListView&&(data.fileCatNameNew.length>1?(row+="<td>",row+='<div class="zpl_tg"><span>'+ZSEC.Encoder.encodeForHTML(data.fileCatNameNew).toString().split(",")[0]+"</span></div>",data.fileCatNameNew.length>9?row+='<div id="folderTo_'+fileId+parentContainer+'" onclick="FilesOperations.Util.showSharedFolderList(\''+rowId+'\');" class="zpl_tg"><span>9+</span></div>':row+='<div id="folderTo_'+fileId+parentContainer+'" onclick="FilesOperations.Util.showSharedFolderList(\''+rowId+'\');" class="zpl_tg"><span>+'+(data.fileCatNameNew.length-1)+"</span></div>",row+="</td>"):row+='<td><div class="zpl_tg"><span>'+ZSEC.Encoder.encodeForHTML(data.fileCatName)+"</span></div></td>"),row+="<td><span>"+data.fileModifiedDate+"</span></td>",row+='<td><div class="text-center">',row+=' <div class="zpl_hvr">',(-1!=FilesUtil.loginUserRoleCheck&&void 0==data.fileRoleName||0===data.fileConfident&&void 0!==data.fileOwnerName&&data.fileOwnerID===erecno||void 0!==data.fileRoleName&&(0===data.fileConfident||0==FilesUtil.loginUserRoleCheck||1==FilesUtil.loginUserRoleCheck)||void 0!==FilesUtil.isreportingTo&&!0===FilesUtil.isreportingTo&&1===data.isreportingTo)&&-1==data.filePath.indexOf(workDriveUrl)&&-1==data.filePath.indexOf(writerUrl)&&-1==data.filePath.indexOf(sheetUrl)&&-1==data.filePath.indexOf(showUrl)&&"1"!=data.UploadSource&&(row+='<i class="PI_downld" data-title-position="bottom" title="'+ZPI18N.getString("zp.Download")+'" onclick="FilesOperations.DownloadPrint.downloadFile(\''+fileId+'\');" name="deleteElm" role="button" aria-label="'+ZPI18N.getString("zp.Download")+'" tabindex="0"></i>'),!isFromModulePage&&-1!==FilesUtil.loginUserRoleCheck){var moreActionData=FilesOperations.Util.getMoreActionList(JSON.stringify(data));if(moreActionData.length>0)row+='<i id="'+("moreAction_"+data.fileID+parentContainer+"_"+viewType)+'" onclick="FilesOperations.Util.showActions(this, \''+rowId+'\');" type="button" class="PI_more zpl_drpdwn-js" data-title-position="bottom" title="'+ZPI18N.getString("zp.files.operations.moreactions")+'" role="button" aria-label="'+ZPI18N.getString("zp.files.operations.moreactions")+'" tabindex="0"></i>',data.actionsList=moreActionData}row+="</div></div></td>",row+="</tr>",(row=$(row)).data("ldata",data),pageId.append(row)}}if((FilesUtil.Page.isListView()&&0==pageElement[0]&&0==pageElement[1]||settingsUrlProps.url.indexOf("-catId")>-1&&0==pageElement[7]&&0==pageElement[8])&&parseObj.length<=0?0==subFolderCount?FilesOperations.DataPage.showNoData():subFolderCount>0&&(settingsUrlProps.url.indexOf("-catId")>-1&&pageId.closest(".zpl_secn").addClass("zpl_DNI"),FilesOperations.DataPage.hideFileDataTable_subFolderView()):FilesOperations.DataPage.showDataTable(pageId),FilesUtil.Page.isListView()?0==pageElement[0]?pageElement[0]=25:pageElement[0]=pageElement[0]+24:0==pageElement[7]?pageElement[7]=25:pageElement[7]=pageElement[7]+24,FilesUtil.Page.isListView()&&!0===pageElement[1]||settingsUrlProps.url.indexOf("-catId")>-1&&!0===pageElement[8]){var scrlObj=FilesOperations.Page.getFirescrollId();settingsPage.fireScrollObj[scrlObj].reset()}}},FilesOperations.EmpFiles.componentInit={initHeader:function(){var moreMenuId="",moreMenuForElement="";settingsUrlProps.niceUrl.indexOf("/files/all")>-1&&(moreMenuId="empFiles_importExport_all",moreMenuForElement="impExpCont_all",FilesOperations.MoreOption.showMoreMenu(moreMenuId,moreMenuForElement,FilesOperations.MoreOption.getMenuObject(moreMenuId),FilesOperations.MoreOption.getViewActionsList(moreMenuId),!1))},fileViewDD:function(id){var parentContainer=FilesUtil.Page.getParentContainer();if(parentContainer==FilesUtil.Page.pageIdMap.ALL||parentContainer==FilesUtil.Page.pageIdMap_mod.SUB){var format=[];parentContainer==FilesUtil.Page.pageIdMap.ALL?(format.push({name:ZPI18N.getString("zp.files.operations.actempview"),value:"0",id:"0"}),format.push({name:ZPI18N.getString("zp.files.operations.inactempview"),value:"5",id:"5"}),format.push({name:ZPI18N.getString("zp.files.operations.disempview"),value:"8",id:"8"}),format.push({name:ZPI18N.getString("zp.role"),value:"3",id:"3"})):parentContainer==FilesUtil.Page.pageIdMap_mod.SUB&&null!==FilesUtil.hasAllReporteePerm&&void 0!==FilesUtil.hasAllReporteePerm&&!0===FilesUtil.hasAllReporteePerm&&(format.push({name:ZPI18N.getString("zp.files.operations.allrep"),value:"7",id:"7"}),format.push({name:ZPI18N.getString("zp.files.operations.directrep"),value:"6",id:"6"}));var tokenObj={};tokenObj.options=format,tokenObj.contentType="text",tokenObj.dataMapping={label:"name",informativeText:"name",value:"id"},tokenObj.change=FilesOperations.EmpFiles.componentInit.fileViewChangeCallback,tokenObj.dropdownList={fitForElement:!0,moveOnScroll:!0},ZPeopleComponents.select(settingsPage.container.find("#"+id),tokenObj)}},fileViewChangeCallback:function(){FilesOperations.EmpFiles.Filter.toggleViewBasedFilter(),FilesOperations.EmpFiles.EmpSearch.toggleSearchField()},initDropdown:function(id){if(!ZPeopleComponents.isComponent("#"+id)){var data=[];if(id.indexOf("filterEmpFile_Location")>-1?data=FilesUtil.getLocationList():id.indexOf("filterEmpFile_Role")>-1||"addEmpFile_Role"===id?data=FilesUtil.getRoleList():id.indexOf("filterEmpFile_Department")>-1?data=FilesUtil.getDepartmentList():"imp_fileFormat_first"!==id&&"imp_fileFormat_second"!==id&&"imp_fileFormat_third"!==id||(data=FilesOperations.EmpFiles.Import.showFileFormatOpt(id)),"addEmpFile_Role"===id){(tokenObj={}).data=data,tokenObj.dataMapping={text:"name",informativeText:"name",titleText:"name",value:"id",id:"id"},tokenObj.placeholder=ZPI18N.getString("zp.selectroles"),tokenObj.isLabelHTMLEncoded=!0,tokenObj.dropdownList={fitForElement:!0,moveOnScroll:!0,isTextHTMLEncoded:!0},tokenObj.search={by:["name"],highlightKeyword:!0,retainKeyword:!1},0==settingsPage.container.find("#"+id).length?ZPeopleComponents.tokenfield($("#"+id),tokenObj):ZPeopleComponents.tokenfield(settingsPage.container.find("#"+id),tokenObj)}else{var tokenObj={};"addEmpFile_Employee"===id||"imp_addEmpFile_Employee"===id?(tokenObj.placeholder=ZPI18N.getString("zp.select"),tokenObj.contentType="image-text",tokenObj.dataMapping={label:"name",informativeText:"name",value:"id",image:"EmpPhoto"},tokenObj.isLabelHTMLEncoded=!1,tokenObj.dropdownList={fitForElement:!0,moveOnScroll:!0,isTextHTMLEncoded:!1},tokenObj.search={by:["name"],highlightKeyword:!0,delay:250},tokenObj.serverSearch=!0,tokenObj.lazyLoading=!0,tokenObj.messages={noResults:ZPI18N.getString("zp.nomatchesfound")},tokenObj.viewPerPage=50,tokenObj.dataSource={search:function(params){return new Promise(function(search,reject){var startIndex=params.pages>1?50*Number(params.pages-1):0,empArr=FilesOperations.EmpFiles.AddEdit.getEmpList(startIndex,params.pages,params.query),moreData=!0;(2!=params.pages&&empArr.length<50||2==params.pages&&empArr.length<49)&&(moreData=!1),respObj={results:empArr,more:moreData},search(respObj)})},paginated:!0}):"imp_fileFormat_first"==id||"imp_fileFormat_second"==id||"imp_fileFormat_third"==id?(tokenObj.options=data,tokenObj.selectedValue="-1",tokenObj.placeholder=ZPI18N.getString("zp.select"),tokenObj.contentType="text",tokenObj.optionclick=FilesOperations.EmpFiles.Import.dispFormat,tokenObj.isLabelHTMLEncoded=!0,tokenObj.dropdownList={fitForElement:!0,moveOnScroll:!0,isTextHTMLEncoded:!0},"imp_fileFormat_second"==id||"imp_fileFormat_third"==id?(tokenObj.dataMapping={label:"name",informativeText:"name",value:"id",optgroupLabel:"format"},"imp_fileFormat_second"===id&&(tokenObj.change=FilesOperations.EmpFiles.Import.hidePlusIcon)):tokenObj.dataMapping={label:"name",informativeText:"name",value:"id"}):(tokenObj.options=data,tokenObj.selectedValue="-1",tokenObj.placeholder=ZPI18N.getString("zp.select"),tokenObj.contentType="text",tokenObj.isLabelHTMLEncoded=!0,tokenObj.dataMapping={label:"name",informativeText:"name",value:"id"},tokenObj.dropdownList={fitForElement:!0,moveOnScroll:!0,isTextHTMLEncoded:!0}),0==settingsPage.container.find("#"+id).length?ZPeopleComponents.select($("#"+id),tokenObj):ZPeopleComponents.select(settingsPage.container.find("#"+id),tokenObj)}}},toggleViewDownloadOptions:function(id,flag){if((FilesUtil.componentInit.toggleCheckBox(id,flag),null!=id&&id.indexOf("toView")>-1)&&!(isChecked=$("#"+id).prop("checked"))){var downloadId=id.replace("toView","toDwnd");$("#"+downloadId).prop("checked",!1)}if(null!=id&&id.indexOf("toDwnd")>-1){var isChecked=$("#"+id).prop("checked"),viewId=id.replace("toDwnd","toView");isChecked&&$("#"+viewId).prop("checked",!0)}}},FilesOperations.EmpFiles.Modal={uploadMode:"",ADD_MODAL:null,IMP_MODAL:null,addPopup:function(){if(""==$("#"+FilesOperations.EmpFiles.AddEdit.cardId).html().trim()){var popup="";popup+='<div class="zpl_crd"><div class="zpl_crdhdr"><div><h4>'+ZPI18N.getString("zp.esign.uploadfile")+"</h4><p>"+ZPI18N.getString("zp.files.operations.empfileinfo")+'</p></div></div><div class="zpl_crdcnt"><div id="empFile_uploadFileDiv" class="zpl_secn"><div><div class="zpl_upld"><div class="zpl_fldrp"><h5><div class="zpl_flupld_img"></div><a id="addEmpFile_localUpload" class="zpl_lnk" onclick="FileUpload.onSelect(this)"><i class="PI_case"></i>'+ZPI18N.getString("zp.files.desktop")+'</a> / <a class="zpl_lnk" onclick="FileUpload.WorkDrive.showModal();"><i class="PI_cloud"></i>'+ZPI18N.getString("zp.workdrive")+'</a> / <a class="zpl_lnk" onclick="FileUpload.CloudPicker.showModal();"><i class="PI_cloud"></i>'+ZPI18N.getString("zp.others")+"</a></h5></div><p><span>"+ZPI18N.getString("zp.files.operations.uploadfileinfo",new Array(maxFileSize_filesModule))+'</span></p></div></div></div><div class="zpl_secn zpl_DNI"><div><h5>'+ZPI18N.getString("zp.files.operations.attachedfiles")+'</h5></div><div id="empfile_uploaded"></div></div><div class="zpl_secn"><div><h6 class="zpl_mtry">'+ZPI18N.getString("zp.files.operations.filename")+'</h6></div><div><input id="addEmpFile_fileName" type="text" placeholder="'+ZPI18N.getString("zp.files.operations.givefilename")+'" class="ztextbox"></div></div><div class="zpl_secn"><div><h6>'+ZPI18N.getString("zp.files.operations.filter.fileview")+'</h6></div><div><div class="zradiobutton zradiobutton--horizontal"><input id="input_empBased" type="radio" name="empBasedType" class="zradiobutton__helper"><label onclick="FilesOperations.EmpFiles.AddEdit.toggleFileType(1);" class="zradiobutton__label"><span class="zradiobutton__text">'+ZPI18N.getString("zp.files.operations.actempview")+'</span></label></div><div class="zradiobutton zradiobutton--horizontal"><input id="input_roleBased" type="radio" name="empBasedType" class="zradiobutton__helper"><label onclick="FilesOperations.EmpFiles.AddEdit.toggleFileType(2);" class="zradiobutton__label"><span class="zradiobutton__text">'+ZPI18N.getString("zp.role")+'</span></label></div></div></div><div id="empFileType" class="zpl_secn"><div><h6 class="zpl_mtry">'+ZPI18N.getString("zp.employee")+'</h6></div><div><select id="addEmpFile_Employee" data-show-search-field="true"></select></div></div><div id="roleFileType" class="zpl_secn zpl_DNI"><div><h6 class="zpl_mtry">'+ZPI18N.getString("zp.role")+'</h6></div><div><select id="addEmpFile_Role" data-show-search-field="true"></select></div></div><div class="zpl_secn"><div><h6>'+ZPI18N.getString("zp.description")+'</h6></div><div><textarea id="addEmpFile_fileDesc" class="ztextbox" rows="3"></textarea></div></div><div class="zpl_secn"><div><h6 class="zpl_mtry">'+ZPI18N.getString("zp.folder")+'</h6></div><div><select id="addEmpFile_Folder" data-show-search-field="true"></select></div><div class="zpl_idiv zpl_erorbx zpl_DNI"><div><input id="addEmpFile_newCatName" placeholder="'+ZPI18N.getString("zp.enterCategory")+'" type="text" class="ztextbox w300"></div><div><div onclick="FilesUtil.componentInit.cancelFolderNameBox(\'addEmpFile\');" class="zlabel zlabel--red zlabel--outline zlabel--small">'+ZPI18N.getString("zp.cancel")+'</div></div></div></div></div></div></div></div><div class="zpl_crd"><div class="zpl_crdhdr"><div><h4>'+ZPI18N.getString("zp.acknowledge")+"</h4><p>"+ZPI18N.getString("zp.files.operations.acknote")+'</p></div></div><div class="zpl_crdcnt"><div class="zpl_secn"><div class="chkdectxt"><div class="zcheckbox"><input id="addEmpFile_notMandAck" type="checkbox" name="checkBoxAck" class="zcheckbox__helper"><label onclick="FilesOperations.Util.toggleMandatoryAckCheckBox(1, 2);" for="fldayo1n" class="zcheckbox__label">'+ZPI18N.getString("zp.files.operations.ackdeadline1")+'</label></div></div></div><div class="zpl_secn"><div class="chkdectxt"><div class="zcheckbox"><input id="addEmpFile_mandAck" type="checkbox" name="checkBoxAck" class="zcheckbox__helper"><label onclick="FilesOperations.Util.toggleMandatoryAckCheckBox(2, 2);" for="fldayo1n" class="zcheckbox__label">'+ZPI18N.getString("zp.files.operations.ackdeadline2")+'</label></div><div class="zpl_gbox zpl_mw-90"><div><input id="addEmpFile_ackDeadLine" data-format="'+dateFmt+'" data-picker="true" data-calendar-icon="true" data-spin-buttons="none"></div><p class="zpl_info"><em>'+ZPI18N.getString("zp.files.operations.mandacknote")+'</em></p></div></div></div></div></div><div class="zpl_crd"><div class="zpl_crdhdr"><div><h4>'+ZPI18N.getString("zp.files.operations.fileperm")+'</h4></div></div><div id="empTypeDwnld" class="zpl_crdcnt"><div class="zpl_secn"><div><h6>'+ZPI18N.getString("zp.files.operations.viewfile")+'<h6></div><div><div class="zcheckbox zcheckbox--horizontal"><input id="addEmpFile_toView_emp" type="checkbox" name="check" value="" class="zcheckbox__helper"><label onclick="FilesOperations.EmpFiles.componentInit.toggleViewDownloadOptions(\'addEmpFile_toView_emp\', false);" class="zcheckbox__label">'+ZPI18N.getString("zp.employee")+'</label></div><div class="zcheckbox zcheckbox--horizontal"><input id="addEmpFile_toView_rm" type="checkbox" name="check" value="" class="zcheckbox__helper"><label onclick="FilesOperations.EmpFiles.componentInit.toggleViewDownloadOptions(\'addEmpFile_toView_rm\', false);" class="zcheckbox__label">'+ZPI18N.getString("zp.srepman")+'</label></div></div></div><div class="zpl_secn"><div><h6>'+ZPI18N.getString("zp.files.operations.downloadfile")+'<h6></div><div><div class="zcheckbox zcheckbox--horizontal"><input id="addEmpFile_toDwnd_emp" type="checkbox" name="check" value="" class="zcheckbox__helper"><label onclick="FilesOperations.EmpFiles.componentInit.toggleViewDownloadOptions(\'addEmpFile_toDwnd_emp\', false);" class="zcheckbox__label">'+ZPI18N.getString("zp.employee")+'</label></div><div class="zcheckbox zcheckbox--horizontal"><input id="addEmpFile_toDwnd_rm" type="checkbox" name="check" value="" class="zcheckbox__helper"><label onclick="FilesOperations.EmpFiles.componentInit.toggleViewDownloadOptions(\'addEmpFile_toDwnd_rm\', false);" class="zcheckbox__label">'+ZPI18N.getString("zp.srepman")+'</label></div></div></div></div><div id="roleTypeDwnld" class="zpl_crdcnt zpl_DNI"><div class="zpl_secn"><div><h6>'+ZPI18N.getString("zp.files.operations.downloadfile")+'<h6></div><div><div class="zcheckbox zcheckbox--horizontal"><input id="addEmpFile_role_download" type="checkbox" name="check" value="" class="zcheckbox__helper"><label onclick="FilesUtil.componentInit.toggleCheckBox(\'addEmpFile_role_download\', false);" class="zcheckbox__label">'+ZPI18N.getString("zp.employee")+'</label></div></div></div></div></div><div class="zpl_crd"><div class="zpl_crdhdr"><div><h4>'+ZPI18N.getString("zp.notifications")+"</h4><p>"+ZPI18N.getString("zp.files.operations.notifyinfo")+'</p></div></div><div class="zpl_crdcnt"><div class="zpl_secn"><div><h6>'+ZPI18N.getString("zp.notifythrough",new Array(""))+'</h6></div><div><div class="zcheckbox zcheckbox--horizontal"><input id="addEmpFile_feeds" type="checkbox" name="check" value="" class="zcheckbox__helper"><label onclick="FilesUtil.componentInit.toggleCheckBox(\'addEmpFile_feeds\', false);" class="zcheckbox__label">'+ZPI18N.getString("zp.feeds")+'</label></div><div class="zcheckbox zcheckbox--horizontal"><input id="addEmpFile_mail" type="checkbox" name="check" value="" class="zcheckbox__helper"><label onclick="FilesUtil.componentInit.toggleCheckBox(\'addEmpFile_mail\', false);" class="zcheckbox__label">'+ZPI18N.getString("zp.mail")+"</label></div></div></div></div></div>",$("#"+FilesOperations.EmpFiles.AddEdit.cardId).html(popup)}},importPopup:function(){if(""==$("#"+FilesOperations.EmpFiles.Import.cardId).html().trim()){var popup="";popup+='<div class="zpl_crdScrl"><div class="zpl_crd"><div class="zpl_crdhdr"><div><h4>'+ZPI18N.getString("zp.esign.uploadfile")+"</h4><p>"+ZPI18N.getString("zp.files.operations.empfileimpinfo")+'</p></div></div><div class="zpl_crdcnt"><div id="imp_empFile_uploadFileDiv" class="zpl_secn"><div><div class="zpl_upld"><div class="zpl_fldrp"><h5><div class="zpl_flupld_img"></div><a id="imp_addEmpFile_localUpload" class="zpl_lnk" onclick="FileUpload.onSelect(this)"><i class="PI_case"></i>'+ZPI18N.getString("zp.files.desktop")+"</a></h5></div><p><span>"+ZPI18N.getString("zp.files.operations.impuploadfileinfo",new Array(maxFileSizeForImport))+'</span></p></div></div></div><div class="zpl_secn zpl_DNI"><div><h5>'+ZPI18N.getString("zp.files.operations.attachedfiles")+'</h5></div><div id="imp_empfile_uploaded"></div></div><div class="zpl_secn"><div><h6 class="zpl_mtry">'+ZPI18N.getString("zp.files.importfor",new Array(""))+'</h6></div><div class="MT20"><div class="zradiobutton zradiobutton--horizontal"><input id="input_manyEmp" type="radio" name="impType" class="zradiobutton__helper"><label onclick="FilesOperations.EmpFiles.Import.toggleOption(1);" class="zradiobutton__label"><span class="zradiobutton__text">'+ZPI18N.getString("zp.files.operations.multiemp")+'</span></label></div><div class="zradiobutton zradiobutton--horizontal"><input id="input_specEmp" type="radio" name="impType" class="zradiobutton__helper"><label onclick="FilesOperations.EmpFiles.Import.toggleOption(2);" class="zradiobutton__label"><span class="zradiobutton__text">'+ZPI18N.getString("zp.files.operations.indiemp")+'</span></label></div></div><div class="zpl_info"><div><em id="manyEmpNote">'+ZPI18N.getString("zp.files.operations.importnote5")+'</em><em id="specEmpNote" class="zpl_DNI">'+ZPI18N.getString("zp.files.importnote6",new Array(ZSEC.Encoder.encodeForHTML(FilesUtil.hrfiledisname)))+'</em></div></div></div><div id="manyEmpFileType" class="zpl_secn"><div><h6 class="zpl_mtry">'+ZPI18N.getString("zp.files.chooseformat")+'</h6></div><div class="zpl_gbox d-flex"><div id="formatWpr" class="zpl_idiv"><div id="imp_fileFormat_first_Wpr"><select id="imp_fileFormat_first" data-show-search-field="true" value=""></select></div><div id ="imp_FieldIcon_first" class="_addbtn"><i class="PI_plus2 grn" onclick="FilesOperations.EmpFiles.Import.showAddRmvIcons(this);"></i></div><div id="imp_fileFormat_second_Wpr" class="zpl_DNI"><select id="imp_fileFormat_second" data-show-search-field="true" value=""></select></div><div id="imp_FieldIcon_second" class="_addbtn zpl_DNI"><i class="PI_minus2 red" onclick="FilesOperations.EmpFiles.Import.showAddRmvIcons(this);"></i><i class="PI_plus2 grn" onclick="FilesOperations.EmpFiles.Import.showAddRmvIcons(this);"></i></div><div id="imp_fileFormat_third_Wpr" class="zpl_DNI"><select id="imp_fileFormat_third" data-show-search-field="true" value=""></select></div><div id="imp_FieldIcon_third" class="_addbtn zpl_DNI"><i class="PI_minus2 red" onclick="FilesOperations.EmpFiles.Import.showAddRmvIcons(this);"></i></div></div><div class="zpl_idiv"><b>'+ZPI18N.getString("zp.files.example")+'</b> &nbsp;<small id="sampleFormat"></small></div></div></div><div id="specEmpFileType" class="zpl_secn zpl_DNI"><div><h6 class="zpl_mtry">'+ZPI18N.getString("zp.employee")+'</h6></div><div><select id="imp_addEmpFile_Employee" data-show-search-field="true"></select></div></div><div class="zpl_secn"><div><h6>'+ZPI18N.getString("zp.description")+'</h6></div><div><textarea id="imp_addEmpFile_fileDesc" class="ztextbox" rows="3"></textarea></div></div><div class="zpl_secn"><div class="radiodectxt"><div class="zradiobutton"><input id="withoutFolder" type="radio" name="folderType" checked="" class="zradiobutton__helper"><label onclick="FilesOperations.EmpFiles.Import.toggleOption(3);" class="zradiobutton__label">'+ZPI18N.getString("zp.impwithoutfolder")+'</label></div><span class="dectxt">'+ZPI18N.getString("zp.files.operations.importnote4")+'</span></div></div><div class="zpl_secn"><div class="radiodectxt"><div class="zradiobutton"><input id="withFolder" type="radio" name="folderType" class="zradiobutton__helper"><label onclick="FilesOperations.EmpFiles.Import.toggleOption(4);" class="zradiobutton__label">'+ZPI18N.getString("zp.impwithfolder")+'</label></div><span class="dectxt">'+ZPI18N.getString("zp.files.operations.importnote3")+'</span></div></div><div id="imp_FolderDD_Wpr" class="zpl_secn"><div><h6 class="zpl_mtry">'+ZPI18N.getString("zp.folder")+'</h6></div><div><select id="imp_addEmpFile_Folder" data-show-search-field="true"></select></div><div class="zpl_idiv  zpl_erorbx zpl_DNI"><div><input id="imp_addEmpFile_newCatName" placeholder="'+ZPI18N.getString("zp.enterCategory")+'" type="text" class="ztextbox w300"></div><div><div onclick="FilesUtil.componentInit.cancelFolderNameBox(\'imp_addEmpFile\');" class="zlabel zlabel--red zlabel--outline zlabel--small">'+ZPI18N.getString("zp.cancel")+'</div></div></div></div></div></div></div><div class="zpl_crd"><div class="zpl_crdhdr"><div><h4>'+ZPI18N.getString("zp.acknowledge")+"</h4><p>"+ZPI18N.getString("zp.files.operations.acknote")+'</p></div></div><div class="zpl_crdcnt"><div class="zpl_secn"><div class="chkdectxt"><div class="zcheckbox"><input id="imp_addEmpFile_notMandAck" type="checkbox" name="checkBoxAck" class="zcheckbox__helper"><label onclick="FilesOperations.Util.toggleMandatoryAckCheckBox(1, 3);" for="fldayo1n" class="zcheckbox__label">'+ZPI18N.getString("zp.files.operations.ackdeadline1")+'</label></div></div></div><div class="zpl_secn"><div class="chkdectxt"><div class="zcheckbox"><input id="imp_addEmpFile_mandAck" type="checkbox" name="checkBoxAck" class="zcheckbox__helper"><label onclick="FilesOperations.Util.toggleMandatoryAckCheckBox(2, 3);" for="fldayo1n" class="zcheckbox__label">'+ZPI18N.getString("zp.files.operations.ackdeadline2")+'</label></div><div class="zpl_gbox zpl_mw-90"><div><input id="imp_addEmpFile_ackDeadLine" data-format="'+dateFmt+'" data-picker="true" data-calendar-icon="true" data-spin-buttons="none"></div><p class="zpl_info"><em>'+ZPI18N.getString("zp.files.operations.mandacknote")+'</em></p></div></div></div></div></div><div class="zpl_crd"><div class="zpl_crdhdr"><div><h4>'+ZPI18N.getString("zp.files.operations.fileperm")+'</h4></div></div><div id="empTypeDwnld" class="zpl_crdcnt"><div class="zpl_secn"><div><h6>'+ZPI18N.getString("zp.files.operations.viewfile")+'<h6></div><div><div class="zcheckbox zcheckbox--horizontal"><input id="imp_addEmpFile_toView_emp" type="checkbox" name="check" value="" class="zcheckbox__helper"><label onclick="FilesOperations.EmpFiles.componentInit.toggleViewDownloadOptions(\'imp_addEmpFile_toView_emp\', false);" class="zcheckbox__label">'+ZPI18N.getString("zp.employee")+'</label></div><div class="zcheckbox zcheckbox--horizontal"><input id="imp_addEmpFile_toView_rm" type="checkbox" name="check" value="" class="zcheckbox__helper"><label onclick="FilesOperations.EmpFiles.componentInit.toggleViewDownloadOptions(\'imp_addEmpFile_toView_rm\', false);" class="zcheckbox__label">'+ZPI18N.getString("zp.srepman")+'</label></div></div></div><div class="zpl_secn"><div><h6>'+ZPI18N.getString("zp.files.operations.downloadfile")+'<h6></div><div><div class="zcheckbox zcheckbox--horizontal"><input id="imp_addEmpFile_toDwnd_emp" type="checkbox" name="check" value="" class="zcheckbox__helper"><label onclick="FilesOperations.EmpFiles.componentInit.toggleViewDownloadOptions(\'imp_addEmpFile_toDwnd_emp\', false);" class="zcheckbox__label">'+ZPI18N.getString("zp.employee")+'</label></div><div class="zcheckbox zcheckbox--horizontal"><input id="imp_addEmpFile_toDwnd_rm" type="checkbox" name="check" value="" class="zcheckbox__helper"><label onclick="FilesOperations.EmpFiles.componentInit.toggleViewDownloadOptions(\'imp_addEmpFile_toDwnd_rm\', false);" class="zcheckbox__label">'+ZPI18N.getString("zp.srepman")+'</label></div></div></div></div></div><div class="zpl_crd"><div class="zpl_crdhdr"><div><h4>'+ZPI18N.getString("zp.notifications")+"</h4><p>"+ZPI18N.getString("zp.files.operations.notifyinfo")+'</p></div></div><div class="zpl_crdcnt"><div class="zpl_secn"><div><h6>'+ZPI18N.getString("zp.notifythrough",new Array(""))+'<h6></div><div class="MT20"><div class="zcheckbox zcheckbox--horizontal"><input id="imp_addEmpFile_feeds" type="checkbox" name="check" value="" class="zcheckbox__helper"><label onclick="FilesUtil.componentInit.toggleCheckBox(\'imp_addEmpFile_feeds\', false);" class="zcheckbox__label">'+ZPI18N.getString("zp.feeds")+'</label></div><div class="zcheckbox zcheckbox--horizontal"><input id="imp_addEmpFile_mail" type="checkbox" name="check" value="" class="zcheckbox__helper"><label onclick="FilesUtil.componentInit.toggleCheckBox(\'imp_addEmpFile_mail\', false);" class="zcheckbox__label">'+ZPI18N.getString("zp.mail")+"</label></div></div></div></div></div></div>",$("#"+FilesOperations.EmpFiles.Import.cardId).html(popup)}},filter:function(){var parentContainer=FilesUtil.Page.getParentContainer(),isFromModulePage=FilesUtil.Page.isModulePage(),html="";html+='<div><div class="zpl_fltrhd"><h5>'+ZPI18N.getString("zp.filter")+'</h5><i class="PI_cls" onclick="FilesOperations.EmpFiles.Filter.showHide();"></i></div></div><div class="zpl_fltrcnt"><div><div class="zpl_fltclps fltopn"><div class="zpl_fltrlst"><div class="zpl_secn"><div><label>'+ZPI18N.getString("zp.files.operations.filename")+'</label></div><div><input id="filterEmpFile_name'+parentContainer+'" type="text" class="ztextbox" placeholder="'+ZPI18N.getString("zp.files.operations.filter.filenameinfo")+'"></div></div>',isFromModulePage||(html+='<div class="zpl_secn"><div><label>'+ZPI18N.getString("zp.filesextn")+'</label></div><div><select id="filterEmpFile_format'+parentContainer+'" data-show-search-field="true"></select></div></div><div class="zpl_secn"><div><label>'+ZPI18N.getString("zp.folder")+'</label></div><div><select id="filterEmpFile_Folder'+parentContainer+'" data-show-search-field="true"></select></div></div>'),(parentContainer===FilesUtil.Page.pageIdMap.ALL||parentContainer===FilesUtil.Page.pageIdMap_mod.SUB&&null!==FilesUtil.hasAllReporteePerm&&void 0!==FilesUtil.hasAllReporteePerm&&!0===FilesUtil.hasAllReporteePerm)&&(html+='<div class="zpl_secn"><div><label>'+ZPI18N.getString("zp.files.operations.filter.fileview")+'</label></div><div><select id="filterEmpFile_view'+parentContainer+'" data-show-search-field="true"></select></div></div>'),parentContainer===FilesUtil.Page.pageIdMap.ALL?html+='<div id="empSearchFilterWpr" class="zpl_secn"><div><label>'+ZPI18N.getString("zp.employee")+'<label></div><div class="zpl_DNI"><select id="'+FilesOperations.EmpFiles.EmpSearch.actEmpSearchObj[0]+'" data-show-search-field="true"></select></div><div class="zpl_DNI M0I" style="margin-top: 5px !important;"><select id="'+FilesOperations.EmpFiles.EmpSearch.inactEmpSearchObj[0]+'" data-show-search-field="true"></select></div><div class="zpl_DNI M0I" style="margin-top: 5px !important;"><select id="'+FilesOperations.EmpFiles.EmpSearch.logDisEmpSearchObj[0]+'" data-show-search-field="true"></select></div></div>':parentContainer===FilesUtil.Page.pageIdMap_mod.SUB&&(html+='<div id="empSearchFilterWpr" class="zpl_secn"><div><label>'+ZPI18N.getString("zp.employee")+'<label></div><div class="zpl_DNI"><select id="'+FilesOperations.EmpFiles.EmpSearch.subEmpSearchObj[0]+'" data-show-search-field="true"></select></div>',null!==FilesUtil.hasAllReporteePerm&&void 0!==FilesUtil.hasAllReporteePerm&&!0===FilesUtil.hasAllReporteePerm&&(html+='<div class="zpl_DNI M0I" style="margin-top: 5px !important;"><select id="'+FilesOperations.EmpFiles.EmpSearch.allsubEmpSearchObj[0]+'"" data-show-search-field="true"></select></div>'),html+="</div>"),parentContainer===FilesUtil.Page.pageIdMap.ALL&&(FilesUtil.isOrgStructureEnabled&&null!=ZPeople.orgStructureTagMap&&(!0===ZPeople.orgStructureTagMap.entity&&(html+='<div class="zpl_secn" id="entityFilter"><div><label>'+ZSEC.Encoder.encodeForHTML(ZPeople.orgStructureDispNameMap.entity)+'</label></div><div><select class="zselectbox select-js" data-show-search-field="true" name="entity" id="filterEmpFile_Entity'+parentContainer+'"></select></div></div>'),!0===ZPeople.orgStructureTagMap.unit&&(html+='<div class="zpl_secn" id="unitFilter"><div><label>'+ZSEC.Encoder.encodeForHTML(ZPeople.orgStructureDispNameMap.unit)+'</label></div><div><select class="zselectbox select-js" data-show-search-field="true" name="unit" id="filterEmpFile_Unit'+parentContainer+'"></select></div></div>'),!0===ZPeople.orgStructureTagMap.division&&(html+='<div class="zpl_secn" id="divisionFilter"><div><label>'+ZSEC.Encoder.encodeForHTML(ZPeople.orgStructureDispNameMap.division)+'</label></div><div><select class="zselectbox select-js" data-show-search-field="true" name="division" id="filterEmpFile_Division'+parentContainer+'"></select></div></div>')),html+='<div class="zpl_secn" id="departmentFilter"><div><label>'+ZSEC.Encoder.encodeForHTML(ZPeople.orgStructureDispNameMap.department)+'</label></div><div><select class="zselectbox select-js" data-show-search-field="true" name="department" id="filterEmpFile_Department'+parentContainer+'"></select></div></div><div id="locationFilter" class="zpl_secn"><div><label>'+ZPI18N.getString("zp.location")+'</label></div><div><select id="filterEmpFile_Location'+parentContainer+'" data-show-search-field="true"></select></div></div>'),0!==FilesUtil.loginUserRoleCheck&&1!==FilesUtil.loginUserRoleCheck||parentContainer!==FilesUtil.Page.pageIdMap.ALL||(html+='<div id="roleViewfilter" class="zpl_secn zpl_DNI"><div><label>'+ZPI18N.getString("zp.role")+'</label></div><div><select id="filterEmpFile_Role'+parentContainer+'" data-show-search-field="true"></select></div></div>'),html+='<div class="zpl_secn"><div><label>'+ZPI18N.getString("zp.from")+'</label></div><div><input id="filterEmpFile_fromDate'+parentContainer+'" data-format="'+dateFmt+'" data-picker="true" data-calendar-icon="true" data-spin-buttons="none"></div></div><div class="zpl_secn"><div><label>'+ZPI18N.getString("zp.to")+'</label></div><div><input id="filterEmpFile_toDate'+parentContainer+'" data-format="'+dateFmt+'" data-picker="true" data-calendar-icon="true" data-spin-buttons="none"></div></div></div></div></div></div><div><button id="empFileFilter_search" onclick="FilesOperations.EmpFiles.Filter.search();" class="zlabel zlabel--blue zlabel--medium">'+ZPI18N.getString("zp.apply")+'</button><button id="empFileFilter_reset" onclick="FilesOperations.EmpFiles.Filter.reset();" class="zlabel zlabel--outline zlabel--medium">'+ZPI18N.getString("zp.reset")+"</button></div>",settingsPage.container.find("#empFile_filterModal").html(html)}},FilesOperations.EmpFiles.AddEdit={editFileId:"0",popupId:"addEmpFile",modelId:"tabaddEmpFile",cardId:"cardaddEmpFile",popupName:"",toggleFileType:function(type){"1"==type?($("#"+FilesOperations.EmpFiles.AddEdit.cardId).find("#empFileType").removeClass("zpl_DNI"),$("#"+FilesOperations.EmpFiles.AddEdit.cardId).find("#roleFileType").addClass("zpl_DNI"),$("#"+FilesOperations.EmpFiles.AddEdit.cardId).find("input#input_empBased").prop("checked",!0),$("#"+FilesOperations.EmpFiles.AddEdit.cardId).find("#empTypeDwnld").removeClass("zpl_DNI"),$("#"+FilesOperations.EmpFiles.AddEdit.cardId).find("#roleTypeDwnld").addClass("zpl_DNI")):($("#"+FilesOperations.EmpFiles.AddEdit.cardId).find("#empFileType").addClass("zpl_DNI"),$("#"+FilesOperations.EmpFiles.AddEdit.cardId).find("#roleFileType").removeClass("zpl_DNI"),FilesOperations.EmpFiles.componentInit.initDropdown("addEmpFile_Role"),$("#"+FilesOperations.EmpFiles.AddEdit.cardId).find("input#input_roleBased").prop("checked",!0),$("#"+FilesOperations.EmpFiles.AddEdit.cardId).find("#empTypeDwnld").addClass("zpl_DNI"),$("#"+FilesOperations.EmpFiles.AddEdit.cardId).find("#roleTypeDwnld").removeClass("zpl_DNI"))},getEmpList:function(start,page,searchVal){var resultData=[];if(!FilesUtil.IP.isRestricted&&!FilesUtil.Geo.isRestricted){var formData=new FormData;formData.append("conreqcsr",csrfToken),formData.append("start",start),formData.append("filesNewUI",!0),null!=searchVal&&void 0!=searchVal&&""!=searchVal&&formData.append("name",searchVal),formData=FilesUtil.Geo.setLatLongParams(formData,!0),$.ajax({url:"/zpfiles/operations/getEmpListForEmpFiles",type:"POST",data:formData,async:!1,contentType:!1,processData:!1,success:function(data){void 0!=data[1]&&(resultData=data[1],2==page&&resultData.length>0&&resultData.shift(),FilesOperations.empListData_addFiles.push(resultData))},error:function(req){return[]}})}return resultData},getSelectedRoleList:function(fileRoleIds){var selectedRoles=[],roleData=FilesUtil.getRoleList();return $.each(roleData,function(index,value){-1!=jQuery.inArray(value.id,fileRoleIds)&&selectedRoles.push(value)}),selectedRoles},show:function(mode,rowId){FilesOperations.EmpFiles.AddEdit.popupName="edit"===mode?ZSEC.Encoder.encodeForHTML(FilesUtil.edithrfiledisname):ZSEC.Encoder.encodeForHTML(FilesUtil.addhrfiledisname);var modelLen=$("#"+FilesOperations.EmpFiles.AddEdit.modelId).length;if(0==modelLen){var popupTab=new Tab(FilesOperations.EmpFiles.AddEdit.popupId,FilesOperations.EmpFiles.Modal.addPopup,FilesOperations.EmpFiles.AddEdit.update);FilesOperations.EmpFiles.Modal.ADD_MODAL=new sliderModal(FilesOperations.EmpFiles.AddEdit.popupName,popupTab)}FilesOperations.EmpFiles.Modal.ADD_MODAL.setCloseCallback(FilesOperations.EmpFiles.AddEdit.hide),FilesOperations.EmpFiles.Modal.ADD_MODAL.construct(),$(settingsPage.mainWrapId).find("#"+FilesOperations.EmpFiles.AddEdit.modelId).find("#sliderSbt").removeClass("disabled"),0!=modelLen&&$("#"+FilesOperations.EmpFiles.AddEdit.modelId).find("#sliHdrDiv").find("h4").text(FilesOperations.EmpFiles.AddEdit.popupName),$("#"+FilesOperations.EmpFiles.AddEdit.cardId).find("input#input_empBased").prop("checked",!0),FilesOperations.EmpFiles.componentInit.initDropdown("addEmpFile_Employee"),$("#addEmpFile_newCatName").val("").parent().parent().addClass("zpl_DNI"),$("#addEmpFile_Folder").parent().removeClass("zpl_DNI"),FilesUtil.componentInit.folderListDropdown("addEmpFile_Folder"),ZPeopleComponents.isComponent("#addEmpFile_ackDeadLine")||ZPeopleComponents.datefield($("#addEmpFile_ackDeadLine")).setAttributes({placeholder:dateFmt}),FilesOperations.EmpFiles.AddEdit.editFileId="0",FilesOperations.EmpFiles.AddEdit.clearFields(!1),"edit"===mode&&FilesOperations.EmpFiles.AddEdit.setFieldValues(rowId,FilesOperations.EmpFiles.AddEdit.popupId)},hide:function(){FilesOperations.EmpFiles.AddEdit.clearFields(!0),$(settingsPage.mainWrapId).find("#"+FilesOperations.EmpFiles.AddEdit.modelId).remove()},clearFields:function(isDestroy){var pageId=$("#"+FilesOperations.EmpFiles.AddEdit.cardId);if(pageId.find(".ztextbox--error__label").remove(),pageId.find(".ztextbox__error").removeClass("ztextbox__error"),FileUpload.removeFile(),pageId.find("#addEmpFile_fileName").val(""),FilesOperations.EmpFiles.AddEdit.toggleFileType(1),pageId.find("input#input_empBased").prop("checked",!0),isDestroy)ZPeopleComponents.isComponent("#addEmpFile_Employee")&&ZPeopleComponents.select(pageId.find("#addEmpFile_Employee")).destroy(),ZPeopleComponents.isComponent("#addEmpFile_Role")&&ZPeopleComponents.tokenfield(pageId.find("#addEmpFile_Role")).destroy(),ZPeopleComponents.isComponent("#addEmpFile_Folder")&&ZPeopleComponents.select(pageId.find("#addEmpFile_Folder")).destroy(),ZPeopleComponents.isComponent("#addEmpFile_ackDeadLine")&&ZPeopleComponents.datefield(pageId.find("#addEmpFile_ackDeadLine")).destroy();else{if(ZPeopleComponents.isComponent("#addEmpFile_Employee")&&ZPeopleComponents.select(pageId.find("#addEmpFile_Employee")).deselectAllOptions(),ZPeopleComponents.isComponent("#addEmpFile_Role")&&ZPeopleComponents.tokenfield(pageId.find("#addEmpFile_Role")).removeAllTokens(),ZPeopleComponents.isComponent("#addEmpFile_Folder"))if(settingsUrlProps.url.indexOf("-catId")>-1){var parentContainer=FilesUtil.Page.getParentContainer(),pageData=FilesUtil.Page.getPageData(parentContainer,"2");ZPeopleComponents.select(pageId.find("#addEmpFile_Folder")).setValue({id:Layout.Page.urlparam.catId,name:pageData[6][Layout.Page.urlparam.catId]})}else ZPeopleComponents.select(pageId.find("#addEmpFile_Folder")).deselectAllOptions(),ZPeopleComponents.select(pageId.find("#addEmpFile_Folder")).setValue({id:"-1",name:ZPI18N.getString("zp.select")});if(ZPeopleComponents.isComponent("#addEmpFile_ackDeadLine")){var dateObj=ZPeopleComponents.datefield(pageId.find("#addEmpFile_ackDeadLine")).getValue();null!=dateObj.dateString&&void 0!=dateObj.dateString&&""!=dateObj.dateString&&ZPeopleComponents.datefield(pageId.find("#addEmpFile_ackDeadLine")).clear()}}pageId.find("#addEmpFile_fileDesc").val(""),pageId.find("#addEmpFile_notMandAck").prop("checked",!1),pageId.find("#addEmpFile_mandAck").prop("checked",!1),pageId.find("#addEmpFile_toView_emp").prop("checked",!0),pageId.find("#addEmpFile_toView_rm").prop("checked",!1),pageId.find("#addEmpFile_toDwnd_emp").prop("checked",!0),pageId.find("#addEmpFile_toDwnd_rm").prop("checked",!1),pageId.find("#addEmpFile_role_download").prop("checked",!0),pageId.find("#addEmpFile_feeds").prop("checked",!1),pageId.find("#addEmpFile_mail").prop("checked",!1)},setFieldValues:function(rowId,popupId){var editData=settingsPage.container.find("#"+rowId).data().ldata,pageId=$("#"+FilesOperations.EmpFiles.AddEdit.cardId);FilesOperations.EmpFiles.AddEdit.editFileId=editData.fileID;var fileName=editData.fileName,fileExtn=FilesUtil.Page.getFileExtn(editData.fileExtn,editData.filePath,editData.UploadSource);if(FileUpload.attachFile(fileName,fileExtn),pageId.find("#addEmpFile_fileName").val(fileName),"null"!=editData.fileDesc&&void 0!=editData.fileDesc&&""!=editData.fileDesc&&pageId.find("#addEmpFile_fileDesc").val(editData.fileDesc),ZPeopleComponents.select(pageId.find("#addEmpFile_Folder")).setValue({id:editData.fileCategoryID,name:editData.fileCatName}),"null"!=editData.ackDeadLine&&void 0!=editData.ackDeadLine&&null!=editData.ackDeadLine&&0!=editData.ackDeadLine?(ZPeopleComponents.datefield(pageId.find("#addEmpFile_ackDeadLine")).setValue(editData.ackDeadLine),1===editData.fileAcknowledge&&pageId.find("#addEmpFile_mandAck").prop("checked",!0)):(ZPeopleComponents.datefield(pageId.find("#addEmpFile_ackDeadLine")).clear(),1===editData.fileAcknowledge&&pageId.find("#addEmpFile_notMandAck").prop("checked",!0)),""!=editData.fileOwnerID&&void 0!=editData.fileOwnerID){FilesOperations.EmpFiles.AddEdit.toggleFileType(1);var empObj=ZPeople.getUserDetailsById(editData.fileOwnerID),empName=empObj.empid+" - "+editData.fileOwnerName,EmpPhoto=empObj.thumb;ZPeopleComponents.select(pageId.find("#addEmpFile_Employee")).setValue({id:editData.fileOwnerID,name:empName,EmpPhoto:EmpPhoto}),1===editData.fileConfident?(pageId.find("#addEmpFile_toView_emp").prop("checked",!1),pageId.find("#addEmpFile_toDwnd_emp").prop("checked",!1)):2===editData.fileConfident?(pageId.find("#addEmpFile_toView_emp").prop("checked",!0),pageId.find("#addEmpFile_toDwnd_emp").prop("checked",!1)):(pageId.find("#addEmpFile_toView_emp").prop("checked",!0),pageId.find("#addEmpFile_toDwnd_emp").prop("checked",!0)),1===editData.isreportingTo?(pageId.find("#addEmpFile_toView_rm").prop("checked",!0),pageId.find("#addEmpFile_toDwnd_rm").prop("checked",!0)):2===editData.isreportingTo?(pageId.find("#addEmpFile_toView_rm").prop("checked",!0),pageId.find("#addEmpFile_toDwnd_rm").prop("checked",!1)):(pageId.find("#addEmpFile_toView_rm").prop("checked",!1),pageId.find("#addEmpFile_toDwnd_rm").prop("checked",!1))}else FilesOperations.EmpFiles.AddEdit.toggleFileType(2),ZPeopleComponents.tokenfield(pageId.find("#addEmpFile_Role")).setValuesById(editData.fileRoleID),1===editData.fileConfident?pageId.find("#addEmpFile_role_download").prop("checked",!1):pageId.find("#addEmpFile_role_download").prop("checked",!0)},update:function(){var errflag=!1,pageId=$("#"+FilesOperations.EmpFiles.AddEdit.cardId);pageId.find(".ztextbox--error__label").remove(),pageId.find(".ztextbox__error").removeClass("ztextbox__error");var fileforempID="-1",role="-1",confidential="0",isreportingTo="0",isacknowledge="0",fileName=pageId.find("#addEmpFile_fileName").val().trim(),fileDesc=pageId.find("#addEmpFile_fileDesc").val().trim();if(pageId.find("input#input_empBased").prop("checked"))null!=(fileforempID=ZPeopleComponents.select(pageId.find("#addEmpFile_Employee")).getValue())&&void 0!=fileforempID&&""!=fileforempID&&"-1"!==fileforempID||(ZPeopleComponents.select(pageId.find("#addEmpFile_Employee")).getElement().addClass("ztextbox__error"),pageId.find("#addEmpFile_Employee").parent().append('<span class="ztextbox--error__label">'+ZPI18N.getString("zp.files.operations.selemp")+"</span>"),errflag=!0),0==pageId.find("#addEmpFile_toView_emp").prop("checked")&&0==pageId.find("#addEmpFile_toDwnd_emp").prop("checked")?confidential="1":1==pageId.find("#addEmpFile_toView_emp").prop("checked")&&0==pageId.find("#addEmpFile_toDwnd_emp").prop("checked")&&(confidential="2"),1==pageId.find("#addEmpFile_toView_rm").prop("checked")&&1==pageId.find("#addEmpFile_toDwnd_rm").prop("checked")?isreportingTo="1":1==pageId.find("#addEmpFile_toView_rm").prop("checked")&&0==pageId.find("#addEmpFile_toDwnd_rm").prop("checked")&&(isreportingTo="2");else if(pageId.find("input#input_roleBased").prop("checked")){void 0!=(role=ZPeopleComponents.tokenfield(pageId.find("#addEmpFile_Role")).getSelectedValuesId())&&""!==role&&0!=role.length||(ZPeopleComponents.tokenfield(pageId.find("#addEmpFile_Role")).getElement().addClass("ztextbox__error"),pageId.find("#addEmpFile_Role").parent().append('<span class="ztextbox--error__label">'+ZPI18N.getString("zp.chkselectrole")+"</span>"),errflag=!0),pageId.find("#addEmpFile_role_download").prop("checked")||(confidential="1")}var catId="-1",newCatName="";pageId.find("#addEmpFile_newCatName").parent().is(":visible")?newCatName=pageId.find("#addEmpFile_newCatName").val().trim():catId=ZPeopleComponents.select(pageId.find("#addEmpFile_Folder")).getValue();var isAckEnabledFile=!1;(pageId.find("#addEmpFile_notMandAck").prop("checked")||pageId.find("#addEmpFile_mandAck").prop("checked"))&&(isacknowledge="1",isAckEnabledFile=!0);var ackDeadLine="",ack_dateObj=ZPeopleComponents.datefield(pageId.find("#addEmpFile_ackDeadLine")).getValue();null!=ack_dateObj.dateString&&void 0!=ack_dateObj.dateString&&""!=ack_dateObj.dateString&&(ackDeadLine=ack_dateObj.dateString);var isFeeds=pageId.find("#addEmpFile_feeds").prop("checked"),isMail=pageId.find("#addEmpFile_mail").prop("checked");if(-1!=fileName.indexOf(",")&&(fileName=fileName.replace(/,/g,"_")),-1!=fileName.indexOf(",")&&(fileName=fileName.replace(/,/g,"")),"exe"==fileName.substr(fileName.lastIndexOf(".")+1,fileName.length).toLowerCase()&&(ZPeople.Message.failure(ZPeople.Message.showFailureMsg(ZPI18N.getString("zp.exefileerror"))),errflag=!0),!pageId.find("#addEmpFile_mandAck").prop("checked")||null!=ackDeadLine&&void 0!=ackDeadLine&&""!=ackDeadLine&&"-1"!=ackDeadLine||(ZPeopleComponents.datefield(pageId.find("#addEmpFile_ackDeadLine")).getElement().addClass("ztextbox__error"),pageId.find("#addEmpFile_ackDeadLine").parent().append('<span class="ztextbox--error__label">'+ZPI18N.getString("zp.entervaliddate")+"</span>"),errflag=!0),""!=ackDeadLine){var ack_deadline_val=ackDeadLine;"-1"!=dateFmt.indexOf("MMM")&&(ack_deadline_val=ack_deadline_val.replace(/-/g," "));var currentdatelong=Calendar.getCurrentDate().getTime(),ackDeadlinelong=new Date(ack_deadline_val).getTime();ackDeadlinelong<currentdatelong&&(ZPeopleComponents.datefield(pageId.find("#addEmpFile_ackDeadLine")).getElement().addClass("ztextbox__error"),pageId.find("#addEmpFile_ackDeadLine").parent().append('<span class="ztextbox--error__label">'+ZPI18N.getString("zp.validuntilerr")+"</span>"),errflag=!0);var dateObject=new Date;ackDeadlinelong>new Date(dateObject.setDate(dateObject.getDate()+90)).getTime()&&(ZPeopleComponents.datefield(pageId.find("#addEmpFile_ackDeadLine")).getElement().addClass("ztextbox__error"),pageId.find("#addEmpFile_ackDeadLine").parent().append('<span class="ztextbox--error__label">'+ZPI18N.getString("zp.files.operations.ackmandatoryerr")+"</span>"),errflag=!0),isAckEnabledFile=!0}if(""==fileName&&(pageId.find("#addEmpFile_fileName").addClass("ztextbox__error"),pageId.find("#addEmpFile_fileName").after('<span class="ztextbox--error__label">'+ZPI18N.getString("zp.files.operations.filter.filenameinfo")+"</span>"),errflag=!0),fileName.length>250&&(pageId.find("#addEmpFile_fileName").addClass("ztextbox__error"),pageId.find("#addEmpFile_fileName").after('<span class="ztextbox--error__label">'+ZPI18N.getString("zp.files.operations.fnamelimit")+"</span>"),errflag=!0),fileDesc.length>250&&(pageId.find("#addEmpFile_fileDesc").addClass("ztextbox__error"),pageId.find("#addEmpFile_fileDesc").after('<span class="ztextbox--error__label">'+ZPI18N.getString("zp.files.operations.desclimit")+"</span>"),errflag=!0),-1==fileName.indexOf("<")&&-1==fileName.indexOf(">")&&-1==fileName.indexOf("&lt;")&&-1==fileName.indexOf("&gt;")||(ZPeople.Message.failure(ZPI18N.getString("zp.files.operations.avoidchar",new Array(ZPI18N.getString("zp.files.operations.filename")))),errflag=!0),-1==fileDesc.indexOf("<")&&-1==fileDesc.indexOf(">")&&-1==fileDesc.indexOf("&lt;")&&-1==fileDesc.indexOf("&gt;")||(ZPeople.Message.failure(ZPI18N.getString("zp.files.operations.avoidchar",new Array(ZPI18N.getString("zp.description")))),errflag=!0),pageId.find("#addEmpFile_newCatName").parent().is(":visible")&&""==newCatName?(pageId.find("#addEmpFile_newCatName").addClass("ztextbox__error"),pageId.find("#addEmpFile_newCatName").parent().append('<span class="ztextbox--error__label">'+ZPI18N.getString("zp.enterCategory")+"</span>"),errflag=!0):!pageId.find("#addEmpFile_Folder").parent().is(":visible")||""!=catId&&"-1"!=catId||(ZPeopleComponents.select(pageId.find("#addEmpFile_Folder")).getElement().addClass("ztextbox__error"),pageId.find("#addEmpFile_Folder").parent().append('<span class="ztextbox--error__label">'+ZPI18N.getString("zp.files.operations.selectfolder")+"</span>"),errflag=!0),(pageId.find("#addEmpFile_newCatName").parent().is(":visible")&&-1!=newCatName.indexOf("<")||-1!=newCatName.indexOf(">")||-1!=newCatName.indexOf("&lt;")||-1!=newCatName.indexOf("&gt;"))&&(ZPeople.Message.failure(ZPI18N.getString("zp.files.operations.avoidchar",new Array(ZPI18N.getString("zp.folder")))),errflag=!0),pageId.find("#addEmpFile_newCatName").parent().is(":visible")&&null!=newCatName&&void 0!=newCatName&&"/"===newCatName&&(ZPeople.Message.failure(ZPI18N.getString("zp.files.operations.avoidchar",new Array(ZPI18N.getString("zp.lms.base.foldername")))),errflag=!0),"0"!=FilesOperations.EmpFiles.AddEdit.editFileId||null!=FileUpload.uploadMode&&void 0!=FileUpload.uploadMode&&""!=FileUpload.uploadMode||(ZPeople.Message.failure(ZPI18N.getString("zp.files.operations.selectfile")),errflag=!0),null!=FileUpload.fileExtn&&void 0!=FileUpload.fileExtn&&""!=FileUpload.fileExtn&&"zip"==FileUpload.fileExtn.toLowerCase()&&1==isAckEnabledFile&&(ZPeople.Message.failure(ZPI18N.getString("zp.files.operations.zipwithacknotsupported")),errflag=!0),errflag)return!1;$(settingsPage.mainWrapId).find("#"+FilesOperations.EmpFiles.AddEdit.modelId).find("#sliderSbt").addClass("disabled");var formData=new FormData;formData.append("conreqcsr",csrfToken),formData.append("fileName",fileName),formData.append("fileDesc",fileDesc),formData.append("fileType","0"),pageId.find("#addEmpFile_newCatName").is(":visible")?formData.append("newCatName",newCatName):formData.append("catId",catId),formData.append("editFileId",FilesOperations.EmpFiles.AddEdit.editFileId),formData.append("notifyToall",isMail),formData.append("notifyFeeds",isFeeds),formData.append("confidential",confidential),formData.append("isAcknowledgement",isacknowledge),formData.append("roleId",role),formData.append("employeeId",fileforempID),formData.append("isreportingTo",isreportingTo),formData.append("uploadMode",FileUpload.uploadMode),null!=ackDeadLine&&void 0!=ackDeadLine&&""!=ackDeadLine&&-1!=ackDeadLine&&formData.append("ackDeadLine",ackDeadLine),"localUpload"==FileUpload.uploadMode&&(formData.append("importFileId",FileUpload.udsParams.fileId),formData.append("fileVersion",FileUpload.udsParams.fileVersion)),"cloudUpload"==FileUpload.uploadMode&&formData.append("cloudUploadDoc",JSON.stringify(FileUpload.CloudPicker.UPLOADOBJ)),"workDriveUpload"==FileUpload.uploadMode&&formData.append("WDUploadDoc",JSON.stringify(FileUpload.WorkDrive.UPLOADOBJ)),formData=FilesUtil.Geo.setLatLongParams(formData,!0),$.ajax({url:"/zpfiles/operations/addFile",type:"POST",data:formData,contentType:!1,processData:!1,success:function(data){FilesOperations.EmpFiles.Modal.ADD_MODAL.close();var editId=FilesOperations.EmpFiles.AddEdit.editFileId;null!=editId&&void 0!=editId&&""!=editId&&"0"!=editId&&"-1"!=editId?ZPeople.Message.success(ZPI18N.getString("zp.updatefile")):ZPeople.Message.success(ZPI18N.getString("zp.addfile")),FilesOperations.Page.reloadOtherPages()},error:function(req){var errResponse=req.responseJSON[1];8103!==req.status&&8101!==req.status&&500!==req.status||ZPeople.Message.failure(errResponse.msg),FilesOperations.EmpFiles.Modal.ADD_MODAL.close()}})}},FilesOperations.EmpFiles.Import={popupId:"impEmpFile",modelId:"tabimpEmpFile",cardId:"cardimpEmpFile",popupName:ZSEC.Encoder.encodeForHTML(FilesUtil.imphrfiledisname),toggleOption:function(type){var pageId=$("#"+FilesOperations.EmpFiles.Import.cardId);"1"==type?(pageId.find("#specEmpNote").addClass("zpl_DNI"),pageId.find("#manyEmpNote").removeClass("zpl_DNI"),pageId.find("input#input_manyEmp").prop("checked",!0),pageId.find("#specEmpFileType").addClass("zpl_DNI"),pageId.find("#manyEmpFileType").removeClass("zpl_DNI")):"2"==type?(FilesOperations.EmpFiles.componentInit.initDropdown("imp_addEmpFile_Employee"),ZPeopleComponents.select(pageId.find("#imp_addEmpFile_Employee")).deselectAllOptions(),pageId.find("#specEmpNote").removeClass("zpl_DNI"),pageId.find("#manyEmpNote").addClass("zpl_DNI"),pageId.find("input#input_specEmp").prop("checked",!0),pageId.find("#specEmpFileType").removeClass("zpl_DNI"),pageId.find("#manyEmpFileType").addClass("zpl_DNI")):"3"==type?(pageId.find("input#withoutFolder").prop("checked",!0),pageId.find("#imp_FolderDD_Wpr").removeClass("zpl_DNI")):"4"==type?(pageId.find("input#withFolder").prop("checked",!0),pageId.find("#imp_FolderDD_Wpr").addClass("zpl_DNI")):"5"==type&&(pageId.find(".PI_maxmz, .PI_minmz").toggleClass("zpl_DNI"),pageId.find("#noteCard").toggleClass("btm_mview"),pageId.find("#noteCard").hasClass("btm_mview")?pageId.find(".zpl_crdScrl").css("bottom",""):pageId.find(".zpl_crdScrl").css("bottom","170px"))},getEmpLabelDispName:function(){if(0==FilesOperations.impFileFormatLabels.length){if(!FilesUtil.IP.isRestricted&&!FilesUtil.Geo.isRestricted){var formData=new FormData;formData.append("conreqcsr",csrfToken),formData=FilesUtil.Geo.setLatLongParams(formData,!0),$.ajax({url:"/zpfiles/operations/getDispNameOfEmpFields",type:"POST",data:formData,async:!1,contentType:!1,processData:!1,success:function(data){if(null!=data&&void 0!=data&&void 0!=data[1])for(var labelVsDispName=Object.keys(data[1]),i=0;i<=labelVsDispName.length-1;i++){var key=labelVsDispName[i],value=data[1][key];FilesOperations.impFileFormatLabels.push({id:i+1,value:i+1,name:value,labelName:key})}},error:function(req){}})}}return FilesOperations.impFileFormatLabels},showFileFormatOpt:function(id){var pageId=$("#"+FilesOperations.EmpFiles.Import.cardId),firstFieldVal="-1",secondFieldVal="-1";if("imp_fileFormat_first"===id)return FilesOperations.EmpFiles.Import.getEmpLabelDispName();if("imp_fileFormat_second"===id||"imp_fileFormat_third"===id){ZPeopleComponents.isComponent("#imp_fileFormat_first")&&(firstFieldVal=ZPeopleComponents.select(pageId.find("#imp_fileFormat_first")).getValue()),"imp_fileFormat_third"==id&&ZPeopleComponents.isComponent("#imp_fileFormat_second")&&(secondFieldVal=ZPeopleComponents.select(pageId.find("#imp_fileFormat_second")).getValue());var options=[];return $.each(FilesOperations.impFileFormatLabels,function(key,val){val.id!=firstFieldVal&&val.id!=secondFieldVal&&options.push({format:ZPI18N.getString("zp.bpfield"),id:val.id,value:val.value,name:val.name})}),options.push({format:ZPI18N.getString("zp.separator"),id:"4",value:"4",name:ZPI18N.getString("zp.files.seperator.underscore")}),options.push({format:ZPI18N.getString("zp.separator"),id:"5",value:"5",name:ZPI18N.getString("zp.files.seperator.hyphen")}),options}},hidePlusIcon:function(event){var pageId=$("#"+FilesOperations.EmpFiles.Import.cardId);"4"===event.detail.options.selectedValue||"5"==event.detail.options.selectedValue?pageId.find("#imp_FieldIcon_second").find(".PI_plus2").addClass("zpl_DNI"):pageId.find("#imp_FieldIcon_second").find(".PI_plus2").removeClass("zpl_DNI")},showAddRmvIcons:function(obj){var pageId=$("#"+FilesOperations.EmpFiles.Import.cardId),parent=$(obj).parent().attr("id");if(pageId.find("#formatWpr").removeClass("zpl_erorbx"),pageId.find(".ztextbox--error__label").remove(),pageId.find(".ztextbox__error").removeClass("ztextbox__error"),"imp_FieldIcon_first"===parent)null!=(inpVal=ZPeopleComponents.select($("#imp_fileFormat_first")).getValue())&&void 0!=inpVal&&""!=inpVal&&"-1"!=inpVal?($(obj).parent().addClass("zpl_DNI"),pageId.find("#imp_FieldIcon_second").find(".PI_plus2").removeClass("zpl_DNI"),ZPeopleComponents.select($("#imp_fileFormat_second")).destroy(),FilesOperations.EmpFiles.componentInit.initDropdown("imp_fileFormat_second"),pageId.find("#imp_FieldIcon_first").nextAll(":lt(2)").removeClass("zpl_DNI")):(pageId.find("#formatWpr").addClass("zpl_erorbx"),ZPeopleComponents.select(pageId.find("#imp_fileFormat_first")).getElement().addClass("ztextbox__error"),pageId.find("#imp_fileFormat_first").parent().append('<span class="ztextbox--error__label">'+ZPI18N.getString("zp.files.operations.selfileformat")+"</span>"));else if("imp_FieldIcon_second"===parent){var inpVal;if($(obj).attr("class").indexOf("PI_plus2")>=0)null!=(inpVal=ZPeopleComponents.select($("#imp_fileFormat_second")).getValue())&&void 0!=inpVal&&""!=inpVal&&"-1"!=inpVal?($(obj).parent().addClass("zpl_DNI"),ZPeopleComponents.select($("#imp_fileFormat_third")).destroy(),FilesOperations.EmpFiles.componentInit.initDropdown("imp_fileFormat_third"),pageId.find("#imp_FieldIcon_second").nextAll(":lt(2)").removeClass("zpl_DNI")):(pageId.find("#formatWpr").addClass("zpl_erorbx"),ZPeopleComponents.select(pageId.find("#imp_fileFormat_second")).getElement().addClass("ztextbox__error"),pageId.find("#imp_fileFormat_second").parent().append('<span class="ztextbox--error__label">'+ZPI18N.getString("zp.files.operations.selfileformat")+"</span>"));else $(obj).parent().addClass("zpl_DNI"),ZPeopleComponents.select($("#imp_fileFormat_second")).deselectAllOptions(),pageId.find("#imp_fileFormat_second_Wpr","#imp_FieldIcon_second").addClass("zpl_DNI"),pageId.find("#imp_FieldIcon_first").removeClass("zpl_DNI"),FilesOperations.EmpFiles.Import.dispFormat()}else"imp_FieldIcon_third"===parent&&($(obj).parent().addClass("zpl_DNI"),ZPeopleComponents.select($("#imp_fileFormat_third")).destroy(),pageId.find("#imp_fileFormat_third_Wpr","#imp_FieldIcon_third").addClass("zpl_DNI"),pageId.find("#imp_FieldIcon_second").removeClass("zpl_DNI"),FilesOperations.EmpFiles.Import.dispFormat())},dispFormat:function(){var pageId=$("#"+FilesOperations.EmpFiles.Import.cardId),sample="",firstFieldVal=ZPeopleComponents.select($("#imp_fileFormat_first")).getValue();null!=firstFieldVal&&void 0!=firstFieldVal&&""!=firstFieldVal&&"-1"!=firstFieldVal&&(sample+="<"+ZPeopleComponents.select($("#imp_fileFormat_first")).getElement().find(".zselectbox__text").text()+">");var secondFieldVal=ZPeopleComponents.select($("#imp_fileFormat_second")).getValue();null!=secondFieldVal&&void 0!=secondFieldVal&&""!=secondFieldVal&&"-1"!=secondFieldVal&&(sample+="4"==secondFieldVal?"<_> <documentname>":"5"==secondFieldVal?"<-> <documentname>":"<"+ZPeopleComponents.select($("#imp_fileFormat_second")).getElement().find(".zselectbox__text").text()+">");var thirdFieldVal=ZPeopleComponents.select($("#imp_fileFormat_third")).getValue();null!=thirdFieldVal&&void 0!=thirdFieldVal&&""!=thirdFieldVal&&"-1"!=thirdFieldVal&&(sample+="4"==thirdFieldVal?"<_> <documentname>":"5"==thirdFieldVal?"<-> <documentname>":"<"+ZPeopleComponents.select($("#imp_fileFormat_third")).getElement().find(".zselectbox__text").text()+">"),pageId.find("#sampleFormat").text(sample)},clearFileFormat:function(isDestroy){var pageId=$("#"+FilesOperations.EmpFiles.Import.cardId);pageId.find("#imp_FieldIcon_first").removeClass("zpl_DNI"),pageId.find("#imp_fileFormat_second_Wpr").addClass("zpl_DNI"),pageId.find("#imp_FieldIcon_second").addClass("zpl_DNI"),pageId.find("#imp_FieldIcon_second").find(".PI_plus2").removeClass("zpl_DNI"),pageId.find("#imp_fileFormat_third_Wpr").addClass("zpl_DNI"),pageId.find("#imp_FieldIcon_third").addClass("zpl_DNI"),ZPeopleComponents.isComponent("#imp_fileFormat_first")&&(isDestroy?ZPeopleComponents.select(pageId.find("#imp_fileFormat_first")).destroy():ZPeopleComponents.select(pageId.find("#imp_fileFormat_first")).setAttributes({selectedValue:"-1"})),ZPeopleComponents.isComponent("#imp_fileFormat_second")&&(isDestroy?ZPeopleComponents.select(pageId.find("#imp_fileFormat_second")).destroy():ZPeopleComponents.select(pageId.find("#imp_fileFormat_second")).setAttributes({selectedValue:"-1"})),ZPeopleComponents.isComponent("#imp_fileFormat_third")&&(isDestroy?ZPeopleComponents.select(pageId.find("#imp_fileFormat_third")).destroy():ZPeopleComponents.select(pageId.find("#imp_fileFormat_third")).setAttributes({selectedValue:"-1"})),pageId.find("#sampleFormat").text("- - - - -")},clearFields:function(isDestroy){var pageId=$("#"+FilesOperations.EmpFiles.Import.cardId);if(pageId.find("#formatWpr").removeClass("zpl_erorbx"),pageId.find(".ztextbox--error__label").remove(),pageId.find(".ztextbox__error").removeClass("ztextbox__error"),FileUpload.removeFile(),pageId.find("#imp_addEmpFile_fileDesc").val(""),isDestroy)ZPeopleComponents.isComponent("#imp_addEmpFile_Folder")&&ZPeopleComponents.select(pageId.find("#imp_addEmpFile_Folder")).destroy(),ZPeopleComponents.isComponent("#imp_addEmpFile_Employee")&&ZPeopleComponents.select(pageId.find("#imp_addEmpFile_Employee")).destroy(),ZPeopleComponents.isComponent("#imp_addEmpFile_ackDeadLine")&&ZPeopleComponents.datefield(pageId.find("#imp_addEmpFile_ackDeadLine")).destroy(),FilesOperations.EmpFiles.Import.toggleOption(1,!0),FilesOperations.EmpFiles.Import.clearFileFormat(!0),FilesOperations.EmpFiles.Import.toggleOption(3,!0);else if(FilesOperations.EmpFiles.Import.toggleOption(1),FilesOperations.EmpFiles.Import.clearFileFormat(),FilesOperations.EmpFiles.Import.toggleOption(3),ZPeopleComponents.isComponent("#imp_addEmpFile_Folder")&&(ZPeopleComponents.select(pageId.find("#imp_addEmpFile_Folder")).deselectAllOptions(),ZPeopleComponents.select(pageId.find("#imp_addEmpFile_Folder")).setValue({id:"-1",name:ZPI18N.getString("zp.select")})),ZPeopleComponents.isComponent("#imp_addEmpFile_ackDeadLine")){var dateObj=ZPeopleComponents.datefield(pageId.find("#imp_addEmpFile_ackDeadLine")).getValue();null!=dateObj.dateString&&void 0!=dateObj.dateString&&""!=dateObj.dateString&&ZPeopleComponents.datefield(pageId.find("#imp_addEmpFile_ackDeadLine")).clear()}pageId.find("#imp_addEmpFile_notMandAck").prop("checked",!1),pageId.find("#imp_addEmpFile_mandAck").prop("checked",!1),pageId.find("#imp_addEmpFile_toView_emp").prop("checked",!0),pageId.find("#imp_addEmpFile_toView_rm").prop("checked",!1),pageId.find("#imp_addEmpFile_toDwnd_emp").prop("checked",!0),pageId.find("#imp_addEmpFile_toDwnd_rm").prop("checked",!1),pageId.find("#imp_addEmpFile_feeds").prop("checked",!1),pageId.find("#imp_addEmpFile_mail").prop("checked",!1)},show:function(mode,rowId){if(0==$("#"+FilesOperations.EmpFiles.Import.modelId).length){var popupTab=new Tab(FilesOperations.EmpFiles.Import.popupId,FilesOperations.EmpFiles.Modal.importPopup,FilesOperations.EmpFiles.Import.update);FilesOperations.EmpFiles.Modal.IMP_MODAL=new sliderModal(ZSEC.Encoder.encodeForHTML(FilesUtil.imphrfiledisname),popupTab)}FilesOperations.EmpFiles.Modal.IMP_MODAL.setCloseCallback(FilesOperations.EmpFiles.Import.hide),FilesOperations.EmpFiles.Modal.IMP_MODAL.construct(),$(settingsPage.mainWrapId).find("#"+FilesOperations.EmpFiles.Import.modelId).find("#sliderSbt").removeClass("disabled");$("#"+FilesOperations.EmpFiles.Import.cardId);FilesOperations.EmpFiles.componentInit.initDropdown("imp_fileFormat_first"),$("#imp_addEmpFile_newCatName").val("").parent().parent().addClass("zpl_DNI"),$("#imp_addEmpFile_Folder").parent().removeClass("zpl_DNI"),FilesUtil.componentInit.folderListDropdown("imp_addEmpFile_Folder"),ZPeopleComponents.isComponent("#imp_addEmpFile_ackDeadLine")||ZPeopleComponents.datefield($("#imp_addEmpFile_ackDeadLine")).setAttributes({placeholder:dateFmt}),FilesOperations.EmpFiles.Import.clearFields(!1)},hide:function(){FilesOperations.EmpFiles.Import.clearFields(!0),$(settingsPage.mainWrapId).find("#"+FilesOperations.EmpFiles.Import.modelId).remove()},update:function(){var errflag=!1,pageId=$("#"+FilesOperations.EmpFiles.Import.cardId);pageId.find(".ztextbox--error__label").remove(),pageId.find(".ztextbox__error").removeClass("ztextbox__error");var fileforempID="-1",confidential="0",isreportingTo="0",isacknowledge="0",catId="-1",newCatName="",fileDesc=pageId.find("#imp_addEmpFile_fileDesc").val().trim();if(pageId.find("input#input_manyEmp").prop("checked")){var formatfieldVal=[],firstVal=ZPeopleComponents.select(pageId.find("#imp_fileFormat_first")).getValue();ZPeopleComponents.isComponent("#imp_fileFormat_first")&&null!=firstVal&&void 0!=firstVal&&""!=firstVal&&"-1"!=firstVal&&formatfieldVal.push(ZPeopleComponents.select(pageId.find("#imp_fileFormat_first")).getValue());var secondVal=ZPeopleComponents.select(pageId.find("#imp_fileFormat_second")).getValue();ZPeopleComponents.isComponent("#imp_fileFormat_second")&&null!=secondVal&&void 0!=secondVal&&""!=secondVal&&"-1"!=secondVal&&formatfieldVal.push(ZPeopleComponents.select(pageId.find("#imp_fileFormat_second")).getValue());var thirdVal=ZPeopleComponents.select(pageId.find("#imp_fileFormat_third")).getValue();ZPeopleComponents.isComponent("#imp_fileFormat_third")&&null!=thirdVal&&void 0!=thirdVal&&""!=thirdVal&&"-1"!=thirdVal&&formatfieldVal.push(ZPeopleComponents.select(pageId.find("#imp_fileFormat_third")).getValue());for(var formatFields=[],j=0;j<=formatfieldVal.length-1;j++){var fieldVal=formatfieldVal[j];if(fieldVal<="3")for(var i=0;i<=FilesOperations.impFileFormatLabels.length-1;i++)FilesOperations.impFileFormatLabels[i].id==fieldVal&&formatFields.push(FilesOperations.impFileFormatLabels[i].labelName)}var separator="";"4"==formatfieldVal[formatfieldVal.length-1]?separator="_":"5"==formatfieldVal[formatfieldVal.length-1]&&(separator="-"),0==formatFields.length&&(pageId.find("#formatWpr").addClass("zpl_erorbx"),ZPeopleComponents.select(pageId.find("#imp_fileFormat_first")).getElement().addClass("ztextbox__error"),pageId.find("#imp_fileFormat_first").parent().append('<span class="ztextbox--error__label">'+ZPI18N.getString("zp.files.operations.selfileformat")+"</span>"),errflag=!0)}else pageId.find("input#input_specEmp").prop("checked")&&(null!=(fileforempID=ZPeopleComponents.select(pageId.find("#imp_addEmpFile_Employee")).getValue())&&void 0!=fileforempID&&""!=fileforempID&&"-1"!==fileforempID||(ZPeopleComponents.select(pageId.find("#imp_addEmpFile_Employee")).getElement().addClass("ztextbox__error"),pageId.find("#imp_addEmpFile_Employee").parent().append('<span class="ztextbox--error__label">'+ZPI18N.getString("zp.files.operations.selemp")+"</span>"),errflag=!0));0==pageId.find("#imp_addEmpFile_toView_emp").prop("checked")&&0==pageId.find("#imp_addEmpFile_toDwnd_emp").prop("checked")?confidential="1":1==pageId.find("#imp_addEmpFile_toView_emp").prop("checked")&&0==pageId.find("#imp_addEmpFile_toDwnd_emp").prop("checked")&&(confidential="2"),1==pageId.find("#imp_addEmpFile_toView_rm").prop("checked")&&1==pageId.find("#imp_addEmpFile_toDwnd_rm").prop("checked")?isreportingTo="1":1==pageId.find("#imp_addEmpFile_toView_rm").prop("checked")&&0==pageId.find("#imp_addEmpFile_toDwnd_rm").prop("checked")&&(isreportingTo="2");var isFolderImport=!!pageId.find("input#withFolder").is(":checked"),isEmpwiseImp=!!pageId.find("input#input_specEmp").is(":checked");isFolderImport||(pageId.find("#imp_addEmpFile_newCatName").is(":visible")?newCatName=pageId.find("#imp_addEmpFile_newCatName").val().trim():catId=ZPeopleComponents.select(pageId.find("#imp_addEmpFile_Folder")).getValue()),(pageId.find("#imp_addEmpFile_mandAck").prop("checked")||pageId.find("#imp_addEmpFile_notMandAck").prop("checked"))&&(isacknowledge="1");var ackDeadLine="",ack_dateObj=ZPeopleComponents.datefield(pageId.find("#imp_addEmpFile_ackDeadLine")).getValue();null!=ack_dateObj.dateString&&void 0!=ack_dateObj.dateString&&""!=ack_dateObj.dateString&&(ackDeadLine=ack_dateObj.dateString);var isFeeds=pageId.find("#imp_addEmpFile_feeds").prop("checked"),isMail=pageId.find("#imp_addEmpFile_mail").prop("checked"),fileName=FileUpload.udsParams.fileName;if("exe"==fileName.substr(fileName.lastIndexOf(".")+1,fileName.length).toLowerCase()&&(ZPeople.Message.failure(ZPI18N.getString("zp.exefileerror")),errflag=!0),!pageId.find("#imp_addEmpFile_mandAck").prop("checked")||null!=ackDeadLine&&void 0!=ackDeadLine&&""!=ackDeadLine&&"-1"!=ackDeadLine||(ZPeopleComponents.datefield(pageId.find("#imp_addEmpFile_ackDeadLine")).getElement().addClass("ztextbox__error"),pageId.find("#imp_addEmpFile_ackDeadLine").parent().append('<span class="ztextbox--error__label">'+ZPI18N.getString("zp.entervaliddate")+"</span>"),errflag=!0),""!=ackDeadLine){var ack_deadline_val=ackDeadLine;"-1"!=dateFmt.indexOf("MMM")&&(ack_deadline_val=ack_deadline_val.replace(/-/g," "));var currentdatelong=Calendar.getCurrentDate().getTime(),ackDeadlinelong=new Date(ack_deadline_val).getTime();ackDeadlinelong<currentdatelong&&(ZPeopleComponents.datefield(pageId.find("#imp_addEmpFile_ackDeadLine")).getElement().addClass("ztextbox__error"),pageId.find("#imp_addEmpFile_ackDeadLine").parent().append('<span class="ztextbox--error__label">'+ZPI18N.getString("zp.validuntilerr")+"</span>"),errflag=!0);var dateObject=new Date;ackDeadlinelong>new Date(dateObject.setDate(dateObject.getDate()+90)).getTime()&&(ZPeopleComponents.datefield(pageId.find("#imp_addEmpFile_ackDeadLine")).getElement().addClass("ztextbox__error"),pageId.find("#imp_addEmpFile_ackDeadLine").parent().append('<span class="ztextbox--error__label">'+ZPI18N.getString("zp.files.operations.ackmandatoryerr")+"</span>"),errflag=!0)}if(fileDesc.length>250&&(pageId.find("#imp_addEmpFile_fileDesc").addClass("ztextbox__error"),pageId.find("#imp_addEmpFile_fileDesc").after('<span class="ztextbox--error__label">'+ZPI18N.getString("zp.files.operations.desclimit")+"</span>"),errflag=!0),-1==fileName.indexOf("<")&&-1==fileName.indexOf(">")&&-1==fileName.indexOf("&lt;")&&-1==fileName.indexOf("&gt;")||(ZPeople.Message.failure(ZPI18N.getString("zp.files.operations.avoidchar",new Array(ZPI18N.getString("zp.files.operations.filename")))),errflag=!0),-1==fileDesc.indexOf("<")&&-1==fileDesc.indexOf(">")&&-1==fileDesc.indexOf("&lt;")&&-1==fileDesc.indexOf("&gt;")||(ZPeople.Message.failure(ZPI18N.getString("zp.files.operations.avoidchar",new Array(ZPI18N.getString("zp.description")))),errflag=!0),isFolderImport||(pageId.find("#imp_addEmpFile_newCatName").parent().is(":visible")&&""==newCatName?(pageId.find("#imp_addEmpFile_newCatName").addClass("ztextbox__error"),pageId.find("#imp_addEmpFile_newCatName").parent().append('<span class="ztextbox--error__label">'+ZPI18N.getString("zp.enterCategory")+"</span>"),errflag=!0):!pageId.find("#imp_addEmpFile_Folder").parent().is(":visible")||""!=catId&&"-1"!=catId||(ZPeopleComponents.select(pageId.find("#imp_addEmpFile_Folder")).getElement().addClass("ztextbox__error"),pageId.find("#imp_addEmpFile_Folder").parent().append('<span class="ztextbox--error__label">'+ZPI18N.getString("zp.files.operations.selectfolder")+"</span>"),errflag=!0),(pageId.find("#imp_addEmpFile_newCatName").parent().is(":visible")&&-1!=newCatName.indexOf("<")||-1!=newCatName.indexOf(">")||-1!=newCatName.indexOf("&lt;")||-1!=newCatName.indexOf("&gt;"))&&(ZPeople.Message.failure(ZPI18N.getString("zp.files.operations.avoidchar",new Array(ZPI18N.getString("zp.folder")))),errflag=!0),pageId.find("#imp_addEmpFile_newCatName").parent().is(":visible")&&null!=newCatName&&void 0!=newCatName&&"/"===newCatName&&(ZPeople.Message.failure(ZPI18N.getString("zp.files.operations.avoidchar",new Array(ZPI18N.getString("zp.files.settings.foldername")))),errflag=!0)),null!=FileUpload.uploadMode&&void 0!=FileUpload.uploadMode&&""!=FileUpload.uploadMode&&""!=FileUpload.udsParams.fileId&&"-1"!=FileUpload.udsParams.fileId||(ZPeople.Message.failure(ZPI18N.getString("zp.files.operations.selectfile")),errflag=!0),errflag)return!1;$(settingsPage.mainWrapId).find("#"+FilesOperations.EmpFiles.Import.modelId).find("#sliderSbt").addClass("disabled");var formData=new FormData;if(formData.append("conreqcsr",csrfToken),formData.append("fileName",fileName),formData.append("fileDesc",fileDesc),formData.append("fileType","0"),isFolderImport||(pageId.find("#imp_addEmpFile_newCatName").is(":visible")?formData.append("newCatName",newCatName):formData.append("catId",catId)),isEmpwiseImp?formData.append("employeeId",fileforempID):(formData.append("listOfFields",formatFields.toString()),formData.append("importformatseparator",separator)),formData.append("isAcknowledgement",isacknowledge),null!=ackDeadLine&&void 0!=ackDeadLine&&""!=ackDeadLine&&-1!=ackDeadLine&&formData.append("ackDeadLine",ackDeadLine),formData.append("confidential",confidential),formData.append("isreportingTo",isreportingTo),formData.append("isFolderImport",isFolderImport),formData.append("isEmpwiseImp",isEmpwiseImp),formData.append("notifyToall",isMail),formData.append("notifyFeeds",isFeeds),formData.append("uploadMode",FileUpload.uploadMode),"localUpload"==FileUpload.uploadMode){if("-1"==FileUpload.udsParams.fileId)return void ZPeople.Message.showFailureMsg(ZPI18N.getString("zp.files.operations.fileuploading",new Array(ZPI18N.getString("zp.description"))));formData.append("importFileId",FileUpload.udsParams.fileId),formData.append("fileVersion",FileUpload.udsParams.fileVersion)}formData=FilesUtil.Geo.setLatLongParams(formData,!0),$.ajax({url:"/zpfiles/operations/importFile",type:"POST",data:formData,contentType:!1,processData:!1,success:function(data){FilesOperations.EmpFiles.Modal.IMP_MODAL.close(),ZPeople.Message.success(ZPI18N.getString("zp.files.operations.importinit"))},error:function(req){var errResponse=req.responseJSON[1];8103!==req.status&&8101!==req.status&&500!==req.status||ZPeople.Message.failure(errResponse.msg),FilesOperations.EmpFiles.Modal.IMP_MODAL.close()}})}},FilesOperations.EmpFiles.Filter={showHide:function(){if(FilesUtil.IP.isRestricted)FilesUtil.IP.showError(!0);else if(FilesUtil.Geo.isRestricted)FilesUtil.Geo.showError(!0);else if(settingsPage.container.find("#empFile_filterModal").parent().hasClass("zpl_fltr_flt"))FilesOperations.EmpFiles.Filter.hide();else{0==settingsPage.container.find("#empFile_filterModal").find(".zpl_fltrhd").length&&(FilesOperations.EmpFiles.Modal.filter(),FilesOperations.EmpFiles.Filter.init()),settingsPage.container.find("#empFile_filterModal").parent().addClass("zpl_fltr_flt");var parentContainer=FilesUtil.Page.getParentContainer();FilesUtil.Page.isModulePage()||(settingsUrlProps.url.indexOf("-catId")>-1?settingsPage.container.find("#empFile_filterModal").find("#filterEmpFile_Folder"+parentContainer).parent().parent().addClass("zpl_DNI"):settingsPage.container.find("#empFile_filterModal").find("#filterEmpFile_Folder"+parentContainer).parent().parent().removeClass("zpl_DNI")),settingsPage.container.find("#empFile_filterModal").find("#filterEmpFile_name"+parentContainer).focus()}},hide:function(){settingsPage.container.find("#empFile_filterModal").parent().removeClass("zpl_fltr_flt")},init:function(){var parentContainer=FilesUtil.Page.getParentContainer();FilesUtil.Page.isModulePage()||(FilesUtil.componentInit.folderListDropdown("filterEmpFile_Folder"+parentContainer),FilesOperations.Util.fileFilterFileFormat("filterEmpFile_format"+parentContainer)),parentContainer==FilesUtil.Page.pageIdMap.ALL&&(FilesOperations.EmpFiles.Filter.initOrgStructure(),isOrgStructureEnabled&&0==ZPeople.orgStructureTagMap.department&&FilesOperations.EmpFiles.componentInit.initDropdown("filterEmpFile_Department"+parentContainer),FilesOperations.EmpFiles.componentInit.initDropdown("filterEmpFile_Location"+parentContainer)),(parentContainer==FilesUtil.Page.pageIdMap.ALL||parentContainer==FilesUtil.Page.pageIdMap_mod.SUB&&null!==FilesUtil.hasAllReporteePerm&&void 0!==FilesUtil.hasAllReporteePerm&&!0===FilesUtil.hasAllReporteePerm)&&FilesOperations.EmpFiles.componentInit.fileViewDD("filterEmpFile_view"+parentContainer),FilesOperations.EmpFiles.EmpSearch.toggleSearchField(),ZPeopleComponents.datefield(settingsPage.container.find("#filterEmpFile_fromDate"+parentContainer)).setAttributes({placeholder:dateFmt}),ZPeopleComponents.datefield(settingsPage.container.find("#filterEmpFile_toDate"+parentContainer)).setAttributes({placeholder:dateFmt})},initOrgStructure:function(){let filterProps={container:settingsPage.container,defaultOrgStrucureStatus:"-1",isEmpTree:!0},filterPropsObj=new viewFilter(filterProps),elementDOMObj={};elementDOMObj.entity=settingsPage.container.find("#entityFilter"),elementDOMObj.unit=settingsPage.container.find("#unitFilter"),elementDOMObj.division=settingsPage.container.find("#divisionFilter"),isOrgStructureEnabled&&!ZPeople.orgStructureTagMap.department||(elementDOMObj.department=settingsPage.container.find("#departmentFilter")),filterPropsObj.handleOrgStructureFilters(elementDOMObj,!1,!1,void 0,void 0)},toggleViewBasedFilter:function(){var parentContainer=FilesUtil.Page.getParentContainer();if(parentContainer==FilesUtil.Page.pageIdMap.ALL){var pageId=settingsPage.container.find("#empFile_filterModal").parent();"3"==ZPeopleComponents.select(pageId.find("#filterEmpFile_view"+parentContainer)).getValue()?(pageId.find("#entityFilter").addClass("zpl_DNI"),pageId.find("#unitFilter").addClass("zpl_DNI"),pageId.find("#divisionFilter").addClass("zpl_DNI"),pageId.find("#departmentFilter").addClass("zpl_DNI"),pageId.find("#locationFilter").addClass("zpl_DNI"),pageId.find("#roleViewfilter").removeClass("zpl_DNI"),FilesOperations.EmpFiles.componentInit.initDropdown("filterEmpFile_Role"+parentContainer),pageId.find("#empSearchFilterWpr").addClass("zpl_DNI")):(pageId.find("#roleViewfilter").addClass("zpl_DNI"),pageId.find("#entityFilter").removeClass("zpl_DNI"),pageId.find("#unitFilter").removeClass("zpl_DNI"),pageId.find("#divisionFilter").removeClass("zpl_DNI"),pageId.find("#departmentFilter").removeClass("zpl_DNI"),pageId.find("#locationFilter").removeClass("zpl_DNI"),pageId.find("#empSearchFilterWpr").removeClass("zpl_DNI"))}},reset:function(key){var parentContainer=FilesUtil.Page.getParentContainer(),isFromModulePage=FilesUtil.Page.isModulePage(),pageId=settingsPage.container.find("#empFile_filterModal").parent();void 0==key?((window.location.href.indexOf("operations/files/all-viewType:1/empId:")>-1||window.location.href.indexOf("operations/files/all-viewType:2/empId:")>-1||window.location.href.indexOf("operations/files/all")>-1&&window.location.href.indexOf("/empId:")>-1)&&(url=window.location.hash.substring(0,window.location.hash.lastIndexOf("/empId:")),window.location.href=url),FilesOperations.EmpFiles.EmpSearch.reset(),parentContainer==FilesUtil.Page.pageIdMap.ALL?ZPeopleComponents.select(pageId.find("#filterEmpFile_view"+parentContainer)).setValue("0"):parentContainer===FilesUtil.Page.pageIdMap_mod.SUB&&null!==FilesUtil.hasAllReporteePerm&&void 0!==FilesUtil.hasAllReporteePerm&&!0===FilesUtil.hasAllReporteePerm&&ZPeopleComponents.select(pageId.find("#filterEmpFile_view"+parentContainer)).setValue("7"),pageId.find("#filterEmpFile_name"+parentContainer).val(""),isFromModulePage||(ZPeopleComponents.select(pageId.find("#filterEmpFile_Folder"+parentContainer)).deselectAllOptions(),ZPeopleComponents.select(pageId.find("#filterEmpFile_format"+parentContainer)).setAttributes({selectedValue:"-1"})),parentContainer==FilesUtil.Page.pageIdMap.ALL&&(ZPeopleComponents.isComponent(pageId.find("#filterEmpFile_Entity"+parentContainer))&&ZPeopleComponents.select(pageId.find("#filterEmpFile_Entity"+parentContainer)).setAttributes({selectedValue:"-1"}),ZPeopleComponents.isComponent(pageId.find("#filterEmpFile_Unit"+parentContainer))&&ZPeopleComponents.select(pageId.find("#filterEmpFile_Unit"+parentContainer)).setAttributes({selectedValue:"-1"}),ZPeopleComponents.isComponent(pageId.find("#filterEmpFile_Division"+parentContainer))&&ZPeopleComponents.select(pageId.find("#filterEmpFile_Division"+parentContainer)).setAttributes({selectedValue:"-1"}),ZPeopleComponents.isComponent(pageId.find("#filterEmpFile_Department"+parentContainer))&&ZPeopleComponents.select(pageId.find("#filterEmpFile_Department"+parentContainer)).setAttributes({selectedValue:"-1"}),ZPeopleComponents.isComponent(pageId.find("#filterEmpFile_Location"+parentContainer))&&ZPeopleComponents.select(pageId.find("#filterEmpFile_Location"+parentContainer)).setAttributes({selectedValue:"-1"})),ZPeopleComponents.isComponent(pageId.find("#filterEmpFile_Role"+parentContainer))&&ZPeopleComponents.select(pageId.find("#filterEmpFile_Role"+parentContainer)).setAttributes({selectedValue:"-1"}),ZPeopleComponents.datefield(pageId.find("#filterEmpFile_fromDate"+parentContainer)).clear(),ZPeopleComponents.datefield(pageId.find("#filterEmpFile_toDate"+parentContainer)).clear()):key==ZPI18N.getString("zp.files.operations.filter.fileview")?parentContainer!=FilesUtil.Page.pageIdMap.ALL||isFromModulePage?parentContainer===FilesUtil.Page.pageIdMap_mod.SUB&&null!==FilesUtil.hasAllReporteePerm&&void 0!==FilesUtil.hasAllReporteePerm&&!0===FilesUtil.hasAllReporteePerm&&ZPeopleComponents.select(pageId.find("#filterEmpFile_view"+parentContainer)).setValue("7"):ZPeopleComponents.select(pageId.find("#filterEmpFile_view"+parentContainer)).setValue("0"):key!=ZPI18N.getString("zp.employee")||(parentContainer!=FilesUtil.Page.pageIdMap.ALL||isFromModulePage)&&parentContainer!==FilesUtil.Page.pageIdMap_mod.SUB?key==ZPeople.orgStructureDispNameMap.entity&&parentContainer==FilesUtil.Page.pageIdMap.ALL?ZPeopleComponents.select(pageId.find("#filterEmpFile_Entity"+parentContainer)).setAttributes({selectedValue:"-1"}):key==ZPeople.orgStructureDispNameMap.unit&&parentContainer==FilesUtil.Page.pageIdMap.ALL?ZPeopleComponents.select(pageId.find("#filterEmpFile_Unit"+parentContainer)).setAttributes({selectedValue:"-1"}):key==ZPeople.orgStructureDispNameMap.division&&parentContainer==FilesUtil.Page.pageIdMap.ALL?ZPeopleComponents.select(pageId.find("#filterEmpFile_Division"+parentContainer)).setAttributes({selectedValue:"-1"}):key==ZPeople.orgStructureDispNameMap.department&&parentContainer==FilesUtil.Page.pageIdMap.ALL?ZPeopleComponents.select(pageId.find("#filterEmpFile_Department"+parentContainer)).setAttributes({selectedValue:"-1"}):key==ZPI18N.getString("zp.location")&&parentContainer==FilesUtil.Page.pageIdMap.ALL?ZPeopleComponents.select(pageId.find("#filterEmpFile_Location"+parentContainer)).setAttributes({selectedValue:"-1"}):key==ZPI18N.getString("zp.role")?ZPeopleComponents.select(pageId.find("#filterEmpFile_Role"+parentContainer)).setAttributes({selectedValue:"-1"}):key==ZPI18N.getString("zp.files.operations.filename")?pageId.find("#filterEmpFile_name"+parentContainer).val(""):key!=ZPI18N.getString("zp.folder")||isFromModulePage?key==ZPI18N.getString("zp.from")?ZPeopleComponents.datefield(pageId.find("#filterEmpFile_fromDate"+parentContainer)).clear():key==ZPI18N.getString("zp.to")?ZPeopleComponents.datefield(pageId.find("#filterEmpFile_toDate"+parentContainer)).clear():key!=ZPI18N.getString("zp.filesextn")||isFromModulePage||ZPeopleComponents.select(pageId.find("#filterEmpFile_format"+parentContainer)).setAttributes({selectedValue:"-1"}):ZPeopleComponents.select(pageId.find("#filterEmpFile_Folder"+parentContainer)).deselectAllOptions():((window.location.href.indexOf("operations/files/all-viewType:1/empId:")>-1||window.location.href.indexOf("operations/files/all-viewType:2/empId:")>-1||window.location.href.indexOf("operations/files/all")>-1&&window.location.href.indexOf("/empId:")>-1)&&(url=window.location.hash.substring(0,window.location.hash.lastIndexOf("/empId:")),window.location.href=url),FilesOperations.EmpFiles.EmpSearch.reset())},isValid:function(){var pageId=settingsPage.container.find("#empFile_filterModal").parent(),parentContainer=FilesUtil.Page.getParentContainer(),isFromModulePage=FilesUtil.Page.isModulePage(),fileName=pageId.find("#filterEmpFile_name"+parentContainer).val();if(null!=fileName&&void 0!=fileName&&""!=fileName)return!0;if(settingsUrlProps.url.indexOf("-catId")<=0&&!isFromModulePage){var folderId=ZPeopleComponents.select(pageId.find("#filterEmpFile_Folder"+parentContainer)).getValue();if(null!=folderId&&void 0!=folderId&&""!=folderId&&"-1"!=folderId)return!0}var filterByVal="";if(parentContainer==FilesUtil.Page.pageIdMap.ALL){if("0"==(filterByVal=ZPeopleComponents.select("#filterEmpFile_view"+parentContainer).getValue())&&(searchByEmp=FilesOperations.EmpFiles.EmpSearch.actEmpSearchObj[2]),"5"==filterByVal&&(searchByEmp=FilesOperations.EmpFiles.EmpSearch.inactEmpSearchObj[2]),"8"==filterByVal&&(searchByEmp=FilesOperations.EmpFiles.EmpSearch.logDisEmpSearchObj[2]),null!=searchByEmp&&void 0!=searchByEmp&&""!=searchByEmp)return!0;if(null!=(fileView=ZPeopleComponents.select(pageId.find("#filterEmpFile_view"+parentContainer)).getValue())&&void 0!=fileView&&""!=fileView&&"0"!=fileView)return!0;if("3"!=fileView){var entId="-1";if(ZPeopleComponents.isComponent(pageId.find("#filterEmpFile_Entity"+parentContainer))&&(entId=ZPeopleComponents.select(pageId.find("#filterEmpFile_Entity"+parentContainer)).getValue()),null!=entId&&void 0!=entId&&""!=entId&&"-1"!=entId)return!0;var unitId="-1";if(ZPeopleComponents.isComponent(pageId.find("#filterEmpFile_Unit"+parentContainer))&&(unitId=ZPeopleComponents.select(pageId.find("#filterEmpFile_Unit"+parentContainer)).getValue()),null!=unitId&&void 0!=unitId&&""!=unitId&&"-1"!=unitId)return!0;var divId="-1";if(ZPeopleComponents.isComponent(pageId.find("#filterEmpFile_Division"+parentContainer))&&(divId=ZPeopleComponents.select(pageId.find("#filterEmpFile_Division"+parentContainer)).getValue()),null!=divId&&void 0!=divId&&""!=divId&&"-1"!=divId)return!0;var deptId="-1";if(ZPeopleComponents.isComponent(pageId.find("#filterEmpFile_Department"+parentContainer))&&(deptId=ZPeopleComponents.select(pageId.find("#filterEmpFile_Department"+parentContainer)).getValue()),null!=deptId&&void 0!=deptId&&""!=deptId&&"-1"!=deptId)return!0;var locId="-";if(ZPeopleComponents.isComponent(pageId.find("#filterEmpFile_Location"+parentContainer))&&(locId=ZPeopleComponents.select(pageId.find("#filterEmpFile_Location"+parentContainer)).getValue()),null!=locId&&void 0!=locId&&""!=locId&&"-1"!=locId)return!0}else if("3"==fileView){var roleId="-1";if(ZPeopleComponents.isComponent(pageId.find("#filterEmpFile_Role"+parentContainer))&&(roleId=ZPeopleComponents.select(pageId.find("#filterEmpFile_Role"+parentContainer)).getValue()),null!=roleId&&void 0!=roleId&&""!=roleId&&"-1"!=roleId)return!0}}else if(parentContainer===FilesUtil.Page.pageIdMap_mod.SUB){var searchByEmp;if(null!==FilesUtil.hasAllReporteePerm&&void 0!==FilesUtil.hasAllReporteePerm&&!0===FilesUtil.hasAllReporteePerm)"6"==(filterByVal=ZPeopleComponents.select("#filterEmpFile_view"+parentContainer).getValue())?searchByEmp=FilesOperations.EmpFiles.EmpSearch.subEmpSearchObj[2]:"7"==filterByVal&&(searchByEmp=FilesOperations.EmpFiles.EmpSearch.allsubEmpSearchObj[2]);else searchByEmp=FilesOperations.EmpFiles.EmpSearch.subEmpSearchObj[2];if(null!=searchByEmp&&void 0!=searchByEmp&&""!=searchByEmp)return!0;var fileView="";if(null!==FilesUtil.hasAllReporteePerm&&void 0!==FilesUtil.hasAllReporteePerm&&!0===FilesUtil.hasAllReporteePerm&&(fileView=ZPeopleComponents.select(pageId.find("#filterEmpFile_view"+parentContainer)).getValue()),null!=fileView&&void 0!=fileView&&""!=fileView&&"7"!=fileView)return!0}var fromDate=ZPeopleComponents.datefield(pageId.find("#filterEmpFile_fromDate"+parentContainer)).getValue().dateString;if(null!=fromDate&&void 0!=fromDate&&""!=fromDate&&"-1"!=fromDate)return!0;var toDate=ZPeopleComponents.datefield(pageId.find("#filterEmpFile_toDate"+parentContainer)).getValue().dateString;if(null!=toDate&&void 0!=toDate&&""!=toDate&&"-1"!=toDate)return!0;if(!isFromModulePage){var format=ZPeopleComponents.select(pageId.find("#filterEmpFile_format"+parentContainer)).getValue();if(null!=format&&void 0!=format&&""!=format&&"-1"!=format)return!0}return!1},search:function(){var parentContainer=FilesUtil.Page.getParentContainer(),isFromModulePage=FilesUtil.Page.isModulePage(),fileName=(pageId=settingsPage.container.find("#empFile_filterModal").parent()).find("#filterEmpFile_name"+parentContainer).val(),catId="";if(!isFromModulePage){if(settingsUrlProps.url.indexOf("-catId")>-1)catId=Layout.Page.urlparam.catId;else{var catIdVal=ZPeopleComponents.select(pageId.find("#filterEmpFile_Folder"+parentContainer)).getValue();catId=""==catIdVal||void 0==catIdVal?"":catIdVal}var fileExtn=ZPeopleComponents.select(pageId.find("#filterEmpFile_format"+parentContainer)).getValue()}var fromDate=ZPeopleComponents.datefield(pageId.find("#filterEmpFile_fromDate"+parentContainer)).getValue().dateString,toDate=ZPeopleComponents.datefield(pageId.find("#filterEmpFile_toDate"+parentContainer)).getValue().dateString,subPageElement=(parentContainer=FilesUtil.Page.getParentContainer(),FilesUtil.Page.getPageData(parentContainer,"2"));subPageElement[7]=0,subPageElement[8]=!0;var searchByEmp="-1",searchByRole="-1",searchByEnt="-1",searchByUnit="-1",searchByDiv="-1",searchByDept="-1",searchByLoc="-1",filterByVal="";(parentContainer==FilesUtil.Page.pageIdMap.ALL||parentContainer==FilesUtil.Page.pageIdMap_mod.SUB&&null!==FilesUtil.hasAllReporteePerm&&void 0!==FilesUtil.hasAllReporteePerm&&!0===FilesUtil.hasAllReporteePerm)&&(filterByVal=ZPeopleComponents.select("#filterEmpFile_view"+parentContainer).getValue()),parentContainer===FilesUtil.Page.pageIdMap.ALL?"3"==filterByVal?(filterBy=FilesOperations.filterBy.ALLROLE,searchByRole=ZPeopleComponents.select(pageId.find("#filterEmpFile_Role"+parentContainer)).getValue()):"0"!=filterByVal&&"5"!=filterByVal&&"8"!=filterByVal||("0"==filterByVal&&(filterBy=FilesOperations.filterBy.ALL,searchByEmp=FilesOperations.EmpFiles.EmpSearch.actEmpSearchObj[2]),"5"==filterByVal&&(filterBy=FilesOperations.filterBy.INACT,searchByEmp=FilesOperations.EmpFiles.EmpSearch.inactEmpSearchObj[2]),"8"==filterByVal&&(filterBy=FilesOperations.filterBy.LOGDIS,searchByEmp=FilesOperations.EmpFiles.EmpSearch.logDisEmpSearchObj[2]),ZPeopleComponents.isComponent(pageId.find("#filterEmpFile_Entity"+parentContainer))&&(searchByEnt=ZPeopleComponents.select(pageId.find("#filterEmpFile_Entity"+parentContainer)).getValue()),ZPeopleComponents.isComponent(pageId.find("#filterEmpFile_Unit"+parentContainer))&&(searchByUnit=ZPeopleComponents.select(pageId.find("#filterEmpFile_Unit"+parentContainer)).getValue()),ZPeopleComponents.isComponent(pageId.find("#filterEmpFile_Division"+parentContainer))&&(searchByDiv=ZPeopleComponents.select(pageId.find("#filterEmpFile_Division"+parentContainer)).getValue()),ZPeopleComponents.isComponent(pageId.find("#filterEmpFile_Department"+parentContainer))&&(searchByDept=ZPeopleComponents.select(pageId.find("#filterEmpFile_Department"+parentContainer)).getValue()),ZPeopleComponents.isComponent(pageId.find("#filterEmpFile_Location"+parentContainer))&&(searchByLoc=ZPeopleComponents.select(pageId.find("#filterEmpFile_Location"+parentContainer)).getValue())):parentContainer===FilesUtil.Page.pageIdMap_mod.MY?filterBy=FilesOperations.filterBy.My:parentContainer===FilesUtil.Page.pageIdMap_mod.ROLE?filterBy=FilesOperations.filterBy.MYROLE:parentContainer!==FilesUtil.Page.pageIdMap_mod.TEAM&&parentContainer!==FilesUtil.Page.pageIdMap_mod.SUB||("6"==filterByVal?(filterBy=FilesOperations.filterBy.SUB,searchByEmp=FilesOperations.EmpFiles.EmpSearch.subEmpSearchObj[2]):"7"==filterByVal?(filterBy=FilesOperations.filterBy.ALLSUB,searchByEmp=FilesOperations.EmpFiles.EmpSearch.allsubEmpSearchObj[2]):(filterBy=FilesOperations.filterBy.SUB,searchByEmp=FilesOperations.EmpFiles.EmpSearch.subEmpSearchObj[2]));var searchObj={catId:catId,fileType:FilesUtil.FILETYPE.EMPFILE,filterBy:filterBy,conreqcsr:csrfToken,searchFileName:fileName};if(("0"==filterByVal||"5"==filterByVal||"8"==filterByVal||"7"==filterByVal||"6"==filterByVal||null!==FilesUtil.hasAllReporteePerm&&void 0!==FilesUtil.hasAllReporteePerm&&!1===FilesUtil.hasAllReporteePerm)&&null!=searchByEmp&&void 0!=searchByEmp&&""!=searchByEmp&&(searchObj.employeeId=searchByEmp),"3"==filterByVal?null!=searchByRole&&void 0!=searchByRole&&""!=searchByRole&&(searchObj.roleId=searchByRole):(null!=searchByEnt&&void 0!=searchByEnt&&""!=searchByEnt&&(searchObj.entityId=searchByEnt),null!=searchByUnit&&void 0!=searchByUnit&&""!=searchByUnit&&(searchObj.unitId=searchByUnit),null!=searchByDiv&&void 0!=searchByDiv&&""!=searchByDiv&&(searchObj.divisionId=searchByDiv),null!=searchByDept&&void 0!=searchByDept&&""!=searchByDept&&(searchObj.deptId=searchByDept),null!=searchByLoc&&void 0!=searchByLoc&&""!=searchByLoc&&(searchObj.locationId=searchByLoc)),null!=fromDate&&void 0!=fromDate&&""!=fromDate&&"-1"!=fromDate&&(searchObj.fromDate=fromDate),null!=toDate&&void 0!=toDate&&""!=toDate&&"-1"!=toDate&&(searchObj.toDate=toDate),null!=fileExtn&&void 0!=fileExtn&&""!=fileExtn&&"-1"!=fileExtn){var searchFileExtn=FilesOperations.Util.getFileExtnType(fileExtn);searchObj.searchFileExtn=searchFileExtn}subPageElement[2]=searchObj,FilesOperations.Page.setPageDataOnURLChange(catId,!0);var pageId=FilesUtil.Page.getPageId();settingsPage.container.find("#"+pageId).html(""),FilesOperations.EmpFiles.Filter.hide(),FilesOperations.Breadcrump.construct(),FilesOperations.FolderListing.getData(parentContainer)}},FilesOperations.EmpFiles.EmpSearch={actEmpSearchObj:["files_search_ActEmp",!1,"-1",""],inactEmpSearchObj:["files_search_InactEmp",!1,"-1",""],logDisEmpSearchObj:["files_search_LogDisEmp",!1,"-1",""],subEmpSearchObj:["files_search_SubEmp",!1,"-1",""],allsubEmpSearchObj:["files_search_AllSubEmp",!1,"-1",""],init:function(searchObj,parentContainer){var ele=settingsPage.container.find("#"+searchObj[0]),isCreated=searchObj[1],searchMode="",defaultValue={};parentContainer==FilesUtil.Page.pageIdMap.ALL?(searchObj[0]==FilesOperations.EmpFiles.EmpSearch.actEmpSearchObj[0]?(searchMode="FILES_ACTIVEEMP",FilesOperations.EmpFiles.EmpSearch.actEmpSearchObj[1]=!0):searchObj[0]==FilesOperations.EmpFiles.EmpSearch.inactEmpSearchObj[0]?(searchMode="FILES_INACTIVEEMP",FilesOperations.EmpFiles.EmpSearch.inactEmpSearchObj[1]=!0):searchObj[0]==FilesOperations.EmpFiles.EmpSearch.logDisEmpSearchObj[0]&&(searchMode="FILES_LOGINDISABLEDEMP",FilesOperations.EmpFiles.EmpSearch.logDisEmpSearchObj[1]=!0),defaultValue={id:"-1",text:ZPI18N.getString("zp.survey.allemployees"),html:ZPI18N.getString("zp.survey.allemployees"),value:"-1",photo:ZPeople.getResourceURL(imageUrl+"user.png")}):parentContainer==FilesUtil.Page.pageIdMap_mod.SUB&&FilesUtil.isreportingTo&&(searchObj[0]==FilesOperations.EmpFiles.EmpSearch.subEmpSearchObj[0]?(searchMode="FILES_SUBEMP",FilesOperations.EmpFiles.EmpSearch.subEmpSearchObj[1]=!0):searchObj[0]==FilesOperations.EmpFiles.EmpSearch.allsubEmpSearchObj[0]&&null!==FilesUtil.hasAllReporteePerm&&void 0!==FilesUtil.hasAllReporteePerm&&!0===FilesUtil.hasAllReporteePerm&&(searchMode="FILES_ALLSUBEMP",FilesOperations.EmpFiles.EmpSearch.allsubEmpSearchObj[1]=!0),defaultValue={id:"-1",text:ZPI18N.getString("zp.files.operations.allrep"),html:ZPI18N.getString("zp.survey.allemployees"),value:"-1",photo:ZPeople.getResourceURL(imageUrl+"user.png")});var json={ele:ele,inpFormat:"select",initCurrentUser:!1,type:1,limit:10,searchMode:searchMode,searchType:"emp",initialSelection:defaultValue,defaultOption:defaultValue,fullResponse:!0,changeCallback:FilesOperations.EmpFiles.EmpSearch.submit};0==isCreated?(ZPeopleComponents.isComponent("#"+searchObj[0])&&ZPeopleComponents.select($("#"+searchObj[0])).refresh(),ModuleComp.Search.reset(json,!0),ModuleComp.Search.create(json)):ModuleComp.Search.reset(json,!0)},getPageData:function(){var pageElement=[],parentContainer=FilesUtil.Page.getParentContainer(),pageId=settingsPage.container.find("#empFile_filterModal").parent();if(parentContainer===FilesUtil.Page.pageIdMap.ALL)"0"==(filterByVal=ZPeopleComponents.select(pageId.find("#filterEmpFile_view"+parentContainer)).getValue())?pageElement=FilesOperations.EmpFiles.EmpSearch.actEmpSearchObj:"5"==filterByVal?pageElement=FilesOperations.EmpFiles.EmpSearch.inactEmpSearchObj:"8"==filterByVal&&(pageElement=FilesOperations.EmpFiles.EmpSearch.logDisEmpSearchObj);else if(parentContainer===FilesUtil.Page.pageIdMap_mod.SUB&&FilesUtil.isreportingTo){var filterByVal;if(null!==FilesUtil.hasAllReporteePerm&&void 0!==FilesUtil.hasAllReporteePerm&&!0===FilesUtil.hasAllReporteePerm)"6"==(filterByVal=ZPeopleComponents.select(pageId.find("#filterEmpFile_view"+parentContainer)).getValue())?pageElement=FilesOperations.EmpFiles.EmpSearch.subEmpSearchObj:"7"==filterByVal&&(pageElement=FilesOperations.EmpFiles.EmpSearch.allsubEmpSearchObj);else pageElement=FilesOperations.EmpFiles.EmpSearch.subEmpSearchObj}return pageElement},submit:function(resultObj,event){var parentContainer=FilesUtil.Page.getParentContainer(),pageId=settingsPage.container.find("#empFile_filterModal").parent(),filterByVal="";null!=resultObj&&void 0!=resultObj&&""!=resultObj?parentContainer===FilesUtil.Page.pageIdMap.ALL?"0"==(filterByVal=ZPeopleComponents.select(pageId.find("#filterEmpFile_view"+parentContainer)).getValue())?(FilesOperations.EmpFiles.EmpSearch.actEmpSearchObj[2]=resultObj.id,FilesOperations.EmpFiles.EmpSearch.actEmpSearchObj[3]=resultObj.photo,FilesOperations.EmpFiles.EmpSearch.actEmpSearchObj[4]=resultObj.text):"5"==filterByVal?(FilesOperations.EmpFiles.EmpSearch.inactEmpSearchObj[2]=resultObj.id,FilesOperations.EmpFiles.EmpSearch.inactEmpSearchObj[3]=resultObj.photo,FilesOperations.EmpFiles.EmpSearch.inactEmpSearchObj[4]=resultObj.text):"8"==filterByVal&&(FilesOperations.EmpFiles.EmpSearch.logDisEmpSearchObj[2]=resultObj.id,FilesOperations.EmpFiles.EmpSearch.logDisEmpSearchObj[3]=resultObj.photo,FilesOperations.EmpFiles.EmpSearch.logDisEmpSearchObj[4]=resultObj.text):parentContainer===FilesUtil.Page.pageIdMap_mod.SUB&&FilesUtil.isreportingTo&&(null!==FilesUtil.hasAllReporteePerm&&void 0!==FilesUtil.hasAllReporteePerm&&!0===FilesUtil.hasAllReporteePerm?"6"==(filterByVal=ZPeopleComponents.select(pageId.find("#filterEmpFile_view"+parentContainer)).getValue())?(FilesOperations.EmpFiles.EmpSearch.subEmpSearchObj[2]=resultObj.id,FilesOperations.EmpFiles.EmpSearch.subEmpSearchObj[3]=resultObj.photo,FilesOperations.EmpFiles.EmpSearch.subEmpSearchObj[4]=resultObj.text):"7"==filterByVal&&(FilesOperations.EmpFiles.EmpSearch.allsubEmpSearchObj[2]=resultObj.id,FilesOperations.EmpFiles.EmpSearch.allsubEmpSearchObj[3]=resultObj.photo,FilesOperations.EmpFiles.EmpSearch.allsubEmpSearchObj[4]=resultObj.text):(FilesOperations.EmpFiles.EmpSearch.subEmpSearchObj[2]=resultObj.id,FilesOperations.EmpFiles.EmpSearch.subEmpSearchObj[3]=resultObj.photo,FilesOperations.EmpFiles.EmpSearch.subEmpSearchObj[4]=resultObj.text)):FilesOperations.EmpFiles.EmpSearch.reset()},reset:function(){var parentContainer=FilesUtil.Page.getParentContainer(),pageId=settingsPage.container.find("#empFile_filterModal").parent();if(parentContainer===FilesUtil.Page.pageIdMap.ALL)"0"==(filterByVal=ZPeopleComponents.select(pageId.find("#filterEmpFile_view"+parentContainer)).getValue())?(FilesOperations.EmpFiles.EmpSearch.actEmpSearchObj[2]="-1",FilesOperations.EmpFiles.EmpSearch.actEmpSearchObj[3]="",FilesOperations.EmpFiles.EmpSearch.actEmpSearchObj[4]="",ZPeopleComponents.select(pageId.find("#"+FilesOperations.EmpFiles.EmpSearch.actEmpSearchObj[0])).setValue("-1")):"5"==filterByVal?(FilesOperations.EmpFiles.EmpSearch.inactEmpSearchObj[2]="-1",FilesOperations.EmpFiles.EmpSearch.inactEmpSearchObj[3]="",FilesOperations.EmpFiles.EmpSearch.inactEmpSearchObj[4]="",ZPeopleComponents.select(pageId.find("#"+FilesOperations.EmpFiles.EmpSearch.inactEmpSearchObj[0])).setValue("-1")):"8"==filterByVal&&(FilesOperations.EmpFiles.EmpSearch.logDisEmpSearchObj[2]="-1",FilesOperations.EmpFiles.EmpSearch.logDisEmpSearchObj[3]="",FilesOperations.EmpFiles.EmpSearch.logDisEmpSearchObj[4]="",ZPeopleComponents.select(pageId.find("#"+FilesOperations.EmpFiles.EmpSearch.logDisEmpSearchObj[0])).setValue("-1"));else if(parentContainer===FilesUtil.Page.pageIdMap_mod.SUB&&FilesUtil.isreportingTo){var filterByVal;if(null!==FilesUtil.hasAllReporteePerm&&void 0!==FilesUtil.hasAllReporteePerm&&!0===FilesUtil.hasAllReporteePerm)"6"==(filterByVal=ZPeopleComponents.select(pageId.find("#filterEmpFile_view"+parentContainer)).getValue())?(FilesOperations.EmpFiles.EmpSearch.subEmpSearchObj[2]="-1",FilesOperations.EmpFiles.EmpSearch.subEmpSearchObj[3]="",FilesOperations.EmpFiles.EmpSearch.subEmpSearchObj[4]="",ZPeopleComponents.select(pageId.find("#"+FilesOperations.EmpFiles.EmpSearch.subEmpSearchObj[0])).setValue("-1")):"7"==filterByVal&&(FilesOperations.EmpFiles.EmpSearch.allsubEmpSearchObj[2]="-1",FilesOperations.EmpFiles.EmpSearch.allsubEmpSearchObj[3]="",FilesOperations.EmpFiles.EmpSearch.allsubEmpSearchObj[4]="",ZPeopleComponents.select(pageId.find("#"+FilesOperations.EmpFiles.EmpSearch.allsubEmpSearchObj[0])).setValue("-1"));else FilesOperations.EmpFiles.EmpSearch.subEmpSearchObj[2]="-1",FilesOperations.EmpFiles.EmpSearch.subEmpSearchObj[3]="",FilesOperations.EmpFiles.EmpSearch.subEmpSearchObj[4]="",ZPeopleComponents.select(pageId.find("#"+FilesOperations.EmpFiles.EmpSearch.subEmpSearchObj[0])).setValue("-1")}},toggleSearchField:function(){var parentContainer=FilesUtil.Page.getParentContainer(),pageId=settingsPage.container.find("#empFile_filterModal").parent();if(parentContainer===FilesUtil.Page.pageIdMap.ALL)"0"==(filterByVal=ZPeopleComponents.select(pageId.find("#filterEmpFile_view"+parentContainer)).getValue())?(settingsPage.container.find("#"+FilesOperations.EmpFiles.EmpSearch.inactEmpSearchObj[0]).parent().addClass("zpl_DNI"),settingsPage.container.find("#"+FilesOperations.EmpFiles.EmpSearch.logDisEmpSearchObj[0]).parent().addClass("zpl_DNI"),settingsPage.container.find("#"+FilesOperations.EmpFiles.EmpSearch.actEmpSearchObj[0]).parent().removeClass("zpl_DNI"),FilesOperations.EmpFiles.EmpSearch.init(FilesOperations.EmpFiles.EmpSearch.actEmpSearchObj,parentContainer),settingsPage.container.find("#topMenu_breadCrump").removeClass("zpl_DNI")):"5"==filterByVal?(settingsPage.container.find("#"+FilesOperations.EmpFiles.EmpSearch.logDisEmpSearchObj[0]).parent().addClass("zpl_DNI"),settingsPage.container.find("#"+FilesOperations.EmpFiles.EmpSearch.actEmpSearchObj[0]).parent().addClass("zpl_DNI"),settingsPage.container.find("#"+FilesOperations.EmpFiles.EmpSearch.inactEmpSearchObj[0]).parent().removeClass("zpl_DNI"),FilesOperations.EmpFiles.EmpSearch.init(FilesOperations.EmpFiles.EmpSearch.inactEmpSearchObj,parentContainer),settingsPage.container.find("#topMenu_breadCrump").removeClass("zpl_DNI")):"8"==filterByVal?(settingsPage.container.find("#"+FilesOperations.EmpFiles.EmpSearch.actEmpSearchObj[0]).parent().addClass("zpl_DNI"),settingsPage.container.find("#"+FilesOperations.EmpFiles.EmpSearch.inactEmpSearchObj[0]).parent().addClass("zpl_DNI"),settingsPage.container.find("#"+FilesOperations.EmpFiles.EmpSearch.logDisEmpSearchObj[0]).parent().removeClass("zpl_DNI"),FilesOperations.EmpFiles.EmpSearch.init(FilesOperations.EmpFiles.EmpSearch.logDisEmpSearchObj,parentContainer),settingsPage.container.find("#topMenu_breadCrump").removeClass("zpl_DNI")):settingsPage.container.find("#topMenu_breadCrump").removeClass("zpl_DNI");else if(parentContainer===FilesUtil.Page.pageIdMap_mod.SUB&&FilesUtil.isreportingTo){var filterByVal;if(null!==FilesUtil.hasAllReporteePerm&&void 0!==FilesUtil.hasAllReporteePerm&&!0===FilesUtil.hasAllReporteePerm)"6"==(filterByVal=ZPeopleComponents.select(pageId.find("#filterEmpFile_view"+parentContainer)).getValue())?(settingsPage.container.find("#"+FilesOperations.EmpFiles.EmpSearch.allsubEmpSearchObj[0]).parent().addClass("zpl_DNI"),settingsPage.container.find("#"+FilesOperations.EmpFiles.EmpSearch.subEmpSearchObj[0]).parent().removeClass("zpl_DNI"),FilesOperations.EmpFiles.EmpSearch.init(FilesOperations.EmpFiles.EmpSearch.subEmpSearchObj,parentContainer),settingsPage.container.find("#topMenu_breadCrump").removeClass("zpl_DNI")):"7"==filterByVal&&(settingsPage.container.find("#"+FilesOperations.EmpFiles.EmpSearch.subEmpSearchObj[0]).parent().addClass("zpl_DNI"),settingsPage.container.find("#"+FilesOperations.EmpFiles.EmpSearch.allsubEmpSearchObj[0]).parent().removeClass("zpl_DNI"),FilesOperations.EmpFiles.EmpSearch.init(FilesOperations.EmpFiles.EmpSearch.allsubEmpSearchObj,parentContainer),settingsPage.container.find("#topMenu_breadCrump").removeClass("zpl_DNI"));else settingsPage.container.find("#"+FilesOperations.EmpFiles.EmpSearch.allsubEmpSearchObj[0]).parent().addClass("zpl_DNI"),settingsPage.container.find("#"+FilesOperations.EmpFiles.EmpSearch.subEmpSearchObj[0]).parent().removeClass("zpl_DNI"),FilesOperations.EmpFiles.EmpSearch.init(FilesOperations.EmpFiles.EmpSearch.subEmpSearchObj,parentContainer),settingsPage.container.find("#topMenu_breadCrump").removeClass("zpl_DNI")}}},FilesOperations.PersFiles={fetchData:function(parentContainer){var pageElement=FilesUtil.Page.getPageData(parentContainer,"1"),params={},actionMode=FilesOperations.ACTIONMODE.PERSFILE;(params=0!=Object.keys(pageElement[2]).length?pageElement[2]:{fileType:FilesUtil.FILETYPE.PERSFILE,conreqcsr:csrfToken}).start=pageElement[0],params=FilesUtil.Geo.setLatLongParams(params);var details={};details.parentContainer=parentContainer,FilesOperations.Util.manageAction(actionMode,"/zpfiles/operations/getAllFiles",params,details)},callBack:function(resultData,params,otherDetails){var respObj,parentContainer="";null!=otherDetails&&void 0!=otherDetails&&void 0!=otherDetails.parentContainer&&(parentContainer=otherDetails.parentContainer),void 0!=resultData[0]&&resultData[0].code==FilesUtil.IP.errorCode?FilesUtil.IP.showError(!1):void 0!=resultData[0]&&resultData[0].code==FilesUtil.Geo.errorCode?FilesUtil.Geo.showError(!1):void 0==resultData[1]?FilesOperations.DataPage.showNoData():(respObj=resultData[1].filesList,FilesOperations.PersFiles.construct(respObj,void 0,parentContainer))},construct:function(resultData,mode,parentContainer){var parseObj=resultData,dataLimit=parseObj.length,pageId=settingsPage.container.find("#persFileListView"+parentContainer),pageElement=FilesUtil.Page.getPageData(parentContainer,"1");if(parseObj.length<25?(dataLimit=parseObj.length,pageElement[1]=!1):(dataLimit=parseObj.length-1,pageElement[1]=!0),0==pageElement[0]&&pageId.empty(),parseObj.length>0){FilesOperations.DataPage.hideLoadingPage(),settingsPage.container.find("#addFileBtn").removeClass("zpl_DNI");for(var i=0;i<dataLimit;i++){var data=parseObj[i],fileId=data.fileID,fileExtn=data.fileExtn,filePath=data.filePath,fileName=data.fileName;fileExtn=FilesUtil.Page.getFileExtn(fileExtn,filePath,data.UploadSource),data.fileExtn=fileExtn;var rowId="persFileTr_"+fileId,row='<tr id="'+rowId+'" fileName = "'+ZSEC.Encoder.encodeForHTMLAttribute(fileName)+'" fileID = "'+fileId+'"  uploadFileExtn = "'+fileExtn+'">';row+='<td scope="row"><div class="zcheckbox">',row+='<input id="chkBox_'+fileId+'" type="checkbox" name="check" value="" class="zcheckbox__helper">',row+="<label onclick=\"FilesOperations.Util.selectAll('chkBox_"+fileId+'\' ,false);" class="zcheckbox__label"></label>',row+="</div></td>",row+='<td id="persFileNameTd_'+fileId+'" fileName = "'+ZSEC.Encoder.encodeForHTMLAttribute(fileName)+'" fileID = "'+fileId+'"scope="row">',row+='<div class="d-flexC d-flexclmcap10" onclick="FilesOperations.Preview.initLightBox(this);" role="button" >',row+='<i class="'+FileUpload.getFileIcon(fileExtn)+'"></i>',row+="<span>"+ZSEC.Encoder.encodeForHTML(fileName)+"</span>",row+="</div></td>",row+="<td><span>"+data.fileModifiedDate+"</span></td>",row+="<td><span>"+data.fileSize+"</span></td>",row+='<td><div class="text-center">',row+=' <div class="zpl_hvr">',row+='<i class="PI_downld" data-title-position="bottom" title="'+ZPI18N.getString("zp.Download")+'" onclick="FilesOperations.DownloadPrint.downloadFile(\''+fileId+'\');" name="deleteElm" role="button" aria-label="'+ZPI18N.getString("zp.Download")+'" tabindex="0"></i>';var moreActionData=FilesOperations.Util.getMoreActionList(JSON.stringify(data));if(moreActionData.length>0)row+='<i id="'+("moreAction_"+data.fileID+parentContainer)+'" onclick="FilesOperations.Util.showActions(this, \''+rowId+'\');" type="button" class="PI_more zpl_drpdwn-js" data-title-position="bottom" title="'+ZPI18N.getString("zp.files.operations.moreactions")+'" role="button" aria-label="'+ZPI18N.getString("zp.files.operations.moreactions")+'" tabindex="0"></i>',data.actionsList=moreActionData;row+="</div></div></td>",row+="</tr>",(row=$(row)).data("ldata",data),pageId.append(row)}}if(0==pageElement[0]&&0==pageElement[1]&&parseObj.length<=0?FilesOperations.DataPage.showNoData():FilesOperations.DataPage.showDataTable(pageId),0==pageElement[0]?pageElement[0]=25:pageElement[0]=pageElement[0]+24,!0===pageElement[1]){var scrlObj=FilesOperations.Page.getFirescrollId();settingsPage.fireScrollObj[scrlObj].reset()}}},FilesOperations.PersFiles.Modal={uploadMode:"",ADD_MODAL:null,addPopup:function(){if(""==$("#"+FilesOperations.PersFiles.AddEdit.cardId).html().trim()){var popup="";popup+='<div class="zpl_crd"><div class="zpl_crdhdr"><div><h4>'+ZPI18N.getString("zp.esign.uploadfile")+"</h4><p>"+ZPI18N.getString("zp.files.settings.persuploadinfo1")+'</p></div></div><div class="zpl_crdcnt"><div id="persFile_uploadFileDiv" class="zpl_secn"><div><div class="zpl_upld"><div class="zpl_fldrp"><h5><div class="zpl_flupld_img"></div><a id="addPersFile_localUpload" class="zpl_lnk" onclick="FileUpload.onSelect(this)"><i class="PI_case"></i>'+ZPI18N.getString("zp.files.desktop")+'</a> / <a class="zpl_lnk" onclick="FileUpload.CloudPicker.showModal();"><i class="PI_cloud"></i>'+ZPI18N.getString("zp.others")+"</a></h5></div><p><span>"+ZPI18N.getString("zp.files.operations.uploadfileinfo",new Array(maxFileSize_filesModule))+'</span></p></div></div></div><div class="zpl_secn zpl_DNI"><div><h5>'+ZPI18N.getString("zp.files.operations.attachedfiles")+'</h5></div><div id="persfile_uploaded"></div></div><div class="zpl_secn"><div><h6 class="zpl_mtry">'+ZPI18N.getString("zp.files.operations.filename")+'</h6></div><div><input id="addPersFile_fileName" type="text" placeholder="'+ZPI18N.getString("zp.files.operations.givefilename")+'" class="ztextbox"></div></div><div class="zpl_secn"><div><h6>'+ZPI18N.getString("zp.description")+'</h6></div><div><textarea id="addPersFile_fileDesc" class="ztextbox" rows="3"></textarea></div></div></div></div>',$("#"+FilesOperations.PersFiles.AddEdit.cardId).html(popup)}},filter:function(){var parentContainer=FilesUtil.Page.getParentContainer(),html="";html+='<div><div class="zpl_fltrhd"><h5>'+ZPI18N.getString("zp.filter")+'</h5><i class="PI_cls" onclick="FilesOperations.PersFiles.Filter.showHide();"></i></div></div><div class="zpl_fltrcnt"><div><div class="zpl_fltclps fltopn"><div class="zpl_fltrlst"><div class="zpl_secn"><div><label>'+ZPI18N.getString("zp.files.operations.filename")+'</label></div><div><input id="filterPersFile_name'+parentContainer+'" type="text" class="ztextbox" placeholder="'+ZPI18N.getString("zp.files.operations.filter.filenameinfo")+'"></div></div><div class="zpl_secn"><div><label>'+ZPI18N.getString("zp.filesextn")+'</label></div><div><select id="filterPersFile_format'+parentContainer+'" data-show-search-field="true"></select></div></div><div class="zpl_secn"><div><label>'+ZPI18N.getString("zp.from")+'</label></div><div><input id="filterPersFile_fromDate'+parentContainer+'" data-format="'+dateFmt+'" data-picker="true" data-calendar-icon="true" data-spin-buttons="none"></div></div><div class="zpl_secn"><div><label>'+ZPI18N.getString("zp.to")+'</label></div><div><input id="filterPersFile_toDate'+parentContainer+'" data-format="'+dateFmt+'" data-picker="true" data-calendar-icon="true" data-spin-buttons="none"></div></div></div></div></div></div><div><button id="persFileFilter_search" onclick="FilesOperations.PersFiles.Filter.search();" class="zlabel zlabel--blue zlabel--medium">'+ZPI18N.getString("zp.apply")+'</button><button id="persFileFilter_reset" onclick="FilesOperations.PersFiles.Filter.reset();" class="zlabel zlabel--outline zlabel--medium">'+ZPI18N.getString("zp.reset")+"</button></div>",settingsPage.container.find("#persFile_filterModal").html(html)}},FilesOperations.PersFiles.AddEdit={editFileId:"0",popupId:"addPersFile",modelId:"tabaddPersFile",cardId:"cardaddPersFile",popupName:"",show:function(mode,rowId){FilesOperations.PersFiles.AddEdit.popupName="edit"===mode?ZPI18N.getString("zp.editpersonalfiles"):ZPI18N.getString("zp.addpersonalfiles");var modelLen=$("#"+FilesOperations.PersFiles.AddEdit.modelId).length;if(0==modelLen){var popupTab=new Tab(FilesOperations.PersFiles.AddEdit.popupId,FilesOperations.PersFiles.Modal.addPopup,FilesOperations.PersFiles.AddEdit.update);FilesOperations.PersFiles.Modal.ADD_MODAL=new sliderModal(FilesOperations.PersFiles.AddEdit.popupName,popupTab)}FilesOperations.PersFiles.Modal.ADD_MODAL.setCloseCallback(FilesOperations.PersFiles.AddEdit.hide),FilesOperations.PersFiles.Modal.ADD_MODAL.construct(),$(settingsPage.mainWrapId).find("#"+FilesOperations.PersFiles.AddEdit.modelId).find("#sliderSbt").removeClass("disabled"),0!=modelLen&&$("#"+FilesOperations.PersFiles.AddEdit.modelId).find("#sliHdrDiv").find("h4").text(FilesOperations.PersFiles.AddEdit.popupName),FilesOperations.PersFiles.AddEdit.editFileId="0",FilesOperations.PersFiles.AddEdit.clearFields(),"edit"===mode&&FilesOperations.PersFiles.AddEdit.setFieldValues(rowId)},hide:function(){FilesOperations.PersFiles.AddEdit.clearFields(),$(settingsPage.mainWrapId).find("#"+FilesOperations.PersFiles.AddEdit.modelId).remove()},clearFields:function(){var pageId=$("#"+FilesOperations.PersFiles.AddEdit.cardId);pageId.find(".ztextbox--error__label").remove(),pageId.find(".ztextbox__error").removeClass("ztextbox__error"),FileUpload.removeFile(),pageId.find("#addPersFile_fileName").val(""),pageId.find("#addPersFile_fileDesc").val("")},setFieldValues:function(rowId){var editData=settingsPage.container.find("#"+rowId).data().ldata,pageId=$("#"+FilesOperations.PersFiles.AddEdit.cardId);FilesOperations.PersFiles.AddEdit.editFileId=editData.fileID;var fileName=editData.fileName,fileExtn=FilesUtil.Page.getFileExtn(editData.fileExtn,editData.filePath,editData.UploadSource);FileUpload.attachFile(fileName,fileExtn),pageId.find("#addPersFile_fileName").val(fileName),"null"!=editData.fileDesc&&void 0!=editData.fileDesc&&""!=editData.fileDesc&&pageId.find("#addPersFile_fileDesc").val(editData.fileDesc)},update:function(){var errflag=!1,pageId=$("#"+FilesOperations.PersFiles.AddEdit.cardId);pageId.find(".ztextbox--error__label").remove(),pageId.find(".ztextbox__error").removeClass("ztextbox__error");var fileName=pageId.find("#addPersFile_fileName").val().trim(),fileDesc=pageId.find("#addPersFile_fileDesc").val().trim();if(-1!=fileName.indexOf(",")&&(fileName=fileName.replace(/,/g,"_")),-1!=fileName.indexOf(",")&&(fileName=fileName.replace(/,/g,"")),"exe"==fileName.substr(fileName.lastIndexOf(".")+1,fileName.length).toLowerCase()&&(ZPeople.Message.failure(ZPI18N.getString("zp.exefileerror")),errflag=!0),""==fileName&&(pageId.find("#addPersFile_fileName").addClass("ztextbox__error"),pageId.find("#addPersFile_fileName").after('<span class="ztextbox--error__label">'+ZPI18N.getString("zp.files.operations.filter.filenameinfo")+"</span>"),errflag=!0),fileName.length>250&&(pageId.find("#addPersFile_fileName").addClass("ztextbox__error"),pageId.find("#addPersFile_fileName").after('<span class="ztextbox--error__label">'+ZPI18N.getString("zp.files.operations.fnamelimit")+"</span>"),errflag=!0),fileDesc.length>250&&(pageId.find("#addPersFile_fileDesc").addClass("ztextbox__error"),pageId.find("#addPersFile_fileDesc").after('<span class="ztextbox--error__label">'+ZPI18N.getString("zp.files.operations.desclimit")+"</span>"),errflag=!0),-1==fileName.indexOf("<")&&-1==fileName.indexOf(">")&&-1==fileName.indexOf("&lt;")&&-1==fileName.indexOf("&gt;")||(ZPeople.Message.failure(ZPI18N.getString("zp.files.operations.avoidchar",new Array(ZPI18N.getString("zp.files.operations.filename")))),errflag=!0),-1==fileDesc.indexOf("<")&&-1==fileDesc.indexOf(">")&&-1==fileName.indexOf("&lt;")&&-1==fileName.indexOf("&gt;")||(ZPeople.Message.failure(ZPI18N.getString("zp.files.operations.avoidchar",new Array(ZPI18N.getString("zp.description")))),errflag=!0),"0"!=FilesOperations.PersFiles.AddEdit.editFileId||null!=FileUpload.uploadMode&&void 0!=FileUpload.uploadMode&&""!=FileUpload.uploadMode||(ZPeople.Message.failure(ZPI18N.getString("zp.files.operations.selectfile")),errflag=!0),errflag)return!1;$(settingsPage.mainWrapId).find("#"+FilesOperations.PersFiles.AddEdit.modelId).find("#sliderSbt").addClass("disabled");var formData=new FormData;formData.append("conreqcsr",csrfToken),formData.append("fileName",fileName),formData.append("fileDesc",fileDesc),formData.append("fileType","2"),formData.append("editFileId",FilesOperations.PersFiles.AddEdit.editFileId),formData.append("uploadMode",FileUpload.uploadMode),"localUpload"==FileUpload.uploadMode&&(formData.append("importFileId",FileUpload.udsParams.fileId),formData.append("fileVersion",FileUpload.udsParams.fileVersion)),"cloudUpload"==FileUpload.uploadMode&&formData.append("cloudUploadDoc",JSON.stringify(FileUpload.CloudPicker.UPLOADOBJ)),formData=FilesUtil.Geo.setLatLongParams(formData,!0),$.ajax({url:"/zpfiles/operations/addFile",type:"POST",data:formData,contentType:!1,processData:!1,success:function(data){FilesOperations.PersFiles.Modal.ADD_MODAL.close();var editId=FilesOperations.PersFiles.AddEdit.editFileId;null!=editId&&void 0!=editId&&""!=editId&&"0"!=editId&&"-1"!=editId?ZPeople.Message.success(ZPI18N.getString("zp.updatefile")):ZPeople.Message.success(ZPI18N.getString("zp.addfile")),settingsUrlProps.url.indexOf("myspace/overview-files")>-1?FilesHome.FilesTab.loadFiles(settingsPage.container):FilesOperations.Page.reloadOtherPages()},error:function(req){var errResponse=req.responseJSON[1];8103!==req.status&&8101!==req.status&&500!==req.status||ZPeople.Message.failure(errResponse.msg),FilesOperations.PersFiles.Modal.ADD_MODAL.close()}})}},FilesOperations.PersFiles.Filter={showHide:function(){if(FilesUtil.IP.isRestricted)FilesUtil.IP.showError(!0);else if(FilesUtil.Geo.isRestricted)FilesUtil.Geo.showError(!0);else if(settingsPage.container.find("#persFile_filterModal").parent().hasClass("zpl_fltr_flt"))FilesOperations.PersFiles.Filter.hide();else{0==settingsPage.container.find("#persFile_filterModal").find(".zpl_fltrhd").length&&(FilesOperations.PersFiles.Modal.filter(),FilesOperations.PersFiles.Filter.init()),settingsPage.container.find("#persFile_filterModal").parent().addClass("zpl_fltr_flt");var parentContainer=FilesUtil.Page.getParentContainer();settingsPage.container.find("#persFile_filterModal").find("#filterPersFile_name"+parentContainer).focus()}},hide:function(){settingsPage.container.find("#persFile_filterModal").parent().removeClass("zpl_fltr_flt")},init:function(){var parentContainer=FilesUtil.Page.getParentContainer();ZPeopleComponents.datefield(settingsPage.container.find("#filterPersFile_fromDate"+parentContainer)).setAttributes({placeholder:dateFmt}),ZPeopleComponents.datefield(settingsPage.container.find("#filterPersFile_toDate"+parentContainer)).setAttributes({placeholder:dateFmt}),FilesOperations.Util.fileFilterFileFormat("filterPersFile_format"+parentContainer)},reset:function(key){var parentContainer=FilesUtil.Page.getParentContainer(),pageId=settingsPage.container.find("#persFile_filterModal").parent();void 0==key?(pageId.find("#filterPersFile_name"+parentContainer).val(""),ZPeopleComponents.datefield(pageId.find("#filterPersFile_fromDate"+parentContainer)).clear(),ZPeopleComponents.datefield(pageId.find("#filterPersFile_toDate"+parentContainer)).clear(),ZPeopleComponents.select(pageId.find("#filterPersFile_format"+parentContainer)).deselectAllOptions()):key==ZPI18N.getString("zp.files.operations.filename")?pageId.find("#filterPersFile_name"+parentContainer).val(""):key==ZPI18N.getString("zp.from")?ZPeopleComponents.datefield(pageId.find("#filterPersFile_fromDate"+parentContainer)).clear():key==ZPI18N.getString("zp.to")?ZPeopleComponents.datefield(pageId.find("#filterPersFile_toDate"+parentContainer)).clear():key==ZPI18N.getString("zp.filesextn")&&ZPeopleComponents.select(pageId.find("#filterPersFile_format"+parentContainer)).deselectAllOptions()},isValid:function(){var parentContainer=FilesUtil.Page.getParentContainer(),pageId=settingsPage.container.find("#persFile_filterModal").parent(),fileName=pageId.find("#filterPersFile_name"+parentContainer).val();if(null!=fileName&&void 0!=fileName&&""!=fileName)return!0;var fromDate=ZPeopleComponents.datefield(pageId.find("#filterPersFile_fromDate"+parentContainer)).getValue().dateString;if(null!=fromDate&&void 0!=fromDate&&""!=fromDate&&"-1"!=fromDate)return!0;var toDate=ZPeopleComponents.datefield(pageId.find("#filterPersFile_toDate"+parentContainer)).getValue().dateString;if(null!=toDate&&void 0!=toDate&&""!=toDate&&"-1"!=toDate)return!0;var format=ZPeopleComponents.select(pageId.find("#filterPersFile_format"+parentContainer)).getValue();return null!=format&&void 0!=format&&""!=format&&"-1"!=format},search:function(){var parentContainer=FilesUtil.Page.getParentContainer(),fileName=(pageId=settingsPage.container.find("#persFile_filterModal").parent()).find("#filterPersFile_name"+parentContainer).val(),fromDate=ZPeopleComponents.datefield(pageId.find("#filterPersFile_fromDate"+parentContainer)).getValue().dateString,toDate=ZPeopleComponents.datefield(pageId.find("#filterPersFile_toDate"+parentContainer)).getValue().dateString,fileExtn=ZPeopleComponents.select(pageId.find("#filterPersFile_format"+parentContainer)).getValue();FilesOperations.Page.resetDefaultParams("1");var pageElement=FilesUtil.Page.getPageData(parentContainer,"1"),searchObj={fileType:FilesUtil.FILETYPE.PERSFILE,conreqcsr:csrfToken,searchFileName:fileName,start:pageElement[0]};if(null!=fromDate&&void 0!=fromDate&&""!=fromDate&&"-1"!=fromDate&&(searchObj.fromDate=fromDate),null!=toDate&&void 0!=toDate&&""!=toDate&&"-1"!=toDate&&(searchObj.toDate=toDate),null!=fileExtn&&void 0!=fileExtn&&""!=fileExtn&&"-1"!=fileExtn){var searchFileExtn=FilesOperations.Util.getFileExtnType(fileExtn);searchObj.searchFileExtn=searchFileExtn}pageElement[2]=searchObj;var pageId=FilesUtil.Page.getPageId();settingsPage.container.find("#"+pageId).html(""),FilesOperations.PersFiles.Filter.hide(),FilesOperations.Breadcrump.construct(),FilesOperations.FolderListing.getData(parentContainer)}},FilesOperations.TeamFiles={showProfile:()=>{var employeeId=Layout.Page.urlparam.empId;if(employeeId){FilesOperations.Page.resetDefaultParams("1"),Layout.Page.pageContWrapper.find(".zpl_cstmProfNav").addClass("zpl_profIn zpl_noNav");var userDtls=ZPeople.getUserDetailsById(employeeId);if(userDtls&&userDtls.usererec)return'<div class="zpl_usrprfdv" name="header-profile">'+Layout.Page.Header.getUser(userDtls,"#files/team/members")+"</div>"}}},FilesOperations.Breadcrump={getData:function(){var breadcrump={},parentContainer=FilesUtil.Page.getParentContainer(),tabGroup=FilesUtil.Page.getTabGroup(),pageData=FilesUtil.Page.getPageData(parentContainer,"2");"2"==tabGroup&&(pageData=FilesUtil.Page.getPageData(parentContainer,"1"));var searchData=pageData[2];if(window.location.href.indexOf("operations/files/all-viewType:1/empId:")>-1||window.location.href.indexOf("operations/files/all-viewType:2/empId:")>-1||window.location.href.indexOf("operations/files/all")>-1&&window.location.href.indexOf("/empId:")>-1){var empIdSearch=settingsUrlProps.urlParamsArr.empId;searchData.employeeId=empIdSearch}if(Object.keys(searchData).length>0){if("1"===tabGroup?(null!=searchData.isExpiredFilesView&&""!=searchData.isExpiredFilesView&&void 0!=searchData.isExpiredFilesView&&!0===searchData.isExpiredFilesView&&(breadcrump[ZPI18N.getString("zp.files.operations.filter.fileview")]=ZPI18N.getString("zp.expiredcompfiles")),void 0!=searchData.locationId&&null!=searchData.locationId&&""!=searchData.locationId&&"-1"!=searchData.locationId&&(breadcrump[ZPI18N.getString("zp.location")]=ZPeopleComponents.select($("#filterOrgFile_loc"+parentContainer)).getElement().find(".zselectbox__text").text()),void 0!=searchData.entityId&&null!=searchData.entityId&&""!=searchData.entityId&&"-1"!=searchData.entityId&&(breadcrump[ZPeople.orgStructureDispNameMap.entity]=FilesOperations.Util.getNodeValue(FilesUtil.sharingOpts.Entity,searchData.entityId)),void 0!=searchData.unitId&&null!=searchData.unitId&&""!=searchData.unitId&&"-1"!=searchData.unitId&&(breadcrump[ZPeople.orgStructureDispNameMap.unit]=FilesOperations.Util.getNodeValue(FilesUtil.sharingOpts.Unit,searchData.unitId)),void 0!=searchData.divisionId&&null!=searchData.divisionId&&""!=searchData.divisionId&&"-1"!=searchData.divisionId&&(breadcrump[ZPeople.orgStructureDispNameMap.division]=FilesOperations.Util.getNodeValue(FilesUtil.sharingOpts.Division,searchData.divisionId)),void 0!=searchData.deptId&&null!=searchData.deptId&&""!=searchData.deptId&&"-1"!=searchData.deptId&&(breadcrump[ZPeople.orgStructureDispNameMap.department]=FilesOperations.Util.getNodeValue(FilesUtil.sharingOpts.Department,searchData.deptId))):"0"===tabGroup&&(parentContainer==FilesUtil.Page.pageIdMap.ALL?(null!=searchData.filterBy||""!=searchData.filterBy&&void 0!=searchData.filterBy)&&("all"===searchData.filterBy?""!=FilesOperations.EmpFiles.EmpSearch.actEmpSearchObj[4]&&(breadcrump[ZPI18N.getString("zp.employee")]=FilesOperations.EmpFiles.EmpSearch.actEmpSearchObj[4]):"inactiveemp"===searchData.filterBy?(breadcrump[ZPI18N.getString("zp.files.operations.filter.fileview")]=ZPI18N.getString("zp.files.operations.inactempview"),""!=FilesOperations.EmpFiles.EmpSearch.inactEmpSearchObj[4]&&(breadcrump[ZPI18N.getString("zp.employee")]=FilesOperations.EmpFiles.EmpSearch.inactEmpSearchObj[4])):"logindisabled"===searchData.filterBy?(breadcrump[ZPI18N.getString("zp.files.operations.filter.fileview")]=ZPI18N.getString("zp.files.operations.disempview"),""!=FilesOperations.EmpFiles.EmpSearch.logDisEmpSearchObj[4]&&(breadcrump[ZPI18N.getString("zp.employee")]=FilesOperations.EmpFiles.EmpSearch.logDisEmpSearchObj[4])):"allrole"===searchData.filterBy&&(breadcrump[ZPI18N.getString("zp.files.operations.filter.fileview")]=ZPI18N.getString("zp.role"),null!=searchData.roleId&&void 0!=searchData.roleId&&""!=searchData.roleId&&"-1"!=searchData.roleId&&(breadcrump[ZPI18N.getString("zp.role")]=FilesOperations.Util.getNodeValue(FilesUtil.locRoleData[1],searchData.roleId,!0)))):parentContainer==FilesUtil.Page.pageIdMap_mod.SUB&&(null!=searchData.filterBy||""!=searchData.filterBy&&void 0!=searchData.filterBy)&&(null!==FilesUtil.hasAllReporteePerm&&void 0!==FilesUtil.hasAllReporteePerm&&!0===FilesUtil.hasAllReporteePerm?"subordinates"===searchData.filterBy?(breadcrump[ZPI18N.getString("zp.files.operations.filter.fileview")]=ZPI18N.getString("zp.directreportees"),""!=FilesOperations.EmpFiles.EmpSearch.subEmpSearchObj[4]&&(breadcrump[ZPI18N.getString("zp.employee")]=FilesOperations.EmpFiles.EmpSearch.subEmpSearchObj[4])):""!=FilesOperations.EmpFiles.EmpSearch.allsubEmpSearchObj[4]&&(breadcrump[ZPI18N.getString("zp.employee")]=FilesOperations.EmpFiles.EmpSearch.allsubEmpSearchObj[4]):""!=FilesOperations.EmpFiles.EmpSearch.subEmpSearchObj[4]&&(breadcrump[ZPI18N.getString("zp.employee")]=FilesOperations.EmpFiles.EmpSearch.subEmpSearchObj[4])),parentContainer==FilesUtil.Page.pageIdMap.ALL&&(isOrgStructureEnabled&&(null!=searchData.entityId&&void 0!=searchData.entityId&&""!=searchData.entityId&&"-1"!=searchData.entityId&&(breadcrump[ZPeople.orgStructureDispNameMap.entity]=ZPeopleComponents.select($("#filterEmpFile_Entity"+parentContainer)).getElement().find(".zselectbox__text").text()),null!=searchData.unitId&&void 0!=searchData.unitId&&""!=searchData.unitId&&"-1"!=searchData.unitId&&(breadcrump[ZPeople.orgStructureDispNameMap.unit]=ZPeopleComponents.select($("#filterEmpFile_Unit"+parentContainer)).getElement().find(".zselectbox__text").text()),null!=searchData.divisionId&&void 0!=searchData.divisionId&&""!=searchData.divisionId&&"-1"!=searchData.divisionId&&(breadcrump[ZPeople.orgStructureDispNameMap.division]=ZPeopleComponents.select($("#filterEmpFile_Division"+parentContainer)).getElement().find(".zselectbox__text").text())),null!=searchData.deptId&&void 0!=searchData.deptId&&""!=searchData.deptId&&"-1"!=searchData.deptId&&(breadcrump[ZPeople.orgStructureDispNameMap.department]=ZPeopleComponents.select($("#filterEmpFile_Department"+parentContainer)).getElement().find(".zselectbox__text").text()),null!=searchData.locationId&&"-1"!=searchData.locationId&&""!=searchData.locationId&&void 0!=searchData.locationId&&(breadcrump[ZPI18N.getString("zp.location")]=ZPeopleComponents.select($("#filterEmpFile_Location"+parentContainer)).getElement().find(".zselectbox__text").text()))),settingsUrlProps.url.indexOf("-catId")<=-1&&null!=searchData.catId&&"-1"!=searchData.catId&&""!=searchData.catId&&void 0!=searchData.catId){var folderEle="1"==tabGroup?"filterOrgFile_Folder":"filterEmpFile_Folder";breadcrump[ZPI18N.getString("zp.folder")]=ZPeopleComponents.select($("#"+folderEle+parentContainer)).getElement().find(".zselectbox__text").text()}null!=searchData.fromDate&&""!=searchData.fromDate&&"-1"!=searchData.fromDate&&void 0!=searchData.fromDate&&(breadcrump[ZPI18N.getString("zp.from")]=searchData.fromDate),null!=searchData.toDate&&""!=searchData.toDate&&"-1"!=searchData.toDate&&void 0!=searchData.toDate&&(breadcrump[ZPI18N.getString("zp.to")]=searchData.toDate),null!=searchData.searchFileName&&""!=searchData.searchFileName&&void 0!=searchData.searchFileName&&(breadcrump[ZPI18N.getString("zp.files.operations.filename")]=searchData.searchFileName),null!=searchData.searchFileExtn&&""!=searchData.searchFileExtn&&void 0!=searchData.searchFileExtn&&(breadcrump[ZPI18N.getString("zp.filesextn")]=FilesOperations.Util.fetchFileTypeByExtn(searchData.searchFileExtn,"type"))}return breadcrump},construct:function(){var searchParams=FilesOperations.Breadcrump.getData();FilesUtil.Page.getTabGroup();if(window.location.href.indexOf("operations/files/all-viewType:1/empId:")>-1||window.location.href.indexOf("operations/files/all-viewType:2/empId:")>-1||window.location.href.indexOf("operations/files/all")>-1&&window.location.href.indexOf("/empId:")>-1){var empIdSearch=settingsUrlProps.urlParamsArr.empId,searchedEmpDetails=ZPeople.getUserDetailsById(empIdSearch),dispname=searchedEmpDetails.empid+" - "+searchedEmpDetails.name;searchParams[ZPI18N.getString("zp.employee")]=dispname,FilesOperations.EmpFiles.EmpSearch.actEmpSearchObj[1]=!0,FilesOperations.EmpFiles.EmpSearch.actEmpSearchObj[2]=empIdSearch,FilesOperations.EmpFiles.EmpSearch.actEmpSearchObj[3]=ZPeople.getPhotoPath(searchedEmpDetails.avatar,searchedEmpDetails.id),FilesOperations.EmpFiles.EmpSearch.actEmpSearchObj[4]=dispname}var moreFilter=[];if(settingsPage.container.find(".zpl_fltrvwlst").empty(),Object.keys(searchParams).length>0){settingsPage.container.find(".zpl_fltrvw").removeClass("zpl_DNI");var resultHtml="";searchParams.hasOwnProperty(ZPI18N.getString("zp.component"))&&delete searchParams[ZPI18N.getString("zp.location")],$.each(searchParams,function(key,val){val=ZSEC.Encoder.encodeForHTML(val),settingsPage.container.find(".zpl_fltrvwlst").width()<settingsPage.container.find(".zpl_fltrvw").width()-540?(resultHtml="<li><label>"+key+"&nbsp;:&nbsp;</label><span>"+val+'</span><a class="PI_cls" onclick="FilesOperations.Breadcrump.remove(\''+ZSEC.Encoder.encodeForJavaScript(key)+"')\"></a></li>",settingsPage.container.find(".zpl_fltrvwlst").append(resultHtml)):(resultHtml="<label>"+key+"&nbsp;:&nbsp;</label><span>"+val+'</span><a class="PI_cls" onclick="FilesOperations.Breadcrump.remove(\''+ZSEC.Encoder.encodeForJavaScript(key)+"')\"></a>",moreFilter.push(resultHtml))}),moreFilter.length>0&&FilesOperations.Breadcrump.showMoreIcon(moreFilter)}else settingsPage.container.find(".zpl_fltrvw").addClass("zpl_DNI")},remove:function(key,isReset){var tabGroup=FilesUtil.Page.getTabGroup();"1"==tabGroup?(isReset?FilesOperations.OrgFiles.Filter.reset():FilesOperations.OrgFiles.Filter.reset(key),FilesOperations.OrgFiles.Filter.search()):"0"==tabGroup?(isReset?FilesOperations.EmpFiles.Filter.reset():FilesOperations.EmpFiles.Filter.reset(key),FilesOperations.EmpFiles.Filter.search()):"2"==tabGroup&&(isReset?FilesOperations.PersFiles.Filter.reset():FilesOperations.PersFiles.Filter.reset(key),FilesOperations.PersFiles.Filter.search())},showMoreIcon:function(moreListHTML){var parentContainer=FilesUtil.Page.getParentContainer(),divId="moreFilterIcon"+parentContainer,menuId="morefilterOpt"+parentContainer,moreHtml='<li id="'+divId+'" class="zpl_mre zpl_drpdwn-js zh-radiusbottom"><i class="PI_more d-flex"></i></li>';settingsPage.container.find(".zpl_fltrvwlst").append(moreHtml);var filterlist=[];$.each(moreListHTML,function(key,html){filterlist.push({itemType:"custom",innerHTML:html})}),FilesOperations.MoreOption.showMoreMenu(menuId,divId,FilesOperations.MoreOption.getMenuObject(divId),filterlist,!1)}},FilesOperations.Delete={getFileList:function(fileId){if(FilesUtil.IP.isRestricted)FilesUtil.IP.showError(!0);else{if(!FilesUtil.Geo.isRestricted){var fileID="";if(null!=fileId&&void 0!=fileId&&ZPeople.IsNumeric(fileId))fileID=fileId;else{var pageId=FilesUtil.Page.getPageId(),tabGroup=FilesUtil.Page.getTabGroup(),parentContainer=FilesUtil.Page.getParentContainer();settingsUrlProps.url.indexOf("-catId")>-1&&("1"===tabGroup?pageId="orgFileSubList_List"+parentContainer:"0"===tabGroup&&(pageId="empFileSubList_List"+parentContainer));var fileList="";"1"===tabGroup?fileList=settingsPage.container.find("#"+pageId).find("tr[id^='orgFileTr_']").find("input[type='checkbox']:checked"):"0"===tabGroup?fileList=settingsPage.container.find("#"+pageId).find("tr[id^='empFileTr_']").find("input[type='checkbox']:checked"):"2"===tabGroup&&(fileList=settingsPage.container.find("#"+pageId).find("tr[id^='persFileTr_']").find("input[type='checkbox']:checked"));for(var i=0;i<fileList.length;i++){var chkboxId=$(fileList[i]).attr("id");fileID+=chkboxId.substring(chkboxId.indexOf("_")+1,chkboxId.length),i!=fileList.length-1&&(fileID+=",")}}return fileID}FilesUtil.Geo.showError(!0)}},getFolderList:function(mode){if(FilesUtil.IP.isRestricted)FilesUtil.IP.showError(!0);else{if(!FilesUtil.Geo.isRestricted){var folderId="",pageId=FilesUtil.Page.getPageId(),folderList=settingsPage.container.find("#"+pageId).find("tr[id^='catLi_']").find("input[type='checkbox']:checked");if("1"==mode)return folderList.length>0;for(var i=0;i<folderList.length;i++){var chkboxId=$(folderList[i]).attr("id");folderId+=chkboxId.substring(chkboxId.indexOf("_")+1,chkboxId.length),i!=folderList.length-1&&(folderId+=",")}return folderId}FilesUtil.Geo.showError(!0)}},confirmPopup:function(fileId){var fileIds=FilesOperations.Delete.getFileList(fileId),folderIds=FilesOperations.Delete.getFolderList(),alertTitle=ZPI18N.getString("zp.files.operations.deletefile"),alertDesc=ZPI18N.getString("zp.files.operations.deletefileinfo"),hasFiles=!1,hasFolders=!1;null!=fileIds&&void 0!=fileIds&&""!==fileIds&&(hasFiles=!0),null!=folderIds&&void 0!=folderIds&&""!==folderIds&&(hasFolders=!0),hasFiles&&hasFolders?(alertTitle=ZPI18N.getString("zp.files.operations.deletefilefolderalert"),alertDesc=ZPI18N.getString("zp.files.operations.deletefilefolderdesc")):hasFolders&&(alertTitle=ZPI18N.getString("zp.files.operations.deletefolder"),alertDesc=ZPI18N.getString("zp.files.operations.deletefolderinfo"));var deletePopUp=new DeleteAlertMessage;deletePopUp.title=alertTitle,deletePopUp.despcription=alertDesc,deletePopUp.yesButtonText=ZPI18N.getString("zp.confirm"),deletePopUp.cancelButtonText=ZPI18N.getString("zp.cancel"),deletePopUp.callback=function(){FilesOperations.Delete.deleteFilesAndFolder(fileId)},deletePopUp.show()},deleteFilesAndFolder:function(fileId){if(FilesUtil.IP.isRestricted)FilesUtil.IP.showError(!0);else if(FilesUtil.Geo.isRestricted)FilesUtil.Geo.showError(!0);else{var fileID=FilesOperations.Delete.getFileList(fileId),folderId=FilesOperations.Delete.getFolderList(),pageId=FilesUtil.Page.getPageId(),tabGroup=FilesUtil.Page.getTabGroup(),formData=new FormData;formData.append("conreqcsr",csrfToken),null!=fileID&&void 0!=fileID&&""!=fileID&&formData.append("deleteFileId",fileID),(0==FilesUtil.loginUserRoleCheck||1==FilesUtil.loginUserRoleCheck||FilesUtil.settingsAdmin)&&null!=folderId&&void 0!=folderId&&""!=folderId&&formData.append("deleteCatId",folderId),formData=FilesUtil.Geo.setLatLongParams(formData,!0),$.ajax({url:"/zpfiles/operations/deleteFolderAndFiles",type:"POST",data:formData,contentType:!1,processData:!1,success:function(data){if(void 0!=data[1]&&null!=folderId&&void 0!=folderId&&""!=folderId){var unDeletedFolders=data[1],folderNames=[];$.each(unDeletedFolders,function(index,value){var folderData=settingsPage.container.find("#"+pageId).find("tr[folderid="+value+"]").data().ldata;folderNames.push(folderData.CatName)})}null!=fileID&&void 0!=fileID&&""!=fileID&&null!=folderId&&void 0!=folderId&&""!=folderId&&0==folderNames.length?ZPeople.Message.success(ZPI18N.getString("zp.files.operations.filesfoldersDeleted")):null!=fileID&&void 0!=fileID&&""!=fileID?ZPeople.Message.success(ZPI18N.getString("zp.files.operations.filesDeleted")):null!=folderId&&void 0!=folderId&&""!=folderId&&(folderNames.length>0?FilesOperations.Delete.openDeleteErrorModal(folderNames):ZPeople.Message.success(ZPI18N.getString("zp.foldersDeleted"))),FilesOperations.Util.selectAll(void 0,!0,!0),FilesOperations.Page.reloadOtherPages();var checkBoxId="";"1"==tabGroup?checkBoxId="orgfile_checkallbox":"0"==tabGroup?checkBoxId="empfile_checkallbox":"2"==tabGroup&&(checkBoxId="persfile_checkallbox"),FilesOperations.Util.selectAll(checkBoxId,!0,!0)},error:function(req){var errResponse=req.responseJSON[1];ZPeople.Message.failure(errResponse.msg)}})}},openDeleteErrorModal:function(folderNames){var mapHtml='<div class="zpl_gbox wd100_per"><div class="zpl_gbxttl"><div><h4>'+ZPI18N.getString("zp.folders")+'</h4></div></div><div class="zpl_idiv whtbg">';$(folderNames).each(function(i,val){mapHtml+='<div class="zpl_tg"><span>'+val+"<span></div>"}),mapHtml+="</div>";var title=ZPI18N.getString("zp.files.operations.deletedenytitle"),desc="<em>1)&nbsp;"+ZPI18N.getString("zp.files.operations.deletedenydesc1")+"</em><br><em>2)&nbsp;"+ZPI18N.getString("zp.files.operations.deletedenydesc2")+"</em><br><em>"+ZPI18N.getString("zp.files.operations.deletedenydesc3")+"</em>",alertMsgObj=new DeleteAlertMessage(title,desc);alertMsgObj.descClass="text-left",alertMsgObj.yesButtonText="",alertMsgObj.setCenterHtml(mapHtml),alertMsgObj.show()}},FilesOperations.Preview={convertJSONToString:function(jsonData){var data="";if(null!=jsonData&&Object.keys(jsonData).length>0){var keys=Object.keys(jsonData);for(var i in keys)data+=jsonData[keys[i]],Number(i)!=Object.keys(jsonData).length-1&&(data+="&nbsp;,")}return data},initLightBox:function(ele){if(FilesUtil.Preview.checkifJSON(ele)){var ldata=JSON.parse(ele),fileExtn=FilesUtil.Page.getFileExtn(ldata.fileExtn,ldata.filePath,ldata.UploadSource);ldata.fileExtn=fileExtn}else if(window.location.hash.indexOf("myspace/overview-files")>-1||window.location.hash.indexOf("home/myspace/dashboard")>-1||window.location.hash.indexOf("home/organization/orgspace-overview")>-1||window.location.hash.indexOf("home/user/files")>-1){void 0==(ldata=$(ele).parent().data().ldata)&&(ldata=$(ele).parent().parent().parent().data().ldata)}else if(window.location.hash.indexOf("myspace/overview-actionlist")>-1||window.location.hash.indexOf("myspace/overview-feeds")>-1||ZPFeeds.SINGLEPOP||FilesUtil.Preview.checkifJSON(ele))ldata=JSON.parse(ele);else{void 0==(ldata=$(ele).parent().parent().data().ldata)&&(ldata=$(ele).parent().parent().parent().data().ldata)}var previewData=FilesOperations.Preview.lightBoxData(ldata);FilesOperations.LightBox=new LightBox(previewData.extraProps.fileName),FilesOperations.LightBox.fileId=ldata.fileID,FilesOperations.LightBox.isImage=previewData.isImage,FilesOperations.LightBox.isVideo=previewData.isVideo,FilesOperations.LightBox.infoIconNeed=!0,FilesOperations.LightBox.infoContent=previewData.info,FilesOperations.LightBox.needDownload=previewData.allowDownload,FilesOperations.LightBox.setDownloadCallback(FilesOperations.DownloadPrint.downloadFile),FilesOperations.LightBox.needPrint=previewData.allowPrint,FilesOperations.LightBox.setPrintCallback(FilesOperations.DownloadPrint.printFile),FilesOperations.LightBox.extraProps=previewData.extraProps,FilesOperations.Acknowledgement.acknowledgementStatus("lightBox",ldata),FilesOperations.LightBox.show(),FilesUtil.Preview.frameURL(previewData)},lightBoxData:function(data){var previewData={},sharedTo=ZPI18N.getString("zp.sharedto",new Array("")),filePath=data.filePath,fileExtn=filePath.substr(filePath.lastIndexOf(".")+1,filePath.length);fileExtn=ZPeople.IsNumeric(filePath)||void 0!=data.fileExtn?data.fileExtn.toLowerCase():filePath.substr(filePath.lastIndexOf(".")+1,filePath.length).toLowerCase();var extraProps={};extraProps.fileId=data.fileID,extraProps.fileName=ZSEC.Encoder.encodeForHTML(data.fileName),extraProps.filePath=filePath,extraProps.fileExtn=fileExtn,"workdrive"===fileExtn&&(extraProps.downloadWDPath=data.downloadWDPath),previewData.extraProps=extraProps,previewData.fileExtn=fileExtn,previewData.isImage=!1,"jpg"!==fileExtn&&"jpeg"!==fileExtn&&"gif"!==fileExtn&&"png"!==fileExtn&&"gif"!==fileExtn||(previewData.isImage=!0),"mov"!=fileExtn&&"wmv"!=fileExtn&&"mpeg"!=fileExtn&&"mpg"!=fileExtn&&"mp4"!=fileExtn&&"webm"!=fileExtn&&"webmv"!=fileExtn||(previewData.isVideo=!0);var info={};if(info[ZPI18N.getString("zp.type")]=fileExtn,2!=data.fileType){if(1===data.fileType||"1"==data.fileType)if(void 0==data.fileOwnerName&&void 0==data.fileRoleName&&void 0==data.fileLocationName&&void 0==data.fileDepartmentName)info[sharedTo]=ZPI18N.getString("zp.all");else if(data.fileLocationName&&0==Object.keys(data.fileLocationName).length&&data.fileDepartmentName&&0==Object.keys(data.fileDepartmentName).length)info[sharedTo]=ZPI18N.getString("zp.all");else{var sharedata={};if(FilesUtil.Page.isModulePage()||settingsUrlProps.url.indexOf("home/myspace/dashboard")>-1){sharedata=FilesOperations.Util.getAllNodes(JSON.stringify(data.fileOrgStructure));var nodeStr=FilesOperations.Preview.convertJSONToString(sharedata);info[sharedTo]=ZSEC.Encoder.encodeForHTML(nodeStr)}else{var parentContainer=FilesUtil.Page.getParentContainer();parentContainer===FilesUtil.Page.pageIdMap.ENT?sharedata=data.fileOrgStructure.Entity:parentContainer===FilesUtil.Page.pageIdMap.UNIT?sharedata=data.fileOrgStructure.Unit:parentContainer===FilesUtil.Page.pageIdMap.DIV?sharedata=data.fileOrgStructure.Division:parentContainer===FilesUtil.Page.pageIdMap.DEPT?sharedata=data.fileOrgStructure.Department:parentContainer===FilesUtil.Page.pageIdMap.LOC&&(sharedata=data.fileOrgStructure.Location);nodeStr=FilesOperations.Preview.convertJSONToString(sharedata);info[sharedTo]=ZSEC.Encoder.encodeForHTML(nodeStr)}}else if(0===data.fileType)if(data.fileOwnerName)info[sharedTo]=ZSEC.Encoder.encodeForHTML(data.fileOwnerName);else if(data.fileRoleName){var roleName="";data.fileRoleNameNew.length>1&&(roleName=ZSEC.Encoder.encodeForHTML(data.fileRoleNameNew).toString().replaceAll(",",", ")),info[sharedTo]=roleName}void 0!=data.isFeedsAPI&&1==data.isFeedsAPI?info[ZPI18N.getString("zp.folder")]=ZSEC.Encoder.encodeForHTML(data.fileCatNameNew):info[ZPI18N.getString("zp.folder")]=window.location.hash.indexOf("myspace/overview-actionlist")>-1||window.location.hash.indexOf("myspace/overview-feeds")>-1||ZPFeeds.SINGLEPOP?ZSEC.Encoder.encodeForHTML(data.fileCatNameNew):ZSEC.Encoder.encodeForHTML(data.fileCatName)}return info[ZPI18N.getString("zp.lms.files.uploadedBy")]=ZSEC.Encoder.encodeForHTML(data.fileCreateByName),info[ZPI18N.getString("zp.common.updatedon",new Array(""))]=data.fileModifiedDate,null!=data.fileDesc&&void 0!=data.fileDesc&&""!=data.fileDesc&&(info[ZPI18N.getString("zp.description")]=ZSEC.Encoder.encodeForHTML(data.fileDesc)),previewData.info=info,"0"==data.fileType?(-1!=FilesUtil.loginUserRoleCheck&&void 0==data.fileRoleName||0===data.fileConfident&&void 0!=data.fileOwnerName&&data.fileOwnerID===erecno||void 0!=data.fileRoleName&&(0===data.fileConfident||0==FilesUtil.loginUserRoleCheck||1==FilesUtil.loginUserRoleCheck)||void 0!=FilesUtil.isreportingTo&&!0===FilesUtil.isreportingTo&&1===data.isreportingTo)&&(previewData.allowDownload=!0,previewData.allowPrint=!0):"0"!=FilesUtil.loginUserRoleCheck&&"1"!=FilesUtil.loginUserRoleCheck&&!0!==data.allowDownload||(previewData.allowDownload=!0,previewData.allowPrint=!0),"workdrive"===fileExtn&&(previewData.allowPrint=!1),previewData},initAckFooterButton:function(obj){var pageId=ZPUtil.isV5SettingsUrl()?$(settingsPage.mainWrapId):Layout.Page.container.closest(".main-wrp");if(obj.extraProps.showAckBtn){pageId.find("#lightBoxCont").find(".zpl_Lbx_ftr").prepend('<button id="filesLgtBx_AckBtn" onclick="FilesOperations.Acknowledgement.addAcknowledgement(\''+obj.extraProps.fileId+"', 'lightBox');\" class='zlabel zlabel--blue zlabel--medium zpl_DNI'>"+ZPI18N.getString("zp.files.operations.lightbox.ackbtn")+"</button>");var contentDiv=pageId.find("#lightBoxCont").find("#nonImgLBx");if(Object.keys(obj.extraProps).length>0&&"pdf"==obj.extraProps.fileExtn.toLowerCase()){var scrollContainer=contentDiv.contents().find("#viewerContainer");$(scrollContainer).off(),$(scrollContainer).on("scroll",function(){Math.ceil($(this).scrollTop())+Math.ceil($(this).innerHeight())>=$(this)[0].scrollHeight&&pageId.find("#lightBoxCont").find("#filesLgtBx_AckBtn").removeClass("zpl_DNI")})}else pageId.find("#lightBoxCont").find("#filesLgtBx_AckBtn").removeClass("zpl_DNI")}}},FilesOperations.DownloadPrint={downloadFile:function(obj){var filePath,fileName,fileId="",data={};if(settingsUrlProps.url.indexOf("home/myspace/dashboard")>-1){if(void 0!=obj.isWorkDriveFile&&""!=obj.isWorkDriveFile&&1==obj.isWorkDriveFile)return void window.open(obj.downloadWDPath);if(null==obj.extraProps||void 0==obj.extraProps)fileId=(data=settingsPage.container.find("li[fileId='"+obj+"']").data().ldata).fileID;else{if(data=obj.extraProps,"workdrive"==obj.extraProps.fileExtn)return void window.open(obj.extraProps.downloadWDPath);fileId=data.fileId}}else if(null==obj.extraProps||void 0==obj.extraProps)fileId=(data=settingsPage.container.find("tr[fileId='"+obj+"']").data().ldata).fileID;else{if(data=obj.extraProps,"workdrive"==obj.extraProps.fileExtn)return void window.open(obj.extraProps.downloadWDPath);fileId=data.fileId}filePath=data.filePath,fileName=data.fileName;var downloadJSON={mode:"files"};downloadJSON.portalId=_LOGGEDIN_ACCZSOID;var extraDetails={};extraDetails.fileId=fileId,extraDetails.fileName=fileName,extraDetails.filePath=filePath,extraDetails.files_userIp=userIp,downloadJSON.extraDtls=extraDetails,void 0!=ZPeople.zaid&&(downloadJSON.zaid=ZPeople.zaid);var downloadURL=UDS_DOWNLOAD_URL+"/webdownload?x-service="+UDS_DOWNLOAD_SERVICE_CODE+"&event-id="+fileId+"&x-cli-msg="+encodeURIComponent(JSON.stringify(downloadJSON));void 0!=ZPeople.zaid&&(downloadURL+="&x-cli-zaid="+ZPeople.zaid),window.open(downloadURL)},printFile:function(ele){var viewUrl="/viewFile?fileId="+ele.extraProps.fileId;"undefined"!=contextPath&&"null"!=contextPath&&(viewUrl="/"+contextPath+viewUrl),window.open(viewUrl).print()}},FilesOperations.MoreOption={showMoreMenu:function(id,forElementId,menuObj,options,triggerClick){ZPeopleComponents.isComponent("#"+id)&&(ZPeopleComponents.menu($("#"+id)).destroy(),$("#"+id).remove());var tokenObj={};tokenObj.direction=menuObj.direction,tokenObj.positionAlterable=!0,tokenObj.displayType=menuObj.displayType,tokenObj.contentType=menuObj.contentType,tokenObj.forElement="#"+forElementId,tokenObj.itemclick=FilesOperations.MoreOption.initAction,tokenObj.appendTo=menuObj.appendTo,null!=menuObj.className&&void 0!=menuObj.className&&(tokenObj.className=menuObj.className),id.indexOf("moreAction")>-1&&(tokenObj.show=FilesOperations.MoreOption.hideShowHoverOpts,tokenObj.hide=FilesOperations.MoreOption.hideShowHoverOpts),ZPeopleComponents.createMenu(id,options,tokenObj),triggerClick?FilesOperations.MoreOption.openMenu(id):0==settingsPage.container.find("#"+forElementId).length?$("#"+forElementId).on("click",()=>{FilesOperations.MoreOption.openMenu(id)}):settingsPage.container.find("#"+forElementId).on("click",()=>{FilesOperations.MoreOption.openMenu(id)})},openMenu:function(id){FilesUtil.IP.isRestricted?FilesUtil.IP.showError(!0):FilesUtil.Geo.isRestricted?FilesUtil.Geo.showError(!0):ZPeopleComponents.menu("#"+id).show()},getMenuObject:function(type){return type.indexOf("orgFiles_importExport")>-1||type.indexOf("empFiles_importExport")>-1?{id:type,type:"list",displayType:"box",contentType:"icon-text",direction:"bottom-right",appendTo:settingsPage.container,className:"zpl_drpdwn"}:type.indexOf("moreAction")>-1?{id:type,type:"list",displayType:"box",contentType:"icon-text",direction:"bottom-right",appendTo:settingsPage.container,className:"zpl_drpdwn w250"}:type.indexOf("files_ackDetail_ExportType")>-1?{id:type,type:"list",displayType:"box",contentType:"icon-text",direction:"bottom-right",className:"zpl_drpdwn"}:type.indexOf("sharedTo")>-1||type.indexOf("folderTo")>-1?{id:type,type:"grid",displayType:"box",contentType:"text",direction:"bottom",appendTo:settingsPage.container,className:"zpl_drpdwn zpl_tagdrpdwn"}:type.indexOf("Breadcrump")>-1?{id:type,type:"list",displayType:"box",contentType:"text",direction:"bottom",appendTo:settingsPage.container,className:"zpl_drpdwn"}:type.indexOf("moreFilter")>-1?{id:type,type:"list",displayType:"box",contentType:"text",direction:"bottom",className:"zpl_drpdwn zpl_fltrvwlst zmenu zmenu--iconwithtext zposition--bottomleft zh-radiustopleft",appendTo:settingsPage.container}:void 0},getViewActionsList:function(type){let actionsList=[];return type.indexOf("orgFiles_importExport")>-1?actionsList.push({id:"orgFiles_exp",label:ZPI18N.getString("zp.export"),iconClass:"PI_exprt"}):type.indexOf("empFiles_importExport")>-1?(actionsList.push({id:"empFiles_imp",label:ZPI18N.getString("zp.import"),iconClass:"PI_imprt"}),actionsList.push({id:"empFiles_exp",label:ZPI18N.getString("zp.export"),iconClass:"PI_exprt"})):type.indexOf("files_ackDetail_ExportType")>-1&&(actionsList.push({id:"expAckDetail_all",label:ZPI18N.getString("zp.ackreport.exportall"),iconClass:"PI_exprt"}),actionsList.push({id:"expAckDetail_ack",label:ZPI18N.getString("zp.ackreport.exportack"),iconClass:"PI_exprt"}),actionsList.push({id:"expAckDetail_nonAck",label:ZPI18N.getString("zp.ackreport.exportnonack"),iconClass:"PI_exprt"})),actionsList},initAction:function(event){var optId=event.detail.id;if("empFiles_imp"===optId)FilesOperations.EmpFiles.Import.show();else if("orgFiles_exp"===optId||"empFiles_exp"===optId)FilesOperations.ExportFiles.init();else if(optId.indexOf("expAckDetail")>=0)"expAckDetail_all"===optId?FilesOperations.Acknowledgement.Export.view=0:"expAckDetail_ack"===optId?FilesOperations.Acknowledgement.Export.view=1:"expAckDetail_nonAck"===optId&&(FilesOperations.Acknowledgement.Export.view=2),FilesOperations.Acknowledgement.Export.showExportPopup();else if("files_copyURL"===optId){var fileId=event.detail.fileIdData;FilesOperations.OrgFiles.componentInit.copyFileUrl(fileId)}else if("files_ackDetails_listView"===optId){fileId=event.detail.fileIdData;FilesOperations.Acknowledgement.getAcknowledgementDetails(fileId)}else if(event.detail.forElement[0].id.indexOf("settings_BrdCrmp")>=0)FilesUtil.Breadcrump.reverseNavigationBreadcrumbs("other",optId);else if("files_orgList_edit"===optId){var rowId=event.detail.rowId;FilesOperations.OrgFiles.AddEdit.show("edit",rowId)}else if("files_orgList_delete"===optId||"files_empList_delete"===optId||"files_persList_delete"===optId){fileId=event.detail.fileIdData;FilesOperations.Delete.confirmPopup(fileId)}else if("files_empList_edit"===optId){rowId=event.detail.rowId;FilesOperations.EmpFiles.AddEdit.show("edit",rowId)}else if("files_folderView_edit"===optId){var catId=event.detail.catId;FilesUtil.FolderModel.addEditFolder("edit",catId)}else if("files_folderView_delete"===optId){catId=event.detail.catId;FilesUtil.FolderModel.deleteFolderPopup(catId)}else if("files_persList_edit"===optId){rowId=event.detail.rowId;FilesOperations.PersFiles.AddEdit.show("edit",rowId)}else Zsign.FilesOperations.initAction(event)},hideShowHoverOpts:function(event){var optId=event.detail.forElement[0].id;settingsPage.container.find("#"+optId).toggleClass("zpl_act"),settingsPage.container.find("#"+optId).parent().toggleClass("zpl_hvract")}},FilesOperations.Acknowledgement={ACK_MODAL:null,popupName:"",modelId:"tabfileAckDetails",popupId:"fileAckDetails",cardId:"cardfileAckDetails",firescrollId:"fileAckDetails_Scroll",ActionURL:"/zpfiles/operations/acknowledgementDetails",isUserSharedNodeCheck:!1,AckDetails:[0,!0,-1],constructSliderHeader:function(){var header="";return header+="<div><h4>"+ZPI18N.getString("zp.files.operations.ackdetailhdr")+'</h4><p id="ackFileName"></p></div><span class="zpl_mhderrgt"><select id="ackStatus" data-width="140"></select><i type="button" id="ackDetail_ExportType" class="zpl_ibg zpl_drpdwn-js PI_more" data-title-position="bottom" title="'+ZPI18N.getString("zp.files.operations.moreactions")+'" ></i></span><a id="sliderCls" class="_cls PI_cls"></a>'},constructSliderBody:function(){if(""==$("#"+FilesOperations.Acknowledgement.cardId).html().trim()){var body="";body+='<div id="submitAckDiv" class="zpl_crd zpl_DNI"><div class="zpl_crdhdr"><div class="d-flexC j-cnt-btwen"><h6 id="ackTitle">'+ZPI18N.getString("zp.files.operations.docackdone")+'</h6><button id="ackSubmit" class="zlabel zlabel--blue zlabel--medium">'+ZPI18N.getString("zp.submit")+'</button></div></div></div><div class="zpl_tblres"><table id="ackRepTable" class="zpl_tbl zpl_DNI"><thead><tr><th>'+ZPI18N.getString("zp.files.operations.ackempdetail")+'</th><th id="ackDateHdr" class="zpl_DNI" width=300px;>'+ZPI18N.getString("zp.files.operations.ackdate")+'</th></tr></thead><tbody id="ackDetailListing"></tbody></table></div>',body+='<div id="noDataIconWpr" class="zpl_DNI h100_per"></div>',$("#"+FilesOperations.Acknowledgement.cardId).html(body)}},constructSliderFooter:function(){var footer="";return footer+='<div class="d-flexC zpl_gap2"><p class="M0I">'+ZPI18N.getString("zp.files.operations.totalack")+'</p>&nbsp;&nbsp;<h5 id="ackFileCount"></h5></div>'},initDropdown:function(id){if(!ZPeopleComponents.isComponent("#"+id)){var options=[];options.push({id:"1",value:"1",name:ZPI18N.getString("zp.acknowledged")}),options.push({id:"2",value:"2",name:ZPI18N.getString("zp.pending")});var tokenObj={};tokenObj.options=options,tokenObj.contentType="text",tokenObj.dataMapping={label:"name",informativeText:"name",value:"id"},tokenObj.change=FilesOperations.Acknowledgement.changeView,tokenObj.dropdownList={fitForElement:!0,moveOnScroll:!0},ZPeopleComponents.select($("#"+id),tokenObj)}},show:function(mode,rowId){var modelLen=$("#"+FilesOperations.Acknowledgement.modelId).length;if(0==modelLen){var popupTab=new Tab(FilesOperations.Acknowledgement.popupId,FilesOperations.Acknowledgement.constructSliderBody);FilesOperations.Acknowledgement.ACK_MODAL=new sliderModal(FilesOperations.Acknowledgement.popupName,popupTab),FilesOperations.Acknowledgement.ACK_MODAL.setCloseCallback(FilesOperations.Acknowledgement.closeAckModal)}var headerContent=FilesOperations.Acknowledgement.constructSliderHeader(),footerContent=FilesOperations.Acknowledgement.constructSliderFooter();if(FilesOperations.Acknowledgement.ACK_MODAL.ftExtraCls="zpl_spltbrdT",FilesOperations.Acknowledgement.ACK_MODAL.construct(headerContent,footerContent),0==modelLen){FilesOperations.Acknowledgement.initDropdown("ackStatus");var moreMenuId="files_ackDetail_ExportType";FilesOperations.MoreOption.showMoreMenu(moreMenuId,"ackDetail_ExportType",FilesOperations.MoreOption.getMenuObject(moreMenuId),FilesOperations.MoreOption.getViewActionsList(moreMenuId),!1);new FireScrollBack(FilesOperations.Acknowledgement.getAcknowledgementDetails,settingsPage.container,FilesOperations.Acknowledgement.firescrollId)}},checkAckNodes:function(fileId,rowData){var isUserSharedNodeCheck=!1;if(window.location.hash.indexOf("myspace/overview-actionlist")>-1||window.location.hash.indexOf("myspace/overview-feeds")>-1||ZPFeeds.SINGLEPOP||void 0!=rowData&&rowData.hasOwnProperty("isUserSharedNodeCheck")||window.location.hash.indexOf("files/viewfile")>-1)isUserSharedNodeCheck=rowData.isUserSharedNodeCheck;else{if(null==rowData||void 0==rowData){var pagId=FilesUtil.Page.getPageId(),tabGroup=FilesUtil.Page.getTabGroup(),parentContainer=FilesUtil.Page.getParentContainer();settingsUrlProps.url.indexOf("-catId")>-1&&("1"===tabGroup?pagId="orgFileSubList_List"+parentContainer:"0"===tabGroup&&(pagId="empFileSubList_List"+parentContainer));rowData=settingsPage.container.find("#"+pagId).find("tr[fileId='"+fileId+"']").data().ldata}isUserSharedNodeCheck=rowData.checkUserAckPerm}return isUserSharedNodeCheck},getAcknowledgementDetails:function(fileId){if(FilesUtil.IP.isRestricted)FilesUtil.IP.showError(!0);else if(FilesUtil.Geo.isRestricted)FilesUtil.Geo.showError(!0);else{var pageId=$("#"+FilesOperations.Acknowledgement.modelId),ackStatus="1";if((0===FilesUtil.loginUserRoleCheck||1===FilesUtil.loginUserRoleCheck)&&(null!=fileId&&void 0!=fileId?FilesOperations.Acknowledgement.AckDetails[2]!=fileId&&(FilesOperations.Acknowledgement.AckDetails[0]=0,FilesOperations.Acknowledgement.AckDetails[1]=!0,FilesOperations.Acknowledgement.AckDetails[2]=fileId,ZPeopleComponents.isComponent("#ackStatus")&&ZPeopleComponents.select(pageId.find("#ackStatus")).setValue("1")):fileId=pageId.attr("fileId"),!0===FilesOperations.Acknowledgement.AckDetails[1])){FilesOperations.Acknowledgement.show(),FilesOperations.Acknowledgement.showLoadingIcon();FilesOperations.Acknowledgement.checkAckNodes(fileId);(pageId=$("#"+FilesOperations.Acknowledgement.modelId)).attr("fileId",fileId),ackStatus=ZPeopleComponents.select(pageId.find("#ackStatus")).getValue();var params={conreqcsr:csrfToken,start:FilesOperations.Acknowledgement.AckDetails[0],fileId:fileId};params=FilesUtil.Geo.setLatLongParams(params),$.post(FilesOperations.Acknowledgement.ActionURL,params,function(resultData){if(void 0!=resultData[1]){if(0===FilesOperations.Acknowledgement.AckDetails[0]&&"1"==ackStatus){pageId.find("#ackFileName").html(resultData[1].FileDetail.FILENAME);var count="<em>"+resultData[1].FileDetail.ackCount+"</em> / <em>"+resultData[1].FileDetail.TotalCount+"</em>";pageId.find("#ackFileCount").html(count),pageId.attr("isLoginUserAck",resultData[1].FileDetail.isLoginUserAck),pageId.attr("fileType",resultData[1].FileDetail.TYPE),FilesOperations.Acknowledgement.isUserSharedNodeCheck=FilesOperations.Acknowledgement.checkAckNodes(fileId),FilesOperations.Acknowledgement.isUserSharedNodeCheck&&!1===resultData[1].FileDetail.isLoginUserAck?(pageId.find("#ackSubmit").click(function(){FilesOperations.Acknowledgement.addAcknowledgement(fileId,"ackDetails")}),pageId.find("#submitAckDiv").removeClass("zpl_DNI")):pageId.find("#submitAckDiv").addClass("zpl_DNI")}if(resultData[1].EmpDetails.length<50)FilesOperations.Acknowledgement.AckDetails[1]=!1;else{FilesOperations.Acknowledgement.AckDetails[1]=!0;var scrlObj=FilesOperations.Acknowledgement.firescrollId;settingsPage.fireScrollObj[scrlObj].reset()}resultData[1].EmpDetails.length>0?(pageId.find("#noDataIconWpr").addClass("zpl_DNI"),pageId.find("#ackRepTable").removeClass("zpl_DNI"),FilesOperations.Acknowledgement.fileAckReport(resultData[1].EmpDetails)):0===FilesOperations.Acknowledgement.AckDetails[0]&&FilesOperations.Acknowledgement.showNoData(),FilesOperations.Acknowledgement.AckDetails[0]+=50}})}}},showLoadingIcon:function(){var pageId=$("#"+FilesOperations.Acknowledgement.modelId).find("#noDataIconWpr");if(pageId.empty(),pageId.find("#zp_page_loading").length<=0){pageId.append('<div id="zp_page_loading" class="loader-inner line-scale"><div></div><div></div><div></div><div></div><div></div></div>')}$("#"+FilesOperations.Acknowledgement.modelId).find("#ackRepTable").addClass("zpl_DNI"),pageId.removeClass("zpl_DNI")},showNoData:function(){var pageId=$("#"+FilesOperations.Acknowledgement.modelId),ackStatus=ZPeopleComponents.select(pageId.find("#ackStatus")).getValue();pageId.find("#noDataIconWpr").empty();var hdr="",desc="",iconName="";"1"==ackStatus?(iconName="zp_nd_record",hdr=ZPI18N.getString("zp.files.operations.ackinfo4"),desc=ZPI18N.getString("zp.files.operations.ackinfo5")):"2"==ackStatus&&(iconName="zp_nd_implcmplt",hdr=ZPI18N.getString("zp.files.operations.ackinfo6"),desc=ZPI18N.getString("zp.files.operations.ackinfo7")),pageId.find("#ackRepTable").addClass("zpl_DNI"),pageId.find("#noDataIconWpr").removeClass("zpl_DNI"),new EmptyPages(iconName,hdr,desc,pageId.find("#noDataIconWpr")).show()},fileAckReport:function(data){var pageId=$("#"+FilesOperations.Acknowledgement.modelId),ackReportOpt=ZPeopleComponents.select(pageId.find("#ackStatus")).getValue();"1"==ackReportOpt&&pageId.find("#ackDateHdr").removeClass("zpl_DNI");for(var rows="",i=0;i<data.length;i++){var value=data[i];rows+='<tr><td><div class="zpl_em"><div class="zpl_emimg zpl_cpd"><img src="'+value.EmpPhoto+'"></div> <div class="zpl_emdts"><div><em> '+ZSEC.Encoder.encodeForHTML(value.EmpId)+"&nbsp;&nbsp; - &nbsp;&nbsp;</em><b>"+value.EmpName+"</b></div></div></div></td>","1"==ackReportOpt&&(rows+="<td><span>"+value.MODIFIEDTIME+"</span></td>"),rows+="</tr>"}rows=$(rows),pageId.find("#ackDetailListing").append(rows)},changeView:function(event){var pageId=$("#"+FilesOperations.Acknowledgement.modelId);if(event.detail.fromUI){var ackReportOpt=ZPeopleComponents.select(pageId.find("#ackStatus")).getValue();"1"===ackReportOpt?(FilesOperations.Acknowledgement.ActionURL="/zpfiles/operations/acknowledgementDetails",pageId.find("#ackDateHdr").removeClass("zpl_DNI")):"2"===ackReportOpt&&(FilesOperations.Acknowledgement.ActionURL="/zpfiles/operations/nonAckEmpDetails",pageId.find("#ackDateHdr").addClass("zpl_DNI")),FilesOperations.Acknowledgement.AckDetails[0]=0,FilesOperations.Acknowledgement.AckDetails[1]=!0,pageId.find("#ackDetailListing").html(""),FilesOperations.Acknowledgement.getAcknowledgementDetails()}else pageId.find("#ackDateHdr").removeClass("zpl_DNI")},closeAckModal:function(){FilesOperations.Acknowledgement.AckDetails[0]=0,FilesOperations.Acknowledgement.AckDetails[1]=!0,FilesOperations.Acknowledgement.AckDetails[2]=-1,FilesOperations.Acknowledgement.ActionURL="/zpfiles/operations/acknowledgementDetails",$("#"+FilesOperations.Acknowledgement.modelId).find("#ackDetailListing").empty(),ZPeopleComponents.select($("#ackSubmit")).destroy(),ZPeopleComponents.select($("#ackStatus")).destroy(),ZPeopleComponents.menu($("#ackDetail_ExportType")).destroy(),FilesOperations.Acknowledgement.ACK_MODAL.remove()},addAcknowledgement:function(fileId,mode,callback){var formData=new FormData;formData.append("fileId",fileId),formData.append("conreqcsr",csrfToken),formData=FilesUtil.Geo.setLatLongParams(formData,!0),$.ajax({url:"/zpfiles/operations/addAcknowledgement",type:"POST",data:formData,contentType:!1,processData:!1,success:function(resultData){if("onboarding"===mode&&void 0!==callback)callback(resultData);else if(void 0!=resultData[0]&&resultData[0].code==FilesUtil.IP.errorCode)FilesUtil.IP.showError(!0);else if(void 0!=resultData[0]&&resultData[0].code==FilesUtil.Geo.errorCode)FilesUtil.Geo.showError(!0);else if(void 0!=resultData[1])if(!0===resultData[1]){if(null!=mode&&void 0!=mode&&"lightBox"==mode)(ZPUtil.isV5SettingsUrl()?$(settingsPage.mainWrapId):Layout.Page.container.closest(".main-wrp")).find("#filesLgtBx_AckBtn").addClass("zpl_DNI");null!=mode&&void 0!=mode&&"ackDetails"==mode&&FilesOperations.Acknowledgement.ACK_MODAL.close(!1),null!=mode&&void 0!=mode&&"mySpaceSelfService"==mode&&$("#mySpace_files_ack_"+fileId).addClass("zpl_DNI"),ZPeople.Message.success(ZPI18N.getString("zp.acknowledgedsuccess"));var mandAckdata={};mandAckdata.id=fileId,ZDOMEEAPI.mandatory.mandatoryPolicyCompleted(mandAckdata),FilesOperations.Page.reloadOtherPages()}else ZPeople.Message.failure(ZPI18N.getString("zp.files.operations.permdeny"))},error:function(req){var errResponse=req.responseJSON[1];500===req.status&&ZPeople.Message.failure(errResponse.msg)}})},acknowledgementStatus:function(mode,data){var fileId=data.fileID,activityRow='<div class="zpl_msp-act">';if(activityRow+='<div class="zpl_hvr">',activityRow+='<button id="mySpace_files_ack_'+fileId+'" class="zlabel zlabel--blue zlabel--medium zlabel--outline" onclick="FilesHome.Activity.fetchDataForPreview(\''+fileId+"');\">"+ZPI18N.getString("zp.files.operations.viewandack")+"</button>",activityRow+="</div>",activityRow+="</div>",settingsUrlProps.url.indexOf("/myspace/overview-actionlist")>-1&&null!=mode&&void 0!=mode&&"lightBox"!=mode)return activityRow;var fileOwner,isEmpFileAck,fileType=data.fileType,fileAck=data.fileAcknowledge,isLoginUserAck=data.isLoginUserAck,ackDeadLine=data.ackDeadLine;"0"==fileType&&(fileOwner=data.fileOwnerID,isEmpFileAck=data.isEmpFileAck);var checkAckNodes=FilesOperations.Acknowledgement.checkAckNodes(fileId,data),row="";if(1===fileAck||"1"===fileAck)if(null!=fileOwner&&void 0!=fileOwner&&""!=fileOwner)if(checkAckNodes){if(null!=mode&&void 0!=mode&&"lightBox"==mode)return FilesOperations.LightBox.setFileLoadCallBack(FilesOperations.Preview.initAckFooterButton),void("false"===isEmpFileAck.toString()?(FilesOperations.LightBox.headerNote=ZPI18N.getString("zp.files.lightbox.ackinfo1"),FilesOperations.LightBox.extraProps.showAckBtn=!0):(FilesOperations.LightBox.headerNote=ZPI18N.getString("zp.files.lightbox.ackinfo2"),FilesOperations.LightBox.extraProps.showAckBtn=!1));if(null!=mode&&void 0!=mode&&"mySpace"==mode)"true"!==isEmpFileAck.toString()&&(row+=activityRow);else if("true"===isEmpFileAck.toString())row+='<div class="d-flexM"><i class="PI_ack_tick zpl_cpd" data-title-position="bottom" title="'+ZPI18N.getString("zp.files.operations.compack")+'" role="button"></i></div>';else{var iconName="PI_ack_pend zpl_cp";null!=ackDeadLine&&void 0!=ackDeadLine&&""!=ackDeadLine&&(iconName="PI_ack_mandatory red zpl_cp"),row+='<div class="d-flexM"><i class="'+iconName+'" onclick="FilesOperations.Preview.initLightBox(this);" data-title-position="bottom" title="'+ZPI18N.getString("zp.files.operations.pendingack")+'" ></i></div>'}}else{if(null!=mode&&void 0!=mode&&"lightBox"==mode)return"false"===isEmpFileAck.toString()?FilesOperations.LightBox.headerNote=ZPI18N.getString("zp.files.operations.ackinfo8"):FilesOperations.LightBox.headerNote=ZPI18N.getString("zp.files.operations.ackinfo9"),FilesOperations.LightBox.setFileLoadCallBack(FilesOperations.Preview.initAckFooterButton),void(FilesOperations.LightBox.extraProps.showAckBtn=!1);"true"===isEmpFileAck.toString()?row+='<div class="d-flexM"><i class="PI_ack_tick zpl_cpd" data-title-position="bottom" title="'+ZPI18N.getString("zp.files.operations.compack")+'" role="button"></i></div>':row+='<div class="d-flexM"><i class="PI_ack_pend blk zpl_cpd" data-title-position="bottom" title="'+ZPI18N.getString("zp.files.operations.sentforack")+'" role="button"></i></div>'}else if(null!=mode&&void 0!=mode&&"lightBox"==mode){if(checkAckNodes)return FilesOperations.LightBox.setFileLoadCallBack(FilesOperations.Preview.initAckFooterButton),void("false"===isLoginUserAck.toString()?(FilesOperations.LightBox.headerNote=ZPI18N.getString("zp.files.lightbox.ackinfo1"),FilesOperations.LightBox.extraProps.showAckBtn=!0):(FilesOperations.LightBox.headerNote=ZPI18N.getString("zp.files.lightbox.ackinfo2"),FilesOperations.LightBox.extraProps.showAckBtn=!1));if("false"===isLoginUserAck.toString())return FilesOperations.LightBox.headerNote=ZPI18N.getString("zp.files.lightbox.ackinfo3"),FilesOperations.LightBox.setFileLoadCallBack(FilesOperations.Preview.initAckFooterButton),void(FilesOperations.LightBox.extraProps.showAckBtn=!1)}else if(checkAckNodes)if("true"===isLoginUserAck.toString())row+='<div class="d-flexM"><i class="PI_ack_tick zpl_cpd" data-title-position="bottom" title="'+ZPI18N.getString("zp.files.operations.compack")+'" role="button"></i></div>';else{iconName="PI_ack_pend zpl_cp";null!=ackDeadLine&&void 0!=ackDeadLine&&""!=ackDeadLine&&(iconName="PI_ack_mandatory red zpl_cp"),row+='<div class="d-flexM"><i class="'+iconName+'"  onclick="FilesOperations.Preview.initLightBox(this);" data-title-position="bottom" title="'+ZPI18N.getString("zp.files.operations.pendingack")+'" role="button"></i></div>'}else row+='<div class="d-flexM"><i class="PI_ack_tick blk zpl_cpd" data-title-position="bottom" title="'+ZPI18N.getString("zp.files.operations.ackenabled")+'"  role="button"></i></div>';return row},confirmAcknowledgement:function(fileId,mode){var infoPopUp=new InfoAlertMessage;infoPopUp.title=ZPI18N.getString("zp.files.ackpopuptitle"),infoPopUp.despcription=ZPI18N.getString("zp.files.operations.docackdone"),infoPopUp.yesButtonText=ZPI18N.getString("zp.confirm"),infoPopUp.cancelButtonText=ZPI18N.getString("zp.cancel"),infoPopUp.callback=function(){FilesOperations.Acknowledgement.addAcknowledgement(fileId,mode)},infoPopUp.show()}},FilesOperations.Acknowledgement.Export={EXPACK_MODAL:null,modelId:"tabexportAck_Files",popupId:"exportAck_Files",cardId:"cardexportAck_Files",view:"",ALLOWED_FORMAT:new Array("pdf","xls","xlsx","csv"),showExportPopup:function(type){var modelLen=$("#"+FilesOperations.Acknowledgement.Export.modelId).length,popupTab=new Tab(FilesOperations.Acknowledgement.Export.popupId,function(){if(0==modelLen){var popup="";popup+='<div class="zpl_crd"><div class="zpl_crdcnt"><div class="zpl_Emptydata"><div><div class="zpl_mdexprtimg smll"></div><h4>'+ZPI18N.getString("zp.files.operations.ackexportdesc")+'</h4><div class="zpl_secn"><div><div class="zradiobutton zradiobutton--horizontal"><input id="filesAckExpFormat_xls" type="radio" name="exportFormat_ackFiles" class="zradiobutton__helper"><label onclick="FilesUtil.componentInit.toggleCheckBox(\'filesAckExpFormat_xls\', false);" class="zradiobutton__label"><span class="zradiobutton__text">'+ZPI18N.getString("zp.xls")+'</span></label></div><div class="zradiobutton zradiobutton--horizontal"><input id="filesAckExpFormat_xlsx" type="radio" name="exportFormat_ackFiles" class="zradiobutton__helper"><label onclick="FilesUtil.componentInit.toggleCheckBox(\'filesAckExpFormat_xlsx\', false);" class="zradiobutton__label"><span class="zradiobutton__text">'+ZPI18N.getString("zp.xlsx")+'</span></label></div><div class="zradiobutton zradiobutton--horizontal"><input id="filesAckExpFormat_csv" type="radio" name="exportFormat_ackFiles" class="zradiobutton__helper"><label onclick="FilesUtil.componentInit.toggleCheckBox(\'filesAckExpFormat_csv\', false);" class="zradiobutton__label"><span class="zradiobutton__text">'+ZPI18N.getString("zp.csv")+'</span></label></div><div class="zradiobutton zradiobutton--horizontal"><input id="filesAckExpFormat_pdf" type="radio" name="exportFormat_ackFiles" class="zradiobutton__helper"><label onclick="FilesUtil.componentInit.toggleCheckBox(\'filesAckExpFormat_pdf\', false);" class="zradiobutton__label"><span class="zradiobutton__text">'+ZPI18N.getString("zp.pdf")+"</span></label></div></div><div></div></div></div></div>",$("#"+FilesOperations.Acknowledgement.Export.cardId).html(popup)}},function(){FilesOperations.Acknowledgement.Export.exportData(type)}),popupName="";0==FilesOperations.Acknowledgement.Export.view?popupName=ZPI18N.getString("zp.files.operations.ackexporttitle",new Array(ZPI18N.getString("zp.all").toLowerCase())):1==FilesOperations.Acknowledgement.Export.view?popupName=ZPI18N.getString("zp.files.operations.ackexporttitle",new Array(ZPI18N.getString("zp.acknowledged").toLowerCase())):2==FilesOperations.Acknowledgement.Export.view&&(popupName=ZPI18N.getString("zp.files.operations.ackexporttitle",new Array(ZPI18N.getString("zp.pending").toLowerCase()))),FilesOperations.Acknowledgement.Export.EXPACK_MODAL=new popupModal(popupName,popupTab),FilesOperations.Acknowledgement.Export.EXPACK_MODAL.save=ZPI18N.getString("zp.confirm"),FilesOperations.Acknowledgement.Export.EXPACK_MODAL.cancel=ZPI18N.getString("zp.cancel"),FilesOperations.Acknowledgement.Export.EXPACK_MODAL.setCloseCallback(function(){FilesOperations.Acknowledgement.Export.EXPACK_MODAL.remove()}),FilesOperations.Acknowledgement.Export.EXPACK_MODAL.construct(),$("#"+FilesOperations.Acknowledgement.Export.cardId).find("#filesAckExpFormat_xls").prop("checked",!0)},exportData:function(){var pageId=$("#"+FilesOperations.Acknowledgement.Export.cardId),exportFormat="-1";pageId.find("#filesAckExpFormat_pdf").prop("checked")?exportFormat="0":pageId.find("#filesAckExpFormat_xls").prop("checked")?exportFormat="1":pageId.find("#filesAckExpFormat_xlsx").prop("checked")?exportFormat="2":pageId.find("#filesAckExpFormat_csv").prop("checked")&&(exportFormat="3");var viewUrl="/exportAcknowledgement?action=exportAcknowledgement&fileId="+FilesOperations.Acknowledgement.AckDetails[2]+"&start=0&limit=200&ExportType="+FilesOperations.Acknowledgement.Export.view+"&exportFormat="+exportFormat;"null"!=contextPath&&"undefined"!=contextPath&&(viewUrl="/"+contextPath+viewUrl),window.open(viewUrl),FilesOperations.Acknowledgement.Export.EXPACK_MODAL.close(!0)}},FilesOperations.ExportFiles={init:function(){if(FilesUtil.IP.isRestricted)FilesUtil.IP.showError(!0);else if(FilesUtil.Geo.isRestricted)FilesUtil.Geo.showError(!0);else{var title="",tabGroup=FilesUtil.Page.getTabGroup();title="1"==tabGroup?ZPI18N.getString("zp.files.operations.exportalert",new Array(ZSEC.Encoder.encodeForHTML(FilesUtil.compdisname))):ZPI18N.getString("zp.files.operations.exportalert",new Array(ZSEC.Encoder.encodeForHTML(FilesUtil.hrfiledisname)));var infoPopUp=new InfoAlertMessage;infoPopUp.title=title,infoPopUp.despcription=ZPI18N.getString("zp.files.operations.exportinfo1"),infoPopUp.yesButtonText=ZPI18N.getString("zp.confirm"),infoPopUp.cancelButtonText=ZPI18N.getString("zp.cancel"),infoPopUp.callback=function(){if(0==FilesUtil.loginUserRoleCheck||1==FilesUtil.loginUserRoleCheck){var formData=new FormData;formData.append("fileType",tabGroup),formData.append("conreqcsr",csrfToken),formData.append("start",1),formData.append("limit",200),formData=FilesUtil.Geo.setLatLongParams(formData,!0),formData=FilesOperations.ExportFiles.getFilterData(formData),$.ajax({url:"/zpfiles/operations/exportFiles",type:"POST",data:formData,contentType:!1,processData:!1,success:function(data){ZPeople.Message.success(ZPI18N.getString("zp.files.operations.export1"))},error:function(req){var errResponse=req.responseJSON[1];8103!==req.status&&8101!==req.status&&500!==req.status||ZPeople.Message.failure(errResponse.msg)}})}else ZPeople.Message.failure(ZPI18N.getString("zp.files.operations.permdeny"))},infoPopUp.show()}},getFilterData:function(formData){var parentContainer=FilesUtil.Page.getParentContainer(),tabGroup=FilesUtil.Page.getTabGroup(),searchObj=FilesUtil.Page.getPageData(parentContainer,"2")[2];if(null!=searchObj&&void 0!=searchObj&&Object.keys(searchObj).length>0)if(null!=searchObj.searchFileName&&void 0!=searchObj.searchFileName&&""!=searchObj.searchFileName&&formData.append("searchFileName",searchObj.searchFileName),null!=searchObj.searchFileExtn&&void 0!=searchObj.searchFileExtn&&""!=searchObj.searchFileExtn&&formData.append("searchFileExtn",searchObj.searchFileExtn),null!=searchObj.catId&&void 0!=searchObj.catId&&"-1"!=searchObj.catId&&""!=searchObj.catId&&formData.append("catId",searchObj.catId),null!=searchObj.fromDate&&void 0!=searchObj.fromDate&&""!=searchObj.fromDate&&formData.append("fromDate",searchObj.fromDate),null!=searchObj.toDate&&void 0!=searchObj.toDate&&""!=searchObj.toDate&&formData.append("toDate",searchObj.toDate),"1"==tabGroup){null!=searchObj.isExpiredFilesView&&void 0!=searchObj.isExpiredFilesView&&""!=searchObj.isExpiredFilesView&&formData.append("isExpiredFilesView",searchObj.isExpiredFilesView);var pageId=settingsPage.container.find("#orgFile_filterModal").parent(),nodeId=ZPeopleComponents.select(pageId.find("#filterOrgFile_loc"+parentContainer)).getValue();parentContainer===FilesUtil.Page.pageIdMap.ENT?(formData.append("filterView",FilesOperations.filterView.ENT),null!=nodeId&&void 0!=nodeId&&""!=nodeId&&"-1"!=nodeId&&formData.append("entityId",nodeId)):parentContainer===FilesUtil.Page.pageIdMap.UNIT?(formData.append("filterView",FilesOperations.filterView.UNIT),null!=nodeId&&void 0!=nodeId&&""!=nodeId&&"-1"!=nodeId&&formData.append("unitId",nodeId)):parentContainer===FilesUtil.Page.pageIdMap.DIV?(formData.append("filterView",FilesOperations.filterView.DIV),null!=nodeId&&void 0!=nodeId&&""!=nodeId&&"-1"!=nodeId&&formData.append("divisionId",nodeId)):parentContainer===FilesUtil.Page.pageIdMap.DEPT?(formData.append("filterView",FilesOperations.filterView.DEPT),null!=nodeId&&void 0!=nodeId&&""!=nodeId&&"-1"!=nodeId&&formData.append("deptId",nodeId)):parentContainer===FilesUtil.Page.pageIdMap.LOC&&(formData.append("filterView",FilesOperations.filterView.LOC),null!=nodeId&&void 0!=nodeId&&""!=nodeId&&"-1"!=nodeId&&formData.append("locationId",nodeId))}else"0"==tabGroup&&(null!=searchObj.employeeId&&void 0!=searchObj.employeeId&&"-1"!=searchObj.employeeId&&""!=searchObj.employeeId&&formData.append("employeeId",searchObj.employeeId),null!=searchObj.entityId&&void 0!=searchObj.entityId&&"-1"!=searchObj.entityId&&""!=searchObj.entityId&&formData.append("entityId",searchObj.entityId),null!=searchObj.unitId&&void 0!=searchObj.unitId&&"-1"!=searchObj.unitId&&""!=searchObj.unitId&&formData.append("unitId",searchObj.unitId),null!=searchObj.divisionId&&void 0!=searchObj.divisionId&&"-1"!=searchObj.divisionId&&""!=searchObj.divisionId&&formData.append("divisionId",searchObj.divisionId),null!=searchObj.deptId&&void 0!=searchObj.deptId&&"-1"!=searchObj.deptId&&""!=searchObj.deptId&&formData.append("deptId",searchObj.deptId),null!=searchObj.locationId&&void 0!=searchObj.locationId&&"-1"!=searchObj.locationId&&""!=searchObj.locationId&&formData.append("locationId",searchObj.locationId),null!=searchObj.roleId&&void 0!=searchObj.roleId&&"-1"!=searchObj.roleId&&""!=searchObj.roleId&&formData.append("roleId",searchObj.roleId),null!=searchObj.filterBy&&void 0!=searchObj.filterBy&&""!=searchObj.filterBy&&formData.append("filterBy",searchObj.filterBy));else"1"==tabGroup&&(parentContainer===FilesUtil.Page.pageIdMap.ENT?formData.append("filterView",FilesOperations.filterView.ENT):parentContainer===FilesUtil.Page.pageIdMap.UNIT?formData.append("filterView",FilesOperations.filterView.UNIT):parentContainer===FilesUtil.Page.pageIdMap.DIV?formData.append("filterView",FilesOperations.filterView.DIV):parentContainer===FilesUtil.Page.pageIdMap.DEPT?formData.append("filterView",FilesOperations.filterView.DEPT):parentContainer===FilesUtil.Page.pageIdMap.LOC&&formData.append("filterView",FilesOperations.filterView.LOC));return formData}},FilesOperations.copyMove={modelId:"tabcopyMove_Files",popupId:"copyMove_Files",cardId:"cardcopyMove_Files",COPYMOVEFILE_MODAL:null,isOrgInit:!1,isEmpInit:!1,operationMode:"",constructModal:function(){if(""==$(settingsPage.mainWrapId).find("#"+FilesOperations.copyMove.cardId).html().trim()){var html='<form><div class="zpl_crd">';html+='<div class="zpl_crdcnt">',html+='<div class="zpl_secn"><h5 id="cpmvhdr">Where would you like to copy the selected files to?</h5></div>',html+='<div id="cpmv_orgField_wpr" class="zpl_secn"> <div> <label class="zpl_mtry"></label> </div> <div> <select id="cpmv_orgField_files" data-show-search-field="true"></select> </div> </div>',html+='<div id="cpmv_orgVal_wpr" class="zpl_secn zpl_DNI"> <div> <label class="zpl_mtry"></label> </div> <div> <select id="cpmv_orgVal_files" data-show-search-field="true"></select> </div> </div>',html+='<div id="cpmv_roleVal_wpr" class="zpl_secn zpl_DNI"> <div> <label class="zpl_mtry">'+ZPI18N.getString("zp.role")+'</label> </div> <div> <select id="cpmv_roleVal_files" data-show-search-field="true"></select> </div> </div>',html+="</form></div></div>",$(settingsPage.mainWrapId).find("#"+FilesOperations.copyMove.cardId).html(html)}},openModal:function(mode){if(FilesUtil.IP.isRestricted)FilesUtil.IP.showError(!0);else if(FilesUtil.Geo.isRestricted)FilesUtil.Geo.showError(!0);else{if(1==mode?FilesOperations.copyMove.popupName=ZPI18N.getString("zp.files.copyfile"):2==mode&&(FilesOperations.copyMove.popupName=ZPI18N.getString("zp.files.movefile")),FilesOperations.copyMove.operationMode=mode,0==$(settingsPage.mainWrapId).find("#"+FilesOperations.copyMove.modelId).length){var popupTab=new Tab(FilesOperations.copyMove.popupId,FilesOperations.copyMove.constructModal,FilesOperations.copyMove.submit);FilesOperations.copyMove.COPYMOVEFILE_MODAL=new popupModal(FilesOperations.copyMove.popupName,popupTab),FilesOperations.copyMove.COPYMOVEFILE_MODAL.save=ZPI18N.getString("zp.confirm"),FilesOperations.copyMove.COPYMOVEFILE_MODAL.cancel=ZPI18N.getString("zp.cancel")}FilesOperations.copyMove.COPYMOVEFILE_MODAL.setCloseCallback(FilesOperations.copyMove.hide),FilesOperations.copyMove.COPYMOVEFILE_MODAL.construct(),$(settingsPage.mainWrapId).find("#"+FilesOperations.copyMove.modelId).find(".zpl_mhder").find("h4").text(FilesOperations.copyMove.popupName),1==mode?$("#"+FilesOperations.copyMove.cardId).find("#cpmv_orgField_wpr").find(".zpl_mtry").text(ZPI18N.getString("zp.copyto")):2==mode&&$("#"+FilesOperations.copyMove.cardId).find("#cpmv_orgField_wpr").find(".zpl_mtry").text(ZPI18N.getString("zp.moveto")),ZPeopleComponents.isComponent("#cpmv_orgField_files")&&ZPeopleComponents.select($("#cpmv_orgField_files")).setValue("-1"),ZPeopleComponents.isComponent("#cpmv_orgVal_files")&&ZPeopleComponents.select($("#cpmv_orgVal_files")).setValue("-1");var cardId=$(settingsPage.mainWrapId).find("#"+FilesOperations.copyMove.cardId);cardId.find(".ztextbox--error__label").remove(),cardId.find(".ztextbox__error").removeClass("ztextbox__error");var tabGroup=FilesUtil.Page.getTabGroup();"1"==tabGroup?FilesOperations.copyMove.showOrgFileField():FilesOperations.copyMove.showEmpFileField(),"1"==tabGroup?FilesOperations.copyMove.initOrgCompDD():"0"==tabGroup&&FilesOperations.copyMove.openRoleField(),1==mode?cardId.find("#cpmvhdr").text(ZPI18N.getString("zp.files.operations.cpmvheader",new Array(ZPI18N.getString("zp.small.copy")))):2==mode&&cardId.find("#cpmvhdr").text(ZPI18N.getString("zp.files.operations.cpmvheader",new Array(ZPI18N.getString("zp.small.move"))))}},initOrgCompDD:function(){FilesOperations.copyMove.showOrgFileField();var id="cpmv_orgField_files";if(!ZPeopleComponents.isComponent("#"+id)){var options=[];options.push({id:"-1",value:"select",name:ZPI18N.getString("zp.select")}),options.push({id:"1",value:"Location",name:ZPI18N.getString("zp.location")}),options.push({id:"2",value:"Department",name:ZPeople.orgStructureDispNameMap.department}),isOrgStructureEnabled&&null!=ZPeople.orgStructureTagMap&&(!0===ZPeople.orgStructureTagMap.entity&&options.push({id:"3",value:"Entity",name:ZPeople.orgStructureDispNameMap.entity}),!0===ZPeople.orgStructureTagMap.unit&&options.push({id:"4",value:"Business_unit",name:ZPeople.orgStructureDispNameMap.unit}),!0===ZPeople.orgStructureTagMap.division&&options.push({id:"5",value:"Division",name:ZPeople.orgStructureDispNameMap.division}));var tokenObj={};tokenObj.options=options,tokenObj.contentType="text",tokenObj.dataMapping={label:"name",informativeText:"name",value:"id"},tokenObj.change=FilesOperations.copyMove.changeNode,tokenObj.dropdownList={fitForElement:!0,moveOnScroll:!0},ZPeopleComponents.select($("#"+id),tokenObj)}FilesOperations.copyMove.isOrgInit=!0},changeNode:function(){var id="cpmv_orgVal_files";ZPeopleComponents.isComponent("#"+id)&&ZPeopleComponents.select($("#"+id)).destroy(),FilesUtil.getSharingOptsList();var fieldVal=ZPeopleComponents.select($("#cpmv_orgField_files")).getValue();if(-1!=fieldVal){var dataList=[];"1"==fieldVal?dataList=JSON.parse(JSON.stringify(FilesUtil.sharingOpts.Location)):"2"==fieldVal?dataList=JSON.parse(JSON.stringify(FilesUtil.sharingOpts.Department)):"3"==fieldVal?dataList=JSON.parse(JSON.stringify(FilesUtil.sharingOpts.Entity)):"4"==fieldVal?dataList=JSON.parse(JSON.stringify(FilesUtil.sharingOpts.Unit)):"5"==fieldVal&&(dataList=JSON.parse(JSON.stringify(FilesUtil.sharingOpts.Division))),dataList.unshift({Value:ZPI18N.getString("zp.select"),Id:"-1"});var tokenObj={};tokenObj.options=dataList,tokenObj.contentType="text",tokenObj.dataMapping={label:"Value",informativeText:"Value",value:"Id"},tokenObj.dropdownList={fitForElement:!0,moveOnScroll:!0},ZPeopleComponents.select($("#"+FilesOperations.copyMove.cardId).find("#"+id),tokenObj);var nodeName=ZPeopleComponents.select($("#cpmv_orgField_files")).getElement().find(".zselectbox__text").text();$("#"+FilesOperations.copyMove.cardId).find("#cpmv_orgVal_wpr").find(".zpl_mtry").text(nodeName),$("#"+FilesOperations.copyMove.cardId).find("#cpmv_orgVal_wpr").removeClass("zpl_DNI")}else $("#"+FilesOperations.copyMove.cardId).find("#cpmv_orgVal_wpr").addClass("zpl_DNI")},openRoleField:function(){FilesOperations.copyMove.showEmpFileField();var data=FilesUtil.getRoleList();data.unshift({name:ZPI18N.getString("zp.select"),id:"-1"});var tokenObj={};tokenObj.options=data,tokenObj.contentType="text",tokenObj.dataMapping={label:"name",informativeText:"name",value:"id"},tokenObj.dropdownList={fitForElement:!0,moveOnScroll:!0,isTextHTMLEncoded:!0},tokenObj.isLabelHTMLEncoded=!0,ZPeopleComponents.select($("#"+FilesOperations.copyMove.cardId).find("#cpmv_roleVal_files"),tokenObj),FilesOperations.copyMove.isEmpInit=!0},showOrgFileField:function(){$("#"+FilesOperations.copyMove.cardId).find("#cpmv_orgField_wpr").removeClass("zpl_DNI"),$("#"+FilesOperations.copyMove.cardId).find("#cpmv_roleVal_wpr").addClass("zpl_DNI")},showEmpFileField:function(){$("#"+FilesOperations.copyMove.cardId).find("#cpmv_orgField_wpr").addClass("zpl_DNI"),$("#"+FilesOperations.copyMove.cardId).find("#cpmv_orgVal_wpr").addClass("zpl_DNI"),$("#"+FilesOperations.copyMove.cardId).find("#cpmv_roleVal_wpr").removeClass("zpl_DNI")},getValueForType:function(type){var compName="";return"1"==type?compName="Location":"2"==type?compName="Department":"3"==type?compName="Entity":"4"==type?compName="Business_unit":"5"==type&&(compName="Division"),compName},submit:function(){if(0==FilesUtil.loginUserRoleCheck||1==FilesUtil.loginUserRoleCheck){FilesUtil.Page.getPageId();var tabGroup=FilesUtil.Page.getTabGroup(),filesArr=[],nodeType="",fileOperationMode="",nodeValue="";if("1"==FilesOperations.copyMove.operationMode?fileOperationMode="copy":"2"==FilesOperations.copyMove.operationMode&&(fileOperationMode="move"),"1"===tabGroup){filesArr=FilesOperations.Delete.getFileList().split(",");var fieldType=ZPeopleComponents.select($("#cpmv_orgField_files")).getValue();if(nodeType=FilesOperations.copyMove.getValueForType(fieldType),nodeValue=ZPeopleComponents.select($("#cpmv_orgVal_files")).getValue(),null==fieldType||void 0==fieldType||""==fieldType||"-1"==fieldType)return ZPeopleComponents.select($("#cpmv_orgField_files")).getElement().addClass("ztextbox__error"),void $("#cpmv_orgField_files").parent().append('<span class="ztextbox--error__label">'+ZPI18N.getString("zp.files.operations.selectoption")+"</span>");if(null==nodeValue||void 0==nodeValue||""==nodeValue||"-1"==nodeValue)return ZPeopleComponents.select($("#cpmv_orgVal_files")).getElement().addClass("ztextbox__error"),void $("#cpmv_orgVal_files").parent().append('<span class="ztextbox--error__label">'+ZPI18N.getString("zp.files.operations.selectoption")+"</span>")}else if(filesArr=FilesOperations.Delete.getFileList().split(","),null==(nodeValue=ZPeopleComponents.select($("#cpmv_roleVal_files")).getValue())||void 0==nodeValue||""==nodeValue||"-1"==nodeValue)return ZPeopleComponents.select($("#cpmv_roleVal_files")).getElement().addClass("ztextbox__error"),void $("#cpmv_roleVal_files").parent().append('<span class="ztextbox--error__label">'+ZPI18N.getString("zp.files.operations.selectoption")+"</span>");if(null!==fileOperationMode&&void 0!==fileOperationMode&&"copy"===fileOperationMode){var cmcompJson={},cmRoleJson={},comp_fileId=[],role_FileId=[],skipCount=0;if("1"===tabGroup){for(var i=0;i<filesArr.length;i++){var eachFileId=filesArr[i],filedata=settingsPage.container.find("#orgFileTr_"+eachFileId).data().ldata;if(null!==nodeType&&void 0!==nodeType&&""!==nodeType){if(0==filedata.fileLocationID.length&&0==Object.keys(filedata.fileOrgStructure).length){skipCount++;continue}nodeType.indexOf("Location")>-1?$.inArray(nodeValue,filedata.fileLocationID)<=-1?comp_fileId.push(eachFileId):skipCount++:nodeType.indexOf("Entity")>-1?!filedata.fileOrgStructure.hasOwnProperty("Entity")||filedata.fileOrgStructure.hasOwnProperty("Entity")&&$.inArray(nodeValue,Object.keys(filedata.fileOrgStructure.Entity))<=-1?comp_fileId.push(eachFileId):skipCount++:nodeType.indexOf("Department")>-1?!filedata.fileOrgStructure.hasOwnProperty("Department")||filedata.fileOrgStructure.hasOwnProperty("Department")&&$.inArray(nodeValue,Object.keys(filedata.fileOrgStructure.Department))<=-1?comp_fileId.push(eachFileId):skipCount++:nodeType.indexOf("Business_unit")>-1?!filedata.fileOrgStructure.hasOwnProperty("Unit")||filedata.fileOrgStructure.hasOwnProperty("Unit")&&$.inArray(nodeValue,Object.keys(filedata.fileOrgStructure.Unit))<=-1?comp_fileId.push(eachFileId):skipCount++:nodeType.indexOf("Division")>-1&&(!filedata.fileOrgStructure.hasOwnProperty("Division")||filedata.fileOrgStructure.hasOwnProperty("Division")&&$.inArray(nodeValue,Object.keys(filedata.fileOrgStructure.Division))<=-1?comp_fileId.push(eachFileId):skipCount++)}}if(null!==nodeValue&&void 0!==nodeValue&&""!==nodeValue){if(!(null!==comp_fileId&&void 0!==comp_fileId&&comp_fileId.length>0))return void ZPeople.Message.success(ZPI18N.getString("zp.files.operations.cpallfail"));cmcompJson[nodeValue]=comp_fileId}}if("0"===tabGroup){for(i=0;i<filesArr.length;i++){eachFileId=filesArr[i],filedata=settingsPage.container.find("#empFileTr_"+eachFileId).data().ldata;""!==nodeValue&&void 0!==nodeValue&&null!==nodeValue&&$.inArray(nodeValue,filedata.fileRoleID)<=-1&&role_FileId.push(eachFileId)}null!==nodeValue&&void 0!==nodeValue&&""!==nodeValue&&null!==role_FileId&&void 0!==role_FileId&&role_FileId.length>0&&(cmRoleJson[nodeValue]=role_FileId)}}var formData=new FormData;if(null!==fileOperationMode&&void 0!==fileOperationMode&&"move"===fileOperationMode){var fileID=FilesOperations.Delete.getFileList();formData.append("moveFileId",fileID),"1"===tabGroup&&null!==nodeValue&&void 0!==nodeValue&&""!==nodeValue&&formData.append("moveCompVal",nodeValue),"0"===tabGroup&&null!==nodeValue&&void 0!==nodeValue&&""!==nodeValue&&formData.append("roleId",nodeValue)}formData.append("conreqcsr",csrfToken),formData.append("fileType",tabGroup),formData.append("fileOperationMode",fileOperationMode),"1"===tabGroup?null!==cmcompJson&&void 0!==cmcompJson&&Object.keys(cmcompJson).length>0&&formData.append("cmcompJson",JSON.stringify(cmcompJson)):"0"===tabGroup&&null!==cmRoleJson&&void 0!==cmRoleJson&&Object.keys(cmRoleJson).length>0&&formData.append("copyRoleJson",JSON.stringify(cmRoleJson)),null!==nodeType&&void 0!==nodeType&&""!==nodeType&&formData.append("component",nodeType),formData=FilesUtil.Geo.setLatLongParams(formData,!0),$.ajax({url:"/zpfiles/operations/copyMoveFiles",type:"POST",data:formData,contentType:!1,processData:!1,success:function(data){null!=data&&void 0!=data&&data.length>0&&1==data[1]&&(null!==fileOperationMode&&void 0!==fileOperationMode&&"copy"===fileOperationMode?skipCount>0?ZPeople.Message.success(ZPI18N.getString("zp.files.operations.cppartsuccess",new Array(skipCount))):ZPeople.Message.success(ZPI18N.getString("zp.files.operations.cpmvallsuccess",new Array(ZPI18N.getString("zp.files.operations.copied")))):null!==fileOperationMode&&void 0!==fileOperationMode&&"move"===fileOperationMode&&ZPeople.Message.success(ZPI18N.getString("zp.files.operations.cpmvallsuccess",new Array(ZPI18N.getString("zp.files.operations.moved"))))),FilesOperations.Util.selectAll(void 0,!0,!0),FilesOperations.copyMove.COPYMOVEFILE_MODAL.close(),FilesOperations.Page.reloadOtherPages()},error:function(req){var errResponse=req.responseJSON[1];8103!==req.status&&8101!==req.status&&500!==req.status&&8130!=req.status||ZPeople.Message.failure(errResponse.msg)}})}else ZPeople.Message.failure(ZPI18N.getString("zp.files.operations.permdeny"))},hide:function(){FilesOperations.copyMove.clearFields(),$(settingsPage.mainWrapId).find("#"+FilesOperations.copyMove.modelId).remove()},clearFields:function(){var pageId=$("#"+FilesOperations.copyMove.cardId);pageId.find(".ztextbox--error__label").remove(),pageId.find(".ztextbox__error").removeClass("ztextbox__error"),ZPeopleComponents.isComponent("#cpmv_orgField_files")&&ZPeopleComponents.select(pageId.find("#cpmv_orgField_files")).destroy(),ZPeopleComponents.isComponent("#cpmv_orgVal_files")&&ZPeopleComponents.select(pageId.find("#cpmv_orgVal_files")).destroy(),ZPeopleComponents.isComponent("#cpmv_roleVal_files")&&ZPeopleComponents.select(pageId.find("#cpmv_roleVal_files")).destroy()}},FilesOperations.Redirect={goToOperations:function(type){var newHash="operations/files/loc";1==type?newHash="operations/files/loc":0==type&&(newHash="operations/files/all"),window.location.href="#"+newHash}};